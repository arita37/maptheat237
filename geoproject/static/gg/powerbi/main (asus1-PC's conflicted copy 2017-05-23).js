//>>built
require({cache:{"esriPBI/esriPBIMain":function(){define("dojo/_base/declare dojo/promise/all dojo/Evented dojo/_base/lang dojo/_base/array dojo/when dojo/dom dojo/debounce dojo/Deferred dojo/string dojo/i18n!./nls/strings ./extensions/Extensions ./adapters/DefaultsAdapter ./adapters/LogAdapter ./adapters/ArcGISAdapter ./adapters/DataAdapter ./adapters/StorageAdapter ./managers/ToolManager ./managers/ExtensionPackManager ./managers/DataManager ./managers/LogManager ./managers/LayoutManager ./managers/MapManager ./managers/ArcGISManager ./managers/StorageManager ./utils/logger! ./appRouter esri/config ./override dojo/domReady!".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M,L){return g([a],{toolManager:null,extensionPackManager:null,layoutManager:null,logManager:null,arcgisManager:null,storageManager:null,adapters:null,map:null,toolbar:null,layoutNode:null,constructor:function(a,e){b.mixin(this,a);this.srcNodeRef=h.byId(e);L.defaults.io.corsEnabledServers.push("lacdn.arcgis.com");L.defaults.io.corsEnabledServers.push("laqacdn.arcgis.com");L.defaults.io.corsEnabledServers.push("ladevcdn.arcgis.com");L.defaults.io.corsEnabledServers.push("localhost:8080");
L.defaults.io.corsEnabledServers.push("freelunch.esri.com");L.defaults.io.corsEnabledServers.push("ladev.arcgis.com");L.defaults.io.corsEnabledServers.push("laqa.arcgis.com");L.defaults.io.corsEnabledServers.push("la.arcgis.com");L.defaults.io.corsEnabledServers.push("utility.arcgis.com");L.defaults.io.corsEnabledServers.push("utilitydevext.arcgis.com");L.defaults.map.logoLink="http://www.esri.com/powerbi";this._host=a.host;this.pbiSelectionManager=a.host.createSelectionManager();this._dataView=a.options.dataViews[0];
if(this._storage=b.getObject("metadata.objects.mapObject.value",!1,this._dataView))this.ignoreUpdateOnlyOnce=!0},postscript:function(){this.adapters||(this.adapters={});this.adapters.storage||(this.adapters.storage=new x({persistedData:this._storage,host:this._host}));this.adapters.defaults||(this.adapters.defaults=new u);this.adapters.arcgis||(this.adapters.arcgis=new w);this.adapters.log||(this.adapters.log=new t);this.adapters.data||(this.adapters.data=new v({pbiSelectionManager:this.pbiSelectionManager,
host:this._host,app:this}),this.adapters.data.setDataView(this._dataView));this._guardAdapterFunctions("arcgis",["initialize","getToken"]);this._guardAdapterFunctions("defaults","initialize getToolCollections getExtensionPacks getMapConfiguration getMapOptions getLayout getBehaviors".split(" "));this._guardAdapterFunctions("log",["initialize","log"]);this._guardAdapterFunctions("storage",["initialize","get","set","clear"]);this._createManagers();this.on("rendererChanged, time-info-set",n(b.hitch(this,
this.save),500))},startup:function(){return this._initialize()},destroy:function(){this._executeOnManagers(function(){try{this.destroy()}catch(a){}})},save:function(){this.skipSave||(this.ignoreUpdateOnlyOnce=!0,this.storageManager.store({map:this.mapManager}).then(b.hitch(this,function(a){a&&(this.ignoreUpdateOnlyOnce=!1)})))},_initialize:function(){var a=0,e=new f,b=this,d=[this._registerEventListeners,this._initializeAdapters,this._initializeManagers,this._startupManagers,function(){b._started=
!0;b.emit("started",b);e.resolve();var a={};a.eventId=b._storage?b.adapters.log.eventIDEnum.LoadVisual:b.adapters.log.eventIDEnum.CreateVisual;a.eventType=b.adapters.log.eventTypeEnum.Startup;b.adapters.log.logTelemetry(a)}],s=function(){var E=d[a++],f=function(q){K.error("app startup failed",q);e.reject({message:p.appStartupFailed,error:q})};if(E)try{c(E.call(b),s,f)}catch(h){f(h)}};s();return e.promise},initializeData:function(a){this.ignoreUpdateOnlyOnce?this.ignoreUpdateOnlyOnce=!1:(this.adapters.data.setDataView(a.dataViews[0]),
M.createSingleton({app:this}).route())},updateView:function(a,e,c){var b=1===a||0===a;if(this.previousView&&this.previousView.width<c.width&&!b){var p={};p.eventId=this.adapters.log.eventIDEnum.InFocusEditToggle;p.eventType=this.adapters.log.eventTypeEnum.Click;this.adapters.log.logTelemetry(p)}this.inFocusEditMode=!b;this.emit("edit-mode",{inFocusEditMode:!b,recenterMap:2!==e&&(1===a||2===a)});this.previousView=c},_guardAdapterFunctions:function(a,e){var b=this.adapters[a];b&&d.forEach(e,function(e){var p=
b[e];"function"===typeof p&&(b[e]=function(){try{return c(p.apply(this,arguments))}catch(E){return K.error("exception thrown by "+a+"Adapter."+e+": ",E),(new f).reject(E)}})})},_createManagers:function(){this.extensionPackManager=new A({app:this});this.toolManager=new B({app:this});this.layoutManager=new F({app:this,srcNodeRef:this.srcNodeRef});this.mapManager=new H({app:this});this.dataManager=new C({app:this});this.storageManager=new I({app:this});this.arcgisManager=new J({app:this});this.logManager=
new z({app:this});this.emit("managers-created")},_initializeAdapters:function(){return m([this._setAdapter([this.mapManager,this.toolManager,this.layoutManager,this.extensionPackManager],"defaults"),this._setAdapter([this.storageManager],"storage"),this._setAdapter([this.logManager],"log"),this._setAdapter([this.arcgisManager],"arcgis"),this._setAdapter([this.dataManager],"data")]).then(b.hitch(this,this.emit,"adapters-initialized"))},_setAdapter:function(a,e){var b=this;if(e&&this.adapters[e]){var s=
this.adapters[e];d.forEach(a,function(a){a.adapter=s});return c(s.initialize({type:e}),function(){b.emit(e+"-adapter-initialized",s)})}return(new f).reject({message:p.undefinedParameterPassed})},_initializeManagers:function(){var a=this;return c(a.logManager.initialize()).then(function(){return c(a.storageManager.load())}).then(function(e){return c(a.extensionPackManager.initialize(e.extension)).then(function(){return e})}).then(function(b){return a._executeOnManagers(function(a){return c(this.initialize(b[a])).otherwise(function(c){K.error(e.substitute(p.failedToInitalizeManager,
[a]),{error:c,config:b[a]});throw c;})},["extension","log"])}).then(function(){a.emit("initialized")})},_registerEventListeners:function(){this._executeOnManagers(function(){this.registerEventListeners()});this.emit("manager-event-listeners-registered")},_startupManagers:function(){var a=this,e=new f,b={log:a._startLogging,storage:a._startStorage,extension:a._startExtensions,tool:a._startTools,layout:a._startLayout,arcgis:a._startArcGIS,data:a._startData,map:a._startMap},p=0,d="log storage extension tool layout arcgis data map".split(" "),
E=function(){var f=d[p++];if(f){var s=b[f],q=function(k){K.error("rejected",k.message,k.stack);e.reject(k)};if(s)try{c(s.call(a),function(){a.emit(f+"-manager-started",a._getManagers()[f]);E()},q)}catch(k){q(k)}}else a._connectCommands().then(e.resolve,e.reject)};E();return e.promise},_startLogging:function(){return this.logManager.startup()},_startStorage:function(){return this.storageManager.startup()},_startExtensions:function(){return this.extensionPackManager.startup()},_startTools:function(){return this.toolManager.startup()},
_startLayout:function(){return this.layoutManager.startup()},_startArcGIS:function(){this.arcgisManager.on("signed-out",b.hitch(this,this.destroy));return this.arcgisManager.startup(this.layoutManager.layout,this.adapters.storage)},_startData:function(){return this.dataManager.startup()},_startMap:function(){var a=this.layoutManager&&this.layoutManager.layout&&this.layoutManager.layout.getMapNode();return c(this.mapManager.startup(a,this.arcgisManager.portal)).always(function(){return arguments})},
_connectCommands:function(){return m(this.toolManager.connectCommands())},_executeOnManagers:function(a,e){var b=this._getManagers(),c=[],p;for(p in b)b.hasOwnProperty(p)&&(!e||-1===d.indexOf(e,p))&&c.push({manager:b[p],configSectionName:p});return m(d.map(c,function(E){return a.call(E.manager,E.configSectionName)}))},_getManagers:function(){return{extension:this.extensionPackManager,layout:this.layoutManager,tool:this.toolManager,map:this.mapManager,data:this.dataManager,arcgis:this.arcgisManager,
storage:this.storageManager,log:this.logManager}}})})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(g,m,a){var b=g.some;return function(d){var c,h;d instanceof Array?h=d:d&&"object"===typeof d&&(c=d);var n,f=[];if(c){h=[];for(var e in c)Object.hasOwnProperty.call(c,e)&&(f.push(e),h.push(c[e]));n={}}else h&&(n=[]);if(!h||!h.length)return(new m).resolve(n);var p=new m;p.promise.always(function(){n=f=null});var s=h.length;b(h,function(e,b){c||f.push(b);a(e,
function(a){p.isFulfilled()||(n[f[b]]=a,0===--s&&p.resolve(n))},p.reject);return p.isFulfilled()});return p.promise}})},"dojo/debounce":function(){define([],function(){return function(g,m){var a;return function(){a&&clearTimeout(a);var b=this,d=arguments;a=setTimeout(function(){g.apply(b,d)},m)}}})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(g,m){var a=/[&<>'"\/]/g,b={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","/":"\x26#x2F;"},
d={};m.setObject("dojo.string",d);d.escape=function(c){return!c?"":c.replace(a,function(a){return b[a]})};d.rep=function(a,b){if(0>=b||!a)return"";for(var d=[];;){b&1&&d.push(a);if(!(b>>=1))break;a+=a}return d.join("")};d.pad=function(a,b,n,f){n||(n="0");a=String(a);b=d.rep(n,Math.ceil((b-a.length)/n.length));return f?a+b:b+a};d.substitute=function(a,b,d,f){f=f||g.global;d=d?m.hitch(f,d):function(a){return a};return a.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(a,c,s){if(""==c)return"$";
a=m.getObject(c,!1,b);s&&(a=m.getObject(s,!1,f).call(f,a,c));return d(a,c).toString()})};d.trim=String.prototype.trim?m.trim:function(a){a=a.replace(/^\s+/,"");for(var b=a.length-1;0<=b;b--)if(/\S/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a};return d})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),function(g,m,a,b,d,c,h,n,f){a.add("dojo-preload-i18n-Api",1);h=g.i18n={};var e=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,
p=function(a,e,b,c){var p=[b+c];e=e.split("-");for(var d="",f=0;f<e.length;f++)if(d+=(d?"-":"")+e[f],!a||a[d])p.push(b+d+"/"+c),p.specificity=d;return p},s={},u=function(a,e,b){b=b?b.toLowerCase():g.locale;a=a.replace(/\./g,"/");e=e.replace(/\./g,"/");return/root/i.test(b)?a+"/nls/"+e:a+"/nls/"+b+"/"+e},t=g.getL10nName=function(a,e,b){return f.id+"!"+u(a,e,b)},w=function(a,e,b,d,f,h){a([e],function(n){var x=c.clone(n.root||n.ROOT),u=p(!n._v1x&&n,f,b,d);a(u,function(){for(var a=1;a<u.length;a++)x=
c.mixin(c.clone(x),arguments[a]);s[e+"/"+f]=x;x.$locale=u.specificity;h()})})},v=function(a){var e=d.extraLocale||[],e=c.isArray(e)?e:[e];e.push(a);return e},x=function(p,d,f){var h=p.split("*"),x="preload"==h[1];if(a("dojo-preload-i18n-Api")){x&&(s[p]||(s[p]=1,z(h[2],n.parse(h[3]),1,d)),f(1));if(!(h=x))A&&C.push([p,d,f]),h=A;if(h)return}else if(x){f(1);return}p=e.exec(p);var u=p[1]+"/",t=p[5]||p[4],B=u+t,h=(p=p[5]&&p[4])||g.locale||"",m=B+"/"+h;p=p?[h]:v(h);var U=p.length,T=function(){--U||f(c.delegate(s[m]))};
b.forEach(p,function(E){var e=B+"/"+E;a("dojo-preload-i18n-Api")&&F(e);s[e]?T():w(d,B,u,t,E,T)})};a("dojo-preload-i18n-Api");var B=h.normalizeLocale=function(a){a=a?a.toLowerCase():g.locale;return"root"==a?"ROOT":a},A=0,C=[],z=h._preloadLocalizations=function(a,e,p,d){function f(a,e){d([a],e)}function h(a,e){for(var b=a.split("-");b.length;){if(e(b.join("-")))return;b.pop()}e("ROOT")}function n(){for(--A;!A&&C.length;)x.apply(null,C.shift())}function u(p){p=B(p);h(p,function(x){if(0<=b.indexOf(e,
x)){var u=a.replace(/\./g,"/")+"_"+x;A++;f(u,function(a){for(var e in a){var b=a[e],q=e.match(/(.+)\/([^\/]+)$/),k;if(q&&(k=q[2],q=q[1]+"/",b._localized)){var r;if("ROOT"===x){var y=r=b._localized;delete b._localized;y.root=b;s[m.toAbsMid(e)]=y}else r=b._localized,s[m.toAbsMid(q+k+"/"+x)]=b;x!==p&&function(k,r,q,y){var a=[],E=[];h(p,function(q){y[q]&&(a.push(m.toAbsMid(k+q+"/"+r)),E.push(m.toAbsMid(k+r+"/"+q)))});a.length?(A++,d(a,function(){for(var y=a.length-1;0<=y;y--)q=c.mixin(c.clone(q),arguments[y]),
s[E[y]]=q;s[m.toAbsMid(k+r+"/"+p)]=c.clone(q);n()})):s[m.toAbsMid(k+r+"/"+p)]=q}(q,k,b,r)}}n()});return!0}return!1})}d=d||m;u();b.forEach(g.config.extraLocale,u)},F=function(){};new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}");
F=function(a){for(var e,b=a.split("/"),c=g.global[b[0]],p=1;c&&p<b.length-1;c=c[b[p++]]);c&&((e=c[b[p]])||(e=c[b[p].replace(/-/g,"_")]),e&&(s[a]=e));return e};h.getLocalization=function(a,e,b){var c;a=u(a,e,b);x(a,m,function(a){c=a});return c};return c.mixin(h,{dynamic:!0,normalize:function(a,e){return/^\./.test(a)?e(a):a},load:x,cache:s,getL10nName:t})})},"esriPBI/extensions/Extensions":function(){define(["./Field","./FeatureLayer","./Map","./PictureMarkerSymbol"],{})},"esriPBI/extensions/Field":function(){define(["dojo/_base/array",
"esri/layers/Field"],function(g,m){m.extend({postscript:function(a){this.inherited(arguments);this.customFormat=a&&a.customFormat;this.format=a&&a.format}})})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./RangeDomain ./CodedValueDomain".split(" "),function(g,m,a,b,d,c){return g(null,{declaredClass:"esri.layers.Field",constructor:function(a){if(a&&m.isObject(a)&&(this.name=a.name,this.type=a.type,this.alias=a.alias,this.length=a.length,this.editable=
a.editable,this.nullable=a.nullable,(a=a.domain)&&m.isObject(a)))switch(a.type){case "range":this.domain=new d(a);break;case "codedValue":this.domain=new c(a)}}})})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(g,m,a){g=function(){return this}();var b=g.location,d=b.pathname;a=b.protocol;b={version:"3.19",_appBaseUrl:a+"//"+b.host+d.substring(0,d.lastIndexOf(d.split("/")[d.split("/").length-1]))};m.noGlobals||(g.esri=b);(b.dijit=b.dijit||{})._arcgisUrl=
("http:"===a||"https:"===a?a:"http:")+"//www.arcgis.com/sharing/rest";return b})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(g,m,a,b,d,c){return g([c],{declaredClass:"esri.layers.RangeDomain",constructor:function(a){a&&m.isObject(a)&&(this.minValue=a.range[0],this.maxValue=a.range[1])},toJson:function(){var a=this.inherited(arguments);a.range=[this.minValue,this.maxValue];return d.fixJson(a)}})})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),
function(g,m,a,b,d,c,h,n,f){function e(a){return void 0!==a&&null!==a}function p(a,c,p){var f=p.match(/([^\(]+)(\([^\)]+\))?/i),s=b.trim(f[1]);p=c[a];var f=m.fromJson((f[2]?b.trim(f[2]):"()").replace(/^\(/,"({").replace(/\)$/,"})")),t=f.utcOffset;if(-1===g.indexOf(u,s))s=b.getObject(s),b.isFunction(s)&&(p=s(p,a,c,f));else if("number"===typeof p||"string"===typeof p&&p&&!isNaN(Number(p)))switch(p=Number(p),s){case "NumberFormat":return h.format(p,f);case "DateString":a=new Date(p);if(f.local||f.systemLocale)return f.systemLocale?
a.toLocaleDateString()+(f.hideTime?"":" "+a.toLocaleTimeString()):a.toDateString()+(f.hideTime?"":" "+a.toTimeString());a=a.toUTCString();f.hideTime&&(a=a.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return a;case "DateFormat":return a=new Date(p),e(t)&&(a=d.add(a,"minute",a.getTimezoneOffset()-t)),n.format(a,f)}return e(p)?p:""}function s(a,e){var b;if(e)for(b in a)a.hasOwnProperty(b)&&(void 0===a[b]?delete a[b]:a[b]instanceof Object&&s(a[b],!0));else for(b in a)a.hasOwnProperty(b)&&void 0===
a[b]&&delete a[b];return a}var u=["NumberFormat","DateString","DateFormat"],t=/<\/?[^>]+>/g;return{valueOf:function(a,e){for(var b in a)if(a[b]==e)return b;return null},stripTags:function(a){if(a){var e=typeof a;if("string"===e)a=a.replace(t,"");else if("object"===e)for(var b in a)(e=a[b])&&"string"===typeof e&&(e=e.replace(t,"")),a[b]=e}return a},substitute:function(a,c,f){var d,s,h;e(f)&&(b.isObject(f)?(d=f.first,s=f.dateFormat,h=f.numberFormat):d=f);if(!c||"${*}"===c){c=[];for(var n in a){f=a[n];
if(s&&-1!==g.indexOf(s.properties||"",n))f=p(n,a,s.formatter||"DateString");else if(h&&-1!==g.indexOf(h.properties||"",n))f=p(n,a,h.formatter||"NumberFormat");c.push(n+" \x3d "+(e(f)?f:"")+"\x3cbr/\x3e");if(d)break}return c.join("")}return b.replace(c,b.hitch({obj:a},function(a,b){var c=b.split(":");return 1<c.length?(b=c[0],c.shift(),p(b,this.obj,c.join(":"))):s&&-1!==g.indexOf(s.properties||"",b)?p(b,this.obj,s.formatter||"DateString"):h&&-1!==g.indexOf(h.properties||"",b)?p(b,this.obj,h.formatter||
"NumberFormat"):e(this.obj[b])?this.obj[b]:""}),/\$\{([^\}]+)\}/g)},filter:function(e,c,p){c=[b.isString(e)?e.split(""):e,p||a.global,b.isString(c)?new Function("item","index","array",c):c];p={};var f;e=c[0];for(f in e)c[2].call(c[f],e[f],f,e)&&(p[f]=e[f]);return p},startsWith:function(a,e,b){b=b||0;return a.indexOf(e,b)===b},endsWith:function(a,e,b){if("number"!==typeof b||!isFinite(b)||Math.floor(b)!==b||b>a.length)b=a.length;b-=e.length;a=a.indexOf(e,b);return-1!==a&&a===b},isDefined:e,fixJson:s}})},
"dojo/date":function(){define(["./has","./_base/lang"],function(g,m){var a={getDaysInMonth:function(b){var d=b.getMonth();return 1==d&&a.isLeapYear(b)?29:[31,28,31,30,31,30,31,31,30,31,30,31][d]},isLeapYear:function(a){a=a.getFullYear();return!(a%400)||!(a%4)&&!!(a%100)},getTimezoneName:function(a){var d=a.toString(),c="",h=d.indexOf("(");if(-1<h)c=d.substring(++h,d.indexOf(")"));else if(h=/([A-Z\/]+) \d{4}$/,d=d.match(h))c=d[1];else if(d=a.toLocaleString(),h=/ ([A-Z\/]+)$/,d=d.match(h))c=d[1];return"AM"==
c||"PM"==c?"":c},compare:function(a,d,c){a=new Date(+a);d=new Date(+(d||new Date));"date"==c?(a.setHours(0,0,0,0),d.setHours(0,0,0,0)):"time"==c&&(a.setFullYear(0,0,0),d.setFullYear(0,0,0));return a>d?1:a<d?-1:0},add:function(a,d,c){var h=new Date(+a),n=!1,f="Date";switch(d){case "day":break;case "weekday":var e;(d=c%5)?e=parseInt(c/5):(d=0<c?5:-5,e=0<c?(c-5)/5:(c+5)/5);var p=a.getDay(),s=0;6==p&&0<c?s=1:0==p&&0>c&&(s=-1);p+=d;if(0==p||6==p)s=0<c?2:-2;c=7*e+d+s;break;case "year":f="FullYear";n=!0;
break;case "week":c*=7;break;case "quarter":c*=3;case "month":n=!0;f="Month";break;default:f="UTC"+d.charAt(0).toUpperCase()+d.substring(1)+"s"}if(f)h["set"+f](h["get"+f]()+c);n&&h.getDate()<a.getDate()&&h.setDate(0);return h},difference:function(b,d,c){d=d||new Date;c=c||"day";var h=d.getFullYear()-b.getFullYear(),n=1;switch(c){case "quarter":b=b.getMonth();d=d.getMonth();b=Math.floor(b/3)+1;d=Math.floor(d/3)+1;n=d+4*h-b;break;case "weekday":h=Math.round(a.difference(b,d,"day"));c=parseInt(a.difference(b,
d,"week"));n=h%7;if(0==n)h=5*c;else{var f=0,e=b.getDay();d=d.getDay();c=parseInt(h/7);n=h%7;b=new Date(b);b.setDate(b.getDate()+7*c);b=b.getDay();if(0<h)switch(!0){case 6==e:f=-1;break;case 0==e:f=0;break;case 6==d:f=-1;break;case 0==d:f=-2;break;case 5<b+n:f=-2}else if(0>h)switch(!0){case 6==e:f=0;break;case 0==e:f=1;break;case 6==d:f=2;break;case 0==d:f=1;break;case 0>b+n:f=2}h=h+f-2*c}n=h;break;case "year":n=h;break;case "month":n=d.getMonth()-b.getMonth()+12*h;break;case "week":n=parseInt(a.difference(b,
d,"day")/7);break;case "day":n/=24;case "hour":n/=60;case "minute":n/=60;case "second":n/=1E3;case "millisecond":n*=d.getTime()-b.getTime()}return Math.round(n)}};m.mixin(m.getObject("dojo.date",!0),a);return a})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(g,m,a,b,d){var c={};g.setObject("dojo.number",c);c.format=function(a,b){b=g.mixin({},b||{});var e=m.normalizeLocale(b.locale),e=m.getLocalization("dojo.cldr","number",e);b.customs=
e;e=b.pattern||e[(b.type||"decimal")+"Format"];return isNaN(a)||Infinity==Math.abs(a)?null:c._applyPattern(a,e,b)};c._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;c._applyPattern=function(a,b,e){e=e||{};var p=e.customs.group,d=e.customs.decimal;b=b.split(";");var h=b[0];b=b[0>a?1:0]||"-"+h;if(-1!=b.indexOf("%"))a*=100;else if(-1!=b.indexOf("\u2030"))a*=1E3;else if(-1!=b.indexOf("\u00a4"))p=e.customs.currencyGroup||p,d=e.customs.currencyDecimal||d,b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(a,
b,c,p){a=e[["symbol","currency","displayName"][c.length-1]]||e.currency||"";return!a?"":b+a+p});else if(-1!=b.indexOf("E"))throw Error("exponential notation not supported");var t=c._numberPatternRE,h=h.match(t);if(!h)throw Error("unable to find a number expression in pattern: "+b);!1===e.fractional&&(e.places=0);return b.replace(t,c._formatAbsolute(a,h[0],{decimal:d,group:p,places:e.places,round:e.round}))};c.round=function(a,b,e){e=10/(e||10);return(e*+a).toFixed(b)/e};if(0==(0.9).toFixed()){var h=
c.round;c.round=function(a,b,e){var c=Math.pow(10,-b||0),d=Math.abs(a);if(!a||d>=c)c=0;else if(d/=c,0.5>d||0.95<=d)c=0;return h(a,b,e)+(0<a?c:-c)}}c._formatAbsolute=function(a,d,e){e=e||{};!0===e.places&&(e.places=0);Infinity===e.places&&(e.places=6);d=d.split(".");var p="string"==typeof e.places&&e.places.indexOf(","),s=e.places;p?s=e.places.substring(p+1):0<=s||(s=(d[1]||[]).length);0>e.round||(a=c.round(a,s,e.round));a=String(Math.abs(a)).split(".");var h=a[1]||"";d[1]||e.places?(p&&(e.places=
e.places.substring(0,p)),p=void 0!==e.places?e.places:d[1]&&d[1].lastIndexOf("0")+1,p>h.length&&(a[1]=b.pad(h,p,"0",!0)),s<h.length&&(a[1]=h.substr(0,s))):a[1]&&a.pop();s=d[0].replace(",","");p=s.indexOf("0");-1!=p&&(p=s.length-p,p>a[0].length&&(a[0]=b.pad(a[0],p)),-1==s.indexOf("#")&&(a[0]=a[0].substr(a[0].length-p)));var s=d[0].lastIndexOf(","),t,w;-1!=s&&(t=d[0].length-s-1,d=d[0].substr(0,s),s=d.lastIndexOf(","),-1!=s&&(w=d.length-s-1));d=[];for(s=a[0];s;)p=s.length-t,d.push(0<p?s.substr(p):s),
s=0<p?s.slice(0,p):"",w&&(t=w,delete w);a[0]=d.reverse().join(e.group||",");return a.join(e.decimal||".")};c.regexp=function(a){return c._parseInfo(a).regexp};c._parseInfo=function(a){a=a||{};var b=m.normalizeLocale(a.locale),b=m.getLocalization("dojo.cldr","number",b),e=a.pattern||b[(a.type||"decimal")+"Format"],p=b.group,s=b.decimal,h=1;if(-1!=e.indexOf("%"))h/=100;else if(-1!=e.indexOf("\u2030"))h/=1E3;else{var t=-1!=e.indexOf("\u00a4");t&&(p=b.currencyGroup||p,s=b.currencyDecimal||s)}b=e.split(";");
1==b.length&&b.push("-"+b[0]);b=d.buildGroupRE(b,function(e){e="(?:"+d.escapeString(e,".")+")";return e.replace(c._numberPatternRE,function(e){var b={signed:!1,separator:a.strict?p:[p,""],fractional:a.fractional,decimal:s,exponent:!1};e=e.split(".");var d=a.places;1==e.length&&1!=h&&(e[1]="###");1==e.length||0===d?b.fractional=!1:(void 0===d&&(d=a.pattern?e[1].lastIndexOf("0")+1:Infinity),d&&void 0==a.fractional&&(b.fractional=!0),!a.places&&d<e[1].length&&(d+=","+e[1].length),b.places=d);e=e[0].split(",");
1<e.length&&(b.groupSize=e.pop().length,1<e.length&&(b.groupSize2=e.pop().length));return"("+c._realNumberRegexp(b)+")"})},!0);t&&(b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(e,b,c,p){e=d.escapeString(a[["symbol","currency","displayName"][c.length-1]]||a.currency||"");if(!e)return"";b=b?"[\\s\\xa0]":"";p=p?"[\\s\\xa0]":"";return!a.strict?(b&&(b+="*"),p&&(p+="*"),"(?:"+b+e+p+")?"):b+e+p}));return{regexp:b.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:p,decimal:s,factor:h}};c.parse=function(a,
b){var e=c._parseInfo(b),p=RegExp("^"+e.regexp+"$").exec(a);if(!p)return NaN;var d=p[1];if(!p[1]){if(!p[2])return NaN;d=p[2];e.factor*=-1}d=d.replace(RegExp("["+e.group+"\\s\\xa0]","g"),"").replace(e.decimal,".");return d*e.factor};c._realNumberRegexp=function(a){a=a||{};"places"in a||(a.places=Infinity);"string"!=typeof a.decimal&&(a.decimal=".");if(!("fractional"in a)||/^0/.test(a.places))a.fractional=[!0,!1];"exponent"in a||(a.exponent=[!0,!1]);"eSigned"in a||(a.eSigned=[!0,!1]);var b=c._integerRegexp(a),
e=d.buildGroupRE(a.fractional,function(e){var b="";e&&0!==a.places&&(b="\\"+a.decimal,b=Infinity==a.places?"(?:"+b+"\\d+)?":b+("\\d{"+a.places+"}"));return b},!0),p=d.buildGroupRE(a.exponent,function(e){return e?"([eE]"+c._integerRegexp({signed:a.eSigned})+")":""}),b=b+e;e&&(b="(?:(?:"+b+")|(?:"+e+"))");return b+p};c._integerRegexp=function(a){a=a||{};"signed"in a||(a.signed=[!0,!1]);"separator"in a?"groupSize"in a||(a.groupSize=3):a.separator="";var b=d.buildGroupRE(a.signed,function(a){return a?
"[-+]":""},!0),e=d.buildGroupRE(a.separator,function(e){if(!e)return"(?:\\d+)";e=d.escapeString(e);" "==e?e="\\s":"\u00a0"==e&&(e="\\s\\xa0");var b=a.groupSize,c=a.groupSize2;return c?(e="(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+e+"]\\d{"+c+"})*["+e+"]\\d{"+b+"})",0<b-c?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(b-1)+"}))":e):"(?:0|[1-9]\\d{0,"+(b-1)+"}(?:["+e+"]\\d{"+b+"})*)"},!0);return b+e};return c})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(g,m){var a={};m.setObject("dojo.regexp",
a);a.escapeString=function(a,d){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(a){return d&&-1!=d.indexOf(a)?a:"\\"+a})};a.buildGroupRE=function(b,d,c){if(!(b instanceof Array))return d(b);for(var h=[],n=0;n<b.length;n++)h.push(d(b[n]));return a.group(h.join("|"),c)};a.group=function(a,d){return"("+(d?"?:":"")+a+")"};return a})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),
function(g,m,a,b,d,c,h,n,f){function e(a,e,c,d){return d.replace(/([a-z])\1*/ig,function(p){var f,s,n=p.charAt(0);p=p.length;var t=["abbr","wide","narrow"];switch(n){case "G":f=e[4>p?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":f=a.getFullYear();switch(p){case 1:break;case 2:if(!c.fullYear){f=String(f);f=f.substr(f.length-2);break}default:s=!0}break;case "Q":case "q":f=Math.ceil((a.getMonth()+1)/3);s=!0;break;case "M":case "L":f=a.getMonth();3>p?(f+=1,s=!0):(n=["months","L"==n?"standAlone":
"format",t[p-3]].join("-"),f=e[n][f]);break;case "w":f=u._getWeekOfYear(a,0);s=!0;break;case "d":f=a.getDate();s=!0;break;case "D":f=u._getDayOfYear(a);s=!0;break;case "e":case "c":if(f=a.getDay(),2>p){f=(f-b.getFirstDayOfWeek(c.locale)+8)%7;break}case "E":f=a.getDay();3>p?(f+=1,s=!0):(n=["days","c"==n?"standAlone":"format",t[p-3]].join("-"),f=e[n][f]);break;case "a":n=12>a.getHours()?"am":"pm";f=c[n]||e["dayPeriods-format-wide-"+n];break;case "h":case "H":case "K":case "k":s=a.getHours();switch(n){case "h":f=
s%12||12;break;case "H":f=s;break;case "K":f=s%12;break;case "k":f=s||24}s=!0;break;case "m":f=a.getMinutes();s=!0;break;case "s":f=a.getSeconds();s=!0;break;case "S":f=Math.round(a.getMilliseconds()*Math.pow(10,p-3));s=!0;break;case "v":case "z":if(f=u._getZone(a,!0,c))break;p=4;case "Z":n=u._getZone(a,!1,c);n=[0>=n?"+":"-",h.pad(Math.floor(Math.abs(n)/60),2),h.pad(Math.abs(n)%60,2)];4==p&&(n.splice(0,0,"GMT"),n.splice(3,0,":"));f=n.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+
d);}s&&(f=h.pad(f,p));return f})}function p(a,e,b,c){var p=function(a){return a};e=e||p;b=b||p;c=c||p;var d=a.match(/(''|[^'])+/g),f="'"==a.charAt(0);m.forEach(d,function(a,c){a?(d[c]=(f?b:e)(a.replace(/''/g,"'")),f=!f):d[c]=""});return c(d.join(""))}function s(a,e,b,p){p=c.escapeString(p);b.strict||(p=p.replace(" a"," ?a"));return p.replace(/([a-z])\1*/ig,function(c){var p;p=c.charAt(0);var d=c.length,f="",s="";b.strict?(1<d&&(f="0{"+(d-1)+"}"),2<d&&(s="0{"+(d-2)+"}")):(f="0?",s="0{0,2}");switch(p){case "y":p=
"\\d{2,4}";break;case "M":case "L":p=2<d?"\\S+?":"1[0-2]|"+f+"[1-9]";break;case "D":p="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+f+"[1-9][0-9]|"+s+"[1-9]";break;case "d":p="3[01]|[12]\\d|"+f+"[1-9]";break;case "w":p="[1-4][0-9]|5[0-3]|"+f+"[1-9]";break;case "E":case "e":case "c":p=".+?";break;case "h":p="1[0-2]|"+f+"[1-9]";break;case "k":p="1[01]|"+f+"\\d";break;case "H":p="1\\d|2[0-3]|"+f+"\\d";break;case "K":p="1\\d|2[0-4]|"+f+"[1-9]";break;case "m":case "s":p="[0-5]\\d";break;case "S":p="\\d{"+d+"}";
break;case "a":d=b.am||e["dayPeriods-format-wide-am"];f=b.pm||e["dayPeriods-format-wide-pm"];p=d+"|"+f;b.strict||(d!=d.toLowerCase()&&(p+="|"+d.toLowerCase()),f!=f.toLowerCase()&&(p+="|"+f.toLowerCase()),-1!=p.indexOf(".")&&(p+="|"+p.replace(/\./g,"")));p=p.replace(/\./g,"\\.");break;default:p=".*"}a&&a.push(c);return"("+p+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var u={};g.setObject(f.id.replace(/\//g,"."),u);u._getZone=function(e,b,c){return b?a.getTimezoneName(e):e.getTimezoneOffset()};u.format=
function(a,b){b=b||{};var c=d.normalizeLocale(b.locale),f=b.formatLength||"short",c=u._getGregorianBundle(c),s=[],h=g.hitch(this,e,a,c,b);if("year"==b.selector)return p(c["dateFormatItem-yyyy"]||"yyyy",h);var n;"date"!=b.selector&&(n=b.timePattern||c["timeFormat-"+f])&&s.push(p(n,h));"time"!=b.selector&&(n=b.datePattern||c["dateFormat-"+f])&&s.push(p(n,h));return 1==s.length?s[0]:c["dateTimeFormat-"+f].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,e){return s[e]})};u.regexp=function(a){return u._parseInfo(a).regexp};
u._parseInfo=function(a){a=a||{};var e=d.normalizeLocale(a.locale),e=u._getGregorianBundle(e),b=a.formatLength||"short",c=a.datePattern||e["dateFormat-"+b],f=a.timePattern||e["timeFormat-"+b],b="date"==a.selector?c:"time"==a.selector?f:e["dateTimeFormat-"+b].replace(/\{(\d+)\}/g,function(a,e){return[f,c][e]}),h=[];return{regexp:p(b,g.hitch(this,s,h,e,a)),tokens:h,bundle:e}};u.parse=function(e,b){var c=/[\u200E\u200F\u202A\u202E]/g,p=u._parseInfo(b),d=p.tokens,f=p.bundle,c=RegExp("^"+p.regexp.replace(c,
"")+"$",p.strict?"":"i").exec(e&&e.replace(c,""));if(!c)return null;var s=["abbr","wide","narrow"],h=[1970,0,1,0,0,0,0],n="",c=m.every(c,function(a,e){if(!e)return!0;var c=d[e-1],p=c.length,c=c.charAt(0);switch(c){case "y":if(2!=p&&b.strict)h[0]=a;else if(100>a)a=Number(a),c=""+(new Date).getFullYear(),p=100*c.substring(0,2),c=Math.min(Number(c.substring(2,4))+20,99),h[0]=a<c?p+a:p-100+a;else{if(b.strict)return!1;h[0]=a}break;case "M":case "L":if(2<p){if(p=f["months-"+("L"==c?"standAlone":"format")+
"-"+s[p-3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),p=m.map(p,function(a){return a.replace(".","").toLowerCase()})),a=m.indexOf(p,a),-1==a)return!1}else a--;h[1]=a;break;case "E":case "e":case "c":p=f["days-"+("c"==c?"standAlone":"format")+"-"+s[p-3]].concat();b.strict||(a=a.toLowerCase(),p=m.map(p,function(a){return a.toLowerCase()}));a=m.indexOf(p,a);if(-1==a)return!1;break;case "D":h[1]=0;case "d":h[2]=a;break;case "a":p=b.am||f["dayPeriods-format-wide-am"];c=b.pm||f["dayPeriods-format-wide-pm"];
if(!b.strict){var u=/\./g;a=a.replace(u,"").toLowerCase();p=p.replace(u,"").toLowerCase();c=c.replace(u,"").toLowerCase()}if(b.strict&&a!=p&&a!=c)return!1;n=a==c?"p":a==p?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;h[3]=a;break;case "m":h[4]=a;break;case "s":h[5]=a;break;case "S":h[6]=a}return!0}),p=+h[3];"p"===n&&12>p?h[3]=p+12:"a"===n&&12==p&&(h[3]=0);p=new Date(h[0],h[1],h[2],h[3],h[4],h[5],h[6]);b.strict&&p.setFullYear(h[0]);var t=d.join(""),w=-1!=t.indexOf("d"),
t=-1!=t.indexOf("M");if(!c||t&&p.getMonth()>h[1]||w&&p.getDate()>h[2])return null;if(t&&p.getMonth()<h[1]||w&&p.getDate()<h[2])p=a.add(p,"hour",1);return p};var t=[],w={};u.addCustomFormats=function(a,e){t.push({pkg:a,name:e});w={}};u._getGregorianBundle=function(a){if(w[a])return w[a];var e={};m.forEach(t,function(b){b=d.getLocalization(b.pkg,b.name,a);e=g.mixin(e,b)},this);return w[a]=e};u.addCustomFormats(f.id.replace(/\/date\/locale$/,".cldr"),"gregorian");u.getNames=function(a,e,b,c){var p;c=
u._getGregorianBundle(c);a=[a,b,e];"standAlone"==b&&(b=a.join("-"),p=c[b],1==p[0]&&(p=void 0));a[1]="format";return(p||c[a.join("-")]).concat()};u.isWeekend=function(a,e){var c=b.getWeekend(e),p=(a||new Date).getDay();c.end<c.start&&(c.end+=7,p<c.start&&(p+=7));return p>=c.start&&p<=c.end};u._getDayOfYear=function(e){return a.difference(new Date(e.getFullYear(),0,1,e.getHours()),e)+1};u._getWeekOfYear=function(a,e){1==arguments.length&&(e=0);var b=(new Date(a.getFullYear(),0,1)).getDay(),c=Math.floor((u._getDayOfYear(a)+
(b-e+7)%7-1)/7);b==e&&c++;return c};return u})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(g,m){var a={};g.setObject("dojo.cldr.supplemental",a);a.getFirstDayOfWeek=function(b){b={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,
ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[a._region(b)];return void 0===b?1:b};a._region=function(a){a=m.normalizeLocale(a);a=a.split("-");var d=a[1];d?4==d.length&&(d=a[2]):d={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",
el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",
mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",
ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",
chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",
kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",
mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",
tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[a[0]];return d};a.getWeekend=function(b){var d=a._region(b);b={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[d];d={af:5,dz:5,ir:5,
om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[d];void 0===b&&(b=6);void 0===d&&(d=0);return{start:b,end:d}};return a})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(g,m,a,b,d){return g(null,{declaredClass:"esri.layers.Domain",constructor:function(a){a&&m.isObject(a)&&(this.name=a.name,this.type=a.type)},toJson:function(){return d.fixJson({name:this.name,type:this.type})}})})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),
function(g,m,a,b,d,c,h){return g([h],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(a){a&&m.isObject(a)&&(this.codedValues=a.codedValues)},getName:function(b){var c;a.some(this.codedValues,function(a){a.code==b&&(c=a.name);return!!c});return c},toJson:function(){var a=this.inherited(arguments);a.codedValues=m.clone(this.codedValues);return c.fixJson(a)}})})},"esriPBI/extensions/FeatureLayer":function(){define("require dojo/_base/array esri/layers/FeatureLayer ../formatUtils esri/renderers/ClassBreaksRenderer esri/renderers/UniqueValueRenderer".split(" "),
function(g,m,a,b,d,c){a.extend({setRenderer:function(a){if(a&&(a.isInstanceOf(c)||a.isInstanceOf(d))){var n=this.getMap()&&this.getMap().settings;m.some(this.fields,function(f){if(f.name===a.attributeField)return f.customFormat&&(!a.attributeField2&&!a.attributeField3)&&m.forEach(a.infos,function(e){if(void 0===e.label||null===e.label||""===e.label)a.isInstanceOf(c)?e.label=b.formatValue(e.value,f.customFormat,n):a.isInstanceOf(d)&&m.forEach(a.infos,function(a){var e=b.formatValue(a.minValue,f.customFormat,
n),c=b.formatValue(a.maxValue,f.customFormat,n);a.label=e+" - "+c})}),!0})}this.inherited(arguments)}})})},"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/sniff dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/promise/all ../kernel ../lang ../request ../config ../deferredUtils ../SpatialReference ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./FeatureType ./FeatureTemplate ./FeatureEditResult ./LabelClass ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./TrackManager ./HeatmapManager dojo/i18n!../nls/jsapi require".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M,L,G,O,S,U,T,E,Q,N,q,k,r,y,D,P,aa,X,na,Da,Ea,Ha,Aa,za){var Ma=A.defaults,ka=a(q,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reHostedFS:/(https?:)?\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],
"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error","info"]},constructor:function(k,r){this._preventInit||this._initFeatureLayer(k,r)},_initFeatureLayer:function(k,r){this.i18n=za;r=r||{};this.showLabels=
null!=r.showLabels?r.showLabels:!0;this._outFields=r.outFields;this._defnExpr=r.definitionExpression;this._loadCallback=r.loadCallback;var q=r._usePatch;this._usePatch=null===q||void 0===q?!0:q;this._trackIdField=r.trackIdField;this.objectIdField=r.objectIdField;this._maxOffset=null!=r.maxAllowableOffset?r.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=r.quantize?r.quantize:!0;this._optEditable=r.editable;this._optAutoGen=r.autoGeneralize;this.editSummaryCallback=r.editSummaryCallback;
this.userId=r.userId;this.userIsAdmin=r.userIsAdmin;this.useMapTime=r.hasOwnProperty("useMapTime")?!!r.useMapTime:!0;this.source=r.source;this.gdbVersion=r.gdbVersion;this.orderByFields=r.orderByFields;this.maxPointCountForAuto=null!=r.maxPointCountForAuto?r.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=r.maxRecordCountForAuto?r.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=r.maxVertexCountForAuto?r.maxVertexCountForAuto:this.maxVertexCountForAuto;
this.generalizeForScale=null!=r.generalizeForScale?r.generalizeForScale:this.generalizeForScale;this.queryPagination=null!=r.queryPagination?r.queryPagination:this.url?this.reHostedFS.test(this.url):!1;this.multipatchOption=r.multipatchOption;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var y=ka,q=this.mode=x.isDefined(r.mode)?r.mode:y.MODE_ONDEMAND;this._isStream&&(this.mode=q=y.MODE_STREAM);switch(q){case y.MODE_SNAPSHOT:this.currentMode=
y.MODE_SNAPSHOT;this._mode=new X(this);this._isSnapshot=!0;break;case y.MODE_ONDEMAND:case y.MODE_AUTO:this.currentMode=y.MODE_ONDEMAND;this._tileWidth=r.tileWidth||512;this._tileHeight=r.tileHeight||512;this._mode=new na(this);this.latticeTiling=r.latticeTiling;break;case y.MODE_SELECTION:this.currentMode=y.MODE_SELECTION;this._mode=new Da(this);this._isSelOnly=!0;break;case y.MODE_STREAM:this.currentMode=y.MODE_STREAM,this._mode=new Ea(this),this._isStream=!0}this._initLayer=d.hitch(this,this._initLayer);
this._selectHandler=d.hitch(this,this._selectHandler);this._editable=!1;if(d.isObject(k)&&k.layerDefinition)return this._collection=!0,this.mode=this._isStream?y.MODE_STREAM:y.MODE_SNAPSHOT,this._initLayer(k),this;this._task=new G(this.url,{source:this.source,gdbVersion:this.gdbVersion});q=this._url.path;this._fserver=!1;-1!==q.search(/\/FeatureServer\//i)&&(this._fserver=!0);this.mode===y.MODE_AUTO&&this.reHostedFS.test(this.url)&&this._queryLimit();(y=r.resourceInfo)?this._initLayer(y):(this.source&&
(y={source:this.source.toJson()},this._url.query=d.mixin(this._url.query,{layer:h.toJson(y)})),this.gdbVersion&&(this._url.query=d.mixin(this._url.query,{gdbVersion:this.gdbVersion})),B({url:q,content:d.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler}));this.registerConnectEvents()},_initLayer:function(q,a){if(q||a){this._json=q;this._findCredential();if(this.credential&&this.credential.ssl||q&&q._ssl)this._useSSL(),this._task._useSSL();
this.version=q.currentVersion;this.version||(this.version="capabilities"in q||"drawingInfo"in q||"hasAttachments"in q||"htmlPopupType"in q||"relationships"in q||"timeInfo"in q||"typeIdField"in q||"types"in q?10:9.3);this._collection&&(this._isStream||(this.currentMode=ka.MODE_SNAPSHOT,this._mode=new X(this)),this._isSnapshot=!0,this._featureSet=q.featureSet,this._nextId=q.nextObjectId,q=q.layerDefinition);this.geometryType=q.geometryType;"string"!==typeof this.multipatchOption&&"esriGeometryMultiPatch"===
this.geometryType&&(this.multipatchOption="xyFootprint");if(q.hasOwnProperty("capabilities")){var E=this.capabilities=q.capabilities;E&&-1!==E.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);x.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=!1);this._json=h.toJson(this._json);if(this.isEditable())this._setMaxOffset(null);
else if(this.mode!==ka.MODE_SNAPSHOT&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint()))this._autoGeneralize=x.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===ka.MODE_ONDEMAND||this.mode===ka.MODE_AUTO,delete this._optAutoGen;var E=q.effectiveMinScale||q.minScale,b=q.effectiveMaxScale||q.maxScale;!this._hasMin&&E&&this.setMinScale(E);!this._hasMax&&b&&this.setMaxScale(b);this.layerId=q.id;this.name=q.name;this.description=q.description;
this.copyright=q.copyrightText;this.type=q.type;this.displayField=q.displayField;this.defaultDefinitionExpression=q.definitionExpression;this.fullExtent=new T(q.extent);this.initialExtent=new T(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new z(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=q.defaultVisibility;if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=q.hasM||!1;
this.hasZ=q.hasZ||!1;this.indexedFields=q.indexedFields;this.maxRecordCount=q.maxRecordCount;this.canModifyLayer=q.canModifyLayer;this.supportsStatistics=q.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:q.supportsAdvancedQueries;this.supportsCalculate=q.supportsCalculate;this.supportsAttachmentsByUploadId=q.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=q.supportsCoordinatesQuantization;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=
q.hasLabels;this.canScaleSymbols=q.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=q.supportsRollbackOnFailure;this.syncCanReturnChanges=q.syncCanReturnChanges;this.isDataVersioned=q.isDataVersioned;this.editFieldsInfo=q.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=q.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=q.relationships;
this.allowGeometryUpdates=x.isDefined(q.allowGeometryUpdates)?q.allowGeometryUpdates:!0;this.allowUpdateWithoutMValues=!!q.allowUpdateWithoutMValues;this.advancedQueryCapabilities=q.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this.useStandardizedQueries=q.useStandardizedQueries;this.tileMaxRecordCount=q.tileMaxRecordCount;this.standardMaxRecordCount=q.standardMaxRecordCount;this._setMaxOffset(this._maxOffset,
!0);this._isTable="Table"===this.type;for(var P=this.fields=[],b=q.fields,E=0;E<b.length;E++)P.push(new k(b[E]));if(!this.objectIdField&&(this.objectIdField=q.objectIdField,!this.objectIdField)){b=q.fields;for(E=0;E<b.length;E++)if(P=b[E],"esriFieldTypeOID"===P.type){this.objectIdField=P.name;break}}if(!x.isDefined(this._nextId)){b=this.objectIdField;P=-1;if(this._collection&&b)for(var p=(E=this._featureSet)&&E.features,f=p?p.length:0,s,E=0;E<f;E++)s=(s=p[E].attributes)&&s[b],s>P&&(P=s);this._nextId=
P+1}this.globalIdField=q.globalIdField;if(E=this.typeIdField=q.typeIdField)if(E=!this._getField(E)&&this._getField(E,!0))this.typeIdField=E.name;this.visibilityField=q.visibilityField;if(b=q.defaultSymbol)this.defaultSymbol=I.fromJson(b);var n=this.types=[],u=q.types,t,w,P=(E=this.editFieldsInfo)&&E.creatorField,p=E&&E.editorField;s=P||p;f=[];if(u)for(E=0;E<u.length;E++)t=new y(u[E]),w=t.templates,s&&(w&&w.length)&&(f=f.concat(w)),n.push(t);u=q.templates;t=this.templates=[];if(u)for(E=0;E<u.length;E++)n=
new D(u[E]),s&&f.push(n),t.push(n);for(E=0;E<f.length;E++)if(s=d.getObject("prototype.attributes",!1,f[E]))P&&delete s[P],p&&delete s[p];if(E=q.timeInfo)this.timeInfo=new r(E),this._startTimeField=E.startTimeField,this._endTimeField=E.endTimeField,this._startTimeField&&this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?E.trackIdField=this._trackIdField:this._trackIdField=E.trackIdField;this.hasAttachments=!this._collection&&q.hasAttachments?!0:!1;this.htmlPopupType=q.htmlPopupType;var E=
q.drawingInfo,v;if((P=E&&E.labelingInfo)&&!this.labelingInfo)this.labelingInfo=c.map(P,function(k){return new aa(k)}),this._fixLabelExpr();if(!this.renderer)if(E&&E.renderer){if(v=E.renderer,this.setRenderer(L.fromJson(v)),"classBreaks"===v.type&&this.renderer.setMaxInclusive(!0),!this._collection){var g=v.type,b=[];v=this.renderer;switch(g){case "simple":b.push(v.symbol);break;case "uniqueValue":case "classBreaks":b.push(v.defaultSymbol),b=b.concat(c.map(v.infos,function(k){return k.symbol}))}var b=
c.filter(b,x.isDefined),na=this._url.path+"/images/",A=this._getToken();c.forEach(b,function(k){var r=k.url;r&&(-1===r.search(/https?\:/)&&-1===r.indexOf("data:")&&(k.url=na+r),A&&-1!==k.url.search(/https?\:/)&&(k.url+="?token\x3d"+A))})}}else if(b)u=this.types,0<u.length?(v=new M(this.defaultSymbol,this.typeIdField),c.forEach(u,function(k){v.addValue(k.id,k.symbol)})):v=new K(this.defaultSymbol),this.setRenderer(v);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":g=
new F;break;case "esriGeometryPolyline":g=new H;break;case "esriGeometryPolygon":g=new J;break;default:this.hasXYFootprint()&&(g=new J)}this.setRenderer(g?new K(g):null)}g=E&&E.transparency||0;!this.hasOwnProperty("opacity")&&0<g&&(this.opacity=1-g/100);if((e("ie")||7<=e("trident")||e("safari"))&&this.isEditable()&&10.02>this.version)this._ts=!0;this.statistics=q.statistics;this._fixRendererFields();this._checkFields();this._updateCaps();var B=function(){this.currentMode!==ka.MODE_SNAPSHOT&&(this.queryPagination=
!1);null!=this._maxOffset&&!this._isFractionalOffsetAllowed()&&this._setMaxOffset(this._maxOffset);this.loaded=!0;this.onLoad(this);var k=this._loadCallback;k&&(delete this._loadCallback,k(this))};this._collection?(g=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new S(g)),this._fcAdded=!0,B.call(this)):this._forceIdentity(this._limitPromise?function(){var k=this;this._limitPromise.then(function(r){k._checkMode(r)});this._limitPromise.always(function(){k._limitPromise=null;B.call(k)})}:
B)}},setShowLabels:function(k){this.showLabels=k;this.onShowLabelsChange()},onShowLabelsChange:function(){},onRendererChange:function(k){this.inherited(arguments);var r=this._map;this._ager=!(!k||!k.observationAger||!k.observationRenderer);k&&"colors"in k&&"blurRadius"in k&&"maxPixelIntensity"in k?"esriGeometryPoint"==this.geometryType&&(!this._heatmapManager&&r)&&(this._heatmapManager=new Aa(this),this._heatmapManager.initialize(r)):this.renderer&&this.renderer.getRendererInfo?c.some(this.renderer.rendererInfos,
function(k){return k.renderer&&"colors"in k.renderer&&"blurRadius"in k.renderer})||(this._heatmapManager=null):this._heatmapManager=null;if(k){var q=[],r=c.filter([k,k.observationRenderer,k.latestObservationRenderer,k.trackRenderer],x.isDefined),y=function(k){return null!=k&&"function"!=typeof k&&k};c.forEach(r,function(k){var r=y(k.attributeField),a=y(k.attributeField2);k=y(k.attributeField3);!1!==r&&q.push(r);!1!==a&&q.push(a);!1!==k&&q.push(k)});this._rendererFields=q}else this._rendererFields=
[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._rendererFields),this._collection&&(this._typesDirty=!0))},redraw:function(){this.inherited(arguments);this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw()},_evalSDRenderer:function(){this.inherited(arguments);var k=this._getRenderer();this._ager=!(!k||!k.observationAger||!k.observationRenderer);this._trackManager&&this._trackManager.container&&this._trackManager.container.setRenderer(k&&k.trackRenderer)},
_setMap:function(k){var r=this.inherited(arguments),q=this._mode,y=this;q&&q.initialize(k);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=this.on("graphic-node-add",function(k){k=k.graphic.attributes;(k=y._selectedFeatures[k&&k[y.objectIdField]])&&k.attr("data-selected","")});return r},_unsetMap:function(k){var r=this._mode;r&&r.suspend();this._trackManager&&(this._trackManager.destroy(),this._trackManager=null);b.disconnect(this._zoomConnect);
b.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this._toggleTime(!1);this.inherited("_unsetMap",arguments)},refresh:function(){this._needsRefresh=!1;var k=this._mode;k&&k.refresh()},hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},getOutFields:function(){return c.filter(this._getOutFields(),function(k){return"*"===k||!!this._getField(k)},this)},getField:function(k){return this._getField(k,!0)},getFieldLabel:function(k){var r=
this.infoTemplate,r=r&&r.getFieldInfo&&r.getFieldInfo(k);k=d.isFunction(k)?null:this.getField(k);var q=r||k,y="";q&&(y=r&&r.label||k&&k.alias||q.name||q.fieldName);return y},getDomain:function(k,r){var q,y,a=r&&r.feature,D=a&&this.typeIdField&&a.attributes&&a.attributes[this.typeIdField];null!=D&&c.some(this.types,function(r){if(r.id==D){if((q=r.domains&&r.domains[k])&&"inherited"===q.type)q=this._getLayerDomain(k),y=!0;return!0}return!1},this);!y&&!q&&(q=this._getLayerDomain(k));return q},_getLayerDomain:function(k){var r;
c.some(this.fields,function(q){q.name===k&&(r=q.domain);return!!r});return r},getType:function(k){var r,q=k&&this.typeIdField&&k.attributes&&k.attributes[this.typeIdField];c.some(this.types,function(k){k.id==q&&(r=k);return!!r});return r},setEditable:function(k){if(!this._collection)return this;if(!this.loaded)return this._optEditable=k,this;var r=this._editable;this._editable=k;this._updateCaps();if(r!==k)this.onCapabilitiesChange();return this},getEditCapabilities:function(k){var r={canCreate:!1,
canUpdate:!1,canDelete:!1};if(!this.loaded||!this.isEditable())return r;var q=k&&k.feature;k=k&&k.userId||this.getUserId();var y=c.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],d.trim),a=(r=-1<c.indexOf(y,"editing"))&&-1<c.indexOf(y,"create"),D=r&&-1<c.indexOf(y,"update"),y=r&&-1<c.indexOf(y,"delete"),E=this.ownershipBasedAccessControlForFeatures,e=this.editFieldsInfo,b=e&&e.creatorField,e=e&&e.realm,q=(q=q&&q.attributes)&&b?q[b]:void 0,P=!!this.userIsAdmin,b=!E||P||!(!E.allowOthersToUpdate&&
!E.allowUpdateToOthers),p=!E||P||!(!E.allowOthersToDelete&&!E.allowDeleteToOthers),f=!E||P||!E.hasOwnProperty("allowAnonymousToUpdate")||E.allowAnonymousToUpdate,E=!E||P||!E.hasOwnProperty("allowAnonymousToDelete")||E.allowAnonymousToDelete;k&&e&&(k=k+"@"+e);if(P||r&&!a&&!D&&!y)a=D=y=!0;r={canCreate:a,canUpdate:D,canDelete:y};k||(r.canUpdate=r.canUpdate&&f,r.canDelete=r.canDelete&&E);null===q?(r.canUpdate=r.canUpdate&&b,r.canDelete=r.canDelete&&p):""!==q&&(q&&k.toLowerCase()!==q.toLowerCase())&&(r.canUpdate=
r.canUpdate&&b,r.canDelete=r.canDelete&&p);return r},getUserId:function(){var k;this.loaded&&(k=this.credential&&this.credential.userId||this.userId||"");return k},setUserIsAdmin:function(k){this.userIsAdmin=k},setEditSummaryCallback:function(k){this.editSummaryCallback=k},getEditSummary:function(k,r,q){q=x.isDefined(q)?q:(new Date).getTime();var y="";q=this.getEditInfo(k,r,q);(r=r&&r.callback||this.editSummaryCallback)&&(q=r(k,q)||"");if(d.isString(q))y=q;else{if(q){k=q.action;r=q.userId;var a=q.timeValue,
D=0;k&&D++;r&&D++;x.isDefined(a)&&D++;1<D&&(y=("edit"===k?"edit":"create")+(r?"User":"")+(x.isDefined(a)?q.displayPattern:""))}y=y&&x.substitute(q,this.i18n.layers.FeatureLayer[y])}return y},getEditInfo:function(k,r,q){if(this.loaded){q=x.isDefined(q)?q:(new Date).getTime();r=r&&r.action||"last";var y=this.editFieldsInfo,a=y&&y.creatorField,D=y&&y.creationDateField,E=y&&y.editorField,y=y&&y.editDateField,E=(k=k&&k.attributes)&&E?k[E]:void 0,y=k&&y?k[y]:null,a=this._getEditData(k&&a?k[a]:void 0,k&&
D?k[D]:null,q);q=this._getEditData(E,y,q);var e;switch(r){case "creation":e=a;break;case "edit":e=q;break;case "last":e=q||a}e&&(e.action=e===q?"edit":"creation");return e}},_getEditData:function(k,r,q){var y,a,D;x.isDefined(r)&&(a=q-r,D=0>a?"Full":6E4>a?"Seconds":12E4>a?"Minute":36E5>a?"Minutes":72E5>a?"Hour":864E5>a?"Hours":6048E5>a?"WeekDay":"Full");if(void 0!==k||D)y=y||{},y.userId=k,D&&(k=f.format,q=new Date(r),y.minutes=Math.floor(a/6E4),y.hours=Math.floor(a/36E5),y.weekDay=k(q,{datePattern:"EEEE",
selector:"date"}),y.formattedDate=k(q,{selector:"date"}),y.formattedTime=k(q,{selector:"time"}),y.displayPattern=D,y.timeValue=r);return y},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},setMaxAllowableOffset:function(k){this.isEditable()||this._setMaxOffset(k,!0);return this},getMaxAllowableOffset:function(){var k=this._quantizationParameters?this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?this._maxOffset:k},_setMaxOffset:function(k,r){if(null==k)return delete this._maxOffset,
delete this._quantizationParameters,this;if(this.quantize&&this.supportsCoordinatesQuantization)"esriGeometryPolyline"===this.geometryType?this._maxOffset=k:delete this._maxOffset,this._quantizationParameters={mode:"view",originPosition:"upperLeft",tolerance:k,extent:this.fullExtent};else{if(!this._isFractionalOffsetAllowed()||!r)k=Math.floor(k);isNaN(k)||0===k?delete this._maxOffset:this._maxOffset=k;delete this._quantizationParameters}return this},_isFractionalOffsetAllowed:function(){return null==
this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(k){k=(k=k&&k.split("-"))&&k[0]&&k[0].toLowerCase();return-1!==c.indexOf(this._langsWithDot,k)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(k){if(this.loaded){if(!this.isEditable()&&this.mode!==ka.MODE_SNAPSHOT&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint()))(this._autoGeneralize=
k)?(this._autoSnapshot&&(this._prevScale=null),this._updateMaxOffset()):this._setMaxOffset(null)}else this._optAutoGen=k;return this},setGDBVersion:function(k){if(!this._collection&&k!==this.gdbVersion&&(k||this.gdbVersion))this.gdbVersion=k,this._task.gdbVersion=k,this._url.query=d.mixin(this._url.query,{gdbVersion:k}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange();return this},hasAllFeatures:function(){return this._mode?this._mode.hasAllFeatures():!0},setDefinitionExpression:function(k){this._defnExpr=
k;(k=this._mode)&&k.propertyChangeHandler(1);return this},getDefinitionExpression:function(){return this._defnExpr},setTimeDefinition:function(k){this._isSnapshot&&(this._timeDefn=k,(k=this._mode)&&k.propertyChangeHandler(2));return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(k,r){this._timeOffset=k;this._timeOffsetUnits=r;var q=this._mode;q&&q.propertyChangeHandler(0);return this},setUseMapTime:function(k){this.useMapTime=k;this._toggleTime(!this.suspended);(k=
this._mode)&&k.propertyChangeHandler(0)},selectFeatures:function(k,r,q,y){r=r||ka.SELECTION_NEW;this._hasPartialSelectedFeatures=!1;k=this._getShallowClone(k);var a=this._map,D,E=this,e=C._fixDfd(new n(C._dfdCanceller));k.outFields=this.getOutFields();k.returnGeometry=!0;k.multipatchOption=this.multipatchOption;a&&(k.outSpatialReference=new z(a.spatialReference.toJson()));if(!this._applyQueryFilters(k,!0))return D={features:[]},this._selectHandler(D,r,q,y,e),e;if(a=this._canDoClientSideQuery(k))e._pendingDfd=
t(this._doQuery(k,a)),e._pendingDfd.then(function(k){D={features:k};E._selectHandler(D,r,q,y,e)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,y,e,!0),e;var b=this;this._ts&&(k._ts=(new Date).getTime());(e._pendingDfd=this._task.execute(k)).addCallbacks(function(k){b._selectHandler(k,r,q,y,e)},function(k){b._hasPartialSelectedFeatures=!0;b._resolve([k],null,y,e,!0)})}return e},getSelectedFeatures:function(){var k=this._selectedFeatures,
r=[],q;for(q in k)k.hasOwnProperty(q)&&r.push(k[q]);return r},clearSelection:function(k){var r=this._selectedFeatures,q=this._mode,y;for(y in r)r.hasOwnProperty(y)&&(this._unSelectFeatureIIf(y,q),q._removeFeatureIIf(y));this._selectedFeatures={};this._isSelOnly&&q._applyTimeFilter(!0);if(!k)this.onSelectionClear();return this},setSelectionSymbol:function(k){if(this._selectionSymbol=k){var r=this._selectedFeatures,q;for(q in r)r.hasOwnProperty(q)&&r[q].setSymbol(k)}return this},getSelectionSymbol:function(){return this._selectionSymbol},
setLabelingInfo:function(k){k?(this.labelingInfo=k,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this.onLabelingInfoChange()},_fixLabelExpr:function(){var k=/\[([^\[\]]+)\]/ig,r,q=this,y=function(k,r){var y=q._getField(r,!0);return"["+(y&&y.name||r)+"]"};c.forEach(this.labelingInfo,function(q){if(r=q.labelExpression)q.labelExpression=r.replace(k,y)})},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(k,r,q,y,a,D){var E=D.assembly,
e=D.dfd;this._applyNormalized(k,E&&E[0]);this._applyNormalized(r,E&&E[1]);this.onBeforeApplyEdits(k,r,q);var b={},P=this.objectIdField,E={f:"json"},p=!1;if(this._collection)D={},D.addResults=k?c.map(k,function(){p=!0;return{objectId:this._nextId++,success:!0}},this):null,D.updateResults=r?c.map(r,function(k){p=!0;var r=k.attributes[P];b[r]=k;return{objectId:r,success:!0}},this):null,D.deleteResults=q?c.map(q,function(k){p=!0;return{objectId:k.attributes[P],success:!0}},this):null,p?this._editHandler(D,
k,b,y,a,e):this._resolve([D.addResults,D.updateResults,D.deleteResults],null,y,e);else{k&&0<k.length&&(E.adds=this._convertFeaturesToJson(k,0,1),p=!0);if(r&&0<r.length){for(D=0;D<r.length;D++){var f=r[D];b[f.attributes[P]]=f}E.updates=this._convertFeaturesToJson(r,0,0,1);p=!0}if(q&&0<q.length){r=[];for(D=0;D<q.length;D++)r.push(q[D].attributes[P]);E.deletes=r.join(",");p=!0}if(p){var s=this;return B({url:this._url.path+"/applyEdits",content:d.mixin(E,this._url.query),callbackParamName:"callback",
load:function(r){s._editHandler(r,k,b,y,a,e)},error:function(k){s._resolve([k],null,a,e,!0)}},{usePost:!0})}this._resolve([],null,y,e)}},queryFeatures:function(k,r,q){return this._query("execute","onQueryFeaturesComplete",k,r,q)},queryRelatedFeatures:function(k,r,q){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",k,r,q)},queryIds:function(k,r,q){return this._query("executeForIds","onQueryIdsComplete",k,r,q)},queryCount:function(k,r,q){return this._query("executeForCount",
"onQueryCountComplete",k,r,q)},queryExtent:function(k,r,q){return this._query("executeForExtent","onQueryExtentComplete",k,r,q)},queryAttachmentInfos:function(k,r,q){var y=this._url.path+"/"+k+"/attachments",a=new n(C._dfdCanceller),D=this;a._pendingDfd=B({url:y,content:d.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(q){q=q.attachmentInfos;var E;c.forEach(q,function(r){E=p.objectToQuery({gdbVersion:D._url.query&&D._url.query.gdbVersion,layer:D._url.query&&D._url.query.layer,
token:D._getToken()});r.url=y+"/"+r.id+(E?"?"+E:"");r.objectId=k});D._resolve([q],"onQueryAttachmentInfosComplete",r,a)},error:function(k){D._resolve([k],null,q,a,!0)}});return a},addAttachment:function(k,r,q,y){return this._sendAttachment("add",k,r,q,y)},updateAttachment:function(k,r,q,y,a){q.appendChild(s.create("input",{type:"hidden",name:"attachmentId",value:r}));return this._sendAttachment("update",k,q,y,a)},deleteAttachments:function(k,r,q,y){var a=this._url.path+"/"+k+"/deleteAttachments",
D=new n(C._dfdCanceller),E=this;r={f:"json",attachmentIds:r.join(",")};D._pendingDfd=B({url:a,content:d.mixin(r,this._url.query),callbackParamName:"callback",load:d.hitch(this,function(r){r=r.deleteAttachmentResults;r=c.map(r,function(r){r=new P(r);r.attachmentId=r.objectId;r.objectId=k;return r});E._resolve([r],"onDeleteAttachmentsComplete",q,D)}),error:function(k){E._resolve([k],null,y,D,!0)}},{usePost:!0});return D},addType:function(k){var r=this.types;if(r){if(c.some(r,function(r){return r.id==
k.id?!0:!1}))return!1;r.push(k)}else this.types=[k];return this._typesDirty=!0},deleteType:function(k){if(this._collection){var r=this.types;if(r){var q=-1;c.some(r,function(r,y){return r.id==k?(q=y,!0):!1});if(-1<q)return this._typesDirty=!0,r.splice(q,1)[0]}}},toJson:function(){var k=this._json;if(k=d.isString(k)?h.fromJson(k):d.clone(k)){var k=k.layerDefinition?k:{layerDefinition:k},r=k.layerDefinition,q=this._collection;if(q&&this._typesDirty){r.types=c.map(this.types||[],function(k){return k.toJson()});
var y=this.renderer,a=this.labelingInfo,D=r.drawingInfo;if((y||a)&&!D)D=r.drawingInfo={};D&&(y&&-1===y.declaredClass.indexOf("TemporalRenderer"))&&(D.renderer=y.toJson());a&&(D.labelingInfo=c.map(a,function(k){return k.toJson()}))}y=null;if(!q||this._fcAdded)y={geometryType:r.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};k.featureSet=d.mixin({},k.featureSet||{},y);k.featureSet.transform&&(a=k.featureSet.transform,delete k.featureSet.transform,y=new S(k.featureSet),y.quantize(a),
k.featureSet=y.toJson());q&&(k.nextObjectId=this._nextId,r.capabilities=this.capabilities);return k}},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},
onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},_forceIdentity:function(k){var r=this,q,y=this._url&&this._url.path;q=y&&y.toLowerCase().indexOf("/rest/services");var a=this.editFieldsInfo,a=a&&(a.creatorField||a.editorField);(this.userIsAdmin||a)&&!this._getToken()&&-1<q&&v.id?(q=y.substring(0,q)+"/rest/info",B({url:q,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(k){if(k.owningSystemUrl)return v.id.checkSignInStatus(k.owningSystemUrl+
"/sharing")}).then(function(k){if(k)return v.id.getCredential(y)}).then(function(k){k&&r._findCredential()}).always(function(){k.call(r)})):k.call(this)},_checkMode:function(k){var r=this.geometryType,q=this.maxRecordCount;k=(k=k&&k.features&&k.features[0])&&k.attributes&&k.attributes.exceedslimit;if(this.mode===ka.MODE_AUTO&&!this.isEditable()&&0===k&&(this.queryPagination||("esriGeometryPolyline"===r||"esriGeometryPolygon"===r||"esriGeometryMultipoint"===r||this.hasXYFootprint())&&q>=this.maxRecordCountForAuto||
"esriGeometryPoint"===r&&q>=this.maxPointCountForAuto))this.currentMode=ka.MODE_SNAPSHOT,this._mode=new X(this),this._isSnapshot=this._autoSnapshot=!0},_queryLimit:function(){var k=this,r=new n;this._limitPromise=r.promise;setTimeout(function(){var q=new O,y=new U;y.statisticType="exceedslimit";y.maxPointCount=k.maxPointCountForAuto;y.maxRecordCount=k.maxRecordCountForAuto;y.maxVertexCount=k.maxVertexCountForAuto;y.outStatisticFieldName="exceedslimit";q.outStatistics=[y];k.queryFeatures(q).promise.then(function(k){r.resolve(k)},
function(k){r.reject(k)})},0)},_updateCaps:function(){var k=this._editable,r=d.trim(this.capabilities||""),q=c.map(r?r.split(","):[],d.trim),y=c.map(r?r.toLowerCase().split(","):[],d.trim),r=c.indexOf(y,"editing"),a,y={Create:c.indexOf(y,"create"),Update:c.indexOf(y,"update"),Delete:c.indexOf(y,"delete")};if(k&&-1===r)q.push("Editing");else if(!k&&-1<r){k=[r];for(a in y)-1<y[a]&&k.push(y[a]);k.sort();for(a=k.length-1;0<=a;a--)q.splice(k[a],1)}this.capabilities=q.join(",")},_counter:{value:0},_getUniqueId:function(){return this._counter.value++},
onSuspend:function(){this.inherited(arguments);this._toggleTime(!1);var k=this._mode;k&&k.suspend()},onResume:function(k){this.inherited(arguments);this._toggleTime(!0);var r=this._mode,q=this._map,y=this._getRenderer();if(k.firstOccurrence){this._fixRendererFields();this._checkFields();this.clearSelection();if(this.timeInfo&&!this._trackManager&&(this._trackIdField||y&&(y.latestObservationRenderer||y.trackRenderer)))this._trackManager=new Ha(this),this._trackManager.initialize(q),this._childLayer=
this._trackManager.container;y&&("colors"in y&&"blurRadius"in y&&"maxPixelIntensity"in y)&&("esriGeometryPoint"==this.geometryType&&!this._heatmapManager)&&(this._heatmapManager=new Aa(this),this._heatmapManager.initialize(q));if(this._autoSnapshot&&this._autoGeneralize&&("esriGeometryPolyline"===this.geometryType||"esriGeometryPolygon"===this.geometryType||this.hasXYFootprint())&&!this.isEditable()&&null==this.getMaxAllowableOffset())y=this.generalizeForScale,this._calculatedScale=y=this.maxScale?
this.maxScale:this.minScale?Math.min(y,this.minScale):Math.min(y,N.getScale(q,this.initialExtent)),this._calcMaxOffset=q.extent.getWidth()/q.width/q.getScale()*y;this._zoomConnect=b.connect(q,"onZoomEnd",this,this._zoomEndHandler);this._updateMaxOffset();this._needsRefresh=!1;r&&r.startup()}else this._zoomEndHandler(),r&&r.resume()},_zoomEndHandler:function(){var k=this._map;this._updateMaxOffset();this._prevScale=k.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var k=
this._map;k&&k.loaded&&this._autoGeneralize&&(this._autoSnapshot?(k=this.getMaxAllowableOffset(),this._setMaxOffset(this._getMaxOffsetForScale(),!0),this._needsRefresh||(this._needsRefresh=k!=this.getMaxAllowableOffset())):this._setMaxOffset(k.extent.getWidth()/k.width,!k.extent.spatialReference.isWebMercator()))},_getMaxOffsetForScale:function(){if(this._map){var k=this._map.getScale(),r=this._calculatedScale,q=this._calcMaxOffset,y=this._prevScale;return k>=r&&(null==y||y<r)?q:k<r&&(null==y||y>=
r)?null:this.getMaxAllowableOffset()}},_toggleTime:function(k){var r=this._map;k&&this.timeInfo&&this.useMapTime&&r?(this._mapTimeExtent=r.timeExtent,this._timeConnect||(this._timeConnect=b.connect(r,"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,b.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(k){this._mapTimeExtent=k;(k=this._mode)&&k.propertyChangeHandler(0)},_getOffsettedTE:function(k){var r=this._timeOffset,q=this._timeOffsetUnits;
return k&&r&&q?k.offset(-1*r,q):k},_getTimeOverlap:function(k,r){return k&&r?k.intersection(r):k||r},_getTimeFilter:function(k){var r=this.getTimeDefinition(),q;if(r&&(q=this._getTimeOverlap(r,null),!q))return[!1];if(k){if(k=q?this._getTimeOverlap(k,q):k,!k)return[!1]}else k=q;return[!0,k]},_getAttributeFilter:function(k){var r=this.getDefinitionExpression();return k?r?"("+r+") AND ("+k+")":k:r},_applyQueryFilters:function(k,r){k.where=this._getAttributeFilter(k.where);k.maxAllowableOffset||(k.maxAllowableOffset=
this._maxOffset);k.quantizationParameters=this._quantizationParameters;r&&this.supportsAdvancedQueries&&(k.orderByFields=k.orderByFields||this.getOrderByFields());if(this.timeInfo){var q=this._getTimeFilter(k.timeExtent);if(q[0])k.timeExtent=q[1];else return!1}return!0},_add:function(k){var r=this._selectionSymbol,q=k.attributes,y=this.visibilityField;r&&this._isSelOnly&&k.setSymbol(r);if(y&&q&&q.hasOwnProperty(y))k[q[y]?"show":"hide"]();return this.add.apply(this,arguments)},_remove:function(){return this.remove.apply(this,
arguments)},_canDoClientSideQuery:function(k){var r=[],q=this._map,y;if(!(this._isTable||!q&&!this._collection))if(!k.text&&!(k.where&&k.where!==this.getDefinitionExpression()||k.orderByFields&&k.orderByFields.length&&(y=this.getOrderByFields()||[])&&k.orderByFields.join()!==y.join()||k.outStatistics||k.returnDistinctValues)){y=this._isSnapshot;var a=this._isSelOnly,D=k.geometry;if(D)if(!a&&k.spatialRelationship===O.SPATIAL_REL_INTERSECTS&&"extent"===D.type&&(y||q.extent.contains(D)))r.push(1);else return;
if(q=k.objectIds)if(y)r.push(2);else{var D=q.length,E=this._mode,e=0,b;for(b=0;b<D;b++)E._getFeature(q[b])&&e++;if(e===D)r.push(2);else return}if(this.timeInfo)if(k=k.timeExtent,q=this._mapTimeExtent,y)k&&r.push(3);else if(a){if(k)return}else if(q)if(-1!==c.indexOf(r,2))k&&r.push(3);else if(-1!==c.indexOf(r,1))k==q&&r.push(3);else return;else if(0<r.length)k&&r.push(3);else if(k)return;return 0<r.length?r:null}},_getAbsMid:function(k){return g.toAbsMid?g.toAbsMid(k):m.id.replace(/\/[^\/]*$/ig,"/")+
k},_doQuery:function(k,r,q){var y=[],a=this.objectIdField,D=this,E=new n,e=new n,b=this.graphics;if(-1!==c.indexOf(r,1)){var P=this.spatialIndex||this._map&&this._map.spatialIndex,p,f=k.geometry._normalize(null,!0);null==P&&Ma.autoSpatialIndexing?p=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(d.hitch(this,d.partial(this._getFromIndex,f,P)),function(k){e.resolve(d.hitch(this,d.partial(this._filterByExtent,b,f)))}):P&&(p=this._getFromIndex(f,P));p?p.then(function(k){for(var r=
0;r<k.length;r++)k[r].results&&(y=y.concat(k[r].results));e.resolve(y)}).otherwise(function(k){e.reject(k)}):e.resolve(this._filterByExtent(b,f))}else e.resolve(b);e.then(function(e){y=e;if(-1!==c.indexOf(r,2)){var b=k.objectIds;y=c.filter(y,function(k){return-1<c.indexOf(b,k.attributes[a])})}-1!==c.indexOf(r,3)&&D.timeInfo&&(e=k.timeExtent,y=D._filterByTime(y,e.startTime,e.endTime).match);q&&(y=c.map(y,function(k){return k.attributes[a]},this));E.resolve(y)});return E},_getFromIndex:function(k,r){r=
r||this.spatialIndex||this._map.spatialIndex;k instanceof Array||(k=[k]);var q=this.id;return w(c.map(k,function(k){return r.intersects(k,q)}))},_filterByExtent:function(k,r){for(var q=[],y=0,a=k.length;y<a;y++){var D=k[y],E=D.geometry;E&&(this.normalization&&r.length?(r[0].intersects(E)||r[1].intersects(E))&&q.push(D):r.intersects(E)&&q.push(D))}return q},_filterByTime:function(k,r,q){var y=this._startTimeField,a=this._endTimeField,D;this._twoTimeFields||(D=y||a);var E=x.isDefined,e=[],b=[],P,p=
k.length,c,d;r=r?r.getTime():-Infinity;q=q?q.getTime():Infinity;if(D)for(P=0;P<p;P++)c=k[P],d=c.attributes,y=d[D],y>=r&&y<=q?e.push(c):b.push(c);else for(P=0;P<p;P++)c=k[P],d=c.attributes,D=d[y],d=d[a],D=E(D)?D:-Infinity,d=E(d)?d:Infinity,D>=r&&D<=q||d>=r&&d<=q||r>=D&&q<=d?e.push(c):b.push(c);return{match:e,noMatch:b}},_getSizeVariables:function(k){return k&&c.filter(k.getVisualVariablesForType("sizeInfo",!1),function(k){return!(!k.field&&!k.valueExpression)})},_needClientSideSorting:function(k){return this._collection?
!(!k||!k.length):c.some(k,function(k){return!!k.valueExpression})},_sortFeatures:function(k){var r=this.renderer,q=this._getSizeVariables(r);if(k&&1<k.length&&this._needClientSideSorting(q)){var y=q[0],a=this;k.sort(function(k,q){var D=r._getDataValue(k,y,"sizeInfo",null,a),E=r._getDataValue(q,y,"sizeInfo",null,a);return null==D?-1:null==E?1:E-D})}return k},_resolve:function(k,r,q,y,a){r&&this[r].apply(this,k);q&&q.apply(null,k);y&&C._resDfd(y,k,a)},_getShallowClone:function(k){var r=new O,q;for(q in k)k.hasOwnProperty(q)&&
(r[q]=k[q]);return r},_query:function(k,r,q,y,a){var D=this,E=this._map,e=new n(C._dfdCanceller),b=q,P,p;if("executeRelationshipQuery"!==k){var b=this._getShallowClone(q),d=this.getOutFields();b.outFields||(b.outFields=d);b.outFields&&b.outFields.length&&(p=-1<c.indexOf(d,"*")?!1:!c.every(b.outFields,function(k){return-1<c.indexOf(d,k)}));b.returnGeometry=q.hasOwnProperty("returnGeometry")?q.returnGeometry:!q.outStatistics;b.returnGeometry&&(b.multipatchOption=this.multipatchOption);var f;E&&(q=E&&
E.spatialReference,(E=b.outSpatialReference)?P=!E.equals(q):b.outSpatialReference=new z(q.toJson()));if(!this._applyQueryFilters(b,"execute"===k&&!b.outStatistics)){switch(k){case "execute":f=new S({features:[]});break;case "executeForIds":f=[];break;case "executeForCount":f=0;break;case "executeForExtent":f={}}this._resolve([f],r,y,e);return e}if(q="executeForExtent"!==k&&!P&&!p&&this._canDoClientSideQuery(b))return e._pendingDfd=t(this._doQuery(b,q,"executeForIds"===k||"executeForCount"===k)),e._pendingDfd.then(function(q){switch(k){case "execute":f=
new S;f.features=q;break;case "executeForIds":f=q;break;case "executeForCount":f=q.length}D._resolve([f],r,y,e)}),e}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,a,e,!0),e;this._ts&&(b._ts=(new Date).getTime());(e._pendingDfd=this._task[k](b)).addCallbacks(function(q){var a=!!b.outStatistics||P||p;if("execute"===k||"executeRelationshipQuery"===k){var E,c;if("execute"===k){E=q.features;c=E.length;for(c-=1;0<=c;c--)if(E[c]._layer=D,!a&&!D._isTable){var d=
D._mode._getFeature(E[c].attributes[D.objectIdField]);d&&E.splice(c,1,d)}}else for(d in q)if(q.hasOwnProperty(d)){E=q[d].features;c=E.length;for(c-=1;0<=c;c--)E[c]._layer=D}}D._resolve([q],r,y,e)},function(k){D._resolve([k],null,a,e,!0)});return e},_convertFeaturesToJson:function(k,r,q,y){var a=[],D=this._selectionSymbol,E=this.visibilityField,e,b=this.objectIdField;if(this.loaded&&(q||y))e=c.filter(this.fields,function(k){return!1===k.editable&&(!y||k.name!==b)});for(q=0;q<k.length;q++){var P=k[q],
p={},f=P.geometry,s=P.attributes,aa=P.symbol;if(f&&(!y||!this.loaded||this.allowGeometryUpdates))p.geometry=f.toJson();E?(p.attributes=s=d.mixin({},s),s[E]=P.visible?1:0):s&&(p.attributes=d.mixin({},s));p.attributes&&(e&&e.length)&&c.forEach(e,function(k){delete p.attributes[k.name]});aa&&aa!==D&&(p.symbol=aa.toJson());a.push(p)}return r?a:h.toJson(a)},_selectHandler:function(k,r,q,y,a){var D;y=ka;switch(r){case y.SELECTION_NEW:this.clearSelection(!0);D=!0;break;case y.SELECTION_ADD:D=!0;break;case y.SELECTION_SUBTRACT:D=
!1}y=k.features;var E=this._mode,e=[],b=this.objectIdField,P,c;if(D)for(D=0;D<y.length;D++)P=y[D],c=P.attributes[b],P=E._addFeatureIIf(c,P),e.push(P),this._selectFeatureIIf(c,P,E);else for(D=0;D<y.length;D++)P=y[D],c=P.attributes[b],this._unSelectFeatureIIf(c,E),c=E._removeFeatureIIf(c),e.push(c||P);this._isSelOnly&&E._applyTimeFilter(!0);this._hasPartialSelectedFeatures=!!k.exceededTransferLimit;this._resolve([e,r,k.exceededTransferLimit?{queryLimitExceeded:!0}:null],"onSelectionComplete",q,a);if(k.exceededTransferLimit)this.onQueryLimitExceeded()},
_selectFeatureIIf:function(k,r,q){var y=this._selectedFeatures,a=y[k];a||(q._incRefCount(k),y[k]=r,this._isTable||(this._setSelectSymbol(r),r.attr("data-selected","")));return a||r},_unSelectFeatureIIf:function(k,r){var q=this._selectedFeatures[k];q&&(r._decRefCount(k),delete this._selectedFeatures[k],this._isTable||(this._setUnSelectSymbol(q),q.attr("data-selected")));return q},_isSelected:function(k){},_setSelectSymbol:function(k){var r=this._selectionSymbol;r&&!this._isSelOnly&&k.setSymbol(r)},
_setUnSelectSymbol:function(k){var r=this._selectionSymbol;r&&!this._isSelOnly&&r===k.symbol&&k.setSymbol(null,!0)},_getOutFields:function(){var k=[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields).concat(this.dataAttributes),k=c.filter(k,function(k,r,q){return!!k&&c.indexOf(q,k)===r}),r=d.clone(this._outFields);if(r){if(-1!==c.indexOf(r,"*"))return r;c.forEach(k,function(k){-1===c.indexOf(r,k)&&r.push(k)});
return r}return k},_checkFields:function(k){var r=k||this._getOutFields();c.forEach(r,function(k){"*"!==k&&this._getField(k)},this);!k&&(!this._isTable&&!this._fserver&&!this._collection&&!this._isStream)&&c.some(this.fields,function(k){return k&&"esriFieldTypeGeometry"===k.type?!0:!1})},_fixFieldCase:function(k,r,q){var y=k&&k[r],a;if(y&&!d.isFunction(y)){if(a=!this._getField(y)&&this._getField(y,!0))y=k[r]=a.name;q&&q.push(y)}return y},_fixRendererFields:function(){var k=this.renderer;this._orderBy=
null;if(k&&0<this.fields.length){var r=[],q,k=c.filter([k,k.observationRenderer,k.latestObservationRenderer,k.trackRenderer],x.isDefined),y=[].concat(k);c.forEach(k,function(k){c.forEach(k.rendererInfos,function(k){k.renderer&&y.push(k.renderer)})});c.forEach(y,function(k){this._fixFieldCase(k,"attributeField",r);this._fixFieldCase(k,"attributeField2",r);this._fixFieldCase(k,"attributeField3",r);this._fixFieldCase(k.rotationInfo,"field",r);if((q=this._fixFieldCase(k.sizeInfo,"field",r))&&!this._orderBy)this._orderBy=
[q+" DESC"];this._fixFieldCase(k.sizeInfo,"normalizationField",r);this._fixFieldCase(k.colorInfo,"field",r);this._fixFieldCase(k.colorInfo,"normalizationField",r);this._fixFieldCase(k.field,"field",r);this._fixFieldCase(k.opacityInfo,"field",r);this._fixFieldCase(k.opacityInfo,"normalizationField",r);c.forEach(k.visualVariables,function(k){q=this._fixFieldCase(k,"field",r);"sizeInfo"===k.type&&(q&&!this._orderBy)&&(this._orderBy=[q+" DESC"]);this._fixFieldCase(k,"normalizationField",r)},this);if(!this._orderBy&&
k.addBreak&&!d.isFunction(k.attributeField)&&(k.backgroundFillSymbol||this._hasSizeDiff(k)))this._orderBy=[k.attributeField+" DESC"]},this);this._rendererFields=c.filter(r,x.isDefined)}},_hasSizeDiff:function(k){var r=Number.MAX_VALUE,q=-Number.MAX_VALUE,y,a;c.forEach(k.infos,function(k){if(a=k.symbol){y=0;switch(a.type){case "simplemarkersymbol":y=a.size;break;case "picturemarkersymbol":y=(a.width+a.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":y=a.width;break;case "simplefillsymbol":case "picturefillsymbol":y=
a.outline&&a.outline.width}y&&(r=Math.min(r,y),q=Math.max(q,y))}});return r!==Number.MAX_VALUE&&q!==-Number.MAX_VALUE&&1<Math.abs(q-r)},getOrderByFields:function(){var k=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&k?c.filter(k,function(k){k=k.split(" ")[0];return!!this._getField(k,!0)},this):null},_getField:function(k,r){var q=this.fields;if(!q||0===q.length)return null;var y;r&&(k=k.toLowerCase());c.some(q,function(q){var a=!1;(a=r?q&&q.name.toLowerCase()===k?!0:!1:q&&
q.name===k?!0:!1)&&(y=q);return a});return y},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:c.map(c.filter(this.fields,function(k){return!!(k&&"esriFieldTypeDate"===k.type)}),function(k){return k.name})});return this._dtOpts},_applyNormalized:function(k,r){k&&r&&c.forEach(k,function(k,q){k&&r[q]&&k.setGeometry(r[q])})},_editHandler:function(k,r,q,y,a,D){a=k.addResults;var e=k.updateResults;k=k.deleteResults;var b,p,f,s,h=this.objectIdField,aa=this._mode,n=this._isTable;b=this.editFieldsInfo;
var x=this.getOutFields()||[],X=b&&b.creatorField,u=b&&b.creationDateField,t=b&&b.editorField,w=b&&b.editDateField;b=b&&b.realm;-1===c.indexOf(x,"*")&&(X&&-1===c.indexOf(x,X)&&(X=null),u&&-1===c.indexOf(x,u)&&(u=null),t&&-1===c.indexOf(x,t)&&(t=null),w&&-1===c.indexOf(x,w)&&(w=null));var x=u||w?(new Date).getTime():null,v=X||t?this.getUserId():void 0;v&&b&&(v=v+"@"+b);if(a)for(b=0;b<a.length;b++)a[b]=new P(a[b]),n||(p=a[b],p.success&&(p=p.objectId,f=r[b],(s=f._graphicsLayer)&&s!==this&&s.remove(f),
s=f.attributes||{},s[h]=p,X&&(s[X]=v),t&&(s[t]=v),u&&(s[u]=x),w&&(s[w]=x),f.setAttributes(s),aa._init&&aa.drawFeature(f)));if(e)for(b=0;b<e.length;b++)if(e[b]=new P(e[b]),!n&&(p=e[b],p.success)){p=p.objectId;f=q[p];if(r=aa._getFeature(p))r.geometry!==f.geometry&&f.geometry&&r.setGeometry(E.fromJson(f.geometry.toJson())),r.attributes!==f.attributes&&f.attributes&&r.setAttributes(d.mixin(r.attributes,f.attributes)),this._repaint(r,p);f=r||f;s=f.attributes||{};t&&(s[t]=v);w&&(s[w]=x);f.setAttributes(s)}if(k){q=
[];for(b=0;b<k.length;b++)if(k[b]=new P(k[b]),!n&&(p=k[b],p.success&&(p=p.objectId,f=aa._getFeature(p))))this._unSelectFeatureIIf(p,aa)&&q.push(f),f._count=0,aa._removeFeatureIIf(p);if(0<q.length)this.onSelectionComplete(q,ka.SELECTION_SUBTRACT)}this._resolve([a,e,k],"onEditsComplete",y,D)},_sendAttachment:function(k,r,q,y,a){var D=this;return B({url:this._url.path+"/"+r+"/"+("add"===k?"addAttachment":"updateAttachment"),form:q,content:d.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),
callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(q){var a="add"===k?"onAddAttachmentComplete":"onUpdateAttachmentComplete";q=new P(q["add"===k?"addAttachmentResult":"updateAttachmentResult"]);q.attachmentId=q.objectId;q.objectId=r;D._resolve([q],a,y);return q}).addErrback(function(k){D._resolve([k],null,a,null,!0)})},_repaint:function(k,r,q){r=x.isDefined(r)?r:k.attributes[this.objectIdField];(!(r in this._selectedFeatures)||!this._selectionSymbol)&&k.setSymbol(k.symbol,q)},
_getKind:function(k){var r=this._trackManager;return r?r.isLatestObservation(k)?1:0:0}});d.mixin(ka,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});Q._createWrappers(ka);return ka})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/io/script dojo/io/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x){function B(a){a=new c(a);return(a.host+(a.port?":"+a.port:"")).toLowerCase()}function A(a){return this._xhr?this._xhr.getResponseHeader(a):null}function C(c,x,u,g){var B=!1,E=!1,A;w.isDefined(x)&&(d.isObject(x)?(B=!!x.useProxy,E=!!x.usePost,A=x.crossOrigin):B=!!x);c=d.mixin({},c);c._ssl&&(c.url=c.url.replace(/^http:/i,"https:"));x=c.content;var N=c.url,q=u&&c.form,k=K;A=w.isDefined(A)?A:k.useCors;c.load=function(k){var r;k&&(k.error?(r=d.mixin(Error(),k.error),
r.log=a.isDebug):"error"===k.status&&(r=d.mixin(Error(),k),r.log=a.isDebug),r&&!w.isDefined(r.httpCode)&&(r.httpCode=r.code));return r||k};c.error=function(r,q){q&&q.xhr&&q.xhr.abort();r instanceof Error||(r=d.mixin(Error(),r));r.log=a.isDebug;k.errorHandler(r,q);return r};c._token&&(c.content=c.content||{},c.content.token=c._token);var r=0,y;x&&N&&(y=p.objectToQuery(x),r=y.length+N.length+1,t("esri-url-encodes-apostrophe")&&(r=y.replace(/'/g,"%27").length+N.length+1));c.timeout=w.isDefined(c.timeout)?
c.timeout:k.timeout;c.handleAs=c.handleAs||"json";try{var D,P,aa=A&&v.canUseXhr(c.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(c.url),X=v.hasSameOrigin(c.url,window.location.href)||aa,na=E||u||r>k.postLength?!0:!1,C=!X&&-1!==c.handleAs.indexOf("json")&&c.callbackParamName&&!u?!0:!1,z=v.getProxyRule(c.url)||k.alwaysUseProxy||B||(!C||na)&&!X?!0:!1;u&&(!t("esri-file-upload")&&!z&&aa)&&(z=!0);if(z)if(D=v.getProxyUrl(N,A),P=D.path,D._xo&&(aa=!0),!na&&P.length+1+r>k.postLength&&(na=!0),c.url=
P+"?"+N,na)c.content=d.mixin(D.query||{},x);else{var F=p.objectToQuery(d.mixin(D.query||{},x));F&&(c.url+="?"+F);c.content=null}if(C&&!na)return!w.isDefined(c.isAsync)&&4>t("ff")&&(c.isAsync=!0),n.get(I?I(c):c);var M=c.headers;if(aa&&(!M||!M.hasOwnProperty("X-Requested-With")))M=c.headers=M||{},M["X-Requested-With"]=null;if(u){var J=c.callbackParamName||"callback.html",H=c.callbackElementName||"textarea",ka,ma,pa,ja,wa=q.elements?q.elements.length:0,Ba;if(x=c.content)for(ka in x)if(pa=x[ka],w.isDefined(pa)){ma=
null;for(ja=0;ja<wa;ja++)if(Ba=q.elements[ja],Ba.name===ka){ma=Ba;break}ma?ma.value=pa:g?q.append(ka,pa):q.appendChild(e.create("input",{type:"hidden",name:ka,value:pa}))}if(t("esri-file-upload"))m.forEach(q.elements,function(k){k.name===J&&q.removeChild(k)}),c.contentType=!1,c.postData=g?q:new FormData(q),delete c.form;else{q.enctype="multipart/form-data";9>t("ie")&&(q.encoding="multipart/form-data");q.method="post";m.some(q.elements,function(k){return k.name===J})||q.appendChild(e.create("input",
{type:"hidden",name:J,value:H}));if(-1!==N.toLowerCase().indexOf("addattachment")||-1!==N.toLowerCase().indexOf("updateattachment"))c.url=N+(-1===N.indexOf("?")?"?":"\x26")+J+"\x3d"+H,z&&(c.url=P+"?"+c.url);delete c.content}}if(aa&&!c.hasOwnProperty("withCredentials")&&"with-credentials"===K.useCors){g=z?P:N;var xa=v.canUseXhr(g,!0),oa=-1<xa?K.corsEnabledServers[xa]:null;if(oa&&oa.hasOwnProperty("withCredentials"))oa.withCredentials&&(c.withCredentials=!0);else if(s.id){var sa=s.id.findServerInfo(g);
sa&&sa.webTierAuth&&(c.withCredentials=!0)}}c=I?I(c):c;if(na){if(u&&!t("esri-file-upload"))return f.send(c);!z&&t("safari")&&(c.url+=(-1===c.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+L++);return h.post(c)}return h.get(c)}catch(Ia){return u=new b,u.errback(c.error(Ia)),u}}function z(a){var e=K.corsStatus,b=v.canUseXhr(a,!0);-1<b&&K.corsEnabledServers.splice(b,1);e[B(a)]=1;return b}function F(a){var e=K.corsStatus;if(K.corsDetection&&K.useCors)try{var b=B(a);t("esri-cors")&&(a&&-1!==
a.toLowerCase().indexOf("/rest/services")&&!v.hasSameOrigin(a,window.location.href)&&!v.canUseXhr(a)&&!e[b])&&(e[b]=-1,h.get({url:a.substring(0,a.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null}}).then(function(c){c?(e[b]=2,v.canUseXhr(a)||K.corsEnabledServers.push(b)):e[b]=1},function(a){e[b]=1}))}catch(c){}}function H(e,c){function p(q){q._pendingDfd=C(e,c,r,k);if(!q._pendingDfd){q.ioArgs=q._pendingDfd&&q._pendingDfd.ioArgs;
var y=Error("Deferred object is missing");y.log=a.isDebug;e._usrDfd=null;q.errback(y);q._pendingDfd=null;return q}q._pendingDfd.addCallback(function(k){q.ioArgs=q._pendingDfd&&q._pendingDfd.ioArgs;e._usrDfd=null;c.returnFullResponse&&(k={data:k,_xhr:q.ioArgs&&q.ioArgs.xhr,getHeader:A});q.callback(k);q._pendingDfd=null}).addErrback(function(k){var r,y,a;k&&(r=k.code,y=k.subcode,a=(a=k.messageCode)&&a.toUpperCase());if(k&&403==r&&(4==y||k.message&&-1<k.message.toLowerCase().indexOf("ssl")&&-1===k.message.toLowerCase().indexOf("permission"))){if(!e._ssl){e._ssl=
e._sslFromServer=!0;e._usrDfd=q;H(e,c);return}}else if(k&&415==k.status){if(z(e.url),!e._err415){e._err415=1;e._usrDfd=q;H(e,c);return}}else if(s.id&&-1!==m.indexOf(s.id._errorCodes,r)&&!s.id._isPublic(e.url)&&!E&&(403!=r||-1===m.indexOf(M,a)&&(!w.isDefined(y)||2==y&&e._token))){q._pendingDfd=s.id.getCredential(e.url,{token:e._token,error:k});q._pendingDfd.addCallback(function(k){e._token=k.token;e._usrDfd=q;e._credential=k;e._ssl=e._sslFromServer||k.ssl;H(e,c)}).addErrback(function(k){e._usrDfd=
null;q.errback(k);q._pendingDfd=null});return}q.ioArgs=q._pendingDfd&&q._pendingDfd.ioArgs;e._usrDfd=null;q.errback(k);q._pendingDfd=null})}e.url=v.fixUrl(e.url);c=c||{};var d,f=e.form,E=c.disableIdentityLookup,n=c._preLookup,u=!1;if(t("esri-workers")&&!1!==K.useWorkers)if(!0===c.useWorkers||!0===K.useWorkers)u=!0;else if(c.workerOptions){var q=c.workerOptions;if(q.callback||q.worker&&q.worker.worker instanceof Worker)u=!0}var k=f&&t("esri-file-upload")&&f instanceof FormData,r=f&&(f.elements?m.some(f.elements,
function(k){return"file"===k.type}):k),y=-1!==e.url.toLowerCase().indexOf("token\x3d")||e.content&&e.content.token||r&&m.some(f.elements,function(k){return"token"===k.name})?1:0;F(e.url);if(e._usrDfd)d=e._usrDfd;else{d=new b(x._dfdCanceller);d.addCallback(function(k){if((/\/sharing\/rest\/accounts\/self/i.test(e.url)||/\/sharing\/rest\/portals\/self/i.test(e.url))&&!y&&!e._token&&k.user&&k.user.username){K.webTierAuthServers.push(B(e.url));k=K.corsEnabledServers;var r=v.canUseXhr(e.url,!0),q={host:B(e.url),
withCredentials:!0};if(-1===r)k.push(q);else{var a=k[r];"object"===typeof a?a.withCredentials=!0:k.splice(r,1,q)}}if(k=e._credential)if(r=(r=s.id.findServerInfo(k.server))&&r.owningSystemUrl)r=r.replace(/\/?$/,"/sharing"),(k=s.id.findCredential(r,k.userId))&&-1===s.id._getIdenticalSvcIdx(r,k)&&k.resources.splice(0,0,r)});d.addBoth(function(k){delete e._credential;if(k&&(!t("ie")||!k.nodeType))k._ssl=e._ssl});var D=e.load,P=e.error;D&&d.addCallback(function(k){var r=d._pendingDfd,r=r&&r.ioArgs;return D.call(r&&
r.args,k,r)});P&&d.addErrback(function(k){var r=d._pendingDfd,r=r&&r.ioArgs;return P.call(r&&r.args,k,r)})}if(s.id&&!y&&!e._token&&!s.id._isPublic(e.url)&&(!E||n))if(f=s.id.findCredential(e.url))e._token=f.token,e._ssl=f.ssl;u?c.workerOptions&&c.workerOptions.worker?(J||(J=h),h=c.workerOptions.worker,p(d)):g(["./workers/RequestClient"],function(k){J||(J=h);if(c.workerOptions){var r=c.workerOptions;h=k.getClient(r.callback,r.cbFunction)}else h=k.getClient();p(d)}):(J&&(h=J,J=null),p(d));return d}var J=
null,I,K=u.defaults.io,M=["COM_0056","COM_0057"],L=0;H._request=C;H._disableCors=z;H._detectCors=F;H.setRequestPreCallback=function(a){I=a};return H})},"dojo/_base/url":function(){define(["./kernel"],function(g){var m=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,a=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,b=function(){for(var d=arguments,c=[d[0]],h=1;h<d.length;h++)if(d[h]){var n=new b(d[h]+""),c=new b(c[0]+"");if(""==n.path&&!n.scheme&&!n.authority&&!n.query)null!=
n.fragment&&(c.fragment=n.fragment),n=c;else if(!n.scheme&&(n.scheme=c.scheme,!n.authority&&(n.authority=c.authority,"/"!=n.path.charAt(0)))){for(var c=(c.path.substring(0,c.path.lastIndexOf("/")+1)+n.path).split("/"),f=0;f<c.length;f++)"."==c[f]?f==c.length-1?c[f]="":(c.splice(f,1),f--):0<f&&(!(1==f&&""==c[0])&&".."==c[f]&&".."!=c[f-1])&&(f==c.length-1?(c.splice(f,1),c[f-1]=""):(c.splice(f-1,2),f-=2));n.path=c.join("/")}c=[];n.scheme&&c.push(n.scheme,":");n.authority&&c.push("//",n.authority);c.push(n.path);
n.query&&c.push("?",n.query);n.fragment&&c.push("#",n.fragment)}this.uri=c.join("");d=this.uri.match(m);this.scheme=d[2]||(d[1]?"":null);this.authority=d[4]||(d[3]?"":null);this.path=d[5];this.query=d[7]||(d[6]?"":null);this.fragment=d[9]||(d[8]?"":null);null!=this.authority&&(d=this.authority.match(a),this.user=d[3]||null,this.password=d[4]||null,this.host=d[6]||d[7],this.port=d[9]||null)};b.prototype.toString=function(){return this.uri};return g._Url=b})},"dojo/io/script":function(){define("../_base/connect ../_base/kernel ../_base/lang ../sniff ../_base/window ../_base/xhr ../dom ../dom-construct ../request/script ../aspect".split(" "),
function(g,m,a,b,d,c,h,n,f,e){m.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var p={get:function(a){var b,d=this._makeScriptDeferred(a,function(a){b&&b.cancel()}),h=d.ioArgs;c._ioAddQueryToUrl(h);c._ioNotifyStart(d);b=f.get(h.url,{timeout:a.timeout,jsonp:h.jsonp,checkString:a.checkString,ioArgs:h,frameDoc:a.frameDoc,canAttach:function(a){h.requestId=a.id;h.scriptId=a.scriptId;h.canDelete=a.canDelete;return p._canAttach(h)}},!0);e.around(b,"isValid",function(a){return function(e){p._validCheck(d);
return a.call(this,e)}});b.then(function(){d.resolve(d)}).otherwise(function(a){d.ioArgs.error=a;d.reject(a)});return d},attach:f._attach,remove:f._remove,_makeScriptDeferred:function(a,e){var b=c._ioSetArgs(a,e||this._deferredCancel,this._deferredOk,this._deferredError),d=b.ioArgs;d.id=m._scopeName+"IoScript"+(a.callbackSuffix||this._counter++);d.canDelete=!1;d.jsonp=a.callbackParamName||a.jsonp;d.jsonp&&(d.query=d.query||"",0<d.query.length&&(d.query+="\x26"),d.query+=d.jsonp+"\x3d"+(a.frameDoc?
"parent.":"")+m._scopeName+".io.script.jsonp_"+d.id+"._jsonpCallback",d.frameDoc=a.frameDoc,d.canDelete=!0,b._jsonpCallback=this._jsonpCallback,this["jsonp_"+d.id]=b);b.addBoth(function(a){d.canDelete&&(a instanceof Error?p["jsonp_"+d.id]._jsonpCallback=function(){delete p["jsonp_"+d.id];if(d.requestId)m.global[f._callbacksProperty][d.requestId]()}:p._addDeadScript(d))});return b},_deferredCancel:function(a){a.canceled=!0},_deferredOk:function(a){a=a.ioArgs;return a.json||a.scriptLoaded||a},_deferredError:function(a,
e){return a},_deadScripts:[],_counter:1,_addDeadScript:function(a){p._deadScripts.push({id:a.id,frameDoc:a.frameDoc});a.frameDoc=null},_validCheck:function(a){if((a=p._deadScripts)&&0<a.length){for(var e=0;e<a.length;e++)p.remove(a[e].id,a[e].frameDoc),delete p["jsonp_"+a[e].id],a[e].frameDoc=null;p._deadScripts=[]}return!0},_ioCheck:function(a){a=a.ioArgs;return a.json||a.scriptLoaded&&!a.args.checkString?!0:(a=a.args.checkString)&&eval("typeof("+a+") !\x3d 'undefined'")},_resHandle:function(a){p._ioCheck(a)?
a.callback(a):a.errback(Error("inconceivable dojo.io.script._resHandle error"))},_canAttach:function(){return!0},_jsonpCallback:function(a){this.ioArgs.json=a;if(this.ioArgs.requestId)m.global[f._callbacksProperty][this.ioArgs.requestId](a)}};a.setObject("dojo.io.script",p);return p})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(g,m,a,b,d,c,h,n,f,e,p){function s(a,
e){a.canDelete&&x._remove(a.id,e.options.frameDoc,!0)}function u(a){H&&H.length&&(d.forEach(H,function(a){x._remove(a.id,a.frameDoc);a.frameDoc=null}),H=[]);return a.options.jsonp?!a.data:!0}function t(a){return!!this.scriptLoaded}function w(a){return(a=a.options.checkString)&&eval("typeof("+a+') !\x3d\x3d "undefined"')}function v(a,e){if(this.canDelete){var b=this.response.options;H.push({id:this.id,frameDoc:b.ioArgs?b.ioArgs.frameDoc:b.frameDoc});b.ioArgs&&(b.ioArgs.frameDoc=null);b.frameDoc=null}e?
this.reject(e):this.resolve(a)}function x(e,b,p){var d=a.parseArgs(e,a.deepCopy({},b));e=d.url;b=d.options;var f=a.deferred(d,s,u,b.jsonp?null:b.checkString?w:t,v);c.mixin(f,{id:B+A++,canDelete:!1});b.jsonp&&(RegExp("[?\x26]"+b.jsonp+"\x3d").test(e)||(e+=(~e.indexOf("?")?"\x26":"?")+b.jsonp+"\x3d"+(b.frameDoc?"parent.":"")+B+"_callbacks."+f.id),f.canDelete=!0,F[f.id]=function(a){d.data=a;f.handleResponse(d)});a.notify&&a.notify.emit("send",d,f.promise.cancel);if(!b.canAttach||b.canAttach(f)){var n=
x._attach(f.id,e,b.frameDoc);if(!b.jsonp&&!b.checkString)var g=h(n,C,function(a){if("load"===a.type||z.test(n.readyState))g.remove(),f.scriptLoaded=a})}h.once(n,"error",function(a){f.reject(a);x._remove(f.id,b.frameDoc,!0)});m(f);return p?f:f.promise}e.add("script-readystatechange",function(a,e){return"undefined"!==typeof e.createElement("script").onreadystatechange&&("undefined"===typeof a.opera||"[object Opera]"!==a.opera.toString())});var B=g.id.replace(/[\/\.\-]/g,"_"),A=0,C=e("script-readystatechange")?
"readystatechange":"load",z=/complete|loaded/,F=b.global[B+"_callbacks"]={},H=[];x.get=x;x._attach=function(a,e,b){b=b||p.doc;var c=b.createElement("script");c.type="text/javascript";c.src=e;c.id=a;c.async=!0;c.charset="utf-8";return b.getElementsByTagName("head")[0].appendChild(c)};x._remove=function(a,e,b){f.destroy(n.byId(a,e));F[a]&&(b?F[a]=function(){delete F[a]}:delete F[a])};x._callbacksProperty=B+"_callbacks";return x})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u){a.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");c=u._iframeName;c=c.substring(0,c.lastIndexOf("_"));var t=b.delegate(u,{create:function(){return t._frame=u.create.apply(u,arguments)},get:null,post:null,send:function(e){var b,c=d._ioSetArgs(e,function(a){b&&b.cancel()},function(e){var c=null;e=e.ioArgs;try{var p=e.handleAs;"xml"===p||"html"===p?c=b.response.data:(c=b.response.text,"json"===p?c=m.fromJson(c):"javascript"===p&&(c=a.eval(c)))}catch(d){c=
d}return c},function(a,e){e.ioArgs._hasError=!0;return a}),p=c.ioArgs,f="GET",h=n.byId(e.form);e.method&&("POST"===e.method.toUpperCase()&&h)&&(f="POST");e={method:f,handleAs:"json"===e.handleAs||"javascript"===e.handleAs?"text":e.handleAs,form:e.form,query:h?null:e.content,data:h?e.content:null,timeout:e.timeout,ioArgs:p};e.method&&(e.method=e.method.toUpperCase());if(g.ioPublish&&a.publish&&!1!==p.args.ioPublish)var t=s.after(u,"_notifyStart",function(a){a.options.ioArgs===p&&(t.remove(),d._ioNotifyStart(c))},
!0);b=u(p.url,e,!0);p._callNext=b._callNext;b.then(function(){c.resolve(c)}).otherwise(function(a){c.ioArgs.error=a;c.reject(a)});return c},_iframeOnload:h.global[c+"_onload"]});b.setObject("dojo.io.iframe",t);return t})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s){function u(a){return!this.isFulfilled()}function t(a){return!!this._finished}
function w(a,e){if(!e)try{var b=a.options,p=x.doc(x._frame),f=b.handleAs;if("html"!==f){if("xml"===f)if("html"===p.documentElement.tagName.toLowerCase()){n("a",p.documentElement).orphan();var s=p.documentElement.innerText||p.documentElement.textContent,s=s.replace(/>\s+</g,"\x3e\x3c");a.text=c.trim(s)}else a.data=p;else a.text=p.getElementsByTagName("textarea")[0].value;d(a)}else a.data=p}catch(h){e=h}e?this.reject(e):this._finished?this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}
function v(a){this._callNext()}function x(e,c,p){var d=b.parseArgs(e,b.deepCreate(C,c),!0);e=d.url;c=d.options;if("GET"!==c.method&&"POST"!==c.method)throw Error(c.method+" not supported by dojo/request/iframe");x._frame||(x._frame=x.create(x._iframeName,A+"();"));e=b.deferred(d,null,u,t,w,v);e._callNext=function(){this._calledNext||(this._calledNext=!0,x._currentDfd=null,x._fireNextRequest())};e._legacy=p;x._dfdQueue.push(e);x._fireNextRequest();a(e);return p?e:e.promise}var B=g.id.replace(/[\/\.\-]/g,
"_"),A=B+"_onload";s.global[A]||(s.global[A]=function(){var a=x._currentDfd;if(a){var b=e.byId(a.response.options.form)||a._tmpForm;if(b){for(var c=a._contentToClean,d=0;d<c.length;d++)for(var f=c[d],s=0;s<b.childNodes.length;s++){var h=b.childNodes[s];if(h.name===f){p.destroy(h);break}}a._originalAction&&b.setAttribute("action",a._originalAction);a._originalMethod&&(b.setAttribute("method",a._originalMethod),b.method=a._originalMethod);a._originalTarget&&(b.setAttribute("target",a._originalTarget),
b.target=a._originalTarget)}a._tmpForm&&(p.destroy(a._tmpForm),delete a._tmpForm);a._finished=!0}else x._fireNextRequest()});var C={method:"POST"};x.create=function(a,e,b){if(s.global[a])return s.global[a];if(s.global.frames[a])return s.global.frames[a];b||(f("config-useXDomain")&&f("config-dojoBlankHtmlUrl"),b=f("config-dojoBlankHtmlUrl")||m.toUrl("dojo/resources/blank.html"));e=p.place('\x3ciframe id\x3d"'+a+'" name\x3d"'+a+'" src\x3d"'+b+'" onload\x3d"'+e+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',
s.body());return s.global[a]=e};x.doc=function(a){if(a.contentDocument)return a.contentDocument;var e=a.name;if(e){var b=s.doc.getElementsByTagName("iframe");if(a.document&&b[e].contentWindow&&b[e].contentWindow.document)return b[e].contentWindow.document;if(s.doc.frames[e]&&s.doc.frames[e].document)return s.doc.frames[e].document}return null};x.setSrc=function(a,e,b){a=s.global.frames[a.name];a.contentWindow&&(a=a.contentWindow);try{b?a.location.replace(e):a.location=e}catch(c){}};x._iframeName=
B+"_IoIframe";x._notifyStart=function(){};x._dfdQueue=[];x._currentDfd=null;x._fireNextRequest=function(){var a;try{if(!x._currentDfd&&x._dfdQueue.length){do a=x._currentDfd=x._dfdQueue.shift();while(a&&(a.canceled||a.isCanceled&&a.isCanceled())&&x._dfdQueue.length);if(!a||a.canceled||a.isCanceled&&a.isCanceled())x._currentDfd=null;else{var d=a.response,f=d.options,n=a._contentToClean=[],u=e.byId(f.form),t=b.notify,w=f.data||null,v;!a._legacy&&"POST"===f.method&&!u?u=a._tmpForm=p.create("form",{name:B+
"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},s.body()):"GET"===f.method&&(u&&-1<d.url.indexOf("?"))&&(v=d.url.slice(d.url.indexOf("?")+1),w=c.mixin(h.queryToObject(v),w));if(u){if(!a._legacy){var g=u;do g=g.parentNode;while(g&&g!==s.doc.documentElement);g||(u.style.position="absolute",u.style.left="-1000px",u.style.top="-1000px",s.body().appendChild(u));u.name||(u.name=B+"_form")}if(w){var g=function(a,q){p.create("input",{type:"hidden",name:a,value:q},u);n.push(a)},A;for(A in w){var m=
w[A];if(c.isArray(m)&&1<m.length)for(v=0;v<m.length;v++)g(A,m[v]);else u[A]?u[A].value=m:g(A,m)}}var C=u.getAttributeNode("action"),T=u.getAttributeNode("method"),E=u.getAttributeNode("target");d.url&&(a._originalAction=C?C.value:null,C?C.value=d.url:u.setAttribute("action",d.url));if(a._legacy){if(!T||!T.value)T?T.value=f.method:u.setAttribute("method",f.method)}else a._originalMethod=T?T.value:null,T?T.value=f.method:u.setAttribute("method",f.method);a._originalTarget=E?E.value:null;E?E.value=x._iframeName:
u.setAttribute("target",x._iframeName);u.target=x._iframeName;t&&t.emit("send",d,a.promise.cancel);x._notifyStart(d);u.submit()}else f="",d.options.data&&(f=d.options.data,"string"!==typeof f&&(f=h.objectToQuery(f))),g=d.url+(-1<d.url.indexOf("?")?"\x26":"?")+f,t&&t.emit("send",d,a.promise.cancel),x._notifyStart(d),x.setSrc(x._frame,g,!0)}}}catch(Q){a.reject(Q)}};b.addCommonMethods(x,["GET","POST"]);return x})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],
function(g,m,a,b){a=function(){return this}();b={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,
panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:a.Worker&&!1,io:{errorHandler:function(a,b){m.publish("esri.Error",[a])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:"server.arcgisonline.com services.arcgisonline.com www.arcgis.com tiles.arcgis.com tiles1.arcgis.com tiles2.arcgis.com tiles3.arcgis.com tiles4.arcgis.com basemaps.arcgis.com elevation3d.arcgis.com services.arcgis.com services1.arcgis.com services2.arcgis.com services3.arcgis.com services4.arcgis.com services5.arcgis.com services6.arcgis.com services7.arcgis.com static.arcgis.com utility.arcgisonline.com geocode.arcgis.com geoenrich.arcgis.com qaext.arcgis.com tilesqa.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com geocodeqa.arcgis.com geoenrichqa.arcgis.com dev.arcgis.com devext.arcgis.com staticdev.arcgis.com tilesdevext.arcgis.com elevation3ddev.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com geocodedev.arcgis.com geoenrichdev.arcgis.com basemapsdev.arcgis.com".split(" "),
corsDetection:a.cordova?!1:!0,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")}}};g.noGlobals||(a.esriConfig=b);return b})},"esri/sniff":function(){define(["dojo/_base/sniff","./kernel"],function(g,m){var a=function(){return this}(),b=
g("ff"),d=g("ie"),c=void 0===d&&7<=g("trident"),h=g("edge"),n=g("webkit"),f=g("opera"),e=g("chrome"),p=g("safari"),s=navigator.userAgent,u;(u=s.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i))&&g.add("esri-iphone",parseFloat(u[2].replace("_",".")));(u=s.match(/Android\s+(\d+\.\d+)/i))&&g.add("esri-android",parseFloat(u[1]));(u=s.match(/Fennec\/(\d+\.\d+)/i))&&g.add("esri-fennec",parseFloat(u[1]));0<=s.indexOf("BlackBerry")&&0<=s.indexOf("WebKit")&&g.add("esri-blackberry",1);g.add("esri-touch",g("esri-iphone")||
g("esri-android")||g("esri-blackberry")||6<=g("esri-fennec")||(b||n)&&document.createTouch?!0:!1);(u=s.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&g.add("esri-mobile",u);g.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled);m._getDOMAccessor=function(a){var e="";b?e="Moz":n?e="Webkit":d?e="ms":f&&(e="O");return e+a.charAt(0).toUpperCase()+a.substr(1)};g.add("esri-phonegap",!!a.cordova);g.add("esri-cors",g("esri-phonegap")||a.XMLHttpRequest&&"withCredentials"in
new XMLHttpRequest);g.add("esri-file-upload",a.FormData&&a.FileList?!0:!1);g.add("esri-workers",a.Worker?!0:!1);g.add("esri-transforms",c||h||9<=d||3.5<=b||4<=e||3.1<=p||10.5<=f||3.2<=g("esri-iphone")||2.1<=g("esri-android"));g.add("esri-transitions",c||h||10<=d||4<=b||4<=e||3.1<=p||10.5<=f||3.2<=g("esri-iphone")||2.1<=g("esri-android"));g.add("esri-transforms3d",c||h||10<=b||12<=e||4<=p||3.2<=g("esri-iphone")||3<=g("esri-android"));g.add("esri-url-encodes-apostrophe",function(){if(a.document)return!1;
var e=a.document.createElement("a");e.href="?'";return-1<e.href.indexOf("?%27")});3>g("esri-android")&&(g.add("esri-transforms",!1,!1,!0),g.add("esri-transitions",!1,!1,!0),g.add("esri-transforms3d",!1,!1,!0));g.add("esri-will-change",g("esri-transforms")&&(52<=e||9.1<=p));m._css=function(a){var c=g("esri-transforms3d");if(void 0!==a&&null!==a)c=a;else if(c&&(e||p&&!g("esri-iphone")))c=!1;var s=c?"translate3d(":"translate(",h=c?e?",-1px)":",0px)":")",u=c?"scale3d(":"scale(",A=c?",1)":")",m=c?"rotate3d(0,0,1,":
"rotate(",z=c?"matrix3d(":"matrix(",F=c?",0,0,":",",H=c?",0,0,0,0,1,0,":",",J=c?",0,1)":")";return{names:{transition:n&&"-webkit-transition"||b&&"MozTransition"||f&&"OTransition"||d&&"msTransition"||"transition",transform:n&&"-webkit-transform"||b&&"MozTransform"||f&&"OTransform"||d&&"msTransform"||"transform",transformName:n&&"-webkit-transform"||b&&"-moz-transform"||f&&"-o-transform"||d&&"-ms-transform"||"transform",origin:n&&"-webkit-transform-origin"||b&&"MozTransformOrigin"||f&&"OTransformOrigin"||
d&&"msTransformOrigin"||"transformOrigin",endEvent:n&&"webkitTransitionEnd"||b&&"transitionend"||f&&"oTransitionEnd"||d&&"MSTransitionEnd"||"transitionend"},translate:function(a,e){return s+a+"px,"+e+"px"+h},scale:function(a){return u+a+","+a+A},rotate:function(a){return m+a+"deg)"},matrix:function(a){return z+a.xx+","+a.xy+F+a.yx+","+a.yy+H+a.dx.toFixed(10)+(b?"px,":",")+a.dy.toFixed(10)+(b?"px":"")+J},getScaleFromMatrix:function(a){if(!a)return 1;a=a.toLowerCase();var e=-1<a.indexOf("matrix3d")?
"matrix3d(":"matrix(";return Number(a.substring(e.length,a.indexOf(",")))}}};return g})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(g,m,a,b,d,c,h,n,f){var e=function(){return this}(),p={},s=h.defaults.io,u=/^[a-z][a-z0-9\+\-\.]*:/i,t=/^\s*http:/i;p.isHTTP=function(a){var b=e.location.protocol;return null==a?"http:"===b||"https:"===b:a?"https:"===b:"http:"===b};p.getProtocolForWebResource=
function(a){return p.isHTTP()?e.location.protocol:a?"https:":"http:"};p.urlToObject=function(e){var c={},p=new a(e),d=e.indexOf("?");null===p.query?c={path:e,query:null}:(c.path=e.substring(0,d),c.query=b.queryToObject(p.query));p.fragment&&(c.hash=p.fragment,null===p.query&&(c.path=c.path.substring(0,c.path.length-(p.fragment.length+1))));return c};p.getProxyUrl=function(a,b){var c=g.isString(a)?0===g.trim(a).toLowerCase().indexOf("https:"):a,d=s.proxyUrl,h,n,u=f.io.proxyNotSet;if(g.isString(a)&&
(n=p.getProxyRule(a)))d=n.proxyUrl;if(!d)throw Error(u);c&&(!1!==b&&0!==e.location.href.toLowerCase().indexOf("https:"))&&(c=d,0!==c.toLowerCase().indexOf("http")&&(c=p.getAbsoluteUrl(c)),c=c.replace(/^http:/i,"https:"),p.canUseXhr(c)&&(d=c,h=1));d=p.urlToObject(d);d._xo=h;return d};p.addProxy=function(a){var e=p.getProxyRule(a),c;e?c=p.urlToObject(e.proxyUrl):s.alwaysUseProxy&&(c=p.getProxyUrl());c&&(e=p.urlToObject(a),a=c.path+"?"+e.path,(c=b.objectToQuery(g.mixin(c.query||{},e.query)))&&(a+="?"+
c));return a};p.addProxyRule=function(a){var e=a.urlPrefix=p.urlToObject(a.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),b=s.proxyRules,c,d=b.length,f,h=d;for(c=0;c<d;c++)if(f=b[c].urlPrefix,0===e.indexOf(f)){if(e.length===f)return-1;h=c;break}else 0===f.indexOf(e)&&(h=c+1);b.splice(h,0,a);return h};p.getProxyRule=function(a){var e=s.proxyRules,b=e.length,c=p.urlToObject(a).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),d;for(a=0;a<
b;a++)if(0===c.indexOf(e[a].urlPrefix)){d=e[a];break}return d};p.hasSameOrigin=function(b,c,p){b=b.toLowerCase();c=c.toLowerCase();var d=e.location.href.toLowerCase();b=0===b.indexOf("http")?new a(b):d=new a(d);c=0===c.indexOf("http")?new a(c):g.isString(d)?new a(d):d;return(p||b.scheme===c.scheme)&&b.host===c.host&&b.port===c.port};p.canUseXhr=function(a,e){var b=n("esri-phonegap")?!0:!1,c=p.hasSameOrigin,d=s.corsEnabledServers,f,h=-1;!b&&(n("esri-cors")&&d&&d.length)&&(b=m.some(d,function(e,b){var p=
e&&"object"===typeof e?e.host:e;return p&&(f=0!==g.trim(p).toLowerCase().indexOf("http"),c(a,f?"http://"+p:p)||f&&c(a,"https://"+p))?(h=b,!0):!1}));return e?h:b};p.getAbsoluteUrl=function(a){var b=p.getProtocolForWebResource();return g.isString(a)&&!u.test(a)?0===a.indexOf("//")?b+a:0===a.indexOf("/")?b+"//"+e.location.host+a:d._appBaseUrl+a:a};p.fixUrl=function(a){a=p.getAbsoluteUrl(a);a=p.upgradeToHTTPS(a);return a=a.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")};p.normalize=function(a){return p.fixUrl(a)};
p.upgradeToHTTPS=function(a){var b=h.defaults.io.httpsDomains,d=p.isHTTP(!1),f=p.isHTTP(!0);if(!t.test(a)||d)return a;var d=a.indexOf("/",7),d=-1===d?a:a.slice(0,d),s=!1;if(f&&e.location&&c.endsWith(d,e.location.host))s=!0;else if(b)for(f=0;f<b.length;f++)if(c.endsWith(d,b[f])){s=!0;break}s&&(a=a.replace(t,"https:"));return a};return p})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(g,m,a){return{_dfdCanceller:function(a){a.canceled=!0;var d=a._pendingDfd;
-1===a.fired&&(d&&-1===d.fired)&&d.cancel();a._pendingDfd=null},_fixDfd:function(a){var d=a.then;a.then=function(a,b,n){if(a){var f=a;a=function(a){return a&&a._argsArray?f.apply(null,a):f(a)}}return d.call(this,a,b,n)};return a},_resDfd:function(a,d,c){var h=d.length;1===h?c?a.errback(d[0]):a.callback(d[0]):1<h?(d._argsArray=!0,a.callback(d)):a.callback()}}})},"esri/SpatialReference":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ./kernel ./lang".split(" "),function(g,
m,a,b,d,c){b=[-2.0037508342788905E7,2.0037508342788905E7];d=[-2.0037508342787E7,2.0037508342787E7];return g(null,{declaredClass:"esri.SpatialReference",constructor:function(b){b&&(a.isObject(b)?a.mixin(this,b):a.isString(b)?this.wkt=b:this.wkid=b)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:b,origin:d,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:b,origin:d,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:b,origin:d,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:b,origin:d,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==m.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==m.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(a){var b=!1;a&&(b=this.isWebMercator()&&4326===a.wkid||a.isWebMercator()&&4326===this.wkid);return b},isWebMercator:function(){return this._isWebMercator()},equals:function(a){var b=!1;a&&(this===a&&
(b=!0),this.wkid||a.wkid?b=this.wkid===a.wkid||this.isWebMercator()&&a.isWebMercator()||this.wkid===a.latestWkid||a.wkid===this.latestWkid:this.wkt&&a.wkt&&(b=this.wkt.toUpperCase()===a.wkt.toUpperCase()));return b},toJson:function(){var a=null,b=c.isDefined;b(this.wkid)?a={wkid:this.wkid}:b(this.wkt)&&(a={wkt:this.wkt});a&&b(this.latestWkid)&&(a.latestWkid=this.latestWkid);return a}})})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),
function(g,m,a,b,d,c,h,n,f){var e={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},p={style:e.STYLE_CIRCLE,color:[255,255,255,0.25],size:12,angle:0,xoffset:0,yoffset:0};g=g(n,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},constructor:function(b,c,
n,w){b?m.isString(b)?(this.style=b,c&&(this.size=c),n&&(this.outline=n),w&&(this.color=w)):(this.style=h.valueOf(this._styles,this.style),b.outline&&(this.outline=new f(b.outline))):(m.mixin(this,p),this.size=d.pt2px(this.size),this.outline=new f(this.outline),this.color=new a(this.color));this.style||(this.style=e.STYLE_CIRCLE)},setStyle:function(a){this.style=a;return this},setPath:function(a){this.path=a;this.setStyle(e.STYLE_PATH);return this},setOutline:function(a){this.outline=a;return this},
getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(a,e,b){this._targetWidth=a;this._targetHeight=e;this._spikeSize=b},getShapeDescriptors:function(){var a,b,c,f=this.style,h=(this.size||d.pt2px(p.size))/2,n=0-h,g=0+h,A=0-h,m=0+h;switch(f){case e.STYLE_CIRCLE:a={type:"circle",cx:0,cy:0,r:h};b=this.getFill();if(c=this.getStroke())c.style=c.style||"Solid";break;case e.STYLE_CROSS:a={type:"path",path:"M "+n+",0 L "+g+",0 M 0,"+A+
" L 0,"+m+" E"};b=null;c=this.getStroke();break;case e.STYLE_DIAMOND:a={type:"path",path:"M "+n+",0 L 0,"+A+" L "+g+",0 L 0,"+m+" L "+n+",0 Z"};b=this.getFill();c=this.getStroke();break;case e.STYLE_SQUARE:a={type:"path",path:"M "+n+","+m+" L "+n+","+A+" L "+g+","+A+" L "+g+","+m+" L "+n+","+m+" Z"};b=this.getFill();c=this.getStroke();break;case e.STYLE_X:a={type:"path",path:"M "+n+","+m+" L "+g+","+A+" M "+n+","+A+" L "+g+","+m+" E"};b=null;c=this.getStroke();break;case e.STYLE_PATH:a={type:"path",
path:this.path||""},b=this.getFill(),c=this.getStroke()}return{defaultShape:a,fill:b,stroke:c}},toJson:function(){var a=this.style,e=this.outline,b=m.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[a]});e&&(b.outline=e.toJson());("x"===a||"cross"===a)&&delete b.color;b.path=this.path;return h.fixJson(b)}});m.mixin(g,e);g.defaultProps=p;return g})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),
function(g,m,a,b,d,c,h,n,f){var e=m.getObject("dojox.gfx",!0),p=e._base={};e._hasClass=function(a,e){var b=a.getAttribute("className");return b&&0<=(" "+b+" ").indexOf(" "+e+" ")};e._addClass=function(a,e){var b=a.getAttribute("className")||"";if(!b||0>(" "+b+" ").indexOf(" "+e+" "))a.setAttribute("className",b+(b?" ":"")+e)};e._removeClass=function(a,e){var b=a.getAttribute("className");b&&a.setAttribute("className",b.replace(RegExp("(^|\\s+)"+e+"(\\s+|$)"),"$1$2"))};p._getFontMeasurements=function(){var a=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},e,c;b("ie")&&(c=d.doc.documentElement.style.fontSize||"",c||(d.doc.documentElement.style.fontSize="100%"));var p=n.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},d.body());for(e in a)p.style.fontSize=e,a[e]=16*Math.round(12*p.offsetHeight/16)/12/1E3;
b("ie")&&(d.doc.documentElement.style.fontSize=c);d.body().removeChild(p);return a};var s=null;p._getCachedFontMeasurements=function(a){if(a||!s)s=p._getFontMeasurements();return s};var u=null,t={};p._getTextBox=function(a,e,b){var c,p,s=arguments.length,h;u||(u=n.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},d.body()));c=u;c.className="";p=c.style;p.borderWidth="0";p.margin="0";p.padding="0";p.outline="0";if(1<s&&e)for(h in e)h in t||(p[h]=e[h]);2<s&&b&&(c.className=
b);c.innerHTML=a;c.getBoundingClientRect?(p=c.getBoundingClientRect(),p={l:p.left,t:p.top,w:p.width||p.right-p.left,h:p.height||p.bottom-p.top}):p=f.getMarginBox(c);c.innerHTML="";return p};p._computeTextLocation=function(a,e,b,c){var p={};switch(a.align){case "end":p.x=a.x-e;break;case "middle":p.x=a.x-e/2;break;default:p.x=a.x}p.y=a.y-b*(c?0.75:1);return p};p._computeTextBoundingBox=function(a){if(!e._base._isRendered(a))return{x:0,y:0,width:0,height:0};var b;b=a.getShape();var c=a.getFont()||e.defaultFont;
a=a.getTextWidth();c=e.normalizedLength(c.size);b=p._computeTextLocation(b,a,c,!0);return{x:b.x,y:b.y,width:a,height:c}};p._isRendered=function(a){for(a=a.parent;a&&a.getParent;)a=a.parent;return null!==a};var w=0;p._getUniqueId=function(){var a;do a=g._scopeName+"xUnique"+ ++w;while(h.byId(a));return a};var v=b("pointer-events")?"touchAction":b("MSPointer")?"msTouchAction":null;p._fixMsTouchAction=v?function(a){a.rawNode.style[v]="none"}:function(){};m.mixin(e,{defaultPath:{type:"path",path:""},
defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},
defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a=
{};return function(b){var c=a[b];if(c)return new c;c=a[b]=new Function;c.prototype=e["default"+b];return new c}}(),normalizeColor:function(e){return e instanceof a?e:new a(e)},normalizeParameters:function(a,e){var b;if(e){var c={};for(b in a)b in e&&!(b in c)&&(a[b]=e[b])}return a},makeParameters:function(a,e){var b=null;if(!e)return m.delegate(a);var c={};for(b in a)b in c||(c[b]=m.clone(b in e?e[b]:a[b]));return c},formatNumber:function(a,e){var b=a.toString();if(0<=b.indexOf("e"))b=a.toFixed(4);
else{var c=b.indexOf(".");0<=c&&5<b.length-c&&(b=a.toFixed(4))}return 0>a?b:e?" "+b:b},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=e.getDefault("Font");a=a.split(/\s+/);if(!(5>a.length)){b.style=a[0];b.variant=a[1];b.weight=a[2];var c=a[3].indexOf("/");b.size=0>c?a[3]:a[3].substring(0,c);var p=4;0>c&&("/"==a[4]?p=6:"/"==a[4].charAt(0)&&(p=5));p<a.length&&(b.family=a.slice(p).join(" "))}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/
2.54,px_in_pt:function(){return e._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*e.px_in_pt()},px2pt:function(a){return a/e.px_in_pt()},normalizedLength:function(a){if(0===a.length)return 0;if(2<a.length){var b=e.px_in_pt(),c=parseFloat(a);switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return 72*c*b;case "pc":return 12*c*b;case "mm":return c*e.mm_in_pt*b;case "cm":return c*e.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,
pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(a,e){return a&&e&&a===e},switchTo:function(a){var b="string"==typeof a?e[a]:a;b&&(c.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "),function(a){e[a]=b[a]}),"string"==typeof a?e.renderer=a:c.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(a){return e.renderer=e[a]&&e[a].Surface===e.Surface?a:null}))}});return e})},
"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(g,m,a,b,d,c){return g(c,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(a){a&&m.isObject(a)&&(this.size="auto"===this.size?this.size:b.pt2px(this.size),this.xoffset=b.pt2px(this.xoffset),this.yoffset=b.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(a){this.angle=a;return this},setSize:function(a){this.size=
a;return this},setOffset:function(a,b){this.xoffset=a;this.yoffset=b;return this},toJson:function(){var a=b.px2pt(this.size),a=isNaN(a)?void 0:a,c=b.px2pt(this.xoffset),c=isNaN(c)?void 0:c,d=b.px2pt(this.yoffset),d=isNaN(d)?void 0:d;return m.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:a,angle:this.angle&&-1*this.angle,xoffset:c,yoffset:d})}})})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),
function(g,m,a,b,d,c){return g(null,{declaredClass:"esri.symbol.Symbol",color:new c([0,0,0,1]),type:null,constructor:function(a){if(a&&m.isObject(a)&&(m.mixin(this,a),this.color&&d.isDefined(this.color[0])&&(this.color=c.toDojoColor(this.color)),(a=this.type)&&0===a.indexOf("esri")))this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[a]},
setColor:function(a){this.color=a;return this},toJson:function(){return{color:c.toJsonColor(this.color)}}})})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color","dojo/has","./kernel"],function(g,m,a,b){g=g([m],{declaredClass:"esri.Color"});g.toJsonColor=function(a){return a&&[a.r,a.g,a.b,1<a.a?a.a:Math.round(255*a.a)]};g.toDojoColor=function(a){return a&&new m([a[0],a[1],a[2],a[3]/255])};b="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(a=0;a<b.length;a++)g[b[a]]=
m[b[a]];return g})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),function(g,m,a,b,d,c,h,n){var f={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",
STYLE_LONGDASHDOT:"longdashdot"},e={color:[0,0,0,1],style:f.STYLE_SOLID,width:1};g=g(n,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},
constructor:function(b,c,n){b?m.isString(b)?(this.style=b,c&&(this.color=c),n&&(this.width=n)):this.style=h.valueOf(this._styles,b.style)||f.STYLE_SOLID:(m.mixin(this,e),this.color=new a(this.color),this.width=d.pt2px(this.width))},setStyle:function(a){this.style=a;return this},getStroke:function(){return this.style===f.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return h.fixJson(m.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style]}))}});m.mixin(g,f);g.defaultProps=e;return g})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(g,m,a,b,d,c){return g(c,{declaredClass:"esri.symbol.LineSymbol",constructor:function(a){m.isObject(a)?this.width=b.pt2px(this.width):
this.width=12},setWidth:function(a){this.width=a;return this},toJson:function(){var a=b.px2pt(this.width),a=isNaN(a)?void 0:a;return m.mixin(this.inherited("toJson",arguments),{width:a})}})})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(g,m,a,b,d,c,h,n,f,e){var p={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",
STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},s={style:p.STYLE_SOLID,color:[0,0,0,0.25]};g=g(n,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",
backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(e,b,c){e?m.isString(e)?(this.style=e,void 0!==b&&(this.outline=b),void 0!==c&&(this.color=c)):this.style=h.valueOf(this._styles,e.style):(m.mixin(this,s),this.outline=new f(this.outline),this.color=new a(this.color))},setStyle:function(a){this.style=a;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){var a=this.style;return a===
p.STYLE_NULL?null:a===p.STYLE_SOLID?this.color:m.mixin({},d.defaultPattern,{src:e.toUrl("../images/symbol/sfs/"+a+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return h.fixJson(m.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});m.mixin(g,p);g.defaultProps=s;return g})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),
function(g,m,a,b,d,c){return g(d,{declaredClass:"esri.symbol.FillSymbol",constructor:function(a){a&&(m.isObject(a)&&a.outline)&&(this.outline=new c(a.outline))},setOutline:function(a){this.outline=a;return this},toJson:function(){var a=this.inherited("toJson",arguments);this.outline&&(a.outline=this.outline.toJson());return a}})})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),
function(g,m,a,b,d,c,h,n,f,e){return{fromJson:function(a){var s=null;switch(a.type){case "esriSMS":s=new b(a);break;case "esriPMS":s=new d(a);break;case "esriTS":s=new e(a);break;case "esriSLS":s=void 0!==a.cap?new h(a):new c(a);break;case "esriCLS":s=new h(a);break;case "esriSFS":s=new n(a);break;case "esriPFS":s=new f(a)}return s},getShapeDescriptors:function(a){return a&&a.getShapeDescriptors?a.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}}})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),
function(g,m,a,b,d,c,h,n){var f={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};g=g(n,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(e,c,d){e?m.isString(e)?(this.url=e,c&&(this.width=c),d&&(this.height=d)):(this.width=b.pt2px(e.width),this.height=b.pt2px(e.height),c=e.imageData,!(9>a("ie"))&&c&&(d=this.url,this.url="data:"+(e.contentType||"image")+";base64,"+c,this.imageData=d)):(m.mixin(this,f),this.width=b.pt2px(this.width),this.height=b.pt2px(this.height))},
getStroke:function(){return null},getFill:function(){return null},setWidth:function(a){this.width=a;return this},setHeight:function(a){this.height=a;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var a=this.url,p=
this.imageData;if(0===a.indexOf("data:"))var d=a,a=p,p=d.indexOf(";base64,")+8,p=d.substr(p);if(m.isString(a)&&(0===a.indexOf("/")||0===a.indexOf("//")||0===a.indexOf("./")||0===a.indexOf("../")))a=h.getAbsoluteUrl(a);var d=b.px2pt(this.width),d=isNaN(d)?void 0:d,f=b.px2pt(this.height),f=isNaN(f)?void 0:f,a=c.fixJson(m.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:a,imageData:p,contentType:this.contentType,width:d,height:f}));delete a.color;delete a.size;a.imageData||delete a.imageData;
return a}});g.defaultProps=f;return g})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(g,m,a,b,d,c,h,n){var f={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},e={color:[0,0,0,1],style:f.STYLE_SOLID,width:1,cap:f.CAP_BUTT,join:f.JOIN_MITER,miterLimit:10};g=g(n,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",
bevel:"esriLJSBevel"},constructor:function(b,c,f,n,w,v){b?m.isString(b)?(this.style=b,c&&(this.color=c),void 0!==f&&(this.width=f),n&&(this.cap=n),w&&(this.join=w),void 0!==v&&(this.miterLimit=v)):(this.cap=h.valueOf(this._caps,b.cap),this.join=h.valueOf(this._joins,b.join),this.width=d.pt2px(b.width),this.miterLimit=d.pt2px(b.miterLimit)):(m.mixin(this,e),this.color=new a(this.color),this.width=d.pt2px(this.width),this.miterLimit=d.pt2px(this.miterLimit))},setCap:function(a){this.cap=a;return this},
setJoin:function(a){this.join=a;return this},setMiterLimit:function(a){this.miterLimit=a;return this},getStroke:function(){return m.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===f.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var a=d.px2pt(this.miterLimit),a=isNaN(a)?void 0:a;return h.fixJson(m.mixin(this.inherited("toJson",
arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:a}))}});m.mixin(g,f);g.defaultProps=e;return g})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(g,m,a,b,d,c,h,n){var f={xoffset:0,yoffset:0,width:12,height:12};g=g(n,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(e,
c,d,h){e?m.isString(e)?(this.url=e,void 0!==c&&(this.outline=c),void 0!==d&&(this.width=d),void 0!==h&&(this.height=h)):(this.xoffset=b.pt2px(e.xoffset),this.yoffset=b.pt2px(e.yoffset),this.width=b.pt2px(e.width),this.height=b.pt2px(e.height),c=e.imageData,!(9>a("ie"))&&c&&(d=this.url,this.url="data:"+(e.contentType||"image")+";base64,"+c,this.imageData=d)):(m.mixin(this,f),this.width=b.pt2px(this.width),this.height=b.pt2px(this.height))},setWidth:function(a){this.width=a;return this},setHeight:function(a){this.height=
a;return this},setOffset:function(a,b){this.xoffset=a;this.yoffset=b;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},setXScale:function(a){this.xscale=a;return this},setYScale:function(a){this.yscale=a;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return m.mixin({},b.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},
getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var a=this.url,p=this.imageData;if(0===a.indexOf("data:"))var d=a,a=p,p=d.indexOf(";base64,")+8,p=d.substr(p);if(m.isString(a)&&(0===a.indexOf("/")||0===a.indexOf("//")||0===a.indexOf("./")||0===a.indexOf("../")))a=h.getAbsoluteUrl(a);var d=b.px2pt(this.width),d=isNaN(d)?void 0:d,f=b.px2pt(this.height),f=isNaN(f)?void 0:
f,n=b.px2pt(this.xoffset),n=isNaN(n)?void 0:n,w=b.px2pt(this.yoffset),w=isNaN(w)?void 0:w,a=c.fixJson(m.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:a,imageData:p,contentType:this.contentType,width:d,height:f,xoffset:n,yoffset:w,xscale:this.xscale,yscale:this.yscale}));a.imageData||delete a.imageData;return a}});g.defaultProps=f;return g})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),
function(g,m,a,b,d,c,h,n,f){var e={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:b.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},p={start:"left",middle:"center",end:"right"},s={left:"start",center:"middle",right:"end",justify:"start"},u={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},t=document.createElement("canvas");g=g(n,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(a,
p,d){m.mixin(this,e);this.font=new f(this.font);this.color=new h(this.color);a&&(m.isObject(a)?(m.mixin(this,a),this.color&&c.isDefined(this.color[0])&&(this.color=h.toDojoColor(this.color)),this.type="textsymbol",this.font=new f(this.font),this.xoffset=b.pt2px(this.xoffset),this.yoffset=b.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=b.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=h.toDojoColor(this.haloColor))):(this.text=a,p&&(this.font=p),d&&(this.color=
d)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(a){this.font=a;return this},setSize:function(a){this.font.size=a;return this},setAngle:function(a){this.angle=a;return this},setOffset:function(a,b){this.xoffset=a;this.yoffset=b;return this},setHaloColor:function(a){this.haloColor=a;return this},setHaloSize:function(a){this.haloSize=a;return this},setAlign:function(a){this.align=a;this.setHorizontalAlignment(a&&p[a.toLowerCase()]||"center");return this},setHorizontalAlignment:function(a){this.horizontalAlignment=
a;return this},getSVGAlign:function(){var a=this.horizontalAlignment;return a=a&&s[a.toLowerCase()]||"middle"},setVerticalAlignment:function(a){this.verticalAlignment=a;return this},getSVGBaseline:function(){var a=this.verticalAlignment;return a&&u[a.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(a){this.decoration=a;this.font||this.setFont(new f);this.font.setDecoration(a);return this},setRotated:function(a){this.rotated=
a;return this},setKerning:function(a){this.kerning=a;return this},setText:function(a){this.text=a;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var a=t&&t.getContext&&t.getContext("2d");if(a){var e=this.font;a.font=(e.style?e.style:b.defaultFont.style)+" "+(e.weight?e.weight:b.defaultFont.weight)+" "+(e.size?e.size:b.defaultFont.size)+"px "+(e.family?e.family:b.defaultFont.family);return a.measureText(this.text).width}var a=this.getHeight(),
e=0,c,p;for(c=0;c<this.text.length;c++)p=this.text.charAt(c),e=p==p.toUpperCase()?e+0.7*a:e+0.5*a;return e},getHeight:function(){return b.normalizedLength(this.font.size)},getShapeDescriptors:function(){var a=this.font,b;a&&(b={},a.size&&(b.size=a.size),a.style&&(b.style=a.style),a.variant&&(b.variant=a.variant),a.decoration&&(b.decoration=a.decoration),a.weight&&(b.weight=a.weight),a.family&&(b.family=a.family));return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",
decoration:this.decoration||a&&a.decoration,rotated:this.rotated,kerning:this.kerning},font:b,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var a=b.px2pt(this.xoffset),e=b.px2pt(this.yoffset),p=b.px2pt(this.haloSize),a=isNaN(a)?void 0:a,e=isNaN(e)?void 0:e,p=isNaN(p)?void 0:p;return c.fixJson(m.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:p,haloColor:this.haloColor&&
h.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:a,yoffset:e,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});m.mixin(g,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});g.defaultProps=
e;return g})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(g,m,a,b,d,c){g=g(null,{declaredClass:"esri.symbol.Font",constructor:function(c,d,f,e,p){c?m.isObject(c)?m.mixin(this,c):(this.size=c,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==d&&(this.style=d),void 0!==f&&(this.variant=f),void 0!==e&&(this.weight=e),void 0!==p&&(this.family=p)):m.mixin(this,b.defaultFont);parseFloat(this.size)==
this.size&&(this.size+="pt");9>a("ie")&&(this.size&&m.isString(this.size)&&-1<this.size.indexOf("em"))&&(this.size=b.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(a){this.size=this._convert2PxSize(a);return this},_convert2PxSize:function(a){var c;parseFloat(a)==a?c=a:m.isString(a)&&(-1<a.indexOf("pt")?c=b.pt2px(parseFloat(a)):-1<a.indexOf("px")?c=parseFloat(a):-1<a.indexOf("em")?c=b.pt2px(12*parseFloat(a)):-1<a.indexOf("%")&&(c=b.pt2px(0.12*parseFloat(a))));
return c},setStyle:function(a){this.style=a;return this},setVariant:function(a){this.variant=a;return this},setWeight:function(a){this.weight=a;return this},setFamily:function(a){this.family=a;return this},setDecoration:function(a){this.decoration=a;return this},toJson:function(){return c.fixJson({size:b.px2pt(this.size),style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family})}});m.mixin(g,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",
VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});return g})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(g,m,a,b,d,c,h){return g(h,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(a){if(a&&!a.declaredClass){var b=a;this.symbol=(a=b.symbol)&&(a.declaredClass?a:c.fromJson(a));
this.label=b.label;this.description=b.description}else this.symbol=a},getSymbol:function(a){return this.symbol},toJson:function(){var a=m.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return d.fixJson(a)}})})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ./arcadeUtils".split(" "),function(g,m,a,b,d,c,h,n){var f=Math.PI,
e=1;return g(null,{declaredClass:"esri.renderer.Renderer",constructor:function(a){this._cache={};if(a&&!a.declaredClass){this.rotationInfo=a.rotationInfo;if(!this.rotationInfo){var b=a.rotationType,e=a.rotationExpression;if(b||e)this.rotationInfo={type:b,expression:e}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(a.sizeInfo));this.setColorInfo(this._readColorInfo(a.colorInfo));this.setOpacityInfo(this._readOpacityInfo(a.transparencyInfo));this.setVisualVariables(this._readVariables(a.visualVariables));
this.setAuthoringInfo(a.authoringInfo)}this.getSymbol=m.hitch(this,this.getSymbol)},getSymbol:function(a){},_readSizeInfo:function(b){if(b){var e=b.minSize,c=b.maxSize;e&&(b.minSize="number"===typeof e?d.pt2px(e):this._readSizeInfo(e));c&&(b.maxSize="number"===typeof c?d.pt2px(c):this._readSizeInfo(c));b.stops&&a.forEach(b.stops,function(a){a.size&&"number"===typeof a.size&&(a.size=d.pt2px(a.size))})}return b},_readColorInfo:function(b){b&&(a.forEach(b.colors,function(a,e){m.isArray(a)&&(b.colors[e]=
h.toDojoColor(a))}),a.forEach(b.stops,function(a,e){a.color&&m.isArray(a.color)&&(b.stops[e].color=h.toDojoColor(a.color))}));return b},_readOpacityInfo:function(b){var e;b&&(e=m.mixin({},b),e.transparencyValues&&(e.opacityValues=a.map(e.transparencyValues,function(a){return 1-a/100}),delete e.transparencyValues),e.stops&&(e.stops=a.map(e.stops,function(a){a=m.mixin({},a);a.opacity=1-a.transparency/100;delete a.transparency;return a})));return e},_readVariables:function(b){b&&(b=a.map(b,function(a){"sizeInfo"===
a.type?a=this._readSizeInfo(a):"colorInfo"===a.type?a=this._readColorInfo(a):"transparencyInfo"===a.type&&(a=this._readOpacityInfo(a),a.type="opacityInfo");return a},this));return b},setAuthoringInfo:function(a){this.authoringInfo=a},setRotationInfo:function(a){if(a=this.rotationInfo="string"===typeof a?{field:a}:a){if(a.expression&&!m.isFunction(a.expression)&&!a.field){var b=a.expression.match(this.rotationRE);b&&b[1]&&(a.field=b[1])}a.rotationType=a.type}return this},rotationRE:/^\[([^\]]+)\]$/i,
_processRotationInfo:function(a){return this._createCache(a)},getRotationAngle:function(a,b){var e=this._getVarInfo(b&&b.rotationInfo,"rotationInfo"),c=e.variable,d=this._cache[e.cacheKey],e="arithmetic"===this._getRotationType(c),c=c.field,d=d&&d.compiledFunc,f=a.attributes,h=null;if(c||d)d?h=n.executeFunction(d,n.createExecContext(a,a._getView())):m.isFunction(c)?h=c.apply(this,arguments):f&&(h=f[c]||0),h="number"===typeof h&&!isNaN(h)?(h+(e?-90:0))*(e?-1:1):null;return h},_getRotationType:function(a){return a&&
("rotationInfo"===a.type?a.rotationType:a.type)},_getDataValue:function(a,b,e,c,d){c||(c=this._getVarInfo(b,e),b=c.variable,c=this._cache[c.cacheKey],"sizeInfo"===e&&(c=c.root));return a._getDataValue(b,c,n,d)},setVisualVariables:function(b){var e=this._cache;a.forEach(this.visualVariables,function(a,b){e.hasOwnProperty(b)&&(e[b]=null)},this);this.visualVariables=b;a.some(b,function(a){return!!a.target})&&b.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});a.forEach(b,function(a,b){"colorInfo"===
a.type?e[b]=this._processColorInfo(a):"opacityInfo"===a.type?e[b]=this._processOpacityInfo(a):"sizeInfo"===a.type?e[b]=this._processSizeInfo(a):"rotationInfo"===a.type&&(e[b]=this._processRotationInfo(a))},this);return this},getVisualVariableValues:function(b){var e=this.visualVariables,c;e&&(c=a.map(e,function(a){var e;switch(a.type){case "sizeInfo":e=this.getSize(b,{sizeInfo:a});break;case "colorInfo":e=this.getColor(b,{colorInfo:a});break;case "opacityInfo":e=this.getOpacity(b,{opacityInfo:a});
break;case "rotationInfo":e=this.getRotationAngle(b,{rotationInfo:a})}return{variable:a,value:e}},this));return c},hasVisualVariables:function(a,b){return a?!!this.getVisualVariablesForType(a,b):!(!this.getVisualVariablesForType("sizeInfo",b)&&!this.getVisualVariablesForType("colorInfo",b)&&!this.getVisualVariablesForType("opacityInfo",b)&&!this.getVisualVariablesForType("rotationInfo",b))},getVisualVariablesForType:function(b,e){var c=this.visualVariables,d;!e&&this[b]?("rotationInfo"===b&&(this[b].rotationType=
this[b].type),d=[this[b]]):c&&(d=a.filter(c,function(a){return a.type===b&&("string"===typeof e?a.target===e:!1===e?!a.target:!0)}))&&0===d.length&&(d=void 0);return d},setSizeInfo:function(a){this.sizeInfo=this.proportionalSymbolInfo=a;this._cache.sizeInfo=this._processSizeInfo(a);return this},_processSizeInfo:function(a){return a&&{root:this._createCache(a),minSize:this._createCache(a.minSize),maxSize:this._createCache(a.maxSize)}},_convertExpressionToArcade:function(a){a&&a.expression&&(a.valueExpression=
"$view.scale")},_getVarInfo:function(b,e){var c;b&&b.type===e?(c=a.indexOf(this.visualVariables,b),b=this.visualVariables[c]):(c=e,b=this[e]);return{variable:b,cacheKey:c}},setProportionalSymbolInfo:function(a){this.setSizeInfo(a);return this},getSize:function(a,b){var e=this._getVarInfo(b&&b.sizeInfo,"sizeInfo"),c=e.variable,e=this._cache[e.cacheKey],d=null;if(c)var f=c.minSize,d=c.maxSize,f="object"===typeof f&&f?this._getSize(a,f,e&&e.minSize,b):f,d="object"===typeof d&&d?this._getSize(a,d,e&&
e.maxSize,b):d,d=this._getSize(a,c,e&&e.root,b,[f,d]);return d},_getSize:function(a,b,e,c,d){var h=b.stops,n=0,g=e&&e.hasExpr,A=e&&e.ipData,m=e&&e.isScaleDriven,z="object"===typeof a&&!!a,F="number"===typeof a?a:null;if(b.field||m||g){var H=c&&c.scale,g=d?d[0]:b.minSize;d=d?d[1]:b.maxSize;var J=b.minDataValue,I=b.maxDataValue,K=b.valueUnit||"unknown",M=b.valueRepresentation,L=b.scaleBy,G=c&&c.shape;m?F=H:"number"!==typeof F&&z&&(F=this._getDataValue(a,b,null,e));if(null==F)return null;if(h)g=this._lookupData(F,
A),F=g[0],d=g[1],F===d?n=h[F].size:(F=h[F].size,h=h[d].size,n=F+(h-F)*g[2]);else if(null!=g&&null!=d&&null!=J&&null!=I)F<=J?n=g:F>=I?n=d:(h=(F-J)/(I-J),"area"===L&&G?(g=(F="circle"===G)?f*Math.pow(g/2,2):g*g,d=F?f*Math.pow(d/2,2):d*d,h=g+h*(d-g),n=F?2*Math.sqrt(h/f):Math.sqrt(h)):n=g+h*(d-g));else if("unknown"===K)null!=g&&null!=J&&(g&&J?(h=F/J,n="circle"===G?2*Math.sqrt(h*Math.pow(g/2,2)):"square"===G||"diamond"===G||"image"===G?Math.sqrt(h*Math.pow(g,2)):h*g):n=F+(g||J),n=n<g?g:n,null!=d&&n>d&&
(n=d));else{h=(c&&c.resolution?c.resolution:1)*this._meterIn[K];if("area"===M)n=Math.sqrt(F/f)/h,n*=2;else if(n=F/h,"radius"===M||"distance"===M)n*=2;null!=g&&n<g&&(n=g);null!=d&&n>d&&(n=d)}}else n=h&&h[0]&&h[0].size,null==n&&(n=b.minSize);return n=isNaN(n)?0:n},getSizeRangeAtScale:function(a,b){var e,c=this._getVarInfo(a,"sizeInfo"),d=this._cache[c.cacheKey],f={scale:b};if((a=c.variable)&&b){var c=a.minSize,h=a.maxSize,n=a.stops;n&&n.length?(c=n[0].size,d=n[n.length-1].size):(c="object"===typeof c&&
c?this._getSize({},c,d&&d.minSize,f):c,d="object"===typeof h&&h?this._getSize({},h,d&&d.maxSize,f):h);if(null!=c||null!=d)c>d&&(e=d,d=c,c=e),e={minSize:c,maxSize:d}}return e},setColorInfo:function(a){this.colorInfo=a;this._cache.colorInfo=this._processColorInfo(a);return this},prepareForViewChange:function(a){var b;a=a||this._cache;for(b in a){var c=a[b];a.hasOwnProperty(b)&&(c&&"object"===typeof c)&&(c.hasOwnProperty("version")?c.dependsOnView&&(c.version=e++):this.prepareForViewChange(c))}},_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,
_createCache:function(a){var b=a&&a.valueExpression,c=n.createSyntaxTree(b),d=n.createFunction(c),f=!(!a||!a.expression)||this._viewScaleRE.test(b);return{ipData:this._interpolateData(a),hasExpr:!!b,compiledFunc:d,isScaleDriven:f,dependsOnView:c?n.dependsOnView(c):!1,version:e++}},_processColorInfo:function(b){b&&(a.forEach(b.colors,function(a,e){m.isArray(a)&&(b.colors[e]=new h(a))}),a.forEach(b.stops,function(a,e){a.color&&m.isArray(a.color)&&(b.stops[e].color=new h(a.color))}));return this._createCache(b)},
getColor:function(a,b){var e=this._getVarInfo(b&&b.colorInfo,"colorInfo");return this._getColorComponent(a,e.variable,this._cache[e.cacheKey])},setOpacityInfo:function(a){this.opacityInfo=a;this._cache.opacityInfo=this._processOpacityInfo(a);return this},_processOpacityInfo:function(a){return this._createCache(a)},getOpacity:function(a,b){var e=this._getVarInfo(b&&b.opacityInfo,"opacityInfo");return this._getColorComponent(a,e.variable,this._cache[e.cacheKey],!0)},_getColorComponent:function(a,b,
e,c,d){var f="object"===typeof a&&!!a,h=f?a.attributes:null,g=b&&b.field,A="number"===typeof a,C=A?a:null,z=e&&e.hasExpr,F=e&&e.compiledFunc,H=e&&e.ipData,J;if(g||z){var I=b.normalizationField,K=h?parseFloat(h[I]):void 0;"number"!==typeof C&&f&&(z?C=n.executeFunction(F,n.createExecContext(a,a._getView())):m.isFunction(g)?C=g.apply(this,arguments):h&&(C=h[g]));if(null!=C&&!isNaN(C)&&"number"===typeof C&&(!I||A||!isNaN(K)&&0!==K))!isNaN(K)&&!A&&(C/=K),J=c?this._getOpacity(C,b,H):this._getColor(C,b,
H)}else b&&(f=b.stops,c?(J=f&&f[0]&&f[0].opacity,null==J&&(J=b.opacityValues&&b.opacityValues[0])):J=f&&f[0]&&f[0].color||b.colors&&b.colors[0]);d&&(d.data=C,d.value=J);return d||J},_interpolateData:function(b){var e;if(b)if(b.colors||b.opacityValues){var c=(b.colors||b.opacityValues).length,d=b.minDataValue,f=(b.maxDataValue-d)/(c-1);e=[];for(b=0;b<c;b++)e[b]=d+b*f}else b.stops&&(e=a.map(b.stops,function(a){return a.value}));return e},_getOpacity:function(a,b,e){a=this._lookupData(a,e);var c;b=b||
this.opacityInfo;a&&(e=a[0],c=a[1],e===c?c=this._getOpacValue(b,e):(e=this._getOpacValue(b,e),b=this._getOpacValue(b,c),c=e+(b-e)*a[2]));return c},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:a.stops[b].opacity},_getColor:function(a,b,e){a=this._lookupData(a,e);var c;b=b||this.colorInfo;a&&(c=a[0],e=a[1],c=c===e?this._getColorObj(b,c):h.blendColors(this._getColorObj(b,c),this._getColorObj(b,e),a[2]));return c},_getColorObj:function(a,b){return a.colors?a.colors[b]:a.stops[b].color},
_lookupData:function(b,e){var c;if(e){var d=0,f=e.length-1;a.some(e,function(a,e){if(b<a)return f=e,!0;d=e;return!1});c=[d,f,(b-e[d])/(e[f]-e[d])]}return c},_meterIn:{inches:1/0.0254,feet:1/0.3048,yards:1/0.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:0.001,"decimal-degrees":180/20015077},_writeSizeInfo:function(b){if(b){b=m.mixin({},b);this._convertExpressionToArcade(b);var e=b.minSize,c=b.maxSize;e&&(b.minSize="number"===typeof e?
d.px2pt(e):this._writeSizeInfo(e));c&&(b.maxSize="number"===typeof c?d.px2pt(c):this._writeSizeInfo(c));if(e=b.legendOptions)if(b.legendOptions=m.mixin({},e),e=e.customValues)b.legendOptions.customValues=e.slice(0);b.stops&&(b.stops=a.map(b.stops,function(a){a=m.mixin({},a);a.size&&"number"===typeof a.size&&(a.size=d.px2pt(a.size));return a}))}return b},_writeColorInfo:function(b){b&&(b=m.mixin({},b),b.colors&&(b.colors=a.map(b.colors,function(a){return h.toJsonColor(a)})),b.stops&&(b.stops=a.map(b.stops,
function(a){a=m.mixin({},a);a.color&&(a.color=h.toJsonColor(a.color));return a})),b.legendOptions&&(b.legendOptions=m.mixin({},b.legendOptions)));return b},_writeOpacityInfo:function(b){var e;b&&(e=m.mixin({},b),e.opacityValues&&(e.transparencyValues=a.map(e.opacityValues,function(a){return 100*(1-a)}),delete e.opacityValues),e.stops&&(e.stops=a.map(e.stops,function(a){a=m.mixin({},a);a.transparency=100*(1-a.opacity);delete a.opacity;return a})),e.legendOptions&&(e.legendOptions=m.mixin({},e.legendOptions)));
return e},toJson:function(){var b=this.visualVariables,e=m.clone(this.authoringInfo),c=this.getVisualVariablesForType("rotationInfo",!1),d=(c=c&&c[0])&&c.field,f;c&&c===this.rotationInfo&&(f=c.expression||d&&(m.isFunction(d)?d:"["+d+"]"));b&&(b=a.map(b,function(a){"sizeInfo"===a.type?a=this._writeSizeInfo(a):"colorInfo"===a.type?a=this._writeColorInfo(a):"opacityInfo"===a.type?(a=this._writeOpacityInfo(a),a.type="transparencyInfo"):"rotationInfo"===a.type&&(a=m.mixin({},a));return a},this));e&&a.forEach(e.visualVariables,
function(a){"opacityInfo"===a.type&&(a.type="transparencyInfo")});return{rotationType:f&&(this._getRotationType(c)||"geographic"),rotationExpression:f,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:b,authoringInfo:e}}})})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../arcade/arcade"],function(g,m,a,b,d){var c={vars:{$feature:"any",
$view:"any"}},h=/^\$feature\./i,n={createSyntaxTree:function(a,b){b=b||g.clone(c);var p;try{p=a?d.parseScript(a,b):null}catch(h){p=null}return p},createFunction:function(a,b){b=b||g.clone(c);var p="string"===typeof a?n.createSyntaxTree(a,b):a,h;try{h=p?d.compileScript(p,b):null}catch(u){h=null}return h},createExecContext:function(a,b){return{vars:{$feature:d.constructFeature(a),$view:b}}},evalSyntaxTree:function(a,b){return d.executeScript(a,b,-1)},executeFunction:function(a,b){return a?a(b,-1):null},
extractFieldNames:function(a,b){var c="string"===typeof a?n.createSyntaxTree(a,b):a,c=d.extractFieldLiterals(c),s=[];m.forEach(c,function(a){h.test(a)&&(a=a.replace(h,""),s.push(a))});s.sort();return m.filter(s,function(a,b){return 0===b||s[b-1]!==a})},dependsOnView:function(a){return d.referencesMember(a,"$view")}};return n})},"esri/arcade/arcade":function(){define("require exports ./arcadeRuntime ./parser ./Feature ./arcadeCompiler dojo/has".split(" "),function(g,m,a,b,d,c,h){m.compileScript=function(b,
d){return h("csp-restrictions")?function(e,c){return a.executeScript(b,e,c)}:c.compileScript(b,d)};m.constructFeature=function(a){return d.fromFeature(a)};m.parseScript=function(a){return b.parseScript(a)};m.validateScript=function(a,c){return b.validateScript(a,c,"simple")};m.scriptCheck=function(a,c,e){return b.scriptCheck(a,c,e,"full")};m.parseAndExecuteScript=function(c,d,e){return a.executeScript(b.parseScript(c),d,e)};m.executeScript=function(b,c,e){return a.executeScript(b,c,e)};m.referencesMember=
function(b,c){return a.referencesMember(b,c)};m.referencesFunction=function(b,c){return a.referencesFunction(b,c)};m.extractFieldLiterals=function(a,c){void 0===c&&(c=!1);return b.extractFieldLiterals(a,c)}})},"esri/arcade/arcadeRuntime":function(){define("require exports ../geometry/Polygon ../graphic ../geometry/Polyline ../geometry/Point ../geometry/Extent ../geometry/Multipoint ../SpatialReference ./languageUtils ./treeAnalysis ./Dictionary ./Feature ./FunctionWrapper ./functions/date ./functions/string ./functions/maths ./functions/geometry ./functions/stats ./ImmutablePathArray ./ImmutablePointArray ../geometry/Geometry".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F){function H(k,r){for(var a=[],q=0;q<r.arguments.length;q++)a.push(I(k,r.arguments[q]));return a}function J(k,r,a){try{return a(k,r,H(k,r))}catch(q){throw q;}}function I(k,r){try{switch(r.type){case "EmptyStatement":return e.voidOperation;case "VariableDeclarator":var a=null===r.init?null:I(k,r.init);a===e.voidOperation&&(a=null);var q=r.id.name.toLowerCase();null!==k.localScope?k.localScope[q]={value:a,valueset:!0,node:r.init}:k.globalScope[q]=
{value:a,valueset:!0,node:r.init};return e.voidOperation;case "VariableDeclaration":for(var y=0;y<r.declarations.length;y++)I(k,r.declarations[y]);return e.voidOperation;case "BlockStatement":var D;a:{for(var b=e.voidOperation,y=0;y<r.body.length;y++)if(b=I(k,r.body[y]),b instanceof e.ReturnResult||b===e.breakResult||b===e.continueResult){D=b;break a}D=b}return D;case "FunctionDeclaration":var E=r.id.name.toLowerCase();k.globalScope[E]={valueset:!0,node:null,value:new t(r,k)};return e.voidOperation;
case "ReturnStatement":var c;if(null===r.argument)c=new e.ReturnResult(e.voidOperation);else{var d=I(k,r.argument);c=new e.ReturnResult(d)}return c;case "IfStatement":var P;if("AssignmentExpression"===r.test.type||"UpdateExpression"===r.test.type)throw Error(p.nodeErrorMessage(r.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var f=I(k,r.test);if(!0===f)P=I(k,r.consequent);else if(!1===f)P=null!==r.alternate?I(k,r.alternate):e.voidOperation;else throw Error(p.nodeErrorMessage(r,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
return P;case "ExpressionStatement":var h;if("AssignmentExpression"===r.expression.type||"UpdateExpression"===r.expression.type)h=I(k,r.expression);else{var n=I(k,r.expression);h=n===e.voidOperation?e.voidOperation:new e.ImplicitResult(n)}return h;case "AssignmentExpression":var x;var g=I(k,r.right),y=null,v="";if("MemberExpression"===r.left.type){y=I(k,r.left.object);v=!0===r.left.computed?I(k,r.left.property):r.left.property.name;if(e.isArray(y))if(e.isNumber(v)){0>v&&(v=y.length+v);if(0>v||v>y.length)throw Error("Assignment outside of array bounds");
if(v===y.length&&"\x3d"!==r.operator)throw Error("Invalid Parameter");y[v]=M(g,r.operator,y[v],r)}else throw Error("Invalid Parameter");else if(y instanceof s){if(!1===e.isString(v))throw Error("Dictionary accessor must be a string");if(!0===y.hasField(v))y.setField(v,M(g,r.operator,y.field(v),r));else{if("\x3d"!==r.operator)throw Error("Invalid Parameter");y.setField(v,M(g,r.operator,null,r))}}else if(y instanceof u){if(!1===e.isString(v))throw Error("Feature accessor must be a string");if(!0===
y.hasField(v))y.setField(v,M(g,r.operator,y.field(v),r));else{if("\x3d"!==r.operator)throw Error("Invalid Parameter");y.setField(v,M(g,r.operator,null,r))}}else{if(e.isImmutableArray(y))throw Error("Array is Immutable");throw Error("Invalid Parameter");}x=e.voidOperation}else if(y=r.left.name.toLowerCase(),null!==k.localScope&&void 0!==k.localScope[y])k.localScope[y]={value:M(g,r.operator,k.localScope[y].value,r),valueset:!0,node:r.right},x=e.voidOperation;else if(void 0!==k.globalScope[y])k.globalScope[y]=
{value:M(g,r.operator,k.globalScope[y].value,r),valueset:!0,node:r.right},x=e.voidOperation;else throw Error("Variable not recognised");return x;case "UpdateExpression":var w;var A,y=null,v="";if("MemberExpression"===r.argument.type){y=I(k,r.argument.object);v=!0===r.argument.computed?I(k,r.argument.property):r.argument.property.name;if(e.isArray(y))if(e.isNumber(v)){0>v&&(v=y.length+v);if(0>v||v>=y.length)throw Error("Assignment outside of array bounds");A=e.toNumber(y[v]);y[v]="++"===r.operator?
A+1:A-1}else throw Error("Invalid Parameter");else if(y instanceof s){if(!1===e.isString(v))throw Error("Dictionary accessor must be a string");if(!0===y.hasField(v))A=e.toNumber(y.field(v)),y.setField(v,"++"===r.operator?A+1:A-1);else throw Error("Invalid Parameter");}else if(y instanceof u){if(!1===e.isString(v))throw Error("Feature accessor must be a string");if(!0===y.hasField(v))A=e.toNumber(y.field(v)),y.setField(v,"++"===r.operator?A+1:A-1);else throw Error("Invalid Parameter");}else{if(e.isImmutableArray(y))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}w=!1===r.prefix?A:"++"===r.operator?A+1:A-1}else if(y=r.argument.name.toLowerCase(),null!==k.localScope&&void 0!==k.localScope[y])A=e.toNumber(k.localScope[y].value),k.localScope[y]={value:"++"===r.operator?A+1:A-1,valueset:!0,node:r},w=!1===r.prefix?A:"++"===r.operator?A+1:A-1;else if(void 0!==k.globalScope[y])A=e.toNumber(k.globalScope[y].value),k.globalScope[y]={value:"++"===r.operator?A+1:A-1,valueset:!0,node:r},w=!1===r.prefix?A:"++"===r.operator?A+1:A-1;else throw Error("Variable not recognised");
return w;case "BreakStatement":return e.breakResult;case "ContinueStatement":return e.continueResult;case "ForStatement":null!==r.init&&I(k,r.init);v={testResult:!0,lastAction:e.voidOperation};do b:{x=k;g=r;w=v;if(null!==g.test){w.testResult=I(x,g.test);if(!1===w.testResult)break b;if(!0!==w.testResult)throw Error(p.nodeErrorMessage(g,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}w.lastAction=I(x,g.body);w.lastAction===e.breakResult?w.testResult=!1:w.lastAction instanceof e.ReturnResult?w.testResult=
!1:null!==g.update&&I(x,g.update)}while(!0===v.testResult);y=v.lastAction instanceof e.ReturnResult?v.lastAction:e.voidOperation;return y;case "ForInStatement":return K(k,r);case "Identifier":var B;var m;try{var N=r.name.toLowerCase();if(null!==k.localScope&&void 0!==k.localScope[N])m=k.localScope[N],!0!==m.valueset&&(m.value=I(k,m.node),m.valueset=!0),B=m.value;else if(void 0!==k.globalScope[N])m=k.globalScope[N],!0!==m.valueset&&(m.value=I(k,m.node),m.valueset=!0),B=m.value;else throw Error(p.nodeErrorMessage(r,
"RUNTIME","VARIABLENOTFOUND"));}catch(C){throw C;}return B;case "MemberExpression":return G(k,r);case "Literal":return r.value;case "ThisExpression":throw Error(p.nodeErrorMessage(r,"RUNTIME","NOTSUPPORTED"));case "CallExpression":return U(k,r);case "UnaryExpression":return O(k,r);case "BinaryExpression":return S(k,r);case "LogicalExpression":var z;a:try{if("AssignmentExpression"===r.left.type||"UpdateExpression"===r.left.type)throw Error(p.nodeErrorMessage(r.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
if("AssignmentExpression"===r.right.type||"UpdateExpression"===r.right.type)throw Error(p.nodeErrorMessage(r.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var F=[I(k,r.left),I(k,r.right)],J=F[0],L=F[1];if(e.isBoolean(J)&&e.isBoolean(L))switch(r.operator){case "||":z=J||L;break a;case "\x26\x26":z=J&&L;break a;default:throw Error(p.nodeErrorMessage(r,"RUNTIME","ONLYORORAND"));}else throw Error(p.nodeErrorMessage(r,"RUNTIME","ONLYBOOLEAN"));}catch(H){throw H;}return z;case "ConditionalExpression":throw Error(p.nodeErrorMessage(r,
"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{y=[];for(v=0;v<r.elements.length;v++){var Q=I(k,r.elements[v]);if(e.isFunctionParameter(Q))throw Error(p.nodeErrorMessage(r,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));Q===e.voidOperation?y.push(null):y.push(Q)}}catch(T){throw T;}return y;case "ObjectExpression":y={};for(v=0;v<r.properties.length;v++){var ta=I(k,r.properties[v]);if(e.isFunctionParameter(ta.value))throw Error("Illegal Argument");if(!1===e.isString(ta.key))throw Error("Illegal Argument");
y[ta.key.toString()]=ta.value===e.voidOperation?null:ta.value}var ba=new s(y);ba.immutable=!1;return ba;case "Property":return{key:"Identifier"===r.key.type?r.key.name:I(k,r.key),value:I(k,r.value)};case "Array":throw Error(p.nodeErrorMessage(r,"RUNTIME","NOTSUPPORTED"));default:throw Error(p.nodeErrorMessage(r,"RUNTIME","UNREOGNISED"));}}catch(va){throw va;}}function K(k,r){var a=I(k,r.right);"VariableDeclaration"===r.left.type&&I(k,r.left);var q=null,y="VariableDeclaration"===r.left.type?r.left.declarations[0].id.name:
r.left.name;null!==k.localScope&&void 0!==k.localScope[y]&&(q=k.localScope[y]);null===q&&void 0!==k.globalScope[y]&&(q=k.globalScope[y]);if(null===q)throw Error(p.nodeErrorMessage(r,"RUNTIME","VARIABLENOTDECLARED"));if(e.isArray(a)||e.isString(a)){for(var a=a.length,D=0;D<a&&!(q.value=D,y=I(k,r.body),y===e.breakResult);D++)if(y instanceof e.ReturnResult)return y;return e.voidOperation}if(e.isImmutableArray(a)){for(D=0;D<a.length()&&!(q.value=D,y=I(k,r.body),y===e.breakResult);D++)if(y instanceof e.ReturnResult)return y;
return e.voidOperation}if(a instanceof s||a instanceof u){a=a.keys();for(D=0;D<a.length&&!(q.value=a[D],y=I(k,r.body),y===e.breakResult);D++)if(y instanceof e.ReturnResult)return y}else return e.voidOperation}function M(k,r,a,q){switch(r){case "\x3d":return k===e.voidOperation?null:k;case "/\x3d":return e.toNumber(a)/e.toNumber(k);case "*\x3d":return e.toNumber(a)*e.toNumber(k);case "-\x3d":return e.toNumber(a)-e.toNumber(k);case "+\x3d":return e.isString(a)||e.isString(k)?e.toString(a)+e.toString(k):
e.toNumber(a)+e.toNumber(k);case "%\x3d":return e.toNumber(a)%e.toNumber(k);default:throw Error(p.nodeErrorMessage(q,"RUNTIME","OPERATORNOTRECOGNISED"));}}function L(k,r,a,q){r=r.toLowerCase();switch(r){case "hasz":return k=k.hasZ,void 0===k?!1:k;case "hasm":return k=k.hasM,void 0===k?!1:k;case "spatialreference":return r=k.spatialReference._arcadeCacheId,void 0===r&&(a=!0,Object.freeze&&Object.isFrozen(k.spatialReference)&&(a=!1),a&&(D++,r=k.spatialReference._arcadeCacheId=D)),k=new s({wkt:k.spatialReference.wkt,
wkid:k.spatialReference.wkid}),void 0!==r&&(k._arcadeCacheId="SPREF"+r.toString()),k}switch(k.type){case "extent":switch(r){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return k=k[r],void 0!==k?k:null;case "type":return"Extent"}break;case "polygon":switch(r){case "rings":return r=e.isVersion4?k.cache._arcadeCacheId:k.getCacheValue("_arcadeCacheId"),void 0===r&&(D++,r=D,e.isVersion4?k.cache._arcadeCacheId=r:k.setCacheValue("_arcadeCacheId",r)),k=new C(k.rings,
k.spatialReference,!0===k.hasZ,!0===k.hasM,r);case "type":return"Polygon"}break;case "point":switch(r){case "x":case "y":case "z":case "m":return void 0!==k[r]?k[r]:null;case "type":return"Point"}break;case "polyline":switch(r){case "paths":return r=e.isVersion4?k.cache._arcadeCacheId:k.getCacheValue("_arcadeCacheId"),void 0===r&&(D++,r=D,e.isVersion4?k.cache._arcadeCacheId=r:k.setCacheValue("_arcadeCacheId",r)),k=new C(k.paths,k.spatialReference,!0===k.hasZ,!0===k.hasM,r);case "type":return"Polyline"}break;
case "multipoint":switch(r){case "points":return r=e.isVersion4?k.cache._arcadeCacheId:k.getCacheValue("_arcadeCacheId"),void 0===r&&(D++,r=D,e.isVersion4?k.cache._arcadeCacheId=r:k.setCacheValue("_arcadeCacheId",r)),k=new z(k.points,k.spatialReference,!0===k.hasZ,!0===k.hasM,r,1);case "type":return"Multipoint"}}throw Error(p.nodeErrorMessage(q,"RUNTIME","PROPERTYNOTFOUND"));}function G(k,r){try{var a=I(k,r.object);if(null===a)throw Error(p.nodeErrorMessage(r,"RUNTIME","NOTFOUND"));if(!1===r.computed){if(a instanceof
s||a instanceof u)return a.field(r.property.name);if(a instanceof F)return L(a,r.property.name,k,r);throw Error(p.nodeErrorMessage(r,"RUNTIME","INVALIDTYPE"));}var q=I(k,r.property);if(a instanceof s||a instanceof u){if(e.isString(q))return a.field(q)}else if(a instanceof F){if(e.isString(q))return L(a,q,k,r)}else if(e.isArray(a)){if(e.isNumber(q)&&isFinite(q)&&Math.floor(q)===q){0>q&&(q=a.length+q);if(q>=a.length||0>q)throw Error(p.nodeErrorMessage(r,"RUNTIME","OUTOFBOUNDS"));return a[q]}}else if(e.isString(a)){if(e.isNumber(q)&&
isFinite(q)&&Math.floor(q)===q){0>q&&(q=a.length+q);if(q>=a.length||0>q)throw Error(p.nodeErrorMessage(r,"RUNTIME","OUTOFBOUNDS"));return a[q]}}else if(e.isImmutableArray(a)&&e.isNumber(q)&&isFinite(q)&&Math.floor(q)===q){0>q&&(q=a.length()+q);if(q>=a.length()||0>q)throw Error(p.nodeErrorMessage(r,"RUNTIME","OUTOFBOUNDS"));return a.get(q)}throw Error(p.nodeErrorMessage(r,"RUNTIME","INVALIDTYPE"));}catch(y){throw y;}}function O(k,r){try{var a=I(k,r.argument);if(e.isBoolean(a)){if("!"===r.operator)return!a;
if("-"===r.operator)return-1*e.toNumber(a);if("+"===r.operator)return 1*e.toNumber(a);throw Error(p.nodeErrorMessage(r,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===r.operator)return-1*e.toNumber(a);if("+"===r.operator)return 1*e.toNumber(a);throw Error(p.nodeErrorMessage(r,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(q){throw q;}}function S(k,r){try{var a=[I(k,r.left),I(k,r.right)],q=a[0],y=a[1];switch(r.operator){case "\x3d\x3d":return e.equalityTest(q,y);case "\x3d":return e.equalityTest(q,
y);case "!\x3d":return!e.equalityTest(q,y);case "\x3c":return e.greaterThanLessThan(q,y,r.operator);case "\x3e":return e.greaterThanLessThan(q,y,r.operator);case "\x3c\x3d":return e.greaterThanLessThan(q,y,r.operator);case "\x3e\x3d":return e.greaterThanLessThan(q,y,r.operator);case "+":return e.isString(q)||e.isString(y)?e.toString(q)+e.toString(y):e.toNumber(q)+e.toNumber(y);case "-":return e.toNumber(q)-e.toNumber(y);case "*":return e.toNumber(q)*e.toNumber(y);case "/":return e.toNumber(q)/e.toNumber(y);
case "%":return e.toNumber(q)%e.toNumber(y);default:throw Error(p.nodeErrorMessage(r,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(D){throw D;}}function U(r,a){try{if("Identifier"!==a.callee.type)throw Error(p.nodeErrorMessage(a,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==r.localScope&&void 0!==r.localScope[a.callee.name.toLowerCase()]){var q=r.localScope[a.callee.name.toLowerCase()];if(q.value instanceof e.NativeFunction)return q.value.fn(r,a);if(q.value instanceof t)return k(r,a,q.value.definition);
throw Error(p.nodeErrorMessage(a,"RUNTIME","NOTAFUNCTION"));}if(void 0!==r.globalScope[a.callee.name.toLowerCase()]){q=r.globalScope[a.callee.name.toLowerCase()];if(q.value instanceof e.NativeFunction)return q.value.fn(r,a);if(q.value instanceof t)return k(r,a,q.value.definition);throw Error(p.nodeErrorMessage(a,"RUNTIME","NOTAFUNCTION"));}throw Error(p.nodeErrorMessage(a,"RUNTIME","NOTFOUND"));}catch(y){throw y;}}function T(k){return null==k?"":e.isArray(k)||e.isImmutableArray(k)?"Array":e.isDate(k)?
"Date":e.isString(k)?"String":e.isBoolean(k)?"Boolean":e.isNumber(k)?"Number":k instanceof s?"Dictionary":k instanceof u?"Feature":k instanceof c?"Point":k instanceof a?"Polygon":k instanceof d?"Polyline":k instanceof n?"Multipoint":k instanceof h?"Extent":e.isFunctionParameter(k)?"Function":k===e.voidOperation?"":"number"===typeof k&&isNaN(k)?"Number":"Unrecognised Type"}function E(k,r,a,q){try{var y=I(k,r.arguments[a]);if(e.equalityTest(y,q))return I(k,r.arguments[a+1]);var D=r.arguments.length-
a;return 1===D?I(k,r.arguments[a]):2===D?null:E(k,r,a+2,q)}catch(b){throw b;}}function Q(k,r,a,q){try{if(!0===q)return I(k,r.arguments[a+1]);if(3===r.arguments.length-a)return I(k,r.arguments[a+2]);var y=I(k,r.arguments[a+2]);if(!1===e.isBoolean(y))throw Error("WHEN needs boolean test conditions");return Q(k,r,a+2,y)}catch(D){throw D;}}function N(k,r){var a=k.length,q=Math.floor(a/2);if(0===a)return[];if(1===a)return[k[0]];for(var y=N(k.slice(0,q),r),a=N(k.slice(q,a),r),q=[];0<y.length||0<a.length;)if(0<
y.length&&0<a.length){var D=r(y[0],a[0]);isNaN(D)&&(D=0);0>=D?(q.push(y[0]),y=y.slice(1)):(q.push(a[0]),a=a.slice(1))}else 0<y.length?(q.push(y[0]),y=y.slice(1)):0<a.length&&(q.push(a[0]),a=a.slice(1));return q}function q(k,r,a){try{var q=k.body;if(a.length!==k.params.length)throw Error("Invalid Parameter calls to function.");for(var y=0;y<a.length;y++)r.localScope[k.params[y].name.toLowerCase()]={d:null,value:a[y],valueset:!0,node:null};var D=I(r,q);if(D instanceof e.ReturnResult)return D.value;
if(D===e.breakResult)throw Error("Cannot Break from a Function");if(D===e.continueResult)throw Error("Cannot Continue from a Function");return D instanceof e.ImplicitResult?D.value:D}catch(b){throw b;}}function k(k,r,a){return J(k,r,function(r,y,D){r={spatialReference:k.spatialReference,applicationCache:void 0===k.applicationCache?null:k.applicationCache,globalScope:k.globalScope,depthCounter:k.depthCounter+1,console:k.console,localScope:{}};if(64<r.depthCounter)throw Error("Exceeded maximum function depth");
return q(a,r,D)})}function r(k){return function(){var r={applicationCache:void 0===k.context.applicationCache?null:k.context.applicationCache,spatialReference:k.context.spatialReference,console:k.context.console,localScope:{},depthCounter:k.context.depthCounter+1,globalScope:k.context.globalScope};if(64<r.depthCounter)throw Error("Exceeded maximum function depth");return q(k.definition,r,arguments)}}function y(k){}var D=0,P={};w.registerFunctions(P,J);v.registerFunctions(P,J);x.registerFunctions(P,
J);B.registerFunctions(P,J);A.registerFunctions(P,J);P["typeof"]=function(k,r){return J(k,r,function(k,r,a){e.pcCheck(a,1,1);k=T(a[0]);if("Unrecognised Type"===k)throw Error("Unrecognised Type");return k})};P.iif=function(k,r){try{e.pcCheck(null===r.arguments?[]:r.arguments,3,3);var a=I(k,r.arguments[0]);if(!1===e.isBoolean(a))throw Error("IF Function must have a boolean test condition");return!0===a?I(k,r.arguments[1]):I(k,r.arguments[2])}catch(q){throw q;}};P.decode=function(k,r){try{if(2>r.arguments.length)throw Error("Missing Parameters");
if(2===r.arguments.length)return I(k,r.arguments[1]);if(0===(r.arguments.length-1)%2)throw Error("Must have a default value result.");var a=I(k,r.arguments[0]);return E(k,r,1,a)}catch(q){throw q;}};P.when=function(k,r){try{if(3>r.arguments.length)throw Error("Missing Parameters");if(0===r.arguments.length%2)throw Error("Must have a default value result.");var a=I(k,r.arguments[0]);if(!1===e.isBoolean(a))throw Error("WHEN needs boolean test conditions");return Q(k,r,0,a)}catch(q){throw q;}};P.top=
function(k,r){return J(k,r,function(k,r,a){e.pcCheck(a,2,2);if(e.isArray(a[0]))return e.toNumber(a[1])>=a[0].length?a[0].slice(0):a[0].slice(0,e.toNumber(a[1]));if(e.isImmutableArray(a[0]))return e.toNumber(a[1])>=a[0].length()?a[0].slice(0):a[0].slice(0,e.toNumber(a[1]));throw Error("Top cannot accept this parameter type");})};P.first=function(k,r){return J(k,r,function(k,r,a){e.pcCheck(a,1,1);return e.isArray(a[0])?0===a[0].length?null:a[0][0]:e.isImmutableArray(a[0])?0===a[0].length()?null:a[0].get(0):
null})};P.sort=function(k,a){return J(k,a,function(k,a,q){e.pcCheck(q,1,2);k=q[0];e.isImmutableArray(k)&&(k=k.toArray());if(!1===e.isArray(k))throw Error("Illegal Argument");if(1<q.length){if(!1===e.isFunctionParameter(q[1]))throw Error("Illegal Argument");var y=r(q[1]);k=N(k,function(k,r){return y(k,r)})}else{if(0===k.length)return[];q={};for(a=0;a<k.length;a++){var D=T(k[a]);""!==D&&(q[D]=!0)}if(!0===q.Array||!0===q.Dictionary||!0===q.Feature||!0===q.Point||!0===q.Polygon||!0===q.Polyline||!0===
q.Multipoint||!0===q.Extent||!0===q.Function)return k.slice(0);a=0;var D="",b;for(b in q)a++,D=b;k=1<a||"String"===D?N(k,function(k,r){if(null===k||void 0===k||k===e.voidOperation)return null===r||void 0===r||r===e.voidOperation?0:1;if(null===r||void 0===r||r===e.voidOperation)return-1;var a=e.toString(k),q=e.toString(r);return a<q?-1:a===q?0:1}):"Number"===D?N(k,function(k,r){return k-r}):"Boolean"===D?N(k,function(k,r){return k===r?0:r?-1:1}):"Date"===D?N(k,function(k,r){return r-k}):k.slice(0)}return k})};
m.functionHelper={fixSpatialReference:e.fixSpatialReference,parseArguments:H,standardFunction:J};m.executeScript=function(k,r,a){a||(a=new f(102100));var q=r.vars,D=r.customfunctions,E={};q||(q={});D||(D={});var c=new s({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});c.immutable=!1;E.textformatting={value:c,valueset:!0,node:null};E.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};E.pi={value:Math.PI,valueset:!0,node:null};for(var d in P)E[d]=
{value:new e.NativeFunction(P[d]),valueset:!0,node:null};for(d in D)E[d]={value:new e.NativeFunction(D[d]),"native":!0,valueset:!0,node:null};for(d in q)E[d]=q[d]instanceof b?{value:new u(q[d]),valueset:!0,node:null}:{value:q[d],valueset:!0,node:null};k=I({spatialReference:a,globalScope:E,localScope:null,console:!r.console?y:r.console,depthCounter:1,applicationCache:void 0===r.applicationCache?null:r.applicationCache},k.body[0].body);k instanceof e.ReturnResult&&(k=k.value);k instanceof e.ImplicitResult&&
(k=k.value);k===e.voidOperation&&(k=null);if(k===e.breakResult)throw Error("Cannot return BREAK");if(k===e.continueResult)throw Error("Cannot return CONTINUE");if(k instanceof t)throw Error("Cannot return FUNCTION");if(k instanceof e.NativeFunction)throw Error("Cannot return FUNCTION");return k};m.extractFieldLiterals=function(k,r){void 0===r&&(r=!1);return p.findFieldLiterals(k,r)};m.validateScript=function(k,r){return p.validateScript(k,r,"simple")};m.referencesMember=function(k,r){return p.referencesMember(k,
r)};m.referencesFunction=function(k,r){return p.referencesFunction(k,r)}})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s){var u={type:"polygon",rings:null},t=g(n,{declaredClass:"esri.geometry.Polygon",constructor:function(b){a.mixin(this,u);this.rings=[];this._ring=0;b&&(a.isArray(b)?this.rings=a.isArray(b[0][0])?
b:[b]:b.rings?a.mixin(this,b):this.spatialReference=b,this.spatialReference&&(this.spatialReference=s.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(b){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];a.isArray(b[0])?m.forEach(b,this._addPointArr,this):m.forEach(b,this._addPoint,this);return this},_addPointArr:function(a){this.rings[this._ring].push(a)},_addPoint:function(a){this.rings[this._ring].push([a.x,a.y])},_insertPoints:function(a,
b){this.clearCache();this._ring=b;this.rings[this._ring]||(this.rings[this._ring]=[]);m.forEach(a,this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.rings.length)||null!==b&&void 0!==a&&(0>b||b>=this.rings[a].length)?!1:!0},getPoint:function(a,b){if(this._validateInputs(a,b))return new f(this.rings[a][b],this.spatialReference)},setPoint:function(a,b,e){if(this._validateInputs(a,b))return this.clearCache(),this.rings[a][b]=[e.x,e.y],this},insertPoint:function(a,
b,e){if(this._validateInputs(a)&&c.isDefined(b)&&0<=b&&b<=this.rings[a].length)return this.clearCache(),this.rings[a].splice(b,0,[e.x,e.y]),this},removeRing:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.rings.splice(a,1)[0];var b,e=a.length,c=this.spatialReference;for(b=0;b<e;b++)a[b]=new f(a[b],c);return a}},removePoint:function(a,b){if(this._validateInputs(a,b))return this.clearCache(),new f(this.rings[a].splice(b,1)[0],this.spatialReference)},getExtent:function(){var a;
a=this.getCacheValue("_extent");var b=this.getCacheValue("_partwise");if(a)return a=new e(a),a._partwise=b,a;a=this.rings;var c=a.length;if(c&&a[0].length){var d,f,p,h,s,n,u,t,g=h=a[0][0][0],m=s=a[0][0][1],L=Math.min,G=Math.max,O=this.spatialReference,b=[],S,U,T,E;for(n=0;n<c;n++){d=a[n];S=U=d[0]&&d[0][0];T=E=d[0]&&d[0][1];t=d.length;for(u=0;u<t;u++)f=d[u],p=f[0],f=f[1],g=L(g,p),m=L(m,f),h=G(h,p),s=G(s,f),S=L(S,p),T=L(T,f),U=G(U,p),E=G(E,f);b.push(new e({xmin:S,ymin:T,xmax:U,ymax:E,spatialReference:O?
O.toJson():null}))}a={xmin:g,ymin:m,xmax:h,ymax:s,spatialReference:O?O.toJson():null};b=1<b.length?b:null;this.setCacheValue("_extent",a);this.setCacheValue("_partwise",b);a=new e(a);a._partwise=b;return a}},contains:function(a){var b=this.rings,e,c=!1,d,p,h,s,n,u,t=b.length;e=this.spatialReference;d=a.spatialReference;var g=a.x;a=a.y;e&&(d&&!e.equals(d)&&e._canProject(d))&&(a=e.isWebMercator()?f.lngLatToXY(g,a):f.xyToLngLat(g,a,!0),g=a[0],a=a[1]);for(u=0;u<t;u++){e=b[u];h=e.length;for(n=s=0;n<h;n++)if(s++,
s===h&&(s=0),d=e[n],p=e[s],(d[1]<a&&p[1]>=a||p[1]<a&&d[1]>=a)&&d[0]+(a-d[1])/(p[1]-d[1])*(p[0]-d[0])<g)c=!c}return c},getCentroid:function(){var a=this.getCacheValue("_centroid");if(void 0!==a)return a;var a=this.rings,b,e,c,d,p=[],h,s,n=Infinity,u=-Infinity,t=Infinity,g=-Infinity;m.forEach(a,function(a){b=e=c=0;m.forEach(a,function(d,f){f<a.length-1&&(h=a[f+1],s=d[0]*h[1]-h[0]*d[1],b+=(d[0]+h[0])*s,e+=(d[1]+h[1])*s,c+=s,d[0]<n&&(n=d[0]),d[0]>u&&(u=d[0]),d[1]<t&&(t=d[1]),d[1]>g&&(g=d[1]))});0<c&&
(c*=-1);c&&p.push([b,e,c/2])});p.sort(function(a,b){return a[2]-b[2]});b=e=void 0;if(p[0]&&(d=6*p[0][2],b=p[0][0]/d,e=p[0][1]/d,b<n||b>u||e<t||e>g))b=e=void 0;if(void 0===b||void 0===e)if(a=a[0]&&a[0].length?this._getLineCentroid(a[0]):null)b=a.x,e=a.y;a=isNaN(b)||isNaN(e)?null:new f(b,e,this.spatialReference);this.setCacheValue("_centroid",a);return a},_getLineCentroid:function(a){var b,e=0,c=0,d=0,f,h,s={x:0,y:0},n={x:0,y:0},u,t=a.length,g;for(u=0;u<t-1;u++)f=a[u],h=a[u+1],f&&h&&(s.x=f[0],s.y=f[1],
n.x=h[0],n.y=h[1],b=p.getLength(s,n),0<b&&(e+=b,f=p.getMidpoint(f,h),c+=b*f[0],d+=b*f[1]));0<e?g={x:c/e,y:d/e}:a[0]&&(g={x:a[0][0],y:a[0][1]});return g},isClockwise:function(b){var e=0,c,d=b.length,f=a.isArray(b[0])?function(a,b){return a[0]*b[1]-b[0]*a[1]}:function(a,b){return a.x*b.y-b.x*a.y};for(c=0;c<d;c++)e+=f(b[c],b[(c+1)%d]);return 0>=e/2},isSelfIntersecting:function(a){a=a||this;var b,e,c,d,f,h,s,n=a.rings.length,u;for(c=0;c<n;c++){for(b=0;b<a.rings[c].length-1;b++){f=[[a.rings[c][b][0],a.rings[c][b][1]],
[a.rings[c][b+1][0],a.rings[c][b+1][1]]];for(e=c+1;e<n;e++)for(d=0;d<a.rings[e].length-1;d++)if(h=[[a.rings[e][d][0],a.rings[e][d][1]],[a.rings[e][d+1][0],a.rings[e][d+1][1]]],(s=p._getLineIntersection2(f,h))&&!(s[0]===f[0][0]&&s[1]===f[0][1]||s[0]===h[0][0]&&s[1]===h[0][1]||s[0]===f[1][0]&&s[1]===f[1][1]||s[0]===h[1][0]&&s[1]===h[1][1]))return!0}d=a.rings[c].length;if(!(4>=d))for(b=0;b<d-3;b++){u=d-1;0===b&&(u=d-2);f=[[a.rings[c][b][0],a.rings[c][b][1]],[a.rings[c][b+1][0],a.rings[c][b+1][1]]];for(e=
b+2;e<u;e++)if(h=[[a.rings[c][e][0],a.rings[c][e][1]],[a.rings[c][e+1][0],a.rings[c][e+1][1]]],(s=p._getLineIntersection2(f,h))&&!(s[0]===f[0][0]&&s[1]===f[0][1]||s[0]===h[0][0]&&s[1]===h[0][1]||s[0]===f[1][0]&&s[1]===f[1][1]||s[0]===h[1][0]&&s[1]===h[1][1]))return!0}}return!1},toJson:function(){var b={rings:a.clone(this.rings)},e=this.spatialReference;e&&(b.spatialReference=e.toJson());return b}});t.defaultProps=u;t.createEllipse=function(a){var b=a.center.x,e=a.center.y,c=a.longAxis,d=a.shortAxis,
f=a.numberOfPoints,p=a.map,h,s,n;a=[];var u=2*Math.PI/f;for(s=0;s<f;s++)h=Math.cos(s*u),n=Math.sin(s*u),h=p.toMap({x:c*h+b,y:d*n+e}),a.push(h);a.push(a[0]);b=new t(p.spatialReference);b.addRing(a);return b};t.createCircle=function(a){return t.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,map:a.map})};t.fromExtent=function(a){var b=a.normalize();a=a.spatialReference;return new t({rings:m.map(b,function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],
[a.xmax,a.ymin],[a.xmin,a.ymin]]}),spatialReference:a?a.toJson():null})};return t})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(g,m,a,b,d){return g(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(a){this.spatialReference=a;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new d(4326))},getExtent:function(){return null},
clearCache:function(){this.cache=void 0},getCacheValue:function(a){return this.cache&&this.cache[a]},setCacheValue:function(a,b){this.cache||(this.cache={});this.cache[a]=b}})})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(g,m,a,b,d,c,h,n){function f(a,b){89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);var e=b*t;return[a*t*p,p/2*Math.log((1+Math.sin(e))/(1-Math.sin(e)))]}function e(a,
b,e){a=a/p*u;if(e)return b=s/2-2*Math.atan(Math.exp(-1*b/p)),[a,b*u];e=a-360*Math.floor((a+180)/360);b=s/2-2*Math.atan(Math.exp(-1*b/p));return[e,b*u]}var p=6378137,s=3.141592653589793,u=57.29577951308232,t=0.017453292519943,w={type:"point",x:0,y:0};g=g(h,{declaredClass:"esri.geometry.Point",constructor:function(a,b,e){m.mixin(this,w);m.isArray(a)?(this.x=a[0],this.y=a[1],this.spatialReference=b):m.isObject(a)?(m.mixin(this,a),d.isDefined(this.latitude)&&(this.y=this.latitude),d.isDefined(this.longitude)&&
(this.x=this.longitude),this.spatialReference&&(this.spatialReference=n.createSpatialReference(this.spatialReference))):(this.x=a,this.y=b,this.spatialReference=e);this.verifySR()},offset:function(a,b){return new this.constructor(this.x+a,this.y+b,this.spatialReference)},setX:function(a){this.x=a;this.clearCache();return this},setY:function(a){this.y=a;this.clearCache();return this},setLongitude:function(a){var b=this.spatialReference;b&&(b._isWebMercator()?this.setX(f(a,this.y)[0]):4326===b.wkid&&
this.setX(a));return this},setLatitude:function(a){var b=this.spatialReference;b&&(b._isWebMercator()?this.setY(f(this.x,a)[1]):4326===b.wkid&&this.setY(a));return this},getLongitude:function(){var a=this.spatialReference,b;a&&(a._isWebMercator()?b=e(this.x,this.y)[0]:4326===a.wkid&&(b=this.x));return b},getLatitude:function(){var a=this.spatialReference,b;a&&(a._isWebMercator()?b=e(this.x,this.y)[1]:4326===a.wkid&&(b=this.y));return b},update:function(a,b){this.x=a;this.y=b;this.clearCache();return this},
normalize:function(){var a=this.x,b=this.spatialReference;if(b){var e=b._getInfo();if(e){var c=e.valid[0],d=e.valid[1],e=2*d;a>d?(c=Math.ceil(Math.abs(a-d)/e),a-=c*e):a<c&&(c=Math.ceil(Math.abs(a-c)/e),a+=c*e)}}return new this.constructor(a,this.y,b)},toJson:function(){var a={x:this.x,y:this.y},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});g.lngLatToXY=f;g.xyToLngLat=e;g.defaultProps=w;return g})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference",
"./kernel","./sniff","dojo/_base/lang"],function(g,m,a,b,d){function c(a){var b=!1;if(a&&(a.ics||a.icsid))b=!0;return b}return{isICS:c,createSpatialReference:function(a){var b=null;a&&(b=c(a)?new m(a):new g(a));return b}}})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),function(g,m,a,b,d,c){return g(c,{declaredClass:"esri.ImageSpatialReference",constructor:function(a){a&&m.isObject(a)&&m.mixin(this,a)},icsid:null,
ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(a){var b=!1;a&&(this.icsid&&a.icsid?b=this.icsid===a.icsid:this.ics&&a.ics&&(b=this.ics===a.ics));return b},toJson:function(a){var b=null,c=d.isDefined;a=c(a)?a:!0;c(this.icsid)?b={icsid:this.icsid}:c(this.ics)&&(b={ics:this.ics});c(this.url)&&(c(b)&&a)&&(b.url=this.url);return b}})})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s){var u={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0},t=g(n,{declaredClass:"esri.geometry.Extent",constructor:function(b,e,c,d,f){a.mixin(this,u);a.isObject(b)?(a.mixin(this,b),this.spatialReference&&(this.spatialReference=s.createSpatialReference(this.spatialReference))):this.update(b,e,c,d,f);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new f((this.xmin+
this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},centerAt:function(a){var b=this.getCenter(),e=a.x-b.x;a=a.y-b.y;return new t(this.xmin+e,this.ymin+a,this.xmax+e,this.ymax+a,this.spatialReference)},update:function(a,b,e,c,d){this.xmin=a;this.ymin=b;this.xmax=e;this.ymax=c;this.spatialReference=d;this.clearCache();return this},offset:function(a,b){return new t(this.xmin+a,this.ymin+b,this.xmax+a,this.ymax+b,this.spatialReference)},expand:function(a){var b=(1-a)/2;a=this.getWidth()*b;b*=
this.getHeight();return new t(this.xmin+a,this.ymin+b,this.xmax-a,this.ymax-b,this.spatialReference)},intersects:function(a){if(!a)return!1;var b=a.type,c=this.spatialReference,d=a.spatialReference;c&&(d&&!c.equals(d)&&c._canProject(d))&&(a=c.isWebMercator()?e.geographicToWebMercator(a):e.webMercatorToGeographic(a,!0));switch(b){case "point":return this.contains(a);case "multipoint":return this._intersectsMultipoint(a);case "extent":return this._intersectsExtent(a);case "polygon":return this._intersectsPolygon(a);
case "polyline":return this._intersectsPolyline(a)}},normalize:function(){var b=this._normalize(!1,!0);a.isArray(b)||(b=[b]);return b},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var a=this.spatialReference,b=a&&a._getInfo(),e=[],c=0;if(b&&this._isOutOfBounds(b)){var d=this,c=d.xmin,f=d.ymin,p=d.ymax,s=b.valid[0],n=b.valid[1];d.getWidth()>2*n&&(d=d.getCenter(),d=new t(d.x-n,f,d.x+n,p,new h(a.toJson())));var c=d.xmin-c,u=this._normalizeX(d.xmin,b),b=this._normalizeX(d.xmax,
b);u.frameId===b.frameId?e.push(new t(u.x,f,b.x,p,new h(a.toJson()))):e.push(new t(u.x,f,n,p,new h(a.toJson())),new t(s,f,b.x,p,new h(a.toJson())))}else e.push(this.getExtent());return{extents:e,marginLeft:c}},_intersectsMultipoint:function(a){var b=a.points.length,e;for(e=0;e<b;e++)if(this.contains(a.getPoint(e)))return!0;return!1},_intersectsExtent:function(a){var b,e,c,d,f=!1;this.xmin<=a.xmin?(b=a.xmin,this.xmax<b?f=!0:c=Math.min(this.xmax,a.xmax)-b):(b=this.xmin,a.xmax<b?f=!0:c=Math.min(this.xmax,
a.xmax)-b);this.ymin<=a.ymin?(e=a.ymin,this.ymax<e?f=!0:d=Math.min(this.ymax,a.ymax)-e):(e=this.ymin,a.ymax<e?f=!0:d=Math.min(this.ymax,a.ymax)-e);return f?null:new t(b,e,b+c,e+d,this.spatialReference)},_intersectsPolygon:function(a){var b=[this.xmin,this.ymax],e=[this.xmax,this.ymax],c=[this.xmin,this.ymin],d=[this.xmax,this.ymin],p=[b,e,c,d],b=[[c,b],[b,e],[e,d],[d,c]],c=a.rings,d=c.length,h,s=new f(0,0,this.spatialReference);h=p.length;for(e=0;e<h;e++)if(s.update(p[e][0],p[e][1]),a.contains(s))return!0;
s.setSpatialReference(a.spatialReference);for(var n,u,e=0;e<d;e++)if(p=c[e],h=p.length){n=p[0];s.update(n[0],n[1]);if(this.contains(s))return!0;for(a=1;a<h;a++){u=p[a];s.update(u[0],u[1]);if(this.contains(s)||this._intersectsLine([n,u],b))return!0;n=u}}return!1},_intersectsPolyline:function(a){var b=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],e,c=a.paths,d=
c.length,p,h,s,n,u=new f(0,0,a.spatialReference);for(a=0;a<d;a++)if(p=c[a],h=p.length){s=p[0];u.update(s[0],s[1]);if(this.contains(u))return!0;for(e=1;e<h;e++){n=p[e];u.update(n[0],n[1]);if(this.contains(u)||this._intersectsLine([s,n],b))return!0;s=n}}return!1},_intersectsLine:function(a,b){var e=p._getLineIntersection2,c,d=b.length;for(c=0;c<d;c++)if(e(a,b[c]))return!0;return!1},contains:function(a){if(!a)return!1;var b=a.type;if("point"===b){var e=this.spatialReference,c=a.spatialReference,b=a.x;
a=a.y;e&&(c&&!e.equals(c)&&e._canProject(c))&&(a=e.isWebMercator()?f.lngLatToXY(b,a):f.xyToLngLat(b,a,!0),b=a[0],a=a[1]);return b>=this.xmin&&b<=this.xmax&&a>=this.ymin&&a<=this.ymax}return"extent"===b?this._containsExtent(a):!1},_containsExtent:function(a){var b=a.xmin,e=a.ymin,c=a.xmax,d=a.ymax,p=a.spatialReference;a=new f(b,e,p);b=new f(b,d,p);d=new f(c,d,p);e=new f(c,e,p);return this.contains(a)&&this.contains(b)&&this.contains(d)&&this.contains(e)?!0:!1},union:function(a){return new t(Math.min(this.xmin,
a.xmin),Math.min(this.ymin,a.ymin),Math.max(this.xmax,a.xmax),Math.max(this.ymax,a.ymax),this.spatialReference)},getExtent:function(){var a=this.spatialReference;return new t(this.xmin,this.ymin,this.xmax,this.ymax,a&&new h(a.toJson()))},_shiftCM:function(a){var b=this.getCacheValue("_shifted");if(!b){var b=new t(this.toJson()),d=b.spatialReference;if(a=a||d._getInfo()){var f=this._getCM(a);if(f){var p=d._isWebMercator()?e.webMercatorToGeographic(f):f;b.xmin-=f.x;b.xmax-=f.x;d._isWebMercator()||(p.x=
this._normalizeX(p.x,a).x);b.setSpatialReference(new h(c.substitute({Central_Meridian:p.x},4326===d.wkid?a.altTemplate:a.wkTemplate)))}}this.setCacheValue("_shifted",b)}return b},_getCM:function(a){var b;this._isOutOfBounds(a)&&(b=this.getCenter());return b},_isOutOfBounds:function(a){var b=a.valid[0];a=a.valid[1];var e=this.xmin,c=this.xmax;return!(e>=b&&e<=a&&c>=b&&c<=a)},_normalize:function(a,b,e){var c=new t(this.toJson()),d=c.spatialReference;if(d&&(e=e||d._getInfo())){var f=m.map(this._getParts(e),
function(a){return a.extent});return 2<f.length?a?this._shiftCM(e):c.update(e.valid[0],c.ymin,e.valid[1],c.ymax,d):2===f.length?a?this._shiftCM(e):b?f:{rings:m.map(f,function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]}),spatialReference:d}:f[0]||c}return c},_getParts:function(a){var b=this.getCacheValue("_parts");if(!b){var b=[],e=this.xmin,c=this.xmax,d=this.ymin,f=this.ymax,p=this.spatialReference,h=this.getWidth(),s=e,n=c,u=0,g=0,m,L;a=a||p._getInfo();
m=a.valid[0];L=a.valid[1];g=this._normalizeX(e,a);e=g.x;u=g.frameId;g=this._normalizeX(c,a);c=g.x;g=g.frameId;a=e===c&&0<h;if(h>2*L){h=new t(s<n?e:c,d,L,f,p);e=new t(m,d,s<n?c:e,f,p);L=new t(0,d,L,f,p);d=new t(m,d,0,f,p);p=[];m=[];h.contains(L)&&p.push(u);h.contains(d)&&m.push(u);e.contains(L)&&p.push(g);e.contains(d)&&m.push(g);for(f=u+1;f<g;f++)p.push(f),m.push(f);b.push({extent:h,frameIds:[u]},{extent:e,frameIds:[g]},{extent:L,frameIds:p},{extent:d,frameIds:m})}else e>c||a?b.push({extent:new t(e,
d,L,f,p),frameIds:[u]},{extent:new t(m,d,c,f,p),frameIds:[g]}):b.push({extent:new t(e,d,c,f,p),frameIds:[u]});this.setCacheValue("_parts",b)}return b},_normalizeX:function(a,b){var e=0,c=b.valid[0],d=b.valid[1],f=2*d;a>d?(e=Math.ceil(Math.abs(a-d)/f),a-=e*f):a<c&&(e=Math.ceil(Math.abs(a-c)/f),a+=e*f,e=-e);return{x:a,frameId:e}},toJson:function(){var a={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});t.defaultProps=
u;return t})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(g,m,a,b,d,c){function h(a,b,c,h){if("point"===a.type){var n=b(a.x,a.y,h);return new a.constructor(n[0],n[1],new d(c))}if("extent"===a.type){var n=b(a.xmin,a.ymin,h),t=b(a.xmax,a.ymax,h);return new a.constructor(n[0],n[1],t[0],t[1],new d(c))}if("polyline"===a.type||"polygon"===a.type){var n="polyline"===a.type,m=[],v;g.forEach(n?a.paths:
a.rings,function(a){m.push(v=[]);g.forEach(a,function(a){v.push(b(a[0],a[1],h))})});return n?new a.constructor({paths:m,spatialReference:new d(c)}):new a.constructor({rings:m,spatialReference:new d(c)})}if("multipoint"===a.type){var x=[];g.forEach(a.points,function(a){x.push(b(a[0],a[1],h))});return new a.constructor({points:x,spatialReference:new d(c)})}}function n(a,b){var c=a&&(null!=a.wkid?a:a.spatialReference),d=b&&(null!=b.wkid?b:b.spatialReference);return!c||!d?!1:d.equals(c)?!0:d._canProject(c)}
return{canProject:n,project:function(a,b){var d=a&&a.spatialReference,s=b&&(null!=b.wkid?b:b.spatialReference);d&&s?d.equals(s)?a=new a.constructor(a.toJson()):n(d,s)?s.isWebMercator()?a=h(a,c.lngLatToXY,{wkid:102100}):4326===s.wkid&&(a=h(a,c.xyToLngLat,{wkid:4326})):a=null:a=null;return a},lngLatToXY:c.lngLatToXY,xyToLngLat:c.xyToLngLat,geographicToWebMercator:function(a){return h(a,c.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(a,b){return h(a,c.xyToLngLat,{wkid:4326},b)}}})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang",
"dojo/has","../kernel","./Point"],function(g,m,a,b){function d(a,c,e){return a instanceof b?new b(a.x+e*(c.x-a.x),a.y+e*(c.y-a.y)):[a[0]+e*(c[0]-a[0]),a[1]+e*(c[1]-a[1])]}function c(a,b){return 1E-8>Math.abs(a-b)}function h(a,b,e,d){var h,u=c(a[0],b[0])?1E10:(a[1]-b[1])/(a[0]-b[0]),t=c(e[0],d[0])?1E10:(e[1]-d[1])/(e[0]-d[0]),g=a[1]-u*a[0],v=e[1]-t*e[0];if(c(u,t)){if(c(g,v)){if(c(a[0],b[0]))if(Math.min(a[1],b[1])<Math.max(e[1],d[1])||Math.max(a[1],b[1])>Math.min(e[1],d[1]))a=(a[1]+b[1]+e[1]+d[1]-Math.min(a[1],
b[1],e[1],d[1])-Math.max(a[1],b[1],e[1],d[1]))/2,h=(a-g)/u;else return null;else if(Math.min(a[0],b[0])<Math.max(e[0],d[0])||Math.max(a[0],b[0])>Math.min(e[0],d[0]))h=(a[0]+b[0]+e[0]+d[0]-Math.min(a[0],b[0],e[0],d[0])-Math.max(a[0],b[0],e[0],d[0]))/2,a=u*h+g;else return null;return[h,a]}return null}c(u,1E10)?(h=a[0],a=t*h+v):c(t,1E10)?(h=e[0],a=u*h+g):(h=-(g-v)/(u-t),a=a[1]===b[1]?a[1]:e[1]===d[1]?e[1]:u*h+g);return[h,a]}return{getLength:function(a,b){var e=b.x-a.x,c=b.y-a.y;return Math.sqrt(e*e+
c*c)},_getLength:function(a,b){var e=b[0]-a[0],c=b[1]-a[1];return Math.sqrt(e*e+c*c)},getPointOnLine:d,getMidpoint:function(a,b){return d(a,b,0.5)},_equals:c,_getLineIntersection:h,getLineIntersection:function(a,c,e,d,s){(a=h([a.x,a.y],[c.x,c.y],[e.x,e.y],[d.x,d.y]))&&(a=new b(a[0],a[1],s));return a},_getLineIntersection2:function(a,b){var e=a[0],c=a[1],d=b[0],h=b[1],t=e[0],e=e[1],g=c[0],c=c[1],v=d[0],x=d[1],d=h[0]-v,v=t-v,m=g-t,h=h[1]-x,x=e-x,A=c-e,C=h*m-d*A;if(0===C)return!1;d=(d*x-h*v)/C;v=(m*
x-A*v)/C;return 0<=d&&1>=d&&0<=v&&1>=v?[t+d*(g-t),e+d*(c-e)]:!1},_pointLineDistance:function(a,b){var e=b[0],c=b[1],d=e[0],h=e[1],e=a[0],t=a[1],g=c[0]-d,v=c[1]-h,x=e-d,m=t-h,c=Math.sqrt,A=Math.pow,C=c(A(g,2)+A(v,2)),x=(x*g+m*v)/(C*C),h=h+x*v;return c(A(e-(d+x*g),2)+A(t-h,2))}}})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(g,m,a,b,d,c,h,n,f){g=g(null,{declaredClass:"esri.Graphic",
constructor:function(a,b,c,d){a&&!a.declaredClass?(this.geometry=a.geometry?n.fromJson(a.geometry):null,this.symbol=a.symbol?f.fromJson(a.symbol):null,this.attributes=a.attributes||null,this.infoTemplate=a.infoTemplate?new h(a.infoTemplate):null):(this.geometry=a,this.symbol=b,this.attributes=c,this.infoTemplate=d)},_shape:null,_graphicsLayer:null,_visible:!0,visible:!0,getDojoShape:function(){return this._shape},getShapes:function(){var a=[];this._shape&&a.push(this._shape);this._bgShape&&a.push(this._bgShape);
return a},getNode:function(){var a=this._shape&&this._shape.getNode();return a&&a.nodeType?a:null},getNodes:function(){var a=this.getShapes(),b,c,d=a.length,f=[];for(c=0;c<d;c++)(b=a[c]&&a[c].getNode())&&b.nodeType&&f.push(b);return f},getLayer:function(){return this._layer},draw:function(){var a=this._graphicsLayer;a&&a._draw(this,!0);return this},setGeometry:function(a){this.geometry=a;if(a=this._graphicsLayer)a._updateExtent(this),a._draw(this,!0);return this},setSymbol:function(a,b){var c=this._graphicsLayer,
d=this._shape;this.symbol=a;c&&(b&&d&&c._removeShape(this),c._draw(this,!0));return this},setAttributes:function(a){this.attributes=a;this._clearCache();return this},setInfoTemplate:function(a){this.infoTemplate=a;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var a=this.getLayer();return this.infoTemplate||a&&a.infoTemplate},getTitle:function(){var a=this.getInfoTemplate(),b=a&&a.title;if(m.isFunction(b))b=b.call(a,this);else if(m.isString(b))var d=
(a=this.getLayer())&&a._getDateOpts,b=c.substitute(this.attributes,b,{first:!0,dateFormat:d&&d.call(a)});return b},getContent:function(){var a=this.getInfoTemplate(),b=a&&a.content;if(m.isFunction(b))b=b.call(a,this);else if(m.isString(b))var d=(a=this.getLayer())&&a._getDateOpts,b=c.substitute(this.attributes,b,{dateFormat:d&&d.call(a)});return b},attr:function(a,b){var c=this.getNodes(),d,f=c.length;for(d=0;d<f;d++)null==b?c[d].removeAttribute(a):c[d].setAttribute(a,b);return this},show:function(){this.visible=
this._visible=!0;var a,b,c;if(this.getShapes().length){a=this.getNodes();c=a.length;this.attr("data-hidden");for(b=0;b<c;b++)d.show(a[b])}else this._graphicsLayer&&this._graphicsLayer._draw(this,!0);return this},hide:function(){this.visible=this._visible=!1;var a=this._graphicsLayer,b,c;if(a)if("canvas-2d"===a.surfaceType)a._removeShape(this);else if(a=this.getNodes(),c=a.length){this.attr("data-hidden","");for(b=0;b<c;b++)d.hide(a[b])}return this},toJson:function(){var a={};this.geometry&&(a.geometry=
this.geometry.toJson());this.attributes&&(a.attributes=m.mixin({},this.attributes));this.symbol&&(a.symbol=this.symbol.toJson());this.infoTemplate&&(a.infoTemplate=this.infoTemplate.toJson());return a},_getView:function(a){return(a=(a=a||this.getLayer())&&a.getMap())&&a._getView()},_getDataValue:function(a,b,c,d){var f=this._getCacheItem(a,b);if(void 0===f.value){var h=null,n=this.attributes,x=a.field;if(b.hasExpr)h=c.executeFunction(b.compiledFunc,c.createExecContext(this,this._getView(d)));else if(m.isFunction(x))h=
x(this);else if(n&&(h=n[x],(a=a.normalizationField)&&this._isValidNumber(h)))n=parseFloat(n[a]),h=this._isValidNumber(n)&&0!==n?h/n:null;this._isValidNumber(h)||(h=null);f.value=h}return f.value},_isValidNumber:function(a){return"number"===typeof a&&!isNaN(a)&&Infinity!==a&&-Infinity!==a},_getCacheItem:function(a,b){var c=this._findCacheItem(a);c?c.version!==b.version&&(c.version=b.version,c.value=void 0):c=this._createCacheItem(a,b);return c},_findCacheItem:function(a){var b,c=this._cache;if(c){var d,
f=c.length;for(d=0;d<f;d++){var h=c[d];if(h.variable===a){b=h;break}}}return b},_createCacheItem:function(a,b){var c=this._cache;c||(c=this._cache=[]);var d={variable:a,version:b.version,value:void 0};c.push(d);return d},_clearCache:function(){this._cache=null}});g.prototype.getShape=g.prototype.getDojoShape;return g})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(g,m,a,b,d){var c={show:function(a){if(a=c.getNode(a))a.style.display=
"block"},getNode:function(a){return a&&a.domNode||a},hide:function(a){if(a=c.getNode(a))a.style.display="none"},toggle:function(a){if(a=c.getNode(a))a.style.display="none"===a.style.display?"block":"none"},documentBox:8>=d("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(a){if(a=this.getNode(a)){var c=0,d=0,e=0,p=0,s=0,u=0;return[m.connect(a,"ontouchstart",function(b){c=b.touches[0].screenX;d=b.touches[0].screenY;
e=a.scrollWidth;p=a.scrollHeight;s=a.clientWidth;u=a.clientHeight}),m.connect(a,"ontouchmove",function(g){g.preventDefault();var m=a.firstChild;m instanceof Text&&(m=a.childNodes[1]);var v=m._currentX||0,x=m._currentY||0,v=v+(g.touches[0].screenX-c);0<v?v=0:0>v&&Math.abs(v)+s>e&&(v=-1*(e-s));m._currentX=v;x+=g.touches[0].screenY-d;0<x?x=0:0>x&&Math.abs(x)+u>p&&(x=-1*(p-u));m._currentY=x;b.set(m,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+v+"px, "+x+"px)"});
c=g.touches[0].screenX;d=g.touches[0].screenY})]}}};return c})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(g,m,a,b,d){return g(null,{declaredClass:"esri.InfoTemplate",constructor:function(a,b){a&&m.isObject(a)&&!m.isFunction(a)?m.mixin(this,a):(this.title=a||"${*}",this.content=b||"${*}")},setTitle:function(a){this.title=a;return this},setContent:function(a){this.content=a;return this},toJson:function(){return d.fixJson({title:this.title,
content:this.content})}})})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(g,m,a,b,d,c,h,n){return{fromJson:function(a){if(void 0!==a.x&&void 0!==a.y)return new b(a);if(void 0!==a.paths)return new d(a);if(void 0!==a.rings)return new c(a);if(void 0!==a.points)return new h(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new n(a)},getJsonType:function(a){return a instanceof
b?"esriGeometryPoint":a instanceof d?"esriGeometryPolyline":a instanceof c?"esriGeometryPolygon":a instanceof n?"esriGeometryEnvelope":a instanceof h?"esriGeometryMultipoint":null},getGeometryType:function(a){return"esriGeometryPoint"===a?b:"esriGeometryPolyline"===a?d:"esriGeometryPolygon"===a?c:"esriGeometryEnvelope"===a?n:"esriGeometryMultipoint"===a?h:null}}})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p){var s={type:"polyline",paths:null};g=g(n,{declaredClass:"esri.geometry.Polyline",constructor:function(b){a.mixin(this,s);this.paths=[];this._path=0;b&&(a.isArray(b)?this.paths=a.isArray(b[0][0])?b:[b]:b.paths?a.mixin(this,b):this.spatialReference=b,this.spatialReference&&(this.spatialReference=p.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(b){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];a.isArray(b[0])?
m.forEach(b,this._addPointArr,this):m.forEach(b,this._addPoint,this);return this},_addPointArr:function(a){this.paths[this._path].push(a)},_addPoint:function(a){this.paths[this._path].push([a.x,a.y])},_insertPoints:function(a,b){this.clearCache();this._path=b;this.paths[this._path]||(this.paths[this._path]=[]);m.forEach(a,this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.paths.length)||null!==b&&void 0!==a&&(0>b||b>=this.paths[a].length)?!1:!0},getPoint:function(a,
b){if(this._validateInputs(a,b))return new f(this.paths[a][b],this.spatialReference)},setPoint:function(a,b,c){if(this._validateInputs(a,b))return this.clearCache(),this.paths[a][b]=[c.x,c.y],this},insertPoint:function(a,b,e){if(this._validateInputs(a)&&c.isDefined(b)&&0<=b&&b<=this.paths[a].length)return this.clearCache(),this.paths[a].splice(b,0,[e.x,e.y]),this},removePath:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.paths.splice(a,1)[0];var b,c=a.length,e=this.spatialReference;
for(b=0;b<c;b++)a[b]=new f(a[b],e);return a}},removePoint:function(a,b){if(this._validateInputs(a,b))return this.clearCache(),new f(this.paths[a].splice(b,1)[0],this.spatialReference)},getExtent:function(){var a;a=this.getCacheValue("_extent");var b=this.getCacheValue("_partwise");if(a)return a=new e(a),a._partwise=b,a;a=this.paths;var c=a.length;if(c&&a[0].length){var d,f,p,h,s,n,g,m,J=h=a[0][0][0],I=s=a[0][0][1],K=Math.min,M=Math.max,L=this.spatialReference,b=[],G,O,S,U;for(n=0;n<c;n++){d=a[n];
G=O=d[0]&&d[0][0];S=U=d[0]&&d[0][1];m=d.length;for(g=0;g<m;g++)f=d[g],p=f[0],f=f[1],J=K(J,p),I=K(I,f),h=M(h,p),s=M(s,f),G=K(G,p),S=K(S,f),O=M(O,p),U=M(U,f);b.push(new e({xmin:G,ymin:S,xmax:O,ymax:U,spatialReference:L?L.toJson():null}))}a={xmin:J,ymin:I,xmax:h,ymax:s,spatialReference:L?L.toJson():null};b=1<b.length?b:null;this.setCacheValue("_extent",a);this.setCacheValue("_partwise",b);a=new e(a);a._partwise=b;return a}},toJson:function(){var b={paths:a.clone(this.paths)},c=this.spatialReference;
c&&(b.spatialReference=c.toJson());return b}});g.defaultProps=s;return g})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(g,m,a,b,d,c,h,n,f){var e={type:"multipoint",points:null};g=g(c,{declaredClass:"esri.geometry.Multipoint",constructor:function(a){m.mixin(this,e);this.points=[];a&&(a.points?m.mixin(this,a):this.spatialReference=a,this.spatialReference&&(this.spatialReference=
f.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(a){this.clearCache();m.isArray(a)?this.points.push(a):this.points.push([a.x,a.y]);return this},removePoint:function(a){if(this._validateInputs(a))return this.clearCache(),new h(this.points.splice(a,1)[0],this.spatialReference)},getExtent:function(){var a=this.getCacheValue("_extent");if(a)return new n(a);var a=this.points,b=a.length;if(b){var c=a[0],e,d,f=e=c[0],h=d=c[1],g=Math.min,A=Math.max,m=this.spatialReference,
z,F;for(F=0;F<b;F++)c=a[F],z=c[0],c=c[1],f=g(f,z),h=g(h,c),e=A(e,z),d=A(d,c);a={xmin:f,ymin:h,xmax:e,ymax:d,spatialReference:m?m.toJson():null};this.setCacheValue("_extent",a);return new n(a)}},_validateInputs:function(a){return null===a||0>a||a>=this.points.length?!1:!0},getPoint:function(a){if(this._validateInputs(a))return a=this.points[a],new h(a[0],a[1],this.spatialReference)},setPoint:function(a,b){if(this._validateInputs(a))return this.clearCache(),this.points[a]=[b.x,b.y],this},toJson:function(){var a=
{points:m.clone(this.points)},b=this.spatialReference;b&&(a.spatialReference=b.toJson());return a}});g.defaultProps=e;return g})},"esri/arcade/languageUtils":function(){define("require exports ../geometry/Geometry ../moment dojo/number ./ImmutableArray ../kernel ./ImmutablePointArray ./ImmutablePathArray dojo/_base/array ../geometry/Point ./FunctionWrapper".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s){function u(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==
a.indexOf(b));return a}function t(a){return a instanceof S||a instanceof s||a instanceof U}function w(a){return"string"===typeof a||a instanceof String}function v(a){return"boolean"===typeof a}function x(a){return"number"===typeof a}function B(a){return a instanceof Array}function A(a){return a instanceof Date}function C(a,b){if(!1===isNaN(a)){if(void 0===b||null===b||""===b)return a.toString();b=u(b,"\u2030","");b=u(b,"\u00a4","");return d.format(a,{pattern:b})}return a.toString()}function z(a,c){var e=
b(a);return void 0===c||null===c||""===c?e.format():e.format(F(c))}function F(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function H(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=b}return!1}function J(a,b){if(a===b||null===a&&b===m.voidOperation||null===b&&a===m.voidOperation)return!0;if(A(a)&&A(b))return a.getTime()===b.getTime();if(a instanceof f||a instanceof n)return a.equalityTest(b);if(a instanceof p&&
b instanceof p){var c=void 0,e=void 0;m.isVersion4?(c=a.cache._arcadeCacheId,e=b.cache._arcadeCacheId):(c=a.getCacheValue("_arcadeCacheId"),e=b.getCacheValue("_arcadeCacheId"));if(void 0!==c&&null!==c)return c===e}return void 0!==a&&(void 0!==b&&null!==a&&null!==b&&"object"===typeof a&&"object"===typeof b)&&(a._arcadeCacheId===b._arcadeCacheId&&void 0!==a._arcadeCacheId&&null!==a._arcadeCacheId||a._underlyingGraphic===b._underlyingGraphic&&void 0!==a._underlyingGraphic&&null!==a._underlyingGraphic)?
!0:!1}function I(b,e){if(w(b))return b;if(null===b)return"";if(x(b))return C(b,e);if(v(b))return b.toString();if(A(b))return z(b,e);if(b instanceof a)return JSON.stringify(b.toJson());if(B(b)){for(var d=[],f=0;f<b.length;f++)d[f]=M(b[f]);return"["+d.join(",")+"]"}if(b instanceof c){d=[];for(f=0;f<b.length();f++)d[f]=M(b.get(f));return"["+d.join(",")+"]"}return null!==b&&"object"===typeof b&&void 0!==b.castToText?b.castToText():t(b)?"object, Function":""}function K(b,e){if(w(b))return b;if(null===
b)return"";if(x(b))return C(b,e);if(v(b))return b.toString();if(A(b))return z(b,e);if(b instanceof a)return JSON.stringify(b.toJson());if(B(b)){for(var d=[],f=0;f<b.length;f++)d[f]=M(b[f]);return"["+d.join(",")+"]"}if(b instanceof c){d=[];for(f=0;f<b.length();f++)d[f]=M(b.get(f));return"["+d.join(",")+"]"}return null!==b&&"object"===typeof b&&void 0!==b.castToText?b.castToText():t(b)?"object, Function":""}function M(b){if(null!==b){if(v(b)||x(b)||w(b))return JSON.stringify(b);if(b instanceof a||b instanceof
c||b instanceof Array)return K(b);if(b instanceof Date)return JSON.stringify(z(b,""));if(null!==b&&"object"===typeof b&&void 0!==b.castToText)return b.castToText()}return"null"}function L(a,b){return x(a)?a:null===a||""===a?0:A(a)?NaN:v(a)?a?1:0:""===a||void 0===a?NaN:void 0!==b&&w(a)?(b=u(b,"\u2030",""),b=u(b,"\u00a4",""),d.parse(a,{pattern:b})):a===m.voidOperation?0:Number(a)}function G(a,b){var c;e.some(b.fields,function(b){b.name===a&&(c=b.domain);return!!c});return c}g=function(){return function(a){this.value=
a}}();var O=function(){return function(a){this.value=a}}(),S=function(){return function(a){this.fn=a}}(),U=function(){return function(a){this.fn=a}}();m.NativeFunction=S;m.ImplicitResult=O;m.ReturnResult=g;m.SizzleFunction=U;m.isVersion4=0===h.version.indexOf("4.");m.voidOperation={type:"VOID"};m.breakResult={type:"BREAK"};m.continueResult={type:"CONTINUE"};m.multiReplace=u;m.isFunctionParameter=t;m.isSimpleType=function(a){return w(a)||x(a)||A(a)||v(a)||null===a||a===m.voidOperation||"number"===
typeof a?!0:!1};m.defaultUndefined=function(a,b){return void 0===a?b:a};m.isString=w;m.isBoolean=v;m.isNumber=x;m.isArray=B;m.isFeatureCursor=function(a){return a&&void 0!==a.isFeatureCursor};m.isImmutableArray=function(a){return a instanceof c};m.isDate=A;m.pcCheck=function(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");};m.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=
(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|8).toString(16)})};m.formatNumber=C;m.formatDate=z;m.standardiseDateFormat=F;m.greaterThanLessThan=function(a,b,c){if(null===a){if(null===b||b===m.voidOperation)return H(null,null,c);if(x(b))return H(0,b,c);if(w(b)||v(b))return H(0,L(b),c);if(A(b))return H(0,b.getTime(),c)}if(a===m.voidOperation){if(null===b||b===m.voidOperation)return H(null,null,c);if(x(b))return H(0,b,c);if(w(b)||v(b))return H(0,L(b),c);if(A(b))return H(0,b.getTime(),
c)}else if(x(a)){if(x(b))return H(a,b,c);if(v(b))return H(a,L(b),c);if(null===b||b===m.voidOperation)return H(a,0,c);if(w(b))return H(a,L(b),c);if(A(b))return H(a,b.getTime(),c)}else if(w(a)){if(w(b))return H(I(a),I(b),c);if(A(b))return H(L(a),b.getTime(),c);if(x(b))return H(L(a),b,c);if(null===b||b===m.voidOperation)return H(L(a),0,c);if(v(b))return H(L(a),L(b),c)}else if(A(a)){if(A(b))return H(a,b,c);if(null===b||b===m.voidOperation)return H(a.getTime(),0,c);if(x(b))return H(a.getTime(),b,c);if(v(b)||
w(b))return H(a.getTime(),L(b),c)}else if(v(a)){if(v(b))return H(a,b,c);if(x(b))return H(L(a),L(b),c);if(A(b))return H(L(a),b.getTime(),c);if(null===b||b===m.voidOperation)return H(L(a),0,c);if(w(b))return H(L(a),L(b),c)}return J(a,b)&&("\x3c\x3d"===c||"\x3e\x3d"===c)?!0:!1};m.equalityTest=J;m.toString=I;m.toNumberArray=function(a){var b=[];if(!1===B(a))return null;if(a instanceof c){for(var e=0;e<a.length();e++)b[e]=L(a.get(e));return b}for(e=0;e<a.length;e++)b[e]=L(a[e]);return b};m.toStringExplicit=
K;m.toNumber=L;m.toDate=function(a,c){if(A(a))return a;if(w(a)){var e=b(a,[void 0===c||null===c||""===c?b.ISO_8601:c]);if(e.isValid())return e.toDate()}return null};m.toDateM=function(a,c){if(A(a))return b(a);if(w(a)){var e=b(a,[void 0===c||null===c||""===c?b.ISO_8601:c]);if(e.isValid())return e}return null};m.toBoolean=function(a){if(v(a))return a;if(w(a)){if(a=a.toLowerCase(),"true"===a)return!0}else if(x(a))return 0===a||isNaN(a)?!1:!0;return!1};m.fixSpatialReference=function(a,b){if(null===a)return null;
if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a};m.getDomainValue=function(a,b){if(!a||!a.domain)return null;var c=null;b="string"===a.field.type||"esriFieldTypeString"===a.field.type?I(b):L(b);for(var e=0;e<a.domain.codedValues.length;e++){var q=a.domain.codedValues[e];q.code===b&&(c=q)}return null===c?null:c.name};m.getDomainCode=function(a,b){if(!a||!a.domain)return null;var c=null;b=I(b);for(var e=0;e<a.domain.codedValues.length;e++){var q=a.domain.codedValues[e];
q.name===b&&(c=q)}return null===c?null:c.code};m.getDomain=function(a,b,c,d){void 0===c&&(c=null);if(!b||!b.fields)return null;for(var q=null,k=0;k<b.fields.length;k++){var r=b.fields[k];r.name.toLowerCase()===a.toString().toLowerCase()&&(q=r)}if(null===q)return null;var y,D;d||(d=c&&b.typeIdField&&c._field(b.typeIdField));null!=d&&e.some(b.types,function(k){if(k.id===d){if((y=k.domains&&k.domains[q.name])&&"inherited"===y.type)y=G(q.name,b),D=!0;return!0}return!1});!D&&!y&&(y=G(a,b));return{field:q,
domain:y}}})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(g,m,a){return a})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(g,m,a,b){var d={ar:1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,cs:1,da:1,de:1,"de-at":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-nz":1,es:1,"es-do":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hr:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sr:1,
"sr-cyrl":1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1};m.load=function(c,h,n){c=a.locale;var f=c in d;if(!f){var e=c.split("-");1<e.length&&e[0]in d&&(c=e[0],f=!0)}f?h(["moment/locale/"+c],function(){n(b)}):n(b)}})},"moment/moment":function(){(function(g,m){"object"===typeof exports&&"undefined"!==typeof module?module.exports=m():"function"===typeof define&&define.amd?define(m):g.moment=m()})(this,function(){function g(){return Hb.apply(null,arguments)}function m(k){return k instanceof Array||
"[object Array]"===Object.prototype.toString.call(k)}function a(k){return null!=k&&"[object Object]"===Object.prototype.toString.call(k)}function b(k){return k instanceof Date||"[object Date]"===Object.prototype.toString.call(k)}function d(k,a){var r=[],q;for(q=0;q<k.length;++q)r.push(a(k[q],q));return r}function c(k,a){return Object.prototype.hasOwnProperty.call(k,a)}function h(k,a){for(var r in a)c(a,r)&&(k[r]=a[r]);c(a,"toString")&&(k.toString=a.toString);c(a,"valueOf")&&(k.valueOf=a.valueOf);
return k}function n(k,a,r,q){return Ra(k,a,r,q,!0).utc()}function f(k){null==k._pf&&(k._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null});return k._pf}function e(k){if(null==k._isValid){var a=f(k),r=Ib.call(a.parsedDateParts,function(k){return null!=k}),r=!isNaN(k._d.getTime())&&0>a.overflow&&!a.empty&&!a.invalidMonth&&!a.invalidWeekday&&!a.nullInput&&!a.invalidFormat&&
!a.userInvalidated&&(!a.meridiem||a.meridiem&&r);k._strict&&(r=r&&0===a.charsLeftOver&&0===a.unusedTokens.length&&void 0===a.bigHour);if(null==Object.isFrozen||!Object.isFrozen(k))k._isValid=r;else return r}return k._isValid}function p(k){var a=n(NaN);null!=k?h(f(a),k):f(a).userInvalidated=!0;return a}function s(k){return void 0===k}function u(k,a){var r,q,y;s(a._isAMomentObject)||(k._isAMomentObject=a._isAMomentObject);s(a._i)||(k._i=a._i);s(a._f)||(k._f=a._f);s(a._l)||(k._l=a._l);s(a._strict)||
(k._strict=a._strict);s(a._tzm)||(k._tzm=a._tzm);s(a._isUTC)||(k._isUTC=a._isUTC);s(a._offset)||(k._offset=a._offset);s(a._pf)||(k._pf=f(a));s(a._locale)||(k._locale=a._locale);if(0<Cb.length)for(r in Cb)q=Cb[r],y=a[q],s(y)||(k[q]=y);return k}function t(k){u(this,k);this._d=new Date(null!=k._d?k._d.getTime():NaN);!1===Db&&(Db=!0,g.updateOffset(this),Db=!1)}function w(k){return k instanceof t||null!=k&&null!=k._isAMomentObject}function v(k){return 0>k?Math.ceil(k)||0:Math.floor(k)}function x(k){k=
+k;var a=0;0!==k&&isFinite(k)&&(a=v(k));return a}function B(k,a,r){var q=Math.min(k.length,a.length),y=Math.abs(k.length-a.length),b=0,D;for(D=0;D<q;D++)(r&&k[D]!==a[D]||!r&&x(k[D])!==x(a[D]))&&b++;return b+y}function A(k,a){var r=!0;return h(function(){null!=g.deprecationHandler&&g.deprecationHandler(null,k);if(r){for(var q=[],y,b=0;b<arguments.length;b++){y="";if("object"===typeof arguments[b]){y+="\n["+b+"] ";for(var D in arguments[0])y+=D+": "+arguments[0][D]+", ";y=y.slice(0,-2)}else y=arguments[b];
q.push(y)}Array.prototype.slice.call(q).join("");r=!1}return a.apply(this,arguments)},a)}function C(k,a){null!=g.deprecationHandler&&g.deprecationHandler(k,a);qb[k]||(qb[k]=!0)}function z(k){return k instanceof Function||"[object Function]"===Object.prototype.toString.call(k)}function F(k,r){var q=h({},k),y;for(y in r)c(r,y)&&(a(k[y])&&a(r[y])?(q[y]={},h(q[y],k[y]),h(q[y],r[y])):null!=r[y]?q[y]=r[y]:delete q[y]);for(y in k)c(k,y)&&(!c(r,y)&&a(k[y]))&&(q[y]=h({},q[y]));return q}function H(k){null!=
k&&this.set(k)}function J(k,a){var r=k.toLowerCase();Za[r]=Za[r+"s"]=Za[a]=k}function I(k){return"string"===typeof k?Za[k]||Za[k.toLowerCase()]:void 0}function K(k){var a={},r,q;for(q in k)c(k,q)&&(r=I(q))&&(a[r]=k[q]);return a}function M(k){var a=[],r;for(r in k)a.push({unit:r,priority:Fa[r]});a.sort(function(k,a){return k.priority-a.priority});return a}function L(k,a){return function(r){if(null!=r){if(this.isValid())this._d["set"+(this._isUTC?"UTC":"")+k](r);g.updateOffset(this,a);return this}return G(this,
k)}}function G(k,a){return k.isValid()?k._d["get"+(k._isUTC?"UTC":"")+a]():NaN}function O(k,a,r){var q=""+Math.abs(k);return(0<=k?r?"+":"":"-")+Math.pow(10,Math.max(0,a-q.length)).toString().substr(1)+q}function S(k,a,r,q){var y=q;"string"===typeof q&&(y=function(){return this[q]()});k&&($a[k]=y);a&&($a[a[0]]=function(){return O(y.apply(this,arguments),a[1],a[2])});r&&($a[r]=function(){return this.localeData().ordinal(y.apply(this,arguments),k)})}function U(k){var a=k.match(rb),r,q;r=0;for(q=a.length;r<
q;r++)a[r]=$a[a[r]]?$a[a[r]]:a[r].match(/\[[\s\S]/)?a[r].replace(/^\[|\]$/g,""):a[r].replace(/\\/g,"");return function(r){var y="",b;for(b=0;b<q;b++)y+=a[b]instanceof Function?a[b].call(r,k):a[b];return y}}function T(k,a){if(!k.isValid())return k.localeData().invalidDate();a=E(a,k.localeData());jb[a]=jb[a]||U(a);return jb[a](k)}function E(k,a){function r(k){return a.longDateFormat(k)||k}var q=5;for(kb.lastIndex=0;0<=q&&kb.test(k);)k=k.replace(kb,r),kb.lastIndex=0,q-=1;return k}function Q(k,a,r){Jb[k]=
z(a)?a:function(k,q){return k&&r?r:a}}function N(k){return q(k.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(k,a,r,q,y){return a||r||q||y}))}function q(k){return k.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function k(k,a){var r,q=a;"string"===typeof k&&(k=[k]);"number"===typeof a&&(q=function(k,r){r[a]=x(k)});for(r=0;r<k.length;r++)Qb[k[r]]=q}function r(a,r){k(a,function(k,a,q,y){q._w=q._w||{};r(k,q._w,q,y)})}function y(k,a){return(new Date(Date.UTC(k,a+1,0))).getUTCDate()}
function D(k,a){var r;if(!k.isValid())return k;if("string"===typeof a)if(/^\d+$/.test(a))a=x(a);else if(a=k.localeData().monthsParse(a),"number"!==typeof a)return k;r=Math.min(k.date(),y(k.year(),a));k._d["set"+(k._isUTC?"UTC":"")+"Month"](a,r);return k}function P(k){return null!=k?(D(this,k),g.updateOffset(this,!0),this):G(this,"Month")}function aa(){function k(a,r){return r.length-a.length}var a=[],r=[],y=[],b,D;for(b=0;12>b;b++)D=n([2E3,b]),a.push(this.monthsShort(D,"")),r.push(this.months(D,"")),
y.push(this.months(D,"")),y.push(this.monthsShort(D,""));a.sort(k);r.sort(k);y.sort(k);for(b=0;12>b;b++)a[b]=q(a[b]),r[b]=q(r[b]);for(b=0;24>b;b++)y[b]=q(y[b]);this._monthsShortRegex=this._monthsRegex=RegExp("^("+y.join("|")+")","i");this._monthsStrictRegex=RegExp("^("+r.join("|")+")","i");this._monthsShortStrictRegex=RegExp("^("+a.join("|")+")","i")}function X(k){return 0===k%4&&0!==k%100||0===k%400}function na(k,a,r,q,y,b,D){a=new Date(k,a,r,q,y,b,D);100>k&&(0<=k&&isFinite(a.getFullYear()))&&a.setFullYear(k);
return a}function Da(k){var a=new Date(Date.UTC.apply(null,arguments));100>k&&(0<=k&&isFinite(a.getUTCFullYear()))&&a.setUTCFullYear(k);return a}function Ea(k,a,r){r=7+a-r;return-((7+Da(k,0,r).getUTCDay()-a)%7)+r-1}function Ha(k,a,r,q,y){r=(7+r-q)%7;q=Ea(k,q,y);q=1+7*(a-1)+r+q;0>=q?(a=k-1,k=(X(a)?366:365)+q):q>(X(k)?366:365)?(a=k+1,k=q-(X(k)?366:365)):(a=k,k=q);return{year:a,dayOfYear:k}}function Aa(k,a,r){var q=Ea(k.year(),a,r),q=Math.floor((k.dayOfYear()-q-1)/7)+1;1>q?(k=k.year()-1,a=q+za(k,a,r)):
q>za(k.year(),a,r)?(a=q-za(k.year(),a,r),k=k.year()+1):(k=k.year(),a=q);return{week:a,year:k}}function za(k,a,r){var q=Ea(k,a,r);a=Ea(k+1,a,r);return((X(k)?366:365)-q+a)/7}function Ma(k,a,r){var q,y;k=k.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(q=0;7>q;++q)y=n([2E3,1]).day(q),this._minWeekdaysParse[q]=this.weekdaysMin(y,"").toLocaleLowerCase(),this._shortWeekdaysParse[q]=this.weekdaysShort(y,"").toLocaleLowerCase(),
this._weekdaysParse[q]=this.weekdays(y,"").toLocaleLowerCase()}if(r)a="dddd"===a?Ja.call(this._weekdaysParse,k):"ddd"===a?Ja.call(this._shortWeekdaysParse,k):Ja.call(this._minWeekdaysParse,k);else if("dddd"===a){a=Ja.call(this._weekdaysParse,k);if(-1!==a)return a;a=Ja.call(this._shortWeekdaysParse,k);if(-1!==a)return a;a=Ja.call(this._minWeekdaysParse,k)}else if("ddd"===a){a=Ja.call(this._shortWeekdaysParse,k);if(-1!==a)return a;a=Ja.call(this._weekdaysParse,k);if(-1!==a)return a;a=Ja.call(this._minWeekdaysParse,
k)}else{a=Ja.call(this._minWeekdaysParse,k);if(-1!==a)return a;a=Ja.call(this._weekdaysParse,k);if(-1!==a)return a;a=Ja.call(this._shortWeekdaysParse,k)}return-1!==a?a:null}function ka(){function k(a,r){return r.length-a.length}var a=[],r=[],y=[],b=[],D,c,e,d;for(D=0;7>D;D++)c=n([2E3,1]).day(D),e=this.weekdaysMin(c,""),d=this.weekdaysShort(c,""),c=this.weekdays(c,""),a.push(e),r.push(d),y.push(c),b.push(e),b.push(d),b.push(c);a.sort(k);r.sort(k);y.sort(k);b.sort(k);for(D=0;7>D;D++)r[D]=q(r[D]),y[D]=
q(y[D]),b[D]=q(b[D]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=RegExp("^("+b.join("|")+")","i");this._weekdaysStrictRegex=RegExp("^("+y.join("|")+")","i");this._weekdaysShortStrictRegex=RegExp("^("+r.join("|")+")","i");this._weekdaysMinStrictRegex=RegExp("^("+a.join("|")+")","i")}function ma(){return this.hours()%12||12}function pa(k,a){S(k,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),a)})}function ja(k,a){return a._meridiemParse}function wa(k){var a=
null;if(!Ga[k]&&"undefined"!==typeof module&&module&&module.exports)try{a=Nb._abbr,require("./locale/"+k),Ba(a)}catch(r){}return Ga[k]}function Ba(k,a){var r;k&&(r=s(a)?oa(k):xa(k,a))&&(Nb=r);return Nb._abbr}function xa(k,a){if(null!==a){var r=Tb;a.abbr=k;null!=Ga[k]?(C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
r=Ga[k]._config):null!=a.parentLocale&&(null!=Ga[a.parentLocale]?r=Ga[a.parentLocale]._config:C("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/"));Ga[k]=new H(F(r,a));Ba(k);return Ga[k]}delete Ga[k];return null}function oa(k){var a;k&&(k._locale&&k._locale._abbr)&&(k=k._locale._abbr);if(!k)return Nb;if(!m(k)){if(a=wa(k))return a;k=[k]}a:{a=0;for(var r,q,y,b;a<k.length;){b=(k[a]?k[a].toLowerCase().replace("_","-"):k[a]).split("-");
r=b.length;for(q=(q=k[a+1]?k[a+1].toLowerCase().replace("_","-"):k[a+1])?q.split("-"):null;0<r;){if(y=wa(b.slice(0,r).join("-"))){k=y;break a}if(q&&q.length>=r&&B(b,q,!0)>=r-1)break;r--}a++}k=null}return k}function sa(k){var a;if((a=k._a)&&-2===f(k).overflow){a=0>a[db]||11<a[db]?db:1>a[ab]||a[ab]>y(a[Wa],a[db])?ab:0>a[La]||24<a[La]||24===a[La]&&(0!==a[Xa]||0!==a[eb]||0!==a[sb])?La:0>a[Xa]||59<a[Xa]?Xa:0>a[eb]||59<a[eb]?eb:0>a[sb]||999<a[sb]?sb:-1;if(f(k)._overflowDayOfYear&&(a<Wa||a>ab))a=ab;f(k)._overflowWeeks&&
-1===a&&(a=Yb);f(k)._overflowWeekday&&-1===a&&(a=Zb);f(k).overflow=a}return k}function Ia(k){var a,r;a=k._i;var q=$b.exec(a)||ac.exec(a),y,b,D,c;if(q){f(k).iso=!0;a=0;for(r=Ob.length;a<r;a++)if(Ob[a][1].exec(q[1])){b=Ob[a][0];y=!1!==Ob[a][2];break}if(null==b)k._isValid=!1;else{if(q[3]){a=0;for(r=Rb.length;a<r;a++)if(Rb[a][1].exec(q[3])){D=(q[2]||" ")+Rb[a][0];break}if(null==D){k._isValid=!1;return}}if(!y&&null!=D)k._isValid=!1;else{if(q[4])if(bc.exec(q[4]))c="Z";else{k._isValid=!1;return}k._f=b+(D||
"")+(c||"");Qa(k)}}}else k._isValid=!1}function Sa(k){var a=cc.exec(k._i);null!==a?k._d=new Date(+a[1]):(Ia(k),!1===k._isValid&&(delete k._isValid,g.createFromInputFallback(k)))}function Ka(k,a,r){return null!=k?k:null!=a?a:r}function Oa(k){var a,r=[],q;if(!k._d){q=new Date(g.now());q=k._useUTC?[q.getUTCFullYear(),q.getUTCMonth(),q.getUTCDate()]:[q.getFullYear(),q.getMonth(),q.getDate()];if(k._w&&null==k._a[ab]&&null==k._a[db]){var y,b,D,c,e,d;y=k._w;if(null!=y.GG||null!=y.W||null!=y.E){if(e=1,d=
4,b=Ka(y.GG,k._a[Wa],Aa(ia(),1,4).year),D=Ka(y.W,1),c=Ka(y.E,1),1>c||7<c)a=!0}else if(e=k._locale._week.dow,d=k._locale._week.doy,b=Ka(y.gg,k._a[Wa],Aa(ia(),e,d).year),D=Ka(y.w,1),null!=y.d){if(c=y.d,0>c||6<c)a=!0}else if(null!=y.e){if(c=y.e+e,0>y.e||6<y.e)a=!0}else c=e;1>D||D>za(b,e,d)?f(k)._overflowWeeks=!0:null!=a?f(k)._overflowWeekday=!0:(a=Ha(b,D,c,e,d),k._a[Wa]=a.year,k._dayOfYear=a.dayOfYear)}if(k._dayOfYear){a=Ka(k._a[Wa],q[Wa]);if(k._dayOfYear>(X(a)?366:365))f(k)._overflowDayOfYear=!0;a=
Da(a,0,k._dayOfYear);k._a[db]=a.getUTCMonth();k._a[ab]=a.getUTCDate()}for(a=0;3>a&&null==k._a[a];++a)k._a[a]=r[a]=q[a];for(;7>a;a++)k._a[a]=r[a]=null==k._a[a]?2===a?1:0:k._a[a];24===k._a[La]&&(0===k._a[Xa]&&0===k._a[eb]&&0===k._a[sb])&&(k._nextDay=!0,k._a[La]=0);k._d=(k._useUTC?Da:na).apply(null,r);null!=k._tzm&&k._d.setUTCMinutes(k._d.getUTCMinutes()-k._tzm);k._nextDay&&(k._a[La]=24)}}function Qa(k){if(k._f===g.ISO_8601)Ia(k);else{k._a=[];f(k).empty=!0;var a=""+k._i,r,q,y,b,D,e=a.length,d=0;y=E(k._f,
k._locale).match(rb)||[];for(r=0;r<y.length;r++){b=y[r];if(q=(a.match(!c(Jb,b)?RegExp(N(b)):Jb[b](k._strict,k._locale))||[])[0])D=a.substr(0,a.indexOf(q)),0<D.length&&f(k).unusedInput.push(D),a=a.slice(a.indexOf(q)+q.length),d+=q.length;if($a[b]){if(q?f(k).empty=!1:f(k).unusedTokens.push(b),D=k,null!=q&&c(Qb,b))Qb[b](q,D._a,D,b)}else k._strict&&!q&&f(k).unusedTokens.push(b)}f(k).charsLeftOver=e-d;0<a.length&&f(k).unusedInput.push(a);12>=k._a[La]&&(!0===f(k).bigHour&&0<k._a[La])&&(f(k).bigHour=void 0);
f(k).parsedDateParts=k._a.slice(0);f(k).meridiem=k._meridiem;a=k._a;r=La;e=k._locale;y=k._a[La];d=k._meridiem;null!=d&&(null!=e.meridiemHour?y=e.meridiemHour(y,d):null!=e.isPM&&((e=e.isPM(d))&&12>y&&(y+=12),!e&&12===y&&(y=0)));a[r]=y;Oa(k);sa(k)}}function Ta(k){if(!k._d){var a=K(k._i);k._a=d([a.year,a.month,a.day||a.date,a.hour,a.minute,a.second,a.millisecond],function(k){return k&&parseInt(k,10)});Oa(k)}}function Ua(k){var a=k._i,r=k._f;k._locale=k._locale||oa(k._l);if(null===a||void 0===r&&""===
a)return p({nullInput:!0});"string"===typeof a&&(k._i=a=k._locale.preparse(a));if(w(a))return new t(sa(a));if(m(r)){var q,y,D;if(0===k._f.length)f(k).invalidFormat=!0,k._d=new Date(NaN);else{for(a=0;a<k._f.length;a++)if(r=0,q=u({},k),null!=k._useUTC&&(q._useUTC=k._useUTC),q._f=k._f[a],Qa(q),e(q)&&(r+=f(q).charsLeftOver,r+=10*f(q).unusedTokens.length,f(q).score=r,null==D||r<D))D=r,y=q;h(k,y||q)}}else b(a)?k._d=a:r?Qa(k):Va(k);e(k)||(k._d=null);return k}function Va(k){var a=k._i;void 0===a?k._d=new Date(g.now()):
b(a)?k._d=new Date(a.valueOf()):"string"===typeof a?Sa(k):m(a)?(k._a=d(a.slice(0),function(k){return parseInt(k,10)}),Oa(k)):"object"===typeof a?Ta(k):"number"===typeof a?k._d=new Date(a):g.createFromInputFallback(k)}function Ra(k,r,q,y,b){var D={};"boolean"===typeof q&&(y=q,q=void 0);var c;if(c=a(k))a:{for(var e in k){c=!1;break a}c=!0}if(c||m(k)&&0===k.length)k=void 0;D._isAMomentObject=!0;D._useUTC=D._isUTC=b;D._l=q;D._i=k;D._f=r;D._strict=y;k=new t(sa(Ua(D)));k._nextDay&&(k.add(1,"d"),k._nextDay=
void 0);return k}function ia(k,a,r,q){return Ra(k,a,r,q,!1)}function Y(k,a){var r,q;1===a.length&&m(a[0])&&(a=a[0]);if(!a.length)return ia();r=a[0];for(q=1;q<a.length;++q)if(!a[q].isValid()||a[q][k](r))r=a[q];return r}function qa(k){k=K(k);var a=k.year||0,r=k.quarter||0,q=k.month||0,y=k.week||0,b=k.day||0;this._milliseconds=+(k.millisecond||0)+1E3*(k.second||0)+6E4*(k.minute||0)+36E5*(k.hour||0);this._days=+b+7*y;this._months=+q+3*r+12*a;this._data={};this._locale=oa();this._bubble()}function ta(k){return k instanceof
qa}function ba(k){return 0>k?-1*Math.round(-1*k):Math.round(k)}function va(k,a){S(k,0,0,function(){var k=this.utcOffset(),r="+";0>k&&(k=-k,r="-");return r+O(~~(k/60),2)+a+O(~~k%60,2)})}function Ca(k,a){var r=(a||"").match(k)||[],r=((r[r.length-1]||[])+"").match(dc)||["-",0,0],q=+(60*r[1])+x(r[2]);return"+"===r[0]?q:-q}function ga(k,a){var r,q;return a._isUTC?(r=a.clone(),q=(w(k)||b(k)?k.valueOf():ia(k).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+q),g.updateOffset(r,!1),r):ia(k).local()}function fa(){return this.isValid()?
this._isUTC&&0===this._offset:!1}function V(k,a){var r=k,q=null;if(ta(k))r={ms:k._milliseconds,d:k._days,M:k._months};else if("number"===typeof k)r={},a?r[a]=k:r.milliseconds=k;else if(q=ec.exec(k))r="-"===q[1]?-1:1,r={y:0,d:x(q[ab])*r,h:x(q[La])*r,m:x(q[Xa])*r,s:x(q[eb])*r,ms:x(ba(1E3*q[sb]))*r};else if(q=fc.exec(k))r="-"===q[1]?-1:1,r={y:ca(q[2],r),M:ca(q[3],r),w:ca(q[4],r),d:ca(q[5],r),h:ca(q[6],r),m:ca(q[7],r),s:ca(q[8],r)};else if(null==r)r={};else if("object"===typeof r&&("from"in r||"to"in
r))q=ia(r.from),r=ia(r.to),!q.isValid()||!r.isValid()?q={milliseconds:0,months:0}:(r=ga(r,q),q.isBefore(r)?r=R(q,r):(r=R(r,q),r.milliseconds=-r.milliseconds,r.months=-r.months),q=r),r={},r.ms=q.milliseconds,r.M=q.months;r=new qa(r);ta(k)&&c(k,"_locale")&&(r._locale=k._locale);return r}function ca(k,a){var r=k&&parseFloat(k.replace(",","."));return(isNaN(r)?0:r)*a}function R(k,a){var r={milliseconds:0,months:0};r.months=a.month()-k.month()+12*(a.year()-k.year());k.clone().add(r.months,"M").isAfter(a)&&
--r.months;r.milliseconds=+a-+k.clone().add(r.months,"M");return r}function ea(k,a){return function(r,q){var y;null!==q&&!isNaN(+q)&&(C(a,"moment()."+a+"(period, number) is deprecated. Please use moment()."+a+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),y=r,r=q,q=y);y=V("string"===typeof r?+r:r,q);ha(this,y,k);return this}}function ha(k,a,r,q){var y=a._milliseconds,b=ba(a._days);a=ba(a._months);if(k.isValid()){q=null==q?!0:q;y&&k._d.setTime(k._d.valueOf()+
y*r);if(b&&(y=G(k,"Date")+b*r,k.isValid()))k._d["set"+(k._isUTC?"UTC":"")+"Date"](y);a&&D(k,G(k,"Month")+a*r);q&&g.updateOffset(k,b||a)}}function la(k){if(void 0===k)return this._locale._abbr;k=oa(k);null!=k&&(this._locale=k);return this}function Z(){return this._locale}function da(k,a){S(0,[k,k.length],0,a)}function W(k,a,r,q,y){var b;if(null==k)return Aa(this,q,y).year;b=za(k,q,y);a>b&&(a=b);k=Ha(k,a,r,q,y);k=Da(k.year,0,k.dayOfYear);this.year(k.getUTCFullYear());this.month(k.getUTCMonth());this.date(k.getUTCDate());
return this}function Pb(k,a){a[sb]=x(1E3*("0."+k))}function Kb(k){return k}function tb(k,a,r,q){var y=oa();a=n().set(q,a);return y[r](a,k)}function Lb(k,a,r){"number"===typeof k&&(a=k,k=void 0);k=k||"";if(null!=a)return tb(k,a,r,"month");var q=[];for(a=0;12>a;a++)q[a]=tb(k,a,r,"month");return q}function Eb(k,a,r,q){"boolean"!==typeof k&&(r=a=k,k=!1);"number"===typeof a&&(r=a,a=void 0);a=a||"";var y=oa();k=k?y._week.dow:0;if(null!=r)return tb(a,(r+k)%7,q,"day");y=[];for(r=0;7>r;r++)y[r]=tb(a,(r+k)%
7,q,"day");return y}function Mb(k,a,r,q){a=V(a,r);k._milliseconds+=q*a._milliseconds;k._days+=q*a._days;k._months+=q*a._months;return k._bubble()}function Ya(k){return function(){return this.as(k)}}function bb(k){return function(){return this._data[k]}}function Fb(k,a,r,q,y){return y.relativeTime(a||1,!!r,k,q)}function Pa(){var k=Sb(this._milliseconds)/1E3,a=Sb(this._days),r=Sb(this._months),q,y,b;q=v(k/60);y=v(q/60);k%=60;q%=60;b=v(r/12);var r=r%12,D=this.asSeconds();return!D?"P0D":(0>D?"-":"")+
"P"+(b?b+"Y":"")+(r?r+"M":"")+(a?a+"D":"")+(y||q||k?"T":"")+(y?y+"H":"")+(q?q+"M":"")+(k?k+"S":"")}var Hb,Ib;Ib=Array.prototype.some?Array.prototype.some:function(k){for(var a=Object(this),r=a.length>>>0,q=0;q<r;q++)if(q in a&&k.call(this,a[q],q,a))return!0;return!1};var Cb=g.momentProperties=[],Db=!1,qb={};g.suppressDeprecationWarnings=!1;g.deprecationHandler=null;var ub;ub=Object.keys?Object.keys:function(k){var a,r=[];for(a in k)c(k,a)&&r.push(a);return r};var Za={},Fa={},rb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
kb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,jb={},$a={},vb=/\d/,Na=/\d\d/,wb=/\d{3}/,xb=/\d{4}/,fb=/[+-]?\d{6}/,ua=/\d\d?/,yb=/\d\d\d\d?/,zb=/\d\d\d\d\d\d?/,lb=/\d{1,3}/,mb=/\d{1,4}/,gb=/[+-]?\d{1,6}/,Gb=/\d+/,hb=/[+-]?\d+/,Ab=/Z|[+-]\d\d:?\d\d/gi,nb=/Z|[+-]\d\d(?::?\d\d)?/gi,Bb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Jb={},Qb={},Wa=0,db=1,ab=2,La=3,Xa=4,eb=5,sb=6,Yb=7,Zb=8,Ja;Ja=Array.prototype.indexOf?Array.prototype.indexOf:
function(k){var a;for(a=0;a<this.length;++a)if(this[a]===k)return a;return-1};S("M",["MM",2],"Mo",function(){return this.month()+1});S("MMM",0,0,function(k){return this.localeData().monthsShort(this,k)});S("MMMM",0,0,function(k){return this.localeData().months(this,k)});J("month","M");Fa.month=8;Q("M",ua);Q("MM",ua,Na);Q("MMM",function(k,a){return a.monthsShortRegex(k)});Q("MMMM",function(k,a){return a.monthsRegex(k)});k(["M","MM"],function(k,a){a[db]=x(k)-1});k(["MMM","MMMM"],function(k,a,r,q){q=
r._locale.monthsParse(k,q,r._strict);null!=q?a[db]=q:f(r).invalidMonth=k});var Ub=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;S("Y",0,0,function(){var k=this.year();return 9999>=k?""+k:"+"+k});S(0,["YY",2],0,function(){return this.year()%100});S(0,["YYYY",4],0,"year");S(0,["YYYYY",5],0,"year");S(0,["YYYYYY",6,!0],0,"year");J("year","y");Fa.year=1;Q("Y",hb);Q("YY",ua,Na);Q("YYYY",mb,xb);Q("YYYYY",gb,fb);Q("YYYYYY",gb,fb);k(["YYYYY","YYYYYY"],Wa);k("YYYY",function(k,a){a[Wa]=2===k.length?g.parseTwoDigitYear(k):
x(k)});k("YY",function(k,a){a[Wa]=g.parseTwoDigitYear(k)});k("Y",function(k,a){a[Wa]=parseInt(k,10)});g.parseTwoDigitYear=function(k){return x(k)+(68<x(k)?1900:2E3)};var Vb=L("FullYear",!0);S("w",["ww",2],"wo","week");S("W",["WW",2],"Wo","isoWeek");J("week","w");J("isoWeek","W");Fa.week=5;Fa.isoWeek=5;Q("w",ua);Q("ww",ua,Na);Q("W",ua);Q("WW",ua,Na);r(["w","ww","W","WW"],function(k,a,r,q){a[q.substr(0,1)]=x(k)});S("d",0,"do","day");S("dd",0,0,function(k){return this.localeData().weekdaysMin(this,k)});
S("ddd",0,0,function(k){return this.localeData().weekdaysShort(this,k)});S("dddd",0,0,function(k){return this.localeData().weekdays(this,k)});S("e",0,0,"weekday");S("E",0,0,"isoWeekday");J("day","d");J("weekday","e");J("isoWeekday","E");Fa.day=11;Fa.weekday=11;Fa.isoWeekday=11;Q("d",ua);Q("e",ua);Q("E",ua);Q("dd",function(k,a){return a.weekdaysMinRegex(k)});Q("ddd",function(k,a){return a.weekdaysShortRegex(k)});Q("dddd",function(k,a){return a.weekdaysRegex(k)});r(["dd","ddd","dddd"],function(k,a,
r,q){q=r._locale.weekdaysParse(k,q,r._strict);null!=q?a.d=q:f(r).invalidWeekday=k});r(["d","e","E"],function(k,a,r,q){a[q]=x(k)});S("H",["HH",2],0,"hour");S("h",["hh",2],0,ma);S("k",["kk",2],0,function(){return this.hours()||24});S("hmm",0,0,function(){return""+ma.apply(this)+O(this.minutes(),2)});S("hmmss",0,0,function(){return""+ma.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)});S("Hmm",0,0,function(){return""+this.hours()+O(this.minutes(),2)});S("Hmmss",0,0,function(){return""+this.hours()+
O(this.minutes(),2)+O(this.seconds(),2)});pa("a",!0);pa("A",!1);J("hour","h");Fa.hour=13;Q("a",ja);Q("A",ja);Q("H",ua);Q("h",ua);Q("HH",ua,Na);Q("hh",ua,Na);Q("hmm",yb);Q("hmmss",zb);Q("Hmm",yb);Q("Hmmss",zb);k(["H","HH"],La);k(["a","A"],function(k,a,r){r._isPm=r._locale.isPM(k);r._meridiem=k});k(["h","hh"],function(k,a,r){a[La]=x(k);f(r).bigHour=!0});k("hmm",function(k,a,r){var q=k.length-2;a[La]=x(k.substr(0,q));a[Xa]=x(k.substr(q));f(r).bigHour=!0});k("hmmss",function(k,a,r){var q=k.length-4,y=
k.length-2;a[La]=x(k.substr(0,q));a[Xa]=x(k.substr(q,2));a[eb]=x(k.substr(y));f(r).bigHour=!0});k("Hmm",function(k,a,r){r=k.length-2;a[La]=x(k.substr(0,r));a[Xa]=x(k.substr(r))});k("Hmmss",function(k,a,r){r=k.length-4;var q=k.length-2;a[La]=x(k.substr(0,r));a[Xa]=x(k.substr(r,2));a[eb]=x(k.substr(q))});var gc=L("Hours",!0),Tb={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",
LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",ordinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),meridiemParse:/[ap]\.?m?\.?/i},Ga={},Nb,$b=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,ac=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,
bc=/Z|[+-]\d\d(?::?\d\d)?/,Ob=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Rb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",
/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],cc=/^\/?Date\((\-?\d+)/i;g.createFromInputFallback=A("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(k){k._d=
new Date(k._i+(k._useUTC?" UTC":""))});g.ISO_8601=function(){};var hc=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var k=ia.apply(null,arguments);return this.isValid()&&k.isValid()?k<this?this:k:p()}),ic=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var k=ia.apply(null,arguments);return this.isValid()&&k.isValid()?k>this?this:k:p()});va("Z",":");va("ZZ","");Q("Z",
nb);Q("ZZ",nb);k(["Z","ZZ"],function(k,a,r){r._useUTC=!0;r._tzm=Ca(nb,k)});var dc=/([\+\-]|\d\d)/gi;g.updateOffset=function(){};var ec=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,fc=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;V.fn=qa.prototype;var jc=ea(1,"add"),kc=ea(-1,"subtract");g.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";g.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Wb=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",
function(k){return void 0===k?this.localeData():this.locale(k)});S(0,["gg",2],0,function(){return this.weekYear()%100});S(0,["GG",2],0,function(){return this.isoWeekYear()%100});da("gggg","weekYear");da("ggggg","weekYear");da("GGGG","isoWeekYear");da("GGGGG","isoWeekYear");J("weekYear","gg");J("isoWeekYear","GG");Fa.weekYear=1;Fa.isoWeekYear=1;Q("G",hb);Q("g",hb);Q("GG",ua,Na);Q("gg",ua,Na);Q("GGGG",mb,xb);Q("gggg",mb,xb);Q("GGGGG",gb,fb);Q("ggggg",gb,fb);r(["gggg","ggggg","GGGG","GGGGG"],function(k,
a,r,q){a[q.substr(0,2)]=x(k)});r(["gg","GG"],function(k,a,r,q){a[q]=g.parseTwoDigitYear(k)});S("Q",0,"Qo","quarter");J("quarter","Q");Fa.quarter=7;Q("Q",vb);k("Q",function(k,a){a[db]=3*(x(k)-1)});S("D",["DD",2],"Do","date");J("date","D");Fa.date=9;Q("D",ua);Q("DD",ua,Na);Q("Do",function(k,a){return k?a._ordinalParse:a._ordinalParseLenient});k(["D","DD"],ab);k("Do",function(k,a){a[ab]=x(k.match(ua)[0],10)});var Xb=L("Date",!0);S("DDD",["DDDD",3],"DDDo","dayOfYear");J("dayOfYear","DDD");Fa.dayOfYear=
4;Q("DDD",lb);Q("DDDD",wb);k(["DDD","DDDD"],function(k,a,r){r._dayOfYear=x(k)});S("m",["mm",2],0,"minute");J("minute","m");Fa.minute=14;Q("m",ua);Q("mm",ua,Na);k(["m","mm"],Xa);var lc=L("Minutes",!1);S("s",["ss",2],0,"second");J("second","s");Fa.second=15;Q("s",ua);Q("ss",ua,Na);k(["s","ss"],eb);var mc=L("Seconds",!1);S("S",0,0,function(){return~~(this.millisecond()/100)});S(0,["SS",2],0,function(){return~~(this.millisecond()/10)});S(0,["SSS",3],0,"millisecond");S(0,["SSSS",4],0,function(){return 10*
this.millisecond()});S(0,["SSSSS",5],0,function(){return 100*this.millisecond()});S(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});S(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});S(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});S(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});J("millisecond","ms");Fa.millisecond=16;Q("S",lb,vb);Q("SS",lb,Na);Q("SSS",lb,wb);var cb;for(cb="SSSS";9>=cb.length;cb+="S")Q(cb,Gb);for(cb="S";9>=cb.length;cb+="S")k(cb,
Pb);var nc=L("Milliseconds",!1);S("z",0,0,"zoneAbbr");S("zz",0,0,"zoneName");var $=t.prototype;$.add=jc;$.calendar=function(k,a){var r=k||ia(),q=ga(r,this).startOf("day"),q=g.calendarFormat(this,q)||"sameElse",y=a&&(z(a[q])?a[q].call(this,r):a[q]);return this.format(y||this.localeData().calendar(q,this,ia(r)))};$.clone=function(){return new t(this)};$.diff=function(k,a,r){var q;if(!this.isValid())return NaN;k=ga(k,this);if(!k.isValid())return NaN;q=6E4*(k.utcOffset()-this.utcOffset());a=I(a);if("year"===
a||"month"===a||"quarter"===a){q=12*(k.year()-this.year())+(k.month()-this.month());var y=this.clone().add(q,"months"),b;0>k-y?(b=this.clone().add(q-1,"months"),k=(k-y)/(y-b)):(b=this.clone().add(q+1,"months"),k=(k-y)/(b-y));k=-(q+k)||0;"quarter"===a?k/=3:"year"===a&&(k/=12)}else k=this-k,k="second"===a?k/1E3:"minute"===a?k/6E4:"hour"===a?k/36E5:"day"===a?(k-q)/864E5:"week"===a?(k-q)/6048E5:k;return r?k:v(k)};$.endOf=function(k){k=I(k);if(void 0===k||"millisecond"===k)return this;"date"===k&&(k="day");
return this.startOf(k).add(1,"isoWeek"===k?"week":k).subtract(1,"ms")};$.format=function(k){k||(k=this.isUtc()?g.defaultFormatUtc:g.defaultFormat);k=T(this,k);return this.localeData().postformat(k)};$.from=function(k,a){return this.isValid()&&(w(k)&&k.isValid()||ia(k).isValid())?V({to:this,from:k}).locale(this.locale()).humanize(!a):this.localeData().invalidDate()};$.fromNow=function(k){return this.from(ia(),k)};$.to=function(k,a){return this.isValid()&&(w(k)&&k.isValid()||ia(k).isValid())?V({from:this,
to:k}).locale(this.locale()).humanize(!a):this.localeData().invalidDate()};$.toNow=function(k){return this.to(ia(),k)};$.get=function(k){k=I(k);return z(this[k])?this[k]():this};$.invalidAt=function(){return f(this).overflow};$.isAfter=function(k,a){var r=w(k)?k:ia(k);if(!this.isValid()||!r.isValid())return!1;a=I(!s(a)?a:"millisecond");return"millisecond"===a?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(a).valueOf()};$.isBefore=function(k,a){var r=w(k)?k:ia(k);if(!this.isValid()||!r.isValid())return!1;
a=I(!s(a)?a:"millisecond");return"millisecond"===a?this.valueOf()<r.valueOf():this.clone().endOf(a).valueOf()<r.valueOf()};$.isBetween=function(k,a,r,q){q=q||"()";return("("===q[0]?this.isAfter(k,r):!this.isBefore(k,r))&&(")"===q[1]?this.isBefore(a,r):!this.isAfter(a,r))};$.isSame=function(k,a){var r=w(k)?k:ia(k);if(!this.isValid()||!r.isValid())return!1;a=I(a||"millisecond");if("millisecond"===a)return this.valueOf()===r.valueOf();r=r.valueOf();return this.clone().startOf(a).valueOf()<=r&&r<=this.clone().endOf(a).valueOf()};
$.isSameOrAfter=function(k,a){return this.isSame(k,a)||this.isAfter(k,a)};$.isSameOrBefore=function(k,a){return this.isSame(k,a)||this.isBefore(k,a)};$.isValid=function(){return e(this)};$.lang=Wb;$.locale=la;$.localeData=Z;$.max=ic;$.min=hc;$.parsingFlags=function(){return h({},f(this))};$.set=function(k,a){if("object"===typeof k){k=K(k);for(var r=M(k),q=0;q<r.length;q++)this[r[q].unit](k[r[q].unit])}else if(k=I(k),z(this[k]))return this[k](a);return this};$.startOf=function(k){k=I(k);switch(k){case "year":this.month(0);
case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===k&&this.weekday(0);"isoWeek"===k&&this.isoWeekday(1);"quarter"===k&&this.month(3*Math.floor(this.month()/3));return this};$.subtract=kc;$.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};$.toObject=function(){return{years:this.year(),
months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};$.toDate=function(){return new Date(this.valueOf())};$.toISOString=function(){var k=this.clone().utc();return 0<k.year()&&9999>=k.year()?z(Date.prototype.toISOString)?this.toDate().toISOString():T(k,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):T(k,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")};$.toJSON=function(){return this.isValid()?this.toISOString():null};$.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};
$.unix=function(){return Math.floor(this.valueOf()/1E3)};$.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};$.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};$.year=Vb;$.isLeapYear=function(){return X(this.year())};$.weekYear=function(k){return W.call(this,k,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};$.isoWeekYear=function(k){return W.call(this,k,this.isoWeek(),this.isoWeekday(),
1,4)};$.quarter=$.quarters=function(k){return null==k?Math.ceil((this.month()+1)/3):this.month(3*(k-1)+this.month()%3)};$.month=P;$.daysInMonth=function(){return y(this.year(),this.month())};$.week=$.weeks=function(k){var a=this.localeData().week(this);return null==k?a:this.add(7*(k-a),"d")};$.isoWeek=$.isoWeeks=function(k){var a=Aa(this,1,4).week;return null==k?a:this.add(7*(k-a),"d")};$.weeksInYear=function(){var k=this.localeData()._week;return za(this.year(),k.dow,k.doy)};$.isoWeeksInYear=function(){return za(this.year(),
1,4)};$.date=Xb;$.day=$.days=function(k){if(!this.isValid())return null!=k?this:NaN;var a=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=k){var r=this.localeData();"string"===typeof k&&(isNaN(k)?(k=r.weekdaysParse(k),k="number"===typeof k?k:null):k=parseInt(k,10));return this.add(k-a,"d")}return a};$.weekday=function(k){if(!this.isValid())return null!=k?this:NaN;var a=(this.day()+7-this.localeData()._week.dow)%7;return null==k?a:this.add(k-a,"d")};$.isoWeekday=function(k){if(!this.isValid())return null!=
k?this:NaN;if(null!=k){var a=this.localeData();k="string"===typeof k?a.weekdaysParse(k)%7||7:isNaN(k)?null:k;return this.day(this.day()%7?k:k-7)}return this.day()||7};$.dayOfYear=function(k){var a=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==k?a:this.add(k-a,"d")};$.hour=$.hours=gc;$.minute=$.minutes=lc;$.second=$.seconds=mc;$.millisecond=$.milliseconds=nc;$.utcOffset=function(k,a){var r=this._offset||0,q;return!this.isValid()?null!=k?this:NaN:null!=
k?("string"===typeof k?k=Ca(nb,k):16>Math.abs(k)&&(k*=60),!this._isUTC&&a&&(q=15*-Math.round(this._d.getTimezoneOffset()/15)),this._offset=k,this._isUTC=!0,null!=q&&this.add(q,"m"),r!==k&&(!a||this._changeInProgress?ha(this,V(k-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,g.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:15*-Math.round(this._d.getTimezoneOffset()/15)};$.utc=function(k){return this.utcOffset(0,k)};$.local=function(k){this._isUTC&&(this.utcOffset(0,
k),this._isUTC=!1,k&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};$.parseZone=function(){this._tzm?this.utcOffset(this._tzm):"string"===typeof this._i&&(0===Ca(Ab,this._i)?this.utcOffset(0,!0):this.utcOffset(Ca(Ab,this._i)));return this};$.hasAlignedHourOffset=function(k){if(!this.isValid())return!1;k=k?ia(k).utcOffset():0;return 0===(this.utcOffset()-k)%60};$.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};
$.isLocal=function(){return this.isValid()?!this._isUTC:!1};$.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};$.isUtc=fa;$.isUTC=fa;$.zoneAbbr=function(){return this._isUTC?"UTC":""};$.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};$.dates=A("dates accessor is deprecated. Use date instead.",Xb);$.months=A("months accessor is deprecated. Use month instead",P);$.years=A("years accessor is deprecated. Use year instead",Vb);$.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",
function(k,a){return null!=k?("string"!==typeof k&&(k=-k),this.utcOffset(k,a),this):-this.utcOffset()});$.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!s(this._isDSTShifted))return this._isDSTShifted;var k={};u(k,this);k=Ua(k);if(k._a){var a=k._isUTC?n(k._a):ia(k._a);this._isDSTShifted=this.isValid()&&0<B(k._a,a.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var ya=H.prototype;ya.calendar=
function(k,a,r){k=this._calendar[k]||this._calendar.sameElse;return z(k)?k.call(a,r):k};ya.longDateFormat=function(k){var a=this._longDateFormat[k],r=this._longDateFormat[k.toUpperCase()];if(a||!r)return a;this._longDateFormat[k]=r.replace(/MMMM|MM|DD|dddd/g,function(k){return k.slice(1)});return this._longDateFormat[k]};ya.invalidDate=function(){return this._invalidDate};ya.ordinal=function(k){return this._ordinal.replace("%d",k)};ya.preparse=Kb;ya.postformat=Kb;ya.relativeTime=function(k,a,r,q){var y=
this._relativeTime[r];return z(y)?y(k,a,r,q):y.replace(/%d/i,k)};ya.pastFuture=function(k,a){var r=this._relativeTime[0<k?"future":"past"];return z(r)?r(a):r.replace(/%s/i,a)};ya.set=function(k){var a,r;for(r in k)a=k[r],z(a)?this[r]=a:this["_"+r]=a;this._config=k;this._ordinalParseLenient=RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)};ya.months=function(k,a){return!k?this._months:m(this._months)?this._months[k.month()]:this._months[(this._months.isFormat||Ub).test(a)?"format":"standalone"][k.month()]};
ya.monthsShort=function(k,a){return!k?this._monthsShort:m(this._monthsShort)?this._monthsShort[k.month()]:this._monthsShort[Ub.test(a)?"format":"standalone"][k.month()]};ya.monthsParse=function(k,a,r){var q,y;if(this._monthsParseExact){a:{k=k.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(q=0;12>q;++q)y=n([2E3,q]),this._shortMonthsParse[q]=this.monthsShort(y,"").toLocaleLowerCase(),this._longMonthsParse[q]=this.months(y,"").toLocaleLowerCase()}if(r)a=
"MMM"===a?Ja.call(this._shortMonthsParse,k):Ja.call(this._longMonthsParse,k);else if("MMM"===a){a=Ja.call(this._shortMonthsParse,k);if(-1!==a)break a;a=Ja.call(this._longMonthsParse,k)}else{a=Ja.call(this._longMonthsParse,k);if(-1!==a)break a;a=Ja.call(this._shortMonthsParse,k)}a=-1!==a?a:null}return a}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(q=0;12>q;q++)if(y=n([2E3,q]),r&&!this._longMonthsParse[q]&&(this._longMonthsParse[q]=RegExp("^"+this.months(y,
"").replace(".","")+"$","i"),this._shortMonthsParse[q]=RegExp("^"+this.monthsShort(y,"").replace(".","")+"$","i")),!r&&!this._monthsParse[q]&&(y="^"+this.months(y,"")+"|^"+this.monthsShort(y,""),this._monthsParse[q]=RegExp(y.replace(".",""),"i")),r&&"MMMM"===a&&this._longMonthsParse[q].test(k)||r&&"MMM"===a&&this._shortMonthsParse[q].test(k)||!r&&this._monthsParse[q].test(k))return q};ya.monthsRegex=function(k){if(this._monthsParseExact)return c(this,"_monthsRegex")||aa.call(this),k?this._monthsStrictRegex:
this._monthsRegex;c(this,"_monthsRegex")||(this._monthsRegex=Bb);return this._monthsStrictRegex&&k?this._monthsStrictRegex:this._monthsRegex};ya.monthsShortRegex=function(k){if(this._monthsParseExact)return c(this,"_monthsRegex")||aa.call(this),k?this._monthsShortStrictRegex:this._monthsShortRegex;c(this,"_monthsShortRegex")||(this._monthsShortRegex=Bb);return this._monthsShortStrictRegex&&k?this._monthsShortStrictRegex:this._monthsShortRegex};ya.week=function(k){return Aa(k,this._week.dow,this._week.doy).week};
ya.firstDayOfYear=function(){return this._week.doy};ya.firstDayOfWeek=function(){return this._week.dow};ya.weekdays=function(k,a){return!k?this._weekdays:m(this._weekdays)?this._weekdays[k.day()]:this._weekdays[this._weekdays.isFormat.test(a)?"format":"standalone"][k.day()]};ya.weekdaysMin=function(k){return k?this._weekdaysMin[k.day()]:this._weekdaysMin};ya.weekdaysShort=function(k){return k?this._weekdaysShort[k.day()]:this._weekdaysShort};ya.weekdaysParse=function(k,a,r){var q,y;if(this._weekdaysParseExact)return Ma.call(this,
k,a,r);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(q=0;7>q;q++)if(y=n([2E3,1]).day(q),r&&!this._fullWeekdaysParse[q]&&(this._fullWeekdaysParse[q]=RegExp("^"+this.weekdays(y,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[q]=RegExp("^"+this.weekdaysShort(y,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[q]=RegExp("^"+this.weekdaysMin(y,"").replace(".",".?")+"$","i")),this._weekdaysParse[q]||(y="^"+
this.weekdays(y,"")+"|^"+this.weekdaysShort(y,"")+"|^"+this.weekdaysMin(y,""),this._weekdaysParse[q]=RegExp(y.replace(".",""),"i")),r&&"dddd"===a&&this._fullWeekdaysParse[q].test(k)||r&&"ddd"===a&&this._shortWeekdaysParse[q].test(k)||r&&"dd"===a&&this._minWeekdaysParse[q].test(k)||!r&&this._weekdaysParse[q].test(k))return q};ya.weekdaysRegex=function(k){if(this._weekdaysParseExact)return c(this,"_weekdaysRegex")||ka.call(this),k?this._weekdaysStrictRegex:this._weekdaysRegex;c(this,"_weekdaysRegex")||
(this._weekdaysRegex=Bb);return this._weekdaysStrictRegex&&k?this._weekdaysStrictRegex:this._weekdaysRegex};ya.weekdaysShortRegex=function(k){if(this._weekdaysParseExact)return c(this,"_weekdaysRegex")||ka.call(this),k?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Bb);return this._weekdaysShortStrictRegex&&k?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};ya.weekdaysMinRegex=function(k){if(this._weekdaysParseExact)return c(this,
"_weekdaysRegex")||ka.call(this),k?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Bb);return this._weekdaysMinStrictRegex&&k?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};ya.isPM=function(k){return"p"===(k+"").toLowerCase().charAt(0)};ya.meridiem=function(k,a,r){return 11<k?r?"pm":"PM":r?"am":"AM"};Ba("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(k){var a=k%10,a=1===x(k%100/10)?"th":1===a?"st":2===a?"nd":3===a?"rd":"th";
return k+a}});g.lang=A("moment.lang is deprecated. Use moment.locale instead.",Ba);g.langData=A("moment.langData is deprecated. Use moment.localeData instead.",oa);var ib=Math.abs,oc=Ya("ms"),pc=Ya("s"),qc=Ya("m"),rc=Ya("h"),sc=Ya("d"),tc=Ya("w"),uc=Ya("M"),vc=Ya("y"),wc=bb("milliseconds"),xc=bb("seconds"),yc=bb("minutes"),zc=bb("hours"),Ac=bb("days"),Bc=bb("months"),Cc=bb("years"),ob=Math.round,pb={s:45,m:45,h:22,d:26,M:11},Sb=Math.abs,ra=qa.prototype;ra.abs=function(){var k=this._data;this._milliseconds=
ib(this._milliseconds);this._days=ib(this._days);this._months=ib(this._months);k.milliseconds=ib(k.milliseconds);k.seconds=ib(k.seconds);k.minutes=ib(k.minutes);k.hours=ib(k.hours);k.months=ib(k.months);k.years=ib(k.years);return this};ra.add=function(k,a){return Mb(this,k,a,1)};ra.subtract=function(k,a){return Mb(this,k,a,-1)};ra.as=function(k){var a,r=this._milliseconds;k=I(k);if("month"===k||"year"===k)return a=this._days+r/864E5,a=this._months+4800*a/146097,"month"===k?a:a/12;a=this._days+Math.round(146097*
this._months/4800);switch(k){case "week":return a/7+r/6048E5;case "day":return a+r/864E5;case "hour":return 24*a+r/36E5;case "minute":return 1440*a+r/6E4;case "second":return 86400*a+r/1E3;case "millisecond":return Math.floor(864E5*a)+r;default:throw Error("Unknown unit "+k);}};ra.asMilliseconds=oc;ra.asSeconds=pc;ra.asMinutes=qc;ra.asHours=rc;ra.asDays=sc;ra.asWeeks=tc;ra.asMonths=uc;ra.asYears=vc;ra.valueOf=function(){return this._milliseconds+864E5*this._days+2592E6*(this._months%12)+31536E6*x(this._months/
12)};ra._bubble=function(){var k=this._milliseconds,a=this._days,r=this._months,q=this._data;0<=k&&0<=a&&0<=r||0>=k&&0>=a&&0>=r||(k+=864E5*(0>146097*r/4800+a?Math.floor(146097*r/4800+a):Math.ceil(146097*r/4800+a)),r=a=0);q.milliseconds=k%1E3;k=v(k/1E3);q.seconds=k%60;k=v(k/60);q.minutes=k%60;k=v(k/60);q.hours=k%24;a+=v(k/24);k=v(4800*a/146097);r+=k;a-=0>146097*k/4800?Math.floor(146097*k/4800):Math.ceil(146097*k/4800);k=v(r/12);q.days=a;q.months=r%12;q.years=k;return this};ra.get=function(k){k=I(k);
return this[k+"s"]()};ra.milliseconds=wc;ra.seconds=xc;ra.minutes=yc;ra.hours=zc;ra.days=Ac;ra.weeks=function(){return v(this.days()/7)};ra.months=Bc;ra.years=Cc;ra.humanize=function(k){var a=this.localeData(),r;r=!k;var q=V(this).abs(),y=ob(q.as("s")),b=ob(q.as("m")),D=ob(q.as("h")),c=ob(q.as("d")),e=ob(q.as("M")),q=ob(q.as("y")),y=y<pb.s&&["s",y]||1>=b&&["m"]||b<pb.m&&["mm",b]||1>=D&&["h"]||D<pb.h&&["hh",D]||1>=c&&["d"]||c<pb.d&&["dd",c]||1>=e&&["M"]||e<pb.M&&["MM",e]||1>=q&&["y"]||["yy",q];y[2]=
r;y[3]=0<+this;y[4]=a;r=Fb.apply(null,y);k&&(r=a.pastFuture(+this,r));return a.postformat(r)};ra.toISOString=Pa;ra.toString=Pa;ra.toJSON=Pa;ra.locale=la;ra.localeData=Z;ra.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Pa);ra.lang=Wb;S("X",0,0,"unix");S("x",0,0,"valueOf");Q("x",hb);Q("X",/[+-]?\d+(\.\d{1,3})?/);k("X",function(k,a,r){r._d=new Date(1E3*parseFloat(k,10))});k("x",function(k,a,r){r._d=new Date(x(k))});g.version="2.15.2";Hb=ia;g.fn=$;
g.min=function(){var k=[].slice.call(arguments,0);return Y("isBefore",k)};g.max=function(){var k=[].slice.call(arguments,0);return Y("isAfter",k)};g.now=function(){return Date.now?Date.now():+new Date};g.utc=n;g.unix=function(k){return ia(1E3*k)};g.months=function(k,a){return Lb(k,a,"months")};g.isDate=b;g.locale=Ba;g.invalid=p;g.duration=V;g.isMoment=w;g.weekdays=function(k,a,r){return Eb(k,a,r,"weekdays")};g.parseZone=function(){return ia.apply(null,arguments).parseZone()};g.localeData=oa;g.isDuration=
ta;g.monthsShort=function(k,a){return Lb(k,a,"monthsShort")};g.weekdaysMin=function(k,a,r){return Eb(k,a,r,"weekdaysMin")};g.defineLocale=xa;g.updateLocale=function(k,a){if(null!=a){var r;r=Tb;null!=Ga[k]&&(r=Ga[k]._config);a=F(r,a);r=new H(a);r.parentLocale=Ga[k];Ga[k]=r;Ba(k)}else null!=Ga[k]&&(null!=Ga[k].parentLocale?Ga[k]=Ga[k].parentLocale:null!=Ga[k]&&delete Ga[k]);return Ga[k]};g.locales=function(){return ub(Ga)};g.weekdaysShort=function(k,a,r){return Eb(k,a,r,"weekdaysShort")};g.normalizeUnits=
I;g.relativeTimeRounding=function(k){return void 0===k?ob:"function"===typeof k?(ob=k,!0):!1};g.relativeTimeThreshold=function(k,a){if(void 0===pb[k])return!1;if(void 0===a)return pb[k];pb[k]=a;return!0};g.calendarFormat=function(k,a){var r=k.diff(a,"days",!0);return-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse"};g.prototype=$;return g})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(g,m){return function(){function a(a){void 0===
a&&(a=[]);this._elements=a}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(a){return this._elements[a]};a.prototype.toArray=function(){for(var a=[],d=0;d<this.length();d++)a.push(this.get(d));return a};return a}()})},"esri/arcade/ImmutablePointArray":function(){define("require exports ../core/tsSupport/extendsHelper ./ImmutableArray ../geometry/Point ../kernel".split(" "),function(g,m,a,b,d,c){var h=0===c.version.indexOf("4.");return function(b){function c(a,d,
f,h,g,m){b.call(this,a);this._lazyPt=[];this._hasM=this._hasZ=!1;this._spRef=d;this._hasZ=f;this._hasM=h;this._cacheId=g;this._partId=m}a(c,b);c.prototype.get=function(a){if(void 0===this._lazyPt[a]){var b=this._elements[a];if(void 0===b)return;var c=this._hasZ,f=this._hasM,n=null,n=c&&!f?new d(b[0],b[1],b[2],void 0,this._spRef):f&&c?new d(b[0],b[1],void 0,b[2],this._spRef):c&&f?new d(b[0],b[1],b[2],b[3],this._spRef):new d(b[0],b[1],this._spRef);h?n.cache._arcadeCacheId=this._cacheId.toString()+"-"+
this._partId.toString()+"-"+a.toString():n.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString());this._lazyPt[a]=n}return this._lazyPt[a]};c.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof c?!1:a.getUniqueHash()===this.getUniqueHash()};c.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return c}(b)})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(g,
m){function a(){this.constructor=g}for(var b in m)m.hasOwnProperty(b)&&(g[b]=m[b]);g.prototype=null===m?Object.create(m):(a.prototype=m.prototype,new a)}})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(g,m,a,b,d){return function(b){function h(a,d,e,p,h){b.call(this,a);this._lazyPath=[];this._hasM=this._hasZ=!1;this._hasZ=e;this._hasM=p;this._spRef=d;this._cacheId=h}a(h,b);h.prototype.get=
function(a){if(void 0===this._lazyPath[a]){var b=this._elements[a];if(void 0===b)return;this._lazyPath[a]=new d(b,this._spRef,this._hasZ,this._hasM,this._cacheId,a)}return this._lazyPath[a]};h.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof h?!1:a.getUniqueHash()===this.getUniqueHash()};h.prototype.getUniqueHash=function(){return this._cacheId.toString()};return h}(b)})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(g,m){return function(){return function(a,
b){this.context=this.definition=null;this.definition=a;this.context=b}}()})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(g,m){function a(a,b,c,e){void 0!==a.fmin&&(a.min=a.fmin);void 0!==a.fmax&&(a.max=a.fmax);return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function b(b,c,e){if(null!==e.localScope&&void 0!==e.localScope[b.toLowerCase()]){var d=e.localScope[b.toLowerCase()];if("FormulaFunction"===d.type||"any"===d.type)return void 0===
d.signature&&(d.signature={min:"0",max:"*"}),a(d.signature,b,c,e)}return void 0!==e.globalScope[b.toLowerCase()]&&(d=e.globalScope[b.toLowerCase()],"FormulaFunction"===d.type||"any"===d.type)?(void 0===d.signature&&(d.signature={min:"0",max:"*"}),a(d.signature,b,c,e)):-1}function d(a,b){void 0===b&&(b=!0);var c=u(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?u(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==
a.id.type?u(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?d(a.init,!1):"";case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)if(c=d(a.declarations[e],b),""!==c)return c;return"";case "ForInStatement":c=d(a.left,b);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return u(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return u(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return u(a,"SYNTAX","LEFTNOTVAR");
c=d(a.right,b);if(""!==c)break;c=d(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.test&&(c=d(a.test,b),""!==c))break;if(null!==a.init&&(c=d(a.init,b),""!==c))break;if(null!==a.update&&(c=d(a.update,b),""!==c))break;if(null!==a.body&&(c=d(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=d(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=d(a.consequent,!1),""!==c))break;if(null!==
a.alternate&&(c=d(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var f=[],e=0;e<a.body.length;e++)"EmptyStatement"!==a.body[e].type&&f.push(a.body[e]);a.body=f;for(e=0;e<a.body.length;e++)if(c=d(a.body[e],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?u(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?u(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):d(a.body,!1);case "ReturnStatement":return null!==a.argument?d(a.argument,b):"";case "UpdateExpression":return"Identifier"!==
a.argument.type&&"MemberExpression"!==a.argument.type?u(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):d(a.argument,b);case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return u(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=d(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return u(a,"SYNTAX","OPERATORNOTRECOGNISED")}return d(a.right,!1);case "ExpressionStatement":return d(a.expression,!1);
case "Identifier":c="";break;case "MemberExpression":c=d(a.object,b);if(""!==c)break;return!0===a.computed?d(a.property,b):"";case "Literal":return"";case "ThisExpression":return u(a,"SYNTAX","NOTSUPPORTED");case "CallExpression":if("Identifier"!==a.callee.type)return u(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(e=0;e<a.arguments.length;e++)if(c=d(a.arguments[e],b),""!==c)return c;return"";case "UnaryExpression":c=d(a.argument,b);break;case "BinaryExpression":c=d(a.left,b);if(""!==c)break;c=d(a.right,
b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return u(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=d(a.left,b);if(""!==c)break;c=d(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return u(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return u(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c=
"";for(e=0;e<a.elements.length&&!(c=d(a.elements[e],b),""!==c);e++);break;case "Array":return u(a,"SYNTAX","NOTSUPPORTED");case "ObjectExpression":c="";for(e=0;e<a.properties.length&&!(c="",null!==a.properties[e].key&&("Literal"!==a.properties[e].key.type&&"Identifier"!==a.properties[e].key.type&&(c=u(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[e].key.type&&(f=a.properties[e].key.value,"string"===typeof f||f instanceof String||(c=u(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")))),
""===c&&(c=d(a.properties[e],b)),""!==c);e++);break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return u(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=d(a.key,b),""!==c))break;c=d(a.value,b)}return c}catch(p){throw p;}}function c(a,d){var f=u(a,"SYNTAX","UNREOGNISED"),h=null,s="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return u(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");null!==d.localScope?void 0!==d.localScope[a.id.name.toLowerCase()]&&
a.id.name.toLowerCase():void 0!==d.globalScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase();var n=null===a.init?"":c(a.init,d);if(""!==n)return n;null===d.localScope?d.globalScope[a.id.name.toLowerCase()]={type:"any"}:d.localScope[a.id.name.toLowerCase()]={type:"any"};return"";case "FunctionDeclaration":h=e(a.id.name.toLowerCase(),a,d);s=p(a,d);if(""!==s)return s;if(null!==d.localScope)return u(a,"SYNTAX","GLOBALFUNCTIONSONLY");h.isnative=!1;d.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",
signature:[h]};return"";case "VariableDeclaration":for(var f="",g=0;g<a.declarations.length&&!(f=c(a.declarations[g],d),""!==f);g++);break;case "IfStatement":f=c(a.test,d);if(""!==f)break;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)return u(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==a.consequent&&(f=c(a.consequent,d),""!==f))break;if(null!==a.alternate&&(f=c(a.alternate,d),""!==f))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(g=
0;g<a.body.length;g++)if(f=c(a.body[g],d),""!==f)return f;return"";case "ReturnStatement":return null!==a.argument?c(a.argument,d):"";case "ForInStatement":if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return u(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return u(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return u(a,"SYNTAX","LEFTNOTVAR");f=c(a.left,d);if(""!==f)break;f=c(a.right,d);if(""!==f)break;f=c(a.body,d);if(""!==f)break;return"";
case "ForStatement":if(null!==a.init&&(f=c(a.init,d),""!==f))break;if(null!==a.test&&(f=c(a.test,d),""!==f))break;if(null!==a.body&&(f=c(a.body,d),""!==f))break;if(null!==a.update&&(f=c(a.update,d),""!==f))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type)return u(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var t=!1;if("MemberExpression"===a.argument.type)return c(a.argument,d);null!==
d.localScope&&void 0!==d.localScope[a.argument.name.toLowerCase()]&&(t=!0);void 0!==d.globalScope[a.argument.name.toLowerCase()]&&(t=!0);return!1===t?"Identifier "+a.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return u(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var v=c(a.right,d);if(""!==v)return v;t=!1;if("MemberExpression"===a.left.type)return v=c(a.left,d),""!==v?v:"";null!==d.localScope&&void 0!==d.localScope[a.left.name.toLowerCase()]&&
(t=!0);void 0!==d.globalScope[a.left.name.toLowerCase()]&&(t=!0);return!1===t?"Identifier "+a.left.name+" has not been declared.":"";case "ExpressionStatement":return c(a.expression,d);case "Identifier":var m=a.name.toLowerCase();if(null!==d.localScope&&void 0!==d.localScope[m])return"";f=void 0!==d.globalScope[m]?"":u(a,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":f=c(a.object,d);if(""!==f)break;return!0===a.computed?c(a.property,d):"";case "Literal":return"";case "ThisExpression":f=
u(a,"SYNTAX","NOTSUPPORTED");break;case "CallExpression":if("Identifier"!==a.callee.type)return u(a,"SYNTAX","ONLYNODESSUPPORTED");f="";for(g=0;g<a.arguments.length;g++)if(f=c(a.arguments[g],d),""!==f)return f;var w=b(a.callee.name,a.arguments,d);-1===w&&(f=u(a,"SYNTAX","NOTFOUND"));-2===w&&(f=u(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":f=c(a.argument,d);break;case "BinaryExpression":f=c(a.left,d);if(""!==f)break;f=c(a.right,d);if(""!==f)break;return"";case "LogicalExpression":f=
c(a.left,d);if(""!==f)break;if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)return u(a.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");f=c(a.right,d);if(""!==f)break;return"AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type?u(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return u(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":f="";for(g=0;g<a.elements.length&&!(f=c(a.elements[g],d),""!==f);g++);break;case "ObjectExpression":f=
"";for(g=0;g<a.properties.length;g++){f="";if(null!==a.properties[g].key&&("Literal"!==a.properties[g].key.type&&"Identifier"!==a.properties[g].key.type&&(f=u(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[g].key.type)){var L=a.properties[g].key.value;"string"===typeof L||L instanceof String||(f=u(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===f&&(f=c(a.properties[g],d));if(""!==f)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return u(a,"SYNTAX",
"ONLYLITERAL");if("Identifier"!==a.key.type&&(f=c(a.key,d),""!==f))break;f=c(a.value,d);break;case "Array":return u(a,"SYNTAX","NOTSUPPORTED")}return f}catch(G){throw G;}}function h(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?h(a.init,b):c;case "FunctionDeclaration":return h(a.body,b);case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)if(h(a.declarations[e],b))return!0;return c;case "IfStatement":return h(a.test,b)||null!==a.consequent&&h(a.consequent,
b)||null!==a.alternate&&h(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(e=0;e<a.body.length;e++)if(h(a.body[e],b))return!0;return c;case "ReturnStatement":return null!==a.argument?h(a.argument,b):c;case "UpdateExpression":return h(a.argument,b);case "AssignmentExpression":return(c=h(a.right,b))?c:h(a.left,b);case "ExpressionStatement":return h(a.expression,b);case "ForInStatement":return(c=h(a.left,b))||(c=h(a.right,b))?c:c=h(a.body,b);case "ForStatement":if(null!==
a.init&&(c=h(a.init,b))||null!==a.test&&(c=h(a.test,b))||null!==a.body&&(c=h(a.body,b)))return c;null!==a.update&&(c=h(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return b.toLowerCase()===a.name.toLowerCase();case "MemberExpression":if(c=h(a.object,b))return c;!0===a.computed&&(c=h(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(e=0;e<a.arguments.length;e++)h(a.arguments[e],
b)&&(c=!0);return c;case "ArrayExpression":for(e=0;e<a.elements.length;e++)h(a.elements[e],b)&&(c=!0);return c;case "UnaryExpression":return h(a.argument,b);case "BinaryExpression":return(c=h(a.left,b))?c:c=h(a.right,b);case "LogicalExpression":return(c=h(a.left,b))?c:c=h(a.right,b);case "ObjectExpression":for(e=0;e<a.properties.length;e++)h(a.properties[e],b)&&(c=!0);return c;case "Property":return c=h(a.value,b);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(d){throw d;
}}function n(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?n(a.init,b):c;case "FunctionDeclaration":return n(a.body,b);case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)if(n(a.declarations[e],b))return!0;return c;case "IfStatement":return n(a.test,b)||null!==a.consequent&&n(a.consequent,b)||null!==a.alternate&&n(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(e=0;e<a.body.length;e++)if(n(a.body[e],b))return!0;return c;
case "ReturnStatement":return null!==a.argument?n(a.argument,b):c;case "UpdateExpression":return n(a.argument,b);case "AssignmentExpression":return n(a.left,b)?!0:n(a.right,b);case "ExpressionStatement":return n(a.expression,b);case "ForInStatement":return(c=n(a.left,b))||(c=n(a.right,b))?c:c=n(a.body,b);case "ForStatement":if(null!==a.init&&(c=n(a.init,b))||null!==a.test&&(c=n(a.test,b))||null!==a.body&&(c=n(a.body,b)))return c;null!==a.update&&(c=n(a.update,b));return c;case "BreakStatement":return c;
case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if(c=n(a.object,b))return c;!0===a.computed&&(c=n(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":if(a.callee.name.toLowerCase()===b.toLowerCase())return!0;for(e=0;e<a.arguments.length;e++)n(a.arguments[e],b)&&(c=!0);return c;case "ArrayExpression":for(e=0;e<a.elements.length;e++)n(a.elements[e],b)&&(c=!0);return c;case "UnaryExpression":return n(a.argument,
b);case "BinaryExpression":return(c=n(a.left,b))?c:c=n(a.right,b);case "LogicalExpression":return(c=n(a.left,b))?c:c=n(a.right,b);case "ConditionalExpression":return c;case "ObjectExpression":for(e=0;e<a.properties.length;e++)n(a.properties[e],b)&&(c=!0);return c;case "Property":return c=n(a.value,b);case "Array":return c;default:return c}}catch(d){throw d;}}function f(a,b){var c=[],e;try{switch(a.type){case "VariableDeclarator":return null!==a.init?f(a.init,b):c;case "FunctionDeclaration":return f(a.body,
b);case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)e=f(a.declarations[d],b),c=c.concat(e);return c;case "ForInStatement":return e=f(a.left,b),c=c.concat(e),e=f(a.right,b),c=c.concat(e),e=f(a.body,b),c=c.concat(e);case "ForStatement":return null!==a.init&&(e=f(a.init,b),c=c.concat(e)),null!==a.test&&(e=f(a.test,b),c=c.concat(e)),null!==a.body&&(e=f(a.body,b),c=c.concat(e)),null!==a.update&&(e=f(a.update,b),c=c.concat(e)),c;case "IfStatement":return e=f(a.test,b),c=c.concat(e),null!==
a.consequent&&(e=f(a.consequent,b),c=c.concat(e)),null!==a.alternate&&(e=f(a.alternate,b),c=c.concat(e)),c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)e=f(a.body[d],b),c=c.concat(e);return c;case "ReturnStatement":return null!==a.argument?f(a.argument,b):c;case "UpdateExpression":return f(a.argument,b);case "AssignmentExpression":return c=f(a.left,b),c=c.concat(f(a.right,b));case "ExpressionStatement":return f(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;
case "Compound":return c;case "Identifier":return c;case "MemberExpression":if("Identifier"!==a.object.type)return c;if(!1===a.computed)c.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase());else try{"Literal"===a.property.type&&"string"===typeof a.property.value&&c.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase())}catch(p){}return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(d=0;d<a.arguments.length;d++)e=f(a.arguments[d],
b),c=c.concat(e);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)e=f(a.elements[d],b),c=c.concat(e);return c;case "UnaryExpression":return f(a.argument,b);case "ObjectExpression":for(d=0;d<a.properties.length;d++)e=f(a.properties[d],b),c=c.concat(e);return c;case "Property":return f(a.value,b);case "BinaryExpression":return e=f(a.left,b),c=c.concat(e),e=f(a.right,b),c=c.concat(e);case "LogicalExpression":return e=f(a.left,b),c=c.concat(e),e=f(a.right,b),c=c.concat(e);case "ConditionalExpression":return c;
case "Array":return c;default:return c}}catch(h){throw h;}}function e(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var e=0;e<b.params.length;e++)c.push("any");return{name:a,"return":"any",params:c}}function p(a,b){for(var e={globalScope:b.globalScope,localScope:{}},d=0;d<a.params.length;d++)e.localScope[a.params[d].name.toLowerCase()]={type:"any"};return c(a.body,e)}function s(a,b,c,e){var d={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};d.infinity={type:"any"};d.textformatting=
{type:"any"};d.pi={type:"any"};for(var f in b)if("simple"!==e||"simple"===e&&"a"===b[f].av)d[f]={type:"FormulaFunction",signature:b[f]};for(b=0;b<c.length;b++)f=c[b],d[f.name]={type:"FormulaFunction",signature:f};for(f in a)d[f]=a[f],d[f].type="any";return d}function u(a,b,c){var e="";switch(b){case "SYNTAX":e="Syntax Error: ";break;case "RUNTIME":e="Runtime Error: ";break;default:e="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":e+=" Assignments not be made in logical tests";
break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":e+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":e+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":e+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":e+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":e+=" Functions cannot be declared as variables";
break;case "FUNCTIONMUSTHAVEIDENTIFIER":e+=" Function Definition must have an identifier"}break;case "VariableDeclaration":e+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":e+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":e+=" Variable Definition must have an identifier"}break;case "Identifier":e+=" Identifier Not Found. ";e+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":e+=
" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":e+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(c){case "ONLY1VAR":e+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":e+=" Can only declare value for use with IN";break;case "LEFTNOVAR":e+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":e+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":e+=
"This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":e+="Cannot find member property. ";e+=!1===a.computed?a.property.name:"";break;case "OUTOFBOUNDS":e+="Out of Bounds. ";e+=!1===a.computed?a.property.name:"";break;case "NOTFOUND":e+="Cannot call member method on null. ";e+=!1===a.computed?a.property.name:"";break;case "INVALIDTYPE":e+="Cannot call member property on object of this type. ",e+=!1===a.computed?a.property.name:""}break;case "Property":switch(c){case "ONLYLITERAL":e+=
"Property names must be literals or identifiers"}break;case "Literal":break;case "ThisExpression":e+="THIS construct is not supported.";case "CallExpression":switch(c){case "WRONGSIGNATURE":e+="Function signature does not match: ";e+=a.callee.name;break;case "ONLYNODESUPPORTED":e+="Functions must be declared.";e+=a.callee.name;break;case "NOTAFUNCTION":e+="Not a Function: ";e+=a.callee.name;break;case "NOTFOUND":e+="Function Not Found: "+a.callee.name}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":e+=
"Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":e+="Unary operator "+a.operator+" cannot be used with this argument.";break}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":e+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":return"";case "ConditionalExpression":e+="Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":e+=
" Cannot Put Function inside Array."}break;case "Array":e+="Expression contains unrecognised array structure.";break;default:e+="Expression contains unrecognised code structures."}}catch(d){throw d;}return e}function t(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:u(a,b,c)}}function w(a,b,c,e,d){b={globalScope:b.globalScope,localScope:{}};for(d=0;d<a.params.length;d++)b.localScope[a.params[d].name.toLowerCase()]={type:"any"};v(a.body,b,c,e,!1)}function v(a,c,d,f,p){void 0===
p&&(p=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");u(a,"SYNTAX","UNREOGNISED");var h=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){f.push(t(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==a.id.type?f.push(t(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(null!==c.localScope?void 0!==c.localScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase():void 0!==c.globalScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase(),
null===c.localScope?c.globalScope[a.id.name.toLowerCase()]={type:"any"}:c.localScope[a.id.name.toLowerCase()]={type:"any"});null===a.init?"":v(a.init,c,d,f,p);break;case "FunctionDeclaration":!1===p&&f.push(t(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&f.push(t(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));h=e("",a,c);w(a,c,d,f,p);null!==c.localScope&&f.push(t(a,"SYNTAX","GLOBALFUNCTIONSONLY"));h.isnative=!1;"Identifier"===a.id.type&&(c.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",
signature:[h]});break;case "VariableDeclaration":for(var s=0;s<a.declarations.length;s++)v(a.declarations[s],c,d,f,p);break;case "IfStatement":null!==a.test&&(v(a.test,c,d,f,p),("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)&&f.push(t(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&v(a.consequent,c,d,f,p);null!==a.alternate&&v(a.alternate,c,d,f,p);break;case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(s=0;s<a.body.length;s++)v(a.body[s],
c,d,f,p);break;case "ReturnStatement":null!==a.argument&&v(a.argument,c,d,f,p);break;case "ForInStatement":"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&f.push(t(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&f.push(t(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&f.push(t(a,"SYNTAX","LEFTNOTVAR"));v(a.left,c,d,f,p);v(a.right,c,d,f,p);v(a.body,c,d,f,p);break;case "ForStatement":null!==a.init&&v(a.init,c,d,f,p);null!==a.test&&v(a.test,c,d,f,p);null!==
a.body&&v(a.body,c,d,f,p);null!==a.update&&v(a.update,c,d,f,p);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?f.push(t(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(h=!1,!1===d&&(null!==c.localScope&&void 0!==c.localScope[a.argument.name.toLowerCase()]&&(h=!0),void 0!==c.globalScope[a.argument.name.toLowerCase()]&&(h=!0),!1===h&&f.push({line:null===a?0:a.loc.start.line,
character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&v(a.argument,c,d,f,p));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&f.push(t(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:f.push(t(a,"SYNTAX","OPERATORNOTRECOGNISED"))}v(a.right,c,d,f,p);h=!1;"Identifier"===
a.left.type&&(null!==c.localScope&&void 0!==c.localScope[a.left.name.toLowerCase()]&&(h=!0),void 0!==c.globalScope[a.left.name.toLowerCase()]&&(h=!0),!1===d&&!1===h&&f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}));"MemberExpression"===a.left.type&&v(a.left,c,d,f,p);break;case "ExpressionStatement":v(a.expression,c,d,f,p);break;case "Identifier":var n=a.name.toLowerCase();if(null!==c.localScope&&void 0!==
c.localScope[n])break;if(void 0!==c.globalScope[n])break;else!1===d&&f.push(t(a,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":v(a.object,c,d,f,p);!0===a.computed&&v(a.property,c,d,f,p);break;case "Literal":return"";case "ThisExpression":f.push(t(a,"SYNTAX","NOTSUPPORTED"));break;case "CallExpression":"Identifier"!==a.callee.type&&f.push(t(a,"SYNTAX","ONLYNODESSUPPORTED"));for(s=0;s<a.arguments.length;s++)v(a.arguments[s],c,d,f,p);var g=b(a.callee.name,a.arguments,c);!1===d&&-1===g&&
f.push(t(a,"SYNTAX","NOTFOUND"));-2===g&&f.push(t(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":v(a.argument,c,d,f,p);break;case "BinaryExpression":v(a.left,c,d,f,p);v(a.right,c,d,f,p);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:f.push(t(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;default:f.push(t(a,
"SYNTAX","OPERATORNOTRECOGNISED"))}v(a.left,c,d,f,p);("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)&&f.push(t(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));v(a.right,c,d,f,p);("AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type)&&f.push(t(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":f.push(t(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(s=0;s<a.elements.length;s++)v(a.elements[s],c,d,f,p);break;
case "Array":f.push(t(a,"SYNTAX","NOTSUPPORTED"));case "ObjectExpression":for(s=0;s<a.properties.length;s++)v(a.properties[s],c,d,f,p);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&f.push(t(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&v(a.key,c,d,f,p);v(a.value,c,d,f,p);break;default:f.push(t(a,"SYNTAX","UNRECOGNISED"))}}catch(m){f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}m.functionDecls={concatenate:{min:"0",
max:"*",av:"a"},split:{min:"2",max:"4",av:"a"},guid:{min:"0",max:"1",av:"a"},today:{min:"0",max:"0",av:"a"},now:{min:"0",max:"0",av:"a"},timestamp:{min:"0",max:"0",av:"a"},day:{min:"1",max:"1",av:"a"},month:{min:"1",max:"1",av:"a"},year:{min:"1",max:"1",av:"a"},hour:{min:"1",max:"1",av:"a"},second:{min:"1",max:"1",av:"a"},millisecond:{min:"1",max:"1",av:"a"},minute:{min:"1",max:"1",av:"a"},weekday:{min:"1",max:"1",av:"a"},toutc:{min:"1",max:"1",av:"a"},tolocal:{min:"1",max:"1",av:"a"},date:{min:"0",
max:"7",av:"a"},datediff:{min:"2",max:"3",av:"a"},dateadd:{min:"2",max:"3",av:"a"},trim:{min:"1",max:"1",av:"a"},text:{min:"1",max:"2",av:"a"},left:{min:"2",max:"2",av:"a"},right:{min:"2",max:"2",av:"a"},mid:{min:"2",max:"3",av:"a"},upper:{min:"1",max:"1",av:"a"},proper:{min:"1",max:"2",av:"a"},lower:{min:"1",max:"1",av:"a"},find:{min:"2",max:"3",av:"a"},iif:{min:"3",max:"3",av:"a"},decode:{min:"2",max:"*",av:"a"},when:{min:"2",max:"*",av:"a"},defaultvalue:{min:"2",max:"2",av:"a"},isempty:{min:"1",
max:"1",av:"a"},maplayer:{min:"2",max:"3",av:"f"},domaincode:{min:"3",max:"4",av:"a"},domainname:{min:"2",max:"4",av:"a"},polygon:{min:"1",max:"1",av:"a"},point:{min:"1",max:"1",av:"a"},polyline:{min:"1",max:"1",av:"a"},extent:{min:"1",max:"1",av:"a"},multipoint:{min:"1",max:"1",av:"a"},geometry:{min:"1",max:"1",av:"a"},featurelayer:{min:"1",max:"3",av:"f"},featurecollection:{min:"1",max:"1",av:"f"},buffer:{min:"2",max:"4",av:"f"},area:{min:"1",max:"2",av:"f"},sumarea:{min:"1",max:"2",av:"f"},length:{min:"1",
max:"2",av:"f"},sumlength:{min:"1",max:"2",av:"f"},count:{min:"0",max:"*",av:"a"},filter:{min:"2",max:"2",av:"f"},envelopeintersects:{min:"2",max:"2",av:"f"},intersects:{min:"2",max:"2",av:"f"},contains:{min:"2",max:"2",av:"f"},overlaps:{min:"2",max:"2",av:"f"},within:{min:"2",max:"2",av:"f"},touches:{min:"2",max:"2",av:"f"},crosses:{min:"2",max:"2",av:"f"},union:{min:"1",max:"2",av:"f",fmin:1},difference:{min:"2",max:"2",av:"f",fmin:2,fmax:3},intersection:{min:"2",max:"2",av:"f",fmin:2,fmax:3},symmetricdifference:{min:"2",
max:"2",av:"f",fmin:2,fmax:3},number:{min:"1",max:"2",av:"a"},acos:{min:"1",max:"1",av:"a"},asin:{min:"1",max:"1",av:"a"},atan:{min:"1",max:"1",av:"a"},atan2:{min:"2",max:"2",av:"a"},ceil:{min:"1",max:"2",av:"a"},floor:{min:"1",max:"2",av:"a"},round:{min:"1",max:"2",av:"a"},cos:{min:"1",max:"1",av:"a"},exp:{min:"1",max:"1",av:"a"},log:{min:"1",max:"1",av:"a"},min:{min:"0",max:"*",av:"a"},console:{min:"0",max:"*",av:"a"},max:{min:"0",max:"*",av:"a"},pow:{min:"2",max:"2",av:"a"},random:{min:"0",max:"0",
av:"a"},sqrt:{min:"1",max:"1",av:"a"},sin:{min:"1",max:"1",av:"a"},tan:{min:"1",max:"1",av:"a"},abs:{min:"1",max:"1",av:"a"},isnan:{min:"1",max:"1",av:"a"},stdev:{min:"0",max:"*",av:"a"},average:{min:"0",max:"*",av:"a"},mean:{min:"0",max:"*",av:"a"},sum:{min:"0",max:"*",av:"a"},variance:{min:"0",max:"*",av:"a"},distinct:{min:"0",max:"*",av:"a"},addfield:{min:"3",max:"3",av:"f"},removefield:{min:"2",max:"2",av:"f"},aggregate:{min:"3",max:"3",av:"f"},dissolve:{min:"2",max:"3",av:"f"},changeshape:{min:"2",
max:"4",av:"f"},first:{min:"1",max:"1",av:"a"},top:{min:"2",max:"2",av:"a"},orderby:{min:"2",max:"2",av:"f"},"boolean":{min:"1",max:"1",av:"a"},dictionary:{min:"0",max:"*",av:"a"},servicearea:{min:"2",max:"*",av:"f"},equals:{min:"2",max:"2",av:"a"},"typeof":{min:"1",max:"1",av:"a"},reverse:{min:"1",max:"1",av:"a"},replace:{min:"3",max:"4",av:"a"},sort:{min:"1",max:"2",av:"a"},feature:{min:"1",max:"*",av:"a"},haskey:{min:"2",max:"2",av:"a"},indexof:{min:"2",max:"2",av:"a"},centroid:{min:"1",max:"1",
av:"f"},multiparttosinglepart:{min:"1",max:"1",av:"f"}};m.checkFunctionSignature=a;m.findFunction=b;m.validateLanguageNode=d;m.testValidityOfExpression=c;m.referencesMemberImpl=h;m.referencesMember=function(a,b){return!0===h(a.body[0].body,b.toLowerCase())?!0:!1};m.referencesFunctionImpl=n;m.referencesFunction=function(a,b){return!0===n(a.body[0].body,b)?!0:!1};m.findFieldLiteralsImpl=f;m.findFieldLiterals=function(a,b){return f(a.body[0].body,b)};m.extractFunctionDeclaration=e;m.validateFunction=
p;m.constructGlobalScope=s;m.validateScript=function(a,b,e){void 0===e&&(e="full");b={globalScope:s(b.vars,m.functionDecls,b.customFunctions,e),localScope:null};return c(a.body[0].body,b)};m.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":d(a.body[0].body)};m.nodeErrorMessage=u;m.makeError=t;m.extractAllIssuesInFunction=w;m.extractAllIssues=v;m.checkScript=function(a,b,c,e){void 0===e&&(e="full");var d=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,
character:0,reason:"Invalid Body"}];if(null===b||void 0===b)b={vars:{},customFunctions:[]};b={globalScope:s(b.vars,m.functionDecls,b.customFunctions,e),localScope:null};try{v(a.body[0].body,b,c,d)}catch(f){}return d}})},"esri/arcade/Dictionary":function(){define(["require","exports","./languageUtils","../geometry/Geometry","./ImmutableArray"],function(g,m,a,b,d){return function(){function c(a){this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=a instanceof c?a.attributes:void 0===
a?{}:null===a?{}:a}c.prototype.field=function(a){var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];throw Error("Field not Found");};c.prototype.setField=function(a,b){if(this.immutable)throw Error("Dictionary is Immutable");var c=a.toLowerCase();if(void 0===this.attributes[a])for(var e in this.attributes)if(e.toLowerCase()===c){this.attributes[e]=b;return}this.attributes[a]=b};c.prototype.hasField=function(a){var b=
a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return!1};c.prototype.keys=function(){var a=[],b;for(b in this.attributes)a.push(b);return a=a.sort()};c.prototype.castToText=function(){var c="",n;for(n in this.attributes){""!==c&&(c+=",");var f=this.attributes[n];null!=f&&(a.isBoolean(f)||a.isNumber(f)||a.isString(f)?c+=JSON.stringify(n)+":"+JSON.stringify(f):f instanceof b?c+=JSON.stringify(n)+":"+a.toStringExplicit(f):f instanceof
d?c+=JSON.stringify(n)+":"+a.toStringExplicit(f):f instanceof Array?c+=JSON.stringify(n)+":"+a.toStringExplicit(f):f instanceof Date?c+=JSON.stringify(n)+":"+JSON.stringify(f):null!==f&&"object"===typeof f&&void 0!==f.castToText&&(c+=JSON.stringify(n)+":"+f.castToText()))}return"{"+c+"}"};return c}()})},"esri/arcade/Feature":function(){define("require exports dojo/_base/lang ../geometry/Geometry ../graphic ../geometry/jsonUtils ./Dictionary ./languageUtils ./ImmutableArray ../geometry/Point".split(" "),
function(g,m,a,b,d,c,h,n,f,e){return function(){function p(a,e,f){this._layer=this.attributes=this.geometry=null;this.immutable=this._datesfixed=!0;a instanceof p?(this.attributes=a.attributes,this.geometry=a.geometry,a._layer&&(this._layer=a._layer)):a instanceof d?(this.geometry=a.geometry,this.attributes=void 0===a.attributes?{}:null===a.attributes?{}:a.attributes,a._layer?(this._layer=a._layer,this._datesfixed=!1):a.layer&&(this._layer=a.layer,this._datesfixed=!1)):a instanceof h?(this.attributes=
a.field("attributes"),null!==this.attributes&&(this.attributes=this.attributes instanceof h?this.attributes.attributes:null),this.geometry=a.field("geometry"),null!==this.geometry&&(this.geometry instanceof h?this.geometry=p.parseGeometryFromDictionary(this.geometry):this.geometry instanceof b||(this.geometry=null))):(e instanceof b||null===e?(this.geometry=e,this.attributes=void 0===a?{}:null===a?{}:a):"string"===typeof a?(a=JSON.parse(a),null!==a.geometry&&void 0!==a.geometry&&(this.geometry=c.fromJson(a.geometry)),
this.attributes=void 0===a.attributes?{}:null===a.attributes?{}:a.attributes):(void 0===a?this.attributes={}:null===a&&(this.attributes={}),this.geometry=null),void 0!==f&&(this._layer=f))}p.prototype.castToText=function(){var a="",c;for(c in this.attributes){""!==a&&(a+=",");var e=this.attributes[c];null!=e&&(n.isBoolean(e)||n.isNumber(e)||n.isString(e)?a+=JSON.stringify(c)+":"+JSON.stringify(e):e instanceof b?a+=JSON.stringify(c)+":"+n.toStringExplicit(e):e instanceof f?a+=JSON.stringify(c)+":"+
n.toStringExplicit(e):e instanceof Array?a+=JSON.stringify(c)+":"+n.toStringExplicit(e):e instanceof Date?a+=JSON.stringify(c)+":"+JSON.stringify(e):null!==e&&"object"===typeof e&&void 0!==e.castToText&&(a+=JSON.stringify(c)+":"+e.castToText()))}return'{"geometry":'+(null===this.geometry?"null":n.toStringExplicit(this.geometry))+',"attributes":{'+a+"}}"};p.prototype._fixDates=function(){for(var a=[],b=0;b<this._layer.fields.length;b++){var c=this._layer.fields[b];("date"===c.type||"esriFieldTypeDate"===
c.type)&&a.push(c.name)}0<a.length&&this._fixDateFields(a);this._datesfixed=!0};p.prototype._fixDateFields=function(b){this.attributes=a.mixin({},this.attributes);for(var c=0;c<b.length;c++){var e=this.attributes[b[c]];if(null!==e)if(void 0===e)for(var d in this.attributes){if(d.toLowerCase()===b[c]){e=this.attributes[d];null!==e&&!(e instanceof Date)&&(this.attributes[d]=new Date(e));break}}else e instanceof Date||(this.attributes[b[c]]=new Date(e))}};p.prototype.field=function(a){!1===this._datesfixed&&
this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");};p.prototype._hasFieldDefinition=function(a){if(null===this._layer)return!1;for(var b=0;b<this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===a)return!0;return!1};p.prototype._field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();
a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];return null};p.prototype.setField=function(a,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===n.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");var c=a.toLowerCase();if(void 0===this.attributes[a])for(var e in this.attributes)if(e.toLowerCase()===c){this.attributes[e]=b;return}this.attributes[a]=b};p.prototype.hasField=function(a){var b=a.toLowerCase();
if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return this._hasFieldDefinition(b)?!0:!1};p.prototype.keys=function(){var a=[],b={},c;for(c in this.attributes)a.push(c),b[c.toLowerCase()]=1;if(null!==this._layer)for(c=0;c<this._layer.fields.length;c++){var e=this._layer.fields[c];1!==b[e.name.toLowerCase()]&&a.push(e.name)}return a=a.sort()};p.fromFeature=function(a){return new p(a)};p.parseGeometryFromDictionary=function(a){a=p.convertDictionaryToJson(a,
!0);void 0!==a.spatialreference&&(a.spatialReference=a.spatialreference,delete a.spatialreference);void 0!==a.rings&&(a.rings=this.fixPathArrays(a.rings,!0===a.hasZ,!0===a.hasM));void 0!==a.paths&&(a.paths=this.fixPathArrays(a.paths,!0===a.hasZ,!0===a.hasM));void 0!==a.points&&(a.points=this.fixPointArrays(a.points,!0===a.hasZ,!0===a.hasM));return c.fromJson(a)};p.fixPathArrays=function(a,b,c){var e=[];if(a instanceof Array)for(var d=0;d<a.length;d++)e.push(this.fixPointArrays(a[d],b,c));else if(a instanceof
f)for(d=0;d<a.length();d++)e.push(this.fixPointArrays(a.get(d),b,c));return e};p.fixPointArrays=function(a,b,c){var d=[];if(a instanceof Array)for(var p=0;p<a.length;p++){var h=a[p];h instanceof e?b&&c?d.push([h.x,h.y,h.z,h.m]):b?d.push([h.x,h.y,h.z]):c?d.push([h.x,h.y,h.m]):d.push([h.x,h.y]):d.push(h)}else if(a instanceof f)for(p=0;p<a.length();p++)h=a.get(p),h instanceof e?b&&c?d.push([h.x,h.y,h.z,h.m]):b?d.push([h.x,h.y,h.z]):c?d.push([h.x,h.y,h.m]):d.push([h.x,h.y]):d.push(h);return d};p.convertDictionaryToJson=
function(a,b){void 0===b&&(b=!1);var c={},e;for(e in a.attributes){var d=a.attributes[e];d instanceof h&&(d=p.convertDictionaryToJson(d));b?c[e.toLowerCase()]=d:c[e]=d}return c};p.parseAttributesFromDictionary=function(a){var b={},c;for(c in a.attributes){var e=a.attributes[c];if(n.isSimpleType(e))b[c]=e;else throw Error("Illegal Argument");}return b};p.fromJson=function(a){var b=null;null!==a.geometry&&void 0!==a.geometry&&(b=c.fromJson(a.geometry));var e={};if(null!==a.attributes&&void 0!==a.attributes)for(var d in a.attributes){var f=
a.attributes[d];if(n.isString(f)||n.isNumber(f)||n.isBoolean(f)||n.isDate(f))e[d]=f;else throw Error("Illegal Argument");}return new p(e,b)};p.prototype.domainValueLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;c=n.getDomain(a,this._layer,this,c);if(void 0===b)try{b=this.field(a)}catch(e){return null}return n.getDomainValue(c,b)};p.prototype.domainCodeLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;a=n.getDomain(a,this._layer,this,c);return n.getDomainCode(a,
b)};return p}()})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(g,m,a,b){function d(a){return null===a?a:isNaN(a.getTime())?null:a}m.registerFunctions=function(c,h){c.today=function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,0,0);a=new Date;a.setHours(0,0,0,0);return a})};c.now=function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,0,0);return new Date})};c.timestamp=function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,0,0);a=
new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};c.toutc=function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};c.tolocal=function(c,d){return h(c,d,function(c,d,f){b.pcCheck(f,1,1);c=b.toDate(f[0]);return null===
c?null:a.utc([c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()]).toDate()})};c.day=function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getDate()})};c.month=function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getMonth()})};c.year=function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getFullYear()})};c.hour=
function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getHours()})};c.second=function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getSeconds()})};c.millisecond=function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getMilliseconds()})};c.minute=function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getMinutes()})};c.weekday=
function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getDay()})};c.date=function(c,f){return h(c,f,function(c,f,h){b.pcCheck(h,0,7);if(3===h.length)return d(new Date(b.toNumber(h[0]),b.toNumber(h[1]),b.toNumber(h[2]),0,0,0,0));if(4===h.length)return d(new Date(b.toNumber(h[0]),b.toNumber(h[1]),b.toNumber(h[2]),b.toNumber(h[3]),0,0,0));if(5===h.length)return d(new Date(b.toNumber(h[0]),b.toNumber(h[1]),b.toNumber(h[2]),b.toNumber(h[3]),b.toNumber(h[4]),
0,0));if(6===h.length)return d(new Date(b.toNumber(h[0]),b.toNumber(h[1]),b.toNumber(h[2]),b.toNumber(h[3]),b.toNumber(h[4]),b.toNumber(h[5]),0));if(7===h.length)return d(new Date(b.toNumber(h[0]),b.toNumber(h[1]),b.toNumber(h[2]),b.toNumber(h[3]),b.toNumber(h[4]),b.toNumber(h[5]),b.toNumber(h[6])));if(2===h.length){c=b.toString(h[1]);if(""===c)return null;c=b.standardiseDateFormat(c);h=a(b.toString(h[0]),c,!0);return!0===h.isValid()?h.toDate():null}if(1===h.length){if(b.isString(h[0])&&""===h[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
""))return null;c=b.toNumber(h[0]);return!1===isNaN(c)?d(new Date(c)):b.toDate(h[0])}if(0===h.length)return new Date})};c.datediff=function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,2,3);a=b.toDateM(d[0]);c=b.toDateM(d[1]);if(null===a||null===c)return NaN;switch(b.toString(d[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(c,"days",!0);case "months":case "month":return a.diff(c,"months",!0);case "minutes":case "minute":case "m":return"M"===d[2]?a.diff(c,"months",!0):a.diff(c,"minutes",
!0);case "seconds":case "second":case "s":return a.diff(c,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(c);case "hours":case "hour":case "h":return a.diff(c,"hours",!0);case "years":case "year":case "y":return a.diff(c,"years",!0);default:return a.diff(c)}})};c.dateadd=function(a,c){return h(a,c,function(a,c,d){b.pcCheck(d,2,3);a=b.toDateM(d[0]);if(null===a)return null;c="milliseconds";switch(b.toString(d[2]).toLowerCase()){case "days":case "day":case "d":c="days";break;
case "months":case "month":c="months";break;case "minutes":case "minute":case "m":c="M"===d[2]?"months":"minutes";break;case "seconds":case "second":case "s":c="seconds";break;case "milliseconds":case "millisecond":case "ms":c="milliseconds";break;case "hours":case "hour":case "h":c="hours";break;case "years":case "year":case "y":c="years"}a.add(b.toNumber(d[1]),c);return a.toDate()})}}})},"esri/arcade/functions/string":function(){define(["require","exports","../languageUtils","../Feature"],function(g,
m,a,b){m.registerFunctions=function(d,c){d.trim=function(b,d){return c(b,d,function(b,c,d){a.pcCheck(d,1,1);return a.toString(d[0]).trim()})};d.upper=function(b,d){return c(b,d,function(b,c,d){a.pcCheck(d,1,1);return a.toString(d[0]).toUpperCase()})};d.proper=function(b,d){return c(b,d,function(b,c,d){a.pcCheck(d,1,2);b=1;2===d.length&&"firstword"===a.toString(d[1]).toLowerCase()&&(b=2);c=/\s/;d=a.toString(d[0]);for(var h="",n=!0,g=0;g<d.length;g++){var m=d[g];c.test(m)?1===b&&(n=!0):m.toUpperCase()!==
m.toLowerCase()&&(n?(m=m.toUpperCase(),n=!1):m=m.toLowerCase());h+=m}return h})};d.lower=function(b,d){return c(b,d,function(b,c,d){a.pcCheck(d,1,1);return a.toString(d[0]).toLowerCase()})};d.guid=function(b,d){return c(b,d,function(b,c,d){a.pcCheck(d,0,1);if(0<d.length)switch(a.toString(d[0]).toLowerCase()){case "digits":return a.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return a.generateUUID();case "digits-hyphen-parentheses":return"("+a.generateUUID()+
")"}return"{"+a.generateUUID()+"}"})};d.console=function(b,d){return c(b,d,function(c,e,d){0!==d.length&&(1===d.length?b.console(a.toString(d[0])):b.console(a.toString(d)));return a.voidOperation})};d.mid=function(b,d){return c(b,d,function(b,c,d){a.pcCheck(d,2,3);b=a.toNumber(d[1]);if(isNaN(b))return"";0>b&&(b=0);if(2===d.length)return a.toString(d[0]).substr(b);c=a.toNumber(d[2]);if(isNaN(c))return"";0>c&&(c=0);return a.toString(d[0]).substr(b,c)})};d.find=function(b,d){return c(b,d,function(b,
c,d){a.pcCheck(d,2,3);b=0;if(2<d.length){b=a.toNumber(a.defaultUndefined(d[2],0));if(isNaN(b))return-1;0>b&&(b=0)}return a.toString(d[1]).indexOf(a.toString(d[0]),b)})};d.left=function(b,d){return c(b,d,function(b,c,d){a.pcCheck(d,2,2);b=a.toNumber(d[1]);if(isNaN(b))return"";0>b&&(b=0);return a.toString(d[0]).substr(0,b)})};d.right=function(b,d){return c(b,d,function(b,c,d){a.pcCheck(d,2,2);b=a.toNumber(d[1]);if(isNaN(b))return"";0>b&&(b=0);return a.toString(d[0]).substr(-1*b,b)})};d.split=function(b,
d){return c(b,d,function(b,c,d){a.pcCheck(d,2,4);b=a.toNumber(a.defaultUndefined(d[2],-1));c=a.toBoolean(a.defaultUndefined(d[3],!1));-1===b||null===b||!0===c?d=a.toString(d[0]).split(a.toString(d[1])):(isNaN(b)&&(b=-1),-1>b&&(b=-1),d=a.toString(d[0]).split(a.toString(d[1]),b));if(!1===c)return d;c=[];for(var h=0;h<d.length&&!(-1!==b&&c.length>=b);h++)""!==d[h]&&void 0!==d[h]&&c.push(d[h]);return c})};d.text=function(b,d){return c(b,d,function(b,c,d){a.pcCheck(d,1,2);return a.toStringExplicit(d[0],
d[1])})};d.concatenate=function(b,d){return c(b,d,function(b,c,d){b=[];if(1>d.length)return"";if(a.isArray(d[0])){c=a.defaultUndefined(d[2],"");for(var h=0;h<d[0].length;h++)b[h]=a.toStringExplicit(d[0][h],c);return 1<d.length?b.join(d[1]):b.join("")}if(a.isImmutableArray(d[0])){c=a.defaultUndefined(d[2],"");for(h=0;h<d[0].length();h++)b[h]=a.toStringExplicit(d[0].get(h),c);return 1<d.length?b.join(d[1]):b.join("")}for(h=0;h<d.length;h++)b[h]=a.toStringExplicit(d[h]);return b.join("")})};d.reverse=
function(b,d){return c(b,d,function(b,c,d){a.pcCheck(d,1,1);if(a.isArray(d[0]))return b=d[0].slice(0),b.reverse(),b;if(a.isImmutableArray(d[0]))return b=d[0].toArray().slice(0),b.reverse(),b;throw Error("Invalid Parameter");})};d.replace=function(b,d){return c(b,d,function(b,c,d){a.pcCheck(d,3,4);b=a.toString(d[0]);c=a.toString(d[1]);var h=a.toString(d[2]);return(4===d.length?a.toBoolean(d[3]):1)?a.multiReplace(b,c,h):b.replace(c,h)})};d.domainname=function(d,n){return c(d,n,function(c,e,d){a.pcCheck(d,
2,4);if(d[0]instanceof b)return d[0].domainValueLookup(a.toString(d[1]),d[2],void 0===d[3]?void 0:a.toNumber(d[3]));throw Error("Invalid Parameter");})};d.domaincode=function(d,n){return c(d,n,function(c,e,d){a.pcCheck(d,3,4);if(d[0]instanceof b)return d[0].domainCodeLookup(a.toString(d[1]),d[2],void 0===d[3]?void 0:a.toNumber(d[3]));throw Error("Invalid Parameter");})}}})},"esri/arcade/functions/maths":function(){define(["require","exports","../languageUtils","dojo/number"],function(g,m,a,b){function d(a,
b,d){if("undefined"===typeof d||0===+d)return Math[a](b);b=+b;d=+d;if(isNaN(b)||!("number"===typeof d&&0===d%1))return NaN;b=b.toString().split("e");b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-d:-d)));b=b.toString().split("e");return+(b[0]+"e"+(b[1]?+b[1]+d:d))}m.registerFunctions=function(c,h){c.number=function(c,d){return h(c,d,function(c,d,f){a.pcCheck(f,1,2);c=f[0];return a.isNumber(c)?c:null===c?0:a.isDate(c)||a.isBoolean(c)||""===c||void 0===c?Number(c):a.isString(c)?void 0!==f[1]?(f=a.multiReplace(f[1],
"\u2030",""),f=a.multiReplace(f,"\u00a4",""),b.parse(c,{pattern:f})):Number(c.trim()):Number(c)})};c.abs=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,1,1);return Math.abs(a.toNumber(d[0]))})};c.acos=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,1,1);return Math.acos(a.toNumber(d[0]))})};c.asin=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,1,1);return Math.asin(a.toNumber(d[0]))})};c.atan=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,1,1);return Math.atan(a.toNumber(d[0]))})};
c.atan2=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,2,2);return Math.atan2(a.toNumber(d[0]),a.toNumber(d[1]))})};c.ceil=function(b,c){return h(b,c,function(b,c,f){a.pcCheck(f,1,2);return 2===f.length?(b=a.toNumber(f[1]),isNaN(b)&&(b=0),d("ceil",a.toNumber(f[0]),-1*b)):Math.ceil(a.toNumber(f[0]))})};c.round=function(b,c){return h(b,c,function(b,c,f){a.pcCheck(f,1,2);return 2===f.length?(b=a.toNumber(f[1]),isNaN(b)&&(b=0),d("round",a.toNumber(f[0]),-1*b)):Math.round(a.toNumber(f[0]))})};
c.floor=function(b,c){return h(b,c,function(b,c,f){a.pcCheck(f,1,2);return 2===f.length?(b=a.toNumber(f[1]),isNaN(b)&&(b=0),d("floor",a.toNumber(f[0]),-1*b)):Math.floor(a.toNumber(f[0]))})};c.cos=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,1,1);return Math.cos(a.toNumber(d[0]))})};c.isnan=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};c.exp=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,1,1);return Math.exp(a.toNumber(d[0]))})};
c.log=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,1,1);return Math.log(a.toNumber(d[0]))})};c.pow=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,2,2);return Math.pow(a.toNumber(d[0]),a.toNumber(d[1]))})};c.random=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,0,0);return Math.random()})};c.sin=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,1,1);return Math.sin(a.toNumber(d[0]))})};c.sqrt=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,1,1);return Math.sqrt(a.toNumber(d[0]))})};
c.tan=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,1,1);return Math.tan(a.toNumber(d[0]))})};c.defaultvalue=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,2,2);return null===d[0]||""===d[0]||void 0===d[0]?d[1]:d[0]})};c.isempty=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,1,1);return null===d[0]||""===d[0]||void 0===d[0]?!0:!1})};c["boolean"]=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,1,1);return a.toBoolean(d[0])})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../../geometry/Geometry ../../geometry/Polygon ../../geometry/Polyline ../../geometry/Point ../../geometry/Extent ../../geometry/Multipoint ../../geometry/jsonUtils ../languageUtils ../Dictionary ../Feature".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s){m.registerFunctions=function(g,t){g.polygon=function(a,c){return t(a,c,function(c,d,h){e.pcCheck(h,1,1);c=null;if(h[0]instanceof p){if(c=e.fixSpatialReference(s.parseGeometryFromDictionary(h[0]),a.spatialReference),!1===c instanceof b)throw Error("Illegal Parameter");}else c=h[0]instanceof b?f.fromJson(h[0].toJson()):e.fixSpatialReference(new b(JSON.parse(h[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return c})};g.polyline=function(a,b){return t(a,b,function(b,c,h){e.pcCheck(h,1,1);b=null;if(h[0]instanceof p){if(b=e.fixSpatialReference(s.parseGeometryFromDictionary(h[0]),a.spatialReference),!1===b instanceof d)throw Error("Illegal Parameter");}else b=h[0]instanceof d?f.fromJson(h[0].toJson()):e.fixSpatialReference(new d(JSON.parse(h[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return b})};g.point=function(a,b){return t(a,b,function(b,d,h){e.pcCheck(h,1,1);b=null;if(h[0]instanceof p){if(b=e.fixSpatialReference(s.parseGeometryFromDictionary(h[0]),a.spatialReference),!1===b instanceof c)throw Error("Illegal Parameter");}else b=h[0]instanceof c?f.fromJson(h[0].toJson()):e.fixSpatialReference(new c(JSON.parse(h[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return b})};g.multipoint=function(a,b){return t(a,b,function(b,c,d){e.pcCheck(d,1,1);b=null;if(d[0]instanceof p){if(b=e.fixSpatialReference(s.parseGeometryFromDictionary(d[0]),a.spatialReference),!1===b instanceof n)throw Error("Illegal Parameter");}else b=d[0]instanceof n?f.fromJson(d[0].toJson()):e.fixSpatialReference(new n(JSON.parse(d[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return b})};g.extent=function(a,g){return t(a,g,function(g,u,t){e.pcCheck(t,1,1);g=null;t[0]instanceof p?g=e.fixSpatialReference(s.parseGeometryFromDictionary(t[0]),a.spatialReference):t[0]instanceof c?(g={xmin:t[0].x,ymin:t[0].y,xmax:t[0].x,ymax:t[0].y,spatialReference:t[0].spatialReference.toJson()},t[0].hasZ?(g.zmin=t[0].z,g.zmax=t[0].z):t[0].hasM&&(g.mmin=t[0].m,g.mmax=t[0].m),g=f.fromJson(g)):g=t[0]instanceof b?f.fromJson(t[0].getExtent().toJson()):t[0]instanceof d?f.fromJson(t[0].getExtent().toJson()):
t[0]instanceof n?f.fromJson(t[0].getExtent().toJson()):t[0]instanceof h?f.fromJson(t[0].toJson()):e.fixSpatialReference(new h(JSON.parse(t[0])),a.spatialReference);if(null!==g&&!1===g.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return g})};g.geometry=function(a,b){return t(a,b,function(b,c,d){e.pcCheck(d,1,1);b=null;b=d[0]instanceof s?e.fixSpatialReference(d[0].geometry,a.spatialReference):
d[0]instanceof p?e.fixSpatialReference(s.parseGeometryFromDictionary(d[0]),a.spatialReference):e.fixSpatialReference(f.fromJson(JSON.parse(d[0])),a.spatialReference);if(null!==b&&!1===b.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return b})};g.feature=function(b,c){return t(b,c,function(c,d,f){if(0===f.length)throw Error("Missing Parameters");c=null;if(1===f.length)if(e.isString(f[0]))c=
s.fromJson(JSON.parse(f[0]));else if(f[0]instanceof s)c=new s(f[0]);else if(f[0]instanceof a)c=new s(null,f[0]);else if(f[0]instanceof p)c=f[0].hasField("geometry")?f[0].field("geometry"):null,d=f[0].hasField("attributes")?f[0].field("attributes"):null,null!==c&&c instanceof p&&(c=s.parseGeometryFromDictionary(c)),null!==d&&(d=s.parseAttributesFromDictionary(d)),c=new s(d,c);else throw Error("Illegal Argument");else{if(2===f.length){d=c=null;if(null!==f[0])if(f[0]instanceof a)c=f[0];else if(c instanceof
p)c=s.parseGeometryFromDictionary(f[0]);else throw Error("Illegal Argument");if(null!==f[1])if(f[1]instanceof p)d=s.parseAttributesFromDictionary(f[1]);else throw Error("Illegal Argument");}else{c=null;d={};if(null!==f[0])if(f[0]instanceof a)c=f[0];else if(c instanceof p)c=s.parseGeometryFromDictionary(f[0]);else throw Error("Illegal Argument");for(var h=1;h<f.length;h+=2){var n=e.toString(f[h]),g=f[h+1];if(null===g||void 0===g||e.isString(g)||isNaN(g)||e.isDate(g)||e.isNumber(g)||e.isBoolean(g)){if(e.isFunctionParameter(g)||
!1===e.isSimpleType(g))throw Error("Illegal Argument");d[n]=g===e.voidOperation?null:g}else throw Error("Illegal Argument");}}c=new s(d,c)}c.geometry=e.fixSpatialReference(c.geometry,b.spatialReference);c.immutable=!1;return c})};g.dictionary=function(a,b){return t(a,b,function(a,b,c){if(0===c.length)throw Error("Missing Parameters");if(0!==c.length%2)throw Error("Missing Parameters");a={};for(b=0;b<c.length;b+=2){var d=e.toString(c[b]),f=c[b+1];if(null===f||void 0===f||e.isString(f)||isNaN(f)||e.isDate(f)||
e.isNumber(f)||e.isBoolean(f)){if(e.isFunctionParameter(f))throw Error("Illegal Argument");a[d]=f===e.voidOperation?null:f}else throw Error("Illegal Argument");}c=new p(a);c.immutable=!1;return c})};g.haskey=function(a,b){return t(a,b,function(a,b,c){e.pcCheck(c,2,2);a=e.toString(c[1]);if(c[0]instanceof s||c[0]instanceof p)return c[0].hasField(a);throw Error("Illegal Argument");})};g.indexof=function(a,b){return t(a,b,function(a,b,c){e.pcCheck(c,2,2);a=c[1];if(e.isArray(c[0])){for(b=0;b<c[0].length;b++)if(e.equalityTest(a,
c[0][b]))return b;return-1}if(e.isImmutableArray(c[0])){var d=c[0].length();for(b=0;b<d;b++)if(e.equalityTest(a,c[0].get(b)))return b;return-1}throw Error("Illegal Argument");})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(g,m,a,b){function d(c,d,n,f){if(1===f.length){if(a.isArray(f[0]))return b.calculateStat(c,f[0],-1);if(a.isImmutableArray(f[0]))return b.calculateStat(c,f[0].toArray(),-1)}return b.calculateStat(c,f,-1)}m.registerFunctions=
function(b,h){b.stdev=function(a,b){return h(a,b,function(a,b,c){return d("stdev",a,b,c)})};b.variance=function(a,b){return h(a,b,function(a,b,c){return d("variance",a,b,c)})};b.average=function(a,b){return h(a,b,function(a,b,c){return d("mean",a,b,c)})};b.mean=function(a,b){return h(a,b,function(a,b,c){return d("mean",a,b,c)})};b.sum=function(a,b){return h(a,b,function(a,b,c){return d("sum",a,b,c)})};b.min=function(a,b){return h(a,b,function(a,b,c){return d("min",a,b,c)})};b.max=function(a,b){return h(a,
b,function(a,b,c){return d("max",a,b,c)})};b.distinct=function(a,b){return h(a,b,function(a,b,c){return d("distinct",a,b,c)})};b.count=function(b,c){return h(b,c,function(b,c,d){a.pcCheck(d,1,1);if(a.isArray(d[0])||a.isString(d[0]))return d[0].length;if(a.isImmutableArray(d[0]))return d[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(g,m,a){function b(a){for(var b=0,d=0;d<a.length;d++)b+=
a[d];return b/a.length}function d(a){for(var d=b(a),n=0,f=0;f<a.length;f++)n+=Math.pow(d-a[f],2);return n/a.length}m.decodeStatType=function(a){switch(a.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};m.calculateStat=function(c,h,n){void 0===n&&(n=1E3);switch(c.toLowerCase()){case "distinct":a:{c=
n;n=[];for(var f={},e=[],p=0;p<h.length;p++){if(void 0!==h[p]&&null!==h[p]&&h[p]!==a.voidOperation){var s=h[p];if(a.isNumber(s)||a.isString(s))void 0===f[s]&&(n.push(s),f[s]=1);else{for(var g=!1,t=0;t<e.length;t++)!0===a.equalityTest(e[t],s)&&(g=!0);!1===g&&(e.push(s),n.push(s))}}if(n.length>=c&&-1!==c){h=n;break a}}h=n}return h;case "avg":case "mean":return b(a.toNumberArray(h));case "min":return Math.min.apply(Math,a.toNumberArray(h));case "sum":h=a.toNumberArray(h);for(n=c=0;n<h.length;n++)c+=
h[n];return c;case "max":return Math.max.apply(Math,a.toNumberArray(h));case "stdev":case "stddev":return Math.sqrt(d(a.toNumberArray(h)));case "var":case "variance":return d(a.toNumberArray(h));case "count":return h.length}return 0}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(g,m,a,b){m.parseScript=function(d){d=b.parse("function _() { "+d+"\n}");if(null===d.body||void 0===d.body)throw Error("No formula provided.");if(0===d.body.length)throw Error("No formula provided.");
if(0===d.body.length)throw Error("No formula provided.");if("BlockStatement"!==d.body[0].body.type)throw Error("Invalid formula content.");var c=a.validateLanguage(d);if(""!==c)throw Error(c);return d};m.scriptCheck=function(d,c,h,n){var f=[];try{var e=b.parse("function _() { "+d+"\n}",{tolerant:!0,loc:!0}),p=e.errors;if(0<p.length)for(var s=0;s<p.length;s++)f.push({line:p[s].lineNumber,character:p[s].column,reason:p[s].description});var g=a.checkScript(e,c,h,n);for(c=0;c<g.length;c++)f.push(g[c])}catch(t){try{"Unexpected token }"===
t.description&&(t.index=("function _() { "+d+"\n}").length-1)?f.push({line:t.lineNumber,character:t.column,reason:"Unexpected end of script"}):f.push({line:t.lineNumber,character:t.column,reason:t.description})}catch(m){}}return f};m.extractFieldLiterals=function(b,c){void 0===c&&(c=!1);return a.findFieldLiterals(b,c)};m.validateScript=function(b,c,h){void 0===h&&(h="full");return a.validateScript(b,c,h)};m.referencesMember=function(b,c){return a.referencesMember(b,c)};m.referencesFunction=function(b,
c){return a.referencesFunction(b,c)}})},"esri/arcade/lib/esprima":function(){(function(g,m){"function"===typeof define&&define.amd?define(["exports"],m):"undefined"!==typeof exports?m(exports):m(g.esprima={})})(this,function(g){function m(k,a){if(!k)throw Error("ASSERT: "+a);}function a(k){return 48<=k&&57>=k}function b(k){return 0<="0123456789abcdefABCDEF".indexOf(k)}function d(k){return 0<="01234567".indexOf(k)}function c(k){return 10===k||13===k||8232===k||8233===k}function h(k){return 36===k||
95===k||65<=k&&90>=k||97<=k&&122>=k||92===k||128<=k&&fa.NonAsciiIdentifierStart.test(String.fromCharCode(k))}function n(k){return 36===k||95===k||65<=k&&90>=k||97<=k&&122>=k||48<=k&&57>=k||92===k||128<=k&&fa.NonAsciiIdentifierPart.test(String.fromCharCode(k))}function f(k){switch(k){default:return!1}}function e(k){if(ca&&f(k))return!0;k=k.toLowerCase();switch(k.length){case 2:return"if"===k||"in"===k;case 3:return"var"===k||"for"===k;case 4:return"else"===k;case 5:return"break"===k;case 6:return"return"===
k;case 8:return"function"===k.toLowerCase()||"continue"===k;default:return!1}}function p(k,a,r,q,y){m("number"===typeof r,"Comment must have valid position");da.lastCommentStart>=r||(da.lastCommentStart=r,k={type:k,value:a},W.range&&(k.range=[r,q]),W.loc&&(k.loc=y),W.comments.push(k),W.attachComment&&(W.leadingComments.push(k),W.trailingComments.push(k)))}function s(k){var a,r,q;a=R-k;for(r={start:{line:ea,column:R-ha-k}};R<la;)if(q=V.charCodeAt(R),++R,c(q)){W.comments&&(k=V.slice(a+k,R-1),r.end=
{line:ea,column:R-ha-1},p("Line",k,a,R-1,r));13===q&&10===V.charCodeAt(R)&&++R;++ea;ha=R;return}W.comments&&(k=V.slice(a+k,R),r.end={line:ea,column:R-ha},p("Line",k,a,R,r))}function u(){var k,a;for(a=0===R;R<la;)if(k=V.charCodeAt(R),32===k||9===k||11===k||12===k||160===k||5760<=k&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(k))++R;else if(c(k))++R,13===k&&10===V.charCodeAt(R)&&++R,++ea,ha=R,a=!0;else if(47===k)if(k=V.charCodeAt(R+1),47===k)++R,
++R,s(2),a=!0;else if(42===k){++R;++R;a:{var r=k=void 0,q=void 0,q=void 0;W.comments&&(k=R-2,r={start:{line:ea,column:R-ha-2}});for(;R<la;)if(q=V.charCodeAt(R),c(q))13===q&&10===V.charCodeAt(R+1)&&++R,++ea,++R,ha=R,R>=la&&Q();else{if(42===q&&47===V.charCodeAt(R+1)){++R;++R;W.comments&&(q=V.slice(k+2,R-2),r.end={line:ea,column:R-ha},p("Block",q,k,R,r));break a}++R}Q()}}else break;else if(a&&45===k)if(45===V.charCodeAt(R+1)&&62===V.charCodeAt(R+2))R+=3,s(3);else break;else if(60===k)if("!--"===V.slice(R+
1,R+4))++R,++R,++R,++R,s(4);else break;else break}function t(k){var a,r,q=0;a="u"===k?4:2;for(k=0;k<a;++k)if(R<la&&b(V[R]))r=V[R++],q=16*q+"0123456789abcdef".indexOf(r.toLowerCase());else return"";return String.fromCharCode(q)}function w(){var k,a;k=V.charCodeAt(R++);a=String.fromCharCode(k);92===k&&(117!==V.charCodeAt(R)&&Q(),++R,k=t("u"),(!k||"\\"===k||!h(k.charCodeAt(0)))&&Q(),a=k);for(;R<la;){k=V.charCodeAt(R);if(!n(k))break;++R;a+=String.fromCharCode(k);92===k&&(a=a.substr(0,a.length-1),117!==
V.charCodeAt(R)&&Q(),++R,k=t("u"),(!k||"\\"===k||!n(k.charCodeAt(0)))&&Q(),a+=k)}return a}function v(){var k=R,a=V.charCodeAt(R),r,q=V[R];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++R,W.tokenize&&(40===a?W.openParenToken=W.tokens.length:123===a&&(W.openCurlyToken=W.tokens.length)),{type:Y.Punctuator,value:String.fromCharCode(a),lineNumber:ea,lineStart:ha,start:k,end:R};default:if(r=V.charCodeAt(R+1),61===r)switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return R+=
2,{type:Y.Punctuator,value:String.fromCharCode(a)+String.fromCharCode(r),lineNumber:ea,lineStart:ha,start:k,end:R};case 33:case 61:return R+=2,61===V.charCodeAt(R)&&++R,{type:Y.Punctuator,value:V.slice(k,R),lineNumber:ea,lineStart:ha,start:k,end:R}}}a=V.substr(R,4);if("\x3e\x3e\x3e\x3d"===a)return R+=4,{type:Y.Punctuator,value:a,lineNumber:ea,lineStart:ha,start:k,end:R};a=a.substr(0,3);if("\x3e\x3e\x3e"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a)return R+=3,{type:Y.Punctuator,value:a,lineNumber:ea,
lineStart:ha,start:k,end:R};a=a.substr(0,2);if(q===a[1]&&0<="+-\x3c\x3e\x26|".indexOf(q)||"\x3d\x3e"===a)return R+=2,{type:Y.Punctuator,value:a,lineNumber:ea,lineStart:ha,start:k,end:R};if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(q))return++R,{type:Y.Punctuator,value:q,lineNumber:ea,lineStart:ha,start:k,end:R};Q()}function x(){var k,r,q;q=V[R];m(a(q.charCodeAt(0))||"."===q,"Numeric literal must start with a decimal digit or a decimal point");r=R;k="";if("."!==q){k=V[R++];q=V[R];if("0"===k){if("x"===
q||"X"===q){++R;for(k="";R<la&&b(V[R]);)k+=V[R++];0===k.length&&Q();h(V.charCodeAt(R))&&Q();return{type:Y.NumericLiteral,value:parseInt("0x"+k,16),lineNumber:ea,lineStart:ha,start:r,end:R}}if("b"===q||"B"===q){++R;for(q="";R<la;){k=V[R];if("0"!==k&&"1"!==k)break;q+=V[R++]}0===q.length&&Q();R<la&&(k=V.charCodeAt(R),(h(k)||a(k))&&Q());return{type:Y.NumericLiteral,value:parseInt(q,2),lineNumber:ea,lineStart:ha,start:r,end:R}}if("o"===q||"O"===q||d(q)){d(q)?(q=!0,k="0"+V[R++]):(q=!1,++R,k="");for(;R<
la&&d(V[R]);)k+=V[R++];!q&&0===k.length&&Q();(h(V.charCodeAt(R))||a(V.charCodeAt(R)))&&Q();return{type:Y.NumericLiteral,value:parseInt(k,8),octal:q,lineNumber:ea,lineStart:ha,start:r,end:R}}q&&a(q.charCodeAt(0))&&Q()}for(;a(V.charCodeAt(R));)k+=V[R++];q=V[R]}if("."===q){for(k+=V[R++];a(V.charCodeAt(R));)k+=V[R++];q=V[R]}if("e"===q||"E"===q){k+=V[R++];q=V[R];if("+"===q||"-"===q)k+=V[R++];if(a(V.charCodeAt(R)))for(;a(V.charCodeAt(R));)k+=V[R++];else Q()}h(V.charCodeAt(R))&&Q();return{type:Y.NumericLiteral,
value:parseFloat(k),lineNumber:ea,lineStart:ha,start:r,end:R}}function B(){Z=null;u();U("Regular Expression language structures not supported")}function A(){u();B()}function C(){var k;k=W.tokens[W.tokens.length-1];if(!k)return A();if("Punctuator"===k.type){if("]"===k.value)return v();if(")"===k.value)return(k=W.tokens[W.openParenToken-1])&&"Keyword"===k.type&&("if"===k.value.toLowerCase()||"while"===k.value.toLowerCase()||"for"===k.value.toLowerCase()||"with"===k.value.toLowerCase())?A():v();if("}"===
k.value){if(W.tokens[W.openCurlyToken-3]&&"Keyword"===W.tokens[W.openCurlyToken-3].type){if(k=W.tokens[W.openCurlyToken-4],!k)return v()}else if(W.tokens[W.openCurlyToken-4]&&"Keyword"===W.tokens[W.openCurlyToken-4].type){if(k=W.tokens[W.openCurlyToken-5],!k)return A()}else return v();if(0<=ta.indexOf(k.value))return v()}return A()}return"Keyword"===k.type&&"this"!==k.value?A():v()}function z(){var k;u();if(R>=la)return{type:Y.EOF,lineNumber:ea,lineStart:ha,start:R,end:R};k=V.charCodeAt(R);if(h(k)){var r;
k=R;if(92===V.charCodeAt(R))r=w();else a:{var q;for(r=R++;R<la;){q=V.charCodeAt(R);if(92===q){R=r;r=w();break a}if(n(q))++R;else break}r=V.slice(r,R)}return{type:1===r.length?Y.Identifier:e(r)?Y.Keyword:"null"===r.toLowerCase()?Y.NullLiteral:"true"===r.toLowerCase()||"false"===r.toLowerCase()?Y.BooleanLiteral:Y.Identifier,value:r,lineNumber:ea,lineStart:ha,start:k,end:R}}if(40===k||41===k||59===k)return v();if(39===k||34===k){var y="",D,E,P;q=!1;var f,p;f=ea;p=ha;k=V[R];m("'"===k||'"'===k,"String literal must starts with a quote");
r=R;for(++R;R<la;)if(D=V[R++],D===k){k="";break}else if("\\"===D)if(D=V[R++],!D||!c(D.charCodeAt(0)))switch(D){case "u":case "x":if("{"===V[R]){++R;E=D=E=void 0;E=V[R];D=0;for("}"===E&&Q();R<la;){E=V[R++];if(!b(E))break;D=16*D+"0123456789abcdef".indexOf(E.toLowerCase())}(1114111<D||"}"!==E)&&Q();65535>=D?D=String.fromCharCode(D):(E=(D-65536>>10)+55296,D=String.fromCharCode(E,(D-65536&1023)+56320));y+=D}else P=R,(E=t(D))?y+=E:(R=P,y+=D);break;case "n":y+="\n";break;case "r":y+="\r";break;case "t":y+=
"\t";break;case "b":y+="\b";break;case "f":y+="\f";break;case "v":y+="\x0B";break;default:d(D)?(E="01234567".indexOf(D),0!==E&&(q=!0),R<la&&d(V[R])&&(q=!0,E=8*E+"01234567".indexOf(V[R++]),0<="0123".indexOf(D)&&(R<la&&d(V[R]))&&(E=8*E+"01234567".indexOf(V[R++]))),y+=String.fromCharCode(E)):y+=D}else++ea,"\r"===D&&"\n"===V[R]&&++R,ha=R;else if(c(D.charCodeAt(0)))break;else y+=D;""!==k&&Q();return{type:Y.StringLiteral,value:y,octal:q,startLineNumber:f,startLineStart:p,lineNumber:ea,lineStart:ha,start:r,
end:R}}return 46===k?a(V.charCodeAt(R+1))?x():v():a(k)?x():W.tokenize&&47===k?C():v()}function F(){var k,a,r;u();k={start:{line:ea,column:R-ha}};a=z();k.end={line:ea,column:R-ha};a.type!==Y.EOF&&(r=V.slice(a.start,a.end),k={type:qa[a.type],value:r,range:[a.start,a.end],loc:k},a.regex&&(k.regex={pattern:a.regex.pattern,flags:a.regex.flags}),W.tokens.push(k));return a}function H(){var k;k=Z;R=k.end;ea=k.lineNumber;ha=k.lineStart;Z="undefined"!==typeof W.tokens?F():z();R=k.end;ea=k.lineNumber;ha=k.lineStart;
return k}function J(){var k,a,r;k=R;a=ea;r=ha;Z="undefined"!==typeof W.tokens?F():z();R=k;ea=a;ha=r}function I(){this.line=ea;this.column=R-ha}function K(){this.start=new I;this.end=null}function M(k){this.start=k.type===Y.StringLiteral?{line:k.startLineNumber,column:k.start-k.startLineStart}:{line:k.lineNumber,column:k.start-k.lineStart};this.end=null}function L(){R=Z.start;Z.type===Y.StringLiteral?(ea=Z.startLineNumber,ha=Z.startLineStart):(ea=Z.lineNumber,ha=Z.lineStart);W.range&&(this.range=[R,
0]);W.loc&&(this.loc=new K)}function G(k){W.range&&(this.range=[k.start,0]);W.loc&&(this.loc=new M(k))}function O(){var k,a,r,q;k=R;a=ea;r=ha;u();q=ea!==a;R=k;ea=a;ha=r;return q}function S(k,a,r){var q=Error("Line "+k+": "+r);q.index=a;q.lineNumber=k;q.column=a-ha+1;q.description=r;return q}function U(k){var a,r;a=Array.prototype.slice.call(arguments,1);r=k.replace(/%(\d)/g,function(k,r){m(r<a.length,"Message reference must be in range");return a[r]});throw S(ea,R,r);}function T(k){var a,r;a=Array.prototype.slice.call(arguments,
1);r=k.replace(/%(\d)/g,function(k,r){m(r<a.length,"Message reference must be in range");return a[r]});r=S(ea,R,r);if(W.errors)W.errors.push(r);else throw r;}function E(k,a){var r=ga.UnexpectedToken;k&&(r=a?a:k.type===Y.EOF?ga.UnexpectedEOS:k.type===Y.Identifier?ga.UnexpectedIdentifier:k.type===Y.NumericLiteral?ga.UnexpectedNumber:k.type===Y.StringLiteral?ga.UnexpectedString:ga.UnexpectedToken,k.type===Y.Keyword&&ca&&f(k.value)&&(r=ga.StrictReservedWord));r=r.replace("%0",k?k.value:"ILLEGAL");return k&&
"number"===typeof k.lineNumber?S(k.lineNumber,k.start,r):S(ea,R,r)}function Q(k,a){throw E(k,a);}function N(k,a){var r=E(k,a);if(W.errors)W.errors.push(r);else throw r;}function q(k){var a=H();(a.type!==Y.Punctuator||a.value!==k)&&Q(a)}function k(){var k;W.errors?(k=Z,k.type===Y.Punctuator&&","===k.value?H():k.type===Y.Punctuator&&";"===k.value?(H(),N(k)):N(k,ga.UnexpectedToken)):q(",")}function r(k){var a=H();(a.type!==Y.Keyword||a.value.toLowerCase()!==k.toLowerCase())&&Q(a)}function y(k){return Z.type===
Y.Punctuator&&Z.value===k}function D(k){return Z.type===Y.Keyword&&Z.value.toLowerCase()===k.toLowerCase()}function P(){var k;59===V.charCodeAt(R)||y(";")?H():(k=ea,u(),ea===k&&Z.type!==Y.EOF&&!y("}")&&Q(Z))}function aa(k){return k.type===ba.Identifier||k.type===ba.MemberExpression}function X(k,a){var r,q,y=new L;r=ca;q=Qa();ca=r;return y.finishFunctionExpression(null,k,[],q)}function na(){var k,a;k=ca;ca=!0;a=Ua();a=X(a.params);ca=k;return a}function Da(){var k,a=new L;k=H();return k.type===Y.StringLiteral||
k.type===Y.NumericLiteral?(ca&&k.octal&&N(k,ga.StrictOctalLiteral),a.finishLiteral(k)):a.finishIdentifier(k.value)}function Ea(){var k,a,r,b=new L;k=Z;if(k.type===Y.Identifier)return a=Da(),"get"===k.value&&!y(":")&&!y("(")?(a=Da(),q("("),q(")"),k=X([]),b.finishProperty("get",a,k,!1,!1)):"set"===k.value&&!y(":")&&!y("(")?(a=Da(),q("("),k=Z,k.type!==Y.Identifier?(q(")"),N(k),k=X([])):(r=[Ia()],q(")"),k=X(r,k)),b.finishProperty("set",a,k,!1,!1)):y(":")?(H(),k=oa(),b.finishProperty("init",a,k,!1,!1)):
y("(")?(k=na(),b.finishProperty("init",a,k,!0,!1)):b.finishProperty("init",a,a,!1,!0);if(k.type===Y.EOF||k.type===Y.Punctuator)Q(k);else{a=Da();if(y(":"))return H(),k=oa(),b.finishProperty("init",a,k,!1,!1);if(y("("))return k=na(),b.finishProperty("init",a,k,!0,!1);Q(H())}}function Ha(a){var r=[],b,c,D={},d=String,e=new L;for(!0!==a&&q("{");!y("}");)a=Ea(),b=a.key.type===ba.Identifier?a.key.name:d(a.key.value),c="init"===a.kind?Ca.Data:"get"===a.kind?Ca.Get:Ca.Set,b="$"+b,Object.prototype.hasOwnProperty.call(D,
b)?(D[b]===Ca.Data?ca&&c===Ca.Data?T(ga.StrictDuplicateProperty):c!==Ca.Data&&T(ga.AccessorDataProperty):c===Ca.Data?T(ga.AccessorDataProperty):D[b]&c&&T(ga.AccessorGetSet),D[b]|=c):D[b]=c,r.push(a),y("}")||k();q("}");return e.finishObjectExpression(r)}function Aa(){var k,a,b,c;if(y("("))return q("("),y(")")?(H(),a=va.ArrowParameterPlaceHolder):(++da.parenthesisCount,a=sa(),q(")")),a;if(y("[")){a=[];var d=new L;for(q("[");!y("]");)y(",")?(H(),a.push(null)):(a.push(oa()),y("]")||q(","));H();return d.finishArrayExpression(a)}if(y("{"))return Ha();
k=Z.type;c=new L;if(k===Y.Identifier)b=c.finishIdentifier(H().value);else if(k===Y.StringLiteral||k===Y.NumericLiteral)ca&&Z.octal&&N(Z,ga.StrictOctalLiteral),b=c.finishLiteral(H());else if(k===Y.Keyword){if(D("function")){c=null;var e,E=[],P=[],h;k=new L;r("function");y("(")||(b=Z,c=Ia(),!ca&&f(b.value)&&(a=b,d=ga.StrictReservedWord));e=Ua(a);E=e.params;P=e.defaults;b=e.stricted;a=e.firstRestricted;e.message&&(d=e.message);h=ca;e=Qa();ca&&a&&Q(a,d);ca&&b&&N(b,d);ca=h;return k.finishFunctionExpression(c,
E,P,e)}D("this")?(H(),b=c.finishThisExpression()):Q(H())}else k===Y.BooleanLiteral?(a=H(),a.value="true"===a.value.toLowerCase(),b=c.finishLiteral(a)):k===Y.NullLiteral?(a=H(),a.value=null,b=c.finishLiteral(a)):y("/")||y("/\x3d")?(b="undefined"!==typeof W.tokens?c.finishLiteral(A()):c.finishLiteral(B()),J()):Q(H());return b}function za(){var a=[];q("(");if(!y(")"))for(;R<la;){a.push(oa());if(y(")"))break;k()}q(")");return a}function Ma(){q(".");var k,a=new L;k=H();k.type===Y.Identifier||(k.type===
Y.Keyword||k.type===Y.BooleanLiteral||k.type===Y.NullLiteral)||Q(k);return a.finishIdentifier(k.value)}function ka(){var k;q("[");k=sa();q("]");return k}function ma(){var k,a,q=new L;r("new");var b;m(da.allowIn,"callee of new expression always allow in keyword.");b=Z;for(k=D("new")?ma():Aa();;)if(y("["))a=ka(),k=(new G(b)).finishMemberExpression("[",k,a);else if(y("."))a=Ma(),k=(new G(b)).finishMemberExpression(".",k,a);else break;a=y("(")?za():[];return q.finishNewExpression(k,a)}function pa(){var k,
a,r=Z,q,b=da.allowIn;a=Z;da.allowIn=!0;for(k=D("new")?ma():Aa();;)if(y("."))q=Ma(),k=(new G(a)).finishMemberExpression(".",k,q);else if(y("("))q=za(),k=(new G(a)).finishCallExpression(k,q);else if(y("["))q=ka(),k=(new G(a)).finishMemberExpression("[",k,q);else break;da.allowIn=b;if(Z.type===Y.Punctuator&&(y("++")||y("--"))&&!O())aa(k)||T(ga.InvalidLHSInAssignment),a=H(),k=(new G(r)).finishPostfixExpression(a.value,k);return k}function ja(){var k,a,r;Z.type!==Y.Punctuator&&Z.type!==Y.Keyword?a=pa():
y("++")||y("--")?(r=Z,k=H(),a=ja(),aa(a)||T(ga.InvalidLHSInAssignment),a=(new G(r)).finishUnaryExpression(k.value,a)):y("+")||y("-")||y("~")||y("!")?(r=Z,k=H(),a=ja(),a=(new G(r)).finishUnaryExpression(k.value,a)):D("delete")||D("void")||D("typeof")?(r=Z,k=H(),a=ja(),a=(new G(r)).finishUnaryExpression(k.value,a),ca&&("delete"===a.operator&&a.argument.type===ba.Identifier)&&T(ga.StrictDelete)):a=pa();return a}function wa(k,a){var r=0;if(k.type!==Y.Punctuator&&k.type!==Y.Keyword)return 0;switch(k.value){case "||":r=
1;break;case "\x26\x26":r=2;break;case "|":r=3;break;case "^":r=4;break;case "\x26":r=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":r=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":r=7;break;case "in":r=a?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":r=8;break;case "+":case "-":r=9;break;case "*":case "/":case "%":r=11}return r}function Ba(){var k,a,r,q,y,b;k=Z;a=ja();if(a===va.ArrowParameterPlaceHolder)return a;r=Z;q=
wa(r,da.allowIn);if(0===q)return a;r.prec=q;H();k=[k,Z];b=ja();for(y=[a,r,b];0<(q=wa(Z,da.allowIn));){for(;2<y.length&&q<=y[y.length-2].prec;)b=y.pop(),r=y.pop().value,a=y.pop(),k.pop(),a=(new G(k[k.length-1])).finishBinaryExpression(r,a,b),y.push(a);r=H();r.prec=q;y.push(r);k.push(Z);a=ja();y.push(a)}q=y.length-1;a=y[q];for(k.pop();1<q;)a=(new G(k.pop())).finishBinaryExpression(y[q-1].value,y[q-2],a),q-=2;return a}function xa(k){var a,r,q,y,b,c,D;y=[];b=[];c=0;D={paramSet:{}};a=0;for(r=k.length;a<
r;a+=1)if(q=k[a],q.type===ba.Identifier)y.push(q),b.push(null),Ta(D,q,q.name);else if(q.type===ba.AssignmentExpression)y.push(q.left),b.push(q.right),++c,Ta(D,q.left,q.left.name);else return null;D.message===ga.StrictParamDupe&&(k=ca?D.stricted:D.firstRestricted,Q(k,D.message));0===c&&(b=[]);return{params:y,defaults:b,rest:null,stricted:D.stricted,firstRestricted:D.firstRestricted,message:D.message}}function oa(){var k,a,r,b;k=da.parenthesisCount;b=Z;var c,D,d;d=Z;a=Ba();a!==va.ArrowParameterPlaceHolder&&
y("?")&&(H(),c=da.allowIn,da.allowIn=!0,D=oa(),da.allowIn=c,q(":"),c=oa(),a=(new G(d)).finishConditionalExpression(a,D,c));if(a===va.ArrowParameterPlaceHolder||y("\x3d\x3e"))if(da.parenthesisCount===k||da.parenthesisCount===k+1)if(a.type===ba.Identifier?r=xa([a]):a.type===ba.AssignmentExpression?r=xa([a]):a.type===ba.SequenceExpression?r=xa(a.expressions):a===va.ArrowParameterPlaceHolder&&(r=xa([])),r)return k=r,b=new G(b),q("\x3d\x3e"),r=ca,a=y("{")?Qa():oa(),ca&&k.firstRestricted&&Q(k.firstRestricted,
k.message),ca&&k.stricted&&N(k.stricted,k.message),ca=r,b.finishArrowFunctionExpression(k.params,k.defaults,a,a.type!==ba.BlockStatement);Z.type!==Y.Punctuator?k=!1:(k=Z.value,k="\x3d"===k||"*\x3d"===k||"/\x3d"===k||"%\x3d"===k||"+\x3d"===k||"-\x3d"===k||"\x3c\x3c\x3d"===k||"\x3e\x3e\x3d"===k||"\x3e\x3e\x3e\x3d"===k||"\x26\x3d"===k||"^\x3d"===k||"|\x3d"===k);k&&(aa(a)||T(ga.InvalidLHSInAssignment),k=H(),r=oa(),a=(new G(b)).finishAssignmentExpression(k.value,a,r));return a}function sa(){var k,a=Z;
k=oa();if(y(",")){for(k=[k];R<la&&y(",");)H(),k.push(oa());k=(new G(a)).finishSequenceExpression(k)}return k}function Ia(){var k,a=new L;k=H();k.type!==Y.Identifier&&(ca&&k.type===Y.Keyword&&f(k.value)?N(k,ga.StrictReservedWord):Q(k));return a.finishIdentifier(k.value)}function Sa(k){var a=null,r,b=new L;r=Ia();"const"===k?(q("\x3d"),a=oa()):y("\x3d")&&(H(),a=oa());return b.finishVariableDeclarator(r,a)}function Ka(k){var a=[];do{a.push(Sa(k));if(!y(","))break;H()}while(R<la);return a}function Oa(k){var a=
Z.type,b,c;a===Y.EOF&&Q(Z);if(a===Y.Punctuator&&"{"===Z.value){if(k){q("{");var d=Z;k=R;b=ea;c=ha;H();a=y(":");Z=d;R=k;ea=b;ha=c;if((Z.type===Y.Identifier||Z.type===Y.StringLiteral)&&a)return Ha(!0);k=new L;for(b=[];R<la&&!y("}");){c=Ra();if("undefined"===typeof c)break;b.push(c)}q("}");return k.finishBlockStatement(b)}return Ha()}k=new L;if(a===Y.Punctuator)switch(Z.value){case ";":return k=new L,q(";"),k.finishEmptyStatement();case "(":return b=sa(),P(),k.finishExpressionStatement(b)}else if(a===
Y.Keyword)switch(Z.value.toLowerCase()){case "break":return b=null,r("break"),59===V.charCodeAt(R)?(H(),!da.inIteration&&!da.inSwitch&&U(ga.IllegalBreak),k=k.finishBreakStatement(null)):O()?(!da.inIteration&&!da.inSwitch&&U(ga.IllegalBreak),k=k.finishBreakStatement(null)):(Z.type===Y.Identifier&&(b=Ia(),c="$"+b.name,Object.prototype.hasOwnProperty.call(da.labelSet,c)||U(ga.UnknownLabel,b.name)),P(),null===b&&(!da.inIteration&&!da.inSwitch)&&U(ga.IllegalBreak),k=k.finishBreakStatement(b)),k;case "continue":return b=
null,r("continue"),59===V.charCodeAt(R)?(H(),da.inIteration||U(ga.IllegalContinue),k=k.finishContinueStatement(null)):O()?(da.inIteration||U(ga.IllegalContinue),k=k.finishContinueStatement(null)):(Z.type===Y.Identifier&&(b=Ia(),c="$"+b.name,Object.prototype.hasOwnProperty.call(da.labelSet,c)||U(ga.UnknownLabel,b.name)),P(),null===b&&!da.inIteration&&U(ga.IllegalContinue),k=k.finishContinueStatement(b)),k;case "for":var e,E,f;E=da.allowIn;e=a=d=null;r("for");q("(");if(y(";"))H();else{if(D("var")){da.allowIn=
!1;var p=new L;e=H();f=Ka();e=p.finishVariableDeclaration(f,e.value);da.allowIn=E;1===e.declarations.length&&D("in")&&(H(),b=e,c=sa(),e=null)}else da.allowIn=!1,e=sa(),da.allowIn=E,D("in")&&(aa(e)||T(ga.InvalidLHSInForIn),H(),b=e,c=sa(),e=null);"undefined"===typeof b&&q(";")}"undefined"===typeof b&&(y(";")||(a=sa()),q(";"),y(")")||(d=sa()));q(")");f=da.inIteration;da.inIteration=!0;E=Oa(!0);da.inIteration=f;return"undefined"===typeof b?k.finishForStatement(e,a,d,E):k.finishForInStatement(b,c,E);case "function":return Va(k);
case "if":return r("if"),q("("),b=sa(),q(")"),c=Oa(!0),D("else")?(H(),a=Oa(!0)):a=null,k.finishIfStatement(b,c,a);case "return":return b=null,r("return"),da.inFunctionBody||T(ga.IllegalReturn),32===V.charCodeAt(R)&&h(V.charCodeAt(R+1))?(b=sa(),P(),k=k.finishReturnStatement(b)):O()?k=k.finishReturnStatement(null):(y(";")||!y("}")&&Z.type!==Y.EOF&&(b=sa()),P(),k=k.finishReturnStatement(b)),k;case "var":return r("var"),b=Ka(),P(),k.finishVariableDeclaration(b,"var")}b=sa();if(b.type===ba.Identifier&&
y(":"))return H(),a="$"+b.name,Object.prototype.hasOwnProperty.call(da.labelSet,a)&&U(ga.Redeclaration,"Label",b.name),da.labelSet[a]=!0,c=Oa(!1),delete da.labelSet[a],k.finishLabeledStatement(b,c);P();return k.finishExpressionStatement(b)}function Qa(){var k,a=[],r,b,c,D,d,e=new L;for(q("{");R<la&&Z.type===Y.StringLiteral;){r=Z;k=Ra();a.push(k);if(k.expression.type!==ba.Literal)break;k=V.slice(r.start+1,r.end-1);"use strict"===k?(ca=!0,b&&N(b,ga.StrictOctalLiteral)):!b&&r.octal&&(b=r)}r=da.labelSet;
b=da.inIteration;c=da.inSwitch;D=da.inFunctionBody;d=da.parenthesizedCount;da.labelSet={};da.inIteration=!1;da.inSwitch=!1;da.inFunctionBody=!0;for(da.parenthesizedCount=0;R<la&&!y("}");){k=Ra();if("undefined"===typeof k)break;a.push(k)}q("}");da.labelSet=r;da.inIteration=b;da.inSwitch=c;da.inFunctionBody=D;da.parenthesizedCount=d;return e.finishBlockStatement(a)}function Ta(k,a,r){var q="$"+r;ca?Object.prototype.hasOwnProperty.call(k.paramSet,q)&&(k.stricted=a,k.message=ga.StrictParamDupe):k.firstRestricted||
(f(r)?(k.firstRestricted=a,k.message=ga.StrictReservedWord):Object.prototype.hasOwnProperty.call(k.paramSet,q)&&(k.firstRestricted=a,k.message=ga.StrictParamDupe));k.paramSet[q]=!0}function Ua(k){k={params:[],defaultCount:0,defaults:[],firstRestricted:k};q("(");if(!y(")"))for(k.paramSet={};R<la;){var a=k,r=void 0,b=void 0,c=void 0,r=Z,b=Ia();Ta(a,r,r.value);y("\x3d")&&(H(),c=oa(),++a.defaultCount);a.params.push(b);a.defaults.push(c);if(y(")"))break;q(",")}q(")");0===k.defaultCount&&(k.defaults=[]);
return{params:k.params,defaults:k.defaults,stricted:k.stricted,firstRestricted:k.firstRestricted,message:k.message}}function Va(){var k,a=[],q=[],y,b,c,D,d,e=new L;r("function");a=Z;k=Ia();!ca&&f(a.value)&&(c=a,D=ga.StrictReservedWord);y=Ua(c);a=y.params;q=y.defaults;b=y.stricted;c=y.firstRestricted;y.message&&(D=y.message);d=ca;y=Qa();ca&&c&&Q(c,D);ca&&b&&N(b,D);ca=d;return e.finishFunctionDeclaration(k,a,q,y)}function Ra(){if(Z.type===Y.Keyword)switch(Z.value){default:return"function"===Z.value.toLowerCase()?
Va():Oa(!1)}if(Z.type!==Y.EOF)return Oa(!1)}function ia(){var k,a,r,q=[];for(k=0;k<W.tokens.length;++k)a=W.tokens[k],r={type:a.type,value:a.value},a.regex&&(r.regex={pattern:a.regex.pattern,flags:a.regex.flags}),W.range&&(r.range=a.range),W.loc&&(r.loc=a.loc),q.push(r);W.tokens=q}var Y,qa,ta,ba,va,Ca,ga,fa,V,ca,R,ea,ha,la,Z,da,W;Y={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};qa={};qa[Y.BooleanLiteral]="Boolean";qa[Y.EOF]=
"\x3cend\x3e";qa[Y.Identifier]="Identifier";qa[Y.Keyword]="Keyword";qa[Y.NullLiteral]="Null";qa[Y.NumericLiteral]="Numeric";qa[Y.Punctuator]="Punctuator";qa[Y.StringLiteral]="String";qa[Y.RegularExpression]="RegularExpression";ta="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
ba={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};va={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
Ca={Data:1,Get:2,Set:4};ga={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};fa={NonAsciiIdentifierStart:RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),
NonAsciiIdentifierPart:RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};
G.prototype=L.prototype={processComment:function(){var k,a,r,q=W.bottomRightStack,y,b,c=q[q.length-1];if(!(this.type===ba.Program&&0<this.body.length)){if(0<W.trailingComments.length){r=[];for(y=W.trailingComments.length-1;0<=y;--y)b=W.trailingComments[y],b.range[0]>=this.range[1]&&(r.unshift(b),W.trailingComments.splice(y,1));W.trailingComments=[]}else c&&(c.trailingComments&&c.trailingComments[0].range[0]>=this.range[1])&&(r=c.trailingComments,delete c.trailingComments);if(c)for(;c&&c.range[0]>=
this.range[0];)k=c,c=q.pop();if(k)k.leadingComments&&k.leadingComments[k.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=k.leadingComments,k.leadingComments=void 0);else if(0<W.leadingComments.length){a=[];for(y=W.leadingComments.length-1;0<=y;--y)b=W.leadingComments[y],b.range[1]<=this.range[0]&&(a.unshift(b),W.leadingComments.splice(y,1))}a&&0<a.length&&(this.leadingComments=a);r&&0<r.length&&(this.trailingComments=r);q.push(this)}},finish:function(){W.range&&(this.range[1]=
R);W.loc&&(this.loc.end=new I,W.source&&(this.loc.source=W.source));W.attachComment&&this.processComment()},finishArrayExpression:function(k){this.type=ba.ArrayExpression;this.elements=k;this.finish();return this},finishAssignmentExpression:function(k,a,r){this.type=ba.AssignmentExpression;this.operator=k;this.left=a;this.right=r;this.finish();return this},finishBinaryExpression:function(k,a,r){this.type="||"===k||"\x26\x26"===k?ba.LogicalExpression:ba.BinaryExpression;this.operator=k;this.left=a;
this.right=r;this.finish();return this},finishBlockStatement:function(k){this.type=ba.BlockStatement;this.body=k;this.finish();return this},finishBreakStatement:function(k){this.type=ba.BreakStatement;this.label=k;this.finish();return this},finishCallExpression:function(k,a){this.type=ba.CallExpression;this.callee=k;this.arguments=a;this.finish();return this},finishConditionalExpression:function(k,a,r){this.type=ba.ConditionalExpression;this.test=k;this.consequent=a;this.alternate=r;this.finish();
return this},finishContinueStatement:function(k){this.type=ba.ContinueStatement;this.label=k;this.finish();return this},finishEmptyStatement:function(){this.type=ba.EmptyStatement;this.finish();return this},finishExpressionStatement:function(k){this.type=ba.ExpressionStatement;this.expression=k;this.finish();return this},finishForStatement:function(k,a,r,q){this.type=ba.ForStatement;this.init=k;this.test=a;this.update=r;this.body=q;this.finish();return this},finishForInStatement:function(k,a,r){this.type=
ba.ForInStatement;this.left=k;this.right=a;this.body=r;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(k,a,r,q){this.type=ba.FunctionDeclaration;this.id=k;this.params=a;this.defaults=r;this.body=q;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(k,a,r,q){this.type=ba.FunctionExpression;this.id=k;this.params=a;this.defaults=r;this.body=q;this.rest=null;this.expression=this.generator=!1;this.finish();return this},
finishIdentifier:function(k){this.type=ba.Identifier;this.name=k;this.finish();return this},finishIfStatement:function(k,a,r){this.type=ba.IfStatement;this.test=k;this.consequent=a;this.alternate=r;this.finish();return this},finishLiteral:function(k){this.type=ba.Literal;this.value=k.value;this.raw=V.slice(k.start,k.end);k.regex&&(this.regex=k.regex);this.finish();return this},finishMemberExpression:function(k,a,r){this.type=ba.MemberExpression;this.computed="["===k;this.object=a;this.property=r;
this.finish();return this},finishObjectExpression:function(k){this.type=ba.ObjectExpression;this.properties=k;this.finish();return this},finishPostfixExpression:function(k,a){this.type=ba.UpdateExpression;this.operator=k;this.argument=a;this.prefix=!1;this.finish();return this},finishProgram:function(k){this.type=ba.Program;this.body=k;this.finish();return this},finishProperty:function(k,a,r,q,y){this.type=ba.Property;this.key=a;this.value=r;this.kind=k;this.method=q;this.shorthand=y;this.finish();
return this},finishReturnStatement:function(k){this.type=ba.ReturnStatement;this.argument=k;this.finish();return this},finishUnaryExpression:function(k,a){this.type="++"===k||"--"===k?ba.UpdateExpression:ba.UnaryExpression;this.operator=k;this.argument=a;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(k,a){this.type=ba.VariableDeclaration;this.declarations=k;this.kind=a;this.finish();return this},finishVariableDeclarator:function(k,a){this.type=ba.VariableDeclarator;this.id=
k;this.init=a;this.finish();return this}};g.version="2.0.0-dev";g.tokenize=function(k,a){var r,q;r=String;"string"!==typeof k&&!(k instanceof String)&&(k=r(k));V=k;R=0;ea=0<V.length?1:0;ha=0;la=V.length;Z=null;da={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};W={};a=a||{};a.tokens=!0;W.tokens=[];W.tokenize=!0;W.openParenToken=-1;W.openCurlyToken=-1;W.range="boolean"===typeof a.range&&a.range;W.loc="boolean"===typeof a.loc&&a.loc;"boolean"===typeof a.comment&&
a.comment&&(W.comments=[]);"boolean"===typeof a.tolerant&&a.tolerant&&(W.errors=[]);try{J();if(Z.type===Y.EOF)return W.tokens;for(H();Z.type!==Y.EOF;)try{H()}catch(y){if(W.errors){W.errors.push(y);break}else throw y;}ia();q=W.tokens;"undefined"!==typeof W.comments&&(q.comments=W.comments);"undefined"!==typeof W.errors&&(q.errors=W.errors)}catch(b){throw b;}finally{W={}}return q};g.parse=function(k,a){var r,q;q=String;"string"!==typeof k&&!(k instanceof String)&&(k=q(k));V=k;R=0;ea=0<V.length?1:0;
ha=0;la=V.length;Z=null;da={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};W={};"undefined"!==typeof a&&(W.range="boolean"===typeof a.range&&a.range,W.loc="boolean"===typeof a.loc&&a.loc,W.attachComment="boolean"===typeof a.attachComment&&a.attachComment,W.loc&&(null!==a.source&&void 0!==a.source)&&(W.source=q(a.source)),"boolean"===typeof a.tokens&&a.tokens&&(W.tokens=[]),"boolean"===typeof a.comment&&a.comment&&(W.comments=[]),"boolean"===
typeof a.tolerant&&a.tolerant&&(W.errors=[]),W.attachComment&&(W.range=!0,W.comments=[],W.bottomRightStack=[],W.trailingComments=[],W.leadingComments=[]));try{var y;u();J();y=new L;ca=!1;var b;q=[];for(var c,D,d;R<la;){c=Z;if(c.type!==Y.StringLiteral)break;b=Ra();q.push(b);if(b.expression.type!==ba.Literal)break;D=V.slice(c.start+1,c.end-1);"use strict"===D?(ca=!0,d&&N(d,ga.StrictOctalLiteral)):!d&&c.octal&&(d=c)}for(;R<la;){b=Ra();if("undefined"===typeof b)break;q.push(b)}r=y.finishProgram(q);"undefined"!==
typeof W.comments&&(r.comments=W.comments);"undefined"!==typeof W.tokens&&(ia(),r.tokens=W.tokens);"undefined"!==typeof W.errors&&(r.errors=W.errors)}catch(e){throw e;}finally{W={}}return r};g.Syntax=function(){var k,a={};"function"===typeof Object.create&&(a=Object.create(null));for(k in ba)ba.hasOwnProperty(k)&&(a[k]=ba[k]);"function"===typeof Object.freeze&&Object.freeze(a);return a}()})},"esri/arcade/arcadeCompiler":function(){define("require exports ../geometry/Polygon ../graphic ../geometry/Polyline ../geometry/Point ../geometry/Extent ../geometry/Multipoint ../SpatialReference ./languageUtils ./treeAnalysis ./Dictionary ./Feature ./functions/date ./functions/string ./functions/maths ./functions/geometry ./functions/stats ./ImmutablePathArray ./ImmutablePointArray ../geometry/Geometry".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z){function F(k,a,r){try{return r(k,null,a)}catch(q){throw q;}}function H(k,a){try{switch(a.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return L(k,a);case "VariableDeclaration":for(var r=[],q=0;q<a.declarations.length;q++)r.push(H(k,a.declarations[q]));return r.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return M(k,a);case "FunctionDeclaration":var y=a.id.name.toLowerCase(),b={applicationCache:void 0===
k.applicationCache?null:k.applicationCache,spatialReference:k.spatialReference,console:k.console,symbols:k.symbols,localScope:{_SymbolsMap:{}},depthCounter:k.depthCounter+1,globalScope:k.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");for(var r="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; var lscope \x3d [];\n ",c=0;c<a.params.length;c++){var D=a.params[c].name.toLowerCase(),d=Q(D,k);b.localScope._SymbolsMap[D]=
d;r+="lscope['"+d+"']\x3darguments["+c.toString()+"];\n"}r+=M(b,a.body)+"\n return lastStatement; }, runtimeCtx))";r+="\n lastStatement \x3d lc.voidOperation; \n";void 0!==k.globalScope[y]?q="gscope['"+y+"']\x3d"+r:void 0!==k.globalScope._SymbolsMap[y]?q="gscope['"+k.globalScope._SymbolsMap[y]+"']\x3d"+r:(d=Q(y,k),k.globalScope._SymbolsMap[y]=d,q="gscope['"+d+"']\x3d"+r);return q;case "ReturnStatement":var e;e=null===a.argument?"return lc.voidOperation;":"return "+H(k,a.argument)+";";return e;case "IfStatement":if("AssignmentExpression"===
a.test.type||"UpdateExpression"===a.test.type)throw Error(p.nodeErrorMessage(a.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var E=H(k,a.test),P=N(k),f="var "+P+" \x3d "+E+";\n if ("+P+" \x3d\x3d\x3d true) {\n"+K(k,a.consequent)+"\n }\n",f=null!==a.alternate?f+("else if ("+P+"\x3d\x3d\x3dfalse)   { \n"+K(k,a.alternate)+"}\n"):f+("else if ("+P+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return f+="else { lang.error({type: '"+a.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";
case "ExpressionStatement":var h;h="AssignmentExpression"===a.expression.type?"lastStatement \x3d lc.voidOperation; "+H(k,a.expression)+" \n ":"lastStatement \x3d "+H(k,a.expression)+";";return h;case "AssignmentExpression":return I(k,a);case "UpdateExpression":return J(k,a);case "BreakStatement":return"break;";case "ContinueStatement":return"continue;";case "ForStatement":r="lastStatement \x3d lc.voidOperation; \n";null!==a.init&&(r+=H(k,a.init));var aa=N(k),n=N(k),r=r+("var "+aa+" \x3d true;"),
r=r+"\n do { ";null!==a.update&&(r+=" if ("+aa+"\x3d\x3d\x3dfalse) {\n "+H(k,a.update)+"  \n}\n "+aa+"\x3dfalse; \n");null!==a.test&&(r+="var "+n+" \x3d "+H(k,a.test)+";",r+="if ("+n+"\x3d\x3d\x3dfalse) { break; } else if ("+n+"!\x3d\x3dtrue) { lang.error({type: '"+a.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");r+=H(k,a.body);null!==a.update&&(r+="\n "+H(k,a.update));return r+("\n"+aa+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation;");case "ForInStatement":var s=
N(k),g=N(k),u=N(k),t="var "+s+" \x3d "+H(k,a.right)+";\n";"VariableDeclaration"===a.left.type&&(t+=H(k,a.left));var v="VariableDeclaration"===a.left.type?a.left.declarations[0].id.name:a.left.name,v=v.toLowerCase(),r="";null!==k.localScope&&(void 0!==k.localScope[v]?r="lscope['"+v+"']":void 0!==k.localScope._SymbolsMap[v]&&(r="lscope['"+k.localScope._SymbolsMap[v]+"']"));""===r&&(void 0!==k.globalScope[v]?r="gscope['"+v+"']":void 0!==k.globalScope._SymbolsMap[v]&&(r="gscope['"+k.globalScope._SymbolsMap[v]+
"']"));t+="if ("+s+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ";t+="else if (lc.isArray("+s+") || lc.isString("+s+")) {";t+="var "+g+"\x3d"+s+".length; \n";t+="for(var "+u+"\x3d0; "+u+"\x3c"+g+"; "+u+"++) {\n";t+=r+"\x3d"+u+";\n";t+=H(k,a.body);t+="\n}\n";t+=" lastStatement \x3d lc.voidOperation; \n";t+=" \n}\n";t+="else if (lc.isImmutableArray("+s+")) {";t+="var "+g+"\x3d"+s+".length(); \n";t+="for(var "+u+"\x3d0; "+u+"\x3c"+g+"; "+u+"++) {\n";t+=r+"\x3d"+u+";\n";t+=H(k,a.body);
t+="\n}\n";t+=" lastStatement \x3d lc.voidOperation; \n";t+=" \n}\n";t+="else if (( "+s+" instanceof lang.Dictionary) || ( "+s+" instanceof lang.Feature)) {";t+="var "+g+"\x3d"+s+".keys(); \n";t+="for(var "+u+"\x3d0; "+u+"\x3c"+g+".length; "+u+"++) {\n";t+=r+"\x3d"+g+"["+u+"];\n";t+=H(k,a.body);t+="\n}\n";t+=" lastStatement \x3d lc.voidOperation; \n";t+=" \n}\n";return t+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return O(k,a);case "MemberExpression":var m;try{r=void 0,r=
!0===a.computed?H(k,a.property):"'"+a.property.name+"'",m="lang.member("+H(k,a.object)+","+r+")"}catch(x){throw x;}return m;case "Literal":return null===a.value||void 0===a.value?"null":JSON.stringify(a.value);case "ThisExpression":throw Error(p.nodeErrorMessage(a,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==a.callee.type)throw Error(p.nodeErrorMessage(a,"RUNTIME","ONLYNODESSUPPORTED"));var w=a.callee.name.toLowerCase(),q="";null!==k.localScope&&(void 0!==k.localScope[w]?
q="lscope['"+w+"']":void 0!==k.localScope._SymbolsMap[w]&&(q="lscope['"+k.localScope._SymbolsMap[w]+"']"));""===q&&(void 0!==k.globalScope[w]?q="gscope['"+w+"']":void 0!==k.globalScope._SymbolsMap[w]&&(q="gscope['"+k.globalScope._SymbolsMap[w]+"']"));if(""!==q){y="[";for(b=0;b<a.arguments.length;b++)0<b&&(y+=", "),y+=H(k,a.arguments[b]);r="lang.callfunc("+q+","+(y+"]")+",runtimeCtx)"}else throw Error(p.nodeErrorMessage(a,"RUNTIME","NOTFOUND"));}catch(B){throw B;}return r;case "UnaryExpression":var A;
try{A="lang.unary("+H(k,a.argument)+",'"+a.operator+"')"}catch(G){throw G;}return A;case "BinaryExpression":var z;try{z="lang.binary("+H(k,a.left)+","+H(k,a.right)+",'"+a.operator+"')"}catch(C){throw C;}return z;case "LogicalExpression":var F;try{if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)throw Error(p.nodeErrorMessage(a.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type)throw Error(p.nodeErrorMessage(a.right,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));F="lang.logical("+H(k,a.left)+","+H(k,a.right)+",'"+a.operator+"')"}catch(S){throw S;}return F;case "ConditionalExpression":throw Error(p.nodeErrorMessage(a,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{r=[];for(q=0;q<a.elements.length;q++)"Literal"===a.elements[q].type?r.push(H(k,a.elements[q])):r.push("lang.aCheck("+H(k,a.elements[q])+",'ArrayExpression')");c="["+r.join(",")+"]"}catch(U){throw U;}return c;case "ObjectExpression":r="lang.dictionary([";
for(q=0;q<a.properties.length;q++){var T=a.properties[q],ga="Identifier"===T.key.type?"'"+T.key.name+"'":H(k,T.key),fa=H(k,T.value);0<q&&(r+=",");r+="lang.strCheck("+ga+",'ObjectExpression'),lang.aCheck("+fa+", 'ObjectExpression')"}return r+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(p.nodeErrorMessage(a,"RUNTIME","NOTSUPPORTED"));default:throw Error(p.nodeErrorMessage(a,"RUNTIME","UNREOGNISED"));}}catch(V){throw V;}}function J(k,a){var r=null,q="";if("MemberExpression"===
a.argument.type)return r=H(k,a.argument.object),q=!0===a.argument.computed?H(k,a.argument.property):"'"+a.argument.property.name+"'","lang.memberupdate("+r+","+q+",'"+a.operator+"',"+a.prefix+")";r=a.argument.name.toLowerCase();if(null!==k.localScope){if(void 0!==k.localScope[r])return"lang.update(lscope, '"+r+"','"+a.operator+"',"+a.prefix+")";if(void 0!==k.localScope._SymbolsMap[r])return"lang.update(lscope, '"+k.localScope._SymbolsMap[r]+"','"+a.operator+"',"+a.prefix+")"}if(void 0!==k.globalScope[r])return"lang.update(gscope, '"+
r+"','"+a.operator+"',"+a.prefix+")";if(void 0!==k.globalScope._SymbolsMap[r])return"lang.update(gscope, '"+k.globalScope._SymbolsMap[r]+"','"+a.operator+"',"+a.prefix+")";throw Error("Variable not recognised");}function I(k,a){var r=H(k,a.right),q=null,y="";if("MemberExpression"===a.left.type)return q=H(k,a.left.object),y=!0===a.left.computed?H(k,a.left.property):"'"+a.left.property.name+"'","lang.assignmember("+q+","+y+",'"+a.operator+"',"+r+");";q=a.left.name.toLowerCase();if(null!==k.localScope){if(void 0!==
k.localScope[q])return"lscope['"+q+"']\x3dlang.assign("+r+",'"+a.operator+"', lscope['"+q+"']); ";if(void 0!==k.localScope._SymbolsMap[q])return"lscope['"+k.localScope._SymbolsMap[q]+"']\x3dlang.assign("+r+",'"+a.operator+"', lscope['"+k.localScope._SymbolsMap[q]+"']); "}if(void 0!==k.globalScope[q])return"gscope['"+q+"']\x3dlang.assign("+r+",'"+a.operator+"', gscope['"+q+"']); ";if(void 0!==k.globalScope._SymbolsMap[q])return"gscope['"+k.globalScope._SymbolsMap[q]+"']\x3dlang.assign("+r+",'"+a.operator+
"', gscope['"+k.globalScope._SymbolsMap[q]+"']); ";throw Error("Variable not recognised");}function K(k,a){return"BlockStatement"===a.type?H(k,a):"ReturnStatement"===a.type?H(k,a):"BreakStatement"===a.type?H(k,a):"ContinueStatement"===a.type?H(k,a):"UpdateExpression"===a.type?"lastStatement \x3d "+H(k,a)+";":"ExpressionStatement"===a.type?H(k,a):"ObjectExpression"===a.type?"lastStatement \x3d "+H(k,a)+";":H(k,a)}function M(k,a){for(var r="",q=0;q<a.body.length;q++)r="ReturnStatement"===a.body[q].type?
r+(H(k,a.body[q])+" \n"):"BreakStatement"===a.body[q].type?r+(H(k,a.body[q])+" \n"):"ContinueStatement"===a.body[q].type?r+(H(k,a.body[q])+" \n"):"UpdateExpression"===a.body[q].type?r+("lastStatement \x3d "+H(k,a.body[q])+"; \n"):"ObjectExpression"===a.body[q].type?r+("lastStatement \x3d "+H(k,a.body[q])+"; \n"):r+(H(k,a.body[q])+" \n");return r}function L(k,a){var r=null===a.init?null:H(k,a.init);r===e.voidOperation&&(r=null);var q=a.id.name.toLowerCase();if(null!==k.localScope){if(void 0!==k.localScope[q])return"lscope['"+
q+"']\x3d"+r+";";if(void 0!==k.localScope._SymbolsMap[q])return"lscope['"+k.localScope._SymbolsMap[q]+"']\x3d"+r+";";var y=Q(q,k);k.localScope._SymbolsMap[q]=y;return"lscope['"+y+"']\x3d"+r+";"}if(void 0!==k.globalScope[q])return"gscope['"+q+"']\x3d"+r+";";if(void 0!==k.globalScope._SymbolsMap[q])return"gscope['"+k.globalScope._SymbolsMap[q]+"']\x3d"+r+";";y=Q(q,k);k.globalScope._SymbolsMap[q]=y;return"gscope['"+y+"']\x3d"+r+";"}function G(k,a,q){a=a.toLowerCase();switch(a){case "hasz":return k=k.hasZ,
void 0===k?!1:k;case "hasm":return k=k.hasM,void 0===k?!1:k;case "spatialreference":return a=k.spatialReference._arcadeCacheId,void 0===a&&(q=!0,Object.freeze&&Object.isFrozen(k.spatialReference)&&(q=!1),q&&(r++,a=k.spatialReference._arcadeCacheId=r)),k=new s({wkt:k.spatialReference.wkt,wkid:k.spatialReference.wkid}),void 0!==a&&(k._arcadeCacheId="SPREF"+a.toString()),k}switch(k.type){case "extent":switch(a){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return k=
k[a],void 0!==k?k:null;case "type":return"Extent"}break;case "polygon":switch(a){case "rings":return a=e.isVersion4?k.cache._arcadeCacheId:k.getCacheValue("_arcadeCacheId"),void 0===a&&(r++,a=r,e.isVersion4?k.cache._arcadeCacheId=a:k.setCacheValue("_arcadeCacheId",a)),k=new A(k.rings,k.spatialReference,!0===k.hasZ,!0===k.hasM,a);case "type":return"Polygon"}break;case "point":switch(a){case "x":case "y":case "z":case "m":return void 0!==k[a]?k[a]:null;case "type":return"Point"}break;case "polyline":switch(a){case "paths":return a=
e.isVersion4?k.cache._arcadeCacheId:k.getCacheValue("_arcadeCacheId"),void 0===a&&(r++,a=r,e.isVersion4?k.cache._arcadeCacheId=a:k.setCacheValue("_arcadeCacheId",a)),k=new A(k.paths,k.spatialReference,!0===k.hasZ,!0===k.hasM,a);case "type":return"Polyline"}break;case "multipoint":switch(a){case "points":return a=e.isVersion4?k.cache._arcadeCacheId:k.getCacheValue("_arcadeCacheId"),void 0===a&&(r++,a=r,e.isVersion4?k.cache._arcadeCacheId=a:k.setCacheValue("_arcadeCacheId",a)),k=new C(k.points,k.spatialReference,
!0===k.hasZ,!0===k.hasM,a,1);case "type":return"Multipoint"}}throw Error(p.nodeErrorMessage(q,"RUNTIME","PROPERTYNOTFOUND"));}function O(k,a){try{var r=a.name.toLowerCase();if(null!==k.localScope){if(void 0!==k.localScope[r])return"lscope['"+r+"']";if(void 0!==k.localScope._SymbolsMap[r])return"lscope['"+k.localScope._SymbolsMap[r]+"']"}if(void 0!==k.globalScope[r])return"gscope['"+r+"']";if(void 0!==k.globalScope._SymbolsMap[r])return"gscope['"+k.globalScope._SymbolsMap[r]+"']";throw Error(p.nodeErrorMessage(a,
"RUNTIME","VARIABLENOTFOUND"));}catch(q){throw q;}}function S(k){return null===k?"":e.isArray(k)||e.isImmutableArray(k)?"Array":e.isDate(k)?"Date":e.isString(k)?"String":e.isBoolean(k)?"Boolean":e.isNumber(k)?"Number":k instanceof s?"Dictionary":k instanceof u?"Feature":k instanceof c?"Point":k instanceof a?"Polygon":k instanceof d?"Polyline":k instanceof n?"Multipoint":k instanceof h?"Extent":e.isFunctionParameter(k)?"Function":k===e.voidOperation?"":"number"===typeof k&&isNaN(k)?"Number":"Unrecognised Type"}
function U(k,a,r,q){try{if(e.equalityTest(a[r],q))return a[r+1];var y=a.length-r;return 1===y?a[r]:2===y?null:U(k,a,r+2,q)}catch(b){throw b;}}function T(k,a,r,q){try{if(!0===q)return a[r+1];if(3===a.length-r)return a[r+2];var y=a[r+2];if(!1===e.isBoolean(y))throw Error("WHEN needs boolean test conditions");return T(k,a,r+2,y)}catch(b){throw b;}}function E(k,a){var r=k.length,q=Math.floor(r/2);if(0===r)return[];if(1===r)return[k[0]];for(var y=E(k.slice(0,q),a),r=E(k.slice(q,r),a),q=[];0<y.length||
0<r.length;)if(0<y.length&&0<r.length){var b=a(y[0],r[0]);isNaN(b)&&(b=0);0>=b?(q.push(y[0]),y=y.slice(1)):(q.push(r[0]),r=r.slice(1))}else 0<y.length?(q.push(y[0]),y=y.slice(1)):0<r.length&&(q.push(r[0]),r=r.slice(1));return q}function Q(k,a){a.symbols.symbolCounter++;return"_T"+a.symbols.symbolCounter.toString()}function N(k){k.symbols.symbolCounter++;return"_Tvar"+k.symbols.symbolCounter.toString()}function q(k,a,r){var q={};k||(k={});r||(r={});q._SymbolsMap={};q.textformatting=1;q.infinity=1;
q.pi=1;for(var y in a)q[y]=1;for(y in r)q[y]=1;for(y in k)q[y]=1;return q}function k(k){}var r=0,y={};t.registerFunctions(y,F);w.registerFunctions(y,F);v.registerFunctions(y,F);x.registerFunctions(y,F);B.registerFunctions(y,F);y["typeof"]=function(k,a){return F(k,a,function(k,a,r){e.pcCheck(r,1,1);k=S(r[0]);if("Unrecognised Type"===k)throw Error("Unrecognised Type");return k})};y.iif=function(k,a){try{return F(k,a,function(k,a,r){e.pcCheck(r,3,3);if(!1===e.isBoolean(r[0]))throw Error("IF Function must have a boolean test condition");
return r[0]?r[1]:r[2]})}catch(r){throw r;}};y.decode=function(k,a){try{return F(k,a,function(a,r,q){if(2>q.length)throw Error("Missing Parameters");if(2===q.length)return q[1];if(0===(q.length-1)%2)throw Error("Must have a default value result.");return U(k,q,1,q[0])})}catch(r){throw r;}};y.when=function(k,a){try{return F(k,a,function(a,r,q){if(3>q.length)throw Error("Missing Parameters");if(0===q.length%2)throw Error("Must have a default value result.");a=q[0];if(!1===e.isBoolean(a))throw Error("WHEN needs boolean test conditions");
return T(k,q,0,a)})}catch(r){throw r;}};y.top=function(k,a){return F(k,a,function(k,a,r){e.pcCheck(r,2,2);if(e.isArray(r[0]))return e.toNumber(r[1])>=r[0].length?r[0].slice(0):r[0].slice(0,e.toNumber(r[1]));if(e.isImmutableArray(r[0]))return e.toNumber(r[1])>=r[0].length()?r[0].slice(0):r[0].slice(0,e.toNumber(r[1]));throw Error("Top cannot accept this parameter type");})};y.first=function(k,a){return F(k,a,function(k,a,r){e.pcCheck(r,1,1);return e.isArray(r[0])?0===r[0].length?null:r[0][0]:e.isImmutableArray(r[0])?
0===r[0].length()?null:r[0].get(0):null})};y.sort=function(k,a){return F(k,a,function(k,a,r){e.pcCheck(r,1,2);a=r[0];e.isImmutableArray(a)&&(a=a.toArray());if(!1===e.isArray(a))throw Error("Illegal Argument");if(1<r.length){if(!1===e.isFunctionParameter(r[1]))throw Error("Illegal Argument");a=E(a,function(a,q){return aa.callfunc(r[1],[a,q],k)})}else{if(0===a.length)return[];for(var q={},y=0;y<a.length;y++){var b=S(a[y]);""!==b&&(q[b]=!0)}if(!0===q.Array||!0===q.Dictionary||!0===q.Feature||!0===q.Point||
!0===q.Polygon||!0===q.Polyline||!0===q.Multipoint||!0===q.Extent||!0===q.Function)return a.slice(0);var y=0,b="",c;for(c in q)y++,b=c;a=1<y||"String"===b?E(a,function(k,a){if(null===k||void 0===k||k===e.voidOperation)return null===a||void 0===a||a===e.voidOperation?0:1;if(null===a||void 0===a||a===e.voidOperation)return-1;var r=e.toString(k),q=e.toString(a);return r<q?-1:r===q?0:1}):"Number"===b?E(a,function(k,a){return k-a}):"Boolean"===b?E(a,function(k,a){return k===a?0:a?-1:1}):"Date"===b?E(a,
function(k,a){return a-k}):a.slice(0)}return a})};for(var D in y)y[D]=new e.NativeFunction(y[D]);var P=function(){};P.prototype=y;m.functionHelper={fixSpatialReference:e.fixSpatialReference,parseArguments:function(k,a){for(var r=[],q=0;q<a.arguments.length;q++)r.push(H(k,a.arguments[q]));return r},standardFunction:F};m.executeScript=function(k,a,r){return k(a,r)};m.extractFieldLiterals=function(k,a){void 0===a&&(a=!1);return p.findFieldLiterals(k,a)};m.validateScript=function(k,a){return p.validateScript(k,
a,"simple")};m.referencesMember=function(k,a){return p.referencesMember(k,a)};m.referencesFunction=function(k,a){return p.referencesFunction(k,a)};var aa={error:function(k,a,r){throw Error(p.nodeErrorMessage(k,a,r));},functionDepthchecker:function(k,a){return function(){a.depthCounte++;if(64<a.depthCounter)throw Error("Exceeded maximum function depth");var r=k.apply(this,arguments);a.depthCounte--;return r}},aCheck:function(k,a){if(e.isFunctionParameter(k))throw Error(p.nodeErrorMessage({type:a},
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return k===e.voidOperation?null:k},Dictionary:s,Feature:u,dictionary:function(k){for(var a={},r=0;r<k.length;r+=2){if(e.isFunctionParameter(k[r+1]))throw Error("Illegal Argument");if(!1===e.isString(k[r]))throw Error("Illegal Argument");a[k[r].toString()]=k[r+1]===e.voidOperation?null:k[r+1]}k=new s(a);k.immutable=!1;return k},strCheck:function(k,a){if(!1===e.isString(k))throw Error("Illegal Argument");return k},unary:function(k,a){if(e.isBoolean(k)){if("!"===
a)return!k;if("-"===a)return-1*e.toNumber(k);if("+"===a)return 1*e.toNumber(k);throw Error(p.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===a)return-1*e.toNumber(k);if("+"===a)return 1*e.toNumber(k);throw Error(p.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logical:function(k,a,r){if(e.isBoolean(k)&&e.isBoolean(a))switch(r){case "||":return k||a;case "\x26\x26":return k&&a;default:throw Error(p.nodeErrorMessage("LogicalExpression",
"RUNTIME","ONLYORORAND"));}else throw Error(p.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));},binary:function(k,a,r){switch(r){case "\x3d\x3d":return e.equalityTest(k,a);case "\x3d":return e.equalityTest(k,a);case "!\x3d":return!e.equalityTest(k,a);case "\x3c":return e.greaterThanLessThan(k,a,r);case "\x3e":return e.greaterThanLessThan(k,a,r);case "\x3c\x3d":return e.greaterThanLessThan(k,a,r);case "\x3e\x3d":return e.greaterThanLessThan(k,a,r);case "+":return e.isString(k)||e.isString(a)?
e.toString(k)+e.toString(a):e.toNumber(k)+e.toNumber(a);case "-":return e.toNumber(k)-e.toNumber(a);case "*":return e.toNumber(k)*e.toNumber(a);case "/":return e.toNumber(k)/e.toNumber(a);case "%":return e.toNumber(k)%e.toNumber(a);default:throw Error(p.nodeErrorMessage({type:"BinaryExpression"},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(k,a,r){switch(a){case "\x3d":return k===e.voidOperation?null:k;case "/\x3d":return e.toNumber(r)/e.toNumber(k);case "*\x3d":return e.toNumber(r)*e.toNumber(k);
case "-\x3d":return e.toNumber(r)-e.toNumber(k);case "+\x3d":return e.isString(r)||e.isString(k)?e.toString(r)+e.toString(k):e.toNumber(r)+e.toNumber(k);case "%\x3d":return e.toNumber(r)%e.toNumber(k);default:throw Error(p.nodeErrorMessage("AssignmentExpression","RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(k,a,r,q){var y=e.toNumber(k[a]);k[a]="++"===r?y+1:y-1;return!1===q?y:"++"===r?y+1:y-1},memberupdate:function(k,a,r,q){var y;if(e.isArray(k))if(e.isNumber(a)){0>a&&(a=k.length+a);if(0>
a||a>=k.length)throw Error("Assignment outside of array bounds");y=e.toNumber(k[a]);k[a]="++"===r?y+1:y-1}else throw Error("Invalid Parameter");else if(k instanceof s){if(!1===e.isString(a))throw Error("Dictionary accessor must be a string");if(!0===k.hasField(a))y=e.toNumber(k.field(a)),k.setField(a,"++"===r?y+1:y-1);else throw Error("Invalid Parameter");}else if(k instanceof u){if(!1===e.isString(a))throw Error("Feature accessor must be a string");if(!0===k.hasField(a))y=e.toNumber(k.field(a)),
k.setField(a,"++"===r?y+1:y-1);else throw Error("Invalid Parameter");}else{if(e.isImmutableArray(k))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===q?y:"++"===r?y+1:y-1},assignmember:function(k,a,r,q){if(e.isArray(k))if(e.isNumber(a)){0>a&&(a=k.length+a);if(0>a||a>k.length)throw Error("Assignment outside of array bounds");if(a===k.length&&"\x3d"!==r)throw Error("Invalid Parameter");k[a]=this.assign(q,r,k[a])}else throw Error("Invalid Parameter");else if(k instanceof
s){if(!1===e.isString(a))throw Error("Dictionary accessor must be a string");if(!0===k.hasField(a))k.setField(a,this.assign(q,r,k.field(a)));else{if("\x3d"!==r)throw Error("Invalid Parameter");k.setField(a,this.assign(q,r,null))}}else if(k instanceof u){if(!1===e.isString(a))throw Error("Feature accessor must be a string");if(!0===k.hasField(a))k.setField(a,this.assign(q,r,k.field(a)));else{if("\x3d"!==r)throw Error("Invalid Parameter");k.setField(a,this.assign(q,r,null))}}else{if(e.isImmutableArray(k))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}},member:function(k,a){if(null===k)throw Error(p.nodeErrorMessage("MemberExpression","RUNTIME","NOTFOUND"));if(k instanceof s||k instanceof u){if(e.isString(a))return k.field(a)}else if(k instanceof z){if(e.isString(a))return G(k,a,"MemberExpression")}else if(e.isArray(k)){if(e.isNumber(a)&&isFinite(a)&&Math.floor(a)===a){0>a&&(a=k.length+a);if(a>=k.length||0>a)throw Error(p.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return k[a]}}else if(e.isString(k)){if(e.isNumber(a)&&
isFinite(a)&&Math.floor(a)===a){0>a&&(a=k.length+a);if(a>=k.length||0>a)throw Error(p.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return k[a]}}else if(e.isImmutableArray(k)&&e.isNumber(a)&&isFinite(a)&&Math.floor(a)===a){0>a&&(a=k.length()+a);if(a>=k.length()||0>a)throw Error(p.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return k.get(a)}throw Error(p.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));},callfunc:function(k,a,r){return k instanceof e.NativeFunction?
k.fn(r,a):k instanceof e.SizzleFunction?k.fn.apply(this,a):k.apply(this,a)}};m.compileScript=function(a,r){void 0===r&&(r=null);null===r&&(r={vars:{},customfunctions:{}});var c={globalScope:q(r.vars,y,r.customfunctions),localScope:null,console:k,symbols:{symbolCounter:0}},c=H(c,a.body[0].body);""===c&&(c="lc.voidOperation;");var D={lc:e,lang:aa,postProcess:function(k){k instanceof e.ReturnResult&&(k=k.value);k instanceof e.ImplicitResult&&(k=k.value);k===e.voidOperation&&(k=null);if(k===e.breakResult)throw Error("Cannot return BREAK");
if(k===e.continueResult)throw Error("Cannot return CONTINUE");if(e.isFunctionParameter(k))throw Error("Cannot return FUNCTION");return k},prepare:function(a,r){r||(r=new f(102100));var q=a.vars,y=a.customfunctions,c=new P;q||(q={});y||(y={});var D=new s({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});D.immutable=!1;c._SymbolsMap={textformatting:1,infinity:1,pi:1};c.textformatting=D;c.infinity=Number.POSITIVE_INFINITY;c.pi=Math.PI;for(var d in y)c[d]=y[d],
c._SymbolsMap[d]=1;for(d in q)c._SymbolsMap[d]=1,c[d]=q[d]instanceof b?new u(q[d]):q[d];return{spatialReference:r,globalScope:c,localScope:null,console:!a.console?k:a.console,symbols:{symbolCounter:0},depthCounter:1,applicationCache:void 0===a.applicationCache?null:a.applicationCache}}};return(new Function("context","spatialReference","var runtimeCtx\x3dthis.prepare(context, spatialReference);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+
c+"\n return lastStatement; } \n return this.postProcess(mainBody());")).bind(D)}})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),function(g,m,a,b,d,c,h,n,f){return g(n,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(a,b,c,d,f){this.values=[];this._symbols={};this.infos=[];a&&!a.declaredClass?(b=a,this.defaultSymbol=(a=b.defaultSymbol)&&
(a.declaredClass?a:h.fromJson(a)),this.attributeField=b.field1,this.attributeField2=b.field2,this.attributeField3=b.field3,this.fieldDelimiter=b.fieldDelimiter,this.defaultLabel=b.defaultLabel,this.setValueExpression(b.valueExpression),this.valueExpressionTitle=b.valueExpressionTitle,this.legendOptions=b.legendOptions,b.backgroundFillSymbol&&(this.backgroundFillSymbol=h.fromJson(b.backgroundFillSymbol)),m.forEach(b.uniqueValueInfos,this._addValueInfo,this)):(this.defaultSymbol=a,this.attributeField=
b,this.attributeField2=c,this.attributeField3=d,this.fieldDelimiter=f);this._multiple=!!this.attributeField2},addValue:function(b,c){var d=a.isObject(b)?b:{value:b,symbol:c};this._addValueInfo(d)},removeValue:function(a){var b=m.indexOf(this.values,a);-1!==b&&(this.values.splice(b,1),delete this._symbols[a],this.infos.splice(b,1))},getUniqueValueInfo:function(b){var c=this.attributeField,d=b.attributes,h,n;this._compiledFunc?c=f.executeFunction(this._compiledFunc,f.createExecContext(b,b._getView())):
this._multiple?(b=this.attributeField2,h=this.attributeField3,n=[],c&&n.push(d[c]),b&&n.push(d[b]),h&&n.push(d[h]),c=n.join(this.fieldDelimiter||"")):c=a.isFunction(c)?c(b):d[c];return this._symbols[c]},setValueExpression:function(a){this.valueExpression=a;this._compiledFunc=f.createFunction(a)},getSymbol:function(a){return(a=this.getUniqueValueInfo(a))&&a.symbol||this.defaultSymbol},_addValueInfo:function(a){var b=a.value;this.values.push(b);this.infos.push(a);var c=a.symbol;c&&!c.declaredClass&&
(a.symbol=h.fromJson(c));this._symbols[b]=a},toJson:function(){var b=c.fixJson,d;d={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:a.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:m.map(this.infos||[],function(c){c=a.mixin({},
c);c.symbol=c.symbol&&c.symbol.toJson();c.value+="";return b(c)})};this.backgroundFillSymbol&&(d.backgroundFillSymbol=this.backgroundFillSymbol.toJson());d=a.mixin(this.inherited(arguments),d);return b(d)}})})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x){return{fromJson:function(a){var b;switch(a.type||""){case "simple":b=new n(a);break;case "uniqueValue":b=new f(a);break;case "classBreaks":b=new e(a);break;case "vectorField":b=new p(a);break;case "scaleDependent":b=this._scaleDependentFromJson(a);break;case "dotDensity":b=this._dotDensityFromJson(a);break;case "temporal":b=this._temporalFromJson(a);break;case "heatmap":b=this._heatmapFromJson(a)}return b},_scaleDependentFromJson:function(a){var b={},c=
a.minScale;b.rendererInfos=g.map(a.rendererInfos,function(a){var b=a.maxScale;a={minScale:c,maxScale:b,renderer:a.renderer&&this.fromJson(a.renderer)};c=b;return a},this);return new u(b)},_dotDensityFromJson:function(a){a.backgroundColor&&m.isArray(a.backgroundColor)&&(a.backgroundColor=c.toDojoColor(a.backgroundColor));0<a.dotSize&&(a.dotSize=b.pt2px(a.dotSize));a.fields&&g.forEach(a.fields,function(a){a&&m.isArray(a.color)&&(a.color=c.toDojoColor(a.color))});a.legendOptions&&(a.legendOptions.backgroundColor&&
m.isArray(a.legendOptions.backgroundColor)&&(a.legendOptions.backgroundColor=c.toDojoColor(a.legendOptions.backgroundColor)),a.legendOptions.outline&&(a.legendOptions.outline=h.fromJson(a.legendOptions.outline)));a.outline&&(a.outline=h.fromJson(a.outline));return new s(a)},_temporalFromJson:function(a){var b,c,d;a=a||{};b=this.fromJson(a.observationRenderer);c=a.latestObservationRenderer?this.fromJson(a.latestObservationRenderer):null;d=a.trackRenderer?this.fromJson(a.trackRenderer):null;a=this._agerFromJson(a.observationAger);
return new v(b,c,d,a)},_agerFromJson:function(a){var b;a=a||{};a.colorRange||a.sizeRange||a.alphaRange?b=this._timeRampFromJson(a):a.agerClassBreakInfos&&(b=this._timeClassBreaksFromJson(a));return b},_timeRampFromJson:function(a){var b,d,e;a.colorRange&&1<a.colorRange.length&&(b=[c.toDojoColor(a.colorRange[0]),c.toDojoColor(a.colorRange[1])]);a.sizeRange&&1<a.sizeRange.length&&(d=[a.sizeRange[0],a.sizeRange[1]]);a.alphaRange&&1<a.alphaRange.length&&(e=[a.alphaRange[0]/255,a.alphaRange[1]/255]);return new w(b,
d,e)},_timeClassBreaksFromJson:function(a){var b=a.agerClassBreakInfos,d,e,f=[],h;d=t.UNIT_DAYS;switch(a.timeUnits){case "esriTimeUnitsSeconds":d=t.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":d=t.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":d=t.UNIT_HOURS;break;case "esriTimeUnitsMinutes":d=t.UNIT_MINUTES;break;case "esriTimeUnitsMonths":d=t.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":d=t.UNIT_WEEKS;break;case "esriTimeUnitsYears":d=t.UNIT_YEARS}for(h=0;h<b.length;h+=1)a=b[h],e={minAge:0,
maxAge:a.oldestAge||Infinity},a.color&&(e.color=c.toDojoColor(a.color)),a.alpha&&(e.alpha=a.alpha/255),e.size=a.size,f[h]=e;return new t(f,d)},_heatmapFromJson:function(a){var b=a.colorStops;b&&b instanceof Array&&g.forEach(b,function(a){a.color=c.toDojoColor(a.color)});return new x(a)}}})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),function(g,m,a,b,
d,c,h,n,f){return g(n,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(a,b){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(a&&!a.declaredClass){var d=a;this.attributeField=d.field;this.setValueExpression(d.valueExpression);this.valueExpressionTitle=d.valueExpressionTitle;this.legendOptions=d.legendOptions;this.defaultSymbol=(a=d.defaultSymbol)&&(a.declaredClass?a:h.fromJson(a));this.backgroundFillSymbol=(a=d.backgroundFillSymbol)&&(a.declaredClass?a:
h.fromJson(a));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],d,this);var f=d.minValue;(d=d.classBreakInfos)&&(d[0]&&c.isDefined(d[0].classMaxValue))&&m.forEach(d,function(a){var b=a.classMaxValue;a.minValue=f;f=a.maxValue=b},this);m.forEach(d,this._addBreakInfo,this)}else this.defaultSymbol=a,this.attributeField=b},addBreak:function(b,c,d){b=a.isObject(b)?b:{minValue:b,maxValue:c,symbol:d};this._addBreakInfo(b)},removeBreak:function(a,
b){var c,d=this.breaks,f,h=d.length,n=this._symbols;for(f=0;f<h;f++)if(c=d[f],c[0]==a&&c[1]==b){d.splice(f,1);delete n[a+"-"+b];this.infos.splice(f,1);break}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(b){var c=this.attributeField,d=b.attributes,h=this.breaks,n=h.length,g=this.isMaxInclusive;if(this._compiledFunc)b=f.executeFunction(this._compiledFunc,f.createExecContext(b,b._getView()));else if(a.isFunction(c))b=c(b);else{b=parseFloat(d[c]);var c=
this.normalizationType,v;if(c)if(v=parseFloat(this.normalizationTotal),d=parseFloat(d[this.normalizationField]),"log"===c)b=Math.log(b)*Math.LOG10E;else if("percent-of-total"===c&&!isNaN(v))b=100*(b/v);else if("field"===c)if(!isNaN(b)&&!isNaN(d))b/=d;else return-1}if(null!=b&&!isNaN(b)&&"number"===typeof b)for(d=0;d<n;d++)if(c=h[d],c[0]<=b&&(g?b<=c[1]:b<c[1]))return d;return-1},getBreakInfo:function(a){a=this.getBreakIndex(a);return-1!==a?this.infos[a]:null},getSymbol:function(a){return(a=this.breaks[this.getBreakIndex(a)])?
this._symbols[a[0]+"-"+a[1]]:this.defaultSymbol},setMaxInclusive:function(a){this.isMaxInclusive=a},setValueExpression:function(a){this.valueExpression=a;this._compiledFunc=f.createFunction(a)},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation",
"esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"]],_copy:function(a,b,c){m.forEach(a,function(a){var d=a.split(":"),e,f,h;1<d.length&&(a=d[0],e=this["_"+a+"Enums"],"rest"===d[1]?(f="1",h="0"):"sdk"===d[1]&&(f="0",h="1"));d=b[a];if(void 0!==d&&(c[a]=d,e&&f)){var n,g=e.length;for(n=0;n<g;n++)if(e[n][f]===d){c[a]=e[n][h];break}}},this)},_addBreakInfo:function(a){var b=a.minValue,c=a.maxValue;this.breaks.push([b,c]);this.infos.push(a);var d=a.symbol;d&&!d.declaredClass&&
(a.symbol=h.fromJson(d));this._symbols[b+"-"+c]=a.symbol},toJson:function(){var b=this.infos||[],d=c.fixJson,f=b[0]&&b[0].minValue,h=this.backgroundFillSymbol,b=a.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:a.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:h&&h.toJson(),minValue:-Infinity===f?-Number.MAX_VALUE:
f,classBreakInfos:m.map(b,function(b){b=a.mixin({},b);b.symbol=b.symbol&&b.symbol.toJson();b.classMaxValue=Infinity===b.maxValue?Number.MAX_VALUE:b.maxValue;delete b.minValue;delete b.maxValue;return d(b)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,b);b.hasOwnProperty("normalizationType")&&!b.normalizationType&&delete b.normalizationType;b.hasOwnProperty("classificationMethod")&&!b.classificationMethod&&delete b.classificationMethod;
return d(b)}})})},"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t){var w=g(n,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",constructor:function(a){c.isDefined(a)||
(a={});a.attributeField=a.attributeField||"Magnitude";a.rotationInfo=a.rotationInfo||this._getRotationInfo(a);g.safeMixin(this,a);this.style=this.style||w.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:u.fromJson(this.singleArrowSymbol));this.renderer=new f(this._getDefaultSymbol(),a.attributeField);this._updateRenderer(this.style);this.flowRepresentation=this.flowRepresentation||this.FLOW_FROM},getSymbol:function(a){return this.renderer&&
this.renderer.getSymbol(a)},setVisualVariables:function(a){a=b.filter(a,function(a){if("sizeInfo"===a.type)return c.isDefined(this._updateSizeInfo(a))},this);this.inherited(arguments);return this},setSizeInfo:function(a){this._updateSizeInfo(a);this.inherited(arguments);return this},setProportionalSymbolInfo:function(a){this.setSizeInfo(a);return this},setColorInfo:function(a){return this},_updateRenderer:function(a){return!c.isDefined(this.renderer)?Error("Invalid Renderer!"):a===w.STYLE_SINGLE_ARROW?
this._createSingleArrowRenderer():a===w.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():a===w.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():a===w.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():a===w.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():a===w.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():a===w.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():a===w.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():a===w.STYLE_SCALAR?this._createSimpleScalarRenderer():
a===w.STYLE_WIND_BARBS?this._createWindBarbsRenderer():this._createClassifiedArrowRenderer()},_updateSizeInfo:function(a){return a&&c.isDefined(a.minSize)&&c.isDefined(a.maxSize)&&c.isDefined(a.minDataValue)&&c.isDefined(a.maxDataValue)?(this.style===w.STYLE_WIND_BARBS&&(a.minSize=a.maxSize),a.field=a.field||"Magnitude",a.type="sizeInfo",a):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new h([56,168,0]));var a=[0,1E-6,3.5,7,10.5,14];if(c.isDefined(this.minDataValue)&&
c.isDefined(this.maxDataValue)){var b=(this.maxDataValue-this.minDataValue)/5,a=[],d,e;e=this.minDataValue;for(d=0;6>d;d++)a[d]=e,e+=b}this._addBreaks(a,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new h([214,47,39]));this._addBreaks([0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,
28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new h([214,47,39]));this._addBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,
29]])},_createBeaufortFeetRenderer:function(){var a=[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];b.forEach(a,function(b,c){a[c]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new h([214,47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortMilesRenderer:function(){var a=[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,
32.7];b.forEach(a,function(b,c){a[c]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new h([214,47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var a=[0,0.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];b.forEach(a,function(b,c){a[c]*=3.6});this.renderer.defaultSymbol=this._getDefaultSymbol(new h([214,
47,39]));this._addBreaks(a,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new h([177,177,177]));this._addBreaks([0,0.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])},_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new h([177,177,177]));
this._addBreaks([0,0.25,0.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new p({url:t.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var a=[],b,c;for(b=0;150>=b;b+=5)a.push(b);c="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var d=new p({url:t.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=d;for(b=0;b<a.length-1;b++)0==b?this.renderer.addBreak({minValue:a[b],maxValue:a[b+1],symbol:d}):this.renderer.addBreak({minValue:a[b],maxValue:a[b+1],symbol:(new e).setPath(c[b]).setOutline((new s).setWidth(1.5)).setSize(20).setColor(new h([0,0,0,255]))})},_getDefaultSymbol:function(a){return(new e).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new s).setWidth(0)).setSize(20).setColor(a||
new h([0,92,230]))},_getRotationInfo:function(a){var b=a&&a.flowRepresentation||w.FLOW_FROM,c=a&&a.rotationField||"Direction",d=w.FLOW_FROM;return{field:function(a){a=a.attributes[c];return b===d?a:a+180},type:"geographic"}},_addBreaks:function(a,b){if(!c.isDefined(this.renderer))return Error("Invalid Renderer!");if(!a||!b||!a.length||!b.length||!(a.length>=b.length))return Error("AddBreaks: Input arguments break values and colors not valid");var d;for(d=0;d<b.length;d++)this.renderer.addBreak({minValue:a[d],
maxValue:a[d+1],symbol:this._getDefaultSymbol(new h(b[d]))})},toJson:function(){var a=m.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation});this.renderer&&(this.renderer.defaultSymbol&&this.style===w.STYLE_SINGLE_ARROW)&&(a.singleArrowSymbol=this.renderer.defaultSymbol.toJson());return c.fixJson(a)}});m.mixin(w,{STYLE_WIND_BARBS:"wind_speed",STYLE_SINGLE_ARROW:"single_arrow",STYLE_CLASSIFIED_ARROW:"classified_arrow",
STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});return w})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u){return g(e,{declaredClass:"esri.renderer.DotDensityRenderer",constructor:function(a){this.dotSize=a.dotSize||3;this.dotValue=a.dotValue;this.fields=a.fields;this.outline=a.outline;this.backgroundColor=a.backgroundColor;this.exactCount=a.exactCount||!0;this.dotShape=a.dotShape||"square";this.legendOptions=a.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=
null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1},getSymbol:function(a){var b,c;this._currentGraphic=a;if(!this._supportsCanvas)return null;this._map||(this._map=a.getLayer()._map,this._objectIdField=a.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",m.hitch(this,function(a){this._currentMapScale=this._map.getScale();this._currentResolution=a.extent.getWidth()/this._map.width;
this._symbolMap[this._currentMapScale]={}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]])return b=this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]],c=this._getShapeProperties(a),b.setOffset(c.dx,c.dy),b;b=this._generateFieldsCount(this.fields,a.attributes,this.dotValue);c=this._getShapeProperties(a);b=new p(this._generateImageSrc(c.width,c.height,b,c.minXY,c.maxXY),this.outline,c.width,c.height);b.setOffset(c.dx,
c.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][a.attributes[this._objectIdField]]=b},_generateFieldsCount:function(a,b,c){var d,e;for(e=a.length-1;0<=e;e--)d=b[a[e].name]/c,a[e].numPoints=Math.round(d);return a},_getShapeProperties:function(a){var b,c,d,e;b=a.geometry.getExtent();b.contains(this._map.extent)&&(b=this._map.extent);d=Math.ceil(b.getWidth()/this._currentResolution);e=Math.ceil(b.getHeight()/this._currentResolution);
c=this._map.toScreen(new u(b.xmin,b.ymin,b.spatialReference));b=this._map.toScreen(new u(b.xmax,b.ymax,b.spatialReference));a=a.getLayer().getNode().getCTM();return{minXY:c,maxXY:b,dx:(c.x-a.e)%d,dy:(b.y-a.f)%e,width:d,height:e}},_generateImageSrc:function(a,b,c,d,e,f){var h=this.dotSize,p,n,s;this._canvas?(this._canvas.width=a,this._canvas.height=b):this._canvas=this._initCanvas(a,b);p=this._canvas.getContext("2d");if(f=f||this.backgroundColor)p.fillStyle=f.toCss(!0),p.fillRect(0,0,a,b),p.fill();
for(f=c.length-1;0<=f;f--){p.fillStyle=c[f].color.toCss(!0);for(n=c[f].numPoints-1;0<=n;n--)s=this._getRandomPoint(a,b,d,e),"square"===this.dotShape?p.fillRect(s.x,s.y,h,h):"circle"===this.dotShape&&(p.beginPath(),p.arc(s.x,s.y,h/2,0,2*Math.PI,!0)),p.fill()}return this._canvas.toDataURL()},_initCanvas:function(a,c){var d=b.create("canvas",{id:"canvas",width:a+"px",height:c+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(d);return d},_getRandomInt:function(a,
b){return Math.floor(Math.random()*(b-a+1)+a)},_getRandomPoint:function(a,b,c,d){var e={},f=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&a*b>this._exactCountMinArea){do e.x=this._getRandomInt(c.x,d.x),e.y=this._getRandomInt(d.y,c.y),a=new s(e.x,e.y),a=this._checkPointShapeBounds(a,this.dotSize+f,this._currentGraphic.geometry),!0===a&&(e.x-=c.x,e.y-=d.y);while(!1===a)}else e.x=this._getRandomInt(0,a),e.y=this._getRandomInt(0,b);return e},_checkPointShapeBounds:function(a,
b,c){var d=null,d=!1,e=!0,f=0;do{switch(f){case 1:a.x+=b;break;case 2:a.y+=b;break;case 3:a.x-=b}d=this._map.toMap(a);d=c.contains(d);!1===d&&(e=!1);f+=1}while(3>=f&&!0===e);return d},setDotSize:function(a){0<a&&(this.dotSize=a)},setDotValue:function(a){0<a&&(this.dotValue=a)},setOutline:function(a){this.outline=a},setBackgroundColor:function(a){this.backgroundColor=a},toJson:function(){var b=m.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:f.toJsonColor(this.backgroundColor),
dotShape:this.dotShape,dotSize:0<this.dotSize?c.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:a.map(this.fields,function(a){return n.fixJson({color:f.toJsonColor(a.color),name:a.name})}),legendOptions:this.legendOptions&&n.fixJson({backgroundColor:f.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});
return n.fixJson(b)}})})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(g,m,a,b,d){return g(d,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}})})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),function(g,m,a,b,d,c,h){return g(h,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(a){this.setRendererInfos(a&&
a.rendererInfos||[])},setRendererInfos:function(a){this.rendererInfos=a;this._setRangeType();return this},getSymbol:function(a){var b=this.getRendererInfo(a);return b&&b.renderer&&b.renderer.getSymbol(a)},getRendererInfo:function(a){a=a.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(a.getZoom()):this.getRendererInfoByScale(a.getScale())},getRendererInfoByZoom:function(a){var b,c=this.rendererInfos,d,h=0;do b=c[h],a>=b.minZoom&&a<=b.maxZoom&&(d=b),h++;while(!d&&h<c.length);
return d},getRendererInfoByScale:function(a){var b,c=this.rendererInfos,d,h=0,g,t,m,v;do b=c[h],g=b.minScale,t=b.maxScale,m=!g,v=!t,!m&&a<=g&&(m=!0),!v&&a>=t&&(v=!0),m&&v&&(d=b),h++;while(!d&&h<c.length);return d},addRendererInfo:function(a){var b,c=0,d,h=this.rendererInfos,g=a.hasOwnProperty("minZoom")?"minZoom":"minScale",t=h.length;do{d=h[c];if(t===c||a[g]<d[g])h.splice(c,0,a),this._setRangeType(),b=!0;c++}while(!b&&c<t);return this},_setRangeType:function(){var a=this.rendererInfos;if(a=a&&a[0])this.rangeType=
a.hasOwnProperty("minZoom")?"zoom":a.hasOwnProperty("minScale")?"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var b=this.rendererInfos||[],d=b[0]&&b[0].minScale,b=a.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<d?d:0,rendererInfos:m.map(b,function(a){return c.fixJson({maxScale:0<a.maxScale?a.maxScale:0,renderer:a.renderer&&a.renderer.toJson()})})});return c.fixJson(b)}})})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),
function(g,m,a,b,d,c,h,n,f,e){var p=g(e,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(a,b){this.infos=a;this.timeUnits=b||"day";a.sort(function(a,b){return a.minAge<b.minAge?-1:a.minAge>b.minAge?1:0})},getAgedSymbol:function(a,b){var c=b.getLayer(),e=b.attributes,f=h.isDefined;a=n.fromJson(a.toJson());var p=c._map.timeExtent.endTime;if(!p)return a;var g=d.difference(new Date(e[c._startTimeField]),p,this.timeUnits);m.some(this.infos,function(b){if(g>=b.minAge&&g<=b.maxAge){var c=
b.color,d=b.size;b=b.alpha;c&&a.setColor(c);f(d)&&this._setSymbolSize(a,d);f(b)&&a.color&&(a.color.a=b);return!0}},this);return a},toJson:function(){var a={agerClassBreakInfos:[]},b,c,d;a.timeUnits=this._getRestUnits(this.timeUnits);for(b=0;b<this.infos.length;b+=1)c=this.infos[b],d={},d.oldestAge=Infinity===c.maxAge?null:c.maxAge,d.size=c.size,c.color&&(d.color=f.toJsonColor(c.color)),c.alpha&&(d.alpha=Math.round(255*c.alpha)),a.agerClassBreakInfos[b]=d;return a},_getRestUnits:function(a){var b=
"esriTimeUnitsDays";switch(a){case p.UNIT_SECONDS:b="esriTimeUnitsSeconds";break;case p.UNIT_MILLISECONDS:b="esriTimeUnitsMilliseconds";break;case p.UNIT_HOURS:b="esriTimeUnitsHours";break;case p.UNIT_MINUTES:b="esriTimeUnitsMinutes";break;case p.UNIT_MONTHS:b="esriTimeUnitsMonths";break;case p.UNIT_WEEKS:b="esriTimeUnitsWeeks";break;case p.UNIT_YEARS:b="esriTimeUnitsYears"}return b}});a.mixin(p,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",
UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});return p})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(g,m,a,b){return g(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(a,b){},_setSymbolSize:function(a,b){switch(a.type){case "simplemarkersymbol":a.setSize(b);break;case "picturemarkersymbol":a.setWidth(b);a.setHeight(b);break;case "simplelinesymbol":case "cartographiclinesymbol":a.setWidth(b);
break;case "simplefillsymbol":case "picturefillsymbol":a.outline&&a.outline.setWidth(b)}}})})},"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(g,m,a,b,d,c,h,n){return g(n,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(a,b,c){this.colorRange=a;this.sizeRange=b;this.alphaRange=c},getAgedSymbol:function(b,d){var h=d.getLayer(),n=d.attributes;b=c.fromJson(b.toJson());
var g=h._map.timeExtent,t=g.startTime,g=g.endTime;if(!t||!g)return b;t=t.getTime();g=g.getTime();h=new Date(n[h._startTimeField]);h=h.getTime();h<t&&(h=t);t=g===t?1:(h-t)/(g-t);if(h=this.sizeRange)n=h[0],g=h[1],h=Math.abs(g-n)*t,this._setSymbolSize(b,n<g?n+h:n-h);if(h=this.colorRange){var g=h[0],m=h[1],v=Math.round,n=new a,x=g.r,B=m.r,h=Math.abs(B-x)*t;n.r=v(x<B?x+h:x-h);x=g.g;B=m.g;h=Math.abs(B-x)*t;n.g=v(x<B?x+h:x-h);x=g.b;B=m.b;h=Math.abs(B-x)*t;n.b=v(x<B?x+h:x-h);g=g.a;m=m.a;h=Math.abs(m-g)*t;
n.a=g<m?g+h:g-h;b.setColor(n)}n=b.color;if((h=this.alphaRange)&&n)g=h[0],m=h[1],h=Math.abs(m-g)*t,n.a=g<m?g+h:g-h;return b},toJson:function(){var a={};this.sizeRange&&(a.sizeRange=this.sizeRange);this.colorRange&&(a.colorRange=[h.toJsonColor(this.colorRange[0]),h.toJsonColor(this.colorRange[1])]);this.alphaRange&&(a.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return a}})})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/has","../kernel","./Renderer"],function(g,m,a,b,d){return g(d,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(a,b,d,f){this.observationRenderer=a;this.latestObservationRenderer=b;this.trackRenderer=d;this.observationAger=f},getSymbol:function(a){var b=a.getLayer(),d=this.getObservationRenderer(a),f=d&&d.getSymbol(a),e=this.observationAger;b.timeInfo&&(b._map.timeExtent&&d===this.observationRenderer&&e&&f)&&(f=e.getAgedSymbol(f,a));return f},getObservationRenderer:function(a){return 0===
a.getLayer()._getKind(a)?this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var a={type:"temporal"};a.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(a.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(a.trackRenderer=this.trackRenderer.toJson());this.observationAger&&(a.observationAger=this.observationAger.toJson());return a}})})},"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),
function(g,m,a,b,d,c,h,n,f,e){return g([e],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,colorStops:null,constructor:function(a){if(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)"string"==typeof a&&(a=JSON.parse(a)),m.mixin(this,a),this._canvas=null,!this.colors&&!this.colorStops&&(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:0.75,color:"rgba(255, 140, 0, 1)"},{ratio:0.9,
color:"rgba(255, 0,   0, 1)"}]),this.gradient=this._generateGradient(this.colorStops||this.colors)},getSymbol:function(a){if(!this._supportsCanvas)return!1;var b=a.attributes.imageData;a=a.attributes.size;if(!a)return null;var c=this._getContext(a[0],a[1]),d=c.getImageData(0,0,a[0],a[1]);window.ArrayBuffer&&b instanceof ArrayBuffer?b=window.Uint8ClampedArray?new Uint8ClampedArray(b):new Uint8Array(b):b.BYTES_PER_ELEMENT&&1!==b.BYTES_PER_ELEMENT&&(b=window.Uint8ClampedArray?new Uint8ClampedArray(b.buffer):
new Uint8Array(b.buffer));if(window.CanvasPixelArray&&d.data instanceof window.CanvasPixelArray)for(var e=d.data,f=e.length;f--;)e[f]=b[f];else d.data.set(b);c.putImageData(d,0,0);return new n(c.canvas.toDataURL(),a[0],a[1])},setColors:function(a){if(a&&(a instanceof Array||a.colors))this.gradient=this._generateGradient(a.colors||a),this.colors=a;return this},setColorStops:function(a){if(a&&(a instanceof Array||a.colorStops))this.gradient=this._generateGradient(a.colorStops||a),this.colorStops=a;
return this},setMaxPixelIntensity:function(a){this.maxPixelIntensity=a;return this},setMinPixelIntensity:function(a){this.minPixelIntensity=a;return this},setField:function(a){this.field=a;return this},setFieldOffset:function(a){this.fieldOffset=a;return this},setBlurRadius:function(a){this.blurRadius=a;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var b=m.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||
this.colors),maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(b.fieldOffset=this.fieldOffset);a.forEach(b.colorStops,function(a){a.color=f.toJsonColor(a.color)});return h.fixJson(b)},_getContext:function(a,b){this._canvas?(this._canvas.width=a,this._canvas.height=b):this._canvas=this._initCanvas(a,b);return this._canvas.getContext("2d")},_initCanvas:function(a,c){var d=b.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),
style:"position: absolute; left: 0px; top: -10000px;"},null);d.width=a;d.height=c;document.body.appendChild(d);return d},_generateGradient:function(a,b){b||(b=512);for(var c=this._colorsToStops(a),d=this._getContext(1,b||512),e=d.createLinearGradient(0,0,0,b),f=0,h;f<c.length;f++)h=c[f],e.addColorStop(h.ratio,h.color.toCss(!0));d.fillStyle=e;d.fillRect(0,0,1,b);return d.getImageData(0,0,1,b).data},_colorsToStops:function(b){var c=[];if(!b[0])return c;if(null!=b[0].ratio)c=a.map(b,function(a){return{ratio:a.ratio,
color:this._toColor(a.color)}},this);else if(null!=b[0].value){var d=Infinity,c=-Infinity,e=0,f;for(f=0;f<b.length;f++){var h=b[f].value;h<d&&(d=h);h>c&&(c=h)}e=c-d;this.maxPixelIntensity=c;this.minPixelIntensity=d;c=a.map(b,function(a){var b=a.value;a=this._toColor(a.color);return{value:b,ratio:(b-d)/e,color:a}},this)}else var n=b.length-1,c=a.map(b,function(a,b){return{color:this._toColor(a),ratio:b/n}},this);return c},_toColor:function(a){!a.toRgba&&!a.declaredClass&&(a=new f(a));return a}})})},
"esri/tasks/QueryTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u){g=g(s,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},
constructor:function(a,b){this._handler=m.hitch(this,this._handler);this._relationshipQueryHandler=m.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=m.hitch(this,this._executeForIdsHandler);this._countHandler=m.hitch(this,this._countHandler);this._extentHandler=m.hitch(this,this._extentHandler);this.source=b&&b.source;this.gdbVersion=b&&b.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],
e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(a,b,c,e,f){var h=f.assembly;a=this._encode(m.mixin({},this._url.query,{f:"json"},a.toJson(h&&h[0])));var p=this._handler,s=this._errorHandler;this.source&&(h={source:this.source.toJson()},
a.layer=d.toJson(h));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return n({url:this._url.path+"/query",content:a,callbackParamName:"callback",load:function(a,d){p(a,d,b,c,f.dfd)},error:function(a){s(a,c,f.dfd)},callbackSuffix:e},this.requestOptions)},executeRelationshipQuery:function(a,c,d){a=this._encode(m.mixin({},this._url.query,{f:"json"},a.toJson()));var e=this._relationshipQueryHandler,h=this._errorHandler;this.gdbVersion&&(a.gdbVersion=this.gdbVersion);var p=new b(f._dfdCanceller);p._pendingDfd=
n({url:this._url.path+"/queryRelatedRecords",content:a,callbackParamName:"callback",load:function(a,b){e(a,b,c,d,p)},error:function(a){h(a,d,p)}},this.requestOptions);return p},executeForIds:function(a,b,c,e){var f=e.assembly;a=this._encode(m.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},a.toJson(f&&f[0])));var h=this._executeForIdsHandler,p=this._errorHandler;this.source&&(f={source:this.source.toJson()},a.layer=d.toJson(f));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return n({url:this._url.path+
"/query",content:a,callbackParamName:"callback",load:function(a,d){h(a,d,b,c,e.dfd)},error:function(a){p(a,c,e.dfd)}},this.requestOptions)},executeForCount:function(a,b,c,e){var f=e.assembly;a=this._encode(m.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},a.toJson(f&&f[0])));var h=this._countHandler,p=this._errorHandler;this.source&&(f={source:this.source.toJson()},a.layer=d.toJson(f));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return n({url:this._url.path+"/query",content:a,
callbackParamName:"callback",load:function(a,d){h(a,d,b,c,e.dfd)},error:function(a){p(a,c,e.dfd)}},this.requestOptions)},executeForExtent:function(a,b,c,e){var f=e.assembly;a=this._encode(m.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},a.toJson(f&&f[0])));var h=this._extentHandler,p=this._errorHandler;this.source&&(f={source:this.source.toJson()},a.layer=d.toJson(f));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return n({url:this._url.path+"/query",content:a,callbackParamName:"callback",
load:function(a,d){h(a,d,b,c,e.dfd)},error:function(a){p(a,c,e.dfd)}},this.requestOptions)},_handler:function(a,b,c,d,e){try{var f=new u(a);this._successHandler([f],"onComplete",c,e)}catch(h){this._errorHandler(h,d,e)}},_relationshipQueryHandler:function(b,c,d,e,f){try{var h=b.geometryType,p=b.spatialReference,n={};a.forEach(b.relatedRecordGroups,function(a){var b={};b.geometryType=h;b.spatialReference=p;b.features=a.relatedRecords;b=new u(b);if(null!=a.objectId)n[a.objectId]=b;else for(var c in a)a.hasOwnProperty(c)&&
"relatedRecords"!==c&&(n[a[c]]=b)});this._successHandler([n],"onExecuteRelationshipQueryComplete",d,f)}catch(s){this._errorHandler(s,e,f)}},_executeForIdsHandler:function(a,b,c,d,e){try{this._successHandler([a.objectIds],"onExecuteForIdsComplete",c,e)}catch(f){this._errorHandler(f,d,e)}},_countHandler:function(a,b,c,d,e){try{var f,h=a.features,p=a.objectIds;if(p)f=p.length;else{if(h)throw Error("Unable to perform query. Please check your parameters.");f=a.count}this._successHandler([f],"onExecuteForCountComplete",
c,e)}catch(n){this._errorHandler(n,d,e)}},_extentHandler:function(a,b,c,d,f){try{a.extent&&(a.extent=new e(a.extent)),this._successHandler([a],"onExecuteForExtentComplete",c,f)}catch(h){this._errorHandler(h,d,f)}}});p._createWrappers(g);return g})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,
s){function u(a,b){return Math.ceil((a-b)/(2*b))}function t(a,b){var c=a.paths||a.rings,d,e,f=c.length,h;for(d=0;d<f;d++){h=c[d].length;for(e=0;e<h;e++){var p=a.getPoint(d,e);a.setPoint(d,e,p.offset(b,0))}}return a}function w(a,b){if(!(a instanceof f||a instanceof e))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var c=a instanceof f,d=[],h;g.forEach(c?a.paths:a.rings,function(a){d.push(h=[]);h.push([a[0][0],a[0][1]]);var c,e,f,p,E,n,s,q,k,r,y,D;for(E=0;E<
a.length-1;E++){c=a[E][0];e=a[E][1];f=a[E+1][0];p=a[E+1][1];s=Math.sqrt((f-c)*(f-c)+(p-e)*(p-e));q=(p-e)/s;k=(f-c)/s;r=s/b;if(1<r){for(n=1;n<=r-1;n++)D=n*b,y=k*D+c,D=q*D+e,h.push([y,D]);n=(s+Math.floor(r-1)*b)/2;y=k*n+c;D=q*n+e;h.push([y,D])}h.push([f,p])}});return c?new f({paths:d,spatialReference:a.spatialReference}):new e({rings:d,spatialReference:a.spatialReference})}function v(a,b,c){b&&(a=w(a,1E6),a=p.webMercatorToGeographic(a,!0));c&&(a=t(a,c));return a}function x(a,b,c){var d=a.x||a[0],e;
d>b?(e=u(d,b),a.x?a=a.offset(e*-2*b,0):a[0]=d+e*-2*b):d<c&&(e=u(d,c),a.x?a=a.offset(e*-2*c,0):a[0]=d+e*-2*c);return a}function B(a,b){var c=-1;g.forEach(b.cutIndexes,function(d,e){var f=b.geometries[e];g.forEach(f.rings||f.paths,function(a,b){g.some(a,function(c){if(!(180>c[0])){c=0;var d,e=a.length,h;for(d=0;d<e;d++)h=a[d][0],c=h>c?h:c;c=Number(c.toFixed(9));c=-360*u(c,180);e=a.length;for(d=0;d<e;d++)h=f.getPoint(b,d),f.setPoint(b,d,h.offset(c,0))}return!0})});d===c?f.rings?g.forEach(f.rings,function(b){a[d]=
a[d].addRing(b)}):g.forEach(f.paths,function(b){a[d]=a[d].addPath(b)}):(c=d,a[d]=f)});return a}function A(b,d,h,n){var m=new a;m.addCallbacks(h,n);d=d||c.defaults.geometryService;var w=[],A=[],z,C,F,E,H,N,q,k,r=0;g.forEach(b,function(a){if(a)if(z||(z=a.spatialReference,C=z._getInfo(),E=(F=z._isWebMercator())?2.0037508342788905E7:180,H=F?-2.0037508342788905E7:-180,N=F?102100:4326,q=new f({paths:[[[E,H],[E,E]]],spatialReference:{wkid:N}}),k=new f({paths:[[[H,H],[H,E]]],spatialReference:{wkid:N}})),
C){var b=s.fromJson(a.toJson()),y=a.getExtent();"point"===a.type?w.push(x(b,E,H)):"multipoint"===a.type?(b.points=g.map(b.points,function(a){return x(a,E,H)}),w.push(b)):"extent"===a.type?(b=y._normalize(null,null,C),w.push(b.rings?new e(b):b)):y?(a=u(y.xmin,H)*2*E,b=0===a?b:t(b,a),y=y.offset(a,0),y.intersects(q)&&y.xmax!==E?(r=y.xmax>r?y.xmax:r,b=v(b,F),A.push(b),w.push("cut")):y.intersects(k)&&y.xmin!==H?(r=y.xmax*2*E>r?y.xmax*2*E:r,b=v(b,F,360),A.push(b),w.push("cut")):w.push(b)):w.push(b)}else w.push(a);
else w.push(a)});h=new f;n=u(r,E);for(var y=-90,D=n;0<n;){var P=-180+360*n;h.addPath([[P,y],[P,-1*y]]);y*=-1;n--}0<A.length&&0<D?d?d.cut(A,h,function(a){A=B(A,a);var k=[];g.forEach(w,function(a,r){if("cut"===a){var q=A.shift();b[r].rings&&1<b[r].rings.length&&q.rings.length>=b[r].rings.length?(w[r]="simplify",k.push(q)):w[r]=!0===F?p.geographicToWebMercator(q):q}});0<k.length?d.simplify(k,function(a){g.forEach(w,function(k,r){"simplify"===k&&(w[r]=!0===F?p.geographicToWebMercator(a.shift()):a.shift())});
m.callback(w)},function(a){m.errback(a)}):m.callback(w)},function(a){m.errback(a)}):m.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(g.forEach(w,function(a,k){if("cut"===a){var r=A.shift();w[k]=!0===F?p.geographicToWebMercator(r):r}}),m.callback(w));return m}function C(a,b,c,d){var e=!1,f;m.isObject(a)&&a&&(m.isArray(a)?a.length&&((f=a[0]&&a[0].declaredClass)&&-1!==f.indexOf("Graphic")?(a=g.map(a,function(a){return a.geometry}),e=a.length?!0:!1):
f&&-1!==f.indexOf("esri.geometry.")&&(e=!0)):(f=a.declaredClass)&&-1!==f.indexOf("FeatureSet")?(a=g.map(a.features||[],function(a){return a.geometry}),e=a.length?!0:!1):f&&-1!==f.indexOf("esri.geometry.")&&(e=!0));e&&b.push({index:c,property:d,value:a})}function z(a,b){var c=[];g.forEach(b,function(b){var d=b.i,e=a[d];b=b.p;var f;if(m.isObject(e)&&e)if(b)if("*"===b[0])for(f in e)e.hasOwnProperty(f)&&C(e[f],c,d,f);else g.forEach(b,function(a){C(m.getObject(a,!1,e),c,d,a)});else C(e,c,d)});return c}
function F(a,b){var c=0,d={};g.forEach(b,function(b){var e=b.index,f=b.property,h=b.value,p=h.length||1,n=a.slice(c,c+p);m.isArray(h)||(n=n[0]);c+=p;delete b.value;f?(d[e]=d[e]||{},d[e][f]=n):d[e]=n});return d}function H(a){for(var b=[],c=0,d=0,e=Math.min,f=Math.max,h=0;h<a.length;h++){for(var p=a[h],n=null,s=0;s<p.length;s++)n=p[s],b.push(n),0===s?d=c=n[0]:(c=e(c,n[0]),d=f(d,n[0]));n&&b.push([(c+d)/2,0])}return b}return{normalizeCentralMeridian:A,_foldCutResults:B,_prepareGeometryForCut:v,_offsetMagnitude:u,
_pointNormalization:x,_updatePolyGeometry:t,_straightLineDensify:w,_createWrappers:function(b){var c=m.isObject(b)?b.prototype:m.getObject(b+".prototype");g.forEach(c.__msigns,function(b){var d=c[b.n];c[b.n]=function(){var c=this,e=[],f,p=new a(h._dfdCanceller);b.f&&h._fixDfd(p);for(f=0;f<b.c;f++)e[f]=arguments[f];var n={dfd:p};e.push(n);var s,E=[],u;c.normalization&&!c._isTable&&(s=z(e,b.a),g.forEach(s,function(a){E=E.concat(a.value)}),E.length&&(u=A(E)));u?(p._pendingDfd=u,u.addCallbacks(function(a){p.canceled||
(n.assembly=F(a,s),p._pendingDfd=d.apply(c,e))},function(a){var q=c.declaredClass;q&&-1!==q.indexOf("FeatureLayer")?c._resolve([a],null,e[b.e],p,!0):c._errorHandler(a,e[b.e],p)})):p._pendingDfd=d.apply(c,e);return p}})},_disassemble:z,_addToBucket:C,_reassemble:F,getDenormalizedExtent:function(a){if(!a)return null;var b=a.getExtent();if(!b)return null;var c=a.spatialReference&&a.spatialReference._getInfo();if(!c)return b;var d=c.valid[0],c=c.valid[1],e=2*c,f=b.getWidth(),h=b.xmax,p=b.xmin;if("extent"===
a.type||0===f||f<=c||f>e||h<d||p>c)return b;var s;switch(a.type){case "polygon":if(1<a.rings.length)s=H(a.rings);else return b;break;case "polyline":if(1<a.paths.length)s=H(a.paths);else return b;break;case "multipoint":s=a.points}a=Math.min;for(var d=Math.max,e=new n(b.toJson()),g=0;g<s.length;g++){var E=s[g][0];0>E?(E+=c,p=d(E,p)):(E-=c,h=a(E,h))}e.xmin=h;e.xmax=p;return e.getWidth()<f?(e.xmin-=c,e.xmax-=c,e):b}}})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),
function(g,m,a,b,d,c,h,n){return g(n,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(a,b){a&&m.isString(a)&&(this._url=h.urlToObject(this.url=a));b&&b.requestOptions&&(this.requestOptions=b.requestOptions);this.normalization=!0;this._errorHandler=m.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var a=this._url,b=/^http:/i;this.url&&(this.url=this.url.replace(b,"https:"));a&&a.path&&(a.path=a.path.replace(b,"https:"))},
_encode:function(b,c,d){var h,n,g={},w,v;for(w in b)if("declaredClass"!==w&&(h=b[w],n=typeof h,null!==h&&void 0!==h&&"function"!==n))if(m.isArray(h)){g[w]=[];v=h.length;for(n=0;n<v;n++)g[w][n]=this._encode(h[n])}else"object"===n?h.toJson&&(n=h.toJson(d&&d[w]),"esri.tasks.FeatureSet"===h.declaredClass&&n.spatialReference&&(n.sr=n.spatialReference,delete n.spatialReference),g[w]=c?n:a.toJson(n)):g[w]=h;return g},_successHandler:function(a,b,d,h){b&&this[b].apply(this,a);d&&d.apply(null,a);h&&c._resDfd(h,
a)},_errorHandler:function(a,b,c){this.onError(a);b&&b(a);c&&c.errback(a)},setNormalization:function(a){this.normalization=a},onError:function(){}})})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(g,m,a,b,d,c){return g([b],{declaredClass:"esri.Evented",registerConnectEvents:function(){var a=this.constructor,b=this.constructor._meta.parents,c=[{}],d={},p,s,g=function(a,b){m.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){var d=
a[c];d._meta&&d._meta.parents&&g(d._meta.parents,b);d.prototype._eventMap&&b.push(m.mixin({},d.prototype._eventMap))}return b};if(!a._onMap){g(b,c);c.push(this._eventMap);b=m.mixin.apply(this,c);for(p in this)/^on\w/.test(p)&&m.isFunction(this[p])&&(c=this._hyphenLower(p).toLowerCase(),b[c]||(d[c]={method:p}));for(s in b)p=this._onCamelCase(s),d[s]={method:p,argKeys:b[s]};a._onMap=d;return a._onMap}},on:function(b,c){if(-1<b.indexOf(",")){for(var d=b.split(/\s*,\s*/),e=d.length,p=[];e--;)p.push(this.on(d[e],
c));p.remove=function(){for(var a=0;a<p.length;a++)p[a].remove()};return p}var d=this.constructor._onMap||this.registerConnectEvents(),e="string"==typeof b&&b.toLowerCase(),s=this._onCamelCase(e),g=d&&d[e];return(s=g&&g.method||this[s]&&m.isFunction(this[s])&&s)?g&&m.isArray(g.argKeys)?(d=this._onArr2Obj(c,d[e].argKeys),a.after(this,s,d,!0)):a.after(this,s,function(a){a=a||{};a.target||(a.target=this);c.call(this,a)},!0):this.inherited(arguments)},emit:function(a,b){var c,d,p,s,g=a.toLowerCase();
s=this._onCamelCase(a);var t=this.constructor._onMap||this.registerConnectEvents();s=(p=t&&t[g]&&t[g].method||m.isFunction(this[s])&&s)&&this[p];p&&(t&&t[g])&&this._onObj2Arr(function(){d=Array.prototype.slice.call(arguments)},t[g].argKeys)(b);b=b||{};b.target||(b.target=this);s&&(c=d&&d.length?d:[b],c=s.apply(this,c));this.inherited(arguments,[a,b]);return c},_onObj2Arr:function(a,b){if(b){var c=this;return function(d){var p,s=[],g=b.length;for(p=0;p<g;p++)s[p]=d[b[p]];a.apply(c,s)}}return a},_onArr2Obj:function(a,
b){if(b){var c=this;return function(){var d,p={},s=arguments.length;for(d=0;d<s;d++)p[b[d]]=arguments[d];p.target||(p.target=c);a.call(c,p)}}return a},_hyphenLower:function(a){return a.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(a,b){return(b?"-":"")+a.toLowerCase()})},_onCamelCase:function(a){return"on"+a.substr(0,1).toUpperCase()+a.substr(1).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()})}})})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p){return g(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(b){if(b){m.mixin(this,b);var c=this.features,d=b.spatialReference,f=e.getGeometryType(b.geometryType),d=this.spatialReference=new n(d);this.geometryType=b.geometryType;b.fields&&(this.fields=b.fields);a.forEach(c,function(a,b){var e=a.geometry&&a.geometry.spatialReference;c[b]=new h(f&&a.geometry?new f(a.geometry):null,a.symbol&&p.fromJson(a.symbol),a.attributes);c[b].geometry&&!e&&c[b].geometry.setSpatialReference(d)});
this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(a){var b={};this.displayFieldName&&(b.displayFieldName=this.displayFieldName);this.fields&&(b.fields=this.fields);this.spatialReference?b.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(b.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(b.geometryType=
e.getJsonType(this.features[0].geometry)),b.features=f._encodeGraphics(this.features,a));b.exceededTransferLimit=this.exceededTransferLimit;b.transform=this.transform;return c.fixJson(b)},_hydrate:function(){var a=this.transform,b=this.geometryType;if(a&&b)for(var c=this.features,d=a.translate[0],e=a.translate[1],f=a.scale[0],h=a.scale[1],p=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=b(a.x);a.y=c(a.y)};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){a=
a.rings||a.paths;var d,e,f,h,p,n,s,g;d=0;for(e=a.length;d<e;d++){p=a[d];f=0;for(h=p.length;f<h;f++)n=p[f],0<f?(s+=n[0],g+=n[1]):(s=n[0],g=n[1]),n[0]=b(s),n[1]=c(g)}};if("esriGeometryEnvelope"===a)return function(a){a.xmin=b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax)};if("esriGeometryMultipoint"===a)return function(a){a=a.points;var d,e,f,h,p;d=0;for(e=a.length;d<e;d++)f=a[d],0<d?(h+=f[0],p+=f[1]):(h=f[0],p=f[1]),f[0]=b(h),f[1]=c(p)}}(b,function(a){return a*f+d},function(a){return e-
a*h}),a=0,b=c.length;a<b;a++)c[a].geometry&&p(c[a].geometry);this.transform=null},quantize:function(a){if(!this.geometryType)return this.transform=null,this;var b=a.translate[0],c=a.translate[1],d=a.scale[0],e=a.scale[1],f=this.features,h=function(a,b,c){var d,e,f,h,p,n,s=[];d=0;for(e=a.length;d<e;d++)if(f=a[d],0<d){if(n=b(f[0]),f=c(f[1]),n!==h||f!==p)s.push([n-h,f-p]),h=n,p=f}else h=b(f[0]),p=c(f[1]),s.push([h,p]);return 0<s.length?s:null},p=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=
b(a.x);a.y=c(a.y);return a};if("esriGeometryPolyline"===a||"esriGeometryPolygon"===a)return function(a){var d,e,f,p,n;f=a.rings||a.paths;n=[];d=0;for(e=f.length;d<e;d++)p=f[d],(p=h(p,b,c))&&n.push(p);return 0<n.length?(a.rings?a.rings=n:a.paths=n,a):null};if("esriGeometryMultipoint"===a)return function(a){var d;d=h(a.points,b,c);return 0<d.length?(a.points=d,a):null};if("esriGeometryEnvelope"===a)return function(a){return a}}(this.geometryType,function(a){return Math.round((a-b)/d)},function(a){return Math.round((c-
a)/e)}),n,g;n=0;for(g=f.length;n<g;n++)f[n].geometry&&(p(f[n].geometry)||f[n].setGeometry(null));this.transform=a;return this}})})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(g,m,a,b,d){return{graphicsExtent:function(a){if(!a||!a.length)return null;var b=a[0].geometry,n=b.getExtent(),f,e,p=a.length;null===n&&(n=new d(b.x,b.y,b.x,b.y,b.spatialReference));for(e=1;e<p;e++)f=(b=a[e].geometry).getExtent(),null===f&&(f=
new d(b.x,b.y,b.x,b.y,b.spatialReference)),n=n.union(f);return 0>n.getWidth()&&0>n.getHeight()?null:n},getGeometries:function(a){return m.map(a,function(a){return a.geometry})},_encodeGraphics:function(a,b){var d=[],f,e,p;m.forEach(a,function(a,c){f=a.toJson();e={};f.geometry&&(p=b&&b[c],e.geometry=p&&p.toJson()||f.geometry);f.attributes&&(e.attributes=f.attributes);d[c]=e});return d}}})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship require require require".split(" "),
function(g,m,a,b,d,c,h,n){var f=g(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=f.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnDistinctValues:!1,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,resultOffset:null,resultRecordCount:null,resultType:null,sqlFormat:null,quantizationParameters:null,
_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(c){var d={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},n=c&&c.geometry||this.geometry,g=this.objectIds,
t=this.outFields,m=this.outSpatialReference,v=this.groupByFieldsForStatistics,x=this.orderByFields,B=this.outStatistics;c=this.distance;n&&(d.geometry=n,d.geometryType=h.getJsonType(n),d.inSR=n.spatialReference.wkid||b.toJson(n.spatialReference.toJson()));g&&(d.objectIds=g.join(","));t&&(d.outFields=t.join(","));this.returnDistinctValues&&(d.returnDistinctValues=!0);v&&(d.groupByFieldsForStatistics=v.join(","));x&&(d.orderByFields=x.join(","));if(B){var A=[];a.forEach(B,function(a){A.push(a.toJson())});
d.outStatistics=b.toJson(A)}m?d.outSR=m.wkid||b.toJson(m.toJson()):n&&(d.outSR=n.spatialReference.wkid||b.toJson(n.spatialReference.toJson()));n=this.timeExtent;d.time=n?n.toJson().join(","):null;if((n=this.relationParam)&&this.spatialRelationship===f.SPATIAL_REL_RELATION)d.relationParam=n;c&&(d.distance=this.distance,this.hasOwnProperty("units")?d.units=this._units[this.units]||this._units.meters:d.units=this._units.meters);this.hasOwnProperty("start")&&(d.resultOffset=this.start,d.resultRecordCount=
10,""===d.where&&(d.where="1\x3d1"));this.hasOwnProperty("num")&&(d.resultRecordCount=this.num);d.resultType=this.resultType;d.pixelSize=this.pixelSize?b.toJson(this.pixelSize.toJson()):null;d.multipatchOption=this.multipatchOption;this.quantizationParameters&&(d.quantizationParameters=b.toJson(this.quantizationParameters));d._ts=this._ts;return d}});m.mixin(f,n);return f})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(g,m,a){return{SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",
SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"}})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],
function(g,m,a,b){return g(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}})})},"esri/geometry/scaleUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../config ../lang ../WKIDUnitConversion".split(" "),function(g,m,a,b,d,c){var h=6370997*
Math.PI/180,n=b.defaults,f={getUnitValueForSR:function(a){return this.getUnitValue(a)||h},getUnitValue:function(a){var b,d,f;a&&("object"===typeof a?(b=a.wkid,d=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(d=a));b?f=c.values[c[b]]:d&&-1!==d.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(d))&&a[1]&&(f=parseFloat(a[1].split(",")[1]));return f},getScale:function(a,b,c){var g,t,m;1<arguments.length&&d.isDefined(b)&&!b.declaredClass?(g=a,t=b,b=null,m=f.getUnitValue(c)):(g=b||a.extent,t=a.width,
m=f.getUnitValue(g&&g.spatialReference));return g&&t?39.37*(g.getWidth()/t*(m||h))*n.screenDPI:0},getExtentForScale:function(a,b,c){c=c||a.extent;var d;d=f.getUnitValue(a.spatialReference);return c.expand(b*a.width/(39.37*(d||h)*n.screenDPI)/c.getWidth())}};return f})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(g,m){var a,b={values:[1,0.3048,0.3048006096012192,0.3047972654,0.9143917962,0.201166195164,0.9143984146160287,0.3047994715386762,20.11676512155263,20.11678249437587,
0.9143985307444408,0.91439523,0.3047997101815088,20.116756,5E4,15E4],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,
3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,
3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,
3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,
5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,
6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,
6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,
6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,
6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,
6984:0,6991:0,7128:2,7131:0,7132:2,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,
7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,
23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,
30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,
102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,
103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,
103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,
103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(a=2E3;2045>=a;a++)b[a]=0;for(a=2056;2065>=a;a++)b[a]=0;for(a=2067;2135>=a;a++)b[a]=0;for(a=2137;2154>=
a;a++)b[a]=0;for(a=2161;2170>=a;a++)b[a]=0;for(a=2172;2193>=a;a++)b[a]=0;for(a=2195;2198>=a;a++)b[a]=0;for(a=2200;2203>=a;a++)b[a]=0;for(a=2205;2217>=a;a++)b[a]=0;for(a=2222;2224>=a;a++)b[a]=1;for(a=2225;2250>=a;a++)b[a]=2;for(a=2251;2253>=a;a++)b[a]=1;for(a=2257;2264>=a;a++)b[a]=2;for(a=2274;2279>=a;a++)b[a]=2;for(a=2280;2282>=a;a++)b[a]=1;for(a=2283;2289>=a;a++)b[a]=2;for(a=2290;2292>=a;a++)b[a]=0;for(a=2308;2313>=a;a++)b[a]=0;for(a=2315;2491>=a;a++)b[a]=0;for(a=2494;2866>=a;a++)b[a]=0;for(a=2867;2869>=
a;a++)b[a]=1;for(a=2870;2888>=a;a++)b[a]=2;for(a=2891;2895>=a;a++)b[a]=2;for(a=2896;2898>=a;a++)b[a]=1;for(a=2902;2908>=a;a++)b[a]=2;for(a=2915;2920>=a;a++)b[a]=2;for(a=2921;2923>=a;a++)b[a]=1;for(a=2924;2930>=a;a++)b[a]=2;for(a=2931;2962>=a;a++)b[a]=0;for(a=2964;2968>=a;a++)b[a]=2;for(a=2969;2973>=a;a++)b[a]=0;for(a=2975;2991>=a;a++)b[a]=0;for(a=2995;3051>=a;a++)b[a]=0;for(a=3054;3079>=a;a++)b[a]=0;for(a=3081;3088>=a;a++)b[a]=0;for(a=3092;3101>=a;a++)b[a]=0;for(a=3106;3138>=a;a++)b[a]=0;for(a=3146;3151>=
a;a++)b[a]=0;for(a=3153;3166>=a;a++)b[a]=0;for(a=3168;3172>=a;a++)b[a]=0;for(a=3174;3203>=a;a++)b[a]=0;for(a=3294;3358>=a;a++)b[a]=0;for(a=3367;3403>=a;a++)b[a]=0;for(a=3408;3416>=a;a++)b[a]=0;for(a=3417;3438>=a;a++)b[a]=2;for(a=3441;3446>=a;a++)b[a]=2;for(a=3447;3450>=a;a++)b[a]=0;for(a=3451;3459>=a;a++)b[a]=2;for(a=3460;3478>=a;a++)b[a]=0;for(a=3554;3559>=a;a++)b[a]=0;for(a=3560;3570>=a;a++)b[a]=2;for(a=3571;3581>=a;a++)b[a]=0;for(a=3594;3597>=a;a++)b[a]=0;for(a=3601;3604>=a;a++)b[a]=0;for(a=3637;3639>=
a;a++)b[a]=0;for(a=3665;3667>=a;a++)b[a]=0;for(a=3693;3695>=a;a++)b[a]=0;for(a=3701;3727>=a;a++)b[a]=0;for(a=3728;3739>=a;a++)b[a]=2;for(a=3740;3751>=a;a++)b[a]=0;for(a=3753;3760>=a;a++)b[a]=2;for(a=3761;3773>=a;a++)b[a]=0;for(a=3775;3777>=a;a++)b[a]=0;for(a=3779;3781>=a;a++)b[a]=0;for(a=3783;3785>=a;a++)b[a]=0;for(a=3788;3791>=a;a++)b[a]=0;for(a=3797;3802>=a;a++)b[a]=0;for(a=3814;3816>=a;a++)b[a]=0;for(a=3825;3829>=a;a++)b[a]=0;for(a=3832;3841>=a;a++)b[a]=0;for(a=3844;3852>=a;a++)b[a]=0;for(a=3873;3885>=
a;a++)b[a]=0;for(a=3890;3893>=a;a++)b[a]=0;for(a=3907;3912>=a;a++)b[a]=0;for(a=3942;3950>=a;a++)b[a]=0;for(a=3968;3970>=a;a++)b[a]=0;for(a=3973;3976>=a;a++)b[a]=0;for(a=3986;3989>=a;a++)b[a]=0;for(a=3994;3997>=a;a++)b[a]=0;for(a=4048;4051>=a;a++)b[a]=0;for(a=4056;4063>=a;a++)b[a]=0;for(a=4093;4096>=a;a++)b[a]=0;for(a=4390;4398>=a;a++)b[a]=0;for(a=4399;4413>=a;a++)b[a]=2;for(a=4418;4433>=a;a++)b[a]=2;for(a=4455;4457>=a;a++)b[a]=2;for(a=4484;4489>=a;a++)b[a]=0;for(a=4491;4554>=a;a++)b[a]=0;for(a=4568;4589>=
a;a++)b[a]=0;for(a=4652;4656>=a;a++)b[a]=0;for(a=4766;4800>=a;a++)b[a]=0;for(a=5014;5016>=a;a++)b[a]=0;for(a=5069;5072>=a;a++)b[a]=0;for(a=5105;5130>=a;a++)b[a]=0;for(a=5173;5188>=a;a++)b[a]=0;for(a=5253;5259>=a;a++)b[a]=0;for(a=5269;5275>=a;a++)b[a]=0;for(a=5292;5311>=a;a++)b[a]=0;for(a=5329;5331>=a;a++)b[a]=0;for(a=5343;5349>=a;a++)b[a]=0;for(a=5355;5357>=a;a++)b[a]=0;for(a=5387;5389>=a;a++)b[a]=0;for(a=5459;5463>=a;a++)b[a]=0;for(a=5479;5482>=a;a++)b[a]=0;for(a=5518;5520>=a;a++)b[a]=0;for(a=5530;5539>=
a;a++)b[a]=0;for(a=5550;5552>=a;a++)b[a]=0;for(a=5562;5583>=a;a++)b[a]=0;for(a=5623;5625>=a;a++)b[a]=2;for(a=5631;5639>=a;a++)b[a]=0;for(a=5649;5653>=a;a++)b[a]=0;for(a=5663;5680>=a;a++)b[a]=0;for(a=5682;5685>=a;a++)b[a]=0;for(a=5875;5877>=a;a++)b[a]=0;for(a=5921;5940>=a;a++)b[a]=0;for(a=6050;6125>=a;a++)b[a]=0;for(a=6244;6275>=a;a++)b[a]=0;for(a=6328;6348>=a;a++)b[a]=0;for(a=6350;6356>=a;a++)b[a]=0;for(a=6366;6372>=a;a++)b[a]=0;for(a=6381;6387>=a;a++)b[a]=0;for(a=6393;6404>=a;a++)b[a]=0;for(a=6480;6483>=
a;a++)b[a]=0;for(a=6511;6514>=a;a++)b[a]=0;for(a=6579;6581>=a;a++)b[a]=0;for(a=6619;6624>=a;a++)b[a]=0;for(a=6625;6627>=a;a++)b[a]=2;for(a=6628;6632>=a;a++)b[a]=0;for(a=6634;6637>=a;a++)b[a]=0;for(a=6669;6692>=a;a++)b[a]=0;for(a=6707;6709>=a;a++)b[a]=0;for(a=6720;6723>=a;a++)b[a]=0;for(a=6732;6738>=a;a++)b[a]=0;for(a=6931;6933>=a;a++)b[a]=0;for(a=6956;6959>=a;a++)b[a]=0;for(a=7005;7007>=a;a++)b[a]=0;for(a=7057;7070>=a;a++)b[a]=2;for(a=7074;7082>=a;a++)b[a]=0;for(a=7109;7118>=a;a++)b[a]=0;for(a=7119;7127>=
a;a++)b[a]=1;for(a=7374;7376>=a;a++)b[a]=0;for(a=7528;7586>=a;a++)b[a]=0;for(a=7587;7645>=a;a++)b[a]=2;for(a=7845;7859>=a;a++)b[a]=0;for(a=20002;20032>=a;a++)b[a]=0;for(a=20062;20092>=a;a++)b[a]=0;for(a=20135;20138>=a;a++)b[a]=0;for(a=20248;20258>=a;a++)b[a]=0;for(a=20348;20358>=a;a++)b[a]=0;for(a=20436;20440>=a;a++)b[a]=0;for(a=20822;20824>=a;a++)b[a]=0;for(a=20934;20936>=a;a++)b[a]=0;for(a=21035;21037>=a;a++)b[a]=0;for(a=21095;21097>=a;a++)b[a]=0;for(a=21148;21150>=a;a++)b[a]=0;for(a=21413;21423>=
a;a++)b[a]=0;for(a=21473;21483>=a;a++)b[a]=0;for(a=21780;21782>=a;a++)b[a]=0;for(a=21891;21894>=a;a++)b[a]=0;for(a=21896;21899>=a;a++)b[a]=0;for(a=22171;22177>=a;a++)b[a]=0;for(a=22181;22187>=a;a++)b[a]=0;for(a=22191;22197>=a;a++)b[a]=0;for(a=22234;22236>=a;a++)b[a]=0;for(a=22521;22525>=a;a++)b[a]=0;for(a=22991;22994>=a;a++)b[a]=0;for(a=23028;23038>=a;a++)b[a]=0;for(a=23830;23853>=a;a++)b[a]=0;for(a=23866;23872>=a;a++)b[a]=0;for(a=23877;23884>=a;a++)b[a]=0;for(a=23886;23894>=a;a++)b[a]=0;for(a=23946;23948>=
a;a++)b[a]=0;for(a=24311;24313>=a;a++)b[a]=0;for(a=24342;24347>=a;a++)b[a]=0;for(a=24370;24374>=a;a++)b[a]=10;for(a=24375;24381>=a;a++)b[a]=0;for(a=24718;24721>=a;a++)b[a]=0;for(a=24817;24821>=a;a++)b[a]=0;for(a=24877;24882>=a;a++)b[a]=0;for(a=24891;24893>=a;a++)b[a]=0;for(a=25391;25395>=a;a++)b[a]=0;for(a=25828;25838>=a;a++)b[a]=0;for(a=26191;26195>=a;a++)b[a]=0;for(a=26391;26393>=a;a++)b[a]=0;for(a=26701;26722>=a;a++)b[a]=0;for(a=26729;26799>=a;a++)b[a]=2;for(a=26801;26803>=a;a++)b[a]=2;for(a=26811;26813>=
a;a++)b[a]=2;for(a=26847;26870>=a;a++)b[a]=2;for(a=26891;26899>=a;a++)b[a]=0;for(a=26901;26923>=a;a++)b[a]=0;for(a=26929;26946>=a;a++)b[a]=0;for(a=26948;26998>=a;a++)b[a]=0;for(a=27037;27040>=a;a++)b[a]=0;for(a=27205;27232>=a;a++)b[a]=0;for(a=27258;27260>=a;a++)b[a]=0;for(a=27391;27398>=a;a++)b[a]=0;for(a=27561;27564>=a;a++)b[a]=0;for(a=27571;27574>=a;a++)b[a]=0;for(a=27581;27584>=a;a++)b[a]=0;for(a=27591;27594>=a;a++)b[a]=0;for(a=28191;28193>=a;a++)b[a]=0;for(a=28348;28358>=a;a++)b[a]=0;for(a=28402;28432>=
a;a++)b[a]=0;for(a=28462;28492>=a;a++)b[a]=0;for(a=29118;29122>=a;a++)b[a]=0;for(a=29168;29172>=a;a++)b[a]=0;for(a=29177;29185>=a;a++)b[a]=0;for(a=29187;29195>=a;a++)b[a]=0;for(a=29900;29903>=a;a++)b[a]=0;for(a=30161;30179>=a;a++)b[a]=0;for(a=30491;30494>=a;a++)b[a]=0;for(a=30729;30732>=a;a++)b[a]=0;for(a=31251;31259>=a;a++)b[a]=0;for(a=31265;31268>=a;a++)b[a]=0;for(a=31275;31279>=a;a++)b[a]=0;for(a=31281;31297>=a;a++)b[a]=0;for(a=31461;31469>=a;a++)b[a]=0;for(a=31491;31495>=a;a++)b[a]=0;for(a=31917;31922>=
a;a++)b[a]=0;for(a=31965;32E3>=a;a++)b[a]=0;for(a=32001;32003>=a;a++)b[a]=2;for(a=32005;32031>=a;a++)b[a]=2;for(a=32033;32060>=a;a++)b[a]=2;for(a=32064;32067>=a;a++)b[a]=2;for(a=32074;32077>=a;a++)b[a]=2;for(a=32081;32086>=a;a++)b[a]=0;for(a=32107;32130>=a;a++)b[a]=0;for(a=32133;32158>=a;a++)b[a]=0;for(a=32164;32167>=a;a++)b[a]=2;for(a=32180;32199>=a;a++)b[a]=0;for(a=32201;32260>=a;a++)b[a]=0;for(a=32301;32360>=a;a++)b[a]=0;for(a=32601;32662>=a;a++)b[a]=0;for(a=32664;32667>=a;a++)b[a]=2;for(a=32701;32761>=
a;a++)b[a]=0;for(a=53001;53004>=a;a++)b[a]=0;for(a=53008;53019>=a;a++)b[a]=0;for(a=53021;53032>=a;a++)b[a]=0;for(a=53042;53046>=a;a++)b[a]=0;for(a=53074;53080>=a;a++)b[a]=0;for(a=54001;54004>=a;a++)b[a]=0;for(a=54008;54019>=a;a++)b[a]=0;for(a=54021;54032>=a;a++)b[a]=0;for(a=54042;54046>=a;a++)b[a]=0;for(a=54048;54053>=a;a++)b[a]=0;for(a=54074;54080>=a;a++)b[a]=0;for(a=102001;102040>=a;a++)b[a]=0;for(a=102042;102063>=a;a++)b[a]=0;for(a=102065;102067>=a;a++)b[a]=0;for(a=102070;102117>=a;a++)b[a]=0;
for(a=102122;102216>=a;a++)b[a]=0;for(a=102221;102377>=a;a++)b[a]=0;for(a=102382;102388>=a;a++)b[a]=0;for(a=102389;102398>=a;a++)b[a]=2;for(a=102399;102444>=a;a++)b[a]=0;for(a=102445;102447>=a;a++)b[a]=2;for(a=102448;102458>=a;a++)b[a]=0;for(a=102459;102468>=a;a++)b[a]=2;for(a=102469;102496>=a;a++)b[a]=0;for(a=102500;102519>=a;a++)b[a]=1;for(a=102520;102524>=a;a++)b[a]=0;for(a=102525;102529>=a;a++)b[a]=2;for(a=102530;102561>=a;a++)b[a]=0;for(a=102570;102588>=a;a++)b[a]=0;for(a=102590;102598>=a;a++)b[a]=
0;for(a=102601;102603>=a;a++)b[a]=0;for(a=102605;102628>=a;a++)b[a]=0;for(a=102629;102646>=a;a++)b[a]=2;for(a=102648;102700>=a;a++)b[a]=2;for(a=102701;102703>=a;a++)b[a]=0;for(a=102707;102730>=a;a++)b[a]=2;for(a=102733;102758>=a;a++)b[a]=2;for(a=102767;102798>=a;a++)b[a]=0;for(a=102965;102969>=a;a++)b[a]=0;for(a=102971;102973>=a;a++)b[a]=0;for(a=102975;102989>=a;a++)b[a]=0;for(a=102990;102992>=a;a++)b[a]=1;for(a=102997;103002>=a;a++)b[a]=0;for(a=103003;103008>=a;a++)b[a]=2;for(a=103009;103011>=a;a++)b[a]=
0;for(a=103012;103014>=a;a++)b[a]=2;for(a=103019;103021>=a;a++)b[a]=0;for(a=103022;103024>=a;a++)b[a]=2;for(a=103029;103031>=a;a++)b[a]=0;for(a=103032;103034>=a;a++)b[a]=2;for(a=103065;103068>=a;a++)b[a]=0;for(a=103074;103076>=a;a++)b[a]=0;for(a=103077;103079>=a;a++)b[a]=1;for(a=103080;103082>=a;a++)b[a]=0;for(a=103083;103085>=a;a++)b[a]=2;for(a=103090;103093>=a;a++)b[a]=0;for(a=103097;103099>=a;a++)b[a]=0;for(a=103100;103102>=a;a++)b[a]=2;for(a=103107;103109>=a;a++)b[a]=0;for(a=103110;103112>=a;a++)b[a]=
2;for(a=103113;103116>=a;a++)b[a]=0;for(a=103117;103120>=a;a++)b[a]=2;for(a=103153;103157>=a;a++)b[a]=0;for(a=103158;103162>=a;a++)b[a]=2;for(a=103163;103165>=a;a++)b[a]=0;for(a=103166;103168>=a;a++)b[a]=1;for(a=103169;103171>=a;a++)b[a]=2;for(a=103186;103188>=a;a++)b[a]=0;for(a=103189;103191>=a;a++)b[a]=2;for(a=103192;103195>=a;a++)b[a]=0;for(a=103196;103199>=a;a++)b[a]=2;for(a=103200;103224>=a;a++)b[a]=0;for(a=103225;103227>=a;a++)b[a]=1;for(a=103232;103237>=a;a++)b[a]=0;for(a=103238;103243>=a;a++)b[a]=
2;for(a=103244;103246>=a;a++)b[a]=0;for(a=103247;103249>=a;a++)b[a]=2;for(a=103254;103256>=a;a++)b[a]=0;for(a=103257;103259>=a;a++)b[a]=2;for(a=103264;103266>=a;a++)b[a]=0;for(a=103267;103269>=a;a++)b[a]=2;for(a=103300;103375>=a;a++)b[a]=0;for(a=103381;103383>=a;a++)b[a]=0;for(a=103384;103386>=a;a++)b[a]=1;for(a=103387;103389>=a;a++)b[a]=0;for(a=103390;103392>=a;a++)b[a]=2;for(a=103397;103399>=a;a++)b[a]=0;for(a=103400;103471>=a;a++)b[a]=2;for(a=103476;103478>=a;a++)b[a]=0;for(a=103479;103481>=a;a++)b[a]=
2;for(a=103486;103488>=a;a++)b[a]=0;for(a=103489;103491>=a;a++)b[a]=2;for(a=103492;103495>=a;a++)b[a]=0;for(a=103496;103499>=a;a++)b[a]=2;for(a=103528;103543>=a;a++)b[a]=0;for(a=103544;103548>=a;a++)b[a]=2;for(a=103549;103551>=a;a++)b[a]=0;for(a=103552;103554>=a;a++)b[a]=1;for(a=103555;103557>=a;a++)b[a]=2;for(a=103558;103560>=a;a++)b[a]=0;for(a=103571;103573>=a;a++)b[a]=0;for(a=103574;103576>=a;a++)b[a]=2;for(a=103577;103580>=a;a++)b[a]=0;for(a=103581;103583>=a;a++)b[a]=2;for(a=103600;103694>=a;a++)b[a]=
0;for(a=103700;103793>=a;a++)b[a]=2;for(a=103794;103871>=a;a++)b[a]=0;for(a=103900;103971>=a;a++)b[a]=2;return b})},"esri/layers/GraphicsLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I){var K,M=-1!==f.renderer.toLowerCase().indexOf("svg"),L=-1!==f.renderer.toLowerCase().indexOf("canvas"),G=9>w("ie"),O=w("esri-touch");B=g(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(a,b){var d,e=this._connects=[];this._map=a;this._useWillChange="css-transforms"===a.navigationMode&&M&&w("esri-will-change");L?(d=c.create("div",{style:"overflow: visible; position: absolute;"},b),this._surface={getEventSource:function(){return d}},
e.push(m.connect(d,"onmousedown",this,this._canvasDownHandler)),e.push(m.connect(d,"onmouseup",this,this._canvasUpHandler)),e.push(m.connect(d,"onclick",this,this._canvasClickHandler)),K.prototype._canvas=!0):(d=(this._surface=f.createSurface(b,a.width,a.height)).getEventSource(),this._useWillChange&&h.set(d,"will-change","transform"),h.set(d=G?d.parentNode:d,{overflow:"visible",position:"absolute"}));e.push(m.connect(a,"onResize",this,"_onResizeHandler"));this._useWillChange&&(e.push(m.connect(a,
"onPan",this,"_onPanHandler")),e.push(m.connect(a,"onPanEnd",this,"_onPanEndHandler")),e.push(m.connect(a,"onExtentChange",this,"_onExtentChangeHandler")));return d},_onPanHandler:function(a,b){var c=this._map.__visibleRect,d=c.x+b.x,c=c.y+b.y;this._panDx=d;this._panDy=c;h.set(this._surface.getEventSource(),u._css.names.transform,u._css.translate(d,c))},_onPanEndHandler:function(a,b){var c=this._map.__visibleRect,d=c.x,c=c.y;this._panDx=d;this._panDy=c;h.set(this._surface.getEventSource(),u._css.names.transform,
u._css.translate(d,c))},_onExtentChangeHandler:function(a,b,c,d){c&&(this._panDy=this._panDx=0,h.set(this._surface.getEventSource(),u._css.names.transform,u._css.translate(0,0)))},_getTransform:function(){return{dx:this._panDx||0,dy:this._panDy||0}},_onResizeHandler:function(a,c,e){a=this._surface.getEventSource();var E=this._map,f;G&&h.set(a=a.parentNode,{width:c+"px",height:e+"px",clip:"rect(0px "+c+"px "+e+"px 0px)"});d.set(a,"width",c);d.set(a,"height",e);this._surface.declaredClass||b.forEach(a.childNodes,
function(a){d.set(a,"width",c);d.set(a,"height",e)});E.loaded&&(E.graphics.suspended||(E.graphics._resized=!0),b.forEach(E.graphicsLayerIds,function(a){f=E.getLayer(a);f.suspended||(f._resized=!0,f._childLayer&&(f._childLayer._resized=!0));f._updateSVGFilters(null,null,c,e)}))},_cleanUp:function(){b.forEach(this._connects,m.disconnect,m);this._map=this._surface=null},_processEvent:function(a){var b=this._map;a.screenPoint=new z(a.pageX-b.position.x,a.pageY-b.position.y);a.mapPoint=b.toMap(a.screenPoint)},
_canvasDownHandler:function(a){this._processEvent(a);this._downPt=a.screenPoint.x+","+a.screenPoint.y},_canvasUpHandler:function(a){this._processEvent(a);this._upPt=a.screenPoint.x+","+a.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(a,c,d,e){if(!a.visible||!c)return!1;var f=c.getTransformedBoundingBox(),h;return f?(h=new F(f[0].x,f[0].y,f[2].x,f[2].y),delete h.spatialReference,O?h.intersects(d):h.contains(e)):b.some(c.children||[],function(a){f=a.getTransformedBoundingBox();h=new F(f[0].x,
f[0].y,f[2].x,f[2].y);delete h.spatialReference;return O?h.intersects(d):h.contains(e)})},_canvasClickHandler:function(a){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(a);var c=this._map,d=b.map(c.graphicsLayerIds,function(a){return c.getLayer(a)});d.push(c.graphics);d.reverse();var d=b.filter(d,function(a){return a.loaded&&a._mouseEvents&&!a.suspended&&(!t.isDefined(a.opacity)||0<a.opacity)}),e=a.screenPoint,f=this._tolerance,h=e.x-f,q=e.y+f,k=e.x+f,f=e.y-f,r=new F(h,
f,k,q),h=c.toMap(new z(h,q)),k=c.toMap(new z(k,f)),q=h.spatialReference._getInfo(),y=new F(F.prototype._normalizeX(h.x,q).x,h.y,F.prototype._normalizeX(k.x,q).x,k.y,h.spatialReference),D;delete r.spatialReference;b.some(d,function(a){a=b.filter(a.graphics,function(a){return this._isPrimaryMatch(a,a.getDojoShape(),r,e)||!(!a._bgShape||!this._isPrimaryMatch(a,a._bgShape,r,e))},this);a.reverse();if(0<a.length){var k;b.some(a,function(a){return a.geometry&&y.intersects(a.geometry)?(k=a,!0):!1});if(k)return D=
k,!0}return!1},this);if(D&&(d=D.getLayer()))a.graphic=D,d.onClick(a)}}});K=g(s,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:L?"canvas-2d":f.renderer,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},constructor:function(b,c){if(b&&(a.isString(b)||a.isObject(b)&&(b.layerDefinition||b.query)))b=c;this._params=a.mixin({displayOnPan:!0,drawMode:!0,styling:!0},b||{});var d=this._params.dataAttributes;"string"===typeof d&&(d=
[d]);this.styling=M?this._params.styling:!0;this.dataAttributes=d;this.infoTemplate=b&&b.infoTemplate;this.graphics=[];this._draw=a.hitch(this,this._draw);this._refresh=a.hitch(this,this._refresh);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(a){this._params.drawMode=a},renderer:null,_setMap:function(b,c){this.inherited(arguments);this._map=b;this._wrap=b.wrapAround180;this._srInfo=b.spatialReference._getInfo();this._svgFilters=
{};this._canvas?(c=f.createSurface(c.getEventSource(),b.width,b.height),h.set(c.rawNode,"position","absolute"),this._div=c.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=a.hitch(this,this._canvasRender)):this._div=c.createGroup();this._bgGroup=this._div.createGroup();this._div.getEventSource().id=this.id+"_layer";this._initOpacity();return this._div},_unsetMap:function(a,d){b.forEach(this.graphics,function(a){a._shape=null});this._canvas?(d=this._div.getParent(),
d._parent={},c.destroy(d.rawNode),d.destroy()):(this._div.clear(),d.remove(this._div),c.destroy(this._div.getEventSource()));this._map=this._div=this._svgFilters=null;clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_initOpacity:function(){var a=this.opacity;t.isDefined(a)&&1>a&&this.setOpacity(a,!0)},_onZoomStartHandler:function(){x.hide(this._div.getEventSource())},_onExtentChangeHandler:function(a,b,c,d){clearTimeout(this._wakeTimer);this._wakeTimer=
null;c?(a=this._map.__visibleRect,b=this._div,this._evalSDRenderer(),this._refresh(!0),this._updateTransform(b,a.x,a.y,!0),this._renderProto&&b.surface.pendingRender?this._dirty=!0:this.suspended||x.show(b.getEventSource())):this._resized&&(this._resized=!1,this._refresh(!1));if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var a=this._div;this._dirty&&(delete this._dirty,this.suspended||x.show(a.getEventSource()));return this._renderProto.apply(a,arguments)},_refresh:function(a){var b=
this.graphics,c=b.length,d,e=this._draw;for(d=0;d<c;d++)e(b[d],a)},refresh:function(){this._refresh(!0)},redraw:function(){this._refresh(!0)},_getTransform:function(){var a={dx:0,dy:0};this._map&&(this._map._gc._useWillChange?a=this._map._gc._getTransform():this._div&&(a=this._div.getTransform()));return a},_onPanHandler:function(a,b){this._panDx=b.x;this._panDy=b.y;var c=this._map.__visibleRect;this._updateTransform(this._div,c.x+b.x,c.y+b.y)},_onPanEndUpdateHandler:function(a,b){var c=this._map.__visibleRect;
!this._params._child&&(b.x!==this._panDx||b.y!==this._panDy)?this._updateTransform(this._div,c.x,c.y,!0):this._updateSVGFilters(-c.x,-c.y);this._refresh(!1);if(this.graphics.length)this.onUpdate()},_onPanStartHandler:function(){x.hide(this._div.getEventSource())},_onPanEndHandler:function(){var a=this._map.__visibleRect,b=this._div;this._updateTransform(b,a.x,a.y,!0);this._refresh(!1);this._renderProto&&b.surface.pendingRender?this._dirty=!0:x.show(b.getEventSource());if(this.graphics.length)this.onUpdate()},
_updateTransform:function(a,b,c,d){this._map._gc._useWillChange||a.setTransform(e.translate({x:b,y:c}));d&&this._updateSVGFilters(-b,-c)},onSuspend:function(){this.inherited(arguments);x.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(b){this.inherited(arguments);b.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){!this.suspended&&
!this._map.__zooming&&this._onExtentChangeHandler(null,null,!0)}),0)},_enableDrawConnectors:function(){var a=this._map,b=m.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=b(a,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=b(a,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=b(a,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=b(a,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=
b(a,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=b(a,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var a=m.disconnect;a(this._onExtentChangeHandler_connect);a(this._onZoomStartHandler_connect);a(this._onPanHandler_connect);a(this._onPanStartHandler_connect);a(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=
null},_updateExtent:function(a){var b=a.geometry;if(b){if(!(a._extent=b.getExtent())){var c,d;if("esri.geometry.Point"===b.declaredClass)c=b.x,d=b.y;else if("esri.geometry.Multipoint"===b.declaredClass)c=b.points[0][0],d=b.points[0][1];else{a._extent=null;return}a._extent=new F(c,d,c,d,b.spatialReference)}}else a._extent=null},_intersects:function(a,c,d){var e=a.spatialReference,f=c.spatialReference,h=e&&f&&!e.equals(f)&&e._canProject(f)&&4326===f.wkid;if(this._wrap&&!d){d=[];var e=a._getFrameWidth(),
q=this._srInfo,k=a._clip?a._getAvailExtent():a.extent,r,y,D,P,p=[];r=c._partwise;h&&(k=a.geographicExtent,q=f._getInfo());a=k._getParts(q);if(r&&r.length){c=[];f=0;for(h=r.length;f<h;f++)c=c.concat(r[f]._getParts(q))}else c=c._getParts(q);f=0;for(h=c.length;f<h;f++){D=c[f];q=0;for(k=a.length;q<k;q++)if(P=a[q],P.extent.intersects(D.extent)){r=0;for(y=D.frameIds.length;r<y;r++)d.push((P.frameIds[0]-D.frameIds[r])*e)}}f=0;for(h=d.length;f<h;f++)r=d[f],b.indexOf(d,r)===f&&p.push(r);return p.length?p:
null}return(h?a.geographicExtent:a.extent).intersects(c)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(a,b){if(this._params.drawMode&&this._map&&!this.suspended&&!this._map.__zooming&&!this._resized)try{var c=a._extent,d,e,f=!M||this.styling,q=M&&this.dataAttributes,k=a.getDojoShape(),r;if(a.visible&&c&&(d=this._intersects(this._map,c,a.geometry._originOnly))&&(e=f?this._getSymbol(a):this._defaultMarker)){if(!a._offsets||a._offsets.join(",")!==
d.join(",")?a._offsets=d:r=!0,!k||b||!r){var y=a.geometry.type,c={graphic:a},D=a._bgShape,P=f&&!a.symbol?this._getRenderer(a):null,h=P&&P.backgroundFillSymbol;if("point"===y)this._isInvalidShape(e,k)&&this._removeShape(a),a._shape=this._drawPoint(this._div,a.geometry,e,a.getDojoShape(),d,P,a),f&&this._symbolizePoint(a.getDojoShape(),e,P,a);else if("multipoint"===y)this._drawMarkers(a,e,d,P),f&&this._symbolizeMarkers(a,e,P);else{var p,y=e,n,g;f&&(y=(p="simplemarkersymbol"===e.type||"picturemarkersymbol"===
e.type||"textsymbol"===e.type?e:null)?h:e);y&&y===h&&(n=this._bgGroup);D&&!n&&this._removeBgShape(a);y&&(!n&&this._isInvalidShape(y,a._shape)&&this._removeShape(a,!1),g=this._drawShape(a,d,n||this._div,n?D:a.getDojoShape()),f&&this._symbolizeShape(g,y,P,!!h,a),a[n?"_bgShape":"_shape"]=g);if(p){this._isInvalidShape(p,a._shape)&&this._removeShape(a,!1);var s=a.geometry.getCentroid();(g=s&&this._drawPoint(this._div,s,p,a._shape,d,P,a))&&this._symbolizePoint(g,p,P,a);a._shape=g}}L||(a._bgShape&&this._initNode(a,
a._bgShape,a._bgShape!==D,c,q),a._shape&&this._initNode(a,a._shape,a._shape!==k,c,q));c.node=a.getNode();this.onGraphicDraw(c)}}else k&&this._removeShape(a)}catch(u){this._errorHandler(u,a)}},_initNode:function(a,b,c,d,e){if(b=b&&b.getNode())b.e_graphic=a,this._addDataAttrs(a,e,b),c&&(d.node=b,this.onGraphicNodeAdd(d))},_removeShape:function(a,b,c){var d=a.getDojoShape(),e=d&&d.getNode();d&&!c&&(d.removeShape(),d.destroy());a._shape=a._offsets=null;!1!==b&&this._removeBgShape(a,c);if(e&&(e.e_graphic=
null,!L))this.onGraphicNodeRemove({graphic:a,node:e})},_removeBgShape:function(a,b){var c=a._bgShape,d=c&&c.getNode();c&&!b&&(c.removeShape(),c.destroy());a._bgShape=null;if(d&&(d.e_graphic=null,!L))this.onGraphicNodeRemove({graphic:a,node:d})},_addDataAttrs:function(a,b,c){var d=a.attributes,e,f=b?b.length:0,q=this._getRenderer(a);if(c&&d){for(e=0;e<f;e++)(c=b[e])&&a.attr("data-"+c,d[c]);!this.styling&&q&&(q.getBreakIndex?(b=q.getBreakIndex(a),a.attr("data-class-break",-1!==b?b:null)):q.getUniqueValueInfo&&
(b=q.getUniqueValueInfo(a),a.attr("data-unique-value",b?b.value:null)))}},_drawShape:function(a,b,c,d){a=a.geometry;var e=a.type,f=this._map,q=f.extent,k=f.width,r=f.height,f=f.__visibleRect,y=[],D,P;D="extent"===e;if("rect"===e||D)y={x:0,y:0,spatialReference:a.spatialReference},y.x=D?a.xmin:a.x,y.y=D?a.ymax:a.y,e=J.toScreenPoint(q,k,r,y),y.x=D?a.xmax:a.x+a.width,y.y=D?a.ymin:a.y+a.height,a=J.toScreenPoint(q,k,r,y),b={x:e.x-f.x+b[0],y:e.y-f.y,width:Math.abs(a.x-e.x),height:Math.abs(a.y-e.y)},0===
b.width&&(b.width=1),0===b.height&&(b.height=1),d=this._drawRect(c,d,b);else if("polyline"===e||"polygon"===e){D=0;for(P=b.length;D<P;D++)y=y.concat(J._toScreenPath(q,k,r,a,-f.x+b[D],-f.y));d=this._drawPath(c,d,y);this._rendererLimits&&("polyline"===e?this._clipPolyline(d,a):this._clipPolygon(d,a))}return d},_drawRect:function(a,b,c){return b?b.setShape(c):a.createRect(c)},_drawImage:function(a,b,c){return b?b.setShape(c):a.createImage(c)},_drawCircle:function(a,b,c){return b?b.setShape(c):a.createCircle(c)},
_drawPath:function(){return G?function(a,b,c,d){c=d?c:c.join(" ");if(b)return b.setShape(c);b=a.createObject(d?f.Path:f.EsriPath,c);a._overrideSize(b.getEventSource());return b}:function(a,b,c,d){c=d?c:c.join(" ");return b?b.setShape(c):a.createPath(c)}}(),_drawText:function(a,b,c){return b?b.setShape(c):a.createText(c)},_evalSDRenderer:function(a){var b=this._map,c=this.renderer,d,e=this._rndForScale;b&&(b.loaded&&c&&c.getRendererInfo)&&(d="zoom"===c.rangeType?c.getRendererInfoByZoom(b.getZoom()):
c.getRendererInfoByScale(b.getScale()));this._rndForScale=d&&d.renderer;(b=this._getRenderer())&&b.prepareForViewChange();!a&&this._rndForScale!=e&&this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(a){var b=this._rndForScale||this.renderer;a&&(b&&b.getObservationRenderer)&&(b=b.getObservationRenderer(a));return b},_getSymbol:function(a){var b=this._getRenderer();return a.symbol||b&&b.getSymbol(a)},_getVariable:function(a,b,c){var d;a&&(d=(a=a.getVisualVariablesForType(b,
c))&&a[0]);return d},_applyOpacity:function(a,b,c,d){b=b.getOpacity(d,{opacityInfo:c});null!=b&&(a=new v(a),a.a=b);return a},_symbolizeShape:function(b,c,d,e,f){var h=c.getStroke(),q=c.getFill(),k=c.type,r,y,D=this._getVariable(d,"sizeInfo",!1),P=this._getVariable(d,"colorInfo",!1),p=this._getVariable(d,"opacityInfo",!1),n=-1!==k.indexOf("linesymbol");c=n?"none"!==c.style:c.outline&&"none"!==c.outline.style;var g=n?null:this._getVariable(d,"sizeInfo","outline"),D=(D=e?g:g||D)?d.getSize(f,{sizeInfo:D,
resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null;e&&(P=p=null);if((P||p)&&"picturefillsymbol"!==k)n?(r=h&&h.color,P&&(r=d.getColor(f,{colorInfo:P})||r),r&&p&&(r=this._applyOpacity(r,d,p,f))):q&&q.toCss&&(y=q,P&&(y=d.getColor(f,{colorInfo:P})||y),y&&p&&(y=this._applyOpacity(y,d,p,f)));b.setStroke(!c||null==D&&!r?h:a.mixin({},h,null!=D?{width:D}:null,r&&{color:r})).setFill(y||q)},_smsToPath:function(){return G?function(a,b,c,d,e,f,q,k,r){switch(b){case a.STYLE_SQUARE:return["M",
e+","+q,"L",f+","+q,f+","+k,e+","+k,"X","E"];case a.STYLE_CROSS:return["M",c+","+q,"L",c+","+k,"M",e+","+d,"L",f+","+d,"E"];case a.STYLE_X:return["M",e+","+q,"L",f+","+k,"M",e+","+k,"L",f+","+q,"E"];case a.STYLE_DIAMOND:return["M",c+","+q,"L",f+","+d,c+","+k,e+","+d,"X","E"];case a.STYLE_TARGET:return["M",e+","+q,"L",f+","+q,f+","+k,e+","+k,e+","+q,"M",e-r+","+d,"L",e+","+d,"M",c+","+(q-r),"L",c+","+q,"M",f+r+","+d,"L",f+","+d,"M",c+","+(k+r),"L",c+","+k,"E"]}}:function(a,b,c,d,e,f,q,k,r){switch(b){case a.STYLE_SQUARE:return["M",
e+","+q,f+","+q,f+","+k,e+","+k,"Z"];case a.STYLE_CROSS:return["M",c+","+q,c+","+k,"M",e+","+d,f+","+d];case a.STYLE_X:return["M",e+","+q,f+","+k,"M",e+","+k,f+","+q];case a.STYLE_DIAMOND:return["M",c+","+q,f+","+d,c+","+k,e+","+d,"Z"];case a.STYLE_TARGET:return["M",e+","+q,f+","+q,f+","+k,e+","+k,e+","+q,"M",e-r+","+d,e+","+d,"M",c+","+(q-r),c+","+q,"M",f+r+","+d,f+","+d,"M",c+","+(k+r),c+","+k]}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",
simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",textsymbol:"text"},_isInvalidShape:function(a,b){var c=b&&b.shape&&b.shape.type,d=a&&a.type,e=a&&a.style;"rect"===c&&(c="path");d&&(e=this._typeMaps[d]||e);this._pathStyles[e]&&(e="path");return"shieldlabelsymbol"===d?!0:!(!c||!(e&&c!==e))},_drawPoint:function(a,b,c,d,f,h,q){var k=c.type,r=this._map,y=r.__visibleRect,D=J.toScreenPoint(r.extent,r.width,r.height,b).offset(-y.x+f[0],-y.y),y=D.x,P=D.y,p;b=[];var n,g=this._getVariable(h,
"rotationInfo",!1),g=g?h.getRotationAngle(q,{rotationInfo:g}):null,s=this._getVariable(h,"sizeInfo",!1),r=s?h.getSize(q,{sizeInfo:s,shape:c.style,resolution:r.getResolutionInMeters(),scale:r.getScale()}):null;g&&b.push(e.rotategAt(g,D));if(0!==c.xoffset||0!==c.yoffset)n=e.translate(c.xoffset,-c.yoffset),b.push(n);0!==c.angle&&b.push(e.rotategAt(c.angle,D));if("simplemarkersymbol"===k)switch(p=c.style,h=Math.round,r=null!=r?r:c.size,p){case A.STYLE_SQUARE:case A.STYLE_CROSS:case A.STYLE_X:case A.STYLE_DIAMOND:c=
isNaN(r)?16:r/2;p=this._drawPath(a,d,this._smsToPath(A,p,y,P,h(y-c),h(y+c),h(P-c),h(P+c)));break;case A.STYLE_TARGET:q=c._targetWidth/2;D=c._targetHeight/2;p=this._drawPath(a,d,this._smsToPath(A,p,y,P,h(y-q),h(y+q),h(P-D),h(P+D),c._spikeSize));break;case A.STYLE_PATH:p=this._drawPath(a,d,c.path,!0);c=p.getBoundingBox();a=this._getScaleMatrix(c,r);(1!==a.xx||1!==a.yy)&&b.push(e.scaleAt(a.xx,a.yy,D));b.push(e.translate(-(c.x+c.width/2)+y,-(c.y+c.height/2)+P));break;default:c=isNaN(r)?16:r/2,p=this._drawCircle(a,
d,{cx:y,cy:P,r:c})}else if("shieldlabelsymbol"===k)p=c.width,D=c.height,d=a.createGroup(),p=a.createImage({x:y-p/2,y:P-D/2,width:p,height:D,src:c.url}),d.add(p),null!=c.font&&(P+=0.2*c.getHeight(),a=a.createText({type:"text",text:c.text,x:y,y:P,align:"middle",decoration:c.decoration,rotated:c.rotated,kerning:c.kerning}),a.setFont(c.font),a.setFill(c.color),d.add(a)),p=d;else if("picturemarkersymbol"===k){if(null==r?(p=c.width,D=c.height):(D=r,p=D*(c.width/c.height),n&&(null!=n.dx&&(n.dx=p*(n.dx/c.width)),
null!=n.dy&&(n.dy=D*(n.dy/c.height)))),p=this._drawImage(a,d,{x:y-p/2,y:P-D/2,width:p,height:D,src:c.url}),M&&(a=p.getNode()))c=(c=this._getVariable(h,"opacityInfo",!1))?h.getOpacity(q,{opacityInfo:c}):null,null!=c?a.setAttribute("opacity",c):a.setAttribute("opacity",1)}else"textsymbol"===k&&(h=c.font,null!=r&&h&&(h=new h.constructor(h.toJson()),h.setSize(r)),p=this._drawText(a,d,{type:"text",text:c.text,x:y,y:P,align:c.getSVGAlign(),decoration:c.decoration||h&&h.decoration,rotated:c.rotated,kerning:c.kerning}),
h&&p.setFont(h),M&&(a=p.getNode(),y=c.getSVGBaseline(),P=c.getSVGBaselineShift(),a&&(a.setAttribute("dominant-baseline",y),P&&a.setAttribute("baseline-shift",P),this._applyHalo(p,c.haloColor,c.haloSize))));p.setTransform(e.multiply(b));p._wrapOffsets=f;return p},_applyHalo:function(a,b,c){var d=b&&c?this._getHaloId(b,c):null;a.setFilter(b&&c?w("webkit")||w("ff")?this._getDilateFilter(b,c,d):this._getOffsetFilter(b,c,d):null)},_getDilateFilter:function(a,b,c){var d=this._getSVGFilter(c);d||(d=this._createSVGFilter({id:c},
[p.feMorphology({operator:"dilate",radius:b,result:"dilated"}),p.feFlood({"flood-color":a.toCss(!0)}),p.feComposite({in2:"dilated",operator:"in",result:"composite"}),p.feMerge("composite","SourceGraphic")]));return d},_getOffsetFilter:function(a,b,c){var d=this._getSVGFilter(c);if(!d){a=a.toCss(!0);var d=this._offsetPrimitives,e,f=d.length,q=[],k=[];for(e=0;e<f;e++){var r=d[e],y="offset"+r.dir,D="composite"+r.dir;k.push(D);q.push(p.feOffset({dx:r.dx*b,dy:r.dy*b,"in":"SourceAlpha",result:y}),p.feFlood({"flood-color":a}),
p.feComposite({in2:y,operator:"in",result:D}))}k.push("SourceGraphic");q.push(p.feMerge.apply(p.feMerge,k));d=this._createSVGFilter({id:c},q)}return d},_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(a,b){return"halo_"+this._map.id+"_"+this.id+"_"+a.r+"_"+a.g+"_"+a.b+"_"+a.a+"_"+b},_getSVGFilter:function(a){return this._svgFilters[a]},_createSVGFilter:function(a,
b){var c=p.createFilter(a,b),d=this._map,e=d.__visibleRect;c.x=-e.x;c.y=-e.y;c.width=d.width;c.height=d.height;return this._svgFilters[a.id]=c},_updateSVGFilters:function(a,b,c,d){var e=this._svgFilters,f,q,k;for(q in e)if(f=e[q]){if(k=n.byId(q))null!=a&&k.setAttribute("x",a),null!=b&&k.setAttribute("y",b),null!=c&&k.setAttribute("width",c),null!=d&&k.setAttribute("height",d);null!=a&&(f.x=a);null!=b&&(f.y=b);null!=c&&(f.width=c);null!=d&&(f.height=d)}},_getScaleMatrix:function(a,b){var c=a.width/
a.height,d=1,e=1;isNaN(b)||(1<c?(d=b/a.width,e=b/c/a.height):(e=b/a.height,d=b*c/a.width));return{xx:d,yy:e}},_symbolizePoint:function(b,c,d,e){var f=c.type,h=c.style;if(!("shieldlabelsymbol"===f||"picturemarkersymbol"===f)){var q=c.getStroke();c=c.getFill();var h=h===A.STYLE_X||h===A.STYLE_CROSS,k=q&&q.color,r=h?k:c;if(d){var y=this._getVariable(d,"colorInfo",!1),D=this._getVariable(d,"opacityInfo",!1);y&&(r=d.getColor(e,{colorInfo:y})||r);r&&D&&(r=this._applyOpacity(r,d,D,e));r&&(h?r!==k&&(q=q?
a.mixin({},q):{},q.color=r):r!==c&&(c=r))}"textsymbol"===f?b.setFill(c):"simplemarkersymbol"===f&&b.setFill(c).setStroke(q)}},_drawMarkers:function(a,b,c,d){var e=a.geometry,f=e.points,q=a.getDojoShape()||this._div.createGroup(),k,r,y=f.length,D=[],P=0,h,p=c?c.length:0;q.children[0]&&this._isInvalidShape(b,q.children[0])&&q.clear();for(r=0;r<y;r++){k=f[r];for(h=0;h<p;h++)D[0]=c[h],this._drawPoint(q,{x:k[0],y:k[1],spatialReference:e.spatialReference},b,q.children[P++],D,d,a)}b=q.children.length;if(y*
c.length<b)for(r=b-1;r>=y*c.length;r--)q.children[r].removeShape();a._shape=q},_symbolizeMarkers:function(a,b,c){var d=a.getDojoShape().children,e,f=d.length;for(e=0;e<f;e++)this._symbolizePoint(d[e],b,c,a)},_errorHandler:function(a,b){a.message=b?"Unable to draw graphic (geometry:"+(b.geometry?b.geometry.declaredClass:null)+", symbol:"+(b.symbol?b.symbol.declaredClass:null)+"): "+a.message:"Unable to draw graphic (null): "+a.message;this.inherited(arguments)},_rendererLimits:function(){var a,b,c;
w("ff")?(a=16125,b=-32250,c=32250):G?(a=1E5,b=-1E5,c=1E5):w("chrome")&&6>w("chrome")&&(a=8150,b=-1E4,c=1E4);if(a)return{clipLimit:a,rangeMin:b,rangeMax:c,clipBBox:[-a,-a,a,a],clipSegments:[[[-a,-a],[a,-a]],[[a,-a],[a,a]],[[a,a],[-a,a]],[[-a,a],[-a,-a]]]}}(),_clipPolyline:function(a,c){var d=this._getCorners(a,c),e=d.br,f=this._rendererLimits,h=f.rangeMin,q=f.rangeMax,k=f.clipBBox,r=f.clipSegments,f=this._isPointWithinRange,y=this._isPointWithinBBox,D=this._getClipperIntersection,P=this._getPlaneIndex;
if(!f(d.tl,h,q)||!f(e,h,q)){G&&this._createSegments(a);var p=[];b.forEach(a.segments,function(a){a=a.args;var b=a.length,q=[],c;for(c=0;c<b;c+=2){var d=[a[c],a[c+1]],e=[a[c+2],a[c+3]],f=y(d,k),E=y(e,k);if(f^E){if(E=D([d,e],r))f?(c?q.push(E[1]):q.push(d,E[1]),p.push(q),q=[]):q.push(E[1],e)}else f?c?q.push(e):q.push(d,e):(E=P(d,k),f=P(e,k),-1===E||(-1===f||E===f)||(d=D([d,e],r,!0),0<d.length&&(d[E]||(E=d[E[0]]?E[0]:E[1]),d[f]||(f=d[f[0]]?f[0]:f[1]),e=d[E],d=d[f],e&&q.push(e),d&&(q.push(d),p.push(q),
q=[]))))}p.push(q)});a.setShape(this._getPathStringFromPaths(p))}},_clipPolygon:function(c,d){var e=this._getCorners(c,d),f=e.br,h=this._rendererLimits,p=h.clipLimit,q=h.rangeMin,k=h.rangeMax,r=h.clipBBox,y=h.clipSegments,h=this._isPointWithinRange,D=this._isPointWithinBBox,P=this._getClipperIntersection,n=this._getPlaneIndex,g=H._pointLineDistance;if(!h(e.tl,q,k)||!h(f,q,k))G&&this._createSegments(c),e=b.map(c.segments,function(k){var q=k.args,c=q.length,d=[];k=[];var e;for(e=0;e<c;e+=2){var f=[q[e],
q[e+1]],E=[q[e+2],q[e+3]];if(e===c-2){d.push(f);break}var h=D(f,r),s=D(E,r);d.push(f);if(h^s){if(s=P([f,E],y))f=s[1],f[h?"inOut":"outIn"]=!0,d.push(f),k.push([h?"INOUT":"OUTIN",d.length-1,s[0]])}else if(!h){var h=n(f,r),u=n(E,r);-1===h||(-1===u||h===u)||(s=P([f,E],y,!0),0<s.length?(s[h]||(h=s[h[0]]?h[0]:h[1]),s[u]||(u=s[u[0]]?u[0]:u[1]),f=s[h],E=s[u],f&&(f.outIn=!0,d.push(f),k.push(["OUTIN",d.length-1,h])),E&&(E.inOut=!0,d.push(E),k.push(["INOUT",d.length-1,u]))):a.isArray(h)&&a.isArray(u)&&(s=h.concat(u),
s.sort(),"0123"===s.join("")&&(s=[],3===h[0]+h[1]?s.push([p,-p],[-p,p]):s.push([-p,-p],[p,p]),h=g(s[0],[f,E]),f=g(s[1],[f,E]),d.push(h<f?s[0]:s[1]))))}}var t=r[0],m=r[1],v=r[2],x=r[3];b.forEach(d,function(a){a[0]<t&&(a[1]>=m&&a[1]<=x?a[0]=t:(a[0]=t,a[1]=a[1]<m?m:x))});b.forEach(d,function(a){a[1]<m&&(a[0]>=t&&a[0]<=v?a[1]=m:(a[1]=m,a[0]=a[0]<t?t:v))});b.forEach(d,function(a){a[0]>v&&(a[1]>=m&&a[1]<=x?a[0]=v:(a[0]=v,a[1]=a[1]<m?m:x))});b.forEach(d,function(a){a[1]>x&&(a[0]>=t&&a[0]<=v?a[1]=x:(a[1]=
x,a[0]=a[0]<t?t:v))});q=0;c=k.length;if(0<c){do{E=k[q];e=k[(q+1)%c];if(E[2]===e[2]&&"INOUT"===E[0]&&"OUTIN"===e[0])if(f=E[1],e=e[1],f<e)for(f+=1;f<e;f++)d[f][2]=!0;else if(f>e){for(f+=1;f<d.length;f++)d[f][2]=!0;for(f=0;f<e;f++)d[f][2]=!0}q=(q+1)%c}while(0!==q)}c=d[0];q=d[d.length-1];c[2]&&(q[2]=!0,b.some(k,function(k){return 1===k[1]?(d.splice(d.length-1,0,a.clone(d[1])),!0):!1}));d=b.filter(d,function(a){return a[2]?!1:!0});for(q=0;q<d.length-1;q++)if(c=d[q],(e=d[q+1])&&!(c[0]!==e[0]||c[1]!==e[1]))e.outIn?
c.outIn=!0:e.inOut&&(c.inOut=!0),d.splice(q+1,1);c=Math.abs;k=[];for(q=0;q<d.length-1;q++){E=d[q];f=E[0];E=E[1];h=c(f)===p;s=c(E)===p;e=d[q+1];u=e[0];e=e[1];var w=c(u)===p,A=c(e)===p;h&&A?k.push([q+1,[f,e]]):s&&w&&k.push([q+1,[u,E]])}for(q=k.length-1;0<=q;q--)e=k[q],f=d[e[0]-1],c=d[e[0]],!f.outIn&&(!f.inOut&&!c.outIn&&!c.inOut)&&d.splice(e[0],0,e[1]);c=d[0];q=d[d.length-1];(c[0]!==q[0]||c[1]!==q[1])&&d.push(c);return d}),c.setShape(this._getPathStringFromPaths(e))},_getCorners:function(a,b){if(G){var c=
this._map,d=b.getExtent(),e=d.spatialReference,f=c.toScreen(new C(d.xmin,d.ymax,e)),c=c.toScreen(new C(d.xmax,d.ymin,e));return{tl:f,br:c}}f=a.getTransformedBoundingBox();return{tl:f[0],br:f[2]}},_createSegments:function(a){a.shape.path=a.vmlPath;a.segmented=!1;a._confirmSegmented();var c=a.segments;1<c.length&&(a.segments=b.filter(c,function(a,b,c){b=c[b+1];return"M"===a.action&&b&&"L"===b.action?(a.args=a.args.concat(b.args),!0):!1}))},_getPathStringFromPaths:function(a){G?(a=b.map(a,function(a){return"m "+
b.map(a,function(a,b){return(1===b?"l ":"")+a.join(",")}).join(" ")}),a.push("e")):a=b.map(a,function(a){return"M "+b.map(a,function(a){return a.join(",")}).join(" ")});return a.join(" ")},_isPointWithinBBox:function(a,b){var c=b[1],d=b[2],e=b[3],f=a[0],q=a[1];return f>b[0]&&f<d&&q>c&&q<e?!0:!1},_isPointWithinRange:function(a,b,c){var d=a.x;a=a.y;return d<b||a<b||d>c||a>c?!1:!0},_getClipperIntersection:function(a,b,c){var d,e=H._getLineIntersection2,f=Math.round,q={length:0};for(d=0;4>d;d++){var k=
e(a,b[d]);if(k)if(k[0]=f(k[0]),k[1]=f(k[1]),c)q[d]=k,q.length++;else return[d,k]}return c?q:null},_getPlaneIndex:function(a,b){var c=a[0],d=a[1],e=b[0],f=b[1],q=b[2],k=b[3];return c<=e?d>=f&&d<=k?3:d<f?[0,3]:[2,3]:d<=f?c>=e&&c<=q?0:c<e?[3,0]:[1,0]:c>=q?d>=f&&d<=k?1:d<f?[0,1]:[2,1]:d>=k?c>=e&&c<=q?2:c<e?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},
onOpacityChange:function(){},setInfoTemplate:function(a){this.infoTemplate=a},add:function(a,b){if(a._graphicsLayer===this)return a;b||this.graphics.push(a);a._graphicsLayer=this;a._layer=this;this._updateExtent(a);this._draw(a);if(!b)this.onGraphicAdd(a);return a},remove:function(a,c,d){if(!c&&!d){c=this.graphics;if(-1===(a=b.indexOf(c,a)))return null;a=c.splice(a,1)[0]}a.getDojoShape()&&this._removeShape(a,null,d);a._shape=a._graphicsLayer=null;this.onGraphicRemove(a);return a},clear:function(a,
b){var c=this.graphics,d,e=!G;for(d=c.length-1;0<=d;d--)this.remove(c[d],null,e);this.graphics=[];if(e&&this._div){var f;this._childLayer&&(f=this._childLayer.getNode())&&f.parentNode&&f.parentNode.removeChild(f);this._bgGroup.clear();this._div.clear();this._bgGroup=this._div.createGroup();f&&this._div.getEventSource().appendChild(f);this._initOpacity()}if(!b)this.onGraphicsClear()},_setIEOpacity:function(a,b){var c=a&&a.getNode();if(c){var d=a.strokeStyle,e=c.stroke;d&&e&&(e.opacity=d.color.a*b);
d=a.fillStyle;e=c.fill;d&&e&&("tile"===e.type?h.set(c,"opacity",b):e.opacity=d.a*b)}},setOpacity:function(a,c){if(c||this.opacity!=a){var d=this._div;d&&(G?(b.forEach(this.graphics,function(b){this._setIEOpacity(b._shape,a);this._setIEOpacity(b._bgShape,a)},this),d._esriIeOpacity=a,this._bgGroup._esriIeOpacity=a):this._canvas?h.set(d.getEventSource(),"opacity",a):d.getEventSource().setAttribute("opacity",a));this.opacity=a;if(!c)this.onOpacityChange(a)}},setRenderer:function(a){this.renderer=a;this._evalSDRenderer(!0);
this.emit("renderer-change",{renderer:this._rndForScale||a})}});g=g([K,I],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this.enableMouseEvents=a.hitch(this,this.enableMouseEvents);this.disableMouseEvents=a.hitch(this,this.disableMouseEvents);this._processEvent=a.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var a=this.inherited("_setMap",arguments);this.enableMouseEvents();return a},_unsetMap:function(){this.disableMouseEvents();
this.inherited("_unsetMap",arguments)},_processEvent:function(a){var b=this._map,c=a.target,d;a.screenPoint=new z(a.pageX-b.position.x,a.pageY-b.position.y);for(a.mapPoint=b.toMap(a.screenPoint);c&&!(d=c.e_graphic);)c=c.parentNode;if(d)return a.graphic=d,a},_onMouseOverHandler:function(a){if(this._processEvent(a))this.onMouseOver(a)},_onMouseMoveHandler:function(a){if(this._processEvent(a))this.onMouseMove(a)},_onMouseDragHandler:function(a){if(this._processEvent(a))this.onMouseDrag(a)},_onMouseOutHandler:function(a){if(this._processEvent(a))this.onMouseOut(a)},
_onMouseDownHandler:function(a){this._downGr=this._downPt=null;this._processEvent(a)&&(m.disconnect(this._onmousemove_connect),m.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=m.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=a.graphic,this._downPt=a.screenPoint.x+","+a.screenPoint.y,this.onMouseDown(a))},_onMouseUpHandler:function(a){this._upGr=this._upPt=null;this._processEvent(a)&&(m.disconnect(this._onmousedrag_connect),m.disconnect(this._onmousemove_connect),
this._onmousemove_connect=m.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=a.graphic,this._upPt=a.screenPoint.x+","+a.screenPoint.y,this.onMouseUp(a))},_onClickHandler:function(a){if(this._processEvent(a)){var b=this._downGr,c=this._upGr;b&&(c&&b===c&&this._downPt===this._upPt)&&(G&&(u._ieGraphic=a.graphic),this.onClick(a))}},_onDblClickHandler:function(a){if(this._processEvent(a))this.onDblClick(a)},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},
onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var a=m.connect,b=this._div.getEventSource();L||(this._onmouseover_connect=a(b,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=a(b,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=a(b,"onmouseout",this,"_onMouseOutHandler"),this._onmousedown_connect=a(b,"onmousedown",this,"_onMouseDownHandler"),
this._onmouseup_connect=a(b,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=a(b,"onclick",this,"_onClickHandler"),this._ondblclick_connect=a(b,"ondblclick",this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var a=m.disconnect;a(this._onmouseover_connect);a(this._onmousemove_connect);a(this._onmousedrag_connect);a(this._onmouseout_connect);a(this._onmousedown_connect);a(this._onmouseup_connect);a(this._onclick_connect);a(this._ondblclick_connect);
this._mouseEvents=!1}}});g._GraphicsContainer=B;g._GraphicsLayer=K;return g})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(g,m,a){m.switchTo(a);return m})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(g,m,a,b,d){var c=null;a.add("vml",function(a,b,c){c.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';a="adj"in c.firstChild;c.innerHTML="";return a});return{load:function(h,
n,f){function e(){n(["dojox/gfx/"+p],function(a){g.renderer=p;c=a;f(a)})}if(c&&"force"!=h)f(c);else{var p=d.forceGfxRenderer;h=!p&&(m.isString(d.gfxRenderer)?d.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var s,u;!p&&h.length;)switch(h.shift()){case "svg":"SVGAngle"in b.global&&(p="svg");break;case "vml":a("vml")&&(p="vml");break;case "silverlight":try{a("ie")?(s=new ActiveXObject("AgControl.AgControl"))&&s.IsVersionSupported("1.0")&&(u=!0):navigator.plugins["Silverlight Plug-In"]&&(u=
!0)}catch(t){u=!1}finally{s=null}u&&(p="silverlight");break;case "canvas":b.global.CanvasRenderingContext2D&&(p="canvas")}"canvas"===p&&!1!==d.canvasEvents&&(p="canvasWithEvents");"svg"==p&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(e):e()}}}})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(g,m){var a=g.matrix={},b={};a._degToRad=function(a){return b[a]||(b[a]=Math.PI*a/180)};a._radToDeg=function(a){return 180*(a/Math.PI)};a.Matrix2D=function(b){if(b)if("number"==
typeof b)this.xx=this.yy=b;else if(b instanceof Array){if(0<b.length){for(var c=a.normalize(b[0]),h=1;h<b.length;++h){var n=c,f=a.normalize(b[h]),c=new a.Matrix2D;c.xx=n.xx*f.xx+n.xy*f.yx;c.xy=n.xx*f.xy+n.xy*f.yy;c.yx=n.yx*f.xx+n.yy*f.yx;c.yy=n.yx*f.xy+n.yy*f.yy;c.dx=n.xx*f.dx+n.xy*f.dy+n.dx;c.dy=n.yx*f.dx+n.yy*f.dy+n.dy}m.mixin(this,c)}}else m.mixin(this,b)};m.extend(a.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});m.mixin(a,{identity:new a.Matrix2D,flipX:new a.Matrix2D({xx:-1}),flipY:new a.Matrix2D({yy:-1}),
flipXY:new a.Matrix2D({xx:-1,yy:-1}),translate:function(b,c){return 1<arguments.length?new a.Matrix2D({dx:b,dy:c}):new a.Matrix2D({dx:b.x,dy:b.y})},scale:function(b,c){return 1<arguments.length?new a.Matrix2D({xx:b,yy:c}):"number"==typeof b?new a.Matrix2D({xx:b,yy:b}):new a.Matrix2D({xx:b.x,yy:b.y})},rotate:function(b){var c=Math.cos(b);b=Math.sin(b);return new a.Matrix2D({xx:c,xy:-b,yx:b,yy:c})},rotateg:function(b){return a.rotate(a._degToRad(b))},skewX:function(b){return new a.Matrix2D({xy:Math.tan(b)})},
skewXg:function(b){return a.skewX(a._degToRad(b))},skewY:function(b){return new a.Matrix2D({yx:Math.tan(b)})},skewYg:function(b){return a.skewY(a._degToRad(b))},reflect:function(b,c){1==arguments.length&&(c=b.y,b=b.x);var h=b*b,n=c*c,f=h+n,e=2*b*c/f;return new a.Matrix2D({xx:2*h/f-1,xy:e,yx:e,yy:2*n/f-1})},project:function(b,c){1==arguments.length&&(c=b.y,b=b.x);var h=b*b,n=c*c,f=h+n,e=b*c/f;return new a.Matrix2D({xx:h/f,xy:e,yx:e,yy:n/f})},normalize:function(b){return b instanceof a.Matrix2D?b:new a.Matrix2D(b)},
isIdentity:function(a){return 1==a.xx&&0==a.xy&&0==a.yx&&1==a.yy&&0==a.dx&&0==a.dy},clone:function(b){var c=new a.Matrix2D,h;for(h in b)"number"==typeof b[h]&&("number"==typeof c[h]&&c[h]!=b[h])&&(c[h]=b[h]);return c},invert:function(b){b=a.normalize(b);var c=b.xx*b.yy-b.xy*b.yx;return b=new a.Matrix2D({xx:b.yy/c,xy:-b.xy/c,yx:-b.yx/c,yy:b.xx/c,dx:(b.xy*b.dy-b.yy*b.dx)/c,dy:(b.yx*b.dx-b.xx*b.dy)/c})},_multiplyPoint:function(a,b,h){return{x:a.xx*b+a.xy*h+a.dx,y:a.yx*b+a.yy*h+a.dy}},multiplyPoint:function(b,
c,h){b=a.normalize(b);return"number"==typeof c&&"number"==typeof h?a._multiplyPoint(b,c,h):a._multiplyPoint(b,c.x,c.y)},multiplyRectangle:function(b,c){var h=a.normalize(b);c=c||{x:0,y:0,width:0,height:0};if(a.isIdentity(h))return{x:c.x,y:c.y,width:c.width,height:c.height};var n=a.multiplyPoint(h,c.x,c.y),f=a.multiplyPoint(h,c.x,c.y+c.height),e=a.multiplyPoint(h,c.x+c.width,c.y),p=a.multiplyPoint(h,c.x+c.width,c.y+c.height),h=Math.min(n.x,f.x,e.x,p.x),g=Math.min(n.y,f.y,e.y,p.y),u=Math.max(n.x,f.x,
e.x,p.x),n=Math.max(n.y,f.y,e.y,p.y);return{x:h,y:g,width:u-h,height:n-g}},multiply:function(b){for(var c=a.normalize(b),h=1;h<arguments.length;++h){var n=c,f=a.normalize(arguments[h]),c=new a.Matrix2D;c.xx=n.xx*f.xx+n.xy*f.yx;c.xy=n.xx*f.xy+n.xy*f.yy;c.yx=n.yx*f.xx+n.yy*f.yx;c.yy=n.yx*f.xy+n.yy*f.yy;c.dx=n.xx*f.dx+n.xy*f.dy+n.dx;c.dy=n.yx*f.dx+n.yy*f.dy+n.dy}return c},_sandwich:function(b,c,h){return a.multiply(a.translate(c,h),b,a.translate(-c,-h))},scaleAt:function(b,c,h,n){switch(arguments.length){case 4:return a._sandwich(a.scale(b,
c),h,n);case 3:return"number"==typeof h?a._sandwich(a.scale(b),c,h):a._sandwich(a.scale(b,c),h.x,h.y)}return a._sandwich(a.scale(b),c.x,c.y)},rotateAt:function(b,c,h){return 2<arguments.length?a._sandwich(a.rotate(b),c,h):a._sandwich(a.rotate(b),c.x,c.y)},rotategAt:function(b,c,h){return 2<arguments.length?a._sandwich(a.rotateg(b),c,h):a._sandwich(a.rotateg(b),c.x,c.y)},skewXAt:function(b,c,h){return 2<arguments.length?a._sandwich(a.skewX(b),c,h):a._sandwich(a.skewX(b),c.x,c.y)},skewXgAt:function(b,
c,h){return 2<arguments.length?a._sandwich(a.skewXg(b),c,h):a._sandwich(a.skewXg(b),c.x,c.y)},skewYAt:function(b,c,h){return 2<arguments.length?a._sandwich(a.skewY(b),c,h):a._sandwich(a.skewY(b),c.x,c.y)},skewYgAt:function(b,c,h){return 2<arguments.length?a._sandwich(a.skewYg(b),c,h):a._sandwich(a.skewYg(b),c.x,c.y)}});g.Matrix2D=a.Matrix2D;return a})},"esri/layers/gfxSniff":function(){define(["dojo/has","dojox/gfx"],function(g,m){g.add("esri-svg",function(){return-1!==m.renderer.toLowerCase().indexOf("svg")});
return g})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w){var v=g([n],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},
constructor:function(c,d){this._attrs={};if(c&&b.isString(c))this._url=u.urlToObject(this.url=c);else if(this.url=this._url=null,(d=d||c)&&(d.layerDefinition||d.query))d=null;this.spatialReference=new t(4326);this.initialExtent=new w(-180,-90,180,90,new t(4326));this._map=this._div=null;this.normalization=!0;d&&(d.id&&(this.id=d.id),!1===d.visible&&(this.visible=!1),e.isDefined(d.opacity)&&(this.opacity=d.opacity),e.isDefined(d.minScale)&&this.setMinScale(d.minScale),e.isDefined(d.maxScale)&&this.setMaxScale(d.maxScale),
this.attributionDataUrl=d.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,e.isDefined(d.showAttribution)&&(this.showAttribution=d.showAttribution),this.className=d.className,this.refreshInterval=d.refreshInterval||0);this._errorHandler=b.hitch(this,this._errorHandler);this.refresh=b.hitch(this,this.refresh);if(this.managedSuspension){var f=this._setMap;this._setMap=function(b){var c=f.apply(this,arguments);this.evaluateSuspension();if(this.suspended&&!b.loaded)var d=a.connect(b,
"onLoad",this,function(){a.disconnect(d);d=null;this.evaluateSuspension()});return c}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(a){this.loaded||(this.loadError=a);this.onError(a)},_setMap:function(b,c,d,e){this._map=b;this._lyrZEHandle=a.connect(b,"onZoomEnd",this,this._processMapScale);if(b.loaded)this.visibleAtMapScale=
this._isMapAtVisibleScale();else var f=a.connect(b,"onLoad",this,function(){a.disconnect(f);f=null;this._processMapScale()})},_unsetMap:function(b,c){a.disconnect(this._lyrZEHandle);this._toggleRT();this._map=this._lyrZEHandle=null;this._resumedOnce=void 0;this.suspended=!0},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this._toggleRT(),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(a,
b){this.updating&&(this.updating=!1,this.attr("data-updating"),this._toggleRT(!0),this.onUpdateEnd(a,b),this._map&&this._map._decr())},_getToken:function(){var a=this._url,b=this.credential;return a&&a.query&&a.query.token||b&&b.token||void 0},_findCredential:function(){this.credential=f.id&&this._url&&f.id.findCredential(this._url.path)},_useSSL:function(){var a=this._url,b=/^http:/i;this.url&&(this.url=this.url.replace(b,"https:"));a&&a.path&&(a.path=a.path.replace(b,"https:"))},refresh:function(){},
show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(a){this.setScaleRange(a)},setMaxScale:function(a){this.setScaleRange(null,a)},setScaleRange:function(a,b){var c=e.isDefined(a),d=e.isDefined(b);this.loaded||(this._hasMin=this._hasMin||c,this._hasMax=this._hasMax||d);var f=this.minScale,h=this.maxScale;this.minScale=(c?a:this.minScale)||0;this.maxScale=(d?b:this.maxScale)||0;if(f!==this.minScale||h!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},
suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this._toggleRT();this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},
_resume:function(){this.suspended=!1;this.attr("data-suspended");var a=void 0===this._resumedOnce,b=this.className,c=this._attrs,d=this.getNode(),e;if(a){this._resumedOnce=!0;if(b&&d){var f=d.getAttribute("class")||"";RegExp("(^|\\s)"+b+"(\\s|$)","i").test(f)||d.setAttribute("class",f+((f?" ":"")+b))}if(c&&d)for(e in c)c.hasOwnProperty(e)&&d.setAttribute(e,c[e])}this._toggleRT(!0);this.onResume({firstOccurrence:a});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var a=this.visibleAtMapScale;
this.visibleAtMapScale=this._isMapAtVisibleScale();a!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(a){return a?v.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(a,b){if(!a&&(!this._map||!this._map.loaded))return!1;var c=this._map;a=a||c.getScale();var d=this.minScale,e=this.maxScale,f=!d,h=!e,p;b&&(p=c.width>c.height?c.width:c.height);f||(a<=d?f=!0:b&&(f=Math.abs(d-a)/d<1/p));h||(a>=e?h=!0:b&&
(h=Math.abs(e-a)/e<1/p));return f&&h},getAttributionData:function(){var a=this.attributionDataUrl,b=new d(s._dfdCanceller);this.hasAttributionData&&a?(b._pendingDfd=p({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),b._pendingDfd.then(function(a){b.callback(a)},function(a){b.errback(a)})):(a=Error("Layer does not have attribution data"),a.log=m.isDebug,b.errback(a));return b},getResourceInfo:function(){var a=this.resourceInfo;return b.isString(a)?c.fromJson(a):b.clone(a)},
getMap:function(){return this._map},getNode:function(){return this._div},attr:function(a,b){var c=this.getNode();if("data-reference"===a&&11>h("ie"))return this;c&&(null==b?c.removeAttribute(a):c.setAttribute(a,b));this._attrs&&(null==b?delete this._attrs[a]:this._attrs[a]=b);return this},setRefreshInterval:function(a){var b=this.refreshInterval;this.refreshInterval=a;this._toggleRT();a&&!this.updating&&!this.suspended&&this._toggleRT(!0);if(b!==a)this.onRefreshIntervalChange();return this},_toggleRT:function(a){a&&
this.refreshInterval?(clearTimeout(this._refreshT),this._refreshT=setTimeout(this.refresh,6E4*this.refreshInterval)):this._refreshT&&(clearTimeout(this._refreshT),this._refreshT=null)},setNormalization:function(a){this.normalization=a},setVisibility:function(a){this.visible!==a&&(this.visible=a,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",a?null:"")},onLoad:function(){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},
onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onError:function(){}});return v})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(g,m,a,b,d,c,h,n,f,e){var p=function(){return 9>a("ie")?function(a,b,c,d,e,f,h,p,n){var g=[],m=Math.round,H,J=h.length,I,K,M,
L,G,O;for(H=0;H<J;H++)if(I=h[H],L=p?p(I[0][0],I[0][1],n):I[0],1<(M=I.length)){G=m((L[0]-a)*c+e);O=m((b-L[1])*d+f);L=p?p(I[1][0],I[1][1],n):I[1];K=m((L[0]-a)*c+e);L=m((b-L[1])*d+f);g.push("M",G+","+O,"L",K+","+L);for(K=2;K<M;K++)L=p?p(I[K][0],I[K][1],n):I[K],G=m((L[0]-a)*c+e),O=m((b-L[1])*d+f),g.push(G+","+O)}else G=m((L[0]-a)*c+e),O=m((b-L[1])*d+f),g.push("M",G+","+O);return g}:function(a,b,c,d,e,f,h,p,n,g){var m=[],H,J,I,K,M,L,G=Math.round;H=0;for(I=h?h.length:0;H<I;H++){M=h[H];m.push("M");J=0;for(K=
M?M.length:0;J<K;J++)L=p?p(M[J][0],M[J][1],n):M[J],m.push(G((L[0]-a)*c+e)+","+G((b-L[1])*d+f));g||m.push("Z")}return m}}();return{toScreenPoint:function(a,b,e,f,h){var p=a.spatialReference,n=f.spatialReference,g=f.x;f=f.y;p&&(n&&!p.equals(n)&&p._canProject(n))&&(p=p.isWebMercator()?d.lngLatToXY(g,f):d.xyToLngLat(g,f,!0),g=p[0],f=p[1]);g=(g-a.xmin)*(b/a.getWidth());f=(a.ymax-f)*(e/a.getHeight());h||(g=Math.round(g),f=Math.round(f));return new c(g,f)},toScreenGeometry:function(a,b,c,p){var m=a.xmin,
x=a.ymax,B=b/a.getWidth(),A=c/a.getHeight(),C=g.forEach,z=Math.round;if(p instanceof d)return new d(z((p.x-m)*B),z((x-p.y)*A));if(p instanceof f){a=new f;var F=a.points;C(p.points,function(a,b){F[b]=[z((a[0]-m)*B),z((x-a[1])*A)]});return a}if(p instanceof e)return new e(z((p.xmin-m)*B),z((x-p.ymin)*A),z((p.xmax-m)*B),z((x-p.ymax)*B));if(p instanceof h){a=new h;var H=a.paths,J;C(p.paths,function(a,b){J=H[b]=[];C(a,function(a,b){J[b]=[z((a[0]-m)*B),z((x-a[1])*A)]})});return a}if(p instanceof n){a=new n;
var I=a.rings,K;C(p.rings,function(a,b){K=I[b]=[];C(a,function(a,b){K[b]=[z((a[0]-m)*B),z((x-a[1])*A)]})});return a}},_toScreenPath:function(a,b,c,e,f,n){var g=e instanceof h,m=a.spatialReference,C=e.spatialReference,z,F;m&&(C&&!m.equals(C)&&m._canProject(C))&&(m.isWebMercator()?z=d.lngLatToXY:(z=d.xyToLngLat,F=!0));return p(a.xmin,a.ymax,b/a.getWidth(),c/a.getHeight(),f,n,g?e.paths:e.rings,z,F,g)},toMapPoint:function(a,b,c,e){return new d(a.xmin+e.x/(b/a.getWidth()),a.ymax-e.y/(c/a.getHeight()),
a.spatialReference)},toMapGeometry:function(a,b,c,p){var m=a.xmin,x=a.ymax,B=a.spatialReference,A=b/a.getWidth(),C=c/a.getHeight(),z=g.forEach;if(p instanceof d)return new d(m+p.x/A,x-p.y/C,B);if(p instanceof f){a=new f(B);var F=a.points;z(p.points,function(a,b){F[b]=[m+a[0]/A,x-a[1]/C]});return a}if(p instanceof e)return new e(m+p.xmin/A,x-p.ymin/C,m+p.xmax/A,x-p.ymax/C,B);if(p instanceof h){a=new h(B);var H=a.paths,J;z(p.paths,function(a,b){J=H[b]=[];z(a,function(a,b){J[b]=[m+a[0]/A,x-a[1]/C]})});
return a}if(p instanceof n){a=new n(B);var I=a.rings,K;z(p.rings,function(a,b){K=I[b]=[];z(a,function(a,b){K[b]=[m+a[0]/A,x-a[1]/C]})});return a}}}})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),function(g,m,a,b,d,c){function h(){m.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}h.prototype={addPlugin:function(a,b){var e=this,h=this._plugins,s=new d;try{g([a],function(d){a in h?s.resolve({id:h[a].declaredId||
a.replace(/\//g,".")}):(h[a]=d,c(d.add(e,b),function(){var b={id:d.declaredId||a.replace(/\//g,".")};e.emit("plugin-add",b);s.resolve(b)},function(a){s.reject(a)}))})}catch(u){s.reject(u)}return s.promise},removePlugin:function(a){if(a in this._plugins){var b=this._plugins[a];b.remove(this);delete this._plugins[a];this.emit("plugin-remove",{id:b.declaredId||a.replace(/\//g,".")})}},_pluginsHandler:function(){var b=this;a.some(arguments,function(a){if(a&&a.plugins&&a.plugins instanceof Array){a=a.plugins;
var c,d,h;for(h=0;h<a.length;h++)c=a[h],d=c instanceof Object?c.id:c,b.addPlugin(d,c.options);return!0}})}};return h})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),function(g,m,a,b,d,c,h){g=g(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(a){null!==a&&(m.mixin(this,a),a.exportOptions&&(this.exportOptions=new h(a.exportOptions)),this.timeExtent=null,a.timeExtent&&2===a.timeExtent.length&&
(this.timeExtent=new d(a.timeExtent)),this.timeReference=new c(a.timeReference))}});m.mixin(g,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});return g})},"esri/TimeExtent":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","./kernel"],function(g,m,a,b){var d=g(null,{declaredClass:"esri.TimeExtent",constructor:function(a){if(1<arguments.length)this._create(arguments[0],arguments[1]);else if(a)if(m.isArray(a)){var b=a[0],d=a[1];this.startTime=null===b||"null"===b?null:new Date(b);this.endTime=null===d||"null"===d?null:new Date(d)}else a instanceof Date&&this._create(a,null)},offset:function(a,b){var n=new d,f=this.startTime,e=this.endTime;f&&(n.startTime=this._getOffsettedDate(f,a,b));e&&
(n.endTime=this._getOffsettedDate(e,a,b));return n},intersection:function(a){return this._intersection(this,a)},toJson:function(){var a=[],b=this.startTime;a.push(b?b.getTime():"null");b=this.endTime;a.push(b?b.getTime():"null");return a},_create:function(a,b){this.startTime=a?new Date(a.getTime()):null;this.endTime=b?new Date(b.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",
multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",
setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(a,b){if(a&&b){var n=a.startTime,f=a.endTime,e=b.startTime,p=b.endTime,n=n?n.getTime():-Infinity,e=e?e.getTime():-Infinity,f=f?f.getTime():Infinity,p=p?p.getTime():Infinity,g,u;e>=n&&e<=f?g=e:n>=e&&n<=p&&(g=n);f>=e&&f<=p?u=f:p>=n&&p<=f&&(u=p);if(!isNaN(g)&&!isNaN(u))return n=new d,n.startTime=-Infinity===g?null:new Date(g),n.endTime=Infinity===u?null:
new Date(u),n}return null},_getOffsettedDate:function(a,b,d){var f=this._refData;a=new Date(a.getTime());b&&d&&(f=f[d],a[f.setter](a[f.getter]()+b*f.multiplier));return a}});return d})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(g,m,a,b){return g(null,{declaredClass:"esri.layers.TimeReference",constructor:function(a){a&&m.mixin(this,a)}})})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/has","../kernel","../lang"],function(g,m,a,b,d){return g(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(a){a&&m.mixin(this,a)},toJson:function(){return d.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}})})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./RangeDomain ./CodedValueDomain ./InheritedDomain ./FeatureTemplate".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p){return g(null,{declaredClass:"esri.layers.FeatureType",constructor:function(a){if(a&&m.isObject(a)){this.id=a.id;this.name=a.name;var b=a.symbol;b&&(this.symbol=h.fromJson(b));var b=a.domains,c,d=this.domains={};for(c in b)if(b.hasOwnProperty(c)){var g=b[c];switch(g.type){case "range":d[c]=new n(g);break;case "codedValue":d[c]=new f(g);break;case "inherited":d[c]=new e(g)}}if(c=a.templates){b=this.templates=[];for(a=0;a<c.length;a++)b.push(new p(c[a]))}}},toJson:function(){var b=
{id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},d,e=this.domains,f=this.templates,h=c.fixJson;if(e){var p=b.domains={};for(d in e)e.hasOwnProperty(d)&&(p[d]=e[d]&&e[d].toJson());h(p)}f&&(b.templates=a.map(f,function(a){return a.toJson()}));return h(b)}})})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Domain"],function(g,m,a,b,d){return g([d],{declaredClass:"esri.layers.InheritedDomain"})})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),
function(g,m,a,b,d,c){g=g(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(a){a&&m.isObject(a)&&(this.name=a.name,this.description=a.description,this.drawingTool=a.drawingTool,this.thumbnail=a.thumbnail,a=a.prototype,this.prototype=new c(a.geometry,null,a.attributes))},toJson:function(){return d.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,thumbnail:d.fixJson(m.clone(this.thumbnail)),prototype:this.prototype&&this.prototype.toJson()})}});
m.mixin(g,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",
TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});return g})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(g,m,a,b){return g(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(a){a&&m.isObject(a)&&(this.objectId=a.objectId,this.success=a.success,a.success||(a=a.error,this.error=Error(),this.error.code=a.code,
this.error.message=a.description))}})})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),function(g,m,a,b,d,c,h,n){var f=RegExp("__begin__","ig"),e=RegExp("__end__","ig"),p=/^__begin__/i,s=/__end__$/i;return g(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,symbol:null,maxScale:0,
minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter","below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft",
"center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd","below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart",
"below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd","always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(a){if(a&&(m.mixin(this,a),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=
c.valueOf(this._labelPlacementLookup,a.labelPlacement)),a.format&&(this.format=a.format),a.fieldInfos&&(this.fieldInfos=a.fieldInfos),a.symbol&&(this.symbol="esriSHD"===a.symbol.type?new n(a.symbol):new h(a.symbol)),a=this.sizeInfo))a.minSize&&(a.minSize=b.pt2px(a.minSize)),a.maxSize&&(a.maxSize=b.pt2px(a.maxSize))},getSymbol:function(){return this.symbol},toJson:function(){var a=this.sizeInfo;a&&(a=m.mixin({},a),a.minSize&&(a.minSize=b.px2pt(a.minSize)),a.maxSize&&(a.maxSize=b.px2pt(a.maxSize)));
var d=c.fixJson(this.labelExpressionInfo&&m.clone(this.labelExpressionInfo));this._processLabelExpressionInfo(d);a={name:this.name,labelExpression:this.labelExpression,labelExpressionInfo:d,format:this.format||void 0,fieldInfos:this.fieldInfos||void 0,useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,where:this.where,sizeInfo:a||void 0,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:this.labelPlacement,
symbol:this.symbol&&this.symbol.toJson()};return c.fixJson(a)},_processLabelExpressionInfo:function(a){a&&a.value&&(a.expression=this._convertTemplatedStringToArcade(a.value))},_convertTemplatedStringToArcade:function(a){var b;a&&(b=m.replace(a,function(a,b){return'__begin__$feature["'+b+'"]__end__'}),b=p.test(b)?b.replace(p,""):'"'+b,b=s.test(b)?b.replace(s,""):b+'"',b=b.replace(f,'" + ').replace(e,' + "'));return b}})})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),
function(g,m,a,b,d,c,h,n,f){var e={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};g=g(n,{declaredClass:"esri.symbol.ShieldLabelSymbol",type:"shieldlabelsymbol",color:[255,255,255,1],width:32,height:32,font:b.defaultFont,constructor:function(c,d,f,h,n){c?m.isString(c)?(this.url=c,d&&(this.color=d),f&&(this.width=f),h&&(this.height=h),void 0!==n&&(this.font=n)):(this.width=b.pt2px(c.width),this.height=b.pt2px(c.height),d=c.imageData,!(9>a("ie"))&&d&&(f=this.url,this.url="data:"+(c.contentType||
"image")+";base64,"+d,this.imageData=f)):m.mixin(this,e)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(a){this.width=a;return this},setHeight:function(a){this.height=a;return this},setUrl:function(a){a!==this.url&&(delete this.imageData,delete this.contentType);this.url=a;return this},setFont:function(a){this.font=a;return this},setText:function(a){this.text=a;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},
getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var a=this.url,d=this.imageData;if(0===a.indexOf("data:"))var e=a,a=d,d=e.indexOf(";base64,")+8,d=e.substr(d);var a=h.getAbsoluteUrl(a),e=b.px2pt(this.width),e=isNaN(e)?void 0:e,n=b.px2pt(this.height),n=isNaN(n)?void 0:n,a=c.fixJson(m.mixin(this.inherited("toJson",arguments),{type:"esriSHD",
url:a,imageData:d,contentType:this.contentType,width:e,height:n}));this.font?(d=new f(this.font),a.font=d.toJson()):a.font=null;delete a.size;a.imageData||delete a.imageData;return a}});g.defaultProps=e;return g})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../tasks/query ./RenderMode".split(" "),function(g,m,a,b,d,c,h){return g([h],{declaredClass:"esri.layers._SnapshotMode",constructor:function(a){this.featureLayer=a;this.pagination=
a.queryPagination;this._featureMap={};this._hasPartialFeatures=!1;this._drawFeatures=m.hitch(this,this._drawFeatures);this._queryErrorHandler=m.hitch(this,this._queryErrorHandler)},startup:function(){this.pagination=this.pagination&&null!=this.featureLayer.maxRecordCount;this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},propertyChangeHandler:function(a){this._init&&(a?this.featureLayer._collection||this._fetchAll():this._applyTimeFilter())},drawFeature:function(a){var b=a.attributes[this.featureLayer.objectIdField];
this._addFeatureIIf(b,a);this._incRefCount(b)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){var a=this.featureLayer;a._collection?(a._fireUpdateStart(),a._refresh(!0),a._fireUpdateEnd()):this._fetchAll()},hasAllFeatures:function(){return!this._hasPartialFeatures},_getRequestId:function(a){return("_"+a.name+a.layerId+a._ulid).replace(/[^a-zA-Z0-9\_]+/g,"_")},_fetchAll:function(){var a=this.featureLayer;!a._collection&&!a.suspended&&(a._fireUpdateStart(),this._clearIIf(),this._hasPartialFeatures=
!1,this._sendRequest())},_sendRequest:function(a){var b=this.map,e=this.featureLayer,h=e.getDefinitionExpression(),g=new c;g.outFields=e.getOutFields();g.where=h||"1\x3d1";g.returnGeometry=!0;g.outSpatialReference=new d(b.spatialReference.toJson());g.timeExtent=e.getTimeDefinition();g.maxAllowableOffset=e._maxOffset;g.quantizationParameters=e._quantizationParameters;e._ts&&(g._ts=(new Date).getTime());g.orderByFields=e.supportsAdvancedQueries?e.getOrderByFields():null;g.multipatchOption=e.multipatchOption;
this.pagination&&(this._start=g.start=null==a?0:a,g.num=e.maxRecordCount);var u;e._usePatch&&(u=this._getRequestId(e),this._cancelPendingRequest(null,u));e._task.execute(g,this._drawFeatures,this._queryErrorHandler,u)},_drawFeatures:function(a){this._purgeRequests();var b=a.features,c=this.featureLayer,d=c.objectIdField,h,g=b.length,m=a.exceededTransferLimit&&!c._collection,w=c._selectedFeatures,v=c.mode===c.constructor.MODE_AUTO,x,B,A;c._fireUpdateStart();c._sortFeatures(b);for(h=0;h<g;h++)B=b[h],
A=B.attributes[d],x=this._addFeatureIIf(A,B),this._incRefCount(A),v&&(x!==B&&w[A])&&(x.setGeometry(B.geometry),x.setAttributes(B.attributes));this._applyTimeFilter(!0);if(!this.pagination||!m)this._hasPartialFeatures=!!a.exceededTransferLimit,c._fireUpdateEnd(null,a.exceededTransferLimit?{queryLimitExceeded:!0}:null);m&&(this.pagination&&this._sendRequest(this._start+c.maxRecordCount),c.onQueryLimitExceeded())},_queryErrorHandler:function(a){this._purgeRequests();this._hasPartialFeatures=!0;var b=
this.featureLayer;b._errorHandler(a);b._fireUpdateEnd(a)}})})},"esri/layers/RenderMode":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/io/script ../kernel".split(" "),function(g,m,a,b,d,c,h){return m(null,{declaredClass:"esri.layers._RenderMode",constructor:function(){this._prefix="jsonp_"+(g._scopeName||"dojo")+"IoScript"},initialize:function(a){this.map=a;this._init=!0},startup:function(){},propertyChangeHandler:function(a){},destroy:function(){this._init=
!1},drawFeature:function(a){},suspend:function(){},resume:function(){},refresh:function(){},hasAllFeatures:function(){return!0},_incRefCount:function(a){(a=this._featureMap[a])&&a._count++},_decRefCount:function(a){(a=this._featureMap[a])&&a._count--},_getFeature:function(a){return this._featureMap[a]},_addFeatureIIf:function(a,b){var c=this._featureMap,d=c[a],h=this.featureLayer;d||(c[a]=b,h._add(b),b._count=0);return d||b},_removeFeatureIIf:function(a){var b=this._featureMap[a],c=this.featureLayer;
if(b){if(b._count)return;delete this._featureMap[a];c._remove(b)}return b},_clearIIf:function(){var a;a=this.featureLayer;var b=a.graphics,c=a._selectedFeatures,d=a.getSelectedFeatures().length,h=a.objectIdField;if(d)for(a=b.length-1;0<=a;a--){var d=b[a],g=d.attributes[h];g in c?d._count=1:(d._count=0,this._removeFeatureIIf(g))}else a.clear(),this._featureMap={}},_isPending:function(a){return c[this._prefix+a]?!0:!1},_cancelPendingRequest:function(a,b){if(a=a||c[this._prefix+b])try{a.cancel(),c._validCheck(a)}catch(d){}},
_purgeRequests:function(){c._validCheck(null)},_toggleVisibility:function(a){var b=this.featureLayer,c=b.graphics,d=a?"show":"hide",h,g=c.length;a=a&&b._ager;for(h=0;h<g;h++){var m=c[h];m[d]();a&&b._repaint(m)}},_applyTimeFilter:function(a){var c=this.featureLayer;if(c.timeInfo&&!c.suspended){a||c._fireUpdateStart();var d=c._trackManager;d&&d.clearTracks();var h=c.getTimeDefinition(),g=c._getOffsettedTE(c._mapTimeExtent);g?(g=c._getTimeOverlap(h,g))?(h=c._filterByTime(c.graphics,g.startTime,g.endTime),
d&&d.addFeatures(h.match),b.forEach(h.match,function(a){var b=a._shape;a.visible||(a.show(),(b=a._shape)&&b._moveToFront());c._ager&&b&&c._repaint(a)}),b.forEach(h.noMatch,function(a){a.visible&&a.hide()})):this._toggleVisibility(!1):(d&&d.addFeatures(c.graphics),this._toggleVisibility(!0));d&&(d.moveLatestToFront(),d.drawTracks());a||c._fireUpdateEnd()}}})})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),
function(g,m,a,b,d,c,h,n,f,e){return g([f],{declaredClass:"esri.layers._OnDemandMode",constructor:function(b){this.featureLayer=b;this._featureMap={};this._hasPartialFeatures=!1;this._queryErrorHandler=a.hitch(this,this._queryErrorHandler)},initialize:function(a){this.inherited(arguments);var b=this.featureLayer,c=b._srInfo;this._gridLayer=new e(new h(c?c.valid[0]:a.extent.xmin,c?c.valid[1]:a.extent.ymax,a.spatialReference),{width:b._tileWidth,height:b._tileHeight},{width:a.width,height:a.height},
c);this._cellMap={};this._gridLayer.setResolution(a.extent)},startup:function(){this._ioQueue=[];this.featureLayer.suspended||(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(a){this._init&&2>a&&this._zoomHandler()},destroy:function(){this._disableConnectors();this.inherited(arguments)},drawFeature:function(a){var b=this._gridLayer,c=a.geometry,d=[];if(c)for(var d=b.getCellsInExtent("point"===c.type?{xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y}:c.getExtent(),!1).cells,b=this._cellMap,
e,f=a.attributes[this.featureLayer.objectIdField],h,n,g,c=0;c<d.length;c++)e=d[c],h=e.latticeID,n=e.row,g=e.col,h?e=b[h]=b[h]||e:(b[n]=b[n]||{},e=b[n][g]=b[n][g]||e),e.features=e.features||[],e.features.push(a),this._addFeatureIIf(f,a),this._incRefCount(f)},suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},hasAllFeatures:function(){if(this._hasPartialFeatures)return!0;var a=
!1,b=this._getCurrentCells(),c;for(c=0;c<b.length;c++)if(b[c].hasPartialFeatures){a=!0;break}return!a},_enableConnectors:function(){var a=this.map;this._zoomConnect=m.connect(a,"onZoomEnd",this,this._zoomHandler);this._panConnect=m.connect(a,"onPanEnd",this,this._panHandler);this._resizeConnect=m.connect(a,"onResize",this,this._panHandler)},_disableConnectors:function(){m.disconnect(this._zoomConnect);m.disconnect(this._panConnect);m.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);
var a=this.featureLayer,b=this.map;a.suspended||(a._fireUpdateStart(),this._clearIIf(),this._hasPartialFeatures=!1,(a=a._trackManager)&&a.clearTracks(),this._cellMap={},this._gridLayer.setResolution(b.extent),this._sendRequest())},_panHandler:function(a){this.featureLayer._fireUpdateStart();var b=this.featureLayer._resized;a=b?a:null;b&&this._gridLayer.setMapState(a,this.map.width,this.map.height);this._sendRequest(a)},_getRequestId:function(a,b){return("_"+a.name+a.layerId+a._ulid+"_"+b.resolution+
"_"+(b.latticeID||b.row+"_"+b.col)).replace(/[^a-zA-Z0-9\_]+/g,"_")},_sendRequest:function(a){this._exceeds=!1;var c=this.featureLayer,d=this.map;a=a||d.extent;d=this._gridLayer.getCellsInExtent(a,c.latticeTiling).cells;if(!c.isEditable())var e=this._cellMap,d=b.filter(d,function(a){if(a.lattice){if(e[a.latticeID])return!1}else if(e[a.row]&&e[a.row][a.col])return!1;return!0});var f=c.getOutFields(),h=c.getDefinitionExpression(),g=c._getOffsettedTE(c._mapTimeExtent),m=c.supportsAdvancedQueries?c.getOrderByFields():
null,A=c._usePatch,C=this._ioQueue,z,F=this,H=this._drawFeatures,J,I,K;this._pending=this._pending||0;for(z=0;z<d.length;z++){J=d[z];I=new n;I.geometry=J.extent||J.lattice;I.outFields=f;I.where=h;c.latticeTiling&&J.extent&&(I.spatialRelationship=n.SPATIAL_REL_CONTAINS);I.returnGeometry=!0;I.timeExtent=g;c._ts&&(I._ts=(new Date).getTime());I.orderByFields=m;I.multipatchOption=c.multipatchOption;I.maxAllowableOffset=c._maxOffset;I.quantizationParameters=c._quantizationParameters;if((K=c.advancedQueryCapabilities)&&
K.supportsQueryWithResultType)I.resultType="tile";K=null;if(A&&(K=this._getRequestId(c,J),this._isPending(K)))continue;this._pending++;C.push(c._task.execute(I,function(){var a=J;return function(b){H.apply(F,[b,a])}}.call(this),this._queryErrorHandler,K))}this._removeOldCells(a);this._endCheck()},_drawFeatures:function(a,b){b.hasPartialFeatures=!!a.exceededTransferLimit;this._exceeds=this._exceeds||a.exceededTransferLimit;this._finalizeIO();var c=this.featureLayer,d=this.map.extent,e=b.extent,f=b.row,
h=b.col,n=c.objectIdField,g=a.features,m=this._gridLayer,z=this._cellMap,F=b.latticeID,H=F?z[F]:z[f]&&z[f][h];if(b.resolution!=m._resolution||(F?F!==m.getLatticeID(d):!m.intersects(e,d)))H&&this._removeCell(f,h,F);else if(H)c._sortFeatures(g),this._updateCell(H,g);else{c._sortFeatures(g);b.features=g;F?z[F]=b:(z[f]=z[f]||{},z[f][h]=b);d=g.length;for(c=0;c<d;c++)e=g[c],f=e.attributes[n],this._addFeatureIIf(f,e),this._incRefCount(f)}this._endCheck()},_queryErrorHandler:function(a){this._finalizeIO();
this._hasPartialFeatures=!0;this.featureLayer._errorHandler(a);this._endCheck(!0)},_finalizeIO:function(){this._purgeRequests();this._pending--},_endCheck:function(a){if(0===this._pending){this._processIOQueue();var c=this.featureLayer,d=c._trackManager;d&&(d.clearTracks(),d.addFeatures(c.graphics),c._ager&&b.forEach(c.graphics,function(a){a._shape&&c._repaint(a)}),d.moveLatestToFront(),d.drawTracks());this.featureLayer._fireUpdateEnd(a&&Error("FeatureLayer: an error occurred while updating the layer"),
this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)c.onQueryLimitExceeded()}},_processIOQueue:function(a){this._ioQueue=b.filter(this._ioQueue,function(a){return-1<a.fired?!1:!0});a&&b.forEach(this._ioQueue,this._cancelPendingRequest)},_getCurrentCells:function(a){var b=[];a=a||this._cellMap;for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];d&&(d.hasOwnProperty("row")||d.hasOwnProperty("latticeID")?b.push(d):"object"===typeof d&&b.push.apply(b,this._getCurrentCells(d)))}return b},_removeOldCells:function(a){var b=
this._cellMap,c=this._gridLayer,d,e;for(d in b)if(b[d]){var f=b[d],h=f.latticeID,n=0,g=0;if(h)n++,h!==c.getLatticeID(a)&&(this._removeCell(null,null,h),g++);else for(e in f)f[e]&&(n++,c.intersects(f[e].extent,a)||(this._removeCell(d,e),g++));g===n&&delete b[d]}},_updateCell:function(a,b){var c=this.featureLayer,d=c.objectIdField,c=c._selectedFeatures,e,f=b.length;a.features=a.features||[];for(e=0;e<f;e++){var h=b[e],n=h.attributes[d],g=this._addFeatureIIf(n,h);g===h?(this._incRefCount(n),a.features.push(g)):
n in c||(g.setGeometry(h.geometry),g.setAttributes(h.attributes))}},_removeCell:function(a,b,c){var d=this._cellMap,e=this.featureLayer,f=e.objectIdField,h=c?d[c]:d[a]&&d[a][b];if(h){c?delete d[c]:delete d[a][b];a=h.features;for(b=0;b<a.length;b++)c=a[b].attributes[f],this._decRefCount(c),c in e._selectedFeatures||this._removeFeatureIIf(c)}}})})},"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../SpatialReference ../geometry/Extent ../geometry/Polyline".split(" "),
function(g,m,a,b,d,c,h,n){return g(null,{declaredClass:"esri.layers._GridLayout",constructor:function(a,b,c,d){this.origin=a;this.cellWidth=b.width;this.cellHeight=b.height;this.mapWidth=c.width;this.mapHeight=c.height;this.srInfo=d},setResolution:function(a){this._resolution=(a.xmax-a.xmin)/this.mapWidth;this.srInfo&&(a=Math.round(2*this.srInfo.valid[1]/this._resolution),a=Math.round(a/this.cellWidth),this._frameStats=[a,0,a-1])},setMapState:function(a,b,c){this.mapWidth=b;this.mapHeight=c;this.setResolution(a)},
getCellCoordinates:function(a){var b=this._resolution,c=this.origin;return{row:Math.floor((c.y-a.y)/(this.cellHeight*b)),col:Math.floor((a.x-c.x)/(this.cellWidth*b))}},normalize:function(a){var b=this._frameStats;if(b){var c=b[0],d=b[1],b=b[2];a<d?(a%=c,a=a<d?a+c:a):a>b&&(a%=c)}return a},intersects:function(b,c){var d=this.srInfo;return d?a.some(c._getParts(d),function(a){return b.intersects(a.extent)}):b.intersects(c)},getCellExtent:function(a,b){var d=this._resolution,n=this.origin,g=this.cellWidth,
m=this.cellHeight;return new h(b*g*d+n.x,n.y-(a+1)*m*d,(b+1)*g*d+n.x,n.y-a*m*d,new c(n.spatialReference.toJson()))},getLatticeID:function(a){var b=this.getCellCoordinates({x:a.xmin,y:a.ymax}),c=this.getCellCoordinates({x:a.xmax,y:a.ymin});a=b.row;var d=c.row,b=this.normalize(b.col),c=this.normalize(c.col);return a+"_"+d+"_"+b+"_"+c},sorter:function(a,b){return a<b?-1:1},getCellsInExtent:function(b,c){var d=this.getCellCoordinates({x:b.xmin,y:b.ymax}),h=this.getCellCoordinates({x:b.xmax,y:b.ymin}),
g=d.row,m=h.row,d=d.col,h=h.col,w=[],v,x,B,A=[],C=[],z,F,H,J,I=[];for(v=g;v<=m;v++)for(x=d;x<=h;x++)B=this.normalize(x),b=this.getCellExtent(v,B),a.some(w,function(a){return a.row===v&&a.col===B})||w.push({row:v,col:B,extent:b,resolution:this._resolution}),c&&(A.push(b.xmin,b.xmax),C.push(b.ymin,b.ymax));d=this.normalize(d);h=this.normalize(h);A.sort(this.sorter);C.sort(this.sorter);x=A.length;for(v=x-1;0<=v;v--)v<x-1&&A[v]===A[v+1]&&A.splice(v,1);x=C.length;for(v=x-1;0<=v;v--)v<x-1&&C[v]===C[v+1]&&
C.splice(v,1);if(A.length&&C.length){z=A[0];F=A[A.length-1];H=C[0];J=C[C.length-1];x=A.length;for(v=0;v<x;v++)I.push([[A[v],J],[A[v],H]]);x=C.length;for(v=0;v<x;v++)I.push([[z,C[v]],[F,C[v]]]);A=new n({paths:I,spatialReference:this.origin.spatialReference.toJson()});w.push({latticeID:g+"_"+m+"_"+d+"_"+h,lattice:A,resolution:this._resolution})}return{minRow:g,maxRow:m,minCol:d,maxCol:h,cells:w}}})})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel",
"./RenderMode"],function(g,m,a,b,d){return g([d],{declaredClass:"esri.layers._SelectionMode",constructor:function(a){this.featureLayer=a;this._featureMap={}},propertyChangeHandler:function(a){this._init&&0===a&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)},hasAllFeatures:function(){return!this.featureLayer._hasPartialSelectedFeatures}})})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),
function(g,m,a,b,d,c,h,n,f,e){return g([e],{declaredClass:"esri.layers._StreamMode",constructor:function(a,b){this.featureLayer=a;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=m.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;a.purgeOptions&&(a.purgeOptions.age&&"number"===typeof a.purgeOptions.age)&&(this._maxFeatureAge=1E3*Math.ceil(60*a.purgeOptions.age));this._drawFeatures=
m.hitch(this,this._drawFeatures);this._queryErrorHandler=m.hitch(this,this._queryErrorHandler)},startup:function(){},propertyChangeHandler:function(a){this._init&&(0===a?this._applyTimeFilter():3===a&&this._redrawAllTracks())},destroy:function(){this.inherited(arguments);clearTimeout(this._timeoutId);this._featuresByTime=this._drawBuffer=this._featureMap=null},drawFeature:function(a){var b=this.featureLayer,c=b.objectIdField;this._timeoutId||(this._timeoutId=setTimeout(this._flushDrawBuffer,this._refreshRate));
b._joinField&&this._getFeature(a.attributes[c])?this._drawBuffer.updates.push({oid:a.attributes[c],updates:a}):this._drawBuffer.adds.push(a)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){var a=this.featureLayer;a&&(!a._relatedUrl&&!a._keepLatestUrl?(a._fireUpdateStart(),a.clear(),a._fireUpdateEnd()):(a._fireUpdateStart(),a._refreshing=!0,a.disconnect(),a.clear(),a._relatedQueried=!1,a._keepLatestQueried=!1,a.connect()))},_drawFeatures:function(a,b){this._purgeRequests();var c=
this.featureLayer;c._create(a.features||[]);c._fireUpdateEnd(null,b)},_applyTimeFilter:function(a){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(b){var c=this.featureLayer,d=c.objectIdField;b&&a.forEach(b,function(a){a=a.attributes[d];c._unSelectFeatureIIf(a,this);this._decRefCount(a);this._removeFeatureIIf(a)},this)},_addFeatures:function(b){var c=this.featureLayer,d=c._endTimeField,e=c._startTimeField,f,h,n,g=[],m=[],C=[];f=c._trackManager;h=c.objectIdField;if(f)for(n in b=
f.addFeatures(b),b)b.hasOwnProperty(n)&&(g.push(n),b[n].adds&&(m=m.concat(b[n].adds)),b[n].deletes&&(C=C.concat(b[n].deletes)));else m=b;a.forEach(m,function(a){var b=a.attributes[h],c;c=d&&a.attributes[d];!c&&this._maxFeatureAge&&(c=e&&a.attributes[e]?a.attributes[e]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);c&&(c=1E3*Math.ceil(c/1E3),this._featuresByTime[c]?this._featuresByTime[c].push(b):this._featuresByTime[c]=[b]);this._addFeatureIIf(b,a);this._incRefCount(b)},this);C.length&&this._removeFeatures(C);
f&&f.refreshTracks(g)},_updateFeatures:function(b){var c=this.featureLayer,d,e,f=[];d=c._trackManager;e=c._trackIdField;a.forEach(b,function(a){var b=a.updates;a=this._getFeature(a.oid);var h;if(a){b.geometry&&a.setGeometry(b.geometry);b=b.attributes||{};for(h in b)b.hasOwnProperty(h)&&(a.attributes[h]=b[h]);a.visible=this._checkFeatureTimeIntersects(a);d&&a.attributes[e]?f.push(a.attributes[e]):c._repaint(a,null,!0)}},this);f.length&&d.refreshTracks(f)},_redrawAllTracks:function(){var a=this.featureLayer._trackManager,
b;if(a&&(b=a.trimTracks())&&0<b.length)this._removeFeatures(b),a.refreshTracks()},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var a=this._drawBuffer,b=a.adds.splice(0,a.adds.length),c=a.updates.splice(0,a.updates.length),a=this.featureLayer;if(!a)return!1;a.updating||a._fireUpdateStart();this._addFeatures(b);this._updateFeatures(c);if((b=this._getExpiredFeatures())&&b.length)this._removeFeatures(b),a._trackManager&&a._trackManager.removeFeatures(b);a._purge();a._fireUpdateEnd();this._timeoutId=
null},_clearDrawBuffer:function(){var a=this._timeoutId,b=this._drawBuffer,c=b.adds,b=b.updates;a&&clearTimeout(a);c.splice(0,c.length);b.splice(0,b.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(a){a=a||0===a?a:200;0>a&&(a=200);this._refreshRate=a},_checkFeatureTimeIntersects:function(a){var b=this.featureLayer,c=b.getMap(),c=c?c.timeExtent:
null;return!c||!b.timeInfo||!b.timeInfo.startTimeField&&!b.timeInfo.endTimeField?!0:0<b._filterByTime([a],c.startTime,c.endTime).match.length},_getRequestId:function(a){return("_"+a.name+a.layerId+a._ulid).replace(/[^a-zA-Z0-9\_]+/g,"_")},_fetchArchive:function(a){function b(a){C++;g.execute(m).then(function(b){a(null,b)},function(b){a(b)})}function d(a,c){if(a)C>=z||!e._relatedUrl?F._queryErrorHandler(Error("Could not get features from related feature service")):(H={relatedFeatureWarning:"Querying related feature service using the current filter failed. All related features are displayed, and the filter is applied to the stream service only"},
m.where="1\x3d1",b(d));else{var f=F._fixFieldNameCasing(e,c);c.features=f;F._drawFeatures(c,H)}}var e=this.featureLayer,g,m,x,B,A;e._fireUpdateStart();if(a&&this.map){g=new n(a);m=new h;a=this.map;x=e.getFilter()||{};B=x.where||"1\x3d1";A=x.geometry?f.fromJson(x.geometry):null;x=x.outFields?x.outFields.split(","):["*"];m.geometry=A;m.where=B;m.outFields=x;m.returnGeometry=!0;m.outSpatialReference=new c(a.spatialReference.toJson());e._usePatch&&(a=this._getRequestId(e),this._cancelPendingRequest(null,
a));var C=0,z=2,F=this,H=null;b(d)}else return this._fireUpdateEnd({error:"Archive data cannot be fetched if no feature service url is provided or if the layer is not added to a map"}),!1},_queryErrorHandler:function(a){this._purgeRequests();var b=this.featureLayer;b._errorHandler(a);b._fireUpdateEnd(a)},_fixFieldNameCasing:function(a,b){var c=b.features||[],d=b.fields;if(!d||!c.length)return c;for(var d=this._mapFieldNameDifferences(a.fields,d),e=[],f,h,n=0,g=b.features.length;n<g;n++)f=c[n],h=this._swizzleResponseAttributes(f.attributes,
d),e.push({geometry:f.geometry,attributes:h});return e},_mapFieldNameDifferences:function(a,b){var c=[],d={},e,f;e=0;for(f=b.length;e<f;e++)c.push(b[e].name);e=0;for(f=a.length;e<f;e++){var h=a[e].name,n=this._checkForStreamFieldName(h,c);n&&(d[n]=h)}return d},_checkForStreamFieldName:function(a,b){for(var c=a.toLowerCase(),d,e=0,f=b.length;e<f;e++)if(b[e].toLowerCase()===c){d=b[e];break}return d},_swizzleResponseAttributes:function(a,b){var c={},d;for(d in a)if(a.hasOwnProperty(d)){var e=a[d];b.hasOwnProperty(d)?
c[b[d]]=e:c[d]=e}return c},_getExpiredFeatures:function(){var b,c,d,e=[],f=[];if(!this.featureLayer._endTimeField&&!this._maxFeatureAge)return f;b=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=c=1E3*Math.ceil(Date.now()/1E3);if(b&&b!==c)for(d=this._featuresByTime;b<=c;b+=1E3)d[b]&&(e=e.concat(d[b]),delete d[b]);a.forEach(e,function(a){(a=this._getFeature(a))&&f.push(a)},this);return f}})})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),
function(g,m,a,b,d,c,h,n){return g(null,{declaredClass:"esri.layers._TrackManager",constructor:function(a){this.layer=a;this.trackMap={};this.trackLineMap={}},initialize:function(a){this.map=a;var b=this.layer,c=b._getRenderer(),c=c&&c.trackRenderer;if("esriGeometryPoint"===b.geometryType){var d=this.container=new n._GraphicsLayer({id:b.id+"_tracks",_child:!0,visible:b.visible,minScale:b.minScale,maxScale:b.maxScale});d.loaded=!0;d.onLoad(d);d._setMap(a,b._div);d.setRenderer(c);b.on("visibility-change",
m.hitch(this,function(a){this.container.setVisibility(a.visible);this.container.evaluateSuspension()}));b.on("scale-range-change",m.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,this.layer.maxScale)}))}},addFeatures:function(b){var c=this.trackMap,d=this.layer,h=d._trackIdField,n=[];a.forEach(b,function(b){var d=b.attributes[h];(c[d]=c[d]||[]).push(b);-1===a.indexOf(n,d)&&n.push(d)});var g=d._startTimeField,m=d.objectIdField,v=function(a,b){var c=a.attributes[g],d=b.attributes[g];
return c===d?a.attributes[m]<b.attributes[m]?-1:1:c<d?-1:1};a.forEach(n,function(a){c[a].sort(v)})},trimTracks:function(b){function c(a){for(a=d[a]||[];a.length>h;)n.push(a.shift())}var d=this.trackMap,h=this.layer.maximumTrackPoints||0,n=[],g;if(!h)return n;if(b)a.forEach(b,function(a){c(a)});else for(g in d)d.hasOwnProperty(g)&&c(g);return n},drawTracks:function(b){function d(a){var b=g[a],e,f,v;f=p.trackLineMap[a];n.remove(f);delete p.trackLineMap[a];if(!b||2>b.length)return!1;f=[];for(e=b.length-
1;0<=e;e--)(v=b[e].geometry)&&f.push([v.x,v.y]);b={};b[w]=a;1<f.length&&(f=new c(new h({paths:[f],spatialReference:m}),null,b),n.add(f),p.trackLineMap[a]=f)}var p=this,n=this.container,g,m,w,v;if(n)if(g=this.trackMap,m=this.map.spatialReference,w=this.layer._trackIdField,b)a.forEach(b,function(a){d(a)});else for(v in g)g.hasOwnProperty(v)&&d(v)},refreshTracks:function(b){function c(a){var b,e;d.drawTracks([a]);if(g&&g.latestObservationRenderer){a=h[a]||[];b=a.length;for(e=0;e<b;e++)n._repaint(a[e],
null,!0)}}var d=this,h=this.trackMap,n=this.layer,g=n._getRenderer(),m;if(b)a.forEach(b,function(a){c(a)});else for(m in h)h.hasOwnProperty(m)&&c(m);this.moveLatestToFront()},moveLatestToFront:function(b){a.forEach(this.getLatestObservations(b),function(a){var b=a._shape;b&&b._moveToFront();this._repaint(a,null,!0)},this.layer)},getLatestObservations:function(b){function c(a){a=n[a];return a[a.length-1]}var d=[],h=this.layer._getRenderer(),n=this.trackMap,g;if(!h.latestObservationRenderer)return d;
if(b)a.forEach(b,function(a){d.push(c(a))});else for(g in n)n.hasOwnProperty(g)&&d.push(c(g));return d},clearTracks:function(b){var c=this.getLatestObservations(b),d=this.container,h;b?a.forEach(b,function(a){delete this.trackMap[a];d&&(h=this.trackLineMap[a],d.remove(h),delete this.trackLineMap[a])},this):(this.trackMap={},this.trackLineMap={},d&&d.clear());a.forEach(c,function(a){this._repaint(a,null,!0)},this.layer)},isLatestObservation:function(a){var b=this.trackMap[a.attributes[this.layer._trackIdField]];
return b?b[b.length-1]===a:!1},destroy:function(){var a=this.container;a&&(a.clear(),a._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=this.container=null}})})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u){function t(){}
function w(a){var b=a.layer;return{geometry:a.geometry,attributes:a.attributes,getLayer:function(){return b}}}return g(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(a){this.sourceLayer=a;this._hndls=[]},initialize:function(a){this.map=a;var b=this.sourceLayer,c=b.renderer;b.setDrawMode(!1);this.imageLayer=a._getMapImageLyr();var e=this;this.heatmapRenderer=c instanceof p?c:(c.getRendererInfoByZoom(a.getZoom())||
c.getRendererInfoByScale(a.getScale())).renderer;this._setupDraw=this._setupDraw.bind(this);this.recalculateHeatmap=this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=this._reprojectFeature.bind(this);d(["../workers/heatmapCalculator"],
function(a){e._calculator=new a(m.mixin({width:e.map.width,height:e.map.height},e._getOptions()));e._setupRenderer();e.heatmapRenderer.getStats=a.calculateStats;e.heatmapRenderer.getHistogramData=a.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},_handleRendererChange:function(a){var b=a.renderer,c=b instanceof p;this.heatmapRenderer?
c?this.heatmapRenderer=b:this._removeRenderer(a):c&&(this.heatmapRenderer=b,this.sourceLayer&&this.map&&this._setupRenderer())},_handleOpacityChange:function(a){a=a.opacity;var b=this._getImageBySourceId(this.sourceLayer.id);b&&b.setOpacity(a)},_setupRenderer:function(){var c=this._hndls,d=this.sourceLayer,e=this.map,f=this;d._originalDraw=d._draw;d._draw=t;d._div.clear();clearTimeout(this._resetTimer);this._resetTimer=setTimeout(this._resetGraphics.bind(this),250);c.push(d.on("update-end",this._setupDraw));
c.push(d.on("suspend",function(a){(a=f._getImageBySourceId(f.sourceLayer.id))&&a.hide()}));c.push(d.on("resume",function(a){(a=f._getImageBySourceId(f.sourceLayer.id))&&a.show()}));c.push(a.after(d,"redraw",this._setupDraw));c.push(e.on("layer-remove",function(a){a.layer==d&&((a=f._getImageBySourceId(f.sourceLayer.id))&&f.imageLayer.removeImage(a),f._removeRenderer({target:d}))}));d._collection&&c.push(d.on("graphic-add",function(a){f._reprojectFeature(a.graphic);f._setupDraw()}));1!==d.mode&&(c.push(e.on("resize, pan-end",
this._setupDraw)),c.push(e.on("zoom-end",this._setupDraw)));c.push(d.on("opacity-change",this._handleOpacityChange));this.imageLayer.suspended&&this.imageLayer.resume();d.graphics&&d.graphics.length&&(d.graphics[0].geometry&&!e.spatialReference.equals(d.graphics[0].geometry.spatialReference)&&b.forEach(d.graphics,function(a){this._reprojectFeature(a)}.bind(this)),this._setupDraw())},_setupDraw:function(){if(!this._drawTimer){var a=this;this._drawTimer=setTimeout(function(){clearTimeout(a._drawTimer);
a._drawTimer=null;a.sourceLayer._getRenderer().isInstanceOf(p)&&a.recalculateHeatmap()},16)}},_removeRenderer:function(a){var b=a.target;b._draw=b._originalDraw;delete b._originalDraw;b.setDrawMode(!0);this._removeHandlers();this._hndls=[];var c=this._getImageBySourceId(this.sourceLayer.id);c&&this.imageLayer.removeImage(c);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;b.renderer!=a.renderer&&b.renderer.getRendererInfo?this.heatmapRenderer=null:
(b.redraw(),this.destroy())},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(a){if(a&&a.geometry){var b=a.geometry,c=this.map.spatialReference;c.equals(b.spatialReference)||(b=f.project(b,c),null!=b&&(a.geometry=b))}},_doWorkerCalculation:function(){},_doMainCalculation:function(){var a=this.sourceLayer,b=this.map,c=this.heatmapRenderer,d=this.map.extent,f=this.map.width,h=this.map.height,p=this._calculator,
n=this,g=function(g){g=n._getScreenPoints(g.features,b,a);g=p.calculateImageData(m.mixin({screenPoints:g,mapinfo:{extent:[d.xmin,d.ymin,d.xmax,d.ymax],resolution:b.getResolution()},width:f,height:h},n._getOptions()));g=c.getSymbol(w({geometry:b.extent,attributes:{size:[f,h],imageData:g},layer:a}));g=new e({extent:b.extent,href:g.url,opacity:0,sourceId:a.id});n._swapMapImages(g,n._getImageBySourceId(a.id));a.suspended&&g.hide()},u={geometry:b.extent,timeExtent:a.useMapTime?b.timeExtent:void 0,spatialRelationship:s.SPATIAL_REL_INTERSECTS};
null!=a._canDoClientSideQuery(u)?a.queryFeatures(u,g):g({features:a.graphics})},_getScreenPoints:function(a,c,d){var e=[],f=a.length,h=0,p=0,g,s=new n(c.extent.xmin,c.extent.ymax,c.spatialReference),m=c.toScreen(s),u=m.x,m=m.y,t=c.getResolution(),w;for((p=c.extent.getCacheValue("_parts"))&&(w=b.map(p,function(a){return d._intersects(c,a.extent)[0]}));f--;)p=a[f],p.geometry&&(g={x:Math.ceil((p.geometry.x-s.x)/t+u),y:Math.floor((s.y-p.geometry.y)/t-m),attributes:p.attributes},w&&(p=1<w.length&&g.x<
-w[0]?w[1]:w[0],g.x+=p),e[h++]=g);return e},_getImageBySourceId:function(a){var c=this.imageLayer.getImages(),c=b.filter(c,function(b){return b.sourceId==a});if(c.length)return c[c.length-1]},_swapMapImages:function(a,b){function c(){d.removeImage(b)}var d=this.imageLayer,e=this.sourceLayer.opacity||1;d.addImage(a);u.anim(a._node,{opacity:e},null,null,function(){a.opacity=e});null!=b&&u.anim(b._node,{opacity:0},null,null,c)},_removeHandlers:function(){if(null!=this._hndls)for(var a=this._hndls.length;a--;)this._hndls[a].remove()},
_getOptions:function(){var a=this.heatmapRenderer;return{blurRadius:a.blurRadius,gradient:a.gradient,maxPixelIntensity:a.maxPixelIntensity,minPixelIntensity:a.minPixelIntensity,field:a.field,fieldOffset:a.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);this._resetTimer=null;for(var a=this.sourceLayer.graphics,b=a.length,c;b--;)c=a[b],c._shape=c._offsets=void 0}})})},"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),
function(g,m,a,b,d,c,h){return g(null,{declaredClass:"esri.layers.MapImage",constructor:function(a){m.mixin(this,a);this.extent=new h(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=!0;var a=this._node,b=this._layer,d;if(a){if(d=b&&b._div)b.suspended||b._setPos(a,d._left,d._top),(b._active||d).appendChild(a);c.show(a)}}},hide:function(){if(this.visible){this.visible=!1;var a=this._node;
a&&(c.hide(a),a.parentNode&&a.parentNode.removeChild(a))}},setOpacity:function(b){var c=this._node;this.opacity=b;c&&a.set(c,"opacity",b)}})})},"esriPBI/formatUtils":function(){define(["dojo/number","dojo/currency","dojo/aspect","dojo/date/locale","dojo/i18n!dojo/cldr/nls/number"],function(g,m,a,b,d){var c={shortDate:{datePattern:"M/d/y",selector:"date"},shortDateLE:{datePattern:"d/M/y",selector:"date"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},dayShortMonthYear:{datePattern:"d MMM y",
selector:"date"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},
shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},h={shortTime:{timePattern:"h:mm a",selector:"time"},shortTime24:{timePattern:"H:mm",
selector:"time"},longTime:{timePattern:"h:mm:ss a",selector:"time"},longTime24:{timePattern:"H:mm:ss",selector:"time"}};return{formatValue:function(a,d,e){var h=a;try{d&&(null!==a&&void 0!==a&&""!==a)&&("FormatType_Currency"===d?h=m.format(a,{currency:e&&e.currencySymbol,places:e&&e.currencyDecimals}):"FormatType_Text"===d?h=a.toString():"FormatType_Decimal"===d?h=g.format(a,{places:e&&e.decimal}):"FormatType_Int"===d?h=g.format(a,{places:0}):"FormatType_Percentage"===d?h=g.format(a,{places:e&&e.percentageDecimals,
type:"percent"}):"FormatType_Date"===d&&(h=b.format(new Date(a),e&&e.dateFormat&&c[e.dateFormat])))}catch(s){}return h},dateFormats:c,format:function(n,f){if(!f)return n;var e;if(f.dateFormat&&f.dateFormat in h)n instanceof Date&&!isNaN(n.valueOf())?e=b.format(new Date(n),h[f.dateFormat]):(null!==n&&!isNaN(+n)&&(n=+n),null===n||isNaN(n)||0>n||1<n?e=null:(n=Math.round(864E5*n),e=(new Date(1970,0,1,0,0,0,0)).getTime(),e=b.format(new Date(n+e),h[f.dateFormat])));else if(f.dateFormat)null!==n&&!isNaN(+n)&&
(n=+n),e=null===n||isNaN(n)?null:b.format(new Date(n),c[f.dateFormat]);else{var p=null;"lt-lt"===dojo.locale?p=a.before(g,"_applyPattern",function(a,b,c){c.customs.group=" ";return[a,b,c]}):"vi"===dojo.locale&&(p=a.before(g,"_applyPattern",function(a,b,c){if(null===c.digitSeparator||c.digitSeparator)c.customs.group=".";c.customs.decimal=",";return[a,b,c]}));null!==n&&(e=g.format(n,f));null!==p&&p.remove()}if(!e)return n;if(!(f.hasOwnProperty("digitSeparator")?f.digitSeparator:1))d.group||(d.group=
" "),e=e.replace(RegExp("\\"+d.group,"g"),"");return e},formatCurrency:function(a){if(a&&(a=a.split(";")[0])&&-1<a.indexOf("#")){if("\\$"===a.substring(0,2))return{pattern:"$#,##0.00"};if(-1<a.indexOf('"')){var b=a.replace(/(.*)\"(.*)\"(.*)/,"$2");return b?'"'===a.charAt(0)?{pattern:b+" #,##0.00"}:{pattern:"#,##0.00 "+b}:{pattern:"#,##0.00"}}return{places:2,digitSeparator:!0}}return null}}})},"dojo/currency":function(){define("./_base/array ./_base/lang ./number ./i18n ./i18n!./cldr/nls/currency ./cldr/monetary".split(" "),
function(g,m,a,b,d,c){var h={};m.setObject("dojo.currency",h);h._mixInDefaults=function(a){a=a||{};a.type="currency";var d=b.getLocalization("dojo.cldr","currency",a.locale)||{},e=a.currency,h=c.getData(e);g.forEach(["displayName","symbol","group","decimal"],function(a){h[a]=d[e+"_"+a]});h.fractional=[!0,!1];return m.mixin(h,a)};h.format=function(b,c){return a.format(b,h._mixInDefaults(c))};h.regexp=function(b){return a.regexp(h._mixInDefaults(b))};h.parse=function(b,c){return a.parse(b,h._mixInDefaults(c))};
return h})},"dojo/cldr/monetary":function(){define(["../_base/kernel","../_base/lang"],function(g,m){var a={};m.setObject("dojo.cldr.monetary",a);a.getData=function(a){var d={ADP:0,AFN:0,ALL:0,AMD:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,COP:0,CRC:0,DJF:0,ESP:0,GNF:0,GYD:0,HUF:0,IDR:0,IQD:0,IRR:3,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MNT:0,MRO:0,MUR:0,OMR:3,PKR:2,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,TZS:0,UGX:0,UZS:0,VND:0,VUV:0,XAF:0,
XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0}[a];a={}[a];"undefined"==typeof d&&(d=2);"undefined"==typeof a&&(a=0);return{places:d,round:a}};return a})},"esriPBI/extensions/Map":function(){define(["dojo/_base/array","../utils/Random","../utils/MapUtils","esri/map"],function(g,m,a,b){var d=b.prototype.addLayer;b.extend({postscript:function(){this.inherited(arguments)},addLayer:function(b){if(b&&(!b.id||g.some(a.getLayerIds(this),function(a){return a===b.id})))b.id=m.next();return d.apply(this,arguments)}})})},"esriPBI/utils/Random":function(){define(function(){return{next:function(g){g=
g||5;for(var m=1,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(52*Math.random()));m<g;m++)a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return a}}})},"esriPBI/utils/MapUtils":function(){define("dojo/_base/array dojo/_base/event dojo/_base/lang dojo/Deferred dojo/has dojo/dom-construct dojo/dom-class dojo/query dojo/dom dojo/on dojo/aspect dojo/throttle esri/geometry/ScreenPoint esri/geometry/Extent esri/tasks/query ../widgets/TimeSlider/TimeSlider esri/layers/LayerDrawingOptions esri/layers/ArcGISDynamicMapServiceLayer esri/layers/VectorTileLayer esri/layers/FeatureLayer esri/layers/LayerMapSource esri/request esri/arcgis/utils esri/renderers/jsonUtils esri/geometry/geometryEngine esriPBI/widgets/Popup/PopupTemplate esriPBI/utils/selectionUtils".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M){function L(a,k,r){var q=new b;if(X){var c=new A(a.url);c.itemId=a.id;c.title="Reference Layer";c.setOpacity(0.5);k.addLayer(c,1)}G(r,a.id).then(function(a){q.resolve(a)});return q.promise}function G(k,r){var q=new b;F({url:k+"content/items/"+r+"/relatedItems",content:{f:"json",relationshipType:"Service2Service"},handleAs:"json",callbackParamName:"callback"}).then(function(k){H.getItem(k.relatedItems[0].id).then(a.hitch(self,function(a){q.resolve(T(a))}))});
return q.promise}function O(a){aa.remove();aa=null;a=a.layer;var k=a.createDynamicLayerInfosFromLayerInfos(),r=k.filter(function(a,k){var r;g.some(P,function(k){if(k.layerDefinition.source.mapLayerId===a.source.mapLayerId)return r=g.indexOf(P,k),!0});return-1!==r});a.setDynamicLayerInfos(r,!0);k=k.map(function(a,k){var r=null;P.forEach(function(a,b){if(k===a.layerDefinition.source.mapLayerId){var q=a.layerDefinition.drawingInfo.renderer;r=new x;r.renderer=J.fromJson(q)}});return r});a.setLayerDrawingOptions(k);
S(a)}function S(a){var k={};P.forEach(function(a,r){a.popupInfo&&(k[a.layerDefinition.source.mapLayerId]={infoTemplate:new K(a.popupInfo),layerUrl:null})});a.setInfoTemplates(k)}function U(a){-1===a.search("https")&&(a=a.replace("http","https"));return a=a.replace("demographics6.arcgis.com/arcgis","utility.arcgis.com/usrsvcs/servers/a606bff456344040a29795518e277ac6")}function T(a){var k=[],r=a.item.url,r=U(r),b=a.itemData.thematicGroup.fieldNames;P=a.itemData.layers.filter(function(k,r){var b=a.itemData.thematicGroup.layerIds,
q;g.some(b,function(a){if(a===k.id)return q=g.indexOf(b,a),!0});return-1!==q});if(X){var q=r+"/dynamicLayer",c={mode:C.MODE_SELECTION,outFields:b};P.forEach(function(a,r){c.source=new z(a.layerDefinition.source);var b=new C(q,c);b.setRenderer(J.fromJson(a.layerDefinition.drawingInfo.renderer));b.setScaleRange(a.layerDefinition.minScale?a.layerDefinition.minScale:null,a.layerDefinition.maxScale?a.layerDefinition.maxScale:null);var y=a.popupInfo?new K(a.popupInfo):null;b.setInfoTemplate(y);k.push(b)});
return k}r=new B(r);r.setOpacity(0.5);r.itemId=a.item.id;aa=r.on("load",O);return[r]}function E(a){return g.filter(g.map(a.graphicsLayerIds,function(k){return a.getLayer(k)},this),function(a){return"AcetateLayer"===a.type},this)}var Q,N,q,k,r,y,D,P,aa,X=A.supported();return{addVectorTileLayer:L,getRelatedItem:G,getRelatedVectorItem:function(a,k,r){var q=new b;F({url:a+"content/items/"+k+"/relatedItems",content:{f:"json",relationshipType:"Service2Service",direction:"forward"},handleAs:"json",callbackParamName:"callback"}).then(function(k){L({id:k.relatedItems[0].id,
url:k.relatedItems[0].url},r,a).then(function(a){q.resolve(a)})});return q.promise},vectorTileSupported:X,getAcetateLayer:E,keepAcetateLayerTopmost:function(a){var k=E(a);if(0<k.length){var r=a.graphicsLayerIds.concat(a.layerIds).length;g.forEach(k,function(k){a.reorderLayer(k,r-1);r--})}},getLayerIds:function(a){return(a.layerIds||[]).concat(a.graphicsLayerIds||[])},getLayers:function(a){return g.map(this.getLayerIds(a),function(k){return a.getLayer(k)})},getBasemapType:function(a){a=a.getLayer(a.layerIds[0]);
if(!a.url)return"esri.layers.OpenStreetMapLayer"===a.declaredClass?"osm":"topo";a=a.url.toLowerCase();if(-1<a.indexOf("arcgis/rest/services/world_street_map"))return"streets";if(-1<a.indexOf("arcgis/rest/services/canvas/world_light_gray_base"))return"gray";if(!(-1<a.indexOf("arcgis/rest/services/world_topo_map")||-1<a.indexOf("arcgis/rest/services/usgstopo"))){if(-1<a.indexOf("arcgis/rest/services/world_terrain_base"))return"terrain";if(-1<a.indexOf("arcgis/rest/services/natgeo_world_map"))return"national-geographic";
if(-1<a.indexOf("arcgis/rest/services/ocean/world_ocean_base"))return"oceans";if(-1<a.indexOf("arcgis/rest/services/world_imagery"))return"satellite";if(-1<a.indexOf("arcgis/rest/services/reference/world_boundaries_and_places"))return"hybrid";if(-1<a.indexOf("arcgis/rest/services/canvas/world_dark_gray_base"))return"dark-gray"}return"topo"},setPowerBILayerBehaviors:function(b){var c=this;b.on("layer-add",function(y){y=y.layer;"PowerBILayer"===y.type?(c.lastShape=null,c.lastSelectionOpacity="",c.lastSelectionStroke=
"",c.lastSelectionStrokeOpacity="",c.lastSelectionStrokeWidth="",k=p.before(b.infoWindow,"clearFeatures",a.hitch(c,function(){if(this.lastShape){if(this.lastShape.rawNode){this.lastShape.rawNode.style.stroke=this.lastSelectionStroke;if("4"===this.lastShape.rawNode.style.strokeWidth||"4px"===this.lastShape.rawNode.style.strokeWidth)this.lastShape.rawNode.style.strokeWidth=this.lastSelectionStrokeWidth;"0.9"===this.lastShape.rawNode.style.opacity&&(this.lastShape.rawNode.style.opacity=this.lastSelectionOpacity);
this.lastShape.rawNode.style.strokeOpacity=this.lastSelectionStrokeOpacity}this.lastShape=null}})),r=p.after(b.infoWindow,"onSelectionChange",a.hitch(c,function(a){var k=b.infoWindow.getSelectedFeature();if(k&&(a=k.getLayer(),this.lastShape&&(this.lastShape.rawNode&&(this.lastShape.rawNode.style.stroke=this.lastSelectionStroke,"4"===this.lastShape.rawNode.style.strokeWidth&&(this.lastShape.rawNode.style.strokeWidth=this.lastSelectionStrokeWidth),"0.9"===this.lastShape.rawNode.style.opacity&&(this.lastShape.rawNode.style.opacity=
this.lastSelectionOpacity),this.lastShape.rawNode.style.strokeOpacity=this.lastSelectionStrokeOpacity),this.lastShape=null),(k=k.getShape())&&a&&"PowerBILayer"===a.type))b.infoWindow.hideHighlight(),this.lastShape=k,this.lastSelectionOpacity=k.rawNode.style.opacity,this.lastSelectionStroke=k.rawNode.style.stroke,this.lastSelectionStrokeOpacity=k.rawNode.style.strokeOpacity,this.lastSelectionStrokeWidth=k.rawNode.style.strokeWidth,this.highlightFeature(a,k)})),y=b.getLayer("MyLayer"),D=p.after(y,"showFeaturesSelectedInMap",
a.hitch(c,function(){var a=b.infoWindow.getSelectedFeature();if(a){var k=a.getLayer();if(k&&"PowerBILayer"===k.type&&(b.infoWindow.hideHighlight(),a=a.getShape()))this.lastSelectionOpacity=a.rawNode.style.opacity,this.lastSelectionStrokeWidth=a.rawNode.style.strokeWidth,this.highlightFeature(k,a)}})),N=b.on("mouse-out",function(a){var k=b.infoWindow.getSelectedFeature();if(k&&(0>a.clientX||0>a.clientY||a.clientX>b.width||a.clientY>b.height))if((a=k.getLayer())&&"PowerBILayer"===a.type)b.infoWindow.hide(),
b.infoWindow.clearFeatures()}),q=b.on("mouse-down",function(a){b.infoWindow.freezePop=!1;b.infoWindow.freezeCycle=!1;b.infoWindow.freezeCycleFinished=!1;b.infoWindow.freezeWidth=0;b.infoWindow.freezeHeight=0}),Q=b.on("mouse-move",s(a.hitch(c,function(a){var k=b.infoWindow.getSelectedFeature();if(k){if((k=k.getLayer())&&"PowerBILayer"===k.type&&!a.graphic&&!b.infoWindow.freezePop)b.infoWindow.hide(),b.infoWindow.clearFeatures()}else b.infoWindow.hide(),b.infoWindow.clearFeatures();if(a.graphic&&a.graphic.attributes&&
!a.graphic.attributes.clusterCount&&(k=a.graphic.getLayer())&&"PowerBILayer"===k.type&&!b.infoWindow.freezePop)if("esriGeometryPoint"===a.graphic._layer.geometryType){if((k=M.PBIHoverFeatures(a.graphic._layer,a.mapPoint).results[0].features)&&0<k.length)b.infoWindow.setFeatures(k),b.infoWindow.show(a.mapPoint),b.infoWindow.hideHighlight()}else if("esriGeometryPolygon"===a.graphic._layer.geometryType&&(k=M.PBIHoverFeatures(a.graphic._layer,a.mapPoint).results[0].features)&&0<k.length)b.infoWindow.setFeatures(k),
b.infoWindow.show(a.mapPoint),b.infoWindow.hideHighlight()})),500),mapZoomEndHandeler=b.on("zoom-end",a.hitch(c,function(){b.infoWindow.freezeCycleFinished=!1})),c.keepAcetateLayerTopmost(b)):"Feature Layer"===y.type&&(b.reorderLayer(y,0),y.setOpacity(0.5))});b.on("layer-remove",function(a){a=a.layer;"PowerBILayer"===a.type&&(Q&&(Q.remove(),Q=null),N&&(N.remove(),N=null),q&&(q.remove(),q=null),Q&&(Q.remove(),Q=null),k&&(k.remove(),k=null),y&&(y.remove(),y=null),D&&(D.remove(),D=null),r&&(r.remove(),
r=null),a.timeInfo&&c.hideTimeSlider())})},highlightFeature:function(a,k){var r=!1;0<a.getSelectedFeatures().length&&(k.rawNode.attributes&&!k.rawNode.attributes.getNamedItem("data-selected"))&&(r=!0);k.rawNode.style.opacity="0.9";if(!r||"esriGeometryPoint"!==a.geometryType){strokeWidthValue=0;if(k.rawNode.attributes&&(r=k.rawNode.attributes.getNamedItem("stroke-width"))&&r.nodeValue)strokeWidthValue=r.nodeValue;4>=strokeWidthValue&&(k.rawNode.style.strokeWidth="4");k.rawNode.style.stroke="#FFF766";
k.rawNode.style.strokeOpacity="0.9"}},hideTimeSlider:function(){this.timeSlider&&this.timeSlider.hide()},showTimeSlider:function(a){var k=g.filter(a.infoTemplate&&a.infoTemplate.info&&a.infoTemplate.info.fieldInfos,function(k){return a._startTimeField.toLowerCase()===k.fieldName.toLowerCase()}),k=0<k.length&&k[0].format;if(this.timeSlider)this.timeSlider.set("layer",a),this.timeSlider.set("dateTimeFormat",k),this.timeSlider.show();else{var r=n(".timeSliderContainer")[0];this.timeSlider=(new v({layer:a,
dateTimeFormat:k})).placeAt(r);this.timeSlider.startup()}}}})},"dojo/throttle":function(){define([],function(){return function(g,m){var a=!0;return function(){a&&(a=!1,g.apply(this,arguments),setTimeout(function(){a=!0},m))}}})},"esriPBI/widgets/TimeSlider/TimeSlider":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect esri/dijit/TimeSlider esri/TimeExtent dojo/query dojo/topic dojo/dom-construct dojo/string dojo/on dijit/TooltipDialog dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/dom-class dojo/dom-prop dojo/dom-style dojo/dom-geometry dojo/date/locale dojo/i18n!./nls/TimeSlider dojo/text!./templates/TimeSlider.html dojo/text!./templates/TimeSliderWidget.html ../../formatUtils".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I){var K=g([d],{templateString:H,constructor:function(a){m.mixin(this,a)},setTimeSliderState:function(a,c){var d=h(".dijitSliderImageHandleH",this._slider.domNode),e=h(".dijitSliderProgressBarH",this._slider.domNode),f=function(a,b){for(var c=0;c<a.length;c++)b?x.add(a[c],"dijitHidden"):x.remove(a[c],"dijitHidden")};a?(x.remove(this.playPauseBtn.iconNode,this._iconClass),x.add(this.playPauseBtn.iconNode,"tsDisabledIcon"),x.add(this.previousBtn.domNode,
"dijitDisabled"),x.add(this.nextBtn.domNode,"dijitDisabled"),f(d,a),f(e,a),this.playHandle=b.around(this,"_onPlay",m.hitch(this,function(){return function(){u.open({popup:c,around:this.playPauseBtn.domNode,orient:["above"],x:0,y:0});var a=setTimeout(function(){clearTimeout(a);u.close(c)},5E3)}}))):(x.remove(this.playPauseBtn.iconNode,"tsDisabledIcon"),x.add(this.playPauseBtn.iconNode,this._iconClass),x.remove(this.previousBtn.domNode,"dijitDisabled"),x.remove(this.nextBtn.domNode,"dijitDisabled"),
f(d,a),f(e,a),this.playHandle&&(this.playHandle.remove(),this.playHandle=null))}});return g([t,w,v],{nls:F,templateString:J,map:null,layer:null,timeExtent:null,dateTimeFormat:null,minThresholdWidth:400,minThresholdHeight:300,_playSpeed:2E3,_timeStopCount:10,_thumbCount:2,_thumbIndexes:[0,1],_iconClass:"tsButton tsPlayButton",constructor:function(a){m.mixin(this,a)},postMixInProperties:function(){this.layer&&(this.map=this.layer.getMap(),this.timeExtent=this.layer.timeInfo.timeExtent)},buildRendering:function(){this.inherited(arguments);
this.timeSlider=new K({style:"width: 100%;"},this.sliderDiv);this.tooltip=new s({content:F.startEndTime,onMouseLeave:function(){u.close(this.tooltip)}})},postCreate:function(){if(this.map){this._registerEventListeners();this._setTimeSliderProperties();this.timeSlider.startup();this.map.setTimeSlider(this.timeSlider);this.updateDisabledStateUI();var a=C.getMarginBox(this.map.root);this._toggleView(a.w<this.minThresholdWidth||a.h<this.minThresholdHeight)}},startup:function(){this.inherited(arguments)},
show:function(){this.timeSlider&&(this._setTimeSliderProperties(),this.updateDisabledStateUI(),this._updateUI(),x.remove(this.tsContainer,"dijitHidden"))},hide:function(){this.timeSlider&&(x.add(this.tsContainer,"dijitHidden"),this.timeSlider.playing&&this.timeSlider.pause())},_setLayerAttr:function(a){this._set("layer",a);this.timeExtent=a.timeInfo.timeExtent},_setDateTimeFormatAttr:function(a){this._set("dateTimeFormat",a)},_setTimeSliderProperties:function(){this.timeSlider&&(this._checkTimeExtentStartAndEndTime(),
this.timeSlider.createTimeStopsByCount(this.timeExtent,this._timeStopCount+1),this.timeSlider.setThumbCount(this._thumbCount),this.timeSlider.setThumbIndexes(this._thumbIndexes),this.timeSlider.setThumbMovingRate(this._playSpeed),this._setTimeSliderLabels(),this.timeSlider.setLoop(!0))},_registerEventListeners:function(){this.own(this.timeSlider.on("time-extent-change",m.hitch(this,function(a){this._setTimeExtentLabel(a.startTime,a.endTime);0<this.layer.getSelectedFeatures().length&&(this.layer.clearSelection(),
this.layer.emit("selection-complete",{features:[]}))})),this.timeSlider.on("play,pause",m.hitch(this,function(a){n.publish("timeaware-state-change",this.timeSlider.playing);this._updateUI()})),this.map.on("resize",m.hitch(this,function(a){this._toggleView(a.width<this.minThresholdWidth||a.height<this.minThresholdHeight)})),p(this.playPauseBtnSmall,"click",m.hitch(this,function(){if(this.timeSliderDisabledState){u.open({popup:this.tooltip,around:this.playPauseBtnSmall.domNode,orient:["above"]});var a=
setTimeout(function(){clearTimeout(a);u.close(this.tooltip)},5E3)}else this.timeSlider.playing?(this.timeSlider.pause(),n.publish("timeaware-state-change",this.timeSlider.playing)):this.timeSlider.play(),this._updateUI()})))},_toggleView:function(a){a?(A.set(this.compactView,"display","block"),A.set(this.fullSizeView,"display","none")):(A.set(this.fullSizeView,"display","block"),A.set(this.compactView,"display","none"))},_updateUI:function(){this.timeSliderDisabledState||(x.remove(this.playPauseBtnSmall.iconNode,
this._iconClass),this._iconClass=this.timeSlider.playing?"tsButton tsPauseButton":"tsButton tsPlayButton",x.add(this.playPauseBtnSmall.iconNode,this._iconClass))},updateDisabledStateUI:function(){this.timeSliderDisabledState?(x.remove(this.playPauseBtnSmall.iconNode,this._iconClass),x.add(this.playPauseBtnSmall.iconNode,"tsDisabledIcon")):(x.remove(this.playPauseBtnSmall.iconNode,"tsDisabledIcon"),x.add(this.playPauseBtnSmall.iconNode,this._iconClass));this.timeSlider.setTimeSliderState(this.timeSliderDisabledState,
this.tooltip)},_setTimeExtentLabel:function(a,b){if(!isNaN(a.getTime())&&!isNaN(b.getTime())){var c=e.substitute(F.extentLabel,[I.format(a,this.dateTimeFormat),I.format(b,this.dateTimeFormat)]);this.timeExtentLabelCompact.innerHTML=c;this.timeExtentLabelFull.innerHTML=c}},_setTimeSliderLabels:function(){var a=this.timeSlider.timeStops;2<a.length&&(B.set(this.startTimeLabel,"innerHTML",I.format(a[0],this.dateTimeFormat)),B.set(this.endTimeLabel,"innerHTML",I.format(a[a.length-1],this.dateTimeFormat)))},
_checkTimeExtentStartAndEndTime:function(){var a,b;if(this.timeExtent){a=this.timeExtent.startTime instanceof Date&&this.timeExtent.startTime.valueOf();b=this.timeExtent.endTime instanceof Date&&this.timeExtent.endTime.valueOf();var d=0===a-b;d&&(b=new Date(b),b.setMilliseconds(b.getMilliseconds()+10),this.timeExtent=new c(new Date(a),new Date(b)));this._disableTimeSlider(d)}},_disableTimeSlider:function(a){(this.timeSliderDisabledState=a)?(this.overlayDiv||(this.overlayDiv=f.create("div",{"class":"tsDisabledMessage"},
this.fullSizeView)),this._timeStopCount=1):(this.overlayDiv&&(f.destroy(this.overlayDiv),this.overlayDiv=null),this._timeStopCount=10)}})})},"esri/dijit/TimeSlider":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/kernel dojo/has dojo/dom-class dojo/dom-construct dojo/dom-style dojo/dom-geometry dijit/_Widget dijit/_Templated dijit/form/HorizontalSlider dijit/form/HorizontalRule dijit/form/HorizontalRuleLabels dojox/timing/_base dojox/form/RangeSlider dojo/text!dojox/form/resources/HorizontalRangeSlider.html ../kernel ../lang ../TimeExtent ./_EventedWidget dojo/text!./templates/TimeSlider.html dojo/i18n!../nls/jsapi".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H){return g([z,e,p],{declaredClass:"esri.dijit.TimeSlider",widgetsInTemplate:!0,templateString:F,intermediateChanges:!1,_slideDuration:1E3,_defaultCount:10,_eventMap:{"time-extent-change":!0,play:!0,pause:!0,next:!0,previous:!0},constructor:function(a,b){m.mixin(this,H.widgets.timeSlider);this._iconClass="tsButton tsPlayButton";this.loop=this.playing=!1;this.thumbCount=1;this.thumbMovingRate=1E3;this._createTimeInstants=!1;this._options=m.mixin({excludeDataAtTrailingThumb:!1,
excludeDataAtLeadingThumb:!1},a.options||{})},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this._timer=new w.Timer;this._timer.setInterval(this.thumbMovingRate);this._timer.onTick=m.hitch(this,"_bumpSlider",1);this._createSlider()},destroy:function(){this._timer.stop();this.timeStops=this._timer=null;this._slider.destroy();this._slider=null;this._hTicks&&(this._hTicks.destroyRecursive(),this._hTicks=null);this._hLabels&&(this._hLabels.destroyRecursive(),
this._hLabels=null);this.inherited(arguments)},onTimeExtentChange:function(){},onPlay:function(){},onPause:function(){},onNext:function(){},onPrevious:function(){},_onHorizontalChange:function(){var a=this._sliderToTimeExtent();this.onTimeExtentChange(a)},_onPlay:function(){this.playing=!this.playing;this._updateUI();this.playing?(this._timer.start(),this.onPlay(this._sliderToTimeExtent())):(this._timer.stop(),this.onPause(this._sliderToTimeExtent()));var a=this._getSliderValue();this._offset=m.isArray(a)?
a[1]-a[0]:0},_onNext:function(){this.playing||(this._bumpSlider(1),this.onNext(this._sliderToTimeExtent()))},_onPrev:function(){this.playing||(this._bumpSlider(-1),this.onPrevious(this._sliderToTimeExtent()))},createTimeStopsByCount:function(a,b){if(a&&a.startTime&&a.endTime){b=b||this._defaultCount;var c=Math.ceil((a.endTime-a.startTime)/(b-1));this.createTimeStopsByTimeInterval(a,c,"esriTimeUnitsMilliseconds")}},createTimeStopsByTimeInterval:function(a,b,c,d){if(a&&a.startTime&&a.endTime){this.fullTimeExtent=
new C(a.startTime,a.endTime);d&&!0===d.resetStartTime&&this._resetStartTime(this.fullTimeExtent,c);this._timeIntervalUnits=c;d=this.fullTimeExtent.startTime;for(var e=[];d<=a.endTime;)e.push(d),d=a._getOffsettedDate(d,b,c);0<e.length&&e[e.length-1]<a.endTime&&e.push(d);this.setTimeStops(e)}},getCurrentTimeExtent:function(){return this._sliderToTimeExtent()},setTimeStops:function(a){this.timeStops=a||[];this._numTicks=this._numStops=this.timeStops.length;!1===A.isDefined(this.fullTimeExtent)&&(this.fullTimeExtent=
new C(a[0],a[a.length-1]))},setLoop:function(a){this.loop=a},setThumbCount:function(a){this.thumbCount=a;this.singleThumbAsTimeInstant(this._createTimeInstants);this._slider&&this._createSlider()},setThumbIndexes:function(a){this.thumbIndexes=m.clone(a)||[0,1];this._initializeThumbs()},setThumbMovingRate:function(a){this.thumbMovingRate=a;this._timer&&this._timer.setInterval(this.thumbMovingRate)},setLabels:function(a){this.labels=a;this._slider&&this._createSlider()},setTickCount:function(a){this._numTicks=
a;this._slider&&this._createSlider()},singleThumbAsTimeInstant:function(a){this._createTimeInstants=a&&1===this.thumbCount},next:function(){this._onNext()},pause:function(){this.playing=!1;this._updateUI();this._timer.stop()},play:function(){!0!==this.playing&&(this.playing=!1,this._onPlay())},previous:function(){this._onPrev()},_setIntermediateChangesAttr:function(a){this.intermediateChanges=!!a;this._slider&&this._slider.set("intermediateChanges",!!a)},_updateUI:function(){c.remove(this.playPauseBtn.iconNode,
this._iconClass);this._iconClass=this.playing?"tsButton tsPauseButton":"tsButton tsPlayButton";c.add(this.playPauseBtn.iconNode,this._iconClass);this.previousBtn.set("disabled",this.playing);this.nextBtn.set("disabled",this.playing)},_createSlider:function(){this._slider&&(this._slider.destroy(),this._slider=null);for(var c=this.domNode;c.parentNode&&!c.dir;)c=c.parentNode;c={onChange:m.hitch(this,"_onHorizontalChange"),showButtons:!1,discreteValues:this._numStops,slideDuration:this._slideDuration,
"class":"ts",dir:"ltr",intermediateChanges:this.intermediateChanges};this._ts=h.create("div",{},b.query(".tsTmp",this.domNode)[0],"first");this._timeSliderTicks=h.create("div",{},this._ts,"first");this._timeSliderLabels=h.create("div",{},this._ts);2===this.thumbCount?this._createRangeSlider(c):this._createSingleSlider(c);this.thumbIndexes=this.thumbIndexes||[0,1];this._createHorizRule();this._createLabels();!0===this._createTimeInstants&&b.query(".dijitSliderProgressBarH, .dijitSliderLeftBumper, .dijitSliderRightBumper",
this._ts).forEach(function(a){n.set(a,{background:"none"})});this._initializeThumbs();a.disconnect(this._onChangeConnect);this._onChangeConnect=a.connect(this._slider,"onChange",m.hitch(this,"_updateThumbIndexes"))},_createRangeSlider:function(a){this._isRangeSlider=!0;this._slider=new (g([s,v],{templateString:x}))(a,this._ts)},_createSingleSlider:function(a){this._isRangeSlider=!1;this._slider=new s(a,this._ts)},_createHorizRule:function(){this._hTicks&&(this._hTicks.destroyRecursive(),this._hTicks=
null);2>this._numTicks||(this._hTicks=new u({container:"topDecoration",ruleStyle:"","class":"tsTicks",count:this._numTicks},this._timeSliderTicks))},_createLabels:function(){this._hLabels&&(this._hLabels.destroyRecursive(),this._hLabels=null);this.labels&&0<this.labels.length&&(this._hLabels=new t({labels:this.labels,labelStyle:"","class":"tsLabels"},this._timeSliderLabels))},_initializeThumbs:function(){if(this._slider){this._offset=this._toSliderValue(this.thumbIndexes[1])||0;var a=this._toSliderValue(this.thumbIndexes[0]),
a=a>this._slider.maximum||a<this._slider.minimum?this._slider.minimum:a;if(!0===this._isRangeSlider){var b=this._toSliderValue(this.thumbIndexes[1]),b=b>this._slider.maximum||b<this._slider.minimum?this._slider.maximum:b;this._setSliderValue([a,b<a?a:b])}else this._setSliderValue(a);this._onHorizontalChange()}},_bumpSlider:function(a){var b=this._getSliderValue(),c=b,d=c,e=a;m.isArray(b)&&(d=b[0],c=b[1],e=[{change:a,useMaxValue:!0},{change:a,useMaxValue:!1}]);1E-10>Math.abs(d-this._slider.minimum)&&
0>a||1E-10>Math.abs(c-this._slider.maximum)&&0<a?this._timer.isRunning&&(this.loop?(this._timer.stop(),this._setSliderValue(this._getSliderMinValue()),a=this._sliderToTimeExtent(),this.onTimeExtentChange(a),this._timer.start(),this.playing=!0):this.pause()):this._slider._bumpValue(e)},_updateThumbIndexes:function(){var a=this._getSliderValue();m.isArray(a)?(this.thumbIndexes[0]=this._toSliderIndex(a[0]),this.thumbIndexes[1]=this._toSliderIndex(a[1])):this.thumbIndexes[0]=this._toSliderIndex(a)},_sliderToTimeExtent:function(){if(this.timeStops&&
0!==this.timeStops.length){var a=new C,b=this._getSliderValue(),c,d;m.isArray(b)?(b[0]>b[1]?(d=b[0],c=b[1]):(c=b[0],d=b[1]),a.startTime=new Date(this.timeStops[this._toSliderIndex(c)]),a.endTime=new Date(this.timeStops[this._toSliderIndex(d)]),this._adjustTimeExtent(a)):(a.startTime=!0===this._createTimeInstants?new Date(this.timeStops[this._toSliderIndex(b)]):new Date(this.fullTimeExtent.startTime),a.endTime=!0===this._createTimeInstants?a.startTime:new Date(this.timeStops[this._toSliderIndex(b)]));
return a}},_adjustTimeExtent:function(a){if(!(!1===this._options.excludeDataAtTrailingThumb&&!1===this._options.excludeDataAtLeadingThumb)&&a.startTime.getTime()!==a.endTime.getTime()){if(this._options.excludeDataAtTrailingThumb){var b=a.startTime;b.setUTCSeconds(b.getUTCSeconds()+1)}this._options.excludeDataAtLeadingThumb&&(a=a.endTime,a.setUTCSeconds(a.getUTCSeconds()-1))}},_resetStartTime:function(a,b){switch(b){case "esriTimeUnitsSeconds":a.startTime.setUTCMilliseconds(0);break;case "esriTimeUnitsMinutes":a.startTime.setUTCSeconds(0,
0,0);break;case "esriTimeUnitsHours":a.startTime.setUTCMinutes(0,0,0);break;case "esriTimeUnitsDays":a.startTime.setUTCHours(0,0,0,0);break;case "esriTimeUnitsWeeks":a.startTime.setUTCDate(a.startTime.getUTCDate()-a.startTime.getUTCDay());break;case "esriTimeUnitsMonths":a.startTime.setUTCDate(1);a.startTime.setUTCHours(0,0,0,0);break;case "esriTimeUnitsDecades":a.startTime.setUTCFullYear(a.startTime.getUTCFullYear()-a.startTime.getUTCFullYear()%10);break;case "esriTimeUnitsCenturies":a.startTime.setUTCFullYear(a.startTime.getUTCFullYear()-
a.startTime.getUTCFullYear()%100)}},_getSliderMinValue:function(){return this._isRangeSlider?[this._slider.minimum,this._slider.minimum+this._offset]:this._slider.minimum},_toSliderIndex:function(a){a=Math.floor((a-this._slider.minimum)*this._numStops/(this._slider.maximum-this._slider.minimum));0>a&&(a=0);a>=this._numStops&&(a=this._numStops-1);return a},_toSliderValue:function(a){return a*(this._slider.maximum-this._slider.minimum)/(this._numStops-1)+this._slider.minimum},_getSliderValue:function(){return this._slider.get("value")},
_setSliderValue:function(a){this._slider._setValueAttr(a,!1,!1)}})})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u){function t(){}function w(b){return function(c,d,e,f){return c&&"string"==typeof d&&c[d]==t?c.on(d.substring(2).toLowerCase(),h.hitch(e,f)):
b.apply(a,arguments)}}g.around(a,"connect",w);c.connect&&g.around(c,"connect",w);g=b("dijit._Widget",[p,s,u],{onClick:t,onDblClick:t,onKeyDown:t,onKeyPress:t,onKeyUp:t,onMouseDown:t,onMouseMove:t,onMouseOut:t,onMouseOver:t,onMouseLeave:t,onMouseEnter:t,onMouseUp:t,constructor:function(a){this._toConnect={};for(var b in a)this[b]===t&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);
delete this._toConnect},on:function(b,c){return this[this._onMap(b)]===t?a.connect(this.domNode,b.toLowerCase(),this,c):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){c.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){c.deprecated(this.declaredClass+
"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?n("[widgetId]",this.containerNode).map(e.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});d("dijit-legacy-requires")&&f(0,function(){require(["dijit/_base"])});return g})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(g,m,a){var b={},d={},c={length:0,add:function(a){if(d[a.id])throw Error("Tried to register widget with id\x3d\x3d"+
a.id+" but that id is already registered");d[a.id]=a;this.length++},remove:function(a){d[a]&&(delete d[a],this.length--)},byId:function(a){return"string"==typeof a?d[a]:a},byNode:function(a){return d[a.getAttribute("widgetId")]},toArray:function(){var a=[],b;for(b in d)a.push(d[b]);return a},getUniqueId:function(c){var n;do n=c+"_"+(c in b?++b[c]:b[c]=0);while(d[n]);return"dijit"==a._scopeName?n:a._scopeName+"_"+n},findWidgets:function(a,b){function c(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==
a.nodeType){var h=a.getAttribute("widgetId");h?(h=d[h])&&e.push(h):a!==b&&c(a)}}var e=[];c(a);return e},_destroyAll:function(){a._curFocus=null;a._prevFocus=null;a._activeStack=[];g.forEach(c.findWidgets(m.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(a){for(;a;){var b=1==a.nodeType&&a.getAttribute("widgetId");if(b)return d[b];a=a.parentNode}return null},_hash:d};return a.registry=c})},"dijit/main":function(){define(["dojo/_base/kernel"],
function(g){return g.dijit})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H){function J(a){return function(b){n[b?
"set":"remove"](this.domNode,a,b);this._set(a,b)}}u.add("dijit-legacy-requires",!t.isAsync);u.add("dojo-bidi",!1);u("dijit-legacy-requires")&&x(0,function(){g(["dijit/_base/manager"])});var I={};b=c("dijit._WidgetBase",[B,z],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:J("lang"),dir:"",_setDirAttr:J("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",
a)},attributeMap:{},_blankGif:b.blankGif||g.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},d;for(d in b.attributeMap)c.push(d);for(d in b)/^on/.test(d)&&(a[d.substring(2).toLowerCase()]=d),/^_set[A-Z](.*)Attr$/.test(d)&&(d=d.charAt(4).toLowerCase()+d.substr(5,d.length-9),(!b.attributeMap||!(d in b.attributeMap))&&c.push(d))}},postscript:function(a,b){this.create(a,b)},create:function(a,
b){this._introspect();this.srcNodeRef=h.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&(this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id)&&(this.id=this.srcNodeRef.id);a&&(this.params=a,w.mixin(this,a));this.postMixInProperties();this.id||(this.id=H.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=C.body(this.ownerDocument);
H.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();var d=this.srcNodeRef;d&&(d.parentNode&&this.domNode!==d)&&(d.parentNode.replaceChild(this.domNode,d),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);m.forEach(this.constructor._setterAttrs,function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(b in a)this.set(b,
a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(m.map(a,function(a){return a+"Rtl"})));f.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,m.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&w.isFunction(a.startup))&&(a.startup(),a._started=!0)}))},
destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();m.forEach(this._connects,w.hitch(this,"disconnect"));m.forEach(this._supportingWidgets,b);this.domNode&&m.forEach(H.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);H.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&
(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?n.remove(this.domNode,"widgetId"):e.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||e.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){m.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;w.isObject(a)?s.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",
a)},_attrToDom:function(a,b,c){c=3<=arguments.length?c:this.attributeMap[a];m.forEach(w.isArray(c)?c:[c],function(c){var d=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":w.isFunction(b)&&(b=w.hitch(this,b));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;d.tagName?n.set(d,c,b):d.set(c,b);break;case "innerText":d.innerHTML="";d.appendChild(this.ownerDocument.createTextNode(b));break;case "innerHTML":d.innerHTML=b;break;case "class":f.replace(d,b,this[a]);
break;case "toggleClass":f.toggle(d,c.className||a,b)}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var d=this[c.s];if(w.isFunction(d))var e=d.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&!w.isFunction(this.focusNode)?"focusNode":"domNode",f=this[d]&&this[d].tagName,h;if(h=f)if(!(h=I[f])){h=this[d];var p={},
E;for(E in h)p[E.toLowerCase()]=!0;h=I[f]=p}E=h;c=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:E&&c.l in E&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?d:null;null!=c&&this._attrToDom(a,b,c);this._set(a,b)}return e||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},
_set:function(a,b){var c=this[a];this[a]=b;if(this._created&&!(c===b||c!==c&&b!==b))this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}})},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var d,e=this["on"+a];e&&(d=e.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&v.emit(this.domNode,a.toLowerCase(),
b);return d},on:function(b,c){var d=this._onMap(b);return d?a.after(this,d,c,!0):this.own(v(this.domNode,b,c))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},d;for(d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?H.findWidgets(this.containerNode):[]},getParent:function(){return H.getEnclosingWidget(this.domNode.parentNode)},
connect:function(a,b,c){return this.own(d.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(A.subscribe(a,w.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():p.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=s.get(this.domNode,"display")},placeAt:function(a,b){var c=!a.tagName&&H.byId(a);c&&c.addChild&&(!b||"number"===typeof b)?c.addChild(this,
b):(c=c&&"domNode"in c?c.containerNode&&!/after|before|replace/.test(b||"")?c.containerNode:c.domNode:h.byId(a,this.ownerDocument),e.place(this.domNode,c,b),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(a,b){var c=setTimeout(w.hitch(this,function(){c&&(c=null,this._destroyed||w.hitch(this,a)())}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}});u("dojo-bidi")&&b.extend(F);return b})},"dojo/Stateful":function(){define(["./_base/declare",
"./_base/lang","./_base/array","./when"],function(g,m,a,b){return g("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;return b[a]?b[a]:b[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,b){return"function"===typeof this[b.g]?this[b.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,c){if("object"===typeof a){for(var h in a)a.hasOwnProperty(h)&&"_watchCallbacks"!=h&&this.set(h,
a[h]);return this}h=this._getAttrNames(a);var n=this._get(a,h);h=this[h.s];var f;"function"===typeof h?f=h.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=c;if(this._watchCallbacks){var e=this;b(f,function(){e._watchCallbacks(a,n,c)})}return this},_changeAttrValue:function(a,b){var h=this.get(a);this[a]=b;this._watchCallbacks&&this._watchCallbacks(a,h,b);return this},watch:function(b,c){var h=this._watchCallbacks;if(!h)var n=this,h=this._watchCallbacks=function(a,b,c,d){var e=function(d){if(d){d=
d.slice();for(var e=0,f=d.length;e<f;e++)d[e].call(n,a,b,c)}};e(h["_"+a]);d||e(h["*"])};!c&&"function"===typeof b?(c=b,b="*"):b="_"+b;var f=h[b];"object"!==typeof f&&(f=h[b]=[]);f.push(c);var e={};e.unwatch=e.remove=function(){var b=a.indexOf(f,c);-1<b&&f.splice(b,1)};return e}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(g,m,a){return a("dijit.Destroyable",null,{destroy:function(a){this._destroyed=!0},own:function(){var a=["destroyRecursive",
"destroy","remove"];g.forEach(arguments,function(d){function c(){n.remove();g.forEach(f,function(a){a.remove()})}var h,n=m.before(this,"destroy",function(a){d[h](a)}),f=[];d.then?(h="cancel",d.then(c,c)):g.forEach(a,function(a){"function"===typeof d[a]&&(h||(h=a),f.push(m.after(d,a,c,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(g,m,a,b,d,c){g=b("dijit._OnDijitClickMixin",
null,{connect:function(a,b,d){return this.inherited(arguments,[a,"ondijitclick"==b?c:b,d])}});g.a11yclick=c;return g})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(g,m,a,b){function d(a){if((a.keyCode===g.ENTER||a.keyCode===g.SPACE)&&!/input|button|textarea/i.test(a.target.nodeName))for(a=a.target;a;a=a.parentNode)if(a.dojoClick)return!0}var c;a(document,"keydown",function(a){d(a)?(c=a.target,a.preventDefault()):c=null});a(document,"keyup",function(b){d(b)&&
b.target==c&&(c=null,a.emit(b.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:b.ctrlKey,shiftKey:b.shiftKey,metaKey:b.metaKey,altKey:b.altKey,_origType:b.type}))});var h=function(b,c){b.dojoClick=!0;return a(b,"click",c)};h.click=h;h.press=function(c,d){var e=a(c,b.press,function(a){("mousedown"!=a.type||m.isLeft(a))&&d(a)}),h=a(c,"keydown",function(a){(a.keyCode===g.ENTER||a.keyCode===g.SPACE)&&d(a)});return{remove:function(){e.remove();h.remove()}}};h.release=function(c,d){var e=a(c,b.release,
function(a){("mouseup"!=a.type||m.isLeft(a))&&d(a)}),h=a(c,"keyup",function(a){(a.keyCode===g.ENTER||a.keyCode===g.SPACE)&&d(a)});return{remove:function(){e.remove();h.remove()}}};h.move=b.move;return h})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(g,m,a,b,d,c,h,n,f,e){function p(a,b,d){return w&&d?function(a,b){return c(a,d,b)}:x?function(d,e){var f=c(d,b,function(a){e.call(this,a);M=(new Date).getTime()}),
h=c(d,a,function(a){(!M||(new Date).getTime()>M+1E3)&&e.call(this,a)});return{remove:function(){f.remove();h.remove()}}}:function(b,d){return c(b,a,d)}}function s(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function u(d,f,h){if(!n.isRight(d)){var p=s(d.target);if(A=!d.target.disabled&&p&&p.dojoClick)if(z=(C="useTarget"==A)?p:d.target,C&&d.preventDefault(),F=d.changedTouches?d.changedTouches[0].pageX-e.global.pageXOffset:d.clientX,H=d.changedTouches?d.changedTouches[0].pageY-e.global.pageYOffset:
d.clientY,J=("object"==typeof A?A.x:"number"==typeof A?A:0)||4,I=("object"==typeof A?A.y:"number"==typeof A?A:0)||4,!B){B=!0;var g=function(b){A=C?a.isDescendant(e.doc.elementFromPoint(b.changedTouches?b.changedTouches[0].pageX-e.global.pageXOffset:b.clientX,b.changedTouches?b.changedTouches[0].pageY-e.global.pageYOffset:b.clientY),z):A&&(b.changedTouches?b.changedTouches[0].target:b.target)==z&&Math.abs((b.changedTouches?b.changedTouches[0].pageX-e.global.pageXOffset:b.clientX)-F)<=J&&Math.abs((b.changedTouches?
b.changedTouches[0].pageY-e.global.pageYOffset:b.clientY)-H)<=I};e.doc.addEventListener(f,function(a){n.isRight(a)||(g(a),C&&a.preventDefault())},!0);e.doc.addEventListener(h,function(b){if(!n.isRight(b)&&(g(b),A)){K=(new Date).getTime();var d=C?z:b.target;"LABEL"===d.tagName&&(d=a.byId(d.getAttribute("for"))||d);var e=b.changedTouches?b.changedTouches[0]:b,q=function(a){var k=document.createEvent("MouseEvents");k._dojo_click=!0;k.initMouseEvent(a,!0,!0,b.view,b.detail,e.screenX,e.screenY,e.clientX,
e.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null);return k},k=q("mousedown"),r=q("mouseup"),y=q("click");setTimeout(function(){c.emit(d,"mousedown",k);c.emit(d,"mouseup",r);c.emit(d,"click",y);K=(new Date).getTime()},0)}},!0);d=function(a){e.doc.addEventListener(a,function(c){var d=c.target;A&&(!c._dojo_click&&(new Date).getTime()<=K+1E3&&!("INPUT"==d.tagName&&b.contains(d,"dijitOffScreen")))&&(c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),"click"==a&&(("INPUT"!=
d.tagName||"radio"==d.type&&(b.contains(d,"dijitCheckBoxInput")||b.contains(d,"mblRadioButton"))||"checkbox"==d.type&&(b.contains(d,"dijitCheckBoxInput")||b.contains(d,"mblCheckBox")))&&"TEXTAREA"!=d.tagName&&"AUDIO"!=d.tagName&&"VIDEO"!=d.tagName)&&c.preventDefault())},!0)};d("click");d("mousedown");d("mouseup")}}}var t=5>h("ios"),w=h("pointer-events")||h("MSPointer"),v=function(){var a={},b;for(b in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[b]=h("MSPointer")?"MSPointer"+b.charAt(0).toUpperCase()+
b.slice(1):"pointer"+b;return a}(),x=h("touch-events"),B,A,C=!1,z,F,H,J,I,K,M,L;h("touch")&&(w?f(function(){e.doc.addEventListener(v.down,function(a){u(a,v.move,v.up)},!0)}):f(function(){function a(b){var c=d.delegate(b,{bubbles:!0});6<=h("ios")&&(c.touches=b.touches,c.altKey=b.altKey,c.changedTouches=b.changedTouches,c.ctrlKey=b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey,c.targetTouches=b.targetTouches);return c}L=e.body();e.doc.addEventListener("touchstart",function(a){M=(new Date).getTime();
var b=L;L=a.target;c.emit(b,"dojotouchout",{relatedTarget:L,bubbles:!0});c.emit(L,"dojotouchover",{relatedTarget:b,bubbles:!0});u(a,"touchmove","touchend")},!0);c(e.doc,"touchmove",function(b){M=(new Date).getTime();var d=e.doc.elementFromPoint(b.pageX-(t?0:e.global.pageXOffset),b.pageY-(t?0:e.global.pageYOffset));d&&(L!==d&&(c.emit(L,"dojotouchout",{relatedTarget:d,bubbles:!0}),c.emit(d,"dojotouchover",{relatedTarget:L,bubbles:!0}),L=d),c.emit(d,"dojotouchmove",a(b))||b.preventDefault())});c(e.doc,
"touchend",function(b){M=(new Date).getTime();var d=e.doc.elementFromPoint(b.pageX-(t?0:e.global.pageXOffset),b.pageY-(t?0:e.global.pageYOffset))||e.body();c.emit(d,"dojotouchend",a(b))})}));m={press:p("mousedown","touchstart",v.down),move:p("mousemove","dojotouchmove",v.move),release:p("mouseup","dojotouchend",v.up),cancel:p(n.leave,"touchcancel",w?v.cancel:null),over:p("mouseover","dojotouchover",v.over),out:p("mouseout","dojotouchout",v.out),enter:n._eventHandler(p("mouseover","dojotouchover",
v.over)),leave:n._eventHandler(p("mouseout","dojotouchout",v.out))};return g.touch=m})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(g,m,a,b){b.extend(m,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return a("dijit._FocusMixin",null,{_focusManager:g})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x){var B,A,C=new (m([s,h],{curNode:null,activeStack:[],constructor:function(){var b=n.hitch(this,function(b){a.isDescendant(this.curNode,b)&&this.set("curNode",null);a.isDescendant(this.prevNode,b)&&this.set("prevNode",null)});g.before(c,"empty",b);g.before(c,"destroy",b)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var c=this,d=a.document&&a.document.body;if(d){var e=p("pointer-events")?"pointerdown":p("MSPointer")?
"MSPointerDown":p("touch-events")?"mousedown, touchstart":"mousedown",h=f(a.document,e,function(a){if(!a||!(a.target&&null==a.target.parentNode))c._onTouchNode(b||a.target,"mouse")}),n=f(d,"focusin",function(a){if(a.target.tagName){var d=a.target.tagName.toLowerCase();"#document"==d||"body"==d||(w.isFocusable(a.target)?c._onFocusNode(b||a.target):c._onTouchNode(b||a.target))}}),g=f(d,"focusout",function(a){c._onBlurNode(b||a.target)});return{remove:function(){h.remove();n.remove();g.remove();d=h=
n=g=null}}}},_onBlurNode:function(a){a=(new Date).getTime();a<B+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(n.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<A+100||(this._clearActiveWidgetsTimer=setTimeout(n.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,c){A=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);d.contains(a,"dijitPopup")&&(a=a.firstChild);var e=[];try{for(;a;){var f=b.get(a,"dijitPopupParent");if(f)a=v.byId(f).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===u.body())break;a=t.get(a.ownerDocument).frameElement}else{var h=a.getAttribute&&a.getAttribute("widgetId"),p=h&&v.byId(h);p&&!("mouse"==c&&p.get("disabled"))&&e.unshift(h);a=a.parentNode}}}catch(n){}this._setStack(e,
c)},_onFocusNode:function(a){a&&9!=a.nodeType&&(B=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,d=c.length-1,e=a.length-1;if(a[e]!=c[d]){this.set("activeStack",a);var f;for(f=d;0<=f&&c[f]!=a[f];f--)if(d=v.byId(c[f]))d._hasBeenBlurred=!0,d.set("focused",!1),d._focusManager==this&&d._onBlur(b),
this.emit("widget-blur",d,b);for(f++;f<=e;f++)if(d=v.byId(a[f]))d.set("focused",!0),d._focusManager==this&&d._onFocus(b),this.emit("widget-focus",d,b)}},focus:function(a){if(a)try{a.focus()}catch(b){}}}));e(function(){var a=C.registerWin(t.get(document));p("ie")&&f(window,"unload",function(){a&&(a.remove(),a=null)})});x.focus=function(a){C.focus(a)};for(var z in C)/^_/.test(z)||(x.focus[z]="function"==typeof C[z]?n.hitch(C,z):C[z]);C.watch(function(a,b,c){x.focus[a]=c});return C})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),
function(g,m,a,b,d,c,h){m.add("rtl-adjust-position-for-verticalScrollBar",function(b,c){var p=a.body(c),n=h.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},p,"last"),g=h.create("div",{style:{overflow:"hidden",direction:"ltr"}},n,"last"),m=0!=d.position(g).x;n.removeChild(g);p.removeChild(n);return m});m.add("position-fixed-support",function(b,c){var p=a.body(c),n=h.create("span",{style:{visibility:"hidden",
position:"fixed",left:"1px",top:"1px"}},p,"last"),g=h.create("span",{style:{position:"fixed",left:"0",top:"0"}},n,"last"),m=d.position(g).x!=d.position(n).x;n.removeChild(g);p.removeChild(n);return m});var n={getBox:function(b){b=b||a.doc;var c="BackCompat"==b.compatMode?a.body(b):b.documentElement,h=d.docScroll(b);if(m("touch")){var g=n.get(b);b=g.innerWidth||c.clientWidth;c=g.innerHeight||c.clientHeight}else b=c.clientWidth,c=c.clientHeight;return{l:h.x,t:h.y,w:b,h:c}},get:function(a){if(m("ie")&&
n!==document.parentWindow){a.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var b=a._parentWindow;a._parentWindow=null;return b}return a.parentWindow||a.defaultView},scrollIntoView:function(f,e){try{f=b.byId(f);var h=f.ownerDocument||a.doc,n=a.body(h),g=h.documentElement||n.parentNode,t=m("ie")||m("trident"),w=m("webkit");if(!(f==n||f==g))if(!m("mozilla")&&(!t&&!w&&!m("opera")&&!m("trident")&&!m("edge"))&&"scrollIntoView"in f)f.scrollIntoView(!1);else{var v="BackCompat"==
h.compatMode,x=Math.min(n.clientWidth||g.clientWidth,g.clientWidth||n.clientWidth),B=Math.min(n.clientHeight||g.clientHeight,g.clientHeight||n.clientHeight),h=w||v?n:g,A=e||d.position(f),C=f.parentNode,w=function(a){return 6>=t||7==t&&v?!1:m("position-fixed-support")&&"fixed"==c.get(a,"position").toLowerCase()},z=this,F=function(a,b,k){"BODY"==a.tagName||"HTML"==a.tagName?z.get(a.ownerDocument).scrollBy(b,k):(b&&(a.scrollLeft+=b),k&&(a.scrollTop+=k))};if(!w(f))for(;C;){C==n&&(C=h);var H=d.position(C),
J=w(C),I="rtl"==c.getComputedStyle(C).direction.toLowerCase();if(C==h){H.w=x;H.h=B;if(h==g&&(t||m("trident"))&&I)H.x+=h.offsetWidth-H.w;H.x=0;H.y=0}else{var K=d.getPadBorderExtents(C);H.w-=K.w;H.h-=K.h;H.x+=K.l;H.y+=K.t;var M=C.clientWidth,L=H.w-M;0<M&&0<L&&(I&&m("rtl-adjust-position-for-verticalScrollBar")&&(H.x+=L),H.w=M);M=C.clientHeight;L=H.h-M;0<M&&0<L&&(H.h=M)}J&&(0>H.y&&(H.h+=H.y,H.y=0),0>H.x&&(H.w+=H.x,H.x=0),H.y+H.h>B&&(H.h=B-H.y),H.x+H.w>x&&(H.w=x-H.x));var G=A.x-H.x,O=A.y-H.y,S=G+A.w-H.w,
U=O+A.h-H.h,T,E;if(0<S*G&&(C.scrollLeft||C==h||C.scrollWidth>C.offsetHeight)){T=Math[0>G?"max":"min"](G,S);if(I&&(8==t&&!v||5<=m("trident")))T=-T;E=C.scrollLeft;F(C,T,0);T=C.scrollLeft-E;A.x-=T}if(0<U*O&&(C.scrollTop||C==h||C.scrollHeight>C.offsetHeight))T=Math.ceil(Math[0>O?"max":"min"](O,U)),E=C.scrollTop,F(C,0,T),T=C.scrollTop-E,A.y-=T;C=C!=h&&!J&&C.parentNode}}}catch(Q){f.scrollIntoView(!1)}}};g.setObject("dojo.window",n);return n})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),
function(g,m,a,b,d,c,h){var n={_isElementShown:function(c){var d=b.get(c);return"hidden"!=d.visibility&&"collapsed"!=d.visibility&&"none"!=d.display&&"hidden"!=a.get(c,"type")},hasDefaultTabStop:function(b){switch(b.nodeName.toLowerCase()){case "a":return a.has(b,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var c;try{var d=b.contentDocument;if("designMode"in d&&"on"==d.designMode)return!0;c=d.body}catch(h){try{c=b.contentWindow.document.body}catch(n){return!1}}return c&&
("true"==c.contentEditable||c.firstChild&&"true"==c.firstChild.contentEditable);default:return"true"==b.contentEditable}},effectiveTabIndex:function(b){return a.get(b,"disabled")?void 0:a.has(b,"tabIndex")?+a.get(b,"tabIndex"):n.hasDefaultTabStop(b)?0:void 0},isTabNavigable:function(a){return 0<=n.effectiveTabIndex(a)},isFocusable:function(a){return-1<=n.effectiveTabIndex(a)},_getTabNavigable:function(b){function d(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&
a.name&&a.name.toLowerCase()}var h,g,m,t,w,v,x={},B=n._isElementShown,A=n.effectiveTabIndex,C=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(!(1!=b.nodeType||9>=c("ie")&&"HTML"!==b.scopeName||!B(b))){var f=A(b);if(0<=f){if(0==f)h||(h=b),g=b;else if(0<f){if(!m||f<t)t=f,m=b;if(!w||f>=v)v=f,w=b}f=d(b);a.get(b,"checked")&&f&&(x[f]=b)}"SELECT"!=b.nodeName.toUpperCase()&&C(b)}};B(b)&&C(b);return{first:x[d(h)]||h,last:x[d(g)]||g,lowest:x[d(m)]||m,highest:x[d(w)]||w}},getFirstInTabbingOrder:function(a,
b){var c=n._getTabNavigable(m.byId(a,b));return c.lowest?c.lowest:c.first},getLastInTabbingOrder:function(a,b){var c=n._getTabNavigable(m.byId(a,b));return c.last?c.last:c.highest}};d.mixin(h,n);return n})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(g,m,a,b,d){var c=d.doc.documentElement;d=b("ie");var h=b("trident"),n=b("opera"),f=Math.floor,e=b("ff"),p=g.boxModel.replace(/-/,""),n={dj_quirks:b("quirks"),dj_opera:n,dj_khtml:b("khtml"),
dj_webkit:b("webkit"),dj_safari:b("safari"),dj_chrome:b("chrome"),dj_edge:b("edge"),dj_gecko:b("mozilla"),dj_ios:b("ios"),dj_android:b("android")};d&&(n.dj_ie=!0,n["dj_ie"+f(d)]=!0,n.dj_iequirks=b("quirks"));h&&(n.dj_trident=!0,n["dj_trident"+f(h)]=!0);e&&(n["dj_ff"+f(e)]=!0);n["dj_"+p]=!0;var s="",u;for(u in n)n[u]&&(s+=u+" ");c.className=m.trim(c.className+" "+s);a(function(){if(!g.isBodyLtr()){var a="dj_rtl dijitRtl "+s.replace(/ /g,"-rtl ");c.className=m.trim(c.className+" "+a+"dj_rtl dijitRtl "+
s.replace(/ /g,"-rtl "))}});return b})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(g,m,a,b){a(function(){m("highcontrast")&&g.add(b.body(),"dijit_a11y")});return m})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(g,m,a,b,d,c,h){d.add("highcontrast",function(){var a=h.doc.createElement("div");try{a.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+
(m.blankGif||g.toUrl("./resources/blank.gif"))+'");';h.body().appendChild(a);var c=b.getComputedStyle(a),e=c.backgroundImage;return c.borderTopColor==c.borderRightColor||e&&("none"==e||"url(invalid-url:)"==e)}catch(p){return!1}finally{8>=d("ie")?a.outerHTML="":h.body().removeChild(a)}});c(function(){d("highcontrast")&&a.add(h.body(),"dj_a11y")});return d})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(g,m,a,b,d,c,h){c.extend(g,{waiRole:"",waiState:""});return d("dijit._Templated",[m,a],{constructor:function(){h.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(a,c){var d=this.inherited(arguments),h=c(a,"waiRole");h&&a.setAttribute("role",h);(h=c(a,"waiState"))&&b.forEach(h.split(/\s*,\s*/),function(b){-1!=b.indexOf("-")&&(b=b.split("-"),a.setAttribute("aria-"+b[0],b[1]))});
return d}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(g,m,a,b,d,c,h,n){var f=m("dijit._TemplatedMixin",n,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var c=this.declaredClass,d=this;return h.substitute(a,this,function(a,e){"!"==e.charAt(0)&&(a=b.getObject(e.substr(1),!1,d));if("undefined"==typeof a)throw Error(c+
" template:"+e);return null==a?"":"!"==e.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=g(this.templatePath,{sanitize:!0}));var c=f.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),d;if(b.isString(c)){if(d=a.toDom(this._stringRepl(c),
this.ownerDocument),1!=d.nodeType)throw Error("Invalid template: "+c);}else d=c.cloneNode(!0);this.domNode=d}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});f._templateCache={};f.getCachedTemplate=function(b,c,d){var n=f._templateCache,g=b,m=n[g];if(m){try{if(!m.ownerDocument||m.ownerDocument==(d||document))return m}catch(v){}a.destroy(m)}b=
h.trim(b);if(c||b.match(/\$\{([^\}]+)\}/g))return n[g]=b;c=a.toDom(b,d);if(1!=c.nodeType)throw Error("Invalid template: "+b);return n[g]=c};c("ie")&&d(window,"unload",function(){var b=f._templateCache,c;for(c in b){var d=b[c];"object"==typeof d&&a.destroy(d);delete b[c]}});return f})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(g){return g.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(g,m,a,b){var d;d=function(a,c,d){b(a,{sync:!!c,
headers:{"X-Requested-With":null}}).then(d)};var c={},h=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},n={},f={};g.cache=function(a,b,f){var n;"string"==typeof a?/\//.test(a)?(n=a,f=b):n=m.toUrl(a.replace(/\./g,"/")+(b?"/"+b:"")):(n=a+"",f=b);a=void 0!=f&&"string"!=typeof f?f.value:f;f=f&&f.sanitize;if("string"==typeof a)return c[n]=a,f?h(a):a;if(null===a)return delete c[n],
null;n in c||d(n,!0,function(a){c[n]=a});return f?h(c[n]):c[n]};return{dynamic:!0,normalize:function(a,b){var c=a.split("!"),d=c[0];return(/^\./.test(d)?b(d):d)+(c[1]?"!"+c[1]:"")},load:function(a,b,g){a=a.split("!");var m=1<a.length,t=a[0],w=b.toUrl(a[0]);a="url:"+w;var v=n,x=function(a){g(m?h(a):a)};t in c?v=c[t]:b.cache&&a in b.cache?v=b.cache[a]:w in c&&(v=c[w]);if(v===n)if(f[w])f[w].push(x);else{var B=f[w]=[x];d(w,!b.async,function(a){c[t]=c[w]=a;for(var b=0;b<B.length;)B[b++](a);delete f[w]})}else x(v)}}})},
"dojo/request":function(){define(["./request/default!"],function(g){return g})},"dojo/request/default":function(){define(["exports","require","../has"],function(g,m,a){var b=a("config-requestProvider");b||(b="./xhr");g.getPlatformDefaultId=function(){return"./xhr"};g.load=function(a,c,h,n){m(["platform"==a?"./xhr":b],function(a){h(a)})}})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),
function(g,m,a,b,d,c,h,n,f){var e=d.delegate(n,{mouseenter:c.enter,mouseleave:c.leave,keypress:a._keypress}),p;a=b("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||
this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(a,b,c){var e=!0,f=this.attachScope||this,h=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(h)for(var n=h.split(/\s*,\s*/);h=n.shift();)d.isArray(f[h])?f[h].push(a):f[h]=a,e="containerNode"!=h,this._attachPoints.push(h);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event")){h=b.split(/\s*,\s*/);for(n=d.trim;b=h.shift();)if(b){var p=
null;-1!=b.indexOf(":")?(p=b.split(":"),b=n(p[0]),p=n(p[1])):b=n(b);p||(p=b);this._attachEvents.push(c(a,b,d.hitch(f,p)))}}return e},_attach:function(a,b,c){b=b.replace(/^on/,"").toLowerCase();b="dijitclick"==b?p||(p=g("./a11yclick")):e[b]||b;return h(a,b,c)},_detachTemplateNodes:function(){var a=this.attachScope||this;m.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];m.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();
this.inherited(arguments)}});d.extend(f,{dojoAttachEvent:"",dojoAttachPoint:""});return a})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(g,m,a,b,d){return a("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var a=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=
!0);d.parse(a,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(b.hitch(this,function(a){this._startupWidgets=a;for(var b=0;b<a.length;b++)this._processTemplateNode(a[b],function(a,b){return a[b]},function(a,b,c){return b in a?a.connect(a,b,c):a.on(b,c,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+
": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(a,b,d){return b(a,"dojoType")||b(a,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){g.forEach(this._startupWidgets,function(a){a&&(!a._started&&a.startup)&&a.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v){function x(a){return eval("("+a+")")}function B(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<C){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=C}return b}function A(b,c){c||(c=g);var d=c._dojoParserCtorMap||(c._dojoParserCtorMap={}),e=b.join();if(!d[e]){for(var f=[],h=0,p=b.length;h<p;h++){var n=b[h];f[f.length]=d[n]=d[n]||a.getObject(n)||~n.indexOf("/")&&c(n)}h=f.shift();d[e]=f.length?h.createSubclass?
h.createSubclass(f):h.extend.apply(h,f):h}return d[e]}new Date("X");var C=0;f.after(a,"extend",function(){C++},!0);var z={_clearCache:function(){C++;_ctorMap={}},_functionFromScript:function(a,c){var d="",e="",f=a.getAttribute(c+"args")||a.getAttribute("args"),h=a.getAttribute("with"),f=(f||"").split(/\s*,\s*/);h&&h.length&&b.forEach(h.split(/\s*,\s*/),function(a){d+="with("+a+"){";e+="}"});return new Function(f,d+a.innerHTML+e)},instantiate:function(a,c,d){c=c||{};d=d||{};var e=(d.scope||m._scopeName)+
"Type",f="data-"+(d.scope||m._scopeName)+"-",h=f+"type",n=f+"mixins",p=[];b.forEach(a,function(a){var b=e in c?c[e]:a.getAttribute(h)||a.getAttribute(e);if(b){var d=a.getAttribute(n),b=d?[b].concat(d.split(/\s*,\s*/)):[b];p.push({node:a,types:b})}});return this._instantiate(p,c,d)},_instantiate:function(a,c,d,f){function h(a){!c._started&&!d.noStart&&b.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}a=b.map(a,function(a){var b=a.ctor||A(a.types,d.contextRequire);
if(!b)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(b,a.node,c,d,a.scripts,a.inherited)},this);return f?e(a).then(h):h(a)},construct:function(c,d,e,h,g,s){function v(k){N&&a.setObject(N,k);for(E=0;E<D.length;E++)f[D[E].advice||"after"](k,D[E].method,a.hitch(k,D[E].func),!0);for(E=0;E<P.length;E++)P[E].call(k);for(E=0;E<aa.length;E++)k.watch(aa[E].prop,aa[E].func);for(E=0;E<X.length;E++)w(k,X[E].event,X[E].func);return k}var A=c&&c.prototype;h=h||{};var z=
{};h.defaults&&a.mixin(z,h.defaults);s&&a.mixin(z,s);var C;u("dom-attributes-explicit")?C=d.attributes:u("dom-attributes-specified-flag")?C=b.filter(d.attributes,function(a){return a.specified}):(s=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),C=b.map(s.split(/\s+/),function(a){var k=a.toLowerCase();return{name:a,value:"LI"==d.nodeName&&"value"==a||"enctype"==k?d.getAttribute(k):d.getAttributeNode(k).value}}));
var U=h.scope||m._scopeName;s="data-"+U+"-";var T={};"dojo"!==U&&(T[s+"props"]="data-dojo-props",T[s+"type"]="data-dojo-type",T[s+"mixins"]="data-dojo-mixins",T[U+"type"]="dojotype",T[s+"id"]="data-dojo-id");for(var E=0,Q,U=[],N,q;Q=C[E++];){var k=Q.name,r=k.toLowerCase();Q=Q.value;switch(T[r]||r){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":q=Q;break;case "data-dojo-id":case "jsid":N=Q;break;case "data-dojo-attach-point":case "dojoattachpoint":z.dojoAttachPoint=
Q;break;case "data-dojo-attach-event":case "dojoattachevent":z.dojoAttachEvent=Q;break;case "class":z["class"]=d.className;break;case "style":z.style=d.style&&d.style.cssText;break;default:if(k in A||(k=B(c)[r]||k),k in A)switch(typeof A[k]){case "string":z[k]=Q;break;case "number":z[k]=Q.length?Number(Q):NaN;break;case "boolean":z[k]="false"!=Q.toLowerCase();break;case "function":""===Q||-1!=Q.search(/[^\w\.]+/i)?z[k]=new Function(Q):z[k]=a.getObject(Q,!1)||new Function(Q);U.push(k);break;default:r=
A[k],z[k]=r&&"length"in r?Q?Q.split(/\s*,\s*/):[]:r instanceof Date?""==Q?new Date(""):"now"==Q?new Date:p.fromISOString(Q):r instanceof n?m.baseUrl+Q:x(Q)}else z[k]=Q}}for(C=0;C<U.length;C++)T=U[C].toLowerCase(),d.removeAttribute(T),d[T]=null;if(q)try{q=x.call(h.propsThis,"{"+q+"}"),a.mixin(z,q)}catch(y){throw Error(y.toString()+" in data-dojo-props\x3d'"+q+"'");}a.mixin(z,e);g||(g=c&&(c._noScript||A._noScript)?[]:t("\x3e script[type^\x3d'dojo/']",d));var D=[],P=[],aa=[],X=[];if(g)for(E=0;E<g.length;E++)T=
g[E],d.removeChild(T),e=T.getAttribute(s+"event")||T.getAttribute("event"),h=T.getAttribute(s+"prop"),q=T.getAttribute(s+"method"),U=T.getAttribute(s+"advice"),C=T.getAttribute("type"),T=this._functionFromScript(T,s),e?"dojo/connect"==C?D.push({method:e,func:T}):"dojo/on"==C?X.push({event:e,func:T}):z[e]=T:"dojo/aspect"==C?D.push({method:q,advice:U,func:T}):"dojo/watch"==C?aa.push({prop:h,func:T}):P.push(T);c=(g=c.markupFactory||A.markupFactory)?g(z,d,c):new c(z,d);return c.then?c.then(v):v(c)},scan:function(a,
c){function d(a){if(!a.inherited){a.inherited={};var k=a.node,b=d(a.parent),k={dir:k.getAttribute("dir")||b.dir,lang:k.getAttribute("lang")||b.lang,textDir:k.getAttribute(t)||b.textDir},r;for(r in k)k[r]&&(a.inherited[r]=k[r])}return a.inherited}var e=[],f=[],h={},n=(c.scope||m._scopeName)+"Type",p="data-"+(c.scope||m._scopeName)+"-",u=p+"type",t=p+"textdir",p=p+"mixins",v=a.firstChild,w=c.inherited;if(!w){var E=function(a,k){return a.getAttribute&&a.getAttribute(k)||a.parentNode&&E(a.parentNode,
k)},w={dir:E(a,"dir"),lang:E(a,"lang"),textDir:E(a,t)},x;for(x in w)w[x]||delete w[x]}for(var w={inherited:w},N,q;;)if(v)if(1!=v.nodeType)v=v.nextSibling;else if(N&&"script"==v.nodeName.toLowerCase())(k=v.getAttribute("type"))&&/^dojo\/\w/i.test(k)&&N.push(v),v=v.nextSibling;else if(q)v=v.nextSibling;else{var k=v.getAttribute(u)||v.getAttribute(n);x=v.firstChild;if(!k&&(!x||3==x.nodeType&&!x.nextSibling))v=v.nextSibling;else{q=null;if(k){var r=v.getAttribute(p);N=r?[k].concat(r.split(/\s*,\s*/)):
[k];try{q=A(N,c.contextRequire)}catch(y){}q||b.forEach(N,function(a){~a.indexOf("/")&&!h[a]&&(h[a]=!0,f[f.length]=a)});r=q&&!q.prototype._noScript?[]:null;w={types:N,ctor:q,parent:w,node:v,scripts:r};w.inherited=d(w);e.push(w)}else w={node:v,scripts:N,parent:w};N=r;q=v.stopParser||q&&q.prototype.stopParser&&!c.template;v=x}}else{if(!w||!w.node)break;v=w.node.nextSibling;q=!1;w=w.parent;N=w.scripts}var D=new s;f.length?(c.contextRequire||g)(f,function(){D.resolve(b.filter(e,function(a){if(!a.ctor)try{a.ctor=
A(a.types,c.contextRequire)}catch(k){}for(var b=a.parent;b&&!b.types;)b=b.parent;var r=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(r&&r.stopParser&&!c.template);a.instantiate=!b||b.instantiate&&b.instantiateChildren;return a.instantiate}))}):D.resolve(e);return D.promise},_require:function(b,c){var d=x("{"+b.innerHTML+"}"),e=[],f=[],h=new s,p=c&&c.contextRequire||g,n;for(n in d)e.push(n),f.push(d[n]);p(f,function(){for(var b=0;b<e.length;b++)a.setObject(e[b],arguments[b]);h.resolve(arguments)});
return h.promise},_scanAmd:function(a,b){var c=new s,d=c.promise;c.resolve(!0);var e=this;t("script[type\x3d'dojo/require']",a).forEach(function(a){d=d.then(function(){return e._require(a,b)});a.parentNode.removeChild(a)});return d},parse:function(b,d){b&&("string"!=typeof b&&!("nodeType"in b))&&(d=b,b=d.rootNode);var e=b?c.byId(b):h.body();d=d||{};var f=d.template?{template:!0}:{},n=[],p=this,g=this._scanAmd(e,d).then(function(){return p.scan(e,d)}).then(function(a){return p._instantiate(a,f,d,!0)}).then(function(a){return n=
n.concat(a)}).otherwise(function(a){throw a;});a.mixin(n,g);return n}};m.parser=z;d.parseOnLoad&&v(100,z,"parse");return z})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(g,m){var a={};g.setObject("dojo.date.stamp",a);a.fromISOString=function(b,d){a._isoRegExp||(a._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var c=a._isoRegExp.exec(b),h=null;if(c){c.shift();c[1]&&c[1]--;c[6]&&(c[6]*=1E3);
d&&(d=new Date(d),m.forEach(m.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(a){return d["get"+a]()}),function(a,b){c[b]=c[b]||a}));h=new Date(c[0]||1970,c[1]||0,c[2]||1,c[3]||0,c[4]||0,c[5]||0,c[6]||0);100>c[0]&&h.setFullYear(c[0]||1970);var n=0,f=c[7]&&c[7].charAt(0);"Z"!=f&&(n=60*(c[8]||0)+(Number(c[9])||0),"-"!=f&&(n*=-1));f&&(n-=h.getTimezoneOffset());n&&h.setTime(h.getTime()+6E4*n)}return h};a.toISOString=function(a,d){var c=function(a){return 10>a?"0"+a:a};
d=d||{};var h=[],n=d.zulu?"getUTC":"get",f="";"time"!=d.selector&&(f=a[n+"FullYear"](),f=["0000".substr((f+"").length)+f,c(a[n+"Month"]()+1),c(a[n+"Date"]())].join("-"));h.push(f);if("date"!=d.selector){f=[c(a[n+"Hours"]()),c(a[n+"Minutes"]()),c(a[n+"Seconds"]())].join(":");n=a[n+"Milliseconds"]();d.milliseconds&&(f+="."+(100>n?"0":"")+c(n));if(d.zulu)f+="Z";else if("time"!=d.selector)var n=a.getTimezoneOffset(),e=Math.abs(n),f=f+((0<n?"-":"+")+c(Math.floor(e/60))+":"+c(e%60));h.push(f)}return h.join("T")};
return a})},"dijit/form/HorizontalSlider":function(){define("dojo/_base/array dojo/_base/declare dojo/dnd/move dojo/_base/fx dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/dnd/Moveable dojo/dnd/Mover dojo/query dojo/mouse dojo/on ../_base/manager ../focus ../typematic ./Button ./_FormValueWidget ../_Container dojo/text!./templates/HorizontalSlider.html".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z){var F=m("dijit.form._SliderMover",p,{onMouseMove:function(a){var b=
this.widget,c=b._abspos;c||(c=b._abspos=d.position(b.sliderBarContainer,!0),b._setPixelValue_=n.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed());a=a[b._mousePixelCoord]-c[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?c[b._pixelCount]-a:a,c[b._pixelCount],!1)},destroy:function(a){p.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,!0)}});a=m("dijit.form.HorizontalSlider",[A,C],{templateString:z,value:0,showButtons:!0,minimum:0,maximum:100,
discreteValues:Infinity,pageIncrement:2,clickSelect:!0,slideDuration:w.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(a){!this.disabled&&(!this.readOnly&&!a.altKey&&!a.ctrlKey&&!a.metaKey)&&this._setValueAttr(this.value,
!0)},_onKeyDown:function(a){if(!this.disabled&&!this.readOnly&&!a.altKey&&!a.ctrlKey&&!a.metaKey){switch(a.keyCode){case h.HOME:this._setValueAttr(this.minimum,!1);break;case h.END:this._setValueAttr(this.maximum,!1);break;case this._descending||this.isLeftToRight()?h.RIGHT_ARROW:h.LEFT_ARROW:case !1===this._descending?h.DOWN_ARROW:h.UP_ARROW:case !1===this._descending?h.PAGE_DOWN:h.PAGE_UP:this.increment(a);break;case this._descending||this.isLeftToRight()?h.LEFT_ARROW:h.RIGHT_ARROW:case !1===this._descending?
h.UP_ARROW:h.DOWN_ARROW:case !1===this._descending?h.PAGE_UP:h.PAGE_DOWN:this.decrement(a);break;default:return}a.stopPropagation();a.preventDefault()}},_onHandleClick:function(a){!this.disabled&&!this.readOnly&&(f("ie")||v.focus(this.sliderHandle),a.stopPropagation(),a.preventDefault())},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(a){if(!this.disabled&&!this.readOnly&&this.clickSelect){v.focus(this.sliderHandle);a.stopPropagation();a.preventDefault();var b=d.position(this.sliderBarContainer,
!0),c=a[this._mousePixelCoord]-b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?b[this._pixelCount]-c:c,b[this._pixelCount],!0);this._movable.onMouseDown(a)}},_setPixelValue:function(a,b,c){if(!this.disabled&&!this.readOnly){var d=this.discreteValues;if(1>=d||Infinity==d)d=b;d--;a=Math.round(a/(b/d));this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*a/d+this.minimum,this.maximum),this.minimum),c)}},_setValueAttr:function(a,c){this._set("value",a);this.valueNode.value=
a;this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments);var d=this.maximum>this.minimum?(a-this.minimum)/(this.maximum-this.minimum):0,e=!1===this._descending?this.remainingBar:this.progressBar,f=!1===this._descending?this.progressBar:this.remainingBar;this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);if(c&&0<this.slideDuration&&e.style[this._progressPixelSize]){var h=this,n={},p=parseFloat(e.style[this._progressPixelSize]),g=this.slideDuration*
(d-p/100);0!=g&&(0>g&&(g=0-g),n[this._progressPixelSize]={start:p,end:100*d,units:"%"},this._inProgressAnim=b.animateProperty({node:e,duration:g,onAnimate:function(a){f.style[h._progressPixelSize]=100-parseFloat(a[h._progressPixelSize])+"%"},onEnd:function(){delete h._inProgressAnim},properties:n}),this._inProgressAnim.play())}else e.style[this._progressPixelSize]=100*d+"%",f.style[this._progressPixelSize]=100*(1-d)+"%"},_bumpValue:function(a,b){if(!this.disabled&&!(this.readOnly||this.maximum<=this.minimum)){var e=
c.getComputedStyle(this.sliderBarContainer),f=d.getContentBox(this.sliderBarContainer,e),e=this.discreteValues;if(1>=e||Infinity==e)e=f[this._pixelCount];e--;f=Math.round((this.value-this.minimum)*e/(this.maximum-this.minimum))+a;0>f&&(f=0);f>e&&(f=e);f=f*(this.maximum-this.minimum)/e+this.minimum;this._setValueAttr(f,b)}},_onClkBumper:function(a){!this.disabled&&(!this.readOnly&&this.clickSelect)&&this._setValueAttr(a,!0)},_onClkIncBumper:function(){this._onClkBumper(!1===this._descending?this.minimum:
this.maximum)},_onClkDecBumper:function(){this._onClkBumper(!1===this._descending?this.maximum:this.minimum)},decrement:function(a){this._bumpValue(a.keyCode==h.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.keyCode==h.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){this.focused&&(a.stopPropagation(),a.preventDefault(),this._bumpValue(0>a.wheelDelta?-1:1,!0))},startup:function(){this._started||(g.forEach(this.getChildren(),function(a){this[a.container]!=this.containerNode&&
this[a.container].appendChild(a.domNode)},this),this.inherited(arguments))},_typematicCallback:function(a,b,c){if(-1==a)this._setValueAttr(this.value,!0);else this[b==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](c)},buildRendering:function(){this.inherited(arguments);this.showButtons&&(this.incrementButton.style.display="",this.decrementButton.style.display="");var a=s('label[for\x3d"'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.focusNode.setAttribute("aria-labelledby",
a[0].id));this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum)},postCreate:function(){this.inherited(arguments);this.showButtons&&this.own(x.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),x.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));this.own(t(this.domNode,u.wheel,n.hitch(this,"_mouseWheeled")));var a=m(F,{widget:this});this._movable=new e(this.sliderHandle,{mover:a});this._layoutHackIE7()},
destroy:function(){this._movable.destroy();this._inProgressAnim&&"stopped"!=this._inProgressAnim.status&&this._inProgressAnim.stop(!0);this.inherited(arguments)}});a._Mover=F;return a})},"dojo/dnd/move":function(){define("../_base/declare ../dom-geometry ../dom-style ./common ./Mover ./Moveable".split(" "),function(g,m,a,b,d,c){b=g("dojo.dnd.move.constrainedMoveable",c,{constraints:function(){},within:!1,constructor:function(a,b){b||(b={});this.constraints=b.constraints;this.within=b.within},onFirstMove:function(a){var b=
this.constraintBox=this.constraints.call(this,a);b.r=b.l+b.w;b.b=b.t+b.h;this.within&&(a=m.getMarginSize(a.node),b.r-=a.w,b.b-=a.h)},onMove:function(a,b){var c=this.constraintBox,d=a.node.style;this.onMoving(a,b);b.l=b.l<c.l?c.l:c.r<b.l?c.r:b.l;b.t=b.t<c.t?c.t:c.b<b.t?c.b:b.t;d.left=b.l+"px";d.top=b.t+"px";this.onMoved(a,b)}});d=g("dojo.dnd.move.boxConstrainedMoveable",b,{box:{},constructor:function(a,b){var c=b&&b.box;this.constraints=function(){return c}}});g=g("dojo.dnd.move.parentConstrainedMoveable",
b,{area:"content",constructor:function(b,c){var d=c&&c.area;this.constraints=function(){var b=this.node.parentNode,c=a.getComputedStyle(b),h=m.getMarginBox(b,c);if("margin"==d)return h;var n=m.getMarginExtents(b,c);h.l+=n.l;h.t+=n.t;h.w-=n.w;h.h-=n.h;if("border"==d)return h;n=m.getBorderExtents(b,c);h.l+=n.l;h.t+=n.t;h.w-=n.w;h.h-=n.h;if("padding"==d)return h;n=m.getPadExtents(b,c);h.l+=n.l;h.t+=n.t;h.w-=n.w;h.h-=n.h;return h}}});return{constrainedMoveable:b,boxConstrainedMoveable:d,parentConstrainedMoveable:g}})},
"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(g,m,a,b){var d=a.getObject("dojo.dnd",!0);d.getCopyKeyState=function(a){return a[g("mac")?"metaKey":"ctrlKey"]};d._uniqueId=0;d.getUniqueId=function(){var a;do a=m._scopeName+"Unique"+ ++d._uniqueId;while(b.byId(a));return a};d._empty={};d.isFormElement=function(a){a=a.target;3==a.nodeType&&(a=a.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+a.tagName.toLowerCase()+" ")};
return d})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u){return m("dojo.dnd.Mover",[f],{constructor:function(b,d,f){function h(a){a.preventDefault();a.stopPropagation()}this.node=c.byId(b);this.marginBox={l:d.pageX,t:d.pageY};this.mouseButton=d.button;d=this.host=f;b=b.ownerDocument;this.events=[e(b,p.move,
a.hitch(this,"onFirstMove")),e(b,p.move,a.hitch(this,"onMouseMove")),e(b,p.release,a.hitch(this,"onMouseUp")),e(b,"dragstart",h),e(b.body,"selectstart",h)];u.autoScrollStart(b);if(d&&d.onMoveStart)d.onMoveStart(this)},onMouseMove:function(a){u.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(b("webkit")&&b("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();
a.stopPropagation()},onFirstMove:function(a){var b=this.node.style,c,e=this.host;switch(b.position){case "relative":case "absolute":c=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=h.getMarginBox(this.node);c=d.doc.body;var f=n.getComputedStyle(c),p=h.getMarginBox(c,f),f=h.getContentBox(c,f);c=b.l-(f.l-p.l);b=b.t-(f.t-p.t)}this.marginBox.l=c-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(e&&e.onFirstMove)e.onFirstMove(this,a);this.events.shift().remove()},
destroy:function(){g.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(g,m,a,b,d,c){var h={};g.setObject("dojo.dnd.autoscroll",h);h.getViewport=c.getBox;h.V_TRIGGER_AUTOSCROLL=32;h.H_TRIGGER_AUTOSCROLL=32;h.V_AUTOSCROLL_VALUE=16;h.H_AUTOSCROLL_VALUE=16;var n,f=a.doc,e=
Infinity,p=Infinity;h.autoScrollStart=function(b){f=b;n=c.getBox(f);b=a.body(f).parentNode;e=Math.max(b.scrollHeight-n.h,0);p=Math.max(b.scrollWidth-n.w,0)};h.autoScroll=function(b){var d=n||c.getBox(f),g=a.body(f).parentNode,m=0,v=0;b.clientX<h.H_TRIGGER_AUTOSCROLL?m=-h.H_AUTOSCROLL_VALUE:b.clientX>d.w-h.H_TRIGGER_AUTOSCROLL&&(m=Math.min(h.H_AUTOSCROLL_VALUE,p-g.scrollLeft));b.clientY<h.V_TRIGGER_AUTOSCROLL?v=-h.V_AUTOSCROLL_VALUE:b.clientY>d.h-h.V_TRIGGER_AUTOSCROLL&&(v=Math.min(h.V_AUTOSCROLL_VALUE,
e-g.scrollTop));window.scrollBy(m,v)};h._validNodes={div:1,p:1,td:1};h._validOverflow={auto:1,scroll:1};h.autoScrollNodes=function(c){for(var e,f,p,n,g,B,A=0,C=0,z=c.target;z;){if(1==z.nodeType&&z.tagName.toLowerCase()in h._validNodes){p=d.getComputedStyle(z);n=p.overflow.toLowerCase()in h._validOverflow;g=p.overflowX.toLowerCase()in h._validOverflow;B=p.overflowY.toLowerCase()in h._validOverflow;if(n||g||B)e=b.getContentBox(z,p),f=b.position(z,!0);if(n||g){p=Math.min(h.H_TRIGGER_AUTOSCROLL,e.w/2);
g=c.pageX-f.x;if(m("webkit")||m("opera"))g+=a.body().scrollLeft;A=0;0<g&&g<e.w&&(g<p?A=-p:g>e.w-p&&(A=p),z.scrollLeft+=A)}if(n||B){n=Math.min(h.V_TRIGGER_AUTOSCROLL,e.h/2);B=c.pageY-f.y;if(m("webkit")||m("opera"))B+=a.body().scrollTop;C=0;0<B&&B<e.h&&(B<n?C=-n:B>e.h-n&&(C=n),z.scrollTop+=C)}if(A||C)return}try{z=z.parentNode}catch(F){z=null}}h.autoScroll(c)};return h})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s){return m("dojo.dnd.Moveable",[c],{handle:"",delay:0,skip:!1,constructor:function(c,d){this.node=b.byId(c);d||(d={});this.handle=d.handle?b.byId(d.handle):null;this.handle||(this.handle=this.node);this.delay=0<d.delay?d.delay:0;this.skip=d.skip;this.mover=d.mover?d.mover:p;this.events=[h(this.handle,f.press,a.hitch(this,"onMouseDown")),h(this.handle,"dragstart",a.hitch(this,"onSelectStart")),h(this.handle,"selectstart",a.hitch(this,"onSelectStart"))]},markupFactory:function(a,
b,c){return new c(b,a)},destroy:function(){g.forEach(this.events,function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(b){if(!this.skip||!e.isFormElement(b)){if(this.delay)this.events.push(h(this.handle,f.move,a.hitch(this,"onMouseMove")),h(this.handle.ownerDocument,f.release,a.hitch(this,"onMouseUp"))),this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);b.stopPropagation();b.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>
this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(a){if(!this.skip||!e.isFormElement(a))a.stopPropagation(),a.preventDefault()},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){n.publish("/dnd/move/start",a);d.add(s.body(),"dojoMove");d.add(this.node,
"dojoMoveItem")},onMoveStop:function(a){n.publish("/dnd/move/stop",a);d.remove(s.body(),"dojoMove");d.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(g,m,a,b,d){var c={};g.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),
function(a){c[a]=b[a]});a.mixin(c,{defaultDuration:m.defaultDuration||200});a.mixin(d,c);return d})},"dijit/typematic":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),function(g,m,a,b,d,c){var h=c.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*
this._subsequentDelay),this._minDelay);this._timer=setTimeout(a.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(b,c,d,h,g,m,t,w){if(g!=this._obj){this.stop();this._initialDelay=t||500;this._subsequentDelay=m||0.9;this._minDelay=w||10;this._obj=g;this._node=d;this._count=this._currentTimeout=-1;this._callback=a.hitch(c,h);this._evt={faux:!0};for(var v in b)"layerX"!=v&&"layerY"!=v&&(c=b[v],"function"!=typeof c&&"undefined"!=typeof c&&(this._evt[v]=c));this._fireEventAndReload()}},
stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null);this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(c,d,e,p,s,u,t){var w="keyCode"in d?"keyCode":"charCode"in d?"charCode":"charOrCode",v=[b(c,"keyCode"in d?"keydown":"charCode"in d?"keypress":m._keypress,a.hitch(this,function(a){a[w]==d[w]&&(void 0===d.ctrlKey||d.ctrlKey==a.ctrlKey)&&(void 0===d.altKey||d.altKey==a.altKey)&&(void 0===d.metaKey||d.metaKey==(a.metaKey||!1))&&(void 0===
d.shiftKey||d.shiftKey==a.shiftKey)?(a.stopPropagation(),a.preventDefault(),h.trigger(a,e,c,p,d,s,u,t)):h._obj==d&&h.stop()})),b(c,"keyup",a.hitch(this,function(){h._obj==d&&h.stop()}))];return{remove:function(){g.forEach(v,function(a){a.remove()})}}},addMouseListener:function(c,f,e,p,m,u){var t=[b(c,"mousedown",a.hitch(this,function(a){a.preventDefault();h.trigger(a,f,c,e,c,p,m,u)})),b(c,"mouseup",a.hitch(this,function(a){this._obj&&a.preventDefault();h.stop()})),b(c,"mouseout",a.hitch(this,function(a){this._obj&&
a.preventDefault();h.stop()})),b(c,"dblclick",a.hitch(this,function(b){b.preventDefault();9>d("ie")&&(h.trigger(b,f,c,e,c,p,m,u),setTimeout(a.hitch(this,h.stop),50))}))];return{remove:function(){g.forEach(t,function(a){a.remove()})}}},addListener:function(a,b,c,d,h,m,t,w){var v=[this.addKeyListener(b,c,d,h,m,t,w),this.addMouseListener(a,d,h,m,t,w)];return{remove:function(){g.forEach(v,function(a){a.remove()})}}}};return h})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),
function(g,m,a,b,d,c,h,n,f,e){b("dijit-legacy-requires")&&h(0,function(){g(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});h=m("dijit.form.Button"+(b("dojo-bidi")?"_NoBidi":""),[n,f],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:e,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);
this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=c.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(b){this.containerNode&&a.toggle(this.containerNode,"dijitDisplayNone",!b);this._set("showLabel",b)},setLabel:function(a){d.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);!this.showLabel&&
!("title"in this.params)&&(this.titleNode.title=c.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});b("dojo-bidi")&&(h=m("dijit.form.Button",h,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return h})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),
function(g,m,a,b,d,c,h,n){m("dijit-legacy-requires")&&b(0,function(){require(["dijit/form/_FormValueWidget"])});return g("dijit.form._FormWidget",[d,h,c,n],{setDisabled:function(b){a.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",b)},setValue:function(b){a.deprecated("dijit.form._FormWidget:setValue("+b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){a.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!m("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s){m=
m("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);g.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,c.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes||{})this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function a(c){b=b.concat(g.map(b,function(a){return a+c}),"dijit"+c)}var b=this.baseClass.split(" ");
this.isLeftToRight()||a("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(c);this.state&&a(this.state);this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var c=this.stateNode||this.domNode,d={};g.forEach(c.className.split(" "),function(a){d[a]=!0});"_stateClasses"in this&&g.forEach(this._stateClasses,function(a){delete d[a]});g.forEach(b,
function(a){d[a]=!0});var e=[],f;for(f in d)e.push(f);c.className=e.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(a,c,d){function e(d){b.toggle(a,c+"Active",d)}if(!this.disabled&&!this.readOnly)switch(d.type){case "mouseover":case "MSPointerOver":case "pointerover":b.toggle(a,c+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":b.toggle(a,c+"Hover",!1);e(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":e(!0);
break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":e(!1);break;case "focus":case "focusin":b.toggle(a,c+"Focused",!0);break;case "blur":case "focusout":b.toggle(a,c+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});n(function(){function b(c,d,e){if(!e||!a.isDescendant(e,d))for(;d&&d!=e;d=d.parentNode)if(d._cssState){var f=s.getEnclosingWidget(d);f&&(d==f.domNode?f._cssMouseEvent(c):f._subnodeCssMouseEvent(d,d._cssState,c))}}var c=e.body(),d;h(c,
f.over,function(a){b(a,a.target,a.relatedTarget)});h(c,f.out,function(a){b(a,a.target,a.relatedTarget)});h(c,p.press,function(a){d=a.target;b(a,d)});h(c,p.release,function(a){b(a,d);d=null});h(c,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=s.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return m})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),
function(g,m,a,b,d,c,h,n,f,e){return m("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",b);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?a.set(this.focusNode,"disabled",b):this.focusNode.setAttribute("aria-disabled",b?"true":"false");this.valueNode&&
a.set(this.valueNode,"disabled",b);b?(this._set("hovering",!1),this._set("active",!1),b="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",g.forEach(d.isArray(b)?b:[b],function(a){a=this[a];n("webkit")||e.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var b=this.own(h(this.focusNode,
"focus",function(){e.remove();b.remove()}))[0],c=n("pointer-events")?"pointerup":n("MSPointer")?"MSPointerUp":n("touch-events")?"touchend, mouseup":"mouseup",e=this.own(h(this.ownerDocumentBody,c,d.hitch(this,function(a){e.remove();b.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){f.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=b.get(this.domNode,
"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){if(void 0==this._lastValueReported&&(null===b||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,
this._lastValueReported);if((this.intermediateChanges||b||void 0===b)&&this._pendingOnChange)this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)}))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},
"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(g,m,a,b){var d=g("dijit.form._ButtonMixin"+(a("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(a){a.stopPropagation();a.preventDefault();this.disabled||this.valueNode.click(a);return!1},_onClick:function(a){if(this.disabled)return a.stopPropagation(),a.preventDefault(),!1;!1===this.onClick(a)&&a.preventDefault();var d=a.defaultPrevented;if(!d&&"submit"==this.type&&
!(this.valueNode||this.focusNode).form)for(var n=this.domNode;n.parentNode;n=n.parentNode){var f=b.byNode(n);if(f&&"function"==typeof f._onSubmit){f._onSubmit(a);a.preventDefault();d=!0;break}}return!d},postCreate:function(){this.inherited(arguments);m.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(a){this._set("label",a);(this.containerNode||this.focusNode).innerHTML=a;this.onLabelSet()},onLabelSet:function(){}});a("dojo-bidi")&&(d=g("dijit.form._ButtonMixin",
d,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return d})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(g,m,a,b){return g("dijit.form._FormValueWidget",[a,b],{_layoutHackIE7:function(){if(7==m("ie"))for(var a=this.domNode,b=a.parentNode,h=a.firstChild||a,n=h.style.filter,f=this;b&&0==b.clientHeight;)(function(){var a=f.connect(b,"onscroll",function(){f.disconnect(a);
h.style.filter=(new Date).getMilliseconds();f.defer(function(){h.style.filter=n})})})(),b=b.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "),function(g,m,a,b,d,c){return g("dijit.form._FormValueMixin",c,{readOnly:!1,_setReadOnlyAttr:function(a){m.set(this.focusNode,"readOnly",a);this._set("readOnly",a)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=
this._resetValue=this.value)},_setValueAttr:function(a,b){this._handleOnChange(a,b)},_handleOnChange:function(a,b){this._set("value",a);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(g,m,a,b){return m("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);
this.containerNode||(this.containerNode=this.domNode)},addChild:function(b,c){var h=this.containerNode;if(0<c){for(h=h.firstChild;0<c;)1==h.nodeType&&c--,h=h.nextSibling;h?c="before":(h=this.containerNode,c="last")}a.place(b.domNode,h,c);this._started&&!b._started&&b.startup()},removeChild:function(a){"number"==typeof a&&(a=this.getChildren()[a]);a&&(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(a,b){var h=
this.getChildren(),n=g.indexOf(h,a);return h[n+b]},getIndexOfChild:function(a){return g.indexOf(this.getChildren(),a)}})})},"dijit/form/HorizontalRule":function(){define(["dojo/_base/declare","../_Widget","../_TemplatedMixin"],function(g,m,a){return g("dijit.form.HorizontalRule",[m,a],{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH"\x3e\x3c/div\x3e',count:3,container:"containerNode",ruleStyle:"",_positionPrefix:'\x3cdiv class\x3d"dijitRuleMark dijitRuleMarkH" style\x3d"left:',
_positionSuffix:"%;",_suffix:'"\x3e\x3c/div\x3e',_genHTML:function(a){return this._positionPrefix+a+this._positionSuffix+this.ruleStyle+this._suffix},_isHorizontal:!0,buildRendering:function(){this.inherited(arguments);var a;if(1==this.count)a=this._genHTML(50,0);else{var d,c=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){a=this._genHTML(0,0);for(d=1;d<this.count-1;d++)a+=this._genHTML(c*d,d);a+=this._genHTML(100,this.count-1)}else{a=this._genHTML(100,0);for(d=1;d<this.count-1;d++)a+=
this._genHTML(100-c*d,d);a+=this._genHTML(0,this.count-1)}}this.domNode.innerHTML=a}})})},"dijit/form/HorizontalRuleLabels":function(){define("dojo/_base/declare dojo/has dojo/number dojo/query dojo/_base/lang ./HorizontalRule".split(" "),function(g,m,a,b,d,c){g=g("dijit.form.HorizontalRuleLabels",c,{templateString:'\x3cdiv class\x3d"dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH"\x3e\x3c/div\x3e',labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,
constraints:{pattern:"#%"},_positionPrefix:'\x3cdiv class\x3d"dijitRuleLabelContainer dijitRuleLabelContainerH" style\x3d"left:',_labelPrefix:'"\x3e\x3cdiv class\x3d"dijitRuleLabel dijitRuleLabelH"\x3e',_suffix:"\x3c/div\x3e\x3c/div\x3e",_calcPosition:function(a){return a},_genHTML:function(a,b){var c=this.labels[b];return this._positionPrefix+this._calcPosition(a)+this._positionSuffix+this.labelStyle+this._genDirectionHTML(c)+this._labelPrefix+c+this._suffix},_genDirectionHTML:function(a){return""},
getLabels:function(){var c=this.labels;!c.length&&this.srcNodeRef&&(c=b("\x3e li",this.srcNodeRef).map(function(a){return String(a.innerHTML)}));if(!c.length&&1<this.count)for(var c=[],d=this.minimum,f=(this.maximum-d)/(this.count-1),e=0;e<this.count;e++)c.push(e<this.numericMargin||e>=this.count-this.numericMargin?"":a.format(d,this.constraints)),d+=f;return c},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length}});m("dojo-bidi")&&g.extend({_setTextDirAttr:function(a){this.textDir!=
a&&(this._set("textDir",a),b(".dijitRuleLabelContainer",this.domNode).forEach(d.hitch(this,function(a){a.style.direction=this.getTextDir(a.innerText||a.textContent||"")})))},_genDirectionHTML:function(a){return this.textDir?"direction:"+this.getTextDir(a)+";":""}});return g})},"dojox/timing/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(g){g.experimental("dojox.timing");g.getObject("timing",!0,dojox);dojox.timing.Timer=function(g){this.timer=null;this.isRunning=!1;this.interval=
g;this.onStop=this.onStart=null};g.extend(dojox.timing.Timer,{onTick:function(){},setInterval:function(m){this.isRunning&&window.clearInterval(this.timer);this.interval=m;this.isRunning&&(this.timer=window.setInterval(g.hitch(this,"onTick"),this.interval))},start:function(){if("function"==typeof this.onStart)this.onStart();this.isRunning=!0;this.timer=window.setInterval(g.hitch(this,"onTick"),this.interval)},stop:function(){if("function"==typeof this.onStop)this.onStop();this.isRunning=!1;window.clearInterval(this.timer)}});
return dojox.timing})},"dojox/form/RangeSlider":function(){define(["dojo/_base/kernel","./_RangeSliderMixin","./HorizontalRangeSlider","./VerticalRangeSlider"],function(g,m){g.deprecated("Call require() for HorizontalRangeSlider / VerticalRangeSlider, explicitly rather than 'dojox.form.RangeSlider' itself","","2.0");return m})},"dojox/form/_RangeSliderMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/_base/event dojo/_base/sniff dojo/dom-style dojo/dom-geometry dojo/keys dijit dojo/dnd/Mover dojo/dnd/Moveable dijit/form/_FormValueWidget dijit/focus dojo/fx dojox/fx".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w){var v=function(a,b){return a-b};e=g("dojox.form._RangeSliderMixin",null,{_setTabIndexAttr:["sliderHandle","sliderHandleMax"],value:[0,100],postMixInProperties:function(){this.inherited(arguments);this.value=a.map(this.value,function(a){return parseInt(a,10)})},postCreate:function(){this.inherited(arguments);this.value.sort(v);var a=this,b=g(x,{constructor:function(){this.widget=a}});this._movableMax=new s(this.sliderHandleMax,{mover:b});this.sliderHandle.setAttribute("aria-valuemin",
this.minimum);this.sliderHandle.setAttribute("aria-valuemax",this.maximum);this.sliderHandleMax.setAttribute("aria-valuemin",this.minimum);this.sliderHandleMax.setAttribute("aria-valuemax",this.maximum);b=g(B,{constructor:function(){this.widget=a}});this._movableBar=new s(this.progressBar,{mover:b});this.focusNode.removeAttribute("aria-valuemin");this.focusNode.removeAttribute("aria-valuemax");this.focusNode.removeAttribute("aria-valuenow")},destroy:function(){this.inherited(arguments);this._movableMax.destroy();
this._movableBar.destroy()},_onKeyPress:function(a){if(!this.disabled&&!this.readOnly&&!a.altKey&&!a.ctrlKey){var b=a.target===this.sliderHandleMax,c=a.target===this.progressBar,e=m.delegate(f,this.isLeftToRight()?{PREV_ARROW:f.LEFT_ARROW,NEXT_ARROW:f.RIGHT_ARROW}:{PREV_ARROW:f.RIGHT_ARROW,NEXT_ARROW:f.LEFT_ARROW}),h=0,n=!1;switch(a.keyCode){case e.HOME:this._setValueAttr(this.minimum,!0,b);d.stop(a);return;case e.END:this._setValueAttr(this.maximum,!0,b);d.stop(a);return;case e.PREV_ARROW:case e.DOWN_ARROW:n=
!0;case e.NEXT_ARROW:case e.UP_ARROW:h=1;break;case e.PAGE_DOWN:n=!0;case e.PAGE_UP:h=this.pageIncrement;break;default:this.inherited(arguments);return}n&&(h=-h);h&&(c?this._bumpValue([{change:h,useMaxValue:!1},{change:h,useMaxValue:!0}]):this._bumpValue(h,b),d.stop(a))}},_onHandleClickMax:function(a){!this.disabled&&!this.readOnly&&(c("ie")||t.focus(this.sliderHandleMax),d.stop(a))},_onClkIncBumper:function(){this._setValueAttr(!1===this._descending?this.minimum:this.maximum,!0,!0)},_bumpValue:function(a,
b){var c=m.isArray(a)?[this._getBumpValue(a[0].change,a[0].useMaxValue),this._getBumpValue(a[1].change,a[1].useMaxValue)]:this._getBumpValue(a,b);this._setValueAttr(c,!0,b)},_getBumpValue:function(a,b){var c=b?1:0,d=h.getComputedStyle(this.sliderBarContainer),e=n.getContentBox(this.sliderBarContainer,d),d=this.discreteValues,c=this.value[c];if(1>=d||Infinity==d)d=e[this._pixelCount];d--;c=this.maximum>this.minimum?(c-this.minimum)*d/(this.maximum-this.minimum)+a:0;0>c&&(c=0);c>d&&(c=d);return c*(this.maximum-
this.minimum)/d+this.minimum},_onBarClick:function(a){!this.disabled&&!this.readOnly&&(c("ie")||t.focus(this.progressBar),d.stop(a))},_onRemainingBarClick:function(a){if(!this.disabled&&!this.readOnly){c("ie")||t.focus(this.progressBar);var b=n.position(this.sliderBarContainer,!0),e=n.position(this.progressBar,!0),f=a[this._mousePixelCoord],h=e[this._startingPixelCoord],e=h+e[this._pixelCount],h=this._isReversed()?f<=h:f>=e,f=this._isReversed()?b[this._pixelCount]-f+b[this._startingPixelCoord]:f-
b[this._startingPixelCoord];this._setPixelValue(f,b[this._pixelCount],!0,h);d.stop(a)}},_setPixelValue:function(a,b,c,d){!this.disabled&&!this.readOnly&&(a=this._getValueByPixelValue(a,b),this._setValueAttr(a,c,d))},_getValueByPixelValue:function(a,b){var c=this.discreteValues;if(1>=c||Infinity==c)c=b;c--;var d=Math.round((0>a?0:b<a?b:a)/(b/c));return(this.maximum-this.minimum)*d/c+this.minimum},_setValueAttr:function(a,b,c){var d=m.clone(this.value);m.isArray(a)?d=a:d[c?1:0]=a;this._lastValueReported=
"";this.valueNode.value=a=d;d.sort(v);this.sliderHandle.setAttribute("aria-valuenow",d[0]);this.sliderHandleMax.setAttribute("aria-valuenow",d[1]);u.prototype._setValueAttr.apply(this,arguments);this._printSliderBar(b,c)},_printSliderBar:function(a,c){var d=this.maximum>this.minimum?(this.value[0]-this.minimum)/(this.maximum-this.minimum):0,e=this.maximum>this.minimum?(this.value[1]-this.minimum)/(this.maximum-this.minimum):0,f=d;d>e&&(d=e,e=f);var h=this._isReversed()?100*(1-d):100*d,n=this._isReversed()?
100*(1-e):100*e,p=this._isReversed()?100*(1-e):100*d;if(a&&0<this.slideDuration&&this.progressBar.style[this._progressPixelSize]){if(parseFloat(this.progressBar.style[this._handleOffsetCoord]),f=this.slideDuration/10,0!==f){0>f&&(f=0-f);var g={},m={},s={};g[this._handleOffsetCoord]={start:this.sliderHandle.parentNode.style[this._handleOffsetCoord],end:h,units:"%"};m[this._handleOffsetCoord]={start:this.sliderHandleMax.parentNode.style[this._handleOffsetCoord],end:n,units:"%"};s[this._handleOffsetCoord]=
{start:this.progressBar.style[this._handleOffsetCoord],end:p,units:"%"};s[this._progressPixelSize]={start:this.progressBar.style[this._progressPixelSize],end:100*(e-d),units:"%"};d=b.animateProperty({node:this.sliderHandle.parentNode,duration:f,properties:g});e=b.animateProperty({node:this.sliderHandleMax.parentNode,duration:f,properties:m});f=b.animateProperty({node:this.progressBar,duration:f,properties:s});w.combine([d,e,f]).play()}}else this.sliderHandle.parentNode.style[this._handleOffsetCoord]=
h+"%",this.sliderHandleMax.parentNode.style[this._handleOffsetCoord]=n+"%",this.progressBar.style[this._handleOffsetCoord]=p+"%",this.progressBar.style[this._progressPixelSize]=100*(e-d)+"%"}});var x=g("dijit.form._SliderMoverMax",p,{onMouseMove:function(a){var b=this.widget,c=b._abspos;c||(c=b._abspos=n.position(b.sliderBarContainer,!0),b._setPixelValue_=m.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed());a=a[b._mousePixelCoord]-c[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?c[b._pixelCount]-
a:a,c[b._pixelCount],!1,!0)},destroy:function(a){p.prototype.destroy.apply(this,arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,!0)}}),B=g("dijit.form._SliderBarMover",p,{onMouseMove:function(a){var b=this.widget;if(!b.disabled&&!b.readOnly){var c=b._abspos,d=b._bar,e=b._mouseOffset;c||(c=b._abspos=n.position(b.sliderBarContainer,!0),b._setPixelValue_=m.hitch(b,"_setPixelValue"),b._getValueByPixelValue_=m.hitch(b,"_getValueByPixelValue"),b._isReversed_=b._isReversed());d||(d=b._bar=
n.position(b.progressBar,!0));e||(e=b._mouseOffset=a[b._mousePixelCoord]-d[b._startingPixelCoord]);a=a[b._mousePixelCoord]-c[b._startingPixelCoord]-e;pixelValues=[a,a+d[b._pixelCount]];pixelValues.sort(v);0>=pixelValues[0]&&(pixelValues[0]=0,pixelValues[1]=d[b._pixelCount]);pixelValues[1]>=c[b._pixelCount]&&(pixelValues[1]=c[b._pixelCount],pixelValues[0]=c[b._pixelCount]-d[b._pixelCount]);c=[b._getValueByPixelValue(b._isReversed_?c[b._pixelCount]-pixelValues[0]:pixelValues[0],c[b._pixelCount]),b._getValueByPixelValue(b._isReversed_?
c[b._pixelCount]-pixelValues[1]:pixelValues[1],c[b._pixelCount])];b._setValueAttr(c,!1,!1)}},destroy:function(){p.prototype.destroy.apply(this,arguments);var a=this.widget;a._abspos=null;a._bar=null;a._mouseOffset=null;a._setValueAttr(a.value,!0)}});return e})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(g,m,a,b,d,c,h,n,f,e,p){a.isAsync||e(0,function(){p(["./fx/Toggler"])});
a=a.fx={};e={_fire:function(a,b){this[a]&&this[a].apply(this,b||[]);return this}};var s=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;b.forEach(this._animations,function(a){a&&("undefined"!=typeof a.duration&&(this.duration+=a.duration),a.delay&&(this.duration+=a.delay))},this)};s.prototype=new m;g.extend(s,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();
this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=d.after(this._current,"onAnimate",g.hitch(this,"_onAnimate"),!0),this._onEndCtx=d.after(this._current,"onEnd",g.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(a,b){this._current||(this._current=this._animations[this._index=0]);if(!b&&"playing"==this._current.status())return this;var c=d.after(this._current,"beforeBegin",
g.hitch(this,function(){this._fire("beforeBegin")}),!0),e=d.after(this._current,"onBegin",g.hitch(this,function(a){this._fire("onBegin",arguments)}),!0),f=d.after(this._current,"onPlay",g.hitch(this,function(a){this._fire("onPlay",arguments);c.remove();e.remove();f.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=d.after(this._current,"onAnimate",g.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=d.after(this._current,"onEnd",g.hitch(this,
"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=d.after(this._current,"onPause",g.hitch(this,function(b){this._fire("onPause",arguments);a.remove()}),!0);this._current.pause()}return this},gotoPercent:function(a,c){this.pause();var d=this.duration*a;this._current=null;b.some(this._animations,function(a,b){if(d<=a.duration)return this._current=a,this._index=b,!0;d-=a.duration;return!1},this);this._current&&this._current.gotoPercent(d/
this._current.duration);c&&this.play();return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var b=d.after(this._current,"onStop",g.hitch(this,function(a){this._fire("onStop",arguments);b.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&
this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});g.extend(s,e);a.chain=function(a){return new s(g.isArray(a)?a:Array.prototype.slice.call(a,0))};var u=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=0;b.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);this.duration<b&&(this.duration=b);this._connects.push(d.after(a,"onEnd",g.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new c.Animation({curve:[0,1],duration:this.duration});
var e=this;b.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(a){e._connects.push(d.after(e._pseudoAnimation,a,function(){e._fire(a,arguments)},!0))})};g.extend(u,{_doAction:function(a,c){b.forEach(this._animations,function(b){b[a].apply(b,c)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var c=this._pseudoAnimation;c[a].apply(c,b)},play:function(a,b){this._finished=0;this._doAction("play",
arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,c){var d=this.duration*a;b.forEach(this._animations,function(a){a.gotoPercent(a.duration<d?1:d/a.duration,c)});this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop();
b.forEach(this._connects,function(a){a.remove()})}});g.extend(u,e);a.combine=function(a){return new u(g.isArray(a)?a:Array.prototype.slice.call(a,0))};a.wipeIn=function(a){var b=a.node=h.byId(a.node),e=b.style,f;a=c.animateProperty(g.mixin({properties:{height:{start:function(){f=e.overflow;e.overflow="hidden";if("hidden"==e.visibility||"none"==e.display)return e.height="1px",e.display="",e.visibility="",1;var a=n.get(b,"height");return Math.max(a,1)},end:function(){return b.scrollHeight}}}},a));var p=
function(){e.height="auto";e.overflow=f};d.after(a,"onStop",p,!0);d.after(a,"onEnd",p,!0);return a};a.wipeOut=function(a){var b=(a.node=h.byId(a.node)).style,e;a=c.animateProperty(g.mixin({properties:{height:{end:1}}},a));d.after(a,"beforeBegin",function(){e=b.overflow;b.overflow="hidden";b.display=""},!0);var f=function(){b.overflow=e;b.height="auto";b.display="none"};d.after(a,"onStop",f,!0);d.after(a,"onEnd",f,!0);return a};a.slideTo=function(a){var b=null,e=null,p=function(a){return function(){var c=
n.getComputedStyle(a),d=c.position;b="absolute"==d?a.offsetTop:parseInt(c.top)||0;e="absolute"==d?a.offsetLeft:parseInt(c.left)||0;"absolute"!=d&&"relative"!=d&&(c=f.position(a,!0),b=c.y,e=c.x,a.style.position="absolute",a.style.top=b+"px",a.style.left=e+"px")}}(a.node=h.byId(a.node));p();a=c.animateProperty(g.mixin({properties:{top:a.top||0,left:a.left||0}},a));d.after(a,"beforeBegin",p,!0);return a};return a})},"dojox/fx":function(){define(["./fx/_base"],function(g){return g})},"dojox/fx/_base":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/fx dojo/fx dojo/dom dojo/dom-style dojo/dom-geometry dojo/_base/connect dojo/_base/html".split(" "),
function(g,m,a,b,d,c,h,n,f){g=m.getObject("dojox.fx",!0);m.mixin(g,{anim:a.anim,animateProperty:a.animateProperty,fadeTo:a._fade,fadeIn:a.fadeIn,fadeOut:a.fadeOut,combine:b.combine,chain:b.chain,slideTo:b.slideTo,wipeIn:b.wipeIn,wipeOut:b.wipeOut});g.sizeTo=function(e){var f=e.node=d.byId(e.node),h=e.method||"chain";e.duration||(e.duration=500);"chain"==h&&(e.duration=Math.floor(e.duration/2));var n,g,w,v,x,B=null,A=function(a){return function(){var b=c.getComputedStyle(a),d=b.position,f=b.width,
h=b.height;n="absolute"==d?a.offsetTop:parseInt(b.top)||0;w="absolute"==d?a.offsetLeft:parseInt(b.left)||0;x="auto"==f?0:parseInt(f);B="auto"==h?0:parseInt(h);v=w-Math.floor((e.width-x)/2);g=n-Math.floor((e.height-B)/2);"absolute"!=d&&"relative"!=d&&(b=c.coords(a,!0),n=b.y,w=b.x,a.style.position="absolute",a.style.top=n+"px",a.style.left=w+"px")}}(f),f=a.animateProperty(m.mixin({properties:{height:function(){A();return{end:e.height||0,start:B}},top:function(){return{start:n,end:g}}}},e)),h=a.animateProperty(m.mixin({properties:{width:function(){return{start:x,
end:e.width||0}},left:function(){return{start:w,end:v}}}},e));return b["combine"==e.method?"combine":"chain"]([f,h])};g.slideBy=function(b){var f,g,u=function(a){return function(){var b=c.getComputedStyle(a),d=b.position;f="absolute"==d?a.offsetTop:parseInt(b.top)||0;g="absolute"==d?a.offsetLeft:parseInt(b.left)||0;"absolute"!=d&&"relative"!=d&&(b=h.coords(a,!0),f=b.y,g=b.x,a.style.position="absolute",a.style.top=f+"px",a.style.left=g+"px")}}(b.node=d.byId(b.node));u();b=a.animateProperty(m.mixin({properties:{top:f+
(b.top||0),left:g+(b.left||0)}},b));n.connect(b,"beforeBegin",b,u);return b};g.crossFade=function(c){var h=c.nodes[0]=d.byId(c.nodes[0]),n=f.style(h,"opacity"),g=c.nodes[1]=d.byId(c.nodes[1]);f.style(g,"opacity");return b.combine([a[0==n?"fadeIn":"fadeOut"](m.mixin({node:h},c)),a[0==n?"fadeOut":"fadeIn"](m.mixin({node:g},c))])};g.highlight=function(b){var c=b.node=d.byId(b.node);b.duration=b.duration||400;var h=b.color||"#ffff99",g=f.style(c,"backgroundColor");"rgba(0, 0, 0, 0)"==g&&(g="transparent");
b=a.animateProperty(m.mixin({properties:{backgroundColor:{start:h,end:g}}},b));"transparent"==g&&n.connect(b,"onEnd",b,function(){c.style.backgroundColor=g});return b};g.wipeTo=function(b){b.node=d.byId(b.node);var c=b.node,h=c.style,n=b.width?"width":"height",g={};g[n]={start:function(){h.overflow="hidden";if("hidden"==h.visibility||"none"==h.display)return h[n]="1px",h.display="",h.visibility="",1;var a=f.style(c,n);return Math.max(a,1)},end:b[n]};return a.animateProperty(m.mixin({properties:g},
b))};return g})},"dojox/form/HorizontalRangeSlider":function(){define(["dojo/_base/declare","dojox/form/_RangeSliderMixin","dojo/text!./resources/HorizontalRangeSlider.html","dijit/form/HorizontalSlider"],function(g,m,a,b){return g("dojox.form.HorizontalRangeSlider",[b,m],{templateString:a})})},"dojox/form/VerticalRangeSlider":function(){define(["dojo/_base/declare","dojox/form/_RangeSliderMixin","dojo/text!./resources/VerticalRangeSlider.html","dijit/form/VerticalSlider"],function(g,m,a,b){return g("dojox.form.VerticalRangeSlider",
[b,m],{templateString:a})})},"dijit/form/VerticalSlider":function(){define(["dojo/_base/declare","./HorizontalSlider","dojo/text!./templates/VerticalSlider.html"],function(g,m,a){return g("dijit.form.VerticalSlider",m,{templateString:a,_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_handleOffsetCoord:"top",_progressPixelSize:"height",_descending:!0,_isReversed:function(){return this._descending}})})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),
function(g,m,a,b,d,c){return g([c,d],{_onMap:function(a){var b=this.constructor._onMap,c;if(!b||!b.FINAL)delete this.constructor._onMap,b=this.registerConnectEvents(),b.FINAL=!0;a=a.toLowerCase();b[a]?c=this[b[a].method]:(a=this._onCamelCase(a),this[a]&&(c=a));return c},on:function(a,c){var d=this._onMap(a),e=a.replace(/\-/g,""),p="on"+e in this.domNode;return d||!p?this.inherited(arguments):this.own(b(this.domNode,e,c))[0]},emit:function(a,b,c){var d,p,g,u=a.toLowerCase(),t=this.constructor._onMap||
this.registerConnectEvents();p=this[this._onMap(u)];b=b||{};b.target||(b.target=this);p&&(t&&t[u])&&(this._onObj2Arr(function(){d=Array.prototype.slice.call(arguments)},t[u].argKeys)(b),g=m.mixin({},arguments),g[2]=d,g[0]=t[u].name.replace(/^on/,""));return this.inherited(g||arguments)}})})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u){g=g("dijit.TooltipDialog",[n,p,e,f],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:s,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(c(this.domNode,"keydown",d.hitch(this,"_onKey")))},orient:function(a,b,c){a={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[b+"-"+c];m.replace(this.domNode,a,this._currentOrientClass||"");this._currentOrientClass=a},focus:function(){this._getFocusItems();
h.focus(this._firstFocusItem)},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);var b=a.aroundNodePos;"M"==a.corner.charAt(0)&&"M"==a.aroundCorner.charAt(0)?(this.connectorNode.style.top=b.y+(b.h-this.connectorNode.offsetHeight>>1)-a.y+"px",this.connectorNode.style.left=""):"M"==a.corner.charAt(1)&&"M"==a.aroundCorner.charAt(1)&&(this.connectorNode.style.left=b.x+(b.w-this.connectorNode.offsetWidth>>1)-a.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(a){if(a.keyCode==
b.ESCAPE)this.defer("onCancel"),a.stopPropagation(),a.preventDefault();else if(a.keyCode==b.TAB){var c=a.target;this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):c==this._firstFocusItem&&a.shiftKey?(h.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):c==this._lastFocusItem&&!a.shiftKey?(h.focus(this._firstFocusItem),a.stopPropagation(),a.preventDefault()):a.stopPropagation()}}});a("dojo-bidi")&&g.extend({_setTitleAttr:function(a){this.containerNode.title=
this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,a):a;this._set("title",a)},_setTextDirAttr:function(a){if(!this._created||this.textDir!=a)this._set("textDir",a),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title))}});return g})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v){return f("dijit.layout.ContentPane",[a,b,d],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:g._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,c){var d=new c(a,b);return!d.href&&d._contentSetter&&d._contentSetter.parseDeferred&&!d._contentSetter.parseDeferred.isFulfilled()?d._contentSetter.parseDeferred.then(function(){return d}):d},create:function(a,b){if((!a||!a.template)&&b&&!("href"in a)&&!("content"in a)){b=p.byId(b);for(var c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);
a=m.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=w.getLocalization("dijit","loading",this.lang);this.loadingMessage=c.substitute(this.loadingMessage,a);this.errorMessage=c.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&n.forEach(this._contentSetter.parseResults,
function(a){!a._started&&(!a._destroyed&&m.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},_startChildren:function(){n.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&m.isFunction(a.startup))&&(a.startup(),a._started=!0)});this._contentSetter&&n.forEach(this._contentSetter.parseResults,function(a){!a._started&&(!a._destroyed&&m.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},setHref:function(a){g.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new e(m.hitch(this,"cancel"));this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){g.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new e(m.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new e(m.hitch(this,"cancel"));this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
m.isObject(this.ioArgs)&&m.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||t.get)(b),d;c.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",c)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){}},_onUnloadHandler:function(){this._set("isLoaded",
!1);try{this.onUnload()}catch(a){}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;n.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(n.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||u.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){a=
this.preprocessContent(a);this.destroyDescendants();var c=this._contentSetter;c&&c instanceof h._ContentSetter||(c=this._contentSetter=new h._ContentSetter({node:this.containerNode,_onError:m.hitch(this,this._onError),onContentError:m.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){}})}));var d=m.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,
lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),d=c.set(m.isObject(a)&&a.domNode?a.domNode:a,d),e=this;return v(d&&d.then?d:c.parseDeferred,function(){delete e._contentSetterParams;b||(e._started&&(e._startChildren(),e._scheduleLayout()),e._onLoadHandler(a))})},preprocessContent:function(a){return a},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c||a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},
onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(g,m,a,b,d,c,h,n,f,e){return m("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();
this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(f.on("resize",c.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var b=[],c=!1;h("\x3e *",this.containerNode).some(function(a){var d=n.byNode(a);d&&d.resize?b.push(d):!/script|link|style/i.test(a.nodeName)&&a.offsetHeight&&(c=!0)});this._singleChild=1==b.length&&!c?b[0]:null;a.toggle(this.containerNode,
this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,d){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();a&&b.setMarginBox(this.domNode,a);var f=this.containerNode;if(f===this.domNode){var h=d||{};c.mixin(h,a||{});if(!("h"in h)||!("w"in h))h=c.mixin(b.getMarginBox(f),
h);this._contentBox=e.marginBox2contentBox(f,h)}else this._contentBox=b.getContentBox(f);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||b.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),c,d=0;c=a[d++];)c.resize&&c.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;
if("open"in this)return this.open;var b=this.domNode,c=this.domNode.parentNode;return"none"!=b.style.display&&"hidden"!=b.style.visibility&&!a.contains(b,"dijitHidden")&&c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(g,m,a,b,d){var c=new g,h;a(function(){var a=d.getBox();
c._rlh=m(window,"resize",function(){var b=d.getBox();a.h==b.h&&a.w==b.w||(a=b,c.emit("resize"))});if(8==b("ie")){var f=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=f&&(f=screen.deviceXDPI,c.emit("resize"))},500)}b("ios")&&(m(document,"focusin",function(a){h=a.target}),m(document,"focusout",function(a){h=null}))});c.getEffectiveBox=function(a){a=d.getBox(a);var c=h&&h.tagName&&h.tagName.toLowerCase();if(b("ios")&&h&&!h.readOnly&&("textarea"==c||"input"==c&&/^(color|email|number|password|search|tel|text|url)$/.test(h.type)))a.h*=
0==orientation||180==orientation?0.66:0.4,c=h.getBoundingClientRect(),a.h=Math.max(a.h,c.top+c.height);return a};return c})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(g,m,a,b,d){function c(b,c){var e=b.resize?b.resize(c):a.setMarginBox(b.domNode,c);e?d.mixin(b,e):(d.mixin(b,a.getMarginBox(b.domNode)),d.mixin(b,c))}var h={marginBox2contentBox:function(c,d){var e=b.getComputedStyle(c),h=a.getMarginExtents(c,
e),g=a.getPadBorderExtents(c,e);return{l:b.toPixelValue(c,e.paddingLeft),t:b.toPixelValue(c,e.paddingTop),w:d.w-(h.w+g.w),h:d.h-(h.h+g.h)}},layoutChildren:function(a,b,e,h,s){b=d.mixin({},b);m.add(a,"dijitLayoutContainer");e=g.filter(e,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(g.filter(e,function(a){return"center"==a.region||"client"==a.layoutAlign}));g.forEach(e,function(a){var d=a.domNode,e=a.region||a.layoutAlign;if(!e)throw Error("No region setting for "+a.id);var g=
d.style;g.left=b.l+"px";g.top=b.t+"px";g.position="absolute";m.add(d,"dijitAlign"+(e.substring(0,1).toUpperCase()+e.substring(1)));d={};h&&h==a.id&&(d["top"==a.region||"bottom"==a.region?"h":"w"]=s);"leading"==e&&(e=a.isLeftToRight()?"left":"right");"trailing"==e&&(e=a.isLeftToRight()?"right":"left");"top"==e||"bottom"==e?(d.w=b.w,c(a,d),b.h-=a.h,"top"==e?b.t+=a.h:g.top=b.t+b.h+"px"):"left"==e||"right"==e?(d.h=b.h,c(a,d),b.w-=a.w,"left"==e?b.l+=a.w:g.left=b.l+b.w+"px"):("client"==e||"center"==e)&&
c(a,b)})}};d.setObject("dijit.layout.utils",h);return h})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(g,m,a,b,d,c,h){var n=0,f={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:c.empty,_setNodeContent:function(a,b){c.empty(a);if(b)if("number"==typeof b&&(b=b.toString()),"string"==typeof b&&(b=c.toDom(b,a.ownerDocument)),!b.nodeType&&
m.isArrayLike(b))for(var d=b.length,f=0;f<b.length;f=d==b.length?f+1:0)c.place(b[f],a,"last");else c.place(b,a,"last");return a},_ContentSetter:b("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:g._scopeName,startup:!0,constructor:function(a,b){m.mixin(this,a||{});b=this.node=d.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",n++].join("_"))},set:function(a,b){void 0!==a&&(this.content=a);b&&this._mixin(b);this.onBegin();
this.setContent();var c=this.onEnd();return c&&c.then?c:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=f._setNodeContent(a,this.content)}catch(b){var c=this.onContentError(b);try{a.innerHTML=c}catch(d){}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(a.forEach(this.parseResults,function(a){a.destroy&&
a.destroy()}),delete this.parseResults);c.empty(this.node)},onBegin:function(){var a=this.content;if(m.isString(a)&&(this.cleanContent&&(a=f._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+
a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var b=this.node;try{var c={};a.forEach(["dir","lang","textDir"],function(a){this[a]&&(c[a]=this[a])},this);var d=this;this.parseDeferred=h.parse({rootNode:b,noStart:!this.startup,inherited:c,scope:this.parserScope}).then(function(a){return d.parseResults=a},function(a){d._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(f){this._onError("Content",
f,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,b,c){a=this["on"+a+"Error"].call(this,b);c||a&&f._setNodeContent(this.node,a,!0)}}),set:function(a,b,c){void 0==b&&(b="");"number"==typeof b&&(b=b.toString());return c?(new f._ContentSetter(m.mixin(c,{content:b,node:a}))).set():f._setNodeContent(a,b,!0)}};m.setObject("dojo.html",f);return f})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(g,m){return g("dijit._DialogMixin",null,{actionBarTemplate:"",
execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=m._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(g,m,
a,b,d,c){return m("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(a){var b=[];g.forEach(a||this.getChildren(),function(a){"value"in a?b.push(a):b=b.concat(this._getDescendantFormWidgets(a.getChildren()))},this);return b},reset:function(){g.forEach(this._getDescendantFormWidgets(),function(a){a.reset&&a.reset()})},validate:function(){var a=!1;return g.every(g.map(this._getDescendantFormWidgets(),function(b){b._hasBeenBlurred=!0;var d=b.disabled||!b.validate||b.validate();
!d&&!a&&(c.scrollIntoView(b.containerNode||b.domNode),b.focus(),a=!0);return d}),function(a){return a})},setValues:function(b){a.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",b)},_setValueAttr:function(a){var c={};g.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(c[a.name]||(c[a.name]=[])).push(a)});for(var d in c)if(c.hasOwnProperty(d)){var e=c[d],p=b.getObject(d,!1,a);void 0!==p&&(p=[].concat(p),"boolean"==
typeof e[0].checked?g.forEach(e,function(a){a.set("value",-1!=g.indexOf(p,a._get("value")))}):e[0].multiple?e[0].set("value",p):g.forEach(e,function(a,b){a.set("value",p[b])}))}},getValues:function(){a.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var a={};g.forEach(this._getDescendantFormWidgets(),function(c){var d=c.name;if(d&&!c.disabled){var e=c.get("value");"boolean"==typeof c.checked?/Radio/.test(c.declaredClass)?
!1!==e?b.setObject(d,e,a):(e=b.getObject(d,!1,a),void 0===e&&b.setObject(d,null,a)):(c=b.getObject(d,!1,a),c||(c=[],b.setObject(d,c,a)),!1!==e&&c.push(e)):(c=b.getObject(d,!1,a),"undefined"!=typeof c?b.isArray(c)?c.push(e):b.setObject(d,[c,e],a):b.setObject(d,e,a))}});return a},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var a=g.map(this._descendants,function(a){return a.get("state")||""});return 0<=g.indexOf(a,"Error")?"Error":0<=g.indexOf(a,"Incomplete")?
"Incomplete":""},disconnectChildren:function(){},connectChildren:function(a){this._descendants=this._getDescendantFormWidgets();g.forEach(this._descendants,function(a){a._started||a.startup()});a||this._onChildChange()},_onChildChange:function(a){(!a||"state"==a||"disabled"==a)&&this._set("state",this._getState());if(!a||"value"==a||"disabled"==a||"checked"==a)this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10)},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var a=this;this.own(d(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(b){b.target!=a.domNode&&a._onChildChange(b.type.replace("attrmodified-",""))}));this.watch("state",function(a,b,c){this.onValidStateChange(""==c)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v){function x(){this._popupWrapper&&(c.destroy(this._popupWrapper),delete this._popupWrapper)}a=a(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var a=
this._firstAroundPosition,b=h.position(this._firstAroundNode,!0),c=b.x-a.x,a=b.y-a.y;if(c||a){this._firstAroundPosition=b;for(b=0;b<this._stack.length;b++){var d=this._stack[b].wrapper.style;d.top=parseFloat(d.top)+a+"px";"auto"==d.right?d.left=parseFloat(d.left)+c+"px":d.right=parseFloat(d.right)-c+"px"}}this._aroundMoveListener=setTimeout(p.hitch(this,"_repositionAll"),c||a?10:50)}},_createWrapper:function(a){var b=a._popupWrapper,d=a.domNode;b||(b=c.create("div",{"class":"dijitPopup",style:{display:"none"},
role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),b.appendChild(d),d=d.style,d.display="",d.visibility="",d.position="",d.top="0px",a._popupWrapper=b,m.after(a,"destroy",x,!0),"ontouchend"in document&&s(b,"touchend",function(a){/^(input|button|textarea)$/i.test(a.target.tagName)||a.preventDefault()}),b.dojoClick=!0);return b},moveOffScreen:function(a){var b=this._createWrapper(a);a=h.isBodyLtr(a.ownerDocument);var c={visibility:"hidden",top:"-9999px",display:""};
c[a?"left":"right"]="-9999px";c[a?"right":"left"]="auto";n.set(b,c);return b},hide:function(a){var b=this._createWrapper(a);n.set(b,{display:"none",height:"auto",overflowY:"visible",border:""});a=a.domNode;"_originalStyle"in a&&(a.style.cssText=a._originalStyle)},getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(a){for(var c=this._stack,g=a.popup,m=g.domNode,v=a.orient||["below","below-alt","above","above-alt"],x=a.parent?a.parent.isLeftToRight():
h.isBodyLtr(g.ownerDocument),J=a.around,I=a.around&&a.around.id?a.around.id+"_dropdown":"popup_"+this._idGen++;c.length&&(!a.parent||!b.isDescendant(a.parent.domNode,c[c.length-1].widget.domNode));)this.close(c[c.length-1].widget);var K=this.moveOffScreen(g);g.startup&&!g._started&&g.startup();var M,L=h.position(m);if("maxHeight"in a&&-1!=a.maxHeight)M=a.maxHeight||Infinity;else{M=w.getEffectiveBox(this.ownerDocument);var G=J?h.position(J,!1):{y:a.y-(a.padding||0),h:2*(a.padding||0)};M=Math.floor(Math.max(G.y,
M.h-(G.y+G.h)))}L.h>M&&(L=n.getComputedStyle(m),n.set(K,{overflowY:"scroll",height:M+"px",border:L.borderLeftWidth+" "+L.borderLeftStyle+" "+L.borderLeftColor}),m._originalStyle=m.style.cssText,m.style.border="none");d.set(K,{id:I,style:{zIndex:this._beginZIndex+c.length},"class":"dijitPopup "+(g.baseClass||g["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:a.parent?a.parent.id:""});0==c.length&&J&&(this._firstAroundNode=J,this._firstAroundPosition=h.position(J,!0),this._aroundMoveListener=setTimeout(p.hitch(this,
"_repositionAll"),50));f("config-bgIframe")&&!g.bgIframe&&(g.bgIframe=new t(K));I=g.orient?p.hitch(g,"orient"):null;v=J?u.around(K,J,v,x,I):u.at(K,a,"R"==v?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],a.padding,I);K.style.visibility="visible";m.style.visibility="visible";m=[];m.push(s(K,"keydown",p.hitch(this,function(b){if(b.keyCode==e.ESCAPE&&a.onCancel)b.stopPropagation(),b.preventDefault(),a.onCancel();else if(b.keyCode==e.TAB&&(b.stopPropagation(),b.preventDefault(),(b=this.getTopPopup())&&b.onCancel))b.onCancel()})));
g.onCancel&&a.onCancel&&m.push(g.on("cancel",a.onCancel));m.push(g.on(g.onExecute?"execute":"change",p.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));c.push({widget:g,wrapper:K,parent:a.parent,onExecute:a.onExecute,onCancel:a.onCancel,onClose:a.onClose,handlers:m});if(g.onOpen)g.onOpen(v);return v},close:function(a){for(var b=this._stack;a&&g.some(b,function(b){return b.widget==a})||!a&&b.length;){var c=b.pop(),d=c.widget,e=c.onClose;d.bgIframe&&(d.bgIframe.destroy(),
delete d.bgIframe);if(d.onClose)d.onClose();for(var f;f=c.handlers.pop();)f.remove();d&&d.domNode&&this.hide(d);e&&e()}0==b.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return v.popup=new a})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(g,m,a,b,d,c,h){function n(b,f,h,n){var t=
c.getEffectiveBox(b.ownerDocument);(!b.parentNode||"body"!=String(b.parentNode.tagName).toLowerCase())&&d.body(b.ownerDocument).appendChild(b);var w=null;g.some(f,function(a){var c=a.corner,d=a.pos,f=0,g={w:{L:t.l+t.w-d.x,R:d.x-t.l,M:t.w}[c.charAt(1)],h:{T:t.t+t.h-d.y,B:d.y-t.t,M:t.h}[c.charAt(0)]},p=b.style;p.left=p.right="auto";h&&(f=h(b,a.aroundCorner,c,g,n),f="undefined"==typeof f?0:f);var v=b.style,x=v.display,K=v.visibility;"none"==v.display&&(v.visibility="hidden",v.display="");p=m.position(b);
v.display=x;v.visibility=K;x={L:d.x,R:d.x-p.w,M:Math.max(t.l,Math.min(t.l+t.w,d.x+(p.w>>1))-p.w)}[c.charAt(1)];K={T:d.y,B:d.y-p.h,M:Math.max(t.t,Math.min(t.t+t.h,d.y+(p.h>>1))-p.h)}[c.charAt(0)];d=Math.max(t.l,x);v=Math.max(t.t,K);x=Math.min(t.l+t.w,x+p.w);K=Math.min(t.t+t.h,K+p.h);x-=d;K-=v;f+=p.w-x+(p.h-K);if(null==w||f<w.overflow)w={corner:c,aroundCorner:a.aroundCorner,x:d,y:v,w:x,h:K,overflow:f,spaceAvailable:g};return!f});w.overflow&&h&&h(b,w.aroundCorner,w.corner,w.spaceAvailable,n);f=w.y;var v=
w.x,x=d.body(b.ownerDocument);/relative|absolute/.test(a.get(x,"position"))&&(f-=a.get(x,"marginTop"),v-=a.get(x,"marginLeft"));x=b.style;x.top=f+"px";x.left=v+"px";x.right="auto";return w}var f={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return h.place={at:function(a,b,c,d,h){c=g.map(c,function(a){var c={corner:a,aroundCorner:f[a],pos:{x:b.x,y:b.y}};d&&(c.pos.x+="L"==a.charAt(1)?d.x:-d.x,c.pos.y+="T"==a.charAt(0)?d.y:-d.y);return c});return n(a,c,h)},around:function(c,d,f,h,t){function w(a,b){K.push({aroundCorner:a,
corner:b,pos:{x:{L:F,R:F+J,M:F+(J>>1)}[a.charAt(1)],y:{T:H,B:H+I,M:H+(I>>1)}[a.charAt(0)]}})}var v;if("string"==typeof d||"offsetWidth"in d||"ownerSVGElement"in d){if(v=m.position(d,!0),/^(above|below)/.test(f[0])){var x=m.getBorderExtents(d),B=d.firstChild?m.getBorderExtents(d.firstChild):{t:0,l:0,b:0,r:0},A=m.getBorderExtents(c),C=c.firstChild?m.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0};v.y+=Math.min(x.t+B.t,A.t+C.t);v.h-=Math.min(x.t+B.t,A.t+C.t)+Math.min(x.b+B.b,A.b+C.b)}}else v=d;if(d.parentNode){x=
"absolute"==a.getComputedStyle(d).position;for(d=d.parentNode;d&&1==d.nodeType&&"BODY"!=d.nodeName;){B=m.position(d,!0);A=a.getComputedStyle(d);/relative|absolute/.test(A.position)&&(x=!1);if(!x&&/hidden|auto|scroll/.test(A.overflow)){var C=Math.min(v.y+v.h,B.y+B.h),z=Math.min(v.x+v.w,B.x+B.w);v.x=Math.max(v.x,B.x);v.y=Math.max(v.y,B.y);v.h=C-v.y;v.w=z-v.x}"absolute"==A.position&&(x=!0);d=d.parentNode}}var F=v.x,H=v.y,J="w"in v?v.w:v.w=v.width,I="h"in v?v.h:(b.deprecated("place.around: dijit/place.__Rectangle: { x:"+
F+", y:"+H+", height:"+v.height+", width:"+J+" } has been deprecated.  Please use { x:"+F+", y:"+H+", h:"+v.height+", w:"+J+" }","","2.0"),v.h=v.height),K=[];g.forEach(f,function(a){var b=h;switch(a){case "above-centered":w("TM","BM");break;case "below-centered":w("BM","TM");break;case "after-centered":b=!b;case "before-centered":w(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":w(b?"TL":"TR",b?"TR":"TL");w(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":w(b?"BL":
"BR",b?"TL":"TR");w(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":w(b?"TL":"TR",b?"BL":"BR");w(b?"TR":"TL",b?"BR":"BL");break;default:w(a.aroundCorner,a.corner)}});c=n(c,K,t,{w:J,h:I});c.aroundNodePos=v;return c}}})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(g,m,a,b,d,c,h,n){n.add("config-bgIframe",n("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||n("trident")&&
/Windows NT 6.[01]/.test(navigator.userAgent));var f=new function(){var c=[];this.pop=function(){var f;c.length?(f=c.pop(),f.style.display=""):(9>n("ie")?(f="\x3ciframe src\x3d'"+(a.dojoBlankHtmlUrl||g.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e",f=document.createElement(f)):(f=b.create("iframe"),f.src='javascript:""',f.className="dijitBackgroundIframe",f.setAttribute("role",
"presentation"),d.set(f,"opacity",0.1)),f.tabIndex=-1);return f};this.push=function(a){a.style.display="none";c.push(a)}};m.BackgroundIframe=function(a){if(!a.id)throw Error("no id");if(n("config-bgIframe")){var b=this.iframe=f.pop();a.appendChild(b);7>n("ie")||n("quirks")?(this.resize(a),this._conn=h(a,"resize",c.hitch(this,"resize",a))):d.set(b,{width:"100%",height:"100%"})}};c.extend(m.BackgroundIframe,{resize:function(a){this.iframe&&d.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+
"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),f.push(this.iframe),delete this.iframe)}});return m.BackgroundIframe})},"esri/layers/LayerDrawingOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../renderers/jsonUtils ./LabelClass".split(" "),function(g,m,a,b,d,c,h,n){return g(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(b){if(b&&
(m.mixin(this,b),b.renderer&&(this.renderer=h.fromJson(b.renderer)),b.labelingInfo&&0<b.labelingInfo.length)){this.labelingInfo=[];var c;a.forEach(b.labelingInfo,function(a){c=new n(a);this.labelingInfo.push(c)},this)}},toJson:function(){var b={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};this.labelingInfo&&0<this.labelingInfo.length&&(b.labelingInfo=[],a.forEach(this.labelingInfo,function(a){b.labelingInfo.push(a.toJson())}));
return c.fixJson(b)}})})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A){return g([u,t],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",
_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(a,b,c){a=b&&b.imageParameters;var d=m.hitch;if(a){var e=a.layerDefinitions;e&&this.setLayerDefinitions(e);a.layerOption===x.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(a.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=d(this,this._setIsPNG32);this.dpi=a&&a.dpi||96;this.imageFormat=a&&a.format||"png8";this.imageTransparency=a&&!1===a.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=b&&b.gdbVersion;
this._params.gdbVersion=this.gdbVersion;m.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},a?a.toJson():{});this.getImageUrl=d(this,this.getImageUrl);this._initLayer=d(this,this._initLayer);this._load=d(this,this._load);this.useMapImage=b?b.useMapImage:!1;this._loadCallback=b&&b.loadCallback;(b=b&&b.resourceInfo)?this._initLayer(b):(void 0===c||!1===c)&&this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,
_initLayer:function(a,b){this.inherited(arguments);a.timeInfo&&(this.timeInfo=new w(a.timeInfo));this.loaded=!0;this.onLoad(this);var c=this._loadCallback;c&&(delete this._loadCallback,c(this))},getImageUrl:function(a,d,h,g){var p=this._url.path+"/export?",s=this._params,u=a.spatialReference.wkid||b.toJson(a.spatialReference.toJson()),t=this._errorHandler;delete s._ts;m.mixin(s,{bbox:a.xmin+","+a.ymin+","+a.xmax+","+a.ymax,bboxSR:u,imageSR:u,size:d+","+h},this.disableClientCaching?{_ts:(new Date).getTime()}:
{});s.layerDefs&&(a=s.layerDefs,delete s.layerDefs,m.mixin(s,{layerDefs:a}));var v=s.token=this._getToken();a=e.addProxy(p+c.objectToQuery(m.mixin({},s,{f:"image"})));a.length>n.defaults.io.postLength||this.useMapImage?this._jsonRequest=f({url:p,content:m.mixin(s,{f:"json"}),callbackParamName:"callback",load:function(a){a=a.href;v&&(a+=-1===a.indexOf("?")?"?token\x3d"+v:"\x26token\x3d"+v);g(e.addProxy(a))},error:t}):g(a)},_setIsPNG32:function(){var a=this.imageFormat.toLowerCase(),b=d("ie");this.isPNG32=
b&&6===b&&("png32"===a||"png24"===a)&&this.imageTransparency},_setTime:function(b){var c=this.timeInfo;b=this._params.time=b?b.toJson().join(","):null;if(10.02>this.version&&c)if(b)this._params.layerTimeOptions=p._serializeTimeOptions(this.layerTimeOptions);else{var d=this.layerInfos;if(d){var e=this.layerTimeOptions,f=e?e.slice(0):[],h=[];a.forEach(d,function(a){a.subLayerIds||h.push(a.id)});h.length&&(a.forEach(h,function(a){if(!f[a]){var b=new v;b.useTime=!1;f[a]=b}}),this._params.layerTimeOptions=
p._serializeTimeOptions(f,h))}}10.02<=this.version&&c&&(!b&&!c.hasLiveData)&&(this._params.time="null,null")},setDPI:function(a,b){this.dpi=this._params.dpi=a;b||this.refresh(!0)},setImageFormat:function(a,b){this.imageFormat=this._params.format=a;this._setIsPNG32();b||this.refresh(!0)},setImageTransparency:function(a,b){this.imageTransparency=this._params.transparent=a;this._setIsPNG32();b||this.refresh(!0)},setVisibleLayers:function(a,b){this.visibleLayers=a;this._params.layers=x.LAYER_OPTION_SHOW+
":"+(a.length?a.join():"-1");this._updateDynamicLayers();b||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(a){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;this._updateDynamicLayers();a||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(a,b){this.layerDefinitions=a;this._params.layerDefs=p._serializeLayerDefinitions(a);this._updateDynamicLayers();
b||this.refresh(!0)},setDefaultLayerDefinitions:function(a){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();a||this.refresh(!0)},setDisableClientCaching:function(a){this.disableClientCaching=a},setLayerTimeOptions:function(a,b){this.layerTimeOptions=a;this._params.layerTimeOptions=p._serializeTimeOptions(a);this._updateDynamicLayers();b||this.refresh(!0)},refresh:function(a){if(a)this.inherited(arguments);else{var b=this.disableClientCaching;this.disableClientCaching=
!0;this.inherited(arguments);this.disableClientCaching=b}},setLayerDrawingOptions:function(a,b){this.layerDrawingOptions=a;this._updateDynamicLayers();b||this.refresh(!0)},setDynamicLayerInfos:function(a,b){a&&0<a.length?(this.dynamicLayerInfos=a,this.visibleLayers=p._getDefaultVisibleLayers(a),this.onVisibleLayersChange(this.visibleLayers)):this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();b||this.refresh(!0)},createDynamicLayerInfosFromLayerInfos:function(){var b=
[],c;a.forEach(this.layerInfos,function(a){c=new B(a.toJson());c.source=new A({mapLayerId:a.id});b.push(c)});return b},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){if(!this.dynamicLayerInfos||0===this.dynamicLayerInfos.length)this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos();var c;c=this.dynamicLayerInfos;var d=[],e=this._map&&s.getScale(this._map),
f=this.visibleLayers,h=e?p._getLayersForScale(e,c):f;a.forEach(c,function(b){if(!b.subLayerIds){var c,e=b.id;if(-1!==a.indexOf(f,e)&&-1!==a.indexOf(h,e)){c={id:e,name:b.name};c.source=b.source&&b.source.toJson();var g;this.layerDefinitions&&this.layerDefinitions[e]&&(g=this.layerDefinitions[e]);g&&(c.definitionExpression=g);var n;this.layerDrawingOptions&&this.layerDrawingOptions[e]&&(n=this.layerDrawingOptions[e]);n&&(c.drawingInfo=n.toJson());var p;this.layerTimeOptions&&this.layerTimeOptions[e]&&
(p=this.layerTimeOptions[e]);p&&(c.layerTimeOptions=p.toJson());c.minScale=b.minScale||0;c.maxScale=b.maxScale||0;d.push(c)}}},this);c=b.toJson(d);if(!this._params.dynamicLayers||this._params.dynamicLayers.length!==c.length||this._params.dynamicLayers!==c)this._params.dynamicLayers=c,this._onDynamicLayersChange(this._params.dynamicLayers)}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):this._params.dynamicLayers=null},_onExtentChangeHandler:function(a,
b,c){c&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(a,b,c){this._map=a;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(a,b){this.gdbVersion=a;this._params.gdbVersion=a;this.onGDBVersionChange();b||this.refresh(!0)},exportMapImage:function(a,b){var c=n.defaults.map,c=m.mixin({size:c.width+","+c.height},this._params,a?a.toJson(this.normalization):{},{f:"json"});delete c._ts;if(c.layerDefs){var d=c.layerDefs;
delete c.layerDefs;m.mixin(c,{layerDefs:d})}this._exportMapImage(this._url.path+"/export",c,b)}})})},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(g,m,a,b,d){return{_serializeLayerDefinitions:function(b){var d=[],g=!1,f=/[:;]/;if(b&&(m.forEach(b,function(a,b){a&&(d.push([b,a]),!g&&f.test(a)&&(g=!0))}),0<d.length)){var e;g?(e={},m.forEach(d,function(a){e[a[0]]=a[1]}),e=a.toJson(e)):(e=[],m.forEach(d,function(a){e.push(a[0]+
":"+a[1])}),e=e.join(";"));return e}return null},_serializeTimeOptions:function(b,d){if(b){var g=[];m.forEach(b,function(b,c){if(b){var p=b.toJson();d&&-1!==m.indexOf(d,c)&&(p.useTime=!1);g.push('"'+c+'":'+a.toJson(p))}});if(g.length)return"{"+g.join(",")+"}"}},_getVisibleLayers:function(a,b){var d=[],f,e,g;if(!a)return d;if(b){d=b.concat();for(g=0;g<a.length;g++)f=a[g],e=m.indexOf(a,f.id),f.subLayerIds&&-1<e&&(d.splice(e,1),d=d.concat(f.subLayerIds))}else d=this._getDefaultVisibleLayers(a);return d},
_getDefaultVisibleLayers:function(a){var b=[],d;if(!a)return b;for(d=0;d<a.length;d++)0<=a[d].parentLayerId&&-1===m.indexOf(b,a[d].parentLayerId)&&m.some(a,function(b){return b.id===a[d].parentLayerId})||a[d].defaultVisibility&&b.push(a[d].id);return b},_getLayersForScale:function(a,b){var d=[];if(0<a&&b){var f;for(f=0;f<b.length;f++)if(!(0<=b[f].parentLayerId&&-1===m.indexOf(d,b[f].parentLayerId)&&m.some(b,function(a){return a.id===b[f].parentLayerId}))&&0<=b[f].id){var e=!0,g=b[f].maxScale,s=b[f].minScale;
if(0<g||0<s)0<g&&0<s?e=g<=a&&a<=s:0<g?e=g<=a:0<s&&(e=a<=s);e&&d.push(b[f].id)}}return d}}})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u){var t=n.defaults.map.zoomDuration;return g(s,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},
constructor:function(b,c){this.useMapTime=c&&c.hasOwnProperty("useMapTime")?!!c.useMapTime:!0;this.extentProcessor=c&&c.extentProcessor;var d=a.hitch;this._exportMapImageHandler=d(this,this._exportMapImageHandler);this._imgSrcFunc=d(this,this._imgSrcFunc);this._divAlphaImageFunc=d(this,this._divAlphaImageFunc);this._tileLoadHandler=d(this,this._tileLoadHandler);this._tileErrorHandler=d(this,this._tileErrorHandler);this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(a,c,e){this.inherited(arguments);
this._map=a;var g=this._div=b.create("div",null,c),n=h._css.names,p={position:"absolute",width:a.width+"px",height:a.height+"px",overflow:"visible",opacity:this.opacity},s=f("ie"),u=m.connect,t=a.__visibleDelta;8===s&&delete p.opacity;"css-transforms"===a.navigationMode?(this._isChildLayer||(p[n.transform]=h._css.translate(t.x,t.y),d.set(g,p)),this._left=t.x,this._top=t.y):(p.left="0px",p.top="0px",d.set(g,p),this._left=this._top=0);d.set(g,p);this._onResizeHandler_connect=u(a,"onResize",this,"_onResizeHandler");
this._opacityChangeHandler_connect=u(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!a.loaded)var J=m.connect(a,"onLoad",this,function(){m.disconnect(J);J=null;this.evaluateSuspension()});this.extentProcessor&&(this._panEndEvalHandle=m.connect(a,"onPanEnd",this,this.evaluateSuspension),this._zoomEndEvalHandle=m.connect(a,"onZoomEnd",this,this.evaluateSuspension));return g},_unsetMap:function(a,c){this._img&&
this._clearEventListeners(this._img);this._img_loading&&this._clearEventListeners(this._img_loading);b.destroy(this._div);this._map=this._div=this._img=this._img_loading=null;var d=m.disconnect;d(this._onResizeHandler_connect);d(this._opacityChangeHandler_connect);d(this._panEndEvalHandle);d(this._zoomEndEvalHandle);this._panEndEvalHandle=this._zoomEndEvalHandle=this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);
this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(a,b,c){d.set(this._div,{width:b+"px",height:c+"px"});this._onExtentChangeHandler(a)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();p.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var b=this._map;this._toggleTime();"css-transforms"===b.navigationMode&&(b=b.__visibleDelta,
this._left=b.x,this._top=b.y,this._isChildLayer||d.set(this._div,h._css.names.transform,h._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},canResume:function(){var a=this.inherited(arguments);if(a){var b=this._map.extent;this.extentProcessor&&b&&(a=!!this.extentProcessor({layer:this,extent:b,width:this._map.width}).extent)}return a},_enableDrawConnectors:function(){var a=
m.connect,b=this._map;b&&(this._onPanHandler_connect=a(b,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=a(b,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===b.navigationMode?this._onScaleHandler_connect=a(b,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=a(b,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var a=m.disconnect;a(this._onPanHandler_connect);a(this._onExtentChangeHandler_connect);a(this._onZoomHandler_connect);a(this._onScaleHandler_connect);
this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null},_toggleTime:function(){var a=this._map;this.timeInfo&&this.useMapTime&&a&&!this.suspended?(this._timeConnect||(this._timeConnect=m.connect(a,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(a.timeExtent)):(m.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(a){this._params&&(this._params.time=a?a.toJson().join(","):
null)},_onPanHandler:function(a,b){this._panDx=b.x;this._panDy=b.y;var c=this._dragOrigin,e=this._map.__visibleDelta,f=this._img;f&&("css-transforms"===this._map.navigationMode?(this._left=e.x+b.x,this._top=e.y+b.y,this._isChildLayer||d.set(this._div,h._css.names.transform,h._css.translate(this._left,this._top))):d.set(f,{left:c.x+b.x+"px",top:c.y+b.y+"px"}))},_onExtentChangeHandler:function(a,e,g){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var n=this._map,p=this._img,
s=p&&p.style,u=this._dragOrigin;if(e&&!g&&p&&(e.x!==this._panDx||e.y!==this._panDy))"css-transforms"===n.navigationMode?(e=n.__visibleDelta,this._left=e.x,this._top=e.y,this._isChildLayer||d.set(this._div,h._css.names.transform,h._css.translate(this._left,this._top))):d.set(p,{left:u.x+e.x+"px",top:u.y+e.y+"px"});p?(u.x=parseInt(s.left,10),u.y=parseInt(s.top,10)):u.x=u.y=0;"css-transforms"===n.navigationMode&&(g&&p)&&(d.set(p,h._css.names.transition,"none"),p._multiply=p._multiply?c.multiply(p._matrix,
p._multiply):p._matrix);this._fireUpdateStart();if(g=this._img_loading)if(this._clearEventListeners(g),b.destroy(g),this._img_loading=null,g=this._jsonRequest){try{g.cancel()}catch(F){}this._jsonRequest=null}var H=n.width;g=n.height;e=H;var J=0;10<=this.version&&n.wrapAround180&&(a=a._normalize(!0));this.extentProcessor&&(J=this.extentProcessor({layer:this,extent:a,width:e}),a=J.extent,e=J.width,J=J.marginLeft||0);if(this.isPNG32)p=this._img_loading=b.create("div"),p.id=n.id+"_"+this.id+"_"+(new Date).getTime(),
d.set(p,{position:"absolute",left:"0px",top:"0px",width:e+"px",height:g+"px"}),n=p.appendChild(b.create("div")),d.set(n,{opacity:0,width:e+"px",height:g+"px"}),this.getImageUrl(a,e,g,this._divAlphaImageFunc);else{var I=this._img_loading=b.create("img"),K=h._css.names,M=f("ie"),L={position:"absolute",width:e+"px",height:g+"px"};8===M&&(L.opacity=this.opacity);null!=J&&0!==J&&(L.marginLeft=J+"px");"css-transforms"===n.navigationMode?(L[K.transform]=h._css.translate(-this._left,-this._top),I._tdx=-this._left,
I._tdy=-this._top,L[K.transition]=K.transformName+" "+t+"ms ease",this.extentProcessor&&(L[K.origin]=H/2-J+"px "+g/2+"px")):(L.left="0px",L.top="0px");I.id=n.id+"_"+this.id+"_"+(new Date).getTime();d.set(I,L);I._onload_connect=m.connect(I,"onload",this,"_onLoadHandler");I._onerror_connect=m.connect(I,"onerror",this,"_onErrorHandler");I._onabort_connect=m.connect(I,"onabort",this,"_onErrorHandler");this._startRect={left:u.x,top:u.y,width:p?parseInt(s.width,10):e,height:p?parseInt(s.height,10):g,marginLeft:p?
parseInt(s.marginLeft||"0",10):J,zoom:s&&s.zoom?parseFloat(s.zoom):1};this.getImageUrl(a,e,g,this._imgSrcFunc)}}},_onTimeExtentChangeHandler:function(a){this.suspended||(this._setTime(a),this.refresh(!0))},getImageUrl:function(a,b,c,d){},_imgSrcFunc:function(a){this._img_loading.src=a},_divAlphaImageFunc:function(a){d.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+a+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},
_onLoadHandler:function(a){a=a.currentTarget;var c=this._map;this._clearEventListeners(a);!c||c.__panning||c.__zooming?b.destroy(a):(this._img&&this._div.removeChild(this._img),this._img=a,c=a.style,this._startRect={left:0,top:0,width:parseInt(c.width,10),height:parseInt(c.height,10),marginLeft:parseInt(c.marginLeft||"0",10),zoom:1},this._div.appendChild(a),this.suspended||p.show(this._div),this._img_loading=null,a=this._dragOrigin,a.x=a.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(a){a=
a.currentTarget;d.set(a,"visibility","hidden");this._clearEventListeners(a);a=Error("Unable to load image: "+a.src);this.onError(a);this._fireUpdateEnd(a)},_clearEventListeners:function(a){m.disconnect(a._onload_connect);m.disconnect(a._onerror_connect);m.disconnect(a._onabort_connect);a._onload_connect=a._onerror_connect=a._onabort_connect=null},setUseMapTime:function(a,b){this.useMapTime=a;this._toggleTime();b||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},
_onScaleHandler:function(a,b){var e={},f=h._css.names,g=this._img;if(g){d.set(g,f.transition,b?"none":f.transformName+" "+t+"ms ease");g._matrix=a;a=g._multiply?c.multiply(a,g._multiply):a;if(g._tdx||g._tdy)a=c.multiply(a,{xx:1,xy:0,yx:0,yy:1,dx:g._tdx,dy:g._tdy});e[f.transform]=h._css.matrix(a);d.set(g,e)}},_onZoomHandler:function(a,b,c){a=this._startRect;var e=a.width*b,h=a.height*b,g=a.marginLeft*b,n=this._img,p=f("ie");n&&(p&&8>p?d.set(n,{left:a.left-(e-a.width)*(c.x-a.left)/a.width+"px",top:a.top-
(h-a.height)*(c.y-a.top)/a.height+"px",zoom:b*a.zoom}):d.set(n,{left:a.left-(e-a.width)*(c.x-a.left)/a.width+"px",top:a.top-(h-a.height)*(c.y-a.top)/a.height+"px",width:e+"px",height:h+"px"}),null!=g&&0!==g&&d.set(n,{marginLeft:g+"px"}))},_exportMapImage:function(a,b,c){var d=this._exportMapImageHandler;b.token=this._getToken();e({url:a,content:b,callbackParamName:"callback",load:function(a,b){d(a,b,c)},error:n.defaults.io.errorHandler})},_exportMapImageHandler:function(a,b,c){a=new u(a);this.onMapImageExport(a);
c&&c(a)},onMapImageExport:function(){},setOpacity:function(a){if(this.opacity!=a)this.onOpacityChange(this.opacity=a)},onOpacityChange:function(){},_opacityChangeHandler:function(a){var b=8===f("ie")?this._img:this._div;d.set(b,"opacity",a)}})})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),function(g,m,a,b,d,c,h,n,f,e){return g(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",
infoTemplates:null,constructor:function(a,b){this.layerInfos=[];b&&(this.infoTemplates=b.infoTemplates||null);var c=this._params={},d=this._url.query?this._url.query.token:null;d&&(c.token=d)},setInfoTemplates:function(a){this.infoTemplates=a},_load:function(){h({url:this._url.path,content:m.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(b,
d){try{this._findCredential();(this.credential&&this.credential.ssl||b&&b._ssl)&&this._useSSL();this.description=b.description;this.copyright=b.copyrightText;this.spatialReference=b.spatialReference&&new n(b.spatialReference);this.initialExtent=b.initialExtent&&new f(b.initialExtent);this.fullExtent=b.fullExtent&&new f(b.fullExtent);this.units=b.units;this.maxRecordCount=b.maxRecordCount;this.maxImageHeight=b.maxImageHeight;this.maxImageWidth=b.maxImageWidth;this.supportsDynamicLayers=b.supportsDynamicLayers;
var h=this.layerInfos=[],g=b.layers,m=this._defaultVisibleLayers=[];a.forEach(g,function(a,b){h[b]=new e(a);a.defaultVisibility&&m.push(a.id)});this.visibleLayers||(this.visibleLayers=m);this.version=b.currentVersion;this.version||(this.version="capabilities"in b||"tables"in b?10:"supportedImageFormatTypes"in b?9.31:9.3);this.capabilities=b.capabilities;c.isDefined(b.minScale)&&!this._hasMin&&this.setMinScale(b.minScale);c.isDefined(b.maxScale)&&!this._hasMax&&this.setMaxScale(b.maxScale)}catch(v){this._errorHandler(v)}}})})},
"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(g,m,a,b,d){return g(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(a){m.mixin(this,a)},toJson:function(){return d.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}})})},"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),
function(g,m,a,b,d,c,h,n){m=m(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=[]},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(a){this.bbox&&g.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var c=this.bbox||this.extent,c=c&&a&&c._normalize(!0);a=this.layerOption;var d=
c?c.spatialReference.wkid||b.toJson(c.spatialReference.toJson()):null,m=this.imageSpatialReference,c={dpi:this.dpi,format:this.format,transparent:this.transparent,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,bbox:c?c.xmin+","+c.ymin+","+c.xmax+","+c.ymax:null,bboxSR:d,layers:a?a+":"+this.layerIds.join(","):null,imageSR:m?m.wkid||b.toJson(m.toJson()):d};c.layerDefs=n._serializeLayerDefinitions(this.layerDefinitions);a=this.timeExtent;c.time=a?a.toJson().join(","):null;
c.layerTimeOptions=n._serializeTimeOptions(this.layerTimeOptions);return h.filter(c,function(a){if(null!==a)return!0})}});a.mixin(m,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});return m})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),function(g,m,a,b,d,c,h,n){return g(c,{declaredClass:"esri.layers.DynamicLayerInfo",
defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(a){a&&(a.source?a="mapLayer"===a.source.type?new h(a.source):new n(a.source):(a=new h,a.mapLayerId=this.id),this.source=a)},toJson:function(){var a=this.inherited(arguments);a.source=this.source&&this.source.toJson();return d.fixJson(a)}})})},"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),function(g,m,a,b,d,c){return g(c,{declaredClass:"esri.layers.LayerMapSource",
type:"mapLayer",toJson:function(){return d.fixJson({type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}})})},"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(g,m,a,b){return g(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(a){a&&m.mixin(this,a)},toJson:function(){}})})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),
function(g,m,a,b,d,c,h,n,f,e){return g(c,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(a){if(a&&a.dataSource){switch(a.dataSource.type){case "table":a=new h(a.dataSource);break;case "queryTable":a=new n(a.dataSource);break;case "joinTable":a=new f(a.dataSource);break;case "raster":a=new e(a.dataSource);break;default:a=a.dataSource}this.dataSource=a}},toJson:function(){var a={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return d.fixJson(a)}})})},
"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(g,m,a,b,d,c){return g(c,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return d.fixJson({type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}})})},"esri/layers/DataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(g,m,a,b){return g(null,
{declaredClass:"esri.layers.DataSource",constructor:function(a){a&&m.mixin(this,a)},toJson:function(){}})})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),function(g,m,a,b,d,c,h){return g(c,{declaredClass:"esri.layers.QueryDataSource",constructor:function(a){a&&(a.oidFields&&m.isString(a.oidFields)&&(this.oidFields=a.oidFields.split(",")),a.spatialReference&&(this.spatialReference=new h(a.spatialReference)))},
toJson:function(){var a={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var b;b="point"===this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":"polyline"===this.geometryType.toLowerCase()?"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":
this.geometryType;a.geometryType=b}return d.fixJson(a)}})})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),function(g,m,a,b,d,c,h,n,f,e){var p=g(c,{declaredClass:"esri.layers.JoinDataSource",constructor:function(a){a&&(a.leftTableSource&&(this.leftTableSource=this._createLayerSource(a.leftTableSource)),a.rightTableSource&&(this.rightTableSource=
this._createLayerSource(a.rightTableSource)))},_createLayerSource:function(a){var b;if("mapLayer"===a.type)b=new h(a);else{b={type:"dataLayer"};var c;switch(a.dataSource.type){case "table":c=new n(a.dataSource);break;case "queryTable":c=new f(a.dataSource);break;case "joinTable":c=new p(a.dataSource);break;case "raster":c=new e(a.dataSource);break;default:c=a.dataSource}b.dataSource=c;b.toJson=function(){var a={type:"dataLayer",dataSource:c.toJson()};return d.fixJson(a)}}return b},toJson:function(){var a=
{type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey},b;b="left-outer-join"===this.joinType.toLowerCase()?"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;a.joinType=b;return d.fixJson(a)}});return p})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),
function(g,m,a,b,d,c){return g(c,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return d.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}})})},"esri/layers/VectorTileLayer":function(){(function(){var g=function(){var a;try{a=window.WebGLRenderingContext}catch(b){a=!1}var d;try{for(var c=document.createElement("canvas"),h=["webgl","experimental-webgl","webkit-3d","moz-webgl"],g=null,f=0;f<h.length;++f){try{g=c.getContext(h[f])}catch(e){}if(g)break}d=
g}catch(p){d=!1}return!a||!d?!1:!0}(),m=["dojo/_base/lang","dojo/has","dojo/Deferred","../sniff","./layer"];g&&m.push("./VectorTileLayerImpl");define(m,function(a,b,d,c,h,n){b=n?n:h.createSubclass({declaredClass:"esri.layers.VectorTileLayer",constructor:function(){var b=new d;b.reject(Error("esri.layers.VectorTileLayer is not supported"));b.promise.otherwise(a.hitch(this,function(a){this._errorHandler(a)}))}});b.ACCESS_TOKEN=null;b.supported=function(){return g};return b})})()},"esri/arcgis/utils":function(){define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff ../kernel ../config ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M,L,G,O){function S(a){return w({url:fa.arcgisUrl+"/"+a.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0})}function U(a,k){var b={f:"json"};k&&(b.token=k);return w({url:a,content:b,callbackParamName:"callback"},{disableIdentityLookup:!0})}function T(a){if(a.layerDefinition&&(!a.layerDefinition.drawingInfo||!a.layerDefinition.drawingInfo.labelingInfo))a.showLabels=!1;a.itemProperties.layerDefinition&&
(a.layerDefinition?(a.layerDefinition.drawingInfo||(a.layerDefinition.drawingInfo=a.itemProperties.layerDefinition.drawingInfo),t.isDefined(a.layerDefinition.definitionExpression)||(a.layerDefinition.definitionExpression=a.itemProperties.layerDefinition.definitionExpression),t.isDefined(a.layerDefinition.minScale)||(a.layerDefinition.minScale=a.itemProperties.layerDefinition.minScale),t.isDefined(a.layerDefinition.maxScale)||(a.layerDefinition.maxScale=a.itemProperties.layerDefinition.maxScale)):
a.layerDefinition=a.itemProperties.layerDefinition);a.itemProperties.popupInfo&&(!a.popupInfo&&!a.disablePopup)&&(a.popupInfo=a.itemProperties.popupInfo);t.isDefined(a.itemProperties.showLabels)&&!t.isDefined(a.showLabels)&&(a.showLabels=a.itemProperties.showLabels);t.isDefined(a.itemProperties.showLegend)&&!t.isDefined(a.showLegend)&&(a.showLegend=a.itemProperties.showLegend);t.isDefined(a.itemProperties.refreshInterval)&&!t.isDefined(a.refreshInterval)&&(a.refreshInterval=a.itemProperties.refreshInterval)}
function E(a){T(a);a.itemProperties.layerDefinition&&a.layerDefinition&&(!t.isDefined(a.layerDefinition.maximumTrackPoints)&&t.isDefined(a.itemProperties.layerDefinition.maximumTrackPoints)&&(a.layerDefinition.maximumTrackPoints=a.itemProperties.layerDefinition.maximumTrackPoints),!a.layerDefinition.definitionGeometry&&a.itemProperties.layerDefinition.definitionGeometry&&(a.layerDefinition.definitionGeometry=a.itemProperties.layerDefinition.definitionGeometry));a.itemProperties.purgeOptions&&!a.purgeOptions&&
(a.purgeOptions=a.itemProperties.purgeOptions)}function Q(k,b){var r=new d,c=k.itemData,q=[],y=[];a.forEach(c.operationalLayers,function(a){if(a.itemId&&!a.type){var k=a.url.toLowerCase();-1<k.indexOf("/featureserver")||-1<k.indexOf("/mapserver/")?(y.push(a),q.push(S(a))):-1<k.indexOf("/mapserver")&&-1===k.indexOf("/mapserver/")&&(!a.layers||!t.isDefined(a.minScale)&&!t.isDefined(a.maxScale))?(y.push(a),q.push(S(a))):-1<k.indexOf("/imageserver")&&!t.isDefined(a.minScale)&&!t.isDefined(a.maxScale)?
(y.push(a),q.push(S(a))):-1<k.indexOf("/streamserver")&&(y.push(a),q.push(S(a)))}});c.baseMap&&c.baseMap.baseMapLayers&&a.forEach(c.baseMap.baseMapLayers,function(a){a.itemId&&"VectorTileLayer"!==a.layerType&&(y.push(a),q.push(S(a)))});if(0<q.length){var D={};(new f(q)).addCallback(function(b){a.forEach(y,function(k,r){var c=b[r][1];if(c&&!(c instanceof Error)&&(D[k.itemId]=c,!k.type)){var q=k.url.toLowerCase();if((-1<q.indexOf("/featureserver")||-1<q.indexOf("/mapserver/"))&&c.layers)a.forEach(c.layers,
function(a){if(q.match("/featureserver/"+a.id+"$")=="/featureserver/"+a.id||q.match("/mapserver/"+a.id+"$")=="/mapserver/"+a.id)k.itemProperties=a,T(k)});else if(-1<q.indexOf("/streamserver"))k.itemProperties=c,E(k);else if(-1<q.indexOf("/mapserver"))c.layers&&!k.layers&&(k.layers=c.layers),t.isDefined(c.minScale)&&!t.isDefined(k.minScale)&&(k.minScale=c.minScale),t.isDefined(c.maxScale)&&!t.isDefined(k.maxScale)&&(k.maxScale=c.maxScale),t.isDefined(c.refreshInterval)&&!t.isDefined(k.refreshInterval)&&
(k.refreshInterval=c.refreshInterval),c.visibleLayers&&!k.visibleLayers&&(k.visibleLayers=c.visibleLayers);else if(-1<q.indexOf("/imageserver")&&(t.isDefined(c.minScale)&&!t.isDefined(k.minScale)&&(k.minScale=c.minScale),t.isDefined(c.maxScale)&&!t.isDefined(k.maxScale)&&(k.maxScale=c.maxScale),t.isDefined(c.refreshInterval)&&!t.isDefined(k.refreshInterval)&&(k.refreshInterval=c.refreshInterval),c.popupInfo&&(!k.popupInfo&&!k.disablePopup)&&(k.popupInfo=c.popupInfo),c.renderingRule&&!k.renderingRule&&
(k.renderingRule=c.renderingRule,c.renderingRule.functionName&&(k.renderingRule.rasterFunction=c.renderingRule.functionName)),c.bandIds&&!k.bandIds&&(k.bandIds=c.bandIds),c.mosaicRule&&!k.mosaicRule&&(k.mosaicRule=c.mosaicRule),c.format&&!k.format&&(k.format=c.format),t.isDefined(c.compressionQuality)&&!t.isDefined(k.compressionQuality)&&(k.compressionQuality=c.compressionQuality),c.layerDefinition&&c.layerDefinition.definitionExpression&&(!t.isDefined(k.layerDefinition)||!t.isDefined(k.layerDefinition.definitionExpression))))k.layerDefinition=
k.layerDefinition||{},k.layerDefinition.definitionExpression=c.layerDefinition.definitionExpression}});k.relatedItemsData=D;r.callback(k)})}else r.callback(k);return r}function N(a,c){var q=new d,D=a.itemData,e=D.baseMap.baseMapLayers[0];if("BingMapsAerial"===e.type||"BingMapsRoad"===e.type||"BingMapsHybrid"===e.type)if(e.portalUrl&&s.id)delete c.bingMapsKey,s.id.checkSignInStatus(B.urlToObject(fa.arcgisUrl).path).then(m.hitch(null,function(a,b,c,q,d){U(e.portalUrl,d.token).then(m.hitch(null,k,a,
b,c,q),m.hitch(null,r,a,b,c,q))},a,c,D,q),m.hitch(null,function(a,b,c,q,d){U(e.portalUrl).then(m.hitch(null,k,a,b,c,q),m.hitch(null,r,a,b,c,q))},a,c,D,q));else if(c.bingMapsKey){var f=new Pa({bingMapsKey:c.bingMapsKey,mapStyle:Pa.MAP_STYLE_AERIAL});b.connect(f,"onLoad",m.hitch(this,function(){q.callback([a,c])}));b.connect(f,"onError",function(k){delete c.bingMapsKey;a.itemData=y(D);e=a.itemData.baseMap.baseMapLayers[0];e.errors=[];e.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});
q.callback([a,c])})}else a.itemData=y(D),e=a.itemData.baseMap.baseMapLayers[0],e.errors=[],e.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),q.callback([a,c]);else q.callback([a,c]);return q}function q(a){var k=new d,b,r;a=a.itemData;var c=a.baseMap&&a.baseMap.baseMapLayers;if(Fb&&!Fb.supported())for(a=0;a<c.length;a++){var q=c[a];if(!q.isReference){"VectorTileLayer"===q.layerType&&(b=q.itemId,r=a);break}}b?
ga(b,!1).addBoth(function(a){var b=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;a&&(a.item&&b.test(a.item.url))&&(c[r]={id:"FB_"+q.id,layerType:"ArcGISTiledMapServiceLayer",opacity:"opacity"in q?q.opacity:1,visibility:"visibility"in q?q.visibility:!0,url:"http://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"});k.resolve()}):k.resolve();return k}function k(a,k,c,q,d){d.bingKey?(k.bingMapsKey=d.bingKey,d=new Pa({bingMapsKey:k.bingMapsKey,
mapStyle:Pa.MAP_STYLE_AERIAL}),b.connect(d,"onLoad",m.hitch(this,function(){q.callback([a,k])})),b.connect(d,"onError",function(b){delete k.bingMapsKey;a.itemData=y(c);b=a.itemData.baseMap.baseMapLayers[0];b.errors=[];b.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});q.callback([a,k])})):r(a,k,c,q)}function r(a,k,b,r){delete k.bingMapsKey;a.itemData=y(b);b=a.itemData.baseMap.baseMapLayers[0];b.errors=[];b.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});
r.callback([a,k])}function y(a){a.baseMap="BingMapsAerial"===a.baseMap.baseMapLayers[0].type?{title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:"BingMapsRoad"===a.baseMap.baseMapLayers[0].type?{title:"Streets",baseMapLayers:[{id:"World_Street_Map_8421",opacity:1,visibility:!0,url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:{title:"Imagery with Labels",
baseMapLayers:[{id:"World_Imagery_6611",opacity:1,visibility:!0,url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};return a}function D(k,b,r,c){var q=k.dynamicLayerInfos||k.layerInfos,d=b.layers;if(d&&q)if(c.usePopupManager){var y;a.forEach(q,function(a){var k=a.id;if(!a.subLayerIds)for(a=
0;a<d.length;a++){var b=d[a];if(b.id===k&&b.popupInfo){y||(y={});y[k]={infoTemplate:new r(b.popupInfo),layerUrl:b.layerUrl};break}}});y&&k.setInfoTemplates(y)}else{var D=[],e=[],f=[],E=[],P=[],h=[];a.forEach(q,function(b){var r=b.id;if(!b.subLayerIds&&-1!==a.indexOf(k.visibleLayers,r))for(b=0;b<d.length;b++){var c=d[b];if(c.id===r){e.push(r);D.push(c.popupInfo);f.push(c.layerUrl||"");c.layerDefinition&&c.layerDefinition.definitionExpression?E.push(c.layerDefinition.definitionExpression):E.push("");
P.push(t.isDefined(c.minScale)?c.minScale:null);h.push(t.isDefined(c.maxScale)?c.maxScale:null);break}}});D.length&&(k.__popups=D,k.__popupIds=e,k.__popupUrls=f,k.__popupWhereClauses=E,k.__popupMinScales=P,k.__popupMaxScales=h,k.__resourceInfo=b.resourceInfo)}}function P(a){if(!a)return!1;var k=(new h(fa.arcgisUrl)).authority;return-1!==a.indexOf(".arcgis.com/")||-1!==a.indexOf(k)}function aa(a){return!a?!1:-1!==a.indexOf("/services.arcgisonline.com/")||-1!==a.indexOf("/server.arcgisonline.com/")}
function X(a){if("https:"===location.protocol&&(P(a)||aa(a)))a=a.replace("http:","https:");return a}function na(k,b,r){var c=[],q;k.displayLevels||(c=a.map(k.resourceInfo.tileInfo.lods,function(a){return a.level}));k.exclusionAreas&&(q=m.clone(k.exclusionAreas),q=a.map(q,function(a){a.geometry=new C(a.geometry);return a}));c=new L(X(k.url),{resourceInfo:k.resourceInfo,opacity:k.opacity,visible:k.visibility,displayLevels:k.displayLevels||c,id:k.id,minScale:k.minScale,maxScale:k.maxScale,refreshInterval:k.refreshInterval,
exclusionAreas:q});r.ignorePopups||D(c,k,b,r);return c}function Da(a,k){if(!a||!k||0===k.length)return[];var b=","+k+",",r=[],c,q=",";for(c=0;c<a.length;c++)if(null!==a[c].subLayerIds){if(-1===b.indexOf(","+a[c].id+",")||-1<q.indexOf(","+a[c].id+","))q+=a[c].subLayerIds.toString()+","}else-1<b.indexOf(","+a[c].id+",")&&-1===q.indexOf(","+a[c].id+",")&&r.push(a[c].id);return r}function Ea(k,b,r){var c=new da;c.format="png24";k.resourceInfo&&(k.resourceInfo.supportedImageFormatTypes&&-1<k.resourceInfo.supportedImageFormatTypes.indexOf("PNG32"))&&
(c.format="png32");var c=new V(X(k.url),{resourceInfo:k.resourceInfo,opacity:k.opacity,visible:k.visibility,id:k.id,imageParameters:c,minScale:k.minScale,maxScale:k.maxScale,refreshInterval:k.refreshInterval}),q=k.visibleLayers;if(!k.visibleLayers){var d="";a.forEach(c.layerInfos,function(a){a.defaultVisibility&&(d+=(0<d.length?",":"")+a.id)});q=d}if(k.layers&&0<k.layers.length){var y=[],e=[],f,E=[],P,h;a.forEach(k.layers,function(b){b.layerDefinition&&b.layerDefinition.definitionExpression&&(y[b.id]=
b.layerDefinition.definitionExpression);if(b.layerDefinition&&b.layerDefinition.source){f=null;h=b.layerDefinition.source;if("mapLayer"===h.type){var r=a.filter(k.resourceInfo.layers,function(a){return a.id===h.mapLayerId});r.length&&(f=m.mixin(r[0],b))}else f=m.mixin({},b);f&&(f.source=h,delete f.popupInfo,f=new la(f),k.visibleLayers&&(r="string"==typeof k.visibleLayers?k.visibleLayers.split(","):k.visibleLayers,-1<a.indexOf(r,b.id)?f.defaultVisibility=!0:f.defaultVisibility=!1),e.push(f))}b.layerDefinition&&
(b.layerDefinition.source&&b.layerDefinition.drawingInfo)&&(P=new tb(b.layerDefinition.drawingInfo),E[b.id]=P)},this);0<y.length&&c.setLayerDefinitions(y);0<e.length?(c.setDynamicLayerInfos(e,!0),0<E.length&&c.setLayerDrawingOptions(E,!0)):(q=Da(c.layerInfos,q),c.setVisibleLayers(q))}else q=Da(c.layerInfos,q),c.setVisibleLayers(q);r.ignorePopups||D(c,k,b,r);return c}function Ha(a,k,b){var r=new W;r.bandIds=a.bandIds;null!=a.format&&(r.format=a.format,null!=a.compressionQuality&&(r.compressionQuality=
a.compressionQuality));if(a.renderingRule&&a.renderingRule.rasterFunction){var c=new Mb(a.renderingRule);r.renderingRule=c}a.mosaicRule&&(c=new Lb(a.mosaicRule),r.mosaicRule=c);t.isDefined(a.noData)&&(r.noData=a.noData);t.isDefined(a.noDataInterpretation)&&(r.noDataInterpretation=a.noDataInterpretation);t.isDefined(a.interpolation)&&(r.interpolation=a.interpolation);c=a.layerType?"ArcGISImageServiceVectorLayer"===a.layerType:!1;t.isDefined(a.layerType)||(c=a.resourceInfo.hasMultidimensions&&("esriImageServiceDataTypeVector-UV"===
a.resourceInfo.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===a.resourceInfo.serviceDataType));r={resourceInfo:a.resourceInfo,opacity:a.opacity,visible:a.visibility,id:a.id,imageServiceParameters:r,minScale:a.minScale,maxScale:a.maxScale,refreshInterval:a.refreshInterval};r=c?new R(X(a.url),r):new ca(X(a.url),r);a.layerDefinition&&(a.layerDefinition.drawingInfo&&a.layerDefinition.drawingInfo.renderer&&(c=H.fromJson(a.layerDefinition.drawingInfo.renderer),r.setRenderer(c)),a.layerDefinition.definitionExpression&&
r.setDefinitionExpression(a.layerDefinition.definitionExpression,!0));!b.ignorePopups&&a.popupInfo&&r.setInfoTemplate(new k(a.popupInfo));return r}function Aa(k,b,r){var c=[102113,102100,3857],q=r||new v(b[0].layerObject.fullExtent.spatialReference),d=new v(k.resourceInfo.fullExtent.spatialReference);return q.wkt==d.wkt&&(q.wkid==d.wkid||t.isDefined(q.latestWkid)&&q.latestWkid==d.wkid||t.isDefined(d.latestWkid)&&q.wkid==d.latestWkid||t.isDefined(q.latestWkid)&&q.latestWkid==d.latestWkid)||q.wkid&&
d.wkid&&a.some(c,function(a){return a===d.wkid})&&a.some(c,function(a){return a===q.wkid})?!0:!1}function za(a,k,b){if(!k[0].layerObject.tileInfo)return!1;a=a.resourceInfo.tileInfo;k=k[0].layerObject.tileInfo;b=b.width>b.height?b.width:b.height;for(var r=!1,c=!1,q=0;q<a.lods.length;q++){for(var d=a.lods[q].scale/a.dpi,y=0;y<k.lods.length;y++){var D=k.lods[y].scale/k.dpi;if(Math.abs(D-d)/D<1/b)if(r){c=!0;break}else r=!0}if(c)break}return c||r&&(1===a.lods.length||1===k.lods.length)?!0:!1}function Ma(k,
r,q,d,y,D){var e,f,E=q._clazz;if("OpenStreetMap"===k.type)e=new Eb({id:k.id,opacity:k.opacity,visible:null!==k.visibility&&void 0!==k.visibility?k.visibility:!0});else if("WFS"===k.type)d={customParameters:k.wfsInfo.customParameters,geometryType:k.layerDefinition.geometryType,id:k.id,labelingInfo:k.layerDefinition.drawingInfo.labelingInfo,maxFeatures:k.wfsInfo.maxFeatures,mode:k.mode,name:k.wfsInfo.name,showLabels:!0,swapXY:k.wfsInfo.swapXY,title:k.title,url:k.url,version:k.wfsInfo.version,visible:k.visibility,
wkid:k.layerDefinition.spatialReference.wkid},e=new Ib,e.fromJson(d,function(){t.isDefined(k.opacity)&&e.setOpacity(k.opacity);t.isDefined(k.visibility)&&e.setVisibility(k.visibility);(k.minScale||k.maxScale)&&e.setScaleRange(k.minScale,k.maxScale);e.renderer=H.fromJson(k.layerDefinition.drawingInfo.renderer);!q.ignorePopups&&k.popupInfo&&e.setInfoTemplate(new E(k.popupInfo));e.emit("fromJsonComplete")});else if("WMS"===k.type){var P=[],h=[];a.forEach(k.layers,function(a){h.push(new Db({name:a.name,
title:a.title,legendURL:a.legendURL,queryable:a.queryable,showPopup:a.showPopup}));P.push(a.name)},this);k.visibleLayers&&(P=k.visibleLayers);d=new C(k.extent[0][0],k.extent[0][1],k.extent[1][0],k.extent[1][1],new v({wkid:4326}));d={customLayerParameters:k.customLayerParameters,customParameters:k.customParameters,extent:d,layerInfos:h,version:k.version,maxWidth:k.maxWidth,maxHeight:k.maxHeight,featureInfoFormat:k.featureInfoFormat,getFeatureInfoURL:k.featureInfoUrl,getMapURL:k.mapUrl,spatialReferences:k.spatialReferences,
title:k.title,copyright:k.copyright,minScale:k.minScale||0,maxScale:k.maxScale||0,format:k.format};e=new Cb(k.url,{id:k.id,visibleLayers:P,format:"png",transparent:k.firstLayer?!1:!0,opacity:k.opacity,visible:null!==k.visibility?k.visibility:!0,resourceInfo:d,refreshInterval:k.refreshInterval});e.spatialReference.wkid=d.spatialReferences[0]}else if("KML"===k.type){f=k.url;if(s.id){var g=s.id.findCredential(B.urlToObject(fa.arcgisUrl).path);g&&(r=fa.arcgisUrl.substring(fa.arcgisUrl.indexOf("//")+2,
fa.arcgisUrl.indexOf("/",fa.arcgisUrl.indexOf("//")+3)),y=r.split("."),y=y[y.length-2]+"."+y[y.length-1],D=f.indexOf(y),-1<D&&(f="https://"+r+f.substring(D+y.length),f+="?token\x3d"+g.token))}e=new Pb(f,{id:k.id,visible:null!==k.visibility?k.visibility:!0,outSR:d,refreshInterval:k.refreshInterval});b.connect(e,"onLoad",function(){(k.opacity||0===k.opacity)&&e.setOpacity(k.opacity);t.isDefined(k.minScale)&&t.isDefined(k.maxScale)&&e.setScaleRange(k.minScale,k.maxScale);k.visibleFolders&&a.forEach(e.folders,
function(b){-1<a.indexOf(k.visibleFolders,b.id)?e.setFolderVisibility(b,!0):e.setFolderVisibility(b,!1)},this)})}else"WebTiledLayer"===k.type?(e=new Hb(k.templateUrl,{id:k.id,visible:null!==k.visibility?k.visibility:!0,opacity:k.opacity,copyright:k.copyright,fullExtent:k.fullExtent&&new C(k.fullExtent),initialExtent:k.fullExtent&&new C(k.fullExtent),subDomains:k.subDomains,tileInfo:k.tileInfo?new bb(k.tileInfo):null,refreshInterval:k.refreshInterval,wmtsInfo:k.wmtsInfo}),b.connect(e,"onLoad",function(){(t.isDefined(k.minScale)||
t.isDefined(k.maxScale))&&e.setScaleRange(k.minScale,k.maxScale)})):"GeoRSS"===k.type?(e=new Z(k.url,{id:k.id,opacity:k.opacity,outSpatialReference:d,refreshInterval:k.refreshInterval}),b.connect(e,"onLoad",function(){!1===k.visibility&&e.hide();t.isDefined(k.minScale)&&t.isDefined(k.maxScale)&&e.setScaleRange(k.minScale,k.maxScale);var b=e.getFeatureLayers();a.forEach(b,function(a){k.pointSymbol&&"esriGeometryPoint"===a.geometryType?(a.renderer.symbol=F.fromJson(k.pointSymbol),1===b.length&&(e.pointSymbol=
F.fromJson(k.pointSymbol))):k.lineSymbol&&"esriGeometryPolyline"===a.geometryType?(a.renderer.symbol=F.fromJson(k.lineSymbol),1===b.length&&(e.polylineSymbol=F.fromJson(k.lineSymbol))):k.polygonSymbol&&"esriGeometryPolygon"===a.geometryType&&(a.renderer.symbol=F.fromJson(k.polygonSymbol),1===b.length&&(e.polygonSymbol=F.fromJson(k.polygonSymbol)))})})):"CSV"==k.type&&k.url?(d={layerDefinition:k.layerDefinition,columnDelimiter:k.columnDelimiter,id:k.id?k.id:null,visible:null!==k.visibility?k.visibility:
!0,opacity:k.opacity,refreshInterval:k.refreshInterval},k.locationInfo&&(d.latitudeFieldName=k.locationInfo.latitudeFieldName,d.longitudeFieldName=k.locationInfo.longitudeFieldName),q.ignorePopups||(d.infoTemplate=new J(k.popupInfo?k.popupInfo:ea.generateDefaultPopupInfo(k))),e=new ha(k.url,d)):"VectorTileLayer"===k.layerType&&k.styleUrl?e=new Fb(k.styleUrl,{id:k.id,minScale:k.minScale,maxScale:k.maxScale,opacity:k.opacity,visible:k.visibility}):k.layerDefinition&&!k.url?(d=c.fromJson(c.toJson(k)),
delete d.id,delete d.opacity,delete d.visibility,e=new G(d,{id:k.id,opacity:k.opacity,visible:k.visibility,outFields:["*"],autoGeneralize:!0}),!q.ignorePopups&&d.popupInfo&&e.setInfoTemplate(new E(d.popupInfo)),ja(e)):"BingMapsAerial"===k.type||"BingMapsRoad"===k.type||"BingMapsHybrid"===k.type?q.bingMapsKey?(d=Pa.MAP_STYLE_AERIAL_WITH_LABELS,"BingMapsAerial"===k.type?d=Pa.MAP_STYLE_AERIAL:"BingMapsRoad"===k.type&&(d=Pa.MAP_STYLE_ROAD),e=new Pa({bingMapsKey:q.bingMapsKey,mapStyle:d,opacity:k.opacity,
id:k.id}),b.connect(e,"onError",m.hitch(this,function(a){a.errors=a.errors||[];a.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+a.type+"]"})},k))):(k.errors=k.errors||[],k.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+k.type+"]"})):k.resourceInfo&&k.resourceInfo.mapName?e=!0===k.resourceInfo.singleFusedMapCache&&(k.baseMapLayer||Aa(k,r,d)&&za(k,
y,D))?na(k,E,q):Ea(k,E,q):k.resourceInfo&&k.resourceInfo.pixelSizeX?e=!0===k.resourceInfo.singleFusedMapCache&&(k.baseMapLayer||Aa(k,r,d)&&za(k,y,D))?na(k,E,q):Ha(k,E,q):k.resourceInfo&&"Feature Layer"===k.resourceInfo.type?(k.capabilities&&(k.resourceInfo.capabilities=k.capabilities),e=new G(X(k.url),{resourceInfo:k.resourceInfo,opacity:k.opacity,visible:k.visibility,id:k.id,mode:k.mode===G.MODE_SELECTION?G.MODE_SELECTION:G.MODE_AUTO,editable:!1===q.editable?!1:void 0,outFields:["*"],autoGeneralize:!0,
refreshInterval:k.refreshInterval}),!q.ignorePopups&&k.popupInfo&&e.setInfoTemplate(new E(k.popupInfo)),k.layerDefinition&&(k.layerDefinition.drawingInfo&&k.layerDefinition.drawingInfo.renderer&&(d=H.fromJson(k.layerDefinition.drawingInfo.renderer),d.isMaxInclusive=!0,e.setRenderer(d)),k.layerDefinition.drawingInfo&&k.layerDefinition.drawingInfo.labelingInfo&&(d=a.map(k.layerDefinition.drawingInfo.labelingInfo,function(a){return new Kb(a)}),e.setLabelingInfo(d)),k.layerDefinition.definitionExpression&&
e.setDefinitionExpression(k.layerDefinition.definitionExpression),t.isDefined(k.layerDefinition.minScale)&&e.setMinScale(k.layerDefinition.minScale),t.isDefined(k.layerDefinition.maxScale)&&e.setMaxScale(k.layerDefinition.maxScale)),ja(e)):k.resourceInfo&&k.resourceInfo.streamUrls&&(d={resourceInfo:k.resourceInfo,opacity:k.opacity,visible:k.visibility,id:k.id},k.layerDefinition&&(g=k.layerDefinition.drawingInfo,k.layerDefinition.definitionGeometry&&(f=f||{},f.geometry=k.layerDefinition.definitionGeometry),
t.isDefined(k.layerDefinition.definitionExpression)&&(f=f||{},f.where=k.layerDefinition.definitionExpression),t.isDefined(k.layerDefinition.maximumTrackPoints)&&(d.maximumTrackPoints=k.layerDefinition.maximumTrackPoints)),f&&(d.filter=f),k.purgeOptions&&(d.purgeOptions=k.purgeOptions),e=new Ya(X(k.url),d),g&&g.renderer&&(d=g.renderer,e.setRenderer(H.fromJson(d))),!q.ignorePopups&&k.popupInfo&&e.setInfoTemplate(new E(k.popupInfo)),k.layerDefinition&&(t.isDefined(k.layerDefinition.minScale)&&e.setMinScale(k.layerDefinition.minScale),
t.isDefined(k.layerDefinition.maxScale)&&e.setMaxScale(k.layerDefinition.maxScale)),n.once(e,"error",function(a){k.errors.push({message:"Error loading stream layer. Check websocket url"})}));e&&(e.arcgisProps={title:k.title},k.baseMapLayer&&(k.isReference?(e.attr("data-reference",!0),e._basemapGalleryLayerType="reference"):e._basemapGalleryLayerType="basemap"));return e}function ka(k,b,r,c,q){a.forEach(k,function(a){a.layerObject=Ma(a,k,b,r,c,q)});var d=a.filter(k,function(a){return!a.isReference}),
y=a.filter(k,function(a){return!!a.isReference});return k=d.concat(y)}function ma(a){var k=null;a=a[0];a.url&&!a.type?a.resourceInfo.spatialReference&&(k=new v,a.resourceInfo.spatialReference.wkid&&(k.wkid=a.resourceInfo.spatialReference.wkid),a.resourceInfo.spatialReference.wkt&&(k.wkt=a.resourceInfo.spatialReference.wkt)):a.type&&(-1<a.type.indexOf("BingMaps")||"OpenStreetMap"==a.type?k=new v({wkid:102100}):"WMS"==a.type&&(k=new v({wkid:a.spatialReferences[0]})));return k}function pa(k,b,r,c,q,
d,y,D){a.forEach(b,function(a){a.url&&!a.type&&(a.resourceInfo=k[a.deferredsPos][1],delete a.deferredsPos)});d=d||ma(b);b=ka(b,r,d,y,D);q.callback(b);return q}function ja(a){!window.CanvasRenderingContext2D&&(a.renderer&&"esri.renderer.HeatmapRenderer"===a.renderer.declaredClass)&&a.setRenderer(H.fromJson({type:"simple",symbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:0.75,type:"esriSLS",style:"esriSLSSolid"}}}))}
function wa(a,k){var b=X(a);return w({url:b,content:{f:"json"},callbackParamName:"callback",error:function(a,r){a.message=a.message?a.message+(" [url:"+b+"]"):"[url:"+b+"]";k.push(a);u.defaults.io.errorHandler(a,r)}})}function Ba(a){var k=fa.arcgisUrl+"/"+a.itemId+"/data";return w({url:k,content:{f:"json"},callbackParamName:"callback",error:function(b,r){b.message=b.message?b.message+(" [url:"+k+"]"):"[url:"+k+"]";a.errors=a.errors||[];a.errors.push(b);u.defaults.io.errorHandler(b,r)}})}function xa(k,
b,r){var q=new d;if((!r.featureCollection||!r.featureCollection.layers)&&!r.layers)return k.errors=k.errors||[],k.errors.push({message:"Invalid Feature Collection item data. [item id: "+k.itemId+"]"}),q.errback(),q;r.layers&&(r.featureCollection={layers:r.layers},delete r.layers,t.isDefined(r.showLegend)&&(r.featureCollection.showLegend=r.showLegend,delete r.showLegend));oa(k,r.featureCollection,b).then(function(b){r.featureCollection=b;k.featureCollection&&k.featureCollection.layers?a.forEach(r.featureCollection.layers,
function(a,b){var r=k.featureCollection.layers[b];if(!r.popupInfo&&!r.layerDefinition)r.popupInfo=a.popupInfo,r.layerDefinition=a.layerDefinition;else if(r.layerDefinition){if(t.isDefined(r.layerDefinition.minScale)&&t.isDefined(r.layerDefinition.maxScale)&&(r.layerDefinition.minScale!==a.layerDefinition.minScale||r.layerDefinition.maxScale!==a.layerDefinition.maxScale))delete a.layerDefinition.minScale,delete a.layerDefinition.maxScale;r.layerDefinition.drawingInfo&&c.toJson(r.layerDefinition.drawingInfo)!==
c.toJson(a.layerDefinition.drawingInfo)&&delete a.layerDefinition.drawingInfo;r.layerDefinition.showLegend!==a.layerDefinition.showLegend&&delete a.layerDefinition.showLegend;r.layerDefinition=m.mixin(r.layerDefinition,a.layerDefinition)}else r.layerDefinition=a.layerDefinition;r.featureSet=a.featureSet;r.nextObjectId=a.nextObjectId}):(k.featureCollection=k.featureCollection||{},k.featureCollection=m.mixin(k.featureCollection,r.featureCollection));q.callback(k)});return q}function oa(k,b,r){var c=
new d;g(["./csv"],function(q){var d=[];a.forEach(b.layers,function(a){a.featureSet&&(a.featureSet.features&&a.featureSet.features.length&&a.featureSet.features[0].geometry&&a.featureSet.features[0].geometry.spatialReference)&&(a.deferredsPos=d.length,d.push(q.projectFeatureCollection(a,r,a.featureSet.features[0].geometry.spatialReference)))});(new f(d)).addCallback(function(){a.forEach(b.layers,function(a){t.isDefined(a.deferredsPos)&&(d[a.deferredsPos].results&&d[a.deferredsPos].results.length?a=
d[a.deferredsPos].results[0]:(a.errors=a.errors||[],a.errors.push({message:"Errors projecting feature collection. ["+k.title+" - "+a.layerDefinition.name+"]"})),delete a.deferredsPos)});c.callback(b)})});return c}function sa(k,b,r,c,q){var y=new d,D=new d,e=[],E;a.forEach(k.operationalLayers,function(a){a.itemId&&"Feature Collection"==a.type&&e.push(Ba(a).then(m.hitch(null,xa,a,r)))});0===e.length?Ia(k,b,r,c,D,q):(E=new f(e),E.addCallback(function(a){Ia(k,b,r,c,D,q)}));D.then(function(k){e=[];a.forEach(k,
function(a){var k;a=a.layerObject;a instanceof G&&!a.loaded&&!a.loadError?(k=new d,n.once(a,"load, error",function(){k.callback(a)}),e.push(k)):a&&("esri.layers.WFSLayer"===a.declaredClass&&!a.loadError)&&(k=new d,n.once(a,"fromJsonComplete, error",function(b){k.callback(a)}),e.push(k))});if(e.length){var b=new d;E=new f(e);E.addCallback(function(){b.callback(k)});return b.promise}return k}).then(function(k){var b=[];a.forEach(k,function(a){var k=a.layerObject;k instanceof G?k.loaded&&(k.labelingInfo&&
(a.showLabels||k._collection))&&b.push(k):k&&"esri.layers.WFSLayer"===k.declaredClass&&k.loaded&&k.labelingInfo&&b.push(k)});b.length?g(["../layers/LabelLayer"],function(r){var c=new r;a.forEach(b,function(a){c.addFeatureLayer(a)});k.push({layerObject:c});y.callback(k)}):y.callback(k)});return y}function Ia(k,b,r,c,q,d){var y=[],D=[],e=[];a.forEach(k.operationalLayers,function(k,b){if(k.featureCollection&&k.featureCollection.layers){var r=k.featureCollection.layers.length;a.forEach(k.featureCollection.layers,
function(c,q){var d=!0;k.visibleLayers&&-1==a.indexOf(k.visibleLayers,q)&&(d=!1);c.visibility=k.visibility&&d;c.opacity=k.opacity;c.id=(k.id||"operational"+b)+"_"+q;k.title&&(c.title=1===r||!c.layerDefinition.name||k.title===c.layerDefinition.name?k.title:k.title+" - "+c.layerDefinition.name);e.push(c)},this)}else e.push(k)});a.forEach(k.baseMap.baseMapLayers,function(a,k){a.baseMapLayer=!0;a.id=a.id||"base"+k;y.push(a)});a.forEach(e,function(a,k){a.id=a.id||"operational"+k;y.push(a)});a.forEach(y,
function(a){a.url&&!a.type&&(a.deferredsPos=D.length,a.errors=a.errors||[],D.push(wa(a.url,a.errors)))});0===D.length?(r=r||ma(y),y=ka(y,b,r,c,d),q.callback(y)):(new f(D)).addCallback(function(a){pa(a,y,b,D,q,r,c,d)});return q}function Sa(k,b,r,c){var q=k.minScale,d=k.maxScale;if(10.1>=r.version&&b)for(k=b.length-1;0<=k;k--){if(b[k].id==c)if(0==q&&0<b[k].minScale?q=b[k].minScale:0<q&&0==b[k].minScale?q=r.minScale:0<q&&0<b[k].minScale&&(q=Math.min(q,b[k].minScale)),d=Math.max(r.maxScale||0,b[k].maxScale||
0),r.setScaleRange(q,d),-1<b[k].parentLayerId)c=b[k].parentLayerId;else break}else 10.1<r.version&&(a.forEach(k.layerInfos,function(a){a.id==c&&(0==q&&0<a.minScale?q=a.minScale:0<q&&0==a.minScale||0<q&&0<a.minScale&&(q=Math.min(q,a.minScale)),d=Math.max(d||0,a.maxScale||0))}),r.setScaleRange(q,d))}function Ka(k,r,c,q){var d=k.url,y=k.__popupIds,D=k.__popupUrls,e=k.__popupWhereClauses,f=k.__popupMinScales,E=k.__popupMaxScales,P=k.__resourceInfo,h=[];a.forEach(k.__popups,function(q,g){if(q){var aa,
n=[];a.forEach(q.fieldInfos,function(a){"shape"!==a.fieldName.toLowerCase()&&n.push(a.fieldName)});if(k.dynamicLayerInfos&&0<k.dynamicLayerInfos.length){var p=a.filter(k.dynamicLayerInfos,function(a){return y[g]==a.id})[0].source;aa=new G(d+"/dynamicLayer",{id:k.id+"_"+y[g],source:p,outFields:n,mode:G.MODE_SELECTION,infoTemplate:q&&new c(q),drawMode:!1,visible:k.visible,autoGeneralize:!0});var m=function(a,b){0<e[a].length&&b.setDefinitionExpression(e[a]);if(!t.isDefined(f[a])&&!t.isDefined(E[a]))Sa(k,
r||P.layers,b,y[a]);else if(t.isDefined(k.minScale)||t.isDefined(k.maxScale)){var c=k.minScale,q=k.maxScale;0==c&&0<f[a]?c=f[a]:0<c&&0==f[a]||0<c&&0<f[a]&&(c=Math.min(c,f[a]));q=Math.max(q||0,E[a]||0);b.setScaleRange(c,q)}else b.setScaleRange(f[a],E[a])};aa.loaded?m(g,aa):b.connect(aa,"onLoad",function(a){m(g,aa)})}else{var s=null,u=d+"/"+y[g];if(D[g].length)u=D[g];else if(r)for(p=0;p<r.length;p++)if(r[p].id===y[g]){s=r[p];break}aa=new G(X(u),{id:k.id+"_"+y[g],outFields:n,mode:G.MODE_SELECTION,infoTemplate:q&&
new c(q),drawMode:!1,visible:k.visible,resourceInfo:s,autoGeneralize:!0});aa.loaded?(0<e[g].length&&aa.setDefinitionExpression(e[g]),Sa(k,r||P.layers,aa,y[g])):b.connect(aa,"onLoad",function(a){0<e[g].length&&aa.setDefinitionExpression(e[g]);Sa(k,r||P.layers,a,y[g])})}h.push(aa)}});0<h.length&&(b.connect(k,"onVisibilityChange",m.hitch(this,function(k,b){a.forEach(k,function(a){b?a.show():a.hide()})},h)),b.connect(q,"onLayerRemove",m.hitch(this,function(k,b,r){k.id===r.id&&a.forEach(b,function(a){q.removeLayer(a)})},
k,h)));delete k.__popups;delete k.__popupIds;delete k.__popupUrls;delete k.__popupWhereClauses;delete k.__popupMinScales;delete k.__popupMaxScales;delete k.__resourceInfo;return h}function Oa(a){return w({url:X(a.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}})}function Qa(k,b,r){var c=[];a.forEach(k,function(a){var k=a.__popups;k&&(1<k.length&&10<=a.version)&&(a.__deferredsPos=c.length,c.push(Oa(a)))});var q=[];0<c.length?(new f(c)).addCallback(function(c){a.forEach(k,
function(a){a.__popups&&0<a.__popups.length&&(a.__deferredsPos||0===a.__deferredsPos?(q=q.concat(Ka(a,c[a.__deferredsPos][1].layers,r,b)),delete a.__deferredsPos):q=q.concat(Ka(a,null,r,b)))});b.addLayers(q)}):(a.forEach(k,function(a){a.__popups&&0<a.__popups.length&&(q=q.concat(Ka(a,null,r,b)))}),b.addLayers(q))}function Ta(k){a.forEach(k,function(k){var b=k.layer;b.toJson&&(k=b.toJson(),k.featureSet&&(b.name&&-1<b.name.indexOf("Text"))&&a.forEach(k.featureSet.features,function(a,k){if(a.attributes.TEXT){var r=
b.graphics[k];r.symbol.setText(a.attributes.TEXT);a.symbol.horizontalAlignment&&(r.symbol.align=a.symbol.horizontalAlignment);r.setSymbol(r.symbol);r.setAttributes(a.attributes)}},this))})}function Ua(k){var b=6;a.forEach(k,function(k){if(k=k.renderer)"esri.renderer.SimpleRenderer"===k.declaredClass?((k=k.symbol)&&k.xoffset&&(b=Math.max(b,Math.abs(k.xoffset))),k&&k.yoffset&&(b=Math.max(b,Math.abs(k.yoffset)))):("esri.renderer.UniqueValueRenderer"===k.declaredClass||"esri.renderer.ClassBreaksRenderer"===
k.declaredClass)&&a.forEach(k.infos,function(a){(a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset)));a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))})});return b}function Va(k){var b=this,r=b.infoWindow,c=k.graphic;if(b.loaded){r.hide();r.clearFeatures();var q=[];a.forEach(b.graphicsLayerIds,function(a){if((a=b.getLayer(a))&&a instanceof G&&a.loaded&&a.visible)a.clearSelection(),a.infoTemplate&&!a.suspended&&q.push(a)});a.forEach(b.layerIds,function(a){(a=b.getLayer(a))&&(-1!==a.declaredClass.indexOf("ArcGISImageServiceLayer")&&
a.loaded&&a.visible&&a.infoTemplate)&&q.push(a)});c=c&&c.getInfoTemplate()?c:null;if(q.length||c){var y=Ua(q),D=k.screenPoint,e=b.toMap(new A(D.x-y,D.y+y)),y=b.toMap(new A(D.x+y,D.y-y)),e=new C(e.x,e.y,y.x,y.y,b.spatialReference),f=new K;f.geometry=e;f.timeExtent=b.timeExtent;var E=!0,e=a.map(q,function(a){var b;-1!==a.declaredClass.indexOf("ArcGISImageServiceLayer")?(f.geometry=k.mapPoint,E=!1,b=a.queryVisibleRasters(f,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0}),b.addCallback(function(){return a.getVisibleRasters()})):
(b=a.selectFeatures(f),b.addCallback(function(){return a.getSelectedFeatures()}));return b});c&&(y=new d,y.callback([c]),e.splice(0,0,y));if(!a.some(e,function(a){return-1===a.fired})){var P=c?1:0;a.forEach(q,function(a){P=-1!==a.declaredClass.indexOf("ArcGISImageServiceLayer")?P+a.getVisibleRasters().length:P+a.getSelectedFeatures().length});if(!P)return}r.setFeatures(e);r.show(k.mapPoint,{closestFirst:E})}}}function Ra(a,k){var r=k.mapOptions||{},c;r.infoWindow||(c=new I({visibleWhenEmpty:!1},e.create("div")),
r.infoWindow=c);!t.isDefined(r.showInfoWindowOnClick)&&!k.usePopupManager&&(r.showInfoWindowOnClick=!1);r=new x(a,r);b.connect(r,"onLayersAddResult",Ta);return r}function ia(k,r,c,q,d,y){var D,e,f,E;q.map?(D=q.map,e=q.clickEventHandle,f=q.clickEventListener,E=q.errors):(D=Ra(q,d),!d.ignorePopups&&(!d.disableClickBehavior&&!d.usePopupManager)&&(e=b.connect(D,"onClick",Va),f=Va));D.addLayers(k);!d.ignorePopups&&!d.usePopupManager&&Qa(k,D,d._clazz);var P=E||[];a.forEach(r,function(a){a.errors&&(P=P.concat(a.errors))},
this);D.loaded?y.callback({map:D,itemInfo:c,errors:P,clickEventHandle:e,clickEventListener:f}):b.connect(D,"onLoad",function(){y.callback({map:D,itemInfo:c,errors:P,clickEventHandle:e,clickEventListener:f})})}function Y(k,b,r,c,q){var d=[];a.forEach(q,function(k){m.isArray(k.layerObject)?a.forEach(k.layerObject,function(a){d.push(a)}):d.push(k.layerObject)});if("BingMapsAerial"===q[0].type||"BingMapsRoad"===q[0].type||"BingMapsHybrid"===q[0].type)var y=setInterval(function(){if(q[0].layerObject&&
q[0].layerObject.loaded)clearInterval(y),qa(k,b,r,c,q,d);else if(q[0].errors){clearInterval(y);var a="";q[0].errors&&q[0].errors.length&&(a=" ("+q[0].errors[0].message+")");c.errback(Error(O.arcgis.utils.baseLayerError+a))}},10);else if(!d[0]&&q[0].baseMapLayer){var D="";q[0].errors&&q[0].errors.length&&(D=" ("+q[0].errors[0].message+")");c.errback(Error(O.arcgis.utils.baseLayerError+D))}else qa(k,b,r,c,q,d)}function qa(k,b,r,c,q,d){try{var y=r.mapOptions||{};r.mapOptions=y;var D=k.item;d=a.filter(d,
t.isDefined);if(D)if(D.extent&&D.extent.length)if(y.extent)ia(d,q,k,b,r,c);else{var e=new C(D.extent[0][0],D.extent[0][1],D.extent[1][0],D.extent[1][1],new v({wkid:4326})),f=d[0].spatialReference;4326===f.wkid?(y.extent=e,ia(d,q,k,b,r,c)):102100===f.wkid||102113===f.wkid||3857===f.wkid?(e.xmin=Math.max(e.xmin,-180),e.xmax=Math.min(e.xmax,180),e.ymin=Math.max(e.ymin,-89.99),e.ymax=Math.min(e.ymax,89.99),y.extent=z.geographicToWebMercator(e),ia(d,q,k,b,r,c)):r.geometryServiceURL||u.defaults.geometryService?
(r.geometryServiceURL?new M(r.geometryServiceURL):u.defaults.geometryService).project([e],f,function(a){a=a[0];y.extent=y.extent||a;ia(d,q,k,b,r,c)},function(){ia(d,q,k,b,r,c)}):c.errback(Error(O.arcgis.utils.geometryServiceError))}else ia(d,q,k,b,r,c);else ia(d,q,k,b,r,c)}catch(E){c.errback(E)}}function ta(k){var b=[];a.forEach(k.operationalLayers,function(a){a.featureCollection?b.push({featureCollection:a.featureCollection,visibility:a.visibility,title:a.title}):a.layerObject&&b.push({layer:a.layerObject,
visibility:a.visibility,title:a.title})});return b}function ba(k){var b=[];k=k.baseMap.baseMapLayers.concat(k.operationalLayers);a.forEach(k,function(k){var r={};if(k.featureCollection&&"CSV"!==k.type)!0===k.featureCollection.showLegend&&a.forEach(k.featureCollection.layers,function(a){if(!1!==a.showLegend){var c=a.layerObject.renderer;r={layer:a.layerObject,title:k.title,defaultSymbol:c&&c.defaultSymbol&&c.defaultLabel?!0:!1};1<k.featureCollection.layers.length&&(r.title+=" - "+a.layerDefinition.name);
b.push(r)}});else if(k.baseMapLayer&&!0===k.showLegend&&k.layerObject||!k.baseMapLayer&&!1!==k.showLegend&&k.layerObject&&!(k.layerObject instanceof G&&k.layerObject.mode===G.MODE_SELECTION)){var c=k.layerObject.renderer,q=k.layerObject.declaredClass,c=!c||c&&c.defaultSymbol&&c.defaultLabel?!0:!1;if(10.1>k.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===q||"esri.layers.ArcGISTiledMapServiceLayer"===q)||"esri.layers.ArcGISImageServiceLayer"===q)c=!0;r={layer:k.layerObject,title:k.title,
defaultSymbol:c};k.layers&&(q=a.map(a.filter(k.layers,function(a){return!1===a.showLegend}),function(a){return a.id}),q.length&&(r.hideLayers=q));b.push(r)}});return b}function va(k,b){function r(k,b){a.forEach(k,function(a,k){switch(a){case qb:V=b[k];break;case ub:ca=b[k];break;case Za:R=b[k];break;case Fa:ea=b[k];break;case rb:ha=b[k];break;case kb:la=b[k];break;case jb:Z=b[k];break;case $a:da=b[k];break;case vb:W=b[k];break;case Na:Pb=b[k];break;case wb:Kb=b[k];break;case xb:tb=b[k];break;case fb:Lb=
b[k];break;case ua:Eb=b[k];break;case yb:Mb=b[k];break;case zb:Ya=b[k];break;case lb:bb=b[k];break;case mb:Fb=b[k];break;case gb:Pa=b[k];break;case Gb:Hb=b[k];break;case hb:Ib=b[k];break;case Ab:Cb=b[k];break;case nb:Db=b[k]}})}var c=new d,q=k.itemData,y=[];q.baseMap&&q.baseMap.baseMapLayers&&(y=y.concat(q.baseMap.baseMapLayers));q.operationalLayers&&(y=y.concat(q.operationalLayers));for(var q=a.map(y,function(a){return a&&a.layerType}),D=[],e=[],y=!1,f=0;f<q.length;f++){switch(q[f]){case "ArcGISFeatureLayer":-1===
a.indexOf(D,wb)&&D.push(wb);break;case "ArcGISImageServiceLayer":case "ArcGISTiledImageServiceLayer":-1===a.indexOf(D,ub)&&(D.push(ub),e.push(vb),e.push(fb),e.push(yb));break;case "ArcGISImageServiceVectorLayer":-1===a.indexOf(D,Za)&&(D.push(Za),e.push(vb),e.push(fb),e.push(yb));break;case "ArcGISMapServiceLayer":case "ArcGISTiledMapServiceLayer":-1===a.indexOf(D,qb)&&(D.push(qb),e.push(kb),e.push($a),e.push(xb));break;case "ArcGISStreamLayer":-1===a.indexOf(D,zb)&&D.push(zb);break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===
a.indexOf(D,gb)&&D.push(gb);break;case "CSV":-1===a.indexOf(D,rb)&&(D.push(rb),e.push(Fa));break;case "GeoRSS":-1===a.indexOf(D,jb)&&D.push(jb);break;case "KML":-1===a.indexOf(D,Na)&&D.push(Na);break;case "OpenStreetMap":-1===a.indexOf(D,ua)&&D.push(ua);break;case "VectorTileLayer":-1===a.indexOf(D,mb)&&D.push(mb);break;case "WebTiledLayer":-1===a.indexOf(D,Gb)&&(D.push(Gb),e.push(lb));break;case "WFS":-1===a.indexOf(D,hb)&&D.push(hb);break;case "WMS":-1===a.indexOf(D,Ab)&&(D.push(Ab),e.push(nb));
break;default:y=!0}if(y)break}y&&(D=Bb,e=Jb);D.length?g(D,function(){r(D,arguments);e.length?g(e,function(){r(e,arguments);c.resolve()}):c.resolve()}):c.resolve();return c}function Ca(k,b,r,c){var y=c.itemData;y.baseMap&&(y.baseMap.baseMapLayers&&y.baseMap.baseMapLayers.length)&&(y.baseMap.baseMapLayers[0].firstLayer=!0);var D=b.layerMixins,e=D&&D.length;if(e){var f=function(a){for(var k=0;k<e;k++){var b=D[k];if(b.mixin)if(b.hasOwnProperty("id")){if(a.id===b.id){m.mixin(a,b.mixin);break}}else if(a.url===
b.url){m.mixin(a,b.mixin);break}}};a.forEach(y.baseMap&&y.baseMap.baseMapLayers,f);a.forEach(y.operationalLayers,f)}va(c,b).then(function(){return q(c,b)}).then(function(){return N(c,b)}).then(function(b){var c=b[0],q=b[1];if(!c.itemData.operationalLayers||0===c.itemData.operationalLayers.length)Q(c,q).addCallback(function(a){sa(a.itemData,q).addCallback(m.hitch(null,Y,a,k,q,r))});else{var y=new d,D=c.itemData.baseMap.baseMapLayers.slice(),e=a.filter(c.itemData.baseMap.baseMapLayers,function(a){return!a.isReference});
b={item:c.item,itemData:{baseMap:{baseMapLayers:e}}};c.itemData.baseMap.baseMapLayers=a.filter(c.itemData.baseMap.baseMapLayers,function(a){return a.isReference});Q(b,q).addCallback(function(a){sa(a.itemData,q).addCallback(m.hitch(null,Y,a,k,q,y))});y.then(function(a){Q(c,q).addCallback(function(k){sa(k.itemData,q,a.map.spatialReference,e,a.map).addCallback(function(b){k.itemData.baseMap.baseMapLayers=D;Y(k,a,q,r,b)})})},m.hitch(r,r.errback))}})}function ga(a,k){"undefined"===typeof k&&(k=!0);fa._arcgisUrl&&
0<fa._arcgisUrl.length&&(fa.arcgisUrl=fa._arcgisUrl);var b=fa.arcgisUrl+"/"+a,r={},c=new d;w({url:b,content:{f:"json"},callbackParamName:"callback",load:function(a){r.item=a;k?w({url:b+"/data",content:{f:"json"},callbackParamName:"callback",load:function(a){r.itemData=a;c.callback(r)},error:function(a){c.errback(a)}}):c.callback(r)},error:function(a){c.errback(a)}});return c}var fa,V,ca,R,ea,ha,la,Z,da,W,Pb,Kb,tb,Lb,Eb,Mb,Ya,bb,Fb,Pa,Hb,Ib,Cb,Db,qb="../layers/ArcGISDynamicMapServiceLayer",ub="../layers/ArcGISImageServiceLayer",
Za="../layers/ArcGISImageServiceVectorLayer",Fa="./csv",rb="../layers/CSVLayer",kb="../layers/DynamicLayerInfo",jb="../layers/GeoRSSLayer",$a="../layers/ImageParameters",vb="../layers/ImageServiceParameters",Na="../layers/KMLLayer",wb="../layers/LabelClass",xb="../layers/LayerDrawingOptions",fb="../layers/MosaicRule",ua="../layers/OpenStreetMapLayer",yb="../layers/RasterFunction",zb="../layers/StreamLayer",lb="../layers/TileInfo",mb="../layers/VectorTileLayer",gb="../virtualearth/VETiledLayer",Gb=
"../layers/WebTiledLayer",hb="../layers/WFSLayer",Ab="../layers/WMSLayer",nb="../layers/WMSLayerInfo",Bb=[qb,ub,Za,rb,jb,Na,wb,ua,zb,mb,gb,Gb,hb,Ab],Jb=[Fa,kb,$a,vb,xb,fb,yb,lb,nb];fa={arcgisUrl:B.getProtocolForWebResource()+"//www.arcgis.com/sharing/rest/content/items",getItem:ga,createMap:function(a,k,b){var r=new d;b=b||{};var c=b.infoTemplateClass;b._clazz=c&&(m.isObject(c)?c:m.getObject(c))||J;m.isString(a)?ga(a).addCallback(m.hitch(null,Ca,k,b,r)).addErrback(m.hitch(r,r.errback)):Ca(k,b,r,a);
return r},getLayerList:function(a){return a&&a.itemInfo&&a.itemInfo.itemData?ta(a.itemInfo.itemData):[]},getLegendLayers:function(a){return a&&a.itemInfo&&a.itemInfo.itemData?ba(a.itemInfo.itemData):[]},_arcgisUrl:null,_getItemProps:Q,_getItemData:S,_getBingKey:U,_portalUrlResponse:k,_portalUrlFailure:r,_processFSItemProperties:T,_processSSItemProperties:E,_getLayers:sa,_preBuildLayerObjects:pa,_buildLayerObjects:ka,_preCreateMap:Y,_getMapSR:ma,_createMap:ia,_addSelectionLayers:Qa,_createSelectionFeatureLayers:Ka,
_getServiceInfo:wa,_getFeatureCollectionItem:Ba,_mergeFeatureCollectionItem:xa,_projectFeatureCollection:oa,_getLayersInfo:Oa,_initLayer:Ma,_loadAsCached:na,_loadAsDynamic:Ea,_processPopups:D,_onLayersAddResult:Ta,_sameSpatialReferenceAsBasemap:Aa,_sameTilingSchemeAsBasemap:za,_showPopup:Va,_calculateClickTolerance:Ua,_getVisibleFeatureLayers:Da,_updateLayerScaleInfo:Sa,_checkUrl:X,_isHostedService:P,_isAgolService:aa,_getLegendLayers:ba};m.setObject("arcgis.utils",fa,s);return fa})},"dojo/DeferredList":function(){define(["./_base/kernel",
"./_base/Deferred","./_base/array"],function(g,m,a){g.DeferredList=function(b,d,c,h,g){var f=[];m.call(this);var e=this;0===b.length&&!d&&this.resolve([0,[]]);var p=0;a.forEach(b,function(a,g){function n(a,c){f[g]=[a,c];p++;p===b.length&&e.resolve(f)}a.then(function(a){d?e.resolve([g,a]):n(!0,a)},function(a){c?e.reject(a):n(!1,a);if(h)return null;throw a;})})};g.DeferredList.prototype=new m;g.DeferredList.prototype.gatherResults=function(b){b=new g.DeferredList(b,!1,!0,!1);b.addCallback(function(b){var c=
[];a.forEach(b,function(a){c.push(a[1])});return c});return b};return g.DeferredList})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),function(g,m,a,b,d,c,h,n,f,
e,p,s,u,t,w,v,x,B,A,C,z,F,H,J){var I={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},K={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},M=b.connect,L=b.disconnect,G=u.create,O=w.set,S=d.hitch,U=t.getMarginBox,T=m.deprecated,E=d.mixin,Q=0;return a(F,{declaredClass:"esri.Map",constructor:function(a,b){E(this,{_slider:null,_navDiv:null,_mapParams:E({attributionWidth:0.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",sliderPosition:"top-left",
sliderOrientation:"vertical",autoResize:!0},b||{})});E(this,{isDoubleClickZoom:!1,isShiftDoubleClickZoom:!1,isClickRecenter:!1,isScrollWheelZoom:!1,isPan:!1,isRubberBandZoom:!1,isKeyboardNavigation:!1,isPanArrows:!1,isZoomSlider:!1});d.isFunction(B._css)&&(B._css=B._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);var k=C("esri-transforms")&&C("esri-transitions");this.navigationMode=this._mapParams.navigationMode||k&&"css-transforms"||"classic";"css-transforms"===
this.navigationMode&&!k&&(this.navigationMode="classic");this.fadeOnZoom=z.isDefined(this._mapParams.fadeOnZoom)?this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=b&&b.smartNavigation;if(!z.isDefined(this.smartNavigation)&&C("mac")&&!C("esri-touch")&&!C("esri-pointer")&&!(3.5>=C("ff"))){var r=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|\_)([\d]+)\D/i);r&&(z.isDefined(r[1])&&
z.isDefined(r[3]))&&(k=parseInt(r[1],10),r=parseInt(r[3],10),this.smartNavigation=10<k||10===k&&6<=r)}this.showAttribution=z.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=M(this,"onLoad",this,"_onLoadInitNavsHandler");var y=G("div",{"class":"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(k=d.getObject("esri.dijit.Attribution",!1))this._initAttribution(k,y);else{var D=Q++,e=this;this._rids&&
this._rids.push(D);g(["./dijit/Attribution"],function(a){var k=e._rids?c.indexOf(e._rids,D):-1;-1!==k&&(e._rids.splice(k,1),e._initAttribution(a,y))})}this._mapParams.logo&&(k={},6===C("ie")&&(k.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+g.toUrl("./images/map/logo-med.png")+"')"),this._ogol=G("div",{style:k,tabIndex:"0",title:"Esri"},y),this._setLogoSize(),this._onMapResizeLogo_connect=M(this,"onResize",this,"_setLogoSize"),this._ogol_connect=
M(this._ogol,v,this,"_openLogoLink"));this.navigationManager=new H(this);b&&b.basemap&&(this._onLoadFix=!0,this.setBasemap(b.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize)k=this._getEnclosingResizableWidget(this.container)||window,r=this.resize,this._rszSignal=n.pausable(k,"resize",r),this._oriSignal=n.pausable(window,"orientationchange",r),f.after(k,"resize",r,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);this._persistentTimer=
setTimeout(this._timedResize,2*this.resizeDelay)},_getEnclosingResizableWidget:function(a){var b=x.getEnclosingWidget(a);return!b?b:b.resize?b:this._getEnclosingResizableWidget(a.parentNode)},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(s.remove(this._ogol,"logo-med"),s.add(this._ogol,"logo-sm")):(s.remove(this._ogol,"logo-sm"),s.add(this._ogol,"logo-med")))},_initAttribution:function(a,b){var k=G("span",{"class":"esriAttribution"},b,"first");O(k,"maxWidth",
Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(M(k,v,function(){s.contains(this,"esriAttributionOpen")?s.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&s.add(this,"esriAttributionOpen")}));this.attribution=new a({map:this},k)},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var a=this._slider;a&&(a.destroy&&!a._destroyed)&&a.destroy();var a=this._navDiv,b=this.attribution;a&&u.destroy(a);b&&b.destroy();this._connects.push(this._slider_connect,
this._ogol_connect,this._rszSignal,this._oriSignal);c.forEach(this._connects,L);clearInterval(this._persistentTimer);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(a){var b=this.getLevel();return!this.__tileInfo||!(b===this.getMinZoom()&&0>a||b===this.getMaxZoom()&&
0<a)},_onLoadInitNavsHandler:function(){this.enableMapNavigation();this._createNav();if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();else if(this._mapParams.slider){var a=-1!==this._getSliderClass(!0).indexOf("Horizontal"),a=[a?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",a?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",a?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(c.some(a,function(a){return!d.getObject(a,!1)})){var a=
c.map(a,function(a){return a.replace(/\./g,"/")}),b=Q++,k=this;this._rids&&this._rids.push(b);g(a,function(){var a=k._rids?c.indexOf(k._rids,b):-1;-1!==a&&(k._rids.splice(a,1),k._createSlider.apply(k,arguments))})}else a=c.map(a,function(a){return d.getObject(a,!1)}),this._createSlider.apply(this,a)}L(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var a,b,k,r=s.add,c=this.id;this._navDiv=G("div",{id:c+"_navdiv"},this.root);r(this._navDiv,"navDiv");var d=this.width/2,e=
this.height/2,f;for(k in I)b=I[k],a=G("div",{id:c+"_pan_"+k},this._navDiv),r(a,"fixedPan "+b),"up"===k||"down"===k?(f=parseInt(U(a).w,10)/2,O(a,{left:d-f+"px",zIndex:30})):(f=parseInt(U(a).h,10)/2,O(a,{top:e-f+"px",zIndex:30})),this._connects.push(M(a,"onclick",S(this,this[b])));this._onMapResizeNavHandler_connect=M(this,"onResize",this,"_onMapResizeNavHandler");for(k in K)b=K[k],a=G("div",{id:c+"_pan_"+k,style:{zIndex:30}},this._navDiv),r(a,"fixedPan "+b),this._connects.push(M(a,"onclick",S(this,
this[b])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(a,b,k){a=this.id;b/=2;k/=2;var r=e.byId,c,d,f;for(c in I)d=r(a+"_pan_"+c),"up"===c||"down"===c?(f=parseInt(U(d).w,10)/2,O(d,"left",b-f+"px")):(f=parseInt(U(d).h,10)/2,O(d,"top",k-f+"px"))},_createSimpleSlider:function(){if(this._mapParams.slider){var a=this._slider=G("div",{id:this.id+"_zoom_slider","class":this._getSliderClass(),style:{zIndex:30}}),b=G("div",{"class":"esriSimpleSliderIncrementButton",tabIndex:"0",role:"button"},a),
k=G("div",{"class":"esriSimpleSliderDecrementButton",tabIndex:"0",role:"button"},a);this._addZoomButtonTooltips(b,k);this._incButton=b;this._decButton=k;this._simpleSliderZoomHandler(null,null,null,this.getLevel());var r=J.widgets.zoomSlider;this._addZoomButtonIcon(b,"+",r.zoomIn);this._addZoomButtonIcon(k,"\x26minus;",r.zoomOut);8>C("ie")&&s.add(k,"dj_ie67Fix");this._connects.push(M(b,v,this,this._simpleSliderChangeHandler));this._connects.push(M(k,v,this,this._simpleSliderChangeHandler));(-1<this.getMaxZoom()||
-1<this.getMinZoom())&&this._connects.push(M(this,"onZoomEnd",this,this._simpleSliderZoomHandler));10>C("ie")&&e.setSelectable(a,!1);this.root.appendChild(a);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(a){h.stop(a);a=-1!==a.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:a?1:-1})},_simpleSliderZoomHandler:function(a,b,k,r){var c;a=this._incButton;b=this._decButton;-1<r&&r===this.getMaxZoom()?c=a:-1<r&&r===this.getMinZoom()&&(c=b);c?(s.add(c,"esriSimpleSliderDisabledButton"),
s.remove(c===a?b:a,"esriSimpleSliderDisabledButton")):(s.remove(a,"esriSimpleSliderDisabledButton"),s.remove(b,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(a){a=a?"Large":"Simple";var b=this._mapParams.sliderOrientation,k=this._mapParams.sliderPosition||"",b=b&&"horizontal"===b.toLowerCase()?"esri"+a+"SliderHorizontal":"esri"+a+"SliderVertical";if(k)switch(k.toLowerCase()){case "top-left":k="esri"+a+"SliderTL";break;case "top-right":k="esri"+a+"SliderTR";break;case "bottom-left":k=
"esri"+a+"SliderBL";break;case "bottom-right":k="esri"+a+"SliderBR"}return"esri"+a+"Slider "+b+" "+k},_addZoomButtonIcon:function(a,b,k){u.create("span",{"aria-hidden":"true",role:"presentation",innerHTML:b},a);u.create("span",{"class":"esriIconFallbackText",innerHTML:k},a)},_addZoomButtonTooltips:function(a,b){var k=J.widgets.zoomSlider;p.set(a,"title",k.zoomIn);p.set(b,"title",k.zoomOut)},_createSlider:function(a,b,k){if(this._mapParams.slider){var r=G("div",{id:this.id+"_zoom_slider"},this.root),
d=A.defaults.map,D=this._getSliderClass(!0),e=-1!==D.indexOf("Horizontal"),f=this.getNumLevels();if(0<f){var E,h,g=this._mapParams.sliderLabels,n=!!g,p=!1!==g;if(p){var m=e?"bottomDecoration":"rightDecoration";if(!g){g=[];for(d=0;d<f;d++)g[d]=""}c.forEach([{"class":"esriLargeSliderTicks",container:m,count:f,dijitClass:b},{"class":n&&"esriLargeSliderLabels",container:m,count:f,labels:g,dijitClass:k}],function(a){var k=G("div"),c=a.dijitClass;delete a.dijitClass;r.appendChild(k);c===b?E=new c(a,k):
h=new c(a,k)})}a=this._slider=new a({id:r.id,"class":D,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:f,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},r);a.startup();p&&(E.startup(),h.startup());this._slider_connect=M(a,"onChange",this,"_onSliderChangeHandler");this._connects.push(M(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(M(a._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{a=this._slider=new a({id:r.id,
"class":D,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:d.sliderChangeImmediate,style:"height:50px; z-index:30;"},r);k=a.domNode.firstChild.childNodes;for(d=1;3>=d;d++)O(k[d],"visibility","hidden");a.startup();this._slider_connect=M(a,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(M(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}d=a.incrementButton;k=a.decrementButton;e?this._addZoomButtonTooltips(d,k):this._addZoomButtonTooltips(k,
d);d.style.outline="none";k.style.outline="none";a.sliderHandle.style.outline="none";a._onKeyPress=function(){};if(e=a._movable){var s=e.onMouseDown;e.onMouseDown=function(a){9>C("ie")&&1!==a.button||s.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){L(this._slider_connect);L(this._slidermovestop_connect);this._slider_connect=M(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=M(this._slider._movable,"onMoveStop",this,"_onSliderMoveEndHandler")},
_onSliderChangeDragHandler:function(a){this._extentUtil({targetLevel:a})},_onSliderMoveEndHandler:function(){L(this._slider_connect);L(this._slidermovestop_connect)},_onSliderChangeHandler:function(a){this.setLevel(a)},_updateSliderValue:function(a,b){L(this._slider_connect);var k=this._slider,r=k._onChangeActive;k._onChangeActive=!1;k.set("value",a);k._onChangeActive=r;this._slider_connect=M(k,"onChange",this,b)},_onExtentChangeSliderHandler:function(a,b,k,r){L(this._slidermovestop_connect);this._updateSliderValue(r.level,
"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(a){this._extentUtil({numLevels:0<a?1:-1})},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(a){window.open(A.defaults.map.logoLink,"_blank");h.stop(a)},enableMapNavigation:function(){this.navigationManager.enableNavigation()},disableMapNavigation:function(){this.navigationManager.disableNavigation()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.navigationManager.enableDoubleClickZoom(),
this.isDoubleClickZoom=!0)},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&(this.navigationManager.disableDoubleClickZoom(),this.isDoubleClickZoom=!1)},enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(T(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&
(T(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.navigationManager.enableClickRecenter(),this.isClickRecenter=!0)},disableClickRecenter:function(){this.isClickRecenter&&(this.navigationManager.disableClickRecenter(),this.isClickRecenter=!1)},enablePan:function(){this.isPan||
(this.navigationManager.enablePan(),this.isPan=!0)},disablePan:function(){this.isPan&&(this.navigationManager.disablePan(),this.isPan=!1)},enableRubberBandZoom:function(){this.isRubberBandZoom||(this.navigationManager.enableRubberBandZoom(),this.isRubberBandZoom=!0)},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.navigationManager.disableRubberBandZoom(),this.isRubberBandZoom=!1)},enableKeyboardNavigation:function(){this.isKeyboardNavigation||(this.navigationManager.enableKeyboardNavigation(),
this.isKeyboardNavigation=!0)},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.navigationManager.disableKeyboardNavigation(),this.isKeyboardNavigation=!1)},enableScrollWheelZoom:function(){this.isScrollWheelZoom||(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display=
"block",this.isPanArrows=!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&(O(this._slider.domNode||this._slider,"visibility","inherit"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&(O(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)}})})},"esri/_coremap":function(){define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./arcade/Dictionary ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/VectorTileLayer ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M,L,G,O,S,U,T,E,Q,N,q,k,r,y,D,P,aa,X,na,Da){function Ea(a,k){var b=a.lods;b.sort(function(a,k){return a.scale>k.scale?-1:a.scale<k.scale?1:0});var r=[],b=n.filter(b,function(a){if(-1===ja(r,a.scale))return r.push(a.scale),!0}),c=k.lods=[],q;n.forEach(b,function(a,k){q=c[k]=new D(a);q.level=k});k.tileInfo=new y(wa(a,{lods:c}))}var Ha,Aa=q.toMapPoint,za=q.toScreenPoint,Ma=d.connect,ka=d.disconnect,ma=h.hitch,pa=v.set,ja=n.indexOf,wa=h.mixin,
Ba=0,xa=z.defaults.map,oa=xa.layerNamePrefix,sa=xa.graphicsLayerNamePrefix,Ia=RegExp("^"+oa+"(\\d+)$"),Sa=RegExp("^"+sa+"(\\d+)$"),Ka=function(){};return b([J,G],{declaredClass:"esri._CoreMap",resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',invalidBasemap:'Unable to add basemap: "${basemapName}".',
unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],load:["map"],pan:["extent","delta"],"pan-end":["extent",
"delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,
"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(a,k){var b=this;this.registerConnectEvents();wa(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_layerSize:0,_connects:[],_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,
_cursor:null,_ratioW:1,_ratioH:1,_params:null,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[]});var r=this.container=p.byId(a),c=this.id=s.get(r,"id")||B.getUniqueId(this.declaredClass);u.add(r,"map");var q=w.getContentBox(r),d=u.add,y=t.create;this.position=new U(0,0);this._reposition();var D=this.width=0<q.w?q.w:xa.width,f=this.height=0<
q.h?q.h:xa.height,P=this.root=y("div",{id:c+"_root",style:{width:D+"px",height:f+"px",direction:"ltr"}});d(P,"esriMapContainer");q=this.__container=y("div",{id:c+"_container"},P);pa(q,"position","absolute");d(q,"esriMapContainer");r.appendChild(P);r=this._params=wa({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},k||{});this.wrapAround180=r.wrapAround180;this.optimizePanAnimation=
r.optimizePanAnimation;H.isDefined(r.resizeDelay)&&(this.resizeDelay=r.resizeDelay);r.lods&&(Ea({rows:512,cols:512,dpi:96,format:"JPEG",compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:r.lods},r),this.__tileInfo=r.tileInfo);this.extent=r.extent;this._extentUtil({mapCenter:r.center,targetLevel:r.zoom,targetScale:r.scale});this.__visibleRect=new E(0,0,D,f);this.__visibleDelta=new E(0,0,D,f);c=this._layersDiv=y("div",{id:c+"_layers"});d(c,"esriMapLayers");q.appendChild(c);
this._zoomAnimDiv=y("div",{style:{position:"absolute"}});r.infoWindow?this.infoWindow=r.infoWindow:(d=this.infoWindow=new Da(r.popupOptions,y("div")),d.startup(),d._ootb=!0,pa(d.domNode,"zIndex",40));r.showLabels&&(g(["./layers/LabelLayer"],function(a){Ha=a;b._createLabelLayer()}),this.on("load",function(){b._createLabelLayer()}));this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:r.showInfoWindowOnClick});this._zoomStartHandler=ma(this,this._zoomStartHandler);this._zoomingHandler=
ma(this,this._zoomingHandler);this._zoomEndHandler=ma(this,this._zoomEndHandler);this._panningHandler=ma(this,this._panningHandler);this._panEndHandler=ma(this,this._panEndHandler);this._endTranslate=ma(this,this._endTranslate);this._timedResize=ma(this,this._timedResize);this._execResize=ma(this,this._execResize);this._processLabelLayers=ma(this,this._processLabelLayers);this._updateLabelLayers=ma(this,this._updateLabelLayers);this.resize=ma(this,this.resize);e.addOnWindowUnload(this,this.destroy)},
_getAbsMid:function(a){return g.toAbsMid?g.toAbsMid(a):m.id.replace(/\/[^\/]*$/ig,"/")+a},_cleanUp:function(){var a=this.infoWindow;a&&(a._ootb&&a.destroy?a.destroy():a.unsetMap(this),delete this.infoWindow);ka(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");t.destroy(this.root);this.root=null},_addLayer:function(a,k,b){if(a.id){var c=a.id.match(a instanceof r?Sa:Ia);c&&c[1]&&(c=Number(c[1]),Ba<=c&&(Ba=c+1))}var q=a.id||(a instanceof r?sa:oa)+Ba++;a.id=q;this._layers[q]=
a;var d,y;if(k===this.layerIds||k===this.graphicsLayerIds)d=this._layerSize,this._layerSize++;a._isRefLayer="top"===b;b=!H.isDefined(b)||0>b||b>k.length||"top"===b?k.length:b;0===d&&(this._firstLayerId=q);if(!a._isRefLayer)for(;(y=this.getLayer(k[b-1]))&&y._isRefLayer;)b--;k.splice(b,0,q);var D=ma(this,this._addLayerHandler),e=this;b=this._connects;c=function(){a.loaded?e._onLoadFix?(e._onLoadFix=!1,setTimeout(function(){D(a)},0)):D(a):(e["_"+q+"_addtoken_load"]=Ma(a,"onLoad",e,"_addLayerHandler"),
e["_"+q+"_addtoken_err"]=Ma(a,"onError",e,function(b){D(a,b,k)}))};this.loaded||0===d||a.loaded&&-1===ja(this.graphicsLayerIds,q)?c():b.push(Ma(this,"onLoad",c));return a},_addLayerHandler:function(a,k,b){var c=this.id,q=a.id,d=ja(a instanceof r?this.graphicsLayerIds:this.layerIds,q),y=d,D=!1,e=this._params;ka(this["_"+q+"_addtoken_load"]);ka(this["_"+q+"_addtoken_err"]);if(k)delete this._layers[q],-1!==d&&(b.splice(d,1),this.onLayerAddResult(a,k));else{-1===d&&(d=ja(this._internalLayerIds,q),y=20+
d,D=!0);if(q===this._firstLayerId){k=a.spatialReference;if((b=this.extent&&this.extent.spatialReference)&&!b.equals(k)&&(a.tileInfo||!a.url))b=null;b=this.spatialReference=b||k;this.wrapAround180=this.wrapAround180&&b&&b._isWrappable()?!0:!1;a.tileInfo&&(this.__tileInfo?(k=this.__tileInfo.lods,this.__tileInfo=wa({},a.tileInfo),this.__tileInfo.lods=k):(Ea(wa({},a.tileInfo),e),this.__tileInfo=e.tileInfo));if(this.wrapAround180){k=this.__tileInfo;b=b._getInfo();if(!k||Math.abs(b.origin[0]-k.origin.x)>
b.dx)this.wrapAround180=!1;this.wrapAround180&&k&&M._addFrameInfo(k,b)}e.units=a.units;if((k=this.__tileInfo&&this.__tileInfo.lods)&&k.length){b=e.minScale;var d=e.maxScale,f=-1,E=-1,P=!1,h=!1,g;for(g=0;g<k.length;g++)0<b&&(!P&&b>=k[g].scale)&&(f=k[g].level,P=!0),0<d&&(!h&&d>=k[g].scale)&&(E=0<g?k[g-1].level:-1,h=!0);-1===e.minZoom&&(e.minZoom=0===b?k[0].level:f);-1===e.maxZoom&&(e.maxZoom=0===d?k[k.length-1].level:E);for(g=0;g<k.length;g++)e.minZoom===k[g].level&&(e.minScale=k[g].scale),e.maxZoom===
k[g].level&&(e.maxScale=k[g].scale)}else e.minZoom=e.maxZoom=e.zoom=-1}a instanceof r?(this._gc||(this._gc=new r._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=c+"_gc"),y=a._setMap(this,this._gc._surface),y.id=c+"_"+q,this._layerDivs[q]=y,this._reorderLayers(this.graphicsLayerIds)):(y=a._setMap(this,this._layersDiv,y,this.__LOD),y.id=c+"_"+q,this._layerDivs[q]=y,this._reorderLayers(this.layerIds),!D&&-1!==a.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerAdd(a));q===this._firstLayerId&&
(this.graphics=new r({id:c+"_graphics",displayOnPan:e.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20));if(a===this.graphics){b=this._layers[this._firstLayerId];c=e.zoom;y=e.scale;k=e.center;b=b.initialExtent||b.fullExtent;this._firstLayerId=null;this.extent&&(this.extent=this._convertGeometry(this,this.extent));!this.extent&&b&&(k&&(k=this._convertGeometry(b,k)),k&&(b=b.centerAt(k)));if(k=this.extent||b&&new T(b.toJson()))-1<c?k=this.__getExtentForLevel(c,null,k).extent:
0<y&&(k=N.getExtentForScale(this,y,k));if(!k)return;e=this._fixExtent(k,e.fitExtent);this.extent=e.extent;this.__LOD=e.lod;this.__setExtent(this.extent);this.loaded=!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this)}D||(this.onLayerAdd(a),this.onLayerAddResult(a));ka(this[q+"_addLayerHandler_connect"])}},_convertGeometry:function(a,b){var r=a&&a.spatialReference,c=b&&b.spatialReference;r&&(c&&!r.equals(c))&&(r._canProject(c)?r.isWebMercator()?b=k.geographicToWebMercator(b):
4326===r.wkid&&(b=k.webMercatorToGeographic(b,!0)):b=null);return b},_reorderLayers:function(a){var k=this.onLayerReorder,b=t.place,r=this._layerDivs,c=this._layers,q=this._gc?this._gc._surface.getEventSource():null;if(a===this.graphicsLayerIds)n.forEach(a,function(a,d){var y=r[a];y&&(b(y.getEventSource(),q,d),k(c[a],d))});else{var d=this.graphics,y=d?d.id:null,D=this._layersDiv,e;n.forEach(a,function(a,q){e=r[a];a!==y&&e&&(b(e,D,q),k(c[a],q))});this._mapImageLyr&&this._placeMapImageLyr();q&&(q=9>
x("ie")?q.parentNode:q,b(q,q.parentNode,a.length))}this.onLayersReordered([].concat(a))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor)},_zoomingHandler:function(a){var k=parseFloat(a.left),b=parseFloat(a.top);a=new T(k,b-parseFloat(a.height),k+parseFloat(a.width),b,this.spatialReference);k=this.extent.getWidth()/a.getWidth();this.__zoom(a,k,this._zoomAnimDiv.anchor)},_zoomEndHandler:function(){var a=this._zoomAnimDiv,k=a.extent,b=this.extent.getWidth()/
k.getWidth(),r=a.anchor,c=a.newLod,q=a.levelChange;a.extent=a.anchor=a.levelChange=a.startingExtent=a.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(k,b,r,c,q)},_panningHandler:function(a){if(isNaN(parseFloat(a.left))||isNaN(parseFloat(a.top))){var k=Math.round,b=this._panAnim.node;a.left=-1*(this._delta.x-k(this.width/2))+"px";a.top=-1*(this._delta.y-k(this.height/2))+"px";v.set(b,"left",a.left);v.set(b,"top",a.top)}a=new U(parseFloat(a.left),parseFloat(a.top));k=this.toMap(a);this.onPan(this.extent.offset(this.extent.xmin-
k.x,this.extent.ymax-k.y),a)},_panEndHandler:function(a){this.__panning=!1;var k=Math.round;a=new U(-k(parseFloat(a.style.left)),-k(parseFloat(a.style.top)));var k=a.x,b=a.y,r=this.__visibleRect,c=this.__visibleDelta;r.x+=-k;r.y+=-b;c.x+=-k;c.y+=-b;pa(this._zoomAnimDiv,{left:"0px",top:"0px"});var r=this.extent,c=this._ratioW,q=this._ratioH,r=new T(r.xmin+k/c,r.ymin-b/q,r.xmax+k/c,r.ymax-b/q,this.spatialReference);a.setX(-a.x);a.setY(-a.y);this._delta=this._panAnim=null;this._updateExtent(r);this.onPanEnd(r,
a);this._fireExtChg([r,a,!1,this.__LOD])},_fixExtent:function(a,k){for(var b=this._reshapeExtent(a),r=1.25;!0===k&&(b.extent.getWidth()<a.getWidth()||b.extent.getHeight()<a.getHeight())&&0<b.lod.level&&3>=r;)b=this._reshapeExtent(a.expand(r)),r+=0.25;return b},_getFrameWidth:function(){var a=-1,k=this.spatialReference._getInfo();this.__LOD?(k=this.__LOD._frameInfo)&&(a=k[3]):k&&(a=Math.round(2*k.valid[1]/(this.extent.getWidth()/this.width)));return a},_fixAspectRatio:function(a){var k=a.getWidth(),
b=a.getHeight(),r=k/b,c=this.width/this.height,q=0,d=0;this.width>this.height?k>b?c>r?q=b*c-k:d=k/c-b:q=b*c-k:this.width<this.height?k<b?c>r?q=b*c-k:d=k/c-b:d=k/c-b:k<b?q=b-k:k>b&&(d=k/c-b);q&&(a.xmin-=q/2,a.xmax+=q/2);d&&(a.ymin-=d/2,a.ymax+=d/2);return a},_reshapeExtent:function(a){a=this._fixAspectRatio(a);return this._getAdjustedExtent(a)},_getAdjustedExtent:function(a){if(this.__tileInfo)return M.getCandidateTileInfo(this,this.__tileInfo,a);var k=N.getScale(this,a),b=this.getMinScale(),r=this.getMaxScale(),
c=!r||k>=r;b&&!(k<=b)?a=N.getExtentForScale(this,b,a):c||(a=N.getExtentForScale(this,r,a));return{extent:a}},_onBingLayerAdd:function(a){this["__"+a.id+"_vis_connect"]=d.connect(a,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(a.visible)},_onBingLayerRemove:function(a){d.disconnect(this["__"+a.id+"_vis_connect"]);delete this["__"+a.id+"_vis_connect"];var k=n.some(this.layerIds,function(k){return(a=this._layers[k])&&a.visible&&-1!==a.declaredClass.indexOf("VETiledLayer")},this);
this._toggleBingLogo(k)},_toggleBingLogo:function(a){a&&!this._bingLogo?(a={left:this._mapParams&&this._mapParams.nav?"25px":""},6===x("ie")&&(a.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+g.toUrl("./images/map/bing-logo-lg.png")+"')"),a=this._bingLogo=t.create("div",{style:a},this.root),u.add(a,"bingLogo-lg")):!a&&this._bingLogo&&(t.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(a,k){var b=this._zoomAnim,r=this._panAnim;
if(b&&b._active)b.stop(),b._fire("onEnd",[b.node]);else if(r&&r._active){r.stop();this._panAnim=null;var r=r.curve.getValue(r._getStep()),b=Math.round(parseFloat(r.left)),r=Math.round(parseFloat(r.top)),c=this.navigationManager._dragOrigin;this.__pan(b,r);c&&(c.x-=b,c.y-=r);return}this.__panning=!0;this.onPanStart(this.extent,new U(a,k))},__pan:function(a,k){var b=this.extent,r=this._ratioW,c=this._ratioH;this.onPan(new T(b.xmin-a/r,b.ymin+k/c,b.xmax-a/r,b.ymax+k/c,this.spatialReference),new U(a,
k))},__panEnd:function(a,k){var b=this.__visibleRect,r=this.__visibleDelta;b.x+=a;b.y+=k;r.x+=a;r.y+=k;var b=new U(a,k),r=this.extent,c=this._ratioW,q=this._ratioH,r=new T(r.xmin-a/c,r.ymin+k/q,r.xmax-a/c,r.ymax+k/q,this.spatialReference);this.__panning=!1;this._updateExtent(r);this.onPanEnd(r,b);this._fireExtChg([r,b,!1,this.__LOD])},__zoomStart:function(a,k){this.__zooming=!0;this.onZoomStart(a,1,k,this.__LOD?this.__LOD.level:null)},__zoom:function(a,k,b){this.onZoom(a,k,b)},__zoomEnd:function(a,
k,b,r,c){pa(this._layersDiv,{left:"0px",top:"0px"});this._delta=new U(0,0);this.__visibleRect.x=this.__visibleRect.y=0;a=new T(a);this.__LOD=r;this._ratioW=this.width/a.getWidth();this._ratioH=this.height/a.getHeight();var q=this._delta;this._delta=null;this.__zooming=!1;this._updateExtent(a,c);this.onZoomEnd(a,k,b,r?r.level:null);this._fireExtChg([a,q,c,r])},_extentUtil:function(a,k,b,r,q){var d=new c,y,D,e,f,E,P,g,aa,n,p,m=this.width,s=this.height,X,u,t;a&&(y=a.numLevels,D=a.targetLevel,X=H.isDefined(D),
e=a.factor,f=a.mapAnchor,E=a.screenAnchor,P=a.mapCenter,u=a.levelOrFactor,g=a.targetScale,aa=H.isDefined(g)&&0<g);k&&(n=k.dx,p=k.dy,P=k.mapCenter);h.isArray(P)&&(P=new S(P));var v=this._panAnim;k=(a=this._stopAnim())?a.divExtent:this.extent;var na=this.__tileInfo,x=this._params;if(!this.loaded){if(b)k&&(b=this._convertGeometry(k,b)),b&&(this.extent=b,x.zoom=x.scale=-1,x.center=null);else if(P||X||aa){if(P)if(k){if(P=this._convertGeometry(k,P))this.extent=k.centerAt(P),x.center=null}else x.center=
P;X&&-1<D?(x.zoom=D,x.scale=-1):aa&&(x.scale=g,x.zoom=-1)}d.resolve();return d}if(P&&(P=this._convertGeometry(this,P),!P)||f&&(f=this._convertGeometry(this,f),!f)||b&&(b=this._convertGeometry(this,b),!b))return d.reject(),d;v&&(f&&E)&&(f=Aa(this.extent,m,s,E));a&&(f&&E)&&(f=Aa(a.divExtent,m,s,E));X&&(na?(y=this.getMinZoom(),X=this.getMaxZoom(),D<y?D=y:D>X&&(D=X),y=D-(a?a.level:this.getLevel())):(y=0<D?-1:1,t=u?D:null));if(!b)if(H.isDefined(y))na?(m=a?a.level:this.getLevel(),m=this.__getExtentForLevel(m+
y,P,k).extent):(m=(a?a.end:this.extent).expand(t||(0<y?0.5*y:2*-y)),t&&P&&(m=m.centerAt(P))),m&&(P?b=m:(n=f||k.getCenter(),s=m.getWidth(),p=m.getHeight(),m=n.x>=k.xmin&&n.x<=k.xmax?(n.x-k.xmin)/k.getWidth():0.5,b=n.y>=k.ymin&&n.y<=k.ymax?(n.y-k.ymin)/k.getHeight():0.5,m=n.x-m*s,n=n.y-b*p,b=new T(m,n,m+s,n+p,this.spatialReference)));else if(aa)b=N.getExtentForScale(this,g,k);else if(H.isDefined(e))b=k.expand(e);else if(n||p)a?(b=a.end,f=b.getCenter(),t=za(b,m,s,f),t.x+=n,t.y+=p,t=Aa(b,m,s,t),b=b.offset(t.x-
f.x,t.y-f.y)):(n=new U(m/2+n,s/2+p),n=Aa(k,m,s,n),s=k.getWidth(),p=k.getHeight(),m=n.x-s/2,n=n.y-p/2,b=new T(m,n,m+s,n+p,this.spatialReference));b||(P?(k=a?a.end:k,s=k.getWidth(),p=k.getHeight(),m=P.x-s/2,n=P.y-p/2,b=new T(m,n,m+s,n+p,this.spatialReference)):a&&(b=a.end));b?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,Ka),this._extentDfd.reject()),this._extentDfd=d,this.__setExtent(b,null,E,r,a,q)):d.reject();return d},__setExtent:function(a,k,b,r,c,q){try{if(this._firstLayerId)this.extent=
a;else{var d=!0,y=this.spatialReference,D=c?c.divExtent:this.extent,e=this._fixExtent(a,r||!1);a=e.extent;var f=a.getWidth(),P=a.getHeight(),h=Math.round;if(D)var g=h(1E6*D.getWidth()),aa=h(1E6*f),n=h(1E6*D.getHeight()),p=h(1E6*P),d=g!==aa||n!==p;var m,s,X=c&&c.rect,u=c&&c.divExtent;if(xa.zoomDuration&&d&&D){u=u||new T(D);X=X||{left:D.xmin,top:D.ymax,width:D.getWidth(),height:D.getHeight()};s={left:a.xmin,top:a.ymax,width:f,height:P};var t=new S(a.xmin,a.ymax,y),N=new S(a.xmin,a.ymin,y),v=new S(this.extent.xmin,
this.extent.ymax,y),na=new S(this.extent.xmin,this.extent.ymin,y);m=Q.getLineIntersection(v,t,na,N,y);!m&&!c&&(d=!1)}this._ratioW=this.width/f;this._ratioH=this.height/P;var x=this._zoomAnimDiv;if(d)if(pa(this._layersDiv,{left:"0px",top:"0px"}),k=new U(0,0),this.__visibleRect.x=this.__visibleRect.y=0,X&&s){this._delta=k;x.id="_zAD";x.startingExtent=u;x.extent=a;x.levelChange=d;x.newLod=e.lod;x.anchor=b?b:!m&&c?c.anchor:za(this.extent,this.width,this.height,m);var w=this.extent.getWidth()/a.getWidth();
1024<(1>w?1/w:w)?(this.__zoomStart(u,x.anchor),this.__zoom(u,1,x.anchor),this._fireOnScale(1,x.anchor,!0),this.__zoomEnd(a,w,x.anchor,e.lod,d)):(this._zoomAnim=I.resize({node:x,start:X,end:s,duration:xa.zoomDuration,rate:xa.zoomRate,beforeBegin:!c?this._zoomStartHandler:null,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),this._fireOnScale(w,x.anchor,q))}else this._updateExtent(a,d,q),this._fireExtChg([this.extent,k,d,this.__LOD=e.lod]);else if(!this.__panning)if(!1===this.loaded||
q)this._updateExtent(a,d,q),this._fireExtChg([this.extent,k,d,this.__LOD=e.lod]);else{this.__panning=!0;X=(new E(0,0,this.width,this.height,this.spatialReference)).getCenter();X.x=h(X.x);X.y=h(X.y);var G=this._delta=this.toScreen(a.getCenter()),A=Math.abs(X.x-G.x),B=Math.abs(X.y-G.y);this.optimizePanAnimation&&(A>2*this.width||B>2*this.height)?(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=
null,this._updateExtent(a,!1,q),this.onPanEnd(this.extent,new U(0,0)),this._fireExtChg([this.extent,new U(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,new U(0,0)),this._panAnim=I.slideTo({node:x,left:X.x-G.x,top:X.y-G.y,duration:xa.panDuration,rate:xa.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),this._panAnim.play())}}}catch(z){}},_fireOnScale:function(a,k,b){if("css-transforms"===this.navigationMode){var r=this.__visibleDelta;this.onScale(A.scaleAt(a,{x:-1*(this.width/
2-(k.x-r.x)),y:-1*(this.height/2-(k.y-r.y))}),b)}},_stopAnim:function(){var a=this._zoomAnim,k=this._panAnim;if(a&&a._active){a.stop();var k=a.curve.getValue(a._getStep()),b=parseFloat(k.left),r=parseFloat(k.top),a=a.node;return{anchor:a.anchor,start:a.startingExtent,end:a.extent,level:a.newLod&&a.newLod.level,rect:k,divExtent:new T(b,r-parseFloat(k.height),b+parseFloat(k.width),r,this.spatialReference)}}k&&k._active&&(k.stop(),k._fire("onEnd",[k.node]))},__getExtentForLevel:function(a,k,b){var r=
this.__tileInfo,r=r&&r.lods;a=H.isDefined(a)?a:0;b=b||this.extent;k=k||b&&b.getCenter();if(r){if(k){b=this.getMinZoom();var c=this.getMaxZoom();a>c&&(a=c);a<b&&(a=b);a=r[a];r=this.width*a.resolution/2;b=this.height*a.resolution/2;return{extent:new T(k.x-r,k.y-b,k.x+r,k.y+b,k.spatialReference),lod:a}}}else if(b)return{extent:b.expand(!a||1>a?1:a).centerAt(k)}},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var a=--this._jobs;
a?0>a&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(a,k){this[a]&&this[a].apply(this,k)},_updateExtent:function(a,b,r){this.extent=a;this._view=new O({viewingMode:"map",scale:this.getScale()});(b||r)&&this._setClipRect();if(a=this.spatialReference)a.isWebMercator()?this.geographicExtent=k.webMercatorToGeographic(this._getAvailExtent(),!0):4326===a.wkid&&(this.geographicExtent=new T(this._getAvailExtent().toJson()))},_fireExtChg:function(a){this.attr("data-zoom",
this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",a);if(a=this._extentDfd)delete this._extentDfd,a.resolve()},attr:function(a,k){var b=this.container;b&&(null==k?b.removeAttribute(a):b.setAttribute(a,k));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect()},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(a,k,b){},onTimeExtentChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},
onLayersAddResult:function(){},onLayerRemove:function(){},onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||(this.onBeforeUnload(this),this.removeAllLayers(),
this._cleanUp(),clearTimeout(this._resizeT),this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},setCursor:function(a){pa(this.__container,"cursor",this.cursor=a)},setMapCursor:function(a){this.setCursor(this._cursor=a)},resetMapCursor:function(){this.setCursor(this._cursor)},setInfoWindow:function(a){var k=this.infoWindow;k&&k.unsetMap(this);this.infoWindow=a;this.loaded&&a&&a.setMap(this)},setInfoWindowOnClick:function(a){this._params.showInfoWindowOnClick=a;this.popupManager&&
this.popupManager.set("enabled",a)},getInfoWindowAnchor:function(a){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(a)||"upperright"},toScreen:function(a,k){return za(this.extent,this.width,this.height,a,k)},toMap:function(a){return Aa(this.extent,this.width,this.height,a)},addLayer:function(a,k){a&&!this.getLayer(a.id)&&this._addLayer(a,a instanceof r?this.graphicsLayerIds:this.layerIds,k);return a},addLayers:function(a){var k=[],b=a.length,r,c,q=a.length;r=d.connect(this,
"onLayerAddResult",function(c,q){-1!==n.indexOf(a,c)&&(b--,k.push({layer:c,success:!q,error:q}),b||(d.disconnect(r),this.onLayersAddResult(k)))});for(c=0;c<q;c++)this.addLayer(a[c]);return this},removeLayer:function(a,k){var b=a.id,c=a instanceof r?this.graphicsLayerIds:this.layerIds,q=ja(c,b);0<=q&&(c.splice(q,1),a instanceof r?(ka(this["_gl_"+a.id+"_click_connect"]),a.loaded&&a._unsetMap(this,this._gc._surface)):a.loaded&&(a._unsetMap(this,this._layersDiv),-1!==a.declaredClass.indexOf("VETiledLayer")&&
this._onBingLayerRemove(a)),delete this._layers[b],delete this._layerDivs[b],k||this._reorderLayers(c),this.onLayerRemove(a))},removeAllLayers:function(){var a=this.layerIds,k;for(k=a.length-1;0<=k;k--)this.removeLayer(this._layers[a[k]],1);a=this.graphicsLayerIds;for(k=a.length-1;0<=k;k--)this.removeLayer(this._layers[a[k]],1);this.onLayersRemoved()},reorderLayer:function(k,b){h.isString(k)&&(a.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",
null,"v2.0"),k=this.getLayer(k));var c=k.id,q,d=k instanceof r?this.graphicsLayerIds:this.layerIds;0>b?b=0:b>=d.length&&(b=d.length-1);q=ja(d,c);-1===q||q===b||(d.splice(q,1),d.splice(b,0,c),this._reorderLayers(d))},getLayer:function(a){return this._layers[a]},setExtent:function(a,k){a=new T(a.toJson());var b=a.getWidth(),r=a.getHeight();return 0===b&&0===r?this.centerAt(new S({x:a.xmin,y:a.ymin,spatialReference:a.spatialReference&&a.spatialReference.toJson()})):this._extentUtil(null,null,a,k)},centerAt:function(a){return this._extentUtil(null,
{mapCenter:a})},centerAndZoom:function(a,k){return this._extentUtil({targetLevel:k,mapCenter:a,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:N.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*N.getUnitValueForSR(this.spatialReference)},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},
_getView:function(){return this._view},setScale:function(a){return this._extentUtil({targetScale:a})},getLayersVisibleAtScale:function(a){var k=[];(a=a||this.getScale())&&n.forEach(this.layerIds.concat(this.graphicsLayerIds),function(b){b=this.getLayer(b);b.isVisibleAtScale(a)&&k.push(b)},this);return k},getNumLevels:function(){var a=this.getMinZoom(),k=this.getMaxZoom();return a===k&&0>a?0:k-a+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(a){if(-1<a)return this._extentUtil({targetLevel:a})},
getZoom:function(){return this.getLevel()},setZoom:function(a){return this.setLevel(a)},getMinZoom:function(){return this._params.minZoom},getMaxZoom:function(){return this._params.maxZoom},setBasemap:function(a){var k;h.isObject(a)?(k=a,a=k.title):k=F&&F[a];if(k){this._basemapDfd&&-1===this._basemapDfd.fired&&this._basemapDfd.cancel();var b=[],r=[],q=0;n.forEach(k.baseMapLayers||k.layers,function(a){var k,c={id:a.id,displayLevels:a.displayLevels,opacity:H.isDefined(a.opacity)?a.opacity:null,visible:H.isDefined(a.visibility)?
a.visibility:null};if(a.type)switch(a.type){case "OpenStreetMap":k=new X(c);break;case "VectorTile":k=L.normalize(a.url),k=new na(k,c)}else k=L.normalize(a.url),k=new P(k,c);k&&(b.push(k),r.push(a),a.isReference||q++)},this);if(b.length&&q){var y={basemapName:a,infos:r,layers:b};if(this.loaded){var D=this,e=new c(K._dfdCanceller),f=function(a){e._pendingLayers--;a=n.indexOf(y.layers,this);if(-1<a&&(a=e._layerEvents[a]))d.disconnect(a[0]),d.disconnect(a[1]);0>=e._pendingLayers&&(delete e._layerEvents,
delete D._basemapDfd,0>e.fired&&e.callback(y))};this._basemapDfd=e;e._pendingLayers=0;e._layerEvents={};n.forEach(b,function(a,k){a&&(e._pendingLayers++,a.loaded?f(a):e._layerEvents[k]=[d.connect(a,"onLoad",a,f),d.connect(a,"onError",a,f)])});e.addCallback(ma(this,this._basemapLoaded))}else this._basemapLoaded(y)}}else{a=[];for(var E in F)a.push(E)}},_basemapLoaded:function(a){var k=a.layers,b=a.infos,r=0,c=!0,q;this.loaded&&(n.forEach(k,function(a,k){a.loaded&&(b[k].isReference||r++)}),c=r);c&&(this.basemapLayerIds&&
(q={basemapName:this._basemap,infos:F&&F[this._basemap]&&F[this._basemap].baseMapLayers},q.basemapName||(n.forEach(this.basemapLayerIds,function(a){if(this.getLayer(a)instanceof X)return q.basemapName="osm",q.infos=F&&F.osm&&F.osm.baseMapLayers,!1},this),q.basemapName||(q=null))),this._removeBasemap(),this._basemap=a.basemapName,this.basemapLayerIds=this._addBasemap(k,b),this.attr("data-basemap",this.getBasemap()),this.emit("basemap-change",{current:a,previous:q}))},_addBasemap:function(a,k){var b=
[],r=[],c=0;n.forEach(a,function(a,q){k[q].isReference?b.push(a):(this.addLayer(a,c++),r.push(a.id))},this);b.length&&n.forEach(b,function(a){a.attr("data-reference",!0);this.addLayer(a,"top");r.push(a.id)},this);return r},_removeBasemap:function(){var a=this.basemapLayerIds,k;a&&a.length&&n.forEach(a,function(a){(k=this.getLayer(a))&&this.removeLayer(k)},this)},getBasemap:function(){return this._basemap||""},translate:function(a,k){a=a||0;k=k||0;if(!this._txTimer){this._tx=this._ty=0;var b=this.toScreen(this.extent.getCenter());
this.__panStart(b.x,b.y)}this._tx+=a;this._ty+=k;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var a=this._tx,k=this._ty;this._tx=this._ty=0;this.__panEnd(a,k)},setTimeExtent:function(a){a=(this.timeExtent=a)?new a.constructor(a.toJson()):null;this.onTimeExtentChange(a)},setTimeSlider:function(a){this.timeSlider&&(ka(this._tsTimeExtentChange_connect),this.timeSlider=
this._tsTimeExtentChange_connect=null);a&&(this.timeSlider=a,this.setTimeExtent(a.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=Ma(a,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(a){if(this.visible!==a){this.visible=a;a||(this._display=this.container.style.display);this.container.style.display=a?this._display:"none";if(this.autoResize){var k=a?"resume":"pause";this._rszSignal[k]();this._oriSignal[k]()}a&&this.resize()}return this},resize:function(a){clearTimeout(this._resizeT);
this._destroyed||(!0===a?this._execResize():this._resizeT=setTimeout(this._execResize,this.resizeDelay))},_timedResize:function(){this._resizeT||this._execResize()},_execResize:function(){clearTimeout(this._resizeT);this._resizeT=null;this.reposition();this._resize();this.autoResize&&this._startResizeTimer()},_resize:function(){var a=this.width,k=this.height,b=v.get(this.container,"display"),r=w.getContentBox(this.container);if(!("none"===b||0>=r.w||0>=r.h||a===r.w&&k===r.h)){if(b=this._zoomAnim||
this._panAnim)b.stop(),b._fire("onEnd",[b.node]);pa(this.root,{width:(this.width=r.w)+"px",height:(this.height=r.h)+"px"});r=this.width;b=this.height;this.attribution&&this.attribution.domNode&&v.set(this.attribution.domNode,"maxWidth",Math.floor(r*this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,r,b);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,r,b);var c=new E(this.extent),a=(new E(c.x,c.y,c.width*(r/a),c.height*
(b/k),this.spatialReference)).getExtent();this.onResize(a,r,b);this._extentUtil(null,null,a,null,!0)}},reposition:function(){var a=this.position,k=a.x,b=a.y;this._reposition();a=this.position;if(k!==a.x||b!==a.y)this.onReposition(a.x,a.y)},_reposition:function(){var a=w.position(this.container,!0),k=w.getPadBorderExtents(this.container);this.position.update(a.x+k.l,a.y+k.t)},_setClipRect:function(){delete this._clip;var a=7>=x("ie")||void 0===x("ie")&&7<=x("trident")?"rect(auto,auto,auto,auto)":"auto";
if(this.wrapAround180){var k=this.width,b=this.height,r=this._getFrameWidth(),c=k-r;0<c&&(a=c/2,a="rect(0px,"+(a+r)+"px,"+b+"px,"+a+"px)",b=this.extent.getWidth(),k=b*(r/k),this._clip=[(b-k)/2,k])}pa(this.__container,"clip",a)},_getAvailExtent:function(){var a=this.extent,k=this._clip;if(k){if(!a._clip){var b=new E(a);b.width=k[1];b.x+=k[0];a._clip=b.getExtent()}return a._clip}return a},_fixedPan:function(a,k){return this._extentUtil(null,{dx:a,dy:k})},panUp:function(){return this._fixedPan(0,-0.75*
this.height)},panUpperRight:function(){return this._fixedPan(0.75*this.width,-0.75*this.height)},panRight:function(){return this._fixedPan(0.75*this.width,0)},panLowerRight:function(){return this._fixedPan(0.75*this.width,0.75*this.height)},panDown:function(){return this._fixedPan(0,0.75*this.height)},panLowerLeft:function(){return this._fixedPan(-0.75*this.width,0.75*this.height)},panLeft:function(){return this._fixedPan(-0.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-0.75*this.width,
-0.75*this.height)},enableSnapping:function(a){a=a||{};if("esri.SnappingManager"===a.declaredClass)this.snappingManager=a;else{var k=Ba++,b=this;this._rids&&this._rids.push(k);g(["./SnappingManager"],function(r){var c=b._rids?n.indexOf(b._rids,k):-1;-1!==c&&(b._rids.splice(c,1),b.snappingManager=new r(h.mixin({map:b},a)))})}return this.snappingManager},disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){!this._labels&&
(Ha&&this.loaded)&&(this._labels=new Ha({id:"_internal_LabelLayer"}),this._labels._setMap(this,this._gc._surface),this._processLabelLayers(),this.on("layers-reordered",this._processLabelLayers))},_processLabelLayers:function(){null==this._labelProcessor&&(this._labelProcessor=setTimeout(this._updateLabelLayers,0))},_updateLabelLayers:function(){this._labelProcessor=null;this._labels&&(this._labels.removeAllFeatureLayers(),n.forEach(this.graphicsLayerIds,function(a){a=this.getLayer(a);"function"===
typeof a.applyEdits?this._labels.addFeatureLayer(a):"esri.layers.WFSLayer"===a.declaredClass&&this._labels.addFeatureLayer(a)},this))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new aa,this._mapImageLyr._setMap(this,this._layersDiv),this._placeMapImageLyr());return this._mapImageLyr},_placeMapImageLyr:function(){for(var a=this.layerIds,k=this._layerDivs,b=!1,r,c,q=a.length-1;0<=q;q--)if(r=a[q],c=this.getLayer(r),r=k[r],c&&r&&!c._isReference){t.place(this._mapImageLyr._div,
r,"after");b=!0;break}b||t.place(this._mapImageLyr._div,this._layersDiv,"first")}})})},"esri/basemaps":function(){define(["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(g,m,a,b){return{streets:{title:b.basemaps.streets,thumbnailUrl:g.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},satellite:{title:b.basemaps.satellite,thumbnailUrl:g.toUrl("./images/basemap/satellite.jpg"),
itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:b.basemaps.hybrid,thumbnailUrl:g.toUrl("./images/basemap/hybrid.jpg"),itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0}]},terrain:{title:b.basemaps.terrain,
thumbnailUrl:g.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:b.basemaps.topo,thumbnailUrl:g.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},
gray:{title:b.basemaps.gray,thumbnailUrl:g.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0}]},"dark-gray":{title:b.basemaps["dark-gray"],thumbnailUrl:g.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},
{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},oceans:{title:b.basemaps.oceans,thumbnailUrl:g.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",baseMapLayers:[{url:"http://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"http://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",isReference:!0}]},"national-geographic":{title:b.basemaps["national-geographic"],
thumbnailUrl:g.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},osm:{title:b.basemaps.osm,thumbnailUrl:g.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]},"dark-gray-vector":{title:b.basemaps["dark-gray"],thumbnailUrl:g.toUrl("./images/basemap/dark-gray.jpg"),itemId:"850db44b9eb845d3bd42b19e8aa7a024",
baseMapLayers:[{url:"http://www.arcgis.com/sharing/rest/content/items/850db44b9eb845d3bd42b19e8aa7a024/resources/styles/root.json",type:"VectorTile"}]},"gray-vector":{title:b.basemaps.gray,thumbnailUrl:g.toUrl("./images/basemap/gray.jpg"),itemId:"0e02e6f86d02455091796eaae811d9b5",baseMapLayers:[{url:"http://www.arcgis.com/sharing/rest/content/items/0e02e6f86d02455091796eaae811d9b5/resources/styles/root.json",type:"VectorTile"}]},"streets-vector":{title:b.basemaps.streets,thumbnailUrl:g.toUrl("./images/basemap/streets.jpg"),
itemId:"4e1133c28ac04cca97693cf336cd49ad",baseMapLayers:[{url:"http://www.arcgis.com/sharing/rest/content/items/4e1133c28ac04cca97693cf336cd49ad/resources/styles/root.json",type:"VectorTile"}]},"topo-vector":{title:b.basemaps.topo,thumbnailUrl:g.toUrl("./images/basemap/topo.jpg"),itemId:"6f65bc1351b7411588a8cb43fe23dad7",baseMapLayers:[{url:"http://www.arcgis.com/sharing/rest/content/items/6f65bc1351b7411588a8cb43fe23dad7/resources/styles/root.json",type:"VectorTile"}]},"streets-night-vector":{title:b.basemaps["streets-night-vector"],
thumbnailUrl:g.toUrl("./images/basemap/streets-night.jpg"),itemId:"bf79e422e9454565ae0cbe9553cf6471",baseMapLayers:[{url:"http://www.arcgis.com/sharing/rest/content/items/bf79e422e9454565ae0cbe9553cf6471/resources/styles/root.json",type:"VectorTile"}]},"streets-relief-vector":{title:b.basemaps["streets-relief-vector"],thumbnailUrl:g.toUrl("./images/basemap/streets-relief.jpg"),itemId:"2e063e709e3446459f8538ed6743f879",baseMapLayers:[{url:"http://www.arcgis.com/sharing/rest/content/items/2e063e709e3446459f8538ed6743f879/resources/styles/root.json",
type:"VectorTile"}]},"streets-navigation-vector":{title:b.basemaps["streets-navigation-vector"],thumbnailUrl:g.toUrl("./images/basemap/streets-navigation.jpg"),itemId:"dcbbba0edf094eaa81af19298b9c6247",baseMapLayers:[{url:"http://www.arcgis.com/sharing/rest/content/items/dcbbba0edf094eaa81af19298b9c6247/resources/styles/root.json",type:"VectorTile"}]}}})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),
function(g,m,a,b,d,c,h,n,f){return{animateRange:function(b){var c=b.range;return new m.Animation(a.mixin({curve:new m._Line(c.start,c.end)},b))},resize:function(c){var f=c.node=b.byId(c.node),h=c.start,g=c.end;h||(h=d.getMarginBox(f),f=d.getPadBorderExtents(f),h=c.start={left:h.l+f.l,top:h.t+f.t,width:h.w-f.w,height:h.h-f.h});g||(g=c.anchor?c.anchor:{x:h.left,y:h.top},f=c.size,g=c.end={left:h.left-(f.width-h.width)*(g.x-h.left)/h.width,top:h.top-(f.height-h.height)*(g.y-h.top)/h.height,width:f.width,
height:f.height});return m.animateProperty(a.mixin({properties:{left:{start:h.left,end:g.left},top:{start:h.top,end:g.top},width:{start:h.width,end:g.width},height:{start:h.height,end:g.height}}},c))},slideTo:function(e){var f=e.node=b.byId(e.node),h=c.getComputedStyle,n=null,t=null,w=function(){return function(){var a="absolute"==f.style.position?"absolute":"relative";n="absolute"==a?f.offsetTop:parseInt(h(f).top)||0;t="absolute"==a?f.offsetLeft:parseInt(h(f).left)||0;"absolute"!=a&&"relative"!=
a&&(a=d.position(f,!0),n=a.y,t=a.x,f.style.position="absolute",f.style.top=n+"px",f.style.left=t+"px")}}();w();e=m.animateProperty(a.mixin({properties:{top:{start:n,end:e.top||0},left:{start:t,end:e.left||0}}},e));g.connect(e,"beforeBegin",e,w);return e},flash:function(d){d=a.mixin({end:"#f00",duration:500,count:1},d);d.duration/=2*d.count;var f=b.byId(d.node),g=d.start;g||(g=c.getComputedStyle(f).backgroundColor);var n=d.end,t=[],w=d.count,f={node:f,duration:d.duration};for(d=0;d<w;d++)t.push(m.animateProperty(a.mixin({properties:{backgroundColor:{start:g,
end:n}}},f))),t.push(m.animateProperty(a.mixin({properties:{backgroundColor:{start:n,end:g}}},f)));return h.chain(t)}}})},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(g,m,a,b,d){return{_addFrameInfo:function(a,b){var d,f,e=2*b.origin[1],p=b.origin[0],m=a.origin.x,u=a.width,t;g.forEach(a.lods,function(a){d=Math.round(e/a.resolution);f=Math.ceil(d/u);t=Math.floor((p-m)/(u*a.resolution));a._frameInfo||(a._frameInfo=[f,t,
t+f-1,d])})},getContainingTileCoords:function(a,b,d){var f=a.origin;d=d.resolution;return{row:Math.floor((f.y-b.y)/(a.height*d)),col:Math.floor((b.x-f.x)/(a.width*d))}},getCandidateTileInfo:function(a,h,g){var f;f=a.width;for(var e=a.height,p=g.xmax-g.xmin,m=g.ymax-g.ymin,u=a.__tileInfo===h,t=u?a.getMinZoom():-1,u=u?a.getMaxZoom():-1,w=-1,v=h.lods,x=Math.abs,B,A,C,u=-1<u?u:v.length-1,t=-1<t?t:0;t<=u;t++)if(A=v[t])if(C=p>m?x(m-e*A.resolution):x(p-f*A.resolution),0>w||C<=w)B=A,w=C;else break;f=B;B=
f.resolution;e=(g.xmin+g.xmax)/2;p=(g.ymin+g.ymax)/2;m=a.width/2*B;B*=a.height/2;e=new d(e-m,p-B,e+m,p+B,g.spatialReference);g=new b(e.xmin,e.ymax,g.spatialReference);u=f.resolution;m=h.width;p=h.height;h=h.origin;a=a.__visibleDelta;B=Math.floor;v=m*u;x=p*u;u=B((h.y-g.y)/x);w=B((g.x-h.x)/v);t=h.y-u*x;h=B(Math.abs((g.x-(h.x+w*v))*m/v))+a.x;a=B(Math.abs((g.y-t)*p/x))+a.y;return{tile:{point:g,coords:{row:u,col:w},offsets:{x:h,y:a}},lod:f,extent:e}},getTileExtent:function(a,b,g,f){var e=a.origin;b=a.lods[b].resolution;
var p=a.width,m=a.height;return new d(f*b*p+e.x,e.y-(g+1)*b*m,(f+1)*b*p+e.x,e.y-g*b*m,a.spatialReference)}}})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(g,m,a,b,d,c,h,n,f,e){var p=g(h,{declaredClass:"esri.geometry.Rect",constructor:function(a,c,d,f,h){m.mixin(this,b.defaultRect);m.isObject(a)&&"extent"===a.type&&(c=a.ymax,d=a.getWidth(),f=a.getHeight(),
h=a.spatialReference,a=a.xmin);m.isObject(a)?(m.mixin(this,a),this.spatialReference&&(this.spatialReference=e.createSpatialReference(this.spatialReference))):(this.x=a,this.y=c,this.width=d,this.height=f,this.spatialReference=h);this.verifySR()},getCenter:function(){return new n(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(a,b){return new p(this.x+a,this.y+b,this.width,this.height,this.spatialReference)},intersects:function(a){return a.x+a.width<=this.x||a.y+a.height<=
this.y||a.y>=this.y+this.height||a.x>=this.x+this.width?!1:!0},getExtent:function(){return new f(parseFloat(this.x),parseFloat(this.y)-parseFloat(this.height),parseFloat(this.x)+parseFloat(this.width),parseFloat(this.y),this.spatialReference)},update:function(a,b,c,d,e){this.x=a;this.y=b;this.width=c;this.height=d;this.spatialReference=e;this.clearCache();return this}});return p})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),
function(g,m,a,b,d,c,h,n,f){return g(null,{declaredClass:"esri.layers.TileInfo",constructor:function(b){m.mixin(this,b);this.width=this.cols;this.height=this.rows;b=this.spatialReference;var c=this.origin;b&&(b=this.spatialReference=new h(b.toJson?b.toJson():b));c&&(this.origin=new n(c.toJson?c.toJson():c),!c.spatialReference&&b&&this.origin.setSpatialReference(new h(b.toJson())));this.lods=a.map(this.lods,function(a){return new f(a)})},toJson:function(){return c.fixJson({rows:this.rows,cols:this.cols,
dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&a.map(this.lods,function(a){return a.toJson()})})}})})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(g,m,a,b,d){return g(null,{declaredClass:"esri.layers.LOD",constructor:function(a){m.mixin(this,a)},toJson:function(){return d.fixJson({level:this.level,
levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}})})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w){return m([p,s],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_isReference:!1,_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(b,c){c&&(c.roundrobin&&(g.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),c.tileServers=c.roundrobin),this._setTileServers(c.tileServers),
this._loadCallback=c.loadCallback);this._params=a.mixin({},this._url.query);this._initLayer=a.hitch(this,this._initLayer);var d=c&&c.resourceInfo;d?this._initLayer(d):(this._load=a.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(a){if(a&&0<a.length){this.tileServers=a;var b,c=a.length;for(b=0;b<c;b++)a[b]=f.urlToObject(a[b]).path}},_initLayer:function(a,b){this.inherited(arguments);this.resourceInfo=
d.toJson(a);this.tileInfo=new u(a.tileInfo);!1!==this.resampling&&(a.capabilities&&-1<a.capabilities.indexOf("Tilemap")?(this.resampling=!0,this.tileMap=new w(this)):this.resampling=!!a.resampling);!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new e(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;a.timeInfo&&(this.timeInfo=new t(a.timeInfo));a.mensurationCapabilities&&(this.mensurationCapabilities=
a.mensurationCapabilities);var c=this._url.path,h=this._loadCallback,g=f.getProtocolForWebResource(!0),n=c.match(/^https?\:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i),n=n&&n[2];if(!this.tileServers)if(a.tileServers)this._setTileServers(a.tileServers);else{var p=-1!==c.search(/^https?\:\/\/server\.arcgisonline\.com/i),m=-1!==c.search(/^https?\:\/\/services\.arcgisonline\.com/i);if(p||m)this._setTileServers([c,c.replace(p?/server\.arcgisonline/i:
/services\.arcgisonline/i,p?"services.arcgisonline":"server.arcgisonline")])}if(n){n=n.toLowerCase();for(c=0;c<this._agolAttrs.length;c++)if(p=this._agolAttrs[c],p.toLowerCase()===n){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||g+"//static.arcgis.com/attribution/"+p;break}for(c=0;c<this._referenceLayers.length;c++)if(p=this._referenceLayers[c],p.toLowerCase()===n){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);h&&(delete this._loadCallback,h(this))},getTileUrl:function(a,
b,c){var d=this.tileServers,e=this._getToken(),g=this._url.query;a=(d?d[b%d.length]:this._url.path)+"/tile/"+a+"/"+b+"/"+c;a=f.upgradeToHTTPS(a);this.resampling&&!this.tileMap&&(a+="?blankTile\x3dfalse");g&&(a=this.resampling&&!this.tileMap?a+("\x26"+h.objectToQuery(g)):a+("?"+h.objectToQuery(g)));if(e&&(!g||!g.token))a+=(-1===a.indexOf("?")?"?":"\x26")+"token\x3d"+e;a=this.addTimestampToURL(a);return f.addProxy(a)}})})},"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z){return g(z,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(b,c){m.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=c?c.displayLevels:null)?this._displayLevels[0]:0;this.resampling=c?c.resampling:void 0;this._resamplingTolerance=c?c.resamplingTolerance:null;this.exclusionAreas=c?c.exclusionAreas:null;var d=a.hitch;this._addImage=d(this,this._addImage);this._tileLoadHandler=d(this,this._tileLoadHandler);
this._tileErrorHandler=d(this,this._tileErrorHandler);this._popTile=d(this,this._popTile);this._cleanUpRemovedImages=d(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=d(this,this._fireOnUpdateEvent);this._transitionEnd=d(this,this._transitionEnd);this._tileMapCallback=d(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var a=this.tileInfo,c=a.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=a.width;this._tileH=
a.height;var d=this.scales=[],e=this._displayLevels,f=-Infinity,h=Infinity,g=this.fullExtent,n=new B(g.xmin,g.ymax),g=new B(g.xmax,g.ymin),p=x.getContainingTileCoords,m,s,u,E=c.length;for(u=0;u<E;u++)if(s=c[u],m=p(a,n,s),s.startTileRow=0>m.row?0:m.row,s.startTileCol=0>m.col?0:m.col,m=p(a,g,s),s.endTileRow=m.row,s.endTileCol=m.col,!e||-1!==b.indexOf(e,s.level))d[u]=s.scale,f=s.scale>f?s.scale:f,h=s.scale<h?s.scale:h;-Infinity!==f&&!this._hasMin&&this.setMinScale(f);Infinity!==h&&!this._hasMax&&this.setMaxScale(h);
this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=w("ie")&&7>w("ie")&&(this.isPNG32||"Mixed"===a.format)},isVisibleAtScale:function(a){return a?z.prototype._isMapAtVisibleScale.call(this,a,!0):!1},_isMapAtVisibleScale:function(a){var b=this.inherited(arguments,[a,!0]);if(b){var c;c=this._map;var b=this.scales,d=c.getScale(),e=!1,f=c.width>c.height?c.width:c.height;for(c=0;c<b.length;c++)if(Math.abs(b[c]-d)/b[c]<1/f){e=!0;break}b=e}return b},_setMap:function(a,b,d,e){this.inherited(arguments);
this._map=a;var h=this._div=c.create("div",null,b),g=a.__visibleDelta,n=m.connect,p=u._css.names,s={position:"absolute",width:a.width+"px",height:a.height+"px",overflow:"visible"},v=t.defaults.map.zoomDuration;"css-transforms"===a.navigationMode?(s[p.transform]=u._css.translate(-g.x,-g.y),f.set(h,s),delete s[p.transform],s[p.transition]=p.transformName+" "+v+"ms ease",f.set(this._active=c.create("div",null,h),s),this._active._remove=0,this._passives=[]):(s.left=-g.x+"px",s.top=-g.y+"px",f.set(h,s));
this._onResizeHandler_connect=n(a,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=n(this,"onOpacityChange",this,"_opacityChangeHandler");g=this.tileInfo;n=g.spatialReference;p=n._getInfo();(this._wrap=a.wrapAround180&&n._isWrappable()&&Math.abs(p.origin[0]-g.origin.x)<=p.dx)&&x._addFrameInfo(g,p);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!a.loaded)var w=m.connect(a,"onLoad",this,function(){m.disconnect(w);w=null;this.setExclusionAreas(this.exclusionAreas);
this.evaluateSuspension()});return h},_unsetMap:function(a,b){this.suspended||this._suspendImpl();c.destroy(this._div);this._map=this._div=null;var d=m.disconnect;d(this._onResizeHandler_connect);d(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){v.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var a=this._tiles,b=this._tileIds,d=this._loadingList,
e,f,h=m.disconnect,g=c.destroy;d&&0<d.count&&(d.forEach(function(b){if(e=a[b])h(e._onload_connect),h(e._onerror_connect),h(e._onabort_connect),e._onload_connect=e._onerror_connect=e._onabort_connect=null}),d.clear(),this._fireUpdateEnd());this._removeList.clear();for(d=b.length-1;0<=d;d--)(e=(f=b[d])&&a[f])&&g(e);if("css-transforms"===this._map.navigationMode){b=this._active;f=this._passives;var n;this._noDom=0;for(d=f.length-1;0<=d;d--)n=f[d],n._endHandle&&h(n._endHandle),n._matrix=n._multiply=n._endHandle=
null,n._marked=n._remove=0,f.splice(d,1),g(n);b._matrix=b._multiply=null;b._marked=b._remove=0}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new p;this._loadingList=new p;v.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,
null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var a=this._map,b=m.connect;if("css-transforms"===a.navigationMode){if(this._onScaleHandler_connect=b(a,"onScale",this,this._onScaleHandler),w("esri-mobile")){this._standby=[];var c=this,d=function(){c._noDom=1};this._onPanStartHandler_connect=b(a,"onPanStart",d);this._onZoomStartHandler_connect=b(a,"onZoomStart",d)}}else this._onZoomHandler_connect=b(a,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=b(a,"onPan",this,"_onPanHandler");
this._onExtentChangeHandler_connect=b(a,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var a=m.disconnect;a(this._onPanHandler_connect);a(this._onZoomHandler_connect);a(this._onScaleHandler_connect);a(this._onExtentChangeHandler_connect);a(this._onPanStartHandler_connect);a(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=
null},_onResizeHandler:function(a,b,c){a={width:b+"px",height:c+"px"};b=f.set;b(this._div,a);if("css-transforms"===this._map.navigationMode){this._active&&b(this._active,a);for(c=this._passives.length-1;0<=c;c--)b(this._passives[c],a)}},_onExtentChangeHandler:function(a,b,d,e){b=this._map;var h=this._standby,g;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!b._isPanningOrZooming()){if("css-transforms"===b.navigationMode){if(d)for(e=this._passives.length-1;0<=e;e--)g=this._passives[e],f.set(g,
u._css.names.transition,"none"),g._marked?(this._passives.splice(e,1),g.parentNode&&g.parentNode.removeChild(g),c.destroy(g)):0<g.childNodes.length&&(g._multiply=g._multiply?s.multiply(g._matrix,g._multiply):g._matrix);this._noDom=0;if(h&&h.length)for(e=h.length-1;0<=e;e--)g=h[e],f.set(g,"visibility","inherit"),this._popTile(g),h.splice(e,1)}this._fireUpdateStart();this._rrIndex=0;e=x.getCandidateTileInfo(b,this.tileInfo,a);a=b.__visibleDelta;if(!this._ct||e.lod.level!==this._ct.lod.level||d){g=e&&
this._ct&&e.lod.level!==this._ct.lod.level;this._ct=e;var p=this._tiles,m=this._tileIds,t=this._tileBounds,v=this._removeList,w,B=m.length;this._cleanUpRemovedImages();for(e=0;e<B;e++)h=m[e],w=p[h],t[h]=m[e]=null,"css-transforms"===b.navigationMode&&(g&&w.parentNode&&b.fadeOnZoom)&&(w._fadeOut=g,w.parentNode._remove++),v.add(w);d&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}e=a.x;d=a.y;"css-transforms"===b.navigationMode?(h={},h[u._css.names.transform]=u._css.translate(e,d),f.set(this._div,
h)):f.set(this._div,{left:e+"px",top:d+"px"});this.__coords_dx=e;this.__coords_dy=d;this._updateImages(new A(0,0,a.width,a.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;d=this._tileW;p=this._tileH;a=new A(-a.x,-a.y,a.width,a.height);for(e=this._tileIds.length-1;0<=e;e--)(h=this._tileIds[e])?(g=this._tiles[h],m=n.getMarginBox(g),m=new A(m.l,m.t,d,p),"css-transforms"===b.navigationMode&&(m.x=g._left,m.y=g._top),a.intersects(m)?
this._tileBounds[h]=m:(this._loadingList.contains(h)&&this._popTile(g),c.destroy(g),this._tileIds.splice(e,1),delete this._tileBounds[h],delete this._tiles[h])):(this._tileIds.splice(e,1),delete this._tileBounds[h],delete this._tiles[h])}},_onPanHandler:function(a,b){var c=this._map,d=c.__visibleDelta.offset(b.x,b.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===c.navigationMode?(c={},c[u._css.names.transform]=u._css.translate(d.x,d.y),f.set(this._div,c),w("esri-mobile")||this._updateImages({x:-d.x,
y:-d.y,width:d.width,height:d.height})):(f.set(this._div,{left:d.x+"px",top:d.y+"px"}),this._updateImages({x:-d.x,y:-d.y,width:d.width,height:d.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(a,b){var d,e={},h=u._css.names,g=this._map,n=t.defaults.map.zoomDuration;for(d=this._passives.length-1;0<=d;d--){var p=this._passives[d];0===p.childNodes.length?(this._passives.splice(d,1),c.destroy(p)):("none"===p.style[h.transition]&&f.set(p,h.transition,
h.transformName+" "+n+"ms ease"),f.set(p,h.transition,b?"none":h.transformName+" "+n+"ms ease"),p._matrix=a,e[h.transform]=u._css.matrix(p._multiply?s.multiply(a,p._multiply):a),f.set(p,e))}this._active&&0===this._active.childNodes.length||(f.set(this._active,h.transition,b?"none":h.transformName+" "+n+"ms ease"),this._active._matrix=a,e[h.transform]=u._css.matrix(this._active._matrix),f.set(this._active,e),this._passives.push(this._active),e={position:"absolute",width:g.width+"px",height:g.height+
"px",overflow:"visible"},e[h.transition]=h.transformName+" "+n+"ms ease",f.set(this._active=c.create("div",null,this._div),e),this._active._remove=0,g.fadeOnZoom&&c.place(this._active,this._div,"first"))},_onZoomHandler:function(a,c,d){a=n.getMarginBox(this._div);d=d.offset(-a.l,-a.t);if(!this._previousScale||1===c)this._previousScale=1;var e,h=this._tileW*c,g=this._tileH*c,p=this._tileBounds,m=this._tiles,s=this._previousScale,u=this._multiple,t=f.set,v,E;if((a=w("ie"))&&8>a)b.forEach(this._tileIds,
function(a){E="";e=p[a];v=m[a].style.margin.split(" ");b.forEach(v,function(a){""!==E&&(E+=" ");a=parseFloat(a);E+=a/s*c+"px"});t(m[a],{left:e.x-(h-e.width)*(d.x-e.x)/e.width+"px",top:e.y-(g-e.height)*(d.y-e.y)/e.height+"px",margin:1!==u&&-1===E.indexOf("NaN")?E:"",zoom:c})});else{var x=h*u,N=g*u,q,k;b.forEach(this._tileIds,function(a){E="";e=p[a];q=e.x-(h-e.width)*(d.x-e.x)/e.width;k=e.y-(g-e.height)*(d.y-e.y)/e.height;v=m[a].style.margin.split(" ");b.forEach(v,function(a){""!==E&&(E+=" ");a=parseFloat(a);
E+=a/s*c+"px"});t(m[a],{left:q+"px",top:k+"px",margin:1!==u&&-1===E.indexOf("NaN")?E:"",width:x+"px",height:N+"px"})})}this._previousScale=c},_updateImages:function(a){if(this._ct){var c,d=this._tileW,e=this._tileH,f=this._ct;c=f.lod;var f=f.tile,h=f.offsets,g=f.coords,n=g.row,g=g.col,p=c.level,m=this.opacity,s=this._tileIds,u=this._loadingList,E=this._addImage,t=this._map.id,N=this.id,q=a.x,k=a.y,r=c.startTileRow,y=c.endTileRow,D=c.startTileCol,P=c.endTileCol,aa=b.indexOf,X,v,x=h.x-this.__coords_dx,
w=h.y-this.__coords_dy;v=d-x+-a.x;var A=e-w+-a.y;X=Math.ceil;v=0<v?v%d:d-Math.abs(v)%d;A=0<A?A%e:e-Math.abs(A)%e;q=0<q?Math.floor((q+x)/d):X((q-(d-x))/d);k=0<k?Math.floor((k+w)/e):X((k-(e-w))/e);w=q+X((a.width-v)/d);a=k+X((a.height-A)/e);var B,z,C;this._wrap&&(B=c._frameInfo,z=B[0],C=B[1],B=B[2]);for(A=q;A<=w;A++)for(q=k;q<=a;q++)X=n+q,v=g+A,this._wrap&&(v<C?(v%=z,v=v<C?v+z:v):v>B&&(v%=z)),!this._isExcluded(p,X,v)&&(X>=r&&X<=y&&v>=D&&v<=P)&&(c=t+"_"+N+"_tile_"+p+"_"+q+"_"+A,-1===aa(s,c)&&(u.add(c),
s.push(c),E(p,q,X,A,v,c,d,e,m,f,h)))}},_cleanUpRemovedImages:function(){var a=this._removeList,b=c.destroy,d,e=u._css.names;a.forEach(function(a){a._fadeOut||(a.style.filter="",a.style.zoom=1,b(a))});if("css-transforms"===this._map.navigationMode)for(d=this._passives.length-1;0<=d;d--){var h=this._passives[d];0===h.childNodes.length?(this._passives.splice(d,1),b(h)):this._map.fadeOnZoom&&(!h._marked&&h._remove===h.childNodes.length)&&(h._marked=1,2048>u._css.getScaleFromMatrix(f.get(h,e.transform))?
(f.set(h,e.transition,"opacity 0.65s"),f.set(h,"opacity",0),m.disconnect(h._endHandle),h._endHandle=m.connect(h,e.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:h}))}a.clear()},_transitionEnd:function(a){var d=a.target;"opacity"===a.propertyName&&(m.disconnect(d._endHandle),d._endHandle=null,a=b.indexOf(this._passives,d),-1<a&&this._passives.splice(a,1),d.parentNode&&d.parentNode.removeChild(d),c.destroy(d))},_addImage:function(b,d,e,g,n,p,s,t,v,x,w){if(this._patchIE)x=
this._tiles[p]=c.create("div"),x.id=p,h.add(x,"layerTile"),f.set(x,{left:s*g-w.x+"px",top:t*d-w.y+"px",width:s+"px",height:t+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(b,e,n)+"', sizingMethod\x3d'scale')"}),1>v&&f.set(x,"opacity",v),b=x.appendChild(c.create("div")),f.set(b,{opacity:0,width:s+"px",height:t+"px"}),this._div.appendChild(x),this._loadingList.remove(p),this._fireOnUpdateEvent();else{x=this._tiles[p]=c.create("img");var A=m.connect;x.id=p;
x._uid=b+"_"+e+"_"+n;x.alt="";h.add(x,"layerTile");g=s*g-w.x;w=t*d-w.y;d=this._map;var E=u._css.names;s={width:s+"px",height:t+"px",visibility:"hidden"};"css-transforms"===d.navigationMode?(s[E.transform]=u._css.translate(g,w),f.set(x,s),x._left=g,x._top=w):(s.left=g+"px",s.top=w+"px",f.set(x,s));1>v&&f.set(x,"opacity",v);x._onload_connect=A(x,"onload",this,"_tileLoadHandler");x._onerror_connect=A(x,"onerror",a.hitch(this,"_tileErrorHandler",e,n));x._onabort_connect=A(x,"onabort",this,"_tileAbortHandler");
if(this.tileMap)this.tileMap.getTile(b,e,n,p,this._tileMapCallback);else if(p=this.getTileUrl(b,e,n,x))this._failedRequests&&this._failedRequests[p]?(f.set(x,this._failedRequests[p].css),x.src=this._failedRequests[p].src,this._multiple=parseInt(this._failedRequests[p].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,x.src=p);"css-transforms"===d.navigationMode?this._active.appendChild(x):this._div.appendChild(x)}},_tileMapCallback:function(a,b){var c,
d;this.suspended||(d=this._tiles[b.id]||e.byId(b.id),c=b.level+"_"+b.row+"_"+b.col,d&&d._uid===c?(this._multiple=2*(b.level-a.level)||1,this.isResampling=1!==this._multiple,c=this.tileMap.style(a,b),f.set(d,c),d.src=this.getTileUrl(a.level,a.row,a.col)):this._popTile(b))},getTileUrl:function(a,b,c){},_reCheckTS:/[\?\&]_ts=/ig,_reReplaceTS:/([\?\&]_ts=)[0-9]+/ig,addTimestampToURL:function(a){var b=this._refreshTS;b&&(a=this._reCheckTS.test(a)?a.replace(this._reReplaceTS,"$$$1"+b):a+((-1===a.indexOf("?")?
"?":"\x26")+"_ts\x3d"+b));return a},refresh:function(){this.suspended||(this._refreshTS=(new Date).getTime(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},_popTile:function(a){var b=m.disconnect;b(a._onload_connect);b(a._onerror_connect);b(a._onabort_connect);a._onload_connect=a._onerror_connect=a._onabort_connect=null;this._loadingList.remove(a.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(a){a=a.currentTarget;this._noDom?this._standby.push(a):(f.set(a,"visibility",
"inherit"),this._popTile(a))},_tileAbortHandler:function(a){a=a.currentTarget;this.onError(Error("Unable to load tile: "+a.src));f.set(a,"visibility","hidden");this._popTile(a)},_tileErrorHandler:function(a,b,c){c=c.currentTarget;var e,h,g=!0;if(this.tileMap||!this.resampling)g=!1;else if(e=new d(c.src),e=e.path.split("/"),e=parseInt(e[e.length-3]),h=this._ct.lod.level-e+1,this._multiple=Math.pow(2,h),e===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/
Math.LN2>this._resamplingTolerance)g=!1;g?(this.isResampling=!0,this._resample(c,a,b)):(this.onError(Error("Unable to load tile: "+c.src)),f.set(c,"visibility","hidden"),this._popTile(c))},_resample:function(a,b,c){var e=(new d(a.src)).path.split("/"),h=this._multiple,g=parseInt(e[e.length-3])-1,n=parseInt(b/h),p=parseInt(c/h),e=c%h,m=b%h,n=this.getTileUrl(g,n,p);b=this.getTileUrl(g+Math.log(h)/Math.LN2,b,c);h={width:this._tileW*h+"px",height:this._tileH*h+"px",margin:"-"+this._tileW*m+"px 0 0 "+
("-"+this._tileH*e+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[b]={src:n,css:h};f.set(a,h);w("chrome")&&a.setAttribute("src",null);a.src=n},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(a){if(this.opacity!=a)this.onOpacityChange(this.opacity=a)},onOpacityChange:function(){},_opacityChangeHandler:function(a){var b=f.set,c,
d,e;if("css-transforms"===this._map.navigationMode){if(this._active){e=this._active.childNodes;for(c=e.length-1;0<=c;c--)b(e[c],"opacity",a)}for(c=this._passives.length-1;0<=c;c--){e=this._passives[c].childNodes;for(d=e.length-1;0<=d;d--)b(e[d],"opacity",a)}}else{e=this._div.childNodes;for(c=e.length-1;0<=c;c--)b(e[c],"opacity",a)}},setExclusionAreas:function(a){this.exclusionAreas=a;if(this.loaded&&this._map&&this._map.loaded){var b=this._map.spatialReference,c=this.tileInfo,d=c.origin,e=c.lods,
f=e[0].level,h=e[e.length-1].level,g,n,p,m,s,E,u,t,q;if(!this.exclusionAreas||!this.exclusionAreas.length)this._exclusionsPerZoom=null;else{this._exclusionsPerZoom=[];n=0;for(p=a.length;n<p;n++)if(g=a[n],(q=g.geometry)&&"extent"===q.type&&q.xmin<=q.xmax&&q.ymin<=q.ymax){if(!b.equals(q.spatialReference))if(b._canProject(q.spatialReference))b.isWebMercator()?(t=B.lngLatToXY(q.xmin,q.ymin),q=B.lngLatToXY(q.xmax,q.ymax)):(t=B.xyToLngLat(q.xmin,q.ymin,!0),q=B.xyToLngLat(q.xmax,q.ymax,!0)),q=new C(t[0],
t[1],q[0],q[1],b);else continue;u=-1;if(g.minZoom&&-1!==g.minZoom)u=g.minZoom;else if(g.minScale&&-1!==g.minScale){m=0;for(s=e.length;m<s;m++)if(e[m].scale<=g.minScale){u=e[m].level;break}}u=Math.max(u,f);t=-1;if(g.maxZoom&&-1!==g.maxZoom)t=g.maxZoom;else if(g.maxScale&&-1!==g.maxScale){m=0;for(s=e.length;m<s;m++)if(e[m].scale<g.maxScale){t=e[m-1].level;break}else if(e[m].scale===g.maxScale){t=e[m].level;break}}t=-1===t?h:Math.min(t,h);for(g=u;g<=t;g++){m=0;for(s=e.length;m<s;m++)if(e[m].level===
g){E=e[m];break}E&&(this._exclusionsPerZoom[g]||(this._exclusionsPerZoom[g]=[]),m=1/E.resolution/c.rows,s=1/E.resolution/c.cols,this._exclusionsPerZoom[g].push({rowFrom:Math.floor((d.y-q.ymax)*m),rowTo:Math.ceil((d.y-q.ymin)*m),colFrom:Math.floor((q.xmin-d.x)*s),colTo:Math.ceil((q.xmax-d.x)*s)}))}}}this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(a,b,c){var d,e,f;if(!this._exclusionsPerZoom)return!1;d=this._exclusionsPerZoom[a];if(!d)return!1;
e=0;for(f=d.length;e<f;e++)if(a=d[e],b>=a.rowFrom&&b<a.rowTo&&c>=a.colFrom&&c<a.colTo)return!0;return!1}})})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel","dojo/_base/array","./_base"],function(g,m,a){a.ArrayList=function(b){var d=[];b&&(d=d.concat(b));this.count=d.length;this.add=function(a){d.push(a);this.count=d.length};this.addRange=function(a){if(a.getIterator)for(a=a.getIterator();!a.atEnd();)this.add(a.get());else for(var b=0;b<a.length;b++)d.push(a[b]);this.count=d.length};
this.clear=function(){d.splice(0,d.length);this.count=0};this.clone=function(){return new a.ArrayList(d)};this.contains=function(a){for(var b=0;b<d.length;b++)if(d[b]==a)return!0;return!1};this.forEach=function(a,b){g.forEach(d,a,b)};this.getIterator=function(){return new a.Iterator(d)};this.indexOf=function(a){for(var b=0;b<d.length;b++)if(d[b]==a)return b;return-1};this.insert=function(a,b){d.splice(a,0,b);this.count=d.length};this.item=function(a){return d[a]};this.remove=function(a){a=this.indexOf(a);
0<=a&&d.splice(a,1);this.count=d.length};this.removeAt=function(a){d.splice(a,1);this.count=d.length};this.reverse=function(){d.reverse()};this.sort=function(a){a?d.sort(a):d.sort()};this.setByIndex=function(a,b){d[a]=b;this.count=d.length};this.toArray=function(){return[].concat(d)};this.toString=function(a){return d.join(a||",")}};return a.ArrayList})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(g,m,a){g=m.getObject("dojox.collections",
!0);g.DictionaryEntry=function(a,d){this.key=a;this.value=d;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};g.Iterator=function(b){var d=0;this.element=b[d]||null;this.atEnd=function(){return d>=b.length};this.get=function(){return this.atEnd()?null:this.element=b[d++]};this.map=function(c,d){return a.map(b,c,d)};this.reset=function(){d=0;this.element=b[d]}};g.DictionaryIterator=function(b){var d=[],c={},h;for(h in b)c[h]||d.push(b[h]);var g=0;this.element=
d[g]||null;this.atEnd=function(){return g>=d.length};this.get=function(){return this.atEnd()?null:this.element=d[g++]};this.map=function(b,c){return a.map(d,b,c)};this.reset=function(){g=0;this.element=d[g]}};return g})},"esri/layers/TileMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils ../sniff".split(" "),function(g,m,a,b,d,c,h,n){var f=n("esri-iphone");return g(null,{declaredClass:"esri.layers.TileMap",constructor:function(a){this.layer=
a;this._tileMaps={}},getTile:function(a,b,c,d,f){a={id:d,level:a,row:b,col:c};b=this._getResamplingBudget();0<b?this._process({tile:a,requestedTile:a,callback:f,resamplingBudget:b}):(f||this.callback).call(this,a,a)},statusOf:function(a,b,c){var d=this._getResamplingBudget();a={level:a,row:b,col:c};if(0===d)return 1;for(;0<=d;){b=this._tileToTileMap(a);if(!this._tileMaps[b.uid])return-1;b=this._tileMaps[b.uid];if(!b.promise.isFulfilled())return-1;if(this._isTileAvailable(a,b))return 1;a=this._parentTile(a);
if(!a)break;d--}return 0},style:function(a,b){if(!(a.level===b.level&&a.row===b.row&&a.col===b.col)){for(var c=this.layer.tileInfo,d=c.lods,h=c.cols,c=c.rows,g,n,m=d.length-1;!g||!n;)!g&&d[m].level===a.level&&(g=d[m]),!n&&d[m].level===b.level&&(n=d[m]),m--;g=Math.round(g.resolution/n.resolution);n=-1*b.col%g*h;d=-1*b.row%g*c;g={width:h*g+"px",height:c*g+"px",margin:d+"px 0 0 "+n+"px","will-change":"transform"};f&&(n=0===n?0:-1*n,d=0===d?0:-1*d,g.clip="rect("+d+"px,"+(n+h)+"px,"+(d+c)+"px,"+n+"px)");
return g}},_process:function(a){var b=a.tile,c=this._tileToTileMap(b),d=this._parentTile(b);this._getTileMap(c).then(m.hitch(this,function(f){c=f;this._isTileAvailable(b,c)?(a.callback||this.callback).call(this,b,a.requestedTile):0<a.resamplingBudget&&d?(a.resamplingBudget--,a.tile=d,this._process(a)):(a.callback||this.callback).call(this,a.requestedTile,a.requestedTile)}),m.hitch(this,function(){(a.callback||this.callback).call(this,a.requestedTile,a.requestedTile)}))},_getTileMap:function(a){var d,
f,h,g,n=null;this._tileMaps[a.uid]?(a=this._tileMaps[a.uid],d=a.promise):(this._tileMaps[a.uid]=a,f=new b,c({url:this._getTileMapUrl(a.level,a.row,a.col),handleAs:"json",callbackParamName:"callback",timeout:3E3,load:function(b){m.mixin(a,b);if(a.data&&0<a.data.length){g=a.data.length;if(1===g)n=a.data[0];else{n=a.data[0];for(h=1;h<g;h++)if(a.data[h]!==n){n=null;break}}null!==n&&(delete a.data,a.value=n)}f.resolve(a)},error:function(a){f.reject()}}),d=a.promise=f.promise);return d},_parentTile:function(b){var c=
this.layer.tileInfo.lods,d,f,h=null;a.some(c,function(a,c){return b.level===a.level?(d=a,f=c,!0):!1});0<f&&(c=c[f-1],h={id:b.id,level:c.level,row:Math.floor(b.row*d.resolution/c.resolution+0.01),col:Math.floor(b.col*d.resolution/c.resolution+0.01)});return h},_tileToTileMap:function(a){var b=8*Math.floor(a.row/8),c=8*Math.floor(a.col/8);return{uid:a.level+"_"+b+"_"+c,level:a.level,row:b,col:c}},_isTileAvailable:function(a,b){var c,d;b.valid?void 0!==b.value?c=b.value:(c=b.location.left,d=b.location.top,
c=(a.row-d)*b.location.width+(a.col-c),c=c<b.data.length?b.data[c]:0):c=0;return c},_getTileMapUrl:function(a,b,c){var f=this.layer,h=f.tileServers,g=f._getToken(),n=f._url.query;a=(h?h[b%h.length]:f._url.path)+"/tilemap/"+a+"/"+b+"/"+c+"/8/8";n&&(a+="?"+d.objectToQuery(n));if(g&&(!n||!n.token))a+=(-1===a.indexOf("?")?"?":"\x26")+"token\x3d"+g;return a=f.addTimestampToURL(a)},_getResamplingBudget:function(){var a=this.layer,b=0;if(a.resampling&&(b=a._resamplingTolerance,null===b||void 0===b))b=a.tileInfo.lods.length;
return b}})})},"esri/layers/MapImageLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u){var t=g([u],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(b){this.inherited(arguments,[null,b]);this._mapImages=[];var c=a.hitch;this._panStart=
c(this,this._panStart);this._pan=c(this,this._pan);this._extentChange=c(this,this._extentChange);this._zoom=c(this,this._zoom);this._zoomStart=c(this,this._zoomStart);this._scale=c(this,this._scale);this._resize=c(this,this._resize);m.connect(this,"onSuspend",this,this._onSuspend);m.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(a){var b=this._mapImages.push(a),b=b-1;a._idx=b;a._layer=this;this._div&&this._createImage(a,b)},removeImage:function(a){if(a){var b=
a._idx,c=this._mapImages;if(c[b]===a){delete c[b];if(b=a._node)this._clearEvents(b),b.e_idx=b.e_bl=b.e_tr=b.e_l=b.e_t=b.e_w=b.e_h=null,b.parentNode&&(b.parentNode.removeChild(b),d.destroy(b));a._node=a._idx=a._layer=null}}},removeAllImages:function(){var a=this._mapImages,b,c=a.length;for(b=0;b<c;b++){var d=a[b];d&&this.removeImage(d)}this._mapImages=[]},getImages:function(){var a=this._mapImages,b=[],c,d=a.length;for(c=0;c<d;c++)a[c]&&b.push(a[c]);return b},setOpacity:function(a){this.opacity!=a&&
(this._opacityChanged(this.opacity=a),this.onOpacityChange())},onOpacityChange:function(){},_opacityChanged:function(a){var b=this._div,d,e;if(b)if(!f("ie")||8<f("ie"))c.set(b,"opacity",a);else{e=b.childNodes;d=e.length;for(b=0;b<d;b++)c.set(e[b],"opacity",a)}},_createImage:function(a,b){var e=d.create("img");c.set(e,{position:"absolute"});1>a.opacity?c.set(e,"opacity",a.opacity):8>=f("ie")&&c.set(e,"opacity",this.opacity);a.rotation&&!(9>f("ie"))&&c.set(e,h._css.names.transform,h._css.rotate(360-
a.rotation));a._node=e;e.e_idx=b;e.e_layer=this;e.e_load=m.connect(e,"onload",t.prototype._imageLoaded);e.e_error=m.connect(e,"onerror",t.prototype._imageError);e.e_abort=m.connect(e,"onabort",t.prototype._imageError);e.src=a.href},_imageLoaded:function(a,b){var c=b||a.target||a.currentTarget,d=c.e_layer,e=d._mapImages[c.e_idx],f=d._map;f&&(f.__zooming||f.__panning||!d._sr)?d._standby.push(c):(d._clearEvents(c),e&&e._node===c&&f&&d._attach(e))},_imageError:function(a){a=a.target||a.currentTarget;
var b=a.e_layer,c=b._mapImages[a.e_idx];b._clearEvents(a);c&&(c._node=null)},_clearEvents:function(a){var b=m.disconnect;b(a.e_load);b(a.e_error);b(a.e_abort);a.e_load=a.e_error=a.e_abort=a.e_layer=null},_attach:function(a){var b=a.extent,c=b.spatialReference,d=this._sr,e=this._div,f=a._node,h=new p({x:b.xmin,y:b.ymin,spatialReference:c}),b=new p({x:b.xmax,y:b.ymax,spatialReference:c});d.equals(c)||(d.isWebMercator()&&4326===c.wkid?(h=s.geographicToWebMercator(h),b=s.geographicToWebMercator(b)):c.isWebMercator()&&
4326===d.wkid&&(h=s.webMercatorToGeographic(h),b=s.webMercatorToGeographic(b)));f.e_bl=h;f.e_tr=b;a.visible&&(this._setPos(f,e._left,e._top),(this._active||e).appendChild(f))},_setPos:function(a,b,d){var e=a.e_bl,f=a.e_tr,g=this._map,e=g.toScreen(e),f=g.toScreen(f);b=e.x-b;d=f.y-d;var n=Math.abs(f.x-e.x),e=Math.abs(e.y-f.y),f={width:n+"px",height:e+"px"},p=this._mapImages[a.e_idx];"css-transforms"===g.navigationMode?f[h._css.names.transform]=h._css.translate(b,d)+(p.rotation?" "+h._css.rotate(360-
p.rotation):""):(f.left=b+"px",f.top=d+"px");c.set(a,f);a.e_l=b;a.e_t=d;a.e_w=n;a.e_h=e},managedSuspension:!0,_setMap:function(a,b){this.inherited(arguments);var g=this._div=d.create("div",null,b),n=h._css.names,p={position:"absolute"},m=a.__visibleDelta;if(!f("ie")||8<f("ie"))p.opacity=this.opacity;"css-transforms"===a.navigationMode?(p[n.transform]=h._css.translate(m.x,m.y),c.set(g,p),g._left=m.x,g._top=m.y,p={position:"absolute",width:a.width+"px",height:a.height+"px",overflow:"visible"},this._active=
d.create("div",null,g),c.set(this._active,p),this._passive=d.create("div",null,g),c.set(this._passive,p)):(g._left=0,g._top=0,c.set(g,p));this._standby=[];n=this._mapImages;m=n.length;for(p=0;p<m;p++){var s=n[p];s._node||this._createImage(s,s._idx)}e.hide(g);return g},_unsetMap:function(a,b){this._disconnect();var c=this._div;if(c){var e=this._mapImages,f,h=e.length;for(f=0;f<h;f++){var g=e[f];if(g){var n=g._node;n&&(this._clearEvents(n),n.e_idx=n.e_bl=n.e_tr=n.e_l=n.e_t=n.e_w=n.e_h=null);g._node=
null}}b.removeChild(c);d.destroy(c)}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();e.hide(this._div)},_onResume:function(a){a.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());a=this._map;var b=this._div,d=a.__visibleDelta;"css-transforms"===a.navigationMode&&(b._left=d.x,b._top=d.y,c.set(b,h._css.names.transform,h._css.translate(b._left,b._top)));this._redraw("css-transforms"===
a.navigationMode);this._connect(a);e.show(b)},_connect:function(a){if(!this._connections){var b=m.connect,c="css-transforms"===a.navigationMode;this._connections=[b(a,"onPanStart",this._panStart),b(a,"onPan",this._pan),b(a,"onExtentChange",this._extentChange),c&&b(a,"onZoomStart",this._zoomStart),c?b(a,"onScale",this._scale):b(a,"onZoom",this._zoom),c&&b(a,"onResize",this._resize)]}},_disconnect:function(){this._connections&&(b.forEach(this._connections,m.disconnect),this._connections=null)},_panStart:function(){this._panL=
this._div._left;this._panT=this._div._top},_pan:function(a,b){var d=this._div;d._left=this._panL+b.x;d._top=this._panT+b.y;"css-transforms"===this._map.navigationMode?c.set(d,h._css.names.transform,h._css.translate(d._left,d._top)):c.set(d,{left:d._left+"px",top:d._top+"px"})},_extentChange:function(a,b,c){c?this._redraw("css-transforms"===this._map.navigationMode):b&&this._pan(a,b);this._processStandbyList()},_processStandbyList:function(){var a,b=this._standby;if(b&&b.length)for(a=b.length-1;0<=
a;a--)this._imageLoaded(null,b[a]),b.splice(a,1)},_redraw:function(a){if(a){a=this._passive;var b=h._css.names;c.set(a,b.transition,"none");this._moveImages(a,this._active);c.set(a,b.transform,"none")}a=this._active||this._div;var b=this._div._left,d=this._div._top,e,f=a.childNodes.length,g;for(e=0;e<f;e++)g=a.childNodes[e],this._setPos(g,b,d)},_zoom:function(a,b,d){a=this._div;var e=a._left,f=a._top,h,g=a.childNodes.length,n;for(h=0;h<g;h++){n=a.childNodes[h];var p=n.e_w*b,m=n.e_h*b,s=(d.x-e-n.e_l)*
(p-n.e_w)/n.e_w,u=(d.y-f-n.e_t)*(m-n.e_h)/n.e_h,s=isNaN(s)?0:s,u=isNaN(u)?0:u;c.set(n,{left:n.e_l-s+"px",top:n.e_t-u+"px",width:p+"px",height:m+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(a,b){var c=a.childNodes,d;d=c.length;if(0<d)for(d-=1;0<=d;d--)b.appendChild(c[d])},_scale:function(a,b){var d=h._css.names,e=this._passive;c.set(e,d.transition,b?"none":d.transformName+" "+n.defaults.map.zoomDuration+"ms ease");h._css.matrix(a);c.set(e,d.transform,
h._css.matrix(a))},_resize:function(a,b,d){c.set(this._active,{width:b+"px",height:d+"px"});c.set(this._passive,{width:b+"px",height:d+"px"})}});return t})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),function(g,m,a,b,d,c,h,n,f){return g(n,{declaredClass:"esri.layers.OpenStreetMapLayer",constructor:function(a){this.spatialReference=new c({wkid:102100});
this.tileInfo=new f({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,
resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,
scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817},{level:19,scale:1128.497176,resolution:0.298582141647617}]});this.fullExtent=new h({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.initialExtent=new h({xmin:-2.003750834E7,
ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=a&&a.tileServers||["//a.tile.openstreetmap.org","//b.tile.openstreetmap.org","//c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=a?a.displayLevels:null;this.copyright=a&&a.copyright||"Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";this.loaded=!0;this.onLoad(this);(a=a&&a.loadCallback)&&a(this)},getTileUrl:function(a,b,c){a=this.tileServers[b%this.serversLength]+
"/"+a+"/"+c+"/"+b+".png";a=d.normalize(a);a=this.addTimestampToURL(a);return d.addProxy(a)}})})},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../geometry/normalizeUtils ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom require require".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I){return g([H,J,n],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(a,f){this.initialize();m.mixin(this,a);this.domNode=e.byId(f);var h=this._nls=m.mixin({},I.widgets.popup),g=this.domNode;s.add(g,"esriPopup");(this._isRTL=
!t.isBodyLtr())&&w.set(g,"direction","rtl");p.set(g,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+h.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+h.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+h.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
h.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+h.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d"+h.NLS_zoomTo+" class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+h.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=d.query(".sizer",g);h=d.query(".titlePane",g)[0];e.setSelectable(h,!1);this._title=d.query(".title",h)[0];this._prevFeatureButton=d.query(".prev",h)[0];this._nextFeatureButton=d.query(".next",h)[0];this._maxButton=d.query(".maximize",h)[0];this._spinner=d.query(".spinner",h)[0];this._contentPane=d.query(".contentPane",g)[0];this._positioner=d.query(".esriPopupWrapper",g)[0];this._pointer=d.query(".pointer",g)[0];this._outerPointer=d.query(".outerPointer",g)[0];this._actionList=d.query(".actionsPane .actionList",
g)[0];this._eventConnections=[b.connect(d.query(".close",h)[0],"onclick",this,this.hide),b.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),b.connect(this._nextFeatureButton,"onclick",this,this.selectNext),b.connect(this._maxButton,"onclick",this,this._toggleSize),b.connect(d.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),b.connect(this,"onClearFeatures",this,this._featuresCleared),b.connect(this,"onSelectionChange",this,this._featureSelected),b.connect(this,
"onDfdComplete",this,this._updateUI)];c("esri-touch")&&(g=A.setScrollable(this._contentPane),this._eventConnections.push(g[0],g[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(a){this.inherited(arguments);u.place(this.domNode,a.root);this.highlight&&this.enableHighlight(a);this._maxHeight=w.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(a){if(this.popupWindow){if(!B.isDefined(a)||
""===a)a="\x26nbsp;";this.destroyDijits(this._title);this.place(a,this._title);this.isShowing&&(this.startupDijits(this._title),this.reposition())}},setContent:function(a){if(this.popupWindow){if(!B.isDefined(a)||""===a)a="\x26nbsp;";this.destroyDijits(this._contentPane);this.place(a,this._contentPane);this.isShowing&&(this.startupDijits(this._contentPane),this.reposition())}},show:function(a,b){if(this.popupWindow)if(this._delayHide=!1,a){var c=this.map,d;a.spatialReference?(this.location=a,d=c.toScreen(a)):
(this.location=c.toMap(a),d=a);var e=c._getFrameWidth();if(-1!==e&&(d.x%=e,0>d.x&&(d.x+=e),c.width>e))for(c=(c.width-e)/2;d.x<c;)d.x+=e;this._maximized?this.restore():this._setPosition(d);b&&b.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this.startupDijits(this._contentPane),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),
this._unfollowMap(),this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(a,b){this.popupWindow&&(this._sizers.style({width:a+"px"}),w.set(this._contentPane,"maxHeight",b+"px"),this._maxHeight=b,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&(this.location&&!this._maximized&&this.isShowing)&&this._setPosition(this.map.toScreen(this.location))},maximize:function(){var a=this.map;if(a&&!this._maximized&&this.popupWindow){this._maximized=
!0;var b=this._maxButton;s.remove(b,"maximize");s.add(b,"restore");p.set(b,"title",this._nls.NLS_restore);var b=this.marginLeft,c=this.marginTop,d=a.width-2*b,a=a.height-2*c;w.set(this.domNode,{left:this._isRTL?null:b+"px",right:this._isRTL?b+"px":null,top:c+"px",bottom:null});w.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=w.get(this._sizers[0],"width");this._savedHeight=w.get(this._contentPane,"maxHeight");this._sizers.style({width:d+"px"});w.set(this._contentPane,
{maxHeight:a-65+"px",height:a-65+"px"});this._showPointer("");this._unfollowMap();s.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&this._maximized&&this.popupWindow){this._maximized=!1;var a=this._maxButton;s.remove(a,"restore");s.add(a,"maximize");p.set(a,"title",this._nls.NLS_maximize);w.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();
s.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);this.destroyDijits(this._content);a.forEach(this._eventConnections,b.disconnect);u.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=
this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(){this.inherited(arguments);this._updateUI()},postscript:null,_highlightSetter:function(a){var b=this.highlight,c=this.map;this.highlight=a;if(c&&a!==b)if(a){if(this.enableHighlight(c),a=this.features&&this.features[this.selectedIndex])this.updateHighlight(c,a),this.showHighlight()}else this.disableHighlight(c)},
_pagingControlsSetter:function(a){var b=this.pagingControls,c=this.map;this.pagingControls=a;c&&a!==b&&this._updatePagingControls()},_pagingInfoSetter:function(a){var b=this.pagingInfo,c=this.map;this.pagingInfo=a;c&&(a!==b&&this.features&&this.features.length)&&this._updatePagingInfo()},_popupWindowSetter:function(a){var b=this.popupWindow,c=this.map;this.popupWindow=a;c&&a!==b&&(a?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(a){var b=this.anchor;
this.anchor=a;this.map&&a!==b&&this.reposition()},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var a=this.selectedIndex;if(0<=a){var b=this.features[a].getContent(),c;!this.titleInBody&&b&&m.isString(b.id)&&(c=v.byId(b.id))&&(c.set&&/_PopupRenderer/.test(c.declaredClass))&&c.set("showTitle",!1);this.setContent(b);
this.updateHighlight(this.map,this.features[a]);this.showHighlight()}},_toggleVisibility:function(a){this._setVisibility(a);this.isShowing=a},_setVisibility:function(a){s.toggle(this.domNode,"esriPopupVisible",a);s.toggle(this.domNode,"esriPopupHidden",!a)},_waitAndHide:function(a){var b=this;this._delayHide=!0;setTimeout(function(){b._delayHide&&(b._delayHide=!1,b.hide())},a)},_followMap:function(){this._unfollowMap();var a=this.map;this._handles=[b.connect(a,"onPanStart",this,this._onPanStart),
b.connect(a,"onPan",this,this._onPan),b.connect(a,"onZoomStart",this,this._onZoomStart),b.connect(a,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var c=this._handles;c&&(a.forEach(c,b.disconnect),this._handles=null)},_onPanStart:function(){var a=this.domNode.style;this._panOrigin={left:a.left,top:a.top,right:a.right,bottom:a.bottom}},_onPan:function(a,b){var c=this._panOrigin,d=b.x,e=b.y,f=c.left,h=c.top,g=c.right,c=c.bottom;f&&(f=parseFloat(f)+d+"px");h&&(h=parseFloat(h)+
e+"px");g&&(g=parseFloat(g)-d+"px");c&&(c=parseFloat(c)-e+"px");w.set(this.domNode,{left:f,top:h,right:g,bottom:c})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(a,b,c){c&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_setPosition:function(a){var b=a.x,c=a.y;a=this.offsetX||0;var d=this.offsetY||0,e=0,f=0,g=t.position(this.map.container,!0),n=g.w,
E=g.h,p="Left",m="bottom",q=t.getContentBox(this._positioner),k=q.w/2,r=q.h/2,y=w.get(this._sizers[0],"height")+this._maxHeight+w.get(this._sizers[2],"height"),D=y/2,P=0,aa=0,X=b,s=c,u=this.anchor.toLowerCase();if("auto"===u){if(u=h.getBox)u=u(),P=Math.max(u.l,g.x),n=Math.min(u.l+u.w,g.x+g.w),aa=Math.max(u.t,g.y),E=Math.min(u.t+u.h,g.y+g.h),X+=g.x,s+=g.y;g=s-aa>=y;y=E-s>=y;u=n-X>=q.w;q=X-P>=q.w;s-aa>D&&E-s>=D&&(u?(m="",p="Left"):q&&(m="",p="Right"));p&&m&&(X-P>k&&n-X>=k)&&(g?(p="",m="bottom"):y&&
(p="",m="top"));p&&m&&(u&&g?(p="Left",m="bottom"):u&&y?(p="Left",m="top"):q&&y?(p="Right",m="top"):q&&g&&(p="Right",m="bottom"))}else m=p="",-1!==u.indexOf("top")?m="bottom":-1!==u.indexOf("bottom")&&(m="top"),-1!==u.indexOf("left")?p="Right":-1!==u.indexOf("right")&&(p="Left");D=m+p;switch(D){case "top":case "bottom":f=14;break;case "Left":case "Right":e=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":f=14,e=-16}w.set(this.domNode,{left:b+"px",top:c+"px",right:null,bottom:null});
b={left:null,right:null,top:null,bottom:null};p?b[p.toLowerCase()]=e+a+"px":b.left=-k+"px";m?b[m]=f+d+"px":b.top=-r+"px";w.set(this._positioner,b);this._showPointer(D)},_showPointer:function(a){s.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));s.remove(this._outerPointer,["right","left","hidden"]);"Right"===a||"Left"===a?(a=a.toLowerCase(),s.add(this._outerPointer,a)):s.add(this._pointer,a)},_setPagerCallbacks:function(a,c,d){if(this.pagingControls&&
!(a===this&&(!this._pagerScope||this._pagerScope===this))&&a!==this._pagerScope){this._pagerScope=a;a===this&&(c=this.selectPrevious,d=this.selectNext);var e=this._eventConnections;b.disconnect(e[1]);b.disconnect(e[2]);c&&(e[1]=b.connect(this._prevFeatureButton,"onclick",a,c));d&&(e[2]=b.connect(this._nextFeatureButton,"onclick",a,d))}},_getLocation:function(a){var b,c;if(a=a&&a.geometry)switch(a.type){case "point":b=a;break;case "multipoint":b=a.getPoint(0);c=F.getDenormalizedExtent(a);break;case "polyline":case "polygon":b=
a.getPoint(0,0),c=F.getDenormalizedExtent(a)}return[b,c]},_zoomToFeature:function(a){a.preventDefault();var b=this.features,c=this.selectedIndex;a=this.map;if(b){c=this._getLocation(b[c]);b=c[0];c=c[1];b||(b=this.location);if(!c||!c.intersects(this.location))this.location=b;if(c&&c.getWidth()&&c.getHeight())a.setExtent(c,!0);else{var d=a.getNumLevels(),c=a.getLevel(),e=a.getMaxZoom(),f=this.zoomFactor||1;0<d?c!==e&&(d=c+f,d>e&&(d=e),a.navigationManager._wheelZoom({value:d-c,mapPoint:b},!0)):a.navigationManager._wheelZoom({value:2*
(1/Math.pow(2,f)),mapPoint:b},!0)}}},_updatePagingControls:function(){var a=this._prevFeatureButton,b=this._nextFeatureButton,c=this.selectedIndex,d=this.features?this.features.length:0;this.pagingControls&&1<d?(0===c?s.add(a,"hidden"):s.remove(a,"hidden"),c===d-1?s.add(b,"hidden"):s.remove(b,"hidden")):(s.add(a,"hidden"),s.add(b,"hidden"))},_updatePagingInfo:function(){var a=this.features?this.features.length:0,b=this._nls,c="\x26nbsp;";this.pagingInfo&&(1<a&&b.NLS_pagingInfo)&&(c=B.substitute({index:this.selectedIndex+
1,total:a},b.NLS_pagingInfo));if(a&&(b=this.getSelectedFeature(),a=b.getInfoTemplate(),b=b.getTitle(),(!a||/esri\.InfoTemplate/.test(a.declaredClass)||!this.titleInBody)&&b))c=b+("\x26nbsp;"===c?"":" "+c);this.setTitle(c)},_updateUI:function(){if(this.popupWindow){var a=this.features,b=this.deferreds,c=a?a.length:0,d=this._spinner,e=this._actionList,f=this._nls;this._updatePagingControls();this._updatePagingInfo();c?s.remove(e,"hidden"):s.add(e,"hidden");b&&b.length?a?s.remove(d,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+
f.NLS_searching+"...\x3c/div\x3e"):(s.add(d,"hidden"),c||(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+f.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay)))}}})})},"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),function(g,m,a,b,d,c,h,n,f,e,p){return g(null,{declaredClass:"esri.InfoWindowBase",
constructor:function(){var a=m.hitch;this.__set_title=a(this,this.__set_title);this.__err_title=a(this,this.__err_title);this.__set_content=a(this,this.__set_content);this.__err_content=a(this,this.__err_content)},setMap:function(a){this.map=a},unsetMap:function(a){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(a,b){e.isDefined(a)?m.isObject(a)?c.place(a,b,"only"):b.innerHTML=
a:b.innerHTML=""},startupDijits:function(a){this._processDijits(a)},destroyDijits:function(a){this._processDijits(a,!0)},_processDijits:function(b,c){if(b&&1===b.children.length){var d=b.children[0];if(d){var e=n.byNode(d),d=e?[e]:n.findWidgets(d);a.forEach(d,function(a){if(c){if(a._started&&!a._destroyed)try{a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy()}catch(b){}}else if(!a._started)try{a.startup()}catch(d){}})}}},__registerMapListeners:function(){this.__unregisterMapListeners();
var a=this.map;this.__handles=[b.connect(a,"onPan",this,this.__onMapPan),b.connect(a,"onZoomStart",this,this.__onMapZmStart),b.connect(a,"onExtentChange",this,this.__onMapExtChg)]},__unregisterMapListeners:function(){var c=this.__handles;c&&(a.forEach(c,b.disconnect,b),this.__handles=null)},__onMapPan:function(a,b){this.move(b,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new p(this.coords));this.hide(null,!0)},__onMapExtChg:function(a,b,c){a=this.map;var d=this.mapCoords;
d?this.show(d,null,!0):(b=c?a.toScreen(this.__mcoords):this.coords.offset(b&&b.x||0,b&&b.y||0),this.show(b,null,!0))},__setValue:function(a,b){this[a].innerHTML="";var c="_dfd"+a,f=this[c];f&&-1===f.fired&&(f.cancel(),this[c]=null);e.isDefined(b)&&(b instanceof d?(this[c]=b,b.addCallbacks(this["__set"+a],this["__err"+a])):this.__render(a,b))},__set_title:function(a){this._dfd_title=null;this.__render("_title",a)},__err_title:function(a){this._dfd_title=null},__set_content:function(a){this._dfd_content=
null;this.__render("_content",a)},__err_content:function(a){this._dfd_content=null},__render:function(a,b){var c=this[a];this.place(b,c);this.isShowing&&(this.startupDijits(c),"_title"===a&&this._adjustContentArea&&this._adjustContentArea())}})})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented require".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B){function A(a){return"sizeInfo"===a.type}return g(B,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",m.hitch(this,this._resetUpdateEndListeners));this.on("dfd-complete",
m.hitch(this,this._processFeatures));this.on("set-features",m.hitch(this,this._processFeatures))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners()},setFeatures:function(b){if(b&&b.length){this.clearFeatures();var c,e;b[0]instanceof d?e=b:c=b;c?this._updateFeatures(null,c):(this.deferreds=e,e=e.slice(0),a.forEach(e,function(a){a.addBoth(m.hitch(this,this._updateFeatures,a))},this))}},clearFeatures:function(){this.features=this.deferreds=this._marked=null;this.count=
0;var a=this.selectedIndex;this.selectedIndex=-1;if(-1<a)this.onSelectionChange();this.onClearFeatures()},getSelectedFeature:function(){var a=this.features;if(a)return a[this.selectedIndex]},select:function(a){0>a||a>=this.count||(this.selectedIndex=a,this.onSelectionChange())},enableHighlight:function(a){this._highlighted=a.graphics.add(new n(new f(0,0,a.spatialReference)));this._highlighted.hide();this.markerSymbol||(a=this.markerSymbol=new u,a.setStyle(u.STYLE_TARGET),a._setDim(16,16,0),a.setOutline(new w(t.STYLE_SOLID,
new b([0,255,255]),2,w.CAP_ROUND,w.JOIN_ROUND)),a.setColor(new b([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new t(t.STYLE_SOLID,new b([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new v(v.STYLE_NULL,new t(t.STYLE_SOLID,new b([0,255,255]),2),new b([0,0,0,0])))},disableHighlight:function(a){var b=this._highlighted;b&&(b.hide(),a.graphics.remove(b),delete this._highlighted);this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var a=this.features&&this.features[this.selectedIndex];
this._highlighted&&(a&&a.geometry)&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},updateHighlight:function(a,b){var c=b.geometry,d=this._highlighted;if(!c||!d)d&&d.hide();else{d.hide();!d._graphicsLayer&&a&&a.graphics.add(d);d.setGeometry(e.fromJson(c.toJson()));var f;switch(c.type){case "point":case "multipoint":var h=b.getLayer(),c=b.symbol||h&&h._getSymbol(b);if(h&&c){var g,n,p=0,m=0,s=0;f=!b.symbol?h._getRenderer(b):null;if(h=this._getSizeInfo(f))g=
n=f.getSize(b,{sizeInfo:h,shape:c.style,resolution:a&&a.getResolutionInMeters&&a.getResolutionInMeters()});else switch(c.type){case "simplemarkersymbol":g=n=c.size||0;break;case "picturemarkersymbol":g=c.width||0,n=c.height||0}p=c.xoffset||0;m=c.yoffset||0;s=c.angle||0;f=this.markerSymbol;f.setOffset(0,0);f.setAngle(0);g&&n&&f._setDim(g+1,n+1,0);f.setOffset(p,m);f.setAngle(s)}break;case "polyline":f=this.lineSymbol;break;case "polygon":f=this.fillSymbol}d.setSymbol(f)}},showClosestFirst:function(a){var b=
this.features;if(b&&b.length){if(1<b.length){var c,d=Infinity,e=-1,f,h=p.getLength,g,n=a.spatialReference,m,u;a=a.normalize();for(c=b.length-1;0<=c;c--)if(f=b[c].geometry){m=f.spatialReference;g=0;try{u="point"===f.type?f:f.getExtent().getCenter(),u=u.normalize(),n&&(m&&!n.equals(m)&&n._canProject(m))&&(u=n.isWebMercator()?s.geographicToWebMercator(u):s.webMercatorToGeographic(u)),g=h(a,u)}catch(t){}0<g&&g<d&&(d=g,e=c)}0<e&&(b.splice(0,0,b.splice(e,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=
a)},_unbind:function(b){b=a.indexOf(this.deferreds,b);if(-1!==b)return this.deferreds.splice(b,1),!this.deferreds.length?(this.deferreds=null,2):1},_fireComplete:function(a){var b=this._marked;b&&(this._marked=null,this.showClosestFirst(b));this.onDfdComplete(a)},_updateFeatures:function(b,c){if(b){if(this.deferreds){var d=this._unbind(b);if(d)if(c&&c instanceof Error){if(this._fireComplete(c),2===d)this.onSetFeatures()}else if(c&&c.length)if(this.features){var e=a.filter(c,function(b){return-1===
a.indexOf(this.features,b)},this);this.features=this.features.concat(e);this.count=this.features.length;this._fireComplete();if(2===d)this.onSetFeatures()}else{this.features=c;this.count=c.length;this.selectedIndex=0;this._fireComplete();if(2===d)this.onSetFeatures();this.select(0)}else if(this._fireComplete(),2===d)this.onSetFeatures()}}else this.features=c,this.count=c.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(b){return b?b.sizeInfo||a.filter(b.visualVariables,
A)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};a.forEach(this._updateEndHandles,function(a){a.remove()});this._updateEndHandles=[]},_processFeatures:function(){a.forEach(this.features,function(a){if((a=a.getLayer())&&!this._featureLayers[a.id]&&(1===a.currentMode||0===a.currentMode&&6===a.mode)&&a.objectIdField&&a.hasXYFootprint&&a.queryFeatures&&("esriGeometryPolygon"===a.geometryType||"esriGeometryPolyline"===a.geometryType||a.hasXYFootprint()))this._featureLayers[a.id]=
a,a=a.on("update-end",m.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(a)},this)},_fLyrUpdateEndHandler:function(b){if(!b.error){var c=this,d=b.target,e=d.getSelectedFeatures(),f=0===d.currentMode&&6===d.mode,h={},g=[];a.forEach(this.features,function(a){if(a.getLayer()===d){var b=a.attributes[d.objectIdField];h[b]=a;g.push(b)}});g.length&&(b=new x,b.objectIds=g,d.queryFeatures(b,function(b){a.forEach(b.features,function(b){var c=h[b.attributes[d.objectIdField]],g=!1;c.geometry!==
b.geometry?(c.setGeometry(b.geometry),g=!0):f&&(e&&-1!==a.indexOf(e,b))&&(g=!0);g&&(this._highlighted&&c===this.getSelectedFeature())&&this._highlighted.setGeometry(b.geometry)},c)}))}}})})},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(g){return{add:function(m,a){m.popupManager||(m.popupManager=new g(a),m.popupManager.setMap(m))},remove:function(g){var a=g.popupManager;a&&(a.unsetMap(),g.popupManager=void 0)}}})},"esri/PopupManager":function(){define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/has dojo/on dojo/promise/all dojo/Stateful require".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w){var v;return n(t,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(a){this._mapClickHandler=e.hitch(this,this._mapClickHandler)},setMap:function(a){if(this.map)if(a!==this.map)this.unsetMap();else return;this.map=a;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(a){var b;
if(a&&(b=a.getLayer()))if(a=b.id,this._featureLayersCache[a]){var c=a.lastIndexOf("_");-1<c&&(a=a.substring(0,c),b=this.map.getLayer(a))}return b},_enabledSetter:function(a){this.enabled=a;this._setupClickHandler()},_setupClickHandler:function(){this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(a){var b=this.map.infoWindow,c=a.graphic;b&&this.map.loaded&&
(b.clearFeatures&&b.setFeatures?this._showPopup(a):c&&c.getInfoTemplate()&&this._showInfoWindow(c,a.mapPoint))},_showPopup:function(a){var b=this.map,c=b.infoWindow,e=this,n=[],p=[b.graphics].concat(h.map(b.graphicsLayerIds,b.getLayer,b));h.forEach(p,function(a){a&&(a.loaded&&a.infoTemplate&&!a.suspended)&&n.push(a)});var s=[];h.forEach(b.layerIds,function(a){(a=b.getLayer(a))&&(a.loaded&&!a.suspended)&&(e._isImageServiceLayer(a)&&a.infoTemplate?n.push(a):"esri.layers.WMSLayer"===a.declaredClass&&
a.getFeatureInfoURL?n.push(a):("esri.layers.ArcGISDynamicMapServiceLayer"===a.declaredClass||"esri.layers.ArcGISTiledMapServiceLayer"===a.declaredClass)&&a.infoTemplates&&s.push(a))});this._getSubLayerFeatureLayers(s).then(function(p){n=n.concat(p);p=null;a.graphic&&(a.graphic.getInfoTemplate()&&!e._isImageServiceLayer(a.graphic._layer))&&(p=a.graphic);if(n.length||p){var s=e._calculateClickTolerance(n),u=a.screenPoint,t=b.toMap(new m(u.x-s,u.y+s)),s=b.toMap(new m(u.x+s,u.y-s)),v=new g(t.x,t.y,s.x,
s.y,b.spatialReference);if(v=v.intersects(b.extent)){var w=new d,O=!!p,F=!0,t=h.map(n,function(c){var d;w.timeExtent=c.useMapTime?b.timeExtent:null;if(e._isImageServiceLayer(c))w.geometry=a.mapPoint,F=!1,d=c.queryVisibleRasters(w,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0}),d.addCallback(function(){var a=c.getVisibleRasters();O=O||0<a.length;return a});else if("esri.layers.WMSLayer"===c.declaredClass){d=new f;var E=c._getPopupGraphic(b,a.screenPoint);E?(d.resolve([E]),O=!0):
d.resolve([])}else e._featureLayersCache[c.id]||"function"===typeof c.queryFeatures&&(0===c.currentMode||1===c.currentMode)?(w.geometry=v,d=c.queryFeatures(w),d.addCallback(function(a){a=a.features;a=h.filter(a,function(a){return a.visible});O=O||0<a.length;return a})):(d=new f,E=h.filter(c.graphics,function(a){return a&&a.visible&&v.intersects(a.geometry)}),O=O||0<E.length,d.resolve(E));return d});p&&(s=new f,s.resolve([p]),t.unshift(s));!h.some(t,function(a){return!a.isFulfilled()})&&!O?(c.hide(),
c.clearFeatures()):(c.setFeatures(t),c.show(a.mapPoint,{closestFirst:F}))}}})},_getSubLayerFeatureLayers:function(a,c){var d=c||new f,e=[],g=a.length,n=Math.floor(this.map.extent.getWidth()/this.map.width),p=this.map.getScale(),m=!1,t=this,K=0;a:for(;K<g;K++){var M=a[K],L=M.dynamicLayerInfos||M.layerInfos;if(L){var G=null;if(M._params&&(M._params.layers||M._params.dynamicLayers))G=M.visibleLayers;for(var G=b._getVisibleLayers(L,G),O=b._getLayersForScale(p,L),S=L.length,U=0;U<S;U++){var T=L[U],E=T.id,
Q=M.infoTemplates[E];if(!T.subLayerIds&&Q&&Q.infoTemplate&&-1<h.indexOf(G,E)&&-1<h.indexOf(O,E)){if(!v){m=!0;break a}var N=M.id+"_"+E,q=this._featureLayersCache[N];if(!q||!q.loadError)q||((q=Q.layerUrl)||(q=T.source?this._getLayerUrl(M.url,"/dynamicLayer"):this._getLayerUrl(M.url,E)),q=new v(q,{id:N,drawMode:!1,mode:v.MODE_SELECTION,outFields:this._getOutFields(Q.infoTemplate),resourceInfo:Q.resourceInfo,source:T.source}),this._featureLayersCache[N]=q),q.setDefinitionExpression(M.layerDefinitions&&
M.layerDefinitions[E]),q.setGDBVersion(M.gdbVersion),q.setInfoTemplate(Q.infoTemplate),q.setMaxAllowableOffset(n),q.setUseMapTime(!!M.useMapTime),M.layerDrawingOptions&&(M.layerDrawingOptions[E]&&M.layerDrawingOptions[E].renderer)&&q.setRenderer(M.layerDrawingOptions[E].renderer),e.push(q)}}}}if(m){var k=new f;w(["./layers/FeatureLayer"],function(a){v=a;k.resolve()});k.then(function(){t._getSubLayerFeatureLayers(a,d)})}else{var r=[];h.forEach(e,function(a){if(!a.loaded){var k=new f;s.once(a,"load, error",
function(){k.resolve()});r.push(k.promise)}});r.length?u(r).then(function(){e=h.filter(e,function(a){return!a.loadError&&a.isVisibleAtScale(p)});d.resolve(e)}):(e=h.filter(e,function(a){return a.isVisibleAtScale(p)}),d.resolve(e))}return d.promise},_getLayerUrl:function(a,b){var c=a.indexOf("?");return-1===c?a+"/"+b:a.substring(0,c)+"/"+b+a.substring(c)},_getOutFields:function(a){var b;a.info&&"esri.dijit.PopupTemplate"===a.declaredClass?(b=[],h.forEach(a.info.fieldInfos,function(a){var c=a.fieldName&&
a.fieldName.toLowerCase();c&&("shape"!==c&&0!==c.indexOf("relationships/"))&&b.push(a.fieldName)})):b=["*"];return b},_calculateClickTolerance:function(a){var b=6,c,d;h.forEach(a,function(a){if(c=a.renderer)"esri.renderer.SimpleRenderer"===c.declaredClass?((d=c.symbol)&&d.xoffset&&(b=Math.max(b,Math.abs(d.xoffset))),d&&d.yoffset&&(b=Math.max(b,Math.abs(d.yoffset)))):("esri.renderer.UniqueValueRenderer"===c.declaredClass||"esri.renderer.ClassBreaksRenderer"===c.declaredClass)&&h.forEach(c.infos,function(a){(d=
a.symbol)&&d.xoffset&&(b=Math.max(b,Math.abs(d.xoffset)));d&&d.yoffset&&(b=Math.max(b,Math.abs(d.yoffset)))})});return b},_showInfoWindow:function(a,b){var d=this.map.infoWindow,f=a.geometry,f=f&&"point"===f.type?f:b,h=a.getContent();d.setTitle(a.getTitle());if(h&&e.isString(h.id)){var g=c.byId(h.id);g&&(g.set&&/_PopupRenderer/.test(g.declaredClass))&&g.set("showTitle",!1)}d.setContent(h);d.show(f)},_isImageServiceLayer:function(a){return"esri.layers.ArcGISImageServiceLayer"===a.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===
a.declaredClass}})})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H){var J=b.connect,I=b.disconnect,K=t("chrome"),
M=t("safari"),L=[h.NUMPAD_PLUS,61,187,h.NUMPAD_MINUS,173,189,h.UP_ARROW,h.NUMPAD_8,h.RIGHT_ARROW,h.NUMPAD_6,h.DOWN_ARROW,h.NUMPAD_2,h.LEFT_ARROW,h.NUMPAD_4,h.PAGE_UP,h.NUMPAD_9,h.PAGE_DOWN,h.NUMPAD_3,h.END,h.NUMPAD_1,h.HOME,h.NUMPAD_7];return g(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(a,b){this.map=a;m.mixin(this,b);var c=a.__container;t("esri-pointer")?(this.pointerEvents=new s(c,{map:a}),this.eventModel="pointer"):t("esri-touch")?(t("ios")||(this.mouseEvents=
new e(c,{map:a})),this.touchEvents=new p(c,{map:a,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new e(c,{map:a}),this.eventModel="mouse");this._zoomRect=new x(null,new H(u.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=m.hitch(this,this._adjustPinch);this._adjustPinchEnd=m.hitch(this,this._adjustPinchEnd)},_panInit:function(a){var b=this.mouseEvents;if(c.isLeft(a)&&(this.map.isPan&&!a.shiftKey)&&(this._dragOrigin=new A(0,0),m.mixin(this._dragOrigin,
a.screenPoint),I(this._panStartHandle),I(this._panHandle),I(this._panEndHandle),this._panStartHandle=J(b,"onMouseDragStart",this,this._panStart),this._panHandle=J(b,"onMouseDrag",this,this._pan),this._panEndHandle=J(b,"onMouseUp",this,this._panEnd),K||M))a.preventDefault(),n.curNode&&n.curNode.blur()},_panStart:function(a){this.map.setCursor("move");this.map.__panStart(a.screenPoint.x,a.screenPoint.y)},_pan:function(a){this.map.__pan(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y)},
_panEnd:function(a){I(this._panStartHandle);I(this._panHandle);I(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var b=this.map;b.__panning&&(b.__panEnd(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y),b.resetMapCursor())},_zoomInit:function(a){var b=this.map,d=this.pointerEvents||this.mouseEvents;if((c.isLeft(a)||a.pointerType)&&b.isRubberBandZoom&&a.shiftKey)b.setCursor("crosshair"),this._dragOrigin=m.mixin({},a.screenPoint),this._zoomDir=a.ctrlKey||
a.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=J(d,"onSwipeMove",this,this._zoom),this._zoomEndHandle=J(d,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=J(d,"onMouseDrag",this,this._zoom),this._zoomEndHandle=J(d,"onMouseUp",this,this._zoomEnd)),K&&a.preventDefault()},_zoom:function(a){var b=this.map,c=this._normalizeRect(a).offset(b.__visibleRect.x,b.__visibleRect.y);a=b.graphics;var d=this._zoomRect;d.geometry||b.setCursor("crosshair");d.geometry&&a.remove(d,!0);var e=b.toMap(new A(c.x,
c.y)),c=b.toMap(new A(c.x+c.width,c.y+c.height)),c=new z(e.x,e.y,c.x-e.x,e.y-c.y,b.spatialReference);c._originOnly=!0;d.setGeometry(c);a.add(d,!0)},_zoomEnd:function(a){var b=this._zoomRect,c=this.map,d=c.extent,e=c.spatialReference;I(this._zoomHandle);I(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(c._canZoom(this._zoomDir)&&b.getDojoShape()){c.graphics.remove(b);b.geometry=null;a=this._normalizeRect(a);a.x+=c.__visibleRect.x;a.y+=c.__visibleRect.y;if(-1===this._zoomDir){var f=
d.getWidth();a=(f*c.width/a.width-f)/2;e=new C(d.xmin-a,d.ymin-a,d.xmax+a,d.ymax+a,e)}else d=c.toMap({x:a.x,y:a.y+a.height}),a=c.toMap({x:a.x+a.width,y:a.y}),e=new C(d.x,d.y,a.x,a.y,e);c._extentUtil(null,null,e)}b.getDojoShape()&&c.graphics.remove(b,!0);this._zoomDir=0;c.resetMapCursor()},_wheelZoom:function(a,b){var c=this.map;if(!b){if(c.smartNavigation&&!a.shiftKey&&!c._isPanningOrZooming()){c.disableScrollWheelZoom();this._setScrollWheelPan(!0);this._wheelPan(a);return}var d=a.timeStamp;if(!w.isDefined(d)||
0>=d)d=(new Date).getTime();if(100>(this._mwts?d-this._mwts:d))return;this._mwts=d}c._canZoom(a.value)&&c._extentUtil({numLevels:a.value,mapAnchor:a.mapPoint,screenAnchor:a.screenPoint})},_wheelPan:function(a){var b=this.map;if(a.shiftKey&&!b._isPanningOrZooming())this._setScrollWheelPan(!1),b.enableScrollWheelZoom(),this._wheelZoom(a);else{var c=0,d=0;t("ff")?a.axis===a.HORIZONTAL_AXIS?c=-a.detail:d=-a.detail:(c=a.wheelDeltaX,d=a.wheelDeltaY);b.translate(c,d)}},_setScrollWheelPan:function(a){this.map.isScrollWheelPan=
a;this.mouseEvents.enableMouseWheel(a);I(this._mwMacHandle);this._mwMacHandle=null;a&&(this._mwMacHandle=J(this.mouseEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(a){a.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(a.mapPoint)},_recenterZoom:function(a){a.shiftKey&&!this.map._isPanningOrZooming()&&(a.value=a.ctrlKey||a.metaKey?-1:1,this._wheelZoom(a,!0))},_dblClickZoom:function(a){this.map._isPanningOrZooming()||(a.value=1,this._wheelZoom(a,!0))},_twoFingerTap:function(a){this.map._isPanningOrZooming()||
(a.value=-1,this._wheelZoom(a,!0))},_keyDown:function(b){var c=b.keyCode,e=this.map;if(-1!==a.indexOf(L,c)){if(c===h.NUMPAD_PLUS||61===c||187===c)e._extentUtil({numLevels:1});else if(c===h.NUMPAD_MINUS||173===c||189===c)e._extentUtil({numLevels:-1});else{e.__panning||e.__panStart(0,0);switch(c){case h.UP_ARROW:case h.NUMPAD_8:this._keyDy+=10;break;case h.RIGHT_ARROW:case h.NUMPAD_6:this._keyDx-=10;break;case h.DOWN_ARROW:case h.NUMPAD_2:this._keyDy-=10;break;case h.LEFT_ARROW:case h.NUMPAD_4:this._keyDx+=
10;break;case h.PAGE_UP:case h.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case h.PAGE_DOWN:case h.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case h.END:case h.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case h.HOME:case h.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}e.__pan(this._keyDx,this._keyDy)}d.stop(b)}},_keyEnd:function(a){var b=this.map;b.__panning&&a.keyCode!==h.SHIFT&&(b.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0)},_swipeInit:function(a){var b=
this.map,b=b._zoomAnim||b._panAnim;if(a.shiftKey)return!1;b&&b._active&&(b.stop(),b._fire("onEnd",[b.node]));this._dragOrigin=new A(0,0);m.mixin(this._dragOrigin,a.screenPoint);I(this._swipeHandle);I(this._swipeEndHandle);this._swipeHandle=J(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=J(this.touchEvents||this.pointerEvents,"onSwipeEnd",this,this._swipeEnd)},_swipe:function(a){var b=this.map;b.__panning?(this._panX=a.screenPoint.x,this._panY=a.screenPoint.y,
b.__pan(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y)):(b.setCursor("move"),b.__panStart(a.screenPoint.x,a.screenPoint.y))},_swipeEnd:function(a){I(this._swipeHandle);I(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var b=this.map;b.__panning&&(b.resetMapCursor(),b.__panEnd(a.screenPoint.x-this._dragOrigin.x,a.screenPoint.y-this._dragOrigin.y))},_pinchInit:function(a){var b=this.map,c=b._zoomAnim||b._panAnim;c&&c._active?(c.stop(),c._fire("onEnd",[c.node])):
b.__panning&&(a.screenPoint=new A(this._panX,this._panY),a.mapPoint=b.toMap(a.screenPoint),this._swipeEnd(a));I(this._pinchHandle);I(this._pinchEndHandle);this._pinchHandle=J(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=J(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(a){var b=this.map;if(a.screenPoints){this.currLength=F.getLength(a.screenPoints[0],a.screenPoints[1]);var c;b.__zooming?(c=this.currLength/this._length,
this._zoomStartExtent=this.__scaleExtent(b.extent,c,this._dragOrigin),b.__zoom(this._zoomStartExtent,c,this._dragOrigin)):(this._dragOrigin=new A((a.screenPoints[0].x+a.screenPoints[1].x)/2,(a.screenPoints[0].y+a.screenPoints[1].y)/2),this._length=this.currLength,b.__zoomStart(b.extent,this._dragOrigin));this._pinchScale=c;b._fireOnScale(this.currLength/this._length,this._dragOrigin,!0)}},_pinchEnd:function(a){a=this.map;I(this._pinchHandle);I(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=
null;this._pinchScale=0;if(a.__zooming&&null===a._zoomAnim){var b=this.currLength/this._length,c=a.extent.getWidth();this._zoomAnimAnchor=a.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(a.extent,1/b,this._zoomAnimAnchor);if(a.__tileInfo){var d=B.getCandidateTileInfo(a,a.__tileInfo,this._zoomStartExtent),e=a.__getExtentForLevel(d.lod.level,this._zoomAnimAnchor),f=a.getMinZoom(),h=a.getMaxZoom(),g=e.extent,e=e.lod,q=c/g.getWidth(),k=d.lod.level;1>b?q>b&&k--:q<b&&k++;k<f?k=f:k>h&&
(k=h);k!==d.lod.level&&(e=a.__getExtentForLevel(k,this._zoomAnimAnchor),g=e.extent,e=e.lod);this._zoomEndExtent=g;this._zoomEndLod=e;a._zoomAnim=v.animateRange({range:{start:c/this._zoomStartExtent.getWidth(),end:q},duration:u.defaults.map.zoomDuration,rate:u.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});a._zoomAnim.play();a._fireOnScale(a.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=this._zoomStartExtent,a._fireOnScale(a.extent.getWidth()/
this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd()}},_adjustPinch:function(a){var b=this.__scaleExtent(this.map.extent,a,this._zoomAnimAnchor);this.map.__zoom(b,a,this._dragOrigin)},_adjustPinchEnd:function(){var a=this.map,b=a.extent.getWidth()/this._zoomEndExtent.getWidth(),c=this.__scaleExtent(a.extent,1/b,this._zoomAnimAnchor),d=this._dragOrigin,e=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=a._zoomAnim=this._zoomAnimAnchor=
null;a.__zoomEnd(c,b,d,e,!0)},__scaleExtent:function(a,b,c){c=c||a.getCenter();b=a.expand(b);var d=a.xmin-(b.getWidth()-a.getWidth())*(c.x-a.xmin)/a.getWidth();c=a.ymax-(b.getHeight()-a.getHeight())*(c.y-a.ymax)/a.getHeight();return new C(d,c-b.getHeight(),d+b.getWidth(),c,a.spatialReference)},_normalizeRect:function(a){a=a.screenPoint;var b=this._dragOrigin.x,c=this._dragOrigin.y;a=new z((a.x<b?a.x:b)-this.map.__visibleRect.x,(a.y<c?a.y:c)-this.map.__visibleRect.y,Math.abs(a.x-b),Math.abs(a.y-c));
delete a.spatialReference;0===a.width&&(a.width=1);0===a.height&&(a.height=1);return a},setImmediateClick:function(a){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(a);break;case "touch":this.touchEvents.setImmediateTap(a);this.mouseEvents&&this.mouseEvents.setImmediateClick(a);break;case "pointer":this.pointerEvents.setImmediateTap(a)}},enablePan:function(){this.disablePan();switch(this.eventModel){case "mouse":this._panInitHandle=J(this.mouseEvents,"onMouseDown",this,this._panInit);
break;case "touch":this._panInitHandle=J(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=J(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=J(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){I(this._panInitHandle);this._panInitHandle=null;I(this._swipeInitHandle);this._swipeInitHandle=null},enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?J(this.pointerEvents,
"onSwipeStart",this,this._zoomInit):J(this.mouseEvents,"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){I(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=J(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit)},disablePinchZoom:function(){I(this._pinchInitHandle);this._pinchInitHandle=null},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();
this._wheelHandle=J(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){I(this._wheelHandle);this._wheelHandle=null},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=J(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=J(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=J(this.touchEvents,"onDoubleTap",
this,this._dblClickZoom);this._zoomOutHandle=J(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=J(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=J(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){I(this._dblClickHandle);I(this._zoomOutHandle);this._dblTapHandle&&I(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();
this._sDblClickHandle=J(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},disableShiftDoubleClickZoom:function(){I(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=J(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){I(this._recenterHandle);this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=
J(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=J(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){I(this._keyHandle);I(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null},enableNavigation:function(){var a=this.map;a&&a.loaded&&(a.enableDoubleClickZoom(),a.enableClickRecenter(),a.enablePan(),a.enableRubberBandZoom(),this.enablePinchZoom(),a.enableKeyboardNavigation(),a.smartNavigation?this._setScrollWheelPan(!0):
a.enableScrollWheelZoom())},disableNavigation:function(){var a=this.map;a&&a.loaded&&(a.disableDoubleClickZoom(),a.disableClickRecenter(),a.disablePan(),a.disableRubberBandZoom(),this.disablePinchZoom(),a.disableKeyboardNavigation(),a.disableScrollWheelZoom(),a.smartNavigation&&this._setScrollWheelPan(!1))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var a,b=[this._panInitHandle,this._panStartHandle,
this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(a=0;a<b.length;a++)I(b[a]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=
this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}})})},"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(g,m,a,b,d,c,h,n,f,e){var p=d.connect,s=d.disconnect;return g([n],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==b("mac")?1:3,wheelDivisor:2>b("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(d,e){this.node=d;a.mixin(this,e);var f=function(a){c.stop(a);return!1};b("mozilla")&&m.style(d,"MozUserSelect","none");this._handles=[p(d,"onselectstart",f),p(d,"ondragstart",f),p(d,"onmouseenter",this,this._onMouseEnterHandler),
p(d,"onmouseleave",this,this._onMouseLeaveHandler),p(d,"onmousedown",this,this._onMouseDownHandler),p(d,"onclick",this,this._onClickHandler),p(d,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=p(d,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=p(d,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=a.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(f=this.map)?f.isScrollWheelZoom||
f.isScrollWheelPan:this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(a,b){if(!this._preventClick||!("onClick"===a||"onDblClick"===a)){if(this[a])this[a](b);if(this.map&&this.map[a])this.map[a](b)}},_processEvent:function(a){a=c.fix(a,a.target);var d=this.map,h=d&&d.position;h&&("DOMMouseScroll"===a.type&&3>b("ff")?a.screenPoint=new e(window.scrollX+a.screenX-h.x,window.scrollY+a.screenY-h.y):a.screenPoint=new e(a.pageX-h.x,a.pageY-h.y),a.mapPoint=d.extent?d.toMap(a.screenPoint):new f);
a.numPoints=0;return a},_onMouseEnterHandler:function(a){s(this._onKeyDown_connect);s(this._onKeyUp_connect);this._onKeyDown_connect=p(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=p(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(a))},_onMouseLeaveHandler:function(a){s(this._onKeyDown_connect);s(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(a))},_onMouseMoveHandler:function(a){this._dragEnd?
this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(a))},_onMouseDownHandler:function(a){s(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);s(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=p(document,"onmousemove",this,this._onMouseDragHandler);this._startX=a.pageX;this._startY=a.pageY;this._fire("onMouseDown",this._processEvent(a))},_onMouseUpHandler:function(a){var b=this.node;b.releaseCapture&&b.releaseCapture();
s(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;s(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=p(b,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(a))},_onMouseDragHandler:function(a){s(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=p(document,"onmousemove",this,this._onMouseDraggingHandler);s(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=p(document,"onmouseup",this,this._onDragMouseUpHandler);
this._docLeaveConnect=p(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(a))},_onMouseDraggingHandler:function(a){c.stop(a);this._fire("onMouseDrag",this._processEvent(a))},_onDragMouseUpHandler:function(a){var b=this.node;b.releaseCapture&&b.releaseCapture();this._dragEnd=!0;s(this._docLeaveConnect);s(this._onMouseDragHandler_connect);s(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=
p(b,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=p(b,"onmouseup",this,this._onMouseUpHandler);a=this._processEvent(a);this._fire("onMouseDragEnd",a);this._fire("onMouseUp",a)},_onDocMouseOut:function(a){var c=9>b("ie")?a.toElement:a.relatedTarget,d=c&&c.nodeName.toLowerCase();(!c||b("chrome")&&"html"===d)&&this._onDragMouseUpHandler(a)},_onClickHandler:function(a){a=this._processEvent(a);if(!(a.pageX!==this._startX||a.pageY!==this._startY)){clearTimeout(this._clickTimer);
var b={},c="movementX"in a,d;for(d in a)if(!c||"webkitMovementX"!==d&&"webkitMovementY"!==d)b[d]=a[d];this._clickEvent=b;this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration)}},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>b("ie")&&(this._clickEvent.graphic=h._ieGraphic,delete h._ieGraphic);this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(a){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(a))},_onMouseWheelHandler:function(a){var d=
this.map;(d?d.isScrollWheelZoom||d.isScrollWheelPan:this.preventPageScroll)&&c.stop(a);var d=b("ff")||b("mozilla")?-a.detail/this.mozWheelDivisor:a.wheelDelta/this.wheelDivisor,e=Math.abs(d),e=e<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;a.value=0>d?-e:e;this._fire("onMouseWheel",this._processEvent(a))},_onKeyDownHandler:function(a){this._fire("onKeyDown",a)},_onKeyUpHandler:function(a){this._fire("onKeyUp",a)},enableMouseWheel:function(a){s(this._scrollHandle);this._scrollHandle=p(this.node,
b("ff")||b("mozilla")?a?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(a){this.doubleClickDuration=a?0:this._initialDuration},preventClickEvents:function(a){this._preventClick=a},destroy:function(){var a=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),b;for(b=0;b<a.length;b++)s(a[b]);
clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}})})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(g,m,a,b,d,c,h,n,f){return g([h],
{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(c,d){this.node=c;a.mixin(this,d);m.setSelectable(c,!1);this._touchStart=a.hitch(this,this._touchStart);this._touchMove=a.hitch(this,this._touchMove);this._touchEnd=a.hitch(this,this._touchEnd);this._touchCancel=a.hitch(this,this._touchCancel);c.addEventListener("touchstart",this._touchStart,!1);c.addEventListener("touchmove",this._touchMove,!1);c.addEventListener("touchend",
this._touchEnd,!1);c.addEventListener("touchcancel",this._touchCancel,!1);this.map&&b("ios")&&(this._mouseOver=a.hitch(this,this._mouseOver),this._mouseOut=a.hitch(this,this._mouseOut),this._mouseDown=a.hitch(this,this._mouseDown),this._mouseUp=a.hitch(this,this._mouseUp),this._mouseClick=a.hitch(this,this._mouseClick),c.addEventListener("mouseover",this._mouseOver,!1),c.addEventListener("mouseout",this._mouseOut,!1),c.addEventListener("mousedown",this._mouseDown,!1),c.addEventListener("mouseup",
this._mouseUp,!1),c.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(a){var c=this._touches,d,f=a.changedTouches.length,h,g,n,m,B=(new Date).getTime();if(!b("android")||!b("safari")||!(1===a.targetTouches.length&&a.touches.length===a.targetTouches.length&&a.targetTouches.length===a.changedTouches.length&&0===a.changedTouches[0].identifier&&c[a.changedTouches[0].identifier])){this._addTouch(a);
for(d=0;d<f;d++)h=a.changedTouches[d],g=c[h.identifier]={},g.startX=h.pageX,g.startY=h.pageY,g.startTS=B,-1===this._touchIds.indexOf(h.identifier)&&this._touchIds.push(h.identifier);this._swipeActive&&(n=this._nodeTouches[0]);this._pinchActive&&(m=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,n))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[n,m]))):2===this._numTouches?
this._swipeActive&&(n&&(g=c[this._touchIds[0]],g.startX=n.pageX,g.startY=n.pageY,g.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,n))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,n))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[n,m])))}},_touchMove:function(a){a.preventDefault();this._updateTouch(a);var c=this._touches,d,f=a.changedTouches.length,h,g,n,m;if(!b("android")||
!b("safari")||!(1===a.targetTouches.length&&a.touches.length===a.targetTouches.length&&a.targetTouches.length===a.changedTouches.length&&0===a.changedTouches[0].identifier&&c[a.changedTouches[0].identifier]&&1<this._touchIds.length)){for(d=0;d<f;d++)if(h=a.changedTouches[d],g=c[h.identifier]){n=Math.abs(h.pageX-g.startX);h=Math.abs(h.pageY-g.startY);if(!g.moved&&(n>=this.tapRadius||h>=this.tapRadius))g.moved=g.absMoved=!0;m=m?m:g.moved}1===this._numTouches?(d=a.changedTouches[0],this._swipeActive?
this._fire("onSwipeMove",this._processTouchEvent(a,d)):m&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(a,d)))):2===this._numTouches&&(d=this._nodeTouches[0],f=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(a,[d,f])):m&&(m=c[d.identifier],g=c[f.identifier],c=Math.abs(m.startX-g.startX),m=Math.abs(m.startY-g.startY),c=Math.sqrt(c*c+m*m),m=Math.abs(d.pageX-f.pageX),g=Math.abs(d.pageY-f.pageY),m=Math.sqrt(m*m+g*g),Math.abs(m-c)>=2*this.tapRadius&&
(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(a,[d,f])))))}},_touchEnd:function(a){this._removeTouch(a);var b=this._touches,c=a.changedTouches,d,f=c.length,h,g,n=(new Date).getTime(),m=this._touchIds;for(d=0;d<f;d++)if(g=b[c[d].identifier])g.absMoved&&(h=!0),g.pageX=c[d].pageX,g.pageY=c[d].pageY,g.endTS=n;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(a,c[0]));else if(this._pinchActive)this._pinchActive=
!1,this._fire("onPinchEnd",this._processTouchEvent(a,c));else{if(!h){f=Infinity;h=-Infinity;var n=Infinity,A=-Infinity,C=this.tapStartTolerance,z=[],F=!0;for(d=0;d<m.length;d++)g=b[m[d]],z.push(g),g.startTS<f&&(f=g.startTS),g.startTS>h&&(h=g.startTS),g.endTS<n&&(n=g.endTS),g.endTS>A&&(A=g.endTS),delete b[m[d]];if(1===z.length&&c[0]&&(b=Math.abs(c[0].pageX-z[0].startX),c=Math.abs(c[0].pageY-z[0].startY),b>=this.tapRadius||c>=this.tapRadius))F=!1;F&&(Math.abs(h-f)<=C&&Math.abs(A-n)<=C)&&this._basicTap(a,
z)}}else 1===this._numTouches&&this._pinchActive&&(d=this._nodeTouches[0],g=b[d.identifier],g.startX=d.pageX,g.startY=d.pageY,this._pinchActive=g.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(a,[c[0],d])))},_touchCancel:function(a){this._numTouches&&this._touchEnd(a)},_basicTap:function(a,b){var c=(new Date).getTime(),d=this;a=this._processTouchEvent(a,b);this._taps.push({touchInfos:b,ts:c,event:a});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",a);clearTimeout(this._tapTimer);
this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var a=d;d=null;clearTimeout(a._tapTimer);a._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(a){var b=this._taps,c=b[0],d=b[1],f=c.touchInfos,h=d&&d.touchInfos;b.length&&(a||(this._taps=[]),c&&d?f.length===h.length?d.ts-c.ts<=this.doubleTapDuration?(1===f.length?(a=Math.abs(f[0].startX-h[0].startX),f=Math.abs(f[0].startY-h[0].startY),f=a<=this.doubleTapRadius&&f<=this.doubleTapRadius):
f=!0,f?this._processedDoubleTap(b):this._processedTap(d)):this._processedTap(d):this._processedTap(d):this._processedTap(c||d))},_processedTap:function(a){var b=a.event;this._fire("onProcessedTap",b);1===a.touchInfos.length?this._fire("onTap",this._fixEvent(b)):2===a.touchInfos.length&&this._fire("onTwoFingerTap",b)},_processedDoubleTap:function(a){var b=1===a[1].touchInfos.length,c;b&&(c=[this._fixEvent(a[0].event),this._fixEvent(a[1].event)],c[1].relatedEvents=c);a=[a[0].event,a[1].event];a[1].relatedEvents=
a;this._fire("onProcessedDoubleTap",a[1]);b&&(this._fire("onDoubleTap",c[1]),this._fire("onDblClick",c[1]))},_addTouch:function(a){var b=a.changedTouches,c=this._nodeTouches,f,h,g;this._numTouches+=b.length;for(a=0;a<b.length;a++){h=c.length;g=!1;for(f=0;f<h&&!(g=c[f].identifier===b[a].identifier);f++);g?this._numTouches--:c.push(b[a])}for(a=c.length-1;0<=a;a--)d.isDescendant(c[a].target,document.body)||(c.splice(a,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(a){var b=
[],c=[],d=a.changedTouches,f=this._nodeTouches;this._numTouches-=d.length;0>this._numTouches&&(this._numTouches=0);for(a=0;a<d.length;a++)b.push(d[a].identifier);for(a=f.length-1;0<=a;a--)-1!==b.indexOf(f[a].identifier)&&c.push(f.splice(a,1)[0]);return c},_updateTouch:function(a){var b=[],c,d=a.changedTouches,f=this._nodeTouches;for(a=0;a<d.length;a++)b.push(d[a].identifier);for(a=0;a<f.length;a++)c=b.indexOf(f[a].identifier),-1!==c&&f.splice(a,1,d[c])},_mouseOver:function(a){this._fire("onMouseOver",
this._processMouseEvent(a))},_mouseOut:function(a){this._fire("onMouseOut",this._processMouseEvent(a))},_mouseDown:function(a){this._fire("onMouseDown",this._processMouseEvent(a))},_mouseUp:function(a){this._fire("onMouseUp",this._processMouseEvent(a))},_mouseClick:function(a){this._fire("onClick",this._processMouseEvent(a))},_fire:function(a,b){if("onDblClick"===a&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var c=this;setTimeout(function(){c.mouseEvents.preventClickEvents(!1)},350)}if(this[a])this[a](b);
if(this.map&&this.map[a])this.map[a](b)},_fixEvent:function(a){var b={},c;for(c in a)b[c]=a[c];this.map&&(b.screenPoint=b.screenPoints[0],b.mapPoint=b.mapPoints[0]);return b},_processTouchEvent:function(b,c){var d=this.map,h=d&&d.position,g=0;if(h&&c)if(a.isArray(c)){var m,v;b.screenPoints=[];b.mapPoints=[];for(m=0;m<c.length;m++)c[m]?(v=new f(c[m].pageX-h.x,c[m].pageY-h.y),b.screenPoints.push(v),b.mapPoints.push(d.extent?d.toMap(v):new n)):g++}else b.screenPoint=new f(c.pageX-h.x,c.pageY-h.y),b.mapPoint=
d.extent?d.toMap(b.screenPoint):new n;b.numPoints=c?a.isArray(c)?c.length-g:1:0;return b},_processMouseEvent:function(a){var b=this.map,c=b&&b.position;c&&(a.screenPoint=new f(a.pageX-c.x,a.pageY-c.y),a.mapPoint=b.extent?b.toMap(a.screenPoint):new n);return a},setImmediateTap:function(a){this._immediate=a},destroy:function(){var a=this.node;a.removeEventListener("touchstart",this._touchStart,!1);a.removeEventListener("touchmove",this._touchMove,!1);a.removeEventListener("touchend",this._touchEnd,
!1);a.removeEventListener("touchcancel",this._touchCancel,!1);this.map&&(a.removeEventListener("mouseover",this._mouseOver,!1),a.removeEventListener("mouseout",this._mouseOut,!1),a.removeEventListener("mousedown",this._mouseDown,!1),a.removeEventListener("mouseup",this._mouseUp,!1),a.removeEventListener("click",this._mouseClick,!1));m.setSelectable(a,!0);clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=null}})})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(g,m,a,b,d,c,h,n){return g([c],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==b("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,constructor:function(a,b){this.node=a;m.mixin(this,b);void 0!==a.style.msTouchAction?a.style.msTouchAction="none":void 0!==a.style.touchAction&&(a.style.touchAction="none");var c=navigator.msPointerEnabled,d=function(a){a.preventDefault()};
a.addEventListener("selectstart",d,!1);a.addEventListener("dragstart",d,!1);this._pointerDown=m.hitch(this,this._pointerDown);this._pointerMove=m.hitch(this,this._pointerMove);this._pointerUp=m.hitch(this,this._pointerUp);this._pointerCancel=m.hitch(this,this._pointerCancel);a.addEventListener(c?"MSPointerDown":"pointerdown",this._pointerDown,!1);a.addEventListener(c?"MSPointerMove":"pointermove",this._pointerMove,!1);a.addEventListener(c?"MSPointerUp":"pointerup",this._pointerUp,!1);a.addEventListener(c?
"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=m.hitch(this,this._mouseOver),this._mouseOut=m.hitch(this,this._mouseOut),this._mouseLeave=m.hitch(this,this._mouseLeave),this._mouseDown=m.hitch(this,this._mouseDown),this._mouseUp=m.hitch(this,this._mouseUp),this._mouseClick=m.hitch(this,this._mouseClick),this._mouseWheel=m.hitch(this,this._mouseWheel),this._mouseMove=m.hitch(this,this._mouseMove),this._mouseEnter=m.hitch(this,this._mouseEnter),this._onKeyDown=
m.hitch(this,this._onKeyDown),this._onKeyUp=m.hitch(this,this._onKeyUp),a.addEventListener("mouseover",this._mouseOver,!1),a.addEventListener("mouseout",this._mouseOut,!1),a.addEventListener("mouseleave",this._mouseLeave,!1),a.addEventListener("mousedown",this._mouseDown,!1),a.addEventListener("mouseup",this._mouseUp,!1),a.addEventListener("click",this._mouseClick,!1),a.addEventListener("mousewheel",this._mouseWheel,!1),a.addEventListener("mousemove",this._mouseMove,!1),a.addEventListener("mouseenter",
this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(b){if(-1<a.indexOf(this._touchIds,b.pointerId))this._pointerUp(b);else{var c=this._touches,d=b.target,h=b.pointerId,g=this._touchIds,n,m=(new Date).getTime();n=c[h]={};n.pointerId=h;n.startX=n.pageX=b.pageX;n.startY=n.pageY=b.pageY;n.startTS=m;g.push(h);this._numTouches++;d.setPointerCapture?d.setPointerCapture(h):d.msSetPointerCapture&&d.msSetPointerCapture(h);d=c[g[0]];
c=c[g[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(d&&(d.startX=d.pageX,d.startY=d.pageY,d.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(b,d))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(b,d))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(b,[d,c]))))}},_pointerMove:function(a){var b=this._touches,c=this._touchIds,d,h,g;if((d=b[a.pointerId])&&!(d.pageX===
a.pageX&&d.pageY===a.pageY)){d.pageX=a.pageX;d.pageY=a.pageY;h=Math.abs(d.pageX-d.startX);g=Math.abs(d.pageY-d.startY);if(!d.moved&&(h>=this.tapRadius||g>=this.tapRadius))d.moved=d.absMoved=!0;if(1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(a,a)):d.moved&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(a,a)));else if(2===this._numTouches)if(d=b[c[0]],b=b[c[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(a,[d,
b]));else if(d.moved||b.moved)c=Math.abs(d.startX-b.startX),h=Math.abs(d.startY-b.startY),c=Math.sqrt(c*c+h*h),h=Math.abs(d.pageX-b.pageX),g=Math.abs(d.pageY-b.pageY),h=Math.sqrt(h*h+g*g),Math.abs(h-c)>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(a,[d,b])))}},_pointerUp:function(b){var c=this._touches,d,h=this.node,g=b.target,n=b.pointerId,m=this._touchIds,v=m.slice(0),x=a.map(v,function(a){return c[a]}),B=(new Date).getTime();if(d=c[n])if(d.pageX=b.pageX,
d.pageY=b.pageY,d.endTS=B,this._numTouches--,g.releasePointerCapture?g.releasePointerCapture(n):g.msReleasePointerCapture&&g.msReleasePointerCapture(n),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(b,b));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(b,b));else{if(!d.absMoved){var g=Infinity,n=-Infinity,m=Infinity,B=-Infinity,A=this.tapStartTolerance,
C;for(C=0;C<v.length;C++)d=x[C],d.startTS<g&&(g=d.startTS),d.startTS>n&&(n=d.startTS),d.endTS<m&&(m=d.endTS),d.endTS>B&&(B=d.endTS);Math.abs(n-g)<=A&&Math.abs(B-m)<=A&&this._basicTap(b,x)}}else 1===this._numTouches&&this._pinchActive&&(m.splice(a.indexOf(m,b.pointerId),1),delete c[b.pointerId],d=c[m[0]],d.startX=d.pageX,d.startY=d.pageY,d.moved=!1,document.msElementsFromPoint&&(v=document.msElementsFromPoint(d.pageX,d.pageY),a.some(v,function(a){return a===h})||(this._touches={},this._touchIds=[],
this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(b,[b,d])))},_pointerCancel:function(a){this._numTouches&&this._pointerUp(a)},_basicTap:function(a,b){var c=(new Date).getTime(),d=this,h=this._immediate;a=this._processTouchEvent(a,b);this._taps.push({touchInfos:b,ts:c,event:a});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",a);clearTimeout(this._tapTimer);c=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=
setTimeout(function(){var a=d;d=null;clearTimeout(a._tapTimer);a._analyzeTap(h)},h?0:c)},_analyzeTap:function(a){var b=this._taps,c=b[0],d=b[1],h=c.touchInfos,g=d&&d.touchInfos;b.length&&(a||(this._taps=[]),c&&d?h.length===g.length?d.ts-c.ts<=this.doubleTapDuration?(1===h.length?(a=Math.abs(h[0].startX-g[0].startX),h=Math.abs(h[0].startY-g[0].startY),h=a<=this.doubleTapRadius&&h<=this.doubleTapRadius):h=!0,h?this._processedDoubleTap(b):this._processedTap(d)):this._processedTap(d):this._processedTap(d):
this._processedTap(c||d))},_processedTap:function(a){var b=a.event;this._fire("onProcessedTap",b);1===a.touchInfos.length?this._fire("onTap",this._fixEvent(b)):2===a.touchInfos.length&&this._fire("onTwoFingerTap",b)},_processedDoubleTap:function(a){var b=1===a[1].touchInfos.length,c;b&&(c=[this._fixEvent(a[0].event),this._fixEvent(a[1].event)],c[1].relatedEvents=c);a=[a[0].event,a[1].event];a[1].relatedEvents=a;this._fire("onProcessedDoubleTap",a[1]);b&&(this._fire("onDoubleTap",c[1]),this._fire("onDblClick",
c[1]))},_mouseOver:function(a){this._fire("onMouseOver",this._processMouseEvent(a))},_mouseMove:function(a){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(a)):this._fire("onMouseMove",this._processMouseEvent(a))},_mouseOut:function(a){this._fire("onMouseOut",this._processMouseEvent(a))},_mouseLeave:function(a){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(event))},_mouseDown:function(a){this._downX=
a.pageX;this._downY=a.pageY;this._fire("onMouseDown",this._processMouseEvent(a));0===a.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(a)))},_mouseUp:function(a){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(a)));this._fire("onMouseUp",this._processMouseEvent(a))},_mouseClick:function(a){Math.abs(a.pageX-this._downX)<=this.clickRadius&&Math.abs(a.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(a))},
_mouseWheel:function(a){var b=this.map;(b?b.isScrollWheelZoom||b.isScrollWheelPan:this.preventPageScroll)&&a.preventDefault();var b=a.wheelDelta?a.wheelDelta/this.wheelDivisor:-a.detail/this.mozWheelDivisor,c=Math.abs(b),c=c<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;a.value=0>b?-c:c;this._fire("onMouseWheel",this._processMouseEvent(a))},_mouseEnter:function(a){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",
this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(a))},_onKeyDown:function(a){this._fire("onKeyDown",a)},_onKeyUp:function(a){this._fire("onKeyUp",a)},_fire:function(a,b){if(this[a])this[a](b);if(this.map&&this.map[a])this.map[a](b)},_fixEvent:function(a){var b={},c;for(c in a)b[c]=a[c];b.preventDefault=function(){a.preventDefault()};b.stopPropagation=function(){a.stopPropagation()};this.map&&(b.screenPoint=b.screenPoints[0],
b.mapPoint=b.mapPoints[0]);return b},_processTouchEvent:function(a,b){var c=this.map,d=c&&c.position,g=0;if(d&&b)if(m.isArray(b)){var t,w;a.screenPoints=[];a.mapPoints=[];for(t=0;t<b.length;t++)b[t]?(w=new n(b[t].pageX-d.x,b[t].pageY-d.y),a.screenPoints.push(w),a.mapPoints.push(c.extent?c.toMap(w):new h)):g++}else a.screenPoint=new n(b.pageX-d.x,b.pageY-d.y),a.mapPoint=c.extent?c.toMap(a.screenPoint):new h;a.numPoints=b?m.isArray(b)?b.length-g:1:0;return a},_processMouseEvent:function(a){var b=this.map,
c=b&&b.position;c&&(a.screenPoint=new n(a.pageX-c.x,a.pageY-c.y),a.mapPoint=b.extent?b.toMap(a.screenPoint):new h);return a},setImmediateTap:function(a){this._immediate=a},destroy:function(){var a=this.node;a.removeEventListener("MSPointerDown",this._pointerDown,!1);a.removeEventListener("MSPointerMove",this._pointerMove,!1);a.removeEventListener("MSPointerUp",this._pointerUp,!1);a.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(a.removeEventListener("mouseover",this._mouseOver,
!1),a.removeEventListener("mousemove",this._mouseMove,!1),a.removeEventListener("mouseout",this._mouseOut,!1),a.removeEventListener("mouseleave",this._mouseLeave,!1),a.removeEventListener("mousedown",this._mouseDown,!1),a.removeEventListener("mouseup",this._mouseUp,!1),a.removeEventListener("click",this._mouseClick,!1),a.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}})})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),
function(g,m,a,b,d,c,h,n){return g([c,h],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(a,b){m.mixin(this,b);this.initialize(a,b)},getTitle:function(a){var b;this.info&&(b=this.titleHasRelatedFields?"":this._getPopupValues(a,!0).title);return b||""},getContent:function(a){return this.info?(new n({template:this,graphic:a,chartTheme:this.chartTheme},b.create("div"))).domNode:""}})})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all ./lang ./kernel ./request ./tasks/query ./tasks/QueryTask ./tasks/StatisticDefinition dojo/i18n!dojo/cldr/nls/number".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v){return g(null,{declaredClass:"esri.PopupInfo",initialize:function(b,c){if(b){m.mixin(this,c);this.info=b;this.title=this.getTitle;this.content=this.getContent;var d=this._fieldLabels={},e=this._fieldsMap={};b.fieldInfos&&a.forEach(b.fieldInfos,function(a){var b=a.fieldName.toLowerCase();d[b]=a.label;e[b]=a});this._relatedFieldPrefix="relationships/";this.titleHasRelatedFields=!!(b.title&&-1!==b.title.indexOf("{"+this._relatedFieldPrefix))}},toJson:function(){return b.fromJson(b.toJson(this.info))},
getTitle:function(){},getContent:function(){},getFieldInfo:function(b){var c;a.some(this.info&&this.info.fieldInfos,function(a){a.fieldName===b&&(c=a);return!!c});return c},getComponents:function(b){var c=this.info,d=new h,e,f;c.fieldInfos&&(f=a.filter(c.fieldInfos,function(a){return-1!==a.fieldName.indexOf(this._relatedFieldPrefix)},this));f&&0<f.length&&(e=this._getRelatedRecords({graphic:b,fieldsInfo:f}));e?e.always(m.hitch(this,function(){d.resolve(this._getPopupValues(b))})):d.resolve(this._getPopupValues(b));
return d.promise},getAttachments:function(a){var b=a.getLayer();a=a.attributes;if(this.info.showAttachments&&(b&&b.hasAttachments&&b.objectIdField)&&(a=a&&a[b.objectIdField]))return b.queryAttachmentInfos(a)},_getPopupValues:function(b,c){var d=this.info,f=b.getLayer(),h=m.clone(b.attributes)||{},g=m.clone(h),n=d.fieldInfos,p="",s="",t,u,v,w,O,S=f&&f._getDateOpts&&f._getDateOpts().properties,S=S&&S.slice(0),U={dateFormat:{properties:S,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)}};
if(this._relatedInfo)for(w in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(w)){var T=this._relatedInfo[w],E=this._relatedLayersInfo[w];T&&(a.forEach(T.relatedFeatures,function(a){for(O in a.attributes)if(a.attributes.hasOwnProperty(O)&&"esriRelCardinalityOneToOne"===E.relation.cardinality){var k=this._toRelatedFieldName([E.relation.id,O]);h[k]=g[k]=a.attributes[O]}},this),a.forEach(T.relatedStatsFeatures,function(a){for(O in a.attributes)if(a.attributes.hasOwnProperty(O)){var k=this._toRelatedFieldName([E.relation.id,
O]);h[k]=g[k]=a.attributes[O]}},this))}n&&a.forEach(n,function(k){u=k.fieldName;var b=this._getLayerFieldInfo(f,u);b&&(u=k.fieldName=b.name);g[u]=this._formatValue(g[u],u,U);S&&(k.format&&k.format.dateFormat)&&(k=a.indexOf(S,u),-1<k&&S.splice(k,1))},this);if(f){w=f.types;var Q=(T=f.typeIdField)&&h[T];for(u in h)if(h.hasOwnProperty(u)&&-1===u.indexOf(this._relatedFieldPrefix)&&(v=h[u],e.isDefined(v))){var N=this._getDomainName(f,b,w,Q,u,v);e.isDefined(N)?g[u]=N:u===T&&(N=this._getTypeName(f,b,v),e.isDefined(N)&&
(g[u]=N))}}d.title&&(p=this._processFieldsInLinks(this._fixTokens(d.title,f),h),p=m.trim(e.substitute(g,p,U)||""));if(c)return{title:p};d.description&&(s=this._processFieldsInLinks(this._fixTokens(d.description,f),h),s=m.trim(e.substitute(g,s,U)||""));n&&(t=[],a.forEach(n,function(a){(u=a.fieldName)&&a.visible&&t.push([a.label||u,e.substitute(g,"${"+u+"}",U)||""])}));var q,k;d.mediaInfos&&(q=[],a.forEach(d.mediaInfos,function(b){k=0;v=b.value;switch(b.type){case "image":var c=v.sourceURL,c=c&&m.trim(e.substitute(h,
this._fixTokens(c,f)));k=!!c;break;case "piechart":case "linechart":case "columnchart":case "barchart":var d,c=v.normalizeField;v.fields=a.map(v.fields,function(a){return(d=this._getLayerFieldInfo(f,a))?d.name:a},this);c&&(d=this._getLayerFieldInfo(f,c),v.normalizeField=d?d.name:c);k=a.some(v.fields,function(a){return e.isDefined(h[a])||-1!==a.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(k){b=m.clone(b);v=b.value;var c=b.title?this._processFieldsInLinks(this._fixTokens(b.title,
f),h):"",E=b.caption?this._processFieldsInLinks(this._fixTokens(b.caption,f),h):"";b.title=c?m.trim(e.substitute(g,c,U)||""):"";b.caption=E?m.trim(e.substitute(g,E,U)||""):"";if("image"===b.type)v.sourceURL=e.substitute(h,this._fixTokens(v.sourceURL,f)),v.linkURL&&(v.linkURL=m.trim(e.substitute(h,this._fixTokens(v.linkURL,f))||""));else{var n,p;a.forEach(v.fields,function(a,k){if(-1!==a.indexOf(this._relatedFieldPrefix))p=this._getRelatedChartInfos(a,v,h,U),p instanceof Array?v.fields=p:v.fields[k]=
p;else{var b=h[a],b=void 0===b?null:b;n=h[v.normalizeField]||0;b&&n&&(b/=n);v.fields[k]={y:b,tooltip:(this._fieldLabels[a.toLowerCase()]||a)+":\x3cbr/\x3e"+this._formatValue(b,a,U,!!n)}}},this)}q.push(b)}},this));return{title:p,description:s,hasDescription:!!d.description,fields:t&&t.length?t:null,mediaInfos:q&&q.length?q:null,formatted:g,editSummary:f&&f.getEditSummary?f.getEditSummary(b):""}},_getRelatedChartInfos:function(b,c,d,e){var f,h,g,n,p,m;f=[];m=this._fromRelatedFieldName(b);p=m[0];h=this._relatedInfo[p];
p=this._relatedLayersInfo[p];h&&a.forEach(h.relatedFeatures,function(a){a=a.attributes;var h,p;for(p in a)if(a.hasOwnProperty(p)&&p===m[1]){h={};n=a[p];c.normalizeField&&(g=-1!==c.normalizeField.indexOf(this._relatedFieldPrefix)?a[this._fromRelatedFieldName(c.normalizeField)[1]]:d[c.normalizeField]);n&&g&&(n/=g);if(c.tooltipField)if(-1!==c.tooltipField.indexOf(this._relatedFieldPrefix)){var s=this._fromRelatedFieldName(c.tooltipField)[1];h.tooltip=a[s]&&"string"===typeof a[s]?a[s]+":\x3cbr/\x3e"+
this._formatValue(n,a[s],e,!!g):s+":\x3cbr/\x3e"+this._formatValue(n,s,e,!!g)}else h.tooltip=(this._fieldLabels[b.toLowerCase()]||b)+":\x3cbr/\x3e"+this._formatValue(n,c.tooltipField,e,!!g);else h.tooltip=n;h.y=n;f.push(h)}},this);return"esriRelCardinalityOneToMany"===p.relation.cardinality||"esriRelCardinalityManyToMany"===p.relation.cardinality?f:f[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",
dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",
year:"(datePattern: 'y', selector: 'date')"},_reHref:/href\s*=\s*\"([^\"]+)\"/ig,_reHrefApos:/href\s*=\s*\'([^\']+)\'/ig,_fixTokens:function(a,b){var c=this;return a.replace(/(\{([^\{\r\n]+)\})/g,function(a,d,e){a=c._getLayerFieldInfo(b,e);return"$"+(a?"{"+a.name+"}":d)})},_encodeAttributes:function(a){a=m.clone(a)||{};var b,c;for(b in a)if((c=a[b])&&"string"===typeof c)c=encodeURIComponent(c).replace(/\'/g,"\x26apos;"),a[b]=c;return a},_processFieldsInLinks:function(a,b){var c=this._encodeAttributes(b),
d=this;a&&(a=a.replace(this._reHref,function(a,e){return d._addValuesToHref(a,e,b,c)}).replace(this._reHrefApos,function(a,e){return d._addValuesToHref(a,e,b,c)}));return a},_addValuesToHref:function(a,b,c,d){b=b&&m.trim(b);return e.substitute(b&&0===b.indexOf("${")?c:d,a)},_getLayerFieldInfo:function(a,b){return a&&a.getField?a.getField(b):null},_formatValue:function(b,c,d,f){var h=this._fieldsMap[c.toLowerCase()],g=h&&h.format;c=-1!==a.indexOf(d.dateFormat.properties,c);var n="number"===typeof b&&
!c&&(!g||!g.dateFormat);if(!e.isDefined(b)||!h||!e.isDefined(g))return n?this._forceLTR(b):b;var p="",h=[],s=g.hasOwnProperty("places")||g.hasOwnProperty("digitSeparator"),t=g.hasOwnProperty("digitSeparator")?g.digitSeparator:!0;if(s&&!c)p="NumberFormat",h.push("places: "+(e.isDefined(g.places)&&(!f||0<g.places)?Number(g.places):"Infinity")),h.length&&(p+="("+h.join(",")+")");else if(g.dateFormat)p="DateFormat"+this._insertOffset(this._dateFormats[g.dateFormat]||this._dateFormats.shortDateShortTime);
else return n?this._forceLTR(b):b;var u=this._applyFormatting(b,p,d);s&&-1<b.constructor.toString().indexOf("Array")&&(u="",a.forEach(b,m.hitch(this,function(a,b){b&&(u+=" ");u+=this._applyFormatting(a,p,d)})));s&&!t&&v.group&&(u=u.replace(RegExp("\\"+v.group,"g"),""));c&&(u='\x3cspan class\x3d"esriDateValue"\x3e'+u+"\x3c/span\x3e");return n?this._forceLTR(u):u},_applyFormatting:function(a,b,c){return e.substitute({myKey:a},"${myKey:"+b+"}",c)||""},_forceLTR:function(a){var b=n("ie");return b&&10>=
b?a:"\x3cspan class\x3d'esriNumericValue'\x3e"+a+"\x3c/span\x3e"},_insertOffset:function(a){a&&(a=e.isDefined(this.utcOffset)?a.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):a);return a},_getDomainName:function(a,b,c,d,e,f){return(a=a.getDomain&&a.getDomain(e,{feature:b}))&&a.codedValues?a.getName(f):null},_getTypeName:function(a,b,c){return(a=a.getType&&a.getType(b))&&a.name},_getRelatedRecords:function(a){var b=a.graphic,c=new h,d;this._relatedLayersInfo?this._queryRelatedLayers(b).then(m.hitch(this,
function(a){this._setRelatedRecords(b,a);c.resolve(a)}),m.hitch(this,this._handlerErrorResponse,c)):this._getRelatedLayersInfo(a).then(m.hitch(this,function(a){for(d in a)a.hasOwnProperty(d)&&a[d]&&(this._relatedLayersInfo[d].relatedLayerInfo=a[d]);this._queryRelatedLayers(b).then(m.hitch(this,function(a){this._setRelatedRecords(b,a);c.resolve(a)}),m.hitch(this,this._handlerErrorResponse,c))}),m.hitch(this,this._handlerErrorResponse,c));return c.promise},_getRelatedLayersInfo:function(b){var c=b.fieldsInfo,
d,e,h={};d=b.graphic.getLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});a.forEach(c,function(b){var c,e,f,h;c=this._fromRelatedFieldName(b.fieldName);e=c[0];c=c[1];e&&(this._relatedLayersInfo[e]||(a.some(d.relationships,function(a){if(a.id==e)return h=a,!0}),h&&(this._relatedLayersInfo[e]={relation:h,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[e]&&(this._relatedLayersInfo[e].relatedFields.push(c),b.statisticType&&(f=new w,f.statisticType=b.statisticType,f.onStatisticField=
c,f.outStatisticFieldName=c,this._relatedLayersInfo[e].outStatistics.push(f))))},this);for(e in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(e)&&this._relatedLayersInfo[e]&&(b=this._relatedLayersInfo[e].relation,b=d.url.replace(/[0-9]+$/,b.relatedTableId),this._relatedLayersInfo[e].relatedLayerUrl=b,h[e]=s({url:b,content:{f:"json"},callbackParamName:"callback"}));return f(h)},_queryRelatedLayers:function(a){var b={},c;for(c in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(c)&&
(b[c]=this._queryRelatedLayer({graphic:a,relatedInfo:this._relatedLayersInfo[c]}));return f(b)},_queryRelatedLayer:function(b){var c,d,e,h,g,n,p,m,s,v;c=b.graphic;d=c.getLayer().url.match(/[0-9]+$/g)[0];m=b.relatedInfo;p=m.relatedLayerInfo;s=m.relatedLayerUrl;v=m.relation;a.some(p.relationships,function(a){if(a.relatedTableId===parseInt(d,10))return e=a,!0},this);e&&(b=new u,a.some(p.fields,function(b){if(b.name===e.keyField)return g=-1!==a.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger",
"esriFieldTypeSingle","esriFieldTypeDouble"],b.type)?"number":"string",!0}),h="string"===g?e.keyField+"\x3d'"+c.attributes[v.keyField]+"'":e.keyField+"\x3d"+c.attributes[v.keyField],b.where=h,b.outFields=m.relatedFields,m.outStatistics&&(0<m.outStatistics.length&&p.supportsStatistics)&&(n=new u,n.where=b.where,n.outFields=b.outFields,n.outStatistics=m.outStatistics),c=new t(s),h=[],h.push(c.execute(b)),n&&h.push(c.execute(n)));return f(h)},_setRelatedRecords:function(a,b){this._relatedInfo=[];for(var c in b)if(b.hasOwnProperty(c)&&
b[c]){var d=b[c];this._relatedInfo[c]={};this._relatedInfo[c].relatedFeatures=d[0].features;e.isDefined(d[1])&&(this._relatedInfo[c].relatedStatsFeatures=d[1].features)}},_handlerErrorResponse:function(a,b){a.reject(b)},_fromRelatedFieldName:function(a){var b=[];-1!==a.indexOf(this._relatedFieldPrefix)&&(a=a.split("/"),b=a.slice(1));return b},_toRelatedFieldName:function(a){var b="";a&&0<a.length&&(b=this._relatedFieldPrefix+a[0]+"/"+a[1]);return b}})})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C){var z=0;return m([A,w,v],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=b.mixin({},C.widgets.popup)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this.template.getComponents(this.graphic).then(b.hitch(this,this._handleComponentsSuccess),b.hitch(this,this._handleComponentsError))},destroy:function(){this._dfd&&this._dfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments)},_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+
1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var a=this._mediaInfos,b=a.length,f=this.domNode,h=this._prevMedia,g=this._nextMedia;if(1<b){var n=0,m=0;d.forEach(a,function(a){"image"===a.type?n++:-1!==a.type.indexOf("chart")&&m++});n&&(e.set(this._imageCount,"innerHTML",n),c.query(".summary .image",f).removeClass("hidden"));m&&(e.set(this._chartCount,"innerHTML",m),c.query(".summary .chart",f).removeClass("hidden"))}else c.query(".summary",
f).addClass("hidden"),p.add(h,"hidden"),p.add(g,"hidden");a=this._mediaPtr;0===a?p.add(h,"hidden"):p.remove(h,"hidden");a===b-1?p.add(g,"hidden"):p.remove(g,"hidden");this._destroyFrame()},_displayMedia:function(){var a=this._mediaInfos[this._mediaPtr],d=a.title,f=a.caption,h=c.query(".mediaSection .hzLine",this.domNode)[0];e.set(this._mediaTitle,"innerHTML",d);p[d?"remove":"add"](this._mediaTitle,"hidden");e.set(this._mediaCaption,"innerHTML",f);p[f?"remove":"add"](this._mediaCaption,"hidden");p[d&&
f?"remove":"add"](h,"hidden");this._rid=null;if("image"===a.type)this._showImage(a.value);else{var n=this,d=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],f=a.value.theme||this.chartTheme;b.isString(f)&&(f=f.replace(/\./gi,"/"),-1===f.indexOf("/")&&(f="dojox/charting/themes/"+f));f||(f="./Rainbow");d.push(f);try{var m=this._rid=z++;g(d,function(b,c,d){m===n._rid&&(n._rid=null,n._showChart(a.type,a.value,b,c,d))})}catch(s){}}},_preventNewTab:function(a){return(a=a&&b.trim(a).toLowerCase())&&
(0===a.indexOf("mailto:")||0===a.indexOf("tel:"))},_showImage:function(b){p.add(this._mediaFrame,"image");var d=u.get(this._gallery,"height"),e;b.linkURL&&(e=s.create("a",{href:b.linkURL,target:this._preventNewTab(b.linkURL)?"":"_blank"},this._mediaFrame));s.create("img",{className:"esriPopupMediaImage",src:b.sourceURL},e||this._mediaFrame);var f=c.query(".esriPopupMediaImage",this._mediaFrame)[0],h=this,g;g=a.connect(f,"onload",function(){a.disconnect(g);g=null;h._imageLoaded(f,d)})},_showChart:function(a,
b,c,e,f){p.remove(this._mediaFrame,"image");c=this._chart=new c(s.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});f&&c.setTheme(f);switch(a){case "piechart":c.addPlot("default",{type:"Pie",labels:!1});c.addSeries("Series A",b.fields);break;case "linechart":c.addPlot("default",{type:"Markers"});c.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});c.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});d.forEach(b.fields,function(a,b){a.x=
b+1});c.addSeries("Series A",b.fields);break;case "columnchart":c.addPlot("default",{type:"Columns",gap:3});c.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});c.addSeries("Series A",b.fields);break;case "barchart":c.addPlot("default",{type:"Bars",gap:3}),c.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),c.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),c.addSeries("Series A",b.fields)}this._action=new e(c);c.render()},_destroyFrame:function(){this._rid=
null;this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);e.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(a,b){var c=a.height;c<b&&(c=Math.round((b-c)/2),u.set(a,"marginTop",c+"px"))},_attListHandler:function(a,b){if(a===this._dfd){this._dfd=null;var c="";!(b instanceof Error)&&(b&&b.length)&&d.forEach(b,function(a){c+="\x3cli\x3e";c+="\x3ca href\x3d'"+B.addProxy(a.url)+"' target\x3d'_blank'\x3e"+(a.name||"[No name]")+"\x3c/a\x3e";
c+="\x3c/li\x3e"});e.set(this._attachmentsList,"innerHTML",c||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_handleComponentsSuccess:function(a){if(a){var h=this.showTitle?a.title:"",g=a.description,n=a.fields,m=a.mediaInfos,s=this.domNode,u=this._nls,v=this,w=this.template,x=this.graphic;this._prevMedia.title=u.NLS_prevMedia;this._nextMedia.title=u.NLS_nextMedia;e.set(this._title,"innerHTML",h);h||p.add(this._title,"hidden");!a.hasDescription&&n&&(g="",d.forEach(n,function(a){g+="\x3ctr valign\x3d'top'\x3e";
g+="\x3ctd class\x3d'attrName'\x3e"+t.encode(a[0])+"\x3c/td\x3e";g+="\x3ctd class\x3d'attrValue'\x3e"+a[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"\x3ca target\x3d'_blank' href\x3d'$1' title\x3d'$1'\x3e"+u.NLS_moreInfo+"\x3c/a\x3e")+"\x3c/td\x3e";g+="\x3c/tr\x3e"}),g&&(g="\x3ctable class\x3d'attrTable' cellpadding\x3d'0px' cellspacing\x3d'0px'\x3e"+g+"\x3c/table\x3e"));e.set(this._description,"innerHTML",g);g||p.add(this._description,"hidden");c.query("a",this._description).forEach(function(a){v._preventNewTab(a.href)?
"_blank"===a.target&&e.remove(a,"target"):e.set(a,"target","_blank")});h&&g?c.query(".mainSection .hzLine",s).removeClass("hidden"):h||g?c.query(".mainSection .hzLine",s).addClass("hidden"):c.query(".mainSection",s).addClass("hidden");if(h=this._dfd=w.getAttachments(x))h.addBoth(b.hitch(this,this._attListHandler,h)),e.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+u.NLS_searching+"...\x3c/li\x3e"),c.query(".attachmentsSection",s).removeClass("hidden");m&&m.length&&(c.query(".mediaSection",s).removeClass("hidden"),
f.setSelectable(this._mediaFrame,!1),this._mediaInfos=m,this._mediaPtr=0,this._updateUI(),this._displayMedia());a.editSummary&&(e.set(this._editSummary,"innerHTML",a.editSummary),m&&m.length&&p.remove(this._mediaBreak,"hidden"),p.remove(this._editSummarySection,"hidden"))}},_handleComponentsError:function(a){}})})},"dojox/html/entities":function(){define(["dojo/_base/lang"],function(g){var m=g.getObject("dojox.html.entities",!0),a=function(a,b){var h,g;if(b._encCache&&b._encCache.regexp&&b._encCache.mapper&&
b.length==b._encCache.length)h=b._encCache.mapper,g=b._encCache.regexp;else{h={};g=["["];var f;for(f=0;f<b.length;f++)h[b[f][0]]="\x26"+b[f][1]+";",g.push(b[f][0]);g.push("]");g=RegExp(g.join(""),"g");b._encCache={mapper:h,regexp:g,length:b.length}}return a=a.replace(g,function(a){return h[a]})},b=function(a,b){var h,g;if(b._decCache&&b._decCache.regexp&&b._decCache.mapper&&b.length==b._decCache.length)h=b._decCache.mapper,g=b._decCache.regexp;else{h={};g=["("];var f;for(f=0;f<b.length;f++){var e=
"\x26"+b[f][1]+";";f&&g.push("|");h[e]=b[f][0];g.push(e)}g.push(")");g=RegExp(g.join(""),"g");b._decCache={mapper:h,regexp:g,length:b.length}}return a=a.replace(g,function(a){return h[a]})};m.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];m.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],
["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],
["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],
["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],
["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7",
"Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1",
"thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203",
"exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],
["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],
["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];m.encode=function(b,c){b&&(c?b=a(b,c):(b=a(b,m.html),b=a(b,m.latin)));return b};m.decode=function(a,c){a&&(c?a=b(a,c):(a=b(a,m.html),a=b(a,m.latin)));return a};
return m})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w){g=g(e,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],
"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],
"union-complete":["geometry"]},constructor:function(a){a=m.hitch;this._projectHandler=a(this,this._projectHandler);this._simplifyHandler=a(this,this._simplifyHandler);this._bufferHandler=a(this,this._bufferHandler);this._areasAndLengthsHandler=a(this,this._areasAndLengthsHandler);this._lengthsHandler=a(this,this._lengthsHandler);this._labelPointsHandler=a(this,this._labelPointsHandler);this._relationHandler=a(this,this._relationHandler);this._convexHullHandler=a(this,this._convexHullHandler);this._unionHandler=
a(this,this._unionHandler);this._autoCompleteHandler=a(this,this._autoCompleteHandler);this._reshapeHandler=a(this,this._reshapeHandler);this._cutHandler=a(this,this._cutHandler);this._intersectHandler=a(this,this._intersectHandler);this._differenceHandler=a(this,this._differenceHandler);this._trimExtendHandler=a(this,this._trimExtendHandler);this._densifyHandler=a(this,this._densifyHandler);this._generalizeHandler=a(this,this._densifyHandler);this._offsetHandler=a(this,this._offsetHandler);this._distanceHandler=
a(this,this._distanceHandler);this._toGeoCoordinateHandler=a(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=a(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(a){var b=[],c,d=a.length;for(c=0;c<d;c++)b.push(a[c].toJson());return{geometryType:w.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(b,c,d){var e=w.getGeometryType(c);b=b.geometries;var f=[],h={spatialReference:d.toJson()},g=m.mixin;a.forEach(b,function(a,b){f[b]=new e(g(a,
h))});return f},_toProjectGeometry:function(a){var b=a.spatialReference.toJson();return a instanceof p?new u({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new s({paths:[[].concat(a.points)],spatialReference:b})},_fromProjectedGeometry:function(a,b,c){return"esriGeometryEnvelope"===b?(a=a.rings[0],new p(a[0][0],a[0][1],a[2][0],a[2][1],c)):new t({points:a.paths[0],spatialReference:c.toJson()})},project:function(a,c,e,h){var g=m.mixin({},
this._url.query,{f:"json"}),p;a.geometries?(h=e,e=c,c=a.outSR,p=a.geometries[0],g=m.mixin(g,a.toJson())):(p=a[0],g=m.mixin(g,{outSR:c.wkid||b.toJson(c.toJson()),inSR:p.spatialReference.wkid||b.toJson(p.spatialReference.toJson()),geometries:b.toJson(this._encodeGeometries(a))}));var s=w.getJsonType(p),t=this._projectHandler,u=this._errorHandler,I=new d(f._dfdCanceller);I._pendingDfd=n({url:this._url.path+"/project",content:g,callbackParamName:"callback",load:function(a,b){t(a,b,s,c,e,h,I)},error:function(a){u(a,
h,I)}});return I},_projectHandler:function(a,b,c,d,e,f,h){try{var g=this._decodeGeometries(a,c,d);this._successHandler([g],"onProjectComplete",e,h)}catch(n){this._errorHandler(n,f,h)}},onProjectComplete:function(){},simplify:function(a,c,e){var h=a[0].spatialReference,g=m.mixin({},this._url.query,{f:"json",sr:h.wkid?h.wkid:b.toJson(h.toJson()),geometries:b.toJson(this._encodeGeometries(a))}),p=w.getJsonType(a[0]),s=this._simplifyHandler,t=this._errorHandler,u=new d(f._dfdCanceller);u._pendingDfd=
n({url:this._url.path+"/simplify",content:g,callbackParamName:"callback",load:function(a,b){s(a,b,p,h,c,e,u)},error:function(a){t(a,e,u)}});return u},_simplifyHandler:function(a,b,c,d,e,f,h){try{var g=this._decodeGeometries(a,c,d);this._successHandler([g],"onSimplifyComplete",e,h)}catch(n){this._errorHandler(n,f,h)}},onSimplifyComplete:function(){},convexHull:function(a,c,e){var h=a[0].spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:b.toJson(h.toJson()),geometries:b.toJson(this._encodeGeometries(a))});
var g=this._convexHullHandler,p=this._errorHandler,s=new d(f._dfdCanceller);s._pendingDfd=n({url:this._url.path+"/convexHull",content:a,callbackParamName:"callback",load:function(a,b){g(a,b,h,c,e,s)},error:function(a){p(a,e,s)}});return s},_convexHullHandler:function(a,b,c,d,e,f){try{var h=w.fromJson(a.geometry).setSpatialReference(c);this._successHandler([h],"onConvexHullComplete",d,f)}catch(g){this._errorHandler(g,e,f)}},onConvexHullComplete:function(){},union:function(a,c,e){var h=a[0].spatialReference;
a=m.mixin({},this._url.query,{f:"json",sr:b.toJson(h.toJson()),geometries:b.toJson(this._encodeGeometries(a))});var g=this._unionHandler,p=this._errorHandler,s=new d(f._dfdCanceller);s._pendingDfd=n({url:this._url.path+"/union",content:a,callbackParamName:"callback",load:function(a,b){g(a,b,h,c,e,s)},error:function(a){p(a,e,s)}});return s},_unionHandler:function(a,b,c,d,e,f){try{var h=w.fromJson(a.geometry).setSpatialReference(c);this._successHandler([h],"onUnionComplete",d,f)}catch(g){this._errorHandler(g,
e,f)}},onUnionComplete:function(){},autoComplete:function(a,c,e,h){var g=a[0].spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:b.toJson(g.toJson()),polygons:b.toJson(this._encodeGeometries(a).geometries),polylines:b.toJson(this._encodeGeometries(c).geometries)});var p=this._autoCompleteHandler,s=this._errorHandler,t=new d(f._dfdCanceller);t._pendingDfd=n({url:this._url.path+"/autoComplete",content:a,callbackParamName:"callback",load:function(a,b){p(a,b,g,e,h,t)},error:function(a){s(a,h,
t)}});return t},_autoCompleteHandler:function(a,b,c,d,e,f){try{var h=a.geometries;a=[];var g,n=h.length;for(g=0;g<n;g++)a[g]=new u({spatialReference:c,rings:h[g].rings});this._successHandler([a],"onAutoCompleteComplete",d,f)}catch(p){this._errorHandler(p,e,f)}},onAutoCompleteComplete:function(){},reshape:function(a,c,e,h){var g=a.spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:b.toJson(g.toJson()),target:b.toJson({geometryType:w.getJsonType(a),geometry:a.toJson()}),reshaper:b.toJson(c.toJson())});
var p=this._reshapeHandler,s=this._errorHandler,t=new d(f._dfdCanceller);t._pendingDfd=n({url:this._url.path+"/reshape",content:a,callbackParamName:"callback",load:function(a,b){p(a,b,g,e,h,t)},error:function(a){s(a,h,t)}});return t},_reshapeHandler:function(a,b,c,d,e,f){try{var h=w.fromJson(a.geometry).setSpatialReference(c);this._successHandler([h],"onReshapeComplete",d,f)}catch(g){this._errorHandler(g,e,f)}},onReshapeComplete:function(){},cut:function(c,e,h,g){var p=c[0].spatialReference,s=a.map(c,
function(a){return a.toJson()});c=m.mixin({},this._url.query,{f:"json",sr:b.toJson(p.toJson()),target:b.toJson({geometryType:w.getJsonType(c[0]),geometries:s}),cutter:b.toJson(e.toJson())});var t=this._cutHandler,u=this._errorHandler,J=new d(f._dfdCanceller);J._pendingDfd=n({url:this._url.path+"/cut",content:c,callbackParamName:"callback",load:function(a,b){t(a,b,p,h,g,J)},error:function(a){u(a,g,J)}});return J},_cutHandler:function(b,c,d,e,f,h){try{var g=b.geometries,n={};n.cutIndexes=b.cutIndexes;
n.geometries=[];a.forEach(g,function(a){n.geometries.push(w.fromJson(a).setSpatialReference(d))});this._successHandler([n],"onCutComplete",e,h)}catch(p){this._errorHandler(p,f,h)}},onCutComplete:function(){},intersect:function(a,c,e,h){var g=a[0].spatialReference;a=m.mixin({},this._url.query,{f:"json",sr:b.toJson(g.toJson()),geometries:b.toJson(this._encodeGeometries(a)),geometry:b.toJson({geometryType:w.getJsonType(c),geometry:c.toJson()})});var p=this._intersectHandler,s=this._errorHandler,t=new d(f._dfdCanceller);
t._pendingDfd=n({url:this._url.path+"/intersect",content:a,callbackParamName:"callback",load:function(a,b){p(a,b,g,e,h,t)},error:function(a){s(a,h,t)}});return t},_intersectHandler:function(b,c,d,e,f,h){try{var g=[];a.forEach(b.geometries,function(a){g.push(w.fromJson(a).setSpatialReference(d))});this._successHandler([g],"onIntersectComplete",e,h)}catch(n){this._errorHandler(n,f,h)}},onIntersectComplete:function(){},difference:function(a,c,e,h){var g=a[0].spatialReference;a=m.mixin({},this._url.query,
{f:"json",sr:b.toJson(g.toJson()),geometries:b.toJson(this._encodeGeometries(a)),geometry:b.toJson({geometryType:w.getJsonType(c),geometry:c.toJson()})});var p=this._differenceHandler,s=this._errorHandler,t=new d(f._dfdCanceller);t._pendingDfd=n({url:this._url.path+"/difference",content:a,callbackParamName:"callback",load:function(a,b){p(a,b,g,e,h,t)},error:function(a){s(a,h,t)}});return t},_differenceHandler:function(b,c,d,e,f,h){try{var g=[];a.forEach(b.geometries,function(a){g.push(w.fromJson(a).setSpatialReference(d))});
this._successHandler([g],"onDifferenceComplete",e,h)}catch(n){this._errorHandler(n,f,h)}},onDifferenceComplete:function(){},buffer:function(a,b,c){var e=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.outSpatialReference||a.geometries[0].spatialReference,g=this._bufferHandler,p=this._errorHandler,s=new d(f._dfdCanceller);s._pendingDfd=n({url:this._url.path+"/buffer",content:e,callbackParamName:"callback",load:function(a,d){g(a,d,h,b,c,s)},error:function(a){p(a,c,s)}});return s},_bufferHandler:function(a,
b,c,d,e,f){try{var h=a.geometries;a=[];var g,n=h.length;for(g=0;g<n;g++)a[g]=new u({spatialReference:c,rings:h[g].rings});this._successHandler([a],"onBufferComplete",d,f)}catch(p){this._errorHandler(p,e,f)}},onBufferComplete:function(){},areasAndLengths:function(a,b,c){a=m.mixin({},this._url.query,{f:"json"},a.toJson());var e=this._areasAndLengthsHandler,h=this._errorHandler,g=new d(f._dfdCanceller);g._pendingDfd=n({url:this._url.path+"/areasAndLengths",content:a,callbackParamName:"callback",load:function(a,
d){e(a,d,b,c,g)},error:function(a){h(a,c,g)}});return g},_areasAndLengthsHandler:function(a,b,c,d,e){try{this._successHandler([a],"onAreasAndLengthsComplete",c,e)}catch(f){this._errorHandler(f,d,e)}},onAreasAndLengthsComplete:function(){},lengths:function(a,b,c){a=m.mixin({},this._url.query,{f:"json"},a.toJson());var e=this._lengthsHandler,h=this._errorHandler,g=new d(f._dfdCanceller);g._pendingDfd=n({url:this._url.path+"/lengths",content:a,callbackParamName:"callback",load:function(a,d){e(a,d,b,
c,g)},error:function(a){h(a,c,g)}});return g},_lengthsHandler:function(a,b,c,d,e){try{this._successHandler([a],"onLengthsComplete",c,e)}catch(f){this._errorHandler(f,d,e)}},onLengthsComplete:function(){},labelPoints:function(c,e,h){var g=a.map(c,function(a){return a.toJson()}),p=c[0].spatialReference,g=m.mixin({},this._url.query,{f:"json",sr:p.wkid?p.wkid:b.toJson(p.toJson()),polygons:b.toJson(g)}),s=this._labelPointsHandler,t=this._errorHandler,u=new d(f._dfdCanceller);u._pendingDfd=n({url:this._url.path+
"/labelPoints",content:g,callbackParamName:"callback",load:function(a,b){s(a,b,c,p,e,h,u)},error:function(a){t(a,h,u)}});return u},_labelPointsHandler:function(b,c,d,e,f,h,g){try{var n=[];a.forEach(b.labelPoints,function(a){n.push(w.fromJson(a).setSpatialReference(e))});this._successHandler([n],"onLabelPointsComplete",f,g)}catch(p){this._errorHandler(p,h,g)}},onLabelPointsComplete:function(){},relation:function(a,b,c){a=m.mixin({},this._url.query,{f:"json"},a.toJson());var e=this._relationHandler,
h=this._errorHandler,g=new d(f._dfdCanceller);g._pendingDfd=n({url:this._url.path+"/relation",content:a,callbackParamName:"callback",load:function(a,d){e(a,d,b,c,g)},error:function(a){h(a,c,g)}});return g},_relationHandler:function(a,b,c,d,e){try{this._successHandler([a.relations],"onRelationComplete",c,e)}catch(f){this._errorHandler(f,d,e)}},onRelationComplete:function(){},trimExtend:function(a,b,c){var e=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.sr,g=this._trimExtendHandler,p=this._errorHandler,
s=new d(f._dfdCanceller);s._pendingDfd=n({url:this._url.path+"/trimExtend",content:e,callbackParamName:"callback",load:function(a,d){g(a,d,h,b,c,s)},error:function(a){p(a,c,s)}});return s},_trimExtendHandler:function(a,b,c,d,e,f){try{var h=a.geometries;a=[];var g,n=h.length;for(g=0;g<n;g++)a[g]=new s({spatialReference:c,paths:h[g].paths});this._successHandler([a],"onTrimExtendComplete",d,f)}catch(p){this._errorHandler(p,e,f)}},onTrimExtendComplete:function(){},densify:function(a,b,c){var e=m.mixin({},
this._url.query,{f:"json"},a.toJson()),h=a.geometries[0].spatialReference,g=this._densifyHandler,p=this._errorHandler,s=new d(f._dfdCanceller);s._pendingDfd=n({url:this._url.path+"/densify",content:e,callbackParamName:"callback",load:function(a,d){g(a,d,h,b,c,s)},error:function(a){p(a,c,s)}});return s},_densifyHandler:function(b,c,d,e,f,h){try{var g=[];a.forEach(b.geometries,function(a){g.push(w.fromJson(a).setSpatialReference(d))});this._successHandler([g],"onDensifyComplete",e,h)}catch(n){this._errorHandler(n,
f,h)}},onDensifyComplete:function(){},generalize:function(a,b,c){var e=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.geometries[0].spatialReference,g=this._generalizeHandler,p=this._errorHandler,s=new d(f._dfdCanceller);s._pendingDfd=n({url:this._url.path+"/generalize",content:e,callbackParamName:"callback",load:function(a,d){g(a,d,h,b,c,s)},error:function(a){p(a,c,s)}});return s},_generalizeHandler:function(b,c,d,e,f,h){try{var g=[];a.forEach(b.geometries,function(a){g.push(w.fromJson(a).setSpatialReference(d))});
this._successHandler([g],"onGeneralizeComplete",e,h)}catch(n){this._errorHandler(n,f,h)}},onGeneralizeComplete:function(){},offset:function(a,b,c){var e=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.geometries[0].spatialReference,g=this._offsetHandler,p=this._errorHandler,s=new d(f._dfdCanceller);s._pendingDfd=n({url:this._url.path+"/offset",content:e,callbackParamName:"callback",load:function(a,d){g(a,d,h,b,c,s)},error:function(a){p(a,c,s)}});return s},_offsetHandler:function(b,c,d,e,f,h){try{var g=
[];a.forEach(b.geometries,function(a){g.push(w.fromJson(a).setSpatialReference(d))});this._successHandler([g],"onOffsetComplete",e,h)}catch(n){this._errorHandler(n,f,h)}},onOffsetComplete:function(){},distance:function(a,b,c){var e=m.mixin({},this._url.query,{f:"json"},a.toJson()),h=a.geometry1.spatialReference,g=this._distanceHandler,p=this._errorHandler,s=new d(f._dfdCanceller);s._pendingDfd=n({url:this._url.path+"/distance",content:e,callbackParamName:"callback",load:function(a,d){g(a,d,h,b,c,
s)},error:function(a){p(a,c,s)}});return s},_distanceHandler:function(a,b,c,d,e,f){try{a=a&&a.distance,this._successHandler([a],"onDistanceComplete",d,f)}catch(h){this._errorHandler(h,e,f)}},onDistanceComplete:function(){},toGeoCoordinateString:function(a,c,e){var h={};m.isObject(a.sr)?h.sr=a.sr.wkid||b.toJson(a.sr.toJson()):h.sr=a.sr;h.coordinates=b.toJson(a.coordinates);h.conversionType=a.conversionType||"MGRS";h.conversionMode=a.conversionMode;h.numOfDigits=a.numOfDigits;h.rounding=a.rounding;
h.addSpaces=a.addSpaces;a=m.mixin({},this._url.query,{f:"json"},h);var g=this._toGeoCoordinateHandler,p=this._errorHandler,s=new d(f._dfdCanceller);s._pendingDfd=n({url:this._url.path+"/toGeoCoordinateString",content:a,callbackParamName:"callback",load:function(a,b){g(a,b,c,e,s)},error:function(a){p(a,e,s)}});return s},_toGeoCoordinateHandler:function(a,b,c,d,e){try{this._successHandler([a.strings],"onToGeoCoordinateStringComplete",c,e)}catch(f){this._errorHandler(f,d,e)}},onToGeoCoordinateStringComplete:function(){},
fromGeoCoordinateString:function(a,c,e){var h={};m.isObject(a.sr)?h.sr=a.sr.wkid||b.toJson(a.sr.toJson()):h.sr=a.sr;h.strings=b.toJson(a.strings);h.conversionType=a.conversionType||"MGRS";h.conversionMode=a.conversionMode;a=m.mixin({},this._url.query,{f:"json"},h);var g=this._fromGeoCoordinateHandler,p=this._errorHandler,s=new d(f._dfdCanceller);s._pendingDfd=n({url:this._url.path+"/fromGeoCoordinateString",content:a,callbackParamName:"callback",load:function(a,b){g(a,b,c,e,s)},error:function(a){p(a,
e,s)}});return s},_fromGeoCoordinateHandler:function(a,b,c,d,e){try{this._successHandler([a.coordinates],"onToGeoCoordinateStringComplete",c,e)}catch(f){this._errorHandler(f,d,e)}},onFromGeoCoordinateStringComplete:function(){}});m.mixin(g,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,
UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,
UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,
UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",
UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return g})},"esri/geometry/geometryEngine":function(){define("require exports esri/kernel esri/geometry/Geometry esri/geometry/Polygon esri/geometry/Polyline esri/geometry/Point esri/geometry/Extent esri/geometry/Multipoint dojo/_base/lang".split(" "),function(g,m,a,b,d,c,h,n,f,e){function p(a){if(void 0===h.fromJson){if(void 0!==
a.x&&void 0!==a.y)return new h(a);if(void 0!==a.paths)return new c(a);if(void 0!==a.rings)return new d(a);if(void 0!==a.points)return new f(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new n(a)}else{if(void 0!==a.x&&void 0!==a.y)return h.fromJson(a);if(void 0!==a.paths)return c.fromJson(a);if(void 0!==a.rings)return d.fromJson(a);if(void 0!==a.points)return f.fromJson(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return n.fromJson(a)}}
function s(a){if(void 0===h.fromJson){if(void 0!==a.x&&void 0!==a.y)return new h(a);if(void 0!==a.paths)return new c(a);if(void 0!==a.rings)return new d(a);if(void 0!==a.points)return new f(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new n(a)}else{if(void 0!==a.x&&void 0!==a.y)return h.fromJSON(a);if(void 0!==a.paths)return c.fromJSON(a);if(void 0!==a.rings)return d.fromJSON(a);if(void 0!==a.points)return f.fromJSON(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==
a.xmax&&void 0!==a.ymax)return n.fromJSON(a)}}function u(a,b){var c;if(null==a||void 0===a||"number"===typeof a)return a;var q=a.toString();if(""===q)return null;if(2==b){if(c=O[q],void 0!==c)return c}else if(0==b){c=G[q];if(void 0!==c)return c;c=S[a];if(void 0!==c)return c}else if(3==b&&(c=G[q],void 0!==c))return c;if(1==b&&(c=S[a],void 0!==c))return c;if(!0===/^\d+$/.test(q))return parseInt(q);throw Error("Unrecognised Unit Type");}function t(a){if(void 0!==a&&null!==a)switch(a){case "loxodrome":return 1;
case "great-elliptic":return 2;case "normal-section":return 3;case "shape-preserving":return 4}return 0}function w(a,b){if(null===a||void 0===a||a.s())return null;switch(a.D()){case z.Xn.Point:var e=new h(a.lk(),a.mk(),b);if(M){var q=a.hasAttribute(z.xf.M);a.hasAttribute(z.xf.Z)&&e.set("z",a.lO());q&&e.set("m",a.NN())}return e;case z.Xn.Polygon:var e=a.hasAttribute(z.xf.Z),q=a.hasAttribute(z.xf.M),k=v(a,e,q),e=new d({rings:k,hasZ:e,hasM:q});M?e.set("spatialReference",b):e.setSpatialReference(b);e.setCacheValue("_geVersion",
a);return e;case z.Xn.Polyline:return e=a.hasAttribute(z.xf.Z),q=a.hasAttribute(z.xf.M),k=v(a,e,q),e=new c({paths:k,hasZ:e,hasM:q}),M?e.set("spatialReference",b):e.setSpatialReference(b),e.setCacheValue("_geVersion",a),e;case z.Xn.MultiPoint:var e=a.hasAttribute(z.xf.Z),q=a.hasAttribute(z.xf.M),r=k=null;e&&(k=a.mc(z.xf.Z));q&&(r=a.mc(z.xf.M));var y=new z.b,D=a.F(),P=new f(b);M&&(P.set("hasZ",e),P.set("hasM",q));for(var g=0;g<D;g++){a.w(g,y);var p=[y.x,y.y];e&&p.push(k.get(g));q&&p.push(r.get(g));
P.addPoint(p)}P.setCacheValue("_geVersion",a);return P;case z.Xn.Envelope:return k=a.hasAttribute(z.xf.Z),e=a.hasAttribute(z.xf.M),q=new n(a.R.v,a.R.C,a.R.B,a.R.G,b),M&&(k&&(k=a.Ah(z.xf.Z,0),q.set("zmin",k.qa),q.set("zmax",k.va)),e&&(k=a.Ah(z.xf.M,0),q.set("mmin",k.qa),q.set("mmax",k.va))),q.setCacheValue("_geVersion",a),q}return null}function v(a,b,c){var q=[],k=a.ea(),r=null,d=null;b&&(r=a.mc(z.xf.Z));c&&(d=a.mc(z.xf.M));for(var D=new z.b,e=0;e<k;e++){for(var f=a.Ea(e),h=a.Ha(e),g=0,n=0,p=NaN,m=
NaN,s=NaN,t=NaN,u=a.vc(e),v=[],w=f;w<f+h;w++){a.w(w,D);var t=s=NaN,x=[D.x,D.y];b&&(s=r.get(w),x.push(s));c&&(k=d.get(w),x.push(t));w==f&&u&&(g=D.x,n=D.y,p=s,m=t);v.push(x)}!u||g==D.x&&n==D.y&&(!b||isNaN(p)&&isNaN(s)||p==s)&&(!c||isNaN(m)&&isNaN(t)||m==t)||v.push(v[0].slice(0));q.push(v)}return q}function x(a){var b=a._geVersion;if(null==b||void 0==b){if(Object.freeze&&Object.isFrozen(a))return 102100===a.wkid?T:4326===a.wkid?U:z.Nf.create(a.wkid);-1!=a.wkid&&null!==a.wkid&&void 0!==a.wkid?(b=z.Nf.create(a.wkid),
a._geVersion=b):""!==a.wkt&&void 0!==a.wkt&&null!==a.wkt&&(b=z.Nf.NL(a.wkt),a._geVersion=b)}return b}function B(a){if(null==a)return null;var b=a.getCacheValue("_geVersion");if(null==b||void 0==b)b=z.Pb.IL(a),a.setCacheValue("_geVersion",b);return b}function A(a){return null===a.spatialReference?null:x(a.spatialReference)}var C=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var q in b)b.hasOwnProperty(q)&&(a[q]=b[q]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)},z;(function(a){var b=function(){function a(){}a.Sk=!1;a.it=!1;a.$v="";return a}();a.ah=b;if("undefined"!==typeof window)a.ah.$v="browser","Float64Array"in window&&(a.ah.it=!0),"ArrayBuffer"in window&&(a.ah.Sk=!0);else if("undefined"!==typeof process)b.$v="node",a.ah.Sk=!0,a.ah.it=!0;else{b.$v="browser";try{var c=new ArrayBuffer(0);new Uint8Array(c);a.ah.Sk=!0;a.ah.it=!0}catch(q){a.ah.Sk=!1}}})(z||(z={}));(function(a){(function(a){a[a.Unknown=0]="Unknown";a[a.Point=33]="Point";a[a.Line=322]=
"Line";a[a.Envelope=197]="Envelope";a[a.MultiPoint=550]="MultiPoint";a[a.Polyline=1607]="Polyline";a[a.Polygon=1736]="Polygon"})(a.Xn||(a.Xn={}));(function(a){a[a.enumMild=0]="enumMild";a[a.enumMedium=1]="enumMedium";a[a.enumHot=2]="enumHot"})(a.rH||(a.rH={}));var b=function(){function b(){this.description=null;this.Ux=0}b.prototype.D=function(){return 0};b.prototype.fb=function(){return-1};b.prototype.Qf=function(a){this.qc();a!=this.description&&this.nm(a)};b.prototype.nm=function(){};b.prototype.Ik=
function(b){this.qc();b!=this.description&&(b=a.Od.QN(this.description,b),b!=this.description&&this.nm(b))};b.prototype.hasAttribute=function(a){return this.description.hasAttribute(a)};b.prototype.Ne=function(b){this.qc();this.description.hasAttribute(b)||(b=a.Od.PN(this.description,b),this.nm(b))};b.prototype.Ah=function(){return null};b.prototype.Fp=function(){};b.prototype.o=function(){};b.prototype.Cn=function(){};b.prototype.dd=function(a){this.o(a)};b.prototype.s=function(){return!0};b.prototype.Ja=
function(){};b.prototype.Oe=function(){};b.prototype.Pa=function(){return null};b.prototype.copyTo=function(){};b.prototype.Mh=function(){return 0};b.prototype.$b=function(){return 0};b.prototype.WC=function(){return this.hasAttribute(1)};b.ve=function(a){return((a&192)>>6)+1>>1};b.Km=function(a){return 0!=(a&32)};b.qT=function(a){return 0!=(a&64)};b.SO=function(a){return 0!=(a&128)};b.Lc=function(a){return 0!=(a&256)};b.Th=function(a){return 0!=(a&512)};b.Kc=function(a){return 0!=(a&1024)};b.prototype.vm=
function(){var a=this.Pa();this.copyTo(a);return a};b.prototype.Rf=function(){return null};b.Yj=function(a){var k=a.Pa();a.copyTo(k);return k};b.prototype.qc=function(){0<=this.Ux&&(this.Ux+=2147483649)};b.Vu=function(c){var k=c.D();if(b.Th(k))return c.F();if(c.s())return 0;if(197==k)return 4;if(33==k)return 1;if(b.Lc(k))return 2;throw a.g.ra("missing type");};return b}();a.T=b})(z||(z={}));(function(a){var b=function(){function b(){this.y=this.x=0}b.Oa=function(a,k){var r=new b;r.x=a;r.y=k;return r};
b.prototype.ma=function(a,k){this.x=a;this.y=k};b.prototype.J=function(a){this.x=a.x;this.y=a.y};b.prototype.Cq=function(a,k){return this.x===a&&this.y===k};b.prototype.Ww=function(a){return 2.220446049250313E-16>=Math.abs(this.x-a.x)&&2.220446049250313E-16>=Math.abs(this.y-a.y)};b.prototype.ub=function(a){return this.x===a.x&&this.y===a.y};b.prototype.lc=function(a){return a==this?!0:a instanceof b?this.x==a.x&&this.y==a.y:!1};b.prototype.sub=function(a){this.x-=a.x;this.y-=a.y};b.prototype.pc=function(a,
k){this.x=a.x-k.x;this.y=a.y-k.y};b.prototype.add=function(a,k){void 0!==k?(this.x=a.x+k.x,this.y=a.y+k.y):(this.x+=a.x,this.y+=a.y)};b.prototype.Bp=function(){this.x=-this.x;this.y=-this.y};b.prototype.qr=function(a){this.x=-a.x;this.y=-a.y};b.prototype.OO=function(a,k,b){this.x=a.x*(1-b)+k.x*b;this.y=a.y*(1-b)+k.y*b};b.prototype.Fr=function(a,k){this.x=this.x*a+k.x;this.y=this.y*a+k.y};b.prototype.DR=function(a,k,b){this.x=k.x*a+b.x;this.y=k.y*a+b.y};b.prototype.scale=function(a){this.x*=a;this.y*=
a};b.prototype.compare=function(a){return this.y<a.y?-1:this.y>a.y?1:this.x<a.x?-1:this.x>a.x?1:0};b.prototype.normalize=function(){var a=this.length();0==a&&(this.x=1,this.y=0);this.x/=a;this.y/=a};b.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};b.prototype.Up=function(){return this.x*this.x+this.y*this.y};b.Fb=function(a,k){return Math.sqrt(this.Zb(a,k))};b.Yv=function(a,k,b,c){a-=b;k-=c;return Math.sqrt(a*a+k*k)};b.prototype.ml=function(a){return this.x*a.x+this.y*
a.y};b.prototype.uA=function(a){return Math.abs(this.x*a.x)+Math.abs(this.y*a.y)};b.prototype.Ai=function(a){return this.x*a.y-this.y*a.x};b.prototype.Er=function(a,k){var b=-this.x*k+this.y*a;this.x=this.x*a+this.y*k;this.y=b};b.prototype.tt=function(){var a=this.x;this.x=-this.y;this.y=a};b.prototype.zD=function(a){this.x=-a.y;this.y=a.x};b.prototype.Kp=function(){var a=this.x;this.x=this.y;this.y=-a};b.prototype.FA=function(){this.y=this.x=NaN};b.prototype.pv=function(){return isNaN(this.x)};b.prototype.ps=
function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:0==this.x?4:3};b.cq=function(a,k){var b=a.ps(),c=k.ps();return c==b?(b=a.Ai(k),0>b?1:0<b?-1:0):b<c?-1:1};b.HT=function(a,k){return b.cq(a,k)};b.Zb=function(a,k){var b=a.x-k.x,c=a.y-k.y;return b*b+c*c};b.prototype.toString=function(){return"("+this.x+" , "+this.y+")"};b.prototype.Eh=function(){this.y=this.x=NaN};b.prototype.yJ=function(){return this.pv()?NaN:Math.abs(this.x)>=Math.abs(this.y)?Math.abs(this.x):Math.abs(this.y)};b.prototype.offset=
function(a,k){var c=b.Fb(a,k),d=b.Oa(this.x,this.y);if(0==c)return b.Fb(d,a);var D=new b;D.J(k);D.sub(a);d.sub(a);return d.Ai(D)/c};b.yn=function(b,k,c){var d=new a.$k;d.set(k.x);d.sub(b.x);var D=new a.$k;D.set(c.y);D.sub(b.y);var e=new a.$k;e.set(k.y);e.sub(b.y);var f=new a.$k;f.set(c.x);f.sub(b.x);d.Ap(D);e.Ap(f);d.sub(e);if(!d.Dq())return c=d.value(),0>c?-1:0<c?1:0;d=new a.Tn(k.x);D=new a.Tn(b.x);e=new a.Tn(b.y);d=d.nr(D);b=new a.Tn(c.y);b=b.nr(e);k=new a.Tn(k.y);k=k.nr(e);c=new a.Tn(c.x);c=c.nr(D);
d=d.Wp(b);k=k.Wp(c);d=d.Wp(k);return d.vP()?-1:d.nO()?1:0};b.prototype.hc=function(){return a.I.Rh(a.I.Rh())};return b}();a.b=b})(z||(z={}));(function(a){var b=function(){function a(b){this.Ov=this.Or=0;this.ES=b}a.prototype.reset=function(){this.Ov=this.Or=0};a.prototype.add=function(a){a-=this.Ov;var k=this.Or+a;this.Ov=k-this.Or-a;this.Or=k};a.prototype.sub=function(a){this.add(-a)};a.prototype.rl=function(){return this.ES+this.Or};return a}();a.av=b;b=function(){function a(){}a.LT=function(a,
k){return 0<=k?Math.abs(a):-Math.abs(a)};a.sign=function(a){return 0>a?-1:0<a?1:0};a.gH=function(a){return a-360*Math.floor(a/360)};a.round=function(a){return Math.floor(a+0.5)};a.Ty=function(a){return a*a};a.ut=function(a,k,b){var c;0.5>=b?c=a+(k-a)*b:c=k-(k-a)*(1-b);return c};a.BD=function(a,k,b,c){0.5>=b?(c.x=a.x+(k.x-a.x)*b,c.y=a.y+(k.y-a.y)*b):(c.x=k.x-(k.x-a.x)*(1-b),c.y=k.y-(k.y-a.y)*(1-b))};a.tP=function(a,k,b,c,d,e){0.5>=d?(e.x=a+(b-a)*d,e.y=k+(c-k)*d):(e.x=b-(b-a)*(1-d),e.y=c-(c-k)*(1-d))};
return a}();a.vi=b})(z||(z={}));(function(a){var b=function(b){function c(){b.call(this);this.ha=this.la=this.ja=this.na=0;this.fa=null}C(c,b);c.prototype.Mb=function(){return a.b.Oa(this.na,this.ja)};c.prototype.ht=function(a){a.x=this.na;a.y=this.ja};c.prototype.ed=function(a){this.gl(0,a)};c.prototype.Ny=function(k,b){this.gl(0,a.b.Oa(k,b))};c.prototype.En=function(a){this.wA(0,a)};c.prototype.setStart=function(a){this.CA(0,a)};c.prototype.gt=function(a,b){return this.yd(0,a,b)};c.prototype.My=
function(a,b,c){this.om(0,a,b,c)};c.prototype.oc=function(){return a.b.Oa(this.la,this.ha)};c.prototype.uw=function(a){a.x=this.la;a.y=this.ha};c.prototype.vd=function(a){this.gl(1,a)};c.prototype.Ok=function(k,b){this.gl(1,a.b.Oa(k,b))};c.prototype.Bn=function(a){this.wA(1,a)};c.prototype.setEnd=function(a){this.CA(1,a)};c.prototype.Ws=function(a,b){return this.yd(1,a,b)};c.prototype.Cy=function(a,b,c){this.om(1,a,b,c)};c.prototype.fb=function(){return 1};c.prototype.s=function(){return this.sc()};
c.prototype.Ja=function(){};c.prototype.Mh=function(){return 0};c.prototype.Ga=function(a,b,c,d,q){return this.wJ(a,b,c,d,q)};c.prototype.jc=function(a,b){return 0!=this.fq(a,b,!1)};c.prototype.Eq=function(a,b){return this.qs(a,b,!1)};c.prototype.qs=function(){return null};c.prototype.sc=function(){return!1};c.prototype.rv=function(k){this.qc();if(null==this.fa&&0<k)this.fa=a.I.Lh(2*k);else if(null!=this.fa&&this.fa.length<2*k){for(var b=this.fa.slice(0),c=this.fa.length;c<2*k;c++)b[c]=0;this.fa=
b}};c.KI=function(a,b,c){if(0<c)var d=0;for(var q=0;q<c;q++)b[0+d]=a[0],d++};c.prototype.gl=function(a,b){0!=a?(this.la=b.x,this.ha=b.y):(this.na=b.x,this.ja=b.y)};c.prototype.nm=function(k){if(null!=this.fa){for(var b=a.Od.iu(k,this.description),d=[],D=c.Xk(this.description,0),e=c.Xk(this.description,1),f=c.Xk(k,0),h=c.Xk(k,1),g=0,n=1,p=k.Aa;n<p;n++){var m=k.Hd(n),s=a.pa.Wa(m);if(-1==b[n])for(var t=a.pa.ue(m),m=0;m<s;m++)d[f+g]=t,d[h+g]=t,g++;else{t=this.description.fj(b[n])-2;for(m=0;m<s;m++)d[f+
g]=this.fa[D+t],d[h+g]=this.fa[e+t],g++,t++}}this.fa=d}this.description=k};c.prototype.wA=function(k,b){if(this.sc())throw a.g.ra("empty geometry");b.Qf(this.description);b.sc()&&b.ko();for(var c=0;c<this.description.Aa;c++)for(var d=this.description.Fd(c),q=0,e=a.pa.Wa(d);q<e;q++){var f=this.yd(k,d,q);b.setAttribute(d,q,f)}};c.prototype.CA=function(k,b){this.qc();if(b.sc())throw a.g.ra("empty geometry");for(var c=b.description,d=0,q=c.Aa;d<q;d++)for(var e=c.Fd(d),f=a.pa.Wa(e),h=0;h<f;h++){var g=
b.ld(e,h);this.om(k,e,h,g)}};c.prototype.yd=function(k,b,d){if(this.sc())throw a.g.ra("This operation was performed on an Empty Geometry.");if(0==b)return 0!=k?0!=d?this.ha:this.la:0!=d?this.ja:this.na;if(d>=a.pa.Wa(b))throw a.g.Uc();var D=this.description.zf(b);return 0<=D?(null!=this.fa&&this.rv(this.description.le.length-2),this.fa[c.Xk(this.description,k)+this.description.fj(D)-2+d]):a.pa.ue(b)};c.prototype.om=function(k,b,d,D){this.qc();if(d>=a.pa.Wa(b))throw a.g.Uc();var e=this.description.zf(b);
0>e&&(this.Ne(b),e=this.description.zf(b));0==b?0!=k?0!=d?this.ha=D:this.la=D:0!=d?this.ja=D:this.na=D:(null==this.fa&&this.rv(this.description.le.length-2),this.fa[c.Xk(this.description,k)+this.description.fj(e)-2+d]=D)};c.prototype.copyTo=function(k){if(k.D()!=this.D())throw a.g.N();k.description=this.description;k.rv(this.description.le.length-2);c.KI(this.fa,k.fa,2*(this.description.le.length-2));k.na=this.na;k.ja=this.ja;k.la=this.la;k.ha=this.ha;k.qc();this.eo(k)};c.prototype.Ah=function(k,
b){var c=new a.Nd;if(this.sc())return c.Ja(),c;c.qa=this.yd(0,k,b);c.va=c.qa;c.Oj(this.yd(1,k,b));return c};c.prototype.XE=function(a){this.sc()?a.Ja():(a.qa=this.yd(0,0,0),a.va=a.qa,a.Oj(this.yd(1,0,0)))};c.prototype.uu=function(k,b){b.Qf(this.description);b.ic(this.Kb(k));for(var c=1,d=this.description.Aa;c<d;c++)for(var q=this.description.Fd(c),e=a.pa.Wa(q),f=0;f<e;f++){var h=this.ld(k,q,f);b.setAttribute(q,f,h)}};c.prototype.sJ=function(a){if(this.description!=a.description||this.na!=a.na||this.la!=
a.la||this.ja!=a.ja||this.ha!=a.ha)return!1;for(var b=0;b<2*(this.description.le.length-2);b++)if(this.fa[b]!=a.fa[b])return!1;return!0};c.prototype.kD=function(){return this.na==this.la&&this.ja==this.ha};c.prototype.reverse=function(){var k=this.na;this.na=this.la;this.la=k;k=this.ja;this.ja=this.ha;this.ha=k;for(var k=1,b=this.description.Aa;k<b;k++)for(var c=this.description.Hd(k),d=0,q=a.pa.Wa(c);d<q;d++){var e=this.yd(0,c,d),f=this.yd(1,c,d);this.om(0,c,d,f);this.om(1,c,d,e)}};c.prototype.fq=
function(k,b,c){var d=k.D();switch(this.D()){case 322:if(322==d)return a.yb.xJ(this,k,b,c);throw a.g.wa();default:throw a.g.wa();}};c.prototype.wJ=function(k,b,c,d,q){var e=k.D();switch(this.D()){case 322:if(322==e)return a.yb.ov(this,k,b,c,d,q);throw a.g.wa();default:throw a.g.wa();}};c.prototype.kv=function(){return null};c.Xk=function(a,b){return b*(a.le.length-2)};c.prototype.Kb=function(k,b){if(void 0===b){var c=new a.b;this.Kb(k,c);return c}a.vi.tP(this.na,this.ja,this.la,this.ha,k,b)};c.prototype.Gd=
function(){return null};c.prototype.TC=function(){return null};c.prototype.nt=function(){return null};c.prototype.mg=function(){return null};c.prototype.mD=function(){return null};c.prototype.Pf=function(){return null};c.prototype.rA=function(a,b){return void 0!==b?this.Ru(b)-this.Ru(a):this.Ru(a)};c.prototype.eo=function(){};c.prototype.xm=function(){return null};c.prototype.Bi=function(){};c.prototype.ld=function(){return null};c.prototype.xe=function(){return null};c.prototype.Ru=function(){return null};
c.prototype.AD=function(){return null};c.prototype.Fb=function(a,b){if(!b&&0!=this.fq(a,0,!1))return 0;var c=1.7976931348623157E308,d,q;d=this.Mb();q=a.Gd(d,!1);d.sub(a.Kb(q));d=d.length();d<c&&(c=d);d=this.oc();q=a.Gd(d,!1);d.sub(a.Kb(q));d=d.length();d<c&&(c=d);d=a.Mb();q=this.Gd(d,!1);d.sub(this.Kb(q));d=d.length();d<c&&(c=d);d=a.oc();q=this.Gd(d,!1);d.sub(this.Kb(q));d=d.length();d<c&&(c=d);return c};c.prototype.Rf=function(){return a.Hh.il(this,null)};return c}(a.T);a.fA=b})(z||(z={}));new z.b;
(function(a){(function(a){a[a.Unknown=-1]="Unknown";a[a.Not=0]="Not";a[a.Weak=1]="Weak";a[a.Strong=2]="Strong"})(a.tH||(a.tH={}));(function(a){a[a.DirtyIsKnownSimple=1]="DirtyIsKnownSimple";a[a.IsWeakSimple=2]="IsWeakSimple";a[a.IsStrongSimple=4]="IsStrongSimple";a[a.DirtyOGCFlags=8]="DirtyOGCFlags";a[a.DirtyVerifiedStreams=32]="DirtyVerifiedStreams";a[a.DirtyExactIntervals=64]="DirtyExactIntervals";a[a.DirtyLooseIntervals=128]="DirtyLooseIntervals";a[a.DirtyIntervals=192]="DirtyIntervals";a[a.DirtyIsEnvelope=
256]="DirtyIsEnvelope";a[a.DirtyLength2D=512]="DirtyLength2D";a[a.DirtyRingAreas2D=1024]="DirtyRingAreas2D";a[a.DirtyCoordinates=1993]="DirtyCoordinates";a[a.DirtyAllInternal=65535]="DirtyAllInternal";a[a.DirtyAll=16777215]="DirtyAll"})(a.cH||(a.cH={}));var b=function(b){function c(){b.call(this);this.El=65535;this.ta=0;this.rg=-1;this.pb=null}C(c,b);c.prototype.eo=function(){};c.prototype.qv=function(){};c.prototype.xv=function(){};c.prototype.F=function(){return this.ta};c.prototype.s=function(){return this.sc()};
c.prototype.sc=function(){return 0==this.ta};c.prototype.gj=function(a){return 0!=(this.El&a)};c.prototype.yf=function(a,b){this.El=b?this.El|a:this.El&~a};c.prototype.kc=function(){this.gj(32)&&this.FJ()};c.prototype.Su=function(){if(this.sc())throw a.g.ra("This operation was performed on an Empty Geometry.");};c.prototype.Sd=function(k,b){if(0>k||k>=this.ta)throw a.g.ra("index out of bounds");this.kc();b.Qf(this.description);b.s()&&b.ko();for(var c=0;c<this.description.Aa;c++)for(var d=this.description.Fd(c),
q=0,e=a.pa.Wa(d);q<e;q++){var f=this.Ba[c].Bh(e*k+q);b.setAttribute(d,q,f)}};c.prototype.Iu=function(k,b){this.kc();for(var c=b.description,d=0;d<c.Aa;d++)for(var q=c.Fd(d),e=a.pa.Wa(q),f=0;f<e;f++){var h=b.ld(q,f);this.setAttribute(q,k,f,h)}};c.prototype.w=function(k,b){if(0>k||k>=this.F())throw a.g.Uc();this.kc();this.Ba[0].ec(2*k,b)};c.prototype.Fa=function(k){var b=new a.b;this.w(k,b);return b};c.prototype.uc=function(a,b){this.Ba[0].ec(2*a,b)};c.prototype.ic=function(k,b,c){if(0>k||k>=this.ta)throw a.g.Uc();
this.kc();var d=this.Ba[0];void 0!==c?(d.write(2*k,b),d.write(2*k+1,c)):d.Rn(2*k,b);this.ce(1993)};c.prototype.Lw=function(k){if(0>k||k>=this.F())throw a.g.Uc();this.kc();var b=this.Ba[0],c=new a.ee;c.x=b.read(2*k);c.y=b.read(2*k+1);c.z=this.hasAttribute(1)?this.Ba[1].Bh(k):a.pa.ue(1);return c};c.prototype.Py=function(k,b){if(0>k||k>=this.F())throw a.g.Uc();this.Ne(1);this.kc();this.ce(1993);var c=this.Ba[0];c.write(2*k,b.x);c.write(2*k+1,b.y);this.Ba[1].Uk(k,b.z)};c.prototype.ld=function(k,b,c){if(0>
b||b>=this.ta)throw a.g.Uc();var d=a.pa.Wa(k);if(c>=d)throw a.g.Uc();this.kc();var q=this.description.zf(k);return 0<=q?this.Ba[q].Bh(b*d+c):a.pa.ue(k)};c.prototype.nC=function(a,b,c){return this.ld(a,b,c)};c.prototype.setAttribute=function(k,b,c,d){if(0>b||b>=this.ta)throw a.g.Uc();var q=a.pa.Wa(k);if(c>=q)throw a.g.Uc();this.Ne(k);this.kc();k=this.description.zf(k);this.ce(1993);this.Ba[k].Uk(b*q+c,d)};c.prototype.mc=function(a){this.Su();this.Ne(a);this.kc();return this.Ba[this.description.zf(a)]};
c.prototype.bm=function(k,b){if(null!=b&&a.pa.Qh(k)!=b.Qh())throw a.g.N();this.Ne(k);var c=this.description.zf(k);null==this.Ba&&(this.Ba=a.Ac.ay(this.description.Aa));this.Ba[c]=b;this.ce(16777215)};c.prototype.nm=function(k){var b=null;if(null!=this.Ba)for(var c=a.Od.iu(k,this.description),b=[],d=0,q=k.Aa;d<q;d++)-1!=c[d]&&(b[d]=this.Ba[c[d]]);this.description=k;this.Ba=b;this.rg=-1;this.ce(16777215)};c.prototype.IA=function(k){this.ss(!0);k instanceof a.i?this.R.o(k):this.R.Cn(k)};c.prototype.EJ=
function(k){this.ss(!1);k instanceof a.i?this.R.o(k):this.R.Cn(k)};c.prototype.Fp=function(a){this.ss(!0);this.R.copyTo(a)};c.prototype.o=function(a){this.IA(a)};c.prototype.Cn=function(a){this.IA(a)};c.prototype.dd=function(a){this.EJ(a)};c.prototype.Ah=function(k,b){var c=new a.Nd;if(this.sc())return c.Ja(),c;this.ss(!0);return this.R.Ah(k,b)};c.prototype.hc=function(){var k=this.description.hc();if(!this.sc())for(var b=this.F(),c=0,d=this.description.Aa;c<d;c++)k=this.Ba[c].jj(k,0,b*a.pa.Wa(this.description.Fd(c)));
return k};c.prototype.lc=function(k){if(k==this)return!0;if(!(k instanceof c&&this.description.lc(k.description))||this.sc()!=k.sc())return!1;if(this.sc())return!0;var b=this.F();if(b!=k.F())return!1;for(var d=0;d<this.description.Aa;d++){var e=this.description.Hd(d),f=this.mc(e),h=k.mc(e);if(!f.lc(h,0,b*a.pa.Wa(e)))return!1}return!0};c.prototype.copyTo=function(k){if(k.D()!=this.D())throw a.g.N();this.tA(k)};c.prototype.tA=function(k){this.kc();k.description=this.description;k.Ba=null;var b=this.description.Aa,
c=null;if(null!=this.Ba)for(var c=[],d=0;d<b;d++)null!=this.Ba[d]&&(c[d]=this.Ba[d].Ip(this.F()*a.pa.Wa(this.description.Fd(d))));null!=this.R?(k.R=this.R.Pa(),this.R.copyTo(k.R)):k.R=null;k.ta=this.ta;k.El=this.El;k.Ba=c;try{this.eo(k)}catch(q){throw k.Ja(),a.g.BI();}};c.prototype.EA=function(){this.ta=0;this.rg=-1;this.Ba=null;this.ce(16777215)};c.prototype.ce=function(a){16777215==a&&(this.rg=-1,this.qv());this.El|=a;this.kJ();this.qc()};c.prototype.ss=function(k){this.kc();if(this.gj(192))if(null==
this.R?this.R=new a.Vj(this.description):this.R.Qf(this.description),this.s())this.R.Ja();else{this.wv(k);for(var b=1;b<this.description.Aa;b++)for(var c=this.description.Fd(b),d=a.pa.Wa(c),q=this.Ba[b],e=0;e<d;e++){var f=new a.Nd;f.Ja();for(var h=0;h<this.ta;h++){var g=q.Bh(h*d+e);f.Db(g)}this.R.setInterval(c,e,f)}k&&this.yf(192,!1)}};c.prototype.wv=function(){this.R.Ja();for(var k=this.Ba[0],b=new a.b,c=0;c<this.ta;c++)k.ec(2*c,b),this.R.Db(b)};c.prototype.tm=function(k){k.Ja();for(var b=this.Ba[0],
c=new a.b,d=0;d<this.ta;d++)b.ec(2*d,c),k.Db(c)};c.prototype.FJ=function(){if(this.rg<this.ta){null==this.Ba&&(this.Ba=a.Ac.ay(this.description.Aa));this.rg=2147483647;for(var k=0;k<this.description.Aa;k++){var b=this.description.Fd(k);if(null!=this.Ba[k]){var c=a.pa.Wa(b),d=a.I.truncate(this.Ba[k].size/c);d<this.ta&&(d=a.I.truncate(this.rg>this.ta+5?(5*this.ta+3)/4:this.ta),this.Ba[k].resize(d*c,a.pa.ue(b)));d<this.rg&&(this.rg=d)}else this.Ba[k]=a.Ac.Tv(b,this.ta),this.rg=this.ta}}this.xv();this.yf(32,
!1)};c.prototype.jo=function(k){if(0>k)throw a.g.N();k!=this.ta&&(this.ta=k,this.ce(65535))};c.prototype.rj=function(a){if(!this.gj(1)){if(!this.gj(2))return 0;if(this.TP>=a)return this.gj(8)?1:2}return-1};c.prototype.hg=function(k,b){this.TP=b;if(-1==k)this.yf(1,!0),this.yf(8,!0);else if(this.yf(1,!1),this.yf(8,!0),0==k)this.yf(2,!1),this.yf(4,!1);else if(1==k)this.yf(2,!0),this.yf(4,!1);else if(2==k)this.yf(2,!0),this.yf(4,!0);else throw a.g.ra("internal error.");};c.prototype.kJ=function(){null!=
this.pb&&(this.pb=null)};c.prototype.vJ=function(k,b,c,d){if(0>k||k>=this.ta)throw a.g.ra("index out of bounds");if(0>b||b>=this.ta)throw a.g.ra("index out of bounds");this.kc();d.Qf(this.description);d.s()&&d.ko();for(var q=0;q<this.description.Aa;q++)for(var e=this.description.Fd(q),f=0,h=a.pa.Wa(e);f<h;f++){var g=this.Ba[q].Bh(h*k+f),n=this.Ba[q].Bh(h*b+f);d.setAttribute(e,f,a.vi.ut(g,n,c))}};c.prototype.mv=function(a,b){var c=this.Ba[0].f,d=c[2*a]-c[2*b],c=c[2*a+1]-c[2*b+1];return Math.sqrt(d*
d+c*c)};c.prototype.bh=function(k,b){if(0>k||k>=this.ta)throw a.g.Uc();if(b.s())throw a.g.N();this.kc();for(var c=b.description,d=0;d<c.Aa;d++)for(var q=c.Hd(d),e=a.pa.Wa(q),f=0;f<e;f++){var h=b.ld(q,f);this.setAttribute(q,k,f,h)}};c.prototype.jv=function(){return null};c.prototype.dj=function(){return null};return c}(a.T);a.Wr=b})(z||(z={}));(function(a){var b=function(){function b(){this.cb=this.Qm=null;this.Ol=124234251;this.Ct=!0;this.Ae=-1;this.cb=new a.Fc(7);this.Qm=null}b.prototype.Hn=function(a){this.Qm=
a};b.prototype.lM=function(){this.Ct=!1};b.prototype.de=function(a){this.cb.de(a)};b.prototype.nq=function(a){var k=this.cb.be();this.mS(k);this.oS(a,k);return k};b.prototype.fM=function(a){this.cb.Jc(a)};b.prototype.addElement=function(a,k){var b;-1==k?(-1==this.Ae&&(this.Ae=this.nq(-1)),b=this.Ae):b=k;return this.MA(a,0,b)};b.prototype.PA=function(a){-1==this.Ae&&(this.Ae=this.nq(-1));return this.MA(a,1,this.Ae)};b.prototype.qm=function(a){var k;-1==this.Ae&&(this.Ae=this.nq(-1));k=this.Ae;var b=
this.cb.f;if(-1==k||-1==b[7*k])return a=this.cb.Pj([-1,-1,-1,a,this.ck(),-1,-1]),b=this.cb.f,b[7*k]=a,this.mo(-1,a,k,b),a;var c=-1==k?-1:b[7*k+2];a=this.cb.Pj([-1,-1,c,a,this.ck(),-1,-1]);b=this.cb.f;b[7*c+1]=a;this.Fv(a,b);-1===b[7*a+2]&&(b[7*k]=a);this.mo(-1,a,k,b);return a};b.prototype.vs=function(b,k,c,d){var e=-1;-1==e&&(-1==this.Ae&&(this.Ae=this.nq(-1)),e=this.Ae);var f=this.cb.f;if(-1==e||-1==f[7*e])return c=this.cb.Pj([-1,-1,-1,c,this.ck(),-1,-1]),f=this.cb.f,f[7*e]=c,this.mo(-1,c,e,f),c;
var h;d?(d=-1!=k?this.Qm.compare(this,c,k):-1,h=-1!=b?this.Qm.compare(this,c,b):1):(d=-1,h=1);if(0==d||0==h)return f[7*e+3]=0==d?k:b,-1;(-1!=k&&-1!=b?this.Ol>a.I.$x(this.Ol)>>1:-1!=k)?b=k:d=h;for(k=!0;;){if(0>d)if(h=f[7*b],-1!=h)b=h;else{d=b;c=this.cb.Pj([-1,-1,b,c,this.ck(),-1,-1]);f=this.cb.f;f[7*b]=c;break}else if(h=f[7*b+1],-1!=h)b=h;else{d=f[7*b+6];c=this.cb.Pj([-1,-1,b,c,this.ck(),-1,-1]);f=this.cb.f;f[7*b+1]=c;break}k&&(d*=-1,k=!1)}this.Fv(c,f);-1===f[7*c+2]&&(f[7*e]=c);this.mo(d,c,e,f);return c};
b.prototype.tC=function(){return this.xN(this.Ae)};b.prototype.kd=function(a,k){var b;b=-1==k?this.Ae:k;this.Ct?this.eM(a,b):this.$S(a,b)};b.prototype.search=function(a,k){for(var b=this.dt(k);-1!=b;){var c=this.Qm.compare(this,a,b);if(0==c)return b;b=0>c?this.ik(b):this.Jo(b)}return-1};b.prototype.GR=function(a){for(var k=this.dt(-1),b=-1;-1!=k;){var c=a.compare(this,k);if(0==c)return k;0>c?k=this.ik(k):(b=k,k=this.Jo(k))}return b};b.prototype.sF=function(a){for(var k=this.dt(-1),b=-1;-1!=k;){var c=
a.compare(this,k);if(0==c)return k;0>c?(b=k,k=this.ik(k)):k=this.Jo(k)}return b};b.prototype.da=function(a){return this.cb.O(a,3)};b.prototype.ik=function(a){return this.cb.O(a,0)};b.prototype.Jo=function(a){return this.cb.O(a,1)};b.prototype.getParent=function(a){return this.cb.O(a,2)};b.prototype.bb=function(a){return this.cb.O(a,6)};b.prototype.ge=function(a){return this.cb.O(a,5)};b.prototype.gc=function(a){return-1==a?this.gk(this.Ae):this.gk(a)};b.prototype.tc=function(a){return-1==a?this.uq(this.Ae):
this.uq(a)};b.prototype.hO=function(a){return-1==a?this.QC(this.Ae):this.QC(a)};b.prototype.Vi=function(a,k){this.By(a,k)};b.prototype.dt=function(a){return-1==a?this.MC(this.Ae):this.MC(a)};b.prototype.clear=function(){this.cb.Nh(!1);this.Ae=-1};b.prototype.size=function(a){return-1==a?this.OC(this.Ae):this.OC(a)};b.prototype.pK=function(a,k){for(var b=k[7*a],c=k[7*a+1],d=k[7*a+4];-1!=b||-1!=c;){var e=-1!=b?k[7*b+4]:2147483647,c=-1!=c?k[7*c+4]:2147483647;if(d<=Math.min(e,c))break;e<=c?this.oF(b,
k):this.nF(a,k);b=k[7*a];c=k[7*a+1]}};b.prototype.Fv=function(a,k){if(this.Ct)for(var b=k[7*a+4],c=k[7*a+2];-1!=c&&k[7*c+4]>b;)k[7*c]==a?this.oF(a,k):this.nF(c,k),c=k[7*a+2]};b.prototype.nF=function(a,k){var b=k[7*a+1],c;k[7*b+2]=k[7*a+2];k[7*a+2]=b;c=k[7*b];k[7*a+1]=c;-1!=c&&(k[7*c+2]=a);k[7*b]=a;c=k[7*b+2];-1!=c&&(k[7*c]==a?k[7*c]=b:k[7*c+1]=b)};b.prototype.oF=function(a,k){var b=k[7*a+2],c;k[7*a+2]=k[7*b+2];k[7*b+2]=a;c=k[7*a+1];k[7*b]=c;-1!=c&&(k[7*c+2]=b);k[7*a+1]=b;c=k[7*a+2];-1!=c&&(k[7*c]===
b?k[7*c]=a:k[7*c+1]=a)};b.prototype.Tj=function(a,k){this.cb.L(a,2,k)};b.prototype.Gy=function(a,k){this.cb.L(a,0,k)};b.prototype.Ky=function(a,k){this.cb.L(a,1,k)};b.prototype.Jy=function(a,k){this.cb.L(a,5,k)};b.prototype.Gu=function(a,k){this.cb.L(a,6,k)};b.prototype.VF=function(a,k){this.cb.L(k,0,a)};b.prototype.mS=function(a){this.cb.L(a,4,0)};b.prototype.oS=function(a,k){this.cb.L(k,5,a)};b.prototype.MC=function(a){return-1==a?-1:this.cb.O(a,0)};b.prototype.gk=function(a){return-1==a?-1:this.cb.O(a,
1)};b.prototype.uq=function(a){return-1==a?-1:this.cb.O(a,2)};b.prototype.xN=function(a){return-1==a?-1:this.cb.O(a,3)};b.prototype.OC=function(a){return-1==a?0:this.cb.O(a,4)};b.prototype.QC=function(a){return this.cb.O(a,5)};b.prototype.ou=function(a){return this.cb.Pj([-1,-1,-1,a,this.ck(),-1,-1])};b.prototype.bk=function(a){-1!=a&&this.cb.Jc(a)};b.prototype.ck=function(){this.Ol=a.I.$x(this.Ol);return this.Ol&1073741823};b.prototype.MA=function(a,k,b){var c=this.cb.f;if(-1==b||-1==c[7*b])return a=
this.cb.Pj([-1,-1,-1,a,this.ck(),-1,-1]),c=this.cb.f,c[7*b]=a,this.mo(-1,a,b,c),a;for(var d=-1==b?-1:c[7*b];;){var e=-1==k?1:this.Qm.compare(this,a,d);if(0>e)if(e=this.ik(d),-1!=e)d=e;else{k=d;a=this.cb.Pj([-1,-1,d,a,this.ck(),-1,-1]);c=this.cb.f;c[7*d]=a;break}else{if(1==k&&0==e)return c[7*b+3]=d,-1;e=c[7*d+1];if(-1!=e)d=e;else{k=c[7*d+6];a=this.cb.Pj([-1,-1,d,a,this.ck(),-1,-1]);c=this.cb.f;c[7*d+1]=a;break}}}this.Fv(a,c);-1===c[7*a+2]&&(c[7*b]=a);this.mo(k,a,b,c);return a};b.prototype.mo=function(a,
k,b,c){var d;-1!=a?(d=c[7*a+5],c[7*a+5]=k):d=-1==b?-1:c[7*b+2];c[7*k+5]=d;-1!=d&&(c[7*d+6]=k);c[7*k+6]=a;a==(-1==b?-1:c[7*b+1])&&(c[7*b+1]=k);-1==a&&(c[7*b+2]=k);c[7*b+4]=(-1==b?0:c[7*b+4])+1};b.prototype.ry=function(a,k){var b=this.cb.f,c=b[7*a+5],d=b[7*a+6];-1!=c?b[7*c+6]=d:b[7*k+1]=d;-1!=d?b[7*d+5]=c:b[7*k+2]=c;b[7*k+4]=-1===k?-1:b[7*k+4]-1};b.prototype.$S=function(b,k){this.ry(b,k);var c=this.ik(b),d=this.Jo(b),e=this.getParent(b),f=b;if(-1!=c&&-1!=d){this.Ol=a.I.$x(this.Ol);var h;h=1073741823<
this.Ol?this.bb(b):this.ge(b);var g=this.getParent(h)==b;this.cb.Pu(b,h,0);this.cb.Pu(b,h,1);this.cb.Pu(b,h,2);-1!=e?this.ik(e)==b?this.Gy(e,h):this.Ky(e,h):this.VF(h,k);g?(c==h?(this.Gy(h,b),this.Tj(d,h)):d==h&&(this.Ky(h,b),this.Tj(c,h)),this.Tj(b,h),e=h):(this.Tj(c,h),this.Tj(d,h),e=this.getParent(b),f=h);c=this.ik(b);d=this.Jo(b);-1!=c&&this.Tj(c,b);-1!=d&&this.Tj(d,b)}c=-1!=c?c:d;-1==e?this.VF(c,k):this.ik(e)==f?this.Gy(e,c):this.Ky(e,c);-1!=c&&this.Tj(c,e);this.bk(b,k)};b.prototype.eM=function(a,
k){var b=this.cb.f;b[7*a+4]=2147483647;var c=-1,d=-1,e=-1===k?-1:b[7*k],f=e==a;f&&(c=b[7*e],d=b[7*e+1],-1==c&&-1==d)?(this.ry(e,k),this.bk(e,k),b[7*k]=-1):(this.pK(a,b),e=b[7*a+2],-1!=e&&(b[7*e]==a?b[7*e]=-1:b[7*e+1]=-1),this.ry(a,k),this.bk(a,k),f&&(b[7*k]=-1==c||-1!=b[7*c+2]?d:c))};b.prototype.By=function(a,k){this.cb.L(a,3,k)};return b}();a.bj=b})(z||(z={}));(function(a){var b=function(){function b(a,k){void 0!==a&&this.K(a,k)}b.prototype.K=function(a,k){this.qa=a;this.va=k;this.normalize()};b.prototype.normalize=
function(){if(!isNaN(this.qa)){if(this.qa>this.va){var a=this.qa;this.qa=this.va;this.va=a}isNaN(this.va)&&this.Ja()}};b.prototype.Ja=function(){this.va=this.qa=NaN};b.prototype.s=function(){return isNaN(this.qa)};b.prototype.Db=function(a){"number"===typeof a?this.s()?this.va=this.qa=a:this.Oj(a):a.s()||(this.s()?(this.qa=a.qa,this.va=a.va):(this.qa>a.qa&&(this.qa=a.qa),this.va<a.va&&(this.va=a.va),this.qa>this.va&&this.Ja()))};b.prototype.Oj=function(a){a<this.qa?this.qa=a:a>this.va&&(this.va=a)};
b.prototype.contains=function(a){return"number"===typeof a?a>=this.qa&&a<=this.va:a.qa>=this.qa&&a.va<=this.va};b.prototype.Ga=function(a){this.s()||a.s()?this.Ja():(this.qa<a.qa&&(this.qa=a.qa),this.va>a.va&&(this.va=a.va),this.qa>this.va&&this.Ja())};b.prototype.P=function(a){this.s()||(this.qa-=a,this.va+=a,this.va<this.qa&&this.Ja())};b.prototype.lv=function(){return this.s()?2.220446049250313E-14:2.220446049250313E-14*(Math.abs(this.qa)+Math.abs(this.va)+1)};b.prototype.yy=function(a,k){a>k?
(this.qa=k,this.va=a):(this.qa=a,this.va=k)};b.prototype.Sy=function(b){return a.I.Kr(b,this.qa,this.va)};b.prototype.aa=function(){return this.va-this.qa};b.prototype.Af=function(){return 0.5*(this.qa+this.va)};b.prototype.lc=function(a){return a==this?!0:a instanceof b?this.s()&&a.s()?!0:this.qa!=a.qa||this.va!=a.va?!1:!0:!1};b.prototype.hc=function(){return a.I.Rh(a.I.Rh())};return b}();a.Nd=b})(z||(z={}));(function(a){var b=new a.Nd,c=new a.Nd,d=function(){return function(){this.Zd=null;this.Lf=
-1;this.ib=new a.yb;this.ux=55555555;this.Et=this.Ft=!1;this.$h=new a.Nd;this.$h.yy(0,0)}}();a.XT=d;var k=function(){function k(b,c,r){this.a=b;this.Mj=NaN;this.mE=this.sp=0;this.nE=NaN;this.ka=c;this.tp=10*c;this.oE=this.pE=NaN;this.Zf=!1;this.Cl=this.mr=this.un=this.gr=this.fr=-1;this.lx=r;this.Rx=new d;this.vE=new d;a.I.truncate(3*b.pd/2)}k.prototype.$C=function(a,k,b,c){a.Zd=null===c?null:c[b[5*k]];a.Et=null!=a.Zd;a.Et||(c=b[5*k+2],-1!==c&&this.a.gR(b[5*k],b[5*c],a.ib),a.Zd=a.ib,a.$h.yy(a.ib.na,
a.ib.la),a.$h.va+=this.ka,a.ib.KE(),a.Ft=a.ib.ha==a.ib.ja,a.Ft||(a.ux=(a.ib.la-a.ib.na)/(a.ib.ha-a.ib.ja)))};k.prototype.tL=function(a,k){var b=a.fq(k,this.ka,!0);if(0!=b)return 2==b?this.aw():this.Oh();a.ht(H);a.uw(J);k.ht(I);k.uw(K);F.ma(this.sp,this.Mj);H.ub(I)&&this.Mj==H.y?0>J.compare(K)?F.J(J):F.J(K):H.ub(K)&&this.Mj==H.y?0>J.compare(I)?F.J(J):F.J(I):I.ub(J)&&this.Mj==I.y?0>H.compare(K)?F.J(H):F.J(K):J.ub(K)&&this.Mj==J.y&&(0>H.compare(I)?F.J(H):F.J(I));return a.xe(F.y,F.x)<k.xe(F.y,F.x)?-1:
1};k.prototype.rL=function(a,k){if(a.ib.ja==k.ib.ja&&a.ib.na==k.ib.na)return a.ib.ha==k.ib.ha&&a.ib.la==k.ib.la?this.lx?this.aw():0:this.HB(a,k);if(a.ib.ha==k.ib.ha&&a.ib.la==k.ib.la)return this.GB(a,k);var b=this.GB(a,k),c=this.HB(a,k);return 0>b&&0>c?-1:0<b&&0<c?1:this.Oh()};k.prototype.mL=function(a,k){if(a.la>k.la){if(k.la>k.na&&k.ha-k.ja<2*this.ka&&a.Kh(k.la,k.ha,this.ka))return this.Oh()}else if((k.ha-k.ja)/(k.la-k.na)*(a.la-a.na)<this.tp&&k.Kh(a.la,a.ha,this.ka))return this.Oh();return 1};
k.prototype.nL=function(a,k){if(a.na<k.na){if(k.la>k.na&&k.ha-k.ja<2*this.ka&&a.Kh(k.la,k.ha,this.ka))return this.Oh()}else if((k.ha-k.ja)/(k.la-k.na)*(a.na-a.la)<this.tp&&k.Kh(a.na,a.ja,this.ka))return this.Oh();return-1};k.prototype.oL=function(k,b){var c=new a.b;c.pc(b.oc(),b.Mb());c.Kp();c.normalize();var r=new a.b;r.pc(k.Mb(),b.Mb());var d=new a.b;d.pc(k.oc(),b.Mb());var r=r.ml(c),c=d.ml(c),d=Math.abs(r),q=Math.abs(c);if(d<q){if(d<this.tp&&b.Kh(k.na,k.ja,this.ka))return this.Oh()}else if(q<this.tp&&
b.Kh(k.la,k.ha,this.ka))return this.Oh();return 0>r&&0>c?-1:0<r&&0<c?1:this.Oh()};k.prototype.FB=function(a,k){return a.ja==k.ja&&a.na==k.na?this.mL(a,k):a.ha==k.ha&&a.la==k.la?this.nL(a,k):this.oL(a,k)};k.prototype.qL=function(a,k){return a.ha==k.ha&&a.la==k.la&&a.ja==k.ja&&a.na==k.na?this.lx?this.aw():0:this.Oh()};k.prototype.GB=function(a,k){var b=1;if(a.ib.ja<k.ib.ja){var b=-1,c=a;a=k;k=c}var c=a.ib,r=k.ib,d=c.na-r.na,q=k.ux*(c.ja-r.ja),e=this.tp;return d<q-e?-b:d>q+e?b:r.Kh(c.na,c.ja,this.ka)?
this.Oh():d<q?-b:b};k.prototype.HB=function(a,k){var b=1;if(k.ib.ha<a.ib.ha){var b=-1,c=a;a=k;k=c}var c=a.ib,r=k.ib,d=c.la-r.na,q=k.ux*(c.ha-r.ja),e=this.tp;return d<q-e?-b:d>q+e?b:r.Kh(c.la,c.ha,this.ka)?this.Oh():d<q?-b:b};k.prototype.aw=function(){this.Zf=!0;this.ei=new a.wd(5,this.un,this.mr);return-1};k.prototype.Oh=function(){this.Zf=!0;this.lx?this.ei=new a.wd(4,this.un,this.mr):this.mr=this.un=this.gr=this.fr=-1;return-1};k.prototype.sL=function(a,k,r,d){if(this.Zf)return-1;var q=this.nE==
this.Mj&&this.mE==this.sp,e;q&&a==this.fr?e=this.oE:(e=NaN,this.fr=-1);q&&k==this.gr?q=this.pE:(q=NaN,this.gr=-1);r.Zd.XE(b);d.Zd.XE(c);if(b.va<c.qa)return-1;if(c.va<b.qa)return 1;this.nE=this.Mj;this.mE=this.sp;isNaN(e)&&(this.fr=a,this.oE=e=r.Zd.xe(this.Mj,this.sp));isNaN(q)&&(this.gr=k,this.pE=q=d.Zd.xe(this.Mj,this.sp));return Math.abs(e-q)<=this.ka?this.tL(r.Zd,d.Zd):e<q?-1:e>q?1:0};k.prototype.lq=function(){this.Zf=!1};k.prototype.rl=function(){return this.ei};k.prototype.XF=function(a,k){this.Mj=
a;this.sp=k;this.mr=this.un=this.gr=this.fr=-1};k.prototype.compare=function(a,k,b){if(this.Zf)return-1;a=a.da(b);this.Cl=b;return this.JB(k,k,a,a)};k.prototype.JB=function(a,k,b,c){var r;this.un==k?r=this.Rx:(this.un=k,r=this.Rx,this.Rx.Lf=a,this.$C(r,k,this.a.cd.f,this.a.Ge));var d;null==d&&(this.mr=c,d=this.vE,this.vE.Lf=b,this.$C(d,c,this.a.cd.f,this.a.Ge));if(r.Et||d.Et)return this.sL(k,c,r,d);if(r.$h.va<d.$h.qa)return-1;if(d.$h.va<r.$h.qa)return 1;a=r.Ft?1:0;a|=d.Ft?2:0;return 0==a?this.rL(r,
d):1==a?this.FB(r.ib,d.ib):2==a?-1*this.FB(d.ib,r.ib):this.qL(r.ib,d.ib)};return k}();a.hA=k})(z||(z={}));(function(a){var b=function(){function b(c,k){this.a=c;this.ka=k;this.Zf=!1;this.un=-1;this.$h=new a.Nd;this.pp=new a.b;this.pp.Eh();this.Vd=new a.yb;this.Cl=-1;this.Cx=1.7976931348623157E308}b.prototype.lq=function(){this.Zf=!1;this.Cx=1.7976931348623157E308};b.prototype.bh=function(a){this.pp.J(a)};b.prototype.compare=function(a,k){return this.KB(k,a.da(k))};b.prototype.KB=function(b,k){var c=
null!=this.a.cc(k);c||(this.a.Oc(k,this.Vd),this.$h.yy(this.Vd.na,this.Vd.la));if(c)throw a.g.ra("not implemented");if(this.pp.x+this.ka<this.$h.qa)return-1;if(this.pp.x-this.ka>this.$h.va)return 1;if(this.Vd.ja==this.Vd.ha)return this.Cl=b,this.Zf=!0,0;this.Vd.KE();var d=this.Vd.Mb(),c=new a.b;c.pc(this.Vd.oc(),d);c.Kp();var e=new a.b;e.pc(this.pp,d);d=c.ml(e);d/=c.length();return d<10*-this.ka?-1:d>10*this.ka?1:this.Vd.Eq(this.pp,this.ka)&&(c=Math.abs(d),c<this.Cx&&(this.Cl=b,this.Cx=c),this.Zf=
!0,c<0.25*this.ka)?0:0>d?-1:1};return b}();a.JI=b})(z||(z={}));(function(a){function b(a,k,c,d){c=new Float64Array(a.subarray(c,d));a.set(c,k)}var c=function(){function b(k){this.Sa=this.Xf=!1;this.f=[];var c=k;2>c&&(c=2);this.f=a.I.Lh(c,b.ob);this.size=k}b.Yc=function(a,c){b.ob=c;var d=new b(a);b.ob=0;return d};b.lj=function(a){var c=new b(0);c.f=a.f.slice(0);c.size=a.size;return c};b.V=function(a,c){var d=new b(0);d.size=a.size;d.size>c&&(d.size=c);d.f=a.f.slice(0,d.size);return d};b.prototype.xb=
function(){};b.prototype.read=function(a){return this.f[a]};b.prototype.ec=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};b.prototype.get=function(a){return this.f[a]};b.prototype.write=function(k,b){if(this.Sa)throw a.g.xa();this.f[k]=b};b.prototype.set=function(k,b){if(this.Sa)throw a.g.xa();this.f[k]=b};b.prototype.Rn=function(k,b){if(this.Sa)throw a.g.xa();this.f[k]=b.x;this.f[k+1]=b.y};b.prototype.add=function(a){this.resize(this.size+1);this.f[this.size-1]=a};b.prototype.Ip=function(a){return b.V(this,
a)};b.prototype.Bh=function(a){return this.read(a)};b.prototype.resize=function(k,b){void 0===b&&(b=0);if(this.Xf)throw a.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");if(k<=this.size){if(a.I.truncate(5*k/4)<this.f.length){var c=this.f.slice(0,k);this.f=c}}else if(k>this.f.length){a.I.truncate(64>k?Math.max(2*k,4):5*k/4);for(var c=this.f.slice(0),d=this.f.length;d<k;d++)c[d]=b;this.f=c}this.size=k};b.prototype.cf=function(k){(null==this.f||k>this.f.length)&&this.resize(k);
if(this.Xf)throw a.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");this.size=k};b.prototype.Uk=function(a,b){this.write(a,b)};b.prototype.jj=function(k,b,c){for(var d=this.size;b<d&&b<c;b++)k=a.I.Rh(this.read(b));return k};b.prototype.lc=function(a,c,d){if(null==a||!(a instanceof b))return!1;var e=this.size,f=a.size;if(d>e||d>f&&e!=f)return!1;for(d>e&&(d=e);c<d;c++)if(this.read(c)!=a.read(c))return!1;return!0};b.prototype.nk=function(k,b,c,d,q,e,f){if(this.Sa)throw a.g.xa();
if(!q&&(1>e||0!=d%e))throw a.g.N();var h=this.size-f;h<d&&this.resize(this.size+d-h);for(h=0;h<f-k;h++)this.f[k+d+h]=this.f[k+h];this.f==b.f&&k<c&&(c+=d);if(q)for(h=0;h<d;h++)this.f[h+k]=b.f[c+h];else{q=d;for(f=0;f<d;f+=e){q-=e;for(h=0;h<e;h++)this.f[k+f+h]=b.f[c+q+h]}}};b.prototype.ul=function(k,b,c,d){if(this.Sa)throw a.g.xa();d-=k;for(var q=this.f.slice(k,k+d),e=0;e<d;e++)this.f[k+c+e]=q[e];for(d=0;d<c;d++)this.f[k+d]=b};b.prototype.lg=function(k,b,c){if(this.Sa)throw a.g.xa();for(var d=this.f.slice(k,
k+(c-k)),q=0;q<c-k;q++)this.f[q+k+2]=d[q];this.f[k]=b.x;this.f[k+1]=b.y};b.prototype.km=function(k,b,c,d,q,e){if(0>k||0>b||0>d)throw a.g.N();if(!q&&(0>=e||0!=b%e))throw a.g.N();if(c.size<d+b)throw a.g.N();if(0!=b)if(this.size<b+k&&this.resize(b+k),c==this)this.xi(k,b,d,q,e);else if(q)for(q=0;q<b;q++)this.f[k]=c.f[d],k++,d++;else if(d=d+b-e,1==e)for(q=0;q<b;q++)this.f[k]=c.f[d],k++,d--;else{q=0;for(b=a.I.truncate(b/e);q<b;q++){for(var f=0;f<e;f++)this.f[k+f]=c.f[d+f];k+=e;d-=e}}};b.prototype.oj=function(k,
b,c){if(this.Sa)throw a.g.xa();if(k+b>this.size)throw a.g.xa();if(0<c-(k+b)){c-=k+b;for(var d=this.f.slice(k+b,k+c+b),q=0;q<c;q++)this.f[k+q]=d[q]}this.size-=b};b.prototype.Jp=function(k,b,c){if(this.Sa)throw a.g.xa();if(1>c||0!=b%c)throw a.g.xa();for(var d=b>>1,q=0;q<d;q+=c){b-=c;for(var e=0;e<c;e++){var f=this.f[k+q+e];this.f[k+q+e]=this.f[k+b+e];this.f[k+b+e]=f}}};b.prototype.dh=function(k,b,c){if(0>b||0>c||0>b||c+b>this.size)throw a.g.N();for(var d=b;d<b+c;d++)this.f[d]=k};b.prototype.xi=function(k,
b,c,d,q){if(!d||k!=c){for(var e=0;e<b;e++)this.f[k+e]=this.f[c+e];if(!d){c=k;k=k+b-q;d=0;for(b=a.I.truncate(b/2);d<b;d++){for(e=0;e<q;e++){var f=this.f[c+e];this.f[c+e]=this.f[k+e];this.f[k+e]=f}c+=q;k-=q}}}};b.prototype.$p=function(k,b,c,d,q){if(0>k||0>b||0>d)throw a.g.N();if(0!=b){this.size<(b<<1)+k&&this.resize((b<<1)+k);q||(k+=b-1<<1);q=q?2:-2;for(b+=d;d<b;d++)this.f[k]=c[d].x,this.f[k+1]=c[d].y,k+=q}};b.prototype.Hp=function(k,b,c,d,q){if(0>k||0>b||0>d||this.size<b+k)throw a.g.N();if(q)for(q=
0;q<b;q++)c[d+q]=this.f[k+q];else for(d=d+b-1;k<b;k++)c[d]=this.f[k],d--};b.prototype.clear=function(a){a?this.resize(0):this.cf(0)};b.prototype.xd=function(a,b,c){var d=this.f.slice(0,a),q=this.f.slice(b);a=this.f.slice(a,b).sort(c);this.f.length=0;this.f.push.apply(this.f,d.concat(a).concat(q))};b.prototype.Qh=function(){return 1};b.ob=0;return b}();a.qd=c;c=function(){function c(a){this.Sa=this.Xf=!1;this.f=null;var b=a;2>b&&(b=2);this.f=new Float64Array(b);this.size=a}c.Yc=function(a,b){var d=
new c(a),e=a,f=d.f;2>e&&(e=2);if(0!==b)for(var h=0;h<e;h++)f[h]=b;return d};c.lj=function(a){var b=new c(0);b.f=new Float64Array(a.f);b.size=a.size;return b};c.V=function(a,b){var d=new c(0);d.size=a.size;d.size>b&&(d.size=b);var e=d.size;2>e&&(e=2);d.f=new Float64Array(e);d.f.set(a.f.length<=e?a.f:a.f.subarray(0,e),0);return d};c.prototype.xb=function(a){0>=a||(null==this.f?this.f=new Float64Array(a):a<=this.f.length||(0<this.f.length?(a=new Float64Array(a),a.set(this.f),this.f=a):this.f=new Float64Array(a)))};
c.prototype.read=function(a){return this.f[a]};c.prototype.ec=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};c.prototype.get=function(a){return this.f[a]};c.prototype.write=function(k,b){if(this.Sa)throw a.g.xa();this.f[k]=b};c.prototype.set=function(k,b){if(this.Sa)throw a.g.xa();this.f[k]=b};c.prototype.Rn=function(k,b){if(this.Sa)throw a.g.xa();this.f[k]=b.x;this.f[k+1]=b.y};c.prototype.add=function(a){this.resize(this.size+1);this.f[this.size-1]=a};c.prototype.Ip=function(a){return c.V(this,a)};
c.prototype.Bh=function(a){return this.read(a)};c.prototype.resize=function(k,b){void 0===b&&(b=0);if(this.Xf)throw a.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");if(k<=this.size){if(30<this.f.length&&5*k/4<this.f.length){var c=new Float64Array(this.f,0,k);this.f=c}}else{k>this.f.length&&(c=a.I.truncate(64>k?Math.max(2*k,4):5*k/4),c=new Float64Array(c),c.set(this.f),this.f=c);for(var c=this.f,d=this.size;d<k;d++)c[d]=b}this.size=k};c.prototype.cf=function(k){(null==this.f||
k>this.f.length)&&this.resize(k);if(this.Xf)throw a.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");this.size=k};c.prototype.Uk=function(a,b){this.write(a,b)};c.prototype.jj=function(k,b,c){for(var d=this.size;b<d&&b<c;b++)k=a.I.Rh(this.read(b));return k};c.prototype.lc=function(a,b,d){if(null==a||!(a instanceof c))return!1;var e=this.size,f=a.size;if(d>e||d>f&&e!=f)return!1;for(d>e&&(d=e);b<d;b++)if(this.read(b)!=a.read(b))return!1;return!0};c.prototype.nk=function(k,c,d,
q,e,f,h){if(this.Sa)throw a.g.xa();if(!e&&(1>f||0!=q%f))throw a.g.N();var g=this.size-h;g<q&&this.resize(this.size+q-g);b(this.f,k+q,k,k+(h-k));this.f==c.f&&k<d&&(d+=q);if(e)this.f.set(c.f.subarray(d,d+q),k);else{e=q;for(h=0;h<q;h+=f){e-=f;for(g=0;g<f;g++)this.f[k+h+g]=c.f[d+e+g]}}};c.prototype.ul=function(k,c,d,q){if(this.Sa)throw a.g.xa();q-=k;b(this.f,k+q,k,k+q);for(q=0;q<d;q++)this.f[k+q]=c};c.prototype.lg=function(k,c,d){if(this.Sa)throw a.g.xa();b(this.f,k+2,k,k+(d-k));this.f[k]=c.x;this.f[k+
1]=c.y};c.prototype.km=function(b,c,d,q,e,f){if(0>b||0>c||0>q)throw a.g.N();if(!e&&(0>=f||0!=c%f))throw a.g.N();if(d.size<q+c)throw a.g.N();if(0!=c)if(this.size<c+b&&this.resize(c+b),d==this)this.xi(b,c,q,e,f);else if(e)for(e=0;e<c;e++)this.f[b]=d.f[q],b++,q++;else if(q=q+c-f,1==f)for(e=0;e<c;e++)this.f[b]=d.f[q],b++,q--;else{e=0;for(c=a.I.truncate(c/f);e<c;e++){for(var h=0;h<f;h++)this.f[b+h]=d.f[q+h];b+=f;q-=f}}};c.prototype.oj=function(k,c,d){if(this.Sa)throw a.g.xa();if(k+c>this.size)throw a.g.xa();
0<d-(k+c)&&b(this.f,k,k+c,k+(d-(k+c))+c);this.size-=c};c.prototype.Jp=function(b,c,d){if(this.Sa)throw a.g.xa();if(1>d||0!=c%d)throw a.g.xa();for(var q=c>>1,e=0;e<q;e+=d){c-=d;for(var f=0;f<d;f++){var h=this.f[b+e+f];this.f[b+e+f]=this.f[b+c+f];this.f[b+c+f]=h}}};c.prototype.dh=function(b,c,d){if(0>c||0>d||0>c||d+c>this.size)throw a.g.N();for(var q=c;q<c+d;q++)this.f[q]=b};c.prototype.xi=function(b,c,d,q,e){if(!q||b!=d)if(this.f.set(this.f.subarray(d,d+c),b),!q){d=b;b=b+c-e;q=0;for(c=a.I.truncate(c/
2);q<c;q++){for(var f=0;f<e;f++){var h=this.f[d+f];this.f[d+f]=this.f[b+f];this.f[b+f]=h}d+=e;b-=e}}};c.prototype.$p=function(b,c,d,q,e){if(0>b||0>c||0>q)throw a.g.N();if(0!=c){this.size<(c<<1)+b&&this.resize((c<<1)+b);e||(b+=c-1<<1);e=e?2:-2;for(c+=q;q<c;q++)this.f[b]=d[q].x,this.f[b+1]=d[q].y,b+=e}};c.prototype.Hp=function(b,c,d,q,e){if(0>b||0>c||0>q||this.size<c+b)throw a.g.N();if(e)for(e=0;e<c;e++)d[q+e]=this.f[b+e];else for(q=q+c-1;b<c;b++)d[q]=this.f[b],q--};c.prototype.clear=function(a){a?
this.resize(0):this.cf(0)};c.prototype.xd=function(a,b,c){Array.prototype.sort.call(this.f.subarray(a,b),c)};c.prototype.Qh=function(){return 1};return c}();a.QG=c})(z||(z={}));!0===z.ah.Sk&&!0===z.ah.it&&(z.qd=z.QG);(function(a){function b(a,k,c,d){c=new Int32Array(a.subarray(c,d));a.set(c,k)}a.tT=function(){return function(){this.random=1973}}();var c=function(){function b(k){this.Sa=this.Xf=!1;this.f=[];var c=k;2>c&&(c=2);this.f=this.f=a.I.Lh(c,b.ob);this.size=k}b.Yc=function(a,c){b.ob=c;var d=
new b(a);b.ob=0;return d};b.lj=function(a){var c=new b(0);c.f=a.f.slice(0);c.size=a.size;return c};b.V=function(a,c){var d=new b(0);d.size=a.size;d.size>c&&(d.size=c);d.f=a.f.slice(0,d.size);return d};b.prototype.xb=function(){};b.prototype.read=function(a){return this.f[a]};b.prototype.ec=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};b.prototype.get=function(a){return this.f[a]};b.prototype.write=function(b,c){if(this.Sa)throw a.g.xa();this.f[b]=c};b.prototype.set=function(b,c){if(this.Sa)throw a.g.xa();
this.f[b]=c};b.prototype.Rn=function(b,c){if(this.Sa)throw a.g.xa();this.f[b]=c.x;this.f[b+1]=c.y};b.prototype.add=function(a){this.resize(this.size+1);this.f[this.size-1]=a};b.prototype.Ip=function(a){return b.V(this,a)};b.prototype.Bh=function(a){return this.read(a)};b.prototype.resize=function(b,c){void 0===c&&(c=0);if(this.Xf)throw a.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(a.I.truncate(5*b/4)<this.f.length){var d=this.f.slice(0,b);this.f=d}}else if(b>
this.f.length){a.I.truncate(64>b?Math.max(2*b,4):5*b/4);for(var d=this.f.slice(0),q=this.f.length;q<b;q++)d[q]=c;this.f=d}this.size=b};b.prototype.cf=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw a.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};b.prototype.Uk=function(a,b){this.write(a,b)};b.prototype.jj=function(b,c,d){for(var q=this.size;c<q&&c<d;c++)b=a.I.kg(this.read(c),b);return b};b.prototype.lc=function(a,c,d){if(null==a||
!(a instanceof b))return!1;var e=this.size,f=a.size;if(d>e||d>f&&e!=f)return!1;for(d>e&&(d=e);c<d;c++)if(this.read(c)!=a.read(c))return!1;return!0};b.prototype.nk=function(b,c,d,q,e,f,h){if(this.Sa)throw a.g.xa();if(!e&&(1>f||0!=q%f))throw a.g.N();for(var g=0;g<h-b;g++)this.f[b+q+g]=this.f[b+g];this.f==c.f&&b<d&&(d+=q);if(e)for(g=0;g<q;g++)this.f[g+b]=c.f[d+g];else{e=q;for(h=0;h<q;h+=f){e-=f;for(g=0;g<f;g++)this.f[b+h+g]=c.f[d+e+g]}}};b.prototype.ul=function(b,c,d,q){if(this.Sa)throw a.g.xa();q-=
b;for(var e=this.f.slice(b,b+q),f=0;f<q;f++)this.f[b+d+f]=e[f];for(q=0;q<d;q++)this.f[b+q]=c};b.prototype.lg=function(b,c,d){if(this.Sa)throw a.g.xa();for(var q=this.f.slice(b,b+(d-b)),e=0;e<d-b;e++)this.f[e+b+2]=q[e];this.f[b]=c.x;this.f[b+1]=c.y};b.prototype.km=function(b,c,d,q,e,f){if(0>b||0>c||0>q)throw a.g.N();if(!e&&(0>=f||0!=c%f))throw a.g.N();if(d.size<q+c)throw a.g.N();if(0!=c)if(this.size<c+b&&this.resize(c+b),d==this)this.xi(b,c,q,e,f);else if(e)for(e=0;e<c;e++)this.f[b]=d.f[q],b++,q++;
else if(q=q+c-f,1==f)for(e=0;e<c;e++)this.f[b]=d.f[q],b++,q--;else{e=0;for(c=a.I.truncate(c/f);e<c;e++){for(var h=0;h<f;h++)this.f[b+h]=d.f[q+h];b+=f;q-=f}}};b.prototype.oj=function(b,c,d){if(this.Sa)throw a.g.xa();if(b+c>this.size)throw a.g.xa();if(0<d-(b+c)){d-=b+c;for(var q=this.f.slice(b+c,b+d+c),e=0;e<d;e++)this.f[b+e]=q[e]}this.size-=c};b.prototype.Jp=function(b,c,d){if(this.Sa)throw a.g.xa();if(1>d||0!=c%d)throw a.g.xa();for(var q=c>>1,e=0;e<q;e+=d){c-=d;for(var f=0;f<d;f++){var h=this.f[b+
e+f];this.f[b+e+f]=this.f[b+c+f];this.f[b+c+f]=h}}};b.prototype.dh=function(b,c,d){if(0>c||0>d||0>c||d+c>this.size)throw a.g.N();for(var q=c;q<c+d;q++)this.f[q]=b};b.prototype.xi=function(b,c,d,q,e){if(!q||b!=d){for(var f=0;f<c;f++)this.f[b+f]=this.f[d+f];if(!q){d=b;b=b+c-e;q=0;for(c=a.I.truncate(c/2);q<c;q++){for(f=0;f<e;f++){var h=this.f[d+f];this.f[d+f]=this.f[b+f];this.f[b+f]=h}d+=e;b-=e}}}};b.prototype.$p=function(b,c,d,q,e){if(0>b||0>c||0>q)throw a.g.N();if(0!=c){this.size<(c<<1)+b&&this.resize((c<<
1)+b);e||(b+=c-1<<1);e=e?2:-2;for(c+=q;q<c;q++)this.f[b]=d[q].x,this.f[b+1]=d[q].y,b+=e}};b.prototype.Hp=function(b,c,d,q,e){if(0>b||0>c||0>q||this.size<c+b)throw a.g.N();if(e)for(e=0;e<c;e++)d[q+e]=this.f[b+e];else for(q=q+c-1;b<c;b++)d[q]=this.f[b],q--};b.prototype.clear=function(a){a?this.resize(0):this.cf(0)};b.prototype.xd=function(a,b,c){var d=this.f.slice(0,a),q=this.f.slice(b);a=this.f.slice(a,b).sort(c);this.f.length=0;this.f.push.apply(this.f,d.concat(a).concat(q))};b.prototype.Qh=function(){return 2};
b.prototype.tc=function(){return this.f[this.size-1]};b.prototype.af=function(){this.resize(this.size-1)};b.prototype.JF=function(a){this.f[this.size-1]=a};b.prototype.QE=function(a){a<this.size-1&&(this.f[a]=this.f[this.size-1]);this.resize(this.size-1)};b.prototype.Qs=function(a){for(var b=0,c=this.size;b<c;b++)if(this.f[b]==a)return b;return-1};b.prototype.Nw=function(a){return 0<=this.Qs(a)};b.ob=0;return b}();a.ga=c;c=function(){function c(a){this.Sa=this.Xf=!1;this.f=null;var b=a;2>b&&(b=2);
this.f=new Int32Array(b);this.size=a}c.Yc=function(a,b){var d=new c(a),e=a,f=d.f;2>e&&(e=2);if(0!==b)for(var h=0;h<e;h++)f[h]=b;return d};c.lj=function(a){var b=new c(0);b.f=new Int32Array(a.f);b.size=a.size;return b};c.V=function(a,b){var d=new c(0);d.size=a.size;d.size>b&&(d.size=b);var e=d.size;2>e&&(e=2);d.f=new Int32Array(e);d.f.set(a.f.length<=e?a.f:a.f.subarray(0,e),0);return d};c.prototype.xb=function(a){0>=a||(null==this.f?this.f=new Int32Array(a):a<=this.f.length||(0<this.f.length?(a=new Int32Array(a),
a.set(this.f),this.f=a):this.f=new Int32Array(a)))};c.prototype.read=function(a){return this.f[a]};c.prototype.ec=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};c.prototype.get=function(a){return this.f[a]};c.prototype.write=function(b,c){if(this.Sa)throw a.g.xa();this.f[b]=c};c.prototype.set=function(b,c){if(this.Sa)throw a.g.xa();this.f[b]=c};c.prototype.Rn=function(b,c){if(this.Sa)throw a.g.xa();this.f[b]=c.x;this.f[b+1]=c.y};c.prototype.add=function(a){this.resize(this.size+1);this.f[this.size-
1]=a};c.prototype.Ip=function(a){return c.V(this,a)};c.prototype.Bh=function(a){return this.read(a)};c.prototype.resize=function(b,c){void 0===c&&(c=0);if(this.Xf)throw a.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(30<this.f.length&&5*b/4<this.f.length){var d=new Int32Array(this.f,0,b);this.f=d}}else{b>this.f.length&&(d=a.I.truncate(64>b?Math.max(2*b,4):5*b/4),d=new Int32Array(d),d.set(this.f),this.f=d);for(var d=this.f,q=this.size;q<b;q++)d[q]=c}this.size=
b};c.prototype.cf=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw a.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};c.prototype.Uk=function(a,b){this.write(a,b)};c.prototype.jj=function(b,c,d){for(var q=this.size;c<q&&c<d;c++)b=a.I.kg(this.read(c),b);return b};c.prototype.lc=function(a,b,d){if(null==a||!(a instanceof c))return!1;var e=this.size,f=a.size;if(d>e||d>f&&e!=f)return!1;for(d>e&&(d=e);b<d;b++)if(this.read(b)!=a.read(b))return!1;
return!0};c.prototype.nk=function(k,c,d,q,e,f,h){if(this.Sa)throw a.g.xa();if(!e&&(1>f||0!=q%f))throw a.g.N();b(this.f,k+q,k,k+(h-k));this.f==c.f&&k<d&&(d+=q);if(e)this.f.set(c.f.subarray(d,d+q),k);else{e=q;for(h=0;h<q;h+=f){e-=f;for(var g=0;g<f;g++)this.f[k+h+g]=c.f[d+e+g]}}};c.prototype.ul=function(k,c,d,q){if(this.Sa)throw a.g.xa();q-=k;b(this.f,k+q,k,k+q);for(q=0;q<d;q++)this.f[k+q]=c};c.prototype.lg=function(k,c,d){if(this.Sa)throw a.g.xa();b(this.f,k+2,k,k+(d-k));this.f[k]=c.x;this.f[k+1]=c.y};
c.prototype.km=function(b,c,d,q,e,f){if(0>b||0>c||0>q)throw a.g.N();if(!e&&(0>=f||0!=c%f))throw a.g.N();if(d.size<q+c)throw a.g.N();if(0!=c)if(this.size<c+b&&this.resize(c+b),d==this)this.xi(b,c,q,e,f);else if(e)for(e=0;e<c;e++)this.f[b]=d.f[q],b++,q++;else if(q=q+c-f,1==f)for(e=0;e<c;e++)this.f[b]=d.f[q],b++,q--;else{e=0;for(c=a.I.truncate(c/f);e<c;e++){for(var h=0;h<f;h++)this.f[b+h]=d.f[q+h];b+=f;q-=f}}};c.prototype.oj=function(k,c,d){if(this.Sa)throw a.g.xa();if(k+c>this.size)throw a.g.xa();0<
d-(k+c)&&b(this.f,k,k+c,k+(d-(k+c))+c);this.size-=c};c.prototype.Jp=function(b,c,d){if(this.Sa)throw a.g.xa();if(1>d||0!=c%d)throw a.g.xa();for(var q=c>>1,e=0;e<q;e+=d){c-=d;for(var f=0;f<d;f++){var h=this.f[b+e+f];this.f[b+e+f]=this.f[b+c+f];this.f[b+c+f]=h}}};c.prototype.dh=function(b,c,d){if(0>c||0>d||0>c||d+c>this.size)throw a.g.N();for(var q=c;q<c+d;q++)this.f[q]=b};c.prototype.xi=function(b,c,d,q,e){if(!q||b!=d)if(this.f.set(this.f.subarray(d,d+c),b),!q){d=b;b=b+c-e;q=0;for(c=a.I.truncate(c/
2);q<c;q++){for(var f=0;f<e;f++){var h=this.f[d+f];this.f[d+f]=this.f[b+f];this.f[b+f]=h}d+=e;b-=e}}};c.prototype.$p=function(b,c,d,q,e){if(0>b||0>c||0>q)throw a.g.N();if(0!=c){this.size<(c<<1)+b&&this.resize((c<<1)+b);e||(b+=c-1<<1);e=e?2:-2;for(c+=q;q<c;q++)this.f[b]=d[q].x,this.f[b+1]=d[q].y,b+=e}};c.prototype.Hp=function(b,c,d,q,e){if(0>b||0>c||0>q||this.size<c+b)throw a.g.N();if(e)for(e=0;e<c;e++)d[q+e]=this.f[b+e];else for(q=q+c-1;b<c;b++)d[q]=this.f[b],q--};c.prototype.clear=function(a){a?
this.resize(0):this.cf(0)};c.prototype.xd=function(a,b,d){10>b-a?c.$i(this.f,a,b,d):c.$g(this.f,a,b-1,d)};c.prototype.Qh=function(){return 2};c.prototype.tc=function(){return this.f[this.size-1]};c.prototype.af=function(){this.resize(this.size-1)};c.prototype.JF=function(a){this.f[this.size-1]=a};c.prototype.QE=function(a){a<this.size-1&&(this.f[a]=this.f[this.size-1]);this.resize(this.size-1)};c.prototype.Qs=function(a){for(var b=0,c=this.size;b<c;b++)if(this.f[b]==a)return b;return-1};c.prototype.Nw=
function(a){return 0<=this.Qs(a)};c.$i=function(a,b,c,d){for(var q=b;q<c;q++){for(var e=a[q],f=q-1;f>=b&&0<d(a[f],e);)a[f+1]=a[f],f--;a[f+1]=e}};c.Wf=function(a,b,c){var d=a[c];a[c]=a[b];a[b]=d};c.$g=function(a,b,d,e){if(!(b>=d))for(;;){if(9>d-b){c.$i(a,b,d+1,e);break}var f=a[b];c.Wf(a,b,d);for(var h=b,g=b;g<d;g++)0>=e(a[g],f)&&(c.Wf(a,h,g),h+=1);c.Wf(a,h,d);h-b<d-h?(c.$g(a,b,h-1,e),b=h+1):(c.$g(a,h+1,d,e),d=h-1)}};return c}();a.Xu=c})(z||(z={}));!0===z.ah.Sk&&(z.ga=z.Xu);(function(a){function b(a,
k,c,d){c=new Int8Array(a.subarray(c,d));a.set(c,k)}var c=function(){function b(k){this.Sa=this.Xf=!1;this.f=[];var c=k;2>c&&(c=2);this.f=a.I.Lh(c,b.ob);this.size=k}b.Yc=function(a,c){b.ob=c;var d=new b(a);b.ob=0;return d};b.lj=function(a){var c=new b(0);c.f=a.f.slice(0);c.size=a.size;return c};b.V=function(a,c){var d=new b(0);d.size=a.size;d.size>c&&(d.size=c);d.f=a.f.slice(0,d.size);return d};b.prototype.xb=function(){};b.prototype.read=function(a){return this.f[a]};b.prototype.ec=function(a,b){b.x=
this.f[a];b.y=this.f[a+1]};b.prototype.get=function(a){return this.f[a]};b.prototype.write=function(b,c){if(this.Sa)throw a.g.xa();this.f[b]=c};b.prototype.set=function(b,c){if(this.Sa)throw a.g.xa();this.f[b]=c};b.prototype.Rn=function(b,c){if(this.Sa)throw a.g.xa();this.f[b]=c.x;this.f[b+1]=c.y};b.prototype.add=function(a){this.resize(this.size+1);this.f[this.size-1]=a};b.prototype.Ip=function(a){return b.V(this,a)};b.prototype.Bh=function(a){return this.read(a)};b.prototype.resize=function(b,c){void 0===
c&&(c=0);if(this.Xf)throw a.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(a.I.truncate(5*b/4)<this.f.length){var d=this.f.slice(0,b);this.f=d}}else if(b>this.f.length){a.I.truncate(64>b?Math.max(2*b,4):5*b/4);for(var d=this.f.slice(0),q=this.f.length;q<b;q++)d[q]=c;this.f=d}this.size=b};b.prototype.cf=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw a.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");this.size=
b};b.prototype.Uk=function(a,b){this.write(a,b)};b.prototype.jj=function(b,c,d){for(var q=this.size;c<q&&c<d;c++)b=a.I.kg(this.read(c),b);return b};b.prototype.lc=function(a,c,d){if(null==a||!(a instanceof b))return!1;var e=this.size,f=a.size;if(d>e||d>f&&e!=f)return!1;for(d>e&&(d=e);c<d;c++)if(this.read(c)!=a.read(c))return!1;return!0};b.prototype.nk=function(b,c,d,q,e,f,h){if(this.Sa)throw a.g.xa();if(!e&&(1>f||0!=q%f))throw a.g.N();for(var g=0;g<h-b;g++)this.f[b+q+g]=this.f[b+g];this.f==c.f&&b<
d&&(d+=q);if(e)for(g=0;g<q;g++)this.f[g+b]=c.f[d+g];else{e=q;for(h=0;h<q;h+=f){e-=f;for(g=0;g<f;g++)this.f[b+h+g]=c.f[d+e+g]}}};b.prototype.ul=function(b,c,d,q){if(this.Sa)throw a.g.xa();q-=b;for(var e=this.f.slice(b,b+q),f=0;f<q;f++)this.f[b+d+f]=e[f];for(q=0;q<d;q++)this.f[b+q]=c};b.prototype.lg=function(b,c,d){if(this.Sa)throw a.g.xa();for(var q=this.f.slice(b,b+(d-b)),e=0;e<d-b;e++)this.f[e+b+2]=q[e];this.f[b]=c.x;this.f[b+1]=c.y};b.prototype.km=function(b,c,d,q,e,f){if(0>b||0>c||0>q)throw a.g.N();
if(!e&&(0>=f||0!=c%f))throw a.g.N();if(d.size<q+c)throw a.g.N();if(0!=c)if(this.size<c+b&&this.resize(c+b),d==this)this.xi(b,c,q,e,f);else if(e)for(e=0;e<c;e++)this.f[b]=d.f[q],b++,q++;else if(q=q+c-f,1==f)for(e=0;e<c;e++)this.f[b]=d.f[q],b++,q--;else{e=0;for(c=a.I.truncate(c/f);e<c;e++){for(var h=0;h<f;h++)this.f[b+h]=d.f[q+h];b+=f;q-=f}}};b.prototype.oj=function(b,c,d){if(this.Sa)throw a.g.xa();if(b+c>this.size)throw a.g.xa();if(0<d-(b+c)){d-=b+c;for(var q=this.f.slice(b+c,b+d+c),e=0;e<d;e++)this.f[b+
e]=q[e]}this.size-=c};b.prototype.Jp=function(b,c,d){if(this.Sa)throw a.g.xa();if(1>d||0!=c%d)throw a.g.xa();for(var q=c>>1,e=0;e<q;e+=d){c-=d;for(var f=0;f<d;f++){var h=this.f[b+e+f];this.f[b+e+f]=this.f[b+c+f];this.f[b+c+f]=h}}};b.prototype.dh=function(b,c,d){if(0>c||0>d||0>c||d+c>this.size)throw a.g.N();for(var q=c;q<c+d;q++)this.f[q]=b};b.prototype.xi=function(b,c,d,q,e){if(!q||b!=d){for(var f=0;f<c;f++)this.f[b+f]=this.f[d+f];if(!q){d=b;b=b+c-e;q=0;for(c=a.I.truncate(c/2);q<c;q++){for(f=0;f<
e;f++){var h=this.f[d+f];this.f[d+f]=this.f[b+f];this.f[b+f]=h}d+=e;b-=e}}}};b.prototype.$p=function(b,c,d,q,e){if(0>b||0>c||0>q)throw a.g.N();if(0!=c){this.size<(c<<1)+b&&this.resize((c<<1)+b);e||(b+=c-1<<1);e=e?2:-2;for(c+=q;q<c;q++)this.f[b]=d[q].x,this.f[b+1]=d[q].y,b+=e}};b.prototype.Hp=function(b,c,d,q,e){if(0>b||0>c||0>q||this.size<c+b)throw a.g.N();if(e)for(e=0;e<c;e++)d[q+e]=this.f[b+e];else for(q=q+c-1;b<c;b++)d[q]=this.f[b],q--};b.prototype.clear=function(a){a?this.resize(0):this.cf(0)};
b.prototype.xd=function(a,b,c){var d=this.f.slice(0,a),q=this.f.slice(b);a=this.f.slice(a,b).sort(c);this.f.length=0;this.f.push.apply(this.f,d.concat(a).concat(q))};b.prototype.Qh=function(){return 1};b.prototype.xy=function(b,c){if(this.Sa)throw a.g.ra("invalid call. Attribute Stream is read only.");this.f[b]|=c};b.prototype.BB=function(b,c){if(this.Sa)throw a.g.ra("invalid call. Attribute Stream is read only.");this.f[b]&=~c};b.ob=0;return b}();a.Wk=c;c=function(){function c(a){this.f=null;var b=
a;2>b&&(b=2);this.f=new Int8Array(b);this.size=a}c.Yc=function(a,b){var d=new c(a),e=a,f=d.f;2>e&&(e=2);if(0!==b)for(var h=0;h<e;h++)f[h]=b;return d};c.lj=function(a){var b=new c(0);b.f=new Int8Array(a.f);b.size=a.size;return b};c.V=function(a,b){var d=new c(0);d.size=a.size;d.size>b&&(d.size=b);var e=d.size;2>e&&(e=2);d.f=new Int8Array(e);d.f.set(a.f.length<=e?a.f:a.f.subarray(0,e),0);return d};c.prototype.xb=function(a){0>=a||(null==this.f?this.f=new Int8Array(a):a<=this.f.length||(0<this.f.length?
(a=new Int8Array(a),a.set(this.f),this.f=a):this.f=new Int8Array(a)))};c.prototype.read=function(a){return this.f[a]};c.prototype.ec=function(a,b){b.x=this.f[a];b.y=this.f[a+1]};c.prototype.get=function(a){return this.f[a]};c.prototype.write=function(b,c){if(this.Sa)throw a.g.xa();this.f[b]=c};c.prototype.set=function(b,c){if(this.Sa)throw a.g.xa();this.f[b]=c};c.prototype.Rn=function(b,c){if(this.Sa)throw a.g.xa();this.f[b]=c.x;this.f[b+1]=c.y};c.prototype.add=function(a){this.resize(this.size+1);
this.f[this.size-1]=a};c.prototype.Ip=function(a){return c.V(this,a)};c.prototype.Bh=function(a){return this.read(a)};c.prototype.resize=function(b,c){void 0===c&&(c=0);if(this.Xf)throw a.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");if(b<=this.size){if(30<this.f.length&&5*b/4<this.f.length){var d=new Int8Array(this.f,0,b);this.f=d}}else{b>this.f.length&&(d=a.I.truncate(64>b?Math.max(2*b,4):5*b/4),d=new Int8Array(d),d.set(this.f),this.f=d);for(var d=this.f,q=this.size;q<
b;q++)d[q]=c}this.size=b};c.prototype.cf=function(b){(null==this.f||b>this.f.length)&&this.resize(b);if(this.Xf)throw a.g.ra("invalid call. Attribute Stream is locked and cannot be resized.");this.size=b};c.prototype.Uk=function(a,b){this.write(a,b)};c.prototype.jj=function(b,c,d){for(var q=this.size;c<q&&c<d;c++)b=a.I.kg(this.read(c),b);return b};c.prototype.lc=function(a,b,d){if(null==a||!(a instanceof c))return!1;var e=this.size,f=a.size;if(d>e||d>f&&e!=f)return!1;for(d>e&&(d=e);b<d;b++)if(this.read(b)!=
a.read(b))return!1;return!0};c.prototype.nk=function(k,c,d,q,e,f,h){if(this.Sa)throw a.g.xa();if(!e&&(1>f||0!=q%f))throw a.g.N();b(this.f,k+q,k,k+(h-k));this.f==c.f&&k<d&&(d+=q);if(e)this.f.set(c.f.subarray(d,d+q),k);else{e=q;for(h=0;h<q;h+=f){e-=f;for(var g=0;g<f;g++)this.f[k+h+g]=c.f[d+e+g]}}};c.prototype.ul=function(k,c,d,q){if(this.Sa)throw a.g.xa();q-=k;b(this.f,k+q,k,k+q);for(q=0;q<d;q++)this.f[k+q]=c};c.prototype.lg=function(k,c,d){if(this.Sa)throw a.g.xa();b(this.f,k+2,k,k+(d-k));this.f[k]=
c.x;this.f[k+1]=c.y};c.prototype.km=function(b,c,d,q,e,f){if(0>b||0>c||0>q)throw a.g.N();if(!e&&(0>=f||0!=c%f))throw a.g.N();if(d.size<q+c)throw a.g.N();if(0!=c)if(this.size<c+b&&this.resize(c+b),d==this)this.xi(b,c,q,e,f);else if(e)for(e=0;e<c;e++)this.f[b]=d.f[q],b++,q++;else if(q=q+c-f,1==f)for(e=0;e<c;e++)this.f[b]=d.f[q],b++,q--;else{e=0;for(c=a.I.truncate(c/f);e<c;e++){for(var h=0;h<f;h++)this.f[b+h]=d.f[q+h];b+=f;q-=f}}};c.prototype.oj=function(k,c,d){if(this.Sa)throw a.g.xa();if(k+c>this.size)throw a.g.xa();
0<d-(k+c)&&b(this.f,k,k+c,k+(d-(k+c))+c);this.size-=c};c.prototype.Jp=function(b,c,d){if(this.Sa)throw a.g.xa();if(1>d||0!=c%d)throw a.g.xa();for(var q=c>>1,e=0;e<q;e+=d){c-=d;for(var f=0;f<d;f++){var h=this.f[b+e+f];this.f[b+e+f]=this.f[b+c+f];this.f[b+c+f]=h}}};c.prototype.dh=function(b,c,d){if(0>c||0>d||0>c||d+c>this.size)throw a.g.N();for(var q=c;q<c+d;q++)this.f[q]=b};c.prototype.xi=function(b,c,d,q,e){if(!q||b!=d)if(this.f.set(this.f.subarray(d,d+c),b),!q){d=b;b=b+c-e;q=0;for(c=a.I.truncate(c/
2);q<c;q++){for(var f=0;f<e;f++){var h=this.f[d+f];this.f[d+f]=this.f[b+f];this.f[b+f]=h}d+=e;b-=e}}};c.prototype.$p=function(b,c,d,q,e){if(0>b||0>c||0>q)throw a.g.N();if(0!=c){this.size<(c<<1)+b&&this.resize((c<<1)+b);e||(b+=c-1<<1);e=e?2:-2;for(c+=q;q<c;q++)this.f[b]=d[q].x,this.f[b+1]=d[q].y,b+=e}};c.prototype.Hp=function(b,c,d,q,e){if(0>b||0>c||0>q||this.size<c+b)throw a.g.N();if(e)for(e=0;e<c;e++)d[q+e]=this.f[b+e];else for(q=q+c-1;b<c;b++)d[q]=this.f[b],q--};c.prototype.clear=function(a){a?
this.resize(0):this.cf(0)};c.prototype.xd=function(a,b,c){b=this.f.subarray(a,b);Array.prototype.sort.call(b,c);this.f.set(b,a)};c.prototype.xy=function(b,c){if(this.Sa)throw a.g.ra("invalid call. Attribute Stream is read only.");this.f[b]|=c};c.prototype.BB=function(b,c){if(this.Sa)throw a.g.ra("invalid call. Attribute Stream is read only.");this.f[b]&=~c};c.prototype.Qh=function(){return 1};return c}();a.Yu=c})(z||(z={}));!0===z.ah.Sk&&(z.Wk=z.Yu);(function(a){var b=function(){function b(){}b.to=
function(b,k){return a.Wk.Yc(b,k)};b.kl=function(b,k){return a.qd.Yc(b,k)};b.Sv=function(b,k,c){switch(b){case 1:b=a.qd.Yc(k,c);break;case 2:b=a.ga.Yc(k,c);break;case 4:b=a.Wk.Yc(k,c);break;default:throw a.g.wa();}return b};b.Tv=function(c,k){return b.Sv(a.pa.Qh(c),k*a.pa.Wa(c),a.pa.ue(c))};b.Dg=function(b,k){return a.ga.Yc(b,k)};b.ay=function(a){var b,c=[];for(b=0;b<a;b++)c.push(null);return c};return b}();a.Ac=b})(z||(z={}));(function(a){var b=function(){function b(){}b.to=function(b,k){return a.Yu.Yc(b,
k)};b.kl=function(b,k){return a.qd.Yc(b,k)};b.Sv=function(b,k,c){switch(b){case 1:b=a.qd.Yc(k,c);break;case 2:b=a.Xu.Yc(k,c);break;case 4:b=a.Yu.Yc(k,c);break;default:throw a.g.wa();}return b};b.Tv=function(b,k){return a.Ac.Sv(a.pa.Qh(b),k*a.pa.Wa(b),a.pa.ue(b))};b.Dg=function(b,k){return a.Xu.Yc(b,k)};b.ay=function(a){var b,c=[];for(b=0;b<a;b++)c.push(null);return c};return b}();a.RG=b})(z||(z={}));!0===z.ah.Sk&&(z.Ac=z.RG);(function(a){a.ca=function(){return function(a){void 0===a&&(a=0);this.l=
a}}()})(z||(z={}));(function(a){var b=function(){function a(){}a.nb=function(b,c){return 0<=c?a.H(b):-a.H(b)};a.H=function(a){return 0>a?-a:a};a.Ih=function(a){return 3.552713678800501E-15>a};a.Xz=function(b,c,d){return a.H(b-c)<=d*(1+(a.H(b)+a.H(c))/2)};a.S=function(b,c){return a.Xz(b,c,3.552713678800501E-15)};a.wI=function(b){return 3.552713678800501E-15>=a.H(b)};a.Vc=function(b){return a.wI(b)};return a}();a.j=b;var c=function(){function c(){}c.Sn=function(a,c){var d=b.H(a),q=b.H(c),e=0;0!=d+q&&
(d>q?(e=q/d,e=d*Math.sqrt(1+e*e)):(e=d/q,e=q*Math.sqrt(1+e*e)));return e};c.Ep=function(a,d,e,f,h){for(var g=[0,0,0],E=[0,0,0],n=0;2>=n;n++)d[n]-=a[n],e[n]-=d[n];e=g[1]*E[2]-g[2]*E[1];d=g[2]*E[0]-g[0]*E[2];g=g[0]*E[1]-g[1]*E[0];a=-1*(e*a[0]+d*a[1]+g*a[2]);f[0]=e;f[1]=d;f[2]=g;f[3]=a;E=c.jm(f);f[0]/=E;f[1]/=E;f[2]/=E;f[3]/=E;0!=h&&(E=b.Vc(g)?b.Vc(a)?b.nb(1,d):-b.nb(1,a):b.nb(1,g),E*=b.nb(1,h),f[0]*=E,f[1]*=E,f[2]*=E,f[3]*=E)};c.Uu=function(a,b,c){c[0]=a[1]*b[2]-b[1]*a[2];c[1]=a[2]*b[0]-b[2]*a[0];c[2]=
a[0]*b[1]-b[0]*a[1]};c.Qr=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};c.jm=function(a){return c.Sn(c.Sn(a[0],a[1]),a[2])};c.wm=function(a,b,d,e,f,h){var g=c.n(1,a,b),E=Math.cos(b);e.l=(g+0)*E*Math.cos(d);f.l=(g+0)*E*Math.sin(d);h.l=(g*(1-a)+0)*Math.sin(b)};c.JK=function(a,d,e,f,h,g,E){var n=c.Sn(d,e),p=1*Math.sqrt(1-a),m=p/1;if(b.S(n,0))g.l=0,h.l=b.nb(1.570796326794897,f),E.l=b.H(f)-p;else{g.l=Math.atan2(e,d);e=Math.atan2(1*f,p*n);g=Math.cos(e);var s=Math.sin(e);d=p*a/(1-a);a*=1;e=Math.atan2(f+
d*s*s*s,n-a*g*g*g);3.141592653589793<b.H(e)&&(e=b.nb(3.141592653589793,e)-e);e=Math.atan(m*Math.tan(e));s=Math.sin(e);g=Math.cos(e);h.l=Math.atan2(f+d*s*s*s,n-a*g*g*g);1.570796326794897<b.H(h.l)&&(h.l=b.nb(3.141592653589793,h.l)-h.l);e=Math.atan(m*Math.tan(h.l));s=Math.sin(e);g=Math.cos(e);E.l=(f-p*s)*Math.sin(h.l)+(n-1*g)*Math.cos(h.l)}};c.n=function(a,b,c){c=Math.sin(c);return a/Math.sqrt(1-b*c*c)};c.sr=function(a,b){return Math.atan2(Math.sin(b)*(1-a),Math.cos(b))};c.Si=function(a,b){return Math.atan2(Math.sin(b),
Math.cos(b)*(1-a))};c.xn=function(a,d){if(b.Ih(a)||0==d||b.S(b.H(d),1.570796326794897))return d;var e,f,h,g,E,n,p,m,s;if(0.006884661117170036>a){g=Math.sqrt(1-a);E=(1-g)/(1+g);n=E*E;p=E*n;m=E*p;e=E*m;s=E*e;f=E*s;h=1.572916666666667*p-3.2578125*e+4.295068359375*f;g=2.142578125*m-6.071484375*s;var t=3.129296875*e-11.249837239583334*f,u=4.775276692708333*s,N=7.958636765252976*f,v=Math.cos(2*d);return d+Math.sin(2*d)*(1.5*E-0.84375*p+0.525390625*e-0.2688395182291667*f-h+t-N+v*(2*(1.3125*n-1.71875*m+1.650146484375*
s)-4*g+6*u+v*(4*h-12*t+24*N+v*(8*g-32*u+v*(16*t-80*N+v*(32*u+64*v*N))))))}g=1-a;E=a/2;n=b.H(d);p=n*c.Yr(a)/(1.570796326794897*g);m=9999;s=n;for(n=0;1E-16<m&&50>n;n++)f=c.Tk(a,s),e=(c.Lz(s,a)-E*Math.sin(2*s)/f)/g-p,f=1/(f*f*f),h=e/f,e=s-h,m=b.H(h),s=e;return 0<=d?s:-s};c.nR=function(a,d){return b.Ih(d)?a:a*c.Yr(d)/1.570796326794897};c.W=function(a){a=c.Hz(a,6.283185307179586);return 0>a?a+6.283185307179586:3.141592653589793>b.H(a)||b.S(b.H(a),3.141592653589793)?a:a-6.283185307179586};c.Hz=function(a,
b){return a-Math.floor(a/b)*b};c.gg=function(a,b){if(0.006884661117170036>b){var d=Math.sqrt(1-b),d=(1-d)/(1+d),e=d*d,f=e*e;return 1.570796326794897*a/(1+d)*(1+0.25*e+0.015625*f+0.00390625*e*f)}return a*c.Yr(b)};c.Dp=function(a,d){var e=b.nb(1,Math.sin(d)),f=b.H(c.Hz(d,3.141592653589793));d=1.570796326794897>=f?f:3.141592653589793-f;var h;b.S(d,1.570796326794897)?h=d:h=Math.atan(Math.sqrt(1-a)*Math.tan(d));return h*e};c.q=function(a,b,d){if(0.006884661117170036>b){b=Math.sqrt(1-b);b=(1-b)/(1+b);var e=
b*b,f=b*e,h=b*f,g=b*h,E=b*g,n=b*E,p=-0.7291666666666666*f+0.2278645833333333*g+0.03987630208333334*n,m=0.615234375*h-0.21533203125*E,s=-0.54140625*g+0.20302734375*n,t=0.48876953125*E,u=-0.4488699776785715*n,N=Math.cos(2*d);return a/(1+b)*((1+0.25*e+0.015625*h+0.00390625*E)*d+Math.sin(2*d)*(-1.5*b+0.1875*f+0.0234375*g+0.00732421875*n-p+s-u+N*(2*(0.9375*e-0.234375*h-0.03662109375*E)-4*m+6*t+N*(4*p-12*s+24*u+N*(8*m-32*t+N*(16*s-80*u+N*(32*t+64*N*u)))))))}return a*(c.Lz(d,b)-0.5*b*Math.sin(2*d)/c.Tk(b,
d))};c.Tk=function(a,b){var c=Math.sin(b);return Math.sqrt(1-a*c*c)};c.Yr=function(a){return b.Xz(a,1,2.220446049250313E-16)?1:1>a?c.js(0,1-a)-a/3*c.hs(0,1-a):NaN};c.Lz=function(k,d){var e=b.nb(1,k);k=b.H(k);var f=Math.floor(k/1.570796326794897),h;if(1<d)h=0==k?0:NaN;else if(b.Vc(f))h=c.sin(k),h=h*c.js(1-h*h,1-d*h*h)-d/3*h*h*h*c.hs(1-h*h,1-d*h*h);else{h=a.I.truncate(f%2);var g=c.Yr(d);0<h?(h=Math.sin(1.570796326794897*(f+1)-k),h=h*c.js(1-h*h,1-d*h*h)-d/3*h*h*h*c.hs(1-h*h,1-d*h*h),h=g*(f+1)-h):(h=
Math.sin(k-1.570796326794897*f),h=h*c.js(1-h*h,1-d*h*h)-d/3*h*h*h*c.hs(1-h*h,1-d*h*h),h=g*f+h)}return h*e};c.sin=function(a){a=c.W(a);var d=b.nb(1,a);a=b.H(a);return b.S(a,3.141592653589793)?0:b.S(a,1.570796326794897)?1*d:Math.sin(a)*d};c.hs=function(a,c){for(var d=a,q=c,e=1,f=0,h=1,g,E,n,p;;){g=0.2*(d+q+3*e);E=(g-d)/g;n=(g-q)/g;p=(g-e)/g;if(1E-4>b.H(E)&&1E-4>b.H(n)&&1E-4>b.H(p))break;p=Math.sqrt(q);g=Math.sqrt(e);p=Math.sqrt(d)*(p+g)+p*g;f+=h/(g*(e+p));h*=0.25;d=0.25*(d+p);q=0.25*(q+p);e=0.25*(e+
p)}d=E*n;e=p*p;q=d-e;e=d-6*e;E=e+q+q;return 3*f+h*(1+e*(-0.2142857142857143+0.10227272727272728*e-0.1730769230769231*p*E)+p*(0.1666666666666667*E+p*(-0.4090909090909091*q+0.1153846153846154*p*d)))/(g*Math.sqrt(g))};c.js=function(a,c){for(var d=a,q=c,e,f,h,g,E=1;;E=0.25*(E+e)){e=(d+q+E)/3;f=2-(e+d)/e;h=2-(e+q)/e;g=2-(e+E)/e;if(1E-4>b.H(f)&&1E-4>b.H(h)&&1E-4>b.H(g))break;e=Math.sqrt(q);f=Math.sqrt(E);e=Math.sqrt(d)*(e+f)+e*f;d=0.25*(d+e);q=0.25*(q+e)}d=f*h-g*g;q=f*h*g;return(1+(0.04166666666666666*
d-0.1-0.06818181818181818*q)*d+0.07142857142857142*q)/Math.sqrt(e)};c.qu=function(a,c){if(b.Ih(a)||0==c||b.S(b.H(c),1.570796326794897))return c;var d,q,e;if(0.006884661117170036>a){d=a*a;q=a*d;e=a*q;var f=a*e,h=a*f,g=a*h,E=-(0.02708333333333333*q+0.03430059523809524*e+0.03149181547619048*f+0.02634359154541446*h+0.02156896735835538*g),n=0.007669890873015873*e+0.01299603174603175*f+0.0148051353064374*h+0.01454454953803912*g,p=-(0.002275545634920635*f+0.004830845032667949*h+0.006558395368616723*g),m=
6.957236677288761E-4*h+0.001775193002406544*g,s=-(2.17324089394402E-4*g),t=Math.cos(2*c);return c+Math.sin(2*c)*(-(0.5*a+0.2083333333333333*d+0.09375*q+0.04878472222222222*e+0.02916666666666667*f+0.01938905423280423*h+0.01388255931712963*g)-E+p-s+t*(2*(0.1041666666666667*d+0.0875*q+0.06050347222222222*e+0.04151785714285714*f+0.02958958540013228*h+0.02203667534722222*g)-4*n+6*m+t*(4*E-12*p+24*s+t*(8*n-32*m+t*(16*p-80*s+t*(32*m+64*t*s))))))}0==c||b.S(b.H(c),1.570796326794897)?d=c:(q=Math.sqrt(a),e=
q*Math.sin(c),d=Math.tan(0.7853981633974483+c/2)*Math.pow((1-e)/(1+e),q/2),d=2*Math.atan(d)-1.570796326794897);return d};c.$K=function(a,c){if(b.Ih(a)||0==c||b.S(b.H(c),1.570796326794897))return c;var d,q;if(0.006884661117170036>a){t=a*a;p=a*t;m=a*p;d=a*m;s=a*d;q=a*s;var e=0.05833333333333333*p+0.07232142857142858*m+0.05634300595238095*d+0.0355325796406526*s+0.020235546186067*q,f=0.02653149801587302*m+0.04379960317460317*d+0.0429211791776896*s+0.03255384637546096*q,h=0.01294022817460318*d+0.02668104344536636*
s+0.03155651254609588*q,g=0.00659454790965208*s+0.0163075268674227*q,E=0.003463473736911237*q,n=Math.cos(2*c);return c+Math.sin(2*c)*(0.5*a+0.2083333333333333*t+0.08333333333333333*p+0.03611111111111111*m+0.01875*d+0.01195601851851852*s+0.008863673941798942*q-e+h-E+n*(2*(0.1458333333333333*t+0.1208333333333333*p+0.07039930555555556*m+0.03616071428571429*d+0.01839451058201058*s+0.01017113095238095*q)-4*f+6*g+n*(4*e-12*h+24*E+n*(8*f-32*g+n*(16*h-80*E+n*(32*g+64*n*E))))))}for(var p=Math.sqrt(a),m=p/
2,s=Math.tan(0.7853981633974483+c/2),e=0,f=1,t=c;0!=f;t=q)if(d=p*Math.sin(t),q=s*Math.pow((1+d)/(1-d),m),q=2*Math.atan(q)-1.570796326794897,e++,b.S(q,t)||3E4<e)f=0;return t};return c}();a.u=c})(z||(z={}));(function(a){var b=function(){function b(){}b.Fb=function(b,k,c,d,e,f,h,g){if(null!=f||null!=h||null!=g){d=a.u.W(d);k=a.u.W(k);c=a.u.W(c);e=a.u.W(e);1.570796326794897<a.j.H(c)&&(c=a.j.nb(3.141592653589793,c)-c,k=a.u.W(k+3.141592653589793));1.570796326794897<a.j.H(e)&&(e=a.j.nb(3.141592653589793,
e)-e,d=a.u.W(d+3.141592653589793));var n=a.u.W(d-k);if(a.j.S(c,e)&&(a.j.S(k,d)||a.j.S(a.j.H(c),1.570796326794897)))null!=f&&(f.l=0),null!=h&&(h.l=0),null!=g&&(g.l=0);else{if(a.j.S(c,-e)){if(a.j.S(a.j.H(c),1.570796326794897)){null!=f&&(f.l=3.141592653589793*b);null!=h&&(h.l=0<c?a.u.W(3.141592653589793-a.u.W(d)):a.u.W(d));null!=g&&(g.l=0<c?a.u.W(d):a.u.W(3.141592653589793-a.u.W(d)));return}if(a.j.S(a.j.H(n),3.141592653589793)){null!=f&&(f.l=3.141592653589793*b);null!=h&&(h.l=0);null!=g&&(g.l=0);return}}var p=
1.570796326794897==a.j.H(c)?0:Math.cos(c),m=Math.sin(c),s=1.570796326794897==a.j.H(e)?0:Math.cos(e),t=Math.sin(e),u=1.570796326794897==a.j.H(n)?0:Math.cos(n),N=3.141592653589793==a.j.H(n)?0:Math.sin(n);if(null!=f){var v=Math.sin((e-c)/2),n=Math.sin(n/2);f.l=2*Math.asin(Math.sqrt(v*v+p*s*n*n))*b}null!=h&&(a.j.S(a.j.H(c),1.570796326794897)?h.l=0>c?d:a.u.W(3.141592653589793-d):h.l=Math.atan2(s*N,p*t-m*s*u));null!=g&&(a.j.S(a.j.H(e),1.570796326794897)?g.l=0>e?k:a.u.W(3.141592653589793-k):(g.l=Math.atan2(p*
N,t*p*u-s*m),g.l=a.u.W(g.l+3.141592653589793)))}}};b.gf=function(b,k,c,d,e,f,h){if(null!=f||null!=h){k=a.u.W(k);c=a.u.W(c);1.570796326794897<a.j.H(c)&&(c=a.j.nb(3.141592653589793,c)-c,k=a.u.W(k+3.141592653589793));a.j.S(a.j.H(c),1.570796326794897)&&(k=0);e=a.u.W(e);var g=a.j.S(a.j.H(e),1.570796326794897)?0:Math.cos(e),n=a.j.S(a.j.H(e),3.141592653589793)?0:Math.sin(e),p=a.j.S(a.j.H(c),1.570796326794897)?0:Math.cos(c),m=Math.sin(c);b=d/b;d=a.j.S(a.j.H(b),1.570796326794897)?0:Math.cos(b);var s=a.j.S(a.j.H(b),
3.141592653589793)?0:Math.sin(b),t=Math.asin(m*d+p*s*g);null!=h&&(h.l=t);null!=f&&(f.l=a.j.S(a.j.H(t),1.570796326794897)?a.j.S(c,-t)?0>t?e:a.u.W(3.141592653589793-e):k:a.j.S(a.j.H(c),1.570796326794897)&&a.j.S(b,3.141592653589793)?0>c?e:a.u.W(3.141592653589793-e):a.u.W(k+Math.atan2(s*n,p*d-m*s*g)))}};return b}();a.zg=b})(z||(z={}));(function(a){var b=function(){function b(){}b.Fb=function(b,k,c,d,e,f,h,g,n){var p=new a.ca(0),m=new a.ca(0),s=[0,0,0],t=[0,0,0],u=[0,0,0],N=new a.ca(0),v=new a.ca(0),w=
new a.ca(0),x=new a.ca(0),A=new a.ca(0);if(null!=h||null!=g||null!=n)if(a.j.Ih(k))a.zg.Fb(b,c,d,e,f,h,g,n);else{e=a.u.W(e);c=a.u.W(c);var G=a.u.W(e-c);if(a.j.S(d,f)&&(a.j.S(c,e)||a.j.S(a.j.H(d),1.570796326794897)))null!=h&&(h.l=0),null!=g&&(g.l=0),null!=n&&(n.l=0);else{if(a.j.S(d,-f)){if(a.j.S(a.j.H(d),1.570796326794897)){null!=h&&(h.l=2*a.u.gg(b,k));null!=g&&(g.l=0<d?a.u.W(3.141592653589793-a.u.W(e)):a.u.W(e));null!=n&&(n.l=0<d?a.u.W(e):a.u.W(3.141592653589793-a.u.W(e)));return}a.j.S(a.j.H(G),3.141592653589793)&&
(null!=h&&(h.l=2*a.u.gg(b,k)),null!=g&&(g.l=0),null!=n&&(n.l=0))}else if(a.j.S(a.j.H(d),1.570796326794897)||a.j.S(a.j.H(f),1.570796326794897))a.j.S(a.j.H(d),1.570796326794897)?c=e:e=c;var B=0,z;0>G&&(B=1,z=c,c=e,e=z,z=d,d=f,f=z);var G=a.u.sr(k,d),C=a.u.sr(k,f);if(null!=g||null!=n)a.zg.Fb(b,c,G,e,C,null,p,m),p=Math.atan2(Math.sin(p.l)*Math.cos(d-G),Math.cos(p.l)),m=Math.atan2(Math.sin(m.l)*Math.cos(f-C),Math.cos(m.l)),0!=B&&(z=p,p=m,m=z),null!=g&&(g.l=p),null!=n&&(n.l=m);null!=h&&(a.u.wm(k,d,c,w,x,
A),s[0]=w.l,s[1]=x.l,s[2]=A.l,a.u.wm(k,f,e,w,x,A),t[0]=w.l,t[1]=x.l,t[2]=A.l,u[0]=s[1]*t[2]-t[1]*s[2],u[1]=-(s[0]*t[2]-t[0]*s[2]),u[2]=s[0]*t[1]-t[0]*s[1],k=1-a.u.Tk(k,a.u.Dp(k,a.u.Si(k,Math.acos(u[2]/Math.sqrt(u[0]*u[0]+u[1]*u[1]+u[2]*u[2]))))),k*=2-k,g=Math.atan2(-u[1],-u[0]),u=a.u.W(g-1.570796326794897),g=a.u.W(g+1.570796326794897),u=a.j.H(a.u.W(c-u))<=a.j.H(a.u.W(c-g))?u:g,a.zg.Fb(1,u,0,c,G,N,null,null),a.zg.Fb(1,u,0,e,C,v,null,null),3.141592653589793<N.l+v.l&&(u=a.u.W(u+3.141592653589793),a.zg.Fb(1,
u,0,c,G,N,null,null),a.zg.Fb(1,u,0,e,C,v,null,null)),N.l*=a.j.nb(1,d),v.l*=a.j.nb(1,f),N.l=a.u.Si(k,N.l),v.l=a.u.Si(k,v.l),c=a.u.q(b,k,N.l),b=a.u.q(b,k,v.l),h.l=a.j.H(b-c))}}};b.gf=function(b,k,c,d,e,f,h,g){var n=0,p=new a.ca(0),m=new a.ca(0),s=[0,0,0],t=[0,0,0],u=new a.ca(0),N=new a.ca(0),v=new a.ca(0);if(null!=h||null!=g)if(a.j.Ih(k))a.zg.gf(b,c,d,e,f,h,g);else if(a.j.Vc(e))null!=h&&(h.l=c),null!=g&&(g.l=d);else{f=a.u.W(f);0>e&&(e=a.j.H(e),f=a.u.W(f+3.141592653589793));c=a.u.W(c);d=a.u.W(d);1.570796326794897<
a.j.H(d)&&(c=a.u.W(c+3.141592653589793),d=a.j.nb(3.141592653589793,d)-d);a.j.S(a.j.H(d),1.570796326794897)&&(c=0);var w;if(a.j.Vc(d))w=a.j.H(1.570796326794897-a.j.H(f)),w=a.u.Si(k,w),w=1-a.u.Tk(k,a.u.Dp(k,w)),w*=2-w,b=1.570796326794897*(e/a.u.gg(b,w)),b=a.u.xn(w,b),b=a.u.sr(w,b),a.zg.gf(1,c,d,b,f,h,p),null!=g&&(n=p.l),null!=g&&(g.l=a.u.Si(k,n));else if(a.j.S(a.j.H(d),1.570796326794897))n=a.u.gg(b,k),p=2*n,b=a.j.nb(1.570796326794897,d),f=0<b?a.u.W(3.141592653589793-f):f,d=n-e,a.j.H(d)<=n?null!=h&&
(h.l=f):(d=Math.floor(e/p),0==a.I.truncate(d%2)?(null!=h&&(h.l=f),d=n-(e-d*p)):(null!=h&&(h.l=a.u.W(f+3.141592653589793)),d=n-((d+1)*p-e))),null!=g&&(g.l=a.u.xn(k,d/n*b));else{w=a.u.sr(k,d);f=Math.atan2(Math.sin(f),Math.cos(f)*Math.cos(d-w));var x=a.I.truncate(a.j.nb(1,w))*(1.570796326794897>=a.j.H(f)?1:-1);f=a.u.W(c+Math.atan(Math.tan(f)*-Math.sin(w)));a.zg.Fb(b,f,0,c,w,null,m,null);w=a.j.H(1.570796326794897-a.j.H(m.l));w=a.u.Si(k,w);w=1-a.u.Tk(k,a.u.Dp(k,w));w*=2-w;a.u.wm(k,0,f,u,N,v);s[0]=u.l;
s[1]=N.l;s[2]=v.l;a.u.wm(k,d,c,u,N,v);t[0]=u.l;t[1]=N.l;t[2]=v.l;d=Math.acos((s[0]*t[0]+s[1]*t[1]+s[2]*t[2])/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]));d=a.u.Si(w,d);d=a.u.q(b,w,d)+e*x;e=0<d?m.l:a.u.W(m.l+3.141592653589793);b=1.570796326794897*(a.j.H(d)/a.u.gg(b,w));b=a.u.xn(w,b);b=a.u.sr(w,b);a.zg.gf(1,f,0,b,e,h,p);null!=g&&(n=p.l);null!=g&&(g.l=a.u.Si(k,n))}}};return b}();a.Xj=b})(z||(z={}));(function(a){var b=function(){function b(){}b.Fb=function(b,k,c,d,e,f,h,g,n){var p=0,m=0,s=0;if(null!=h||
null!=g||null!=n)if(a.j.Ih(k))a.zg.Fb(b,c,d,e,f,h,g,n);else{var t=a.u.W(e-c);if(a.j.S(d,f)&&(a.j.Vc(t)||a.j.S(a.j.H(d),1.570796326794897)))null!=h&&(h.l=0),null!=g&&(g.l=0),null!=n&&(n.l=0);else{if(a.j.S(d,-f)){if(a.j.S(a.j.H(d),1.570796326794897)){null!=h&&(h.l=2*a.u.gg(b,k));null!=g&&(g.l=0<d?a.u.W(3.141592653589793-a.u.W(e)):a.u.W(e));null!=n&&(n.l=0<d?a.u.W(e):a.u.W(3.141592653589793-a.u.W(e)));return}a.j.S(a.j.H(t),3.141592653589793)&&(null!=h&&(h.l=2*a.u.gg(b,k)),null!=g&&(g.l=0),null!=n&&(n.l=
0))}else{if(a.j.S(a.j.H(d),1.570796326794897)||a.j.S(a.j.H(f),1.570796326794897)){a.Xj.Fb(b,k,c,d,e,f,h,g,n);return}if(a.j.Vc(t)||a.j.S(a.j.H(t),3.141592653589793)){a.Xj.Fb(b,k,c,d,e,f,h,g,n);return}}var u=1-Math.sqrt(1-k),N=k/(1-k),v=b*(1-u);b=a.u.Dp(k,d);var w=a.u.Dp(k,f);k=1.570796326794897==a.j.H(b)?0:Math.cos(b);var x=Math.sin(b),A=1.570796326794897==a.j.H(w)?0:Math.cos(w),G=Math.sin(w),B=t,z=Math.cos(B),C=Math.sin(B),L=1,K=0,M,O,I,F,J;do{M=B;O=Math.sqrt(Math.pow(A*C,2)+Math.pow(k*G-x*A*z,2));
I=x*G+k*A*z;F=Math.atan2(O,I);if(0==O){L=0;break}J=k*A*C/O;p=Math.cos(Math.asin(J));p*=p;m=I-2*x*G/p;1<a.j.H(m)&&(m=a.j.nb(1,m));s=m*m;B=u/16*p*(4+u*(4-3*p));B=t+(1-B)*u*J*(F+B*O*(m+B*I*(2*s-1)));z=Math.cos(B);C=Math.sin(B);K++;if(3.141592653589793<a.j.H(B)&&30<K){L=0;break}}while(5E3>=K&&!a.j.S(M,B));if(0!=L)N*=p,u=N*(256+N*(-128+N*(74-47*N)))/1024,null!=h&&(h.l=v*(1+N*(4096+N*(-768+N*(320-175*N)))/16384)*(F-u*O*(m+u/4*(I*(2*s-1)-u/6*m*(4*O*O-3)*(4*s-3))))),null!=g&&(a.j.S(a.j.H(d),1.570796326794897)?
g.l=0>d?e:a.u.W(3.141592653589793-e):g.l=Math.atan2(A*C,k*G-x*A*z)),null!=n&&(a.j.S(a.j.H(f),1.570796326794897)?n.l=0>f?c:a.u.W(3.141592653589793-c):(n.l=Math.atan2(k*C,k*G*z-x*A),n.l=a.u.W(n.l+3.141592653589793)));else{B=a.j.nb(3.141592653589793,t);I=x*G-k*A;F=Math.acos(I);O=Math.sin(F);p=1;K=J=0;do s=J,p*=p,z=p*p,J=u*p*(1+u+u*u),m=u*u*z*(1+2.25*u),L=u*u*u*z*p,z=1-0.25*J+0.1875*m-0.1953125*L,J=0.25*J-0.25*m+0.29296875*L,C=0.03125*m-0.05859375*L,L*=0.00651041666666667,m=I-2*x*G/p,1<a.j.H(m)&&(m=a.j.nb(1,
m)),p=Math.acos(m),I=Math.cos(2*p),M=Math.cos(3*p),J=a.j.S(d,-f)?a.u.W(3.141592653589793-t)/(3.141592653589793*u*z):a.u.W(B-t)/(u*(z*F+J*O*m+C*Math.sin(2*F)*I+L*Math.sin(3*F)*M)),C=J*O/(k*A),B=1.570796326794897<a.j.H(t)?a.j.nb(3.141592653589793,C)-Math.asin(C):Math.asin(C),z=Math.cos(B),O=Math.sqrt(Math.pow(A*C,2)+Math.pow(k*G-x*A*z,2)),F=3.141592653589793-Math.asin(a.j.H(O)),I=Math.cos(F),p=Math.cos(Math.asin(J)),K++;while(70>=K&&!a.j.S(s,J));null!=h&&(p*=p,N*=p,z=1+N*(4096+N*(-768+N*(320-175*N)))/
16384,a.j.S(d,-f)?h.l=3.141592653589793*v*z:(m=I-2*x*G/p,p=Math.acos(m),I=Math.cos(2*p),M=Math.cos(3*p),h.l=v*(z*F+N*(-512+N*(128+N*(-60+35*N)))/2048*O*m+N*(-4+5*N)/6144*N*N*Math.sin(2*F)*I+L*Math.sin(3*F)*M+-7.62939453125E-5*N*N*N*N*Math.sin(4*F)*Math.cos(4*p))));null!=g&&(a.j.Vc(d)&&a.j.Vc(f)?(p=Math.sqrt(1-J*J),g.l=Math.acos(p),0>t&&(g.l*=-1)):a.j.S(a.j.H(d),1.570796326794897)?g.l=0>d?e:a.u.W(3.141592653589793-e):(h=J/k,v=Math.sqrt(1-h*h),0>k*G-x*A*Math.cos(B)&&(v*=-1),g.l=Math.atan2(h,v),a.j.S(d,
-f)&&a.j.H(a.u.W(c-e))>3.141592653589793*(1-u*Math.cos(d))&&(0<d&&1.570796326794897>a.j.H(g.l)||0>d&&1.570796326794897<a.j.H(g.l))&&(g.l=a.j.nb(3.141592653589793,g.l)-g.l)));if(null!=n)if(a.j.Vc(d)&&a.j.Vc(f))p=Math.sqrt(1-J*J),n.l=Math.acos(p),0<=t&&(n.l*=-1);else if(a.j.S(a.j.H(f),1.570796326794897))n.l=0>f?c:a.u.W(3.141592653589793-c);else if(t=J/A,h=Math.sqrt(1-t*t),v=Math.sin(B/2),0>Math.sin(w-b)-2*k*G*v*v&&(h*=-1),n.l=Math.atan2(t,h),n.l=a.u.W(n.l+3.141592653589793),a.j.S(d,-f)&&!a.j.Vc(d)&&
!a.j.S(a.j.H(d),1.570796326794897)&&a.j.H(a.u.W(c-e))>3.141592653589793*(1-u*Math.cos(d))&&(null!=g?v=g.l:(h=J/k,v=Math.sqrt(1-h*h),0>k*G-x*A*Math.cos(B)&&(v*=-1),v=Math.atan2(h,v),a.j.S(d,-f)&&a.j.H(a.u.W(c-e))>3.141592653589793*(1-u*Math.cos(d))&&(0<d&&1.570796326794897>a.j.H(v)||0>d&&1.570796326794897<a.j.H(v))&&(v=a.j.nb(3.141592653589793,v)-v)),1.570796326794897>=a.j.H(v)&&1.570796326794897<a.j.H(n.l)||1.570796326794897<=a.j.H(v)&&1.570796326794897>a.j.H(n.l)))n.l=-1*a.u.W(n.l+3.141592653589793)}}}};
b.gf=function(b,k,c,d,e,f,h,g){if(null!=h||null!=g)if(a.j.Ih(k))a.zg.gf(b,c,d,e,f,h,g);else if(f=a.u.W(f),a.j.S(a.j.H(d),1.570796326794897)||a.j.Vc(f)||a.j.S(a.j.H(f),3.141592653589793))a.Xj.gf(b,k,c,d,e,f,h,g);else{var n=1.570796326794897==a.j.H(f)?0:Math.cos(f),p=3.141592653589793==a.j.H(f)?0:Math.sin(f);a.j.S(a.j.H(d),1.570796326794897)&&(c=0);f=1-Math.sqrt(1-k);var m=a.u.Dp(k,d);d=1.570796326794897==a.j.H(m)?0:Math.cos(m);var s=Math.sin(m),m=Math.atan2(Math.tan(m),n),t=d*p,u=t*t,N=1-u,v=k/(1-
k)*N;k=v*(256+v*(-128+v*(74-47*v)))/1024;var w=k/4,x=k/6,A=e/(b*(1-f)*(1+v*(4096+v*(-768+v*(320-175*v)))/16384)),G=A,B;do{B=G;e=1.570796326794897==a.j.H(G)?0:Math.cos(G);var v=3.141592653589793==a.j.H(G)?0:Math.sin(G),z=v*v;b=Math.cos(2*m+G);G=b*b;G=k*v*(b+w*(e*(2*G-1)-x*b*(4*z-3)*(4*G-3)))+A}while(!a.j.S(B,G));e=1.570796326794897==a.j.H(G)?0:Math.cos(G);v=3.141592653589793==a.j.H(G)?0:Math.sin(G);null!=h&&(p=Math.atan2(v*p,d*e-s*v*n),N=f/16*N*(4+f*(4-3*N)),b=Math.cos(2*m+G),h.l=a.u.W(c+(p-(1-N)*
f*t*(G+N*v*(b+N*e*(2*b*b-1))))));null!=g&&(N=s*v-d*e*n,N=(1-f)*Math.sqrt(u+N*N),g.l=Math.atan2(s*e+d*v*n,N))}};return b}();a.cs=b})(z||(z={}));(function(a){var b=function(){function b(){}b.Fb=function(b,k,c,d,e,f,h,g,n){var p=a.u.W(e-c),m=a.j.S(a.j.H(d),1.570796326794897),s=a.j.S(a.j.H(f),1.570796326794897);if(a.j.S(d,f)&&(a.j.Vc(p)||m))null!=h&&(h.l=0),null!=g&&(g.l=0),null!=n&&(n.l=0);else{var t,u;a.j.Ih(k)?(t=Math.sin(d),u=Math.sin(f),t=Math.sqrt((1+t)/(1-t)),u=Math.sqrt((1+u)/(1-u)),t=Math.log(u)-
Math.log(t),t=Math.atan2(p,t),null!=h&&(h.l=a.j.S(d,f)?a.j.H(b*Math.cos(d)*p):a.j.H((b*f-b*d)/Math.cos(t)))):(u=a.u.qu(k,f),t=Math.sin(a.u.qu(k,d)),u=Math.sin(u),t=Math.sqrt((1+t)/(1-t)),u=Math.sqrt((1+u)/(1-u)),t=Math.log(u)-Math.log(t),t=Math.atan2(p,t),null!=h&&(a.j.S(d,f)?h.l=a.j.H(b*p*Math.cos(d)/a.u.Tk(k,d)):(p=a.u.q(b,k,d),b=a.u.q(b,k,f),h.l=a.j.H((b-p)/Math.cos(t)))));if(null!=g||null!=n)h=a.u.W(t+3.141592653589793),m&&s||!m&&!s||(m?t=0>d?e:a.u.W(3.141592653589793-e):s&&(h=0>f?c:a.u.W(3.141592653589793-
c))),null!=g&&(g.l=t),null!=n&&(n.l=h)}};b.gf=function(b,k,c,d,e,f,h,g){f=a.u.W(f);0>e&&(e=a.j.H(e),f=a.u.W(f+3.141592653589793));a.j.Ih(k)?a.j.S(a.j.H(d),1.570796326794897)?(c=0>d?f:a.u.W(3.141592653589793-f),f=e/b%6.283185307179586,3.141592653589793>=f?b=d-a.j.nb(f,d):(c=a.u.W(c+3.141592653589793),b=-d+a.j.nb(f-3.141592653589793,d))):a.j.S(a.j.H(f),1.570796326794897)?(c=a.u.W(c+a.j.nb(e,f)/(b*Math.cos(d))),b=d):(b=d+e*Math.cos(f)/b,1.570796326794897<a.j.H(b)&&(b=1.570796326794897),a.j.S(a.j.H(b),
1.570796326794897)&&(a.j.Vc(f)||a.j.S(a.j.H(f),3.141592653589793))||(1.570796316258184<a.j.H(b)&&(b=a.j.nb(1.570796316258184,b)),k=Math.sin(d),d=Math.sin(b),k=Math.sqrt((1+k)/(1-k)),d=Math.sqrt((1+d)/(1-d)),k=Math.log(d)-Math.log(k),c=a.u.W(c+Math.tan(f)*k))):a.j.S(a.j.H(d),1.570796326794897)?(c=0>d?f:a.u.W(3.141592653589793-f),f=e/a.u.nR(b,k),f%=6.283185307179586,3.141592653589793>=f?(b=d-a.j.nb(f,d),b=a.u.xn(k,b)):(c=a.u.W(c+3.141592653589793),b=-d+a.j.nb(f-3.141592653589793,d),b=a.u.xn(k,b))):
a.j.S(a.j.H(f),1.570796326794897)?(c=a.u.W(c+a.j.nb(e,f)*a.u.Tk(k,d)/(b*Math.cos(d))),b=d):(b=1.570796326794897*(e*Math.cos(f)+a.u.q(b,k,d))/a.u.gg(b,k),1.570796326794897<a.j.H(b)&&(b=a.j.nb(1.570796326794897,b)),b=a.u.xn(k,b),a.j.S(a.j.H(b),1.570796326794897)&&(a.j.Vc(f)||a.j.S(a.j.H(f),3.141592653589793))||(e=a.u.qu(k,d),d=a.u.qu(k,b),1.570796316258184<a.j.H(d)&&(d=a.j.nb(1.570796316258184,b),b=a.u.$K(k,d)),k=Math.sin(e),d=Math.sin(d),k=Math.sqrt((1+k)/(1-k)),d=Math.sqrt((1+d)/(1-d)),k=Math.log(d)-
Math.log(k),c=a.u.W(c+Math.tan(f)*k)));null!=h&&(h.l=c);null!=g&&(g.l=b)};return b}();a.Zz=b})(z||(z={}));(function(a){var b=function(){function b(){}b.gw=function(b,k,c,d,e,f,h){a.cs.Fb(b,k,c,d,e,f,null,h,null)};b.Ph=function(b,k,c,d,e,f,h,g){a.cs.gf(b,k,c,d,e,f,h,g)};b.Rd=function(b,k,c,d,e,f,h,g,n,p){switch(p){case 2:a.Xj.Fb(b,k,c,d,e,f,h,g,n);break;case 3:a.$z.Fb(b,k,c,d,e,f,h,g,n);break;case 1:a.Zz.Fb(b,k,c,d,e,f,h,g,n);break;default:a.cs.Fb(b,k,c,d,e,f,h,g,n)}};b.dk=function(b,k,c,d,e,f,h,g,
n){switch(n){case 2:a.Xj.gf(b,k,c,d,e,f,h,g);break;case 3:a.$z.gf(b,k,c,d,e,f,h,g);break;case 1:a.Zz.gf(b,k,c,d,e,f,h,g);break;default:a.cs.gf(b,k,c,d,e,f,h,g)}};return b}();a.zb=b})(z||(z={}));(function(a){var b=function(){function b(){}b.QS=function(c,k){var d=8;0>d&&(d=8);var e=[0,0,0,0],f=new a.b;f.J(k);f.scale(9102==a.Ya.Em(c).Se().Qc()?1:180*(a.Ya.Em(c).Se().Dj/3.141592653589793));-180>f.x?(f.x-=f.x%360,-180>f.x&&(f.x+=360)):180<f.x&&(f.x-=f.x%360,180<f.x&&(f.x-=360));90<f.y&&(f.y=90);-90>f.y&&
(f.y=-90);for(var h=5*d,g=(h+31)/32,n=-180,p=180,m=h-1,s=g-1;0<=s;s--)for(var t=m-32*s,u=Math.min(32,h-32*s),v=1;v<u;v+=2){var w=0.5*(p+n);f.x>=w?(e[s]|=1<<t,n=w):p=w;t-=2;m-=2}n=-90;p=90;m=h-2;for(s=g-1;0<=s;s--){t=m-32*s;u=Math.min(32,h-32*s);for(v=0;v<u;v+=2)w=0.5*(p+n),f.y>=w?(e[s]|=1<<t,n=w):p=w,t-=2,m-=2}return b.XS(e,d,d)};b.XS=function(a,b,c){for(var d=[],e=0;e<b;e++)d[e]="";for(var f=e=0,h=0;h<b;h++){var g=a[e]>>f&31,f=f+5;if(31<f){var n=37-f,g=g&(1<<n)-1,f=f-32;e++;g|=(a[e]&(1<<f)-1)<<n}d[b-
1-h]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[g]}if(c>b)for(h=0;h<c-b;h++)d.push("0");else c<b&&(d.length=c);return d.join("")};return b}();a.qH=b})(z||(z={}));(function(a){var b={gcstol:[0,1E-8,1,1.11111E-8,2,1.68845E-8,3,2.17661E-8,4,2.22508E-8,5,2.34848E-8,6,2.37811E-8,7,2.88455E-8,8,3.1456E-8,9,3.29779E-8,10,3.66789E-8,11,4.23597E-8,12,4.79463E-8,13,6.45223E-8,14,7.26274E-8,15,7.49945E-8,16,7.52506E-8,17,7.97991E-8,18,9.66202E-8,19,9.79918E-8,20,9.89735E-8,21,1.02314E-7,22,1.08146E-7,23,2.29734E-7,
24,2.42985E-7,25,2.7546E-7,26,3.37034E-7,27,4.30795E-7,28,5.20871E-7,29,5.50921E-7,30,6.74068E-7,31,6.86177E-7,32,7.25263E-7,33,7.44101E-7,34,7.74267E-7,35,9.62954E-7,36,1.06103E-6,37,1.14363E-6,38,1.16219E-6,39,1.36419E-6,40,1.36744E-6,41,1.43239E-6,42,1.73624E-6,43,1.84825E-6,44,1.90986E-6,45,1.97572E-6,46,2.12207E-6,47,2.72837E-6,48,3.1831E-6,49,3.58099E-6,50,3.81972E-6,51,4.09256E-6,52,4.40737E-6,53,4.77465E-6,54,5.16178E-6,55,5.20871E-6,56,5.72958E-6,57,6.03113E-6,58,6.98729E-6,59,9.24125E-6,
60,1.14592E-5],pcstol:[0,6.66667E-9,1,2E-8,2,4.97098E-5,3,0.001,4,0.00109362,5,0.00328087,6,0.00497101],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,
102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,
102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,
102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,
102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,
3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,
3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,
102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,
4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,
37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,
5388,5858,5532,5879,4474,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,
31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077],pcsid:[2066,6,2136,5,2155,5,2157,3,2158,3,2159,5,2160,5,2219,3,2220,3,2244,5,2245,5,2256,5,2265,5,2266,5,2269,5,2270,5,2273,5,2290,3,2291,3,2294,3,2295,3,2313,3,2314,5,2964,5,2967,5,2968,5,2991,3,2992,5,2993,3,2994,5,3073,3,3076,3,3079,3,3091,5,3106,3,3108,
3,3109,3,3141,3,3142,3,3167,2,3337,3,3347,3,3348,3,3359,5,3360,3,3361,5,3362,3,3363,5,3364,3,3365,5,3366,5,3402,3,3403,3,3405,3,3406,3,3439,3,3440,3,3447,3,3449,3,3450,3,3453,5,3454,5,3460,3,3479,5,3480,3,3481,5,3482,3,3483,5,3484,3,3485,5,3486,3,3487,5,3488,3,3489,3,3490,5,3491,3,3492,5,3493,3,3494,5,3495,3,3496,5,3497,3,3498,5,3499,3,3500,5,3501,3,3502,5,3503,3,3504,5,3505,3,3506,5,3507,3,3508,5,3509,3,3510,5,3511,3,3512,5,3513,3,3514,3,3515,5,3516,3,3517,5,3518,3,3519,5,3520,3,3521,5,3522,3,3523,
5,3524,3,3525,5,3526,3,3527,5,3528,3,3529,5,3530,3,3531,5,3532,3,3533,5,3534,3,3535,5,3536,3,3537,5,3538,3,3539,5,3540,3,3541,5,3542,3,3543,5,3544,3,3545,5,3546,3,3547,5,3548,3,3549,5,3550,3,3551,5,3552,3,3553,5,3582,5,3583,3,3584,5,3585,3,3586,5,3587,3,3588,5,3589,3,3590,5,3591,3,3592,3,3593,5,3598,5,3599,3,3600,5,3605,5,3606,3,3607,3,3608,5,3609,3,3610,5,3611,3,3612,5,3613,3,3614,5,3615,3,3616,5,3617,3,3618,5,3619,3,3620,5,3621,3,3622,5,3623,3,3624,5,3625,3,3626,5,3627,3,3628,5,3629,3,3630,5,3631,
3,3632,5,3633,3,3634,5,3635,3,3636,5,3640,5,3641,3,3642,5,3643,3,3644,5,3645,3,3646,5,3647,3,3648,5,3649,3,3650,5,3651,3,3652,5,3653,3,3654,5,3655,3,3656,5,3657,3,3658,5,3659,3,3660,5,3661,3,3662,5,3663,3,3664,5,3668,5,3669,3,3670,5,3671,3,3672,5,3673,3,3674,5,3675,3,3676,5,3677,5,3678,3,3679,5,3680,5,3681,3,3682,5,3683,5,3684,3,3685,3,3686,5,3687,3,3688,5,3689,3,3690,5,3691,3,3692,5,3696,5,3697,3,3698,5,3699,3,3700,5,3740,3,3749,3,3783,3,3784,3,3793,3,3794,3,3802,3,3816,3,3829,3,3854,3,3920,3,3978,
3,3979,3,3991,5,3992,5,4026,3,4037,3,4038,3,4217,5,4438,5,4439,5,4467,3,4471,3,4474,3,4559,3,4839,3,5018,3,5048,3,5167,3,5168,3,5223,3,5234,3,5235,3,5243,3,5266,3,5316,3,5320,3,5321,3,5330,3,5331,3,5337,3,5361,3,5362,3,5382,3,5383,3,5396,3,5456,3,5457,3,5469,3,5472,4,5490,3,5518,3,5523,3,5559,3,5588,5,5589,5,5596,3,5627,3,5629,3,5641,3,5643,3,5644,3,5654,5,5655,5,5659,3,5700,3,5825,3,5836,3,5837,3,5842,3,5844,3,5880,3,5887,3,5890,3,20499,3,20538,3,20539,3,20790,3,20791,3,21291,3,21292,3,21500,3,21817,
3,21818,3,22032,3,22033,3,22091,3,22092,3,22332,3,22391,3,22392,3,22700,3,22770,3,22780,3,22832,3,23090,3,23095,3,23239,3,23240,3,23433,3,23700,3,24047,3,24048,3,24100,5,24200,3,24305,3,24306,3,24382,4,24383,3,24500,3,24547,3,24548,3,24571,2,24600,3,25E3,3,25231,3,25884,3,25932,3,26237,3,26331,3,26332,3,26591,3,26592,3,26632,3,26692,3,26855,5,26856,5,27120,3,27200,3,27291,4,27292,4,27429,3,27492,3,27500,3,27700,3,28232,3,28600,3,28991,3,28992,3,29100,3,29220,3,29221,3,29333,3,29635,3,29636,3,29701,
3,29738,3,29739,3,29849,3,29850,3,29871,2,29872,5,29873,3,29900,3,29901,3,29903,3,30200,6,30339,3,30340,3,30591,3,30592,3,30791,3,30792,3,31028,3,31121,3,31154,3,31170,3,31171,3,31370,3,31528,3,31529,3,31600,3,31700,3,31838,3,31839,3,31901,3,32061,3,32062,3,32098,3,32099,5,32100,3,32104,3,32161,3,32766,3,53034,3,53048,3,53049,3,54034,3,65061,5,65062,5,65161,3,65163,3,102041,5,102064,4,102068,1,102069,0,102217,5,102218,3,102219,5,102220,5,102378,5,102379,5,102380,3,102381,5,102589,5,102599,5,102600,
5,102604,5,102605,3,102606,3,102647,3,102704,5,102705,5,102733,5,102761,5,102762,3,102763,5,102764,3,102765,3,102766,5,102970,5,102974,5,102993,3,102994,3,102995,5,102996,5,103015,3,103016,5,103017,3,103018,5,103025,3,103026,3,103027,5,103028,5,103035,3,103036,3,103037,5,103038,5,103039,3,103040,3,103041,5,103042,5,103043,3,103044,3,103045,5,103046,5,103047,3,103048,3,103049,5,103050,5,103051,3,103052,5,103053,3,103054,5,103055,3,103056,5,103057,3,103058,3,103059,5,103060,5,103061,3,103062,3,103063,
5,103064,5,103069,5,103070,3,103071,3,103072,5,103073,5,103086,3,103087,3,103088,5,103089,5,103094,5,103095,3,103096,5,103103,3,103104,5,103105,3,103106,5,103121,3,103122,5,103123,3,103124,3,103125,5,103126,5,103127,3,103128,3,103129,5,103130,5,103131,3,103132,3,103133,5,103134,5,103135,3,103136,3,103137,5,103138,5,103139,3,103140,5,103141,3,103142,5,103143,3,103144,5,103145,3,103146,5,103147,3,103148,3,103149,5,103150,5,103151,3,103152,5,103172,3,103173,5,103174,3,103175,3,103176,5,103177,5,103178,
3,103179,3,103180,5,103181,5,103182,3,103183,3,103184,5,103185,5,103228,3,103229,3,103230,5,103231,5,103250,3,103251,5,103252,3,103253,5,103260,3,103261,3,103262,5,103263,5,103270,3,103271,3,103272,5,103273,5,103274,3,103275,3,103276,5,103277,5,103278,3,103279,3,103280,5,103281,5,103282,3,103283,3,103284,5,103285,5,103286,3,103287,5,103288,3,103289,5,103290,3,103291,5,103292,3,103293,3,103294,5,103295,5,103296,3,103297,3,103298,5,103299,5,103376,5,103377,3,103378,3,103379,5,103380,5,103393,3,103394,
3,103395,5,103396,5,103472,3,103473,5,103474,3,103475,5,103482,3,103483,5,103484,3,103485,5,103500,3,103501,5,103502,3,103503,3,103504,5,103505,5,103506,3,103507,3,103508,5,103509,5,103510,3,103511,3,103512,5,103513,5,103514,3,103515,5,103516,3,103517,5,103518,3,103519,5,103520,3,103521,5,103522,3,103523,3,103524,5,103525,5,103526,3,103527,5,103561,5,103562,5,103563,3,103564,3,103565,5,103566,5,103567,3,103568,3,103569,5,103570,5,103585,5,103695,5],pcsidc:[[2E3,2045,3],[2056,2065,3],[2067,2135,3],
[2137,2153,3],[2161,2170,3],[2172,2193,3],[2196,2198,3],[2200,2203,3],[2206,2217,3],[2222,2224,5],[2251,2253,5],[2280,2282,5],[2308,2311,3],[2315,2325,3],[2327,2394,3],[2400,2462,3],[2523,2576,3],[2578,2693,3],[2695,2758,3],[2867,2888,5],[2891,2930,5],[2931,2941,3],[2969,2973,3],[2975,2982,3],[2984,2988,3],[2995,3002,3],[3006,3051,3],[3054,3059,3],[3061,3066,3],[3068,3071,3],[3084,3087,3],[3112,3118,3],[3120,3138,3],[3146,3151,3],[3153,3157,3],[3161,3166,3],[3168,3172,3],[3174,3203,3],[3294,3313,
3],[3315,3335,3],[3339,3345,3],[3350,3358,3],[3367,3369,3],[3374,3399,3],[3408,3416,3],[3425,3432,5],[3441,3446,5],[3456,3459,5],[3465,3478,3],[3554,3559,3],[3561,3565,5],[3568,3570,5],[3571,3581,3],[3594,3597,3],[3601,3604,3],[3637,3639,3],[3665,3667,3],[3693,3695,3],[3701,3727,3],[3728,3733,5],[3744,3747,3],[3753,3758,5],[3761,3763,3],[3765,3769,3],[3779,3781,3],[3788,3791,3],[3797,3799,3],[3832,3841,3],[3844,3852,3],[3873,3885,3],[3890,3893,3],[3907,3912,3],[3942,3950,3],[3968,3970,3],[3973,3976,
3],[3986,3989,3],[3994,3997,3],[4399,4413,5],[4418,4433,5],[4491,4554,3],[5069,5072,3],[5105,5130,3],[5180,5184,3],[5253,5259,3],[5269,5275,3],[5292,5311,3],[5343,5349,3],[5355,5357,3],[5387,5389,3],[5459,5463,3],[5479,5482,3],[5530,5539,3],[5550,5552,3],[5562,5583,3],[5623,5625,5],[5631,5639,3],[5649,5653,3],[5663,5680,3],[5682,5685,3],[5875,5877,3],[20002,20032,3],[20062,20092,3],[20135,20138,3],[20248,20258,3],[20348,20358,3],[20436,20440,3],[20822,20824,3],[20934,20936,3],[21035,21037,3],[21095,
21097,3],[21148,21150,3],[21413,21423,3],[21473,21483,3],[21780,21782,3],[21891,21894,3],[22171,22177,3],[22181,22187,3],[22191,22197,3],[22234,22236,3],[22521,22525,3],[22991,22994,3],[23028,23038,3],[23830,23853,3],[23866,23872,3],[23877,23884,3],[23886,23894,3],[23946,23948,3],[24311,24313,3],[24342,24347,3],[24370,24374,4],[24375,24381,3],[24718,24721,3],[24817,24821,3],[24877,24882,3],[24891,24893,3],[25391,25395,3],[25828,25838,3],[26191,26195,3],[26391,26393,3],[26703,26722,3],[26729,26760,
5],[26766,26798,5],[26860,26870,5],[26891,26899,3],[26903,26923,3],[26929,26946,3],[26948,26998,3],[27037,27040,3],[27205,27232,3],[27258,27260,3],[27391,27398,3],[27561,27564,3],[27571,27574,3],[27581,27584,3],[27591,27594,3],[28191,28193,3],[28348,28358,3],[28402,28432,3],[28462,28492,3],[29118,29122,3],[29177,29185,3],[30161,30179,3],[30491,30494,3],[30729,30732,3],[31251,31259,3],[31265,31268,3],[31275,31278,3],[31288,31297,3],[31461,31465,3],[31491,31495,3],[31917,31922,3],[31965,31985,3],[31992,
32E3,3],[32001,32003,5],[32005,32031,5],[32033,32060,5],[32074,32077,5],[32081,32086,3],[32107,32130,3],[32133,32158,3],[32164,32167,5],[32180,32199,3],[32201,32260,3],[32301,32360,3],[32601,32662,3],[32664,32667,5],[32701,32761,3],[53001,53004,3],[53008,53019,3],[53021,53032,3],[53042,53046,3],[54001,54004,3],[54008,54019,3],[54021,54032,3],[54042,54046,3],[54048,54053,3],[102001,102040,3],[102042,102063,3],[102065,102067,3],[102070,102112,3],[102114,102117,3],[102118,102121,5],[102122,102208,3],
[102210,102216,3],[102221,102300,3],[102304,102377,3],[102382,102388,3],[102389,102391,5],[102401,102444,3],[102450,102452,3],[102461,102468,5],[102469,102492,3],[102500,102519,5],[102530,102549,3],[102570,102588,3],[102590,102598,3],[102601,102603,3],[102608,102628,3],[102629,102646,5],[102648,102672,5],[102675,102700,5],[102701,102703,3],[102707,102730,5],[102735,102758,5],[102767,102798,3],[102962,102969,3],[102971,102973,3],[102975,102989,3],[102990,102992,5],[102997,103002,3],[103003,103008,
5],[103009,103011,3],[103012,103014,5],[103019,103021,3],[103022,103024,5],[103029,103031,3],[103032,103034,5],[103065,103068,3],[103074,103076,3],[103077,103079,5],[103080,103082,3],[103083,103085,5],[103090,103093,3],[103097,103099,3],[103100,103102,5],[103107,103109,3],[103110,103112,5],[103113,103116,3],[103117,103120,5],[103153,103157,3],[103158,103162,5],[103163,103165,3],[103166,103171,5],[103186,103188,3],[103189,103191,5],[103192,103195,3],[103196,103199,5],[103200,103224,3],[103225,103227,
5],[103232,103237,3],[103238,103243,5],[103244,103246,3],[103247,103249,5],[103254,103256,3],[103257,103259,5],[103264,103266,3],[103267,103269,5],[103300,103375,3],[103381,103383,3],[103384,103386,5],[103387,103389,3],[103390,103392,5],[103397,103399,3],[103400,103471,5],[103476,103478,3],[103479,103481,5],[103486,103488,3],[103489,103491,5],[103492,103495,3],[103496,103499,5],[103539,103543,3],[103544,103548,5],[103549,103551,3],[103552,103557,5],[103558,103560,3],[103571,103573,3],[103574,103576,
5],[103577,103580,3],[103581,103583,5],[103600,103694,3],[103700,103793,5],[103794,103799,3]],gcsid:[4042,0,4075,0,4081,0,4168,0,4170,0,4188,0,4261,1,4262,0,4263,0,4288,0,4289,0,4305,1,4322,0,4324,0,4326,0,4466,0,4469,0,4475,0,4483,0,4490,0,4555,0,4558,0,4614,0,4619,0,4657,0,4670,0,4671,0,4674,0,4682,0,4683,0,4718,0,4720,0,4721,0,4723,0,4726,0,4737,0,4738,0,4759,0,4761,0,4807,1,4808,0,4809,0,4816,1,4817,0,4818,0,4819,1,4820,0,4821,1,4823,0,4824,0,4901,1,4902,1,4903,0,4904,0,5228,0,5229,0,5233,0,5252,
0,5264,0,5340,0,5354,0,5360,0,5371,0,5373,0,5381,0,5393,0,5464,0,5467,0,5489,0,5524,0,5527,0,5546,0,5561,0,5593,0,5681,0,5886,0,37225,1,37235,0,37257,0,37259,0,37260,0,104020,0,104139,1,104140,1,104223,0,104286,0,104287,0,104304,0,104305,0,104896,0,104900,5,104901,0,104902,0,104903,9,104904,2,104905,2,104906,59,104907,54,104908,0,104909,58,104910,31,104911,56,104912,6,104913,50,104914,41,104915,10,104916,3,104917,30,104918,8,104919,60,104920,53,104921,44,104922,48,104923,51,104924,38,104925,0,104926,
49,104927,57,104928,21,104929,23,104930,35,104931,49,104932,27,104933,17,104934,13,104935,7,104936,56,104937,40,104938,28,104939,37,104940,15,104941,55,104942,22,104943,4,104944,0,104945,20,104946,42,104947,47,104948,52,104949,43,104950,46,104951,39,104952,24,104953,16,104954,50,104955,36,104956,33,104957,46,104958,14,104959,19,104960,0,104961,34,104962,32,104963,29,104964,45,104965,26,104966,25,104967,41,104968,11,104969,12,104970,18],gcsidc:[[4001,4016,0],[4018,4025,0],[4027,4029,0],[4031,4036,
0],[4044,4047,0],[4052,4054,0],[4120,4166,0],[4172,4176,0],[4178,4185,0],[4190,4196,0],[4198,4216,0],[4218,4222,0],[4224,4232,0],[4234,4260,0],[4265,4267,0],[4269,4286,0],[4291,4303,0],[4306,4319,0],[4600,4610,0],[4621,4625,0],[4627,4633,0],[4636,4639,0],[4641,4646,0],[4659,4667,0],[4676,4680,0],[4686,4697,0],[4699,4706,0],[4740,4757,0],[4763,4765,0],[4801,4806,0],[4810,4812,1],[4813,4815,0],[37001,37008,0],[37201,37208,0],[37211,37224,0],[37226,37233,0],[37237,37243,0],[37245,37247,0],[37249,37255,
0],[104100,104138,0],[104141,104145,0],[104256,104261,0],[104700,104786,0],[104990,104992,0]]},c={c:[[2E3,2045,9001],[2056,2065,9001],[2067,2135,9001],[2137,2153,9001],[2161,2170,9001],[2172,2193,9001],[2196,2198,9001],[2200,2203,9001],[2206,2217,9001],[2222,2224,9002],[2251,2253,9002],[2280,2282,9002],[2308,2311,9001],[2315,2325,9001],[2327,2394,9001],[2400,2462,9001],[2523,2576,9001],[2578,2693,9001],[2695,2758,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,
9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2941,9001],[2969,2973,9001],[2975,2982,9001],[2984,2988,9001],[2995,3002,9001],[3006,3051,9001],[3054,3059,9001],[3061,3066,9001],[3068,3071,9001],[3084,3087,9001],[3112,3118,9001],[3120,3138,9001],[3146,3151,9001],[3153,3157,9001],[3161,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3335,9001],[3339,3345,9001],[3350,3358,9001],[3367,3369,9001],[3374,3399,9001],[3408,3416,9001],[3425,3432,9003],[3441,3446,9003],[3456,
3459,9003],[3465,3478,9001],[3554,3559,9001],[3561,3565,9003],[3568,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3733,9003],[3744,3747,9001],[3753,3758,9003],[3761,3763,9001],[3765,3769,9001],[3779,3781,9001],[3788,3791,9001],[3797,3799,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3907,3912,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],
[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4052,4054,9102],[4120,4166,9102],[4172,4176,9102],[4178,4185,9102],[4190,4196,9102],[4198,4216,9102],[4218,4222,9102],[4224,4232,9102],[4234,4260,9102],[4265,4267,9102],[4269,4286,9102],[4291,4303,9102],[4306,4319,9102],[4399,4413,9003],[4418,4433,9003],[4491,4554,9001],[4600,4610,9102],[4621,4625,9102],[4627,4633,9102],[4636,4639,9102],[4641,4646,9102],[4659,4667,9102],[4676,4680,9102],[4686,4697,9102],[4699,4706,
9102],[4740,4757,9102],[4763,4765,9102],[4801,4806,9102],[4810,4812,9105],[4813,4815,9102],[5069,5072,9001],[5105,5130,9001],[5180,5184,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5343,5349,9001],[5355,5357,9001],[5387,5389,9001],[5459,5463,9001],[5479,5482,9001],[5530,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,
9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21891,21894,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,
24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26703,26722,9001],[26729,26760,9003],[26766,26798,9003],[26860,26870,9003],[26891,26899,9001],[26903,26923,9001],[26929,26946,9001],[26948,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],
[28402,28432,9001],[28462,28492,9001],[29118,29122,9001],[29177,29185,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31278,9001],[31288,31297,9001],[31461,31465,9001],[31491,31495,9001],[31917,31922,9001],[31965,31985,9001],[31992,32E3,9001],[32001,32003,9003],[32005,32031,9003],[32033,32060,9003],[32074,32077,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,
9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37001,37008,9102],[37201,37208,9102],[37211,37224,9102],[37226,37233,9102],[37237,37243,9102],[37245,37247,9102],[37249,37255,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53042,53046,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[102001,102040,9001],[102042,102063,9001],[102065,102067,9001],[102070,102112,9001],[102114,102117,9001],[102122,102208,9001],[102210,
102216,9001],[102221,102300,9001],[102304,102377,9001],[102382,102388,9001],[102389,102391,9003],[102401,102444,9001],[102450,102452,9001],[102461,102468,9003],[102469,102492,9001],[102500,102519,9002],[102530,102549,9001],[102570,102588,9001],[102590,102598,9001],[102601,102603,9001],[102608,102628,9001],[102629,102646,9003],[102648,102672,9003],[102675,102700,9003],[102701,102703,9001],[102707,102730,9003],[102735,102758,9003],[102767,102798,9001],[102962,102969,9001],[102971,102973,9001],[102975,
102989,9001],[102990,102992,9002],[102997,103002,9001],[103003,103008,9003],[103009,103011,9001],[103012,103014,9003],[103019,103021,9001],[103022,103024,9003],[103029,103031,9001],[103032,103034,9003],[103065,103068,9001],[103074,103076,9001],[103077,103079,9002],[103080,103082,9001],[103083,103085,9003],[103090,103093,9001],[103097,103099,9001],[103100,103102,9003],[103107,103109,9001],[103110,103112,9003],[103113,103116,9001],[103117,103120,9003],[103153,103157,9001],[103158,103162,9003],[103163,
103165,9001],[103166,103168,9002],[103169,103171,9003],[103186,103188,9001],[103189,103191,9003],[103192,103195,9001],[103196,103199,9003],[103200,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103300,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103400,103471,9003],[103476,
103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103600,103694,9001],[103700,103793,9003],[103794,103799,9001],[104100,104138,9102],[104141,104145,9102],[104256,104261,9102],[104700,104786,9102],[104900,104970,9102],[104990,
104992,9102]],nc:[2066,9039,2136,9094,2155,9003,2157,9001,2158,9001,2159,9094,2160,9094,2219,9001,2220,9001,2244,9003,2245,9003,2256,9002,2265,9002,2266,9002,2269,9002,2270,9002,2273,9002,2290,9001,2291,9001,2294,9001,2295,9001,2313,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2964,9003,2967,9003,2968,9003,2991,9001,2992,9002,2993,9001,2994,9002,3073,9001,3076,9001,3079,9001,3091,9003,3106,9001,3108,9001,3109,9001,3141,9001,3142,9001,3167,
9301,3337,9001,3347,9001,3348,9001,3359,9003,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3366,9005,3402,9001,3403,9001,3405,9001,3406,9001,3439,9001,3440,9001,3447,9001,3449,9001,3450,9001,3453,9003,3454,9003,3460,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,
3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,
9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,
3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3740,9001,3749,
9001,3783,9001,3784,9001,3793,9001,3794,9001,3802,9001,3816,9001,3829,9001,3854,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4075,9102,4081,9102,4168,9102,4170,9102,4188,9102,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4305,9105,4322,9102,4324,9102,4326,9102,4438,9003,4439,9003,4466,9102,4467,9001,4469,9102,4471,9001,4474,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4614,9102,4619,9102,4657,9102,4670,9102,4671,9102,
4674,9102,4682,9102,4683,9102,4718,9102,4720,9102,4721,9102,4723,9102,4726,9102,4737,9102,4738,9102,4759,9102,4761,9102,4807,9105,4808,9102,4809,9102,4816,9105,4817,9102,4818,9102,4819,9105,4820,9102,4821,9105,4823,9102,4824,9102,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5018,9001,5048,9001,5167,9001,5168,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5330,9001,5331,9001,5337,9001,5340,9102,5354,9102,5360,
9102,5361,9001,5362,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5393,9102,5396,9001,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5518,9001,5523,9001,5524,9102,5527,9102,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5842,9001,5844,9001,5880,9001,5886,9102,5887,9001,5890,9001,20499,9001,20538,9001,20539,
9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23433,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25E3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,
9001,26632,9001,26692,9001,26855,9003,26856,9003,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27492,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29100,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,29900,9001,29901,9001,29903,9001,30200,9039,30339,9001,30340,9001,30591,9001,30592,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31370,
9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37225,9105,37235,9102,37257,9102,37259,9102,37260,9102,53034,9001,53048,9001,53049,9001,54034,9001,65061,9003,65062,9003,65161,9001,65163,9001,102041,9003,102064,9085,102068,109030,102069,109031,102118,9003,102119,9002,102120,9003,102121,9003,102217,9003,102218,9001,102219,9003,102220,9003,102378,9002,102379,9002,102380,9001,102381,
9002,102589,9003,102599,9003,102600,9003,102604,9003,102605,9001,102606,9001,102647,9001,102704,9003,102705,9003,102733,9003,102761,9003,102762,9001,102763,9003,102764,9001,102765,9001,102766,9003,102970,9002,102974,9003,102993,9001,102994,9001,102995,9003,102996,9003,103015,9001,103016,9003,103017,9001,103018,9003,103025,9001,103026,9001,103027,9003,103028,9003,103035,9001,103036,9001,103037,9003,103038,9003,103039,9001,103040,9001,103041,9003,103042,9003,103043,9001,103044,9001,103045,9003,103046,
9003,103047,9001,103048,9001,103049,9003,103050,9003,103051,9001,103052,9003,103053,9001,103054,9003,103055,9001,103056,9003,103057,9001,103058,9001,103059,9003,103060,9003,103061,9001,103062,9001,103063,9003,103064,9003,103069,9003,103070,9001,103071,9001,103072,9003,103073,9003,103086,9001,103087,9001,103088,9003,103089,9003,103094,9002,103095,9001,103096,9003,103103,9001,103104,9003,103105,9001,103106,9003,103121,9001,103122,9003,103123,9001,103124,9001,103125,9002,103126,9002,103127,9001,103128,
9001,103129,9003,103130,9003,103131,9001,103132,9001,103133,9003,103134,9003,103135,9001,103136,9001,103137,9002,103138,9002,103139,9001,103140,9003,103141,9001,103142,9003,103143,9001,103144,9003,103145,9001,103146,9002,103147,9001,103148,9001,103149,9003,103150,9003,103151,9001,103152,9003,103172,9001,103173,9003,103174,9001,103175,9001,103176,9003,103177,9003,103178,9001,103179,9001,103180,9003,103181,9003,103182,9001,103183,9001,103184,9003,103185,9003,103228,9001,103229,9001,103230,9003,103231,
9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103376,9003,103377,9001,103378,9001,103379,
9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,
9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103695,9003,104020,9102,104139,9105,104140,9105,104223,9102,104286,9102,104287,9102,104304,9102,104305,9102,104896,9102]},d=function(){function a(){}a.cC=function(b){!1===a.ti&&a.bo();var c=a.NG(b);if(-1==c){var d=a.ks(b);d!=b&&(c=a.cC(d))}return c};a.NG=function(b){return void 0!==a.ds[b]?a.ds[b]:-1};a.SM=function(b){!1===a.ti&&a.bo();var c=a.Fz(b);if(1E38==c){var d=a.ks(b);
d!=b&&(c=a.Fz(d));if(1E38==c)return 1E-10}return c};a.WO=function(b){if(void 0!==a.Un[b])return!0;var c=a.ks(b);return c!=b&&void 0!==a.Un[c]?!0:!1};a.ZO=function(b){if(void 0!==a.Gh[b])return!0;var c=a.ks(b);return c!=b&&void 0!==a.Gh[c]?!0:!1};a.Fz=function(b){!1===a.ti&&a.bo();return void 0!==a.Un[b]?a.Un[b]:void 0!==a.Gh[b]?a.Gh[b]:1E38};a.oU=function(b){!1===a.ti&&a.bo();return void 0!==a.ew[b]?a.ew[b]:b};a.ks=function(b){!1===a.ti&&a.bo();return void 0!==a.Mw[b]?a.Mw[b]:b};a.bo=function(){for(var d=
b,q,e=0;e<d.pcsid.length;e+=2)a.Gh[d.pcsid[e]]=d.pcstol[2*d.pcsid[e+1]+1];for(e=0;e<d.pcsidc.length;e+=1){q=d.pcsidc[e];for(var f=q[0];f<=q[1];f++)a.Gh[f]=d.pcstol[2*q[2]+1]}for(e=0;e<d.gcsid.length;e+=2)a.Un[d.gcsid[e]]=d.gcstol[2*d.gcsid[e+1]+1];for(e=0;e<d.gcsidc.length;e+=1){q=d.gcsidc[e];for(f=q[0];f<=q[1];f++)a.Gh[f]=d.gcstol[2*q[2]+1]}for(e=0;e<c.c.length;e+=1){q=c.c[e];for(f=q[0];f<=q[1];f++)a.ds[f]=q[2]}for(e=0;e<c.nc.length;e+=2)a.ds[c.nc[e]]=c.nc[e+1];c=null;for(e=0;e<d.newtoold.length;e+=
2)a.ew[d.newtoold[e+1]]=d.newtoold[e],a.Mw[d.newtoold[e]]=d.newtoold[e+1];b=null;a.ti=!0};a.ti=!1;a.Un=[];a.Gh=[];a.ew=[];a.Mw=[];a.ds=[];return a}();a.ls=d})(z||(z={}));(function(a){function b(a){return 0===a.length?'""':'"'==a[0]||"."==a[0]||"0"<=a[0]&&"9">=a[0]?a:'"'+a.trim()+'"'}var c=[],d=function(){function k(){}k.UM=function(d){try{for(var q=0;q<c.length;q++)if(c[q].wkttext===d)return c[q].unit;for(var e,f=q="",h=!1,g=0;g<d.length;g++){var n=d[g];!0===h?'"'==n?'"'==d[g+1]?q+=n:h=!1:q+=n:/[\s]/.test(n)||
(","==n?(f=""!==q?f+(b(q)+","):f+",",q=""):")"==n||"]"==n?(f=""!==q?f+(b(q)+"]}"):f+"]}",q=""):"("==n||"["==n?(f+='{ "entity": "'+q.toUpperCase().trim()+'", "values":[',q=""):'"'==n?(h=!0,q=""):q+=n)}e=JSON.parse(f);var p=k.Dz(e);if(null===p)return null;e=null;for(n=0;n<p.values.length;n++)if("object"===typeof p.values[n]&&"UNIT"===p.values[n].entity){e=p.values[n];break}if(null===e)return null;var m=a.Tb.EL("GEOGCS"===p.entity?1:0,e.values[1],e.values[2]);c.push({wkttext:d,unit:m});10<c.length&&
c.shift();return m}catch(s){return null}};k.Dz=function(a){if(null===a)return null;if("GEOGCS"===a.entity||"PROJCS"===a.entity)return a;for(var b=[],c=0;c<a.values.length;c++)if("object"===typeof a.values[c]&&void 0!==a.values[c].entity){if("GEOGCS"===a.values[c].entity||"PROJCS"==a.values[c].entity)return a.values[c];b.push(a.values[c])}for(a=0;a<b.length;a++)if(c=k.Dz(b[a]),null!==c)return c;return null};k.TM=function(a){var b=-1;if(null!=a&&0<a.length){var k,c;k=a.indexOf("PROJCS");if(0<=k){var d=
0;k=a.lastIndexOf("UNIT");if(0<=k&&(k=a.indexOf(",",k+4),0<k&&(k++,c=a.indexOf("]",k+1),0<c)))try{d=parseFloat(a.substring(k,c))}catch(q){d=0}0<d&&(b=0.001/d)}else if(k=a.indexOf("GEOGCS"),0<=k){var e=0,d=0;k=a.indexOf("SPHEROID",k+6);if(0<k&&(k=a.indexOf(",",k+8),0<k)){k++;c=a.indexOf(",",k+1);if(0<c)try{e=parseFloat(a.substring(k,c))}catch(f){e=0}if(0<e&&(k=a.indexOf("UNIT",c+1),0<=k&&(k=a.indexOf(",",k+4),0<k&&(k++,c=a.indexOf("]",k+1),0<c))))try{d=parseFloat(a.substring(k,c))}catch(h){d=0}}0<
e&&0<d&&(b=0.001/(e*d))}}return b};return k}();a.mA=d})(z||(z={}));(function(a){(function(a){a[a.NONE=0]="NONE";a[a.LINEAR=1]="LINEAR";a[a.ANGULAR=2]="ANGULAR"})(a.BH||(a.BH={}));(function(a){a[a.enumFloat=0]="enumFloat";a[a.enumDouble=1]="enumDouble";a[a.enumInt32=2]="enumInt32";a[a.enumInt64=3]="enumInt64";a[a.enumInt8=4]="enumInt8";a[a.enumInt16=5]="enumInt16"})(a.oI||(a.oI={}));(function(a){a[a.POSITION=0]="POSITION";a[a.Z=1]="Z";a[a.M=2]="M";a[a.ID=3]="ID";a[a.NORMAL=4]="NORMAL";a[a.TEXTURE1D=
5]="TEXTURE1D";a[a.TEXTURE2D=6]="TEXTURE2D";a[a.TEXTURE3D=7]="TEXTURE3D";a[a.ID2=8]="ID2";a[a.MAXSEMANTICS=10]="MAXSEMANTICS"})(a.xf||(a.xf={}));var b=function(){function b(a,k){this.er=this.le=null;this.up=this.Aa=0;this.Wg=this.Jf=null;this.tk=0;if(void 0!==k){this.Aa=k.Aa;this.up=k.up;this.Jf=k.Jf.slice(0);this.Wg=k.Wg.slice(0);this.tk=k.tk;this.er=[];for(var c=0,d=0;d<this.Aa;d++)this.er[d]=c,c+=b.Wa(this.Jf[d]);this.up=c;this.le=[];for(d=0;d<this.Aa;d++)for(var c=b.Wa(this.Hd(d)),e=b.ue(this.Hd(d)),
f=0;f<c;f++)this.le[this.er[d]+f]=e}else this.up=this.Aa=0}b.prototype.Hd=function(b){if(0>b||b>this.Aa)throw a.g.N();return this.Jf[b]};b.prototype.zf=function(a){return this.Wg[a]};b.JN=function(a){return b.ac[a]};b.Qh=function(a){return b.Cc[a]};b.ye=function(a){return b.Bd[a]};b.Gh=function(a){return b.ye(b.Qh(a))*b.Wa(a)};b.Wa=function(a){return b.ob[a]};b.Wf=function(a){return 2>a};b.ti=function(a){return b.Wf(b.Qh(a))};b.prototype.hasAttribute=function(a){return 0<=this.Wg[a]};b.prototype.WC=
function(){return this.hasAttribute(1)};b.ue=function(a){return b.V[a]};b.prototype.XN=function(a){return this.er[a]};b.nD=function(a,k){return b.V[a]===k};b.$g=function(b){if(4==b)return 2;if(8==b)return 3;throw a.g.N();};b.prototype.lc=function(a){return this===a};b.prototype.jj=function(){for(var b=a.I.kg(this.Jf[0]),k=1;k<this.Aa;k++)b=a.I.kg(this.Jf[k],b);return b};b.prototype.fj=function(a){return this.er[a]};b.prototype.hc=function(){return this.tk};b.prototype.Fd=function(a){return this.Jf[a]};
b.V=[0,0,NaN,0,0,0,0,0,0];b.ac=[1,1,1,0,2,1,1,1,0];b.Cc=[1,1,1,2,0,0,0,0,2];b.Bd=[4,8,4,8,1,2];b.ob=[2,1,1,1,3,1,2,3,2];return b}();a.pa=b})(z||(z={}));(function(a){function b(a,k,d,q){var e=a.jd,f=a.e+k+1;1===d?q=5<=e[f]:2===d?q=5<e[f]||5==e[f]&&(q||0>f||void 0!==e[f+1]||e[f-1]&1):3===d?q=q||void 0!==e[f]||0>f:(q=!1,0!==d&&c("!Big.RM!"));if(1>f||!e[0])q?(a.e=-k,a.jd=[1]):a.jd=[a.e=0];else{e.length=f--;if(q)for(;9<++e[f];)e[f]=0,f--||(++a.e,e.unshift(1));for(f=e.length;!e[--f];e.pop());}}function c(a){a=
Error(a);a.name="BigError";throw a;}var d=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,k=function(){function a(b){if(b instanceof a)this.Dd=b.Dd,this.e=b.e,this.jd=b.jd.slice();else{var k,e,f;0===b&&0>1/b?b="-0":d.test(b+="")||c(NaN);this.Dd="-"==b.charAt(0)?(b=b.slice(1),-1):1;-1<(k=b.indexOf("."))&&(b=b.replace(".",""));0<(e=b.search(/e/i))?(0>k&&(k=e),k+=+b.slice(e+1),b=b.substring(0,e)):0>k&&(k=b.length);for(e=0;"0"==b.charAt(e);e++);if(e==(f=b.length))this.jd=[this.e=0];else{for(;"0"==b.charAt(--f););
this.e=k-e-1;this.jd=[];for(k=0;e<=f;this.jd[k++]=+b.charAt(e++));}}}a.prototype.abs=function(){var b=new a(this);b.Dd=1;return b};a.prototype.DB=function(){var b,k=this.jd,c=(b=new a(0)).jd,d=this.Dd,q=b.Dd,e=this.e,f=b.e;if(!k[0]||!c[0])return k[0]?d:c[0]?-q:0;if(d!=q)return d;b=0>d;if(e!=f)return e>(f^b)?1:-1;d=-1;for(q=(e=k.length)<(f=c.length)?e:f;++d<q;)if(k[d]!=c[d])return k[d]>(c[d]^b)?1:-1;return e==f?0:e>(f^b)?1:-1};a.prototype.VB=function(k){var d=this.jd,q=(k=new a(k)).jd,e=this.Dd==k.Dd?
1:-1,f=a.Cc;(f!==~~f||0>f||1E6<f)&&c("!Big.DP!");if(!d[0]||!q[0])return d[0]==q[0]&&c(NaN),q[0]||c(e/0),new a(0*e);var h,g,n,E,p=q.slice(),m=h=q.length,s=d.length,t=d.slice(0,h),u=t.length,v=k,w=v.jd=[],x=0,A=f+(v.e=this.e-k.e)+1;v.Dd=e;e=0>A?0:A;for(p.unshift(0);u++<h;t.push(0));do{for(g=0;10>g;g++){if(h!=(u=t.length))n=h>u?1:-1;else{E=-1;for(n=0;++E<h;)if(q[E]!=t[E]){n=q[E]>t[E]?1:-1;break}}if(0>n){for(k=u==h?q:p;u;){if(t[--u]<k[u]){for(E=u;E&&!t[--E];t[E]=9);--t[E];t[u]+=10}t[u]-=k[u]}for(;!t[0];t.shift());
}else break}w[x++]=n?g:++g;t[0]&&n?t[u]=d[m]||0:t=[d[m]]}while((m++<s||void 0!==t[0])&&e--);w[0]||1==x||(w.shift(),v.e--);x>A&&b(v,f,a.ye,void 0!==t[0]);return v};a.prototype.nO=function(){return 0<this.DB()};a.prototype.vP=function(){return 0>this.DB()};a.prototype.nr=function(b){var k,c,d=this.Dd,q=(b=new a(b)).Dd;if(d!=q)return b.Dd=-q,this.NE(b);var e=this.jd.slice();c=this.e;var f=b.jd,h=b.e;if(!e[0]||!f[0])return f[0]?(b.Dd=-q,b):new a(e[0]?this:0);if(d=c-h){(k=0>d)?(d=-d,c=e):(h=c,c=f);c.reverse();
for(q=d;q--;c.push(0));c.reverse()}else{c=((k=e.length<f.length)?e:f).length;for(d=q=0;q<c;q++)if(e[q]!=f[q]){k=e[q]<f[q];break}}k&&(c=e,e=f,f=c,b.Dd=-b.Dd);if(0<(q=(c=f.length)-(k=e.length)))for(;q--;e[k++]=0);for(q=k;c>d;){if(e[--c]<f[c]){for(k=c;k&&!e[--k];e[k]=9);--e[k];e[c]+=10}e[c]-=f[c]}for(;0==e[--q];e.pop());for(;0==e[0];)e.shift(),--h;e[0]||(b.Dd=1,e=[h=0]);b.jd=e;b.e=h;return b};a.prototype.NE=function(b){var k,c=this.Dd;k=(b=new a(b)).Dd;if(c!=k)return b.Dd=-k,this.nr(b);k=this.e;var d=
this.jd,q=b.e,e=b.jd;if(!d[0]||!e[0])return e[0]?b:new a(d[0]?this:0*c);d=d.slice();if(c=k-q){0<c?(q=k,k=e):(c=-c,k=d);for(k.reverse();c--;k.push(0));k.reverse()}0>d.length-e.length&&(k=e,e=d,d=k);c=e.length;for(k=0;c;)k=(d[--c]=d[c]+e[c]+k)/10|0,d[c]%=10;k&&(d.unshift(k),++q);for(c=d.length;0==d[--c];d.pop());b.jd=d;b.e=q;return b};a.prototype.pow=function(b){var k=this,d=new a(1),q=d,e=0>b;(b!==~~b||-1E6>b||1E6<b)&&c("!pow!");for(b=e?-b:b;;){b&1&&(q=q.Wp(k));b>>=1;if(!b)break;k=k.Wp(k)}return e?
d.VB(q):q};a.prototype.round=function(k,d){var q=this;null==k?k=0:(k!==~~k||0>k||1E6<k)&&c("!round!");b(q=new a(q),k,null==d?a.ye:d);return q};a.prototype.sqrt=function(){var k,d,q;d=this.jd;k=this.Dd;q=this.e;var e=new a("0.5");if(!d[0])return new a(this);0>k&&c(NaN);k=Math.sqrt(this.toString());0==k||k==1/0?(k=d.join(""),k.length+q&1||(k+="0"),d=new a(Math.sqrt(k).toString()),d.e=((q+1)/2|0)-(0>q||q&1)):d=new a(k.toString());k=d.e+(a.Cc+=4);do q=d,d=e.Wp(q.NE(this.VB(q)));while(q.jd.slice(0,k).join("")!==
d.jd.slice(0,k).join(""));b(d,a.Cc-=4,a.ye);return d};a.prototype.Wp=function(b){var k,c=this.jd,d=(b=new a(b)).jd,q=c.length,e=d.length,f=this.e,h=b.e;b.Dd=this.Dd==b.Dd?1:-1;if(!c[0]||!d[0])return new a(0*b.Dd);b.e=f+h;q<e&&(k=c,c=d,d=k,h=q,q=e,e=h);for(k=Array(h=q+e);h--;k[h]=0);for(f=e;f--;){e=0;for(h=q+f;h>f;)e=k[h]+d[f]*c[h-f-1]+e,k[h--]=e%10,e=e/10|0;k[h]=(k[h]+e)%10}e&&++b.e;k[0]||k.shift();for(f=k.length;!k[--f];k.pop());b.jd=k;return b};a.prototype.toString=function(){var a=this.e,b=this.jd.join(""),
k=b.length;if(-7>=a||21<=a)b=b.charAt(0)+(1<k?"."+b.slice(1):"")+(0>a?"e":"e+")+a;else if(0>a){for(;++a;b="0"+b);b="0."+b}else if(0<a)if(++a>k)for(a-=k;a--;b+="0");else a<k&&(b=b.slice(0,a)+"."+b.slice(a));else 1<k&&(b=b.charAt(0)+"."+b.slice(1));return 0>this.Dd&&this.jd[0]?"-"+b:b};a.Cc=20;a.ye=1;return a}();a.Tn=k})(z||(z={}));(function(a){var b=function(){function b(a){this.$e=a}b.prototype.Zp=function(b,c,d){var q=new a.b,e=new a.b,f=this.$e;d.xd(b,c,function(a,b){f.ec(2*a,q);f.ec(2*b,e);return q.compare(e)})};
b.prototype.Mo=function(a){return this.$e.read(2*a+1)};return b}(),c=function(){function c(){}c.No=function(b){if(b.s())return!1;var d=b.D();return 1736==d?0==b.Mh()?!1:!0:1607==d?(d=[!1],c.qz(b,!0,d),d[0]):197==d||a.T.Lc(d)&&!b.kD()?!0:!1};c.il=function(b){var d=b.D();if(1736==d)return d=new a.Xa(b.description),b.s()||b.tA(d),d;if(1607==d)return c.qz(b,!1,null);if(197==d)return d=new a.Xa(b.description),b.s()||d.Wc(b,!1),d;if(a.T.Lc(d)){d=new a.pe(b.description);if(!b.s()&&!b.kD()){var e=new a.Va;
b.En(e);d.add(e);b.Bn(e);d.add(e)}return d}if(a.T.Km(d))return null;throw a.g.N();};c.qz=function(k,c,d){null!=d&&(d[0]=!1);var q=null;c||(q=new a.pe(k.description));if(!k.s()){var e=new a.ga(0);e.xb(2*k.ea());for(var f=0,h=k.ea();f<h;f++)if(0<k.Ha(f)&&!k.Oo(f)){var g=k.Ea(f);e.add(g);g=k.Dc(f)-1;e.add(g)}if(0<e.size){h=new a.Rr;f=k.mc(0);h.sort(e,0,e.size,new b(f));h=new a.b;f.ec(2*e.get(0),h);for(var g=0,n=1,p=new a.Va,m=new a.b,s=1,t=e.size;s<t;s++)if(f.ec(2*e.get(s),m),m.ub(h))e.get(g)>e.get(s)?
(e.set(g,2147483647),g=s):e.set(s,2147483647),n++;else{if(0==(n&1))e.set(g,2147483647);else if(c)return null!=d&&(d[0]=!0),null;h.J(m);g=s;n=1}if(0==(n&1))e.set(g,2147483647);else if(c)return null!=d&&(d[0]=!0),null;if(!c){e.xd(0,e.size,function(a,b){return a-b});s=0;for(t=e.size;s<t&&2147483647!=e.get(s);s++)k.Sd(e.get(s),p),q.add(p)}}}return c?null:q};return c}();a.Hh=c})(z||(z={}));(function(a){var b=function(){function b(){this.lf=new a.ga(0);this.Lq=new a.ga(0);this.gE=1;this.Qq=NaN}b.prototype.sort=
function(a,b,c,d){if(32>c-b)d.Zp(b,c,a);else{var e=!0;try{for(var f=Infinity,h=-Infinity,g=b;g<c;g++){var n=d.Mo(a.get(g));n<f&&(f=n);n>h&&(h=n)}if(this.reset(c-b,f,h,c-b)){for(g=b;g<c;g++){var E=a.get(g),n=d.Mo(E),p=this.oC(n);this.lf.set(p,this.lf.get(p)+1);this.Lq.write(g-b,E)}var m=this.lf.get(0);this.lf.set(0,0);for(var g=1,s=this.lf.size;g<s;g++){var t=this.lf.get(g);this.lf.set(g,m);m+=t}for(g=b;g<c;g++){var E=this.Lq.read(g-b),n=d.Mo(E),p=this.oC(n),u=this.lf.get(p);a.set(u+b,E);this.lf.set(p,
u+1)}e=!1}}catch(v){this.lf.resize(0),this.Lq.resize(0)}if(e)d.Zp(b,c,a);else{g=c=0;for(s=this.lf.size;g<s;g++)e=c,c=this.lf.get(g),c>e&&d.Zp(b+e,b+c,a);100<this.lf.size&&(this.lf.resize(0),this.Lq.resize(0))}}};b.prototype.reset=function(a,k,c,d){if(2>a||c==k)return!1;a=Math.min(b.tI,a);this.lf.xb(a);this.lf.resize(a);this.lf.dh(0,0,this.lf.size);this.gE=k;this.Lq.resize(d);this.Qq=(c-k)/(a-1);return!0};b.prototype.oC=function(b){return a.I.truncate((b-this.gE)/this.Qq)};b.tI=65536;return b}();a.Rr=
b})(z||(z={}));(function(a){var b;(function(a){a[a.enum_line=1]="enum_line";a[a.enum_arc=2]="enum_arc";a[a.enum_dummy=4]="enum_dummy";a[a.enum_concave_dip=8]="enum_concave_dip";a[a.enum_connection=3]="enum_connection"})(b||(b={}));var c=function(){function b(){}b.Ks=function(k,c,d,r,q,e){var f=new b;f.Fl=new a.b;f.Ql=new a.b;f.Lt=new a.b;f.Fl.J(k);f.Ql.J(c);f.Lt.J(d);f.qn=r;f.Rg=q;f.Ug=e;return f};b.Oa=function(k,c,d,r){var q=new b;q.Fl=new a.b;q.Ql=new a.b;q.Lt=new a.b;q.Fl.J(k);q.Ql.J(c);q.Lt.Eh();
q.qn=4;q.Rg=d;q.Ug=r;return q};return b}(),d=function(){function b(a,k,c,d,r,q){this.It=null;this.ua=0;this.Ex=a;this.yE=this.wE=0;this.Da=k;this.Pi=c;this.Cj=d;this.mp=r;this.Yb=q}b.prototype.next=function(){for(var b=new a.Va;;){if(this.ua==this.Ex.F())return null;this.Ex.Sd(this.ua,b);this.ua++;if(!b.s())break}var k=!1;null==this.It&&(this.wE=b.lk(),this.yE=b.mk(),this.It=e.buffer(b,this.Da,this.Pi,this.Cj,this.mp,this.Yb),k=!0);var c;this.ua<this.Ex.F()?(c=new a.Ka,this.It.copyTo(c)):c=this.It;
if(!k){var k=new a.Bg,d=b.lk()-this.wE,b=b.mk()-this.yE;k.Nn(d,b);c.Oe(k)}return c};b.prototype.ya=function(){return 0};return b}(),k=function(){function b(a,k){this.Ma=a;this.ua=0;this.Yo=k}b.prototype.next=function(){var b=this.Ma.U;if(this.ua<b.ea()){var k=this.ua;this.ua++;if(!b.Oo(k))for(var c=b.Fa(b.Dc(k)-1);this.ua<b.ea();){var d=b.Fa(b.Ea(this.ua));if(b.Oo(this.ua))break;if(d!=c)break;c=b.Fa(b.Dc(this.ua)-1);this.ua++}if(1==this.ua-k)return this.Ma.kB(this.Ma.U,k,this.Yo);c=new a.Xa(this.Ma.U.description);
c.Zj(this.Ma.U,k,!0);for(k+=1;k<this.ua;k++)c.ys(this.Ma.U,k,0,b.ct(k),!1);return this.Ma.kB(c,0,this.Yo)}return null};b.prototype.ya=function(){return 0};return b}(),r=function(){function a(b){this.Ma=b;this.ua=0}a.prototype.next=function(){var a=this.Ma.U;if(this.ua<a.ea()){var b=this.ua;a.oo(this.ua);for(this.ua++;this.ua<a.ea()&&!(0<a.oo(this.ua));)this.ua++;return 0==b&&this.ua==a.ea()?this.Ma.Gv(a,0,a.ea()):this.Ma.Gv(a,b,this.ua)}return null};a.prototype.ya=function(){return 0};return a}(),
e=function(){function b(a){this.Vq=this.Tt=this.Wq=this.sd=null;this.Jd=[];this.Yb=a;this.hb=this.wt=this.OP=this.Da=this.vx=this.jr=this.ka=0;this.sx=this.Cj=-1;this.Yo=!0}b.buffer=function(k,c,d,r,q,e){if(null==k)throw a.g.N();if(0>r)throw a.g.N();if(k.s())return new a.Ka(k.description);var f=new a.i;k.dd(f);0<c&&f.P(c,c);e=new b(e);e.Pi=d;e.U=k;e.ka=a.Ia.zd(d,f,!0);e.jr=a.Ia.zd(null,f,!0);e.Da=c;e.OP=k.D();0>=q&&(q=96);e.hb=Math.abs(e.Da);e.wt=0!=e.hb?1/e.hb:0;isNaN(r)||0==r?r=1E-5*e.hb:r>0.5*
e.hb&&(r=0.5*e.hb);12>q&&(q=12);k=Math.abs(c)*(1-Math.cos(Math.PI/q));k>r?r=k:(k=Math.PI/Math.acos(1-r/Math.abs(c)),k<q-1&&(q=a.I.truncate(k),12>q&&(q=12,r=Math.abs(c)*(1-Math.cos(Math.PI/q)))));e.Cj=r;e.mp=q;e.vx=Math.min(e.jr,0.25*r);return e.lB()};b.prototype.Ss=function(){if(null==this.sd)this.sd=[];else if(0!==this.sd.length)return;var b=this.pB(),b=a.I.truncate((b+3)/4),k=0.5*Math.PI/b;this.sx=k;for(var c=0;c<4*b;c++)this.sd.push(null);for(var d=Math.cos(k),k=Math.sin(k),r=a.b.Oa(0,1),c=0;c<
b;c++)this.sd[c+0*b]=a.b.Oa(r.y,-r.x),this.sd[c+1*b]=a.b.Oa(-r.x,-r.y),this.sd[c+2*b]=a.b.Oa(-r.y,r.x),this.sd[c+3*b]=r,r=a.b.Oa(r.x,r.y),r.Er(d,k)};b.prototype.lB=function(){var b=this.U.D();if(a.T.Lc(b))return b=new a.Xa(this.U.description),b.Bc(this.U,!0),this.U=b,this.lB();if(this.Da<=this.ka)if(a.T.SO(b)){if(0>=this.Da&&(b=new a.i,this.U.o(b),b.aa()<=2*-this.Da||b.ba()<=2*this.Da))return new a.Ka(this.U.description)}else return new a.Ka(this.U.description);switch(this.U.D()){case 33:return this.tK();
case 550:return this.sK();case 1607:return this.vK();case 1736:return this.uK();case 197:return this.qK();default:throw a.g.wa();}};b.prototype.vK=function(){if(this.oD(this.U)){var b=new a.Va;this.U.Sd(0,b);var c=new a.i;this.U.o(c);b.ic(c.Af());return this.Es(b)}this.U=this.SQ(this.U);b=new k(this,this.Yo);return a.wi.local().$(b,this.Pi,this.Yb).next()};b.prototype.uK=function(){if(0==this.Da)return this.U;var b=a.as.local();this.Ss();this.U=b.$(this.U,null,!1,this.Yb);if(0>this.Da){var k=this.U,
k=this.Gv(k,0,k.ea());return b.$(k,this.Pi,!1,this.Yb)}if(this.oD(this.U))return b=new a.Va,this.U.Sd(0,b),k=new a.i,this.U.o(k),b.ic(k.Af()),this.Es(b);b=new r(this);return a.wi.local().$(b,this.Pi,this.Yb).next()};b.prototype.Gv=function(k,c,d){for(var r=new a.Ka(k.description);c<d;c++)if(!(1>k.Ha(c))){var q=k.oo(c),e=new a.i;k.Ti(c,e);if(0<this.Da)if(0<q)if(this.pD(k,c))q=new a.Va,k.Sd(k.Ea(c),q),q.ic(e.Af()),this.us(r,q);else{var f=q=new a.Xa(k.description),f=a.Tr.sD(this.U,c)||2==this.sm(this.U,
c,f,!0,1)?this.jB(k,c):this.rm(q);r.add(f,!1)}else{if(!(e.aa()+this.ka<=2*this.hb||e.ba()+this.ka<=2*this.hb||(f=q=new a.Xa(k.description),this.sm(this.U,c,f,!0,1),q.s()))){var y=new a.i;y.K(e);y.P(this.hb,this.hb);f.ws(y);f=this.rm(q);e=1;for(q=f.ea();e<q;e++)r.Zj(f,e,!0)}}else if(0<q){if(!(e.aa()+this.ka<=2*this.hb||e.ba()+this.ka<=2*this.hb||(f=q=new a.Xa(k.description),this.sm(this.U,c,f,!0,-1),q.s()))){y=new a.i;f.dd(y);y.P(this.hb,this.hb);f.ws(y);f=this.rm(q);e=1;for(q=f.ea();e<q;e++)r.Zj(f,
e,!0)}}else{f=q=new a.Xa(k.description);this.sm(this.U,c,f,!0,-1);f=this.rm(q);e=0;for(q=f.ea();e<q;e++)r.Zj(f,e,!0)}}if(0<this.Da)return 1<r.ea()?this.rm(r):b.Id(r);k=new a.i;r.dd(k);if(r.s())return b.Id(r);k.P(this.hb,this.hb);r.ws(k);r=this.rm(r);k=new a.Ka(r.description);e=1;for(q=r.ea();e<q;e++)k.Zj(r,e,!1);return b.Id(k)};b.prototype.tK=function(){return this.Es(this.U)};b.prototype.Es=function(b){var k=new a.Ka(this.U.description);this.us(k,b);return this.nS(k)};b.prototype.sK=function(){var b=
new d(this.U,this.Da,this.Pi,this.Cj,this.mp,this.Yb);return a.wi.local().$(b,this.Pi,this.Yb).next()};b.prototype.qK=function(){var b=new a.Ka(this.U.description);if(0>=this.Da){if(0==this.Da)b.Wc(this.U,!1);else{var k=new a.Vj;this.U.Fp(k);k.P(this.Da,this.Da);b.Wc(k,!1)}return b}b.Wc(this.U,!1);this.U=b;return this.jB(b,0)};b.prototype.jB=function(k,c){this.Ss();for(var d=new a.Ka(k.description),r=new a.b,q=new a.b,e=new a.b,f=new a.b,y=new a.b,h=new a.b,g=new a.b,n=new a.b,p=k.Ha(c),m=k.Ea(c),
s=0,t=k.Ha(c);s<t;s++){k.w(m+s,q);k.w(m+(s+1)%p,f);k.w(m+(s+2)%p,h);g.pc(f,q);if(0==g.length())throw a.g.wa();g.tt();g.normalize();g.scale(this.hb);r.add(g,q);e.add(g,f);0==s?d.Nr(r):d.Lm(r);d.Lm(e);n.pc(h,f);if(0==n.length())throw a.g.wa();n.tt();n.normalize();n.scale(this.hb);y.add(n,f);this.NA(d,f,e,y,!1)}return b.Id(d)};b.prototype.kB=function(b,k,c){this.Ss();if(1>b.Ha(k))return null;if(this.pD(b,k)&&0<this.Da){c=new a.Va;b.Sd(b.Ea(k),c);var d=new a.i;b.Ti(k,d);c.ic(d.Af());return this.Es(c)}d=
new a.Xa(b.description);if(b.Oo(k))this.sm(b,k,d,c,1),this.sm(b,k,d,c,-1);else{var r=new a.Xa(b.description);r.Zj(b,k,!1);r.ys(b,k,0,b.ct(k),!1);this.sm(r,0,d,c,1)}return this.rm(d)};b.prototype.rm=function(b){return a.Of.Qj(b,this.jr,!0,!0,this.Yb)};b.prototype.pB=function(){if(0==this.Cj)return this.mp;var b=1-this.Cj*Math.abs(this.wt),k;-1>b?k=4:k=2*Math.PI/Math.acos(b)+0.5;4>k?k=4:k>this.mp&&(k=this.mp);return a.I.truncate(k)};b.prototype.NA=function(b,k,c,d,r){this.Ss();var q=new a.b;q.pc(c,
k);q.scale(this.wt);var e=new a.b;e.pc(d,k);e.scale(this.wt);q=Math.atan2(q.y,q.x)/this.sx;0>q&&(q=this.sd.length+q);q=this.sd.length-q;e=Math.atan2(e.y,e.x)/this.sx;0>e&&(e=this.sd.length+e);e=this.sd.length-e;e<q&&(e+=this.sd.length);var f=a.I.truncate(e),e=a.I.truncate(Math.ceil(q)),q=new a.b;q.J(this.sd[e%this.sd.length]);q.Fr(this.hb,k);var y=10*this.ka;q.sub(c);q.length()<y&&(e+=1);q.J(this.sd[f%this.sd.length]);q.Fr(this.hb,k);q.sub(d);q.length()<y&&--f;c=f-e;c++;f=0;for(e%=this.sd.length;f<
c;f++,e=(e+1)%this.sd.length)q.J(this.sd[e]),q.Fr(this.hb,k),b.Lm(q);r&&b.Lm(d)};b.prototype.sm=function(b,k,d,r,q){var e=new a.fd,f=e.QJ(b,k);e.xo(this.vx,!1,!1);if(2>e.F(f)){if(0>q)return 1;q=b;e=new a.Va;q.Sd(q.Ea(k),e);this.us(d,e);return 1}var y=e.Fa(e.Cb(e.Vb(f))),h=new a.Bg;h.Nn(-y.x,-y.y);e.Oe(h);if(r&&(this.MM(e,f,q),2>e.F(f))){if(0>q)return 1;q=b;e=new a.Va;q.Sd(q.Ea(k),e);this.us(d,e);return 1}this.Jd.length=0;var g=e.Vb(f);k=e.Cb(g);var D=1==q?e.Ua(k):e.X(k);b=1==q?e.X(k):e.Ua(k);var n=
!0;r=new a.b;for(var f=new a.b,p=new a.b,m=new a.b,s=new a.b,t=new a.b,u=new a.b,v=new a.b,w=new a.b,x=new a.b,A=this.hb,g=e.Ha(g),G=0;G<g;G++)e.w(b,f),n&&(e.w(k,r),e.w(D,p),v.pc(r,p),v.normalize(),x.zD(v),x.scale(A),m.add(x,r)),u.pc(f,r),u.normalize(),w.zD(u),w.scale(A),s.add(r,w),D=v.Ai(u),n=v.ml(u),0>D||0>n&&0==D?this.Jd.push(c.Ks(m,s,r,2,this.Jd.length+1,this.Jd.length-1)):m.ub(s)||(this.Jd.push(c.Oa(m,r,this.Jd.length+1,this.Jd.length-1,"dummy")),this.Jd.push(c.Oa(r,s,this.Jd.length+1,this.Jd.length-
1,"dummy"))),t.add(f,w),this.Jd.push(c.Ks(s,t,r,1,this.Jd.length+1,this.Jd.length-1)),m.J(t),x.J(w),p.J(r),r.J(f),v.J(u),D=k,k=b,n=!1,b=1==q?e.X(k):e.Ua(k);this.Jd[this.Jd.length-1].Rg=0;this.Jd[0].Ug=this.Jd.length-1;this.UQ(d);h.Nn(y.x,y.y);d.ZA(h,d.ea()-1);return 1};b.prototype.UQ=function(a){for(var b=this.aL(),k=!0,c=b+1,d=b;c!=b;d=c){var r=this.Jd[d],c=-1!=r.Rg?r.Rg:(d+1)%this.Jd.length;0!=r.qn&&(k&&a.Nr(r.Fl),2==r.qn?this.NA(a,r.Lt,r.Fl,r.Ql,!0):a.Lm(r.Ql),k=!1)}};b.prototype.aL=function(){null==
this.Vq&&(this.Vq=[null,null,null,null,null,null,null,null,null]);for(var b=0,k=0,c=this.Jd.length;k<c;){var d=this.Jd[k];if(0!=(d.qn&3)){b=k;break}k=d.Rg}c=b+1;for(k=b;c!=b;k=c){for(var d=this.Jd[k],c=d.Rg,r=1,q=null;c!=k;){q=this.Jd[c];if(0!=(q.qn&3))break;c=q.Rg;r++}1!=r&&1==(d.qn&q.qn)&&(null==this.Wq&&(this.Wq=new a.yb,this.Tt=new a.yb),this.Wq.ed(d.Fl),this.Wq.vd(d.Ql),this.Tt.ed(q.Fl),this.Tt.vd(q.Ql),1==this.Wq.Ga(this.Tt,this.Vq,null,null,this.jr)&&(d.Ql.J(this.Vq[0]),q.Fl.J(this.Vq[0]),
d.Rg=c,q.Ug=k))}return b};b.prototype.rt=function(b,k,c){var d=new a.b;d.pc(c,b);c=d.length();c=this.hb*this.hb-0.25*c*c;if(0<c){c=Math.sqrt(c);d.normalize();d.Kp();var r=new a.b;r.pc(k,b);if(r.ml(d)+c>=this.hb)return!0}return!1};b.prototype.MM=function(b,k,c){for(var d=0;1>d;d++){var r=!1,q=b.Vb(k),e=b.Ha(q);if(0==e)break;var f=e;if(3>e)break;!b.vc(q)&&(f=e-1);for(var q=b.Cb(q),e=0<c?b.Ua(q):b.X(q),y=0<c?b.X(q):b.Ua(q),h=e,g=!0,D=new a.b,n=new a.b,p=new a.b,m=new a.b,s=new a.b,t=a.b.Oa(0,0),u=new a.b,
v=new a.b,N=new a.b,w=new a.b,x=this.hb,A=0,G=0;G<f;){b.w(y,n);g&&(b.w(q,D),b.w(e,p),h=e);v.pc(D,p);v.normalize();u.pc(n,D);u.normalize();if(h==y)break;var B=v.Ai(u),z=v.ml(u),C=!0;0>B||0>z&&0==B||!this.rt(p,D,n)||(t.J(n),C=!1,++A,r=!0);if(C){if(0<A)for(;;){B=0<c?b.Ua(h):b.X(h);if(B==q)break;b.w(B,m);if(this.rt(m,p,t))p.J(m),h=B,C=!1,++A;else{B!=y&&this.rt(m,p,n)&&this.rt(m,D,n)&&(p.J(m),h=B,C=!1,++A);break}}if(!C)continue;if(0<A){h=0<c?b.Ua(e):b.X(e);for(g=1;g<A;g++)C=0<c?b.Ua(h):b.X(h),b.vf(h,!0),
h=C;N.pc(D,p);A=N.length();A=x*x-0.25*A*A;A=Math.sqrt(A);x-A>0.5*this.Cj?(s.add(p,D),s.scale(0.5),N.normalize(),N.Kp(),w.J(N),w.scale(x-A),s.add(w),b.Yi(e,s)):b.vf(e,!0);A=0}p.J(D);h=q}D.J(n);e=q;q=y;y=0<c?b.X(q):b.Ua(q);G++;g=!1}if(0<A){h=0<c?b.Ua(e):b.X(e);for(g=1;g<A;g++)C=0<c?b.Ua(h):b.X(h),b.vf(h,!0),h=C;s.add(p,D);s.scale(0.5);N.pc(D,p);A=N.length();A=x*x-0.25*A*A;A=Math.sqrt(A);N.normalize();N.Kp();w.J(N);w.scale(x-A);s.add(w);b.Yi(e,s)}b.xo(this.vx,!1,!1);if(!r)break}};b.prototype.pD=function(b,
k){if(1==b.Ha(k))return!0;var c=new a.i;b.Ti(k,c);return Math.max(c.aa(),c.ba())<0.5*this.Cj?!0:!1};b.prototype.oD=function(b){var k=new a.i;b.o(k);return Math.max(k.aa(),k.ba())<0.5*this.Cj?!0:!1};b.prototype.SQ=function(b){b=a.Sz.local().$(b,0.25*this.Cj,!1,this.Yb);for(var k=0,c=0,d=b.ea();c<d;c++)k=Math.max(b.Ha(c),k);if(32>k)return this.Yo=!1,b;this.Yo=!0;return a.Of.Qj(b,this.jr,!1,!0,this.Yb)};b.prototype.us=function(b,k){var c=k.w();if(null!=this.sd&&0!==this.sd.length){var d=new a.b;d.J(this.sd[0]);
d.Fr(this.hb,c);b.Nr(d);for(var r=1,q=this.sd.length;r<q;r++)d.J(this.sd[r]),d.Fr(this.hb,c),b.Lm(d)}else for(var r=this.pB(),d=a.I.truncate((r+3)/4),r=0.5*Math.PI/d,q=Math.cos(r),e=Math.sin(r),f=new a.b,y=3;0<=y;y--)switch(f.ma(0,this.hb),y){case 0:for(r=0;r<d;r++)b.wj(f.x+c.x,f.y+c.y),f.Er(q,e);break;case 1:for(r=0;r<d;r++)b.wj(-f.y+c.x,f.x+c.y),f.Er(q,e);break;case 2:for(r=0;r<d;r++)b.wj(-f.x+c.x,-f.y+c.y),f.Er(q,e);break;default:b.Uy(f.y+c.x,-f.x+c.y);for(r=1;r<d;r++)f.Er(q,e),b.wj(f.y+c.x,-f.x+
c.y)}};b.Id=function(a){a.hg(1,0);return a};b.prototype.nS=function(a){a.hg(2,this.ka);a.hl();return a};return b}();a.UG=e})(z||(z={}));(function(a){var b=function(){function b(c){this.Qb=c;this.a=new a.fd;this.vg=new a.ga(0)}b.prototype.po=function(a,b,c){switch(b){case 0:if(a.v<c&&a.B<=c)break;else return a.v>=c?1:-1;case 1:if(a.C<c&&a.G<=c)break;else return a.C>=c?1:-1;case 2:if(a.v>=c&&a.B>c)break;else return a.B<=c?1:-1;case 3:if(!(a.C>=c&&a.G>c))return a.G<=c?1:-1}return 0};b.prototype.cL=function(a,
b){return 1736==a.D()?this.dL(a,b):this.eL(a)};b.prototype.dL=function(b,k){if(0==this.Qb.aa()||0==this.Qb.ba())return b.Pa();var c=new a.i;b.dd(c);this.U=this.a.Eb(b);var d=new a.i,e=new a.i,f=new a.b,h=new a.b,g=[0,0,0,0,0,0,0,0,0],n=[0,0,0,0,0,0,0,0,0];new a.Ag;var p=new a.yb,m=new a.ga(0);m.xb(Math.min(100,b.F()));for(var s=!1,t=0;!s&&4>t;t++){var u=!1,v=0!=(t&1),N=0;switch(t){case 0:N=this.Qb.v;u=c.v<=N&&c.B>=N;break;case 1:N=this.Qb.C;u=c.C<=N&&c.G>=N;break;case 2:N=this.Qb.B;u=c.v<=N&&c.B>=
N;break;case 3:N=this.Qb.G,u=c.C<=N&&c.G>=N}if(u){s=!0;for(u=this.a.Vb(this.U);-1!=u;){var w=-1,x=-1,A=this.a.Cb(u),G=A;do{var B=this.a.cc(G);null==B&&(B=p,this.a.w(G,f),B.ed(f),this.a.w(this.a.X(G),h),B.vd(h));B.o(d);var z=this.po(d,t,N),C=0,L=-1;if(-1==z){B=B.nt(v,N,g,n);0<B?C=this.a.Mr(G,n,B):C=0;for(var C=C+1,K=G,M=this.a.X(K),B=0;B<C;B++){this.a.w(K,f);this.a.w(M,h);L=this.a.cc(K);null==L&&(L=p,L.ed(f),L.vd(h));L.o(e);L=this.po(e,t,N);if(-1==L){if(v)L=Math.abs(f.y-N),O=Math.abs(h.y-N),L<O?(f.y=
N,this.a.Yi(K,f)):(h.y=N,this.a.Yi(M,h));else{var L=Math.abs(f.x-N),O=Math.abs(h.x-N);L<O?(f.x=N,this.a.Yi(K,f)):(h.x=N,this.a.Yi(M,h))}L=this.a.cc(K);null==L&&(L=p,L.ed(f),L.vd(h));L.o(e);L=this.po(e,t,N)}O=w;w=L;-1==x&&(x=w);if(0!=O||1!=w)1==O&&0==w||0!=O||0!=w||m.add(K);1==w&&(s=!1);L=K=M;M=this.a.X(M)}}if(0==C){O=w;w=z;-1==x&&(x=w);if(0!=O||1!=w)1==O&&0==w||0!=O||0!=w||m.add(G);1==w&&(s=!1);L=this.a.X(G)}G=L}while(G!=A);0==x&&0==w&&m.add(A);B=0;for(w=m.size;B<w;B++)x=m.get(B),this.a.vf(x,!1);
m.clear(!1);u=3>this.a.Ha(u)?this.a.Cr(u):this.a.bc(u)}}}if(s)return b.Pa();this.AR();0<k&&this.gM(k);return this.a.hf(this.U)};b.prototype.eL=function(b){var k=new a.i,c=new a.i,d=[0,0,0,0,0,0,0,0,0],e=[0,0,0,0,0,0,0,0,0],f=new a.Ag,h=b,g=new a.i;b.dd(g);for(var n=0;4>n;n++){var p=!1,m=0!=(n&1),s=0;switch(n){case 0:s=this.Qb.v;p=g.v<=s&&g.B>=s;break;case 1:s=this.Qb.C;p=g.C<=s&&g.G>=s;break;case 2:s=this.Qb.B;p=g.v<=s&&g.B>=s;break;case 3:s=this.Qb.G,p=g.C<=s&&g.G>=s}if(p){p=h;h=b.Pa();p=p.Ca();
p.Lk();for(var t,u=new a.b;p.kb();)for(var v,N=!0;p.La();){var w=p.ia();w.o(k);var x=this.po(k,n,s);if(-1==x){if(x=w.nt(m,s,d,e),0<x){var A=0;t=w.Mb();for(var G=0;G<=x;G++)if(v=G<x?e[G]:1,A!=v){w.Bi(A,v,f);var B=f.get();B.ed(t);G<x&&(m?(u.x=d[G],u.y=s):(u.x=s,u.y=d[G]),B.vd(u));B.o(c);var z=this.po(c,n,s);if(-1==z){t=B.Mb();A=B.oc();if(m)z=Math.abs(t.y-s),C=Math.abs(A.y-s),z<C?(t.y=s,B.ed(t)):(A.y=s,B.vd(A));else{var z=Math.abs(t.x-s),C=Math.abs(A.x-s);z<C?(t.x=s,B.ed(t)):(A.x=s,B.vd(A))}B.o(c);z=
this.po(c,n,s)}t=B.oc();A=v;v=z;1==v?(h.Bc(B,N),N=!1):N=!0}}}else v=x,1==v?(h.Bc(w,N),N=!1):N=!0}}}return h};b.prototype.AR=function(){this.vn=-1;this.Nu(!1,this.Qb.v);this.Nu(!1,this.Qb.B);this.Nu(!0,this.Qb.C);this.Nu(!0,this.Qb.G);this.vg.resize(0);this.vg.xb(100);this.vn=this.a.re();for(var b=new a.b,k=this.a.Vb(this.U);-1!=k;k=this.a.bc(k))for(var c=this.a.Cb(k),d=0,e=this.a.Ha(k);d<e;d++,c=this.a.X(c))if(this.a.w(c,b),this.Qb.v==b.x||this.Qb.B==b.x||this.Qb.C==b.y||this.Qb.G==b.y)this.a.lb(c,
this.vn,this.vg.size),this.vg.add(c);this.zu(!1,this.Qb.v);this.zu(!1,this.Qb.B);this.zu(!0,this.Qb.C);this.zu(!0,this.Qb.G);this.WM()};b.prototype.gM=function(b){for(var k=new a.b,c=new a.b,d=a.I.Lh(2048,0),e=this.a.Vb(this.U);-1!=e;e=this.a.bc(e)){var f=this.a.Cb(e),h=f;do{var g=this.a.X(h);this.a.w(h,k);var n=-1;k.x==this.Qb.v?(this.a.w(g,c),c.x==this.Qb.v&&(n=1)):k.x==this.Qb.B&&(this.a.w(g,c),c.x==this.Qb.B&&(n=1));k.y==this.Qb.C?(this.a.w(g,c),c.y==this.Qb.C&&(n=0)):k.y==this.Qb.G&&(this.a.w(g,
c),c.y==this.Qb.G&&(n=0));if(-1!=n&&(n=a.b.Fb(k,c),n=a.I.truncate(Math.min(Math.ceil(n/b),2048)),!(1>=n))){for(var p=1;p<n;p++)d[p-1]=1*p/n;this.a.Mr(h,d,n-1)}h=g}while(h!=f)}};b.prototype.Nu=function(b,k){var c=this.a.re(),d=new a.b,e=new a.ga(0);e.xb(100);for(var f=this.a.Vb(this.U);-1!=f;f=this.a.bc(f))for(var h=this.a.Cb(f),g=0,n=this.a.Ha(f);g<n;g++){var p=this.a.X(h);this.a.w(h,d);if(b?d.y==k:d.x==k)if(this.a.w(p,d),b?d.y==k:d.x==k)1!=this.a.Ra(h,c)&&(e.add(h),this.a.lb(h,c,1)),1!=this.a.Ra(p,
c)&&(e.add(p),this.a.lb(p,c,1));h=p}this.a.bf(c);if(!(3>e.size)){var m=this;e.xd(0,e.size,function(a,b){return m.kj(a,b)});c=new a.b;f=new a.b;h=new a.b;f.Eh();for(var s=-1,g=new a.ga(0),n=new a.ga(0),p=this.a.re(),t=this.a.re(),u=0,v=e.size;u<v;u++){var N=e.get(u);this.a.w(N,d);if(!d.ub(f)){if(-1!=s){for(var w=s;w<u;w++){var s=e.get(w),x=this.a.X(s),N=this.a.Ua(s),A=!1;0>this.kj(s,x)&&(this.a.w(x,c),b?c.y==k:c.x==k)&&(g.add(s),A=!0,this.a.lb(s,t,1));0>this.kj(s,N)&&(this.a.w(N,c),b?c.y==k:c.x==k)&&
(A||g.add(s),this.a.lb(s,p,1))}w=0;for(A=g.size;w<A;w++){s=g.get(w);N=this.a.Ra(s,p);x=this.a.Ra(s,t);if(1==N){N=this.a.Ua(s);this.a.w(N,h);var G=[0];G[0]=0;if(!h.ub(d)){var B=a.b.Fb(f,h);G[0]=a.b.Fb(h,d)/B;0==G[0]?G[0]=2.220446049250313E-16:1==G[0]&&(G[0]=0.9999999999999998);this.a.Mr(N,G,1);N=this.a.Ua(s);this.a.Yi(N,d);n.add(N);this.a.lb(N,p,1);this.a.lb(N,t,-1)}}1==x&&(x=this.a.X(s),this.a.w(x,h),G=[0],G[0]=0,h.ub(d)||(B=a.b.Fb(f,h),G[0]=a.b.Fb(f,d)/B,0==G[0]?G[0]=2.220446049250313E-16:1==G[0]&&
(G[0]=0.9999999999999998),this.a.Mr(s,G,1),N=this.a.X(s),this.a.Yi(N,d),n.add(N),this.a.lb(N,p,-1),this.a.lb(N,t,1)))}s=g;g=n;n=s;n.clear(!1)}s=u;f.J(d)}}this.a.bf(p);this.a.bf(t)}};b.prototype.zu=function(b,k){var c=new a.b,d=new a.ga(0);d.xb(100);for(var e=this.a.re(),f=0,h=this.vg.size;f<h;f++){var g=this.vg.get(f);if(-1!=g){var n=this.a.X(g);this.a.w(g,c);if(b?c.y==k:c.x==k)if(this.a.w(n,c),b?c.y==k:c.x==k)-2!=this.a.Ra(g,e)&&(d.add(g),this.a.lb(g,e,-2)),-2!=this.a.Ra(n,e)&&(d.add(n),this.a.lb(n,
e,-2))}}if(0!=d.size){var p=this;d.xd(0,d.size,function(a,b){return p.kj(a,b)});f=0;for(h=d.size;f<h;f++){var m=d.get(f);this.a.lb(m,e,f)}g=new a.b;n=new a.b;n.Eh();for(var s=-1,f=0,h=d.size;f<h;f++)if(m=d.get(f),-1!=m&&(this.a.w(m,c),!c.ub(n))){if(-1!=s)for(;;){for(var m=!1,t=1<f-s?f-1:f,u=s;u<t;u++){var v=d.get(u);if(-1!=v){var N=-1,w=this.a.X(v);0>this.kj(v,w)&&(this.a.w(w,g),b?g.y==k:g.x==k)&&(N=w);var w=-1,x=this.a.Ua(v);0>this.kj(v,x)&&(this.a.w(x,g),b?g.y==k:g.x==k)&&(w=x);if(-1!=N&&-1!=w)this.no(v,
d,e),this.a.vf(v,!1),this.no(N,d,e),this.a.vf(N,!1),m=!0;else if(-1!=N||-1!=w){for(x=u+1;x<f;x++){var A=d.get(x);if(-1!=A){var G=this.a.X(A),B=-1;0>this.kj(A,G)&&(this.a.w(G,g),b?g.y==k:g.x==k)&&(B=G);var G=this.a.Ua(A),z=-1;0>this.kj(A,G)&&(this.a.w(G,g),b?g.y==k:g.x==k)&&(z=G);if(-1!=B&&-1!=z){this.no(A,d,e);this.a.vf(A,!1);this.no(B,d,e);this.a.vf(B,!1);m=!0;break}if(-1!=N&&-1!=z){this.dF(d,v,N,A,z,e);m=!0;break}else if(-1!=w&&-1!=B){this.dF(d,A,B,v,w,e);m=!0;break}}}if(m)break}}}if(!m)break}s=
f;n.J(c)}}this.a.bf(e)};b.prototype.no=function(a,b,c){c=this.a.Ra(a,c);b.set(c,-1);c=this.a.Ra(a,this.vn);this.vg.set(c,-1);b=this.a.rd(a);-1!=b&&this.a.Cb(b)==a&&(this.a.Dh(b,-1),this.a.Wi(b,-1))};b.prototype.dF=function(a,b,c,d,e,f){this.a.Sc(b,d);this.a.Tc(d,b);this.a.Tc(c,e);this.a.Sc(e,c);this.no(d,a,f);this.a.Ui(d,!1);this.no(e,a,f);this.a.Ui(e,!0)};b.prototype.WM=function(){for(var a=0,b=this.vg.size;a<b;a++){var c=this.vg.get(a);-1!=c&&this.a.im(c,-1)}for(var d=0,e=0,f=this.a.Vb(this.U);-1!=
f;){var h=this.a.Cb(f);if(-1==h||f!=this.a.rd(h)){var g=f,f=this.a.bc(f);this.a.Dh(g,-1);this.a.yu(g)}else{c=h;g=0;do this.a.im(c,f),g++,c=this.a.X(c);while(c!=h);2>=g?(c=this.a.Ra(h,this.vn),this.vg.set(c,-1),h=this.a.vf(h,!1),2==g&&(c=this.a.Ra(h,this.vn),this.vg.set(c,-1),this.a.vf(h,!1)),g=f,f=this.a.bc(f),this.a.Dh(g,-1),this.a.yu(g)):(this.a.Jr(f,!1),this.a.Wi(f,this.a.Ua(h)),this.a.hm(f,g),e+=g,d++,f=this.a.bc(f))}}a=0;for(b=this.vg.size;a<b;a++)if(c=this.vg.get(a),-1!=c&&(f=this.a.rd(c),-1==
f)){f=this.a.Cf(this.U,-1);g=0;h=c;do this.a.im(c,f),g++,c=this.a.X(c);while(c!=h);2>=g?(c=this.a.Ra(h,this.vn),this.vg.set(c,-1),h=this.a.vf(h,!1),2==g&&(c=this.a.Ra(h,this.vn),0<=c&&this.vg.set(c,-1),this.a.vf(h,!1)),g=f,this.a.Dh(g,-1),this.a.yu(g)):(this.a.Gn(f,!0),this.a.hm(f,g),this.a.Dh(f,h),this.a.Wi(f,this.a.Ua(h)),this.a.Jr(f,!1),e+=g,d++)}this.a.gm(this.U,d);this.a.Pk(this.U,e);a=0;for(b=this.a.$c;-1!=b;b=this.a.we(b))a+=this.a.F(b);this.a.ZF(a)};b.Xk=function(a,k,c){return(new b(k)).cL(a,
c)};b.clip=function(c,k,d,e){if(c.s())return c;if(k.s())return c.Pa();d=c.D();if(33==d)return e=c.w(),k.contains(e)?c:c.Pa();if(197==d)return e=new a.i,c.o(e),e.Ga(k)?(k=new a.Vj,c.copyTo(k),k.Cu(e),k):c.Pa();var f=new a.i;c.dd(f);if(k.contains(f))return c;if(!k.jc(f))return c.Pa();f=c.pb;if(null!=f&&(f=f.hi,null!=f)){f=f.Dn(k);if(1==f){if(1736!=d)throw a.g.wa();c=new a.Ka(c.description);c.ws(k);return c}if(0==f)return c.Pa()}switch(d){case 550:d=null;for(var f=c.F(),h=c.mc(0),g=0,n=0;n<f;n++)e=new a.b,
h.ec(2*n,e),k.contains(e)||(0==g&&(d=c.Pa()),g<n&&d.Pd(c,g,n),g=n+1);0<g&&d.Pd(c,g,f);return 0==g?c:d;case 1736:case 1607:return b.Xk(c,k,e);default:throw a.g.wa();}};b.prototype.kj=function(b,k){var c=new a.b;this.a.w(b,c);var d=new a.b;this.a.w(k,d);return c.compare(d)};return b}();a.Ed=b})(z||(z={}));(function(a){var b=new a.b,c=function(){function b(k,c,d,q,e){this.Ml=new a.b;this.ln=new a.b;this.Ck=new a.b;this.a=k;this.Px=d;this.bn=q;this.Ml=c;this.vk=e;this.ln.Eh();this.Ck.Eh()}b.prototype.sB=
function(b){this.a.w(b,this.ln);b=a.I.truncate((this.ln.x-this.Ml.x)*this.bn+0.5);var k=a.I.truncate((this.ln.y-this.Ml.y)*this.bn+0.5);return d.XC(b,k)};b.prototype.vw=function(a){return this.a.Ra(a,this.vk)};return b}();a.wT=function(){return function(){}}();var d=function(){function k(){this.Ml=new a.b;this.Zo=[0,0,0,0];this.Kq=[0,0,0,0];this.en=this.vk=-1}k.zM=function(a,b){var c=new k;c.a=a;c.ka=b;c.Px=b*b;c.Kt=2*b;c.bn=1/c.Kt;return c.fL()};k.Vw=function(a,b,k,c,d){a-=k;b-=c;return a*a+b*b<=
d};k.XC=function(b,k){return a.I.kg(k,a.I.kg(b))};k.prototype.hL=function(c,d){this.a.uc(c,b);for(var q=(b.y-this.Ml.y)*this.bn,e=a.I.truncate((b.x-this.Ml.x)*this.bn),f=a.I.truncate(q),h=q=0;1>=h;h+=1)for(var g=0;1>=g;g+=1){var n=k.XC(e+h,f+g),p=this.uk.DN(n);-1!=p&&(this.Zo[q]=p,this.Kq[q]=n,q++)}for(e=q-1;1<=e;e--){p=this.Zo[e];for(f=e-1;0<=f;f--)if(p==this.Zo[f]){this.Kq[f]=-1;q--;e!=q&&(this.Kq[e]=this.Kq[q],this.Zo[e]=this.Zo[q]);break}}for(f=0;f<q;f++)this.iL(c,this.Kq[f],b,this.Zo[f],d)};
k.prototype.iL=function(b,c,d,q,e){for(var f=new a.b;-1!=q;q=this.uk.SN(q)){var h=this.uk.da(q);b==h||-1!=c&&this.a.Ra(h,this.vk)!=c||(this.a.uc(h,f),k.Vw(d.x,d.y,f.x,f.y,this.Px)&&e.add(q))}};k.prototype.Tl=function(a,b,k){var c=this.a.Ra(a,this.en),d=this.a.Ra(b,this.en);-1==c&&(c=this.nd.jh(),this.nd.addElement(c,a),this.a.lb(a,this.en,c));-1==d?this.nd.addElement(c,b):this.nd.Qv(c,d);this.a.lb(b,this.en,-2);b=this.aQ(a,b);k&&(k=this.St.sB(a),this.a.lb(a,this.vk,k));return b};k.$P=function(b,c,
d){b.lc(c);d=b;var q=new a.b;k.HH(b.w(),c.w(),q);d.ic(q)};k.HH=function(a,b,k){var c=a.x;a.x!=b.x&&(c=(1*a.x+1*b.x)/2);var d=a.y;a.y!=b.y&&(d=(1*a.y+1*b.y)/2);k.ma(c,d)};k.prototype.aQ=function(b,k){var c=new a.b;this.a.w(b,c);var d=new a.b;this.a.w(k,d);var q=this.a.RC(b),e=this.a.RC(k),f=q+e,h=0,g=c.x;c.x!=d.x&&(g=(c.x*q+d.x*e)/f,h++);var n=c.y;c.y!=d.y&&(n=(c.y*q+d.y*e)/f,h++);0<h&&this.a.ic(b,g,n);this.a.pS(b,f);return 0!=h};k.prototype.fL=function(){var b=this.a.pd,k=this.a.wC();this.Ml=k.yw();
k=Math.max(k.ba(),k.aa())/2147483646;this.Kt<k&&(this.Kt=k,this.bn=1/this.Kt);this.nd=new a.Ur;this.nd.Dr(a.I.truncate(this.a.pd/3+1));this.nd.$l(a.I.truncate(this.a.pd/3+1));this.vk=this.a.re();this.en=this.a.re();this.St=new c(this.a,this.Ml,this.Px,this.bn,this.vk);this.uk=new a.AH(a.I.truncate(4*b/3),this.St);this.uk.wR(this.a.pd);b=!1;for(k=this.a.$c;-1!=k;k=this.a.we(k))for(var d=this.a.Vb(k);-1!=d;d=this.a.bc(d))for(var q=this.a.Cb(d),e=0,f=this.a.Ha(d);e<f;e++){var h=this.St.sB(q);this.a.lb(q,
this.vk,h);this.uk.addElement(q,h);q=this.a.X(q)}var g=new a.ga(0);g.xb(10);for(k=this.a.$c;-1!=k;k=this.a.we(k))for(d=this.a.Vb(k);-1!=d;d=this.a.bc(d)){q=this.a.Cb(d);e=0;for(f=this.a.Ha(d);e<f;e++){if(-2!=this.a.Ra(q,this.en)){h=this.a.Ra(q,this.vk);for(this.uk.Jc(q,h);;){this.hL(q,g);if(0==g.size)break;for(var h=!1,n=0,p=g.size;n<p;n++){var m=g.get(n),s=this.uk.da(m);this.uk.kd(m);h=this.Tl(q,s,n+1==p)||h}b=b||h;g.clear(!1);if(!h)break}}q=this.a.X(q)}}b&&this.ZJ();this.St=this.uk=null;this.a.bf(this.vk);
this.a.bf(this.en);return b};k.prototype.ZJ=function(){for(var b=new a.b,k=this.nd.Wd;-1!=k;k=this.nd.Cw(k)){var c=this.nd.gc(k);this.a.w(this.nd.da(c),b);for(c=this.nd.bb(c);-1!=c;c=this.nd.bb(c))this.a.Yi(this.nd.da(c),b)}};return k}();a.Sr=d})(z||(z={}));(function(a){var b=Math.PI,c=2*Math.PI,d=Math.PI/2,k=function(){function a(){}a.yL=function(b,k){var c=new a;c.x=b;c.y=k;c.type=0;c.mh=0;return c};a.um=function(b){var k=new a;k.x=b.x;k.y=b.y;k.type=0;k.mh=0;return k};a.xL=function(b){var k=new a;
k.x=b.x;k.y=b.y;k.type=b.type;k.mh=b.mh;return k};a.Ad=function(b,k,c){var d=new a;d.x=b.x+k*Math.cos(c);d.y=b.y+k*Math.sin(c);d.type=b.type;d.mh=b.mh;return d};a.Js=function(b,k){var c=new a;c.x=0.5*(b.x+k.x);c.y=0.5*(b.y+k.y);c.type=b.type;c.mh=b.mh;return c};a.LB=function(b,k){var c=new a;c.x=b.x+0.001*(k.x-b.x);c.y=b.y+0.001*(k.y-b.y);c.type=b.type;c.mh=b.mh;return c};return a}(),r=function(){return function(){}}();(function(a){a[a.Round=0]="Round";a[a.Bevel=1]="Bevel";a[a.Miter=2]="Miter";a[a.Square=
3]="Square"})(a.EH||(a.EH={}));var e=function(){function e(a){this.Kx=this.Ib=this.dg=null;this.oe=a}e.$=function(b,k,c,d,r,q){if(null==b)throw a.g.N();if(1>b.fb())throw a.g.N();if(0==k||b.s())return b;q=new e(q);q.$m=b;q.Da=k;q.ka=r;q.bi=c;q.Dx=d;return q.hv()};e.prototype.hJ=function(){var b=this.$m,k=b.Mb(),c=b.oc(),d=new a.b;d.pc(c,k);d.normalize();d.tt();d.scale(this.Da);k.add(d);c.add(d);d=b.Pa();b.ed(k);b.vd(c);return d};e.prototype.gJ=function(){var b=this.$m;if(0<this.Da&&2!=this.bi){var k=
new a.Ka;k.Wc(b,!1);this.$m=k;return this.hv()}b=new a.Vj(b.R);b.P(this.Da,this.Da);return b};e.prototype.rF=function(a,b,k,c){return(b.x-a.x)*(c.x-k.x)+(b.y-a.y)*(c.y-k.y)};e.prototype.Ub=function(a,b){if(void 0===b)this.Ib.push(a),this.Xe++;else if(0==this.Xe)this.Ub(a);else{var c=this.eu,r,e;r=this.dg[0==b?c-1:b-1];e=this.dg[b];var f=this.rF(r,e,this.Ib[this.Xe-1],a);0<f?this.Ub(a):0>f&&(0<this.rF(r,e,e,this.Ib[this.Xe-1])?(e=this.dg[0==b?c-2:1==b?c-1:b-2],c=k.Ad(r,this.Da,Math.atan2(r.y-e.y,r.x-
e.x)-d),this.Ib[this.Xe-1]=c,1==this.bi||2==this.bi?(c=k.Js(c,r),this.Ub(c),c=k.Ad(r,this.Da,this.vt+d),r=k.Js(c,r),r.type|=256,this.Ub(r)):(c=k.Ad(r,this.Da,this.vt+d),c.type|=256),this.Ub(c),this.Ub(a,b)):(c=k.Ad(e,this.Da,this.vt+d),this.Ub(c),1==this.bi||2==this.bi?(c=k.Js(c,e),this.Ub(c),c=k.Ad(e,this.Da,this.gx-d),r=k.Js(c,e),r.type|=256,this.Ub(r)):(c=k.Ad(e,this.Da,this.gx-d),c.type|=256),this.Ub(c)))}};e.prototype.mB=function(){var r,e,f,h,y,g,D=this.eu;this.Xe=0;var n=0.5*this.ka,p=0,m=
0;for(r=0;r<D;r++){h=this.dg[r];y=0==r?this.dg[D-1]:this.dg[r-1];g=r==D-1?this.dg[0]:this.dg[r+1];var s=y.x-h.x,t=y.y-h.y,u=g.x-h.x,v=g.y-h.y;e=Math.atan2(t,s);f=Math.atan2(v,u);this.vt=e;this.gx=f;0==r&&(p=e,m=f);s=s*v-u*t;t=f;f<e&&(f+=c);if(0<s*this.Da)1==this.bi||2==this.bi?(e=k.Ad(h,this.Da,e+d),this.Ub(e),e=k.LB(h,e),this.Ub(e),e=k.Ad(h,this.Da,f-d),h=k.LB(h,e),h.type|=256,this.Ub(h),this.Ub(e)):(s=0.5*(f-e),s=this.Da/Math.abs(Math.sin(s)),e=k.Ad(h,s,0.5*(e+f)),this.Ub(e,r));else if(0!=(h.type&
512)){s=1-n/Math.abs(this.Da);y=1;g=0>this.Da?-b:b;-1<s&&1>s&&(t=2*Math.acos(s),0.017453292519943295>t&&(t=0.017453292519943295),y=a.I.truncate(b/t+1.5),1<y&&(g/=y));t=e+d;e=k.Ad(h,this.Da,t);0==r&&(e.type|=1024);this.Ub(e,r);s=this.Da/Math.cos(g/2);t+=g/2;e=k.Ad(h,s,t);e.type|=1024;for(this.Ub(e);0<--y;)t+=g,e=k.Ad(h,s,t),e.type|=1024,this.Ub(e);e=k.Ad(h,this.Da,f-d);e.type|=1024;this.Ub(e)}else if(1==this.bi)e=k.Ad(h,this.Da,e+d),this.Ub(e,r),e=k.Ad(h,this.Da,f-d),this.Ub(e);else if(0==this.bi){s=
1-n/Math.abs(this.Da);y=1;g=f-d-(e+d);-1<s&&1>s&&(t=2*Math.acos(s),0.017453292519943295>t&&(t=0.017453292519943295),y=a.I.truncate(Math.abs(g)/t+1.5),1<y&&(g/=y));s=this.Da/Math.cos(0.5*g);t=e+d+0.5*g;e=k.Ad(h,s,t);for(this.Ub(e,r);0<--y;)t+=g,e=k.Ad(h,s,t),this.Ub(e)}else 2==this.bi?(s=y.x-h.x,t=y.y-h.y,u=g.x-h.x,v=g.y-h.y,y=(s*u+t*v)/Math.sqrt(s*s+t*t)/Math.sqrt(u*u+v*v),0.99999999<y?(e=k.Ad(h,1.4142135623730951*this.Da,f-0.25*b),this.Ub(e,r),e=k.Ad(h,1.4142135623730951*this.Da,f+0.25*b),this.Ub(e)):
(y=Math.abs(this.Da/Math.sin(0.5*Math.acos(y))),g=Math.abs(this.Dx*this.Da),y>g?(s=0.5*(f-e),s=this.Da/Math.abs(Math.sin(s)),e=k.Ad(h,s,0.5*(e+f)),f=a.b.Oa(e.x,e.y),e=a.b.Oa(h.x,h.y),h=new a.b,h.pc(f,e),f=new a.b,f.DR(g/h.length(),h,e),e=(y-g)*Math.abs(this.Da)/Math.sqrt(y*y-this.Da*this.Da),0<this.Da?h.tt():h.Kp(),h.scale(e/h.length()),e=new a.b,e.add(f,h),y=new a.b,y.pc(f,h),e=k.um(e),this.Ub(e,r),e=k.um(y),this.Ub(e)):(s=0.5*(f-e),s=this.Da/Math.abs(Math.sin(s)),e=k.Ad(h,s,0.5*(e+f)),this.Ub(e,
r)))):(f=t,0<this.Da?(f>e&&(f-=c),y=e-f<d):(f<e&&(f+=c),y=f-e<d),y?(s=1.4142135623730951*this.Da,t=0>s?e+0.25*b:e+0.75*b,e=k.Ad(h,s,t),this.Ub(e,r),t=0>s?f-0.25*b:f-0.75*b,e=k.Ad(h,s,t),this.Ub(e)):(s=0.5*(f-e),s=this.Da/Math.abs(Math.sin(s)),f<e&&(f+=c),e=k.Ad(h,s,(e+f)/2),this.Ub(e,r)))}this.vt=p;this.gx=m;this.Ub(this.Ib[0],0);h=k.xL(this.Ib[this.Xe-1]);this.Ib[0]=h;return this.sR()};e.prototype.xs=function(b,k){if(!(2>k))for(var c=0;c<k;c++){var d=this.Ib[b+c];0!=c?this.Kx.Lm(a.b.Oa(d.x,d.y)):
this.Kx.Nr(a.b.Oa(d.x,d.y))}};e.prototype.iJ=function(a,b,c){var d=a.Ea(b),r=a.Dc(b);this.Ib=[];this.Kx=c;if(a.vc(b)){for(b=a.Fa(d);a.Fa(r-1).ub(b);)r--;if(2<=r-d){this.eu=r-d;this.dg=[];for(b=d;b<r;b++)this.dg.push(k.um(a.Fa(b)));this.mB()&&this.xs(0,this.Xe-1)}}else{for(b=a.Fa(d);d<r&&a.Fa(d+1).ub(b);)d++;for(b=a.Fa(r-1);d<r&&a.Fa(r-2).ub(b);)r--;if(2<=r-d){this.eu=2*(r-d)-2;this.dg=[];c=k.um(a.Fa(d));c.type|=1536;this.dg.push(c);for(b=d+1;b<r-1;b++)c=k.um(a.Fa(b)),this.dg.push(c);c=k.um(a.Fa(r-
1));c.type|=512;this.dg.push(c);for(b=r-2;b>=d+1;b--)c=k.um(a.Fa(b)),c.type|=1024,this.dg.push(c);if(this.mB())if(2<=this.Ib.length){a=-1;(r=0!=(this.Ib[this.Xe-1].type&1024))||(a=0);for(b=1;b<this.Xe;b++)(d=0!=(this.Ib[b].type&1024))?r||(r=b-1,1<r-a+1&&this.xs(a,r-a+1)):r&&(a=b-1),r=d;r||(r=this.Xe-1,1<r-a+1&&this.xs(a,r-a+1))}else a=0,r=this.Xe-1,0<=a&&1<=r-a&&this.xs(a,r-a+1)}}this.dg=null;this.eu=0;this.Ib=null;this.Xe=0};e.prototype.sR=function(){for(var a=!1,b=0;b<this.Xe;b++){var k=this.Ib[b];
k.Rg=b+1;k.Ug=b-1;this.Ib[b]=k}k=this.Ib[0];k.Ug=this.Xe-2;this.Ib[0]=k;k=this.Ib[this.Xe-2];k.Rg=0;this.Ib[this.Xe-2]=k;for(b=k=0;b<this.Xe;b++)if(0!=(this.Ib[k].type&256)){var c=this.$L(k);if(-1!=c)k=c;else{a=!0;break}}else k=this.Ib[k].Rg;if(a)return!1;this.vL(k);return!0};e.prototype.$L=function(a){for(var b=this.Xe-1,k=a,c,d,r=1;r<=b-2;r++){c=k=this.Ib[k].Rg;d=a;for(var q=1;q<=r;q++){d=this.Ib[d].Ug;if(0==(this.Ib[d].type&256)&&0==(this.Ib[c].type&256)){var e=this.oO(d,c);if(-1!=e)return e}c=
this.Ib[c].Ug}}return-1};e.prototype.oO=function(b,k){var c,d,q,e;c=this.Ib[this.Ib[b].Ug];d=this.Ib[b];q=this.Ib[this.Ib[k].Ug];e=this.Ib[k];if(!this.HR(c,d,q,e))return-1;var f=new r;return this.NM(c,d,q,e,f)&&!f.cB&&a.I.bG((d.x-c.x)*(e.y-q.y)-(d.y-c.y)*(e.x-q.x))!=a.I.bG(this.Da)?(c=this.Ib[b].Ug,f.Xl.type=d.type,f.Xl.Rg=k,f.Xl.Ug=c,this.Ib[b]=f.Xl,f.Xl=this.Ib[k],f.Xl.Ug=b,this.Ib[k]=f.Xl,k):-1};e.prototype.HR=function(a,b,k,c){return Math.max(a.x,b.x)>=Math.min(k.x,c.x)&&Math.max(k.x,c.x)>=Math.min(a.x,
b.x)&&Math.max(a.y,b.y)>=Math.min(k.y,c.y)&&Math.max(k.y,c.y)>=Math.min(a.y,b.y)};e.prototype.NM=function(a,b,c,d,r){r.cB=!1;var q,e,f;q=(b.y-a.y)*(d.x-c.x)-(b.x-a.x)*(d.y-c.y);e=(c.y-a.y)*(b.x-a.x)-(c.x-a.x)*(b.y-a.y);q=0==q?2:e/q;return 0<=q&&1>=q&&(f=q,q=(d.y-c.y)*(b.x-a.x)-(d.x-c.x)*(b.y-a.y),e=(a.y-c.y)*(d.x-c.x)-(a.x-c.x)*(d.y-c.y),q=0==q?2:e/q,0<=q&&1>=q)?(r.Xl=k.yL(a.x+q*(b.x-a.x),a.y+q*(b.y-a.y)),r.Xl.mh=c.mh+f*(d.mh-c.mh),0!=f&&1!=f||0!=q&&1!=q||(r.cB=!0),r.wU=q,r.xU=f,(0==f||1==f)&&0<q&&
1>q||(0==q||1==q)&&0<f&&1>f?!1:!0):!1};e.prototype.vL=function(a){for(;this.Ib[a].Ug<a;)a=this.Ib[a].Ug;var b=0,k=a;do k=this.Ib[k],this.Ib[b]=k,k=k.Rg,b++;while(k!=a);this.Ib[b]=this.Ib[0];this.Xe=b+1};e.prototype.qA=function(a){var b=this.$m,k=b.Ca();if(null!=k){k.Lk();for(var c=-1;k.kb();)c++,this.iJ(b,c,a)}};e.prototype.hv=function(){var b=this.$m.D();return 322==b?this.hJ():197==b?this.gJ():a.T.Lc(b)?(b=new a.Xa,b.Bc(this.$m,!0),this.$m=b,this.hv()):1607==b?(b=new a.Xa,this.qA(b),b):1736==b?
(b=new a.Ka,this.qA(b),b):null};return e}();a.XG=e})(z||(z={}));(function(a){var b=function(){function a(b){this.xj=b}a.prototype.w=function(a,b){this.xj.a.w(a,b)};a.prototype.kd=function(a){var b=this.xj.za.da(a);this.xj.za.kd(a,-1);this.xj.a.vf(b,!1)};return a}(),c=function(){function a(b){this.xj=b}a.prototype.w=function(a,b){this.xj.NP.w(a,b)};a.prototype.kd=function(a){this.xj.za.kd(a,-1)};return a}(),d=function(){function a(b){this.xj=b}a.prototype.w=function(a,b){b.J(this.xj.PP[a])};a.prototype.kd=
function(a){this.xj.za.kd(a,-1)};return a}(),k=function(){function k(r){void 0===r?(this.za=new a.bj,this.za.de(20),this.a=new a.fd,this.FP=this.a.jg(550),this.cr=this.a.Cf(this.FP,-1),this.oh=new b(this)):r instanceof Array?(this.za=new a.bj,this.za.de(20),this.PP=r,this.oh=new d(this)):(this.za=new a.bj,this.za.de(20),this.NP=r,this.oh=new c(this))}k.prototype.Eb=function(b){var k=b.D();if(a.Wr.Th(k))this.OJ(b);else if(a.al.Lc(k))this.SJ(b);else if(197==k)this.LJ(b);else if(33==k)this.RJ(b);else throw a.g.N("invalid shape type");
};k.prototype.sN=function(){var b=new a.Va,k=this.za.gc(-1),c=new a.Ka(this.a.wp);this.a.Jk(this.za.da(k),b);c.df(b);for(k=this.za.bb(k);-1!=k;k=this.za.bb(k))this.a.Jk(this.za.da(k),b),c.lineTo(b);return c};k.wL=function(b){var c=new k(b),d=b.F(),q=1,e=new a.b,f=new a.b,h=new a.b;for(b.w(0,e);;){b.w(q,f);if(!(f.Ww(e)&&q<d-1))break;q++}c.za.addElement(0,-1);c.za.qm(q);for(d=q+1;d<b.F();d++)b.w(d,h),q=c.cz(h),-1!=q&&c.za.Vi(q,d);h=new a.Va;q=c.za.gc(-1);d=new a.Ka(b.description);b.Sd(c.za.da(q),h);
d.df(h);for(q=c.za.bb(q);-1!=q;q=c.za.bb(q))b.Sd(c.za.da(q),h),d.lineTo(h);return d};k.Oa=function(a,b,c){for(var d=new k(a),q=1,e=a[0];a[q].Ww(e)&&q<b-1;)q++;d.za.addElement(0,-1);d.za.qm(q);for(q+=1;q<b;q++)e=d.cz(a[q]),-1!=e&&d.za.Vi(e,q);a=0;for(b=d.za.gc(-1);-1!=b;b=d.za.bb(b))c[a++]=d.za.da(b);return a};k.sD=function(b,c){var d=b.Ea(c),q=b.Dc(c),e=!b.vc(c)&&b.Oo(c),f=b.mc(0),d=2*d,q=2*q;e&&(q-=2);if(6>q-d)return!0;var e=new a.b,h=new a.b,g=new a.b;f.ec(d,e);f.ec(d+2,h);f.ec(d+4,g);var n=k.Bd(h,
g,e);if(n.Dq()||!k.ac(n.value()))return!1;for(var p=a.b.Oa(h.x,h.y),m=new a.b,d=d+6;d<q;d+=2){m.J(h);h.J(g);f.ec(d,g);n=k.Bd(h,g,e);if(n.Dq()||!k.ac(n.value()))return!1;n=k.Bd(p,g,e);if(n.Dq()||!k.ac(n.value()))return!1;n=k.Bd(h,g,m);if(n.Dq()||!k.ac(n.value()))return!1}return!0};k.prototype.OJ=function(b){for(var k=new a.Va,c=new a.b,d=0;d<b.F();d++){b.w(d,c);var r=this.hq(c);if(-1!=r){b.Sd(d,k);var q=this.a.Ub(this.cr,k);this.za.Vi(r,q)}}};k.prototype.LJ=function(b){for(var k=new a.Va,c=new a.b,
d=0;4>d;d++){b.vu(d,c);var r=this.hq(c);if(-1!=r){b.uf(d,k);var q=this.a.Ub(this.cr,k);this.za.Vi(r,q)}}};k.prototype.SJ=function(b){var k=new a.Va,c=b.Mb(),c=this.hq(c);if(-1!=c){b.En(k);var d=this.a.Ub(this.cr,k);this.za.Vi(c,d)}c=b.oc();c=this.hq(c);-1!=c&&(b.Bn(k),b=this.a.Ub(this.cr,k),this.za.Vi(c,b))};k.prototype.RJ=function(a){var b=a.w(),b=this.hq(b);-1!=b&&(a=this.a.Ub(this.cr,a),this.za.Vi(b,a))};k.prototype.hq=function(a){var b=-1;if(0==this.za.size(-1))return this.za.addElement(-4,-1);
if(1==this.za.size(-1)){var k=this.a.Fa(this.za.da(this.za.gc(-1)));a.Ww(k)||(b=this.za.qm(-5));return b}return this.cz(a)};k.prototype.cz=function(b){var c=-1,d=this.za.gc(-1),q=this.za.tc(-1),e=this.za.da(d),f=this.za.da(q),h=new a.b,g=new a.b;this.oh.w(e,h);this.oh.w(f,g);e=a.b.yn(g,b,h);if(k.ac(e))c=this.za.qm(-1),h=this.az(b,q,d),h!=d&&this.bz(b,d,this.za.ge(h));else if(k.ti(e)){for(var g=this.za.dt(-1),n=this.za.gc(-1),p=this.za.tc(-1),m,e=new a.b,f=new a.b;n!=this.za.ge(p);)m=this.za.da(g),
this.oh.w(m,e),m=a.b.yn(e,b,h),k.ti(m)?(p=g,g=this.za.ik(g)):(n=g,g=this.za.Jo(g));g=p;h=n;m=this.za.da(g);n=this.za.da(h);this.oh.w(m,e);this.oh.w(n,f);if(!(h!=d&&(e=a.b.yn(f,b,e),!k.ac(e))))c=this.za.vs(h,g,-2,!1),this.bz(b,g,q),this.az(b,h,d)}else null==this.ib&&(this.ib=new a.yb),this.ib.ed(g),this.ib.vd(h),h=this.ib.Gd(b,!0),0>h?(h=this.za.ge(q),this.za.kd(q,-1),c=this.za.qm(-3),this.az(b,h,d)):1<h&&(h=this.za.bb(d),this.za.kd(d,-1),c=this.za.vs(-1,h,-3,!1),this.bz(b,h,q));return c};k.prototype.bz=
function(b,c,d){if(c!=d){var q=this.za.da(c),e=this.za.bb(c),f=new a.b,h=new a.b;for(this.oh.w(q,f);c!=d&&2<this.za.size(-1);){this.oh.w(this.za.da(e),h);q=a.b.yn(h,b,f);if(k.ac(q))break;q=c;c=e;f.J(h);e=this.za.bb(c);this.oh.kd(q)}}};k.prototype.az=function(b,c,d){if(c==d)return d;var q=this.za.da(c),e=this.za.ge(c),f=new a.b,h=new a.b;for(this.oh.w(q,f);c!=d&&2<this.za.size(-1);){this.oh.w(this.za.da(e),h);q=a.b.yn(f,b,h);if(k.ac(q))break;q=c;c=e;f.J(h);e=this.za.ge(c);this.oh.kd(q)}return c};k.Bd=
function(b,k,c){var d=new a.$k;d.set(k.x);d.sub(b.x);var r=new a.$k;r.set(c.y);r.sub(b.y);var q=new a.$k;q.set(k.y);q.sub(b.y);k=new a.$k;k.set(c.x);k.sub(b.x);d.Ap(r);q.Ap(k);d.sub(q);return d};k.ac=function(a){return 0>a};k.ti=function(a){return 0<a};k.ao=function(a){return 0==a};return k}();a.Tr=k})(z||(z={}));(function(a){var b=function(){function b(a){this.oe=this.a=null;this.WD=!0;this.oe=a}b.HE=function(b,k,c){b=a.Ia.As(b);return a.Sr.Vw(k.lk(),k.mk(),c.lk(),c.mk(),a.vi.Ty(b))};b.gL=function(b,
k){var c=new a.Va;a.Sr.$P(b,k,c);return c};b.$=function(a,k,c,d){c=new b(c);c.a=a;c.ka=k;c.WD=d;return c.rJ()};b.prototype.lJ=function(b){return a.Sr.zM(this.a,b)};b.prototype.oJ=function(b){return a.Zu.$(this.a,b,this.oe)};b.prototype.rJ=function(){for(var b=this.ka,k=a.Ia.As(b),b=a.Ia.UJ(b),c=1.00001*b,b=1.000001*b,d=!1,e=30<this.a.pd+10?1E3:(this.a.pd+10)*(this.a.pd+10),f=0,h=this.a.pO();;f++){if(f>e)throw a.g.ra("Internal Error: max number of iterations exceeded");var g=this.lJ(k),d=d||g;this.WD&&
(g=0!=this.a.xo(k,!0,!1),d=d||g);g=!1;if(0==f||h||a.Zu.DE(!0,this.a,b,null,this.oe))g=this.oJ(c),d=d||g;if(!g)break}return d};return b}();a.aj=b})(z||(z={}));(function(a){var b=function(){function b(a){this.Ld=this.zc=null;this.Yb=a;this.hx=!0}b.prototype.et=function(a,b){var c=this.a.cc(a);if(null==c){if(!this.a.Oc(a,b))return null;c=b}return c};b.prototype.LL=function(){var b=this.a.Gp(!1),k=!1,c=new a.yb,d=new a.yb,e=new a.i;e.Ja();var f=new a.i;f.Ja();for(var h=new a.Va,g=new a.gA,n=b.next();-1!=
n;n=b.next()){var p=null,m=!1;if(!a.T.Km(this.a.Lb(b.mj))){p=this.et(n,c);if(null==p)continue;p.o(e);e.P(this.ka,this.ka);if(p.mg(this.ka))if(p.mg(0))m=!0,p=null;else continue}var s=this.a.Gp(b),t=s.next();for(-1!=t&&(t=s.next());-1!=t;t=s.next()){var u=null,v=!1;if(!a.T.Km(this.a.Lb(s.mj))){u=this.et(t,d);if(null==u)continue;u.o(f);if(u.mg(this.ka))if(u.mg(0))v=!0,u=null;else continue}var w=0,N=0;if(null!=p&&null!=u)e.rD(f)&&(g.zn(p),g.zn(u),g.Ga(this.ka,!1),w=g.kk(0),N=g.kk(1),0<w+N&&(this.a.Tp(n,
g,0,!0),this.a.Tp(t,g,1,!0)),g.clear());else if(null!=p){var x=new a.b;this.a.w(t,x);if(e.contains(x)){g.zn(p);this.a.Jk(t,h);g.Tw(this.ka,h,!1);w=g.kk(0);if(0<w)if(this.a.Tp(n,g,0,!0),v){v=-1;for(x=this.a.X(t);-1!=x&&x!=t&&(u=this.et(x,d),v=x,null!=u&&u.mg(0));x=this.a.X(x));for(x=t;-1!=x&&(this.a.bh(x,g.nf),x!=v);x=this.a.X(x));}else this.a.bh(t,g.nf);g.clear()}}else if(null!=u){if(x=new a.b,this.a.w(n,x),f.P(this.ka,this.ka),f.contains(x)){g.zn(u);this.a.Jk(n,h);g.Tw(this.ka,h,!1);N=g.kk(0);if(0<
N)if(this.a.Tp(t,g,0,!0),m){v=-1;for(x=this.a.X(n);-1!=x&&x!=n&&(u=this.et(x,d),v=x,null!=u&&u.mg(0));x=this.a.X(x));for(x=n;-1!=x&&(this.a.bh(x,g.nf),x!=v);x=this.a.X(x));}else this.a.bh(n,g.nf);g.clear()}}else continue;if(0!=w+N){if(0!=w){p=this.a.cc(n);if(null==p){if(!this.a.Oc(n,c))continue;p=c;c.o(e)}else p.o(e);if(p.mg(this.ka))break}k=!0}}}return k};b.prototype.ML=function(){return this.HQ()};b.prototype.HQ=function(){return(new a.aA).GS(this.a,this.ka)};b.prototype.EE=function(){var b=!1,
k,c;null==this.zc&&(this.zc=new a.bj);var d=new a.ga(0);d.xb(this.a.pd+1);for(var e=this.a.Gp(),f=e.next();-1!=f;f=e.next())d.add(f);this.a.Mu(d,d.size);d.add(-1);e=this.a.re();f=this.a.re();this.Ld=new a.hA(this.a,this.ka,!this.hx);this.zc.Hn(this.Ld);var h=new a.ga(0),g=new a.ga(0),n=0;new a.b;var p=this.a.cd;this.a.wb.kc();for(var m=this.a.wb.Ba[0].f,s,t,u=d.get(n++);-1!=u;){t=p.O(u,0);s=m[2*t];t=m[2*t+1];var v=s,w=t;do{var N=p.O(u,2),x=p.O(u,1);-1!=N&&(k=p.O(N,0),c=m[2*k],k=m[2*k+1],0>(w<k?-1:
w>k?1:v<c?-1:v>c?1:0)&&(g.add(u),g.add(N)));-1!=x&&(k=p.O(x,0),c=m[2*k],k=m[2*k+1],0>(w<k?-1:w>k?1:v<c?-1:v>c?1:0)&&(g.add(x),g.add(x)));c=this.a.Ra(u,e);-1!=c&&(h.add(c),this.a.lb(u,e,-1));c=this.a.Ra(u,f);-1!=c&&(h.add(c),this.a.lb(u,f,-1));u=d.get(n++);-1!==u&&(w=p.O(u,0),v=m[2*w],w=m[2*w+1])}while(-1!=u&&v===s&&w===t);v=1==h.size&&2==g.size;c=w=-1;N=0;for(x=h.size;N<x;N++){k=h.get(N);var A=this.zc.ge(k);-1==A||h.Nw(A)||(w=A);k=this.zc.bb(k);-1==k||h.Nw(k)||(c=k);if(-1!=w&&-1!=c)break}this.Ld.XF(t,
s);N=0;for(x=h.size;N<x;N++)k=h.get(N),this.zc.kd(k,-1);h.clear(!1);if(!v&&-1!=w&&-1!=c&&this.SK(w,c)){b=!0;this.ei=this.Ld.rl();break}N=0;for(x=g.size;N<x;N+=2){t=g.get(N);s=g.get(N+1);v?(t=this.zc.vs(w,c,t,!0),v=!1):t=this.zc.addElement(t,-1);if(this.Ld.Zf){this.ei=this.Ld.rl();b=!0;break}-1==this.a.Ra(s,e)?this.a.lb(s,e,t):this.a.lb(s,f,t)}if(b)break;g.cf(0)}this.a.bf(e);this.a.bf(f);return b};b.prototype.SK=function(a,b){this.Ld.compare(this.zc,this.zc.da(a),b);var c=this.Ld.Zf;this.Ld.lq();return c};
b.Gh=function(b){for(var k=b.$c;-1!=k;k=b.we(k))if(a.T.Kc(b.Lb(k)))return!0;return!1};b.Yk=function(a,k,c,d){if(!b.Gh(a))return!1;k=new b(d);k.a=a;k.ka=c;if(15>a.pd)a=k.LL();else return k.ML();return a};b.$=function(a,k,c){return b.Yk(a,a.wC(),k,c)};b.DE=function(c,k,d,e,f){if(!b.Gh(k))return!1;var h=new b(f);h.a=k;h.ka=d;h.hx=c;if(h.EE())return null!=e&&e.aq(h.ei),!0;var g=new a.Bg;g.Oy();k.Oe(g);h=new b(f);h.a=k;h.ka=d;h.hx=c;c=h.EE();g.Oy();k.Oe(g);return c?(null!=e&&e.aq(h.ei),!0):!1};return b}();
a.Zu=b})(z||(z={}));(function(a){(function(a){a[a.Left=0]="Left";a[a.Right=1]="Right";a[a.Coincident=2]="Coincident";a[a.Undefined=3]="Undefined";a[a.Uncut=4]="Uncut"})(a.ZG||(a.ZG={}));var b=function(){return function(a,b,k,c,d,q,e,f,h,g,n){this.U=a;this.cu=b;this.Yq=k;this.ag=c;this.Il=g;this.xk=n}}();a.yT=b;var c=function(){function b(a,k){this.jE=a;this.Zh=k}b.prototype.nJ=function(b,k){var c=new a.b;this.Zh.w(b,c);var d=new a.b;this.Zh.w(k,d);c=c.compare(d);if(0!=c)return c;c=this.Zh.Ra(b,this.jE);
d=this.Zh.Ra(k,this.jE);return c<d?-1:c==d?0:1};return b}(),d=function(){return function(a,b,k,c,d,q,e,f,h){this.ag=a;this.Yq=b;this.Lx=k;this.sE=c;this.Wh=d;this.xk=q;this.Il=e;this.tE=f;this.RP=h}}();a.xT=d;var k=function(){function k(){}k.YG=function(c,d,q,e,f,h){if(d.s())c=new b(d,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),f.push(c);else{var g=new a.fd;g.Eb(d);g.Eb(q);a.aj.$(g,e,h,!0);d=0;q=g.re();for(e=g.$c;-1!=e;e=g.we(e))for(h=g.Vb(e);-1!=h;h=g.bc(h))for(var n=g.Cb(h),p=0,m=g.Ha(h);p<m;n=
g.X(n),p++)g.lb(n,q,d++);d=k.qM(q,g);k.CI(c,d,g,f)}};k.qM=function(b,d){for(var q=d.pd,e=new a.ga(0),f=d.$c;-1!=f;f=d.we(f))for(var h=d.Vb(f);-1!=h;h=d.bc(h))for(var g=d.Cb(h),n=0,p=d.Ha(h);n<p;g=d.X(g),n++)e.add(g);var m=new c(b,d);e.xd(0,q,function(a,b){return m.nJ(a,b)});var s=[],t=[],u=d.re(),v=d.re(),f=d.$c,h=d.we(f),p=new a.b,w=new a.b,x=e.get(0),A=d.rd(x),G=d.Vf(A);d.w(x,p);for(var B=1,g=0;B<q-1;){for(var z=!1,n=B;n<q;n++)if(n!=g){var C=e.get(n),L=d.rd(C),K=d.Vf(L);d.w(C,w);if(p.ub(w))G==f&&
K==h&&(z=k.SI(u,v,d,s,t,A,x,L,C));else break}if(z||g==B-1){z&&g==B-1&&B--;if(++g==q)break;x=e.get(g);A=d.rd(x);G=d.Vf(A);d.w(x,p)}z||(B=g+1)}q=[];for(f=d.$c;-1!=f;f=d.we(f))for(h=d.Vb(f);-1!=h;h=d.bc(h)){e=d.Cb(h);n=0;for(p=d.Ha(h);n<p;e=d.X(e),n++){g=d.Ra(e,v);if(0<=g)for(;g<t.length&&t[g].ag==e;)q.push(t[g++]);g=d.Ra(e,u);if(0<=g)for(;g<s.length&&s[g].ag==e;)q.push(s[g++])}}d.bf(u);d.bf(v);return q};k.SI=function(a,b,c,d,q,e,f,h,g){var n=c.hk(e),p=c.hk(h),E=c.Cb(e),m=c.Cb(h),s=c.Ua(f),t=c.Ua(g),
u=!1,v=!1,w=!1,N=!1;f!=E&&(g!=m&&(u=k.VI(a,c,d,e,s,h,t)),g!=p&&(v=k.YI(a,c,d,e,s,h,g)));f!=n&&(g!=m&&(w=k.aJ(b,c,q,e,f,h,t,E)),g!=p&&(N=k.dJ(b,c,q,e,f,h,g,E)));u&&v&&w?(a=d.length-1,2==q[N?q.length-2:q.length-1].Wh&&(d[a-1]=d[a],d.length-=1)):u&&v&&N&&2==q[q.length-1].Wh&&(q=d[d.length-1],d.length-=1,c.Ra(q.ag,a)==d.length&&c.lb(q.ag,a,-1));return u||v||w||N};k.VI=function(b,k,c,r,e,f,h){var g,n;n=new a.yb;var p=new a.yb,m=[0,0],s=[0,0];g=k.cc(e);null==g&&(k.Oc(e,n),g=n);n=k.cc(h);null==n&&(k.Oc(h,
p),n=p);g=g.Ga(n,null,m,s,0);2>g&&(r=new d(e,r,m[0],NaN,g,h,f,s[0],NaN),c.push(r),r=k.Ra(e,b),0>r&&k.lb(e,b,c.length-1));return!0};k.YI=function(b,k,c,r,e,f,h){var g,n;n=new a.yb;var p=new a.yb,m=[0,0],s=[0,0];g=k.cc(e);null==g&&(k.Oc(e,n),g=n);n=k.cc(h);null==n&&(k.Oc(h,p),n=p);g=g.Ga(n,null,m,s,0);return 2>g?(r=new d(e,r,m[0],NaN,g,h,f,s[0],NaN),c.push(r),r=k.Ra(e,b),0>r&&k.lb(e,b,c.length-1),!0):!1};k.aJ=function(b,k,c,r,e,f,h,g){var n,p;p=new a.yb;var m=new a.yb,s=[0,0],t=[0,0];n=k.cc(e);null==
n&&(k.Oc(e,p),n=p);p=k.cc(h);null==p&&(k.Oc(h,m),p=m);n=n.Ga(p,null,s,t,0);if(2==n)return r=new d(e,r,s[0],s[1],n,h,f,t[0],t[1]),c.push(r),r=k.Ra(e,b),0>r&&k.lb(e,b,c.length-1),!0;m=!1;e==g&&(r=new d(e,r,s[0],NaN,n,h,f,t[0],NaN),c.push(r),r=k.Ra(e,b),0>r&&k.lb(e,b,c.length-1),m=!0);return m};k.dJ=function(b,k,c,r,e,f,h,g){var n,p;p=new a.yb;var m=new a.yb,s=[0,0],t=[0,0];n=k.cc(e);null==n&&(k.Oc(e,p),n=p);p=k.cc(h);null==p&&(k.Oc(h,m),p=m);n=n.Ga(p,null,s,t,0);if(2==n)return r=new d(e,r,s[0],s[1],
n,h,f,t[0],t[1]),c.push(r),r=k.Ra(e,b),0>r&&k.lb(e,b,c.length-1),!0;m=!1;e==g&&(r=new d(e,r,s[0],NaN,n,h,f,t[0],NaN),c.push(r),r=k.Ra(e,b),0>r&&k.lb(e,b,c.length-1),m=!0);return m};k.CI=function(c,d,q,e){var f,h=[];h[0]=new a.b;h[1]=new a.b;h[2]=new a.b;h[3]=new a.b;var g=new a.b,n=new a.b,p=new a.b,m=new a.b,s=null;null!=e&&(s=new a.Ag,s.mq());var t,u=0,v=null,w=new a.yb;new a.yb;for(var N=q.Vb(q.$c);-1!=N;N=q.bc(N)){var x,A=4,G=-1,B,z,C,L=-1,K,M,O,I,F=-1,J=-1,S=NaN;x=!0;var H=!1,U=!0,T=!0,ta=!0,
ba=0;C=N;K=0;for(var va=q.Cb(N),Ca=q.Ha(N),ga=0;ga<Ca;va=q.X(va),ga++){t=q.cc(va);if(null==t){if(!q.Oc(va,w))continue;t=w}-1==L&&(L=va);for(var fa=0;u<d.length&&va==d[u].ag;){G=d[u].Yq;B=d[u].ag;z=d[u].Lx;M=d[u].Il;O=d[u].xk;I=d[u].tE;if(2==d[u].Wh){if(H||(C=G,L=B,K=z,F=M,J=O,S=I,A=2,null!=e?v=new a.Xa:ba=0,ta=!1,T=!0),z=d[u].sE,I=d[u].RP,null!=e?(t.Bi(fa,d[u].sE,s),v.Bc(s.get(),T)):ba++,fa=z,H=!0,T=x=!1,u+1==d.length||2!=d[u+1].Wh||d[u+1].ag==B&&d[u+1].Lx!=fa)null!=e?(f=new b(v,2,G,B,z,A,C,L,K,M,
O,I,F,J,S),e.push(f)):null.add(ba),C=G,L=B,K=z,F=M,J=O,S=I,A=2,H=x=!1,T=ta=!0}else{var V=q.X(B);if(u<d.length-1&&d[u+1].ag==V&&d[u+1].xk==O&&2==d[u+1].Wh)z!=fa&&(ta&&(null!=e?v=new a.Xa:ba=0),x=0<u&&d[u-1].Yq==G?1==A?0:0==A?1:3:3,null!=e?(t.Bi(fa,z,s),v.Bc(s.get(),T),f=new b(v,x,G,B,z,A,C,L,K,M,O,I,F,J,S),e.push(f)):(ba++,null.add(ba)),fa=z,C=G,L=B,K=z,F=M,J=O,S=I,A=x,x=U=!1,T=ta=!0);else if(!k.KK(c,q,d,u,g,n)){k.KG(q,d,u,N,va,p,m);var ca=!1,V=!1;f=!0;if(!g.ub(p)&&!n.ub(p)&&!g.ub(m)&&!n.ub(m)){h[0].J(g);
h[1].J(n);h[2].J(p);h[3].J(m);h.sort(a.b.cq);var R=h[0],ea=h[1],ha=h[2],la=h[3];R.ub(g)?ea.ub(n)?c?(V=ca=!0,f=!1):ca=!1:la.ub(n)?c?f=V=ca=!0:ca=!1:(ca=!0,f=ea.ub(p)):ea.ub(g)?ha.ub(n)?c?(V=ca=!0,f=!1):ca=!1:R.ub(n)?c?f=V=ca=!0:ca=!1:(ca=!0,f=ha.ub(p)):ha.ub(g)?la.ub(n)?c?(V=ca=!0,f=!1):ca=!1:ea.ub(n)?c?f=V=ca=!0:ca=!1:(ca=!0,f=la.ub(p)):R.ub(n)?c?(V=ca=!0,f=!1):ca=!1:ha.ub(n)?c?f=V=ca=!0:ca=!1:(ca=!0,f=R.ub(p))}if(ca){ca=va==B;if(z!=fa||ca&&0==fa)ta&&(null!=e?v=new a.Xa:ba=0),null!=e?(t.Bi(fa,z,s),
v.Bc(s.get(),T)):ba++;if(f)if(1!=A){if(z!=fa||ca&&0==fa)null!=e?(f=new b(v,1,G,B,z,A,C,L,K,M,O,I,F,J,S),e.push(f)):null.add(ba);if(V){if(u==d.length-2||d[u+2].Yq!=G)A=0}else A=1}else{if(z!=fa||ca&&0==fa)null!=e?(f=new b(v,3,G,B,z,A,C,L,K,M,O,I,F,J,S),e.push(f)):null.add(ba);A=1}else if(0!=A){if(z!=fa||ca&&0==fa)null!=e?(f=new b(v,0,G,B,z,A,C,L,K,M,O,I,F,J,S),e.push(f)):null.add(ba);if(V){if(u==d.length-2||d[u+2].Yq!=G)A=1}else A=0}else{if(z!=fa||ca&&0==fa)null!=e?(f=new b(v,3,G,B,z,A,C,L,K,M,O,I,
F,J,S),e.push(f)):null.add(ba);A=0}if(z!=fa||ca&&0==fa)fa=z,C=G,L=B,K=z,F=M,J=O,S=I,x=U=!1,T=ta=!0}}}u++}1!=fa&&(ta&&(null!=e?v=new a.Xa:ba=0),null!=e?(t.Bi(fa,1,s),v.Bc(s.get(),T)):ba++,T=ta=!1,U=!0)}U&&(z=1,B=q.hk(N),B=q.Ua(B),O=M=-1,I=NaN,x?null!=e?(f=new b(v,4,G,B,z,A,C,L,K,M,O,I,F,J,S),e.push(f)):null.add(ba):(x=1==A?0:0==A?1:3,null!=e?(f=new b(v,x,G,B,z,A,C,L,K,M,O,I,F,J,S),e.push(f)):null.add(ba)))}};k.KK=function(b,c,d,q,e,f){var h=d[q].tE;if(1==h)return k.GJ(b,c,d,q,e,f);if(0==h)return k.dK(b,
c,d,q,e,f);throw a.g.wa();};k.GJ=function(b,k,c,d,r,q){var e=new a.yb,f=c[d].ag,h=c[d].Il,g=c[d].xk,n=-1,p=-1,m=-1,s=-1;if(!b&&0<d)var t=c[d-1],n=t.ag,p=t.Il,m=t.xk,s=t.Wh;var u=-1,v=-1,w=-1,N=-1;d<c.length-1&&(t=c[d+1],u=t.ag,v=t.Il,w=t.xk,N=t.Wh);var x=k.X(f),t=k.X(g);if(!b)return 0<d&&n==f&&p==h&&m==t&&2==s||d<c.length-1&&u==x&&v==h&&w==t&&2==N?(b=k.cc(g),null==b&&(k.Oc(g,e),b=e),q.J(b.Pf(1)),r.qr(q),q.normalize(),r.normalize(),!1):d<c.length-1&&u==f&&v==h&&w==t?(b=k.cc(g),null==b&&(k.Oc(g,e),
b=e),r.J(b.Pf(1)),b=k.cc(t),null==b&&(k.Oc(t,e),b=e),q.J(b.Pf(0)),r.Bp(),q.normalize(),r.normalize(),!1):!0;if(d==c.length-1||u!=f||v!=h||w!=t||2==N)return b=k.cc(g),null==b&&(k.Oc(g,e),b=e),q.J(b.Pf(1)),r.qr(q),q.normalize(),r.normalize(),!1;b=k.cc(g);null==b&&(k.Oc(g,e),b=e);r.J(b.Pf(1));b=k.cc(t);null==b&&(k.Oc(t,e),b=e);q.J(b.Pf(0));r.Bp();q.normalize();r.normalize();return!1};k.dK=function(b,k,c,d,r,q){var e=new a.yb,f=c[d].ag,h=c[d].Il,g=c[d].xk,n=-1,p=-1,m=-1,s=-1;if(!b&&d<c.length-1)var t=
c[d+1],n=t.ag,p=t.Il,m=t.xk,s=t.Wh;var u=-1,v=-1,w=-1,t=-1;0<d&&(t=c[d-1],u=t.ag,v=t.Il,w=t.xk,t=t.Wh);var N=k.X(f),x=k.Ua(g);return b?0==d||u!=f||v!=h||w!=x||2==t?(b=k.cc(g),null==b&&(k.Oc(g,e),b=e),q.J(b.Pf(0)),r.qr(q),q.normalize(),r.normalize(),!1):!0:0<d&&u==f&&v==h&&w==x&&2==t||d<c.length-1&&n==N&&p==h&&m==x&&2==s?(b=k.cc(g),null==b&&(k.Oc(g,e),b=e),q.J(b.Pf(0)),r.qr(q),q.normalize(),r.normalize(),!1):!0};k.KG=function(b,k,c,d,r,q,e){var f=new a.yb,h=b.cc(r);null==h&&(b.Oc(r,f),h=f);c=k[c];
k=c.ag;c=c.Lx;r=b.X(k);if(1==c)q.J(h.Pf(1)),-1!=r&&r!=b.hk(d)?(h=b.cc(r),null==h&&(b.Oc(r,f),h=f),e.J(h.Pf(0)),h=b.cc(k),null==h&&b.Oc(k,f)):e.J(q),q.Bp(),e.normalize(),q.normalize();else if(0==c)e.J(h.Pf(c)),q.qr(e),e.normalize(),q.normalize();else throw a.g.wa();};return k}();a.$G=k})(z||(z={}));(function(a){(function(a){a[a.Linear=0]="Linear";a[a.Angular=1]="Angular";a[a.Area=2]="Area"})(a.RI||(a.RI={}));var b=function(){function b(a,k,c){this.Nc=k;this.Dj=c;this.wx=a}b.PC=function(a){return 0!==
a.Nc?null:-1===a.wx?new b(-1,2,a.Dj*a.Dj):b.Qd(e[a.wx])};b.Qd=function(a){a=r[a];return void 0===a?null:a};b.EL=function(a,k,c){var d=null;if(void 0!==c&&null!==c)try{"EPSG"===c.values[0]&&(d=b.Qd(parseInt(c.values[1])))}catch(r){}null===d&&(d=new b(-1,a,k));return d};b.prototype.Qc=function(){return this.wx};b.prototype.rC=function(b){if(b.Nc!=this.Nc)throw a.g.xa();return this.Dj/b.Dj};b.ih=function(a,b,k){return b.rC(k)*a};b.OB=function(a,b,k,c,d){k=k.rC(c);for(c=0;c<b;c++)d[c]=a[c]*k};return b}();
a.Tb=b;for(var c=[109402,4046.8564224,109403,4046.87260987425,109463,100,109401,1E4,109461,225E8,109460,25E8,109451,1E-4,109444,404.68564224000005,109424,404.6849341289498,109428,404.68493792602754,109416,404.67838076760535,109420,404.68423895571647,109448,404.683871963536,109411,404.6872609874253,109450,0.01,109408,3.34450944,109405,0.09290304,109430,0.09290354800069446,109423,0.0929028774400711,109427,0.09290287831176021,109441,0.09290349665192114,109407,0.09290137299531805,109440,0.09290286332673177,
109431,0.09290274144751023,109432,0.09290207073852812,109433,0.09290279616016,109434,0.09290273520025,109419,0.09290271785025629,109447,0.0929026336004445,109406,0.09290341161327487,109453,6.4516E-4,109454,6.451625806477421E-4,109414,1E6,109445,0.04046856422400001,109425,0.04046849341289498,109429,0.04046849379260275,109417,0.04046783807676053,109421,0.04046842389557164,109449,0.0404683871963536,109412,0.04046872609874253,109404,1,109410,1.000027193184865,109413,2589998.4703195216,109452,1E-6,109409,
3429904,109458,3434290.937856,109457,3434528.1495040003,109464,1.244521604938272E-7,109455,25.292852640000003,109456,25.29295381171408,109459,2.89612324,109439,2589988.110336,109462,0.7168473118308245,109442,0.83612736,109422,0.83612589696064,109426,0.836125904805842,109415,0.8361123569578626,109435,0.836124673027592,109436,0.836118636646753,109437,0.8361251654414399,109438,0.83612461680225,109418,0.8361244606523066,109446,0.8361237024040001,109443,0.8361307045194736],d=[9103,2.908882086657216E-4,
9104,4.84813681109536E-6,9102,0.0174532925199433,9106,0.01570796326794897,9105,0.01570796326794897,9109,1E-6,9114,9.817477042468104E-4,1031,4.84813681109536E-9,9112,1.570796326794897E-4,9101,1,9113,1.570796326794897E-6],k=[109031,15E4,109461,109030,5E4,109460,1033,0.01,109451,9097,20.1168,109444,9052,20.1167824,109424,9062,20.116782494375872,109428,9038,20.1166195164,109416,9042,20.116765121552632,109420,9301,20.116756,109448,9033,20.11684023368047,109411,109005,0.1,109450,9014,1.8288,109408,9002,
0.3048,109405,9070,0.3048008333333334,109430,9051,0.3047997333333333,109423,9061,0.3047997347632708,109427,9095,0.3048007491,109441,9005,0.3047972654,109407,9094,0.3047997101815088,109440,9080,0.3047995102481469,109431,9081,0.30479841,109432,9082,0.3047996,109433,9083,0.3047995,109434,9041,0.304799471538676,109419,9300,0.3047993333333334,109447,9003,0.3048006096012192,109406,109008,0.0254,109453,109009,0.0254000508001016,109454,9036,1E3,109414,9098,0.201168,109445,9053,0.201167824,109425,9063,0.2011678249437587,
109429,9039,0.201166195164,109417,9043,0.2011676512155263,109421,9302,0.20116756,109449,9034,0.2011684023368047,109412,9001,1,109404,9031,1.0000135965,109410,9035,1609.3472186944375,109413,1025,0.001,109452,9030,1852,109409,109013,1853.184,109458,109012,1853.248,109457,109016,3.527777777777778E-4,109464,109010,5.0292,109455,109011,5.029210058420118,109456,109014,1.7018,109459,9093,1609.344,109439,109015,0.8466683600033867,109462,9096,0.9144,109442,9050,0.9143992,109422,9060,0.9143992042898124,109426,
9037,0.9143917962000001,109415,9084,0.9143985307444408,109435,9085,0.91439523,109436,9086,0.9143988,109437,9087,0.9143985,109438,9040,0.9143984146160287,109418,9099,0.914398,109446,109002,0.9144018288036576,109443,109001,0.9144,109442,109003,20.1168,109444,109004,0.201168,109445,109006,0.01,109451,109007,0.001,109452],r=[],e=[],f=0;f<c.length;f+=2)r[c[f]]=new b(c[f],2,c[f+1]);c=null;for(f=0;f<d.length;f+=2)r[d[f]]=new b(d[f],1,d[f+1]);d=null;for(f=0;f<k.length;f+=3)r[k[f]]=new b(k[f],0,k[f+1]),e[k[f]]=
k[f+2];k=null})(z||(z={}));(function(a){var b=function(){function a(){}a.prototype.set=function(a,b){void 0!==b?(this.Lf=a,this.Og=b):"number"===typeof a?(this.Lf=a,this.Og=0):(this.Lf=a.Lf,this.Og=a.Og)};a.prototype.value=function(){return this.Lf};a.prototype.sub=function(a){if("number"===typeof a){var b=this.Lf-a;a=this.Og+2.220446049250313E-16*Math.abs(b)}else b=this.Lf-a.Lf,a=this.Og+a.Og+2.220446049250313E-16*Math.abs(b);this.Lf=b;this.Og=a};a.prototype.Ap=function(a){var b=this.Lf*a.Lf;this.Og=
this.Og*Math.abs(a.Lf)+a.Og*Math.abs(this.Lf)+this.Og*a.Og+2.220446049250313E-16*Math.abs(b);this.Lf=b};a.prototype.eP=function(){return Math.abs(this.Lf)<=this.Og};a.prototype.Dq=function(){return this.eP()&&0!=this.Og};return a}();a.$k=b})(z||(z={}));var F=new z.b,H=new z.b,J=new z.b,I=new z.b,K=new z.b;(function(a){var b;(function(a){a[a.closedPath=1]="closedPath";a[a.exteriorPath=2]="exteriorPath";a[a.ringAreaValid=4]="ringAreaValid"})(b||(b={}));var c=function(){function b(a,c,d,q,e,f,h){void 0!==
c?(this.ab=a,this.mj=c,this.$j=d,this.zh=q,this.ua=f,this.mx=h,this.Pt=e):(this.ab=a.ab,this.mj=a.mj,this.$j=a.$j,this.zh=a.zh,this.ua=a.ua,this.mx=a.mx,this.Pt=a.Pt);this.JD=!0}b.prototype.next=function(){return this.JD?(this.JD=!1,this.zh):-1!=this.zh?(this.zh=this.ab.X(this.zh),this.ua++,-1!=this.zh&&this.zh!=this.Pt?this.zh:this.cQ()):-1};b.prototype.cQ=function(){this.$j=this.ab.bc(this.$j);for(this.ua=0;-1!=this.mj;){for(;-1!=this.$j;this.$j=this.ab.bc(this.$j))if(this.Pt=this.zh=this.ab.Cb(this.$j),
-1!=this.zh)return this.zh;this.mj=this.ab.we(this.mj);if(-1==this.mj)break;if(!this.mx||a.T.Kc(this.ab.Lb(this.mj)))this.$j=this.ab.Vb(this.mj)}return-1};b.UL=function(a,c,d,e,f,h,g){return new b(a,c,d,e,f,h,g)};return b}();a.CT=c;b=function(){function b(){this.Zm=this.Al=this.Ej=this.Mc=this.Jj=this.jn=this.fi=this.Rc=this.sh=this.wg=this.Ge=this.wp=this.zp=this.wb=this.Hk=null;this.Xt=this.$c=-1;this.pd=0;this.kx=!1;this.wp=this.zp=this.wb=null}b.prototype.Fi=function(a){return null!=this.Ge?this.Ge[a]:
null};b.prototype.Fh=function(a,b){if(null==this.Ge){if(null==b)return;this.Ge=[];for(var c=0,d=this.wb.F();c<d;c++)this.Ge.push(null)}this.Ge[a]=b};b.prototype.Mn=function(a,b){this.Rc.L(a,1,b)};b.prototype.Ln=function(a,b){this.Rc.L(a,2,b)};b.prototype.Iy=function(a,b){this.Rc.L(a,6,b)};b.prototype.Ho=function(a){return this.Rc.O(a,6)};b.prototype.Hu=function(a,b){this.Rc.L(a,7,b)};b.prototype.bt=function(a){return this.Rc.O(a,0)};b.prototype.MF=function(a,b){this.Mc.L(a,1,b)};b.prototype.QF=function(a,
b){this.Mc.L(a,0,b)};b.prototype.xC=function(a){return this.Mc.O(a,7)};b.prototype.Jn=function(a,b){this.Mc.L(a,3,b)};b.prototype.Kn=function(a,b){this.Mc.L(a,4,b)};b.prototype.jQ=function(b){null==this.Mc&&(this.Mc=new a.Fc(8));var c=this.Mc.be();this.Mc.L(c,2,b);this.Mc.L(c,5,0);this.Mc.L(c,6,0);this.Mc.L(c,7,c);return c};b.prototype.bN=function(a){this.Mc.Jc(a)};b.prototype.lQ=function(b){null==this.Rc&&(this.Rc=new a.Fc(8),this.cd=new a.Fc(5),this.fi=new a.qd(0),this.jn=new a.qd(0));var c=this.Rc.be();
this.Rc.L(c,0,c);this.Rc.L(c,3,0);this.Rc.L(c,6,0);this.Hu(c,b);c>=this.fi.size&&(b=16>c?16:a.I.truncate(3*c/2),this.fi.resize(b),this.jn.resize(b));this.fi.set(c,0);this.jn.set(c,0);return c};b.prototype.iC=function(a){this.Rc.Jc(a)};b.prototype.dw=function(a){this.cd.Jc(a);this.pd--};b.prototype.mQ=function(b){null==this.Rc&&(this.Rc=new a.Fc(8),this.cd=new a.Fc(5),this.fi=new a.qd(0),this.jn=new a.qd(0));var c=this.cd.be(),d=0<=b?b:c;this.cd.L(c,0,d);if(0>b){if(d>=this.wb.F()){b=16>d?16:a.I.truncate(3*
d/2);this.wb.resize(b);if(null!=this.Ge)for(var e=0;e<b;e++)this.Ge.push(null);null!=this.wg&&this.wg.resize(b);this.zp=this.wb.mc(0)}this.wb.ic(d,-1E38,-1E38);null!=this.Ge&&(this.Ge[d]=null);null!=this.wg&&this.wg.write(d,1)}this.cd.L(c,4,2*d);this.pd++;return c};b.prototype.vl=function(a,b,c){var d=-1!=b?this.Ua(b):this.hk(a),e=-1!=d?this.X(d):-1,q=this.mQ(null==c?this.pd:-1),f=this.gb(q);null!=c&&this.wb.Iu(f,c);this.im(q,a);this.Sc(q,e);this.Tc(q,d);-1!=e&&this.Tc(e,q);-1!=d&&this.Sc(d,q);c=
this.vc(a);d=this.Cb(a);-1==b&&this.Wi(a,q);b==d&&this.Dh(a,q);c&&-1==e&&(this.Sc(q,q),this.Tc(q,q));this.hm(a,this.Ha(a)+1);a=this.Vf(a);this.Pk(a,this.F(a)+1);return q};b.prototype.Fo=function(){null==this.Zm&&(this.Zm=new a.Va(this.wb.description));return this.Zm};b.prototype.Pp=function(a,b){this.Mc.L(a,2,this.Mc.O(a,2)&-134217729||(1==b?134217728:0))};b.prototype.Cm=function(a){return 0!=(this.Mc.O(a,2)&134217728)?1:0};b.prototype.MJ=function(a){var b=this.jg(a.D(),a.description);1736==a.D()&&
this.Pp(b,a.Cm());this.WA(b,a);return b};b.prototype.NJ=function(a){var b=this.jg(a.D(),a.description);this.XA(b,a);return b};b.prototype.TQ=function(b,c){null==this.Rc&&(this.Rc=new a.Fc(8),this.cd=new a.Fc(5),this.fi=new a.qd(0),this.jn=new a.qd(0));this.Rc.de(this.Rc.Xc+b);this.cd.de(this.cd.Xc+c);this.fi.xb(this.fi.size+b);this.jn.xb(this.jn.size+b)};b.prototype.WA=function(b,c){this.TQ(c.ea(),c.F());this.Hk.Pd(c,0,c.F());this.zp=this.wb.mc(0);for(var d=null!=this.Ge&&null!=c.Fe,e=0,q=c.ea();e<
q;e++)if(!(2>c.Ha(e))){var f=this.Cf(b,-1);this.Gn(f,c.vc(e));for(var h=c.Ea(e),g=c.Dc(e);h<g;h++){var n=this.vl(f,-1,null);if(d)if(n=this.gb(n),0!=(c.NC(h)&1))this.Fh(n,null);else{var p=new a.Ag;c.cc(h,p,!0);this.Fh(n,p.get())}}}};b.prototype.XA=function(a,b){this.Hk.Pd(b,0,b.F());this.zp=this.wb.mc(0);for(var c=this.Cf(a,-1),d=0,e=b.F();d<e;d++)this.vl(c,-1,null)};b.prototype.DS=function(b,c,d){var e=this.X(b);if(-1==e)throw a.g.wa();for(var q=this.Fo(),f=this.rd(b),h=0,g=c.kk(d);h<g;h++){var n=
this.gb(b),p=this.X(b),m=c.Io(d,h);0==h&&(m.En(q),this.bh(b,q));322==m.D()?this.Fh(n,null):this.Fh(n,a.T.Yj(m));m.Bn(q);h<g-1?b=this.vl(f,p,q):this.bh(e,q)}};b.prototype.CS=function(b,c,d){var e=this.X(b);if(-1==e)throw a.g.wa();for(var q=this.Fo(),f=this.rd(b),h=0,g=c.kk(d);h<g;h++){var n=this.gb(b),p=this.X(b),m=c.Io(d,g-h-1);0==h&&(m.Bn(q),this.bh(b,q));322==m.D()?this.Fh(n,null):this.Fh(n,a.T.Yj(m));m.En(q);h<g-1?b=this.vl(f,p,q):this.bh(e,q)}};b.prototype.wC=function(){var b=new a.i;b.Ja();for(var c=
this.Gp(),d=new a.b,e=!0,q=c.next();-1!=q;q=c.next())this.w(q,d),e?b.Db(d.x,d.y):b.Oj(d.x,d.y),e=!1;return b};b.prototype.Eb=function(b){var c=b.D();if(a.T.Kc(c))return this.MJ(b);if(550==c)return this.NJ(b);throw a.g.wa();};b.prototype.YJ=function(b,c){var d=c.D();if(a.T.Kc(d))this.WA(b,c);else if(550==d)this.XA(b,c);else throw a.g.wa();};b.prototype.QJ=function(b,c){var d=this.jg(1736,b.description);if(2>b.Ha(c))return d;this.Hk.Pd(b,b.Ea(c),b.Dc(c));this.zp=this.wb.mc(0);var e=this.Cf(d,-1);this.Gn(e,
b.vc(c)||!0);for(var q=null!=this.Ge&&null!=b.Fe,f=b.Ea(c),h=b.Dc(c);f<h;f++){var g=this.vl(e,-1,null);if(q)if(g=this.gb(g),0!=(b.NC(f)&1))this.Fh(g,null);else{var n=new a.Ag;b.cc(f,n,!0);this.Fh(g,n.get())}}return d};b.prototype.hf=function(b){var c=this.Lb(b),d=a.sH.jg(c,this.Hk.description),e=this.F(b);if(0==e)return d;if(a.T.Kc(c)){for(var c=this.ea(b),q=a.Ac.Dg(c+1),f=a.Ac.to(c+1,0),h=d.description,g=0,n=h.Aa;g<n;g++){for(var p=h.Hd(g),m=a.pa.Wa(p),s=a.Ac.Tv(p,e),t=this.wb.mc(p),u=0,v=0,w=0,
N=this.Vb(b);-1!=N;N=this.bc(N)){var x=0;this.vc(N)&&(x|=1);this.VO(N)&&(x|=4);0!=x&&f.xy(v,x);var A=this.Ha(N);q.write(v++,w);w+=A;if(0==p)for(var A=t,G=s,B=new a.b,x=this.Cb(N);u<w;x=this.X(x),u++){var z=this.gb(x);A.ec(2*z,B);G.Rn(2*u,B)}else for(x=this.Cb(N);u<w;x=this.X(x),u++){z=this.gb(x);for(G=0;G<m;G++)B=t.Bh(z*m+G),s.Uk(u*m+G,B)}}d.bm(p,s);q.write(c,e)}d.NF(f);d.OF(q);d.ce(16777215)}else if(550==c){h=d.description;d.resize(e);g=0;for(n=h.Aa;g<n;g++){p=h.Hd(g);m=a.pa.Wa(p);s=d.mc(p);t=this.wb.mc(p);
u=0;N=this.Vb(b);A=this.Ha(N);for(x=this.Cb(N);u<A;x=this.X(x),u++){z=this.gb(x);for(G=0;G<m;G++)B=t.Bh(z*m+G),s.Uk(u*m+G,B)}d.bm(p,s)}d.ce(16777215)}return d};b.prototype.sy=function(a){for(var b=this.Vb(a);-1!=b;b=this.Cr(b));var b=this.aO(a),c=this.we(a);-1!=b?this.MF(b,c):this.$c=c;-1!=c?this.QF(c,b):this.Xt=b;this.bN(a)};b.prototype.jg=function(b,c){return void 0===c?this.QB(b,a.Od.Tf()):this.QB(b,c)};b.prototype.QB=function(b,c){var d=this.jQ(b);null==this.wb?this.wb=this.Hk=new a.pe(c):this.Hk.Ik(c);
this.wp=this.Hk.description;this.kx=1<this.wp.Aa;-1==this.$c?this.$c=d:(this.QF(d,this.Xt),this.MF(this.Xt,d));return this.Xt=d};b.prototype.we=function(a){return this.Mc.O(a,1)};b.prototype.aO=function(a){return this.Mc.O(a,0)};b.prototype.Lb=function(a){return this.Mc.O(a,2)&2147483647};b.prototype.EF=function(b,c,d){c=this.Ej[c];b=this.xC(b);b>=c.size&&c.resize(Math.max(a.I.truncate(1.25*b),16),-1);c.write(b,d)};b.prototype.yC=function(a,b){var c=this.xC(a),d=this.Ej[b];return c<d.size?d.read(c):
-1};b.prototype.RB=function(){null==this.Ej&&(this.Ej=[]);for(var b=0;b<this.Ej.length;b++)if(null==this.Ej[b])return this.Ej[b]=a.Ac.Dg(0),b;this.Ej.push(a.Ac.Dg(0));return this.Ej.length-1};b.prototype.tR=function(a){this.Ej[a]=null};b.prototype.Vb=function(a){return this.Mc.O(a,3)};b.prototype.Ys=function(a){return this.Mc.O(a,4)};b.prototype.F=function(a){return this.Mc.O(a,5)};b.prototype.ea=function(a){return this.Mc.O(a,6)};b.prototype.xo=function(b,c,d){for(var e=0,q=this.$c;-1!=q;q=this.we(q)){var f=
this.Lb(q);if(a.T.Kc(f)&&(!d||1736==f))for(var f=1736==this.Lb(q),h=this.Vb(q);-1!=h;){for(var g=0,n=this.Cb(h);g<a.I.truncate(this.Ha(h)/2);){var p=this.X(n);if(-1==p)break;var m=this.gb(n),s=this.Fi(m);null!=s?m=s.$b():(s=this.gb(p),m=this.wb.mv(m,s));m<=b?(0==m?0==e&&(e=-1):e=1,p!=this.hk(h)&&(this.Zy(p,n),this.vf(p,!0))):n=this.X(n);g++}g=this.Cb(h);for(n=this.vc(h)?g:this.hk(h);0<this.Ha(h);)if(p=this.Ua(n),-1!=p){var t=this.gb(p),s=this.Fi(t);null!=s?m=s.$b():(m=this.gb(n),m=this.wb.mv(m,t));
if(m<=b)0==m?0==e&&(e=-1):e=1,this.Zy(p,n),this.vf(p,!1),g==p&&(g=this.Cb(h));else if(n=this.Ua(n),n==g)break}else{this.vf(n,!0);0==e&&(e=-1);break}n=this.Ha(h);c&&(f?3>n:2>n)?(h=this.Cr(h),e=0<n?1:0==e?-1:e):h=this.bc(h)}}return e};b.prototype.Zy=function(a,b){var c=this.gb(a),d=this.gb(b);null!=this.wg&&(c=this.wg.read(c),this.wg.write(d,c));if(null!=this.sh){d=0;for(c=this.sh.length;d<c;d++)if(null!=this.sh[d]){var e=this.Ra(a,d);-1!=e&&this.lb(b,d,e)}}};b.prototype.Mr=function(b,c,d){var e=0,
q=this.X(b);if(-1==q)throw a.g.wa();for(var f=this.gb(b),h=this.gb(q),g=this.Fi(f),n=null==g?this.wb.mv(f,h):g.$b(),p=0;p<d;p++){var m=c[p];if(0<m&&1>m){var s=m;null!=g&&(s=0<n?g.rA(m)/n:0);this.wb.vJ(f,h,s,this.Fo());var t=this.vl(this.rd(b),q,this.Fo());e++;if(null!=g){var u=g.xm(0,m),s=this.gb(this.Ua(t));this.Fh(s,u);this.Yi(t,u.oc());if(p==d-1||1==c[p+1])m=g.xm(m,1),this.Fh(s,m)}}}return e};b.prototype.bh=function(a,b){var c=this.gb(a);this.wb.Iu(c,b);c=this.Fi(c);null!=c&&c.setStart(b);var d=
this.Ua(a);-1!=d&&(d=this.gb(d),null!=this.Fi(d)&&c.setEnd(b))};b.prototype.Jk=function(a,b){var c=this.gb(a);this.wb.Sd(c,b)};b.prototype.Yi=function(a,b){this.ic(a,b.x,b.y)};b.prototype.ic=function(a,b,c){var d=this.gb(a);this.wb.ic(d,b,c);d=this.Fi(d);null!=d&&d.Ny(b,c);a=this.Ua(a);-1!=a&&(a=this.gb(a),null!=this.Fi(a)&&d.Ok(b,c))};b.prototype.w=function(a,b){this.wb.w(this.cd.O(a,0),b)};b.prototype.uc=function(a,b){this.wb.Ba[0].ec(2*this.cd.O(a,0),b)};b.prototype.Fa=function(b){var c=new a.b;
this.wb.w(this.cd.O(b,0),c);return c};b.prototype.SC=function(a,b){this.zp.ec(2*a,b)};b.prototype.ld=function(a,b,c){return this.wb.ld(a,this.gb(b),c)};b.prototype.setAttribute=function(a,b,c,d){this.wb.setAttribute(a,this.gb(b),c,d)};b.prototype.gb=function(a){return this.cd.O(a,0)};b.prototype.mk=function(b){var c=new a.b;this.w(b,c);return c.y};b.prototype.Cq=function(a,b){var c=this.gb(a),d=this.gb(b),e=this.wb.Ba[0].f;return e[2*c]===e[2*d]&&e[2*c+1]===e[2*d+1]};b.prototype.pt=function(a,b){var c=
this.gb(a),d=this.wb.Ba[0].f;return d[2*c]===b.x&&d[2*c+1]===b.y};b.prototype.pS=function(b,c){1>c&&(c=1);if(null==this.wg){if(1==c)return;this.wg=a.Ac.kl(this.wb.F(),1)}var d=this.gb(b);d>=this.wg.size&&this.wg.resize(d+1,1);this.wg.write(d,c)};b.prototype.RC=function(a){a=this.gb(a);return null==this.wg||a>=this.wg.size?1:this.wg.read(a)};b.prototype.lb=function(a,b,c){b=this.sh[b];a=this.gb(a);b.size<this.wb.F()&&b.resize(this.wb.F(),-1);b.write(a,c)};b.prototype.Ra=function(a,b){var c=this.gb(a),
d=this.sh[b];return c<d.size?d.read(c):-1};b.prototype.re=function(){null==this.sh&&(this.sh=[]);for(var b=0;b<this.sh.length;b++)if(null==this.sh[b])return this.sh[b]=a.Ac.Dg(0,-1),b;this.sh.push(a.Ac.Dg(0,-1));return this.sh.length-1};b.prototype.bf=function(a){this.sh[a]=null};b.prototype.cc=function(a){return null!=this.Ge?(a=this.gb(a),this.Ge[a]):null};b.prototype.Oc=function(b,c){var d=this.cd.O(b,2);if(-1==d)return!1;if(this.kx){var e=new a.Va;this.Jk(b,e);c.setStart(e);this.Jk(d,e);c.setEnd(e)}else this.wb.uc(this.cd.O(b,
0),F),c.gl(0,F),this.wb.uc(this.cd.O(d,0),F),c.gl(1,F);return!0};b.prototype.gR=function(b,c,d){if(this.kx){var e=new a.Va;this.Jk(b,e);d.setStart(e);this.Jk(c,e);d.setEnd(e)}else this.wb.uc(b,F),d.gl(0,F),this.wb.uc(c,F),d.gl(1,F)};b.prototype.Cf=function(b,c){var d;if(-1!=c){if(b!=this.Vf(c))throw a.g.wa();d=this.wq(c)}else d=this.Ys(b);var e=this.lQ(b);-1!=c&&this.Mn(c,e);this.Ln(e,c);this.Mn(e,d);-1!=d?this.Ln(d,e):this.Jn(b,e);-1==c&&this.Kn(b,e);this.gm(b,this.ea(b)+1);return e};b.prototype.aD=
function(a,b,c,d){a=this.Cf(a,-1);for(var e=0,q=b,f=!1;q==c&&(f=!0),this.im(q,a),e++,q=this.X(q),q!=b;);this.Gn(a,!0);this.hm(a,e);f&&(b=c);this.Dh(a,b);this.Wi(a,this.Ua(b));this.Jr(a,!1);null!=d&&(d[0]=f);return a};b.prototype.Cr=function(a){var b=this.wq(a),c=this.bc(a),d=this.Vf(a);-1!=b?this.Ln(b,c):this.Jn(d,c);-1!=c?this.Mn(c,b):this.Kn(d,b);this.bL(a);this.gm(d,this.ea(d)-1);this.iC(a);return c};b.prototype.bL=function(a){var b=this.Cb(a);if(-1!=b){for(var c=0,d=this.Ha(a);c<d;c++){var e=
b,b=this.X(b);this.dw(e)}b=this.Vf(a);this.Pk(b,this.F(b)-this.Ha(a))}this.hm(a,0)};b.prototype.bc=function(a){return this.Rc.O(a,2)};b.prototype.wq=function(a){return this.Rc.O(a,1)};b.prototype.Ha=function(a){return this.Rc.O(a,3)};b.prototype.vc=function(a){return 0!=(this.Ho(a)&1)};b.prototype.Gn=function(a,b){if(this.vc(a)!=b){if(0<this.Ha(a)){var c=this.Cb(a),d=this.hk(a);b?(this.Sc(d,c),this.Tc(c,d)):(this.Sc(d,-1),this.Tc(c,-1));c=this.gb(d);this.Fh(c,null)}this.Iy(a,(this.Ho(a)|1)-1|(b?1:
0))}};b.prototype.Vf=function(a){return this.Rc.O(a,7)};b.prototype.VO=function(a){return 0!=(this.Ho(a)&2)};b.prototype.Dy=function(a,b){this.Iy(a,(this.Ho(a)|2)-2|(b?2:0))};b.prototype.Gw=function(b){if(this.bP(b))return this.fi.get(this.bt(b));var c=new a.yb,d=this.Cb(b);if(-1==d)return 0;var e=new a.b;this.w(d,e);for(var q=0,f=0,h=this.Ha(b);f<h;f++,d=this.X(d)){var g=this.cc(d);if(null==g){if(!this.Oc(d,c))continue;g=c}q+=g.kv(e.x,e.y)}this.Jr(b,!0);this.fi.set(this.bt(b),q);return q};b.prototype.Rp=
function(a,b,c){b=this.Jj[b];a=this.bt(a);b.size<this.fi.size&&b.resize(this.fi.size,-1);b.write(a,c)};b.prototype.Ei=function(a,b){var c=this.bt(a),d=this.Jj[b];return c<d.size?d.read(c):-1};b.prototype.Uv=function(){null==this.Jj&&(this.Jj=[]);for(var b=0;b<this.Jj.length;b++)if(null==this.Jj[b])return this.Jj[b]=a.Ac.Dg(0),b;this.Jj.push(a.Ac.Dg(0));return this.Jj.length-1};b.prototype.ty=function(a){this.Jj[a]=null};b.prototype.bQ=function(b,c,d){if(-1==d)throw a.g.N();if(c!=d){var e=this.bc(d),
q=this.wq(d),f=this.Vf(d);-1==q?this.Jn(f,e):this.Ln(q,e);-1==e?this.Kn(f,q):this.Mn(e,q);this.Pk(f,this.F(f)-this.Ha(d));this.gm(f,this.ea(f)-1);q=-1==c?this.Ys(b):this.wq(c);this.Mn(d,q);this.Ln(d,c);-1==c?this.Kn(b,d):this.Mn(c,d);-1==q?this.Jn(b,d):this.Ln(q,d);this.Pk(b,this.F(b)+this.Ha(d));this.gm(b,this.ea(b)+1);this.Hu(d,b)}};b.prototype.zi=function(a,b){this.wb.Sd(this.gb(b),this.Fo());this.vl(a,-1,this.Fo())};b.prototype.vf=function(b,c){var d=this.rd(b),e=this.Ua(b),q=this.X(b);-1!=e&&
this.Sc(e,q);var f=this.Ha(d);b==this.Cb(d)&&this.Dh(d,1<f?q:-1);-1!=q&&this.Tc(q,e);b==this.hk(d)&&this.Wi(d,1<f?e:-1);if(-1!=e&&-1!=q){var e=this.gb(e),h=this.gb(q);if(c){var g=this.Fi(e);null!=g&&(e=new a.b,this.wb.w(h,e),g.vd(e))}else h=this.gb(b),g=this.Fi(h),this.Fh(e,g),null!=g&&(e=this.wb.Fa(e),g.ed(e))}this.hm(d,f-1);d=this.Vf(d);this.Pk(d,this.F(d)-1);this.dw(b);return q};b.prototype.Cb=function(a){return this.Rc.O(a,4)};b.prototype.hk=function(a){return this.Rc.O(a,5)};b.prototype.X=function(a){return this.cd.O(a,
2)};b.prototype.Ua=function(a){return this.cd.O(a,1)};b.prototype.rd=function(a){return this.cd.O(a,3)};b.prototype.Ub=function(a,b){return this.vl(a,-1,b)};b.prototype.Gp=function(b){if(void 0===b)return this.Gp(!1);if(b instanceof c)return new c(b);var d,e=-1,q=-1,f=-1,h=0,g=!1;for(d=this.$c;-1!=d;d=this.we(d))if(!b||a.T.Kc(this.Lb(d))){for(e=this.Vb(d);-1!=e;e=this.bc(e))if(f=q=this.Cb(e),h=0,-1!=q){g=!0;break}if(g)break}return c.UL(this,d,e,q,f,h,b)};b.prototype.Oe=function(a){this.Hk.Oe(a);if(null!=
this.Ge)for(var b=0,c=this.Ge.length;b<c;b++)null!=this.Ge[b]&&this.Ge[b].Oe(a)};b.prototype.Tp=function(a,b,c,d){d?this.DS(a,b,c):this.CS(a,b,c)};b.prototype.Tc=function(a,b){this.cd.L(a,1,b)};b.prototype.Sc=function(a,b){this.cd.L(a,2,b)};b.prototype.im=function(a,b){this.cd.L(a,3,b)};b.prototype.hm=function(a,b){this.Rc.L(a,3,b)};b.prototype.Dh=function(a,b){this.Rc.L(a,4,b)};b.prototype.Wi=function(a,b){this.Rc.L(a,5,b)};b.prototype.gm=function(a,b){this.Mc.L(a,6,b)};b.prototype.Pk=function(a,
b){this.Mc.L(a,5,b)};b.prototype.lF=function(a){var b=a;do{var c=this.X(b);this.Sc(b,this.Ua(b));this.Tc(b,c);b=c}while(b!=a)};b.prototype.ZF=function(a){this.pd=a};b.prototype.yu=function(a){var b=this.wq(a),c=this.bc(a),d=this.Vf(a);-1!=b?this.Ln(b,c):this.Jn(d,c);-1!=c?this.Mn(c,b):this.Kn(d,b);this.Dh(a,-1);this.Wi(a,-1);this.iC(a)};b.prototype.Ui=function(b,c){var d=this.Ua(b),e=this.X(b);-1!=d&&this.Sc(d,e);-1!=e&&this.Tc(e,d);if(-1!=d&&-1!=e)if(d=this.gb(d),e=this.gb(e),c){var q=this.Fi(d);
if(null!=q){var f=new a.b;this.wb.w(e,f);q.vd(f)}}else e=this.gb(b),q=this.Fi(e),this.Fh(d,q),null!=q&&(f=new a.b,this.wb.w(d,f),q.ed(f));this.dw(b)};b.prototype.bP=function(a){return 0!=(this.Ho(a)&4)};b.prototype.Jr=function(a,b){this.Iy(a,(this.Ho(a)|4)-4|(b?4:0))};b.prototype.Mu=function(a,b){var c=this.cd.f;this.wb.kc();var d=this.wb.Ba[0].f;a.xd(0,b,function(a,b){var k=c[5*a],e=c[5*b],q=d[2*k],k=d[2*k+1],r=d[2*e],e=d[2*e+1];return k<e?-1:k>e?1:q<r?-1:q>r?1:0})};b.prototype.pO=function(){for(var b=
this.$c;-1!=b;b=this.we(b))if(!a.T.Kc(this.Lb(b)))return!0;return!1};b.prototype.Vy=function(a,b){for(var c=this.Vb(a),d=this.Vb(b),e=this.Ys(a),q=this.Ys(b),f=this.Vb(a);-1!=f;f=this.bc(f))this.Hu(f,b);for(f=this.Vb(b);-1!=f;f=this.bc(f))this.Hu(f,a);this.Jn(a,d);this.Jn(b,c);this.Kn(a,q);this.Kn(b,e);c=this.F(a);d=this.ea(a);e=this.ea(b);this.Pk(a,this.F(b));this.Pk(b,c);this.gm(a,e);this.gm(b,d);c=this.Mc.O(a,2);this.Mc.L(a,2,this.Mc.O(b,2));this.Mc.L(b,2,c)};return b}();a.fd=b})(z||(z={}));(function(a){var b=
function(b){function c(k,d,e,q){b.call(this);this.R=new a.i;void 0===k?this.MB():"number"===typeof k?this.AL(k,d,e,q):k instanceof a.Va?void 0!==d?this.Ks(k,d,e):this.BL(k):k instanceof a.pa?void 0!==d?this.DL(k,d):this.CL(k):k instanceof a.i?this.zL(k):this.MB()}C(c,b);c.prototype.Ks=function(b,c,d){this.description=a.Od.Tf();this.R.Ja();b.s()||this.sv(b,c,d)};c.prototype.zL=function(b){this.description=a.Od.Tf();this.R.K(b);this.R.normalize()};c.prototype.CL=function(b){if(null==b)throw a.g.N();
this.description=b;this.R.Ja()};c.prototype.DL=function(b,c){if(null==b)throw a.g.N();this.description=b;this.R.K(c);this.R.normalize()};c.prototype.MB=function(){this.description=a.Od.Tf();this.R.Ja()};c.prototype.BL=function(b){this.description=a.Od.Tf();this.R.Ja();b.s()||this.sv(b)};c.prototype.AL=function(b,c,d,e){this.description=a.Od.Tf();this.K(b,c,d,e)};c.prototype.K=function(a,b,c,d){this.qc();if("number"===typeof a)this.R.K(a,b,c,d);else{this.Ja();b=0;for(c=a.length;b<c;b++)this.Db(a[b])}};
c.prototype.Cu=function(b){this.qc();if(!b.dP())throw a.g.N();this.R.K(b)};c.prototype.Ja=function(){this.qc();this.R.Ja()};c.prototype.s=function(){return this.R.s()};c.prototype.aa=function(){return this.R.aa()};c.prototype.ba=function(){return this.R.ba()};c.prototype.lw=function(){return this.R.lw()};c.prototype.Vs=function(){return this.R.Vs()};c.prototype.qq=function(){return this.R.Af()};c.prototype.Db=function(b){if(b instanceof a.b)this.qc(),this.R.Db(b);else if(b instanceof a.i)this.qc(),
this.R.Db(b);else if(b instanceof a.Va){if(this.qc(),!b.sc()){var d=b.description;this.description!=d&&this.Ik(d);if(this.s())this.sv(b);else{this.R.Db(b.w());for(var e=1,f=d.Aa;e<f;e++)for(var h=d.Fd(e),g=a.pa.Wa(h),n=0;n<g;n++){var p=b.ld(h,n),m=this.Ah(h,n);m.Db(p);setInterval(h,n,m)}}}}else if(b instanceof c&&!b.s()){d=b.description;d!=this.description&&this.Ik(d);this.R.Db(b.R);e=1;for(f=d.Aa;e<f;e++){h=d.Hd(e);g=a.pa.Wa(h);for(n=0;n<g;n++)p=b.Ah(h,n),m=this.Ah(h,n),m.Db(p),setInterval(h,n,m)}}};
c.prototype.sv=function(b,c,d){if(void 0!==c){this.R.K(b.w(),c,d);c=b.description;d=1;for(var e=c.Aa;d<e;d++)for(var q=c.Fd(d),f=a.pa.Wa(q),h=0;h<f;h++){var g=b.ld(q,h);this.setInterval(q,h,g,g)}}else{this.R.K(b.fa[0],b.fa[1]);c=b.description;d=1;for(e=c.Aa;d<e;d++){q=c.Fd(d);f=a.pa.Wa(q);for(h=0;h<f;h++)g=b.ld(q,h),this.setInterval(q,h,g,g)}}};c.prototype.setInterval=function(b,c,d,e){var q=null;"number"===typeof d?q=new a.Nd(d,e):q=d;this.qc();if(0==b)if(0==c)this.R.v=q.qa,this.R.B=q.va;else if(1==
c)this.R.C=q.qa,this.R.G=q.va;else throw a.g.Uc();else this.DA(0,b,c,q.qa),this.DA(1,b,c,q.va)};c.prototype.P=function(a,b){this.qc();this.R.P(a,b)};c.prototype.Oe=function(b){if(b instanceof a.Bg)this.qc(),b.$y(this.R);else if(this.qc(),!this.R.s()){var c=new a.fH;this.Cn(c);c.UO()?c.Ja():b.$y(c)}};c.prototype.copyTo=function(b){if(b.D()!=this.D())throw a.g.N();b.qc();b.description=this.description;b.R.K(this.R);b.fa=null;if(null!=this.fa){b.ns();for(var c=0;c<2*(this.description.le.length-2);c++)b.fa[c]=
this.fa[c]}};c.prototype.Pa=function(){return new c(this.description)};c.prototype.Mh=function(){return this.R.rN()};c.prototype.$b=function(){return this.R.CC()};c.prototype.D=function(){return 197};c.prototype.fb=function(){return 2};c.prototype.Fp=function(a){this.copyTo(a)};c.prototype.o=function(a){a.v=this.R.v;a.C=this.R.C;a.B=this.R.B;a.G=this.R.G};c.prototype.Cn=function(a){a.v=this.R.v;a.C=this.R.C;a.B=this.R.B;a.G=this.R.G;a.K(this.R.v,this.R.C,this.yd(0,1,0),this.R.B,this.R.G,this.yd(1,
1,0))};c.prototype.Ah=function(b,c){var d=new a.Nd;d.K(this.yd(0,b,c),this.yd(1,b,c));return d};c.prototype.uf=function(b,c){c.Qf(this.description);var d=this.description.Aa-1;switch(b){case 0:for(var e=0;e<d;e++)for(var q=this.description.Hd(e),f=a.pa.Wa(q),h=0;h<f;h++)c.setAttribute(q,h,this.yd(0,q,h));c.ic(this.R.v,this.R.C);break;case 1:for(e=0;e<d;e++){q=this.description.Hd(e);f=a.pa.Wa(q);for(h=0;h<f;h++)c.setAttribute(q,h,this.yd(1,q,h))}c.ic(this.R.v,this.R.G);break;case 2:for(e=0;e<d;e++){q=
this.description.Hd(e);f=a.pa.Wa(q);for(h=0;h<f;h++)c.setAttribute(q,h,this.yd(0,q,h))}c.ic(this.R.B,this.R.G);break;case 3:for(e=0;e<d;e++){q=this.description.Hd(e);f=a.pa.Wa(q);for(h=0;h<f;h++)c.setAttribute(q,h,this.yd(1,q,h))}c.ic(this.R.B,this.R.C);break;default:throw a.g.Uc();}};c.prototype.vu=function(a,b){var c=this.R.vu(a);b.ma(c.x,c.y)};c.prototype.zN=function(a,b){return b*(a.up-2)};c.prototype.mC=function(b,c,d){if(this.R.s())throw a.g.ra("empty geometry");if(0==c)return 0!=b?0!=d?this.R.G:
this.R.B:0!=d?this.R.C:this.R.v;if(d>=a.pa.Wa(c))throw a.g.N();var e=this.description.zf(c);this.ns();return 0<=e?this.fa[this.zN(this.description,b)+this.description.XN(e)-2+d]:a.pa.ue(c)};c.prototype.ns=function(){this.qc();if(null==this.fa&&2<this.description.le.length){this.fa=[];for(var b=c.V(this.description,0),d=c.V(this.description,1),e=0,f=1,h=this.description.Aa;f<h;f++)for(var g=this.description.Hd(f),n=a.pa.Wa(g),g=a.pa.ue(g),p=0;p<n;p++)this.fa[b+e]=g,this.fa[d+e]=g,e++}};c.prototype.nm=
function(b){if(null!=this.fa)if(2<b.le.length){for(var d=a.Od.iu(b,this.description),e=[],f=c.V(this.description,0),h=c.V(this.description,1),g=c.V(b,0),n=c.V(b,1),p=0,m=1,s=b.Aa;m<s;m++){var t=b.Hd(m),u=a.pa.Wa(t);if(-1==d[m])for(var v=a.pa.ue(t),t=0;t<u;t++)e[g+p]=v,e[n+p]=v,p++;else{v=this.description.fj(d[m])-2;for(t=0;t<u;t++)e[g+p]=this.fa[f+v],e[n+p]=this.fa[h+v],p++,v++}}this.fa=e}else this.fa=null;this.description=b};c.prototype.yd=function(b,d,e){if(this.R.s())throw a.g.ra("This operation was performed on an Empty Geometry.");
if(0==d)return 0!=b?0!=e?this.R.G:this.R.B:0!=e?this.R.C:this.R.v;if(e>=a.pa.Wa(d))throw a.g.Uc();var f=this.description.zf(d);return 0<=f?(this.ns(),this.fa[c.V(this.description,b)+this.description.fj(f)-2+e]):a.pa.ue(d)};c.prototype.DA=function(b,d,e,f){this.qc();if(0==d)0!=b?0!=e?this.R.G=f:this.R.B=f:0!=e?this.R.C=f:this.R.v=f;else{if(e>=a.pa.Wa(d))throw a.g.Uc();if(!this.hasAttribute(d)){if(a.pa.nD(d,f))return;this.Ne(d)}d=this.description.zf(d);this.ns();this.fa[c.V(this.description,b)+this.description.fj(d)-
2+e]=f}};c.V=function(a,b){return b*(a.le.length-2)};c.prototype.Ga=function(b){this.qc();var c=new a.i;b.o(c);return this.R.Ga(c)};c.prototype.jc=function(b){return b instanceof a.i?this.R.jc(b):this.R.jc(b.R)};c.prototype.offset=function(a,b){this.qc();this.R.offset(a,b)};c.prototype.normalize=function(){this.qc();this.R.normalize()};c.prototype.Af=function(b){if(void 0!==b)if(b.Qf(this.description),this.s())b.Ja();else{for(var c=this.description.Aa,d=1;d<c;d++)for(var e=this.description.Hd(d),
q=a.pa.Wa(e),f=0;f<q;f++){var h=0.5*(this.mC(0,e,f)+this.mC(1,e,f));b.setAttribute(e,f,h)}b.ic(this.R.Af())}else{b=new a.Va(this.description);if(this.s())return b;c=this.description.Aa;for(d=1;d<c;d++){e=this.description.Fd(d);q=a.pa.Wa(e);for(f=0;f<q;f++)h=0.5*(this.yd(0,e,f)+this.yd(1,e,f)),b.setAttribute(e,f,h)}b.ic(this.R.lw(),this.R.Vs());return b}};c.prototype.yw=function(){return new a.Va(this.R.yw())};c.prototype.contains=function(b){return b instanceof a.Va?b.s()?!1:this.R.contains(b.lk(),
b.mk()):this.R.contains(b.R)};c.prototype.lc=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.s())return a.s()?!0:!1;if(!this.R.lc(a.R))return!1;for(var b=0,d=2*(this.description.le.length-2);b<d;b++)if(this.fa[b]!=a.fa[b])return!1;return!0};c.prototype.hc=function(){var b=this.description.hc(),b=a.I.kg(b,this.R.hc());if(!this.s()&&null!=this.fa)for(var c=0,d=2*(this.description.le.length-2);c<d;c++)b=a.I.kg(b,this.fa[c]);return b};c.prototype.Rf=
function(){return a.Hh.il(this,null)};c.prototype.toString=function(){return this.s()?"Envelope: []":"Envelope: ["+this.R.v+", "+this.R.C+", "+this.R.B+", "+this.R.G+"]"};return c}(a.T);a.Vj=b})(z||(z={}));(function(a){var b=function(){function b(a,c,d,e){void 0===a?this.Ja():(this.v=a,this.C=c,this.B=d,this.G=e)}b.Oa=function(a,c,d,e){var f=new b;f.v=a;f.C=c;f.B=d;f.G=e;return f};b.prototype.K=function(c,k,d,e){"number"===typeof c?void 0!==d?(this.v=c,this.C=k,this.B=d,this.G=e,this.normalize()):
(this.v=c,this.C=k,this.B=c,this.G=k):c instanceof a.b?void 0!==k?(this.v=c.x-0.5*k,this.B=this.v+k,this.C=c.y-0.5*d,this.G=this.C+d,this.normalize()):(this.v=c.x,this.C=c.y,this.B=c.x,this.G=c.y):c instanceof b?this.K(c.v,c.C,c.B,c.G):c instanceof a.Nd&&(c.s()||k.s()?this.Ja():(this.v=c.qa,this.B=c.va,this.C=k.qa,this.G=k.va))};b.prototype.IN=function(a,c){var d=new b;d.K(this.v,this.C,this.B,this.G);d.P(a,c);return d};b.prototype.Ey=function(a,b){if(void 0!==b)if(0==b)this.Ja();else{this.v=a[0].x;
this.C=a[0].y;this.B=this.v;this.G=this.C;for(var c=1;c<b;c++){var d=a[c];d.x<this.v?this.v=d.x:d.x>this.B&&(this.B=d.x);d.y<this.C?this.C=d.y:d.y>this.G&&(this.G=d.y)}}else if(null==a||0==a.length)this.Ja();else{d=a[0];this.K(d.x,d.y);for(c=1;c<a.length;c++)d=a[c],this.Oj(d.x,d.y)}};b.prototype.Ja=function(){this.G=this.B=this.C=this.v=NaN};b.prototype.s=function(){return isNaN(this.v)};b.prototype.Db=function(c,k){"number"===typeof c?this.s()?(this.v=c,this.C=k,this.B=c,this.G=k):(this.v>c?this.v=
c:this.B<c&&(this.B=c),this.C>k?this.C=k:this.G<k&&(this.G=k)):c instanceof a.b?this.Db(c.x,c.y):c instanceof a.ee?this.Db(c.x,c.y):c instanceof b&&!c.s()&&(this.Db(c.v,c.C),this.Db(c.B,c.G))};b.prototype.Oj=function(a,b){this.v>a?this.v=a:this.B<a&&(this.B=a);this.C>b?this.C=b:this.G<b&&(this.G=b)};b.prototype.P=function(a,b){this.s()||(this.v-=a,this.B+=a,this.C-=b,this.G+=b,(this.v>this.B||this.C>this.G)&&this.Ja())};b.prototype.scale=function(a){0>a&&this.Ja();this.s()||(this.v*=a,this.B*=a,this.C*=
a,this.G*=a)};b.prototype.jc=function(a){return!this.s()&&!a.s()&&(this.v<=a.v?this.B>=a.v:a.B>=this.v)&&(this.C<=a.C?this.G>=a.C:a.G>=this.C)};b.prototype.rD=function(a){return(this.v<=a.v?this.B>=a.v:a.B>=this.v)&&(this.C<=a.C?this.G>=a.C:a.G>=this.C)};b.prototype.Ga=function(a){if(this.s()||a.s())return!1;a.v>this.v&&(this.v=a.v);a.B<this.B&&(this.B=a.B);a.C>this.C&&(this.C=a.C);a.G<this.G&&(this.G=a.G);(a=this.v<=this.B&&this.C<=this.G)||this.Ja();return a};b.prototype.vu=function(b){switch(b){case 0:return a.b.Oa(this.v,
this.C);case 1:return a.b.Oa(this.v,this.G);case 2:return a.b.Oa(this.B,this.G);case 3:return a.b.Oa(this.B,this.C);default:throw a.g.Uc();}};b.prototype.hy=function(b){if(null==b||4>b.length)throw a.g.N();null!=b[0]?b[0].ma(this.v,this.C):b[0]=a.b.Oa(this.v,this.C);null!=b[1]?b[1].ma(this.v,this.G):b[1]=a.b.Oa(this.v,this.G);null!=b[2]?b[2].ma(this.B,this.G):b[2]=a.b.Oa(this.B,this.G);null!=b[3]?b[3].ma(this.B,this.C):b[3]=a.b.Oa(this.B,this.C)};b.prototype.rN=function(){return this.s()?0:this.aa()*
this.ba()};b.prototype.CC=function(){return this.s()?0:2*(this.aa()+this.ba())};b.prototype.lw=function(){return(this.B+this.v)/2};b.prototype.Vs=function(){return(this.G+this.C)/2};b.prototype.aa=function(){return this.B-this.v};b.prototype.ba=function(){return this.G-this.C};b.prototype.move=function(a,b){this.s()||(this.v+=a,this.C+=b,this.B+=a,this.G+=b)};b.prototype.offset=function(a,b){this.v+=a;this.B+=a;this.C+=b;this.G+=b};b.prototype.normalize=function(){if(!this.s()){var a=Math.min(this.v,
this.B),b=Math.max(this.v,this.B);this.v=a;this.B=b;a=Math.min(this.C,this.G);b=Math.max(this.C,this.G);this.C=a;this.G=b}};b.prototype.Yl=function(a){a.ma(this.v,this.C)};b.prototype.YE=function(a){a.ma(this.B,this.C)};b.prototype.aF=function(a){a.ma(this.v,this.G)};b.prototype.Zl=function(a){a.ma(this.B,this.G)};b.prototype.dP=function(){return this.s()||this.v<=this.B&&this.C<=this.G};b.prototype.Af=function(){return a.b.Oa((this.B+this.v)/2,(this.G+this.C)/2)};b.prototype.yw=function(){return a.b.Oa(this.v,
this.C)};b.prototype.contains=function(c,k){if(void 0!==k)return c>=this.v&&c<=this.B&&k>=this.C&&k<=this.G;if(c instanceof a.Va)return this.contains(c.lk(),c.mk());if(c instanceof a.b)return this.contains(c.x,c.y);if(c instanceof b)return c.v>=this.v&&c.B<=this.B&&c.C>=this.C&&c.G<=this.G;throw a.g.N();};b.prototype.jl=function(c,k){if(void 0!==k)return c>this.v&&c<this.B&&k>this.C&&k<this.G;if(c instanceof a.b)return this.jl(c.x,c.y);if(c instanceof b)return c.v>this.v&&c.B<this.B&&c.C>this.C&&
c.G<this.G;throw a.g.N();};b.prototype.lc=function(a){return a==this?!0:a instanceof b?this.s()&&a.s()?!0:this.v!=a.v||this.C!=a.C||this.B!=a.B||this.G!=a.G?!1:!0:!1};b.prototype.hc=function(){var b=this.v,b=a.I.truncate(b^b>>>32),c=a.I.kg(b),b=this.B,b=a.I.truncate(b^b>>>32),c=a.I.kg(b,c),b=this.C,b=a.I.truncate(b^b>>>32),c=a.I.kg(b,c),b=this.G,b=a.I.truncate(b^b>>>32);return a.I.kg(b,c)};b.prototype.vv=function(b){var c=new a.b;c.J(b);if(c.pv())return c;if(this.s())return c.FA(),c;c.x<this.v?c.x=
this.v:c.x>this.B&&(c.x=this.B);c.y<this.C?c.y=this.C:c.y>this.G&&(c.y=this.G);if(!c.lc(b))return c;b=this.Af();(c.x<b.x?c.x-this.v:this.B-c.x)<(c.y<b.y?c.y-this.C:this.G-c.y)?c.x=c.x<b.x?this.v:this.B:c.y=c.y<b.y?this.C:this.G;return c};b.prototype.ms=function(a){if(this.s())return NaN;if(a.x==this.v)return a.y-this.C;var b=this.G-this.C,c=this.B-this.v;return a.y==this.G?b+a.x-this.v:a.x==this.B?b+c+this.G-a.y:a.y==this.C?2*b+c+this.B-a.x:this.ms(this.vv(a))};b.prototype.vA=function(a){if(this.s())return-1;
a=this.ms(a);var b=this.G-this.C,c=this.B-this.v;return a<b?0:(a-=b)<c?1:a-c<b?2:3};b.prototype.lv=function(){return this.s()?2.220446049250313E-14:2.220446049250313E-14*(Math.abs(this.v)+Math.abs(this.B)+Math.abs(this.C)+Math.abs(this.G)+1)};b.prototype.Nv=function(a,c){var d=this.ej(a),e=this.ej(c);if(0!=(d&e))return 0;if(0==(d|e))return 4;var f=(0!=d?1:0)|(0!=e?2:0);do{var h=c.x-a.x,g=c.y-a.y;h>g?0!=(d&b.Cc)?(0!=(d&b.ob)?(a.y+=g*(this.v-a.x)/h,a.x=this.v):(a.y+=g*(this.B-a.x)/h,a.x=this.B),d=this.ej(a)):
0!=(e&b.Cc)?(0!=(e&b.ob)?(c.y+=g*(this.v-c.x)/h,c.x=this.v):(c.y+=g*(this.B-c.x)/h,c.x=this.B),e=this.ej(c)):0!=d?(0!=(d&b.ac)?(a.x+=h*(this.C-a.y)/g,a.y=this.C):(a.x+=h*(this.G-a.y)/g,a.y=this.G),d=this.ej(a)):(0!=(e&b.ac)?(c.x+=h*(this.C-c.y)/g,c.y=this.C):(c.x+=h*(this.G-c.y)/g,c.y=this.G),e=this.ej(c)):0!=(d&b.Bd)?(0!=(d&b.ac)?(a.x+=h*(this.C-a.y)/g,a.y=this.C):(a.x+=h*(this.G-a.y)/g,a.y=this.G),d=this.ej(a)):0!=(e&b.Bd)?(0!=(e&b.ac)?(c.x+=h*(this.C-c.y)/g,c.y=this.C):(c.x+=h*(this.G-c.y)/g,c.y=
this.G),e=this.ej(c)):0!=d?(0!=(d&b.ob)?(a.y+=g*(this.v-a.x)/h,a.x=this.v):(a.y+=g*(this.B-a.x)/h,a.x=this.B),d=this.ej(a)):(0!=(e&b.ob)?(c.y+=g*(this.v-c.x)/h,c.x=this.v):(c.y+=g*(this.B-c.x)/h,c.x=this.B),e=this.ej(c));if(0!=(d&e))return 0}while(0!=(d|e));return f};b.prototype.ej=function(a){return(a.x<this.v?1:0)|(a.x>this.B?1:0)<<1|(a.y<this.C?1:0)<<2|(a.y>this.G?1:0)<<3};b.prototype.mg=function(a){return!this.s()&&(this.aa()<=a||this.ba()<=a)};b.prototype.Fb=function(b){return b instanceof a.b?
Math.sqrt(this.gG(b)):Math.sqrt(this.Ou(b))};b.prototype.Ou=function(a){var b=0,c=0,d;d=this.v-a.B;d>b&&(b=d);d=this.C-a.G;d>c&&(c=d);d=a.v-this.B;d>b&&(b=d);d=a.C-this.G;d>c&&(c=d);return b*b+c*c};b.prototype.gG=function(a){var b=0,c=0,d;d=this.v-a.x;d>b&&(b=d);d=this.C-a.y;d>c&&(c=d);d=a.x-this.B;d>b&&(b=d);d=a.y-this.G;d>c&&(c=d);return b*b+c*c};b.prototype.wu=function(a){this.s()?a.Ja():a.K(this.v,this.B)};b.ob=1;b.ac=4;b.Cc=3;b.Bd=12;return b}();a.i=b})(z||(z={}));(function(a){var b;(function(a){a[a.initialize=
0]="initialize";a[a.initializeRed=1]="initializeRed";a[a.initializeBlue=2]="initializeBlue";a[a.initializeRedBlue=3]="initializeRedBlue";a[a.sweep=4]="sweep";a[a.sweepBruteForce=5]="sweepBruteForce";a[a.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce";a[a.sweepRedBlue=7]="sweepRedBlue";a[a.sweepRed=8]="sweepRed";a[a.sweepBlue=9]="sweepBlue";a[a.iterate=10]="iterate";a[a.iterateRed=11]="iterateRed";a[a.iterateBlue=12]="iterateBlue";a[a.iterateBruteForce=13]="iterateBruteForce";a[a.iterateRedBlueBruteForce=
14]="iterateRedBlueBruteForce";a[a.resetRed=15]="resetRed";a[a.resetBlue=16]="resetBlue"})(b||(b={}));var c=function(){function a(b,c){this.th=b;this.KD=c}a.prototype.Zp=function(a,b,c){this.th.BS(c,a,b,this.KD)};a.prototype.Mo=function(a){return this.th.pq(a,this.KD)};return a}();b=function(){function b(){this.Vt=this.cn=this.Ve=this.ad=null;this.fp=new a.i;this.Al=this.Mi=this.Ni=this.od=this.rf=this.ud=this.Nt=this.Wm=this.Zc=this.vb=null;this.Hb=-1;this.ka=0;this.Rj()}b.prototype.Vp=function(){this.Rj();
this.At=!0;null==this.vb?(this.Wm=new a.ga(0),this.vb=[]):(this.Wm.cf(0),this.vb.length=0)};b.prototype.Wc=function(b,c){if(!this.At)throw a.g.xa();var d=new a.i;d.K(c);this.Wm.add(b);this.vb.push(d)};b.prototype.wo=function(){if(!this.At)throw a.g.xa();this.At=!1;null!=this.vb&&0<this.vb.length&&(this.Hb=0,this.Ec=!1)};b.prototype.jG=function(){this.Rj();this.zt=!0;null==this.vb?(this.Wm=new a.ga(0),this.vb=[]):(this.Wm.cf(0),this.vb.length=0)};b.prototype.OA=function(b,c){if(!this.zt)throw a.g.xa();
var d=new a.i;d.K(c);this.Wm.add(b);this.vb.push(d)};b.prototype.$B=function(){if(!this.zt)throw a.g.xa();this.zt=!1;null!=this.vb&&0<this.vb.length&&null!=this.Zc&&0<this.Zc.length&&(-1==this.Hb?this.Hb=3:2==this.Hb?this.Hb=3:3!=this.Hb&&(this.Hb=1),this.Ec=!1)};b.prototype.iG=function(){this.Rj();this.yt=!0;null==this.Zc?(this.Nt=new a.ga(0),this.Zc=[]):(this.Nt.cf(0),this.Zc.length=0)};b.prototype.LA=function(b,c){if(!this.yt)throw a.g.xa();var d=new a.i;d.K(c);this.Nt.add(b);this.Zc.push(d)};
b.prototype.ZB=function(){if(!this.yt)throw a.g.xa();this.yt=!1;null!=this.vb&&0<this.vb.length&&null!=this.Zc&&0<this.Zc.length&&(-1==this.Hb?this.Hb=3:1==this.Hb?this.Hb=3:3!=this.Hb&&(this.Hb=2),this.Ec=!1)};b.prototype.next=function(){if(this.Ec)return!1;for(var b=!0;b;)switch(this.Hb){case 0:b=this.Qw();break;case 1:b=this.yO();break;case 2:b=this.vO();break;case 3:b=this.xO();break;case 4:b=this.LS();break;case 5:b=this.HS();break;case 6:b=this.IS();break;case 7:b=this.JS();break;case 8:b=this.Qu();
break;case 9:b=this.Wy();break;case 10:b=this.$w();break;case 11:b=this.iP();break;case 12:b=this.fP();break;case 13:b=this.gP();break;case 14:b=this.hP();break;case 15:b=this.hF();break;case 16:b=this.gF();break;default:throw a.g.wa();}return this.Ec?!1:!0};b.prototype.YF=function(a){this.ka=a};b.prototype.Fw=function(a){return this.vb[a]};b.prototype.jw=function(a){return this.Zc[a]};b.prototype.jk=function(a){return this.Wm.read(a)};b.prototype.ek=function(a){return this.Nt.read(a)};b.Cv=function(a){return 1==
(a&1)};b.Yk=function(a){return 0==(a&1)};b.prototype.Rj=function(){this.At=this.yt=this.zt=!1;this.pf=this.qf=this.tg=this.ae=-1;this.Ec=!0};b.prototype.Qw=function(){this.mf=this.Ff=-1;if(10>this.vb.length)return this.ae=this.vb.length,this.Hb=5,!0;null==this.ad&&(this.ad=new a.bq(!0),this.cn=this.ad.Re(),this.ud=new a.ga(0));this.ad.Vp();for(var b=0;b<this.vb.length;b++){var c=this.vb[b];this.ad.gq(c.v,c.B)}this.ad.wo();this.ud.xb(2*this.vb.length);this.ud.resize(0);for(b=0;b<2*this.vb.length;b++)this.ud.add(b);
this.Lr(this.ud,2*this.vb.length,!0);this.ae=2*this.vb.length;this.Hb=4;return!0};b.prototype.yO=function(){this.mf=this.Ff=-1;if(10>this.vb.length||10>this.Zc.length)return this.ae=this.vb.length,this.Hb=6,!0;null==this.ad&&(this.ad=new a.bq(!0),this.cn=this.ad.Re(),this.ud=new a.ga(0));this.ad.Vp();for(var b=0;b<this.vb.length;b++){var c=this.vb[b];this.ad.gq(c.v,c.B)}this.ad.wo();this.ud.xb(2*this.vb.length);this.ud.resize(0);for(b=0;b<2*this.vb.length;b++)this.ud.add(b);this.Lr(this.ud,this.ud.size,
!0);this.ae=this.ud.size;-1!=this.qf&&(this.od.Fg(this.qf),this.Ni.resize(0),this.qf=-1);this.Hb=7;return this.gF()};b.prototype.vO=function(){this.mf=this.Ff=-1;if(10>this.vb.length||10>this.Zc.length)return this.ae=this.vb.length,this.Hb=6,!0;null==this.Ve&&(this.Ve=new a.bq(!0),this.Vt=this.Ve.Re(),this.rf=new a.ga(0));this.Ve.Vp();for(var b=0;b<this.Zc.length;b++){var c=this.Zc[b];this.Ve.gq(c.v,c.B)}this.Ve.wo();this.rf.xb(2*this.Zc.length);this.rf.resize(0);for(b=0;b<2*this.Zc.length;b++)this.rf.add(b);
this.Lr(this.rf,this.rf.size,!1);this.tg=this.rf.size;-1!=this.pf&&(this.od.Fg(this.pf),this.Mi.resize(0),this.pf=-1);this.Hb=7;return this.hF()};b.prototype.xO=function(){this.mf=this.Ff=-1;if(10>this.vb.length||10>this.Zc.length)return this.ae=this.vb.length,this.Hb=6,!0;null==this.ad&&(this.ad=new a.bq(!0),this.cn=this.ad.Re(),this.ud=new a.ga(0));null==this.Ve&&(this.Ve=new a.bq(!0),this.Vt=this.Ve.Re(),this.rf=new a.ga(0));this.ad.Vp();for(var b=0;b<this.vb.length;b++){var c=this.vb[b];this.ad.gq(c.v,
c.B)}this.ad.wo();this.Ve.Vp();for(b=0;b<this.Zc.length;b++)c=this.Zc[b],this.Ve.gq(c.v,c.B);this.Ve.wo();this.ud.xb(2*this.vb.length);this.rf.xb(2*this.Zc.length);this.ud.resize(0);this.rf.resize(0);for(b=0;b<2*this.vb.length;b++)this.ud.add(b);for(b=0;b<2*this.Zc.length;b++)this.rf.add(b);this.Lr(this.ud,this.ud.size,!0);this.Lr(this.rf,this.rf.size,!1);this.ae=this.ud.size;this.tg=this.rf.size;-1!=this.qf&&(this.od.Fg(this.qf),this.Ni.resize(0),this.qf=-1);-1!=this.pf&&(this.od.Fg(this.pf),this.Mi.resize(0),
this.pf=-1);this.Hb=7;return!0};b.prototype.LS=function(){var a=this.ud.get(--this.ae),c=a>>1;if(b.Yk(a))return this.ad.remove(c),0==this.ae?(this.mf=this.Ff=-1,this.Ec=!0,!1):!0;this.cn.uy(this.vb[c].v,this.vb[c].B,this.ka);this.Ff=c;this.Hb=10;return!0};b.prototype.HS=function(){if(-1==--this.ae)return this.mf=this.Ff=-1,this.Ec=!0,!1;this.tg=this.Ff=this.ae;this.Hb=13;return!0};b.prototype.IS=function(){if(-1==--this.ae)return this.mf=this.Ff=-1,this.Ec=!0,!1;this.Ff=this.ae;this.tg=this.Zc.length;
this.Hb=14;return!0};b.prototype.JS=function(){var a=this.ud.get(this.ae-1),c=this.rf.get(this.tg-1),d=this.pq(a,!0),e=this.pq(c,!1);return d>e?this.Qu():d<e?this.Wy():b.Cv(a)?this.Qu():b.Cv(c)?this.Wy():this.Qu()};b.prototype.Qu=function(){var c=this.ud.get(--this.ae),d=c>>1;if(b.Yk(c))return-1!=this.qf&&-1!=this.Ni.get(d)?(this.od.Jc(this.qf,this.Ni.get(d)),this.Ni.set(d,-1)):this.ad.remove(d),0==this.ae?(this.mf=this.Ff=-1,this.Ec=!0,!1):!0;if(-1!=this.pf&&0<this.od.vq(this.pf))for(c=this.od.gc(this.pf);-1!=
c;){var e=this.od.getData(c);this.Ve.lg(e);this.Mi.set(e,-1);e=this.od.bb(c);this.od.Jc(this.pf,c);c=e}0<this.Ve.size()?(this.Vt.uy(this.vb[d].v,this.vb[d].B,this.ka),this.Ff=d,this.Hb=12):(-1==this.qf&&(null==this.od&&(this.od=new a.$n),this.Ni=new a.ga(0),this.Ni.resize(this.vb.length,-1),this.Ni.dh(-1,0,this.vb.length),this.qf=this.od.jh(1)),this.Ni.set(d,this.od.addElement(this.qf,d)),this.Hb=7);return!0};b.prototype.Wy=function(){var c=this.rf.get(--this.tg),d=c>>1;if(b.Yk(c))return-1!=this.pf&&
-1!=this.Mi.get(d)?(this.od.Jc(this.pf,this.Mi.get(d)),this.Mi.set(d,-1)):this.Ve.remove(d),0==this.tg?(this.mf=this.Ff=-1,this.Ec=!0,!1):!0;if(-1!=this.qf&&0<this.od.vq(this.qf))for(c=this.od.gc(this.qf);-1!=c;){var e=this.od.getData(c);this.ad.lg(e);this.Ni.set(e,-1);e=this.od.bb(c);this.od.Jc(this.qf,c);c=e}0<this.ad.size()?(this.cn.uy(this.Zc[d].v,this.Zc[d].B,this.ka),this.mf=d,this.Hb=11):(-1==this.pf&&(null==this.od&&(this.od=new a.$n),this.Mi=new a.ga(0),this.Mi.resize(this.Zc.length,-1),
this.Mi.dh(-1,0,this.Zc.length),this.pf=this.od.jh(0)),this.Mi.set(d,this.od.addElement(this.pf,d)),this.Hb=7);return!0};b.prototype.$w=function(){this.mf=this.cn.next();if(-1!=this.mf)return!1;var a=this.ud.get(this.ae)>>1;this.ad.lg(a);this.Hb=4;return!0};b.prototype.iP=function(){this.Ff=this.cn.next();if(-1!=this.Ff)return!1;this.mf=this.Ff=-1;var a=this.rf.get(this.tg)>>1;this.Ve.lg(a);this.Hb=7;return!0};b.prototype.fP=function(){this.mf=this.Vt.next();if(-1!=this.mf)return!1;var a=this.ud.get(this.ae)>>
1;this.ad.lg(a);this.Hb=7;return!0};b.prototype.gP=function(){if(-1==--this.tg)return this.Hb=5,!0;this.fp.K(this.vb[this.ae]);var a=this.vb[this.tg];this.fp.P(this.ka,this.ka);return this.fp.jc(a)?(this.mf=this.tg,!1):!0};b.prototype.hP=function(){if(-1==--this.tg)return this.Hb=6,!0;this.fp.K(this.vb[this.ae]);var a=this.Zc[this.tg];this.fp.P(this.ka,this.ka);return this.fp.jc(a)?(this.mf=this.tg,!1):!0};b.prototype.hF=function(){if(null==this.ad)return this.Ec=!0,!1;this.ae=this.ud.size;0<this.ad.size()&&
this.ad.reset();-1!=this.qf&&(this.od.Fg(this.qf),this.Ni.resize(0),this.qf=-1);this.Ec=!1;return!0};b.prototype.gF=function(){if(null==this.Ve)return this.Ec=!0,!1;this.tg=this.rf.size;0<this.Ve.size()&&this.Ve.reset();-1!=this.pf&&(this.od.Fg(this.pf),this.Mi.resize(0),this.pf=-1);this.Ec=!1;return!0};b.prototype.Lr=function(b,d,e){null==this.Al&&(this.Al=new a.Rr);e=new c(this,e);this.Al.sort(b,0,d,e)};b.prototype.BS=function(a,c,d,e){var f=this;a.xd(c,d,function(a,c){var k=f.pq(a,e),d=f.pq(c,
e);return k<d||k==d&&b.Yk(a)&&b.Cv(c)?-1:1})};b.prototype.pq=function(a,c){var d=0.5*this.ka;if(c){var e=this.vb[a>>1];return b.Yk(a)?e.C-d:e.G+d}e=this.Zc[a>>1];return b.Yk(a)?e.C-d:e.G+d};return b}();a.sz=b})(z||(z={}));(function(a){var b=function(){function b(){}b.Oa=function(a,c,d,e,f,h){var g=new b;g.v=a;g.C=c;g.Je=d;g.B=e;g.G=f;g.ig=h;return g};b.prototype.Ja=function(){this.Je=this.v=NaN};b.prototype.s=function(){return isNaN(this.v)};b.prototype.UO=function(){return isNaN(this.Je)};b.prototype.K=
function(a,b,c,d,e,f){void 0!==d?"number"===typeof a?(this.v=a,this.C=b,this.Je=c,this.B=d,this.G=e,this.ig=f):(this.v=a.x-0.5*b,this.B=this.v+b,this.C=a.y-0.5*c,this.G=this.C+c,this.Je=a.z-0.5*d,this.ig=this.Je+d):(this.v=a,this.C=b,this.Je=c,this.B=a,this.G=b,this.ig=c)};b.prototype.move=function(a){this.v+=a.x;this.C+=a.y;this.Je+=a.z;this.B+=a.x;this.G+=a.y;this.ig+=a.z};b.prototype.copyTo=function(a){a.v=this.v;a.C=this.C;a.B=this.B;a.G=this.G};b.prototype.Oj=function(a,b,c){this.v>a?this.v=
a:this.B<a&&(this.B=a);this.C>b?this.C=b:this.G<b&&(this.G=b);0==isNaN(this.Je)?this.Je>c?this.Je=c:this.ig<c&&(this.ig=c):this.ig=this.Je=c};b.prototype.Db=function(c,k,d,e,f,h){if("number"===typeof c)e?(this.Db(c,k,d),this.Db(e,f,h)):this.s()?(this.v=c,this.C=k,this.Je=d,this.B=c,this.G=k,this.ig=d):this.Oj(c,k,d);else if(c instanceof a.ee)this.Db(c.x,c.y,c.z);else if(c instanceof b)c.s()||(this.Db(c.v,c.C,c.Je),this.Db(c.B,c.G,c.ig));else throw a.g.N();};b.prototype.Oa=function(a,b,c){a.s()||b.s()?
this.Ja():(this.v=a.qa,this.B=a.va,this.C=b.qa,this.G=b.va,this.Je=c.qa,this.ig=c.va)};b.prototype.hy=function(b){if(null==b||8>b.length)throw a.g.N();b[0]=new a.ee(this.v,this.C,this.Je);b[1]=new a.ee(this.v,this.G,this.Je);b[2]=new a.ee(this.B,this.G,this.Je);b[3]=new a.ee(this.B,this.C,this.Je);b[4]=new a.ee(this.v,this.C,this.ig);b[5]=new a.ee(this.v,this.G,this.ig);b[6]=new a.ee(this.B,this.G,this.ig);b[7]=new a.ee(this.B,this.C,this.ig)};b.prototype.Ey=function(a){if(null==a||0==a.length)this.Ja();
else{var b=a[0];this.K(b.x,b.y,b.z);for(b=1;b<a.length;b++){var c=a[b];this.Oj(c.x,c.y,c.z)}}};return b}();a.fH=b})(z||(z={}));(function(a){(function(a){a.wa=function(){var a=Error();a.message="Internal Error";return a};a.qe=function(){var a=Error();a.message="Not Implemented";return a};a.cj=function(){var a=Error();a.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular";return a};a.xa=function(){var a=Error();a.message="Invalid Call";return a};
a.N=function(a){var b=Error();b.message="Illegal Argument Exception";void 0!==a&&(b.message+=": "+a);return b};a.BI=function(){var a=Error();a.message="Runtime Exception.";return a};a.ra=function(a){var b=Error();b.message="Geometry Exception: "+a;return b};a.PG=function(){var a=Error();a.message="Assert Failed Exception";return a};a.Uc=function(){var a=Error();a.message="IndexOutOfBoundsException";return a};a.aU=function(a){a.message="UserCancelException";return a}})(a.g||(a.g={}))})(z||(z={}));
(function(a){var b=function(){function b(a,c){this.Ma=a;this.hE=c;this.kE=-1;this.rk=!1}b.prototype.next=function(){if(++this.kE==this.hE.F())return null;var b=this.hE.Fa(this.kE);b.scale(this.Ma.Rb);var c=new a.Ka;this.Ma.Iv(b,this.rk,c);return c};b.prototype.ya=function(){return 0};return b}(),c=function(){function b(c,k,d){this.Ma=c;this.Zt=k;this.Om=!1;this.Um=d;this.Mt=[0];this.zj=[0];this.Qi=[0];this.Sq=[0];this.rk=!1;this.$o=new a.Ka;this.Bj=[]}b.prototype.next=function(){if(this.Om){this.Om=
!1;this.bd.ia();var b=a.T.Yj(this.$o);return a.Of.Qj(b,this.Ma.jp,!0,!0,this.Ma.Yb)}null==this.bd&&(this.bd=this.Zt.Ca(),this.bd.kb(),null!=this.Um&&this.Um.lo());if(!this.bd.La()){if(!this.bd.kb())return null;null!=this.Um&&this.Um.lo()}b=null;this.zj[0]=0;this.Fx=this.Mt[0]=0;this.uh=NaN;this.Om=!1;for(var c=this.Bj.length=0,k=new a.b,e=new a.b,f=[0];this.bd.La()&&8>this.Fx;){var h=this.bd.ia();k.J(h.Mb());e.J(h.oc());k.scale(this.Ma.Rb);e.scale(this.Ma.Rb);a.ui.Hs(k,e)?k.x=e.x:a.ui.Fs(k,e)&&(e.x=
k.x);this.Bj.length=0;a.ui.kC(this.Ma.Gb,this.Ma.Xb,this.Ma.ke,k,e,this.Ma.Nx,this.Ma.hr,f,this.Qi,this.Sq,this.Bj,this.Mt);null!=this.Um&&(h=this.Bj.slice(0),this.Um.dD(this.Um.ea()-1,h,h.length-1));a.ui.Gs(k,e)?(this.$o.Ja(),this.Ma.Iv(k,this.rk,this.$o),this.Om=!0):(this.$o.Ja(),this.Om=this.Lv(f[0],this.$o));if(this.Om){this.bd.oi();if(this.bd.Ow()){this.bd.oi();this.bd.ia();break}this.bd.yR();break}null==b&&(b=new a.Ka,b.lo());this.TA(b);c++}this.Mt[0]=0;if(0<c){for(f=this.bd.Jb();0<c;)this.bd.oi(),
k.J(this.Zt.Fa(this.bd.Jb())),e.J(this.Zt.Fa(this.bd.Bm())),k.scale(this.Ma.Rb),e.scale(this.Ma.Rb),this.rk&&(a.ui.Hs(k,e)?k.x=e.x:a.ui.Fs(k,e)&&(e.x=k.x)),this.Bj.length=0,a.ui.kC(this.Ma.Gb,this.Ma.Xb,this.Ma.ke,e,k,this.Ma.Nx,this.Ma.hr,null,this.Qi,this.Sq,this.Bj,this.Mt),this.TA(b),c--;k.J(this.Zt.Fa(this.bd.Jb()));k.scale(this.Ma.Rb);d.kq(this.Ma.Gb,this.Ma.Xb,this.Ma.Rb,this.Ma.hb,k,this.uh+1.570796326794897,this.uh+4.71238898038469,this.Ma.Sm,this.rk,this.zj,b,NaN,NaN);this.bd.Sb(f);this.bd.ia();
c=a.Ia.Cg(null,b,!0);return a.Of.Qj(b,c,!0,!0,this.Ma.Yb)}this.Om=!1;this.bd.ia();b=a.T.Yj(this.$o);return a.Of.Qj(b,this.Ma.jp,!0,!0,this.Ma.Yb)};b.prototype.TA=function(b){var c=this.Bj[0],k,e=this.Qi[0]-1.570796326794897,f=this.Sq[0]+1.570796326794897,h;if(!isNaN(this.uh)){this.uh>=this.Qi[0]?(k=this.uh+1.570796326794897,e=k+3.141592653589793-(this.uh-this.Qi[0])):(k=this.uh+1.570796326794897,e=k+3.141592653589793-(6.283185307179586-(this.Qi[0]-this.uh)));h=this.uh>=this.Qi[0]&&3.141592653589793>=
this.uh-this.Qi[0]?!1:this.uh<this.Qi[0]&&3.141592653589793<=this.Qi[0]-this.uh?!1:!0;var g=!1;if(Math.abs(e-k)<=0.5*this.Ma.Sm)if(h){var n=b.Fa(b.F()-2);n.scale(this.Ma.Rb);var p=new a.ca(0);a.zb.gw(this.Ma.Gb,this.Ma.Xb,c.x,c.y,n.x,n.y,p);for(n=p.l;n<=k;)n+=6.283185307179586;for(;n>k;)n-=6.283185307179586;n<e&&(g=!0)}else g=!0;g?(b.eF(0,b.F()-1),this.rk||(c=new a.b,c.J(b.Fa(b.F()-1)),c.scale(this.Ma.Rb),-3.141592653589793>c.x-this.zj[0]?this.zj[0]-=6.283185307179586:3.141592653589793<c.x-this.zj[0]&&
(this.zj[0]+=6.283185307179586)),h||(e=0.5*(e+k))):(h?(k=new a.b,k.J(c),k.scale(1/this.Ma.Rb),b.kf(0,-1,k)):d.kq(this.Ma.Gb,this.Ma.Xb,this.Ma.Rb,this.Ma.hb,this.Bj[0],k,e,this.Ma.Sm,this.rk,this.zj,b,NaN,NaN),this.Fx+=1)}d.Hv(this.Ma.Gb,this.Ma.Xb,this.Ma.Rb,this.Ma.hb,this.Ma.ke,this.Bj,e,f,this.rk,this.zj,b);this.uh=this.Sq[0]};b.prototype.Lv=function(a,b){return this.Ma.Lv(this.Bj,a,this.Qi[0],this.Sq[0],this.rk,b)};b.prototype.ya=function(){return 0};return b}(),d=function(){function k(){}k.buffer=
function(b,c,d,e,q,f){if(null==b)throw a.g.N("Geometry::Geodesic_bufferer::buffer");if(b.s())return new a.Ka(b.description);var h=new k;h.sg=c;h.wc=a.Ya.Em(c);var g=a.Ya.ft(h.wc);h.Yb=f;h.Gb=a.Ya.Ts(h.wc);h.Xb=g*(2-g);h.Rb=h.wc.Se().Dj;h.ka=h.sg.xq();h.jp=h.wc.xq();h.hr=h.jp*h.Rb;h.ip=1.570796326794897/h.Rb;h.rU=3.141592653589793/h.Rb;h.Uq=6.283185307179586/h.Rb;h.sU=h.Uq/6;h.Ix=0;h.qU=1.5707963267948966*h.Gb/h.Ix;4==d?(h.ke=2,h.Gt=!0):(h.ke=d,h.Gt=!1);h.Da=e;h.hb=Math.abs(e);isNaN(q)||0.001>q?h.sS():
h.Rm=q;d=b.D();a.T.Lc(d)?(d=new a.Xa(b.description),d.Bc(b,!0),b=d,d=1607):197==d&&(d=new a.i,b.o(d),d.aa()<=h.ka||d.ba()<=h.ka?(d=new a.Xa(b.description),d.Wc(b,!1),b=d,d=1607):(d=new a.Ka(b.description),d.Wc(b,!1),b=d,d=1736));h.tS();a.T.Km(d)||h.uS();if(h.hb<=0.5*h.Rm)return 1736!=d?new a.Ka(b.description):h.Gt?b:a.ui.oq(b,h.sg,h.ke,h.Nx,-1,f);if(0>h.Da&&1736!=d)return new a.Ka(b.description);h.Gt&&a.T.Kc(d)?(c=a.ui.oq(b,c,4,NaN,h.Rm,f),b=a.Ya.Wl(c,h.sg,h.wc)):b=a.Ya.Wl(b,h.sg,h.wc);b=a.gh.qo(b,
h.wc);if(b.s())return new a.Ka(b.description);!h.Gt&&a.T.Kc(d)&&(b=a.ui.IE(h.Rb,b));b=k.PS(b,h.wc);switch(d){case 1736:c=h.yK(b);break;case 1607:c=h.zK(b);break;case 550:c=h.wK(b);break;case 33:c=h.xK(b);break;default:throw a.g.ra("corrupted_geometry");}h=a.Ya.Wl(c,h.wc,h.sg);h.Ik(b.description);return h};k.prototype.yK=function(b){var k=new a.Ka;b=new c(this,b,k);b=a.wi.local().$(b,this.wc,this.Yb).next();b=a.Vn.nl(b,this.wc,2);var d=new a.Bg;d.scale(1/this.Rb,1/this.Rb);k.Oe(d);k=a.Vn.nl(k,this.wc,
2);return 0<=this.Da?a.wi.local().$(k,b,this.wc,this.Yb):a.Zr.local().$(k,b,this.wc,this.Yb)};k.prototype.zK=function(b){b=new c(this,b,null);b=a.wi.local().$(b,this.wc,this.Yb).next();return a.Vn.nl(b,this.wc,2)};k.prototype.wK=function(c){c=new b(this,c);c=a.wi.local().$(c,this.wc,this.Yb).next();return a.Vn.nl(c,this.wc,2)};k.prototype.xK=function(b){b=b.w();b.scale(this.Rb);var c=new a.Ka;this.Iv(b,!1,c);return a.Vn.nl(c,this.wc,2)};k.prototype.Lv=function(b,c,d,e,q,f){var h=b[0],g=b[b.length-
1],n=h.y>g.y?h.y:g.y,p=a.u.q(this.Gb,this.Xb,h.y<g.y?h.y:g.y),n=a.u.q(this.Gb,this.Xb,n);if(0.001<this.Ix-(p+c+this.hb)&&0.001<this.Ix+(n-c-this.hb))return!1;c=d-1.570796326794897;d=e+1.570796326794897;var p=c-3.141592653589793,n=c+3.141592653589793,m=d+3.141592653589793,s=[NaN],t=[NaN],u=[NaN],v=[NaN];e=!1;k.wG(this.Gb,this.Xb,this.hb,h,c,p,g,d,s,t);k.wG(this.Gb,this.Xb,this.hb,g,m,d,h,p,u,v);d<s[0]&&s[0]<m?e=!0:d<t[0]&&t[0]<m&&(e=!0);e||(p<u[0]&&u[0]<c?e=!0:p<v[0]&&v[0]<c&&(e=!0));if(!e&&q)return!1;
for(var w=[],x=b.length-1;0<=x;x--)w.push(b[x]);f.Ja();f.lo();x=[0];k.Hv(this.Gb,this.Xb,this.Rb,this.hb,this.ke,b,c,d,q,x,f);k.kq(this.Gb,this.Xb,this.Rb,this.hb,g,d,m,this.Sm,q,x,f,s[0],t[0]);k.Hv(this.Gb,this.Xb,this.Rb,this.hb,this.ke,w,m,n,q,x,f);k.kq(this.Gb,this.Xb,this.Rb,this.hb,h,p,c,this.Sm,q,x,f,u[0],v[0]);b=!1;q||(b=this.zB(this.Rb,f));return e||b};k.prototype.Iv=function(a,b,c){c.Ja();c.lo();k.kq(this.Gb,this.Xb,this.Rb,this.hb,a,-this.Sm,6.283185307179586,this.Sm,b,[0],c,NaN,NaN);b||
this.zB(this.Rb,c)};k.prototype.zB=function(a,b){var c=this.XK(a,b),k=this.YK(a,b);return c||k};k.prototype.XK=function(b,c){var k=c.F(),d=!1,e=new a.i;c.o(e);if(!a.j.S(e.G*b,1.570796326794897)&&!a.j.S(e.C*b,-1.570796326794897))return!1;for(var q=new a.b,k=k-1;0<=k;k--)c.w(k,q),q.y==e.G&&a.j.S(q.y*b,1.570796326794897)?(d=!0,this.RE(q,k,c)):q.y==e.C&&a.j.S(q.y*b,-1.570796326794897)&&(d=!0,this.RE(q,k,c));return d};k.prototype.YK=function(a,b){var c=b.Fa(0),k=b.Fa(b.F()-1);return 3.141592653589793<
Math.abs(c.x-k.x)*a?(this.RQ(b),!0):this.WK(b)};k.prototype.WK=function(a){return 0>a.Mh()?(this.QQ(a),!0):!1};k.prototype.RE=function(b,c,k){var d=k.F(),e=0<c?c-1:d-1,d=k.Fa(c<d-1?c+1:0),e=k.Fa(e);if(!a.j.S(d.y,b.y)&&!a.j.S(d.x,b.x)){var q=new a.b;q.ma(d.x,b.y);k.ic(c,q)}a.j.S(e.y,b.y)||a.j.S(e.x,b.x)||(d=new a.b,d.ma(e.x,b.y),k.kf(0,c,d))};k.prototype.RQ=function(b){var c=new a.Ka,k=new a.Ka,d=new a.Bg,e=b.Fa(0),q=b.Fa(b.F()-1),f=new a.b;e.x>q.x?(q=this.ip,d.Nn(-this.Uq,0)):(q=-this.ip,d.Nn(this.Uq,
0));c.add(b,!1);b.Ja();k.add(c,!1);k.Oe(d);e=new a.i;k.o(e);e.P((this.Uq-e.aa())/2,0);e.C=-this.ip;e.G=this.ip;for(var h=0;h<k.F();h++)k.w(h,f),c.kf(0,-1,f);k.Oe(d);for(h=0;h<k.F();h++)k.w(h,f),c.kf(0,-1,f);k=c.Fa(0);d=c.Fa(c.F()-1);f.ma(d.x,q);c.kf(0,-1,f);f.ma(0.5*(d.x+k.x),q);c.kf(0,-1,f);f.ma(k.x,q);c.kf(0,-1,f);c=a.gh.Rw(c,this.wc,2,e.v);c=a.gh.Rw(c,this.wc,2,e.B);c=a.Ed.clip(c,e,this.jp,NaN);b.add(c,!1)};k.prototype.QQ=function(b){var c=new a.i;b.o(c);c.P((this.Uq-c.aa())/2,0);c.C=-this.ip;
c.G=this.ip;b.lo();var k=new a.b;k.ma(c.v,c.C);b.kf(1,-1,k);k.ma(c.v,c.G);b.kf(1,-1,k);k.ma(0.5*(c.v+c.B),c.G);b.kf(1,-1,k);k.ma(c.B,c.G);b.kf(1,-1,k);k.ma(c.B,c.C);b.kf(1,-1,k);k.ma(0.5*(c.v+c.B),c.C);b.kf(1,-1,k)};k.Hv=function(b,c,d,e,q,f,h,g,n,p,m){var s=null;n||(s=new a.b,s.Eh(),0<m.F()&&(s.J(m.Fa(m.F()-1)),s.scale(d)));var t=new a.ca(0),u=new a.ca(0),v=new a.ca(0),w=new a.b,x=new a.b,N=f[f.length-1];d=1/d;for(var A=0;A<f.length;A++){var G=f[A],B;0==A?B=h:A==f.length-1?B=g:(a.zb.Rd(b,c,N.x,N.y,
G.x,G.y,null,null,t,q),B=t.l-1.570796326794897);a.zb.Ph(b,c,G.x,G.y,e,B,u,v);n?x.ma(u.l,v.l):(w.ma(u.l,v.l),k.Gz(G.x,w.x,s.x,p),x.ma(p[0]+w.x,w.y),s.J(x));x.scale(d);m.kf(0,-1,x)}};k.kq=function(b,c,d,e,q,f,h,g,n,p,m,s,t){if(!(h-f<g)){var u=new a.ca(0),v=new a.ca(0),w=new a.b,x=new a.b,N=null;n||(N=new a.b,N.Eh(),0<m.F()&&(N.J(m.Fa(m.F()-1)),N.scale(d)));var A=a.I.truncate(Math.ceil(f/g)),G=A++*g;G==f&&(G=A++*g);for(d=1/d;G<h+g;){f<s&&s<G?(G=s,A--):f<t&&t<G&&(G=t,A--);if(G>=h)break;a.zb.Ph(b,c,q.x,
q.y,e,G,u,v);n?x.ma(u.l,v.l):(w.ma(u.l,v.l),k.Gz(q.x,w.x,N.x,p),x.ma(p[0]+w.x,w.y),N.J(x));x.scale(d);m.kf(0,-1,x);f=G;G=A++*g}}};k.wG=function(b,c,k,d,e,q,f,h,g,n){var p=new a.b,m=new a.b,s=new a.ca(0),t=new a.ca(0);a.zb.Ph(b,c,d.x,d.y,k,e,s,t);p.ma(s.l,t.l);a.zb.Ph(b,c,d.x,d.y,k,q,s,t);m.ma(s.l,t.l);k=new a.ca(0);a.zb.gw(b,c,f.x,f.y,p.x,p.y,k);g[0]=k.l;a.zb.gw(b,c,f.x,f.y,m.x,m.y,k);for(n[0]=k.l;g[0]<=n[0];)g[0]+=6.283185307179586;for(;g[0]>n[0];)g[0]-=6.283185307179586;for(;g[0]>=h;)g[0]-=6.283185307179586,
n[0]-=6.283185307179586;for(;g[0]<h;)g[0]+=6.283185307179586,n[0]+=6.283185307179586};k.Gz=function(a,b,c,k){if(isNaN(c)){for(;3.141592653589793<k[0]+b-a;)k[0]-=6.283185307179586;for(;3.141592653589793<a-(k[0]+b);)k[0]+=6.283185307179586}else 3.141592653589793<k[0]+b-c?k[0]-=6.283185307179586:3.141592653589793<c-(k[0]+b)&&(k[0]+=6.283185307179586)};k.PS=function(b,c){var k=b.D(),d;a.T.Kc(k)?d=b.ea():550==k?d=b.F():d=1;if(1==d)return b;var e=new a.ga(0);e.resize(d);for(var q=[],f=new a.i,h=0;h<d;h++){e.write(h,
h);var g;a.T.Kc(k)?(b.Ti(h,f),g=f.Af()):g=b.Fa(h);g=a.qH.QS(c,g);q[h]=g}e.xd(0,e.size,function(a,b){return q[a]<q[b]?-1:q[a]>q[b]?1:0});f=b.Pa();for(h=0;h<d;h++)g=e.read(h),a.T.Kc(k)?f.Zj(b,g,!0):f.Pd(b,g,g+1);return f};k.prototype.tS=function(){var b=Math.min(3.141592653589793*this.Gb-this.hb,this.hb),b=Math.min(b,0.39269908169872414*this.Gb),c=new a.b;c.ma(0,10*this.Rb);var k=45*this.Rb,d=new a.ca(0),e=new a.ca(0),q=new a.ca(0),f=new a.ca(0),h=new a.ca(0),g=new a.ca(0),n=new a.ca(0),p=new a.ca(0),
m=new a.b,s=new a.b,t=new a.b,u=new a.b;a.zb.Ph(this.Gb,this.Xb,c.x,c.y,b,0,d,e);m.ma(d.l,e.l);a.zb.Ph(this.Gb,this.Xb,c.x,c.y,b,k,q,f);s.ma(q.l,f.l);for(var d=new a.ca(0),e=new a.ca(0),v=new a.ca(0);;){a.zb.Ph(this.Gb,this.Xb,c.x,c.y,b,0.5*(0+k),h,g);t.ma(h.l,g.l);a.zb.Rd(this.Gb,this.Xb,m.x,m.y,s.x,s.y,d,e,null,2);a.zb.dk(this.Gb,this.Xb,m.x,m.y,0.5*d.l,e.l,n,p,2);u.ma(n.l,p.l);a.zb.Rd(this.Gb,this.Xb,t.x,t.y,u.x,u.y,v,null,null,2);if(v.l<=this.Rm)break;k*=0.9;a.zb.Ph(this.Gb,this.Xb,c.x,c.y,b,
k,q,f);s.ma(q.l,f.l)}this.Sm=6.283185307179586/Math.ceil(6.283185307179586/(k-0))};k.prototype.uS=function(){var b=Math.min(3.141592653589793*this.Gb-this.hb,this.hb),b=Math.min(b,0.39269908169872414*this.Gb),c=new a.b,k=new a.b;c.ma(0,10*this.Rb);k.ma(10*this.Rb,10*this.Rb);var d=new a.ca(0),e=new a.ca(0),q=new a.ca(0);a.zb.Rd(this.Gb,this.Xb,c.x,c.y,k.x,k.y,q,d,e,this.ke);var f=new a.ca(0),h=new a.ca(0),g=new a.ca(0),n=new a.ca(0),p=new a.b,m=new a.ca(0),s=new a.ca(0),t=new a.ca(0),u=new a.ca(0),
v=new a.ca(0),w=new a.ca(0),x=new a.ca(0),N=new a.ca(0),A=new a.ca(0),G=new a.b,B=new a.b,z=new a.b,C=new a.b,L=1,d=d.l,e=e.l+1.570796326794897,q=q.l;a.zb.Ph(this.Gb,this.Xb,c.x,c.y,b,d-1.570796326794897,s,t);G.ma(s.l,t.l);a.zb.Ph(this.Gb,this.Xb,k.x,k.y,b,e,u,v);B.ma(u.l,v.l);for(var s=new a.ca(0),t=new a.ca(0),e=new a.ca(0),K=new a.ca(0);;){a.zb.dk(this.Gb,this.Xb,c.x,c.y,0.5*(0+L)*q,d,f,h,this.ke);p.ma(f.l,h.l);a.zb.Rd(this.Gb,this.Xb,c.x,c.y,p.x,p.y,null,null,m,this.ke);a.zb.Ph(this.Gb,this.Xb,
p.x,p.y,b,m.l+1.570796326794897,w,x);z.ma(w.l,x.l);a.zb.Rd(this.Gb,this.Xb,G.x,G.y,B.x,B.y,s,t,null,2);a.zb.dk(this.Gb,this.Xb,G.x,G.y,0.5*s.l,t.l,N,A,2);C.ma(N.l,A.l);a.zb.Rd(this.Gb,this.Xb,z.x,z.y,C.x,C.y,e,null,null,2);if(e.l<=this.Rm)break;L*=0.9;a.zb.dk(this.Gb,this.Xb,c.x,c.y,L*q,d,g,n,this.ke);k.ma(g.l,n.l);a.zb.Rd(this.Gb,this.Xb,c.x,c.y,k.x,k.y,null,null,K,this.ke);a.zb.Ph(this.Gb,this.Xb,k.x,k.y,b,K.l+1.570796326794897,u,v);B.ma(u.l,v.l)}b=L*q;1E5<b&&(b=1E5);this.Nx=b};k.prototype.sS=function(){var a;
a=5E4<this.hb?100:1E4<this.hb?10:1;500>this.hb/a&&(a=this.hb/500);0.01>a&&(a=0.01);this.Rm=a};return k}();a.pH=d})(z||(z={}));(function(a){var b=function(){function b(){}b.ac=function(b,c){var d=new a.b;d.J(c);b.push(d)};b.$i=function(a,b){a.add(b.x);a.add(b.y)};b.cx=function(a){a.cf(a.size-2)};b.cy=function(a,b){b.ma(a.get(a.size-2),a.get(a.size-1))};b.oq=function(c,k,d,e,f,h){if(null==c)throw a.g.N();var g=c.D();if(c.s()||a.T.Km(g))return c;var n=new b;n.sg=k;n.wc=a.Ya.Em(k);var p=a.Ya.ft(n.wc);
n.Yb=h;n.Gb=a.Ya.Ts(n.wc);n.Xb=p*(2-p);n.Rb=n.wc.Se().Dj;n.jp=n.wc.xq();n.hr=n.jp*n.Rb;n.Bx=e;n.Ax=f;n.ke=d;197==g?(d=new a.Ka(c.description),d.Wc(c,!1)):a.T.Lc(g)?(d=new a.Xa(c.description),d.Bc(c,!0)):d=c;if(4!=n.ke){k=0==n.sg.lc(n.wc)?a.Ya.Wl(d,n.sg,n.wc):a.gh.qo(d,n.wc);if(k.s())return k;k=b.IE(n.Rb,k);k=n.hw(k);k=a.Vn.nl(k,n.wc,n.ke);n=a.Ya.Wl(k,n.wc,n.sg)}else{2==a.Nf.Am(k)?(c=a.Ya.TN(),k=a.$r.local().$(d,c,k,h),k==c&&(k=new a.Ka,c.copyTo(k))):k=a.gh.qo(d,n.wc);if(k.s())return k;n=n.wS(k)}return n};
b.IE=function(c,k){var d=new a.i;k.dd(d);if(3.141592653589793>d.aa()*c)return k;for(var e=!1,d=k.Ca(),f=new a.b,h=new a.b;d.kb();)for(;d.La();){var g=d.ia();f.J(g.Mb());h.J(g.oc());f.scale(c);h.scale(c);if(3.141592653589793<Math.abs(f.x-h.x)){if(!b.Gs(f,h)){e=!0;break}if(6.283185307179586<Math.abs(f.x-h.x)){e=!0;break}}}if(!e)return k;var e=k.Pa(),n=1<k.description.Aa,p=new a.b,m=new a.b,s=new a.b,t=new a.b,u=new a.Va;for(d.Lk();d.kb();)for(var v=NaN,w=[0];d.La();){g=d.ia();f.J(g.Mb());h.J(g.oc());
f.scale(c);h.scale(c);isNaN(v)?(b.Bd(f.x,NaN,w),m.J(f)):m.J(s);v=m.x;if(b.Gs(f,h)){if(6.283185307179586<h.x-f.x)for(;6.283185307179586<h.x-f.x;)h.x-=6.283185307179586;if(-6.283185307179586>h.x-f.x)for(;-6.283185307179586>h.x-f.x;)h.x+=6.283185307179586;b.Bd(h.x,NaN,w);s.J(h)}else p.J(h),b.eK(p),b.Bd(p.x,v,w),s.ma(w[0]+p.x,p.y);0.5>Math.abs(s.x-h.x)&&s.J(h);n?(g.uu(0,u),t.J(m),t.scale(1/c),u.ic(t),d.wl()?e.df(u):e.lineTo(u),d.Jm()&&!k.vc(d.Qa)&&(g.uu(1,u),t.J(s),t.scale(1/c),u.ic(t),e.lineTo(u))):
(d.wl()&&e.Sw(),g=e.ea()-1,t.J(m),t.scale(1/c),e.kf(g,-1,t),d.Jm()&&!k.vc(d.Qa)&&(t.J(s),t.scale(1/c),e.kf(g,-1,t)))}return e};b.kC=function(c,k,d,e,f,h,g,n,p,m,s,t){var u=new a.b,v=new a.b,w=0<e.compare(f);b.Ez(w,e,f,u,v);b.Jz(c,k,d,u,v,h,NaN,g,n,p,m,null,s,t);w&&b.gy(p,m,null,s)};b.prototype.hw=function(c){var k=c.Pa(),d=c.Ca(),e=[],f=null,h=null,g=1<c.description.Aa;g&&(f=new a.qd(0),h=new a.Ag);for(var n=[0],p=new a.b,m=new a.b,s=new a.b,t=new a.b;d.kb();)for(n[0]=0;d.La();){var u=d.ia();p.J(u.Mb());
m.J(u.oc());p.scale(this.Rb);m.scale(this.Rb);var v=0<p.compare(m);b.Ez(v,p,m,s,t);e.length=0;null!=f&&f.cf(0);0<this.Bx?b.Jz(this.Gb,this.Xb,this.ke,s,t,this.Bx,this.Ax,this.hr,null,null,null,g?f:null,e,n):b.dH(this.Gb,this.Xb,this.ke,s,t,this.Ax,this.hr,g?f:null,e,n);v&&b.gy(null,null,g?f:null,e);e[0].J(u.Mb());e[e.length-1].J(u.oc());for(var w=1;w<e.length-1;w++)e[w].scale(1/this.Rb);g?(v=b.Cz(v,u,h),b.oz(d.wl(),d.Jm()&&!c.vc(d.Qa),u,v,f,e,k)):b.mz(d.wl(),d.Jm()&&!c.vc(d.Qa),e,k)}return k};b.prototype.wS=
function(c){var k=c.Pa(),d=c.Ca(),e=[],f=null,h=new a.Ag,g=1<c.description.Aa;for(g&&(f=new a.qd(0));d.kb();)for(;d.La();){var n=d.ia(),p=n.Mb(),m=n.oc(),p=0<p.compare(m),m=b.Cz(p,n,h);e.length=0;null!=f&&f.cf(0);b.FR(this.Gb,this.Xb,this.Rb,m,this.sg,this.Bx,this.Ax,g?f:null,e);p&&b.gy(null,null,g?f:null,e);g?b.oz(d.wl(),d.Jm()&&!c.vc(d.Qa),n,m,f,e,k):b.mz(d.wl(),d.Jm()&&!c.vc(d.Qa),e,k)}return k};b.mz=function(a,b,c,d){a&&d.Sw();a=d.ea()-1;var e=c.slice(0);d.dD(a,e,e.length-1);b&&d.kf(a,-1,c[c.length-
1])};b.oz=function(b,c,d,e,f,h,g){var n=new a.Va;d.En(n);b?g.df(n):g.lineTo(n);if(2<h.length){b=e.$b();for(var p=1;p<h.length-1;p++){var m=e.AD(f.get(p)*b);e.uu(m,n);n.ic(h[p]);g.lineTo(n)}}c&&(d.Bn(n),g.lineTo(n))};b.Jz=function(c,k,d,e,f,h,g,n,p,m,s,t,u,v){var w=new a.ca(0),x=new a.ca(0),A=new a.ca(0);a.zb.Rd(c,k,e.x,e.y,f.x,f.y,A,w,x,d);var A=A.l,G=w=w.l,x=x.l;0>G&&(G+=6.283185307179586);0>x&&(x+=6.283185307179586);null!=p&&(p[0]=A);null!=m&&(m[0]=G);null!=s&&(s[0]=x);m=p=NaN;null!=t&&(m=a.u.gg(c,
k),s=a.u.q(c,k,e.y),p=(m-s)/A,m=(m+s)/A);s=b.Hs(e,f);var x=b.Fs(e,f),G=s||x,B=b.wz(e,f,n),z=new a.ca(0),C=new a.ca(0),L=new a.b,K=new a.b,M=new a.b;b.Bd(e.x,NaN,v);var O=[v[0]];if(A<=h)b.ac(u,e),b.Bd(f.x,NaN,v),null!=t&&t.add(0),G?(s&&b.by(e,f,t,u),x&&b.Vx(e,f,t,u)):B?b.Xx(e,f,w,p,m,t,u):0<g&&(K.ma(e.x-O[0],e.y),L.ma(f.x-v[0],f.y),b.yv(c,k,d,e,A,w,K,L,0,1,g,t,u,O)),b.ac(u,f);else{h=1+a.I.truncate(Math.ceil(A/h));var I=A/(h-1),F=new a.b,J=0;b.ac(u,e);F.J(e);K.ma(e.x-v[0],e.y);null!=t&&t.add(0);for(var S=
1;S<h;S++){var H;S<h-1?(a.zb.dk(c,k,e.x,e.y,S*I,w,z,C,d),L.ma(z.l,C.l),b.Bd(L.x,F.x,v),M.ma(v[0]+L.x,L.y),H=S/(h-1)):(b.Bd(f.x,NaN,v),L.ma(f.x-v[0],f.y),M.J(f),H=1);G?(1==S&&s&&b.by(e,M,t,u),S==h-1&&x&&b.Vx(F,f,t,u)):B?b.uz(F,M,n)&&(e.x<f.x?F.x>M.x&&(v[0]+=6.283185307179586,M.ma(v[0]+L.x,L.y)):F.x<M.x&&(v[0]-=6.283185307179586,M.ma(v[0]+L.x,L.y)),b.Xx(F,M,w,p,m,t,u)):0<g&&b.yv(c,k,d,e,A,w,K,L,J,H,g,t,u,O);b.ac(u,M);null!=t&&t.add(H);F.J(M);K.J(L);O[0]=v[0];J=H}}};b.dH=function(c,k,d,e,f,h,g,n,p,m){var s=
new a.ca(0),t=new a.ca(0),u=new a.ca(0);a.zb.Rd(c,k,e.x,e.y,f.x,f.y,u,s,t,d);var t=u.l,s=s.l,v=u=NaN;if(null!=n)var v=a.u.gg(c,k),w=a.u.q(c,k,e.y),u=(v-w)/t,v=(v+w)/t;var w=b.Hs(e,f),x=b.Fs(e,f),A=w||x;g=b.wz(e,f,g);var G=b.Gs(e,f),G=A||g||G;b.Bd(e.x,NaN,m);var B=new a.b;b.ac(p,e);B.J(e);null!=n&&n.add(0);G?(A?(w&&b.by(e,f,n,p),x&&b.Vx(e,f,n,p)):g&&b.Xx(e,f,s,u,v,n,p),b.Bd(f.x,NaN,m),b.ac(p,f)):t<=h?(b.Bd(f.x,NaN,m),b.ac(p,f)):(u=new a.b,g=new a.b,u.J(e),g.J(f),u.x-=m[0],g.x-=m[0],-3.141592653589793>
g.x?g.x+=6.283185307179586:3.141592653589793<g.x&&(g.x-=6.283185307179586),b.yv(c,k,d,e,t,s,u,g,0,1,h,n,p,m),b.ac(p,f),b.Bd(f.x,NaN,m));null!=n&&n.add(1)};b.yv=function(c,k,d,e,f,h,g,n,p,m,s,t,u,v){var w=new a.b,x=new a.b;w.ma(g.x+v[0],g.y);new a.ca(0);new a.ca(0);new a.ca(0);new a.ca(0);var A=new a.ca(0),G=new a.ca(0),B=new a.ca(0),z=new a.b,C=new a.b,L=new a.b,K=new a.b;z.J(g);C.J(n);g=new a.qd(0);n=new a.qd(0);b.$i(g,C);n.add(m);var M=new a.b,O=new a.yb,I=[];for(b.Kz(4,I);0<g.size;){for(var F=
!1,J,S=NaN,H=0;3>H;H++)if(J=I[H]*m+(1-I[H])*p,a.zb.dk(c,k,e.x,e.y,J*f,h,A,G,d),L.ma(A.l,G.l),0==H&&(S=J,K.J(L)),b.mR(z,L,C,O),O.Kb(O.Gd(L,!0),M),a.zb.Rd(c,k,L.x,L.y,M.x,M.y,B,null,null,2),B.l>s){F=!0;break}F?(C.J(K),m=S,b.$i(g,C),n.add(m)):(b.cx(g),n.oj(n.size-1,1,n.size-1),0<g.size&&(b.Bd(C.x,w.x,v),x.ma(v[0]+C.x,C.y),b.ac(u,x),w.J(x),null!=t&&t.add(m),z.J(C),p=m,b.cy(g,C),m=n.get(n.size-1)))}};b.FR=function(c,k,d,e,f,h,g,n,p){var m=new a.b,s=new a.b,t=new a.b,u=new a.b,v=new a.b,w=new a.b,x=new a.b,
A=new a.b,G=new a.b,B=new a.b,z=new a.ca(0),C=new a.ca(0),L=new a.b,K=[[],[]],M=1==a.Nf.Am(f);f=f.Ko();var O=e.Mb(),I=e.oc();M?(w.ma(O.x*d,O.y*d),x.ma(I.x*d,I.y*d)):(K[0][0]=O.x,K[0][1]=O.y,K[1][0]=I.x,K[1][1]=I.y,a.Ya.tu(),w.x=K[0][0]*d,w.y=K[0][1]*d,x.x=K[1][0]*d,x.y=K[1][1]*d);var F=0,J=0,S=1,H=e.mD();m.J(O);s.J(I);var I=new a.qd(0),Q=new a.qd(0),U=new a.qd(0);b.$i(I,s);b.$i(Q,x);U.add(S);b.ac(p,m);null!=n&&n.add(J);var T=[],ia;ia=0<g?H?5:3:H?5:1;b.Kz(ia,T);for(var Y=new a.ca(0),qa=new a.ca(0),
ta=new a.ca(0),ba=new a.ca(0),va=new a.ca(0),Ca=new a.ca(0),ga=new a.ca(0);0<Q.size;){var fa=!1,V,ca=NaN;a.zb.Rd(c,k,w.x,w.y,x.x,x.y,Y,qa,null,2);for(O=0;O<ia;O++){if(0==O){if(!H&&0>=g&&Y.l<=h&&3.141592653589793>Math.abs(w.x-x.x))break;if(e.rA(J,S)<=f)break}V=T[O]*S+(1-T[O])*J;e.Kb(V,t);M?A.ma(t.x*d,t.y*d):(K[0][0]=t.x,K[0][1]=t.y,a.Ya.tu(),A.x=K[0][0]*d,A.y=K[0][1]*d);if(0==O&&(ca=V,v.J(t),B.J(A),0<h&&(Y.l>h||3.141592653589793<=Math.abs(w.x-x.x)))){fa=!0;break}if(H&&0<h){if(a.zb.Rd(c,k,w.x,w.y,A.x,
A.y,ta,null,null,2),ta.l>h||3.141592653589793<=Math.abs(w.x-A.x)){fa=!0;break}}else if(0<g)if(H?(u.OO(m,s,T[O]),M?G.ma(u.x*d,u.y*d):(K[0][0]=u.x,K[0][1]=u.y,a.Ya.tu(),G.x=K[0][0]*d,G.y=K[0][1]*d)):(u.J(t),G.J(A)),a.zb.Rd(c,k,w.x,w.y,G.x,G.y,ba,null,null,2),ba.l<=Y.l){a.zb.dk(c,k,w.x,w.y,ba.l,qa.l,z,C,2);L.ma(z.l,C.l);a.zb.Rd(c,k,L.x,L.y,A.x,A.y,va,null,null,2);if(va.l>g){fa=!0;break}if(H){a.zb.Rd(c,k,L.x,L.y,G.x,G.y,Ca,null,null,2);if(Ca.l>g){fa=!0;break}a.zb.Rd(c,k,G.x,G.y,A.x,A.y,ga,null,null,2);
if(ga.l>g){fa=!0;break}}}else{fa=!0;break}}fa?(s.J(v),x.J(B),S=ca,b.$i(I,s),b.$i(Q,x),U.add(S)):(b.cx(I),b.cx(Q),U.oj(U.size-1,1,U.size-1),b.ac(p,s),F+=Y.l,null!=n&&n.add(F),0<Q.size&&(m.J(s),w.J(x),J=S,b.cy(I,s),b.cy(Q,x),S=U.get(U.size-1)))}if(null!=n){c=1/F;for(O=0;O<n.size;O++)n.write(O,n.read(O)*c)}};b.gy=function(a,b,c,d){d.reverse();null!=c&&c.Jp(0,c.size,1);c=null!=a?a[0]:NaN;d=null!=b?b[0]:NaN;null!=a&&(a[0]=d);null!=b&&(b[0]=c)};b.Ez=function(a,b,c,d,e){a?(d.J(c),e.J(b)):(d.J(b),e.J(c))};
b.Cz=function(a,b,c){if(!a)return b;c.create(b.D());b.copyTo(c.get());c.get().reverse();return c.get()};b.Bd=function(a,b,c){if(isNaN(b)){for(;3.141592653589793<c[0]-a;)c[0]-=6.283185307179586;for(;3.141592653589793<a-c[0];)c[0]+=6.283185307179586}else 3.141592653589793<c[0]+a-b?c[0]-=6.283185307179586:3.141592653589793<b-(c[0]+a)&&(c[0]+=6.283185307179586)};b.mR=function(a,b,c,d){3.141592653589793>Math.abs(b.x-a.x)?(d.ed(a),3.141592653589793<=c.x-a.x?d.Ok(c.x-6.283185307179586,c.y):3.141592653589793<=
a.x-c.x?d.Ok(c.x+6.283185307179586,c.y):d.Ok(c.x,c.y)):(d.ed(c),3.141592653589793<=a.x-c.x?d.Ok(a.x-6.283185307179586,a.y):3.141592653589793<=c.x-a.x?d.Ok(a.x+6.283185307179586,a.y):d.Ok(a.x,a.y))};b.Kz=function(a,b){for(var c=0;c<a;c++){var d=Math.ceil(c/2)/(a+1);0!=c%2&&(d=-d);b[c]=0.5+d}};b.Hs=function(b,c){return a.j.S(b.y,1.570796326794897)&&!a.j.S(c.y,1.570796326794897)||a.j.S(b.y,-1.570796326794897)&&!a.j.S(c.y,-1.570796326794897)?!0:!1};b.Fs=function(b,c){return a.j.S(c.y,1.570796326794897)&&
!a.j.S(b.y,1.570796326794897)||a.j.S(c.y,-1.570796326794897)&&!a.j.S(b.y,-1.570796326794897)?!0:!1};b.wz=function(c,k,d){return!b.uz(c,k,d)||a.j.S(c.y,1.570796326794897)||a.j.S(c.y,-1.570796326794897)||a.j.S(k.y,1.570796326794897)||a.j.S(k.y,-1.570796326794897)?!1:!0};b.uz=function(a,b,c){return Math.abs(Math.abs(a.x-b.x)-3.141592653589793)<=c?!0:!1};b.Gs=function(b,c){return a.j.S(b.y,1.570796326794897)&&a.j.S(c.y,1.570796326794897)||a.j.S(b.y,-1.570796326794897)&&a.j.S(c.y,-1.570796326794897)?!0:
!1};b.by=function(c,k,d,e){if(0<c.y){var f=new a.b;f.ma(k.x,1.570796326794897)}else f=new a.b,f.ma(k.x,-1.570796326794897);a.j.S(c.x,f.x)||a.j.S(k.y,f.y)||(b.ac(e,f),null!=d&&d.add(0))};b.Vx=function(c,k,d,e){if(0<k.y){var f=new a.b;f.ma(c.x,1.570796326794897)}else f=new a.b,f.ma(c.x,-1.570796326794897);a.j.S(k.x,f.x)||a.j.S(c.y,f.y)||(b.ac(e,f),null!=d&&d.add(1))};b.Xx=function(c,k,d,e,f,h,g){a.j.Vc(d)?(0<1.570796326794897-c.y&&(d=new a.b,d.ma(c.x,1.570796326794897),b.ac(g,d),null!=h&&h.add(e)),
0<1.570796326794897-k.y&&(d=new a.b,d.ma(k.x,1.570796326794897),b.ac(g,d),null!=h&&h.add(e))):(0<1.570796326794897+c.y&&(d=new a.b,d.ma(c.x,-1.570796326794897),b.ac(g,d),null!=h&&h.add(f)),0<1.570796326794897+k.y&&(d=new a.b,d.ma(k.x,-1.570796326794897),b.ac(g,d),null!=h&&h.add(f)))};b.eK=function(a){if(-3.141592653589793>a.x)for(;-3.141592653589793>a.x;)a.x+=6.283185307179586;if(3.141592653589793<a.x)for(;3.141592653589793<a.x;)a.x-=6.283185307179586};return b}();a.ui=b})(z||(z={}));(function(a){var b=
function(){function b(){}b.nl=function(c,k,d){if(null==c||null==k||!a.Ya.Qo(k))throw a.g.N();if(c.s())return c;var e=c,f=e.D();if(a.T.Kc(f)){e=a.gh.qo(c,k);c=new a.i;e.o(c);for(var f=a.Ia.zd(k,c,!1),h=a.Ya.Fm(k),g=Math.floor((c.v-h.v)/h.aa())*h.aa()+h.v;g<c.B;)g>c.v+f&&g<c.B-f&&(e=a.gh.Rw(e,k,d,g)),g+=h.aa()}else{if(197==f)return c=new a.Ka(e.description),c.Wc(e,!1),b.nl(c,k,d);if(a.T.Lc(f))return c=new a.Xa(e.description),c.Bc(e,!0),b.nl(c,k,d)}return b.VG(e,k)};b.VG=function(c,k){if(null==c||null==
k||!a.Ya.Qo(k))throw a.g.N();if(c.s())return c;var d;d=c.D();197==d?(d=new a.Ka(c.description),d.Wc(c,!1)):a.T.Lc(d)?(d=new a.Xa(c.description),d.Bc(c,!0)):d=c;d=a.gh.qo(d,k);return d.s()?d:1==a.Nf.Am(k)?a.gh.aN(d,k,d!=c):b.SG(d,k,d!=c)};b.SG=function(b,c,d){if(!a.Ya.Qo(c))throw a.g.N();if(b.s())return b;var e=a.Ya.IC(c),f=0-180*e,e=360*e;2==a.Nf.Am(c)&&(f=a.Ya.Fm(c),e=f.B,f=f.v,e-=f);return a.gh.gC(b,f,e,c,d)};return b}();a.Vn=b})(z||(z={}));(function(a){var b=function(){function b(){}b.OH=function(a,
b){var c=Math.abs(a%b);return isNaN(c)||c==a||c<=Math.abs(b)/2?c:0>a?-1*(c-b):0<a?1*(c-b):0*(c-b)};b.H=function(a){return 0>a?-a:a};b.nb=function(a,c){return 0<=c?b.H(a):-b.H(a)};b.S=function(a,c){return a==c||b.H(a-c)<=b.bF*(1+(b.H(a)+b.H(c))/2)};b.Vc=function(a){return 0==a||b.H(a)<=b.bF};b.bs=function(a){a=b.OH(a,b.fv);return b.H(a)<=b.$g?a:0>a?a+b.fv:a-b.fv};b.Yz=function(a,c){a.l=b.bs(a.l);c.l=b.bs(c.l);b.H(c.l)>b.Vr&&(a.l=b.bs(a.l+b.$g),c.l=b.nb(b.$g,c.l)-c.l)};b.gg=function(a,c){var d=Math.sqrt(1-
c),d=(1-d)/(1+d),e=d*d;return a/(1+d)*(1+e*(0.25+e*(0.015625+1/256*e)))*b.Vr};b.pN=function(c,k,d,e,f){var h,g,n,p,m,s,t,u=0,v=s=0,w=0,x=0,A=0;m=0;var G,B,z;t=0;var C,L,K;z=new a.ca;h=new a.ca;if(null!=f)if(z.l=c,h.l=k,b.Yz(z,h),c=z.l,k=h.l,z.l=d,h.l=e,b.Yz(z,h),d=z.l,e=h.l,d=b.bs(d-c),b.S(k,e)&&(b.Vc(d)||b.S(b.H(k),b.Vr)))null!=f&&(f.l=0);else{if(b.S(k,-e)){if(b.S(b.H(k),b.Vr)){null!=f&&(f.l=2*b.gg(6378137,0.0066943799901413165));return}if(b.S(b.H(d),b.$g)){null!=f&&(f.l=2*b.gg(6378137,0.0066943799901413165));
return}}if(b.Vc(0.0066943799901413165))x=Math.cos(k),A=Math.cos(e),null!=f&&(u=Math.sin((e-k)/2),s=Math.sin(d/2),t=2*Math.asin(Math.sqrt(u*u+x*A*s*s)),f.l=6378137*t);else{z=1-Math.sqrt(0.9933056200098587);c=1-z;h=Math.atan(c*Math.tan(k));k=Math.sin(h);h=Math.cos(h);g=Math.atan(c*Math.tan(e));e=Math.sin(g);g=Math.cos(g);p=n=d;L=0;K=1;C=d;for(B=!0;1==B;)L+=1,1==K&&(m=Math.sin(C),s=Math.cos(C),u=g*m,t=h*e-k*g*s,u=Math.sqrt(u*u+t*t),s=k*e+h*g*s,t=Math.atan2(u,s),v=1E-15>b.H(u)?h*g*m/b.nb(1E-15,u):h*g*
m/u,w=1-v*v,x=1E-15>b.H(w)?s-2*(k*e/b.nb(1E-15,w)):s-2*(k*e/w),A=x*x,m=((-3*w+4)*z+4)*w*z/16),G=(1-m)*z*(t+m*u*(x+s*m*(2*A-1))),1==K?(C=d+G*v,1E-14>b.H(C-p)?B=!1:b.H(C)>b.$g?(K=2,C=b.$g,0>d&&(C=-C),v=0,w=1,n=p=2,t=b.$g-b.H(Math.atan(k/h)+Math.atan(e/g)),u=Math.sin(t),s=Math.cos(t),m=((-3*w+4)*z+4)*w*z/16,1E-14>b.H(v-n)?B=!1:(x=1E-15>b.H(w)?s-2*(k*e/b.nb(1E-15,w)):s-2*(k*e/w),A=x*x)):(0>(C-p)*(p-n)&&5<L&&(C=(2*C+3*p+n)/6),n=p,p=C)):(v=(C-d)/G,0>(v-p)*(p-n)&&5<L&&(v=(2*v+3*p+n)/6),n=p,p=v,w=1-v*v,m=
v*u/(h*g),s=-Math.sqrt(b.H(1-m*m)),C=Math.atan2(m,s),u=g*m,t=h*e-k*g*s,u=Math.sqrt(u*u+t*t),s=k*e+h*g*s,t=Math.atan2(u,s),m=((-3*w+4)*z+4)*w*z/16,1E-14>b.H(v-n)?B=!1:(x=1E-15>b.H(w)?s-2*(k*e/b.nb(1E-15,w)):s-2*(k*e/w),A=x*x));null!=f&&(v=Math.sqrt(1+(1/(c*c)-1)*w),v=(v-1)/(v+1),w=v*(1-0.375*v*v),f.l=6378137*((1+v*v/4)/(1-v)*c)*(t-w*u*(x+w/4*(s*(-1+2*A)-w/6*x*(-3+4*u*u)*(-3+4*A)))))}}};b.$g=3.141592653589793;b.Vr=1.5707963267948966;b.fv=6.283185307179586;b.bF=3.552713678800501E-15;return b}();a.nH=
b})(z||(z={}));(function(a){var b=function(){function a(){}a.prototype.uv=function(a){this.hi=a};a.prototype.GA=function(a){this.Ab=a};a.prototype.HA=function(a){this.nn=a};a.vB=function(a){return a.s()||1607!=a.D()&&1736!=a.D()?!1:!0};a.tB=function(a){return a.s()||1607!=a.D()&&1736!=a.D()||20>a.F()?!1:!0};a.uB=function(a){return a.s()||1607!=a.D()&&1736!=a.D()||20>a.F()?!1:!0};return a}();a.Wj=b})(z||(z={}));(function(a){var b=function(){function b(){}b.FH=function(b){var c=new a.Ka;c.Uy(b.R.v,
b.R.C);c.wj(b.R.v,b.R.G);c.wj(b.R.B,b.R.G);c.wj(b.R.B,b.R.C);return c};b.aT=function(b,c){var d=a.wi.local(),e=new a.Pc(b);return d.$(e,c,null).next()};b.ll=function(b,c,d){return a.Zr.local().$(b,c,d,null)};b.On=function(b,c,d){return a.dv.local().$(b,c,d,null)};b.MS=function(b,c,d){var e=a.dv.local();b=new a.Pc(b);c=new a.Pc(c);d=e.$(b,c,d,null);for(e=[];null!=(c=d.next());)e.push(c);return e};b.lc=function(b,c,d){return a.bl.local().$(3,b,c,d,null)};b.nM=function(b,c,d){return a.bl.local().$(4,
b,c,d,null)};b.QO=function(b,c,d){var e=a.$r.local();b=new a.Pc(b);c=new a.Pc(c);d=e.$(b,c,d,null);for(e=[];null!=(c=d.next());)e.push(c);return e};b.kM=function(b,c,d){var e=a.Zr.local();b=new a.Pc(b);c=new a.Pc(c);d=e.$(b,c,d,null);for(e=[];null!=(c=d.next());)e.push(c);return e};b.Ga=function(b,c,d){return a.$r.local().$(b,c,d,null)};b.jT=function(b,c,d){return a.bl.local().$(2,b,c,d,null)};b.contains=function(b,c,d){return a.bl.local().$(1,b,c,d,null)};b.VL=function(b,c,d){return a.bl.local().$(16,
b,c,d,null)};b.touches=function(b,c,d){return a.bl.local().$(8,b,c,d,null)};b.tQ=function(b,c,d){return a.bl.local().$(32,b,c,d,null)};b.RO=function(b,c,d){return a.bl.local().$(1073741824,b,c,d,null)};b.py=function(b,c,d,e){return a.fI.local().$(b,c,d,e,null)};b.Fb=function(b,c,d,e){var f=null;if(null!=d){if(f=d.Se(),null!=e&&f.Qc()!=e.Qc()&&f.Nc!=e.Nc)throw a.g.cj();}else if(null!=e)throw a.g.N();b=a.ZH.local().$(b,c,null);null!==f&&null!==e&&(b=a.Tb.ih(b,f,e));return b};b.clip=function(b,c,d){return a.SH.local().$(b,
a.i.Oa(c.R.v,c.R.C,c.R.B,c.R.G),d,null)};b.xm=function(b,c,d){if(null==b||null==c)return null;b=a.UH.local().$(!0,b,c,d,null);for(c=[];null!=(d=b.next());)d.s()||c.push(d);return c.slice(0)};b.rK=function(c,k,d,e,f,h,g,n){if(!0===f)return b.VP(c,k,d,e,h,g,n);f=d;if(null!=k){if(g=k.Se(),null!=e&&g.Qc()!=e.Qc()){if(g.Nc!=e.Nc)throw a.g.cj();f=[];a.Tb.OB(d,d.length,e,g,f)}}else if(null!=e)throw a.g.N();d=a.Oz.local();if(h){c=new a.Pc(c);k=d.$(c,k,f,h,null);for(c=[];null!=(h=k.next());)c.push(h);h=c.slice(0)}else{h=
[];for(e=0;e<c.length;e++)h[e]=d.$(c[e],k,f[e],null)}return h};b.VP=function(b,c,d,e,f,h,g){if(null===c)throw a.g.N();if(null===e||void 0===e)e=4326!==c.Qc()?c.Se():a.Tb.Qd(9001);if(0!==e.Nc)throw a.g.N();a.Tb.OB(d,d.length,e,a.Tb.Qd(9001),d);e=a.Tz.local();if(f){b=new a.Pc(b);c=e.$(b,c,h,d,g,!1,f,null);for(d=[];null!=(h=c.next());)d.push(h);f=d.slice(0)}else{f=[];for(var n=0;n<b.length;n++)f[n]=e.$(b[n],c,h,d[n],g,!1,null)}return f};b.buffer=function(b,c,d,e,f,h,g){var n=d;if(!1===f){if(null!=c){if(f=
c.Se(),null!=e&&f.Qc()!=e.Qc()){if(f.Nc!=e.Nc)throw a.g.cj();n=a.Tb.ih(d,e,f)}}else if(null!=e)throw a.g.N();b=a.Oz.local().$(b,c,n,null)}else{if(null===c)throw a.g.N();if(null===e||void 0===e)e=4326!==c.Qc()?c.Se():a.Tb.Qd(9001);if(0!==e.Nc)throw a.g.N();n=a.Tb.ih(d,e,a.Tb.Qd(9001));b=a.Tz.local().$(b,c,h,n,g,!1,null)}return b};b.sQ=function(b,c,d,e,f,h,g){if(null!=c){var n=c.Se();if(null!=g&&n.Qc()!=g.Qc()){if(n.Nc!=g.Nc)throw a.g.cj();d=a.Tb.ih(d,g,n)}}else if(null!=g)throw a.g.N();b=new a.Pc(b);
c=a.Wz.local().$(b,c,d,e,f,h,null);for(d=[];null!=(e=c.next());)d.push(e);return d.slice(0)};b.offset=function(b,c,d,e,f,h,g){if(null!=c){var n=c.Se();if(null!=g&&n.Qc()!=g.Qc()){if(n.Nc!=g.Nc)throw a.g.cj();d=a.Tb.ih(d,g,n)}}else if(null!=g)throw a.g.N();return a.Wz.local().$(b,c,d,e,f,h,null)};b.JL=function(b){return a.Qz.local().$(b,null)};b.KL=function(b,c){for(var d=a.Qz.local(),e=new a.Pc(b),d=d.$(e,c,null),e=[],f;null!=(f=d.next());)e.push(f);return e};b.zw=function(b,c,d){return a.bv.local().zw(b,
c,d)};b.Aw=function(b,c){return a.bv.local().Aw(b,c)};b.Bw=function(b,c,d,e){return a.bv.local().Bw(b,c,d,e)};b.Qy=function(b,c){return a.as.local().$(b,c,!1,null)};b.cP=function(b,c){return a.as.local().Ro(b,c,null)};b.fN=function(b,c,d,e,f){var h=a.Sz.local();if(null!=c){if(c=c.Se(),null!=f&&c.Qc()!=f.Qc()){if(c.Nc!=f.Nc)throw a.g.cj();d=a.Tb.ih(d,f,c)}}else if(null!=f)throw a.g.N();return h.$(b,d,e,null)};b.oq=function(b,c,d,e){var f=a.WH.local();if(null!=c){if(c=c.Se(),null!=e&&c.Qc()!=e.Qc()){if(c.Nc!=
e.Nc)throw a.g.cj();d=a.Tb.ih(d,e,c)}}else if(null!=e)throw a.g.N();return f.$(b,d,null)};b.fw=function(b,c,d,e,f){void 0===f&&(f=0);var h=a.aI.local();if(4==f)throw a.g.qe();if(0!==f)throw a.g.qe();if(null!=c){var g=c.Se();if(null!=e&&g.Qc()!=e.Qc()){if(g.Nc!=e.Nc)throw a.g.cj();d=a.Tb.ih(d,e,g)}}else if(null!=e)throw a.g.N();return h.$(b,d,c,f,null)};b.jN=function(c,k,d,e){if(null===c)return 0;if(4==e)throw a.g.qe();if(0!==e)throw a.g.qe();if(197==c.D())c=b.FH(c);else if(1736!=c.D())return 0;e=
a.Ya.Em(k);c=a.Ya.Wl(c,k,e);c=a.oH.kN([c])[0];if(null!==d){if(2!==d.Nc)throw a.g.N("Unit must be a area unit type");c=a.Tb.ih(c,a.Tb.Qd(109404),d)}return c};b.nN=function(b,c,d,e){b=a.cI.local().$(b,c,e,null);if(null!==d){if(0!==d.Nc)throw a.g.N("Unit must be a linear unit type");b=a.Tb.ih(b,a.Tb.Qd(9001),d)}return b};b.BQ=function(b,c,d){if(null===b)return 0;var e=null;if(null!=c){e=c.Se();if(0==e.Nc&&(e=a.Tb.PC(e),null==e&&null!==d))throw a.g.N();if(null!=d&&e.Qc()!=d.Qc()&&e.Nc!=d.Nc)throw a.g.cj();
}else if(null!=d)throw a.g.N();return 1736==b.D()||197==b.D()?(b=b.Mh(),null!==d?a.Tb.ih(b,e,d):b):0};b.CQ=function(b,c,d){if(null===b||b.s()||1>b.fb())return 0;var e=null;if(null!=c){if(e=c.Se(),null!=d&&e.Qc()!=d.Qc()&&e.Nc!=d.Nc)throw a.g.cj();}else if(null!=d)throw a.g.N();1736==b.D()||197==b.D()?c=b.Rf():a.T.Lc(b.D())?(c=new a.Xa(b.description),c.Bc(b,!0)):c=b;b=0;c=c.Ca();for(var f=new a.b,h=new a.b;c.kb();)for(;c.La();){var g=c.ia();g.ht(f);g.uw(h);b+=a.b.Fb(f,h)}null!==e&&null!==d&&(b=a.Tb.ih(b,
e,d));return b};b.YT=function(b,c){return a.Nf.mN(b,c)};b.IL=function(a){return void 0!==a.points?b.kH(a,void 0===a.hasZ?!1:a.hasZ,void 0===a.hasM?!1:a.hasM):void 0!==a.rings?b.Nz(a.rings,void 0===a.hasZ?!1:a.hasZ,void 0===a.hasM?!1:a.hasM,"P"):void 0!==a.paths?b.Nz(a.paths,void 0===a.hasZ?!1:a.hasZ,void 0===a.hasM?!1:a.hasM,"L"):void 0!==a.x?b.uH(a):void 0!==a.xmin?b.hH(a):null};b.uH=function(b){if(null==b.x||"NaN"==b.x)return new a.Va;var c=new a.Va(b.x,b.y);void 0!==b.z&&null!==b.z&&c.rS(b.z);
void 0!==b.m&&null!==b.m&&c.bS(b.m);return c};b.hH=function(b){if(null==b.xmin||"NaN"==b.xmin)return new a.Vj;var c=new a.Vj(b.xmin,b.ymin,b.xmax,b.ymax);void 0!==b.zmin&&null!==b.zmin&&c.setInterval(1,0,b.zmin,b.zmax);void 0!==b.mmin&&null!==b.mmin&&c.setInterval(2,0,b.mmin,b.mmax);return c};b.kH=function(b,c,d){var e=0,f=new a.pe,h=3*b.points.length;0!=h%2&&h++;2>h&&(h=2);var g=a.I.truncate(3*b.points.length/2);4>g?g=4:16>g&&(g=16);for(var h=a.Ac.kl(h,0),n=a.Ac.kl(g),g=a.Ac.kl(g),p=0;p<b.points.length;p++)h.write(2*
p,b.points[p][0]),h.write(2*p+1,b.points[p][1]),n.write(p,c||d?b.points[p][2]:NaN),g.write(p,d&&c?b.points[p][3]:NaN),e++;0!=e&&(f.resize(e),f.bm(0,h));c&&(f.Ne(1),f.bm(1,n));d&&(f.Ne(2),f.bm(2,0==c?n:g));f.ce(16777215);return f};b.Nz=function(b,c,d,e){var f,h=0,g=2;"P"==e?(f=new a.Ka,h=1,g=3):f=new a.Xa;for(var n=a.Ac.Dg(0),p=a.Ac.to(0),m=0,s=0,t=[],u=[],v=0;v<b.length;v++){var w=b[v].length;t[v]=!1;if("P"===e&&b[v][0][0]===b[v][b[v].length-1][0]&&b[v][0][1]===b[v][b[v].length-1][1]){var x=0==d?
!0:b[v][0][3]===b[v][b[v].length-1][3]||void 0===b[v][0][3]&&void 0===b[v][b[v].length-1][3];(0==c||b[v][0][2]===b[v][b[v].length-1][2]||void 0===b[v][0][2]&&void 0===b[v][b[v].length-1][2])&&x&&(t[v]=!0,--w)}w>=g?(u[v]=!1,s+=1,n.add(m),p.add(h),m+=w):u[v]=!0}e=3*m;0!=e%2&&e++;2>e&&(e=2);v=a.I.truncate(3*m/2);4>v?v=4:16>v&&(v=16);e=a.Ac.kl(e,0);h=a.Ac.kl(v);g=a.Ac.kl(v);for(v=w=0;v<b.length;v++)if(!1===u[v])for(x=0;x<b[v].length;x++){var A=!1;x===b[v].length-1&&!0===t[v]&&(A=!0);A||(e.write(2*w,b[v][x][0]),
e.write(2*w+1,b[v][x][1]),h.write(w,c||d?b[v][x][2]:NaN),g.write(w,d&&c?b[v][x][3]:NaN),w++)}0!=m&&(b=f,n.resize(s),p.resize(s),0<m&&(n.add(m),p.add(0)),b.bm(0,e),b.NF(p),b.OF(n));c&&(f.Ne(1),f.bm(1,h));d&&(f.Ne(2),f.bm(2,0==c?h:g));f.ce(16777215);return f};return b}();a.Pb=b})(z||(z={}));(function(a){var b=function(){function a(){}a.Zk=function(a){var b=0,c=0,d=a.length,e=a[c],f;for(c;c<d-1;c++)f=a[c+1],b+=(f[0]-e[0])*(f[1]+e[1]),e=f;return 0<=b};a.rotate=function(b,c,d){c=c*Math.PI/180;var e=Math.cos(c),
f=Math.sin(c);if(void 0!==b.paths){c={paths:[]};for(var h=0;h<b.paths.length;h++){for(var g=b.paths[h],n=[],p=0;p<g.length;p++){var m=g[p].slice(0);n.push(m);var s=e*(g[p][0]-d.x)-f*(g[p][1]-d.y)+d.x,t=f*(g[p][0]-d.x)+e*(g[p][1]-d.y)+d.y;m[0]=s;m[1]=t}c.paths.push(n)}return c}if(void 0!==b.rings){c={rings:[]};for(h=0;h<b.rings.length;h++){for(var g=b.rings[h],n=[],E=a.Zk(g),p=0;p<g.length;p++)m=g[p].slice(0),n.push(m),s=e*(g[p][0]-d.x)-f*(g[p][1]-d.y)+d.x,t=f*(g[p][0]-d.x)+e*(g[p][1]-d.y)+d.y,m[0]=
s,m[1]=t;a.Zk(n)!==E&&n.reverse();c.rings.push(n)}return c}if(void 0!==b.x)return c={x:e*(b.x-d.x)-f*(b.y-d.y)+d.x,y:f*(b.x-d.x)+e*(b.y-d.y)+d.y},void 0!==b.z&&(c.z=b.z),void 0!==b.m&&(c.m=b.m),c;if(void 0!==b.points){c={points:[]};b=b.points;for(p=0;p<b.length;p++)h=b[p].slice(0),h[0]=e*(b[p][0]-d.x)-f*(b[p][1]-d.y)+d.x,h[1]=f*(b[p][0]-d.x)+e*(b[p][1]-d.y)+d.y,c.points.push(h);return c}return null};a.eC=function(b,c){var d,e;if(void 0!==b.paths){d={paths:[]};for(var f=0;f<b.paths.length;f++){for(var h=
b.paths[f],g=[],n=0;n<h.length;n++){var p=h[n].slice(0);g.push(p);e=c.x-h[n][0];p[0]=h[n][0]+2*e}d.paths.push(g)}return d}if(void 0!==b.rings){d={rings:[]};for(f=0;f<b.rings.length;f++){for(var h=b.rings[f],m=a.Zk(h),g=[],n=0;n<h.length;n++)p=h[n].slice(0),g.push(p),e=c.x-h[n][0],p[0]=h[n][0]+2*e;a.Zk(g)!==m&&g.reverse();d.rings.push(g)}return d}if(void 0!==b.x)return e=c.x-b.x,d={x:b.x+2*e,y:b.y},void 0!==b.z&&(d.z=b.z),void 0!==b.m&&(d.m=b.m),d;if(void 0!==b.points){d={points:[]};f=b.points;for(n=
0;n<f.length;n++)h=f[n].slice(0),e=c.x-h[0],h[0]+=2*e,d.points.push(h);return d}return void 0!==b.xmin?(d={v:b.xmin,C:b.ymin,B:b.xmax,G:b.ymax},void 0!==b.zmin&&(d.zmin=b.zmin,d.zmax=b.zmax),void 0!==b.mmin&&(d.mmin=b.mmin,d.mmax=b.mmax),e=c.x-b.xmin,d.xmax=b.xmin+2*e,e=c.x-b.xmax,d.xmin=b.xmax+2*e,d):null};a.fC=function(b,c){var d,e;if(void 0!==b.paths){d={paths:[]};for(var f=0;f<b.paths.length;f++){for(var h=b.paths[f],g=[],n=0;n<h.length;n++){var p=h[n].slice(0);g.push(p);e=c.y-h[n][1];p[1]=h[n][1]+
2*e}d.paths.push(g)}return d}if(void 0!==b.rings){d={rings:[]};for(f=0;f<b.rings.length;f++){for(var h=b.rings[f],m=a.Zk(h),g=[],n=0;n<h.length;n++)p=h[n].slice(0),g.push(p),e=c.y-h[n][1],p[1]=h[n][1]+2*e;a.Zk(g)!==m&&g.reverse();d.rings.push(g)}return d}if(void 0!==b.x)return e=c.y-b.y,d={y:b.y+2*e,x:b.x},void 0!==b.z&&(d.z=b.z),void 0!==b.m&&(d.m=b.m),d;if(void 0!==b.points){d={points:[]};f=b.points;for(n=0;n<f.length;n++)h=f[n].slice(0),e=c.y-h[1],h[1]+=2*e,d.points.push(h);return d}return void 0!==
b.xmin?(d={v:b.xmin,C:b.ymin,B:b.xmax,G:b.ymax},void 0!==b.zmin&&(d.zmin=b.zmin,d.zmax=b.zmax),void 0!==b.mmin&&(d.mmin=b.mmin,d.mmax=b.mmax),e=c.y-b.ymin,d.ymax=b.ymin+2*e,e=c.y-b.ymax,d.ymin=b.ymax+2*e,d):null};return a}();a.Wn=b})(z||(z={}));(function(a){var b=function(){function b(){}b.jg=function(b,c){var d=c;null==d&&(d=a.Od.Tf());switch(b){case 33:return new a.Va(d);case 322:return new a.yb(d);case 197:return new a.Vj(d);case 550:return new a.pe(d);case 1607:return new a.Xa(d);case 1736:return new a.Ka(d);
default:throw a.g.ra("invalid argument.");}};return b}();a.sH=b})(z||(z={}));(function(a){var b=function(){function b(c,k){this.De=a.ga.Yc(c,-1);this.oa=new a.Ur;this.tk=k}b.prototype.wR=function(a){this.oa.Dr(Math.min(this.De.size,a));this.oa.$l(a)};b.prototype.addElement=function(b,c){if(void 0===c)return this.JJ(b);var d=a.I.truncate(c%this.De.size),e=this.De.get(d);-1==e&&(e=this.oa.jh(),this.De.set(d,e));return this.oa.addElement(e,b)};b.prototype.JJ=function(b){var c=this.tk.vw(b),c=a.I.truncate(c%
this.De.size),d=this.De.get(c);-1==d&&(d=this.oa.jh(),this.De.set(c,d));return this.oa.addElement(d,b)};b.prototype.Jc=function(b,c){if(void 0===c)this.dM(b);else{var d=a.I.truncate(c%this.De.size),e=this.De.get(d);if(-1==e)throw a.g.N();for(var f=this.oa.gc(e),h=-1;-1!=f;){var g=this.oa.bb(f);this.oa.da(f)==b?(this.oa.Jc(e,h,f),-1==this.oa.gc(e)&&(this.oa.Fg(e),this.De.set(d,-1))):h=f;f=g}}};b.prototype.dM=function(b){var c=this.tk.vw(b),c=a.I.truncate(c%this.De.size),d=this.De.get(c);if(-1==d)throw a.g.N();
for(var e=this.oa.gc(d),f=-1;-1!=e;){var h=this.oa.bb(e);this.oa.da(e)==b?(this.oa.Jc(d,f,e),-1==this.oa.gc(d)&&(this.oa.Fg(d),this.De.set(c,-1))):f=e;e=h}};b.prototype.DN=function(b){b=a.I.truncate(b%this.De.size);b=this.De.get(b);return-1==b?-1:this.oa.gc(b)};b.prototype.SN=function(a){return this.oa.bb(a)};b.prototype.kd=function(b){var c=this.tk.vw(this.da(b)),c=a.I.truncate(c%this.De.size),d=this.De.get(c);if(-1==d)throw a.g.N();for(var e=this.oa.gc(d),f=-1;-1!=e;){if(e==b){this.oa.Jc(d,f,e);
-1==this.oa.gc(d)&&(this.oa.Fg(d),this.De.set(c,-1));return}f=e;e=this.oa.bb(e)}throw a.g.N();};b.prototype.da=function(a){return this.oa.da(a)};b.prototype.clear=function(){this.De=a.ga.Yc(this.De.size,-1);this.oa.clear()};b.prototype.size=function(){return this.oa.HC()};return b}();a.AH=b})(z||(z={}));(function(a){var b=function(){function b(){this.ci=new a.Fc(3);this.oa=new a.Fc(6);this.AP=!1;this.Wd=-1}b.prototype.bk=function(a){this.ci.Jc(a)};b.prototype.ou=function(){return this.ci.be()};b.prototype.Rs=
function(a){this.oa.Jc(a)};b.prototype.Yx=function(){return this.oa.be()};b.prototype.Jy=function(a,b){this.ci.L(a,1,b)};b.prototype.Gu=function(a,b){this.ci.L(a,2,b)};b.prototype.aS=function(a,b){this.ci.L(a,3,b)};b.prototype.Hy=function(a,b){this.oa.L(a,4,b)};b.prototype.dS=function(a,b){this.oa.L(a,3,b)};b.prototype.RF=function(a,b){this.oa.L(a,2,b)};b.prototype.jh=function(a){var b=this.Yx();this.oa.L(b,3,this.Wd);this.oa.L(b,4,0);this.oa.L(b,5,a);-1!=this.Wd&&this.RF(this.Wd,b);return this.Wd=
b};b.prototype.Fg=function(a){this.CB(a);var b=this.oa.O(a,2),c=this.oa.O(a,3);-1!=b?this.dS(b,c):this.Wd=c;-1!=c&&this.RF(c,b);this.Rs(a);return c};b.prototype.Dr=function(a){this.oa.de(a)};b.prototype.DC=function(a){return this.oa.O(a,5)};b.prototype.$R=function(a,b){this.oa.L(a,5,b)};b.prototype.addElement=function(a,b){return this.AO(a,b)};b.prototype.AO=function(a,b){var c=this.ou();this.Gu(c,-1);-1==this.oa.O(a,0)&&this.oa.L(a,0,c);var d=this.oa.O(a,1);this.Jy(c,d);-1!=d&&this.Gu(d,c);this.oa.L(a,
1,c);this.setData(c,b);this.Hy(a,this.vq(a)+1);this.AP&&this.aS(c,a);return c};b.prototype.Jc=function(a,b){var c=this.ge(b),d=this.bb(b);-1!=c?this.Gu(c,d):this.oa.L(a,0,d);-1!=d?this.Jy(d,c):this.oa.L(a,1,c);this.bk(b);this.Hy(a,this.vq(a)-1);return d};b.prototype.$l=function(a){this.ci.de(a)};b.prototype.getData=function(a){return this.ci.O(a,0)};b.prototype.setData=function(a,b){this.ci.L(a,0,b)};b.prototype.bb=function(a){return this.ci.O(a,2)};b.prototype.ge=function(a){return this.ci.O(a,1)};
b.prototype.gc=function(a){return this.oa.O(a,0)};b.prototype.tc=function(a){return this.oa.O(a,1)};b.prototype.clear=function(){for(var a=this.Wd;-1!=a;)a=this.Fg(a)};b.prototype.CB=function(a){for(var b=this.tc(a);-1!=b;){var c=b,b=this.ge(c);this.bk(c)}this.oa.L(a,0,-1);this.oa.L(a,1,-1);this.Hy(a,0)};b.prototype.s=function(){return 0==this.ci.size};b.prototype.HC=function(){return this.ci.size};b.prototype.vq=function(a){return this.oa.O(a,4)};b.prototype.Cw=function(a){return this.oa.O(a,3)};
return b}();a.$n=b})(z||(z={}));(function(a){var b=function(){function b(c){void 0===c?(this.bg=new a.Fc(2),this.oa=new a.Fc(4),this.Wd=-1,this.Bt=!0):(this.bg=new a.Fc(2),this.oa=new a.Fc(c?4:2),this.Wd=-1,this.Bt=c)}b.prototype.bk=function(a){this.bg.Jc(a)};b.prototype.ou=function(){return this.bg.be()};b.prototype.Rs=function(a){this.oa.Jc(a)};b.prototype.Yx=function(){return this.oa.be()};b.prototype.jh=function(){var a=this.Yx();this.Bt&&(this.oa.L(a,3,this.Wd),-1!=this.Wd&&this.oa.L(this.Wd,
2,a),this.Wd=a);return a};b.prototype.Fg=function(a){for(var b=this.gc(a);-1!=b;){var c=b,b=this.bb(b);this.bk(c)}this.Bt&&(b=this.oa.O(a,2),c=this.oa.O(a,3),-1!=b?this.oa.L(b,3,c):this.Wd=c,-1!=c&&this.oa.L(c,2,b));this.Rs(a)};b.prototype.Dr=function(a){this.oa.de(a)};b.prototype.addElement=function(a,b){var c=this.oa.O(a,1),d=this.ou();-1!=c?this.bg.L(c,1,d):this.oa.L(a,0,d);this.oa.L(a,1,d);this.bg.L(d,0,b);return d};b.prototype.$l=function(a){this.bg.de(a)};b.prototype.Jc=function(a,b,c){-1!=
b?(this.bg.L(b,1,this.bg.O(c,1)),this.oa.O(a,1)==c&&this.oa.L(a,1,b)):(this.oa.L(a,0,this.bg.O(c,1)),this.oa.O(a,1)==c&&this.oa.L(a,1,-1));this.bk(c)};b.prototype.Qv=function(a,b){var c=this.oa.O(a,1),d=this.oa.O(b,0);-1!=d&&(-1!=c?this.bg.L(c,1,d):this.oa.L(a,0,d),this.oa.L(a,1,this.oa.O(b,1)));this.Bt&&(c=this.oa.O(b,2),d=this.oa.O(b,3),-1!=c?this.oa.L(c,3,d):this.Wd=d,-1!=d&&this.oa.L(d,2,c));this.Rs(b)};b.prototype.da=function(a){return this.bg.O(a,0)};b.prototype.Vi=function(a,b){this.bg.L(a,
0,b)};b.prototype.bb=function(a){return this.bg.O(a,1)};b.prototype.gc=function(a){return this.oa.O(a,0)};b.prototype.Dm=function(a){return this.da(this.gc(a))};b.prototype.clear=function(){this.bg.Nh(!0);this.oa.Nh(!0);this.Wd=-1};b.prototype.s=function(a){return void 0===a?0==this.bg.size:-1==this.oa.O(a,0)};b.prototype.HC=function(){return this.bg.size};b.prototype.Cw=function(a){return this.oa.O(a,3)};return b}();a.Ur=b})(z||(z={}));(function(a){var b=function(){function b(){}b.kz=function(c,
k,d,e,f,h,g){var n=new a.b;n.J(c);c=new a.b;c.J(k);f.vv(n);f.vv(c);k=f.ms(n);var p=f.ms(c);0==p&&(p=f.CC());if(n.x!=c.x&&(n.y!=c.y||n.y!=f.C&&n.y!=f.G)||p>k!=h){k=f.vA(n);var p=f.vA(c),m,s=h?1:3;do k=k+s&3,m=f.vu(k),0!=g&&(e=b.kz(n,m,d,e,f,h,g)),d[e++].ma(m.x,m.y),n=m;while((k&3)!=p);0!=g&&(e=b.kz(n,c,d,e,f,h,g))}else if(f=new a.b,f.ma(c.x-n.x,c.y-n.y),0!=g&&(g=a.I.truncate(f.yJ()/g),0<g)){f.scale(1/(g+1));for(h=0;h<g;h++)n.add(f),d[e++].ma(n.x,n.y)}return e};b.zd=function(a,b,c){b=b.lv();a=null!=
a&&void 0!==a.Ko?a.Ko():0;c&&(b*=4,a*=1.1);return Math.max(a,b)};b.As=function(a){return 2*Math.sqrt(2)*a};b.UJ=function(a){return Math.sqrt(2)*a};b.Cg=function(c,k,d){var e=new a.i;k.o(e);return b.zd(c,e,d)};b.rB=function(a,b,c){b=b.Ah(1,0).lv();a=null!=a?a.Ko():0;c&&(b*=4,a*=1.1);return Math.max(a,b)};b.$T=function(b,c){var d=new a.i;b.dd(d);d.Db(c);return d};b.$s=function(b,c){var d=new a.i;b.dd(d);var e=new a.i;c.dd(e);d.Db(e);return d};b.fU=function(b,c){var d=b.HN(c),e=b.Ea(c),f=b.Dc(c),h=b.Fa(d);
d==e?(f=b.Fa(f-1),d=b.Fa(e+1)):d==f-1?(f=b.Fa(d-1),d=b.Fa(e)):(f=b.Fa(d-1),d=b.Fa(d+1));h=a.b.yn(f,h,d);return 0==h?0<b.oo(c):-1==h};b.CK=function(b){var c=new a.i;b.dd(c);if(c.s())return null;var d=new a.co(c,8),e=-1,f=new a.i,h=!1;do for(var g=0,n=b.ea();g<n;g++)if(b.Ti(g,f),e=d.kt(g,f,e),-1==e){if(h)throw a.g.ra("internal error");b.tm(c,!1);h=!0;d.reset(c,8);break}else h=!1;while(h);return d};b.nB=function(b){var c=new a.i;b.dd(c);for(var d=new a.co(c,8),e=-1,f=b.Ca(),h=new a.i,g=!1;f.kb();)for(;f.La();){var n=
f.ia(),p=f.Jb();n.o(h);e=d.kt(p,h,e);if(-1==e){if(g)throw a.g.wa();b.tm(c,!1);g=!0;d.reset(c,8);f.Lk();break}}return d};b.ij=function(b,c){var d=new a.i;b.dd(d);for(var e=new a.co(d,8),f=-1,h=new a.i,g=b.Ca(),n=!1;g.kb();)for(;g.La();){var p=g.ia(),m=g.Jb();p.o(h);if(h.jc(c)&&(f=e.kt(m,h,f),-1==f)){if(n)throw a.g.ra("internal error.");b.tm(d,!1);n=!0;e.reset(d,8);g.Lk();break}}return e};b.DT=function(b){var c=new a.i;b.dd(c);for(var d=new a.co(c,8),e=new a.b,f=new a.i,h=!1,g=0;g<b.F();g++)if(b.w(g,
e),f.K(e),-1==d.lg(g,f)){if(h)throw a.g.wa();b.tm(c,!1);h=!0;d.reset(c,8);g=-1}return d};b.oB=function(b,c){for(var d=new a.co(c,8),e=new a.b,f=!1,h=new a.i,g=0;g<b.F();g++)if(b.w(g,e),c.contains(e)&&(h.K(e),-1==d.lg(g,h))){if(f)throw a.g.wa();f=!0;g=new a.i;b.tm(g,!1);d.reset(g,8);g=-1}return d};b.AN=function(b,c,d){var e=new a.i,f=new a.i;b.dd(e);c.dd(f);e.P(d,d);f.P(d,d);var h=new a.i;h.K(e);h.Ga(f);b=b.Ca();c=c.Ca();var g=new a.sz;g.YF(d);var n=!1;for(g.jG();b.kb();)for(;b.La();)b.ia().o(e),e.jc(h)&&
(n=!0,d=new a.i,d.K(e),g.OA(b.Jb(),d));g.$B();if(!n)return null;e=!1;for(g.iG();c.kb();)for(;c.La();)c.ia().o(f),f.jc(h)&&(e=!0,d=new a.i,d.K(f),g.LA(c.Jb(),d));g.ZB();return e?g:null};b.BN=function(b,c,d,e,f){var h=b.D(),g=c.D(),n=new a.i,p=new a.i;b.dd(n);c.dd(p);n.P(d,d);p.P(d,d);var m=new a.i;m.K(n);m.Ga(p);var s=new a.sz;s.YF(d);var t=!1;s.jG();var u=0;for(d=b.ea();u<d;u++)if(!e||1736!=h||b.qt(u))b.Ti(u,n),n.jc(m)&&(t=!0,s.OA(u,n));s.$B();if(!t)return null;b=!1;s.iG();e=0;for(d=c.ea();e<d;e++)if(!f||
1736!=g||c.qt(e))c.Ti(e,p),p.jc(m)&&(b=!0,s.LA(e,p));s.ZB();return b?s:null};b.hU=function(a,b){return 0<a.rj(b)};b.zT=function(b,c){var d=new a.i;b.hR(c,d);var d=new a.co(d,8),e=-1,f=new a.i,h=b.Ca();h.vy(c);if(h.kb())for(;h.La();){var g=h.ia(),n=h.Jb();g.dd(f);e=d.kt(n,f,e);if(-1==e)throw a.g.ra("internal error");}return d};return b}();a.Ia=b})(z||(z={}));(function(a){var b=function(){function a(b){this.Na=b}a.prototype.compare=function(a,b,c){a=a.da(c);c=this.Na.uj(b);var k=this.Na.uj(a);return c<
k?-1:c==k?e.Po(b)&&e.st(a)?-1:e.Po(a)&&e.st(b)?1:0:1};return a}(),c=function(){function a(b){this.Na=b}a.prototype.Zp=function(a,b,c){this.Na.yS(c,a,b)};a.prototype.Mo=function(a){return this.Na.uj(a)};return a}(),d;(function(a){a[a.initialize=0]="initialize";a[a.pIn=1]="pIn";a[a.pL=2]="pL";a[a.pR=3]="pR";a[a.pT=4]="pT";a[a.right=5]="right";a[a.left=6]="left";a[a.all=7]="all"})(d||(d={}));var k=function(){function b(){this.Na=null;this.gi=new a.Nd;this.ug=new a.ga(0);this.$f=[0,0]}b.prototype.Ch=
function(a,b){this.gi.qa=a.qa-b;this.gi.va=a.va+b;this.ug.resize(0);this.Ud=0;this.$f[0]=0};b.prototype.uy=function(b,c,k){if(b>c)throw a.g.N();this.gi.qa=b-k;this.gi.va=c+k;this.ug.resize(0);this.Ud=0;this.$f[0]=0};b.prototype.Fn=function(a,b){this.gi.qa=a-b;this.gi.va=a+b;this.ug.resize(0);this.Ud=0;this.$f[0]=0};b.prototype.next=function(){if(!this.Na.Vo)throw a.g.xa();if(0>this.Ud)return-1;for(var b=!0;b;)switch(this.$f[this.Ud]){case 1:b=this.uQ();break;case 2:b=this.vQ();break;case 3:b=this.wQ();
break;case 4:b=this.xQ();break;case 5:b=this.BR();break;case 6:b=this.sP();break;case 7:b=this.XJ();break;case 0:b=this.Qw();break;default:throw a.g.wa();}return-1!=this.pg?this.Bo()>>1:-1};b.JT=function(a,c,k){var d=new b;d.Na=a;d.ug.xb(20);d.Ch(c,k);return d};b.KT=function(a,c,k){var d=new b;d.Na=a;d.ug.xb(20);d.Fn(c,k);return d};b.Oa=function(a){var c=new b;c.Na=a;c.ug.xb(20);c.Ud=-1;return c};b.prototype.Qw=function(){this.pg=this.YD=this.di=this.yc=-1;if(null!=this.Na.Yd&&0<this.Na.Yd.size)return this.$f[0]=
1,this.di=this.Na.Ze,!0;this.Ud=-1;return!1};b.prototype.uQ=function(){this.yc=this.di;if(-1==this.yc)return this.pg=this.Ud=-1,!1;var a=this.Na.Co(this.yc);if(this.gi.va<a)return a=this.Na.tj(this.yc),this.di=this.Na.Di(this.yc),-1!=a&&(this.vh=this.Na.gk(a),this.$f[++this.Ud]=6),!0;if(a<this.gi.qa)return a=this.Na.tj(this.yc),this.di=this.Na.sj(this.yc),-1!=a&&(this.vh=this.Na.uq(a),this.$f[++this.Ud]=5),!0;this.$f[this.Ud]=2;this.YD=this.yc;a=this.Na.tj(this.yc);this.di=this.Na.Di(this.yc);-1!=
a&&(this.vh=this.Na.gk(a),this.$f[++this.Ud]=7);return!0};b.prototype.vQ=function(){this.yc=this.di;if(-1==this.yc)return this.$f[this.Ud]=3,this.di=this.Na.sj(this.YD),!0;if(this.Na.Co(this.yc)<this.gi.qa){var a=this.Na.tj(this.yc);this.di=this.Na.sj(this.yc);-1!=a&&(this.vh=this.Na.uq(a),this.$f[++this.Ud]=5);return!0}a=this.Na.tj(this.yc);this.di=this.Na.Di(this.yc);-1!=a&&(this.vh=this.Na.gk(a),this.$f[++this.Ud]=7);a=this.Na.sj(this.yc);-1!=a&&this.ug.add(a);return!0};b.prototype.wQ=function(){this.yc=
this.di;if(-1==this.yc)return this.$f[this.Ud]=4,!0;if(this.gi.va<this.Na.Co(this.yc)){var a=this.Na.tj(this.yc);this.di=this.Na.Di(this.yc);-1!=a&&(this.vh=this.Na.gk(a),this.$f[++this.Ud]=6);return!0}a=this.Na.tj(this.yc);this.di=this.Na.sj(this.yc);-1!=a&&(this.vh=this.Na.gk(a),this.$f[++this.Ud]=7);a=this.Na.Di(this.yc);-1!=a&&this.ug.add(a);return!0};b.prototype.xQ=function(){if(0==this.ug.size)return this.pg=this.Ud=-1,!1;this.yc=this.ug.get(this.ug.size-1);this.ug.resize(this.ug.size-1);var a=
this.Na.tj(this.yc);-1!=a&&(this.vh=this.Na.gk(a),this.$f[++this.Ud]=7);-1!=this.Na.Di(this.yc)&&this.ug.add(this.Na.Di(this.yc));-1!=this.Na.sj(this.yc)&&this.ug.add(this.Na.sj(this.yc));return!0};b.prototype.sP=function(){this.pg=this.vh;if(-1!=this.pg&&e.Po(this.Bo())&&this.Na.uj(this.Bo())<=this.gi.va)return this.vh=this.GC(),!1;this.Ud--;return!0};b.prototype.BR=function(){this.pg=this.vh;if(-1!=this.pg&&e.st(this.Bo())&&this.Na.uj(this.Bo())>=this.gi.qa)return this.vh=this.bO(),!1;this.Ud--;
return!0};b.prototype.XJ=function(){this.pg=this.vh;if(-1!=this.pg&&e.Po(this.Bo()))return this.vh=this.GC(),!1;this.Ud--;return!0};b.prototype.GC=function(){return this.Na.Df?this.Na.If.bb(this.pg):this.Na.ki.bb(this.pg)};b.prototype.bO=function(){return this.Na.Df?this.Na.If.ge(this.pg):this.Na.ki.ge(this.pg)};b.prototype.Bo=function(){return this.Na.Df?this.Na.If.da(this.pg):this.Na.ki.getData(this.pg)};return b}();a.IT=k;var e=function(){function d(a){this.Al=this.rh=this.If=this.ki=this.Hl=this.Ki=
this.Yd=this.Li=null;this.Df=a;this.Vo=this.Dt=!1}d.prototype.Vp=function(){this.Rj(!0)};d.prototype.gq=function(b,c){if(!this.Dt)throw a.g.xa();this.Li.push(new a.Nd(b,c))};d.prototype.wo=function(){if(!this.Dt)throw a.g.ra("invalid call");this.Dt=!1;this.Vo=!0;this.Df||(this.BO(),this.Jt=this.Li.length)};d.prototype.lg=function(b){if(!this.Df||!this.Vo)throw a.g.N("invalid call");if(-1==this.Ze){var c=this.Li.length;if(this.nx){var d=new a.ga(0);d.xb(2*c);this.$E(d);this.rh.xb(2*c);this.rh.resize(0);
this.ZE(d);this.Hl.resize(c,-1);this.Hl.dh(-1,0,c);this.nx=!1}else this.Hl.dh(-1,0,c);this.Ze=this.Ms()}c=this.cD(b<<1,this.Ze);d=this.If.addElement((b<<1)+1,this.Hw(c));this.TF(c,d);this.Hl.set(b,c);this.Jt++};d.prototype.remove=function(b){if(!this.Df||!this.Vo)throw a.g.ra("invalid call");var c=this.Hl.get(b);if(-1==c)throw a.g.N("the interval does not exist in the interval tree");this.Hl.set(b,-1);this.Jt--;var d=this.Hw(c),k;k=this.If.hO(d);this.If.kd(this.LN(c),d);this.If.kd(this.eO(c),d);b=
this.If.size(d);0==b&&(this.If.fM(d),this.WF(k,-1));this.Ki.Jc(c);for(var d=this.JC(k),e=this.Di(k),f=this.sj(k),c=0;!(0<b||k==this.Ze||-1!=e&&-1!=f);)k==this.Di(d)?-1!=e?(this.Sj(d,e),this.Xi(e,d),this.Sj(k,-1)):-1!=f?(this.Sj(d,f),this.Xi(f,d),this.Uj(k,-1)):this.Sj(d,-1):-1!=e?(this.Uj(d,e),this.Xi(e,d),this.Sj(k,-1)):-1!=f?(this.Uj(d,f),this.Xi(f,d),this.Uj(k,-1)):this.Uj(d,-1),this.Xi(k,-1),c++,k=d,d=this.tj(k),b=-1!=d?this.If.size(d):0,e=this.Di(k),f=this.sj(k),d=this.JC(k)};d.prototype.reset=
function(){if(!this.Df||!this.Vo)throw a.g.N("invalid call");this.Rj(!1)};d.prototype.size=function(){return this.Jt};d.prototype.Re=function(){return k.Oa(this)};d.prototype.$E=function(a){for(var b=this.Li.length,c=0;c<2*b;c++)a.add(c);this.zS(a,2*b)};d.prototype.ZE=function(a){for(var b=NaN,c=0;c<a.size;c++){var d=a.get(c),k=this.uj(d);k!=b&&(this.rh.add(d),b=k)}};d.prototype.BO=function(){var b=this.Li.length,c=new a.ga(0);c.xb(2*b);this.$E(c);this.rh.xb(2*b);this.rh.resize(0);this.ZE(c);this.Ki.de(b);
this.ki.$l(2*b);var d=a.Ac.Dg(b);d.dh(-1,0,b);this.Ze=this.Ms();for(b=0;b<c.size;b++){var k=c.get(b),e=d.get(k>>1);-1!=e?this.TF(e,this.ki.addElement(this.Hw(e),k)):(e=this.cD(k,this.Ze),d.set(k>>1,e))}};d.prototype.cD=function(b,c){var d=c,k=c,e=c,f,h=-1,q=0,r=this.rh.size-1,g=0,n=b>>1,y=NaN,p=NaN;f=!0;for(var m=this.RN(n),n=this.ON(n);f;){q<r?(g=q+a.I.truncate((r-q)/2),-1==this.rw(d)&&this.CF(d,this.rh.get(g),this.rh.get(g+1))):-1==this.rw(d)&&this.CF(d,this.rh.get(q),this.rh.get(q));var s=this.Co(d);
if(n<s)-1!=e&&(e==d?(k=d,y=s,e=this.Di(d),-1!=e?p=this.Co(e):p=NaN):p>s&&(s<y?this.Sj(k,d):this.Uj(k,d),this.Uj(d,e),this.Df&&(this.Xi(d,k),this.Xi(e,d)),k=d,y=s,e=-1,p=NaN)),r=this.MN(d),-1==r&&(r=this.Ms(),this.YR(d,r)),d=r,r=g;else if(m>s)-1!=e&&(e==d?(k=d,y=s,e=this.sj(d),-1!=e?p=this.Co(e):p=NaN):p<s&&(s<y?this.Sj(k,d):this.Uj(k,d),this.Sj(d,e),this.Df&&(this.Xi(d,k),this.Xi(e,d)),k=d,y=s,e=-1,p=NaN)),q=this.fO(d),-1==q&&(q=this.Ms(),this.iS(d,q)),d=q,q=g+1;else{f=this.tj(d);-1==f&&(f=this.TL(d),
this.WF(d,f));var t=this.KJ(f,b),h=this.SL();this.lS(h,f);this.XR(h,t);d!=e&&(s<y?this.Sj(k,d):this.Uj(k,d),this.Df&&this.Xi(d,k),-1!=e&&(p<s?this.Sj(d,e):this.Uj(d,e),this.Df&&this.Xi(e,d)));f=!1}}return h};d.prototype.Ms=function(){return this.Yd.be()};d.prototype.TL=function(a){return this.Df?this.If.nq(a):this.ki.jh(a)};d.prototype.SL=function(){return this.Ki.be()};d.prototype.Rj=function(c){c?(this.Dt=this.nx=!0,this.Vo=!1,null==this.rh?this.rh=a.Ac.Dg(0):this.rh.resize(0),null==this.Li?this.Li=
[]:this.Li.length=0):this.nx=!1;this.Df?null==this.Hl?(this.Hl=a.Ac.Dg(0),this.If=new a.bj,this.If.Hn(new b(this))):this.If.clear():null==this.ki?this.ki=new a.$n:this.ki.clear();null==this.Yd?(this.Ki=new a.Fc(3),this.Yd=new a.Fc(this.Df?8:7)):(this.Ki.Nh(!1),this.Yd.Nh(!1));this.Ze=-1;this.Jt=0};d.prototype.CF=function(a,b,c){this.SR(a,b);this.TR(a,c)};d.prototype.Co=function(a){var b=this.rw(a);if(-1==b)return NaN;b=this.uj(b);a=this.uj(this.wN(a));return b==a?b:0.5*(b+a)};d.prototype.SR=function(a,
b){this.Yd.L(a,0,b)};d.prototype.TR=function(a,b){this.Yd.L(a,1,b)};d.prototype.YR=function(a,b){this.Yd.L(a,3,b)};d.prototype.iS=function(a,b){this.Yd.L(a,4,b)};d.prototype.WF=function(a,b){this.Yd.L(a,2,b)};d.prototype.Sj=function(a,b){this.Yd.L(a,5,b)};d.prototype.Uj=function(a,b){this.Yd.L(a,6,b)};d.prototype.Xi=function(a,b){this.Yd.L(a,7,b)};d.prototype.lS=function(a,b){this.Ki.L(a,0,b)};d.prototype.KJ=function(a,b){return this.Df?this.If.addElement(b,a):this.ki.addElement(a,b)};d.prototype.XR=
function(a,b){this.Ki.L(a,1,b)};d.prototype.TF=function(a,b){this.Ki.L(a,2,b)};d.prototype.gk=function(a){return this.Df?this.If.gc(a):this.ki.gc(a)};d.prototype.uq=function(a){return this.Df?this.If.tc(a):this.ki.tc(a)};d.Po=function(a){return 0==(a&1)};d.st=function(a){return 1==(a&1)};d.prototype.rw=function(a){return this.Yd.O(a,0)};d.prototype.wN=function(a){return this.Yd.O(a,1)};d.prototype.tj=function(a){return this.Yd.O(a,2)};d.prototype.MN=function(a){return this.Yd.O(a,3)};d.prototype.fO=
function(a){return this.Yd.O(a,4)};d.prototype.Di=function(a){return this.Yd.O(a,5)};d.prototype.sj=function(a){return this.Yd.O(a,6)};d.prototype.JC=function(a){return this.Yd.O(a,7)};d.prototype.Hw=function(a){return this.Ki.O(a,0)};d.prototype.LN=function(a){return this.Ki.O(a,1)};d.prototype.eO=function(a){return this.Ki.O(a,2)};d.prototype.RN=function(a){return this.Li[a].qa};d.prototype.ON=function(a){return this.Li[a].va};d.prototype.zS=function(b,d){null==this.Al&&(this.Al=new a.Rr);var k=
new c(this);this.Al.sort(b,0,d,k)};d.prototype.yS=function(a,b,c){var k=this;a.xd(b,c,function(a,b){var c=k.uj(a),e=k.uj(b);return c<e||c==e&&d.Po(a)&&d.st(b)?-1:1})};d.prototype.uj=function(a){var b=this.Li[a>>1];return d.Po(a)?b.qa:b.va};return d}();a.bq=e})(z||(z={}));(function(a){var b=function(b){function c(d,e,f,h){b.call(this);void 0===d?this.description=a.Od.Tf():void 0===f?this.description=d:(this.description=a.Od.Tf(),this.Ny(d,e),this.Ok(f,h))}C(c,b);c.prototype.D=function(){return 322};
c.prototype.$b=function(){var a=this.na-this.la,b=this.ja-this.ha;return Math.sqrt(a*a+b*b)};c.prototype.mg=function(a){var b=this.na-this.la,c=this.ja-this.ha;return Math.sqrt(b*b+c*c)<=a};c.prototype.mD=function(){return!1};c.prototype.Pf=function(){var b=new a.b;b.pc(this.oc(),this.Mb());return b};c.prototype.Fp=function(b){b.Ja();b.Qf(this.description);var c=new a.i;this.o(c);b.Cu(c);for(var c=1,d=this.description.Aa;c<d;c++)for(var e=this.description.Hd(c),f=a.pa.Wa(e);c<f;c++){var h=this.Ah(e,
0);b.setInterval(e,0,h)}};c.prototype.o=function(a){a.K(this.na,this.ja,this.la,this.ha);a.normalize()};c.prototype.Cn=function(a){a.Ja();a.Db(this.na,this.ja,this.yd(0,1,0));a.Db(this.la,this.ha,this.yd(1,1,0))};c.prototype.Oe=function(b){if(b instanceof a.Bg){this.qc();var c=new a.b;c.x=this.na;c.y=this.ja;b.Zi(c,c);this.na=c.x;this.ja=c.y;c.x=this.la;c.y=this.ha;b.Zi(c,c);this.la=c.x;this.ha=c.y}else this.qc(),c=new a.ee,c.x=this.na,c.y=this.ja,c.z=this.yd(0,1,0),c=b.Qn(c),this.na=c.x,this.ja=
c.y,this.om(0,1,0,c.z),c.x=this.la,c.y=this.ha,c.z=this.yd(1,1,0),c=b.Qn(c),this.la=c.x,this.ha=c.y,this.om(1,1,0,c.z)};c.prototype.Pa=function(){return new c(this.description)};c.prototype.kv=function(a,b){return 0.5*(this.la-a-(this.na-a))*(this.ha-b+(this.ja-b))};c.prototype.Ru=function(a){return a*this.$b()};c.prototype.AD=function(a){return a/this.$b()};c.prototype.sC=function(b){return a.vi.ut(this.na,this.la,b)};c.prototype.vN=function(b){return a.vi.ut(this.ja,this.ha,b)};c.prototype.xm=function(b,
c){var d=new a.Ag;this.Bi(b,c,d);return d.get()};c.prototype.Bi=function(b,c,d){if(null==d)throw a.g.N();d.mq();d=d.get();d.Qf(this.description);var e=new a.b;this.Kb(b,e);d.Ny(e.x,e.y);this.Kb(c,e);d.Ok(e.x,e.y);for(var e=1,f=this.description.Aa;e<f;e++)for(var h=this.description.Fd(e),q=a.pa.Wa(h),g=0;g<q;g++){var n=this.ld(b,h,g);d.My(h,g,n);n=this.ld(c,h,g);d.Cy(h,g,n)}};c.prototype.ld=function(b,c,d){if(0==c)return 0==d?this.Kb(b).x:this.Kb(b).y;switch(a.pa.JN(c)){case 0:return 0.5>b?this.gt(c,
d):this.Ws(c,d);case 1:var e=this.gt(c,d);c=this.Ws(c,d);return a.vi.ut(e,c,b);case 2:throw a.g.ra("not implemented");}throw a.g.wa();};c.prototype.Gd=function(a,b){var c=this.la-this.na,d=this.ha-this.ja,e=c*c+d*d;if(0==e)return 0.5;c=((a.x-this.na)*c+(a.y-this.ja)*d)/e;b||(0>c?c=0:1<c&&(c=1));return c};c.prototype.nt=function(a,b,c,d){if(a){a=this.ha-this.ja;if(0==a)return b==this.ha?-1:0;b=(b-this.ja)/a;if(0>b||1<b)return 0;null!=c&&(c[0]=this.sC(b))}else{a=this.la-this.na;if(0==a)return b==this.la?
-1:0;b=(b-this.na)/a;if(0>b||1<b)return 0;null!=c&&(c[0]=this.vN(b))}null!=d&&(d[0]=b);return 1};c.prototype.xe=function(a,b){var c=this.ha-this.ja;if(0==c)return a==this.ha?b:NaN;var c=(a-this.ja)/c,d=this.sC(c);1==c&&(d=this.la);return d};c.prototype.qs=function(a,b,c){return 0<=this.ho(a.x,a.y,b,c)};c.prototype.Kh=function(a,b,c){return 0<=this.ho(a,b,c,!0)};c.prototype.Eq=function(a,b){return this.qs(a,b,!1)};c.prototype.KE=function(){if(this.ha<this.ja||this.ha==this.ja&&this.la<this.na){var a=
this.na;this.na=this.la;this.la=a;a=this.ja;this.ja=this.ha;this.ha=a;for(var a=0,b=this.description.up-2;a<b;a++){var c=this.fa[a];this.fa[a]=this.fa[a+b];this.fa[a+b]=c}}};c.prototype.rs=function(b,c){var d=a.b.Oa(b,c);d.sub(this.Mb());var e=new a.b;e.pc(this.oc(),this.Mb());var f=e.Ai(d),d=8.881784197001252E-16*(Math.abs(e.x*d.y)+Math.abs(e.y*d.x));return f>d?-1:f<-d?1:0};c.prototype.ho=function(b,c,d,e){var f=this.na,h=this.ja,q=b-f,g=c-h,q=Math.sqrt(q*q+g*g);if(q<=Math.max(d,6.661338147750939E-16*
q))return e&&0==q?NaN:0;q=b-this.la;g=c-this.ha;q=Math.sqrt(q*q+g*g);if(q<=Math.max(d,6.661338147750939E-16*q))return e&&0==q?NaN:1;q=this.la-this.na;g=this.ha-this.ja;e=Math.sqrt(q*q+g*g);if(0<e){var n=1/e,q=q*n,g=g*n,p=b-f,m=c-h,s=p*q+m*g,t=1.7763568394002505E-15*(Math.abs(p*q)+Math.abs(m*g)),u=q,q=-g,g=u,t=Math.max(d,t);if(s<-t||s>e+t)return NaN;if(Math.abs(p*q+m*g)<=Math.max(d,1.7763568394002505E-15*(Math.abs(p*q)+Math.abs(m*g)))&&(q=a.I.Kr(s*n,0,1),0.5>=q?(g=this.na+(this.la-this.na)*q,e=this.ja+
(this.ha-this.ja)*q):(g=this.la-(this.la-this.na)*(1-q),e=this.ha-(this.ha-this.ja)*(1-q)),a.b.Yv(g,e,b,c)<=d)){if(0.5>q){if(a.b.Yv(g,e,f,h)<=d)return 0}else if(a.b.Yv(g,e,this.la,this.ha)<=d)return 1;return q}}return NaN};c.prototype.lc=function(a){return null==a?!1:a==this?!0:a.constructor!==this.constructor?!1:this.sJ(a)};c.prototype.AA=function(b,c,d){var e=d?this.na:this.la;d=d?this.ja:this.ha;var f=new a.b;f.x=b.la-e;f.y=b.ha-d;return c.ml(f)>6.661338147750939E-16*c.uA(f)?(f.x=b.na-e,f.y=b.ja-
d,c.ml(f)<=6.661338147750939E-16*c.uA(f)):!0};c.prototype.zA=function(b){var c=new a.b;c.x=this.la-this.na;c.y=this.ha-this.ja;if(!this.AA(b,c,!1))return!1;c.Bp();return this.AA(b,c,!0)?!0:!1};c.ye=function(a,b){var c=a.rs(b.na,b.ja),d=a.rs(b.la,b.ha);if(0>c&&0>d||0<c&&0<d)return!1;c=b.rs(a.na,a.ja);d=b.rs(a.la,a.ha);if(0>c&&0>d||0<c&&0<d)return!1;c=a.$b();d=b.$b();return c>d?a.zA(b):b.zA(a)};c.Id=function(b,c,d){var e=a.b.Oa(NaN,NaN),f=b.la-b.na,h=b.ha-b.ja,q=c.la-c.na,g=c.ha-c.ja,n=q*h-f*g;if(0==
n)return e;var p=8.881784197001252E-16*(Math.abs(q*h)+Math.abs(f*g)),m=c.na-b.na,s=c.ja-b.ja,t=q*s-m*g,u=t/n,v=Math.abs(n),q=(8.881784197001252E-16*(Math.abs(q*s)+Math.abs(m*g))*v+p*Math.abs(t))/(n*n)+2.220446049250313E-16*Math.abs(u);if(u<-q||u>1+q)return e;g=f*s-m*h;q=g/n;f=(8.881784197001252E-16*(Math.abs(f*s)+Math.abs(m*h))*v+p*Math.abs(g))/(n*n)+2.220446049250313E-16*Math.abs(q);if(q<-f||q>1+f)return e;u=a.I.Kr(u,0,1);f=a.I.Kr(q,0,1);h=b.Kb(u);n=c.Kb(f);p=new a.b;p.pc(h,n);if(p.length()>d&&(p.add(h,
n),p.scale(0.5),u=b.Gd(p,!1),f=c.Gd(p,!1),b=b.Kb(u),c=c.Kb(f),b.sub(c),b.length()>d))return e;e.ma(u,f);return e};c.xJ=function(a,b,d,e){var f=0;if(a.na==b.na&&a.ja==b.ja||a.na==b.la&&a.ja==b.ha)if(f++,!e)return 1;if(a.la==b.na&&a.ha==b.ja||a.la==b.la&&a.ha==b.ha){f++;if(2==f)return 2;if(!e)return 1}return b.Kh(a.na,a.ja,d)||b.Kh(a.la,a.ha,d)||a.Kh(b.na,b.ja,d)||a.Kh(b.la,b.ha,d)?1:e&&0!=f?0:0==c.ye(a,b)?0:1};c.ov=function(b,d,e,f,h,g){var n=0,p=b.ho(d.na,d.ja,g,!1),m=b.ho(d.la,d.ha,g,!1),s=d.ho(b.na,
b.ja,g,!1),t=d.ho(b.la,b.ha,g,!1);isNaN(p)||(null!=f&&(f[n]=p),null!=h&&(h[n]=0),null!=e&&(e[n]=a.b.Oa(d.na,d.ja)),n++);isNaN(m)||(null!=f&&(f[n]=m),null!=h&&(h[n]=1),null!=e&&(e[n]=a.b.Oa(d.la,d.ha)),n++);2==n||isNaN(s)||0==p&&0==s||0==m&&1==s||(null!=f&&(f[n]=0),null!=h&&(h[n]=s),null!=e&&(e[n]=a.b.Oa(b.na,b.ja)),n++);2==n||isNaN(t)||1==p&&0==t||1==m&&1==t||(null!=f&&(f[n]=1),null!=h&&(h[n]=t),null!=e&&(e[n]=a.b.Oa(d.la,d.ha)),n++);if(0<n)return 2==n&&null!=f&&f[0]>f[1]&&(b=f[0],f[0]=f[1],f[1]=
b,null!=h&&(f=h[0],h[0]=h[1],h[1]=f),null!=e&&(h=a.b.Oa(e[0].x,e[0].y),e[0]=e[1],e[1]=h)),n;n=c.Id(b,d,g);if(isNaN(n.x))return 0;null!=e&&(e[0]=b.Kb(n.x));null!=f&&(f[0]=n.x);null!=h&&(h[0]=n.y);return 1};c.prototype.TC=function(){return 0};c.prototype.eo=function(){};c.prototype.toString=function(){return"Line: ["+this.na.toString()+", "+this.ja.toString()+", "+this.la.toString()+", "+this.ha.toString()+"]"};return c}(a.fA);a.yb=b})(z||(z={}));(function(a){var b=function(){function a(){this.Gl=[];
this.ua=-1}a.prototype.ya=function(){return this.ua};a.prototype.next=function(){if(null!=this.Gl&&0!=this.Gl.length){this.ua++;var a=this.Gl[0];1>=this.Gl.length?this.Gl=[]:this.Gl=this.Gl.slice(1);return a}return this.Gl=null};return a}();a.MT=b})(z||(z={}));(function(a){(function(a){a[a.enumFillRuleOddEven=0]="enumFillRuleOddEven";a[a.enumFillRuleWinding=1]="enumFillRuleWinding"})(a.qI||(a.qI={}));var b=function(b){function c(d,e){b.call(this);this.Yf=!1;this.np=null;this.ap=this.bp=0;this.Uh=
null;this.ng=!1;this.td=this.li=this.Fe=this.qb=this.jb=null;this.gp=this.Qa=this.cp=0;if(void 0===e)this.Yf=d,this.ng=!1,this.ta=this.ap=this.bp=this.cp=0,this.description=a.Od.Tf();else{if(null==e)throw a.g.N();this.Yf=d;this.ng=!1;this.ta=this.ap=this.bp=this.cp=0;this.description=e}this.Uh=null;this.Qa=0}C(c,b);c.prototype.Hm=function(){return 0<this.cp};c.prototype.nv=function(){this.qc();null==this.np?this.np=new a.Va(this.description):this.np.Qf(this.description)};c.prototype.Uy=function(b,
c){var d=new a.b;d.x=b;d.y=c;this.Nr(d)};c.prototype.Nr=function(a){this.nv();this.np.ic(a);this.ng=!0};c.prototype.df=function(b){if(b.s())throw a.g.N();this.Ik(b.description);this.nv();b.copyTo(this.np);this.ng=!0};c.prototype.iv=function(){var b=1;this.ng&&(this.nv(),null==this.jb?(this.jb=a.Ac.Dg(2),this.jb.write(0,0),this.qb=a.Ac.to(2,0)):(this.jb.resize(this.jb.size+1,0),this.qb.resize(this.qb.size+1,0)),this.Yf&&this.qb.write(this.qb.size-2,1),b++);var c=this.ta;this.jb.write(this.jb.size-
1,this.ta+b);this.jo(c+b);this.qb.write(this.jb.size-1,0);this.ng&&(this.Iu(c,this.np),this.ng=!1)};c.prototype.wj=function(a,b){this.iv();this.ic(this.ta-1,a,b)};c.prototype.Lm=function(a){this.iv();this.ic(this.ta-1,a)};c.prototype.lineTo=function(a){this.iv();this.Iu(this.ta-1,a)};c.prototype.ro=function(){var a;this.Su();void 0===a&&(this.ng=!1,a=this.ea()-1);var b=this.qb.read(a);this.qb.write(a,b|1);null!=this.Fe&&(a=this.Dc(a)-1,this.Fe.write(a,1),this.li.write(a,-1))};c.$i=function(a){return c.Id[a]};
c.prototype.vc=function(a){return 0!=(this.qb.read(a)&1)};c.prototype.Oo=function(a){if(this.vc(a))return!0;var b=this.Ea(a);a=this.Dc(a)-1;if(b>a)return!1;b=this.Fa(b);a=this.Fa(a);return b.ub(a)};c.prototype.yq=function(a){return 0!=(this.qb.read(a)&2)};c.prototype.Bc=function(b,c){this.Ik(b.description);if(322==b.D()){var d=new a.Va;if(c||this.s())b.En(d),this.df(d);b.Bn(d);this.lineTo(d)}else throw a.g.wa();};c.prototype.ws=function(a){var b=0==this.ta;this.Uy(a.v,a.C);this.wj(a.v,a.G);this.wj(a.B,
a.G);this.wj(a.B,a.C);this.ro();this.ng=!1;b&&this.yf(256,!1)};c.prototype.Wc=function(b,c){if(!b.s()){for(var d=0==this.ta,e=new a.Va(this.description),f=0;4>f;f++)b.uf(c?4-f-1:f,e),0==f?this.df(e):this.lineTo(e);this.ro();this.ng=!1;d&&!c&&this.yf(256,!1)}};c.prototype.add=function(a,b){for(var c=0;c<a.ea();c++)this.Zj(a,c,!b)};c.prototype.Zj=function(a,b,c){this.Cf(-1,a,b,c)};c.prototype.lo=function(){this.Sw()};c.prototype.ys=function(b,c,d,e,f){f||0!=this.ea()||(f=!0);0>c&&(c=b.ea()-1);if(c>=
b.ea()||0>d||0>e||e>b.ct(c))throw a.g.ra("index out of bounds");if(0!=e){var h=b.vc(c)&&d+e==b.ct(c);if(!h||1!=e){this.ng=!1;this.Ik(b.description);d=b.Ea(c)+d+1;f&&(e++,d--);h&&e--;h=this.ta;this.jo(this.ta+e);this.kc();if(f){if(0==e)return;this.jb.add(this.ta);f=b.qb.read(c);f&=-5;this.Yf&&(f|=1);this.qb.write(this.qb.size-1,f);this.qb.add(0)}else this.jb.write(this.qb.size-1,this.ta);f=0;for(var q=this.description.Aa;f<q;f++){var g=this.description.Hd(f),n=a.pa.Wa(g),p=b.description.zf(g);0>p||
null==b.Ba[p]?this.Ba[f].ul(n*h,a.pa.ue(g),e*n,n*h):this.Ba[f].nk(n*h,b.Ba[p],n*d,e*n,!0,n,n*h)}if(this.Hm())throw a.g.wa();if(b.yq(c))throw a.g.wa();this.ce(1993)}}};c.prototype.Cr=function(b){this.kc();var c=this.ea();0>b&&(b=c-1);if(b>=c)throw a.g.N();for(var d=this.Ea(b),e=this.Ha(b),f=0,h=this.description.Aa;f<h;f++)if(null!=this.Ba[f]){var q=a.pa.Wa(this.description.Fd(f));this.Ba[f].oj(q*d,q*e,q*this.ta)}for(d=b+1;d<=c;d++)f=this.jb.read(d),this.jb.write(d-1,f-e);if(null==this.qb)for(d=b+1;d<=
c;d++)b=this.qb.read(d),this.qb.write(d-1,b);this.jb.resize(c);this.qb.resize(c);this.ta-=e;this.rg-=e;this.ce(1993)};c.prototype.Cf=function(b,c,d,e){if(c==this)throw a.g.N();if(d>=c.ea())throw a.g.N();var f=this.ea();if(b>f)throw a.g.N();0>b&&(b=f);0>d&&(d=c.ea()-1);this.ng=!1;this.Ik(c.description);c.kc();var h=c.Ea(d),q=c.Ha(d),g=this.ta,n=c.vc(d)&&!e?1:0;this.jo(this.ta+q);this.kc();for(var p=b<f?this.Ea(b):g,m=0,s=this.description.Aa;m<s;m++){var t=this.description.Fd(m),u=c.description.zf(t),
v=a.pa.Wa(t);0<=u&&null!=c.Ba[u]?(0!=n&&this.Ba[m].nk(p*v,c.Ba[u],v*h,v,!0,v,v*g),this.Ba[m].nk((p+n)*v,c.Ba[u],v*(h+n),v*(q-n),e,v,v*(g+n))):this.Ba[m].ul(p*v,a.pa.ue(t),v*q,v*g)}this.jb.add(g+q);for(e=f;e>=b+1;e--)h=this.jb.read(e-1),this.jb.write(e,h+q);c.yq(d);this.qb.add(0);for(e=f-1;e>=b+1;e--)f=this.qb.read(e),f&=-5,this.qb.write(e+1,f);f=c.VN().read(d);f&=-5;this.Yf&&(f|=1);this.qb.write(b,f)};c.prototype.Sw=function(){var b=-1,c=this.ea();if(b>c)throw a.g.N();0>b&&(b=c);this.ng=!1;this.kc();
this.jb.add(this.ta);for(var d=c;d>=b+1;d--){var e=this.jb.read(d-1);this.jb.write(d,e+0)}this.qb.add(0);for(d=c-1;d>=b+1;d--)c=this.qb.read(d),c&=-5,this.qb.write(d+1,c);this.Yf&&this.qb.write(b,1)};c.prototype.dD=function(b,c,d){var e=-1;0>b&&(b=this.ea());if(b>this.ea()||e>this.Ha(b)||d>c.length)throw a.g.ra("index out of bounds");if(0!=d){b==this.ea()&&(this.jb.add(this.ta),this.Yf?this.qb.add(1):this.qb.add(0));0>e&&(e=this.Ha(b));this.kc();var f=this.ta;this.jo(this.ta+d);this.kc();for(var h=
0,q=this.description.Aa;h<q;h++){var g=this.description.Fd(h),n=a.pa.Wa(g);this.Ba[h].km(n*(this.Ea(b)+e+d),(f-this.Ea(b)-e)*n,this.Ba[h],n*(this.Ea(b)+e),!0,n);0==h?this.Ba[h].$p(n*(this.Ea(b)+e),d,c,0,!0):this.Ba[h].dh(a.pa.ue(g),(this.Ea(b)+e)*n,d*n)}this.Hm()&&(this.Fe.km(this.Ea(b)+e+d,f-this.Ea(b)-e,this.Fe,this.Ea(b)+e,!0,1),this.li.km(this.Ea(b)+e+d,f-this.Ea(b)-e,this.li,this.Ea(b)+e,!0,1),this.Fe.dh(1,this.Ea(b)+e,d),this.li.dh(-1,this.Ea(b)+e,d));b+=1;for(c=this.ea();b<=c;b++)this.jb.write(b,
this.jb.read(b)+d)}};c.prototype.kf=function(b,c,d){var e=this.ea();0>b&&(b=this.ea());if(b>=e||c>this.Ha(b))throw a.g.ra("index out of bounds");b==this.ea()&&(this.jb.add(this.ta),this.Yf?this.qb.add(1):this.qb.add(0));0>c&&(c=this.Ha(b));var f=this.ta;this.jo(this.ta+1);this.kc();var h=this.Ea(b);this.Ba[0].lg(2*(h+c),d,2*f);d=1;for(var q=this.description.Aa;d<q;d++){var g=this.description.Fd(d),n=a.pa.Wa(g);this.Ba[d].ul(n*(h+c),a.pa.ue(g),n,n*f)}for(b+=1;b<=e;b++)this.jb.write(b,this.jb.read(b)+
1)};c.prototype.eF=function(b,c){var d=this.ea();0>b&&(b=d-1);if(b>=d||c>=this.Ha(b))throw a.g.ra("index out of bounds");this.kc();var e=this.Ea(b);0>c&&(c=this.Ha(b)-1);for(var e=e+c,f=0,h=this.description.Aa;f<h;f++)if(null!=this.Ba[f]){var q=a.pa.Wa(this.description.Fd(f));this.Ba[f].oj(q*e,q,q*this.ta)}for(;d>=b+1;d--)e=this.jb.read(d),this.jb.write(d,e-1);this.ta--;this.rg--;this.ce(1993)};c.prototype.Rf=function(){return a.Hh.il(this,null)};c.prototype.Ja=function(){this.cp=0;this.ng=!1;this.td=
this.Fe=this.li=this.qb=this.jb=null;this.EA()};c.prototype.Oe=function(b){b instanceof a.Bg?this.ZA(b,-1):this.$J(b)};c.prototype.ZA=function(b,c){if(!this.s()&&!b.XO()){this.kc();var d=this.Ba[0],e=new a.b,f=new a.b,h,q,g;for(0>c?(h=this.Hm(),q=0,g=this.ta):(h=this.yq(c),q=this.Ea(c),g=this.Dc(c));q<g;q++){e.x=d.read(2*q);e.y=d.read(2*q+1);if(h){var n=this.li.read(q);if(0<=n)switch(this.Fe.read(q)&7){case 2:f.x=this.td.read(n);f.y=this.td.read(n+1);b.Zi(f,f);this.td.write(n,f.x);this.td.write(n+
1,f.y);f.x=this.td.read(n+3);f.y=this.td.read(n+4);b.Zi(f,f);this.td.write(n+3,f.x);this.td.write(n+4,f.y);break;case 4:throw a.g.wa();}}b.Zi(e,e);d.write(2*q,e.x);d.write(2*q+1,e.y)}this.ce(1993)}};c.prototype.$J=function(b){if(!this.s()){this.Ne(1);this.kc();for(var c=this.Ba[0],d=this.Ba[1],e=new a.ee,f=new a.ee,h=this.Hm(),q=0;q<this.ta;q++){e.x=c.read(2*q);e.y=c.read(2*q+1);e.z=d.read(q);if(h){var g=this.li.read(q);if(0<=g)switch(this.Fe.read(q)&7){case 2:f.x=this.td.read(g);f.y=this.td.read(g+
1);f.z=this.td.read(g+2);f=b.Qn(f);this.td.write(g,f.x);this.td.write(g+1,f.y);this.td.write(g+1,f.z);f.x=this.td.read(g+3);f.y=this.td.read(g+4);f.z=this.td.read(g+5);f=b.Qn(f);this.td.write(g+3,f.x);this.td.write(g+4,f.y);this.td.write(g+5,f.z);break;case 4:throw a.g.wa();}}e=b.Qn(e);c.write(2*q,e.x);c.write(2*q+1,e.y);d.write(q,e.z)}this.ce(1993)}};c.prototype.xv=function(){null==this.jb&&(this.jb=a.Ac.Dg(1,0),this.qb=a.Ac.to(1,0));null!=this.Fe&&(this.Fe.resize(this.rg,1),this.li.resize(this.rg,
-1))};c.prototype.eo=function(b){b.ng=!1;b.cp=this.cp;b.gp=this.gp;null!=this.jb?b.jb=a.ga.lj(this.jb):b.jb=null;null!=this.qb?b.qb=a.Wk.lj(this.qb):b.qb=null;null!=this.li?b.li=a.ga.lj(this.li):b.li=null;null!=this.Fe?b.Fe=a.Wk.lj(this.Fe):b.Fe=null;null!=this.td?b.td=a.qd.lj(this.td):b.td=null;b.bp=this.bp;b.ap=this.ap;this.gj(1024)?b.Uh=null:b.Uh=this.Uh};c.prototype.$b=function(){if(!this.gj(512))return this.bp;for(var b=this.Ca(),c=new a.av(0);b.kb();)for(;b.La();)c.add(b.ia().$b());this.bp=
c.rl();this.yf(512,!1);return c.rl()};c.prototype.lc=function(a){if(a==this)return!0;if(!(a instanceof c&&b.prototype.lc.call(this,a)))return!1;var d=this.ea();return d!=a.ea()||null!=this.jb&&!this.jb.lc(a.jb,0,d+1)||this.gp!=a.gp||null!=this.qb&&!this.qb.lc(a.qb,0,d)?!1:b.prototype.lc.call(this,a)};c.prototype.Ca=function(){return new a.GI(this)};c.prototype.wv=function(a){b.prototype.wv.call(this,a);if(this.Hm())for(a=this.Ca();a.kb();)for(;a.La();)break};c.prototype.tm=function(a,c){b.prototype.tm.call(this,
a,c);if(this.Hm())for(var d=this.Ca();d.kb();)for(;d.La();)break};c.prototype.qv=function(){null==this.jb||0==this.jb.size?this.ta=0:this.ta=this.jb.read(this.jb.size-1)};c.prototype.Mh=function(){if(!this.Yf)return 0;this.ts();return this.ap};c.prototype.qt=function(a){if(!this.Yf)return!1;if(!this.gj(8))return 0!=(this.qb.read(a)&4);this.ts();return 0<this.Uh.read(a)};c.prototype.oo=function(a){if(!this.Yf)return 0;this.ts();return this.Uh.read(a)};c.prototype.ts=function(){if(this.gj(1024)){var b=
this.ea();null==this.Uh?this.Uh=new a.qd(b):this.Uh.size!=b&&this.Uh.resize(b);for(var b=new a.av(0),c=new a.av(0),d=new a.b,e=0,f=this.Ca();f.kb();){c.reset();for(this.w(this.Ea(f.Qa),d);f.La();)c.add(f.ia().kv(d.x,d.y));b.add(c.rl());var h=e++;this.Uh.write(h,c.rl())}this.ap=b.rl();this.yf(1024,!1)}};c.prototype.hl=function(){if(this.gj(8)){this.ts();var b=this.ea();if(null==this.qb||this.qb.size<b)this.qb=a.Ac.to(b+1);for(var c=1,d=0;d<b;d++){var e=this.Uh.read(d);0==d&&(c=0<e?1:-1);0<e*c?this.qb.xy(d,
4):this.qb.BB(d,4)}this.yf(8,!1)}};c.prototype.Ew=function(b){var c=this.Qa,d=this.ea();if(0<=c&&c<d){if(b<this.Dc(c)){if(b>=this.Ea(c))return c;c--}else c++;if(0<=c&&c<d&&b>=this.Ea(c)&&b<this.Dc(c))return this.Qa=c}if(5>d){for(c=0;c<d;c++)if(b<this.Dc(c))return this.Qa=c;throw a.g.ra("corrupted geometry");}c=0;for(--d;d>c;){var e=c+(d-c>>1),f=this.Ea(e);if(b<f)d=e-1;else if(c=this.Dc(e),b>=c)c=e+1;else return this.Qa=e}return this.Qa=c};c.prototype.HN=function(b){var c=this.mc(0);this.WN();var d=
this.Dc(b),e=this.Ea(b);b=-1;var f=new a.b,h=new a.b;f.y=-Infinity;f.x=-Infinity;for(e+=0;e<d;e++)c.ec(2*e,h),-1==f.compare(h)&&(b=e,f.J(h));return b};c.prototype.Iw=function(){var a=this.F();if(!this.Yf)for(var a=a-this.ea(),b=0,c=this.ea();b<c;b++)this.vc(b)&&a++;return a};c.prototype.ct=function(a){var b=this.Ha(a);this.vc(a)||b--;return b};c.prototype.Pa=function(){return new c(this.Yf,this.description)};c.prototype.fb=function(){return this.Yf?2:1};c.prototype.D=function(){return this.Yf?1736:
1607};c.prototype.WN=function(){this.Su()};c.prototype.OF=function(a){this.jb=a;this.ce(16777215)};c.prototype.VN=function(){this.Su();return this.qb};c.prototype.NF=function(a){this.qb=a;this.ce(16777215)};c.prototype.ea=function(){return null!=this.jb?this.jb.size-1:0};c.prototype.Dc=function(a){return this.jb.read(a+1)};c.prototype.Ha=function(a){return this.jb.read(a+1)-this.jb.read(a)};c.prototype.Ea=function(a){return this.jb.read(a)};c.prototype.jv=function(b,c){null==this.pb&&(this.pb=new a.Wj);
var d=a.dA.jR(c),e=this.pb.hi;if(null!=e)if(e.Sx<b||d>e.cO())this.pb.uv(null);else return!0;e=a.dA.create(this,b,d);this.pb.uv(e);return!0};c.prototype.hc=function(){var a=b.prototype.hc.call(this);if(!this.sc()){var c=this.ea();null!=this.jb&&this.jb.jj(a,0,c+1);null!=this.qb&&this.qb.jj(a,0,c)}return a};c.prototype.NC=function(a){return null!=this.Fe?this.Fe.read(a):1};c.prototype.cc=function(b,c,d){var e=this.Ew(b);if(b==this.Dc(e)-1&&!this.vc(e))throw a.g.ra("index out of bounds");this.kc();var f=
this.Fe,h=1;null!=f&&(h=f.read(b)&7);switch(h){case 1:c.mq();break;case 2:throw a.g.wa();case 4:throw a.g.wa();default:throw a.g.wa();}c=c.get();d?c.Qf(a.Od.Tf()):c.Qf(this.description);e=b==this.Dc(e)-1&&this.vc(e)?this.Ea(e):b+1;f=new a.b;this.w(b,f);c.ed(f);this.w(e,f);c.vd(f);if(!d){d=1;for(f=this.description.Aa;d<f;d++)for(var h=this.description.Fd(d),q=a.pa.Wa(h),g=0;g<q;g++){var n=this.ld(h,b,g);c.My(h,g,n);n=this.ld(h,e,g);c.Cy(h,g,n)}}};c.prototype.Ti=function(b,c){if(b>=this.ea())throw a.g.N();
if(this.s())c.Ja();else{if(this.yq(b))throw a.g.ra("not implemented");var d=this.mc(0),e=new a.b,f=new a.i;f.Ja();for(var h=this.Ea(b),q=this.Dc(b);h<q;h++)d.ec(2*h,e),f.Db(e);c.K(f)}};c.prototype.hR=function(b,c){if(b>=this.ea())throw a.g.N();if(this.s())c.Ja();else{if(this.yq(b))throw a.g.ra("not implemented");var d=this.mc(0),e=new a.b,f=new a.i;f.Ja();for(var h=this.Ea(b),q=this.Dc(b);h<q;h++)d.ec(2*h,e),f.Db(e);c.K(f)}};c.prototype.dj=function(b){null==this.pb&&(this.pb=new a.Wj);if(0==b||16>
this.F())return!1;b=a.Ia.nB(this);this.pb.GA(b);return!0};c.prototype.jJ=function(){null==this.pb&&(this.pb=new a.Wj);if(null!=this.pb.nn)return!0;this.pb.HA(null);var b=a.Ia.CK(this);this.pb.HA(b);return!0};c.prototype.Pp=function(a){this.gp=a};c.prototype.Cm=function(){return this.gp};c.Id=[0,0,6,0,8,0];return c}(a.Wr);a.al=b})(z||(z={}));(function(a){var b=function(b){function c(d){b.call(this);if(void 0!==d){if(null==d)throw a.g.N();this.description=d}else this.description=a.Od.Tf();this.ta=0}
C(c,b);c.prototype.Pa=function(){return new c(this.description)};c.prototype.add=function(a){this.resize(this.ta+1);this.bh(this.ta-1,a)};c.prototype.zs=function(b,c){this.resize(this.ta+1);var d=new a.b;d.ma(b,c);this.ic(this.ta-1,d)};c.prototype.Pd=function(b,c,d){d=0>d?b.F():d;if(0>c||c>b.F()||d<c)throw a.g.N();if(c!=d){this.Ik(b.description);d-=c;var e=this.ta;this.resize(this.ta+d);this.kc();for(var f=0,h=b.description.Aa;f<h;f++){var q=b.description.Fd(f),g=a.pa.Wa(q),n=this.mc(q),q=b.mc(q);
n.nk(e*g,q,c*g,d*g,!0,1,e*g)}}};c.prototype.eF=function(b){if(0>b||b>=this.F())throw a.g.ra("index out of bounds");this.kc();for(var c=0,d=this.description.Aa;c<d;c++)if(null!=this.Ba[c]){var e=a.pa.Wa(this.description.Fd(c));this.Ba[c].oj(e*b,e,e*this.ta)}this.ta--;this.rg--;this.ce(1993)};c.prototype.resize=function(a){this.jo(a)};c.prototype.eo=function(){};c.prototype.Ja=function(){b.prototype.EA.call(this)};c.prototype.Oe=function(b){if(b instanceof a.Bg){if(!this.s()){this.kc();for(var c=this.Ba[0],
d=new a.b,e=0;e<this.ta;e++)d.x=c.read(2*e),d.y=c.read(2*e+1),b.Zi(d,d),c.write(2*e,d.x),c.write(2*e+1,d.y);this.ce(1993)}}else if(!this.s()){this.kc();this.Ne(1);this.kc();for(var c=this.Ba[0],d=this.Ba[1],f=new a.ee,e=0;e<this.ta;e++){f.x=c.read(2*e);f.y=c.read(2*e+1);f.z=d.read(e);var h=b.Qn(f);c.write(2*e,h.x);c.write(2*e+1,h.y);d.write(e,h.z)}this.ce(1993)}};c.prototype.fb=function(){return 0};c.prototype.D=function(){return 550};c.prototype.Mh=function(){return 0};c.prototype.$b=function(){return 0};
c.prototype.lc=function(a){return a==this?!0:a instanceof c?b.prototype.lc.call(this,a):!1};c.prototype.fR=function(b,c){var d=this.ta,d=Math.min(d,c+1E3);if(0>c||c>=this.ta||d<c||1E3!=b.length)throw a.g.N();var e=this.mc(0),f=d-c,h=[];e.Hp(2*c,2*f,h,0,!0);for(e=0;e<f;e++)b[e]=a.b.Oa(h[2*e],h[2*e+1]);return d};c.prototype.qv=function(){};c.prototype.xv=function(){};c.prototype.jv=function(){return!1};c.prototype.dj=function(){return!1};c.prototype.Rf=function(){return null};return c}(a.Wr);a.pe=b})(z||
(z={}));(function(a){(function(a){a[a.NotDetermined=0]="NotDetermined";a[a.Structure=1]="Structure";a[a.DegenerateSegments=2]="DegenerateSegments";a[a.Clustering=3]="Clustering";a[a.Cracking=4]="Cracking";a[a.CrossOver=5]="CrossOver";a[a.RingOrientation=6]="RingOrientation";a[a.RingOrder=7]="RingOrder";a[a.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency";a[a.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency";a[a.OGCDisconnectedInterior=10]="OGCDisconnectedInterior"})(a.NH||(a.NH={}));var b=function(){function a(b,
c,d){void 0===b?(this.yh=0,this.Gk=this.Fk=-1):(this.yh=b,this.Fk=c,this.Gk=d)}a.prototype.aq=function(a){this.yh=a.yh;this.Fk=a.Fk;this.Gk=a.Gk};return a}();a.wd=b})(z||(z={}));(function(a){var b=function(){function b(){}b.WT=function(b){if(!1===b)throw a.g.PG();};b.bG=function(a){return isNaN(a)?NaN:0===a?a:0<a?1:-1};b.Lh=function(a,b){void 0===b&&(b=0);for(var c=[],d=0;d<a;d++)c[d]=b;return c};b.Ps=function(a,b){var c,d;void 0===c&&(c=0);for(void 0===d&&(d=a.length-1);c<=d;c++)a[c]=b};b.Kr=function(a,
b,c){return a<b?b:a>c?c:a};b.mU=function(){return 4};b.kg=function(a,b){var c=5381;void 0!==b?c=(b<<5)+b+(a&255):c=(c<<5)+c+(a&255);c=(c<<5)+c+(a>>8&255);c=(c<<5)+c+(a>>16&255);return(c<<5)+c+(a>>24&255)&2147483647};b.Rh=function(){throw Error("Not Implemented");};b.iU=function(){return-Infinity};b.kU=function(){return Infinity};b.bU=function(){return 2147483647};b.QT=function(){return 2.220446049250313E-16};b.ST=function(){return 1.7976931348623157E308};b.$x=function(a){return b.JH(a)+12345&2147483647};
b.FD=function(a){var c,d=a%b.gv|0,e=a/b.gv|0;if(0===(c=32))return a;32>c?(a=d>>>c|e<<32-c,c=e>>c):(a=e>>c-32,c=0<=e?0:-1);return c*b.gv+(a>>>0)};b.JH=function(a){a|=0;return(1103495168*a|0)+(20077*a|0)|0};b.truncate=function(a){return 0>a?-1*Math.floor(Math.abs(a)):Math.floor(a)};b.aH=Math.pow(2,53)-1;b.UT=-b.aH;b.pF=65536;b.zU=16777216;b.gv=b.pF*b.pF;return b}();a.I=b})(z||(z={}));(function(a){(function(a){a[a.Project=0]="Project";a[a.Union=1]="Union";a[a.Difference=2]="Difference";a[a.Proximity2D=
3]="Proximity2D";a[a.Relate=4]="Relate";a[a.Equals=5]="Equals";a[a.Disjoint=6]="Disjoint";a[a.Intersects=7]="Intersects";a[a.Within=8]="Within";a[a.Contains=9]="Contains";a[a.Crosses=10]="Crosses";a[a.Touches=11]="Touches";a[a.Overlaps=12]="Overlaps";a[a.Buffer=13]="Buffer";a[a.Distance=14]="Distance";a[a.Intersection=15]="Intersection";a[a.Clip=16]="Clip";a[a.Cut=17]="Cut";a[a.DensifyByLength=18]="DensifyByLength";a[a.DensifyByAngle=19]="DensifyByAngle";a[a.LabelPoint=20]="LabelPoint";a[a.GeodesicBuffer=
21]="GeodesicBuffer";a[a.GeodeticDensifyByLength=22]="GeodeticDensifyByLength";a[a.ShapePreservingDensify=23]="ShapePreservingDensify";a[a.GeodeticLength=24]="GeodeticLength";a[a.GeodeticArea=25]="GeodeticArea";a[a.Simplify=26]="Simplify";a[a.SimplifyOGC=27]="SimplifyOGC";a[a.Offset=28]="Offset";a[a.Generalize=29]="Generalize";a[a.SymmetricDifference=30]="SymmetricDifference";a[a.ConvexHull=31]="ConvexHull";a[a.Boundary=32]="Boundary";a[a.SimpleRelation=33]="SimpleRelation"})(a.iI||(a.iI={}));var b=
function(){function b(){}b.prototype.D=function(){return null};b.NT=function(b){a.T.Th(b.D())&&(b=b.pb,null!=b&&(b.uv(null),b.GA(null)))};return b}();a.Me=b})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.prototype.D=function(){return 13};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,d,e,f){return b instanceof a.T?(f=new a.Pc(b),this.$(f,c,[d],!1,e).next()):!0===e?(d=new a.Pz(b,c,d,!1,f),a.wi.local().$(d,c,f)):new a.Pz(b,
c,d,!1,f)};c.V=null;return c}(a.Me);a.Oz=b})(z||(z={}));(function(a){var b=function(){function b(c,d,e,f,h){this.ua=-1;this.ne=c;this.fx=d;this.Oq=e;this.BP=new a.i;this.BP.Ja();this.Vm=-1;this.Yb=h}b.prototype.next=function(){for(var a;null!=(a=this.ne.next());)return this.ua=this.ne.ya(),this.Vm+1<this.Oq.length&&this.Vm++,this.buffer(a,this.Oq[this.Vm]);return null};b.prototype.ya=function(){return this.ua};b.prototype.buffer=function(b,c){return a.UG.buffer(b,c,this.fx,NaN,96,this.Yb)};return b}();
a.Pz=b})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.prototype.D=function(){return 16};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,d,e){return b instanceof a.T?(b=new a.Pc(b),this.$(b,c,d,e).next()):new a.TH(b,c,d,e)};c.V=null;return c}(a.Me);a.SH=b})(z||(z={}));(function(a){var b=function(){function b(c,d,e){this.ua=-1;if(null==c)throw a.g.N();this.R=d;this.wk=c;this.ka=a.Ia.zd(e,d,!1)}b.prototype.next=function(){var b;
return null!=(b=this.wk.next())?(this.ua=this.wk.ya(),a.Ed.clip(b,this.R,this.ka,0)):null};b.prototype.ya=function(){return this.ua};return b}();a.TH=b})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.prototype.D=function(){return 31};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,d){return b instanceof a.T?a.Rz.qB(b):new a.Rz(c,b,d)};c.V=null;return c}(a.Me);a.Qz=b})(z||(z={}));(function(a){var b=function(){function b(c,
d,e){this.cE=new a.Tr;this.ua=-1;if(null==d)throw a.g.N();this.zP=c;this.Ec=!1;this.wk=d;this.Yb=e}b.prototype.next=function(){if(this.zP){if(!this.Ec){var a=this.GK(this.wk);this.Ec=!0;return a}return null}if(!this.Ec){a=this.wk.next();if(null!=a)return this.ua=this.wk.ya(),b.qB(a);this.Ec=!0}return null};b.prototype.ya=function(){return this.ua};b.prototype.GK=function(a){for(var b;null!=(b=a.next());)this.cE.Eb(b);return this.cE.sN()};b.qB=function(c){if(b.Gh(c))return c;var d=c.D();if(a.al.Lc(d))return d=
new a.Xa(c.description),d.Bc(c,!0),d;if(550==d&&2==c.F()){var e=new a.Va,d=new a.Xa(c.description);c.Sd(0,e);d.df(e);c.Sd(1,e);d.lineTo(e);return d}return a.Tr.wL(c)};b.Gh=function(b){if(b.s())return!0;var c=b.D();return 33==c||197==c?!0:a.al.Lc(c)?!1:550==c?1==b.F()?!0:!1:1607==c?1==b.ea()&&2>=b.F()?!0:!1:1!=b.ea()?!1:2>=b.F()?!0:a.Tr.sD(b,0)};return b}();a.Rz=b})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.prototype.D=function(){return 17};c.local=function(){null===
c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,d,e,f){return new a.VH(b,c,d,e,f)};c.V=null;return c}(a.Me);a.UH=b})(z||(z={}));(function(a){var b=function(){function b(c,d,e,f,h){this.Ef=null;if(null==d||null==e)throw a.g.ra("invalid argument");this.xP=c;this.rx=d;this.RD=e;c=a.Ia.$s(d,e);this.ka=a.Ia.zd(f,c,!0);this.QD=-1;this.oe=h}b.prototype.ya=function(){return 0};b.prototype.next=function(){this.gN();return++this.QD<this.Ef.length?this.Ef[this.QD]:null};b.prototype.gN=function(){if(null==
this.Ef)switch(this.Ef=[],this.rx.D()){case 1607:this.iN();break;case 1736:this.hN()}};b.prototype.iN=function(){var b=new a.Xa,c=new a.Xa,d=new a.Xa;this.Ef.push(b);this.Ef.push(c);var e=[];a.$G.YG(this.xP,this.rx,this.RD,this.ka,e,this.oe);for(var f=0;f<e.length;f++){var h=e[f];0==h.cu?b.add(h.U,!1):1==h.cu||2==h.cu?c.add(h.U,!1):3==h.cu?this.Ef.push(h.U):d.add(h.U,!1)}d.s()||b.s()&&c.s()&&!(3<=this.Ef.length)||this.Ef.push(d);b.s()&&c.s()&&3>this.Ef.length&&(this.Ef.length=0)};b.prototype.hN=function(){var b=
new a.ga(0),c=new a.fd,d=c.RB(),e=c.Eb(this.rx),f=c.Eb(this.RD),h=new a.Of;try{h.Np(c,this.ka,this.oe);h.xm(d,e,f,b);var g=c.hf(e),n=new a.Ka,p=new a.Ka;this.Ef.length=0;this.Ef.push(n);this.Ef.push(p);for(e=0;e<b.size;e++){var m,s=new a.fd,t=s.Eb(g),u=s.Eb(c.hf(b.get(e)));h.Mp(s,this.oe);var v=h.mt(t,u);m=s.hf(v);if(!m.s()){var w=c.yC(b.get(e),d);2==w?n.add(m,!1):1==w?p.add(m,!1):this.Ef.push(m);var x=new a.fd,t=x.Eb(g),u=x.Eb(c.hf(b.get(e)));h.Mp(x,this.oe);g=x.hf(h.ll(t,u))}}!g.s()&&0<b.size&&
this.Ef.push(g);n.s()&&p.s()&&(this.Ef.length=0)}finally{h.xg()}};return b}();a.VH=b})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.prototype.D=function(){return 18};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,d){if(b instanceof a.T)return b=new a.Pc(b),this.$(b,c,d).next();if(0>=c)throw a.g.N();return new a.XH(b,c,d)};c.V=null;return c}(a.Me);a.WH=b})(z||(z={}));(function(a){var b=function(){function b(a,c){this.ua=
-1;this.ne=a;this.$q=c}b.prototype.ya=function(){return this.ua};b.prototype.next=function(){var a;return null!=(a=this.ne.next())?(this.ua=this.ne.ya(),this.hM(a)):null};b.prototype.hM=function(b){if(b.s()||1>b.fb())return b;var c=b.D();if(1736==c||1607==c)return this.Xv(b);if(a.T.Lc(c))return this.jM(b);if(197==c)return this.iM(b);throw a.g.wa();};b.prototype.jM=function(b){if(b.$b()<=this.$q)return b;var c=new a.Xa(b.description);c.Bc(b,!0);return this.Xv(c)};b.prototype.iM=function(b){var c=new a.Ka(b.description);
c.Wc(b,!1);var d=new a.i;b.o(d);b=d.ba();return d.aa()<=this.$q&&b<=this.$q?c:this.Xv(c)};b.prototype.Xv=function(b){for(var c=b.Pa(),d=b.Ca();d.kb();)for(var e=!0;d.La();){var f=d.ia();if(322!=f.D())throw a.g.ra("not implemented");var h=d.lD(),g=f.$b();if(g>this.$q){var n=Math.ceil(g/this.$q),g=new a.Va(b.description);e&&(f.En(g),c.df(g));for(var p=e=1/n,m=0,n=n-1;m<n;m++)f.uu(p,g),c.lineTo(g),p+=e;h?c.ro():(f.Bn(g),c.lineTo(g))}else h?c.ro():c.Bc(f,e);e=!1}return c};return b}();a.XH=b})(z||(z={}));
(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.D=function(){return 2};c.prototype.$=function(b,c,d,e){return b instanceof a.T?(b=new a.Pc(b),c=new a.Pc(c),this.$(b,c,d,e).next()):new a.YH(b,c,d,e)};c.ll=function(b,d,e,f){if(b.s()||d.s())return b;var h=b.fb(),g=d.fb();if(h>g)return b;var n=b.D(),p=d.D(),m=new a.i,s=new a.i,t=new a.i;b.o(m);d.o(s);t.K(m);t.Db(s);var t=a.Ia.zd(e,t,!1),u=1.00001*t*Math.sqrt(2),
v=new a.i;v.K(m);v.P(u,u);if(!v.jc(s))return b;if(1==h&&2==g)return c.UI(b,d,p,e,f);if(33==n)switch(a.al.Lc(p)?(e=new a.Xa(d.description),e.Bc(d,!0)):e=d,p){case 1736:return c.kP(b,e,t);case 1607:return c.nP(b,e,t);case 550:return c.dN(b,e,t);case 197:return c.FM(b,e,t);case 33:return c.rO(b,e,t);default:throw a.g.N();}else if(550==n)switch(p){case 1736:return c.ZI(b,d,t);case 197:return c.TI(b,d,t);case 33:return c.WI(b,d,t)}return a.Of.ll(b,d,e,f)};c.kP=function(b,c,d){return 0==a.gd.uD(c,b,d)?
b:b.Pa()};c.nP=function(b,c,d){var e=b.w();c=c.Ca();for(var f=1.00001*d*Math.sqrt(2),h=f*f,q=new a.i;c.kb();)for(;c.La();){var g=c.ia();g.o(q);q.P(f,f);if(q.contains(e)){if(g.Eq(e,d))return b.Pa();var n=g.Mb();if(a.b.Zb(e,n)<=h)return b.Pa();n=g.oc();if(a.b.Zb(e,n)<=h)return b.Pa()}}return b};c.dN=function(b,c,d){var e=c.mc(0);c=c.F();var f=b.w(),h=new a.b;d=1.00001*d*Math.sqrt(2);d*=d;for(var q=0;q<c;q++)if(e.ec(2*q,h),a.b.Zb(h,f)<=d)return b.Pa();return b};c.FM=function(b,c,d){var e=new a.i;c.o(e);
e.P(d,d);c=b.w();return e.contains(c)?b.Pa():b};c.rO=function(b,c,d){d=1.00001*d*Math.sqrt(2);d*=d;var e=b.w();c=c.w();return a.b.Zb(e,c)<=d?b.Pa():b};c.ZI=function(b,c,d){var e=new a.i;c.o(e);e.P(d,d);for(var f=b.F(),h=!1,q=[],g=0;g<f;g++)q[g]=!1;for(var n=new a.b,g=0;g<f;g++)b.w(g,n),e.contains(n)&&0!=a.gd.he(c,n,d)&&(h=!0,q[g]=!0);if(!h)return b;c=b.Pa();for(g=0;g<f;g++)q[g]||c.Pd(b,g,g+1);return c};c.TI=function(b,c,d){var e=new a.i;c.o(e);e.P(d,d);c=b.F();var f=!1;d=[];for(var h=0;h<c;h++)d[h]=
!1;for(var q=new a.b,h=0;h<c;h++)b.w(h,q),e.contains(q)&&(f=!0,d[h]=!0);if(!f)return b;e=b.Pa();for(h=0;h<c;h++)d[h]||e.Pd(b,h,h+1);return e};c.WI=function(b,c,d){var e=b.mc(0),f=b.F(),h=c.w(),q=new a.b,g=!1;c=[];for(var n=0;n<f;n++)c[n]=!1;n=1.00001*d*Math.sqrt(2);d=n*n;for(n=0;n<f;n++)e.ec(2*n,q),a.b.Zb(q,h)<=d&&(g=!0,c[n]=!0);if(!g)return b;e=b.Pa();for(n=0;n<f;n++)c[n]||e.Pd(b,n,n+1);return e};c.UI=function(b,c,d,e,f){var h=new a.Vj;b.Fp(h);var q=new a.i;c.o(q);h.Db(q);h.P(0.1*h.aa(),0.1*h.ba());
q=new a.Ka;q.Wc(h,!1);1736==d?q.add(c,!0):q.Wc(c,!0);return a.$r.local().$(b,q,e,f)};c.V=null;return c}(a.Me);a.Zr=b})(z||(z={}));(function(a){var b=function(){function b(a,c,d,e){this.Fq=null==c;this.ua=-1;this.ne=a;this.fx=d;this.EP=c.next();this.Yb=e}b.prototype.next=function(){if(this.Fq)return null;var b;return null!=(b=this.ne.next())?(this.ua=this.ne.ya(),a.Zr.ll(b,this.EP,this.fx,this.Yb)):null};b.prototype.ya=function(){return this.ua};return b}();a.YH=b})(z||(z={}));(function(a){var b=function(){function b(c){this.oe=
c;this.Ii=new a.i;this.Ii.Ja();this.Ng=new a.i;this.Ng.Ja()}b.prototype.Pr=function(){var a;a=this.Ii.v;this.Ii.v=this.Ng.v;this.Ng.v=a;a=this.Ii.B;this.Ii.B=this.Ng.B;this.Ng.B=a;a=this.Ii.C;this.Ii.C=this.Ng.C;this.Ng.C=a;a=this.Ii.G;this.Ii.G=this.Ng.G;this.Ng.G=a};b.prototype.wM=function(b,c){var d=!this.Ii.jc(this.Ng);if(a.T.Kc(b.D())&&a.T.Kc(c.D())){if(b.F()>c.F())return this.gB(b,c,d);this.Pr();d=this.gB(c,b,d);this.Pr();return d}if(550==b.D()&&a.T.Kc(c.D()))return d=this.hB(c,b,d),this.Pr(),
d;if(550==c.D()&&a.T.Kc(b.D()))return this.hB(b,c,d);if(550==b.D()&&550==c.D()){if(b.F()>c.F())return this.iB(b,c);this.Pr();d=this.iB(c,b);this.Pr();return d}return 0};b.prototype.gB=function(b,c,d){var e=b.Ca(),f=c.Ca(),h=new a.i,q=new a.i,g=1.7976931348623157E308;if(!d&&this.iT(b,c,e,f))return 0;for(;e.kb();)for(;e.La();)if(b=e.ia(),b.o(h),!(h.Ou(this.Ng)>g)){for(;f.kb();)for(;f.La();)if(c=f.ia(),c.o(q),h.Ou(q)<g&&(c=b.Fb(c,d),c*=c,c<g)){if(0==c)return 0;g=c}f.Lk()}return Math.sqrt(g)};b.prototype.hB=
function(b,c,d){var e=b.Ca(),f=new a.i,h=1.7976931348623157E308,q=new a.b,g,n=c.F();for(d=!d&&1736==b.D();e.kb();)for(;e.La();){var p=e.ia();p.o(f);if(!(1<n&&f.Ou(this.Ng)>h)){for(var m=0;m<n;m++){c.w(m,q);if(d&&0!=a.gd.he(b,q,0))return 0;g=p.Gd(q,!1);q.sub(p.Kb(g));g=q.Up();if(g<h){if(0==g)return 0;h=g}}d=!1}}return Math.sqrt(h)};b.prototype.iB=function(b,c){for(var d=1.7976931348623157E308,e=new a.b,f=new a.b,h,q=b.F(),g=c.F(),n=0;n<q;n++)if(b.w(n,e),!(1<g&&this.Ng.gG(e)>d))for(var p=0;p<g;p++)if(c.w(p,
f),h=a.b.Zb(e,f),h<d){if(0==h)return 0;d=h}return Math.sqrt(d)};b.prototype.iT=function(b,c,d,e){if(1736==b.D()){for(;e.kb();)if(e.La()){var f=e.ia();if(0!=a.gd.he(b,f.oc(),0))return!0}e.Lk()}if(1736==c.D()){for(;d.kb();)if(d.La()&&(b=d.ia(),0!=a.gd.he(c,b.oc(),0)))return!0;d.Lk()}return!1};b.prototype.il=function(a,b){if(a.s()||b.s())return NaN;a.o(this.Ii);b.o(this.Ng);return this.wM(a,b)};return b}(),c=function(c){function d(){c.apply(this,arguments)}C(d,c);d.prototype.$=function(c,d,k){if(null==
c||null==d)throw a.g.N();if(c.s()||d.s())return NaN;var e,f;e=c.D();f=d.D();if(33==e){if(33==f)return a.b.Fb(c.w(),d.w());if(197==f)return k=new a.i,d.o(k),k.Fb(c.w());e=new a.pe;e.add(c);c=e}else if(197==e){if(197==f)return f=new a.i,c.o(f),k=new a.i,d.o(k),k.Fb(f);e=new a.Ka;e.Wc(c,!1);c=e}33==f?(f=new a.pe,f.add(d),d=f):197==f&&(f=new a.Ka,f.Wc(d,!1),d=f);return(new b(k)).il(c,d)};d.local=function(){null===d.V&&(d.V=new d);return d.V};d.prototype.D=function(){return 14};d.V=null;return d}(a.Me);
a.ZH=c})(z||(z={}));(function(a){var b=function(){function b(a,c,d,e){this.aE=a;this.fE=c;this.oe=e;this.HD=d}b.prototype.next=function(){var a=this.aE.next();return null==a?null:this.yz(a)};b.prototype.ya=function(){return this.aE.ya()};b.prototype.yz=function(b){var c=b.D();if(a.T.Km(c))return b;if(197==c)return c=new a.Ka(b.description),c.Wc(b,!1),this.yz(c);if(b.s())return b;if(null==b)throw a.g.wa();for(var c=b.Pa(),d=new a.yb,e=0,f=b.ea();e<f;e++)this.mH(b,e,c,d);return c};b.prototype.mH=function(b,
c,d,e){if(!(2>b.Ha(c))){var f=b.Ea(c),h=b.Dc(c)-1,g=b.mc(0),n=b.vc(c),p=new a.ga(0);p.xb(b.Ha(c)+1);var m=new a.ga(0);m.xb(b.Ha(c)+1);p.add(n?f:h);p.add(f);for(f=new a.b;1<p.size;){var s=p.tc();p.af();var t=p.tc();b.w(s,f);e.ed(f);b.w(t,f);e.vd(f);t=this.jH(e,f,g,s,t,h);0<=t?(p.add(t),p.add(s)):m.add(s)}n||m.add(p.get(0));if(m.size==p.size)d.Zj(b,c,!0);else if(2<=m.size&&(!this.HD||2!=m.size||!(n||a.b.Fb(b.Fa(m.get(0)),b.Fa(m.get(1)))<=this.fE))){c=new a.Va;e=0;for(h=m.size;e<h;e++)b.Sd(m.get(e),
c),0==e?d.df(c):d.lineTo(c);n&&(this.HD||2!=m.size||d.lineTo(c),d.ro())}}};b.prototype.jH=function(a,b,c,d,e,f){var h=e-1;e<=d&&(h=f);f=e=-1;for(d+=1;d<=h;d++){c.ec(2*d,b);var g=b.x,n=b.y;a.Kb(a.Gd(b,!1),b);b.x-=g;b.y-=n;g=b.length();g>this.fE&&g>f&&(e=d,f=g)}return e};return b}();a.$H=b})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.prototype.D=function(){return 29};c.prototype.$=function(b,c,d,e){return b instanceof a.T?(b=new a.Pc(b),this.$(b,c,d,e).next()):
new a.$H(b,c,d,e)};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.V=null;return c}(a.Me);a.Sz=b})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.prototype.D=function(){return 21};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,d,e,f,h,q,g){return b instanceof a.T?(g=new a.Pc(b),this.$(g,c,d,[e],f,h,!1,q).next()):!0===q?(d=new a.Uz(b,c,d,e,f,!1,!1,g),a.wi.local().$(d,c,g)):new a.Uz(b,c,d,e,f,!1,!1,g)};c.V=null;return c}(a.Me);
a.Tz=b})(z||(z={}));(function(a){var b=function(){function b(c,d,e,f,h,g,n,p){if(g)throw a.g.qe();if(null==d)throw a.g.N();this.ua=-1;this.Xq=c;this.cg=d;this.ke=e;this.Oq=f;this.Rm=h;this.Vm=-1;this.Yb=p;this.CP=new a.i;this.CP.Ja()}b.prototype.next=function(){for(var a;null!=(a=this.Xq.next());)return this.ua=this.Xq.ya(),this.Vm+1<this.Oq.length&&this.Vm++,this.oN(a,this.Oq[this.Vm]);return null};b.prototype.ya=function(){return this.ua};b.prototype.oN=function(b,c){return a.pH.buffer(b,this.cg,
this.ke,c,this.Rm,this.Yb)};return b}();a.Uz=b})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.prototype.D=function(){return 24};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,d){if(null==c)throw a.g.N();if(b.s()||1>b.fb())return 0;if(4==d)throw a.g.qe();var e=a.Ya.Em(c),f=a.Ya.ft(e),h=a.Ya.Ts(e),f=f*(2-f),q=e.Se().Dj,g=b.D(),n;1736==g||197==g?n=b.Rf():a.T.Lc(g)?(n=new a.Xa(b.description),n.Bc(b,!0)):n=b;if(0==e.lc(c)){if(a.Ya.Qo(c)){n=
a.gh.qo(n,c);1607==g&&n==b&&(n=a.T.Yj(b));b=new a.Nd;a.Ya.Fm(c).wu(b);for(var g=0,p=n.F();g<p;g++){var m=n.Fa(g);m.x=a.gh.pu(m.x,b);n.ic(g,m)}}b=n.Pa();n=a.gh.ZQ(c,e,n,b)?b:a.Ya.Wl(n,c,e)}return this.yM(n,d,h,f,q)};c.prototype.yM=function(b,c,d,e,f){var h=new a.ca(0),q=0;for(b=b.Ca();b.kb();)for(;b.La();){var g=b.ia(),n=g.Mb(),g=g.oc();n.scale(f);g.scale(f);a.zb.Rd(d,e,n.x,n.y,g.x,g.y,h,null,null,c);q+=h.l}return q};c.V=null;return c}(a.Me);a.cI=b})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,
arguments)}C(c,b);c.prototype.D=function(){return 18};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,d,e,f){return b instanceof a.T?(b=new a.Pc(b),this.$(b,c,d,e,f).next()):new a.bI(b,d,e,c,-1,-1,f)};c.V=null;return c}(a.Me);a.aI=b})(z||(z={}));(function(a){var b=function(){function b(c,d,e,f,h,g){if(0<g)throw a.g.qe();if(4!=e&&0<h)throw a.g.qe();if(null==d)throw a.g.N();this.ua=-1;this.Xq=c;this.cg=d;this.ke=e;this.IP=f;this.HP=h}b.prototype.next=function(){for(var a;null!=
(a=this.Xq.next());)return this.ua=this.Xq.ya(),this.hw(a);return null};b.prototype.ya=function(){return this.ua};b.prototype.hw=function(b){return a.ui.oq(b,this.cg,this.ke,this.IP,this.HP,this.Yb)};return b}();a.bI=b})(z||(z={}));(function(a){(function(a){a[a.Unknown=0]="Unknown";a[a.Contains=1]="Contains";a[a.Within=2]="Within";a[a.Equals=3]="Equals";a[a.Disjoint=4]="Disjoint";a[a.Touches=8]="Touches";a[a.Crosses=16]="Crosses";a[a.Overlaps=32]="Overlaps";a[a.NoThisRelation=64]="NoThisRelation";
a[a.Intersects=1073741824]="Intersects";a[a.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(a.xH||(a.xH={}));var b=function(){function b(){}b.lU=function(c,d,e,f){if(d.s()||c.s())return 4;var h=c.D(),g=d.D(),n;a.T.Lc(h)&&(c=n=new a.Xa(c.description),n.Bc(c,!0));a.T.Lc(g)&&(d=n=new a.Xa(d.description),n.Bc(d,!0));switch(h){case 33:switch(g){case 33:return b.sO(c,d,e);case 197:return b.Id(b.BG(d,c,e));case 550:return b.Id(b.HG(d,c,e));case 1607:return b.Id(b.Az(d,c,e,f));case 1736:return b.Id(b.pz(d,
c,e))}throw a.g.wa();case 197:switch(g){case 33:return b.BG(c,d,e);case 197:return b.fK(c,d,e);case 550:return b.Id(b.DG(d,c,e,f));case 1607:return b.Id(b.vz(d,c));case 1736:return b.Id(b.lz(d,c))}throw a.g.wa();case 550:switch(g){case 33:return b.HG(c,d,e);case 197:return b.DG(c,d,e,f);case 550:return b.FG(c,d,e,f);case 1607:return b.Id(b.xz(d,c));case 1736:return b.Id(b.nz(d,c))}throw a.g.wa();case 1607:switch(g){case 33:return b.Az(c,d,e,f);case 197:return b.vz(c,d);case 550:return b.xz(c,d);case 1607:return b.iQ(c,
d);case 1736:return b.Id(b.rz(d,c))}throw a.g.wa();case 1736:switch(g){case 33:return b.pz(c,d,e);case 197:return b.lz(c,d);case 550:return b.nz(c,d);case 1607:return b.rz(c,d);case 1736:return b.oP(c,d)}throw a.g.wa();default:throw a.g.wa();}};b.sO=function(a,c,d){a=a.w();c=c.w();return b.jz(a,c,d)};b.jz=function(a,b,c){a.sub(b);return a.Up()<=c*c?3:4};b.BG=function(c,d,e){var f=new a.i;c.o(f);c=d.w();return b.ZL(f,c,e)};b.ZL=function(a,b,c){a.P(-c,-c);if(a.contains(b))return 1;a.P(c,c);return a.contains(b)?
8:4};b.uM=function(a,b,c){return b.contains(c)?1:a.contains(c)?8:4};b.fK=function(c,d,e){var f=new a.i;c.o(f);c=new a.i;d.o(c);return b.MK(f,c,e)};b.MK=function(a,b,c){var d=0;a.contains(b)&&(d|=1);b.contains(a)&&(d|=2);if(0!=d)return d;a.P(-c,-c);b.P(-c,-c);if(a.jc(b))return d=a,d.P(c,c),d=d.contains(b)?1:0,b.P(c,c),d|=b.contains(a)?2:0,0!=d?d:32;d=a;d.P(c,c);b.P(c,c);return d.jc(b)?8:4};b.HG=function(a,c,d){c=c.w();return b.JG(a,c,d)};b.JG=function(a,c,d){for(var e=0,f=a.F();e<f;e++){var h;h=a.Fa(e);
h=b.jz(h,c,d);if(4!=h)return 0!=(h&2)&&1!=f?1:h}return 4};b.DG=function(c,d,e,f){var h=new a.i;d.o(h);return b.eN(c,h,e,f)};b.eN=function(a,c,d,e){c.P(-d,-d);c.P(d,d);for(var f=d=0,h=a.F();f<h;f++){var g;g=a.Fa(f);g=b.Id(b.uM(c,c,g));if(4!=g&&(d|=g,4==e))return 1073741824}return 0==d?4:2==d?d:32};b.FG=function(a,c,d,e){for(var f=0,h=0,g=c.F();h<g;h++){var n;n=c.Fa(h);n=b.JG(a,n,d);if(4!=n&&(f++,4==e))return 1073741824}return 0<f?f==c.F()?3==e?(n=b.FG(c,a,d,1),1==n?3:0):1:32:0};b.Az=function(a,c,d,
e){c=c.w();return b.XP(a,c,d,e)};b.GM=function(a,b){var c=null,d=a.pb;null!=d&&(c=d.hi);if(null!=c){c=c.Kk(b.x,b.y);if(0==c)return 4;if(1==c)return 1}else return-1;return 0};b.XP=function(c,d,e,f){if(0==(f&1073741839))return 64;var h=b.GM(c,d);if(0<h)return h;e*=e;for(h=c.Ca();h.kb();){var g=h.Qa;if(!c.vc(g)){var n=c.Ha(g),g=c.Ea(g);if(0==n)continue;if(a.b.Zb(c.Fa(g),d)<=e||1<n&&a.b.Zb(c.Fa(g+n-1),d)<=e)return 8}if(8!=f)for(;h.La();)if(n=h.ia(),n=n.Kb(n.Gd(d,!1)),a.b.Zb(n,d)<=e)return 0!=(f&1073741828)?
1073741824:1}return 0!=(f&1073741828)?4:64};b.vz=function(c,d){var e=new a.i;d.o(e);return b.rP(c,e)};b.rP=function(a,c){var d=b.ao(a,c);return 0<d?d:0};b.ao=function(a,b){var c;c=a.pb;if(null!=c)c=c.hi;else return-1;if(null!=c){c=c.Dn(b);if(0==c)return 4;if(1==c)return 1}else return-1;return 0};b.xz=function(c,d){var e=new a.i;d.o(e);e=b.ao(c,e);return 0<e?e:0};b.fs=function(c,d){var e=new a.i;d.o(e);e=b.ao(c,e);return 0<e?e:-1==e&&(e=new a.i,c.o(e),e=b.ao(d,e),0<e)?b.Id(e):0};b.iQ=function(a,c){var d=
b.fs(a,c);return 0<d?d:0};b.pz=function(a,c,d){c=c.w();return b.lP(a,c,d)};b.lP=function(b,c,d){b=a.gd.he(b,c,d);if(0==b)return 4;if(1==b)return 1;if(2==b)return 8;throw a.g.wa();};b.lz=function(c,d){var e=new a.i;d.o(e);return b.uO(c,e)};b.uO=function(a,c){var d=b.ao(a,c);return 0<d?d:0};b.nz=function(a,c){var d=b.fs(a,c);return 0<d?d:0};b.rz=function(a,c){var d=b.fs(a,c);return 0<d?d:0};b.oP=function(a,c){var d=b.fs(a,c);return 0<d?d:0};b.iR=function(b,c){var d=b.D(),e=c.D(),f;if(a.T.Th(d)&&(f=
b.pb,null!=f&&(f=f.hi,null!=f))){if(33==e){var h=c.w();f=f.Kk(h.x,h.y)}else h=new a.i,c.o(h),f=f.Dn(h);if(1==f)return 1;if(0==f)return 4}if(a.T.Th(e)&&(f=c.pb,null!=f&&(f=f.hi,null!=f))){33==d?(d=b.w(),f=f.Kk(d.x,d.y)):(d=new a.i,b.o(d),f=f.Dn(d));if(1==f)return 2;if(0==f)return 4}return 0};b.Id=function(a){0!=(a&1)&&(a=a&-2|2);0!=(a&2)&&(a=a&-3|1);return a};return b}();a.dI=b})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.local=function(){null===c.V&&(c.V=
new c);return c.V};c.prototype.D=function(){return 15};c.prototype.$=function(b,c,d,e,f){return b instanceof a.T?(b=new a.Pc(b),c=new a.Pc(c),this.$(b,c,d,e,f).next()):void 0===f?new a.Vz(b,c,d,e,-1):new a.Vz(b,c,d,e,f)};c.V=null;return c}(a.Me);a.$r=b})(z||(z={}));(function(a){var b=function(){function b(c,d,e,f,h){this.Fq=null==d;this.ua=-1;this.ne=c;this.cg=e;this.Ce=d.next();this.Ji=this.Ce.D();this.Yb=f;this.Xh=h;if(-1!=this.Xh&&(0>=this.Xh||7<this.Xh))throw a.g.N("bad dimension mask");}b.prototype.next=
function(){if(this.Fq)return null;var a;if(null!=this.du){a=this.du.next();if(null!=a)return a;this.du=null}for(;null!=(a=this.ne.next());){this.ua=this.ne.ya();if(-1==this.Xh)return this.Ga(a);this.du=this.PO(a);return this.du.next()}return null};b.prototype.ya=function(){return this.ua};b.prototype.Ga=function(b){var c=this.uG(b);if(null!=c)return c;var c=a.Ia.$s(this.Ce,b),d=a.Ia.zd(this.cg,c,!0),c=new a.i;this.Ce.o(c);var e=new a.i;b.o(e);c.P(2*d,2*d);c.Ga(e);c.P(100*d,100*d);d=a.Ed.clip(this.Ce,
c,0,0);b=a.Ed.clip(b,c,0,0);return a.Of.mt(b,d,this.cg,this.Yb)};b.prototype.SE=function(b,c,d){var e=0;if(0!=(c&1))null==d[0]&&(d[0]=new a.pe(b)),e++;else for(var f=0;f<d.length-1;f++)d[f]=d[f+1];if(0!=(c&2))null==d[e]&&(d[e]=new a.Xa(b)),e++;else for(f=e;f<d.length-1;f++)d[f]=d[f+1];if(0!=(c&4))null==d[e]&&(d[e]=new a.Ka(b)),e++;else for(f=e;f<d.length-1;f++)d[f]=d[f+1];if(3!=e){b=[];for(f=0;f<e;f++)b[f]=d[f];return new a.Pc(b)}return new a.Pc(d)};b.prototype.PO=function(b){var c=this.uG(b);if(null!=
c){var d=[null,null,null];d[c.fb()]=c;return this.SE(b.description,this.Xh,d)}c=a.Ia.$s(this.Ce,b);d=a.Ia.zd(this.cg,c,!0);c=new a.i;this.Ce.o(c);c.P(2*d,2*d);var e=new a.i;b.o(e);c.Ga(e);c.P(100*d,100*d);d=a.Ed.clip(this.Ce,c,0,0);c=a.Ed.clip(b,c,0,0);d=a.Of.Uw(c,d,this.cg,this.Yb);return this.SE(b.description,this.Xh,d)};b.prototype.uG=function(c){var d=a.Ia.$s(c,this.Ce),e=a.Ia.zd(this.cg,d,!1),d=c.D(),f=c.s(),h=this.Ce.s(),h=f||h;if(!h){h=new a.i;c.o(h);var g=new a.i;this.Ce.o(g);g.P(2*e,2*e);
h=!h.jc(g)}if(!h)if(g=a.dI.iR(this.Ce,c),4==g)h=!0;else{if(0!=(g&2))return this.Ce;if(0!=(g&1))return c}if(h)return e=a.T.ve(d),h=a.T.ve(this.Ji),e<h?b.V(c,f):e>h?this.kF():0==e?550==d&&33==this.Ji?this.kF():b.V(c,f):b.V(c,f);if((-1==this.Xh||4==this.Xh)&&197==d&&197==this.Ji)return e=this.Ce,d=new a.i,c.o(d),f=new a.i,e.o(f),d.Ga(f),e=new a.Vj,c.copyTo(e),e.Cu(d),e;if(197==d&&0==a.T.ve(this.Ji)||197==this.Ji&&0==a.T.ve(d))return f=197==d?c:this.Ce,c=197==d?this.Ce:c,d=new a.i,f.o(d),a.Ed.clip(c,
d,e,0);if(0==a.T.ve(d)&&0<a.T.ve(this.Ji)||0<a.T.ve(d)&&0==a.T.ve(this.Ji)){e=a.Ia.Cg(this.cg,c,!1);if(550==d||33==d)return a.Of.jD(c,this.Ce,e);if(550==this.Ji||33==this.Ji)return a.Of.jD(this.Ce,c,e);throw a.g.wa();}return-1!=this.Xh&&2!=this.Xh||1607!=d||1736!=this.Ji?-1!=this.Xh&&2!=this.Xh||1736!=d||1607!=this.Ji?null:this.rG(this.Ce,c):this.rG(c,this.Ce)};b.prototype.rG=function(b,c){var d=b,e=c,f=a.Ia.Cg(this.cg,c,!1),h=new a.i;e.o(h);var g=new a.i;d.o(g);g.P(2*f,2*f);h.Ga(g);h.P(10*f,10*f);
var d=b=a.Ed.clip(b,h,0,0),g=new a.ga(0),n=-1,p=e.pb;if(null!=p){var m=p.hi;if(null!=m){n=0;g.xb(d.F()+d.ea());for(var s=new a.i,t=d.Ca();t.kb();)for(;t.La();){t.ia().o(s);var u=m.Dn(s);1==u?g.add(1):0==u?g.add(0):(g.add(-1),n++)}}}5<c.F()&&(e=c=a.Ed.clip(c,h,0,0),p=e.pb);0>n&&(n=d.Iw());h=d.F()+e.F();if(n*e.F()>4*Math.log(h)*h)return null;h=null;n=e.Ca();null!=p&&null!=p.Ab&&(h=p.Ab);null==h&&20<e.F()&&(h=a.Ia.nB(e));for(var e=b.Pa(),p=null,m=d.Ca(),s=[0,0,0,0,0,0,0,0,0],t=new a.qd(0),u=new a.Ag,
v=-1,w=0,x=0,A=0<g.size,G=-1;m.kb();){for(var G=m.Qa,B=0,v=-1,w=0;m.La();){var z=A?a.I.truncate(g.get(x)):-1;x++;var C=m.ia();if(0>z){if(null!=h){null==p?p=h.KN(C,f):p.Fn(C,f);for(z=p.next();-1!=z;z=p.next()){n.Sb(h.da(z));for(var z=n.ia(),L=C.Ga(z,null,s,null,f),z=0;z<L;z++)t.add(s[z])}}else for(n.Lk();n.kb();)for(;n.La();){z=n.ia();L=C.Ga(z,null,s,null,f);for(z=0;z<L;z++)t.add(s[z])}if(0<t.size){t.xd(0,t.size,function(a,b){return a-b});var K=0;t.add(1);for(var L=-1,z=0,M=t.size;z<M;z++){var O=t.get(z);
if(O!=K){var N=!1;0!=K||1!=O?(C.Bi(K,O,u),K=u.get()):(K=C,N=!0);if(2<=B){e.ys(d,G,v,w,3==B);if(1!=this.UA(c,K.Mb(),f)&&1!=this.VA(c,K,f))return null;e.Bc(K,!1);B=1;w=0}else switch(L=this.VA(c,K,f),L){case 1:N?2>B?(v=m.Jb()-d.Ea(G),w=1,B=0==B?3:2):w++:(e.Bc(K,0==B),B=1);break;case 0:B=0;v=-1;w=0;break;default:return null}K=O}}}else{z=this.UA(c,C.Mb(),f);if(0>z)return null;1==z?(2>B&&(v=m.Jb()-d.Ea(G),B=0==B?3:2),w++):(v=-1,w=0)}t.clear(!1)}else 0!=z&&1==z&&(0==B?(B=3,v=m.Jb()-d.Ea(G)):1==B?(B=2,v=
m.Jb()-d.Ea(G)):w++)}2<=B&&(e.ys(d,G,v,w,3==B),v=-1)}return e};b.prototype.UA=function(b,c,d){return a.ff.xl(b,c,d)};b.prototype.VA=function(b,c,d){var e=c.Mb();c=c.oc();var f=a.ff.xl(b,e,d),h=a.ff.xl(b,c,d);if(1==f&&0==h||0==f&&1==h)return-1;if(0==f||0==h)return 0;if(1==f||1==h)return 1;f=new a.b;f.add(e,c);f.scale(0.5);b=a.ff.xl(b,f,d);return 0==b?0:1==b?1:-1};b.V=function(a,b){return b?a:a.Pa()};b.prototype.kF=function(){null==this.$D&&(this.$D=this.Ce.Pa());return this.$D};return b}();a.Vz=b})(z||
(z={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.prototype.D=function(){return 28};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,d,e,f,h,g){return b instanceof a.T?(b=new a.Pc(b),this.$(b,c,d,e,f,h,g).next()):new a.eI(b,c,d,e,f,h,g)};c.V=null;return c}(a.Me);a.Wz=b})(z||(z={}));(function(a){var b=function(){function b(a,c,d,e,f,h,g){this.ua=-1;this.ne=a;this.Pi=c;this.Da=d;this.bi=e;this.Dx=f;this.XD=h;this.oe=g}b.prototype.next=
function(){var a=this.ne.next();return null!=a?(this.ua=this.ne.ya(),this.RH(a)):null};b.prototype.ya=function(){return this.ua};b.prototype.RH=function(b){var c;c=0>=this.XD?a.Ia.Cg(this.Pi,b,!1):this.XD;return a.XG.$(b,this.Da,this.bi,this.Dx,c,this.oe)};return b}();a.eI=b})(z||(z={}));(function(a){var b=function(){function b(){}b.prototype.reset=function(){this.Pg=this.Fj=-1;this.Hq=this.Uo=!1};b.prototype.QM=function(a,b,c){for(a.Sb(b,c);a.La();){var d=a.ia(),d=d.$b();if(0!=d)return a.Jb()}for(a.Sb(b,
c);a.Ow();)if(d=a.oi(),d=d.$b(),0!=d)return a.Jb();return-1};b.prototype.RM=function(a,b){for(a.Sb(b,-1);a.Ow();)if(0!=a.oi().$b())return a.Jb();return-1};b.prototype.PM=function(a,b){a.Sb(b,-1);for(a.ia();a.La();)if(0!=a.ia().$b())return a.Jb();return-1};b.prototype.OM=function(b,c,d,e){this.Fj=this.QM(c,d,e);if(-1!=this.Fj){c.Sb(this.Fj,-1);var f=c.ia(),h=f.Kb(f.Gd(b,!1));d=a.b.Zb(h,b);e=new a.b;e.J(h);e.sub(f.Mb());h=new a.b;h.J(b);h.sub(f.Mb());this.Uo=0>e.Ai(h);this.Pg=this.PM(c,this.Fj);if(-1!=
this.Pg){c.Sb(this.Pg,-1);var f=c.ia(),g=f.Gd(b,!1),g=f.Kb(g),q=a.b.Zb(g,b);q>d?this.Pg=-1:(e.J(g),e.sub(f.Mb()),h.J(b),h.sub(f.Mb()),this.Hq=0>e.Ai(h))}-1==this.Pg&&(this.Pg=this.RM(c,this.Fj),-1!=this.Pg&&(c.Sb(this.Pg,-1),f=c.ia(),g=f.Gd(b,!1),g=f.Kb(g),q=a.b.Zb(g,b),q>d?this.Pg=-1:(e.J(g),e.sub(f.Mb()),h.J(b),h.sub(f.Mb()),this.Hq=0>e.Ai(h),b=this.Fj,this.Fj=this.Pg,this.Pg=b,b=this.Uo,this.Uo=this.Hq,this.Hq=b)))}};b.prototype.FK=function(a,b,c,d,e){c=c.Ca();this.OM(a,c,d,e);if(-1!=this.Fj&&
-1==this.Pg)return this.Uo;if(-1!=this.Fj&&-1!=this.Pg){if(this.Uo==this.Hq)return this.Uo;c.Sb(this.Fj,-1);a=c.ia().Pf(1);c.Sb(this.Pg,-1);b=c.ia().Pf(0);return 0<=a.Ai(b)?!0:!1}return b};return b}(),c=function(c){function d(){c.apply(this,arguments)}C(d,c);d.local=function(){null===d.V&&(d.V=new d);return d.V};d.prototype.D=function(){return 3};d.prototype.zw=function(b,c,d,k){void 0===k&&(k=!1);if(b.s())return new a.dl;c=c.w();var e=b,f=b.D();197==f&&(e=new a.Ka,e.Wc(b,!1),f=1736);switch(f){case 33:return this.OE(e,
c);case 550:return this.BE(e,c);case 1607:case 1736:return this.dQ(e,c,d,k);default:throw a.g.ra("not implemented");}};d.prototype.Aw=function(b,c){if(b.s())return new a.dl;var d=c.w(),k=b,e=b.D();197==e&&(k=new a.Ka,k.Wc(b,!1),e=1736);switch(e){case 33:return this.OE(k,d);case 550:case 1607:case 1736:return this.BE(k,d);default:throw a.g.ra("not implemented");}};d.prototype.Bw=function(b,c,d,k){if(0>k)throw a.g.N();if(b.s())return[];c=c.w();var e=b,f=b.D();197==f&&(e=new a.Ka,e.Wc(b,!1),f=1736);
switch(f){case 33:return this.IQ(e,c,d,k);case 550:case 1607:case 1736:return this.gQ(e,c,d,k);default:throw a.g.ra("not implemented");}};d.prototype.dQ=function(c,d,k,e){if(1736==c.D()&&k&&(k=new a.i,c.o(k),k=a.Ia.zd(null,k,!1),0!=(e?a.gd.he(c,d,0):a.gd.he(c,d,k)))){var f=new a.dl(d,0,0);e&&f.UF(!0);return f}for(var h=c.Ca(),f=new a.b,g=k=-1,q=1.7976931348623157E308,n=0;h.kb();)for(;h.La();){var p=h.ia(),p=p.Kb(p.Gd(d,!1)),m=a.b.Zb(p,d);m<q?(n=1,f=p,k=h.Jb(),g=h.Qa,q=m):m==q&&n++}f=new a.dl(f,k,
Math.sqrt(q));e&&(h.Sb(k,g),p=h.ia(),e=0>a.b.yn(d,p.Mb(),p.oc()),1<n&&(n=new b,n.reset(),e=n.FK(d,e,c,k,g)),f.UF(e));return f};d.prototype.OE=function(b,c){var d=b.w(),k=a.b.Fb(d,c);return new a.dl(d,0,k)};d.prototype.BE=function(b,c){for(var d=b.mc(0),k=b.F(),e=0,f=0,h=0,g=1.7976931348623157E308,q=0;q<k;q++){var n=new a.b;d.ec(2*q,n);var p=a.b.Zb(n,c);p<g&&(f=n.x,h=n.y,e=q,g=p)}d=new a.dl;d.tv(f,h,e,Math.sqrt(g));return d};d.prototype.IQ=function(b,c,d,k){if(0==k)return[];d*=d;b=b.w();c=a.b.Zb(b,
c);c<=d?(d=[],k=new a.dl,k.tv(b.x,b.y,0,Math.sqrt(c)),d[0]=k):d=[];return d};d.prototype.gQ=function(b,c,d,k){if(0==k)return k=[];var e=b.mc(0),f=b.F();b=[];var h=0;d*=d;for(var g=0;g<f;g++){var q=e.read(2*g),n=e.read(2*g+1),p=c.x-q,m=c.y-n,p=p*p+m*m;p<=d&&(m=new a.dl,m.tv(q,n,g,Math.sqrt(p)),h++,b.push(m))}c=b.length;b.sort(function(a,b){return a.Da<b.Da?-1:a.Da==b.Da?0:1});if(k>=c)return b.slice(0);b.length=k;return b.slice(0)};d.V=null;return d}(a.Me);a.bv=c})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,
arguments)}C(c,b);c.prototype.D=function(){return 4};c.prototype.$=function(b,c,d,e,f){return a.el.py(b,c,d,e,f)};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.V=null;return c}(a.Me);a.fI=b})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.prototype.D=function(){return 33};c.prototype.$=function(b,c,d,e,f){return 1073741824===b?!a.hd.qy(c,d,e,4,f):a.hd.qy(c,d,e,b,f)};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.V=null;return c}(a.Me);
a.bl=b})(z||(z={}));(function(a){var b=function(){function b(c,d,e,f){this.oe=f;this.yP=e;this.ua=-1;if(null==c)throw a.g.N();this.wk=c;this.Pi=d}b.prototype.next=function(){var a;return null!=(a=this.wk.next())?(this.ua=this.wk.ya(),this.Qy(a)):null};b.prototype.ya=function(){return this.ua};b.prototype.Qy=function(b){if(null==b)throw a.g.N();return a.cv.cG(b,this.Pi,this.yP,this.oe)};return b}();a.gI=b})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.prototype.D=
function(){return 26};c.prototype.$=function(b,c,d,e){return b instanceof a.T?(b=new a.Pc(b),this.$(b,c,d,e).next()):new a.gI(b,c,d,e)};c.prototype.Ro=function(b,c,d,e,f){return 0<(void 0!==e?a.cv.Ro(b,c,d,e,f):a.cv.Ro(b,c,!1,null,d))};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.V=null;return c}(a.Me);a.as=b})(z||(z={}));(function(a){var b=function(){function a(){this.hp=0}a.prototype.hS=function(a){this.hp&=-2;this.hp|=a?1:0};a.prototype.sl=function(){return 0!=(this.hp&1)};a.prototype.LC=
function(){return this.sl()?0:1};return a}();a.AT=b;var c=function(){return function(){}}(),d=function(){return function(a,b,c,d){this.x=a;this.y=b;this.Sh=c;this.yl=d}}(),k=function(){function a(b){this.me=b}a.prototype.compare=function(a,b,c){a=a.da(c);b=this.me.$e.read(2*b);a=this.me.$e.read(2*a);b-=a;return 0>b?-1:0<b?1:0};return a}(),e=function(){function a(b){this.me=b}a.prototype.compare=function(a,b,c){b=this.me.$a[b];a=this.me.$a[a.da(c)];var d=b.sl(),k=a.sl();c=b.Zd.xe(this.me.wn,0);var e=
a.Zd.xe(this.me.wn,0);c==e&&(c=Math.min(d?b.Zd.ja:b.Zd.ha,k?a.Zd.ja:a.Zd.ha),d=0.5*(c-this.me.wn)+this.me.wn,d==this.me.wn&&(d=c),c=b.Zd.xe(d,0),e=a.Zd.xe(d,0));return c<e?-1:c>e?1:0};return a}(),f=function(){function b(c,d){this.VE=new a.b;this.parent=c;this.mO=d}b.prototype.Zp=function(a,b,c){var d=this.parent,k=this.mO;c.xd(a,b,function(a,b){return d.kj(a,b,k)})};b.prototype.Mo=function(a){a=this.parent.xh.get(a);this.parent.$e.ec(2*(a>>1),this.VE);return this.VE.y+(0!=(a&1)?this.parent.Ri:-this.parent.Ri)};
return b}(),h=function(){function h(b,c,d,k,e){this.SD=b.description;this.U=b;this.sg=c;this.Ri=a.Ia.Cg(this.sg,b,!1);this.pn=a.Ia.Cg(this.sg,b,!0);this.yx=d;this.wP=this.SD.Aa;this.$a=[];this.dn=[];this.Lg=new a.$n;this.Za=new a.bj;this.Kd=new a.wd;this.GD=this.pk=e}h.prototype.Yw=function(){this.GD=!0;return(!a.T.Kc(this.U.D())||this.yB()&&this.xB(!1))&&this.OK()?a.T.Kc(this.U.D())?this.RK()?1607==this.U.D()?this.TK()?2:0:this.UK()?this.VK():0:0:2:0};h.prototype.Yy=function(b,c){var d=this.$e.read(2*
b),k=this.$e.read(2*b+1),e=this.$e.read(2*c),f=this.$e.read(2*c+1),h=!a.Sr.Vw(d,k,e,f,this.Ri*this.Ri);return h?h:0==this.U.fb()?!1:d==e&&k==f};h.prototype.yB=function(){for(var b=this.U,c=b.Yf?3:2,d=0,k=b.ea();d<k;d++)if(b.Ha(d)<c)return this.Kd=new a.wd(1,d,0),!1;return!0};h.prototype.xB=function(b){for(var c=this.U,d=c.Ca(),k=c.hasAttribute(1),c=k?a.Ia.rB(this.sg,c,!1):0;d.kb();)for(;d.La();){var e=d.ia();if(!(e.$b()>this.Ri)){if(b&&k){var f=e.gt(1,0),e=e.gt(1,0);if(Math.abs(e-f)>c)continue}this.Kd=
new a.wd(2,d.Jb(),-1);return!1}}return!0};h.prototype.OK=function(){var b=this.U,c=null;a.T.Kc(this.U.D())&&(c=this.U);var d=(this.GD||this.pk)&&null!=c,e=b.F();this.$e=b.mc(0);this.xh=new a.ga(0);this.xh.xb(2*e);this.wh=new a.ga(0);this.wh.xb(2*e);d&&(null==this.Bk&&(this.Bk=new a.ga(0)),this.Bk.xb(e));for(var h=b=0;h<e;h++)if(this.xh.add(2*h),this.xh.add(2*h+1),this.wh.add(2*h),this.wh.add(2*h+1),d){for(;h>=c.Dc(b);)b++;this.Bk.add(b)}(new a.Rr).sort(this.wh,0,2*e,new f(this,d));this.Za.clear();
this.Za.Hn(new k(this));this.Za.de(e);c=0;for(e*=2;c<e;c++)if(d=this.wh.get(c),b=this.xh.get(d),d=b>>1,0==(b&1)){b=this.Za.addElement(d,-1);h=this.Za.ge(b);if(-1!=h&&!this.Yy(this.Za.da(h),d))return this.Kd=new a.wd(3,d,this.Za.da(h)),!1;var g=this.Za.bb(b);if(-1!=g&&!this.Yy(this.Za.da(g),d))return this.Kd=new a.wd(3,d,this.Za.da(g)),!1}else if(b=this.Za.search(d,-1),h=this.Za.ge(b),g=this.Za.bb(b),this.Za.kd(b,-1),-1!=h&&-1!=g&&!this.Yy(this.Za.da(h),this.Za.da(g)))return this.Kd=new a.wd(3,this.Za.da(h),
this.Za.da(g)),!1;return!0};h.prototype.RK=function(){return 10>this.U.F()?this.PK():this.QK()};h.prototype.QK=function(){var b=new a.fd;b.Eb(this.U);var c=new a.wd;return a.Zu.DE(!1,b,this.Ri,c,this.oe)?(c.Fk=b.gb(c.Fk),c.Gk=b.gb(c.Gk),this.Kd.aq(c),!1):!0};h.prototype.PK=function(){for(var b=this.U,c=b.Ca(),b=b.Ca();c.kb();)for(;c.La();){var d=c.ia();if(!c.Jm()||!c.YO()){b.xR(c);do for(;b.La();){var k=b.ia(),k=d.fq(k,this.Ri,!0);if(0!=k)return this.Kd=new a.wd(2==k?5:4,c.Jb(),b.Jb()),!1}while(b.kb())}}return!0};
h.prototype.UK=function(){var b=this.U;this.$a.length=0;this.dn.length=0;this.Hf=b.Ca();this.Hf.NR();var c=new a.ga(0);c.xb(10);for(var d=NaN,k=0,e=0,b=2*b.F();e<b;e++){var f=this.wh.get(e),f=this.xh.get(f);if(0==(f&1)){var f=f>>1,h=this.$e.read(2*f),g=this.$e.read(2*f+1);if(0!=c.size&&(h!=d||g!=k)){if(!this.TE(c))return!1;null!=c&&c.clear(!1)}c.add(f);d=h;k=g}}return this.TE(c)?!0:!1};h.prototype.TK=function(){for(var b=this.U,d=Array(b.ea()),k=0,e=b.ea();k<e;k++)d[k]=b.Oo(k);var e=new c,f,h,g,q=
new a.b,k=this.wh.get(0),k=this.xh.get(k),r=k>>1;this.$e.ec(2*r,q);k=this.Bk.get(r);f=d[k];h=b.Ea(k);g=b.Dc(k)-1;e.ak=r==h||r==g;e.Ev=this.pk?!f&&e.ak:e.ak;e.Sh=k;e.x=q.x;e.y=q.y;e.yl=r;for(var n=new c,p=1,m=this.wh.size;p<m;p++)if(k=this.wh.get(p),k=this.xh.get(k),0==(k&1)){r=k>>1;this.$e.ec(2*r,q);k=this.Bk.get(r);k!=e.Sh&&(f=d[k],h=b.Ea(k),g=b.Dc(k)-1);var y,s=r==h||r==g;y=this.pk?!f&&e.ak:e.ak;n.x=q.x;n.y=q.y;n.Sh=k;n.yl=r;n.Ev=y;n.ak=s;if(n.x==e.x&&n.y==e.y)if(this.pk){if(!n.Ev||!e.Ev)if(n.Sh!=
e.Sh||!n.ak&&!e.ak)return this.Kd=new a.wd(8,n.yl,e.yl),!1}else if(!n.ak||!e.ak)return this.Kd=new a.wd(5,n.yl,e.yl),!1;k=e;e=n;n=k}return!0};h.prototype.AB=function(){for(var b=this.U,c=[],k=-1,e=!1,f=0,h=b.ea();f<h;f++)b.qt(f)&&(e=!1,k++,f<h-1&&(b.qt(f+1)||(e=!0))),c[f]=e?k:-1;var e=new a.b,f=this.wh.get(0),f=this.xh.get(f),g=f>>1;this.$e.ec(2*g,e);for(var f=this.Bk.get(g),k=new d(e.x,e.y,f,g,c[f]),b=[],r=1,h=this.wh.size;r<h;r++)if(f=this.wh.get(r),f=this.xh.get(f),0==(f&1)){g=f>>1;this.$e.ec(2*
g,e);f=this.Bk.get(g);f=new d(e.x,e.y,f,g,c[f]);if(f.x==k.x&&f.y==k.y){if(f.Sh==k.Sh)return this.Kd=new a.wd(9,f.yl,k.yl),!1;0<=c[f.Sh]&&c[f.Sh]==c[k.Sh]&&(0!=b.length&&b[b.length-1]==k||b.push(k),b.push(f))}k=f}if(0==b.length)return!0;f=new a.$n(!0);a.I.Ps(c,-1);e=-1;r=new a.b;r.Eh();k=0;for(h=b.length;k<h;k++){g=b[k];if(g.x!=r.x||g.y!=r.y)e=f.jh(0),r.x=g.x,r.y=g.y;var n=c[g.Sh];-1==n&&(n=f.jh(2),c[g.Sh]=n);f.addElement(n,e);f.addElement(e,n)}h=new a.ga(0);h.xb(10);for(k=f.Wd;-1!=k;k=f.Cw(k))if(b=
f.DC(k),0==(b&1)&&0!=(b&2)){b=-1;h.add(k);for(h.add(-1);0<h.size;){e=h.tc();h.af();r=h.tc();h.af();g=f.DC(r);if(0!=(g&1)){b=0==(g&2)?e:r;break}f.$R(r,g|1);for(g=f.gc(r);-1!=g;g=f.bb(g))n=f.getData(g),n!=e&&(h.add(n),h.add(r))}if(-1!=b){f=-1;k=0;for(h=c.length;k<h;k++)if(c[k]==b){f=k;break}this.Kd=new a.wd(10,f,-1);return!1}}return!0};h.prototype.VK=function(){var b=this.U;if(0>=b.Mh())return this.Kd=new a.wd(6,1==b.ea()?1:-1,-1),0;if(1==b.ea())return this.pk&&!this.AB()?0:2;this.gn=a.ga.Yc(b.ea(),
0);this.Hx=a.ga.Yc(b.ea(),-1);for(var c=-1,d=0,k=0,f=b.ea();k<f;k++){var h=b.oo(k);this.gn.write(k,0>h?0:256);if(0<h)c=k,d=h;else{if(0==h)return this.Kd=new a.wd(6,k,-1),0;if(0>c||d<Math.abs(h))if(this.Kd=new a.wd(7,k,-1),this.pk)return 0;this.Hx.write(k,c)}}this.kr=b.ea();this.Ll=new a.ga(0);this.Ll.xb(10);f=b.F();this.wn=NaN;b=new a.ga(0);b.xb(10);this.yp=a.ga.Yc(f,-1);this.hu=a.ga.Yc(f,-1);null!=this.Hi?this.Hi.clear(!1):this.Hi=new a.ga(0);this.Hi.xb(10);this.Za.clear();this.Za.Hn(new e(this));
c=0;for(f*=2;0<this.kr&&c<f;c++)if(d=this.wh.get(c),d=this.xh.get(d),0==(d&1)){d>>=1;k=this.$e.read(2*d+1);if(k!=this.wn&&0!=b.size){if(!this.yr(b))return 0;null!=b&&b.clear(!1)}b.add(d);this.wn=k}return 0<this.kr&&!this.yr(b)?0:this.pk?0==this.Kd.yh&&this.AB()?2:0:0==this.Kd.yh?2:1};h.prototype.TE=function(b){if(1==b.size)return!0;for(var c=0,d=b.size;c<d;c++){var k=b.get(c);this.Hf.Sb(k);var e=this.Hf.oi();this.$a.push(this.Ls(e,k,this.Hf.Qa,!0));this.Hf.ia();e=this.Hf.ia();this.$a.push(this.Ls(e,
k,this.Hf.Qa,!1))}var f=this;this.$a.sort(function(a,b){return f.sM(a,b)});k=this.Lg.Wd;-1==k&&(k=this.Lg.jh(0));this.Lg.$l(this.$a.length);c=0;for(d=this.$a.length;c<d;c++)this.Lg.addElement(k,c);for(var c=!0,h=d=-1;c;){c=!1;e=this.Lg.gc(k);if(-1==e)break;for(var g=this.Lg.bb(e);-1!=g;){d=this.Lg.getData(e);h=this.Lg.getData(g);d=this.$a[d].tn;h=this.$a[h].tn;if(d==h)if(c=!0,this.Lg.Jc(k,e),e=this.Lg.ge(g),g=this.Lg.Jc(k,g),-1==g||-1==e)break;else continue;e=g;g=this.Lg.bb(e)}}c=this.Lg.vq(k);this.Lg.CB(k);
if(0<c)return this.Kd=new a.wd(5,d,h),!1;c=0;for(d=b.size;c<d;c++)this.my(this.$a[c]);this.$a.length=0;return!0};h.prototype.yr=function(b){for(var c=0,d=b.size;c<d;c++){var k=b.get(c),e=this.yp.read(k);if(-1!=e){var f=this.Za.da(e);this.Hi.add(f);this.Za.kd(e,-1);this.my(this.$a[f]);this.$a[f]=null;this.yp.write(k,-1)}e=this.hu.read(k);-1!=e&&(f=this.Za.da(e),this.Hi.add(f),this.Za.kd(e,-1),this.my(this.$a[f]),this.$a[f]=null,this.hu.write(k,-1))}c=0;for(d=b.size;c<d;c++){k=b.get(c);this.Hf.Sb(k);
e=this.Hf.oi();if(e.ja>e.ha){var h=this.Hf.Jb(),g=this.Ls(e,k,this.Hf.Qa,!0);0<this.Hi.size?(f=this.Hi.tc(),this.Hi.af(),this.$a[f]=g):(f=this.$a.length,this.$a.push(g));e=this.Za.addElement(f,-1);-1==this.yp.read(h)?this.yp.write(h,e):this.hu.write(h,e);0==(this.gn.read(this.Hf.Qa)&3)&&this.Ll.add(e)}this.Hf.ia();e=this.Hf.ia();e.ja<e.ha&&(h=this.Hf.Bm(),g=this.Ls(e,k,this.Hf.Qa,!1),0<this.Hi.size?(f=this.Hi.tc(),this.Hi.af(),this.$a[f]=g):(f=this.$a.length,this.$a.push(g)),e=this.Za.addElement(f,
-1),-1==this.yp.read(h)?this.yp.write(h,e):this.hu.write(h,e),0==(this.gn.read(this.Hf.Qa)&3)&&this.Ll.add(e))}c=0;for(d=this.Ll.size;c<d&&0<this.kr;c++)if(e=this.Ll.get(c),0==(this.gn.read(this.$a[this.Za.da(e)].Gx)&3)){b=-1;for(var k=this.Za.ge(e),q=e,g=null,f=-1,r=0;-1!=k;){f=this.Za.da(k);g=this.$a[f];f=g.Gx;r=this.gn.read(f);if(0!=(r&3))break;q=k;k=this.Za.ge(k)}-1==k?(h=1,k=q):(b=1==(r&3)?f:this.Hx.read(f),h=0!=g.LC()?0:1,k=this.Za.bb(k));do{f=this.Za.da(k);g=this.$a[f];f=g.Gx;q=this.gn.read(f);
if(0==(q&3)){if(h!=g.LC())return this.Kd=new a.wd(6,f,-1),!1;r=0==h||g.sl()?2:1;q=q&252|r;this.gn.write(f,r);if(2==r&&0==this.Kd.yh&&this.Hx.read(f)!=b&&(this.Kd=new a.wd(7,f,-1),this.pk))return!1;this.kr--;if(0==this.kr)return!0}1==(q&3)&&(b=f);q=k;k=this.Za.bb(k);h=0!=h?0:1}while(q!=e)}null!=this.Ll?this.Ll.clear(!1):this.Ll=new a.ga(0);return!0};h.prototype.Ls=function(b,c,d,k){if(322==b.D())b=this.PL(b);else throw a.g.wa();b.tn=c;b.Gx=d;b.hp=0;b.hS(k);return b};h.prototype.PL=function(c){var d;
0<this.dn.length?(d=this.dn[this.dn.length-1],this.dn.length-=1,c.copyTo(d.Zd)):(d=new b,d.Zd=a.fA.Yj(c));return d};h.prototype.my=function(a){322==a.Zd.D()&&this.dn.push(a)};h.prototype.eQ=function(){for(var b=this.U.F(),c=new a.ga(0),d=0;d<b;d++)c.add(d);var k=this;c.xd(0,b,function(a,b){return k.Is(a,b)});for(d=1;d<b;d++)if(0==this.Is(c.get(d-1),c.get(d)))return this.Kd=new a.wd(3,c.get(d-1),c.get(d)),0;return 2};h.prototype.NQ=function(){return this.yB()?this.xB(!0)?2:0:0};h.prototype.LQ=function(){return this.Yw()};
h.prototype.fQ=function(){for(var b=this.U.F(),c=new a.ga(0),d=0;d<b;d++)c.add(d);var k=this;c.xd(0,b,function(a,b){return k.uL(a,b)});var e=Array(b);a.I.Ps(e,!1);e[c.get(0)]=!0;for(d=1;d<b;d++){var f=c.get(d-1),h=c.get(d);0==this.Is(f,h)?e[h]=!1:e[h]=!0}for(var c=this.U.Pa(),f=this.U,h=0,g=1,d=0;d<b;d++)e[d]?g=d+1:(h<g&&c.Pd(f,h,g),h=d+1);h<g&&c.Pd(f,h,g);c.hg(2,this.pn);return c};h.prototype.OQ=function(){var b=this.U,c=b.Ca(),d=b.Ca(),k=this.U.Pa(),e=this.U,f=b.hasAttribute(1),h=f?a.Ia.rB(this.sg,
b,!0):0,g=new a.ga(0),q=new a.ga(0);g.xb(a.I.truncate(b.F()/2+1));for(q.xb(a.I.truncate(b.F()/2+1));c.kb();)if(d.kb(),!(2>b.Ha(c.Qa))){d.zR();for(var r,n,p=!0;c.La();){var m=c.ia(),y=d.oi();if(c.Jb()>d.Jb())break;p&&(g.add(c.Jb()),q.add(d.Bm()),p=!1);n=g.tc();var s=c.Bm();if(1<s-n){var t=new a.b;t.pc(b.Fa(n),b.Fa(s));r=t.length()}else r=m.$b();n=q.tc();s=d.Jb();1<s-n?(t=new a.b,t.pc(b.Fa(n),b.Fa(s)),n=t.length()):n=y.$b();r>this.pn?g.add(c.Bm()):f&&(r=b.ld(1,g.tc(),0),m=m.Ws(1,0),Math.abs(m-r)>h&&
g.add(c.Bm()));n>this.pn?q.add(d.Jb()):f&&(r=b.ld(1,q.tc(),0),m=y.Ws(1,0),Math.abs(m-r)>h&&q.add(d.Jb()))}g.tc()<q.tc()?g.size>q.size?g.af():q.af():(g.tc()!=q.tc()&&q.af(),q.af());if(2<=q.size+g.size){p=new a.Va;y=0;for(m=g.size;y<m;y++)e.Sd(g.get(y),p),0==y?k.df(p):k.lineTo(p);for(y=q.size-1;0<y;y--)e.Sd(q.get(y),p),k.lineTo(p);e.vc(c.Qa)?k.ro():0<q.size&&(e.Sd(q.get(0),p),k.lineTo(p))}null!=g&&g.clear(!1);null!=q&&q.clear(!1)}k.hg(2,this.pn);return k};h.prototype.MQ=function(){return this.xS()};
h.prototype.xS=function(){if(1736==this.U.D()&&1==this.U.Cm())return a.Of.Qj(this.U,this.pn,!0,!1,this.oe);this.Zh=new a.fd;this.Zh.Eb(this.U);0!=this.Zh.pd&&(1!=this.yx&&a.aj.$(this.Zh,this.pn,this.oe,!0),1736==this.U.D()&&a.mm.$(this.Zh,this.Zh.$c,this.yx,!1,this.oe));this.U=this.Zh.hf(this.Zh.$c);1736==this.U.D()&&(this.U.hl(),this.U.Pp(0));this.U.hg(2,this.pn);return this.U};h.ac=function(b,c,d){if(b.s())return 1;var k=b.D();if(33==k)return 1;if(197==k)return d=new a.i,b.o(d),d.mg(a.Ia.Cg(c,b,
!1))?0:1;if(a.T.Lc(k))throw a.g.wa();if(!a.T.Th(k))throw a.g.wa();var k=a.Ia.Cg(c,b,!1),e=b.rj(k);d=d?-1:e;if(-1!=d)return d;1==d&&(k=0);d=(new h(b,c,d,0,!1)).Yw();b.hg(d,k);return d};h.Ro=function(b,c,d,k,e){null!=k&&(k.yh=0,k.Fk=-1,k.Gk=-1);if(b.s())return 1;var f=b.D();if(33==f)return 1;var g=a.Ia.Cg(c,b,!1);if(197==f)return c=new a.i,b.o(c),c.mg(g)?(null!=k&&(k.yh=2,k.Fk=-1,k.Gk=-1),0):1;if(a.T.Lc(f))return g=new a.Xa(b.description),g.Bc(b,!0),h.Ro(g,c,d,k,e);e=b.rj(g);d=d?-1:e;if(-1!=d)return d;
c=new h(b,c,d,0,!1);if(550==f)d=c.eQ();else if(1607==f)d=c.NQ();else if(1736==f)d=c.LQ();else throw a.g.wa();b.hg(d,g);null!=k&&0==d&&k.aq(c.Kd);return d};h.ob=function(b,c,d,k,e){null!=k&&(k.yh=0,k.Fk=-1,k.Gk=-1);if(b.s())return 1;var f=b.D();if(33==f)return 1;var g=a.Ia.Cg(c,b,!1);if(197==f)return c=new a.i,b.o(c),c.mg(g)?(null!=k&&(k.yh=2,k.Fk=-1,k.Gk=-1),0):1;if(a.T.Lc(f))return f=new a.Xa(b.description),f.Bc(b,!0),h.Ro(f,c,d,k,e);b=new h(b,c,-1,0,!0);if(550==f||1607==f||1736==f)c=b.Yw();else throw a.g.wa();
null!=k&&k.aq(b.Kd);return c};h.cG=function(b,c,d,k){if(b.s())return b;var e=b.D();if(33==e)return b;var f=a.Ia.Cg(c,b,!1);if(197==e)return c=new a.i,b.o(c),c.mg(f)?b.Pa():b;if(a.T.Lc(e))return e=new a.Xa(b.description),e.Bc(b,!0),h.cG(e,c,d,k);k=b.rj(f);d=d?-1:k;if(2==d)return b;b=new h(b,c,d,0,!1);if(550==e)b=b.fQ();else if(1607==e)b=b.OQ();else if(1736==e)b=b.MQ();else throw a.g.wa();return b};h.Ry=function(b,c,d,k){if(b.s())return b;var e=b.D();if(33==e)return b;var f=a.Ia.Cg(c,b,!1);if(197==
e)return c=new a.i,b.o(c),c.mg(f)?b.Pa():b;if(a.T.Lc(e))return f=new a.Xa(b.description),f.Bc(b,!0),h.Ry(f,c,d,k);if(!a.T.Th(e))throw a.g.ra("OGC simplify is not implemented for this geometry type "+e);return a.Of.Ry(b,f,!1,k)};h.prototype.kj=function(b,c,d){if(b==c)return 0;b=this.xh.get(b);var k=this.xh.get(c);c=b>>1;var e=k>>1,f=new a.b,h=new a.b;this.$e.ec(2*c,f);f.y+=0!=(b&1)?this.Ri:-this.Ri;this.$e.ec(2*e,h);h.y+=0!=(k&1)?this.Ri:-this.Ri;b=f.compare(h);return 0==b&&d?(d=this.Bk.get(c)-this.Bk.get(e),
0>d?-1:0<d?1:0):b};h.prototype.Is=function(b,c){if(b==c)return 0;var d=this.U,k=d.Fa(b),e=d.Fa(c);if(k.x<e.x)return-1;if(k.x>e.x)return 1;if(k.y<e.y)return-1;if(k.y>e.y)return 1;for(k=1;k<this.wP;k++)for(var e=this.SD.Hd(k),f=a.pa.Wa(e),h=0;h<f;h++){var g=d.ld(e,b,h),q=d.ld(e,c,h);if(g<q)return-1;if(g>q)return 1}return 0};h.prototype.uL=function(a,b){var c=this.Is(a,b);return 0==c?a<b?-1:1:c};h.prototype.sM=function(a,b){if(a===b)return 0;var c=a.Zd.Pf(a.sl()?1:0);a.sl()&&c.Bp();var d=b.Zd.Pf(b.sl()?
1:0);b.sl()&&d.Bp();var k=c.ps(),e=d.ps();return e==k?(k=c.Ai(d),Math.abs(k)<=8.881784197001252E-16*(Math.abs(d.x*c.y)+Math.abs(d.y*c.x))&&(k--,k++),0>k?1:0<k?-1:0):k<e?-1:1};return h}();a.cv=h})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.prototype.D=function(){return 30};c.local=function(){null===c.V&&(c.V=new c);return c.V};c.prototype.$=function(b,c,d,e){return b instanceof a.T?(b=new a.Pc(b),c=new a.Pc(c),this.$(b,c,d,e).next()):new a.hI(b,c,d,e)};
c.On=function(b,d,e,f){var h=b.fb(),g=d.fb();if(b.s()&&d.s())return h>g?b:d;if(b.s())return d;if(d.s())return b;var n=new a.i,p=new a.i,m=new a.i;b.o(n);d.o(p);m.K(n);m.Db(p);n=a.Ia.zd(e,m,!1);p=b.D();m=d.D();return 33==p&&33==m?c.qP(b,d,n):p!=m?0<h||0<g?h>g?b:d:550==p?c.pA(b,d,n):c.pA(d,b,n):a.Of.On(b,d,e,f)};c.qP=function(b,c,d){d=1.00001*d*Math.sqrt(2);d*=d;var e=b.w(),f=c.w(),h=new a.pe(b.description);a.b.Zb(e,f)>d&&(h.add(b),h.add(c));return h};c.pA=function(b,c,d){var e=b.mc(0),f=b.F(),h=c.w(),
g=b.Pa();d=1.00001*d*Math.sqrt(2);var q=new a.i;b.o(q);q.P(d,d);if(q.contains(h)){d*=d;for(var q=!1,n=[],p=0;p<f;p++)n[p]=!1;for(p=0;p<f;p++){var m=e.read(2*p),s=e.read(2*p+1),m=m-h.x,s=s-h.y;m*m+s*s<=d&&(q=!0,n[p]=!0)}if(q)for(p=0;p<f;p++)n[p]||g.Pd(b,p,p+1);else g.Pd(b,0,f),g.add(c)}else g.Pd(b,0,f),g.add(c);return g};c.V=null;return c}(a.Me);a.dv=b})(z||(z={}));(function(a){var b=function(){function b(a,c,d,e){this.Fq=null==c;this.ua=-1;this.ne=a;this.cg=d;this.QP=c.next();this.Yb=e}b.prototype.next=
function(){if(this.Fq)return null;var b;return null!=(b=this.ne.next())?(this.ua=this.ne.ya(),a.dv.On(b,this.QP,this.cg,this.Yb)):null};b.prototype.ya=function(){return this.ua};return b}();a.hI=b})(z||(z={}));(function(a){var b=function(){function a(){}a.prototype.jt=function(){this.iw=null;this.Vu=-1;this.xG=!1};return a}(),c=function(){function a(){this.jq=0;this.Ci=[]}a.prototype.TJ=function(a){this.jq+=a.Vu;this.Ci.push(a)};a.prototype.PQ=function(){this.jq-=this.Ci[this.Ci.length-1].Vu;this.Ci.length-=
1};a.prototype.Dv=function(){return this.Ci[this.Ci.length-1]};a.prototype.lc=function(a){return a===this};return a}(),d=function(){function d(a,b,c){this.ua=-1;this.Ec=!1;this.bE=[!1,!1,!1,!1];this.ep=[0,0,0,0];this.ox=!1;this.Gj=-1;this.So=0;this.Tm=-1;this.rn=[];this.ne=a;this.cg=b;this.Yb=c}d.ac=function(a){var b=[],c;for(c in a)b.push(Number(c));b.sort(function(a,b){return a-b});return b};d.prototype.UC=function(b){var c=this.rn[b],e=d.ac(c)[0],f=c[e],h=f.Dv().iw,f=f.Dv().xG;delete c[e];f&&(h=
a.as.local().$(h,this.cg,!1,this.Yb),0==b&&33==h.D()&&(b=new a.pe(h.description),h.s()||b.add(h),h=b));return h};d.prototype.next=function(){if(this.Ec&&this.Tm==this.Gj)return null;for(;!this.FS(););if(-1==this.Gj)return null;if(this.ox){for(this.Tm++;;){if(this.Tm>this.Gj||0>this.Tm)throw a.g.wa();if(this.bE[this.Tm])break}this.ua++;return this.UC(this.Tm)}this.ua=0;this.Tm=this.Gj;return this.UC(this.Gj)};d.prototype.ya=function(){return this.ua};d.prototype.FS=function(){if(this.Ec)return!0;var b=
null;null!=this.ne&&(b=this.ne.next(),null==b&&(this.Ec=!0,this.ne=null));if(null!=b){var c=b.fb();this.bE[c]=!0;c>=this.Gj&&!this.ox&&(this.SA(c,!1,b),c>this.Gj&&!this.ox&&this.vR(c))}if(0<this.So)for(c=0;c<=this.Gj;c++)for(;1<this.ep[c];)if(b=this.jL(c),0!=b.length)b=a.Of.oM(b,this.cg,this.Yb),this.SA(c,!0,b);else break;return this.Ec};d.prototype.jL=function(a){for(var b=[],c=[],e=this.rn[a],f=d.ac(e),h=0;h<f.length;h++){var g=f[h],q=e[g];if(this.Ec||1E4<q.jq&&1<q.Ci.length){this.ep[a]-=q.Ci.length;
for(this.So-=q.Ci.length;0<q.Ci.length;)b.push(q.Dv().iw),q.PQ();c.push(g)}}for(h=0;h<c.length;h++)delete e[c[h]];return b};d.prototype.vR=function(a){for(var b=0;b<a;b++)this.rn[b]=[],this.So-=this.ep[b],this.ep[b]=0};d.prototype.SA=function(a,e,f){var h=new b;h.jt();h.iw=f;f=d.$g(f);h.Vu=f;f=d.Wf(f);if(a+1>this.rn.length)for(var g=0,q=Math.max(2,a+1);g<q;g++)this.rn.push([]);g=this.rn[a][f];void 0===g&&(g=new c,this.rn[a][f]=g);h.xG=e;g.TJ(h);this.ep[a]++;this.So++;this.Gj=Math.max(this.Gj,a)};
d.Wf=function(b){return 0<b?a.I.truncate(Math.log(b)/Math.log(4)+0.5):0};d.$g=function(b){var c=b.D();if(a.T.Th(c))return b.F();if(33==c)return 1;if(197==c)return 4;if(a.T.Lc(c))return 2;throw a.g.wa();};return d}();a.jI=d})(z||(z={}));(function(a){var b=function(b){function c(){b.apply(this,arguments)}C(c,b);c.prototype.D=function(){return 1};c.prototype.$=function(b,c,d,e){return void 0===e?new a.jI(b,c,d):this.xM(b,c,d,e)};c.prototype.xM=function(b,c,d,e){b=new a.Pc([b,c]);return this.$(b,d,e).next()};
c.local=function(){null===c.V&&(c.V=new c);return c.V};c.V=null;return c}(a.Me);a.wi=b})(z||(z={}));(function(a){var b;(function(a){a[a.nextPath=0]="nextPath";a[a.nextSegment=1]="nextSegment";a[a.iterate=2]="iterate"})(b||(b={}));b=function(){function b(c,d,e,f){this.dr=new a.i;this.LP=c;this.MP=d;this.Wo=f;this.hn=-1;this.qk=!1;var h=c.pb;null!=h&&(h=f?h.nn:h.Ab,null!=h&&(this.Ec=!1,this.ka=e,this.Ab=h,this.au=this.Ab.Re(),this.Xo=this.qk=!0,this.Hb=0,f?this.hn=d.ea():this.bd=d.Ca()));this.qk||(h=
d.pb,null!=h&&(h=f?h.nn:h.Ab,null!=h&&(this.Ec=!1,this.ka=e,this.Ab=h,this.au=this.Ab.Re(),this.qk=!0,this.Xo=!1,this.Hb=0,f?this.hn=c.ea():this.bd=c.Ca())));this.qk||(this.th=f?a.Ia.BN(c,d,e,1<=c.rj(0),1<=d.rj(0)):a.Ia.AN(c,d,e))}b.prototype.next=function(){if(this.qk){if(this.Ec)return!1;for(var b=!0;b;)switch(this.Hb){case 0:b=this.nQ();break;case 1:b=this.oQ();break;case 2:b=this.$w();break;default:throw a.g.ra("internal error");}return this.Ec?!1:!0}return null==this.th?!1:this.th.next()};b.prototype.jk=
function(){return this.qk?this.Xo?this.Ab.da(this.Rq):this.Wo?this.hn:this.bd.Jb():this.th.jk(this.th.Ff)};b.prototype.ek=function(){return this.qk?this.Xo?this.Wo?this.hn:this.bd.Jb():this.Ab.da(this.Rq):this.th.ek(this.th.mf)};b.prototype.Fw=function(){if(!this.Wo)throw a.g.ra("internal error");return this.qk?this.Xo?this.Ab.uC(this.Rq):this.dr:this.th.Fw(this.th.Ff)};b.prototype.jw=function(){if(!this.Wo)throw a.g.ra("internal error");return this.qk?this.Xo?this.dr:this.Ab.uC(this.Rq):this.th.jw(this.th.mf)};
b.prototype.nQ=function(){if(!this.Wo){if(!this.bd.kb())return this.Ec=!0,!1;this.Hb=1;return!0}if(-1==--this.hn)return this.Ec=!0,!1;this.Xo?this.MP.Ti(this.hn,this.dr):this.LP.Ti(this.hn,this.dr);this.au.Ch(this.dr,this.ka);this.Hb=2;return!0};b.prototype.oQ=function(){if(!this.bd.La())return this.Hb=0,!0;var a=this.bd.ia();this.au.Fn(a,this.ka);this.Hb=2;return!0};b.prototype.$w=function(){this.Rq=this.au.next();return-1==this.Rq?(this.Hb=this.Wo?0:1,!0):!1};return b}();a.cl=b})(z||(z={}));(function(a){a=
a.kI||(a.kI={});a[a.enumClosed=1]="enumClosed";a[a.enumHasNonlinearSegments=2]="enumHasNonlinearSegments";a[a.enumOGCStartPolygon=4]="enumOGCStartPolygon";a[a.enumCalcMask=4]="enumCalcMask"})(z||(z={}));(function(a){var b=function(){function b(){}b.Fb=function(c,d,e,f,h,g,n,p,m){var s=[0,0,0],t=[0,0,0],u=[0,0,0],v=[0,0,0,0],w=new a.ca(0),x=new a.ca(0),A=new a.ca(0);if(null!=n||null!=p||null!=m)if(a.j.Ih(d))a.zg.Fb(c,e,f,h,g,n,p,m);else{h=a.u.W(h);e=a.u.W(e);var G=a.u.W(h-e);if(a.j.S(f,g)&&(a.j.S(e,
h)||a.j.S(a.j.H(f),1.570796326794897)))null!=n&&(n.l=0),null!=p&&(p.l=0),null!=m&&(m.l=0);else{if(a.j.S(f,-g)){if(a.j.S(a.j.H(f),1.570796326794897)){null!=n&&(n.l=2*a.u.gg(c,d));null!=p&&(p.l=0<f?a.u.W(3.141592653589793-a.u.W(h)):a.u.W(h));null!=m&&(m.l=0<f?a.u.W(h):a.u.W(3.141592653589793-a.u.W(h)));return}a.j.S(a.j.H(G),3.141592653589793)&&(null!=n&&(n.l=2*a.u.gg(c,d)),null!=p&&(p.l=0),null!=m&&(m.l=0))}else{if(a.j.S(a.j.H(f),1.570796326794897)||a.j.S(a.j.H(g),1.570796326794897)){a.Xj.Fb(c,d,e,
f,h,g,n,p,m);return}if(a.j.S(e,h)||a.j.S(a.j.H(G),3.141592653589793)){a.Xj.Fb(c,d,e,f,h,g,n,p,m);return}if(a.j.Vc(f)){a.Xj.Fb(c,d,e,f,h,g,n,p,m);return}}var B=Math.sqrt(1-d);h=a.u.W(h-e);e=0;a.u.wm(d,f,e,w,x,A);s[0]=w.l;s[1]=x.l;s[2]=A.l;a.u.wm(d,g,h,w,x,A);t[0]=w.l;t[1]=x.l;t[2]=A.l;u[0]=0;u[1]=0;u[2]=-1*d*a.u.n(1,d,f)*Math.sin(f);0>h?a.u.Ep(u,t,s,v,0):a.u.Ep(u,s,t,v,0);for(var x=[0,0,0],A=[0,0,0],z=[0,0,0],s=[0,0,0],w=[0,0,0],C=Math.acos(v[2]/1),L=1-d,K=Math.tan(C),M=1+K*K/L,O=2*u[2]*K/L,K=Math.sqrt(O*
O-4*M*(u[2]*u[2]/L-1)),M=2*M,L=(-O+K)/M,O=(-O-K)/M,K=Math.tan(C),M=K*L+u[2],C=(L+O)/2,u=(M+(K*O+u[2]))/2,K=a.u.Sn(L-C,M-u),L=1.570796326794897*(u/B),O=0;100>O;O++){M=a.u.Tk(d,L);M=M*M/Math.cos(L)*(Math.sin(L)-u*M/(1*(1-d)));if(a.j.Vc(M))break;L-=M}var u=a.u.n(1,d,L)*Math.cos(L),u=Math.sqrt((u-C)*(u+C)),K=1-K/u,K=K*(2-K),M=a.u.jm(x),C=a.u.jm(A),L=a.u.jm(z),I=a.u.Qr(z,x),O=a.u.Qr(z,A);a.u.Uu(z,x,s);a.u.Uu(z,A,w);x=Math.acos(I/(L*M));A=Math.acos(O/(L*C));A*=a.j.nb(1,a.u.Qr(s,w));if(1.570796326794897<=
a.j.H(x)&&1.570796326794897<=a.j.H(A)||3.141592653589793<a.j.H(x-A))x=(3.141592653589793-a.j.H(x))*a.j.nb(1,x),A=(3.141592653589793-a.j.H(A))*a.j.nb(1,A);s=a.u.Si(K,A);w=a.u.q(u,K,a.u.Si(K,x));s=a.u.q(u,K,s);s=a.j.H(s-w)*c;x=new a.ca(0);A=new a.ca(0);z=v[1]/1;z*=-a.j.nb(1,G);w=Math.acos(z)*a.j.nb(1,G);b.gf(c,d,e,f,s,w,x,A);a.j.S(h,x.l)&&a.j.S(g,A.l)||(K=a.u.Sn(a.u.W(h-x.l),g-A.l),b.gf(c,d,e,f,s,a.u.W(w+3.141592653589793),x,A),M=a.u.Sn(a.u.W(h-x.l),g-A.l),M<K&&(w=a.u.W(w+3.141592653589793)));x=[0,
0,0,0];A=[0,0,0,0];u=[0,0,0];K=[0,0,0];c=[0,0,0];e=[0,0,0];f=[0,0,0];z=[0,0,0];u[0]=0;u[1]=0;u[2]=B;K[0]=0;K[1]=0;K[2]=0;a.u.Ep(K,u,t,x,0);a.j.Vc(g)?(c[0]=t[0],c[1]=t[1],c[2]=1,e[0]=1*Math.cos(h)-1*Math.sin(h),e[1]=1*Math.sin(h)+1*Math.cos(h)):(d=a.u.n(1,d,g)*Math.cos(g),c[0]=0,c[1]=0,t[2]+=Math.tan(1.570796326794897-a.j.H(g))*d*a.j.nb(1,g),e[0]=d*Math.cos(h)-d*Math.sin(h),e[1]=d*Math.sin(h)+d*Math.cos(h));e[2]=t[2];a.u.Ep(t,e,c,A,1);a.u.Uu(A,x,f);a.u.Uu(A,v,z);z=a.u.Qr(f,z)/(a.u.jm(f)*a.u.jm(z));
z*=a.j.nb(1,G);h=Math.acos(z)*-a.j.nb(1,G);0<w&&0<h?h=a.u.W(h+3.141592653589793):0>w&&0>h&&(h=a.u.W(h+3.141592653589793));null!=n&&(n.l=s);null!=p&&(p.l=w);null!=m&&(m.l=h)}}};b.gf=function(b,c,d,e,f,h,g,n){var p=[0,0,0],m=[0,0,0],s=[0,0,0],t=[0,0,0],u=[0,0,0],v=[0,0,0],w=[0,0,0],x=[0,0,0,0],A=new a.ca(0),G=new a.ca(0),B=new a.ca(0),z=new a.ca(0),C=new a.ca(0),L=new a.ca(0);if(null!=g&&null!=n)if(a.j.Ih(c))a.zg.gf(b,d,e,f,h,g,n);else if(a.j.Vc(f))null!=g&&(g.l=d),null!=n&&(n.l=e);else if(h=a.u.W(h),
0>f&&(f=a.j.H(f),h=a.u.W(h+3.141592653589793)),d=a.u.W(d),e=a.u.W(e),1.570796326794897<a.j.H(e)&&(d=a.u.W(d+3.141592653589793),e=a.j.nb(3.141592653589793,e)-e),a.j.S(a.j.H(e),1.570796326794897)||a.j.Vc(e)||a.j.Vc(h)||a.j.S(a.j.H(h),3.141592653589793))a.Xj.gf(b,c,d,e,f,h,g,n);else{var K=Math.sqrt(1-c);b=f/b;a.u.wm(c,e,0,z,C,L);p[0]=z.l;p[1]=C.l;p[2]=C.l;w[0]=0;w[1]=0;w[2]=-1*c*a.u.n(1,c,e)*Math.sin(e);z=a.u.n(1,c,e);C=a.u.W(1.570796326794897-h);L=Math.sin(C);f=Math.cos(e);e=Math.sin(e);u[0]=z*f-e*
L;u[1]=Math.cos(C);u[2]=(1-c)*z*e+f*L;0>h?a.u.Ep(w,u,p,x,0):a.u.Ep(w,p,u,x,0);p=Math.acos(x[2]/1);x=Math.atan2(-x[1],-x[0]);e=1-c;u=Math.tan(p);C=1+u*u/e;z=2*w[2]*u/e;u=Math.sqrt(z*z-4*C*(w[2]*w[2]/e-1));C*=2;e=(-z+u)/C;z=(-z-u)/C;u=Math.tan(p);C=u*e+w[2];p=(e+z)/2;w=(C+(u*z+w[2]))/2;u=a.u.Sn(e-p,C-w);K=1.570796326794897*(w/K);for(e=0;100>e;e++){z=a.u.Tk(c,K);z=z*z/Math.cos(K)*(Math.sin(K)-w*z/(1*(1-c)));if(a.j.Vc(z))break;K-=z}K=a.u.n(1,c,K)*Math.cos(K);K=Math.sqrt((K-p)*(K+p));w=1-u/K;w*=2-w;v=
Math.acos(a.u.Qr(v,m)/(a.u.jm(v)*a.u.jm(m)));v*=a.j.nb(1,m[0]);h=(a.u.q(K,w,a.u.Si(w,v))+b*a.j.nb(1,h))/a.u.gg(K,w);h=a.u.W(1.570796326794897*h);h=a.u.xn(w,h);a.u.n(K,w,h);u=a.u.W(x+d);d=Math.cos(u);h=Math.sin(u);s[0]=t[0]*d+t[1]*-h;s[1]=t[0]*h+t[1]*d;s[2]=t[2];a.u.JK(c,s[0],s[1],s[2],B,G,A);null!=g&&(g.l=G.l);null!=n&&(n.l=B.l)}};return b}();a.$z=b})(z||(z={}));(function(a){var b=function(){function b(c){this.Na=null;this.Ar=new a.b;this.Br=new a.b;this.a=c}b.prototype.compare=function(a,b,c){this.a.uc(b,
this.Ar);this.a.uc(a.da(c),this.Br);return this.Ar.compare(this.Br)};return b}(),c=function(){function b(c){this.nf=new a.b;this.ln=new a.b;this.a=c}b.prototype.bh=function(a){this.nf.J(a)};b.prototype.compare=function(a,b){this.a.uc(a.da(b),this.ln);return this.nf.compare(this.ln)};return b}(),d=function(a){function b(c){a.call(this,c.a,c.ka,!1);this.ab=c}C(b,a);b.prototype.compare=function(a,b,c){if(this.Zf)return-1;var d=this.ab.Cd.Dm(this.ab.lh(b));a=a.da(c);var k=this.ab.Cd.Dm(this.ab.lh(a));
this.Cl=c;return this.JB(b,d,a,k)};return b}(a.hA),k=function(a){function b(c){a.call(this,c.a,c.ka);this.ab=c}C(b,a);b.prototype.compare=function(a,b){if(this.Zf)return-1;var c=this.ab.Cd.Dm(this.ab.lh(a.da(b)));this.Cl=b;return this.KB(b,c)};return b}(a.JI),e=function(){function e(){this.zc=this.Ue=this.Zm=this.Cd=this.Kg=this.nd=this.$a=this.a=null;this.og=!1;this.Xg=this.Kl=this.Vd=this.Lj=this.Mg=this.Hj=this.sf=this.Ld=null;this.Yg=this.rp=this.Tx=this.ka=0;this.Ht=this.Nm=!1;this.mn=new a.b;
this.Ck=new a.b;this.$a=new a.Fc(8);this.nd=new a.Fc(5);this.Kg=new a.Ur;this.Cd=new a.Ur;this.og=!1;this.Xg=new a.b;this.Xg.ma(0,0);this.ka=0;this.Yg=-1;this.Nm=!1;this.a=null;this.Ue=new a.bj;this.zc=new a.bj;this.Mg=new a.ga(0);this.Lj=new a.gA;this.sf=new a.ga(0);this.Hj=new a.ga(0);this.Zm=new a.Va}e.prototype.GS=function(b,c){var d=new a.Bg;d.Oy();b.Oe(d);this.Op(b);this.Nm=!1;this.ka=c;this.Tx=c*c;var k=this.Xy();b.Oe(d);k||(this.JM(),k||this.Xy());-1!=this.Yg&&(this.a.bf(this.Yg),this.Yg=
-1);this.a=null;return this.Nm};e.prototype.KS=function(a,b){this.Op(a);this.Nm=!1;this.ka=b;this.Tx=b*b;this.og=!1;this.Xy();this.og||(this.og=1==a.xo(b,!0,!1));-1!=this.Yg&&(this.a.bf(this.Yg),this.Yg=-1);this.a=null};e.prototype.Uf=function(a,b){return this.$a.O(a,0+b)};e.prototype.zy=function(a,b,c){this.$a.L(a,0+b,c)};e.prototype.lh=function(a){return this.$a.O(a,2)};e.prototype.UR=function(a,b){this.$a.L(a,2,b)};e.prototype.FC=function(a,b){return this.$a.O(a,3+b)};e.prototype.Eo=function(a){return this.$a.O(a,
7)};e.prototype.Nk=function(a,b){this.$a.L(a,7,b)};e.prototype.Go=function(a,b){return this.$a.O(a,3+this.Do(a,b))};e.prototype.Qp=function(a,b,c){this.$a.L(a,3+this.Do(a,b),c)};e.prototype.ZN=function(a,b){return this.$a.O(a,5+this.Do(a,b))};e.prototype.Sp=function(a,b,c){this.$a.L(a,5+this.Do(a,b),c)};e.prototype.rq=function(a){return this.nd.O(a,0)};e.prototype.RR=function(a,b){this.nd.L(a,0,b)};e.prototype.ow=function(a){return this.nd.O(a,4)};e.prototype.Lp=function(a,b){this.nd.L(a,4,b)};e.prototype.fk=
function(a){return this.nd.O(a,1)};e.prototype.dm=function(a,b){this.nd.L(a,1,b)};e.prototype.nw=function(a){return this.nd.O(a,3)};e.prototype.Hr=function(a,b){this.nd.L(a,3,b)};e.prototype.Ul=function(a){var b=this.nd.be(),c=this.Kg.jh();this.RR(b,c);-1!=a?(this.Kg.addElement(c,a),this.a.lb(a,this.Yg,b),this.Lp(b,this.a.gb(a))):this.Lp(b,-1);return b};e.prototype.aM=function(a){this.nd.Jc(a)};e.prototype.QA=function(a,b){this.Kg.addElement(this.rq(a),b);this.a.lb(b,this.Yg,a)};e.prototype.rr=function(a){var b=
this.$a.be(),c=this.Cd.jh();this.UR(b,c);-1!=a&&this.Cd.addElement(c,a);return b};e.prototype.RA=function(a,b){this.Cd.addElement(this.lh(a),b)};e.prototype.Ns=function(a){this.$a.Jc(a);a=this.Mg.Qs(a);0<=a&&this.Mg.QE(a)};e.prototype.yi=function(b,c){if(-1==this.Uf(b,0))this.zy(b,0,c);else if(-1==this.Uf(b,1))this.zy(b,1,c);else throw a.g.wa();this.Av(b,c)};e.prototype.Av=function(a,b){var c=this.fk(b);if(-1!=c){var d=this.Go(c,b);this.Sp(d,b,a);this.Qp(a,b,d);this.Qp(c,b,a);this.Sp(a,b,c)}else this.Sp(a,
b,a),this.Qp(a,b,a),this.dm(b,a)};e.prototype.Do=function(a,b){return this.Uf(a,0)==b?0:1};e.prototype.Tl=function(a,b){var c=this.nw(b);-1!=c&&(this.Ue.kd(c,-1),this.Hr(b,-1));var d,c=this.fk(b);if(-1!=c){var k=d=c,e;do{e=!1;var f=this.Do(d,b),h=this.FC(d,f);if(this.Uf(d,f+1&1)==a){this.Os(d);this.Cd.Fg(this.lh(d));this.Ns(d);if(d==h){c=-1;break}c==d&&(c=this.fk(b),k=h,e=!0)}d=h}while(d!=k||e);if(-1!=c){do f=this.Do(d,b),h=this.FC(d,f),this.zy(d,f,a),d=h;while(d!=k);d=this.fk(a);-1!=d?(k=this.Go(d,
a),e=this.Go(c,a),k==d?(this.dm(a,c),this.Av(d,a),this.dm(a,d)):e==c&&this.Av(c,a),this.Qp(c,a,k),this.Sp(k,a,c),this.Qp(d,a,e),this.Sp(e,a,d)):this.dm(a,c)}}c=this.rq(a);d=this.rq(b);for(k=this.Kg.gc(d);-1!=k;k=this.Kg.bb(k))this.a.lb(this.Kg.da(k),this.Yg,a);this.Kg.Qv(c,d);this.aM(b)};e.prototype.YP=function(a,b){var c=this.Uf(a,0),d=this.Uf(a,1),k=this.Uf(b,0),e=this.Uf(b,1);this.Cd.Qv(this.lh(a),this.lh(b));b==this.fk(c)&&this.dm(c,a);b==this.fk(d)&&this.dm(d,a);this.Os(b);this.Ns(b);c==k&&d==
e||d==k&&c==e||(this.zm(c,this.mn),this.zm(k,this.Ck),this.mn.ub(this.Ck)?(c!=k&&this.Tl(c,k),d!=e&&this.Tl(d,e)):(d!=k&&this.Tl(d,k),c!=e&&this.Tl(c,e)))};e.prototype.Os=function(a){var b=this.Uf(a,1);this.SB(a,this.Uf(a,0));this.SB(a,b)};e.prototype.SB=function(a,b){var c=this.Go(a,b),d=this.ZN(a,b),k=this.fk(b);c!=a?(this.Qp(d,b,c),this.Sp(c,b,d),k==a&&this.dm(b,c)):this.dm(b,-1)};e.prototype.YA=function(a,b,c){var d=this.Cd.gc(a),k=this.Cd.da(d);a=this.se(k);var e=this.se(this.a.X(k));this.a.Tp(k,
b,c,!0);for(d=this.Cd.bb(d);-1!=d;d=this.Cd.bb(d)){var k=this.Cd.da(d),f=this.se(k)==a;this.a.Tp(k,b,c,f)}d=b.Io(c,0).Mb();b=b.Io(c,b.kk(c)-1).oc();this.yG(a,d);this.yG(e,b)};e.prototype.PB=function(a,b,c){var d=this.lh(a),k=this.Uf(a,0),e=this.Uf(a,1),f=this.rr(-1);this.Mg.add(f);this.Nk(f,-3);this.sf.add(f);this.yi(f,k);a=1;for(b=b.kk(c);a<b;a++)c=this.Ul(-1),this.Hj.add(c),this.sf.add(c),this.yi(f,c),f=this.rr(-1),this.Mg.add(f),this.Nk(f,-3),this.sf.add(f),this.yi(f,c);this.yi(f,e);for(d=this.Cd.gc(d);-1!=
d;d=this.Cd.bb(d))if(e=this.Cd.da(d),this.se(e)==k){a=0;do 0<a&&(f=this.sf.get(a-1),this.QA(f,e),-1==this.ow(f)&&this.Lp(f,this.a.gb(e))),f=this.sf.get(a),a+=2,this.RA(f,e),e=this.a.X(e);while(a<this.sf.size)}else{a=this.sf.size-1;do a<this.sf.size-2&&(f=this.sf.get(a+1),this.QA(f,e),0>this.ow(f)&&this.Lp(f,this.a.gb(e))),f=this.sf.get(a),a-=2,this.RA(f,e),e=this.a.X(e);while(0<=a)}this.sf.clear(!1)};e.prototype.se=function(a){return this.a.Ra(a,this.Yg)};e.prototype.UE=function(b,c,d){var k=this.Uf(c,
0),e=new a.b;this.zm(k,e);var f=new a.b,h=this.Uf(c,1);this.zm(h,f);var g=d.kk(b),q=d.Io(b,0),r=new a.b;q.ht(r);if(!e.ub(r)){if(!this.og){var n=e.compare(this.Xg),r=r.compare(this.Xg);0>n*r&&(this.og=!0)}this.lC(k,this.sf);this.Hj.add(k)}!this.og&&1<g&&(n=e.compare(f),q=q.oc(),e.compare(q)!=n||q.compare(f)!=n?this.og=!0:0>q.compare(this.Xg)&&(this.og=!0));q=d.Io(b,g-1);b=q.oc();f.ub(b)||(this.og||(n=f.compare(this.Xg),r=b.compare(this.Xg),0>n*r&&(this.og=!0)),this.lC(h,this.sf),this.Hj.add(h));this.sf.add(c);
f=0;for(h=this.sf.size;f<h;f++)b=this.sf.get(f),d=this.Eo(b),a.Fc.Zw(d)&&(this.zc.kd(d,-1),this.Nk(b,-1)),b!=c&&-3!=this.Eo(b)&&(this.Mg.add(b),this.Nk(b,-3));this.sf.clear(!1)};e.prototype.NK=function(a,b){this.Ld.compare(this.zc,this.zc.da(a),b);this.Ld.Zf&&(this.Ld.lq(),this.dC(a,b))};e.prototype.dC=function(b,c){this.Nm=!0;var d=this.zc.da(b),k=this.zc.da(c),e,f;f=this.Cd.Dm(this.lh(d));var h=this.Cd.Dm(this.lh(k));e=this.a.cc(f);null==e&&(null==this.Vd&&(this.Vd=new a.yb),this.a.Oc(f,this.Vd),
e=this.Vd);f=this.a.cc(h);null==f&&(null==this.Kl&&(this.Kl=new a.yb),this.a.Oc(h,this.Kl),f=this.Kl);this.Lj.zn(e);this.Lj.zn(f);this.Lj.Ga(this.ka,!0)&&(this.og=!0);this.fG(d,k,-1,this.Lj);this.Lj.clear()};e.prototype.VM=function(b,c){this.Nm=!0;var d=this.zc.da(c),k,e=this.Cd.Dm(this.lh(d));k=this.a.cc(e);null==k&&(null==this.Vd&&(this.Vd=new a.yb),this.a.Oc(e,this.Vd),k=this.Vd);e=this.qC(b);this.Lj.zn(k);this.a.Jk(e,this.Zm);this.Lj.Tw(this.ka,this.Zm,!0);this.fG(d,-1,b,this.Lj);this.Lj.clear()};
e.prototype.DO=function(){if(0!=this.Mg.size)for(;0!=this.Mg.size;){if(this.Mg.size>Math.max(100,this.a.pd)){this.Mg.clear(!1);this.og=!0;break}var a=this.Mg.tc();this.Mg.af();this.Nk(a,-1);-1!=this.TO(a)&&this.CO(a);this.Mm=!1}};e.prototype.CO=function(a){var b;this.Mm?(b=this.zc.vs(this.lE,this.iE,a,!0),this.Mm=!1):b=this.zc.PA(a);-1==b?this.YP(this.zc.da(this.zc.tC()),a):(this.Nk(a,b),this.Ld.Zf&&(this.Ld.lq(),this.dC(this.Ld.Cl,b)))};e.prototype.TO=function(b){var c=this.Uf(b,0);b=this.Uf(b,1);
this.zm(c,this.mn);this.zm(b,this.Ck);if(a.b.Zb(this.mn,this.Ck)<=this.Tx)return this.og=!0,-1;var d=this.mn.compare(this.Xg),k=this.Ck.compare(this.Xg);return 0>=d&&0<k?b:0>=k&&0<d?c:-1};e.prototype.HM=function(){var b=new a.ga(0);b.xb(this.a.pd);for(var c=this.a.Gp(),d=c.next();-1!=d;d=c.next())-1!=this.a.Ra(d,this.Yg)&&b.add(d);this.a.Mu(b,b.size);this.IM(b)};e.prototype.IM=function(c){this.Ue.clear();this.Ue.de(c.size);this.Ue.Hn(new b(this.a));var d=new a.b;d.Eh();for(var k=-1,e=new a.b,f=0,
h=c.size;f<h;f++){var g=c.get(f);this.a.uc(g,e);e.ub(d)?(g=this.a.Ra(g,this.Yg),this.Tl(k,g)):(k=this.se(g),this.a.uc(g,d),g=this.Ue.qm(g),this.Hr(k,g))}};e.prototype.JM=function(){var b=new a.ga(0);b.xb(this.a.pd);for(var c=this.Ue.gc(-1);-1!=c;c=this.Ue.bb(c))b.add(this.Ue.da(c));this.Ue.clear();this.a.Mu(b,b.size);for(var c=0,d=b.size;c<d;c++){var k=b.get(c),e=this.se(k),k=this.Ue.qm(k);this.Hr(e,k)}};e.prototype.lC=function(b,c){var d=this.fk(b);if(-1!=d){var k=d;do a.Fc.Zw(this.Eo(k))&&c.add(k),
k=this.Go(k,b);while(k!=d)}};e.prototype.yG=function(a,b){for(var c=this.Kg.gc(this.rq(a));-1!=c;c=this.Kg.bb(c))this.a.Yi(this.Kg.da(c),b)};e.prototype.fG=function(a,b,c,d){this.Os(a);-1!=b&&this.Os(b);this.UE(0,a,d);-1!=b&&this.UE(1,b,d);-1!=c&&(d.nf.w(this.mn),this.zm(c,this.Ck),this.Ck.ub(this.mn)||this.Hj.add(c));c=0;for(var k=this.Hj.size;c<k;c++){var e=this.Hj.get(c),f=this.nw(e);-1!=f&&(this.Ue.kd(f,-1),this.Hr(e,-1))}c=this.lh(a);k=-1!=b?this.lh(b):-1;this.YA(c,d,0);-1!=b&&this.YA(k,d,1);
this.PB(a,d,0);-1!=b&&this.PB(b,d,1);this.Cd.Fg(c);this.Ns(a);-1!=b&&(this.Cd.Fg(k),this.Ns(b));c=0;for(k=this.Hj.size;c<k;c++)e=this.Hj.get(c),e==this.rp&&(this.Ht=!0),f=this.nw(e),-1==f&&(f=this.Ue.PA(this.qC(e)),-1==f?(a=this.se(this.Ue.da(this.Ue.tC())),this.Tl(a,e)):this.Hr(e,f));this.Hj.clear(!1)};e.prototype.zm=function(a,b){this.a.SC(this.ow(a),b)};e.prototype.qC=function(a){return this.Kg.Dm(this.rq(a))};e.prototype.Xy=function(){this.Ht=!1;this.rp=-1;null==this.Ld&&(this.zc.Ct=!1,this.Ld=
new d(this),this.zc.Qm=this.Ld);var b=new a.ga(0),e=null,f=null,h=0;this.iE=this.lE=-1;this.Mm=!1;for(var g=this.Ue.gc(-1);-1!=g;){h++;this.Mm=!1;var r=this.Ue.da(g);this.rp=this.se(r);this.a.uc(r,this.Xg);this.Ld.XF(this.Xg.y,this.Xg.x);var n,p=this.fk(this.rp);n=-1==p;if(!n){r=p;do{var m=this.Eo(r);-1==m?(this.Mg.add(r),this.Nk(r,-3)):-3!=m&&b.add(m);r=this.Go(r,this.rp)}while(r!=p)}if(0<b.size){this.Mm=1==b.size&&1==this.Mg.size;n=0;for(p=b.size;n<p;n++)r=this.zc.da(b.get(n)),this.Nk(r,-2);var s=
-2,y=-2;n=0;for(p=b.size;n<p;n++){m=b.get(n);if(-2==s){var t=this.zc.ge(m);-1!=t?(r=this.zc.da(t),r=this.Eo(r),-2!=r&&(s=t)):s=-1}-2==y&&(m=this.zc.bb(m),-1!=m?(r=this.zc.da(m),r=this.Eo(r),-2!=r&&(y=m)):y=-1);if(-2!=s&&-2!=y)break}n=0;for(p=b.size;n<p;n++)m=b.get(n),r=this.zc.da(m),this.zc.kd(m,-1),this.Nk(r,-1);b.clear(!1);this.lE=-1!=s?s:-1;this.iE=-1!=y?y:-1;-1!=s&&-1!=y?this.Mm||this.NK(s,y):-1==s&&-1==y&&(this.Mm=!1)}else n&&(null==e&&(e=new k(this)),e.bh(this.Xg),this.zc.sF(e),e.Zf&&(e.lq(),
this.VM(this.rp,e.Cl)));this.DO();this.Ht?(this.Ht=!1,null==f&&(f=new c(this.a)),f.bh(this.Xg),g=this.Ue.sF(f)):g=this.Ue.bb(g)}return this.Nm};e.prototype.Op=function(b){this.a=b;this.Yg=this.a.re();this.$a.de(b.pd+32);this.nd.de(b.pd);this.Kg.Dr(b.pd);this.Kg.$l(b.pd);this.Cd.Dr(b.pd+32);this.Cd.$l(b.pd+32);for(b=this.a.$c;-1!=b;b=this.a.we(b))if(a.T.Kc(this.a.Lb(b)))for(g=this.a.Vb(b);-1!=g;g=this.a.bc(g)){var c=this.a.Ha(g),d=this.a.Cb(g),k=this.Ul(d),e=this.rr(d);this.yi(e,k);q=this.a.X(d);d=
0;for(c-=2;d<c;d++){var f=this.a.X(q),h=this.Ul(q);this.yi(e,h);e=this.rr(q);this.yi(e,h);q=f}this.a.vc(g)?(h=this.Ul(q),this.yi(e,h),e=this.rr(q),this.yi(e,h),this.yi(e,k)):(h=this.Ul(q),this.yi(e,h))}else for(var g=this.a.Vb(b);-1!=g;g=this.a.bc(g))for(var q=this.a.Cb(g),k=0,c=this.a.Ha(g);k<c;k++)this.Ul(q),q=this.a.X(q);this.HM()};return e}();a.aA=e})(z||(z={}));(function(a){var b=function(b){function c(d,e,f){b.call(this);if(void 0!==d)if(void 0!==f){this.description=a.Od.Tf();var h=new a.ee;
h.K(d,e,f);this.Py(h)}else if(void 0!==e)this.description=a.Od.Tf(),this.ic(d,e);else if(d instanceof a.pa)this.description=d;else if(d instanceof a.b)this.description=a.Od.Tf(),this.ic(d);else throw a.g.N();else this.description=a.Od.Tf()}C(c,b);c.prototype.w=function(b){if(void 0!==b){if(this.sc())throw a.g.ra("This operation should not be performed on an empty geometry.");b.ma(this.fa[0],this.fa[1])}else{if(this.sc())throw a.g.ra("This operation should not be performed on an empty geometry.");
b=new a.b;b.ma(this.fa[0],this.fa[1]);return b}};c.prototype.ic=function(a,b){"number"===typeof a?(this.qc(),null==this.fa&&this.ko(),this.fa[0]=a,this.fa[1]=b):(this.qc(),this.ic(a.x,a.y))};c.prototype.Lw=function(){if(this.sc())throw a.g.ra("This operation should not be performed on an empty geometry.");var b=new a.ee;b.x=this.fa[0];b.y=this.fa[1];this.description.WC()?b.z=this.fa[2]:b.z=a.pa.ue(1);return b};c.prototype.Py=function(b){this.qc();var c=this.hasAttribute(1);c||a.pa.nD(1,b.z)||(this.Ne(1),
c=!0);null==this.fa&&this.ko();this.fa[0]=b.x;this.fa[1]=b.y;c&&(this.fa[2]=b.z)};c.prototype.lk=function(){if(this.sc())throw a.g.ra("This operation should not be performed on an empty geometry.");return this.fa[0]};c.prototype.qS=function(a){this.setAttribute(0,0,a)};c.prototype.mk=function(){if(this.sc())throw a.g.ra("This operation should not be performed on an empty geometry.");return this.fa[1]};c.prototype.$F=function(a){this.setAttribute(0,1,a)};c.prototype.lO=function(){return this.ld(1,
0)};c.prototype.rS=function(a){this.setAttribute(1,0,a)};c.prototype.NN=function(){return this.ld(2,0)};c.prototype.bS=function(a){this.setAttribute(2,0,a)};c.prototype.Qc=function(){return this.nC(3,0)};c.prototype.ld=function(b,c){var d=this.description.zf(b);return 0<=d?this.fa[this.description.fj(d)+c]:a.pa.ue(b)};c.prototype.nC=function(b,c){var d=this.description.zf(b);return 0<=d?this.fa[this.description.fj(d)+c]:a.pa.ue(b)};c.prototype.setAttribute=function(a,b,c){this.qc();var d=this.description.zf(a);
0>d&&(this.Ne(a),d=this.description.zf(a));null==this.fa&&this.ko();this.fa[this.description.fj(d)+b]=c};c.prototype.D=function(){return 33};c.prototype.fb=function(){return 0};c.prototype.Ja=function(){this.qc();null!=this.fa&&(this.fa[0]=NaN,this.fa[1]=NaN)};c.prototype.nm=function(b){if(null!=this.fa){for(var c=a.Od.iu(b,this.description),d=[],e=0,f=0,h=b.Aa;f<h;f++){var g=b.Hd(f),q=a.pa.Wa(g);if(-1==c[f])for(var n=a.pa.ue(g),g=0;g<q;g++)d[e]=n,e++;else{n=this.description.fj(c[f]);for(g=0;g<q;g++)d[e]=
this.fa[n],e++,n++}}this.fa=d}this.description=b};c.prototype.ko=function(){this.iF(this.description.le.length);c.ob(this.description.le,this.fa,this.description.le.length);this.fa[0]=NaN;this.fa[1]=NaN};c.prototype.Oe=function(b){if(b instanceof a.Bg){if(!this.sc()){var c=this.w();b.Zi(c,c);this.ic(c)}}else this.sc()||(this.Ne(1),c=this.Lw(),this.Py(b.Qn(c)))};c.prototype.copyTo=function(b){if(33!=b.D())throw a.g.N();b.qc();null==this.fa?(b.Ja(),b.fa=null,b.Qf(this.description)):(b.Qf(this.description),
b.iF(this.description.le.length),c.ob(this.fa,b.fa,this.description.le.length))};c.prototype.Pa=function(){return new c(this.description)};c.prototype.s=function(){return this.sc()};c.prototype.sc=function(){return null==this.fa||isNaN(this.fa[0])||isNaN(this.fa[1])};c.prototype.Fp=function(a){a.Ja();this.description!=a.description&&a.Qf(this.description);a.Db(this)};c.prototype.o=function(a){this.sc()?a.Ja():(a.v=this.fa[0],a.C=this.fa[1],a.B=this.fa[0],a.G=this.fa[1])};c.prototype.Cn=function(a){if(this.sc())a.Ja();
else{var b=this.Lw();a.v=b.x;a.C=b.y;a.Je=b.z;a.B=b.x;a.G=b.y;a.ig=b.z}};c.prototype.Ah=function(b,c){var d=new a.Nd;if(this.sc())return d.Ja(),d;var e=this.ld(b,c);d.qa=e;d.va=e;return d};c.prototype.iF=function(b){if(null==this.fa)this.fa=a.I.Lh(b);else if(this.fa.length<b){for(var c=this.fa.slice(0),d=this.fa.length;d<b;d++)c[d]=0;this.fa=c}};c.ob=function(a,b,c){if(0<c)for(c=0;c<a.length;c++)b[c]=a[c]};c.prototype.lc=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;
if(this.sc())return a.sc()?!0:!1;for(var b=0,d=this.description.le.length;b<d;b++)if(this.fa[b]!=a.fa[b])return!1;return!0};c.prototype.hc=function(){var b=this.description.hc();if(!this.sc())for(var c=0,d=this.description.le.length;c<d;c++)var e=this.fa[c],e=a.I.truncate(e^e>>>32),b=a.I.kg(e,b);return b};c.prototype.Rf=function(){return null};return c}(a.T);a.Va=b})(z||(z={}));(function(a){var b=function(){function a(b,c,d){void 0!==b&&(this.x=b,this.y=c,this.z=d)}a.Oa=function(b,c,d){var e=new a;
e.x=b;e.y=c;e.z=d;return e};a.prototype.K=function(a,b,c){this.x=a;this.y=b;this.z=c};a.prototype.Lu=function(){this.z=this.y=this.x=0};a.prototype.normalize=function(){var a=this.length();0==a&&(this.x/=a,this.y/=a,this.z/=a)};a.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};a.prototype.sub=function(b){return new a(this.x-b.x,this.y-b.y,this.z-b.z)};a.prototype.Ap=function(b){return new a(this.x*b,this.y*b,this.z*b)};a.prototype.FA=function(){this.x=NaN};
a.prototype.pv=function(){return isNaN(this.x)};return a}();a.ee=b})(z||(z={}));(function(a){var b=function(){function b(a,c,d){this.gu=this.Yt=null;this.Gf=c;this.KP=c.y-d;this.JP=c.y+d;this.xp=0;this.ix=a;this.ka=d;this.UP=d*d;this.jx=0!=d;this.xt=!1}b.prototype.result=function(){return 0!=this.xp?1:0};b.prototype.DJ=function(b){b=b.Kb(b.Gd(this.Gf,!1));return a.b.Zb(b,this.Gf)<=this.UP?!0:!1};b.prototype.WB=function(a){if(!this.jx&&(this.ix&&this.Gf.ub(a.Mb())||this.Gf.ub(a.oc())))this.xt=!0;else if(a.ja==
this.Gf.y&&a.ja==a.ha){if(this.ix&&!this.jx){var b=Math.max(a.na,a.la);this.Gf.x>Math.min(a.na,a.la)&&this.Gf.x<b&&(this.xt=!0)}}else{var c=!1,b=Math.max(a.na,a.la);this.Gf.x>b?c=!0:this.Gf.x>=Math.min(a.na,a.la)&&(c=0<a.nt(!0,this.Gf.y,this.gu,null)&&this.gu[0]<=this.Gf.x);if(c){if(this.Gf.y==a.Mb().y){if(this.Gf.y<a.oc().y)return}else if(this.Gf.y==a.oc().y&&this.Gf.y<a.Mb().y)return;this.xp=this.ix?this.xp^1:this.xp+(a.Mb().y>a.oc().y?1:-1)}}};b.prototype.zr=function(a){var b=a.Ah(0,1);if(b.qa>
this.JP||b.va<this.KP)return!1;if(this.jx&&this.DJ(a))return!0;if(b.qa>this.Gf.y||b.va<this.Gf.y)return!1;null==this.Yt&&(this.Yt=[null,null,null,null,null]);null==this.gu&&(this.gu=[0,0,0]);b=a.TC(this.Yt);if(0<b)for(a=0;a<b;a++){var c=this.Yt[a].get();this.WB(c);if(this.xt)return!0}else if(this.WB(a),this.xt)return!0;return!1};b.V=function(a,c,d){c=new b(0==a.Cm(),c,d);for(a=a.Ca();a.kb();)for(;a.La();)if(d=a.ia(),c.zr(d))return-1;return c.result()};b.Bd=function(c,d,e,f){var h=new a.i;c.dd(h);
h.P(f,f);var g=new b(0==c.Cm(),e,f);c=c.Ca();var n=new a.i;n.K(h);n.B=e.x+f;n.C=e.y-f;n.G=e.y+f;e=d.xw(n,f);for(f=e.next();-1!=f;f=e.next())if(c.Sb(d.da(f)),c.La()&&(f=c.ia(),g.zr(f)))return-1;return g.result()};b.xl=function(c,d,e){if(c.s())return 0;var f=new a.i;c.dd(f);f.P(e,e);if(!f.contains(d))return 0;f=c.pb;if(null!=f){var h=f.hi;if(null!=h){h=h.Kk(d.x,d.y);if(1==h)return 1;if(0==h)return 0}f=f.Ab;if(null!=f)return b.Bd(c,f,d,e)}return b.V(c,d,e)};b.aP=function(c,d,e,f){if(c.s())return 0;var h=
new a.i;c.dd(h);h.P(f,f);if(!h.contains(d,e))return 0;h=c.pb;if(null!=h&&(h=h.hi,null!=h)){h=h.Kk(d,e);if(1==h)return 1;if(0==h)return 0}return b.V(c,a.b.Oa(d,e),f)};b.$O=function(a,c,d){return c.s()?0:b.xl(a,c.w(),d)};b.vD=function(c,d,e,f,h){var g=new a.i;c.dd(g);g.P(f,f);if(!g.contains(e))return 0;var n=new b(!0,e,f);if(null!=h){var p=new a.i;p.K(g);p.B=e.x+f;p.C=e.y-f;p.G=e.y+f;c=c.Ca();f=h.xw(p,f);for(p=f.next();-1!=p;p=f.next())if(c.Sb(h.da(p),d),c.La()&&c.Qa==d&&(p=c.ia(),n.zr(p)))return-1}else if(c=
c.Ca(),c.vy(d),c.kb())for(;c.La();)if(p=c.ia(),n.zr(p))return-1;return n.result()};b.tD=function(c,d,e){var f=new a.i;c.dd(f);f.P(e,e);if(!f.contains(d))return 0;d=new b(!1,d,e);for(e=c.Ca();e.kb();)if(!(0>c.oo(e.Qa))){for(d.xp=0;e.La();)if(f=e.ia(),d.zr(f))return-1;if(0!=d.xp)return 1}return d.result()};b.$i=function(c,d,e,f,h){var g=c.Ca();g.vy(d);if(!g.kb()||!g.La())throw a.g.ra("corrupted geometry");for(d=2;2==d&&g.La();)d=g.ia().Kb(0.5),d=b.vD(c,e,d,f,h);if(2==d)throw a.g.ra("internal error");
return 1==d?!0:!1};b.An=function(a,b){var c=a.F();return 16>c?!1:2*c+1*(Math.log(c)/Math.log(2))*b<1*c*b};return b}();a.ff=b})(z||(z={}));(function(a){var b=function(a){function b(c){a.call(this,!0,c)}C(b,a);b.prototype.Pa=function(){return new b(this.description)};b.prototype.fb=function(){return 2};b.prototype.D=function(){return 1736};return b}(a.al);a.Ka=b})(z||(z={}));(function(a){(function(a){a[a.PiPOutside=0]="PiPOutside";a[a.PiPInside=1]="PiPInside";a[a.PiPBoundary=2]="PiPBoundary"})(a.pI||
(a.pI={}));var b=function(){function b(){}b.uD=function(b,c,d){b=a.ff.$O(b,c,d);return 0==b?0:1==b?1:2};b.he=function(b,c,d){b=a.ff.xl(b,c,d);return 0==b?0:1==b?1:2};b.CH=function(b,c,d,e){b=a.ff.aP(b,c,d,e);return 0==b?0:1==b?1:2};b.gU=function(b,c,d,e){return 0==a.ff.vD(b,c,d,e,null)?0:1};b.tD=function(b,c,d){return 0==a.ff.tD(b,c,d)?0:1};b.ZS=function(c,d,e,f,h){if(d.length<e||h.length<e)throw a.g.N();for(var g=0;g<e;g++)h[g]=b.he(c,d[g],f)};b.eT=function(c,d,e,f,h){if(d.length/2<e||h.length<e)throw a.g.N();
for(var g=0;g<e;g++)h[g]=b.CH(c,d[2*g],d[2*g+1],f)};b.nG=function(c,d,e,f,h){if(1736==c.D())b.ZS(c,d,e,f,h);else if(197==c.D()){var g=new a.i;c.o(g);b.jP(g,d,e,f,h)}else throw a.g.ra("invalid_call");};b.nU=function(c,d,e,f,h){if(1736==c.D())b.eT(c,d,e,f,h);else if(197==c.D()){var g=new a.i;c.o(g);b.mP(g,d,e,f,h)}else throw a.g.xa();};b.jP=function(b,c,d,e,f){if(c.length<d||f.length<d)throw a.g.N();if(b.s())for(e=0;e<d;e++)f[e]=0;else{b.P(0.5*-e,0.5*-e);b.P(0.5*e,0.5*e);for(e=0;e<d;e++)b.contains(c[e])?
f[e]=1:b.contains(c[e])?f[e]=2:f[e]=0}};b.mP=function(b,c,d,e,f){if(c.length/2<d||f.length<d)throw a.g.N();if(b.s())for(e=0;e<d;e++)f[e]=0;else{b.P(0.5*-e,0.5*-e);b.P(0.5*e,0.5*e);for(e=0;e<d;e++)b.contains(c[2*e],c[2*e+1])?f[e]=1:b.contains(c[2*e],c[2*e+1])?f[e]=2:f[e]=0}};b.lT=function(a,b,c,d,e){for(var f=0;f<c;f++)e[f]=a.Eq(b[f],d)?2:0};b.hT=function(a,b,c,d,e){var f=a.pb,h=null;null!=f&&(h=f.hi);for(var f=c,g=0;g<c;g++)if(e[g]=1,null!=h){var n=b[g];0==h.Kk(n.x,n.y)&&(e[g]=0,f--)}if(0!=f)for(a=
a.Ca();a.kb()&&0!=f;)for(;a.La()&&0!=f;){h=a.ia();for(g=0;g<c&&0!=f;g++)1==e[g]&&h.Eq(b[g],d)&&(e[g]=2,f--)}for(g=0;g<c;g++)1==e[g]&&(e[g]=0)};b.oG=function(c,d,e,f,h){var g=c.D();if(1607==g)b.hT(c,d,e,f,h);else if(a.T.Lc(g))b.lT(c,d,e,f,h);else throw a.g.ra("Invalid call.");};return b}();a.gd=b})(z||(z={}));(function(a){var b=function(a){function b(c,d){2==arguments.length?(a.call(this,!1,c.description),this.df(c),this.lineTo(d)):a.call(this,!1,c)}C(b,a);b.prototype.Pa=function(){return new b(this.description)};
b.prototype.fb=function(){return 1};b.prototype.D=function(){return 1607};return b}(a.al);a.Xa=b})(z||(z={}));(function(a){var b=function(){function a(){}a.GT=function(){};return a}();a.RT=b})(z||(z={}));(function(a){var b=function(){function b(){}b.Rv=function(a){return a*b.rQ};b.aG=function(a,c){return b.cR(c-a)};b.kR=function(b){if(-360<=b&&720>b)return 0>b?b+=360:360<=b&&(b-=360),b;b=a.vi.gH(b);0>b&&(b+=360);return b};b.cR=function(a){a=b.kR(a);180<a&&(a-=360);return a};b.OT=0.0174532925199433;
b.rQ=57.29577951308232;return b}(),c=function(){function c(){}c.qo=function(b,c){var d=new a.i;b.o(d);var e=a.Ya.Fm(c),f=new a.i;f.K(e);f.v=d.v;f.B=d.B;f.P(0.01*f.ba(),0);e=a.Ia.zd(c,d,!1);return f.contains(d)?b:a.Ed.clip(b,f,e,0)};c.Rw=function(b,d,e,f){if(!a.Ya.Qo(d))throw a.g.N();var h=a.Ia.Cg(d,b,!1),g=a.Ya.Fm(d),n=a.Ya.Em(d),p=n.Se().Dj,m=a.Ya.ft(n),n=a.Ya.Ts(n),m=m*(2-m),s=new a.Nd;g.wu(s);var t=[[0,0],[0,0]];2==a.Nf.Am(d)?(t[0][0]=c.pu(f,s),t[0][1]=g.Vs(),a.Ya.tu(),g=t[0][0]*p):g=f*p;var u=
new a.ca,v=new a.fd;b=v.Eb(b);for(var w=[0],x=new a.b,A=new a.b,G=new a.b,B=new a.b,z=new a.b,C=new a.b,L=v.Vb(b);-1!=L;L=v.bc(L)){var K=v.Cb(L);v.w(K,G);for(var M=!1,O=K=v.X(K);-1!=O;O=v.X(O)){if(O==K){if(M)break;M=!0}v.w(O,B);if((h<f-G.x&&B.x-f>h||h<f-B.x&&G.x-f>h||h<-B.y&&G.y>h)&&!(Math.abs(G.x-B.x)>=0.5*s.aa())&&(2==a.Nf.Am(d)?(t[0][0]=c.pu(G.x,s),t[0][1]=G.y,t[1][0]=c.pu(B.x,s),t[1][1]=B.y,a.Ya.YQ(),z.x=t[0][0]*p,z.y=t[0][1]*p,C.x=t[1][0]*p,C.y=t[1][1]*p):(z.x=G.x*p,z.y=G.y*p,C.x=B.x*p,C.y=B.y*
p),C.x=6.283185307179586*(B.x-G.x)/s.aa()+z.x,A.x=g,A.y=c.yH(n,m,z,C,g,e),!isNaN(A.y))){a.zb.Rd(n,m,z.x,z.y,C.x,C.y,u,null,null,e);var I=u.l;a.zb.Rd(n,m,z.x,z.y,A.x,A.y,u,null,null,e);var F=u.l;2==a.Nf.Am(d)?(t[0][0]=A.x/p,t[0][1]=A.y/p,a.Ya.qN(),x.y=t[0][1],x.x=f):(x.x=f,x.y=A.y/p);w[0]=0<I?a.I.Kr(F/I,0,1):0.5;0!=w[0]&&1!=w[0]&&(I=v.Ua(O),v.Mr(I,w,1),v.ic(v.X(I),x.x,x.y))}G.J(B)}}return v.hf(b)};c.aN=function(b,d,e){if(b.s())return b;var f=a.Ya.IC(d);return c.gC(b,0-180*f,360*f,d,e)};c.yH=function(b,
d,e,f,h,g){if(3.141592653589793<=Math.abs(e.x-f.x)||!c.Jv(e.x,f.x,h))return NaN;var n;e.x>f.x?n=f:(n=e,e=f);f=new a.ca(0);var p=new a.ca(0),m=new a.ca(0);a.zb.Rd(b,d,n.x,n.y,e.x,e.y,p,f,null,g);var s=p.l,t=0,u=1,v=new a.b;for(v.J(n);s*(u-t)>1E-12*b;){var w=0.5*(t+u);a.zb.dk(b,d,n.x,n.y,s*w,f.l,p,m,g);v.x=p.l;v.y=m.l;if(v.x==h)break;if(c.Jv(n.x,v.x,h))u=w;else if(c.Jv(e.x,v.x,h))t=w;else return NaN}return v.y};c.Jv=function(a,c,d){a=b.Rv(a);c=b.aG(a,b.Rv(c));d=b.aG(a,b.Rv(d));return 0==d||0<c&&0<d&&
d<=c||0>c&&0>d&&d>=c?!0:!1};c.pu=function(a,b){var c=b.va-b.qa;return b.Sy(a-Math.floor((a-b.qa)/c)*c)};c.eU=function(b,c,d,e){var f=new a.Nd;f.K(c,d);d=e.aa();b=Math.floor((b-c)/d)*d+b;for(f=f.Af();Math.abs(b-f)>Math.abs(b+d-f);)b+=d;return b};c.cU=function(b,c,d,e,f){var h;d.y>e.y?h=e:(h=d,d=e);e=new a.Nd;e.K(h.y,d.y);if(!e.contains(0)||3.141592653589793<=Math.abs(h.x-d.x))return NaN;if(h.x==d.x)return h.x;var g=new a.ca(0),q=new a.ca(0),n=new a.ca(0);a.zb.Rd(b,c,h.x,h.y,d.x,d.y,q,g,null,f);var p=
q.l,m=0,s=1,t=new a.b;for(t.J(h);p*(s-m)>1E-12*b;){var u=0.5*(m+s);a.zb.dk(b,c,h.x,h.y,p*u,g.l,q,n,f);t.x=q.l;t.y=n.l;e.K(h.y,t.y);if(0==t.y)break;if(e.contains(0))s=u;else if(e.K(d.y,t.y),e.contains(0))m=u;else return NaN}return t.x};c.gC=function(b,c,d,e,f){var h=new a.i;b.o(h);if(h.s())return b;var g=new a.Nd;h.wu(g);var q=new a.Nd;q.K(c,c+d);if(q.contains(g)&&q.va!=g.va)return b;var n=new a.i;n.K(h);var p=b.D();if(33==p){n=f?b:b.vm();h=n.lk();if(h<q.qa||h>=q.va||h==q.va)h+=Math.ceil((q.qa-h)/
d)*d,h=q.Sy(h),n.qS(h);return n}if(550==p){n=f?b:b.vm();e=n.mc(0);p=2*n.F();b=!1;for(f=0;f<p;f+=2)if(h=e.read(f),h<q.qa||h>=q.va||h==q.va)b=!0,h+=Math.ceil((q.qa-h)/d)*d,h=q.Sy(h),e.write(f,h);b&&n.ce(1993);return n}if(q.contains(g))return b;if(197==p)return d=f?b:b.vm(),h.Ga(n),d.Cu(h),d;var m=0.1*Math.max(h.ba(),h.aa());n.P(0,m);q=b;b=e.Ko();f=a.wi.local();for(var s=new a.Bg,t=0;;){var u=Math.floor((g.qa-c)/d),v=Math.ceil((g.va-c)/d);if(3<v-u){u=Math.floor(0.5*(v+u));n.v=h.v-m;n.B=c+d*u;var w=a.Ed.clip(q,
n,b,0);n.v=n.B;n.B=h.B+m;var x=a.Ed.clip(q,n,b,0);s.Nn((u-v)*d,0);x.Oe(s);1736==p?q=f.$(w,x,e,null):(q=w,q.add(x,!1));q.o(h);h.wu(g);t++}else break}n.v=c;n.B=c+d;c=new a.i;c.K(n);c.P(b,0);c=Math.floor((h.v-n.v)/d)*d;0!=c?(n.move(c,0),s.Nn(-c,0)):s.IF();c=1607==p?new a.Xa(q.description):new a.Ka(q.description);g=new a.i;for(m=new a.i;h.B>n.v;){t=a.Ed.clip(q,n,b,0);t.o(m);if(1607==p?!t.s()&&(m.aa()>b||m.ba()>b):!t.s()&&(1736!=p||m.aa()>b))t.Oe(s),t.o(m),c.o(g),g.P(b,b),g.jc(m)&&1736==p?c=f.$(c,t,e,
null):c.add(t,!1);n.move(d,0);s.shift(-d,0)}return c};c.ZQ=function(b,c,d,e){var f=new a.pe(d.description);f.Pd(d,0,-1);var f=a.Ya.Wl(f,b,c),h=d.F();e.Ja();if(!a.Ya.Qo(b)||h!=f.F())return!1;var g=new a.i;d.o(g);var q=new a.i;f.o(q);g=g.aa();q=q.aa();if(0!=g&&0!=q){if(q/=g,b=a.Ya.Fm(c).aa()/a.Ya.Fm(b).aa(),1E-10<Math.abs(q/b-1))return!1}else if(0!=g||0!=q)return!1;e.add(d,!1);for(d=0;d<h;d++)b=f.Fa(d),e.ic(d,b);return!0};c.dU=function(){throw a.g.qe();};return c}();a.gh=c})(z||(z={}));(function(a){(function(a){a[a.rightSide=
1]="rightSide"})(a.sI||(a.sI={}));var b=function(){function b(c,d,e){this.Nq=new a.b;void 0===c?this.tn=-1:(this.Nq.J(c),this.tn=d,this.Da=e,this.Ut=0)}b.prototype.UF=function(a){this.Ut=a?this.Ut|1:this.Ut&-2};b.prototype.s=function(){return 0>this.tn};b.prototype.pw=function(){if(this.s())throw a.g.ra("invalid call");return new a.Va(this.Nq.x,this.Nq.y)};b.prototype.gb=function(){if(this.s())throw a.g.ra("invalid call");return this.tn};b.prototype.sw=function(){if(this.s())throw a.g.ra("invalid call");
return this.Da};b.prototype.Xw=function(){return 0!=(this.Ut&1)};b.prototype.tv=function(a,b,c,d){this.Nq.x=a;this.Nq.y=b;this.tn=c;this.Da=d};return b}();a.dl=b})(z||(z={}));(function(a){var b=function(){function b(){}b.prototype.Fn=function(b,c){this.Vg.resize(0);this.ai.length=0;this.Aj=-1;b.dd(this.Kj);this.Kj.P(c,c);this.Kj.jc(this.Ab.Qb)?((this.Iq=a.T.Lc(b.D()))?(this.rE=b.Mb(),this.qE=b.oc(),this.ka=c):this.ka=NaN,this.Vg.add(this.Ab.Ze),this.ai.push(this.Ab.Qb),this.ar=this.Ab.sq(this.Ab.Ze)):
this.ar=-1};b.prototype.Ch=function(a,b){this.Vg.resize(0);this.ai.length=0;this.Aj=-1;this.Kj.K(a);this.Kj.P(b,b);this.ka=NaN;this.Kj.jc(this.Ab.Qb)?(this.Vg.add(this.Ab.Ze),this.ai.push(this.Ab.Qb),this.ar=this.Ab.sq(this.Ab.Ze),this.Iq=!1):this.ar=-1};b.prototype.next=function(){if(0==this.Vg.size)return-1;this.Aj=this.ar;var b=null,d=null,e,f=null,h=null;this.Iq&&(b=new a.b,d=new a.b,f=new a.i);for(var g=!1;!g;){for(;-1!=this.Aj;){e=this.Ab.kw(this.Ab.Us(this.Aj));if(e.jc(this.Kj))if(this.Iq){if(b.J(this.rE),
d.J(this.qE),f.K(e),f.P(this.ka,this.ka),0<f.Nv(b,d)){g=!0;break}}else{g=!0;break}this.Aj=this.Ab.at(this.Aj)}if(-1==this.Aj){e=this.Vg.tc();var q=this.ai[this.ai.length-1];null==h&&(h=[],h[0]=new a.i,h[1]=new a.i,h[2]=new a.i,h[3]=new a.i);c.BF(q,h);this.Vg.af();this.ai.length-=1;for(q=0;4>q;q++){var n=this.Ab.zo(e,q);if(-1!=n&&0<this.Ab.gO(n)&&h[q].jc(this.Kj))if(this.Iq){if(b.J(this.rE),d.J(this.qE),f.K(h[q]),f.P(this.ka,this.ka),0<f.Nv(b,d)){var p=new a.i;p.K(h[q]);this.Vg.add(n);this.ai.push(p)}}else p=
new a.i,p.K(h[q]),this.Vg.add(n),this.ai.push(p)}if(0==this.Vg.size)return-1;this.Aj=this.Ab.sq(this.Vg.get(this.Vg.size-1))}}this.ar=this.Ab.at(this.Aj);return this.Aj};b.HL=function(c,d,e){var f=new b;f.Ab=c;f.Kj=new a.i;f.Vg=new a.ga(0);f.ai=[];f.Fn(d,e);return f};b.GL=function(c,d,e){var f=new b;f.Ab=c;f.Kj=new a.i;f.Vg=new a.ga(0);f.ai=[];f.Ch(d,e);return f};b.FL=function(c){var d=new b;d.Ab=c;d.Kj=new a.i;d.Vg=new a.ga(0);d.ai=[];return d};return b}();a.TT=b;var c=function(){function c(b,d){this.Ye=
new a.Fc(11);this.qh=new a.Fc(5);this.Jq=[];this.Rt=new a.ga(0);this.Qb=new a.i;this.Rj(b,d)}c.prototype.reset=function(a,b){this.Ye.Nh(!1);this.qh.Nh(!1);this.Jq.length=0;this.Rt.clear(!1);this.Rj(a,b)};c.prototype.lg=function(a,b){return this.lt(a,b,0,this.Qb,this.Ze,!1,-1)};c.prototype.kt=function(a,b,c){c=-1==c?this.Ze:this.KC(c);var d=this.ba(c),e=this.CN(c);return this.lt(a,b,d,e,c,!1,-1)};c.prototype.da=function(a){return this.yN(a)};c.prototype.uC=function(a){return this.kw(this.Us(a))};c.prototype.ba=
function(a){return this.Xs(a)};c.prototype.CN=function(b){var c=new a.i;c.K(this.Qb);var d=this.Xs(b);b=this.EC(b);for(var e=0;e<2*d;e+=2){var f=a.I.truncate(3&b>>e);0==f?(c.v=0.5*(c.v+c.B),c.C=0.5*(c.C+c.G)):1==f?(c.B=0.5*(c.v+c.B),c.C=0.5*(c.C+c.G)):(2==f?c.B=0.5*(c.v+c.B):c.v=0.5*(c.v+c.B),c.G=0.5*(c.C+c.G))}return c};c.prototype.gO=function(a){return this.Kw(a)};c.prototype.KN=function(a,c){return b.HL(this,a,c)};c.prototype.xw=function(a,c){return b.GL(this,a,c)};c.prototype.Re=function(){return b.FL(this)};
c.prototype.Rj=function(b,c){if(0>c||32<2*c)throw a.g.N("invalid height");this.GP=c;this.Qb.K(b);this.Ze=this.Ye.be();this.Ku(this.Ze,0);this.Eu(this.Ze,0);this.LF(this.Ze,0);this.HF(this.Ze,0)};c.prototype.lt=function(b,d,e,f,h,g,n){if(!f.contains(d))return 0==e?-1:this.lt(b,d,0,this.Qb,this.Ze,g,n);if(!g)for(var p=h;-1!=p;p=this.UN(p))this.Ku(p,this.Kw(p)+1);p=new a.i;p.K(f);f=h;var m=[];m[0]=new a.i;m[1]=new a.i;m[2]=new a.i;for(m[3]=new a.i;e<this.GP&&this.IK(f);e++){c.BF(p,m);for(var s=!1,t=
0;4>t;t++)if(m[t].contains(d)){var s=!0,u=this.zo(f,t);-1==u&&(u=this.OL(f,t));this.Ku(u,this.Kw(u)+1);f=u;p.K(m[t]);break}if(!s)break}return this.zO(b,d,e,p,f,g,h,n)};c.prototype.zO=function(a,b,c,d,e,f,h,g){var q=this.AC(e);if(f){if(e==h)return g;this.mM(g);f=g}else f=this.QL(),this.By(f,a),this.IR(this.Us(f),b);this.gS(f,e);-1!=q?(this.Ju(f,q),this.Fu(q,f)):this.DF(e,f);this.Fy(e,f);this.Eu(e,this.Zs(e)+1);this.HK(e)&&this.$M(c,d,e);return f};c.prototype.mM=function(a){var b=this.KC(a),c=this.AC(b),
d=this.$N(a),e=this.at(a);this.sq(b)==a?(-1!=e?this.Ju(e,-1):this.Fy(b,-1),this.DF(b,e)):c==a?(this.Fu(d,-1),this.Fy(b,d)):(this.Ju(e,d),this.Fu(d,e));this.Ju(a,-1);this.Fu(a,-1);this.Eu(b,this.Zs(b)-1)};c.BF=function(a,b){var c=0.5*(a.v+a.B),d=0.5*(a.C+a.G);b[0].K(c,d,a.B,a.G);b[1].K(a.v,d,c,a.G);b[2].K(a.v,a.C,c,d);b[3].K(c,a.C,a.B,d)};c.prototype.HK=function(a){return 8==this.Zs(a)&&!this.VC(a)};c.prototype.$M=function(a,b,c){var d,e,f=this.sq(c);do e=this.Us(f),d=this.qh.O(f,0),e=this.kw(e),this.lt(d,
e,a,b,c,!0,f),f=this.at(f);while(-1!=f)};c.prototype.IK=function(a){return 8<=this.Zs(a)||this.VC(a)};c.prototype.VC=function(a){return-1!=this.zo(a,0)||-1!=this.zo(a,1)||-1!=this.zo(a,2)||-1!=this.zo(a,3)};c.prototype.OL=function(a,b){var c=this.Ye.be();this.MR(a,b,c);this.Ku(c,0);this.Eu(c,0);this.Tj(c,a);this.HF(c,this.Xs(a)+1);this.LF(c,b<<2*this.Xs(a)|this.EC(a));return c};c.prototype.QL=function(){var b=this.qh.be(),c;0<this.Rt.size?(c=this.Rt.tc(),this.Rt.af()):(c=this.Jq.length,this.Jq.push(new a.i));
this.JR(b,c);return b};c.prototype.zo=function(a,b){return this.Ye.O(a,b)};c.prototype.MR=function(a,b,c){this.Ye.L(a,b,c)};c.prototype.sq=function(a){return this.Ye.O(a,4)};c.prototype.DF=function(a,b){this.Ye.L(a,4,b)};c.prototype.AC=function(a){return this.Ye.O(a,5)};c.prototype.Fy=function(a,b){this.Ye.L(a,5,b)};c.prototype.EC=function(a){return this.Ye.O(a,6)};c.prototype.LF=function(a,b){this.Ye.L(a,6,b)};c.prototype.Zs=function(a){return this.Ye.O(a,7)};c.prototype.Kw=function(a){return this.Ye.O(a,
8)};c.prototype.Eu=function(a,b){this.Ye.L(a,7,b)};c.prototype.Ku=function(a,b){this.Ye.L(a,8,b)};c.prototype.UN=function(a){return this.Ye.O(a,9)};c.prototype.Tj=function(a,b){this.Ye.L(a,9,b)};c.prototype.Xs=function(a){return this.Ye.O(a,10)};c.prototype.HF=function(a,b){this.Ye.L(a,10,b)};c.prototype.yN=function(a){return this.qh.O(a,0)};c.prototype.By=function(a,b){this.qh.L(a,0,b)};c.prototype.$N=function(a){return this.qh.O(a,1)};c.prototype.at=function(a){return this.qh.O(a,2)};c.prototype.Ju=
function(a,b){this.qh.L(a,1,b)};c.prototype.Fu=function(a,b){this.qh.L(a,2,b)};c.prototype.KC=function(a){return this.qh.O(a,3)};c.prototype.gS=function(a,b){this.qh.L(a,3,b)};c.prototype.Us=function(a){return this.qh.O(a,4)};c.prototype.JR=function(a,b){this.qh.L(a,4,b)};c.prototype.kw=function(a){return this.Jq[a]};c.prototype.IR=function(a,b){this.Jq[a].K(b)};return c}();a.co=c})(z||(z={}));(function(a){(function(a){a[a.Outside=0]="Outside";a[a.Inside=1]="Inside";a[a.Border=2]="Border"})(a.wH||
(a.wH={}));var b=function(){function a(b,c){this.Hg=null;this.SP=c;this.Hg=b}a.prototype.Bu=function(a,b){this.PD!=b&&a.flush();this.PD=b};a.prototype.XB=function(a,b){for(var c=0;c<b;)for(var d=a[c++],e=a[c++],f=a[c++]*this.SP;d<e;d++)this.Hg[f+(d>>4)]|=this.PD<<2*(d&15)};return a}();a.VT=b;var c=function(){function c(a,b,d){this.Hg=null;this.Qx=this.Sx=this.zE=this.xE=this.Qq=this.VD=this.tf=this.Pl=0;this.ii=this.Nj=this.sk=null;this.jt(a,b,d)}c.create=function(b,d,e){if(!c.Cc(b))throw a.g.N();
return c.Id(b,d,e)};c.ti=function(b,d,e){if(!c.Cc(b))throw a.g.N();return c.ye(b,d,e)};c.jR=function(b){switch(b){case 0:b=1024;break;case 1:b=16384;break;case 2:b=262144;break;default:throw a.g.ra("Internal Error");}return b};c.Cc=function(a){return a.s()||1607!=a.D()&&1736!=a.D()?!1:!0};c.prototype.KM=function(b,c){for(var d=c.Ca(),e=new a.b,f=new a.b;d.kb();)for(;d.La();){var h=d.ia();if(322!=h.D())throw a.g.ra("Internal Error");b.Zi(h.Mb(),e);b.Zi(h.oc(),f);this.ii.zv(e.x,e.y,f.x,f.y)}this.ii.fF(a.ev.$u)};
c.prototype.LM=function(){throw a.g.ra("Internal Error");};c.prototype.cw=function(b,c){for(var d=1;4>d;d++)b.zv(c[d-1].x,c[d-1].y,c[d].x,c[d].y);b.zv(c[3].x,c[3].y,c[0].x,c[0].y);this.ii.fF(a.ev.$u)};c.prototype.kG=function(b,c,d){for(var e=[null,null,null,null],f=0;f<e.length;f++)e[f]=new a.b;c=c.Ca();d=this.Nj.TS(d)+1.5;for(var f=new a.b,h=new a.b,g=new a.b,q=new a.b,n=new a.b,p=new a.i,m=new a.b;c.kb();){var s=!1,t=!0;for(m.ma(0,0);c.La();){var u=c.ia();q.x=u.na;q.y=u.ja;n.x=u.la;n.y=u.ha;p.Ja();
p.Db(q.x,q.y);p.Oj(n.x,n.y);if(this.sk.rD(p)){this.Nj.Zi(n,n);t?(this.Nj.Zi(q,q),m.J(q),t=!1):q.J(m);f.pc(n,q);var u=f.length(),v=0.5>u;0==u?f.ma(1,0):(v||m.J(n),f.scale(d/u),h.ma(-f.y,f.x),g.ma(f.y,-f.x),q.sub(f),n.add(f),e[0].add(q,h),e[1].add(q,g),e[2].add(n,g),e[3].add(n,h),v?s=!0:this.cw(b,e))}else s&&(this.cw(b,e),s=!1),t=!0}s&&this.cw(b,e)}};c.prototype.fz=function(b){return a.I.truncate(b*this.VD+this.xE)};c.prototype.gz=function(b){return a.I.truncate(b*this.Qq+this.zE)};c.Id=function(a,
b,d){return new c(a,b,d)};c.ye=function(a,b,d){return new c(a,b,d)};c.prototype.jt=function(c,d,e){this.tf=Math.max(a.I.truncate(2*Math.sqrt(e)+0.5),64);this.Pl=a.I.truncate((2*this.tf+31)/32);this.sk=new a.i;this.Sx=d;e=0;for(var f=this.tf,h=this.Pl;8<=f;)e+=f*h,f=a.I.truncate(f/2),h=a.I.truncate((2*f+31)/32);this.Hg=a.I.Lh(e,0);this.ii=new a.ev;e=new b(this.Hg,this.Pl,this);this.ii.vS(this.tf,this.tf,e);c.o(this.sk);this.sk.P(d,d);var f=new a.i,h=a.i.Oa(1,1,this.tf-2,this.tf-2),g=d*h.aa();d*=h.ba();
f.K(this.sk.Af(),Math.max(g,this.sk.aa()),Math.max(d,this.sk.ba()));this.Qx=this.Sx;this.Nj=new a.Bg;this.Nj.wO(f,h);new a.Bg;switch(c.D()){case 550:e.Bu(this.ii,2);this.LM();break;case 1607:e.Bu(this.ii,2);this.kG(this.ii,c,this.Qx);break;case 1736:e.Bu(this.ii,1),this.KM(this.Nj,c),e.Bu(this.ii,2),this.kG(this.ii,c,this.Qx)}this.VD=this.Nj.mb;this.Qq=this.Nj.eb;this.xE=this.Nj.Nb;this.zE=this.Nj.Ob;this.BK()};c.prototype.BK=function(){this.ii.flush();for(var b=0,c=this.tf*this.Pl,d=this.tf,e=a.I.truncate(this.tf/
2),f=this.Pl,h=a.I.truncate((2*e+31)/32);8<d;){for(d=0;d<e;d++)for(var g=2*d,q=2*d+1,n=0;n<e;n++){var p=2*n,m=2*n+1,s=p>>4,p=2*(p&15),t=m>>4,m=2*(m&15),u=this.Hg[b+f*g+s]>>p&3,u=u|this.Hg[b+f*g+t]>>m&3,u=u|this.Hg[b+f*q+s]>>p&3,u=u|this.Hg[b+f*q+t]>>m&3;this.Hg[c+h*d+(n>>4)]|=u<<2*(n&15)}d=e;f=h;b=c;e=a.I.truncate(d/2);h=a.I.truncate((2*e+31)/32);c=b+f*d}};c.prototype.Kk=function(a,b){if(!this.sk.contains(a,b))return 0;var c=this.fz(a),d=this.gz(b);if(0>c||c>=this.tf||0>d||d>=this.tf)return 0;c=this.Hg[this.Pl*
d+(c>>4)]>>2*(c&15)&3;return 0==c?0:1==c?1:2};c.prototype.Dn=function(b){if(!b.Ga(this.sk))return 0;var c=this.fz(b.v),d=this.fz(b.B),e=this.gz(b.C);b=this.gz(b.G);0>c&&(c=0);0>e&&(e=0);d>=this.tf&&(d=this.tf-1);b>=this.tf&&(b=this.tf-1);if(c>d||e>b)return 0;for(var f=Math.max(d-c,1)*Math.max(b-e,1),h=0,g=this.Pl,q=this.tf,n=0;;){if(32>f||16>q){for(f=e;f<=b;f++)for(var p=c;p<=d;p++)if(n=this.Hg[h+g*f+(p>>4)]>>2*(p&15)&3,1<n)return 2;if(0==n)return 0;if(1==n)return 1}h+=g*q;q=a.I.truncate(q/2);g=a.I.truncate((2*
q+31)/32);c=a.I.truncate(c/2);e=a.I.truncate(e/2);d=a.I.truncate(d/2);b=a.I.truncate(b/2);f=Math.max(d-c,1)*Math.max(b-e,1)}};c.prototype.cO=function(){return this.tf*this.Pl};return c}();a.dA=c})(z||(z={}));(function(a){(function(a){a[a.contains=1]="contains";a[a.within=2]="within";a[a.equals=3]="equals";a[a.disjoint=4]="disjoint";a[a.touches=8]="touches";a[a.crosses=16]="crosses";a[a.overlaps=32]="overlaps";a[a.unknown=0]="unknown";a[a.intersects=1073741824]="intersects"})(a.zI||(a.zI={}));var b=
function(){function a(){}a.Oa=function(b,c,d,e,f,h,g,n){var p=new a;p.Wt=b;p.Jl=c;p.Oi=d;p.ji=e;p.dE=f;p.tU=h;p.uU=g;p.vU=n;return p};return a}(),c=function(){function b(){}b.vT=function(c,d,e){if(!b.pQ(c))return!1;var f=a.Ia.Cg(d,c,!1);d=!1;a.Wj.vB(c)&&(d=d||c.jv(f,e));f=c.D();1736!=f&&1607!=f||!a.Wj.tB(c)||0==e||(d=d||c.dj(e));1736!=f&&1607!=f||!a.Wj.uB(c)||0==e||(d=d||c.jJ());return d};b.pQ=function(b){return a.Wj.vB(b)||a.Wj.tB(b)||a.Wj.uB(b)};return b}();a.rT=c;c=function(){function c(){this.Tg=
[]}c.qy=function(b,d,e,f,h){var g=b.D(),n=d.D();if(197==g){if(197==n)return c.AQ(b,d,e,f);if(33==n)return 2==f?f=1:1==f&&(f=2),c.Iz(d,b,e,f)}else if(33==g){if(197==n)return c.Iz(b,d,e,f);if(33==n)return c.eR(b,d,e,f)}if(b.s()||d.s())return 4==f?!0:!1;var p=new a.i;b.o(p);var m=new a.i;d.o(m);var s=new a.i;s.K(p);s.Db(m);e=a.Ia.zd(e,s,!1);if(c.nj(p,m,e))return 4==f?!0:!1;p=!1;a.al.Lc(g)&&(g=new a.Xa(b.description),g.Bc(b,!0),b=g,g=1607);a.al.Lc(n)&&(n=new a.Xa(d.description),n.Bc(d,!0),d=n,n=1607);
if(197!=g&&197!=n){if(b.fb()<d.fb()||33==g&&550==n)2==f?f=1:1==f&&(f=2)}else 1736!=g&&197!=n&&(2==f?f=1:1==f&&(f=2));switch(g){case 1736:switch(n){case 1736:p=c.vr(b,d,e,f,h);break;case 1607:p=c.Vl(b,d,e,f,h);break;case 33:p=c.ur(b,d,e,f,h);break;case 550:p=c.tr(b,d,e,f,h);break;case 197:p=c.xD(b,d,e,f,h)}break;case 1607:switch(n){case 1736:p=c.Vl(d,b,e,f,h);break;case 1607:p=c.ey(b,d,e,f,h);break;case 33:p=c.xr(b,d,e,f,h);break;case 550:p=c.wr(b,d,e,f,h);break;case 197:p=c.WE(b,d,e,f)}break;case 33:switch(n){case 1736:p=
c.ur(d,b,e,f,h);break;case 1607:p=c.xr(d,b,e,f,h);break;case 550:p=c.pr(d,b,e,f,h)}break;case 550:switch(n){case 1736:p=c.tr(d,b,e,f,h);break;case 1607:p=c.wr(d,b,e,f,h);break;case 550:p=c.Wx(b,d,e,f,h);break;case 33:p=c.pr(b,d,e,f,h);break;case 197:p=c.oA(b,d,e,f)}break;case 197:switch(n){case 1736:p=c.xD(d,b,e,f,h);break;case 1607:p=c.WE(d,b,e,f);break;case 550:p=c.oA(d,b,e,f)}}return p};c.AQ=function(b,d,e,f){if(b.s()||d.s())return 4==f?!0:!1;var h=new a.i,g=new a.i,n=new a.i;b.o(h);d.o(g);n.K(h);
n.Db(g);b=a.Ia.zd(e,n,!1);switch(f){case 4:return c.nj(h,g,b);case 2:return c.Bz(g,h,b);case 1:return c.Bz(h,g,b);case 3:return c.ye(h,g,b);case 8:return c.kT(h,g,b);case 32:return c.fT(h,g,b);case 16:return c.cT(h,g,b)}return!1};c.Iz=function(b,d,e,f){if(b.s()||d.s())return 4==f?!0:!1;b=b.w();var h=new a.i,g=new a.i;d.o(h);g.K(b);g.Db(h);d=a.Ia.zd(e,g,!1);switch(f){case 4:return c.ru(b,h,d);case 2:return c.bx(b,h,d);case 1:return c.YL(b,h,d);case 3:return c.KA(b,h,d);case 8:return c.ax(b,h,d)}return!1};
c.eR=function(b,d,e,f){if(b.s()||d.s())return 4==f?!0:!1;b=b.w();d=d.w();var h=new a.i;h.K(b);h.Db(d);e=a.Ia.zd(e,h,!1);switch(f){case 4:return c.rM(b,d,e);case 2:return c.hz(d,b,e);case 1:return c.hz(b,d,e);case 3:return c.dB(b,d,e)}return!1};c.vr=function(a,b,d,e,f){switch(e){case 4:return c.dT(a,b,d);case 2:return c.su(b,a,d,f);case 1:return c.su(a,b,d,f);case 3:return c.TG(a,b,d);case 8:return c.vH(a,b,d);case 32:return c.bH(a,b,d,f)}return!1};c.Vl=function(a,b,d,e,f){switch(e){case 4:return c.gT(a,
b,d);case 1:return c.dy(a,b,d,f);case 8:return c.zH(a,b,d,f);case 16:return c.lR(a,b,d)}return!1};c.ur=function(a,b,d,e){switch(e){case 4:return c.YS(a,b,d);case 1:return c.qQ(a,b,d);case 8:return c.lH(a,b,d)}return!1};c.tr=function(a,b,d,e){switch(e){case 4:return c.OS(a,b,d);case 1:return c.hQ(a,b,d);case 8:return c.iH(a,b,d);case 16:return c.dR(a,b,d)}return!1};c.xD=function(a,b,d,e,f){if(c.ER(a,b,d))return 4==e?!0:!1;if(4==e)return!1;switch(e){case 2:return c.DH(a,b,d);case 1:return c.WP(a,b,
d);case 3:return c.OG(a,b,d);case 8:return c.eH(a,b,d,f);case 32:return c.WG(a,b,d,f);case 16:return c.zQ(a,b,d,f)}return!1};c.ey=function(a,b,d,e){switch(e){case 4:return c.EI(a,b,d);case 2:return c.JE(b,a,d);case 1:return c.JE(a,b,d);case 3:return c.QI(a,b,d);case 8:return c.cF(a,b,d);case 32:return c.$I(a,b,d);case 16:return c.LE(a,b,d)}return!1};c.xr=function(a,b,d,e){switch(e){case 4:return c.yI(a,b,d);case 1:return c.KH(a,b,d);case 8:return c.MG(a,b,d)}return!1};c.wr=function(a,b,d,e){switch(e){case 4:return c.vI(a,
b,d);case 1:return c.IH(a,b,d);case 8:return c.fJ(a,b,d);case 16:return c.QH(a,b,d)}return!1};c.WE=function(a,b,d,e){if(c.nI(a,b,d))return 4==e?!0:!1;if(4==e)return!1;switch(e){case 2:return c.WJ(a,b,d);case 1:return c.GH(a,b,d);case 3:return c.MI(a,b,d);case 8:return c.cJ(a,b,d);case 32:return c.XI(a,b,d);case 16:return c.MH(a,b,d)}return!1};c.Wx=function(a,b,d,e){switch(e){case 4:return c.xI(a,b,d);case 2:return c.kA(b,a,d);case 1:return c.kA(a,b,d);case 3:return c.LI(a,b,d);case 32:return c.bJ(a,
b,d)}return!1};c.pr=function(a,b,d,e){switch(e){case 4:return c.lA(a,b,d);case 2:return c.HJ(a,b,d);case 1:return c.PH(a,b,d);case 3:return c.mu(a,b,d)}return!1};c.oA=function(a,b,d,e){switch(e){case 4:return c.uI(a,b,d);case 2:return c.LG(a,b,d);case 1:return c.LH(a,b,d);case 3:return c.DI(a,b,d);case 8:return c.eJ(a,b,d);case 16:return c.mI(a,b,d)}return!1};c.TG=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);if(!c.ye(f,h,e))return!1;f=c.fc(b,d,!1);if(4==f||1==f||2==f)return!1;if(c.jA(b,d,
e))return!0;f=b.$b();h=d.$b();return Math.abs(f-h)>4*Math.max(b.F(),d.F())*e?!1:c.Vv(b,d,e,!0)};c.dT=function(a,b,d){var e=c.fc(a,b,!0);return 4==e?!0:1==e||2==e||1073741824==e?!1:c.ZC(a,b,d)};c.vH=function(a,b,d){var e=c.fc(a,b,!1);return 4==e||1==e||2==e?!1:c.AE(a,b,d,null)};c.bH=function(a,b,d,e){var f=c.fc(a,b,!1);return 4==f||1==f||2==f?!1:c.wD(a,b,d,e)};c.su=function(b,d,e,f){var h=new a.i,g=new a.i;b.o(h);d.o(g);if(!c.rc(h,g,e))return!1;h=c.fc(b,d,!1);return 4==h||2==h?!1:1==h?!0:c.bC(b,d,
e,f)};c.gT=function(a,b,d){var e=c.fc(a,b,!0);return 4==e?!0:1==e||1073741824==e?!1:c.ZC(a,b,d)};c.zH=function(a,b,d,e){var f=c.fc(a,b,!1);return 4==f||1==f?!1:c.CE(a,b,d,e)};c.lR=function(a,b,d){var e=c.fc(a,b,!1);return 4==e||1==e?!1:c.YC(a,b,d,null)};c.dy=function(b,d,e,f){var h=new a.i,g=new a.i;b.o(h);d.o(g);if(!c.rc(h,g,e))return!1;h=c.fc(b,d,!1);return 4==h?!1:1==h?!0:c.jC(b,d,e,f)};c.YS=function(b,c,d){return 0==a.gd.uD(b,c,d)?!0:!1};c.lH=function(a,b,d){b=b.w();return c.yD(a,b,d)};c.qQ=function(a,
b,d){b=b.w();return c.YB(a,b,d)};c.OS=function(b,d,e){var f=c.fc(b,d,!1);if(4==f)return!0;if(1==f)return!1;f=new a.i;b.o(f);f.P(e,e);for(var h=new a.b,g=0;g<d.F();g++)if(d.w(g,h),f.contains(h)){var n=a.gd.he(b,h,e);if(1==n||2==n)return!1}return!0};c.iH=function(b,c,d){var e=this.fc(b,c,!1);if(4==e||1==e)return!1;e=new a.i;b.o(e);e.P(d,d);var f,h=!1,g;g=b;for(var n=!1,q=0;q<c.F();q++){f=c.Fa(q);if(e.contains(f))if(f=a.gd.he(g,f,d),2==f)h=!0;else if(1==f)return!1;n||(!a.ff.An(b,c.F()-1)||null!=b.pb&&
null!=b.pb.Ab?g=b:(g=new a.Ka,b.copyTo(g),g.dj(1)),n=!0)}return h?!0:!1};c.dR=function(b,c,d){var e=this.fc(b,c,!1);if(4==e||1==e)return!1;var f=new a.i,e=new a.i,h=new a.i;b.o(f);c.o(h);e.K(f);e.P(d,d);var h=f=!1,g,n;n=b;for(var q=!1,p=0;p<c.F();p++){g=c.Fa(p);e.contains(g)?(g=a.gd.he(n,g,d),0==g?h=!0:1==g&&(f=!0)):h=!0;if(f&&h)return!0;q||(!a.ff.An(b,c.F()-1)||null!=b.pb&&null!=b.pb.Ab?n=b:(n=new a.Ka,b.copyTo(n),n.dj(1)),q=!0)}return!1};c.hQ=function(b,c,d){var e=new a.i,f=new a.i;b.o(e);c.o(f);
if(!this.rc(e,f,d))return!1;f=this.fc(b,c,!1);if(4==f)return!1;if(1==f)return!0;var f=!1,h,g;g=b;for(var n=!1,q=0;q<c.F();q++){h=c.Fa(q);if(!e.contains(h))return!1;h=a.gd.he(g,h,d);if(1==h)f=!0;else if(0==h)return!1;n||(!a.ff.An(b,c.F()-1)||null!=b.pb&&null!=b.pb.Ab?g=b:(g=new a.Ka,b.copyTo(g),g.dj(1)),n=!0)}return f};c.OG=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);if(!c.ye(f,h,e))return!1;f=new a.Ka;f.Wc(d,!1);return c.Vv(b,f,e,!0)};c.ER=function(b,d,e){var f=c.fc(b,d,!1);if(4==f)return!0;
if(1==f||2==f)return!1;var h=new a.i,f=new a.i;b.o(h);d.o(f);if(c.rc(f,h,e))return!1;h=new a.b;f.Yl(h);d=a.gd.he(b,h,e);if(0!=d)return!1;f.YE(h);d=a.gd.he(b,h,e);if(0!=d)return!1;f.Zl(h);d=a.gd.he(b,h,e);if(0!=d)return!1;f.aF(h);d=a.gd.he(b,h,e);if(0!=d)return!1;d=b.mc(0);h=new a.i;h.K(f);h.P(e,e);for(var g=0,n=b.F();g<n;g++){var p=d.read(2*g),m=d.read(2*g+1);if(h.contains(p,m))return!1}return!c.cA(b,f,e)};c.eH=function(b,d,e,f){var h=c.fc(b,d,!1);if(4==h||1==h||2==h)return!1;var h=new a.i,g=new a.i;
b.o(h);d.o(g);if(c.rc(g,h,e))return!1;if(g.aa()<=e&&g.ba()<=e)return d=d.qq(),c.yD(b,d,e);if(g.aa()<=e||g.ba()<=e)return h=new a.Xa,g=new a.Va,d.uf(0,g),h.df(g),d.uf(2,g),h.lineTo(g),c.CE(b,h,e,f);h=new a.Ka;h.Wc(d,!1);return c.AE(b,h,e,f)};c.WG=function(b,d,e,f){var h=c.fc(b,d,!1);if(4==h||1==h||2==h)return!1;var h=new a.i,g=new a.i;b.o(h);d.o(g);if(c.rc(g,h,e)||g.aa()<=e||g.ba()<=e)return!1;h=new a.Ka;h.Wc(d,!1);return c.wD(b,h,e,f)};c.DH=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);return c.rc(h,
f,e)};c.WP=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);if(!c.rc(f,h,e))return!1;f=c.fc(b,d,!1);if(4==f||2==f)return!1;if(1==f)return!0;if(h.aa()<=e&&h.ba()<=e)return d=d.qq(),c.YB(b,d,e);if(h.aa()<=e||h.ba()<=e)return h=new a.Xa,f=new a.Va,d.uf(0,f),h.df(f),d.uf(2,f),h.lineTo(f),c.jC(b,h,e,null);h=new a.Ka;h.Wc(d,!1);return c.bC(b,h,e,null)};c.zQ=function(b,d,e,f){var h=new a.i,g=new a.i;b.o(h);d.o(g);if(c.rc(g,h,e)||g.ba()>e&&g.aa()>e||g.ba()<=e&&g.aa()<=e)return!1;h=new a.Xa;g=new a.Va;
d.uf(0,g);h.df(g);d.uf(2,g);h.lineTo(g);return c.YC(b,h,e,f)};c.QI=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);return c.ye(f,h,e)&&4!=c.fc(b,d,!1)?c.jA(b,d,e)?!0:c.Vv(b,d,e,!1):!1};c.EI=function(b,c,d){return 4==this.fc(b,c,!1)?!0:(new a.cl(b,c,d,!0)).next()?!this.ED(b,c,d):!1};c.cF=function(b,d,e){if(4==c.fc(b,d,!1))return!1;var f=new a.qd(0);if(0!=c.Zv(b,d,e,f))return!1;for(var h=new a.pe,g=0;g<f.size;g+=2){var n=f.read(g),p=f.read(g+1);h.zs(n,p)}b=b.Rf();d=d.Rf();b.Pd(d,0,d.F());return c.lu(b,
h,e)};c.LE=function(b,d,e){if(4==c.fc(b,d,!1))return!1;var f=new a.qd(0);if(0!=c.Zv(b,d,e,f))return!1;for(var h=new a.pe,g=0;g<f.size;g+=2){var n=f.read(g),p=f.read(g+1);h.zs(n,p)}b=b.Rf();d=d.Rf();b.Pd(d,0,d.F());return!c.lu(b,h,e)};c.$I=function(a,b,d){return 4==c.fc(a,b,!1)?!1:c.iA(a,b,d)};c.JE=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);return c.rc(f,h,e)&&4!=c.fc(b,d,!1)?c.Wf(d,b,e,!1):!1};c.yI=function(a,b,d){if(4==c.fc(a,b,!1))return!0;b=b.w();return!c.ex(a,b,d)};c.MG=function(a,
b,d){if(4==c.fc(a,b,!1))return!1;b=b.w();return c.bw(a,b,d)};c.KH=function(a,b,d){if(4==c.fc(a,b,!1))return!1;b=b.w();return c.bA(a,b,d)};c.vI=function(a,b,d){return 4==c.fc(a,b,!1)?!0:!c.eA(a,b,d,!1)};c.fJ=function(b,c,d){if(4==this.fc(b,c,!1))return!1;var e=b.Ca(),f=new a.i,h=new a.i,g=new a.i;b.o(f);c.o(h);f.P(d,d);h.P(d,d);g.K(f);g.Ga(h);var n,q,f=null;n=b.pb;null!=n?(q=n.Ab,f=n.nn,null==q&&(q=a.Ia.ij(b,g))):q=a.Ia.ij(b,g);var p=q.Re(),m=null;null!=f&&(m=f.Re());var s=new a.b,t=new a.b,u=!1,v=
d*d,f=new a.Wk(c.F());for(n=0;n<c.F();n++)f.write(n,0);for(n=0;n<c.F();n++)if(c.w(n,s),g.contains(s))if(h.K(s.x,s.y,s.x,s.y),!(null!=m&&(m.Ch(h,d),-1==m.next()))){p.Ch(h,d);for(var w=p.next();-1!=w;w=p.next())if(e.Sb(q.da(w)),w=e.ia(),w.Kb(w.Gd(s,!1),t),a.b.Zb(s,t)<=v){f.write(n,1);u=!0;break}}if(!u)return!1;b=b.Rf();e=new a.pe;h=new a.b;for(n=0;n<c.F();n++)0!=f.read(n)&&(c.w(n,h),e.zs(h.x,h.y));return this.lu(b,e,d)};c.QH=function(b,c,d){if(4==this.fc(b,c,!1))return!1;var e=b.Ca(),f=new a.i,h=new a.i,
g=new a.i;b.o(f);c.o(h);f.P(d,d);h.P(d,d);g.K(f);g.Ga(h);var n,q,f=null;n=b.pb;null!=n?(q=n.Ab,f=n.nn,null==q&&(q=a.Ia.ij(b,g))):q=a.Ia.ij(b,g);var p=q.Re(),m=null;null!=f&&(m=f.Re());var s=new a.b,t=new a.b,u=!1,v=!1,w=d*d,f=new a.Wk(c.F());for(n=0;n<c.F();n++)f.write(n,0);for(n=0;n<c.F();n++)if(c.w(n,s),g.contains(s))if(h.K(s.x,s.y,s.x,s.y),null!=m&&(m.Ch(h,d),-1==m.next()))v=!0;else{p.Ch(h,d);for(var x=!1,A=p.next();-1!=A;A=p.next())if(e.Sb(q.da(A)),A=e.ia(),A.Kb(A.Gd(s,!1),t),a.b.Zb(s,t)<=w){f.write(n,
1);x=u=!0;break}x||(v=!0)}else v=!0;if(!u||!v)return!1;b=b.Rf();e=new a.pe;h=new a.b;for(n=0;n<c.F();n++)0!=f.read(n)&&(c.w(n,h),e.zs(h.x,h.y));return!this.lu(b,e,d)};c.IH=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);if(!c.rc(f,h,e)||4==c.fc(b,d,!1)||!c.eA(b,d,e,!0))return!1;b=b.Rf();return!c.nA(b,d,e)};c.MI=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);return h.ba()>e&&h.aa()>e?!1:c.ye(f,h,e)};c.nI=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);return c.rc(h,f,e)?!1:!c.cA(b,
h,e)};c.cJ=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);if(h.ba()<=e&&h.aa()<=e)return h=d.qq(),c.bw(b,h,e);if(h.ba()<=e||h.aa()<=e)return h=new a.Xa,f=new a.Va,d.uf(0,f),h.df(f),d.uf(2,f),h.lineTo(f),c.cF(b,h,e);b=b.Ca();d=new a.i;f=new a.i;d.K(h);f.K(h);d.P(-e,-e);f.P(e,e);for(var h=!1,g=new a.i,n=new a.i;b.kb();)for(;b.La();){b.ia().o(g);n.K(d);n.Ga(g);if(!n.s()&&(n.ba()>e||n.aa()>e))return!1;n.K(f);n.Ga(g);n.s()||(h=!0)}return h};c.XI=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);
if(c.rc(f,h,e)||c.rc(h,f,e)||c.rc(h,f,e)||h.ba()>e&&h.aa()>e||h.ba()<=e&&h.aa()<=e)return!1;f=new a.Xa;h=new a.Va;d.uf(0,h);f.df(h);d.uf(2,h);f.lineTo(h);return c.iA(b,f,e)};c.WJ=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);if(!c.rc(h,f,e)||h.ba()<=e&&h.aa()<=e)return!1;if(h.ba()<=e||h.aa()<=e)return c.rc(h,f,e);b=b.Ca();d=new a.i;d.K(h);d.P(-e,-e);for(var h=!1,f=new a.i,g=new a.i;b.kb();)for(;b.La();)b.ia().o(f),d.jl(f)?h=!0:(g.K(d),g.Ga(f),!g.s()&&(g.ba()>e||g.aa()>e)&&(h=!0));return h};
c.GH=function(b,d,e){var f=new a.i,h=new a.i;d.o(h);b.o(f);if(!c.rc(f,h,e)||h.ba()>e&&h.aa()>e)return!1;if(h.ba()<=e&&h.aa()<=e)return d=d.qq(),c.bA(b,d,e);f=new a.Xa;h=new a.Va;d.uf(0,h);f.df(h);d.uf(2,h);f.lineTo(h);return c.Wf(f,b,e,!1)};c.MH=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);if(c.rc(h,f,e)||h.ba()<=e&&h.aa()<=e)return!1;if(h.ba()<=e||h.aa()<=e)return f=new a.Xa,h=new a.Va,d.uf(0,h),f.df(h),d.uf(2,h),f.lineTo(h),c.LE(b,f,e);b=b.Ca();d=new a.i;f=new a.i;f.K(h);d.K(h);f.P(-e,
-e);d.P(e,e);for(var g=h=!1,n=new a.i,p=new a.i;b.kb();)for(;b.La();)if(b.ia().o(n),g||d.contains(n)||(g=!0),h||(p.K(f),p.Ga(n),!p.s()&&(p.ba()>e||p.aa()>e)&&(h=!0)),h&&g)return!0;return!1};c.LI=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);return c.ye(f,h,e)?c.OI(b,d,e)?!0:c.Pw(b,d,e,!1,!0,!1):!1};c.xI=function(a,b,d){return!c.nA(a,b,d)};c.bJ=function(a,b,d){return c.Pw(a,b,d,!1,!1,!0)};c.kA=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);return c.rc(f,h,e)?c.Pw(d,b,e,!0,!1,!1):!1};
c.lu=function(b,c,d){d*=d;for(var e=new a.b,f=new a.b,h=0;h<c.F();h++){c.w(h,f);for(var g=!1,n=0;n<b.F();n++)if(b.w(n,e),a.b.Zb(e,f)<=d){g=!0;break}if(!g)return!1}return!0};c.mu=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);return c.ye(f,h,e)};c.lA=function(a,b,d){b=b.w();return c.or(a,b,d)};c.HJ=function(a,b,d){return c.mu(a,b,d)};c.PH=function(a,b,d){return!c.lA(a,b,d)};c.DI=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);return h.ba()>e||h.aa()>e?!1:c.ye(f,h,e)};c.uI=function(b,d,
e){var f=new a.i,h=new a.i;b.o(f);d.o(h);if(c.rc(h,f,e))return!1;d=new a.i;d.K(h);d.P(e,e);e=new a.b;for(h=0;h<b.F();h++)if(b.w(h,e),d.contains(e))return!1;return!0};c.eJ=function(b,c,d){var e=new a.i,f=new a.i,h=new a.i;c.o(e);if(e.ba()<=d&&e.aa()<=d)return!1;if(e.ba()<=d||e.aa()<=d){c=new a.b;var g=!1;f.K(e);h.K(e);f.P(d,d);e.ba()>d?h.P(0,-d):h.P(-d,0);for(var n=0;n<b.F();n++)if(b.w(n,c),f.contains(c)){if(e.ba()>d){if(c.y>h.C&&c.y<h.G)return!1}else if(c.x>h.v&&c.x<h.B)return!1;g=!0}return g}f.K(e);
h.K(e);f.P(d,d);h.P(-d,-d);c=new a.b;g=!1;for(n=0;n<b.F();n++)if(b.w(n,c),f.contains(c)){if(h.jl(c))return!1;g=!0}return g};c.LG=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);if(!c.rc(h,f,e))return!1;if(h.ba()<=e&&h.aa()<=e)return c.ye(f,h,e);if(h.ba()<=e||h.aa()<=e){d=!1;var f=new a.i,g=new a.i;f.K(h);g.K(h);h.ba()>e?f.P(0,-e):f.P(-e,0);g.P(e,e);for(var n=new a.b,p=0;p<b.F();p++){b.w(p,n);if(!g.contains(n))return!1;h.ba()>e?n.y>f.C&&n.y<f.G&&(d=!0):n.x>f.v&&n.x<f.B&&(d=!0)}return d}d=!1;
f=new a.i;g=new a.i;f.K(h);g.K(h);f.P(-e,-e);g.P(e,e);n=new a.b;for(p=0;p<b.F();p++){b.w(p,n);if(!g.contains(n))return!1;f.jl(n)&&(d=!0)}return d};c.LH=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);if(!c.rc(f,h,e)||h.ba()>e||h.aa()>e)return!1;d=d.qq();return!c.or(b,d,e)};c.mI=function(b,d,e){var f=new a.i,h=new a.i;b.o(f);d.o(h);if(c.rc(h,f,e)||h.ba()<=e&&h.aa()<=e)return!1;if(h.ba()<=e||h.aa()<=e){d=new a.i;f=new a.i;d.K(h);h.ba()>e?d.P(0,-e):d.P(-e,0);f.K(h);f.P(e,e);for(var g=new a.b,n=
!1,p=!1,m=0;m<b.F();m++)if(b.w(m,g),n||(h.ba()>e?g.y>d.C&&g.y<d.G&&(n=!0):g.x>d.v&&g.x<d.B&&(n=!0)),p||f.contains(g)||(p=!0),n&&p)return!0;return!1}d=new a.i;f=new a.i;d.K(h);d.P(-e,-e);f.K(h);f.P(e,e);g=new a.b;p=n=!1;for(m=0;m<b.F();m++)if(b.w(m,g),!n&&d.jl(g)&&(n=!0),p||f.contains(g)||(p=!0),n&&p)return!0;return!1};c.dB=function(b,c,d){return a.b.Zb(b,c)<=d*d?!0:!1};c.rM=function(b,c,d){return a.b.Zb(b,c)>d*d?!0:!1};c.hz=function(a,b,d){return c.dB(a,b,d)};c.KA=function(b,d,e){var f=new a.i;f.K(b);
return c.ye(f,d,e)};c.ru=function(b,c,d){var e=new a.i;e.K(c);e.P(d,d);return!e.contains(b)};c.ax=function(b,c,d){if(c.ba()<=d&&c.aa()<=d)return!1;var e=new a.i,f=new a.i;e.K(c);e.P(d,d);if(!e.contains(b))return!1;if(c.ba()<=d||c.aa()<=d){f.K(c);c.ba()>d?f.P(0,-d):f.P(-d,0);if(c.ba()>d){if(b.y>f.C&&b.y<f.G)return!1}else if(b.x>f.v&&b.x<f.B)return!1;return!0}f.K(c);f.P(-d,-d);return f.jl(b)?!1:!0};c.bx=function(b,c,d){if(c.ba()<=d&&c.aa()<=d)return!0;if(c.ba()<=d||c.aa()<=d){var e=new a.i;e.K(c);c.ba()>
d?e.P(0,-d):e.P(-d,0);var f=!1;c.ba()>d?b.y>e.C&&b.y<e.G&&(f=!0):b.x>e.v&&b.x<e.B&&(f=!0);return f}e=new a.i;e.K(c);e.P(-d,-d);return e.jl(b)};c.YL=function(a,b,d){return c.KA(a,b,d)};c.ye=function(a,b,d){return c.rc(a,b,d)&&c.rc(b,a,d)};c.nj=function(b,c,d){var e=new a.i;e.K(c);e.P(d,d);return!b.jc(e)};c.kT=function(b,d,e){if(b.ba()<=e&&b.aa()<=e){var f=b.Af();return c.ax(f,d,e)}if(d.ba()<=e&&d.aa()<=e)return f=d.Af(),c.ax(f,b,e);b.ba()>e&&b.aa()>e&&(d.ba()<=e||d.aa()<=e)?f=d:(f=b,b=d);if(f.ba()<=
e||f.aa()<=e){if(b.ba()<=e||b.aa()<=e){d=new a.yb;var h=new a.yb,g=[0,0],n=[0,0],p=new a.b;f.Yl(p);d.ed(p);f.Zl(p);d.vd(p);b.Yl(p);h.ed(p);b.Zl(p);h.vd(p);d.Ga(h,null,g,n,e);return 1!=d.Ga(h,null,null,null,e)?!1:0==g[0]||1==g[1]||0==n[0]||1==n[1]}d=new a.i;h=new a.i;d.K(b);d.P(-e,-e);h.K(d);h.Ga(f);return!h.s()&&(h.ba()>e||h.aa()>e)?!1:!0}b.P(e,e);h=new a.i;h.K(f);h.Ga(b);return h.s()||!h.s()&&h.ba()>e&&h.aa()>e?!1:!0};c.fT=function(b,d,e){if(c.rc(b,d,e)||c.rc(d,b,e)||b.ba()<=e&&b.aa()<=e||d.ba()<=
e&&d.aa()<=e)return!1;if(b.ba()<=e||b.aa()<=e){if(d.ba()>e&&d.aa()>e)return!1;var f=new a.yb,h=new a.yb,g=[0,0],n=[0,0],p=new a.b;b.Yl(p);f.ed(p);b.Zl(p);f.vd(p);d.Yl(p);h.ed(p);d.Zl(p);h.vd(p);f.Ga(h,null,g,n,e);return 2!=f.Ga(h,null,null,null,e)?!1:(0<g[0]||1>g[1])&&(0<n[0]||1>n[1])}if(d.ba()<=e||d.aa()<=e)return!1;f=new a.i;f.K(b);f.Ga(d);return f.s()||f.ba()<=e||f.aa()<=e?!1:!0};c.Bz=function(b,d,e){if(!c.rc(b,d,e))return!1;if(b.ba()<=e&&b.aa()<=e)return b=b.Af(),c.bx(b,d,e);if(d.ba()<=e&&d.aa()<=
e)return d=d.Af(),c.bx(d,b,e);if(b.ba()<=e||b.aa()<=e)return c.rc(b,d,e);if(d.ba()<=e||d.aa()<=e){var f=new a.i;f.K(b);f.P(-e,-e);if(f.jl(d))return!0;b=new a.i;b.K(f);b.Ga(d);return b.s()||b.ba()<=e&&b.aa()<=e?!1:!0}return c.rc(b,d,e)};c.cT=function(b,d,e){if(c.rc(b,d,e)||c.rc(d,b,e)||b.ba()<=e&&b.aa()<=e||d.ba()<=e&&d.aa()<=e||d.ba()>e&&d.aa()>e&&b.ba()>e&&b.aa()>e)return!1;var f;b.ba()>e&&b.aa()>e?f=d:(f=b,b=d);if(b.ba()>e&&b.aa()>e){d=new a.i;var h=new a.i;h.K(b);h.P(-e,-e);d.K(h);d.Ga(f);return d.s()||
d.ba()<=e&&d.aa()<=e?!1:!0}d=new a.yb;var h=new a.yb,g=[0,0],n=[0,0],p=new a.b;f.Yl(p);d.ed(p);f.Zl(p);d.vd(p);b.Yl(p);h.ed(p);b.Zl(p);h.vd(p);d.Ga(h,null,g,n,e);return 1!=d.Ga(h,null,null,null,e)?!1:0<g[0]&&1>g[1]&&0<n[0]&&1>n[1]};c.ZC=function(b,c,d){var e,f,h=new a.i,g=new a.i,n=new a.cl(b,c,d,!0);if(!n.next())return!0;if(this.ED(b,c,d))return!1;var q;q=b;var p;p=null;1736==c.D()&&(p=c);var m=!1,s=!1;do{e=n.jk();f=n.ek();f=c.Fa(c.Ea(f));h.K(n.Fw());h.P(d,d);if(h.contains(f)&&(f=a.gd.he(q,f,0),
0!=f)||1736==c.D()&&(e=b.Fa(b.Ea(e)),g.K(n.jw()),g.P(d,d),g.contains(e)&&(f=a.gd.he(p,e,0),0!=f)))return!1;m||(!a.ff.An(b,c.ea()-1)||null!=b.pb&&null!=b.pb.Ab?q=b:(q=new a.Ka,b.copyTo(q),q.dj(1)),m=!0);1736!=c.D()||s||(s=c,!a.ff.An(s,b.ea()-1)||null!=c.pb&&null!=c.pb.Ab?p=c:(p=new a.Ka,s.copyTo(p),p.dj(1)),s=!0)}while(n.next());return!0};c.rc=function(b,c,d){var e=new a.i;e.K(b);e.P(d,d);return e.contains(c)};c.lm=function(b,c,d){var e=new a.i;e.K(c);e.P(d,d);c=new a.b;b.Yl(c);if(!e.contains(c))return!0;
b.YE(c);if(!e.contains(c))return!0;b.aF(c);if(!e.contains(c))return!0;b.Zl(c);return e.contains(c)?!1:!0};c.jA=function(b,c,d){if(b.ea()!=c.ea()||b.F()!=c.F())return!1;var e=new a.b,f=new a.b,h=!0;d*=d;for(var g=0;g<b.ea();g++){if(b.Dc(g)!=c.Dc(g)){h=!1;break}for(var n=b.Ea(g);n<c.Dc(g);n++)if(b.w(n,e),c.w(n,f),a.b.Zb(e,f)>d){h=!1;break}if(!h)break}return h?!0:!1};c.OI=function(b,c,d){if(b.F()!=c.F())return!1;var e=new a.b,f=new a.b,h=!0;d*=d;for(var g=0;g<b.F();g++)if(b.w(g,e),c.w(g,f),a.b.Zb(e,
f)>d){h=!1;break}return h?!0:!1};c.Pw=function(b,c,d,e,f,h){var g=!1,n;b.F()>c.F()?(e&&(e=!1,g=!0),n=c):(n=b,b=c);c=null;if(f||h||g){c=new a.Wk(b.F());for(var q=0;q<b.F();q++)c.write(q,0)}var q=new a.i,p=new a.i,m=new a.i;n.o(q);b.o(p);q.P(d,d);p.P(d,d);m.K(q);m.Ga(p);for(var p=new a.b,s=new a.b,t=!0,u=a.Ia.oB(b,m),v=u.Re(),w=d*d,x=0;x<n.F();x++)if(n.w(x,p),m.contains(p)){var A=!1;q.K(p.x,p.y,p.x,p.y);v.Ch(q,d);for(var G=v.next();-1!=G&&!(G=u.da(G),b.w(G,s),a.b.Zb(p,s)<=w&&((f||h||g)&&c.write(G,1),
A=!0,e));G=v.next());if(!A&&(t=!1,f||e))return!1}else{if(f||e)return!1;t=!1}if(h&&t)return!1;if(e)return!0;for(q=0;q<b.F();q++)if(1==c.read(q)){if(h)return!0}else if(f||g)return!1;return h?!1:!0};c.nA=function(b,c,d){var e;b.F()>c.F()?e=c:(e=b,b=c);c=new a.i;var f=new a.i,h=new a.i;e.o(c);b.o(f);c.P(d,d);f.P(d,d);h.K(c);h.Ga(f);for(var f=new a.b,g=new a.b,n=d*d,q=a.Ia.oB(b,h),p=q.Re(),m=0;m<e.F();m++)if(e.w(m,f),h.contains(f)){c.K(f.x,f.y,f.x,f.y);p.Ch(c,d);for(var s=p.next();-1!=s;s=p.next())if(b.w(q.da(s),
g),a.b.Zb(f,g)<=n)return!0}return!1};c.Vv=function(a,b,d,e){return c.Wf(a,b,d,e)&&c.Wf(b,a,d,e)};c.Wf=function(d,e,f,h){function g(a,b){return u.IB(a,b)}var n=!0,p=[0,0],m=[0,0],s=0,t=new a.ga(0),u=new c,v,w=new a.i,x=new a.i,A=new a.i;d.o(w);e.o(x);w.P(f,f);x.P(f,f);A.K(w);A.Ga(x);d=d.Ca();var x=e.Ca(),G=null,B=G=null,z=e.pb;null!=z?(G=z.Ab,B=z.nn,null==G&&(G=a.Ia.ij(e,A))):G=a.Ia.ij(e,A);e=G.Re();z=null;for(null!=B&&(z=B.Re());d.kb();)for(;d.La();){var C=!1,L=d.ia();L.o(w);if(!w.jc(A))return!1;
if(null!=z&&(z.Ch(w,f),-1==z.next()))return n=!1;B=L.$b();e.Fn(L,f);for(v=e.next();-1!=v;v=e.next()){x.Sb(G.da(v));v=x.ia();var K=L.Ga(v,null,p,m,f);if(2==K&&(!h||m[0]<=m[1])){var K=p[0],M=p[1],O=m[0],I=m[1];if(K*B<=f&&(1-M)*B<=f){C=!0;s=0;t.resize(0);u.Tg.length=0;for(var F=d.Jb(),O=!0;O;){if(d.La()){L=d.ia();B=L.$b();K=L.Ga(v,null,p,m,f);if(2==K&&(!h||m[0]<=m[1])&&(K=p[0],M=p[1],K*B<=f&&(1-M)*B<=f)){F=d.Jb();continue}if(x.La()&&(v=x.ia(),K=L.Ga(v,null,p,m,f),2==K&&(!h||m[0]<=m[1])&&(K=p[0],M=p[1],
K*B<=f&&(1-M)*B<=f))){F=d.Jb();continue}}O=!1}F!=d.Jb()&&(d.Sb(F),d.ia());break}else F=d.Jb(),v=b.Oa(F,d.Qa,K,M,x.Jb(),x.Qa,O,I),u.Tg.push(v),t.add(t.size)}}if(!C){if(s==u.Tg.length)return!1;1<t.size-s&&t.xd(s,t.size,g);for(C=0;s<u.Tg.length;s++)if(v=u.Tg[t.get(s)],!(v.Oi<C&&v.ji<C)){if(B*(v.Oi-C)>f)return!1;C=v.ji;if(B*(1-C)<=f||1==C)break}if(B*(1-C)>f)return!1;s=0;t.resize(0);u.Tg.length=0}}return n};c.iA=function(b,d,e){if(1>c.Zv(b,d,e,null))return!1;var f=new a.i,h=new a.i;b.o(f);d.o(h);var g=
c.lm(f,h,e),f=c.lm(h,f,e);return g&&f?!0:g&&!f?!c.Wf(d,b,e,!1):f&&!g?!c.Wf(b,d,e,!1):!c.Wf(b,d,e,!1)&&!c.Wf(d,b,e,!1)};c.Zv=function(d,e,f,h){function g(a,b){return x.IB(a,b)}var n,p;d.Iw()>e.Iw()?(n=e,p=d):(n=d,p=e);d=n.Ca();e=p.Ca();var m=[0,0],s=[0,0],t=-1,u=0,v,w=new a.ga(0),x=new c,A,G=new a.i,B=new a.i,z=new a.i;n.o(G);p.o(B);G.P(f,f);B.P(f,f);z.K(G);z.Ga(B);n=null;null!=h&&(n=new a.b);v=B=B=null;var C=p.pb;null!=C?(B=C.Ab,v=C.nn,null==B&&(B=a.Ia.ij(p,z))):B=a.Ia.ij(p,z);p=B.Re();C=null;for(null!=
v&&(C=v.Re());d.kb();)for(v=0;d.La();){var L=d.ia();L.o(G);if(G.jc(z)&&!(null!=C&&(C.Ch(G,f),-1==C.next()))){var K=L.$b();p.Fn(L,f);for(var M=p.next();-1!=M;M=p.next()){var O=B.da(M);e.Sb(O);A=e.ia();var I=A.$b(),F=L.Ga(A,null,m,s,f);if(0<F){var M=m[0],t=s[0],J=2==F?m[1]:NaN,S=2==F?s[1]:NaN;if(2==F){if(K*(J-M)>f)return t=1;var N=K*(J-M);if(e.La()){A=e.ia();F=L.Ga(A,null,m,null,f);if(2==F){var F=m[0],H=m[1],F=K*(H-F);if(N+F>f)return t=1}e.Sb(O);e.ia()}if(!e.wl()){e.oi();A=e.oi();F=L.Ga(A,null,m,null,
f);if(2==F&&(F=m[0],H=m[1],F=K*(H-F),N+F>f))return t=1;e.Sb(O);e.ia()}if(d.La()){O=d.Jb();L=d.ia();F=L.Ga(A,null,m,null,f);if(2==F&&(F=m[0],H=m[1],F=K*(H-F),N+F>f))return t=1;d.Sb(O);d.ia()}if(!d.wl()){O=d.Jb();d.oi();L=d.oi();F=L.Ga(A,null,m,null,f);if(2==F&&(F=m[0],H=m[1],F=I*(H-F),N+F>f))return t=1;d.Sb(O);d.ia()}A=b.Oa(d.Jb(),d.Qa,M,J,e.Jb(),e.Qa,t,S);x.Tg.push(A);w.add(w.size)}t=0;null!=h&&(L.Kb(M,n),h.add(n.x),h.add(n.y))}}if(u<x.Tg.length){w.xd(u,w.size,g);L=0;for(M=x.Tg[w.get(u)].Jl;u<x.Tg.length;u++)if(A=
x.Tg[w.get(u)],!(A.Oi<L&&A.ji<L))if(K*(A.Oi-L)>f)v=K*(A.ji-A.Oi),L=A.ji,M=A.Jl;else{A.Jl!=M?(v=K*(A.ji-A.Oi),M=A.Jl):v+=K*(A.ji-A.Oi);if(v>f)return t=1;L=A.ji;if(1==L)break}K*(1-L)>f&&(v=0);u=0;w.resize(0);x.Tg.length=0}}}return t};c.ED=function(b,c,d){var e=b.Ca(),f=c.Ca();for(b=new a.cl(b,c,d,!1);b.next();){c=b.jk();var h=b.ek();e.Sb(c);f.Sb(h);c=e.ia();if(0<f.ia().Ga(c,null,null,null,d))return!0}return!1};c.eA=function(b,c,d,e){var f=b.Ca(),h=new a.i,g=new a.i,n=new a.i;b.o(h);c.o(g);h.P(d,d);
h.contains(g);g.P(d,d);n.K(h);n.Ga(g);h=b.pb;null!=h?(h=h.Ab,null==h&&(h=a.Ia.ij(b,n))):h=a.Ia.ij(b,n);b=h.Re();for(var q=new a.b,p=new a.b,m=d*d,s=0;s<c.F();s++)if(c.w(s,q),n.contains(q)){g.K(q.x,q.y,q.x,q.y);b.Ch(g,d);for(var t=!1,u=b.next();-1!=u;u=b.next())if(f.Sb(h.da(u)),u=f.ia(),u.Kb(u.Gd(q,!1),p),a.b.Zb(p,q)<=m){t=!0;break}if(e){if(!t)return!1}else if(t)return!0}return e?!0:!1};c.ex=function(b,c,d){var e=new a.b,f=d*d,h=b.Ca();b=b.pb;if(null!=b&&(b=b.Ab,null!=b)){var g=new a.i;g.K(c);d=b.xw(g,
d);for(g=d.next();-1!=g;g=d.next())if(h.Sb(b.da(g)),h.La()){var g=h.ia(),n=g.Gd(c,!1);g.Kb(n,e);if(a.b.Zb(c,e)<=f)return!0}return!1}for(b=new a.i;h.kb();)for(;h.La();)if(g=h.ia(),g.o(b),b.P(d,d),b.contains(c)&&(n=g.Gd(c,!1),g.Kb(n,e),a.b.Zb(c,e)<=f))return!0;return!1};c.bA=function(a,b,d){return c.ex(a,b,d)&&!c.bw(a,b,d)};c.bw=function(a,b,d){a=a.Rf();return!c.or(a,b,d)};c.cA=function(b,c,d){if(b.Hm()){var e=new a.yb(c.v,c.C,c.v,c.G),f=new a.yb(c.v,c.G,c.B,c.G),h=new a.yb(c.B,c.G,c.B,c.C);c=new a.yb(c.B,
c.C,c.v,c.C);for(b=b.Ca();b.kb();)for(;b.La();){var g=b.ia();if(g.jc(e,d)||g.jc(f,d)||g.jc(h,d)||g.jc(c,d))return!0}}else{e=new a.i;e.K(c);e.P(d,d);d=b.mc(0);f=new a.b;h=new a.b;c=new a.b;for(var g=new a.b,n=0,q=b.ea();n<q;n++)for(var p=!0,m=b.Ea(n),s=b.Dc(n);m<s;m++)if(p)d.ec(2*m,h),p=!1;else{d.ec(2*m,f);c.J(h);g.J(f);if(0!=e.Nv(c,g))return!0;h.J(f)}}return!1};c.fc=function(b,d,e){var f=b.D(),h=d.D();if(a.T.Th(f)){var g=b.pb;if(null!=g&&(g=g.hi,null!=g))if(33==h){var n=d.w(),n=g.Kk(n.x,n.y);if(1==
n)return 1;if(0==n)return 4}else{n=new a.i;d.o(n);n=g.Dn(n);if(1==n)return 1;if(0==n)return 4;if(e&&a.T.Th(h)&&c.zz(d,g))return 1073741824}}if(a.T.Th(h)&&(g=d.pb,null!=g&&(g=g.hi,null!=g)))if(33==f){b=b.w();n=g.Kk(b.x,b.y);if(1==n)return 2;if(0==n)return 4}else{d=new a.i;b.o(d);n=g.Dn(d);if(1==n)return 2;if(0==n)return 4;if(e&&a.T.Th(f)&&c.zz(b,g))return 1073741824}return 0};c.zz=function(b,c){for(var d=b.F(),e=new a.b,f=0;f<d;f++)if(b.w(f,e),1==c.Kk(e.x,e.y))return!0;return!1};c.AE=function(b,c,
d,e){for(var f=1<=b.rj(0)&&1<=c.rj(0),h=b.Ca(),g=c.Ca(),n=[0,0],q=[0,0],p=new a.cl(b,c,d,!1),m=!1;p.next();){var s=p.jk(),t=p.ek();h.Sb(s);g.Sb(t);s=h.ia();t=g.ia().Ga(s,null,q,n,d);if(2==t){m=n[0];t=n[1];s=s.$b();if(f&&(t-m)*s>d)return!1;m=!0}else if(0!=t){m=n[0];s=q[0];if(0<m&&1>m&&0<s&&1>s)return!1;m=!0}}if(!m)return!1;h=new a.i;g=new a.i;f=new a.i;b.o(h);c.o(g);h.P(1E3*d,1E3*d);g.P(1E3*d,1E3*d);f.K(h);f.Ga(g);return 10<b.F()&&(b=a.Ed.clip(b,f,d,0),b.s())||10<c.F()&&(c=a.Ed.clip(c,f,d,0),c.s())?
!1:a.el.vr(b,c,d,"F********",e)};c.wD=function(b,d,e,f){var h=1<=b.rj(0)&&1<=d.rj(0),g=new a.i,n=new a.i,p=new a.i;b.o(g);d.o(n);for(var m=!1,s=c.lm(g,n,e),t=c.lm(n,g,e),u=b.Ca(),v=d.Ca(),w=[0,0],x=[0,0],A=new a.cl(b,d,e,!1);A.next();){var G=A.jk(),B=A.ek();u.Sb(G);v.Sb(B);B=u.ia();G=v.ia().Ga(B,null,x,w,e);if(2==G){var G=w[0],z=w[1],B=B.$b();if(h&&(z-G)*B>e&&(m=!0,s&&t))return!0}else if(0!=G&&(G=w[0],B=x[0],0<G&&1>G&&0<B&&1>B))return!0}h=new a.i;u=new a.i;h.K(g);h.P(1E3*e,1E3*e);u.K(n);u.P(1E3*e,
1E3*e);p.K(h);p.Ga(u);g="";g=m?g+"**":g+"T*";if(s){if(10<d.F()&&(d=a.Ed.clip(d,p,e,0),d.s()))return!1;g+="****"}else g+="T***";if(t){if(10<b.F()&&(b=a.Ed.clip(b,p,e,0),b.s()))return!1;g+="***"}else g+="T**";return a.el.vr(b,d,e,g.toString(),f)};c.bC=function(b,d,e,f){var h=[!1],g=c.wB(b,d,e,h);if(h[0])return g;h=new a.i;d.o(h);h.P(1E3*e,1E3*e);return 10<b.F()&&(b=a.Ed.clip(b,h,e,0),b.s())?!1:a.el.su(b,d,e,f)};c.wB=function(b,c,d,e){e[0]=!1;for(var f=b.Ca(),h=c.Ca(),g=[0,0],n=[0,0],q=new a.cl(b,c,
d,!1),p=!1;q.next();){var m=q.jk(),s=q.ek();f.Sb(m,-1);h.Sb(s,-1);m=f.ia();m=h.ia().Ga(m,null,n,g,d);if(0!=m&&(p=!0,1==m&&(m=g[0],s=n[0],0<m&&1>m&&0<s&&1>s)))return e[0]=!0,!1}if(!p){e[0]=!0;g=new a.i;b.o(g);g.P(d,d);q=b;p=!1;n=new a.i;e=0;for(f=c.ea();e<f;e++)if(0<c.Ha(e)){c.Ti(e,n);if(g.jc(n)){if(h=c.Fa(c.Ea(e)),h=a.ff.xl(q,h,0),0==h)return!1}else return!1;p||(!a.ff.An(b,c.ea()-1)||null!=b.pb&&null!=b.pb.Ab?q=b:(h=new a.Ka,b.copyTo(h),h.dj(1),q=h),p=!0)}if(1==b.ea()||1607==c.D())return!0;g=new a.i;
c.o(g);g.P(d,d);n=c;q=!1;d=new a.i;e=0;for(f=b.ea();e<f;e++)if(0<b.Ha(e)){b.Ti(e,d);if(g.jc(d)&&(h=b.Fa(b.Ea(e)),h=a.ff.xl(n,h,0),1==h))return!1;q||(!a.ff.An(c,b.ea()-1)||null!=c.pb&&null!=c.pb.Ab?n=c:(h=new a.Ka,c.copyTo(h),h.dj(1),n=h),q=!0)}return!0}return!1};c.CE=function(b,c,d,e){for(var f=b.Ca(),h=c.Ca(),g=[0,0],n=[0,0],q=new a.cl(b,c,d,!1),p=!1;q.next();){var m=q.jk(),s=q.ek();f.Sb(m);h.Sb(s);m=f.ia();m=h.ia().Ga(m,null,n,g,d);if(2==m)p=!0;else if(0!=m){p=g[0];m=n[0];if(0<p&&1>p&&0<m&&1>m)return!1;
p=!0}}if(!p)return!1;h=new a.i;g=new a.i;f=new a.i;b.o(h);c.o(g);h.P(1E3*d,1E3*d);g.P(1E3*d,1E3*d);f.K(h);f.Ga(g);return 10<b.F()&&(b=a.Ed.clip(b,f,d,0),b.s())||10<c.F()&&(c=a.Ed.clip(c,f,d,0),c.s())?!1:a.el.Vl(b,c,d,"F********",e)};c.YC=function(b,d,e,f){for(var h=b.Ca(),g=d.Ca(),n=[0,0],p=[0,0],m=new a.cl(b,d,e,!1),s=!1;m.next();){var t=m.jk(),u=m.ek();h.Sb(t);g.Sb(u);t=h.ia();t=g.ia().Ga(t,null,p,n,e);if(2==t)s=!0;else if(0!=t){s=n[0];t=p[0];if(0<s&&1>s&&0<t&&1>t)return!0;s=!0}}if(!s)return!1;
g=new a.i;n=new a.i;p=new a.i;m=new a.i;h=new a.i;b.o(g);d.o(n);return c.lm(n,g,e)?(p.K(g),p.P(1E3*e,1E3*e),m.K(n),m.P(1E3*e,1E3*e),h.K(p),h.Ga(m),10<b.F()&&(b=a.Ed.clip(b,h,e,0),b.s())||10<d.F()&&(d=a.Ed.clip(d,h,e,0),d.s())?!1:a.el.Vl(b,d,e,"T********",f)):a.el.Vl(b,d,e,"T*****T**",f)};c.jC=function(b,d,e,f){var h=[!1],g=c.wB(b,d,e,h);if(h[0])return g;h=new a.i;d.o(h);h.P(1E3*e,1E3*e);return 10<b.F()&&(b=a.Ed.clip(b,h,e,0),b.s())?!1:a.el.dy(b,d,e,f)};c.YB=function(b,c,d){return 1==a.gd.he(b,c,d)?
!0:!1};c.yD=function(b,c,d){return 2==a.gd.he(b,c,d)?!0:!1};c.or=function(b,c,d){var e=new a.b;d*=d;for(var f=0;f<b.F();f++)if(b.w(f,e),a.b.Zb(e,c)<=d)return!1;return!0};c.prototype.IB=function(a,b){var c=this.Tg[a],d=this.Tg[b];return c.Jl<d.Jl||c.Jl==d.Jl&&(c.Wt<d.Wt||c.Wt==d.Wt&&(c.Oi<d.Oi||c.Oi==d.Oi&&(c.ji<d.ji||c.ji==d.ji&&c.dE<d.dE)))?-1:1};return c}();a.hd=c})(z||(z={}));(function(a){var b;(function(a){a[a.InteriorInterior=0]="InteriorInterior";a[a.InteriorBoundary=1]="InteriorBoundary";a[a.InteriorExterior=
2]="InteriorExterior";a[a.BoundaryInterior=3]="BoundaryInterior";a[a.BoundaryBoundary=4]="BoundaryBoundary";a[a.BoundaryExterior=5]="BoundaryExterior";a[a.ExteriorInterior=6]="ExteriorInterior";a[a.ExteriorBoundary=7]="ExteriorBoundary";a[a.ExteriorExterior=8]="ExteriorExterior"})(b||(b={}));var c;(function(a){a[a.AreaAreaPredicates=0]="AreaAreaPredicates";a[a.AreaLinePredicates=1]="AreaLinePredicates";a[a.LineLinePredicates=2]="LineLinePredicates";a[a.AreaPointPredicates=3]="AreaPointPredicates";
a[a.LinePointPredicates=4]="LinePointPredicates";a[a.PointPointPredicates=5]="PointPointPredicates"})(c||(c={}));b=function(){function b(){this.Xd=0;this.h=new a.gs;this.A=[0,0,0,0,0,0,0,0,0];this.Ta=[0,0,0,0,0,0,0,0,0];this.Y=[!1,!1,!1,!1,!1,!1,!1,!1,!1];this.Nl=this.$t=-1}b.py=function(b,c,d,e,f){if(9!=e.length)throw a.g.ra("relation string length has to be 9 characters");for(var h=0;9>h;h++){var g=e.charAt(h);if("*"!=g&&"T"!=g&&"F"!=g&&"0"!=g&&"1"!=g&&"2"!=g)throw a.g.ra("relation string");}h=
this.YN(e,b.fb(),c.fb());if(0!=h)return a.hd.qy(b,c,d,h,f);h=new a.i;b.o(h);g=new a.i;c.o(g);var n=new a.i;n.K(h);n.Db(g);d=a.Ia.zd(d,n,!1);b=this.NB(b,d);c=this.NB(c,d);if(b.s()||c.s())return this.rR(b,c,e);h=c.D();g=!1;switch(b.D()){case 1736:switch(h){case 1736:g=this.vr(b,c,d,e,f);break;case 1607:g=this.Vl(b,c,d,e,f);break;case 33:g=this.ur(b,c,d,e,f);break;case 550:g=this.tr(b,c,d,e,f)}break;case 1607:switch(h){case 1736:g=this.Vl(c,b,d,this.Lo(e),f);break;case 1607:g=this.ey(b,c,d,e,f);break;
case 33:g=this.xr(b,c,d,e,f);break;case 550:g=this.wr(b,c,d,e,f)}break;case 33:switch(h){case 1736:g=this.ur(c,b,d,this.Lo(e),f);break;case 1607:g=this.xr(c,b,d,this.Lo(e),f);break;case 33:g=this.KQ(b,c,d,e);break;case 550:g=this.pr(c,b,d,this.Lo(e),f)}break;case 550:switch(h){case 1736:g=this.tr(c,b,d,this.Lo(e),f);break;case 1607:g=this.wr(c,b,d,this.Lo(e),f);break;case 550:g=this.Wx(b,c,d,e,f);break;case 33:g=this.pr(b,c,d,e,f)}break;default:g=!1}return g};b.vr=function(c,d,e,f,h){var g=new b;
g.pi();g.si(f);g.vF();var n=new a.i,p=new a.i;c.o(n);d.o(p);f=!1;a.hd.nj(n,p,e)&&(g.Bs(c,d),f=!0);f||(n=a.hd.fc(c,d,!1),4==n?(g.Bs(c,d),f=!0):1==n?(g.Bv(d),f=!0):2==n&&(g.$A(c),f=!0));f||(f=new a.fd,c=f.Eb(c),d=f.Eb(d),g.In(f,e,h),g.so(c,d),g.h.xg());return b.Mf(g.A,g.Hc)};b.su=function(c,d,e,f){var h=new b;h.pi();h.si("T*****F**");h.vF();var g=new a.i,n=new a.i;c.o(g);d.o(n);var p=!1;a.hd.nj(g,n,e)&&(h.Bs(c,d),p=!0);p||(g=a.hd.fc(c,d,!1),4==g?(h.Bs(c,d),p=!0):1==g?(h.Bv(d),p=!0):2==g&&(h.$A(c),p=
!0));if(p)return this.Mf(h.A,h.Hc);p=new a.fd;c=p.Eb(c);g=p.Eb(d);a.aj.$(p,e,f,!1);e=p.hf(g).Rf();p.xo(0,!0,!0);a.mm.$(p,c,-1,!1,f);if(0==p.F(c))return!1;a.mm.$(p,g,-1,!1,f);h.Op(p,f);d=0==p.F(g);if(!d&&(h.so(c,g),h.h.xg(),g=this.Mf(h.A,h.Hc),!g))return g;c=p.hf(c);p=new a.fd;c=p.Eb(c);g=p.Eb(e);h.Op(p,f);h.Xd=0;h.pi();h.si(d?"T*****F**":"******F**");h.wy();h.so(c,g);h.h.xg();return this.Mf(h.A,h.Hc)};b.Vl=function(c,d,e,f,h){var g=new b;g.pi();g.si(f);g.wy();var n=new a.i,p=new a.i;c.o(n);d.o(p);
f=!1;a.hd.nj(n,p,e)&&(g.Cs(c,d),f=!0);f||(n=a.hd.fc(c,d,!1),4==n?(g.Cs(c,d),f=!0):1==n&&(g.aB(d),f=!0));f||(f=new a.fd,c=f.Eb(c),d=f.Eb(d),g.In(f,e,h),g.Jg=g.h.uo(),b.es(d,g.h,g.Jg),g.so(c,d),g.h.vo(g.Jg),g.h.xg());return b.Mf(g.A,g.Hc)};b.dy=function(c,d,e,f){var h=new b;h.pi();h.si("T*****F**");h.wy();var g=new a.i,n=new a.i;c.o(g);d.o(n);var p=!1;a.hd.nj(g,n,e)&&(h.Cs(c,d),p=!0);p||(g=a.hd.fc(c,d,!1),4==g?(h.Cs(c,d),p=!0):1==g&&(h.aB(d),p=!0));if(p)return this.Mf(h.A,h.Hc);p=new a.fd;c=p.Eb(c);
d=p.Eb(d);h.In(p,e,f);if(0==p.F(c))return!1;h.so(c,d);h.h.xg();return this.Mf(h.A,h.Hc)};b.tr=function(c,d,e,f,h){var g=new b;g.pi();g.si(f);g.wF();var n=new a.i,p=new a.i;c.o(n);d.o(p);f=!1;a.hd.nj(n,p,e)&&(g.Ds(c),f=!0);f||(n=a.hd.fc(c,d,!1),4==n?(g.Ds(c),f=!0):1==n&&(g.cK(),f=!0));f||(f=new a.fd,c=f.Eb(c),d=f.Eb(d),g.In(f,e,h),g.Pv(c,d),g.h.xg());return b.Mf(g.A,g.Hc)};b.ey=function(c,d,e,f,h){var g=new b;g.pi();g.si(f);g.ZR();f=new a.i;var n=new a.i;c.o(f);d.o(n);var p=!1;a.hd.nj(f,n,e)&&(g.CD(c,
d),p=!0);p||4!=a.hd.fc(c,d,!1)||(g.CD(c,d),p=!0);p||(f=new a.fd,c=f.Eb(c),d=f.Eb(d),g.In(f,e,h),g.ph=g.h.uo(),g.Jg=g.h.uo(),b.es(c,g.h,g.ph),b.es(d,g.h,g.Jg),g.so(c,d),g.h.vo(g.ph),g.h.vo(g.Jg),g.h.xg());return b.Mf(g.A,g.Hc)};b.wr=function(c,d,e,f,h){var g=new b;g.pi();g.si(f);g.KF();f=new a.i;var n=new a.i;c.o(f);d.o(n);var p=!1;a.hd.nj(f,n,e)&&(g.dx(c),p=!0);p||4!=a.hd.fc(c,d,!1)||(g.dx(c),p=!0);p||(f=new a.fd,c=f.Eb(c),d=f.Eb(d),g.In(f,e,h),g.ph=g.h.uo(),b.es(c,g.h,g.ph),g.Pv(c,d),g.h.vo(g.ph),
g.h.xg());return b.Mf(g.A,g.Hc)};b.Wx=function(c,d,e,f,h){var g=new b;g.pi();g.si(f);g.PF();f=new a.i;var n=new a.i;c.o(f);d.o(n);var p=!1;a.hd.nj(f,n,e)&&(g.PE(),p=!0);p||(f=new a.fd,c=f.Eb(c),d=f.Eb(d),g.In(f,e,h),g.Pv(c,d),g.h.xg());return b.Mf(g.A,g.Hc)};b.ur=function(c,d,e,f){var h=new b;h.pi();h.si(f);h.wF();var g=new a.i;c.o(g);d=d.w();var n=!1;a.hd.ru(d,g,e)&&(h.Ds(c),n=!0);n||(e=a.gd.he(c,d,e),1==e?(h.A[0]=0,h.A[2]=2,h.A[3]=-1,h.A[5]=1,h.A[6]=-1):2==e?(h.A[6]=-1,0!=c.Mh()?(h.A[0]=-1,h.A[3]=
0,h.A[2]=2,h.A[5]=1):(h.A[0]=0,h.A[3]=-1,h.A[5]=-1,e=new a.i,c.o(e),h.A[2]=0==e.ba()&&0==e.aa()?-1:1)):h.Ds(c));return this.Mf(h.A,f)};b.xr=function(c,d,e,f,h){var g=new b;g.pi();g.si(f);g.KF();var n=new a.i;c.o(n);f=d.w();var p=!1;a.hd.ru(f,n,e)&&(g.dx(c),p=!0);if(!p){var n=null,m=p=!1;if(g.Y[0]||g.Y[6])a.hd.ex(c,f,e)?(g.Y[0]&&(n=a.Hh.il(c,h),m=!a.hd.or(n,f,e),p=!0,g.A[0]=m?-1:0),g.A[6]=-1):(g.A[0]=-1,g.A[6]=0);g.Y[3]&&(null!=n&&n.s()?g.A[3]=-1:(p||(null==n&&(n=a.Hh.il(c,h)),m=!a.hd.or(n,f,e),p=
!0),g.A[3]=m?0:-1));g.Y[5]&&(null!=n&&n.s()?g.A[5]=-1:p&&!m?g.A[5]=0:(null==n&&(n=a.Hh.il(c,h)),h=a.hd.mu(n,d,e),g.A[5]=h?-1:0));g.Y[2]&&(0!=c.$b()?g.A[2]=1:(h=new a.pe(c.description),h.Pd(c,0,c.F()),c=a.hd.mu(h,d,e),g.A[2]=c?-1:0))}return this.Mf(g.A,g.Hc)};b.pr=function(c,d,e,f){var h=new b;h.pi();h.si(f);h.PF();var g=new a.i;c.o(g);d=d.w();var n=!1;a.hd.ru(d,g,e)&&(h.PE(),n=!0);if(!n){g=!1;n=!0;e*=e;for(var p=0;p<c.F();p++){var m=c.Fa(p);a.b.Zb(m,d)<=e?g=!0:n=!1;if(g&&!n)break}g?(h.A[0]=0,h.A[2]=
n?-1:0,h.A[6]=-1):(h.A[0]=-1,h.A[2]=0,h.A[6]=0)}return b.Mf(h.A,f)};b.KQ=function(c,d,e,f){c=c.w();d=d.w();for(var h=[],g=0;9>g;g++)h[g]=-1;a.b.Zb(c,d)<=e*e?h[0]=0:(h[2]=0,h[6]=0);h[8]=2;return b.Mf(h,f)};b.Mf=function(a,b){for(var c=0;9>c;c++)switch(b.charAt(c)){case "T":if(-1==a[c])return!1;break;case "F":if(-1!=a[c])return!1;break;case "0":if(0!=a[c])return!1;break;case "1":if(1!=a[c])return!1;break;case "2":if(2!=a[c])return!1}return!0};b.rR=function(b,c,d){var e=[-1,-1,-1,-1,-1,-1,-1,-1,-1];
if(b.s()&&c.s()){for(var f=0;9>f;f++)e[f]=-1;return this.Mf(e,d)}f=!1;b.s()&&(b=c,f=!0);e[0]=-1;e[1]=-1;e[3]=-1;e[4]=-1;e[6]=-1;e[7]=-1;e[8]=2;c=b.D();a.T.Kc(c)?1736==c?0!=b.Mh()?(e[2]=2,e[5]=1):(e[5]=-1,c=new a.i,b.o(c),e[2]=0==c.ba()&&0==c.aa()?0:1):(c=0!=b.$b(),e[2]=c?1:0,e[5]=a.Hh.No(b)?0:-1):(e[2]=0,e[5]=-1);f&&this.qG(e);return this.Mf(e,d)};b.YN=function(a,c,d){return b.mT(a)?3:b.NS(a)?4:b.nT(a,c,d)?8:b.CR(a,c,d)?16:b.yQ(a)?1:b.LK(a,c,d)?32:0};b.mT=function(a){return"T"==a.charAt(0)&&"*"==
a.charAt(1)&&"F"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"F"==a.charAt(5)&&"F"==a.charAt(6)&&"F"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};b.NS=function(a){return"F"==a.charAt(0)&&"F"==a.charAt(1)&&"*"==a.charAt(2)&&"F"==a.charAt(3)&&"F"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};b.nT=function(a,b,c){if(0==b&&0==c)return!1;if(2!=b||2!=c)if("F"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"T"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&
"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)||1==b&&1==c&&"F"==a.charAt(0)&&"T"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8))return!0;return 0!=c&&"F"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"T"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};b.CR=function(a,b,c){return b>c?"T"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&
"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1:1==b&&1==c&&"0"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};b.yQ=function(a){return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"F"==a.charAt(6)&&"F"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};b.LK=function(a,b,
c){if(b==c){if(1!=b)return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"T"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1;if("1"==a.charAt(0)&&"*"==a.charAt(1)&&"T"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8))return!0}return!1};b.es=function(a,b,c){a=b.ya(a);for(var d=b.Be;-1!=d;d=b.Bf(d))if(0!=(b.md(d)&a)){var e=b.te(d);if(-1==e)b.fm(d,c,0);else{var f=
e,h=0;do 0!=(b.Gg(f)&a)&&h++,f=b.Wb(b.sa(f));while(f!=e);b.fm(d,c,h)}}};b.Lo=function(a){var b;b=""+a.charAt(0);b+=a.charAt(3);b+=a.charAt(6);b+=a.charAt(1);b+=a.charAt(4);b+=a.charAt(7);b+=a.charAt(2);b+=a.charAt(5);return b+a.charAt(8)};b.prototype.pi=function(){for(var a=0;9>a;a++)this.A[a]=-2,this.Ta[a]=-2};b.qG=function(a){var b=a[1],c=a[2],d=a[5];a[1]=a[3];a[2]=a[6];a[5]=a[7];a[3]=b;a[6]=c;a[7]=d};b.prototype.si=function(a){this.Hc=a;for(a=0;9>a;a++)"*"!=this.Hc.charAt(a)?(this.Y[a]=!0,this.Xd++):
this.Y[a]=!1};b.prototype.SF=function(){for(var a=0;9>a;a++)this.Y[a]&&-2==this.A[a]&&(this.A[a]=-1,this.Y[a]=!1)};b.prototype.dc=function(a){if(-2==this.A[a])return!1;if(-1==this.A[a])return this.Y[a]=!1,this.Xd--,!0;if("T"!=this.Hc.charAt(a)&&"F"!=this.Hc.charAt(a)){if(this.A[a]<this.Ta[a])return!1;this.Y[a]=!1;this.Xd--;return!0}this.Y[a]=!1;this.Xd--;return!0};b.prototype.vF=function(){this.$t=0;this.Ta[0]=2;this.Ta[1]=1;this.Ta[2]=2;this.Ta[3]=1;this.Ta[4]=1;this.Ta[5]=1;this.Ta[6]=2;this.Ta[7]=
1;this.Ta[8]=2;this.Y[8]&&(this.A[8]=2,this.Y[8]=!1,this.Xd--)};b.prototype.wy=function(){this.$t=1;this.Nl=3;this.Ta[0]=1;this.Ta[1]=0;this.Ta[2]=2;this.Ta[3]=1;this.Ta[4]=0;this.Ta[5]=1;this.Ta[6]=1;this.Ta[7]=0;this.Ta[8]=2;this.Y[8]&&(this.A[8]=2,this.Y[8]=!1,this.Xd--)};b.prototype.ZR=function(){this.$t=2;this.Nl=4;this.Ta[0]=1;this.Ta[1]=0;this.Ta[2]=1;this.Ta[3]=0;this.Ta[4]=0;this.Ta[5]=0;this.Ta[6]=1;this.Ta[7]=0;this.Ta[8]=2;this.Y[8]&&(this.A[8]=2,this.Y[8]=!1,this.Xd--)};b.prototype.wF=
function(){this.Nl=3;this.Ta[0]=0;this.Ta[1]=-1;this.Ta[2]=2;this.Ta[3]=0;this.Ta[4]=-1;this.Ta[5]=1;this.Ta[6]=0;this.Ta[7]=-1;this.Ta[8]=2;this.Y[1]&&(this.A[1]=-1,this.Y[1]=!1,this.Xd--);this.Y[4]&&(this.A[4]=-1,this.Y[4]=!1,this.Xd--);this.Y[7]&&(this.A[7]=-1,this.Y[7]=!1,this.Xd--);this.Y[8]&&(this.A[8]=2,this.Y[8]=!1,this.Xd--)};b.prototype.KF=function(){this.Nl=4;this.Ta[0]=0;this.Ta[1]=-1;this.Ta[2]=1;this.Ta[3]=0;this.Ta[4]=-1;this.Ta[5]=0;this.Ta[6]=0;this.Ta[7]=-1;this.Ta[8]=2;this.Y[1]&&
(this.A[1]=-1,this.Y[1]=!1,this.Xd--);this.Y[4]&&(this.A[4]=-1,this.Y[4]=!1,this.Xd--);this.Y[7]&&(this.A[7]=-1,this.Y[7]=!1,this.Xd--);this.Y[8]&&(this.A[8]=2,this.Y[8]=!1,this.Xd--)};b.prototype.PF=function(){this.Nl=5;this.Ta[0]=0;this.Ta[1]=-1;this.Ta[2]=0;this.Ta[3]=-1;this.Ta[4]=-1;this.Ta[5]=-1;this.Ta[6]=0;this.Ta[7]=-1;this.Ta[8]=2;this.Y[1]&&(this.A[1]=-1,this.Y[1]=!1,this.Xd--);this.Y[3]&&(this.A[3]=-1,this.Y[3]=!1,this.Xd--);this.Y[4]&&(this.A[4]=-1,this.Y[4]=!1,this.Xd--);this.Y[5]&&
(this.A[5]=-1,this.Y[5]=!1,this.Xd--);this.Y[7]&&(this.A[7]=-1,this.Y[7]=!1,this.Xd--);this.Y[8]&&(this.A[8]=2,this.Y[8]=!1,this.Xd--)};b.prototype.aK=function(a,b,c){var d=!0;this.Y[0]&&(this.HO(a,b,c),d=d&&this.dc(0));this.Y[1]&&(this.eD(a,b,1),d=d&&this.dc(1));this.Y[2]&&(this.fD(a,b,c,2),d=d&&this.dc(2));this.Y[3]&&(this.eD(a,c,3),d=d&&this.dc(3));this.Y[4]&&(this.gK(a,b,c),d=d&&this.dc(4));this.Y[5]&&(this.eB(a,c,5),d=d&&this.dc(5));this.Y[6]&&(this.fD(a,c,b,6),d=d&&this.dc(6));this.Y[7]&&(this.eB(a,
b,7),d=d&&this.dc(7));return d};b.prototype.Bs=function(a,b){this.A[0]=-1;this.A[1]=-1;this.A[3]=-1;this.A[4]=-1;this.iq(a,this.Y[2]?2:-1,this.Hc.charAt(2),this.Y[5]?5:-1,this.Hc.charAt(5));this.iq(b,this.Y[6]?6:-1,this.Hc.charAt(6),this.Y[7]?7:-1,this.Hc.charAt(7))};b.prototype.iq=function(b,c,d,e,f){if(-1!=c||-1!=e)("T"!=d&&"F"!=d&&-1!=c||"T"!=f&&"F"!=f&&-1!=e?0!=b.Mh():1)?(-1!=c&&(this.A[c]=2),-1!=e&&(this.A[e]=1)):(-1!=e&&(this.A[e]=-1),-1!=c&&(d=new a.i,b.o(d),this.A[c]=0==d.ba()&&0==d.aa()?
0:1))};b.prototype.Bv=function(a){this.A[2]=2;this.A[3]=-1;this.A[4]=-1;this.A[5]=1;this.A[6]=-1;this.A[7]=-1;this.iq(a,this.Y[0]?0:-1,this.Hc.charAt(0),this.Y[1]?1:-1,this.Hc.charAt(1))};b.prototype.$A=function(a){this.Bv(a);b.qG(this.A)};b.prototype.Cs=function(b,c){this.A[0]=-1;this.A[1]=-1;this.A[3]=-1;this.A[4]=-1;if(this.Y[6]){var d=this.Hc.charAt(6),d="T"!=d&&"F"!=d?0!=c.$b():!0;this.A[6]=d?1:0}this.Y[7]&&(d=a.Hh.No(c),this.A[7]=d?0:-1);this.iq(b,this.Y[2]?2:-1,this.Hc.charAt(2),this.Y[5]?
5:-1,this.Hc.charAt(5))};b.prototype.aB=function(b){if(this.Y[0]){var c=this.Hc.charAt(0),c="T"!=c&&"F"!=c?0!=b.$b():!0;this.A[0]=c?1:0}this.Y[1]&&(b=a.Hh.No(b),this.A[1]=b?0:-1);this.A[2]=2;this.A[3]=-1;this.A[4]=-1;this.A[5]=1;this.A[6]=-1;this.A[7]=-1};b.prototype.Ds=function(a){this.A[0]=-1;this.A[3]=-1;this.A[6]=0;this.iq(a,this.Y[2]?2:-1,this.Hc.charAt(2),this.Y[5]?5:-1,this.Hc.charAt(5))};b.prototype.cK=function(){this.A[0]=0;this.A[2]=2;this.A[3]=-1;this.A[5]=1;this.A[6]=-1};b.prototype.CD=
function(b,c){this.A[0]=-1;this.A[1]=-1;this.A[3]=-1;this.A[4]=-1;if(this.Y[2]){var d=this.Hc.charAt(2),d="T"!=d&&"F"!=d?0!=b.$b():!0;this.A[2]=d?1:0}this.Y[5]&&(d=a.Hh.No(b),this.A[5]=d?0:-1);this.Y[6]&&(d=this.Hc.charAt(6),d="T"!=d&&"F"!=d?0!=c.$b():!0,this.A[6]=d?1:0);this.Y[7]&&(d=a.Hh.No(c),this.A[7]=d?0:-1)};b.prototype.dx=function(b){this.A[0]=-1;this.A[3]=-1;if(this.Y[2]){var c=this.Hc.charAt(2),c="T"!=c&&"F"!=c?0!=b.$b():!0;this.A[2]=c?1:0}this.Y[5]&&(b=a.Hh.No(b),this.A[5]=b?0:-1);this.A[6]=
0};b.prototype.PE=function(){this.A[0]=-1;this.A[2]=0;this.A[6]=0};b.prototype.bK=function(a,b,c){var d=!0;this.Y[0]&&(this.IO(a,b),d=d&&this.dc(0));this.Y[1]&&(this.EO(a,b,c,this.Jg),d=d&&this.dc(1));this.Y[2]&&(this.FO(a,b),d=d&&this.dc(2));this.Y[3]&&(this.kK(a,b,c,this.Jg),d=d&&this.dc(3));this.Y[4]&&(this.hK(a,b,c,this.Jg),d=d&&this.dc(4));this.Y[5]&&(this.iK(a,b,c),d=d&&this.dc(5));this.Y[6]&&(this.BM(a,b),d=d&&this.dc(6));this.Y[7]&&(this.AM(a,b,c,this.Jg),d=d&&this.dc(7));return d};b.prototype.uP=
function(a,b,c){var d=!0;this.Y[0]&&(this.LO(a,b,c,this.ph,this.Jg),d=d&&this.dc(0));this.Y[1]&&(this.gD(a,b,c,this.ph,this.Jg,1),d=d&&this.dc(1));this.Y[2]&&(this.hD(a,b,c,2),d=d&&this.dc(2));this.Y[3]&&(this.gD(a,c,b,this.Jg,this.ph,3),d=d&&this.dc(3));this.Y[4]&&(this.mK(a,b,c,this.ph,this.Jg),d=d&&this.dc(4));this.Y[5]&&(this.fB(a,c,this.ph,5),d=d&&this.dc(5));this.Y[6]&&(this.hD(a,c,b,6),d=d&&this.dc(6));this.Y[7]&&(this.fB(a,b,this.Jg,7),d=d&&this.dc(7));return d};b.prototype.bB=function(a,
b,c){var d=!0;this.Y[0]&&(this.JO(a,b),d=d&&this.dc(0));this.Y[2]&&(this.GO(a,b),d=d&&this.dc(2));this.Y[3]&&(this.lK(a,b,c),d=d&&this.dc(3));this.Y[5]&&(this.jK(a,b),d=d&&this.dc(5));this.Y[6]&&(this.CM(a,b),d=d&&this.dc(6));return d};b.prototype.DD=function(a,b,c){var d=!0;this.Y[0]&&(this.MO(a,b,c,this.ph),d=d&&this.dc(0));this.Y[2]&&(this.KO(a,c),d=d&&this.dc(2));this.Y[3]&&(this.oK(a,b,c,this.ph),d=d&&this.dc(3));this.Y[5]&&(this.nK(a,b,c,this.ph),d=d&&this.dc(5));this.Y[6]&&(this.DM(a,b,c),
d=d&&this.dc(6));return d};b.prototype.JQ=function(a,b,c){var d=!0;this.Y[0]&&(this.NO(a,b,c),d=d&&this.dc(0));this.Y[2]&&(this.iD(a,b,c,2),d=d&&this.dc(2));this.Y[6]&&(this.iD(a,c,b,6),d=d&&this.dc(6));return d};b.prototype.HO=function(a,b,c){2!=this.A[0]&&(a=this.h.Qe(a),0!=(a&b)&&0!=(a&c)&&(this.A[0]=2))};b.prototype.eD=function(a,b,c){if(1!=this.A[c]){var d=this.h.Qe(this.h.sa(a));0!=(this.h.Qe(a)&b)&&0!=(d&b)&&(this.A[c]=1)}};b.prototype.fD=function(a,b,c,d){2!=this.A[d]&&(a=this.h.Qe(a),0!=
(a&b)&&0==(a&c)&&(this.A[d]=2))};b.prototype.gK=function(a,b,c){if(1!=this.A[4]){var d=this.h.Gg(a);0!=(d&b)&&0!=(d&c)?this.A[4]=1:0!=this.A[4]&&1!=this.h.tb(this.h.fe(this.h.sa(a)),this.ni)&&(a=this.h.md(this.h.jf(a)),0!=(a&b)&&0!=(a&c)&&(this.A[4]=0))}};b.prototype.eB=function(a,b,c){if(1!=this.A[c]){var d=this.h.Qe(this.h.sa(a));0==(this.h.Qe(a)&b)&&0==(d&b)&&(this.A[c]=1)}};b.prototype.IO=function(a,b){if(1!=this.A[0]){var c=this.h.Qe(this.h.sa(a));0!=(this.h.Qe(a)&b)&&0!=(c&b)&&(this.A[0]=1)}};
b.prototype.EO=function(a,b,c,d){if(0!=this.A[1]&&1!=this.h.tb(this.h.fe(this.h.sa(a)),this.ni)){var e=this.h.jf(a),f=this.h.md(e);0==(f&b)&&0!=(this.h.Qe(a)&b)&&(a=this.h.Sf(e,d),0!=(f&c)&&0!=a%2&&(this.A[1]=0))}};b.prototype.FO=function(a,b){2!=this.A[2]&&0!=(this.h.Gg(a)&b)&&(this.A[2]=2)};b.prototype.kK=function(a,b,c,d){if(1!=this.A[3]){var e=this.h.Gg(a);0!=(e&b)&&0!=(e&c)?this.A[3]=1:0!=this.A[3]&&1!=this.h.tb(this.h.fe(this.h.sa(a)),this.ni)&&(e=this.h.jf(a),a=this.h.md(e),0!=(a&b)&&(b=this.h.Sf(e,
d),0!=(a&c)&&0==b%2&&(this.A[3]=0)))}};b.prototype.hK=function(a,b,c,d){if(0!=this.A[4]&&1!=this.h.tb(this.h.fe(this.h.sa(a)),this.ni)){var e=this.h.jf(a);a=this.h.md(e);0!=(a&b)&&(b=this.h.Sf(e,d),0!=(a&c)&&0!=b%2&&(this.A[4]=0))}};b.prototype.iK=function(a,b,c){1!=this.A[5]&&(a=this.h.Gg(a),0!=(a&b)&&0==(a&c)&&(this.A[5]=1))};b.prototype.BM=function(a,b){if(1!=this.A[6]){var c=this.h.Qe(this.h.sa(a));0==(this.h.Qe(a)&b)&&0==(c&b)&&(this.A[6]=1)}};b.prototype.AM=function(a,b,c,d){if(0!=this.A[7]&&
1!=this.h.tb(this.h.fe(this.h.sa(a)),this.ni)){var e=this.h.jf(a),f=this.h.md(e);0==(f&b)&&0==(this.h.Qe(a)&b)&&(a=this.h.Sf(e,d),0!=(f&c)&&0!=a%2&&(this.A[7]=0))}};b.prototype.LO=function(a,b,c,d,e){if(1!=this.A[0]){var f=this.h.Gg(a);0!=(f&b)&&0!=(f&c)?this.A[0]=1:0!=this.A[0]&&1!=this.h.tb(this.h.fe(this.h.sa(a)),this.ni)&&(a=this.h.jf(a),f=this.h.md(a),0!=(f&b)&&0!=(f&c)&&(b=this.h.Sf(a,d),e=this.h.Sf(a,e),0==b%2&&0==e%2&&(this.A[0]=0)))}};b.prototype.gD=function(a,b,c,d,e,f){if(0!=this.A[f]&&
1!=this.h.tb(this.h.fe(this.h.sa(a)),this.ni)){a=this.h.jf(a);var h=this.h.md(a);0!=(h&b)&&0!=(h&c)&&(b=this.h.Sf(a,d),e=this.h.Sf(a,e),0==b%2&&0!=e%2&&(this.A[f]=0))}};b.prototype.hD=function(a,b,c,d){1!=this.A[d]&&(a=this.h.Gg(a),0!=(a&b)&&0==(a&c)&&(this.A[d]=1))};b.prototype.mK=function(a,b,c,d,e){if(0!=this.A[4]&&1!=this.h.tb(this.h.fe(this.h.sa(a)),this.ni)){a=this.h.jf(a);var f=this.h.md(a);0!=(f&b)&&0!=(f&c)&&(b=this.h.Sf(a,d),e=this.h.Sf(a,e),0!=b%2&&0!=e%2&&(this.A[4]=0))}};b.prototype.fB=
function(a,b,c,d){0!=this.A[d]&&1!=this.h.tb(this.h.fe(this.h.sa(a)),this.ni)&&(a=this.h.jf(a),0==(this.h.md(a)&b)&&0!=this.h.Sf(a,c)%2&&(this.A[d]=0))};b.prototype.JO=function(a,b){0!=this.A[0]&&0==(this.h.md(a)&b)&&0!=(this.h.pj(this.h.mw(a))&b)&&(this.A[0]=0)};b.prototype.GO=function(a,b){2!=this.A[2]&&0!=(this.h.md(a)&b)&&(this.A[2]=2)};b.prototype.lK=function(a,b,c){0!=this.A[3]&&(a=this.h.md(a),0!=(a&b)&&0!=(a&c)&&(this.A[3]=0))};b.prototype.jK=function(a,b){1!=this.A[5]&&0!=(this.h.md(a)&b)&&
(this.A[5]=1)};b.prototype.CM=function(a,b){0!=this.A[6]&&0==(this.h.md(a)&b)&&0==(this.h.pj(this.h.mw(a))&b)&&(this.A[6]=0)};b.prototype.MO=function(a,b,c,d){if(0!=this.A[0]){var e=this.h.md(a);0!=(e&b)&&0!=(e&c)&&0==this.h.Sf(a,d)%2&&(this.A[0]=0)}};b.prototype.KO=function(a,b){1!=this.A[2]&&(-1!=this.h.te(a)?this.A[2]=1:0!=this.A[2]&&0==(this.h.md(a)&b)&&(this.A[2]=0))};b.prototype.oK=function(a,b,c,d){if(0!=this.A[3]){var e=this.h.md(a);0!=(e&b)&&0!=(e&c)&&0!=this.h.Sf(a,d)%2&&(this.A[3]=0)}};
b.prototype.nK=function(a,b,c,d){if(0!=this.A[5]){var e=this.h.md(a);0!=(e&b)&&0==(e&c)&&0!=this.h.Sf(a,d)%2&&(this.A[5]=0)}};b.prototype.DM=function(a,b,c){0!=this.A[6]&&(a=this.h.md(a),0==(a&b)&&0!=(a&c)&&(this.A[6]=0))};b.prototype.NO=function(a,b,c){0!=this.A[0]&&(a=this.h.md(a),0!=(a&b)&&0!=(a&c)&&(this.A[0]=0))};b.prototype.iD=function(a,b,c,d){0!=this.A[d]&&(a=this.h.md(a),0!=(a&b)&&0==(a&c)&&(this.A[d]=0))};b.prototype.so=function(b,c){var d=!1,e=this.h.ya(b),f=this.h.ya(c);this.ni=this.h.Eg();
for(var h=this.h.Be;-1!=h;h=this.h.Bf(h)){var g=this.h.te(h);if(-1==g){if(-1!=this.Nl)switch(this.Nl){case 3:d=this.bB(h,e,f);break;case 4:d=this.DD(h,e,f);break;default:throw a.g.ra("internal error");}}else{var n=g;do{var q=n;if(1!=this.h.tb(q,this.ni)){do{switch(this.$t){case 0:d=this.aK(q,e,f);break;case 1:d=this.bK(q,e,f);break;case 2:d=this.uP(q,e,f);break;default:throw a.g.ra("internal error");}if(d)break;this.h.Bb(q,this.ni,1);q=this.h.Wb(q)}while(q!=n&&!d)}if(d)break;n=this.h.Wb(this.h.sa(q))}while(n!=
g);if(d)break}}d||this.SF();this.h.kh(this.ni)};b.prototype.Pv=function(b,c){for(var d=!1,e=this.h.ya(b),f=this.h.ya(c),h=this.h.Be;-1!=h;h=this.h.Bf(h)){switch(this.Nl){case 3:d=this.bB(h,e,f);break;case 4:d=this.DD(h,e,f);break;case 5:d=this.JQ(h,e,f);break;default:throw a.g.wa();}if(d)break}d||this.SF()};b.prototype.Op=function(a,b){this.h.Mp(a,b)};b.prototype.In=function(a,b,c){this.tM(a,b,c);this.Op(a,c)};b.prototype.tM=function(b,c,d){a.aj.$(b,c,d,!1);b.xo(0,!0,!0);for(c=b.$c;-1!=c;c=b.we(c))1736==
b.Lb(c)&&a.mm.$(b,c,-1,!1,d)};b.NB=function(b,c){var d=b.D();if(a.T.Lc(d))return d=new a.Xa(b.description),d.Bc(b,!0),d;if(197==d){d=new a.i;b.o(d);if(d.ba()<=c&&d.aa()<=c)return d=new a.Va(b.description),b.Af(d),d;if(d.ba()<=c||d.aa()<=c){var d=new a.Xa(b.description),e=new a.Va;b.uf(0,e);d.df(e);b.uf(2,e);d.lineTo(e);return d}d=new a.Ka(b.description);d.Wc(b,!1);return d}return b};return b}();a.el=b})(z||(z={}));(function(a){var b=function(){function b(c){this.Dl=new a.ga(0);this.Ot=new a.ga(0);
this.Ar=new a.b;this.Br=new a.b;this.a=c;this.Tq=-1}b.prototype.cc=function(a){return this.a.cc(this.Jw(a))};b.prototype.ot=function(a){var b=this.tw(a);a=this.vC(a);if(this.a.Ua(b)==a){var c=b,b=a;a=c}this.a.uc(b,this.Ar);this.a.uc(a,this.Br);return this.Ar.y<this.Br.y};b.prototype.Jw=function(a){var b=this.tw(a);a=this.vC(a);return this.a.X(b)==a?b:a};b.prototype.tw=function(a){return this.Dl.get(a)};b.prototype.vC=function(a){return this.Ot.get(a)};b.prototype.hC=function(a){this.Dl.set(a,this.Tq);
this.Tq=a};b.prototype.GE=function(b){if(-1!=this.Tq){var c=this.Tq;this.Tq=this.Dl.get(c);this.Dl.set(c,b);this.Ot.set(c,this.a.X(b));return c}null==this.Dl&&(this.Dl=new a.ga(0),this.Ot=new a.ga(0));c=this.Dl.size;this.Dl.add(b);this.Ot.add(this.a.X(b));return c};b.prototype.Dw=function(a){return this.a.rd(this.tw(a))};return b}();a.BT=b;var c=function(){function b(c){this.me=c;this.Vd=new a.yb;this.Kl=new a.yb;this.eE=0;this.on=null;this.zx=-1}b.prototype.compare=function(a,b,c){c=a.da(c);var d=
this.me.$a,e;this.zx==b?e=this.eE:(this.on=d.cc(b),null==this.on?(a=d.a,a.Oc(d.Jw(b),this.Vd),this.on=this.Vd,e=this.Vd.xe(this.me.Zg,0)):e=this.on.xe(this.me.Zg,0),this.eE=e,this.zx=b);a=d.cc(c);var f;null==a?(a=d.a,a.Oc(d.Jw(c),this.Kl),a=this.Kl,f=this.Kl.xe(this.me.Zg,0)):f=a.xe(this.me.Zg,0);e==f&&(b=d.ot(b),c=d.ot(c),c=Math.min(b?this.on.ha:this.on.ja,c?a.ha:a.ja),b=0.5*(c+this.me.Zg),b==this.me.Zg&&(b=c),e=this.on.xe(b,0),f=a.xe(b,0));return e<f?-1:e>f?1:0};b.prototype.reset=function(){this.zx=
-1};return b}(),d=function(){function d(){this.Rl=this.Dk=null;this.Za=new a.bj;this.Za.lM();this.Ld=new c(this);this.Za.Hn(this.Ld)}d.prototype.XM=function(){var b=!1;this.Qt&&(b=this.YM());if(1==this.a.ea(this.U)){var c=this.a.Vb(this.U),b=this.a.Gw(c);this.a.Dy(c,!0);return 0>b?(b=this.a.Cb(c),this.a.lF(b),this.a.Wi(c,this.a.Ua(b)),!0):!1}this.Ak=this.a.Uv();this.kn=this.a.Uv();for(c=this.a.Vb(this.U);-1!=c;c=this.a.bc(c))this.a.Rp(c,this.Ak,0),this.a.Rp(c,this.kn,-1);c=new a.ga(0);this.Zg=NaN;
var d=new a.b;this.lr=this.a.ea(this.U);this.fn=this.a.re();this.br=this.a.re();for(var e=this.Dk.gc(this.Dk.Wd);-1!=e;e=this.Dk.bb(e)){var f=this.Dk.getData(e);this.a.uc(f,d);d.y!=this.Zg&&0!=c.size&&(b=this.yr(c)||b,this.Ld.reset(),c.clear(!1));c.add(f);this.Zg=d.y;if(0==this.lr)break}0<this.lr&&(b=this.yr(c)||b,c.clear(!1));this.a.bf(this.fn);this.a.bf(this.br);for(c=this.a.Vb(this.U);-1!=c;)if(3==this.a.Ei(c,this.Ak)){this.a.Dy(c,!0);d=c;for(c=this.a.Ei(c,this.kn);-1!=c;)e=this.a.Ei(c,this.kn),
this.a.bQ(this.U,this.a.bc(d),c),d=c,c=e;c=this.a.bc(d)}else this.a.Dy(c,!1),c=this.a.bc(c);this.a.ty(this.Ak);this.a.ty(this.kn);return b};d.prototype.yr=function(a){return this.WQ(a)};d.prototype.WQ=function(c){var d=!1;null==this.$a&&(this.$a=new b(this.a));null==this.Rl?(this.Rl=new a.ga(0),this.Rl.xb(16)):this.Rl.clear(!1);this.VQ(c);for(var e=0,f=c.size;e<f;e++){var k=c.get(e);-1!=k&&this.bD(k,-1)}for(e=0;e<this.Rl.size&&0<this.lr;e++)if(c=this.Rl.get(e),k=this.$a.Dw(this.Za.da(c)),f=-1,0==
this.a.Ei(k,this.Ak)){for(var k=this.Za.ge(c),h=c,g;-1!=k;){var n=this.Za.da(k),q=this.$a.Dw(n),p=this.a.Ei(q,this.Ak);if(0!=p){f=q;break}h=k;k=this.Za.ge(k)}-1==k?(g=!0,k=h):(n=this.Za.da(k),g=this.$a.ot(n),k=this.Za.bb(k),g=!g);do{n=this.Za.da(k);q=this.$a.Dw(n);p=this.a.Ei(q,this.Ak);if(0==p&&(g!=this.$a.ot(n)&&(d=this.a.Cb(q),this.a.lF(d),this.a.Wi(q,this.a.Ua(d)),d=!0),this.a.Rp(q,this.Ak,g?3:2),g||(h=this.a.Ei(f,this.kn),this.a.Rp(f,this.kn,q),this.a.Rp(q,this.kn,h)),this.lr--,0==this.lr))return d;
f=q;h=k;k=this.Za.bb(k);g=!g}while(h!=c)}return d};d.prototype.VQ=function(a){for(var b=0,c=a.size;b<c;b++){var d=a.get(b),e=this.a.Ra(d,this.fn),f=this.a.Ra(d,this.br);if(-1!=e){var k=this.Za.da(e);this.$a.hC(k);this.a.lb(d,this.fn,-1)}-1!=f&&(k=this.Za.da(f),this.$a.hC(k),this.a.lb(d,this.br,-1));k=-1;-1!=e&&-1!=f?(this.Za.kd(e,-1),this.Za.kd(f,-1),a.set(b,-1)):k=-1!=e?e:f;-1!=k&&(this.bD(d,k)||this.Za.kd(k,-1),a.set(b,-1))}};d.prototype.bD=function(b,c){var d=new a.b,e=new a.b;this.a.uc(b,d);var f=
this.a.X(b);this.a.uc(f,e);var k=!1;if(d.y<e.y){var k=!0,h=this.$a.GE(b),g;-1==c?g=this.Za.addElement(h,-1):(g=c,this.Za.Vi(g,h));h=this.a.Ra(f,this.fn);-1==h?this.a.lb(f,this.fn,g):this.a.lb(f,this.br,g);f=this.a.rd(b);0==this.a.Ei(f,this.Ak)&&this.Rl.add(g)}f=this.a.Ua(b);this.a.uc(f,e);d.y<e.y&&(k=!0,h=this.$a.GE(f),-1==c?g=this.Za.addElement(h,-1):(g=c,this.Za.Vi(g,h)),h=this.a.Ra(f,this.fn),-1==h?this.a.lb(f,this.fn,g):this.a.lb(f,this.br,g),f=this.a.rd(b),0==this.a.Ei(f,this.Ak)&&this.Rl.add(g));
return k};d.$=function(a,b,c,e){var f=new d;f.a=a;f.U=b;f.Dk=c;f.Qt=e;return f.XM()};d.prototype.YM=function(){var b=new a.ga(0),c=new a.ga(0),d=-1,e=-1,f=new a.b;f.Eh();for(var k=-1,h=-1,g=-1,n=new a.b,q=this.Dk.gc(this.Dk.Wd);-1!=q;q=this.Dk.bb(q)){var p=this.Dk.getData(q);this.a.uc(p,n);var m=this.a.rd(p);f.ub(n)&&h==m?(-1==e&&(d=this.a.Uv(),e=this.a.re()),-1==g&&(g=c.size,this.a.lb(k,e,g),c.add(1),-1==this.a.Ei(m,d)&&(this.a.Rp(m,d,k),b.add(m))),this.a.lb(p,e,g),c.JF(c.tc()+1)):(g=-1,f.J(n));
k=p;h=m}if(0==b.size)return!1;f=new a.ga(0);k=new a.ga(0);h=0;for(g=b.size;h<g;h++){var m=b.get(h),s=this.a.Ei(m,d),p=this.a.Ra(s,e);f.clear(!1);k.clear(!1);f.add(s);k.add(p);for(p=this.a.X(s);p!=s;p=this.a.X(p)){var t=p,n=this.a.Ra(t,e);if(-1!=n)if(0==k.size)k.add(n),f.add(t);else if(k.tc()==n){var q=f.tc(),u=this.a.X(q),s=this.a.X(t);this.a.Sc(q,s);this.a.Tc(s,q);this.a.Sc(t,u);this.a.Tc(u,t);t=[!1];u=this.a.aD(this.U,u,this.a.Cb(m),t);this.a.lb(p,e,-1);t[0]&&this.a.Dh(m,s);p=this.a.Ha(m);s=this.a.Ha(u);
p-=s;this.a.hm(m,p);c.set(n,c.get(n)-1);1==c.get(n)&&(c.set(n,0),k.af(),f.af());p=s=q}else f.add(p),k.add(n)}}this.a.ty(d);this.a.bf(e);return!0};return d}();a.AI=d})(z||(z={}));(function(a){var b=function(){function b(){}b.prototype.Ag=function(){this.Mx=this.ib=null};b.prototype.get=function(){return this.Mx};b.prototype.set=function(b){this.Mx=b;if(null!=b)throw 322==b.D()&&(this.ib=b),a.g.wa();};b.prototype.create=function(b){if(322==b)this.mq();else throw a.g.ra("Not Implemented");};b.prototype.mq=
function(){null==this.ib&&(this.ib=new a.yb);this.Mx=this.ib};return b}();a.Ag=b})(z||(z={}));(function(a){a=a.FI||(a.FI={});a[a.enumLineSeg=1]="enumLineSeg";a[a.enumBezierSeg=2]="enumBezierSeg";a[a.enumArcSeg=4]="enumArcSeg";a[a.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask";a[a.enumSegmentMask=7]="enumSegmentMask";a[a.enumDensified=8]="enumDensified"})(z||(z={}));(function(a){var b=function(){return function(a){this.ri=a;this.dz=this.ez=1;this.ky=this.jy=this.ly=0}}(),c=function(){function c(){this.op=
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Ij=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.nf=new a.Va;this.ka=this.fu=0;this.an=[];this.ir=[];this.bu=[];this.qp=[];this.Jx=[]}c.prototype.ny=function(a){if(null!=a){for(var b=0,c=a.length;b<c;b++)this.oR(a[b]);a.length=0}};c.prototype.oR=function(a){a.ri=null;this.qp.push(a)};c.prototype.nu=function(a){if(0===this.qp.length)var c=new b(a);else c=this.qp[this.qp.length-1],c.ri=a,this.qp.length-=1;return c};c.prototype.dO=function(a,b){return 0==a?this.ir[b]:this.bu[b]};
c.prototype.Zx=function(){this.fu>=this.Jx.length&&this.Jx.push(new a.Ag);var b=this.Jx[this.fu];this.fu++;return b};c.prototype.clear=function(){this.ny(this.an);this.ny(this.ir);this.ny(this.bu);this.fu=0};c.prototype.zn=function(a){this.an.push(this.nu(a))};c.prototype.kk=function(a){return 0==a?this.ir.length:this.bu.length};c.prototype.Io=function(a,b){return this.dO(a,b).ri};c.prototype.Ga=function(b,c){if(2!=this.an.length)throw a.g.wa();this.ka=b;var d=a.vi.Ty(0.01*b),e=!1,f=this.an[0],h=
this.an[1];if(c||0!=(f.ri.fq(h.ri,b,!0)&5)){if(322==f.ri.D()){var g=f.ri;if(322==h.ri.D()){var n=h.ri,q=a.yb.ov(g,n,null,this.op,this.Ij,b);if(0==q)throw a.yb.ov(g,n,null,this.op,this.Ij,b),a.g.wa();var p=Array(9);a.I.Ps(p,null);for(var m=0;m<q;m++){var s=this.op[m],t=this.Ij[m],u=f.ky,v=1;0==s?(u=f.ly,v=f.ez):1==s&&(u=f.jy,v=f.dz);var w=h.ky,x=1;0==t?(w=h.ly,x=h.ez):1==t&&(w=h.jy,x=h.dz);var A=new a.b;u==w?(u=new a.b,g.Kb(s,u),s=new a.b,n.Kb(t,s),t=v+x,x/=t,a.vi.BD(u,s,x,A),a.b.Zb(A,u)+a.b.Zb(A,
s)>d&&(e=!0)):u>w?(g.Kb(s,A),s=new a.b,n.Kb(t,s),a.b.Zb(A,s)>d&&(e=!0)):(n.Kb(t,A),u=new a.b,g.Kb(s,u),a.b.Zb(A,u)>d&&(e=!0));p[m]=A}f=0;h=-1;for(m=0;m<=q;m++)x=m<q?this.op[m]:1,x!=f&&(d=this.Zx(),g.Bi(f,x,d),-1!=h&&d.get().ed(p[h]),m!=q&&d.get().vd(p[m]),f=x,this.ir.push(this.nu(d.get()))),h=m;g=[0,0,0,0,0,0,0,0,0];for(m=0;m<q;m++)g[m]=m;1<q&&this.Ij[0]>this.Ij[1]&&(x=this.Ij[0],this.Ij[0]=this.Ij[1],this.Ij[1]=x,m=g[0],g[0]=g[1],g[1]=m);f=0;h=-1;for(m=0;m<=q;m++)x=m<q?this.Ij[m]:1,x!=f&&(d=this.Zx(),
n.Bi(f,x,d),-1!=h&&(f=g[h],d.get().ed(p[f])),m!=q&&(f=g[m],d.get().vd(p[f])),f=x,this.bu.push(this.nu(d.get()))),h=m;return e}}throw a.g.wa();}return!1};c.prototype.Tw=function(b,c,d){c.copyTo(this.nf);if(1!=this.an.length)throw a.g.wa();this.ka=b;var e=this.an[0];if(d||e.ri.qs(c.w(),b,!0))if(322==e.ri.D()){b=e.ri;var f=b.Gd(c.w(),!1);this.op[0]=f;var h=e.ky;d=1;0==f?(h=e.ly,d=e.ez):1==f&&(h=e.jy,d=e.dz);e=new a.b;0==h?(h=new a.b,b.Kb(f,h),c=c.w(),a.vi.BD(h,c,1/(d+1),e)):0<h?(e=new a.b,b.Kb(f,e)):
e=c.w();d=0;f=-1;for(h=0;1>=h;h++){c=1>h?this.op[h]:1;if(c!=d){var g=this.Zx();b.Bi(d,c,g);-1!=f&&g.get().ed(e);1!=h&&g.get().vd(e);d=c;this.ir.push(this.nu(g.get()))}f=h}this.nf.ic(e)}else throw a.g.wa();};return c}();a.gA=c})(z||(z={}));(function(a){var b=function(){function b(c){this.Pq=this.yj=this.ib=null;this.zk=this.Ee=this.Gc=this.ze=this.Sg=this.Qa=0;this.ab=null;this.zl=!1;this.ze=-1;this.Sg=this.Gc=0;this.Qa=-1;this.ab=c;this.Ee=this.eq(this.Sg);this.zl=!1;this.yj=null;this.zk=-1;this.Pq=
new a.b}b.Yn=function(c,d){if(0>d||d>=c.F())throw a.g.Uc();var e=new b(c),f=c.Ew(d);e.Gc=d-c.Ea(f);e.Sg=f+1;e.Qa=f;e.Ee=e.eq(e.Qa);e.zk=e.ab.Ea(e.Qa);return e};b.Un=function(c,d,e){if(0>d||d>=c.ea()||0>e)throw a.g.Uc();var f=c.vc(d)?0:1;if(e>=c.Ha(d)-f)throw a.g.Uc();c=new b(c);c.ze=-1;c.Gc=e;c.Qa=d;c.Sg=c.Gc+1;c.Ee=c.eq(c.Sg);c.zk=c.ab.Ea(c.Qa);return c};b.prototype.xR=function(b){if(this.ab!=b.ab)throw a.g.xa();this.ze=b.ze;this.Gc=b.Gc;this.Qa=b.Qa;this.Sg=b.Sg;this.Ee=b.Ee;this.zl=b.zl;this.zk=
b.zk;this.yj=null};b.prototype.ia=function(){this.ze!=this.Gc&&this.JA();if(this.zl)this.Gc=(this.Gc+1)%this.Ee;else{if(this.Gc==this.Ee)throw a.g.Uc();this.Gc++}return this.yj};b.prototype.oi=function(){if(this.zl)this.Gc=(this.Ee+this.Gc-1)%this.Ee;else{if(0==this.Gc)throw a.g.Uc();this.Gc--}this.Gc!=this.ze&&this.JA();return this.yj};b.prototype.yR=function(){this.ze=-1;this.Gc=0};b.prototype.zR=function(){this.Gc=this.Ee;this.ze=-1};b.prototype.Sb=function(a,b){void 0===b&&(b=-1);if(0<=this.Qa&&
this.Qa<this.ab.ea()){var c=this.uJ();if(a>=c&&a<this.ab.Dc(this.Qa)){this.ze=-1;this.Gc=a-c;return}}c=0<=b&&b<this.ab.ea()&&a>=this.ab.Ea(b)&&a<this.ab.Dc(b)?b:this.ab.Ew(a);this.Sg=c+1;this.Qa=c;this.ze=-1;this.Gc=a-this.ab.Ea(c);this.Ee=this.eq(c);this.zk=this.ab.Ea(this.Qa)};b.prototype.kb=function(){this.Qa=this.Sg;if(this.Qa>=this.ab.ea())return!1;this.ze=-1;this.Gc=0;this.Ee=this.eq(this.Qa);this.zk=this.ab.Ea(this.Qa);this.Sg++;return!0};b.prototype.Lk=function(){this.Ee=this.Gc=this.ze=-1;
this.Sg=0;this.zk=this.Qa=-1};b.prototype.vy=function(b){if(0>b)throw a.g.Uc();this.Sg=b;this.zk=this.Ee=this.Gc=this.ze=this.Qa=-1};b.prototype.eq=function(a){if(this.ab.sc())return 0;var b=1;this.ab.vc(a)&&(b=0);return this.ab.Ha(a)-b};b.prototype.lD=function(){return this.ze==this.Ee-1&&this.ab.vc(this.Qa)};b.prototype.NR=function(){this.zl=!0};b.prototype.Jb=function(){return this.ab.jb.f[this.Qa]+this.ze};b.prototype.uJ=function(){return this.ab.Ea(this.Qa)};b.prototype.Bm=function(){return this.lD()?
this.ab.Ea(this.Qa):this.Jb()+1};b.prototype.wl=function(){return 0==this.ze};b.prototype.Jm=function(){return this.ze==this.Ee-1};b.prototype.La=function(){return this.Gc<this.Ee};b.prototype.Ow=function(){return 0<this.Gc};b.prototype.vm=function(){var a=new b(this.ab);a.ze=this.ze;a.Gc=this.Gc;a.Ee=this.Ee;a.Qa=this.Qa;a.Sg=this.Sg;a.ab=this.ab;a.zl=this.zl;return a};b.prototype.JA=function(){if(0>this.Gc||this.Gc>=this.Ee)throw a.g.Uc();this.ze=this.Gc;var b=this.Jb();this.ab.kc();var c=this.ab.Fe,
d=1;null!=c&&(d=c.read(b)&7);c=this.ab.description;switch(d){case 1:null==this.ib&&(this.ib=new a.yb);this.yj=this.ib;break;case 2:throw a.g.ra("internal error");case 4:throw a.g.wa();default:throw a.g.wa();}this.yj.Qf(c);d=this.Bm();this.ab.uc(b,this.Pq);this.yj.ed(this.Pq);this.ab.uc(d,this.Pq);this.yj.vd(this.Pq);for(var e=1,f=c.Aa;e<f;e++)for(var h=c.Hd(e),g=a.pa.Wa(h),n=0;n<g;n++){var p=this.ab.ld(h,b,n);this.yj.My(h,n,p);p=this.ab.ld(h,d,n);this.yj.Cy(h,n,p)}};b.prototype.YO=function(){return this.Qa==
this.ab.ea()-1};return b}();a.GI=b})(z||(z={}));(function(a){var b=function(){function b(c){c instanceof a.T?(this.ZD=c,this.ua=-1,this.Wh=1):(this.DP=c.slice(0),this.ua=-1,this.Wh=c.length)}b.prototype.ya=function(){return this.ua};b.prototype.next=function(){return this.ua<this.Wh-1?(this.ua++,null!=this.ZD?this.ZD:this.DP[this.ua]):null};return b}();a.Pc=b})(z||(z={}));(function(a){var b=function(){return function(){this.next=null}}(),c=function(){function c(){this.Cp=this.ju=this.ku=this.vj=this.eh=
0;this.aC=!1;this.eG=0;this.am=this.wf=this.Vk=this.hh=null;this.Mk=0;this.Kv=null;this.vj=this.eh=-1}c.prototype.vS=function(b,c,d){this.eh=b;this.vj=c;this.hh=this.Vk=null;this.Cp=0;this.Kv=d;null==this.am&&(this.am=a.I.Lh(384,0));this.hG()};c.prototype.aa=function(){return this.eh};c.prototype.ba=function(){return this.vj};c.prototype.flush=function(){0<this.Mk&&(this.Kv.XB(this.am,this.Mk),this.Mk=0)};c.prototype.hG=function(){if(0<this.Cp){for(var a=0;a<this.vj;a++){for(var b=this.Vk[a];null!=
b;){var c=b,b=b.next;c.next=null}this.Vk[a]=null}this.hh=null}this.ku=this.vj;this.ju=-1;this.Cp=0};c.prototype.fF=function(a){this.aC=a==c.$u;for(a=this.ku;a<=this.ju;a++)this.VJ(),this.PJ(a),this.vM();this.hG()};c.prototype.zv=function(c,d,e,f){if(d!=f){var h=1;d>f&&(h=c,c=e,e=h,h=d,d=f,f=h,h=-1);if(!(0>f||d>=this.vj)){0>c&&0>e?e=c=-1:c>=this.eh&&e>=this.eh&&(e=c=this.eh);var g=(e-c)/(f-d);f>this.vj&&(f=this.vj,e=g*(f-d)+c);0>d&&(c=g*(0-d)+c,d=0);var n=Math.max(this.eh+1,8388607);-8388607>c?(d=
(0-c)/g+d,c=0):c>n&&(d=(this.eh-c)/g+d,c=this.eh);-8388607>e?f=(0-c)/g+d:e>n&&(f=(this.eh-c)/g+d);d=a.I.truncate(d);f=a.I.truncate(f);d!=f&&(e=new b,e.x=a.I.truncate(4294967296*c),e.y=d,e.G=f,e.pM=a.I.truncate(4294967296*g),e.dir=h,null==this.Vk&&(this.Vk=a.I.Lh(this.vj,null)),e.next=this.Vk[e.y],this.Vk[e.y]=e,e.y<this.ku&&(this.ku=e.y),e.G>this.ju&&(this.ju=e.G),this.Cp++)}}};c.prototype.VJ=function(){if(null!=this.hh){for(var a=!1,b=null,c=this.hh;null!=c;)if(c.y++,c.y==c.G){var d=c,c=c.next;null!=
b?b.next=c:this.hh=c;d.next=null}else c.x+=c.pM,null!=b&&b.x>c.x&&(a=!0),b=c,c=c.next;a&&(this.hh=this.dG(this.hh))}};c.prototype.PJ=function(a){if(!(a>=this.vj)){var b=this.Vk[a];if(null!=b){this.Vk[a]=null;b=this.dG(b);this.Cp-=this.eG;a=this.hh;for(var c=!0,d=b,e=null;null!=a&&null!=d;)a.x>d.x?(c&&(this.hh=d),c=d.next,d.next=a,null!=e&&(e.next=d),e=d,d=c):(c=a.next,a.next=d,null!=e&&(e.next=a),e=a,a=c),c=!1;null==this.hh&&(this.hh=b)}}};c.Mz=function(a,b){return 0>a?0:a>b?b:a};c.prototype.vM=function(){if(null!=
this.hh)for(var b=0,d=this.hh,e=a.I.truncate(a.I.FD(d.x)),f=d.next;null!=f;f=f.next)if(b=this.aC?b^1:b+f.dir,f.x>d.x){var h=a.I.truncate(a.I.FD(f.x));0!=b&&(d=c.Mz(e,this.eh),e=c.Mz(h,this.eh),e>d&&d<this.eh&&(this.am[this.Mk++]=d,this.am[this.Mk++]=e,this.am[this.Mk++]=f.y,this.Mk==this.am.length&&(this.Kv.XB(this.am,this.Mk),this.Mk=0)));d=f;e=h}};c.prototype.dG=function(b){for(var d=0,e=b;null!=e;e=e.next)d++;this.eG=d;if(1==d)return b;null==this.wf?this.wf=a.I.Lh(Math.max(d,16),null):this.wf.length<
d&&(this.wf=a.I.Lh(Math.max(d,2*this.wf.length),null));for(var f=0,e=b;null!=e;e=e.next)this.wf[f++]=e;2==d?this.wf[0].x>this.wf[1].x&&(b=this.wf[0],this.wf[0]=this.wf[1],this.wf[1]=b):c.pP(this.wf,d,function(a,b){return a==b?0:a.x<b.x?-1:a.x>b.x?1:0});b=this.wf[0];this.wf[0]=null;e=b;for(f=1;f<d;f++)e.next=this.wf[f],e=this.wf[f],this.wf[f]=null;e.next=null;return b};c.pP=function(a,b,c){if(b==a.length)a.sort(c);else{var d=a.slice(0,0),e=a.slice(b);b=a.slice(0,b).sort(c);a.length=0;a.push.apply(a,
d.concat(b).concat(e))}};c.$u=0;c.sT=1;return c}();a.ev=c})(z||(z={}));(function(a){var b=function(){function b(){}b.prototype.Jh=function(a,b){var c=this.a.Ra(a,this.vp);this.yk==c&&(this.yk=this.$d.bb(this.yk));this.Xm==c&&(this.Xm=this.$d.bb(this.Xm));this.$d.Jc(this.Ox,c);this.hj(a);if(b&&(c=this.a.rd(a),-1!=c&&this.a.Cb(c)==a)){var d=this.a.X(a);if(d!=a){var e=this.a.rd(d);if(e==c){this.a.Dh(c,d);return}d=this.a.Ua(a);if(d!=a&&(e=this.a.rd(d),e==c)){this.a.Dh(c,d);return}}this.a.Dh(c,-1);this.a.Wi(c,
-1)}};b.prototype.yA=function(){for(var b=!1,c=0,d=new a.b;;){c++;null==this.nh?(this.nh=new a.ga(0),this.Mq=new a.ga(0),this.ie=new a.ga(0)):(this.nh.clear(!1),this.Mq.clear(!1),this.ie.clear(!1));for(var e=this.Xm,f=0,h=!0;e!=this.yk;){var g=this.$d.getData(e),n=new a.b;this.a.uc(g,n);h&&(this.a.uc(g,d),h=!1);var n=this.a.Ua(g),p=this.a.X(g);-559038737!=this.a.Ra(n,this.fg)&&(this.nh.add(n),this.a.lb(n,this.fg,-559038737),this.Mq.add(g),this.ie.add(f++));-559038737!=this.a.Ra(p,this.fg)&&(this.nh.add(p),
this.a.lb(p,this.fg,-559038737),this.Mq.add(g),this.ie.add(f++));e=this.$d.bb(e)}if(2>this.nh.size)break;var m=this;this.ie.xd(0,this.ie.size,function(a,b){return m.mJ(a,b)});e=0;for(f=this.ie.size;e<f;e++)h=this.ie.get(e),h=this.nh.get(h),this.a.lb(h,this.fg,e),n=new a.b,this.a.uc(h,n);n=this.zJ(d);e=0;for(f=this.ie.size;e<f;e++)h=this.ie.get(e),-1!=h&&(h=this.nh.get(h),this.a.lb(h,this.fg,-1));if(n)b=!0;else break}return b};b.prototype.zJ=function(a){for(var b=!1,c=!0;c;){var c=!1,d=0;-1==this.ie.get(d)&&
(d=this.fl(d));for(var e=this.fl(d),f=0,h=this.ie.size;f<h&&-1!=d&&-1!=e&&d!=e;f++){var g=this.ie.get(d),e=this.ie.get(e),g=this.nh.get(g),e=this.nh.get(e),n=this.a.X(g);this.a.pt(n,a)||(n=this.a.Ua(g));var p=this.a.X(e);this.a.pt(p,a)||(p=this.a.Ua(e));var m=this.os(n,g),s=this.os(p,e),t=m?this.a.Ua(n):this.a.X(n),u=s?this.a.Ua(p):this.a.X(p),v=!1;this.io(n)?v=!0:this.io(p)?v=!0:this.io(g)?v=!0:this.io(e)?v=!0:this.io(t)?v=!0:this.io(u)&&(v=!0);!v&&this.a.Cq(g,e)&&(v=!0,this.BA(m,s,n,g,p,e));!v&&
this.a.Cq(t,u)&&(v=!0,this.BA(!m,!s,n,t,p,u));v&&(b=!0);c=c||v;d=this.fl(d);e=this.fl(d)}}if(!b){d=0;-1==this.ie.get(d)&&(d=this.fl(d));e=this.fl(d);f=0;for(h=this.ie.size;f<h&&-1!=d&&-1!=e&&d!=e;f++)g=this.ie.get(d),e=this.ie.get(e),g=this.nh.get(g),e=this.nh.get(e),n=this.a.X(g),this.a.pt(n,a)||(n=this.a.Ua(g)),p=this.a.X(e),this.a.pt(p,a)||(p=this.a.Ua(e)),m=this.os(n,g),s=this.os(p,e),t=m?this.a.Ua(n):this.a.X(n),u=s?this.a.Ua(p):this.a.X(p),this.qJ(m,s,g,n,t,e,p,u)&&(b=!0),d=this.fl(d),e=this.fl(d)}return b};
b.prototype.CJ=function(){1736==this.a.Lb(this.U)&&1==this.a.Cm(this.U)&&(new a.Of).DQ(this.Qt,this.a,this.U,this.oe);var b=!1,c=!0;this.fg=this.vp=-1;var d=this.a.F(this.U),e=new a.ga(0);e.xb(d);for(var f=this.a.Vb(this.U);-1!=f;f=this.a.bc(f))for(var h=this.a.Cb(f),g=0,n=this.a.Ha(f);g<n;g++)e.add(h),h=this.a.X(h);var p=this.a.cd.f,m=this.a.cd.Ic;this.a.wb.kc();var s=this.a.wb.Ba[0].f;e.xd(0,d,function(a,b){var c=p[m*a],d=p[m*b],e=s[2*c],c=s[2*c+1],f=s[2*d],d=s[2*d+1],e=c<d?-1:c>d?1:e<f?-1:e>f?
1:0;0==e&&(e=p[m*a+3],d=p[m*b+3],e=e<d?-1:e==d?0:1);return e});this.vp=this.a.re();this.$d=new a.$n;this.Ox=this.$d.jh(0);this.$d.$l(d);for(f=0;f<d;f++)h=e.get(f),g=this.$d.addElement(this.Ox,h),this.a.lb(h,this.vp,g);this.fg=this.a.re();this.yk=-1;for(this.sA()&&(b=!0);c;){c=!1;d=0;e=!1;do{e=!1;this.Xm=-1;for(var n=0,f=new a.b,g=new a.b,t=this.$d.gc(this.Ox);-1!=t;)h=this.$d.getData(t),-1!=this.Xm?(this.a.uc(h,g),f.ub(g))?n++:(f.J(g),this.yk=t,0<n&&(h=this.yA())&&(e=!0,-1!=this.yk&&(h=this.$d.getData(this.yk),
this.a.uc(h,f))),this.Xm=t=this.yk,n=0):(this.Xm=t,this.a.uc(this.$d.getData(t),f),n=0),-1!=t&&(t=this.$d.bb(t));this.yk=-1;0<n&&(h=this.yA())&&(e=!0);if(10<d++)throw a.g.wa();e&&this.tJ();this.sA()&&(e=!0);c=c||e&&!1;b=b||e}while(e)}this.a.bf(this.vp);this.a.bf(this.fg);return b=a.AI.$(this.a,this.U,this.$d,this.Qt)||b};b.prototype.os=function(a,b){return this.a.X(b)==a?!1:!0};b.prototype.qJ=function(a,b,c,d,e,f,h,g){if(d==h)return this.hj(c),this.hj(f),!1;var n=this.a.Ra(c,this.fg),p=this.a.Ra(e,
this.fg),m=this.a.Ra(f,this.fg),s=this.a.Ra(g,this.fg);c=[0,0,0,0,0,0,0,0];var t=[0,0,0,0];c[0]=0;t[0]=n;c[1]=0;t[1]=p;c[2]=1;t[2]=m;c[3]=1;t[3]=s;for(n=1;4>n;n++){p=t[n];m=c[n];for(s=n-1;0<=s&&t[s]>p;)t[s+1]=t[s],c[s+1]=c[s],s--;t[s+1]=p;c[s+1]=m}t=0;0!=c[0]&&(t|=1);0!=c[1]&&(t|=2);0!=c[2]&&(t|=4);0!=c[3]&&(t|=8);if(5!=t&&10!=t)return!1;a==b?a?(this.a.Sc(g,d),this.a.Tc(d,g),this.a.Sc(e,h),this.a.Tc(h,e)):(this.a.Tc(g,d),this.a.Sc(d,g),this.a.Tc(e,h),this.a.Sc(h,e)):a?(this.a.Tc(d,f),this.a.Sc(f,
d),this.a.Tc(h,e),this.a.Sc(e,h)):(this.a.Sc(d,f),this.a.Tc(f,d),this.a.Sc(h,e),this.a.Tc(e,h));return!0};b.prototype.BA=function(a,b,c,d,e,f){this.pU?this.BJ():this.AJ(a,b,c,d,e,f)};b.prototype.BJ=function(){throw a.g.ra("not implemented.");};b.prototype.AJ=function(a,b,c,d,e,f){if(a!=b)a?(this.a.Sc(c,e),this.a.Tc(e,c),this.a.Sc(f,d),this.a.Tc(d,f),this.pm(e,c),this.Jh(e,!0),this.a.Ui(e,!0),this.hj(c),this.pm(f,d),this.Jh(f,!0),this.a.Ui(f,!1)):(this.a.Sc(e,c),this.a.Tc(c,e),this.a.Sc(d,f),this.a.Tc(f,
d),this.pm(e,c),this.Jh(e,!0),this.a.Ui(e,!1),this.hj(c),this.pm(f,d),this.Jh(f,!0),this.a.Ui(f,!0)),this.hj(d);else{var h=a?c:d,g=b?e:f;a=a?d:c;b=b?f:e;e=!1;this.a.Sc(h,g);this.a.Sc(g,h);this.a.Tc(a,b);this.a.Tc(b,a);for(f=b;f!=g;)c=this.a.Ua(f),d=this.a.X(f),this.a.Tc(f,d),this.a.Sc(f,c),e=e||f==h,f=d;e||(c=this.a.Ua(g),d=this.a.X(g),this.a.Tc(g,d),this.a.Sc(g,c));this.pm(g,h);this.Jh(g,!0);this.a.Ui(g,!1);this.hj(h);this.pm(b,a);this.Jh(b,!0);this.a.Ui(b,!1);this.hj(a)}};b.prototype.sA=function(){for(var a=
!1,b=this.a.Vb(this.U);-1!=b;){for(var c=this.a.Cb(b),d=0,e=this.a.Ha(b);d<e&&1<e;){var f=this.a.Ua(c),h=this.a.X(c);this.a.Cq(f,h)?(a=!0,this.Jh(c,!1),this.a.vf(c,!0),this.Jh(h,!1),this.a.vf(h,!0),c=f,d=0,e=this.a.Ha(b)):(c=h,d++)}if(2>this.a.Ha(b)){a=this.a.Cb(b);d=0;for(e=this.a.Ha(b);d<e;d++)this.Jh(a,!1),a=this.a.X(a);b=this.a.Cr(b);a=!0}else b=this.a.bc(b)}return a};b.prototype.io=function(a){for(var b=!1;;){var c=this.a.X(a),d=this.a.Ua(a);if(c==a)return this.Jh(a,!0),this.a.Ui(a,!1),!0;if(!this.a.Cq(c,
d))break;b=!0;this.hj(d);this.hj(c);this.Jh(a,!0);this.a.Ui(a,!1);this.pm(c,d);this.Jh(c,!0);this.a.Ui(c,!0);if(c==d)break;a=d}return b};b.prototype.tJ=function(){for(var a=0,b=this.$d.gc(this.$d.Wd);-1!=b;b=this.$d.bb(b)){var c=this.$d.getData(b);this.a.im(c,-1)}for(var d=0,e=this.a.Vb(this.U);-1!=e;)if(b=this.a.Cb(e),-1==b||-1!=this.a.rd(b))c=e,e=this.a.bc(e),this.a.yu(c);else{this.a.im(b,e);for(var f=1,c=this.a.X(b);c!=b;c=this.a.X(c))this.a.im(c,e),f++;this.a.Jr(e,!1);this.a.hm(e,f);this.a.Wi(e,
this.a.Ua(b));d+=f;a++;e=this.a.bc(e)}for(b=this.$d.gc(this.$d.Wd);-1!=b;b=this.$d.bb(b))c=this.$d.getData(b),-1==this.a.rd(c)&&(e=this.a.aD(this.U,c,c,null),d+=this.a.Ha(e),a++);this.a.gm(this.U,a);this.a.Pk(this.U,d);a=0;for(d=this.a.$c;-1!=d;d=this.a.we(d))a+=this.a.F(d);this.a.ZF(a)};b.prototype.fl=function(a){for(var b=0,c=this.ie.size-1;b<c;b++)if(a=(a+1)%this.ie.size,-1!=this.ie.get(a))return a;return-1};b.prototype.pm=function(a,b){var c=this.a.Ra(b,this.vp),d=this.a.Ra(b,this.fg);this.a.Zy(a,
b);this.a.lb(b,this.vp,c);this.a.lb(b,this.fg,d)};b.prototype.hj=function(a){var b=this.a.Ra(a,this.fg);-1!=b&&(this.ie.set(b,-1),this.a.lb(a,this.fg,-1))};b.$=function(a,c,d,e,f){var h=new b;h.a=a;h.U=c;h.yx=d;h.Qt=e;h.oe=f;return h.CJ()};b.prototype.mJ=function(b,c){var d=this.nh.get(b),e=new a.b;this.a.uc(d,e);var d=new a.b,f=this.nh.get(c);this.a.uc(f,d);if(e.ub(d))return 0;var h=this.Mq.get(b),f=new a.b;this.a.uc(h,f);var g=this.Mq.get(c),h=new a.b;this.a.uc(g,h);g=new a.b;g.pc(e,f);e=new a.b;
e.pc(d,h);return a.b.cq(g,e)};return b}();a.mm=b})(z||(z={}));(function(a){(function(a){a[a.Local=0]="Local";a[a.Geographic=1]="Geographic";a[a.Projected=2]="Projected";a[a.Unknown=3]="Unknown"})(a.HI||(a.HI={}));(function(a){a[a.Integer32=0]="Integer32";a[a.Integer64=1]="Integer64";a[a.FloatingPoint=2]="FloatingPoint"})(a.rI||(a.rI={}));var b=function(){function b(){this.fo="";this.mi=0;this.Sl=null}b.prototype.Qc=function(){return this.mi};b.prototype.Ko=function(){var b=0.001;0!=this.mi?b=a.ls.SM(this.mi):
null!=this.Sl&&(b=a.mA.TM(this.Sl));return b};b.prototype.Se=function(){if(0!=this.mi)return a.Tb.Qd(a.ls.cC(this.mi));if(null!=this.Sl)return a.mA.UM(this.Sl)};b.Am=function(b){if(0!=b.mi){if(!0===a.ls.WO(b.mi))return 1;if(!0===a.ls.ZO(b.mi))return 2}return 3};b.create=function(c){if(0>=c)throw a.g.N("Invalid or unsupported wkid: "+c);var d=new b;d.mi=c;return d};b.NL=function(c){if(null==c||0==c.length)throw a.g.N("Cannot create SpatialReference from null or empty text.");var d=new b;d.Sl=c;return d};
b.prototype.lc=function(a){return this==a?!0:null==a||this.constructor!=a.constructor||this.mi!=a.mi||0==this.mi&&this.Sl!==a.Sl?!1:!0};b.mN=function(b,c){var d=Math.PI/180,e=new a.ca;a.nH.pN(b.w().x*d,b.w().y*d,c.w().x*d,c.w().y*d,e);return e.l};b.prototype.toString=function(){return"[ tol: "+this.xq()+"; wkid: "+this.Qc()+"; wkt: "+this.Sl+"]"};b.prototype.hc=function(){if(""!==this.fo)return this.fo;var a=this.toString();if(Array.prototype.reduce)return this.fo="S"+a.split("").reduce(function(a,
b){a=(a<<5)-a+b.charCodeAt(0);return a&a},0);var b=0;if(0===a.length)return"";for(var c=0;c<a.length;c++)b=(b<<5)-b+a.charCodeAt(c),b&=b;return this.fo="S"+b};b.prototype.xq=function(){return this.Ko()};b.jU=!0;b.ET=2147483645;b.FT=9007199254740990;return b}();a.Nf=b})(z||(z={}));(function(a){function b(a,c){89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999);var d=0.017453292519943*c;return[111319.49079327169*a,3189068.5*Math.log((1+Math.sin(d))/(1-Math.sin(d)))]}function c(a,b,d){a=57.29577951308232*
(a/6378137);return d?[a,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*b/6378137)))]:[a-360*Math.floor((a+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*b/6378137)))]}function d(b,c){var e=b.vm();if(33===b.D()){var f=c(e.lk(),e.mk());e.ic(f[0],f[1])}else if(197===b.D()){var f=c(b.R.v,b.R.C,!0),h=c(b.R.B,b.R.G,!0);e.K(f[0],f[1],h[0],h[1])}else{f=new a.b;for(h=0;h<e.F();h++){e.w(h,f);var k=c(f.x,f.y,!0);f.ma(k[0],k[1]);e.ic(h,f)}}return e}function e(a){return d(a,
c)}function f(a){return d(a,b)}var h=function(){function b(){}b.Xr=function(b){var c=Math.PI/180,d=Math.sin(b.y*c);return a.b.Oa(6378137*b.x*c,3167719.6636462314*(d/(1-0.006694379990197414*d*d)-6.111035746609262*Math.log((1-0.0818191908429643*d)/(1+0.0818191908429643*d))))};b.Wu=function(b,c,d,e){var f=1/298.257223563,h=Math.sin(d);d=Math.cos(d);var k=(1-f)*Math.tan(b);b=1/Math.sqrt(1+k*k);for(var g=k*b,n=Math.atan2(k,d),k=b*h*b*h,p=1-k,q=2.7233160610754688E11*p/4.040829998466145E13,m=1+q/16384*(4096+
q*(-768+q*(320-175*q))),s=q/1024*(256+q*(-128+q*(74-47*q))),q=e/(6356752.31424518*m),r=2*Math.PI,t,u,v,w;1E-12<Math.abs(q-r);)v=Math.cos(2*n+q),t=Math.sin(q),u=Math.cos(q),w=s*t*(v+s/4*(u*(-1+2*v*v)-s/6*v*(-3+4*t*t)*(-3+4*v*v))),r=q,q=e/(6356752.31424518*m)+w;e=g*t-b*u*d;p=f/16*p*(4+f*(4-3*p));return a.b.Oa((c+(Math.atan2(t*h,b*u-g*t*d)-(1-p)*f*Math.sqrt(k)*(q+p*t*(v+p*u*(-1+2*v*v)))))/(Math.PI/180),Math.atan2(g*u+b*t*d,(1-f)*Math.sqrt(k+e*e))/(Math.PI/180))};b.cN=function(a,b,c,d){var e=1/298.257223563,
f=d-b,h=Math.atan((1-e)*Math.tan(a)),k=Math.atan((1-e)*Math.tan(c)),g=Math.sin(h),h=Math.cos(h),n=Math.sin(k),k=Math.cos(k),p=f,q,m=1E3,s,r,t,u,v,w,x;do{t=Math.sin(p);u=Math.cos(p);r=Math.sqrt(k*t*k*t+(h*n-g*k*u)*(h*n-g*k*u));if(0===r)return 0;u=g*n+h*k*u;v=Math.atan2(r,u);w=h*k*t/r;s=1-w*w;t=u-2*g*n/s;isNaN(t)&&(t=0);x=e/16*s*(4+e*(4-3*s));q=p;p=f+(1-x)*e*w*(v+x*r*(t+x*u*(-1+2*t*t)))}while(1E-12<Math.abs(p-q)&&0<--m);if(0===m)return g=d-b,{azimuth:Math.atan2(Math.sin(g)*Math.cos(c),Math.cos(a)*Math.sin(c)-
Math.sin(a)*Math.cos(c)*Math.cos(g)),geodesicDistance:6371009*Math.acos(Math.sin(a)*Math.sin(c)+Math.cos(a)*Math.cos(c)*Math.cos(d-b))};a=2.7233160610754688E11*s/4.040829998466145E13;b=a/1024*(256+a*(-128+a*(74-47*a)));return{azimuth:Math.atan2(k*Math.sin(p),h*n-g*k*Math.cos(p)),lN:6356752.31424518*(1+a/16384*(4096+a*(-768+a*(320-175*a))))*(v-b*r*(t+b/4*(u*(-1+2*t*t)-b/6*t*(-3+4*r*r)*(-3+4*t*t)))),yU:Math.atan2(h*Math.sin(p),h*n*Math.cos(p)-g*k)}};b.oT=function(b){var c=b.hasAttribute(1),d=b.hasAttribute(2),
e=[],f=b.ea(),h=null,k=null;c&&(h=b.mc(1));d&&(k=b.mc(2));for(var g=new a.b,n=0;n<f;n++){for(var p=b.Ea(n),q=b.Ha(n),m=0,s=0,r=NaN,t=NaN,u=NaN,v=NaN,w=b.vc(n),x=[],A=p;A<p+q;A++){b.w(A,g);var v=u=NaN,G=[g.x,g.y];c&&(u=h.get(A),G.push(u));d&&(f=k.get(A),G.push(v));A==p&&w&&(m=g.x,s=g.y,r=u,t=v);x.push(G)}!w||m==g.x&&s==g.y&&(!c||isNaN(r)&&isNaN(u)||r==u)&&(!d||isNaN(t)&&isNaN(v)||t==v)||x.push(x[0].slice(0));e.push(x)}return e};b.fw=function(a,c){var d=b.oT(a),e=Math.PI/180;637.100877151506>c&&(c=
637.100877151506);for(var f=[],h=0;h<d.length;h++){var k=d[h],g;f.push(g=[]);g.push([k[0][0],k[0][1]]);var n,p,q,m,s,r;n=k[0][0]*e;p=k[0][1]*e;for(s=0;s<k.length-1;s++)if(q=k[s+1][0]*e,m=k[s+1][1]*e,n!==q||p!==m){m=b.cN(p,n,m,q);q=m.azimuth;m=m.lN;var t=m/c;if(1<t){for(r=1;r<=t-1;r++){var u=b.Wu(p,n,q,r*c);g.push([u.x,u.y])}r=b.Wu(p,n,q,(m+Math.floor(t-1)*c)/2);g.push([r.x,r.y])}p=b.Wu(p,n,q,m);g.push([p.x,p.y]);n=p.x*e;p=p.y*e}}return{mF:f}};b.kN=function(c){for(var d=[],e=0;e<c.length;e++){var f=
c[e],f=b.fw(f,1E4);d.push(f)}c=[];for(var h,k,g=0;g<d.length;g++){for(var f=d[g],n=0,e=0;e<f.mF.length;e++){var p=f.mF[e];h=b.Xr(a.b.Oa(p[0][0],p[0][1]));k=b.Xr(a.b.Oa(p[p.length-1][0],p[p.length-1][1]));var q=k.x*h.y-h.x*k.y,m;for(m=0;m<p.length-1;m++)h=b.Xr(a.b.Oa(p[m+1][0],p[m+1][1])),k=b.Xr(a.b.Oa(p[m][0],p[m][1])),q+=k.x*h.y-h.x*k.y;q/=4046.87;n+=q}c.push(4046.85642*(n/-2))}return c};return b}();a.oH=h;h=function(){function b(){}b.oy=function(a,c,d,e,f,h,k){b.AG[a.hc()]=c;0==isNaN(d)&&(b.CG[a.hc()]=
d);0==isNaN(e)&&(b.iz[a.hc()]=e);0==isNaN(f)&&(b.lG[a.hc()]=f);b.EG[a.hc()]=h;null!==k&&(b.GG[a.hc()]=k)};b.xu=function(a,c,d){b.IG[a.hc()+"-"+c.hc()]=d};b.Em=function(c){c=b.AG[c.hc()];if(void 0==c)throw a.g.qe();return c};b.IC=function(c){c=b.CG[c.hc()];if(void 0==c)throw a.g.qe();return c};b.ft=function(c){c=b.iz[c.hc()];if(void 0==c)throw a.g.qe();return c};b.Ts=function(c){c=b.lG[c.hc()];if(void 0==c)throw a.g.qe();return c};b.Fm=function(c){c=b.GG[c.hc()];if(void 0==c)throw a.g.qe();return a.i.Oa(c[0],
c[1],c[2],c[3])};b.Qo=function(c){c=b.EG[c.hc()];if(void 0==c)throw a.g.qe();return c};b.Wl=function(c,d,e){if(d.lc(e))return c;var f=b.IG[d.hc()+"-"+e.hc()];if(void 0!==f)return f(c,d,e);throw a.g.qe();};b.tu=function(){throw a.g.qe();};b.qN=function(){throw a.g.qe();};b.YQ=function(){throw a.g.qe();};b.TN=function(){throw a.g.qe();};b.qR=function(){var b=a.Nf.create(102100),c=a.Nf.create(3857),d=a.Nf.create(4326);a.Ya.oy(b,d,NaN,NaN,NaN,!1,null);a.Ya.oy(d,d,1,0.0033528106647474805,6378137,!0,[-180,
-90,180,90]);a.Ya.oy(c,d,NaN,NaN,NaN,!1,null);a.Ya.xu(b,d,e);a.Ya.xu(d,b,f);a.Ya.xu(c,d,e);a.Ya.xu(d,c,f)};b.AG=[];b.CG=[];b.iz=[];b.lG=[];b.EG=[];b.GG=[];b.IG=[];return b}();a.Ya=h})(z||(z={}));z.Ya.qR();(function(a){var b=function(){function b(a){this.f=null;this.qg=-1;this.Xc=this.size=this.We=0;this.Ic=a}b.prototype.Jc=function(a){a<this.We?(this.f[a*this.Ic]=this.qg,this.qg=a):this.We--;this.size--};b.prototype.O=function(a,b){return this.f[a*this.Ic+b]};b.prototype.L=function(a,b,c){this.f[a*
this.Ic+b]=c};b.prototype.be=function(){var b=this.qg;if(-1==b){if(this.We==this.Xc){b=0!=this.Xc?a.I.truncate(3*(this.Xc+1)/2):1;2147483647<b&&(b=2147483647);if(b==this.Xc)throw a.g.Uc();this.Gm(b)}b=this.We;this.We++}else this.qg=this.f[b*this.Ic];this.size++;for(var c=b*this.Ic+this.Ic,d=b*this.Ic;d<c;d++)this.f[d]=-1;return b};b.prototype.Pj=function(b){var c=this.qg;if(-1==c){if(this.We==this.Xc){c=0!=this.Xc?a.I.truncate(3*(this.Xc+1)/2):1;2147483647<c&&(c=2147483647);if(c==this.Xc)throw a.g.Uc();
this.Gm(c)}c=this.We;this.We++}else this.qg=this.f[c*this.Ic];this.size++;for(var d=c*this.Ic,e=this.Ic,f=0;f<e;f++)this.f[d+f]=b[f];return c};b.prototype.Nh=function(a){this.qg=-1;this.size=this.We=0;a&&(this.f=null,this.Xc=0)};b.prototype.de=function(a){a>this.Xc&&this.Gm(a)};b.prototype.Pu=function(a,b,c){var d=this.f[this.Ic*b+c];this.f[this.Ic*b+c]=this.f[this.Ic*a+c];this.f[this.Ic*a+c]=d};b.Zk=function(){return-2};b.lm=function(){return-3};b.Zw=function(a){return 0<=a};b.prototype.Gm=function(a){null==
this.f&&(this.f=[]);this.Xc=a};return b}();a.Fc=b;b=function(){function b(a){this.f=new Int32Array(0);this.qg=-1;this.Xc=this.size=this.We=0;this.Ic=a}b.prototype.Jc=function(a){a<this.We?(this.f[a*this.Ic]=this.qg,this.qg=a):this.We--;this.size--};b.prototype.O=function(a,b){return this.f[a*this.Ic+b]};b.prototype.L=function(a,b,c){this.f[a*this.Ic+b]=c};b.prototype.be=function(){var b=this.qg;if(-1==b){if(this.We==this.Xc){b=0!=this.Xc?a.I.truncate(3*(this.Xc+1)/2):1;2147483647<b&&(b=2147483647);
if(b==this.Xc)throw a.g.Uc();this.Gm(b)}b=this.We;this.We++}else this.qg=this.f[b*this.Ic];this.size++;for(var c=b*this.Ic;c<b*this.Ic+this.Ic;c++)this.f[c]=-1;return b};b.prototype.Pj=function(b){var c=this.qg;if(-1==c){if(this.We==this.Xc){c=0!=this.Xc?a.I.truncate(3*(this.Xc+1)/2):1;2147483647<c&&(c=2147483647);if(c==this.Xc)throw a.g.Uc();this.Gm(c)}c=this.We;this.We++}else this.qg=this.f[c*this.Ic];this.size++;for(var d=c*this.Ic,e=0;e<b.length;e++)this.f[d+e]=b[e];return c};b.prototype.Nh=function(a){this.qg=
-1;this.size=this.We=0;a&&(this.f=null,this.Xc=0)};b.prototype.de=function(a){a>this.Xc&&this.Gm(a)};b.prototype.Pu=function(a,b,c){var d=this.f[this.Ic*b+c];this.f[this.Ic*b+c]=this.f[this.Ic*a+c];this.f[this.Ic*a+c]=d};b.Zk=function(){return-2};b.lm=function(){return-3};b.Zw=function(a){return 0<=a};b.prototype.Gm=function(a){null==this.f&&(this.f=new Int32Array(0));var b=new Int32Array(this.Ic*a);b.set(this.f,0);this.f=b;this.Xc=a};return b}();a.II=b;!0===a.ah.Sk&&(a.Fc=a.II)})(z||(z={}));(function(a){var b;
(function(a){a[a.enumInputModeBuildGraph=0]="enumInputModeBuildGraph";a[a.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate";a[a.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding";a[a.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon"})(b||(b={}));var c=function(){function b(c){this.me=c;this.Zg=NaN;this.LD=new a.Ag;this.MD=new a.Ag;this.Aq=new a.Nd;this.Bq=new a.Nd}b.prototype.compare=function(a,b,c){a=a.da(c);this.me.iy(b,this.LD);this.me.iy(a,this.MD);b=
this.LD.get();a=this.MD.get();this.Aq.K(b.na,b.la);this.Bq.K(a.na,a.la);if(this.Aq.va<this.Bq.qa)return-1;if(this.Aq.qa>this.Bq.va)return 1;c=b.ja==b.ha;var d=a.ja==a.ha;if(c||d){if(c&&d)return 0;if(b.ja==a.ja&&b.na==a.na)return c?1:-1;if(b.ha==a.ha&&b.la==a.la)return c?-1:1}c=b.xe(this.Zg,this.Aq.qa);d=a.xe(this.Zg,this.Bq.qa);c==d&&(c=Math.min(b.ha,a.ha),d=0.5*(c+this.Zg),d==this.Zg&&(d=c),c=b.xe(d,this.Aq.qa),d=a.xe(d,this.Bq.qa));return c<d?-1:c>d?1:0};b.prototype.$F=function(a){this.Zg=a};return b}(),
d=function(){function b(c){this.ab=c;this.uE=new a.Ag;this.nf=new a.b;this.xx=new a.Nd}b.prototype.eS=function(a){this.nf.J(a)};b.prototype.compare=function(a,b){this.ab.iy(a.da(b),this.uE);var c=this.uE.get();this.xx.K(c.na,c.la);if(this.nf.x<this.xx.qa)return-1;if(this.nf.x>this.xx.va)return 1;c=c.xe(this.nf.y,this.nf.x);return this.nf.x<c?-1:this.nf.x>c?1:0};return b}();b=function(){function b(){this.OD=this.Vh=this.Yh=this.px=this.Pm=this.je=this.xc=this.Ig=this.Td=null;this.sn=this.eg=-1;this.ND=
!0;this.tx=!1;this.qx=NaN;this.ei=new a.wd;this.EK=2147483647;this.DK=a.I.truncate(-2147483648);this.Kf=this.Md=this.Ek=this.lp=this.Bl=this.kp=this.Zq=this.Be=-1;this.ta=0}b.prototype.Mv=function(a){this.qx=a};b.prototype.Ul=function(){null==this.Td&&(this.Td=new a.Fc(8));var b=this.Td.be();this.Td.L(b,1,0);return b};b.prototype.kQ=function(){null==this.xc&&(this.xc=new a.Fc(8));var b=this.xc.be();this.xc.L(b,2,0);this.xc.L(b,3,0);var c=this.xc.be();this.xc.L(c,2,0);this.xc.L(c,3,0);this.GF(b,c);
this.GF(c,b);return b};b.prototype.FE=function(){null==this.je&&(this.je=new a.Fc(8));var b=this.je.be();this.je.L(b,2,0);return b};b.prototype.QR=function(a,b){this.Td.L(a,7,b)};b.prototype.em=function(a,b){this.Td.L(a,2,b)};b.prototype.PR=function(a,b){this.Td.L(a,1,b)};b.prototype.fS=function(a,b){this.Td.L(a,3,b)};b.prototype.cS=function(a,b){this.Td.L(a,4,b)};b.prototype.Lp=function(a,b){this.Td.L(a,5,b)};b.prototype.uN=function(a){return this.Td.O(a,5)};b.prototype.OR=function(a,b){this.Td.L(a,
6,b)};b.prototype.IJ=function(a,b){this.OR(b,a)};b.prototype.FF=function(a,b){this.xc.L(a,1,b)};b.prototype.GF=function(a,b){this.xc.L(a,4,b)};b.prototype.Rk=function(a,b){this.xc.L(a,5,b)};b.prototype.Qk=function(a,b){this.xc.L(a,6,b)};b.prototype.VR=function(a,b){this.xc.L(a,2,b)};b.prototype.Du=function(a,b){this.xc.L(a,3,b)};b.prototype.zC=function(a){return this.xc.O(a,3)};b.prototype.Ir=function(a,b){this.xc.L(a,7,b)};b.prototype.zG=function(a,b){if(-1!=this.ql(a))for(var c=b?-1:a,d=this.ql(a);-1!=
d;d=this.zq(d))this.a.lb(this.Gi(d),this.lp,c)};b.prototype.Tu=function(a,b){-1!=a&&(this.zG(a,b),this.zG(this.sa(a),b))};b.prototype.Gr=function(a,b){this.je.L(a,1,b)};b.prototype.yg=function(a,b){this.je.L(a,2,b)};b.prototype.cm=function(a,b){this.je.L(a,3,b);this.LR(a,this.tN(b));this.KR(b,a)};b.prototype.KR=function(a,b){this.je.L(a,4,b)};b.prototype.LR=function(a,b){this.je.L(a,5,b)};b.prototype.AF=function(a,b){this.je.L(a,6,b)};b.prototype.yF=function(a,b){this.je.L(a,7,b)};b.prototype.xF=
function(a,b){this.Pm.write(a,b)};b.prototype.zF=function(a,b){this.px.write(a,b)};b.prototype.bT=function(b){var c=0,d=0,e=this.pC(b),f=new a.b,h=new a.b,k=new a.b;this.tq(e,f);h.J(f);var g=e;do this.pl(g,k),d+=a.b.Fb(h,k),this.Pe(this.sa(g))!=b&&(c+=0.5*(k.x-f.x-(h.x-f.x))*(k.y-f.y+(h.y-f.y))),h.J(k),g=this.Wb(g);while(g!=e);this.Pm.write(b,c);this.px.write(b,d)};b.prototype.GQ=function(b){var e=new c(this),f=new a.bj;f.de(a.I.truncate(this.ta/2));f.Hn(e);for(var h=new a.ga(0),k=this.Eg(),g=null,
n=0,p=new a.b,m=this.Be;-1!=m;m=this.Bf(m)){n++;var s=this.te(m);if(-1!=s){h.cf(0);if(!this.VS(f,k,h,s)){this.w(m,p);e.$F(p.y);var t=s;do{var u=this.tb(t,k);-1!=u&&(f.kd(u,-1),this.Bb(t,k,-2));t=this.Wb(this.sa(t))}while(s!=t);t=s;do u=this.tb(t,k),-1==u&&(u=f.addElement(t,-1),h.add(u)),t=this.Wb(this.sa(t));while(s!=t)}for(s=h.size-1;0<=s;s--)u=h.get(s),t=f.da(u),this.Bb(this.sa(t),k,u),this.FQ(f,u,b)}else-1==this.mw(m)&&(null==g&&(g=new d(this)),this.w(m,p),g.eS(p),t=f.GR(g),s=this.Ek,-1!=t&&(u=
f.da(t),this.Pe(u)==this.Pe(this.sa(u))&&(u=this.BC(f,t)),-1!=u&&(s=this.Pe(u))),this.IJ(s,m))}this.kh(k)};b.prototype.FQ=function(a,b,c){var d=a.da(b),e=this.Pe(d);if(-1==this.ym(e)){var f=this.BC(a,b),h=this.sa(d),k=this.Pe(h);this.yo(e);this.yo(k);var g=this.ym(e),n=this.ym(k);-1==f&&-1==g&&(k==e?(this.cm(k,this.Ek),g=n=this.Ek):(-1==n&&(this.cm(k,this.Ek),n=this.Ek),this.cm(e,k),g=k));if(-1!=f){var p=this.Pe(f);-1==n&&(0>=this.yo(p)?(n=this.ym(p),this.cm(k,n)):(this.cm(k,p),n=p),k==e&&(g=n))}-1==
g&&this.WS(e,k);0==c?this.aR(a,b,d,f,e,k):5==c?this.bR(a,b,d,h,e,k):4==c&&this.$Q(d,f,e,k)}};b.prototype.aR=function(a,b,c,d,e,f){var h=this.pj(e);if(-1!=d){var k=this.pj(f),g=this.pj(this.Pe(d));d=h&k&g;g^=g&this.Gg(c);g|=d;0!=g&&(this.yg(f,k|g),this.yg(e,g|h),h=h||g)}for(b=a.bb(b);-1!=b;b=a.bb(b)){d=a.da(b);c=this.Pe(this.sa(d));e=this.pj(c);f=this.Gg(d);k=this.Pe(d);g=this.pj(k);d=e&g&h;h^=h&f;h|=d;if(0==h)break;this.yg(c,e|h);this.yg(k,g|h)}};b.prototype.bR=function(b,c,d,e,f,h){if(f!=h){d=this.tb(d,
this.Kf);d+=this.tb(e,this.Kf);e=0;var k=new a.ga(0),g=new a.ga(0);g.add(0);for(var n=b.gc(-1);n!=c;n=b.bb(n)){var p=b.da(n),q=this.sa(p),m=this.Pe(p),s=this.Pe(q);if(m!=s){p=this.tb(p,this.Kf);p+=this.tb(q,this.Kf);e+=p;q=!1;0!=k.size&&k.tc()==s&&(g.af(),k.af(),q=!0);if(-1==this.ym(s))throw a.g.wa();q&&this.ym(s)==m||(g.add(e),k.add(m))}}e+=d;0!=k.size&&k.tc()==h&&(g.af(),k.af());0!=e?0==g.tc()&&(b=this.a.$c,b=this.ya(b),this.yg(f,b)):0!=g.tc()&&(b=this.a.$c,b=this.ya(b),this.yg(f,b))}};b.prototype.$Q=
function(a,b,c,d){var e=this.ya(this.a.$c);if(-1==b)this.yg(d,this.sn),a=this.tb(a,this.eg),0!=(a&1)?this.yg(c,e):this.yg(c,this.sn);else{var f=this.pj(d);0==f&&(f=this.pj(this.Pe(b)),this.yg(d,f));a=this.tb(a,this.eg);0!=(a&1)?this.yg(c,f==e?this.sn:e):this.yg(c,f)}};b.prototype.VS=function(a,b,c,d){var e=d,f=-1,h=-1,k=0;do{if(2==k)return!1;var g=this.tb(e,b);if(-1!=g){if(-1!=f)return!1;f=g}else{if(-1!=h)return!1;h=e}k++;e=this.Wb(this.sa(e))}while(d!=e);if(-1==h||-1==f)return!1;this.Bb(a.da(f),
b,-2);a.Vi(f,h);c.add(f);return!0};b.prototype.WS=function(a,b){var c=this.yo(a);if(0!=c){var d=this.yo(b);0<c&&0>d?this.cm(a,b):0>c&&0<d?this.cm(a,b):(c=this.ym(b),-1!=c&&this.cm(a,c))}};b.prototype.RL=function(b,c){this.lp=this.a.re();for(var d=0,e=c.size;d<e;d++){var f=c.get(d),h=this.a.Ra(f,this.Bl),k=this.a.Vf(this.a.rd(f)),g=this.a.Lb(k);if(a.T.Kc(g)){var n=this.a.X(f);if(-1!=n){var p=this.a.Ra(n,this.Bl);if(h!=p){var q=this.kQ(),m=this.sa(q),s=this.Ig.be();this.Ig.L(s,0,f);this.Ig.L(s,1,-1);
this.Ir(q,s);this.FF(q,h);s=this.te(h);-1==s?(this.em(h,q),this.Rk(q,m),this.Qk(m,q)):(h=this.fe(s),this.Rk(s,m),this.Qk(m,s),this.Qk(h,q),this.Rk(q,h));this.FF(m,p);h=this.te(p);-1==h?(this.em(p,m),this.Qk(q,m),this.Rk(m,q)):(p=this.fe(h),this.Rk(h,q),this.Qk(q,h),this.Qk(p,m),this.Rk(m,p));k=this.ya(k);0==b?(this.Bb(m,this.Md,0),this.Bb(q,this.Md,1736==g?k:0)):5==b?(p=new a.b,this.a.w(f,p),f=new a.b,this.a.w(n,f),h=n=0,0>p.compare(f)?n=1:h=-1,this.Bb(m,this.Md,0),this.Bb(q,this.Md,0),this.Bb(q,
this.Kf,n),this.Bb(m,this.Kf,h)):7==b?(this.Bb(m,this.Md,this.sn),this.Bb(q,this.Md,1736==g?k:0)):4==b&&(this.Bb(m,this.Md,0),this.Bb(q,this.Md,0),this.Bb(q,this.eg,1),this.Bb(m,this.eg,1));g=1736==g?this.DK:0;this.Du(q,k|g);this.Du(m,k|g)}}}}};b.prototype.ZP=function(a,b){var c=this.ql(b);if(-1!=c){var d=this.ql(a);this.Ig.L(c,1,d);this.Ir(a,c);this.Ir(b,-1)}var e=this.sa(a),f=this.sa(b),c=this.ql(f);-1!=c&&(d=this.ql(e),this.Ig.L(c,1,d),this.Ir(e,c),this.Ir(f,-1))};b.prototype.AS=function(b){function c(a,
b){return e.lL(a,b)}var d=new a.ga(0);d.xb(10);for(var e=this,f=this.Be;-1!=f;f=this.Bf(f)){d.clear(!1);var h=this.te(f);if(-1!=h){var k=h;do d.add(k),k=this.Wb(this.sa(k));while(k!=h);if(1<d.size){k=!0;if(2<d.size)d.xd(0,d.size,c),d.add(d.get(0));else if(0<this.kL(d.get(0),d.get(1))){var g=d.get(0);d.set(0,d.get(1));d.set(1,g)}else k=!1;for(var n=g=d.get(0),p=this.jf(n),q=this.sa(n),m=-1,s=1,t=d.size;s<t;s++){var u=d.get(s),v=this.sa(u),w=this.qj(v);if(w==p&&u!=n){if(0==b)m=this.zC(n)|this.zC(u),
this.Du(n,m),this.Du(q,m),this.Bb(n,this.Md,this.tb(n,this.Md)|this.tb(u,this.Md)),this.Bb(q,this.Md,this.tb(q,this.Md)|this.tb(v,this.Md));else if(-1!=this.Kf)m=this.tb(n,this.Kf)+this.tb(u,this.Kf),v=this.tb(q,this.Kf)+this.tb(v,this.Kf),this.Bb(n,this.Kf,m),this.Bb(q,this.Kf,v);else{if(7==b){this.ei=new a.wd(5,f,-1);return}-1!=this.eg&&(m=this.tb(n,this.eg)+this.tb(u,this.eg),v=this.tb(q,this.eg)+this.tb(v,this.eg),this.Bb(n,this.eg,m),this.Bb(q,this.eg,v))}this.ZP(n,u);this.Wv(u);m=n;d.set(s,
-1);u==g&&(d.set(0,-1),g=-1)}else this.Tu(m,!1),m=-1,n=u,p=w,q=v}this.Tu(m,!1);m=-1;if(k){g=-1;s=0;for(t=d.size;s<t;s++)if(u=d.get(s),-1!=u)if(-1==g)n=g=u,p=this.jf(n),q=this.sa(n);else if(u!=n&&(v=this.sa(u),w=this.qj(v),this.Qk(q,u),this.Rk(u,q),n=u,p=w,q=v,7==b&&(this.tb(u,this.Md)|this.tb(this.fe(u),this.Md))==(this.sn|1))){this.ei=new a.wd(5,f,-1);return}this.em(f,g)}else{g=-1;s=0;for(t=d.size;s<t;s++)if(u=d.get(s),-1!=u){g=u;break}h!=g&&this.em(f,g)}}}}};b.prototype.AK=function(){for(var b=
-1,c=this.Eg(),d=this.Be;-1!=d;d=this.Bf(d)){var e=this.te(d);if(-1!=e){var f=e;do{if(1!=this.tb(f,c)){var h=this.FE();this.Gr(h,f);this.yF(h,b);-1!=b&&this.AF(b,h);var b=h,k=0,g=f;do k|=this.tb(g,this.Md),this.VR(g,h),this.Bb(g,c,1),g=this.Wb(g);while(g!=f);this.yg(h,k)}f=this.Wb(this.sa(f))}while(f!=e)}}h=this.FE();this.Gr(h,-1);this.yF(h,b);-1!=b&&this.AF(b,h);this.Ek=h;this.Pm=a.qd.Yc(this.je.size,NaN);this.px=a.qd.Yc(this.je.size,NaN);this.xF(this.Ek,Infinity);this.zF(this.Ek,Infinity);this.kh(c)};
b.prototype.EN=function(a,b,c){b=-1!=b?b:this.te(a);if(-1==b)return-1;for(a=b;;){if(1!=this.tb(b,c))return b;b=this.Wb(this.sa(b));if(b==a)return-1}};b.prototype.uR=function(){for(var a=this.Eg(),b=this.Be;-1!=b;b=this.Bf(b))for(var c=-1;;){var d=this.EN(b,c,a);if(-1==d)break;for(var c=this.Wb(this.sa(d)),e=d;;){var f=this.Wb(e),h=this.fe(e),k=this.sa(e);if(h==k){this.bM(e);if(c==e||c==k)c=-1;if(e==d||h==d){d=f;if(e==d||h==d)break;e=f;continue}}else this.Bb(e,a,1);e=f;if(e==d)break}}};b.prototype.Ay=
function(b,c,d,e){this.xg();this.ND=e;this.a=b;this.kp=this.a.RB();b=new a.ga(0);b.xb(null!=d?this.a.F(d.get(0)):this.a.pd);var f=0,h=1,k=null!=d?d.get(0):this.a.$c;for(e=1;-1!=k;){this.a.EF(k,this.kp,h);for(var h=h<<1,g=this.a.Vb(k);-1!=g;g=this.a.bc(g))for(var n=this.a.Cb(g),p=0,q=this.a.Ha(g);p<q;p++)b.add(n),n=this.a.X(n);a.T.Km(this.a.Lb(k))||(f+=this.a.ea(k));null!=d?(k=e<d.size?d.get(e):-1,e++):k=this.a.we(k)}this.sn=h;this.ta=b.size;this.a.Mu(b,this.ta);null==this.Ig&&(this.Ig=new a.Fc(2),
this.Td=new a.Fc(8),this.xc=new a.Fc(8),this.je=new a.Fc(8));this.Ig.de(this.ta);this.Td.de(this.ta+10);this.xc.de(2*this.ta+32);this.je.de(Math.max(32,f));this.Bl=this.a.re();d=new a.b;e=0;f=new a.b;d.Eh();for(h=0;h<=this.ta;h++)if(h<this.ta?(n=b.get(h),this.a.w(n,f)):f.Eh(),!d.ub(f)){if(e<h){n=this.Ul();for(q=p=-1;e<h;e++)q=b.get(e),this.a.lb(q,this.Bl,n),k=this.Ig.be(),this.Ig.L(k,0,q),this.Ig.L(k,1,p),p=k,g=this.a.rd(q),k=this.a.Vf(g),k=this.ya(k),this.PR(n,this.md(n)|k);this.QR(n,p);this.Lp(n,
this.a.gb(q));-1!=this.Zq&&this.cS(this.Zq,n);this.fS(n,this.Zq);this.Zq=n;-1==this.Be&&(this.Be=n)}e=h;d.J(f)}this.Md=this.Eg();5==c&&(this.Kf=this.Eg());4==c&&(this.eg=this.Eg());this.RL(c,b);0==this.ei.yh&&(this.AS(c),0==this.ei.yh&&(isNaN(this.qx)||this.ZK()?(this.AK(),0==this.ei.yh&&(this.kh(this.Md),this.Md=-1,this.ND&&this.GQ(c))):this.tx=!0))};b.prototype.Wv=function(a){var b=this.Wb(a),c=this.fe(a),d=this.sa(a),e=this.Wb(d),f=this.fe(d);b!=d&&(this.Qk(f,b),this.Rk(b,f));c!=d&&(this.Qk(c,
e),this.Rk(e,c));c=this.qj(a);this.te(c)==a&&(e!=a?this.em(c,e):this.em(c,-1));e=this.qj(d);this.te(e)==d&&(b!=d?this.em(e,b):this.em(e,-1));this.xc.Jc(a);this.xc.Jc(d)};b.prototype.BC=function(a,b){for(var c=b;;)if(c=a.ge(c),-1!=c){var d=a.da(c);if(this.Pe(d)!=this.Pe(this.sa(d)))return d}else return-1};b.prototype.Mp=function(a,b,c){void 0===c&&(c=!0);this.Ay(a,0,null,c)};b.prototype.tF=function(b,c){var d=new a.ga(0);d.add(c);this.Ay(b,4,d,1736==b.Lb(c))};b.prototype.uF=function(b,c){var d=new a.ga(0);
d.add(c);this.Ay(b,5,d,!0)};b.prototype.xg=function(){null!=this.a&&(-1!=this.kp&&(this.a.tR(this.kp),this.kp=-1),-1!=this.Bl&&(this.a.bf(this.Bl),this.Bl=-1),-1!=this.lp&&(this.a.bf(this.lp),this.lp=-1),-1!=this.Md&&(this.kh(this.Md),this.Md=-1),-1!=this.Kf&&(this.kh(this.Kf),this.Kf=-1),-1!=this.eg&&(this.kh(this.eg),this.eg=-1),this.a=null,this.Td.Nh(!0),this.Ig.Nh(!0),this.Zq=this.Be=-1,null!=this.xc&&this.xc.Nh(!0),null!=this.Yh&&(this.Yh.length=0),null!=this.Vh&&(this.Vh.length=0),null!=this.OD&&
(this.OD.length=0),null!=this.je&&this.je.Nh(!0),this.Ek=-1,this.Pm=null)};b.prototype.te=function(a){return this.Td.O(a,2)};b.prototype.w=function(a,b){this.a.SC(this.uN(a),b)};b.prototype.md=function(a){return this.Td.O(a,1)};b.prototype.Bf=function(a){return this.Td.O(a,4)};b.prototype.mw=function(a){return this.Td.O(a,6)};b.prototype.ol=function(a){return this.Td.O(a,7)};b.prototype.zq=function(a){return this.Ig.O(a,1)};b.prototype.Gi=function(a){return this.Ig.O(a,0)};b.prototype.Sf=function(a,
b){var c=this.Vh[b];return c.size<=a?-1:c.read(a)};b.prototype.fm=function(a,b,c){b=this.Vh[b];b.size<=a&&b.resize(this.Td.size,-1);b.write(a,c)};b.prototype.uo=function(){null==this.Vh&&(this.Vh=[]);for(var b=a.ga.Yc(this.Td.Xc,-1),c=0,d=this.Vh.length;c<d;c++)if(null==this.Vh[c])return this.Vh[c]=b,c;this.Vh.push(b);return this.Vh.length-1};b.prototype.vo=function(a){this.Vh[a]=null};b.prototype.qj=function(a){return this.xc.O(a,1)};b.prototype.jf=function(a){return this.qj(this.sa(a))};b.prototype.sa=
function(a){return this.xc.O(a,4)};b.prototype.fe=function(a){return this.xc.O(a,5)};b.prototype.Wb=function(a){return this.xc.O(a,6)};b.prototype.Pe=function(a){return this.xc.O(a,2)};b.prototype.Qe=function(a){return this.pj(this.xc.O(a,2))};b.prototype.ql=function(a){return this.xc.O(a,7)};b.prototype.tq=function(a,b){this.w(this.qj(a),b)};b.prototype.pl=function(a,b){this.w(this.jf(a),b)};b.prototype.Gg=function(a){return this.xc.O(a,3)&this.EK};b.prototype.tb=function(a,b){var c=this.Yh[b];return c.size<=
a?-1:c.read(a)};b.prototype.Bb=function(a,b,c){b=this.Yh[b];b.size<=a&&b.resize(this.xc.size,-1);b.write(a,c)};b.prototype.Eg=function(){null==this.Yh&&(this.Yh=[]);for(var b=a.ga.Yc(this.xc.Xc,-1),c=0,d=this.Yh.length;c<d;c++)if(null==this.Yh[c])return this.Yh[c]=b,c;this.Yh.push(b);return this.Yh.length-1};b.prototype.kh=function(a){this.Yh[a]=null};b.prototype.bM=function(a){var b=this.Pe(a),c=this.Wb(a);c==this.sa(a)&&(c=this.Wb(c),c==a&&(c=-1));this.pC(b)==a&&this.Gr(b,c);c=this.Pm.read(b);isNaN(c)||
(this.xF(b,NaN),this.zF(b,NaN));this.Tu(a,!0);this.Wv(a)};b.prototype.cM=function(a){for(var b=0,c=a.size;b<c;b++){var d=a.get(b),e=this.Pe(this.sa(d));this.Gr(this.Pe(d),-1);this.Gr(e,-1);this.Tu(d,!0);this.Wv(d)}};b.prototype.pC=function(a){return this.je.O(a,1)};b.prototype.pj=function(a){return this.je.O(a,2)};b.prototype.ym=function(a){return this.je.O(a,3)};b.prototype.tN=function(a){return this.je.O(a,4)};b.prototype.yo=function(a){var b=this.Pm.read(a);isNaN(b)&&(this.bT(a),b=this.Pm.read(a));
return b};b.prototype.ya=function(a){return this.a.yC(a,this.kp)};b.prototype.se=function(a){return this.a.Ra(a,this.Bl)};b.prototype.GN=function(a){return this.a.Ra(a,this.lp)};b.prototype.FN=function(a,b){var c=this.te(a);if(-1==c)return-1;var d=c,e=-1,f=-1;do{if(this.jf(d)==b)return d;if(-1==e){e=this.te(b);if(-1==e)break;f=e}if(this.jf(f)==a)return this.sa(f);d=this.Wb(this.sa(d));f=this.Wb(this.sa(f))}while(d!=c&&f!=e);return-1};b.prototype.iy=function(b,c){c.mq();var d=c.get(),e=new a.b;this.tq(b,
e);d.ed(e);this.pl(b,e);d.vd(e)};b.prototype.lL=function(b,c){if(b==c)return 0;var d=new a.b;this.pl(b,d);var e=new a.b;this.pl(c,e);if(d.ub(e))return 0;var f=new a.b;this.tq(b,f);var h=new a.b;h.pc(d,f);d=new a.b;d.pc(e,f);return a.b.cq(h,d)};b.prototype.kL=function(b,c){if(b==c)return 0;var d=new a.b;this.pl(b,d);var e=new a.b;this.pl(c,e);if(d.ub(e))return 0;var f=new a.b;this.tq(b,f);var h=new a.b;h.pc(d,f);d=new a.b;d.pc(e,f);return 0<=d.y&&0<h.y?a.b.cq(h,d):0};b.prototype.ZK=function(){for(var b=
a.vi.Ty(this.qx),c=new a.b,d=new a.b,e=new a.b,f=new a.b,h=new a.b,k=this.Be;-1!=k;k=this.Bf(k)){var g=this.te(k);if(-1!=g){var n=g;this.tq(n,c);this.pl(n,d);h.pc(d,c);var p=h.Up();do{var q=n,n=this.Wb(this.sa(n));if(n!=q){this.pl(n,e);f.pc(e,c);var q=f.Up(),m=f.Ai(h);if(m*m/(q*p)*Math.min(q,p)<=b)return!1;h.J(f);p=q;d.J(e)}}while(n!=g)}}return!0};return b}();a.gs=b})(z||(z={}));(function(a){var b=function(){function b(){this.h=null;this.TD=new a.b;this.UD=new a.b;this.Qg=null;this.Gq=!1;this.Ym=
-1}b.prototype.Te=function(a){return a<this.Qg.length?this.Qg[a]:!1};b.prototype.xm=function(b,c,d,e){var f=a.T.ve(this.h.a.Lb(d));if(2==a.T.ve(this.h.a.Lb(c))&&1==f)this.WL(b,c,d,e);else throw a.g.wa();};b.prototype.Mp=function(b,c){null==this.h&&(this.h=new a.gs);this.h.Mp(b,c)};b.prototype.Np=function(b,c,d){a.aj.$(b,c,d,!0);for(c=b.$c;-1!=c;c=b.we(c))1736==b.Lb(c)&&a.mm.$(b,c,-1,this.Gq,d);this.Mp(b,d)};b.prototype.EB=function(a,b,c,d,e){var f=this.h.a;if(1736==f.Lb(a))for(a=f.Vb(a);-1!=a;a=f.bc(a)){var h=
f.Cb(a);this.h.se(h);this.h.se(f.X(h));var g=this.h.GN(h);if(-1!=g){var n=this.h.tb(g,c);if(1!=n&&2!=n)if(this.Te(this.h.Qe(g))){this.h.Bb(g,c,1);var n=f.Cf(b,-1),p=g,m=this.h.se(h),s=1;do{var t=this.tl(h,e);f.zi(n,t);-1!=d&&this.h.fm(m,d,1);this.h.Bb(p,c,1);var p=this.h.Wb(p),u;do t=1==s?f.X(h):f.Ua(h),u=-1!=t?this.h.se(t):-1;while(u==m);var v=this.h.qj(p);if(v!=u){do t=1==s?f.Ua(h):f.X(h),u=-1!=t?this.h.se(t):-1;while(u==m);v!=u?(u=v,t=this.h.Gi(this.h.ol(u))):s=-s}m=u;h=t}while(p!=g);f.Gn(n,!0)}else this.h.Bb(g,
c,2)}}};b.prototype.UB=function(){for(var b=this.h.Eg(),c=new a.ga(0),d=this.h.Be;-1!=d;d=this.h.Bf(d)){var e=this.h.te(d),f=e;if(-1!=e){do{if(1!=this.h.tb(f,b)){var h=this.h.sa(f);this.h.Bb(h,b,1);this.h.Bb(f,b,1);this.Te(this.h.Qe(f))&&this.Te(this.h.Qe(h))&&c.add(f)}f=this.h.Wb(this.h.sa(f))}while(f!=e)}}this.h.kh(b);this.h.cM(c)};b.prototype.tl=function(a,b){return-1==b?a:this.kO(a,b)};b.prototype.kO=function(a,b){var c=this.h.a,d,e,f=this.h.ol(this.h.se(a));do{d=this.h.Gi(f);e=c.Vf(c.rd(d));
if(e==b)return d;f=this.h.zq(f)}while(-1!=f);return a};b.prototype.Xp=function(b,c,d){this.UB();var e=this.h.a,f=e.jg(1736),h=this.h.Eg();this.pG(b,c,f,d,h,-1);this.h.kh(h);a.mm.$(e,f,1,this.Gq,null);return f};b.prototype.pG=function(a,b,c,d,e,f){this.EB(a,c,e,f,d);-1!=b&&this.EB(b,c,e,f,d);a=this.h.a;for(b=this.h.Be;-1!=b;b=this.h.Bf(b)){var h=this.h.te(b);if(-1!=h){var g=h;do{var n=this.h.tb(g,e);if(1!=n&&2!=n)if(this.Te(this.h.Qe(g))){var n=a.Cf(c,-1),p=g;do{var m=this.h.ql(p);-1!=m?m=this.h.Gi(m):
(m=this.h.Gi(this.h.ql(this.h.sa(p))),m=this.h.a.X(m));m=this.tl(m,d);a.zi(n,m);this.h.Bb(p,e,1);-1!=f&&(m=this.h.se(m),this.h.fm(m,f,1));p=this.h.Wb(p)}while(p!=g);a.Gn(n,!0)}else this.h.Bb(g,e,2);g=this.h.Wb(this.h.sa(g))}while(g!=h)}}};b.prototype.RS=function(b,c,d){var e=this.h.a,f=e.jg(1736),h=e.jg(1607),g=e.jg(550);this.UB();var n=-1,p=this.h.Eg(),m=this.h.uo();this.pG(b,c,f,d,p,m);for(b=this.h.Be;-1!=b;b=this.h.Bf(b))if(c=this.h.te(b),-1!=c){var s=c;do{var t=this.h.tb(s,p),u=this.h.tb(this.h.sa(s),
p),t=t|u;if(2==t)if(t=this.h.Gg(s),this.Te(t)){var v=e.Cf(h,-1),w=s,t=this.Au(b,e),t=this.tl(t,d);e.zi(v,t);this.h.fm(b,m,1);do{t=this.h.jf(w);u=this.Au(t,e);u=this.tl(u,d);e.zi(v,u);this.h.Bb(w,p,1);this.h.Bb(this.h.sa(w),p,1);this.h.fm(t,m,1);w=this.h.Wb(w);t=this.h.tb(w,p);u=this.h.tb(this.h.sa(w),p);t|=u;if(2!=t)break;t=this.h.Gg(w);if(!this.Te(t)){this.h.Bb(w,p,1);this.h.Bb(this.h.sa(w),p,1);break}}while(w!=s)}else this.h.Bb(s,p,1),this.h.Bb(this.h.sa(s),p,1);s=this.h.Wb(this.h.sa(s))}while(s!=
c)}for(b=this.h.Be;-1!=b;b=this.h.Bf(b))t=this.h.Sf(b,m),1!=t&&(t=this.h.md(b),this.Te(t)&&(-1==n&&(n=e.Cf(g,-1)),c=this.h.ol(b),-1!=c&&(c=this.h.Gi(c),t=this.tl(c,d),e.zi(n,t))));this.h.vo(m);this.h.kh(p);a.mm.$(e,f,1,this.Gq,null);d=[];d[0]=g;d[1]=h;d[2]=f;return d};b.prototype.Au=function(a,b){for(var c=-1,d=this.h.ol(a);-1!=d;d=this.h.zq(d)){var e=this.h.Gi(d);-1==c&&(c=e);var f=this.h.ya(b.Vf(b.rd(e)));if(this.Te(f)){c=e;break}}return c};b.prototype.fy=function(b,c){for(var d=this.h.qj(c),e=
this.h.jf(c),f=0,h=0,g=this.h.ol(d);-1!=g;g=this.h.zq(g)){var n=this.h.Gi(g),p=b.rd(n),m=this.h.ya(b.Vf(p)),s=b.X(n),t=b.Ua(n),p=b.Cb(p);p==n&&(this.Ym=c);-1!=s&&this.h.se(s)==e?(f++,this.Te(m)&&(p==s&&(this.Ym=this.h.Wb(c)),h++)):-1!=t&&this.h.se(t)==e&&(f--,this.Te(m)&&(p==t&&(this.Ym=this.h.Wb(c)),h--))}this.h.w(d,this.TD);this.h.w(e,this.UD);d=a.b.Fb(this.TD,this.UD);return(0!=h?h:f)*d};b.prototype.Ao=function(a){return this.h.Gg(a)|this.h.Qe(a)|this.h.Qe(this.h.sa(a))};b.prototype.sG=function(a){for(var b=
this.h.sa(this.h.fe(a)),c=-1;b!=a;){if(this.Te(this.Ao(b))){if(-1!=c)return-1;c=b}b=this.h.sa(this.h.fe(b))}return-1!=c?this.h.sa(c):-1};b.prototype.tG=function(a){for(var b=this.h.sa(this.h.Wb(a)),c=-1;b!=a;){if(this.Te(this.Ao(b))){if(-1!=c)return-1;c=b}b=this.h.sa(this.h.Wb(b))}return-1!=c?this.h.sa(c):-1};b.prototype.jF=function(b,c,d,e,f){var h=this.h.a,g=b,n=this.h.sa(g);this.h.Bb(g,d,1);this.h.Bb(n,d,1);var p=this.fy(h,g);this.Ym=-1;for(var m=g,s=-1,t=!1,u=1;;){var v=this.h.fe(g);if(v==n)break;
n=this.h.Wb(n);if(this.h.sa(v)!=n)if(g=this.sG(g),-1==g)break;else t=!0,n=this.h.sa(g);else g=v;if(g==b){s=b;break}v=this.Ao(g);if(!this.Te(v))break;this.h.Bb(g,d,1);this.h.Bb(n,d,1);m=g;p+=this.fy(h,g);u++}if(-1==s){g=b;n=this.h.sa(g);for(s=g;;){b=this.h.Wb(g);if(b==n)break;n=this.h.fe(n);if(this.h.sa(b)!=n)if(g=this.tG(g),-1==g){t=!0;break}else n=this.h.sa(g);else g=b;v=this.Ao(g);if(!this.Te(v))break;this.h.Bb(g,d,1);this.h.Bb(n,d,1);s=g;p+=this.fy(h,g);u++}}else if(-1!=this.Ym&&(m=this.Ym,s=this.h.fe(this.Ym),
this.h.sa(s)!=this.h.Wb(this.h.sa(m))&&(s=this.sG(m),-1==s)))throw a.g.wa();0<=p||(g=s,s=this.h.sa(m),m=this.h.sa(g));d=h.Cf(c,-1);g=m;m=this.h.qj(m);t=this.h.jf(s)==m&&t;p=this.Au(m,h);p=this.tl(p,f);h.zi(d,p);-1!=e&&this.h.fm(m,e,1);m=0;for(u=t?a.I.truncate((u+1)/2):-1;;){b=this.h.jf(g);p=this.Au(b,h);p=this.tl(p,f);h.zi(d,p);m++;-1!=e&&this.h.fm(b,e,1);t&&m==u&&(d=h.Cf(c,-1),h.zi(d,p));if(g==s)break;b=this.h.Wb(g);if(this.h.fe(this.h.sa(g))!=this.h.sa(b)){if(g=this.tG(g),-1==g)throw a.g.wa();}else g=
b}};b.prototype.Yp=function(a){for(var b=this.h.a.jg(1607),c=this.h.Eg(),d=this.h.Be;-1!=d;d=this.h.Bf(d)){var e=this.h.te(d),f=e;do 1!=this.h.tb(f,c)&&this.Te(this.Ao(f))&&this.jF(f,b,c,-1,a),f=this.h.Wb(this.h.sa(f));while(f!=e)}this.h.kh(c);return b};b.prototype.SS=function(a){for(var b=this.h.a,c=b.jg(1607),d=b.jg(550),e=this.h.Eg(),f=this.h.uo(),h=-1,g=this.h.Be;-1!=g;g=this.h.Bf(g)){var n=this.h.te(g),p=n;do{var m=this.h.tb(p,e);1!=m&&(m=this.Ao(p),this.Te(m)&&this.jF(p,c,e,f,a));p=this.h.Wb(this.h.sa(p))}while(p!=
n)}for(g=this.h.Be;-1!=g;g=this.h.Bf(g))m=this.h.Sf(g,f),1!=m&&(m=this.h.md(g),this.Te(m)&&(-1==h&&(h=b.Cf(d,-1)),n=this.h.ol(g),-1!=n&&(n=this.h.Gi(n),n=this.tl(n,a),b.zi(h,n))));this.h.kh(e);this.h.vo(f);a=[];a[0]=d;a[1]=c;return a};b.prototype.Pn=function(){for(var a=this.h.a,b=a.jg(550),c=a.Cf(b,-1),d=this.h.Be;-1!=d;d=this.h.Bf(d))if(this.Te(this.h.md(d))){for(var e=-1,f=this.h.ol(d);-1!=f;f=this.h.zq(f)){var h=this.h.Gi(f);-1==e&&(e=h);var g=this.h.ya(a.Vf(a.rd(h)));if(this.Te(g)){e=h;break}}a.zi(c,
e)}return b};b.prototype.Im=function(a){this.Qg=[];for(var b=0;b<a;b++)this.Qg[b]=!1};b.qF=function(b,c,d,e){var f=b.Pa(),h=Array(1E3);a.I.Ps(h,null);var g=a.I.Lh(1E3,0),n=b.F(),p=!0,m=2==c.fb();if(1!=c.fb()&&2!=c.fb())throw a.g.wa();for(var s=0;s<n;){var t=a.I.truncate(b.fR(h,s)-s);m?a.gd.nG(c,h,t,d,g):a.gd.oG(c,h,t,d,g);for(var u=0,v=0;v<t;v++){var w=0==g[v];e||(w=!w);w&&(p&&(p=!1,f.Pd(b,0,s)),u!=v&&f.Pd(b,s+u,s+v),u=v+1)}p||u==t||f.Pd(b,s+u,s+t);s+=t}return p?b:f};b.jD=function(c,d,e){return c instanceof
a.pe?b.qF(c,d,e,!0):d instanceof a.Va?c.s()||d.s()?c.Pa():a.aj.HE(e,c,d)?a.aj.gL(c,d):c.Pa():b.mG(c,d,e,!0)};b.mt=function(c,d,e,f){var h=new a.i;c.o(h);var g=new a.i;d.o(g);var n=new a.i;n.K(h);n.Db(g);e=a.Ia.zd(e,n,!0);n=new a.i;n.K(g);g=a.Ia.As(e);n.P(g,g);if(!h.jc(n)){if(c.fb()<=d.fb())return b.Cc(b.ob(c.Pa()),c,"\x26");if(c.fb()>d.fb())return b.Cc(b.ob(d.Pa()),c,"\x26")}g=new b;h=new a.fd;n=h.Eb(b.ob(c));d=h.Eb(b.ob(d));g.Np(h,e,f);f=g.mt(n,d);c=b.Cc(h.hf(f),c,"\x26");a.T.Kc(c.D())&&(c.hg(2,
e),1736==c.D()&&c.hl());return c};b.mG=function(b,c,d,e){if(b.s())return b.Pa();if(c.s())return e?b.Pa():null;var f=[null],h=[0],g=2==c.fb();if(1!=c.fb()&&2!=c.fb())throw a.g.wa();f[0]=b.w();g?a.gd.nG(c,f,1,d,h):a.gd.oG(c,f,1,d,h);c=0==h[0];e||(c=!c);return c?b.Pa():b};b.PT=function(c,d,e){return c instanceof a.pe?b.qF(c,d,e,!1):d instanceof a.Va?c.s()?c.Pa():d.s()?c:a.aj.HE(e,c,d)?c.Pa():c:b.mG(c,d,e,!1)};b.prototype.ME=function(b,c,d,e,f){if(b.s())return b;var h=new a.fd;b=h.Eb(b);return this.Qj(h,
b,c,d,e,f)};b.prototype.EQ=function(b,c,d,e,f,h){if(f&&550!=b.Lb(c)){var g=new a.aA;g.KS(b,d);g.og?(a.aj.$(b,d,h,!0),f=!1):this.h.Mv(d)}else a.aj.$(b,d,h,!0),f=!1;e&&550!=b.Lb(c)?this.h.uF(b,c):this.h.tF(b,c);if(this.h.tx)return this.h.xg(),this.h=null,this.Qj(b,c,d,e,!1,h);this.h.Mv(NaN);h=this.h.ya(c);this.Im(h+1);this.Qg[h]=!0;if(1736==b.Lb(c)||e&&550!=b.Lb(c))return b.Pp(c,0),c=this.Xp(c,-1,-1),b=b.hf(c),b.Pp(0),f?b.hg(1,0):(b.hg(2,d),b.hl()),b;if(1607==b.Lb(c))return c=this.Yp(-1),b=b.hf(c),
f||b.hg(2,d),b;if(550==b.Lb(c))return c=this.Pn(),b=b.hf(c),f||b.hg(2,d),b;throw a.g.wa();};b.prototype.Qj=function(b,c,d,e,f,h){this.h=new a.gs;try{return this.EQ(b,c,d,e,f,h)}finally{this.h.xg()}};b.Qj=function(a,c,d,e,f){return(new b).ME(a,c,d,e,f)};b.prototype.DQ=function(b,c,d){this.Gq=b;this.h=new a.gs;b=c.Cm(d);var e=c.Lb(d);1!=b||550==e?this.h.tF(c,d):this.h.uF(c,d);if(!this.h.tx)if(this.h.Mv(NaN),e=this.h.ya(d),this.Im(e+1),this.Qg[e]=!0,1736==c.Lb(d)||1==b&&550!=c.Lb(d))c.Pp(d,0),b=this.Xp(d,
-1,-1),c.Vy(b,d),c.sy(b);else if(1607==c.Lb(d))b=this.Yp(-1),c.Vy(b,d),c.sy(b);else if(550==c.Lb(d))b=this.Pn(),c.Vy(b,d),c.sy(b);else throw a.g.ra("internal error");};b.Ry=function(a,c,d,e){var f=new b;f.Gq=!0;return f.ME(a,c,!1,d,e)};b.prototype.ll=function(b,c){var d=a.T.ve(this.h.a.Lb(b)),e=a.T.ve(this.h.a.Lb(c));if(d>e)return b;var f=this.h.ya(b),h=this.h.ya(c);this.Im((f|h)+1);this.Qg[this.h.ya(b)]=!0;if(2==d&&2==e)return this.Xp(b,c,-1);if(1==d&&2==e||1==d&&1==e)return this.Yp(-1);if(0==d)return this.Pn();
throw a.g.wa();};b.prototype.TB=function(b,c){var d=a.T.ve(this.h.a.Lb(b)),e=a.T.ve(this.h.a.Lb(c));if(d>e)return b;if(d<e)return c;var f=this.h.ya(b),h=this.h.ya(c);this.Im((f|h)+1);this.Qg[this.h.ya(b)]=!0;this.Qg[this.h.ya(c)]=!0;this.Qg[this.h.ya(b)|this.h.ya(c)]=!0;if(2==d&&2==e)return this.Xp(b,c,-1);if(1==d&&1==e)return this.Yp(-1);if(0==d&&0==e)return this.Pn();throw a.g.wa();};b.prototype.mt=function(b,c){var d=a.T.ve(this.h.a.Lb(b)),e=a.T.ve(this.h.a.Lb(c)),f=this.h.ya(b),h=this.h.ya(c);
this.Im((f|h)+1);this.Qg[this.h.ya(b)|this.h.ya(c)]=!0;f=-1;1<this.h.a.wp.Aa&&(f=b);if(2==d&&2==e)return this.Xp(b,c,f);if(1==d&&0<e||1==e&&0<d)return this.Yp(f);if(0==d||0==e)return this.Pn();throw a.g.wa();};b.prototype.Uw=function(b,c){var d=a.T.ve(this.h.a.Lb(b)),e=a.T.ve(this.h.a.Lb(c)),f=this.h.ya(b),h=this.h.ya(c);this.Im((f|h)+1);this.Qg[this.h.ya(b)|this.h.ya(c)]=!0;f=-1;1<this.h.a.wp.Aa&&(f=b);if(2==d&&2==e)return this.RS(b,c,f);if(1==d&&0<e||1==e&&0<d)return this.SS(f);if(0==d||0==e)return d=
[],d[0]=this.Pn(),d;throw a.g.wa();};b.prototype.On=function(b,c){var d=a.T.ve(this.h.a.Lb(b)),e=a.T.ve(this.h.a.Lb(c)),f=this.h.ya(b),h=this.h.ya(c);this.Im((f|h)+1);this.Qg[this.h.ya(b)]=!0;this.Qg[this.h.ya(c)]=!0;if(2==d&&2==e)return this.Xp(b,c,-1);if(1==d&&1==e)return this.Yp(-1);if(0==d&&0==e)return this.Pn();throw a.g.wa();};b.ob=function(b){var c=b.D();return 197==c?(c=new a.Ka(b.description),b.s()||c.Wc(b,!1),c):33==c?(c=new a.pe(b.description),b.s()||c.add(b),c):322==c?(c=new a.Xa(b.description),
b.s()||c.Bc(b,!0),c):b};b.Cc=function(b,c,d){var e=b.D();return 197==e?(c=new a.Ka(b.description),b.s()||c.Wc(b,!1),c):33!=e||"|"!=d&&"^"!=d?322==e?(c=new a.Xa(b.description),b.s()||c.Bc(b,!0),c):33==e&&"-"==d&&33==c.D()||550==e&&"\x26"==d&&33==c.D()?(c=new a.Va(b.description),b.s()||b.Sd(0,c),c):b:(c=new a.pe(b.description),b.s()||c.add(b),c)};b.ll=function(c,d,e,f){if(c.s()||d.s()||c.fb()>d.fb())return b.Cc(b.ob(c),c,"-");var h=new a.i;c.o(h);var g=new a.i;d.o(g);if(!h.jc(g))return b.Cc(b.ob(c),
c,"-");var n=new a.i;n.K(h);n.Db(g);e=a.Ia.zd(e,n,!0);g=new b;h=new a.fd;n=h.Eb(b.ob(c));d=h.Eb(b.ob(d));g.Np(h,e,f);f=g.ll(n,d);f=h.hf(f);c=b.Cc(f,c,"-");a.T.Kc(c.D())&&(c.hg(2,e),1736==c.D()&&c.hl());return c};b.TB=function(c,d,e,f){if(c.fb()>d.fb())return b.Cc(b.ob(c),c,"|");if(c.fb()<d.fb()||c.s())return b.Cc(b.ob(d),c,"|");if(d.s())return b.Cc(b.ob(c),c,"|");var h=new a.i;c.o(h);var g=new a.i;d.o(g);var n=new a.i;n.K(h);n.Db(g);e=a.Ia.zd(e,n,!0);if(!h.jc(g.IN(e,e)))switch(c=b.ob(c),d=b.ob(d),
c.D()){case 550:return c=a.T.Yj(c),c.Pd(d,0,-1),c;case 1607:return c=a.T.Yj(c),c.add(d,!1),c;case 1736:return c=a.T.Yj(c),c.add(d,!1),c;default:throw a.g.wa();}g=new b;h=new a.fd;n=h.Eb(b.ob(c));d=h.Eb(b.ob(d));g.Np(h,e,f);d=g.TB(n,d);c=b.Cc(h.hf(d),c,"|");a.T.Kc(c.D())&&(c.hg(2,e),1736==c.D()&&c.hl());return c};b.oM=function(c,d,e){if(2>c.length)throw a.g.N("not enough geometries to dissolve");for(var f=0,h=0,g=c.length;h<g;h++)f=Math.max(c[h].fb(),f);var n=new a.i;n.Ja();for(var p=new a.fd,m=-1,
s=0,t=-1,h=0,g=c.length;h<g;h++)if(c[h].fb()==f)if(c[h].s())-1==t&&(t=h);else{t=h;-1==m?m=p.Eb(b.ob(c[h])):p.YJ(m,b.ob(c[h]));var u=new a.i;c[h].dd(u);n.Db(u);s++}if(2>s)return b.ob(c[t]);c=2==f;d=a.Ia.zd(0==f?d:null,n,!0);return(new b).Qj(p,m,d,c,!0,e)};b.Uw=function(c,d,e,f){var h=[null,null,null],g=new a.i;c.o(g);var n=new a.i;d.o(n);var p=new a.i;p.K(g);p.Db(n);e=a.Ia.zd(e,p,!0);p=new a.i;p.K(n);n=a.Ia.As(e);p.P(n,n);if(!g.jc(p)){if(c.fb()<=d.fb())return c=b.Cc(b.ob(c.Pa()),c,"\x26"),h[c.fb()]=
c,h;if(c.fb()>d.fb())return c=b.Cc(b.ob(d.Pa()),c,"\x26"),h[c.fb()]=c,h}n=new b;g=new a.fd;p=g.Eb(b.ob(c));d=g.Eb(b.ob(d));n.Np(g,e,f);f=n.Uw(p,d);for(d=0;d<f.length;d++)n=b.Cc(g.hf(f[d]),c,"\x26"),a.T.Kc(n.D())&&(n.hg(2,e),1736==n.D()&&n.hl()),h[n.fb()]=n;return h};b.On=function(c,d,e,f){if(c.fb()>d.fb())return b.Cc(b.ob(c),c,"^");if(c.fb()<d.fb()||c.s())return b.Cc(b.ob(d),c,"^");if(d.s())return b.Cc(b.ob(c),c,"^");var h=new a.i;c.o(h);var g=new a.i;d.o(g);var n=new a.i;n.K(h);n.Db(g);e=a.Ia.zd(e,
n,!0);g=new b;h=new a.fd;n=h.Eb(b.ob(c));d=h.Eb(b.ob(d));g.Np(h,e,f);f=g.On(n,d);c=b.Cc(h.hf(f),c,"^");a.T.Kc(c.D())&&(c.hg(2,e),1736==c.D()&&c.hl());return c};b.uT=function(b,c,d){c=c.D();d=d.D();return 550==b.D()&&(33==c||33==d)&&1>=b.F()?(d=new a.Va(b.description),b.s()||b.Sd(0,d),d):b};b.prototype.ZM=function(a,b){for(var c=this.h.a,d=c.Cf(a,-1),e=b.size,f=0;f<e;f++){var h=b.get(f);c.zi(d,h)}c.Gn(d,!0)};b.prototype.WR=function(a,b){for(var c=this.h.a,d=c.$c;-1!=d;d=c.we(d))if(d==b)for(var e=c.Vb(d);-1!=
e;e=c.bc(e)){var f=c.Cb(e);if(-1!=f)for(var h=c.X(f);-1!=h;){var f=this.h.se(f),g=this.h.se(h),f=this.h.FN(f,g);-1!=f&&(g=this.h.sa(f),this.h.Bb(f,a,1),this.h.Bb(g,a,2));f=h;h=c.X(f)}}};b.prototype.XQ=function(b,c,d,e){d=this.h.ya(d);e=this.h.ya(e);var f=new a.ga(0);f.xb(256);for(var h=this.h.a,g=this.h.Eg(),n=this.h.Be;-1!=n;n=this.h.Bf(n)){var p=this.h.te(n);if(-1!=p){var m=p;do{if(1!=this.h.tb(m,g)){var s=m,t=m,u=!1,v=0;do{this.h.Bb(s,g,1);if(!u){var w=this.h.Gg(s);0!=(w&e)&&0!=(this.h.Qe(s)&d)&&
(t=s,u=!0)}u&&(f.add(this.h.Gi(this.h.ol(this.h.qj(s)))),-1!=b&&(w=this.h.Gg(s),0!=(w&e)&&(w=this.h.tb(s,b),v|=w)));s=this.h.Wb(s)}while(s!=t);u&&0<this.h.yo(this.h.Pe(t))&&(s=h.jg(1736),this.ZM(s,f),-1!=c&&h.EF(s,c,v));f.clear(!1)}m=this.h.Wb(this.h.sa(m))}while(m!=p)}}this.h.kh(g)};b.prototype.WL=function(a,b,c,d){this.h.uR();var e=-1;-1!=a&&(e=this.h.Eg(),this.WR(e,c));this.XQ(e,a,b,c);var f=this.h.a;a=0;for(e=f.$c;-1!=e;e=f.we(e))e!=b&&e!=c&&(d.add(e),a++);d.xd(0,a,function(a,b){var c=f.Gw(f.Vb(a)),
d=f.Gw(f.Vb(b));return c<d?-1:c==d?0:1})};b.prototype.xg=function(){null!=this.h&&(this.h.xg(),this.h=null)};return b}();a.Of=b})(z||(z={}));(function(a){var b=function(){function b(a){void 0!==a?this.Ly(a):this.IF()}b.prototype.Lu=function(){this.Ob=this.Nb=this.sb=this.rb=this.eb=this.mb=0};b.prototype.lc=function(a){return this==a?!0:a instanceof b?this.mb==a.mb&&this.rb==a.rb&&this.Nb==a.Nb&&this.sb==a.sb&&this.eb==a.eb&&this.Ob==a.Ob:!1};b.prototype.hc=function(){a.I.Rh();a.I.Rh();a.I.Rh();a.I.Rh();
a.I.Rh();return a.I.Rh()};b.prototype.Zi=function(a,b){var c=this.sb*a.x+this.eb*a.y+this.Ob;b.x=this.mb*a.x+this.rb*a.y+this.Nb;b.y=c};b.prototype.multiply=function(a){b.multiply(this,a,this)};b.multiply=function(a,b,c){var d,e,f,h,g;d=a.mb*b.mb+a.sb*b.rb;e=a.rb*b.mb+a.eb*b.rb;f=a.Nb*b.mb+a.Ob*b.rb+b.Nb;h=a.mb*b.sb+a.sb*b.eb;g=a.rb*b.sb+a.eb*b.eb;a=a.Nb*b.sb+a.Ob*b.eb+b.Ob;c.mb=d;c.rb=e;c.Nb=f;c.sb=h;c.eb=g;c.Ob=a};b.prototype.vm=function(){var a=new b;a.mb=this.mb;a.rb=this.rb;a.Nb=this.Nb;a.sb=
this.sb;a.eb=this.eb;a.Ob=this.Ob;return a};b.prototype.$y=function(b){if(!b.s()){for(var c=[],d=0;4>d;d++)c[d]=new a.b;b.hy(c);this.US(c,c);b.Ey(c,4)}};b.prototype.US=function(b,c){for(var d=0;d<b.length;d++){var e=new a.b,f=b[d];e.x=this.mb*f.x+this.rb*f.y+this.Nb;e.y=this.sb*f.x+this.eb*f.y+this.Ob;c[d]=e}};b.prototype.wO=function(a,b){a.s()||b.s()||0==a.aa()||0==a.ba()?this.Lu():(this.rb=this.sb=0,this.mb=b.aa()/a.aa(),this.eb=b.ba()/a.ba(),this.Nb=b.v-a.v*this.mb,this.Ob=b.C-a.C*this.eb)};b.prototype.TS=
function(b){var c=new a.b,d=new a.b;c.ma(this.mb,this.sb);d.ma(this.rb,this.eb);c.sub(c);var e=0.5*c.Up();c.ma(this.mb,this.sb);d.ma(this.rb,this.eb);c.add(d);c=0.5*c.Up();return b*(e>c?Math.sqrt(e):Math.sqrt(c))};b.prototype.IF=function(){this.mb=1;this.sb=this.Nb=this.rb=0;this.eb=1;this.Ob=0};b.prototype.XO=function(){return 1==this.mb&&1==this.eb&&0==this.rb&&0==this.Nb&&0==this.sb&&0==this.Ob};b.prototype.mg=function(a){return Math.abs(this.mb*this.eb-this.sb*this.rb)<=2*a*(Math.abs(this.mb*
this.eb)+Math.abs(this.sb*this.rb))};b.prototype.Nn=function(a,b){this.mb=1;this.rb=0;this.Nb=a;this.sb=0;this.eb=1;this.Ob=b};b.prototype.Ly=function(a,b){void 0!==b?(this.mb=a,this.sb=this.Nb=this.rb=0,this.eb=b,this.Ob=0):this.Ly(a,a)};b.prototype.Oy=function(){this.mb=0;this.rb=1;this.Nb=0;this.sb=1;this.Ob=this.eb=0};b.prototype.jS=function(a){this.kS(Math.cos(a),Math.sin(a))};b.prototype.kS=function(a,b){this.mb=a;this.rb=-b;this.Nb=0;this.sb=b;this.eb=a;this.Ob=0};b.prototype.shift=function(a,
b){this.Nb+=a;this.Ob+=b};b.prototype.scale=function(a,b){this.mb*=a;this.rb*=a;this.Nb*=a;this.sb*=b;this.eb*=b;this.Ob*=b};b.prototype.rotate=function(a){var c=new b;c.jS(a);this.multiply(c)};b.prototype.inverse=function(a){if(void 0!==a){var b=this.mb*this.eb-this.rb*this.sb;0==b?a.Lu():(b=1/b,a.Nb=(this.rb*this.Ob-this.Nb*this.eb)*b,a.Ob=(this.Nb*this.sb-this.mb*this.Ob)*b,a.mb=this.eb*b,a.rb=-this.rb*b,a.sb=-this.sb*b,a.eb=this.mb*b)}else this.inverse(this)};return b}();a.Bg=b})(z||(z={}));(function(a){var b=
function(){function b(){}b.prototype.Lu=function(){this.fh=this.Ob=this.Nb=this.Le=this.Ie=this.He=this.Ke=this.eb=this.rb=this.ef=this.sb=this.mb=0};b.prototype.Ly=function(a,b,c){this.mb=a;this.rb=this.ef=this.sb=0;this.eb=b;this.Ie=this.He=this.Ke=0;this.Le=c;this.fh=this.Ob=this.Nb=0};b.prototype.$y=function(b){if(b.s())return b;for(var c=new a.ee[8],d=0;8>d;d++)c[d]=new a.ee;b.hy(c);this.transform(c,8,c);b.Ey(c);return b};b.prototype.transform=function(b,c,d){for(var e=0;e<c;e++){var f=new a.ee,
h=b[e];f.x=this.mb*h.x+this.rb*h.y+this.He*h.z+this.Nb;f.y=this.sb*h.x+this.eb*h.y+this.Ie*h.z+this.Ob;f.z=this.ef*h.x+this.Ke*h.y+this.Le*h.z+this.fh;d[e]=f}};b.prototype.Qn=function(b){var c=new a.ee;c.x=this.mb*b.x+this.rb*b.y+this.He*b.z+this.Nb;c.y=this.sb*b.x+this.eb*b.y+this.Ie*b.z+this.Ob;c.z=this.ef*b.x+this.Ke*b.y+this.Le*b.z+this.fh;return c};b.prototype.Ap=function(a){b.multiply(this,a,this)};b.multiply=function(a,b,c){var d,e,f,h,g,n,p,m,s,t,u;d=a.mb*b.mb+a.sb*b.rb+a.ef*b.He;e=a.mb*b.sb+
a.sb*b.eb+a.ef*b.Ie;f=a.mb*b.ef+a.sb*b.Ke+a.ef*b.Le;h=a.rb*b.mb+a.eb*b.rb+a.Ke*b.He;g=a.rb*b.sb+a.eb*b.eb+a.Ke*b.Ie;n=a.rb*b.ef+a.eb*b.Ke+a.Ke*b.Le;p=a.He*b.mb+a.Ie*b.rb+a.Le*b.He;m=a.He*b.sb+a.Ie*b.eb+a.Le*b.Ie;s=a.He*b.ef+a.Ie*b.Ke+a.Le*b.Le;t=a.Nb*b.mb+a.Ob*b.rb+a.fh*b.He+b.Nb;u=a.Nb*b.sb+a.Ob*b.eb+a.fh*b.Ie+b.Ob;a=a.Nb*b.ef+a.Ob*b.Ke+a.fh*b.Le+b.fh;c.mb=d;c.sb=e;c.ef=f;c.rb=h;c.eb=g;c.Ke=n;c.He=p;c.Ie=m;c.Le=s;c.Nb=t;c.Ob=u;c.fh=a};b.inverse=function(b,c){var d=b.mb*(b.eb*b.Le-b.Ke*b.Ie)-b.sb*
(b.rb*b.Le-b.Ke*b.He)+b.ef*(b.rb*b.Ie-b.eb*b.He);if(0!=d){var e,f,h,g,n,p,m,s,t,u,v;s=1/d;d=(b.eb*b.Le-b.Ke*b.Ie)*s;h=-(b.rb*b.Le-b.Ke*b.He)*s;p=(b.rb*b.Ie-b.eb*b.He)*s;e=-(b.sb*b.Le-b.Ie*b.ef)*s;g=(b.mb*b.Le-b.ef*b.He)*s;m=-(b.mb*b.Ie-b.sb*b.He)*s;f=(b.sb*b.Ke-b.ef*b.eb)*s;n=-(b.mb*b.Ke-b.ef*b.rb)*s;s*=b.mb*b.eb-b.sb*b.rb;t=-(b.Nb*d+b.Ob*h+b.fh*p);u=-(b.Nb*e+b.Ob*g+b.fh*m);v=-(b.Nb*f+b.Ob*n+b.fh*s);c.mb=d;c.sb=e;c.ef=f;c.rb=h;c.eb=g;c.Ke=n;c.He=p;c.Ie=m;c.Le=s;c.Nb=t;c.Ob=u;c.fh=v}else throw a.g.ra("math singularity");
};b.prototype.vm=function(){var a=new b;a.mb=this.mb;a.sb=this.sb;a.ef=this.ef;a.rb=this.rb;a.eb=this.eb;a.Ke=this.Ke;a.He=this.He;a.Ie=this.Ie;a.Le=this.Le;a.Nb=this.Nb;a.Ob=this.Ob;a.fh=this.fh;return a};return b}();a.ZT=b})(z||(z={}));(function(a){var b=function(b){function d(a){if(void 0!==a)b.call(this,a.hc(),a);else{b.call(this);this.Jf=[];this.Jf[0]=0;this.Aa=1;this.Wg=[];for(a=0;10>a;a++)this.Wg[a]=-1;this.Wg[this.Jf[0]]=0}this.To=!0}C(d,b);d.prototype.Ne=function(a){this.hasAttribute(a)||
(this.Wg[a]=0,this.xA())};d.prototype.removeAttribute=function(b){if(0==b)throw a.g.N("Position attribue cannot be removed");this.hasAttribute(b)&&(this.Wg[b]=-1,this.xA())};d.prototype.reset=function(){this.Jf[0]=0;this.Aa=1;for(var a=0;a<this.Wg.length;a++)this.Wg[a]=-1;this.Wg[this.Jf[0]]=0;this.To=!0};d.prototype.qw=function(){return c.ww().add(this)};d.Tf=function(){return c.ww().iO()};d.Zn=function(){return c.ww().jO()};d.prototype.pJ=function(){var b=this.hc();return new a.pa(b,this)};d.prototype.xA=
function(){for(var a=this.Aa=0,b=0;10>a;a++)0<=this.Wg[a]&&(this.Jf[b]=a,this.Wg[a]=b,b++,this.Aa++);this.To=!0};d.prototype.hc=function(){this.To&&(this.tk=this.jj(),this.To=!1);return this.tk};d.prototype.lc=function(a){if(null==a)return!1;if(a==this)return!0;if(!(a instanceof d)||a.Aa!=this.Aa)return!1;for(var b=0;b<this.Aa;b++)if(this.Jf[b]!=a.Jf[b])return!1;return this.To!=a.To?!1:!0};d.prototype.qD=function(a){if(a.Aa!=this.Aa)return!1;for(var b=0;b<this.Aa;b++)if(this.Jf[b]!=a.Jf[b])return!1;
return!0};d.iu=function(a,b){for(var c=[],d=0;d<a.Aa;d++)c[d]=-1;for(var d=0,e=a.Aa;d<e;d++)c[d]=b.zf(a.Hd(d));return c};d.PN=function(a,b){var c=new d(a);c.Ne(b);return c.qw()};d.QN=function(a,b){for(var c=null,e=0;10>e;e++)!a.hasAttribute(e)&&b.hasAttribute(e)&&(null==c&&(c=new d(a)),c.Ne(e));return null!=c?c.qw():a};d.bo=function(a,b){var c=new d(a);c.removeAttribute(b);return c.qw()};return d}(a.pa);a.Od=b;var c=function(){function a(){this.map=[];var c=new b;this.add(c);c=new b;c.Ne(1);this.add(c)}
a.ww=function(){return a.lI};a.prototype.iO=function(){return a.Yn};a.prototype.jO=function(){return a.Zn};a.prototype.add=function(b){var c=b.hc();if(null!=a.Yn&&a.Yn.hc()==c&&b.qD(a.Yn))return a.Yn;if(null!=a.Zn&&a.Zn.hc()==c&&b.qD(a.Zn))return a.Zn;var d=null;void 0!==this.map[c]&&(d=this.map[c]);null==d&&(d=b.pJ(),1==d.Aa?a.Yn=d:2==d.Aa&&1==d.Hd(1)?a.Zn=d:this.map[c]=d);return d};a.lI=new a;return a}()})(z||(z={}));var M=0==a.version.indexOf("4."),L;(function(a){a[a.Linear=0]="Linear";a[a.Angular=
1]="Angular";a[a.Area=2]="Area";a[a.LinearOrAngular=3]="LinearOrAngular"})(L||(L={}));var G={feet:9002,kilometers:9036,meters:9001,miles:9035,"nautical-miles":9030,yards:9096},O={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109413,"square-yards":109442},S={degrees:9102,radians:9101};void 0===b.prototype.getCacheValue&&e.extend(b,{cache:null,getCacheValue:function(a){if(null===this.cache||void 0===this.cache)this.cache=
{};return this.cache[a]},setCacheValue:function(a,b){if(null===this.cache||void 0===this.cache)this.cache={};this.cache[a]=b}});var U=z.Nf.create(4326),T=z.Nf.create(102100);return function(){function a(){}a.extendedSpatialReferenceInfo=function(a){if(null===a)return null;a=x(a);var b=a.Se();return{tolerance:a.xq(),unitType:null==b?-1:b.Nc,unitID:null==b?-1:b.Qc(),unitBaseFactor:null==b?0:b.Dj,unitSquareDerivative:null==b?0:z.Tb.PC(b).Qc()}};a.clip=function(a,b){if(null===a)return null;var c=z.Pb.clip(B(a),
B(b),A(a));return w(c,a.spatialReference)};a.cut=function(a,b){for(var c=B(b),c=z.Pb.xm(B(a),c,A(a)),d=[],e=0;e<c.length;e++)d.push(w(c[e],a.spatialReference));return d};a.contains=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return z.Pb.contains(B(a),B(b),A(a))};a.crosses=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return z.Pb.VL(B(a),B(b),A(a))};a.distance=function(a,b,c){if(null===a||null===b)throw Error("Illegal Argument Exception");
return z.Pb.Fb(B(a),B(b),A(a),z.Tb.Qd(u(c,3)))};a.equals=function(a,b){return null===a&&null!==b||null===b&&null!==a?!1:z.Pb.lc(B(a),B(b),A(a))};a.intersects=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return z.Pb.RO(B(a),B(b),A(a))};a.touches=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return z.Pb.touches(B(a),B(b),A(a))};a.within=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return z.Pb.jT(B(a),B(b),
A(a))};a.disjoint=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return z.Pb.nM(B(a),B(b),A(a))};a.overlaps=function(a,b){if(null===a||null===b)throw Error("Illegal Argument Exception");return z.Pb.tQ(B(a),B(b),A(a))};a.relate=function(a,b,c){if(null===a||null===b)throw Error("Illegal Argument Exception");return z.Pb.py(B(a),B(b),A(a),c)};a.isSimple=function(a){if(null===a)throw Error("Illegal Argument Exception");return z.Pb.cP(B(a),A(a))};a.simplify=function(a){if(null===
a)throw Error("Illegal Argument Exception");var b=z.Pb.Qy(B(a),A(a));return w(b,a.spatialReference)};a.convexHull=function(c,d){void 0===d&&(d=!1);if(null===c)throw Error("Illegal Argument Exception");if(c instanceof b){var e=z.Pb.JL(B(c),A(c));return w(e,c.spatialReference)}return a.NI(c,d)};a.NI=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(B(a[d]));c=z.Pb.KL(c,b);for(d=0;d<c.length;d++)c[d]=w(c[d],a[0].spatialReference);return c};a.difference=function(c,d){if(null===c||null===d)throw Error("Illegal Argument Exception");
if(c instanceof b){var e=z.Pb.ll(B(c),B(d),A(c));return w(e,c.spatialReference)}return a.XL(c,d)};a.XL=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(B(a[d]));c=z.Pb.kM(c,B(b),A(b));for(d=0;d<c.length;d++)c[d]=w(c[d],b.spatialReference);return c};a.symmetricDifference=function(c,d){if(null===c||null===d)throw Error("Illegal Argument Exception");if(c instanceof b){var e=z.Pb.On(B(c),B(d),A(c));return w(e,c.spatialReference)}return a.tO(c,d)};a.tO=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(B(a[d]));
c=z.Pb.MS(c,B(b),A(b));for(d=0;d<c.length;d++)c[d]=w(c[d],b.spatialReference);return c};a.intersect=function(c,d){if(null===c||null===d)throw Error("Illegal Argument Exception");if(c instanceof b){var e=z.Pb.Ga(B(c),B(d),A(c));return w(e,c.spatialReference)}return a.EM(c,d)};a.EM=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(B(a[d]));c=z.Pb.QO(c,B(b),A(b));for(d=0;d<c.length;d++)c[d]=w(c[d],b.spatialReference);return c};a.union=function(a,c){void 0===c&&(c=null);if(null===a)return null;a instanceof
b&&(a=[a],null!==c&&a.push(c));if(0===a.length)return null;for(var d=[],e=0;e<a.length;e++)d.push(B(a[e]));return w(z.Pb.aT(d,A(a[0])),a[0].spatialReference)};a.offset=function(c,d,e,f,h,g){var n=0;if(null!=f&&void 0!=f)switch(f){case "round":n=0;break;case "bevel":n=1;break;case "miter":n=2;break;case "square":n=3}return c instanceof b?(d=z.Pb.offset(B(c),A(c),d,n,h,g,z.Tb.Qd(u(e,3))),w(d,c.spatialReference)):a.qO(c,d,e,n,h,g)};a.qO=function(a,b,c,d,e,f){if(null===a)return null;if(0===a.length)return[];
for(var h=[],g=0;g<a.length;g++)h.push(B(a[g]));b=z.Pb.sQ(h,A(a[0]),b,d,e,f,z.Tb.Qd(u(c,3)));for(g=0;g<b.length;g++)b[g]=w(b[g],a[0].spatialReference);return b};a.buffer=function(c,d,e,f){void 0===f&&(f=!1);if(c instanceof b)return d=z.Pb.buffer(B(c),A(c),d,z.Tb.Qd(u(e,3)),!1,0,NaN),w(d,c.spatialReference);if("[object Array]"!==Object.prototype.toString.call(d)){for(var h=[],g=0;g<c.length;g++)h.push(d);d=h}if(d.length!=c.length){if(0==d.length)throw Error("Illegal Argument Exception");for(var h=
[],n=0,g=0;g<c.length;g++)void 0===d[g]?h.push(n):(h.push(d[g]),n=d[g]);d=h}return a.vG(c,d,e,!1,f,"geodesic",NaN)};a.geodesicBuffer=function(c,d,e,f,h,g){if(c instanceof b)return void 0===h&&(h=NaN),d=z.Pb.buffer(B(c),A(c),d,z.Tb.Qd(u(e,0)),!0,t(f),h),w(d,c.spatialReference);if("[object Array]"!==Object.prototype.toString.call(d)){for(var n=[],p=0;p<c.length;p++)n.push(d);d=n}if(d.length!=c.length){if(0==d.length)throw Error("Illegal Argument Exception");for(var n=[],m=0,p=0;p<c.length;p++)void 0===
d[p]?n.push(m):(n.push(d[p]),m=d[p]);d=n}return a.vG(c,d,e,!0,f,h,g)};a.vG=function(a,b,c,d,e,f,h){if(null===a)return null;if(0===a.length)return[];void 0===h&&(h=NaN);for(var g=[],n=0;n<a.length;n++)g.push(B(a[n]));b=z.Pb.rK(g,A(a[0]),b,z.Tb.Qd(u(c,0)),d,e,t(f),h);for(n=0;n<b.length;n++)b[n]=w(b[n],a[0].spatialReference);return b};a.nearestCoordinate=function(a,b,c){void 0===c&&(c=!0);b=z.Pb.zw(B(a),B(b),c);return{coordinate:w(b.pw(),a.spatialReference),distance:b.sw(),isRightSide:b.Xw(),vertexIndex:b.gb(),
isEmpty:b.s()}};a.nearestVertex=function(a,b){var c=z.Pb.Aw(B(a),B(b));return{coordinate:w(c.pw(),a.spatialReference),distance:c.sw(),isRightSide:c.Xw(),vertexIndex:c.gb(),isEmpty:c.s()}};a.nearestVertices=function(a,b,c,d){b=B(b);c=z.Pb.Bw(B(a),b,c,d);d=[];for(b=0;b<c.length;b++)!1===c[b].s()&&d.push({coordinate:w(c[b].pw(),a.spatialReference),distance:c[b].sw(),isRightSide:c[b].Xw(),vertexIndex:c[b].gb(),isEmpty:c[b].s()});return d};a.generalize=function(a,b,c,d){b=z.Pb.fN(B(a),A(a),b,c,z.Tb.Qd(u(d,
3)));return w(b,a.spatialReference)};a.densify=function(a,b,c){b=z.Pb.oq(B(a),A(a),b,z.Tb.Qd(u(c,3)));return w(b,a.spatialReference)};a.geodesicDensify=function(a,b,c,d){void 0===d&&(d=0);b=z.Pb.fw(B(a),A(a),b,z.Tb.Qd(u(c,3)),d);return w(b,a.spatialReference)};a.rotate=function(a,b,c){if(void 0===c||null===c)switch(a.type){case "point":c=a;break;case "extent":c=M?a.get("center"):a.getCenter();break;default:c=M?a.get("extent").get("center"):a.getExtent().getCenter()}b=M?z.Wn.rotate(a.toJSON(),b,c.toJSON()):
z.Wn.rotate(a.toJson(),b,c.toJson());M?(b=s(b),b.set("spatialReference",a.spatialReference)):(b=p(b),b.setSpatialReference(a.spatialReference));return b};a.flipHorizontal=function(a,b){if(void 0===b||null===b)switch(a.type){case "point":b=a;break;case "extent":b=M?a.get("center"):a.getCenter();break;default:b=M?a.get("extent").get("center"):a.getExtent().getCenter()}var c;c=M?z.Wn.eC(a.toJSON(),b.toJSON()):z.Wn.eC(a.toJson(),b.toJson());M?(c=s(c),c.set("spatialReference",a.spatialReference)):(c=p(c),
c.setSpatialReference(a.spatialReference));return c};a.flipVertical=function(a,b){if(void 0===b||null===b)switch(a.type){case "point":b=a;break;case "extent":b=M?a.get("center"):a.getCenter();break;default:b=M?a.get("extent").get("center"):a.getExtent().getCenter()}var c;c=M?z.Wn.fC(a.toJSON(),b.toJSON()):z.Wn.fC(a.toJson(),b.toJson());M?(c=s(c),c.set("spatialReference",a.spatialReference)):(c=p(c),c.setSpatialReference(a.spatialReference));return c};a.planarArea=function(a,b){if(null===a)throw Error("Illegal Argument Exception");
return z.Pb.BQ(B(a),A(a),z.Tb.Qd(u(b,2)))};a.planarLength=function(a,b){if(null===a)throw Error("Illegal Argument Exception");return z.Pb.CQ(B(a),A(a),z.Tb.Qd(u(b,3)))};a.geodesicArea=function(a,b,c){if(null===a)throw Error("Illegal Argument Exception");return z.Pb.jN(B(a),A(a),z.Tb.Qd(u(b,2)),t(c))};a.geodesicLength=function(a,b,c){if(null===a)throw Error("Illegal Argument Exception");return z.Pb.nN(B(a),A(a),z.Tb.Qd(u(b,0)),t(c))};return a}()})},"esriPBI/widgets/Popup/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array esri/dijit/PopupTemplate esri/layers/FeatureLayer ../../formatUtils ../../utils/layerUtils".split(" "),
function(g,m,a,b,d,c,h){b=g(b,{_fieldFormatsMap:null,_mapSettings:null,constructor:function(){this._fieldFormatsMap={};this.inherited(arguments)},getTitle:function(a){this._updateCustomFormat(a);return this.inherited(arguments)},getContent:function(a){this._updateCustomFormat(a);return this.inherited(arguments)},_formatValue:function(a,b,d,h){var g=this._fieldsMap[b.toLowerCase()];return(g=g&&g.visible&&g.format&&c.format(a,g.format))?g:this.inherited(arguments)},_updateCustomFormat:function(b){this._mapSettings=
(b=b&&b.getLayer())&&b.getMap()&&b.getMap().settings;a.forEach(h.getAllFields(b),function(a){a.customFormat?this._fieldFormatsMap[a.name]=a.customFormat:a._formatType&&(this._fieldFormatsMap[a.name]=a._formatType)},this)}});b.getDefaultFieldInfo=function(a){if(a){var b,c="esriFieldTypeOID"!==a.type&&"esriFieldTypeGlobalID"!==a.type&&"esriFieldTypeGeometry"!==a.type;c&&(a.format?b=a.format:"esriFieldTypeInteger"===a.type||"esriFieldTypeSmallInteger"===a.type?b={places:0,digitSeparator:!0}:"esriFieldTypeDouble"===
a.type||"esriFieldTypeSingle"===a.type?b={places:2,digitSeparator:!0}:"esriFieldTypeDate"===a.type&&(b={dateFormat:"shortDateShortTime"}));return{fieldName:a.name||a.id,label:a.alias||a.label,isEditable:!1,tooltip:"",visible:c,format:b,stringFieldOption:"textbox"}}};b.getDefault=function(c){if(c){var f=null;"function"===typeof c.isInstanceOf&&c.isInstanceOf(d)?f=h.getAllFields(c):0<=c.length&&(f=c);c=a.map(f,m.hitch(this,function(a){return b.getDefaultFieldInfo(a)}));return new b({title:"",fieldInfos:c,
description:null,showAttachments:!1,mediaInfos:[]})}};return b})},"esriPBI/utils/layerUtils":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang esri/tasks/GeometryService esri/tasks/ProjectParameters esri/graphicsUtils esri/tasks/query esri/layers/FeatureLayer ./fieldUtils ./filteredRendererUtils ./_Properties".split(" "),function(g,m,a,b,d,c,h,n,f,e,p){function s(a){return a.__emfProperties||(a.__emfProperties=new p({},!0))}function u(a,c,e){var f=a._map;a.spatialReference.wkid!==
f.spatialReference.wkid?(a=e&&e.helperServices&&e.helperServices.geometry&&e.helperServices.geometry.url&&new b(e.helperServices.geometry.url),e=new d,a&&(e.outSR=f.spatialReference,e.geometries=[c],a.project(e,function(a){"point"===a[0].type?f.centerAndZoom(a[0],6):f.setExtent(a[0],!0)}))):f.setExtent(a.fullExtent,!0)}return{getProperty:function(b,c){return a.getObject(c,!1,s(b))},setProperty:function(a,b,c){return s(a).set(b,c)},getProperties:s,getPropertiesJson:function(b){var c,d,h;if(b.fields)for(var g=
0;g<b.fields.length;g++){var n=b.fields[g];if(d=f.getProperties(n).toJson())c||(c={}),c[n.name]=d}e.hasFilteredGroups(b.renderer)&&(h={filteredRenderer:e.toJson(b.renderer)});if((d=s(b).toJson())||c||h)return a.mixin(d,{fields:c},{_readonly:h})},_initializeProperties:function(a,b){a.__emfProperties||(a.__emfProperties=new p(b),b.fields&&m.forEach(a.fields,function(a){var c=b.fields[a.name];c&&f._initializeProperties(a,c)}))},setName:function(a,b){a.name=b||a._titleForLegend||a.arcgisProps&&a.arcgisProps.title||
a.title||a.name},gotoLayer:function(a,b){var d=a._map;if("basemap"!==a._basemapGalleryLayerType&&"reference"!==a._basemapGalleryLayerType&&a.fullExtent)if(a.fullExtent.xmin&&a.fullExtent.ymin&&a.fullExtent.xmax&&a.fullExtent.ymax)u(a,a.fullExtent,b);else if(!(a.graphics&&0>=a.graphics.length)){var e=m.filter(a.graphics,function(a){if(a.geometry)return"point "===a.geometry.type?a.geometry.x&&a.geometry.y:!0}),f;0<e.length?(f=c.graphicsExtent(e),a.spatialReference.wkid===d.spatialReference.wkid?f?d.setExtent(f,
!0):"point"===e[0].geometry.type&&d.centerAndZoom(e[0].geometry,6):f?u(a,f,b):u(a,e[0].geometry,b)):a.baseLayer&&a.baseLayer.graphics&&(e=m.filter(a.baseLayer.graphics,function(a){if(a.geometry)return"point"===a.geometry.type?a.geometry.x&&a.geometry.y:!0}),0<e.length&&(f=c.graphicsExtent(e),a.spatialReference.wkid===d.spatialReference.wkid?f?d.setExtent(f,!0):"point"===e[0].geometry.type&&d.centerAndZoom(e[0].geometry,6):f?u(a,f,b):u(a,e[0].geometry,b)))}},getAllFields:function(a){var b=a.fields;
b&&(a.generateFeatures&&a.generateFeatures.customLocationTypeFields)&&(b=b.concat(m.map(a.generateFeatures.customLocationTypeFields,function(a){return{name:a.id,alias:a.label,type:a.type,_formatType:a._formatType}})));return b},setReferenceLayerPopup:function(a,b){var c=new h;c.geometry=b;c.returnGeometry=!1;var d=a.getLayersVisibleAtScale(),e;m.some(d,function(a){if(a.url&&"Feature Layer"===a.type&&a.mode===n.MODE_SELECTION)return e=a,!0});if(e){var d=!1,f=a.infoWindow.getSelectedFeature();if(f){var g=
f.getLayer();g&&"PowerBILayer"===g.type&&(d=!0)}if(!f||!d)e.setOpacity(0.5),e.selectFeatures(c,n.SELECTION_NEW,function(c){a.infoWindow.setFeatures(c);a.infoWindow.show(b)}),e.clearSelection()}}}})},"esri/tasks/ProjectParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../lang ../geometry/jsonUtils".split(" "),function(g,m,a,b,d,c,h,n){return g(null,{declaredClass:"esri.tasks.ProjectParameters",geometries:null,outSR:null,transformation:null,
transformForward:null,toJson:function(){var c=a.map(this.geometries,function(a){return a.toJson()}),d={};d.outSR=this.outSR.wkid||b.toJson(this.outSR.toJson());d.inSR=this.geometries[0].spatialReference.wkid||b.toJson(this.geometries[0].spatialReference.toJson());d.geometries=b.toJson({geometryType:n.getJsonType(this.geometries[0]),geometries:c});this.transformation&&(d.transformation=this.transformation.wkid||b.toJson(this.transformation));h.isDefined(this.transformForward)&&(d.transformForward=
this.transformForward);return d}})})},"esriPBI/utils/fieldUtils":function(){define(["dojo/_base/declare","dojo/_base/array","./_Properties"],function(g,m,a){function b(b){return b.__emfProperties||(b.__emfProperties=new a({},!0))}return{getProperty:function(a,c){return b(a).get(c)},setProperty:function(a,c,h){return b(a).set(c,h)},getProperties:b,_initializeProperties:function(b,c){b.__emfProperties||(b.__emfProperties=new a(c))}}})},"esriPBI/utils/_Properties":function(){define(["dojo/_base/declare",
"dojo/Stateful"],function(g,m){return g(m,{toJson:function(){var a,b;for(b in this._attrPairNames)this.hasOwnProperty(b)&&(a||(a={}),a[b]=this[b]);return a}})})},"esriPBI/utils/filteredRendererUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/Evented dojo/aspect esri/renderers/UniqueValueRenderer esri/renderers/ClassBreaksRenderer".split(" "),function(g,m,a,b,d,c){function h(a){a.__filtering||(a.__filtering={getSymbolHandle:b.around(a,"getSymbol",function(b){return function(c){if(!e(a,
c))return b.apply(this,arguments)}}),defaultSymbolFiltered:!1,filteredInfos:[],destroy:function(){this.getSymbolHandle.remove();a.__filtering=void 0}})}function n(a,b){if(a&&b)for(var c=0;c<a.length;c++){var d=a[c];if(d&&(d.hasOwnProperty("value")&&d.value===b.value||d.hasOwnProperty("minValue")&&d.hasOwnProperty("maxValue")&&d.minValue===b.minValue&&d.maxValue===b.maxValue))return c}return-1}function f(a){p.emit("filter-change",{layer:a});a.setRenderer(a.renderer);a.redraw()}function e(a,b){var e=
a&&a.__filtering;if(e){var f;a.isInstanceOf(d)?f=a.getUniqueValueInfo(b):a.isInstanceOf(c)&&(f=a.getBreakInfo(b));return f?-1!==g.indexOf(e.filteredInfos,f):e.defaultSymbolFiltered}return!1}var p=new a;return m.mixin(p,{findGroup:function(a,b){var e=a&&a.renderer;if(b&&e&&e.isInstanceOf&&(e.isInstanceOf(d)||e.isInstanceOf(c))){if(b===e.defaultSymbol)return{filtered:e.__filtering&&e.__filtering.defaultSymbolFiltered,toggle:function(){h(a.renderer);e.__filtering.defaultSymbolFiltered=!e.__filtering.defaultSymbolFiltered;
f(a)}};for(var g,p=0;p<e.infos.length;p++){var m=e.infos[p];if(m&&m.symbol===b){g=m;break}}if(g)return{filtered:e.__filtering&&-1!==n(e.__filtering.filteredInfos,g),toggle:function(){h(a.renderer);var b=n(e.__filtering.filteredInfos,g);-1===b?e.__filtering.filteredInfos.push(g):e.__filtering.filteredInfos.splice(b,1);f(a)}}}},hasFilteredGroups:function(a){return a&&a.__filtering&&(a.__filtering.defaultSymbolFiltered||0<a.__filtering.filteredInfos.length)},clearFilter:function(a){a&&(a.renderer&&a.renderer.__filtering)&&
(a.renderer.__filtering.destroy(),f(a))},isFiltered:e,init:function(a,b){if(a&&a.isInstanceOf&&(a.isInstanceOf(d)||a.isInstanceOf(c)))if(h(a),b&&(a.__filtering.defaultSymbolFiltered=b.defaultSymbolFiltered,b.filteredInfos))for(var e=0;e<b.filteredInfos.length;e++){var f;f=a.infos;var g=n(f,b.filteredInfos[e]);f=-1!==g?f[g]:void 0;f&&a.__filtering.filteredInfos.push(f)}},toJson:function(a){if(a=a&&a.__filtering)return{defaultSymbolFiltered:a.defaultSymbolFiltered,filteredInfos:a.filteredInfos}}})})},
"esriPBI/utils/selectionUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/topic esri/layers/FeatureLayer esri/geometry/ScreenPoint esri/geometry/Extent esri/tasks/query ./SpatialOperations".split(" "),function(g,m,a,b,d,c,h,n){return{PBIHoverFeatures:function(a,b){var n=a._map,m=[];if("esriGeometryPoint"===a.geometryType){g.forEach(a.graphics,function(a){var f=a.getShape();if(f){var h=0,g=0;f.shape.r?g=f.rawNode&&f.rawNode.style&&f.rawNode.style.r?h=f=Number(f.rawNode.style.r):h=f.shape.r:
(f=f.getBoundingBox(),h=f.width/2,g=f.height/2);var t=n.toScreen(a.geometry),f=n.toMap(new d(t.x-h,t.y-g)),u=n.toMap(new d(t.x+h,t.y+g)),h=Math.min(f.x,u.x),g=Math.max(f.x,u.x),t=Math.min(f.y,u.y),f=Math.max(f.y,u.y);(new c(h,t,g,f,n.spatialReference)).contains(b)&&m.push(a.attributes.OBJECTID)}});var u=new h;u.objectIds=m}else{var u=new h,t=n.extent.getWidth()/n.width,t=(a.renderer.defaultSymbol?a.renderer.defaultSymbol.outline.width:a.renderer.symbol.outline.width)*t;u.geometry=new c(b.x-t,b.y-
t,b.x+t,b.y+t,b.spatialReference)}return a.queryFeatures(u)},selectFeaturesInFeatureCollection:function(a,b,c){return(new n).doSpatialQueryUsingGeomService(a,[b]).then(m.hitch(this,function(b){return b&&0<b.length?this.selectFeatures(a,b,c):[]}))},layerSelectFeatures:function(f,e,n,m,u,t,w){var v={},x=!1,B=0;("undefined"===w||!w)&&g.forEach(f.getSelectedFeatures(),function(a){x=!0;a.attributes&&0<=a.attributes.OBJECTID&&(v[a.attributes.OBJECTID]=!0,B+=1)});var A=f._map,C=[],z=!1;m&&"esriGeometryPoint"===
f.geometryType?(g.forEach(f.graphics,function(a){var b=a.getShape();if(b){var e=0,f=0;b.shape.r?(e=b.rawNode.getAttribute("r"))?(f=Number(e),(e=b.rawNode.style.strokeWidth)||(e=b.rawNode.getAttribute("stroke-width")),e&&(strokeWidthNum=parseFloat(e),isNaN(strokeWidthNum)||(f+=strokeWidthNum/2)),e=f):f=e=b.shape.r:(b=b.getBoundingBox(),e=b.width/2,f=b.height/2);var h=A.toScreen(a.geometry),b=A.toMap(new d(h.x-e,h.y-f)),g=A.toMap(new d(h.x+e,h.y+f)),e=Math.min(b.x,g.x),f=Math.max(b.x,g.x),h=Math.min(b.y,
g.y),b=Math.max(b.y,g.y);if((new c(e,h,f,b,A.spatialReference)).contains(m)&&(a=a.attributes.OBJECTID,C.push(a),!x||!(a in v)))B+=1}}),e=new h,e.objectIds=C,!t&&0===C.length&&(z=!0)):f.queryFeatures(e,function(a){!t&&0===a.features.length?z=!0:g.forEach(a.features,function(a){a=a.attributes.OBJECTID;C.push(a);if(!x||!(a in v))B+=1})});u&&0<C.length&&(areAllNewSelectionsInPrevSelections=!0,g.some(C,function(a){if(-1===u.indexOf(a))return areAllNewSelectionsInPrevSelections=!1,!0}),areAllNewSelectionsInPrevSelections&&
(u.length===C.length?z=!0:t&&(n=b.SELECTION_SUBTRACT)));u&&(0<C.length&&u.length===C.length)&&(z=!0,g.some(C,function(a){if(-1===u.indexOf(a))return z=!1,!0}));return 250<B?(a.publish("exceed-selectlimit"),[]):z?(f.clearSelection(),f.emit("selection-complete",{features:[]}),[]):f.selectFeatures(e,n)},selectFeatures:function(a,b,c){var d=new h,n=[];g.forEach(b,function(b){var c=b&&b.attributes&&b.attributes[a.objectIdField];null!==c&&(void 0!==c&&b.visible)&&n.push(c)});d.objectIds=n;return this.layerSelectFeatures(a,
d,c)}}})},"esriPBI/utils/SpatialOperations":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/Deferred dojo/promise/all dojo/i18n!./nls/utils esri/geometry/normalizeUtils esri/tasks/BufferParameters esri/tasks/GeometryService esri/tasks/QueryTask esri/tasks/query esri/tasks/RelationParameters esri/graphicsUtils ./portal".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t){return g([],{geometryService:null,bufferParams:null,map:null,projectionHelper:null,constructor:function(a){this.map=
a;this.bufferParams=new n;if(a=t.get("helperServices.geometry.url"))this.geometryService=new f(a)},generateBuffer:function(a,d,e){var f=new b;this.geometryService?(this.bufferParams.geometries=a,this.bufferParams.distances=[d],this.bufferParams.unit=e,this.bufferParams.outSpatialReference=this.map.spatialReference,this.bufferParams.geodesic=!0,this.geometryService.buffer(this.bufferParams,function(a){f.resolve(a)},function(a){f.reject(a)})):f.reject(c.noGeometryService);return f.promise},doSpatialQueryUsingQueryTask:function(c,
f){var h=new b,g=[],n=[];m.forEach(f,a.hitch(this,function(a){var d=new b;n.push(d);var f=new e(c.url),s=new p;s.where=void 0===c.getDefinitionExpression()?"1 \x3d 1":c.getDefinitionExpression();s.outSpatialReference=this.map.spatialReference;s.returnGeometry=!0;s.outFields=["*"];s.geometry=a;s.spatialRelationship=p.SPATIAL_REL_INTERSECTS;f.execute(s,function(a){m.map(a.features,function(a){g.push(a)});d.resolve(a)},function(a){return h.reject(a)})}));d(n).then(function(a){a[0].features=g;h.resolve(a[0])});
return h.promise},doSpatialQueryUsingGeomService:function(d,e){var f=new b;this.geometryService?h.normalizeCentralMeridian(e,this.geometryService,a.hitch(this,function(b){var c=m.filter(d.graphics,function(a){return a.geometry}),e=[];"esriGeometryPoint"===d.geometryType?(m.forEach(c,a.hitch(this,function(a){for(var c=0;c<b.length;++c)if(b[c].contains(a.geometry)){e.push(a);break}})),f.resolve(e)):(m.forEach(c,function(a){for(var c=0;c<b.length;++c)if(b[c].getExtent().intersects(a.geometry)){e.push(a);
break}}),0<e.length?this._findFeaturesWithRelationOperation(e,b,f):f.resolve([]))})):f.reject(c.noGeometryService);return f.promise},_findFeaturesWithRelationOperation:function(a,b,d){if(this.geometryService){var e=new s;e.geometries1=b;e.geometries2=u.getGeometries(a);e.relation=s.SPATIAL_REL_INTERSECTION;this.geometryService.relation(e,function(b){var c={},e=[];m.forEach(b,function(b){b=b.geometry2Index;b in c||(c[b]=null,e.push(a[b]))});d.resolve(e)},function(a){return d.reject(a)})}else d.reject(c.noGeometryService);
return d.promise}})})},"esri/tasks/BufferParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/Polygon ../geometry/jsonUtils".split(" "),function(g,m,a,b,d,c,h,n){return g(null,{declaredClass:"esri.tasks.BufferParameters",geometries:null,outSpatialReference:null,bufferSpatialReference:null,distances:null,unit:null,unionResults:!1,geodesic:!1,toJson:function(){var c={unit:this.unit,unionResults:this.unionResults,geodesic:this.geodesic},
d=this.distances,g=this.outSpatialReference,m=this.bufferSpatialReference,u=a.map(this.geometries,function(a){a="extent"===a.type?h.fromExtent(a):a;return a.toJson()},this),t=this.geometries;if(t&&0<t.length){var w="extent"===t[0].type?"esriGeometryPolygon":n.getJsonType(t[0]);c.geometries=b.toJson({geometryType:w,geometries:u});c.inSR=t[0].spatialReference.wkid?t[0].spatialReference.wkid:b.toJson(t[0].spatialReference.toJson())}d&&(c.distances=d.join(","));g&&(c.outSR=g.wkid?g.wkid:b.toJson(g.toJson()));
m&&(c.bufferSR=m.wkid?m.wkid:b.toJson(m.toJson()));return c}})})},"esri/tasks/RelationParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils".split(" "),function(g,m,a,b,d,c,h){g=g(null,{declaredClass:"esri.tasks.RelationParameters",geometries1:null,geometries2:null,relation:null,relationParam:null,toJson:function(){var c=a.map(this.geometries1,function(a){return a.toJson()}),d=a.map(this.geometries2,function(a){return a.toJson()}),
e={},g=this.geometries1;g&&0<g.length&&(e.geometries1=b.toJson({geometryType:h.getJsonType(g[0]),geometries:c}),c=this.geometries1[0].spatialReference,e.sr=c.wkid?c.wkid:b.toJson(c.toJson()));if((c=this.geometries2)&&0<c.length)e.geometries2=b.toJson({geometryType:h.getJsonType(c[0]),geometries:d});this.relation&&(e.relation=this.relation);this.relationParam&&(e.relationParam=this.relationParam);return e}});m.mixin(g,{SPATIAL_REL_CROSS:"esriGeometryRelationCross",SPATIAL_REL_DISJOINT:"esriGeometryRelationDisjoint",
SPATIAL_REL_IN:"esriGeometryRelationIn",SPATIAL_REL_INTERIORINTERSECTION:"esriGeometryRelationInteriorIntersection",SPATIAL_REL_INTERSECTION:"esriGeometryRelationIntersection",SPATIAL_REL_COINCIDENCE:"esriGeometryRelationLineCoincidence",SPATIAL_REL_LINETOUCH:"esriGeometryRelationLineTouch",SPATIAL_REL_OVERLAP:"esriGeometryRelationOverlap",SPATIAL_REL_POINTTOUCH:"esriGeometryRelationPointTouch",SPATIAL_REL_TOUCH:"esriGeometryRelationTouch",SPATIAL_REL_WITHIN:"esriGeometryRelationWithin",SPATIAL_REL_RELATION:"esriGeometryRelationRelation"});
return g})},"esriPBI/utils/portal":function(){define(["dojo/_base/lang","dojo/i18n!./nls/utils"],function(g,m){var a;return{set:function(b){a=b},get:function(b){if(a){if(b){var d=a;b=b.split(".");for(var c=0;c<b.length;c++)if(d=d[b[c]],void 0===d)return;return d}return a}throw Error(m.portalNotInitialized);}}})},"esriPBI/extensions/PictureMarkerSymbol":function(){define("require dojo/_base/declare dojo/_base/window dojo/dom-construct dojo/dom-style ../utils/Random esri/symbols/PictureMarkerSymbol".split(" "),
function(g,m,a,b,d,c,h){var n=h.prototype.toJson;h.extend({toJson:function(){return this.toJsonUrl()},toJsonUrl:function(){var a=this.url,b=n.apply(this,arguments);b.url=a;b.imageData&&delete b.imageData;return b}})})},"esriPBI/adapters/DefaultsAdapter":function(){define(["dojo/_base/declare","./_Adapter"],function(g,m){return g(m,{getExtensionPacks:function(){return[{name:"esriPBI"}]},getToolCollections:function(){return[{id:"main",tools:[{label:{nls_property:"groupLabel_tools",nls_location:"esriPBI/extensions/tools/nls/Tools"},
tools:[{name:"SelectBaseMap",extensionPackName:"esriPBI"},{name:"LocationType",extensionPackName:"esriPBI"},{name:"MapTheme",extensionPackName:"esriPBI"},{name:"SymbolStyle",extensionPackName:"esriPBI"}]}]},{id:"secondary",tools:[{label:{nls_property:"groupLabel_tools",nls_location:"esriPBI/extensions/tools/nls/Tools"},tools:[{name:"AddLocation",extensionPackName:"esriPBI"},{name:"ShowSearch",extensionPackName:"esriPBI"},{name:"Infographics",extensionPackName:"esriPBI"}]}]},{id:"third",tools:[{label:{nls_property:"groupLabel_tools",
nls_location:"esriPBI/extensions/tools/nls/Tools"},tools:[{name:"TelemetrySettings",extensionPackName:"esriPBI"},{name:"Help",extensionPackName:"esriPBI"}]}]},{id:"floatTools",tools:[{label:{nls_property:"groupLabel_tools",nls_location:"esriPBI/extensions/tools/nls/Tools"},tools:[{name:"Select",extensionPackName:"esriPBI"}]}]}]},getBehaviors:function(){return[]},getMapConfiguration:function(){return null},getMapOptions:function(){return{smartNavigation:!1,sliderPosition:"top-right"}},getLayout:function(){return{name:"SidePanelLayout",
extensionPackName:"esriPBI",hideKeepMeSignedIn:!1,hideSignOutButton:!1,hideSignedInUser:!1,defaultKeepMeSignedIn:!0,headerTitle:"ArcGIS",mapContentsStartupVisibility:"HIDE",theme:{css:{titleColor:"#ffffff",headerColor:"#01709b",headerHoverColor:"#2aade3",accentColor:"#3093ca",titleTextColor:"#000000",accentTextColor:"#ffffff",fontFamily:"'Segoe UI', Avenir, 'Helvetica Neue', Arial, sans-serif"}}}}})})},"esriPBI/adapters/_Adapter":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred",
"dojo/Evented"],function(g,m,a,b){return g(b,{constructor:function(a){m.mixin(this,a)},initialize:function(){}})})},"esriPBI/adapters/LogAdapter":function(){define("dojo/_base/declare dojo/_base/lang ../telemetry/UsageEventIDEnum ../telemetry/UsageEventTypeEnum ../telemetry/UsageDataHandler ../config ../telemetry/telemetryConfig ./_Adapter".split(" "),function(g,m,a,b,d,c,h,n){return g(n,{eventTypeEnum:b,eventIDEnum:a,constructor:function(){this.loggingSupported="undefined"!==typeof Storage&&this._lsSupported()&&
this._ssSupported()?!0:!1},postscript:function(){this.settings=m.mixin({defaultLevel:"error",levels:{}},this.settings)},log:function(a){},logTelemetry:function(a){this.loggingSupported&&d.logEvent(a)},initialize:function(){h.appVersion=c.version;h.buildNumber=c.buildNumber;this.loggingSupported&&d.beginLogging(h)},_lsSupported:function(){var a=!0;try{localStorage.setItem("test","test"),localStorage.removeItem("test")}catch(b){a=!1}return a},_ssSupported:function(){var a=!0;try{sessionStorage.setItem("test",
"test"),sessionStorage.removeItem("test")}catch(b){a=!1}return a}})})},"esriPBI/telemetry/UsageEventIDEnum":function(){define([],function(){return{CreateVisual:"CreateVisual",LoadVisual:"LoadVisual",WorldGeocode:"WorldGeocode",GeoenrichGeocode:"GeoenrichGeocode",InFocusEditToggle:"InFocusEditToggle"}})},"esriPBI/telemetry/UsageEventTypeEnum":function(){define([],function(){return{Startup:"Startup",Shutdown:"Shutdown",Click:"Click",Invoke:"Invoke",User:"User"}})},"esriPBI/telemetry/UsageDataHandler":function(){define(["dojo/json",
"dojo/Deferred","dojo/when","dojo/Evented","dojo/promise/all"],function(g,m,a,b,d){var c=new b,h=c.isLoggingStarted=!1,n=!1,f={},e=function(a){var b=null;(a=localStorage.getItem(a))&&g.stringify(a)!=g.stringify("{}")&&(b=g.parse(a));return b},p=function(){var a=e("_esri_"+f.appId+"_MD"),b=e("_esri_"+f.appId+"_PD"),c;c=e("_esri_"+f.appId+"_MD");var d=e("_esri_"+f.appId+"_PD"),h="";if(d&&c&&(d.appId&&(d.appVersion&&d.userGUID&&d.fileVersion)&&(h=h+d.appId+","+d.appVersion+","+d.userGUID+",FileVersion\x3d"+
d.fileVersion+"\r\n"),c.eventList&&0<c.eventList.length))for(d=0;d<c.eventList.length;d++)h=h+c.eventList[d].eventTime+","+c.eventList[d].eventType+","+c.eventList[d].eventId+","+c.eventList[d].eventData+"\r\n";c=h;d=c.length;for(h=c.length-1;0<=h;h--){var g=c.charCodeAt(h);127<g&&2047>=g?d++:2047<g&&65535>=g&&(d+=2);56320<=g&&57343>=g&&h--}h=new Date;return a&&b&&b.fileSize&&d>b.fileSize||a&&(b&&b.fileDays)&&(d=a.lastUploadTime,g=b.createTime,d=d?d:!d&&g?g:new Date,b=b.fileDays,h.setDate(h.getDate()-
b)>d&&0<a.eventList.length)?c:null},s=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},u=function(){return(s()+s()+s()+"4"+s().substr(0,3)+s()+s()+s()+s()).toLowerCase()},t=function(a){AWS.config.region=f.region;AWS.config.update({accessKeyId:f.accessKeyId,secretAccessKey:f.secretAccessKey});var b=new AWS.S3({params:{Bucket:f.bucketName}}),d=u();b.upload({Key:f.filePartName+d+".txt",Body:a},function(a,b){if(!a){var d=f.appId,e={};e.lastUploadTime=new Date;e.eventList=[];try{localStorage.setItem("_esri_"+
d+"_MD",g.stringify(e))}catch(h){throw"Local storage can not set item!";}}n=!1;c.emit(a?"Upload Failed":"Upload Successed")})},w=function(a){var b={},c=new Date;b.eventId=a.eventId;b.eventType=a.eventType||"";b.eventData=a.eventData||"";b.eventTime=c;(a=e("_esri_"+f.appId+"_MD"))||(a={});a.eventList||(a.eventList=[]);a.eventList.push(b);localStorage.setItem("_esri_"+f.appId+"_MD",g.stringify(a));if(b=p())n=!0,t(b)},v=function(a){f=a=a||{};if(a.appId){if(a.appVersion){if(a.region){if(a.accessKeyId){if(a.secretAccessKey){if(a.bucketName){if(a.filePartName){f.fileSize=
a.fileSize||1400;f.fileDays=a.fileDays||7;f.fileVersion=a.fileVersion||4;f.buildNumber=a.buildNumber||a.appVersion;a=f;var b=localStorage.getItem("_esri_"+f.appId+"_userGuid");b||(b=u(),localStorage.setItem("_esri_"+f.appId+"_userGuid",b));a.userId=b;return!0}throw"Please set filePartName!";}throw"Please set bucketName!";}throw"Please set secretAccessKey!";}throw"Please set accessKeyId!";}throw"Please set region!";}throw"Please set appVersion!";}throw"Please set appId!";},x=function(){var a=new m,
b="test_localstorage_available_"+Date.now();try{localStorage.setItem(b,b);var c=localStorage.getItem(b);localStorage.removeItem(b);b!==c?a.reject("LocalStorage Failed"):a.resolve(!0)}catch(d){a.reject("LocalStorage Failed")}return a.promise},B=function(a){var b=document.createElement("script");b.type="text/javascript";var c=new m;b.readyState?b.onreadystatechange=function(){if("loaded"==b.readyState||"complete"==b.readyState)b.onreadystatechange=null,c.resolve(!0)}:(b.onload=function(){c.resolve(!0)},
b.onerror=function(){c.reject("Network Failed")});b.src=a;document.getElementsByTagName("head")[0].appendChild(b);return c.promise},A=function(){var a=localStorage.getItem("_esri_"+f.appId+"_ifParticipate");a?"false"===a?a=!1:"true"===a&&(a=!0):(localStorage.setItem("_esri_"+f.appId+"_ifParticipate",!0),a=!0);return a};c.beginLogging=function(b){v(b)&&a(d([x(),B("https://sdk.amazonaws.com/js/aws-sdk-2.6.11.min.js"),A()]),function(){var a=e("_esri_"+f.appId+"_PD"),b=new Date;if(a){if(!a.appId||a.appId!=
f.appId)a.appId=f.appId;if(!a.appVersion||a.appVersion!=f.appVersion)a.appVersion=f.appVersion;a.userGUID||(a.userGUID=u());a.createTime||(a.createTime=b);if(!a.fileSize||a.fileSize!=f.fileSize)a.fileSize=f.fileSize;if(!a.fileDays||a.fileDays!=f.fileDays)a.fileDays=f.fileDays;if(!a.fileVersion||a.fileVersion!=f.fileVersion)a.fileVersion=f.fileVersion}else a={},a.appId=f.appId,a.appVersion=f.appVersion,a.userGUID=f.userId,a.createTime=b,a.fileSize=f.fileSize,a.fileDays=f.fileDays,a.fileVersion=f.fileVersion;
localStorage.setItem("_esri_"+f.appId+"_PD",g.stringify(a));h=!0;"undefined"!==typeof Storage?(a=sessionStorage.getItem("_esri_"+f.appId+"_startUpNotRecorded"),void 0==a?(a=!0,sessionStorage.setItem("_esri_"+f.appId+"_startUpNotRecorded",!0)):"false"==a?a=!1:"true"==a&&(a=!0)):a=!1;a&&(a={eventId:"AppInstantiated",eventType:"Startup"},a.eventData=f.buildNumber,c.logEvent(a),sessionStorage.setItem("_esri_"+f.appId+"_startUpNotRecorded",!1))},function(a){c.emit(a)})};c.logEvent=function(a){if(h&&A())if(a=
a||{},a.eventId)n?setTimeout(function(){w(a)},2E3):w(a);else throw"Please set eventId!";};c.endLogging=function(){c.logEvent({eventId:"Shutdown",eventType:"Shutdown"})};return c})},"esriPBI/config":function(){define([],function(){return{version:"1.0",buildNumber:"1.0.0.55"}})},"esriPBI/telemetry/telemetryConfig":function(){define([],function(){return{appId:"M4PBI",fileSize:5E3,fileDays:7,region:"us-west-2",accessKeyId:"AKIAJT5WT6654SFUGOCQ",secretAccessKey:"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",
bucketName:"arcgis-m4pbi",filePartName:"M4PBI_",fileVersion:4}})},"esriPBI/adapters/ArcGISAdapter":function(){define(["dojo/_base/declare","./_Adapter"],function(g,m){return g(m,{settings:{locateFeaturesBatchSize:100,identityManagerTokenValidity:20160,ignoreProtocolErrors:!1,locationProvidersUrl:"la.arcgis.com/common/locationproviders",mapEnrichmentCategoriesUrl:"la.arcgis.com/common/enrichment",portalUrl:"https://www.arcgis.com",serviceProxy:{geocode:"https://utility.arcgis.com/usrsvcs/appservices/L7zl5sI0W1hBHWRI/rest/services/World/GeocodeServer",
geoenrich:"https://utility.arcgis.com/usrsvcs/appservices/SUOoNltyouZ2FggT/rest/services/World/GeoenrichmentServer",serviceArea:"https://utility.arcgis.com/usrsvcs/appservices/xCJ6Q2QYR91qjJhF/rest/services/World/ServiceAreas/NAServer/ServiceArea_World"}}})})},"esriPBI/adapters/DataAdapter":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array esri/TimeExtent ./_Adapter ../generatefeatures/LPFactory ../utils/wellUtils ../formatUtils".split(" "),function(g,m,a,b,d,c,h,n){function f(b,
c){var d=[],e={},f=m.getObject("categories.0.values.length",null,b);if(f=c.size?Math.min(c.size,f):f)for(var h=0;h<f;h++){e={};if(b.categories)for(var g=0;g<b.categories.length;g++){var n=b.categories[g],C=n.source,z=n.values,F=C.displayName;F||(F=n.identityFields[C.index].ref);e[F]="string"===typeof z[h]&&(!C.roles||!C.roles.Location)?dojox.html.entities.encode(z[h]):z[h]instanceof Date?+new Date(z[h]):z[h]}if(b.values)for(g=0;g<b.values.length;g++)z=b.values[g],C=z.source,z=z.values,F=C.displayName,
F||(F=z.identityFields[C.index].ref),e[F]=z[h];e.ROWID=h;d.push(e)}if(c.distictField){var H=[],z=[];a.forEach(d,function(b){-1===a.indexOf(z,b[c.distictField])&&(H.push(b),z.push(b[c.distictField]))});return H.slice(0,p)}return d}function e(a){a=a&&a.replace(/\\/g,"");switch(a){case "yyyy":return"year";case "MMM-yy":return"shortMonthYear";case "MMMM yyyy":return"longMonthYear";case "MM/dd/yyyy HH:mm:ss":case "MM/dd/yyyy %H:mm:ss":case "%M/%d/yyyy HH:mm:ss":case "%M/%d/yyyy %H:mm:ss":return"shortDateLongTime24";
case "MM/dd/yyyy hh:mm:ss tt":case "MM/dd/yyyy %h:mm:ss tt":case "%M/%d/yyyy hh:mm:ss tt":case "%M/%d/yyyy %h:mm:ss tt":case "G":return"shortDateLongTime";case "MM/dd/yyyy HH:mm":case "MM/dd/yyyy %H:mm":case "%M/%d/yyyy HH:mm":case "%M/%d/yyyy %H:mm":return"shortDateShortTime24";case "MM/dd/yyyy hh:mm tt":case "MM/dd/yyyy %h:mm tt":case "%M/%d/yyyy hh:mm tt":case "%M/%d/yyyy %h:mm tt":return"shortDateShortTime";case "dddd, MMMM %d, yyyy":case "dddd, MMMM dd, yyyy":case "dddd, %d MMMM, yyyy":case "dddd, dd MMMM, yyyy":return"longDate";
case "dd-MMM-yy":case "%d-MMM-yy":return"dayShortMonthYear";case "MMMM dd, yyyy":case "MMMM %d, yyyy":case "dd MMMM, yyyy":case "%d MMMM, yyyy":return"longMonthDayYear";case "MM/dd/yyyy":case "%M/%d/yyyy":case "%M/dd/yyyy":case "MM/%d/yyyy":return"shortDate";case "%H:mm":case "HH:mm":case "HH:%m":case "%H:%m":return"shortTime24";case "%H:mm:ss":case "HH:mm:ss":case "%H:%m:ss":case "%H:%m:%s":case "%H:mm:%s":case "HH:%m:%s":return"longTime24";case "%h:mm tt":case "hh:mm tt":case "%h:%m tt":case "hh:%m tt":return"shortTime";
case "%h:mm:ss tt":case "hh:mm:ss tt":case "%h:%m:ss tt":case "%h:%m:%s tt":case "%h:mm:%s tt":case "hh:%m:%s tt":return"longTime";default:return"shortDateShortTime"}}var p=300;return g([d],{fieldWellInfo:null,previousFieldWellInfo:null,constructor:function(a){m.mixin(this,a||{})},setDataView:function(a){this.dataView=a;this.previousFieldWellInfo=this.fieldWellInfo;this.previousColumnsInfo=this.columnsInfo;this.fieldWellInfo=this.getFieldWellInfo();this.columnsInfo=this.getColumnsInfo()},getFieldWellChange:function(){return h.getFieldWellChange(this)},
getColumnsInfo:function(){if(this.dataView){var b=this.dataView.metadata;return b?a.map(b.columns,function(a){return{displayName:a.displayName,queryName:a.queryName,func:a.expr.func}}):[]}throw Error("dataView not ready");},getFieldWellInfo:function(){if(this.dataView){var b=this.dataView.categorical,c={Location:[],Latitude:[],Longitude:[],Tooltips:[],Size:[],Color:[],Time:[]},d=[];b.categories&&(d=d.concat(a.map(b.categories,function(a){return a.source})));b.values&&(d=d.concat(a.map(b.values,function(a){return a.source})));
a.forEach(d,function(a){for(var b in a.roles)a.roles[b]&&("Tooltips"===b||"Tooltips"!==b&&0===c[b].length)&&c[b].push({displayName:a.displayName,queryName:a.queryName,func:a.expr.func,isNumeric:a.type.numeric,isDateTime:a.type.dateTime})});return c}throw Error("dataView not ready");},getLocationProvider:function(){if(this.dataView)return 1===this.fieldWellInfo.Latitude.length&&1===this.fieldWellInfo.Longitude.length?c.coordinateLP(this.fieldWellInfo.Longitude[0].displayName,this.fieldWellInfo.Latitude[0].displayName):
1===this.fieldWellInfo.Location.length?c.fromMetadata(this.dataView.metadata)||c.fromGuess(this.fieldWellInfo.Location[0].displayName,this.app.layoutManager.layout)||c.fromDefault(this.fieldWellInfo.Location[0].displayName):null;throw Error("dataView not ready");},getFields:function(){if(this.dataView)return a.map(this.dataView.metadata.columns,function(a){var b,c;a.type.integer?(b="esriFieldTypeInteger",c=n.formatCurrency(a.format)||{places:0,digitSeparator:!0}):a.type.text?b="esriFieldTypeString":
a.type.numeric?(b="esriFieldTypeDouble",c=a.format?-1<a.format.indexOf("%")?{pattern:a.format}:n.formatCurrency(a.format)||{places:2,digitSeparator:!0}:{places:2,digitSeparator:!0}):a.type.dateTime?(b="esriFieldTypeInteger",c={dateFormat:e(a.format)}):b="esriFieldTypeString";return{name:a.displayName,alias:a.displayName,type:b,format:c}});throw Error("dataView not ready");},queryCount:function(){if(this.dataView)return m.getObject("categories.0.values.length",null,this.dataView.categorical)||0;throw Error("dataView not ready");
},query:function(a,b){if(this.dataView)return f(this.dataView.categorical,{size:a,distictField:b});throw Error("dataView not ready");},queryTimeExtent:function(){if(this.fieldWellInfo.Time){var c,d=this.fieldWellInfo.Time;hasTime=0<d.length&&d[0].isDateTime;a.some(this.dataView.categorical.categories,function(a){var e=a.source.displayName;if(hasTime&&e===d[0].displayName&&!c)return a=a.values,c=new b(new Date(Math.min.apply(null,a)),new Date(Math.max.apply(null,a))),!0});return c}return null},getClassBreaksCapabilities:function(){return{sizeField:m.getObject("0.displayName",
!1,this.fieldWellInfo.Size),colorField:m.getObject("0.displayName",!1,this.fieldWellInfo.Color)}}})})},"esriPBI/generatefeatures/LPFactory":function(){define(["dojo/_base/array","dojo/string","dojo/i18n!./nls/generatefeatures","../layout/_Layout","../utils/codeColumns"],function(g,m,a,b,d){function c(a){return{type:"US.States",field:a,sourceCountry:"US"}}function h(a){return{type:"US.ZIP5",field:a,sourceCountry:"US"}}function n(a){return{type:"US.Counties",field:a,sourceCountry:"US"}}function f(a){return{type:"countries",
field:a,sourceCountry:"world"}}function e(a){return{type:"SingleLineAddress",field:a,sourceCountry:"world"}}function p(a,b){var c=a&&a.toLowerCase(),d=null;g.some(b,function(b){var e=c.indexOf(b);return-1!=e?(d=a.substring(e,e+b.length),!0):!1});return d}return{fromMetadata:function(a){for(var b=a.columns,p=0;p<b.length;p++)if(a=b[p],a.roles.Location)return a.type.geography&&a.type.geographyType?(b=a.type.geographyType,b.stateOrProvince?c(a.displayName):b.postalCode?(-1===g.indexOf(d.columns,a.displayName)&&
d.columns.push(a.displayName),h(a.displayName)):b.county?n(a.displayName):b.country?f(a.displayName):b.address?e(a.displayName):b.city?e(a.displayName):b.continent?e(a.displayName):b.place?e(a.displayName):b.region?e(a.displayName):null):null},fromGuess:function(d,g){var t=null,w=[];if(d){var v=p(d,["city","cities"]),x=p(d,"zip;zipcode;zips;zipcodes;zip code;zip codes;postal code;postal codes".split(";")),B=p(d,["county","counties"]),A=p(d,["state","states"]),C=p(d,["countries","country"]);v&&(w.push(v),
t=e(d));x&&(w.push(x),1===w.length&&(t=h(d)));B&&(w.push(B),1===w.length&&(t=n(d)));A&&(w.push(A),1===w.length&&(t=c(d)));C&&(w.push(C),1===w.length&&(t=f(d)));1<w.length&&(w=m.substitute(a.multipleFieldNamesFound,{fieldNamesFound:w.join(),fieldNameUsed:w[0]}),g.showMessage("",w,b.MessageTypes.info))}return t},fromDefault:function(a){return e(a)},coordinateLP:function(a,b){return{type:"XY",xField:a,yField:b}}}})},"esriPBI/layout/_Layout":function(){define(["dojo/_base/declare","dijit/_WidgetBase",
"../extensions/_ExtensionMixin"],function(g,m,a){g=g([m,a],{tools:null,toolContainers:null,app:null,getMapNode:function(){},showWidget:function(){},showMessage:function(){},showSignIn:function(){},toJson:function(){return this.inherited(arguments)}});g.MessageTypes={warning:"warning",info:"info",error:"error",confirm:"confirm",security:"security"};return g})},"esriPBI/extensions/_ExtensionMixin":function(){define(["dojo/_base/declare"],function(g){return g(null,{toJson:function(){return{name:this.name,
extensionPackName:this.extensionPackName}}})})},"esriPBI/utils/codeColumns":function(){define(function(){return{columns:[]}})},"esriPBI/utils/wellUtils":function(){define(["dojo/_base/array","dojo/json"],function(g,m){function a(b,c){if("function"===typeof b||"function"===typeof c)throw Error("not supported");if(b&&!c||!b&&c)return!1;if(typeof b===typeof c){if("object"===typeof b){if(b instanceof Array&&c instanceof Array){if(b.length===c.length){if(0===b.length)return!0;for(var d,h=0;h<b.length;h++)if(d=
a(b[h],c[h]),!d)return!1;return!0}return!1}if(b instanceof Array&&!(c instanceof Array)||c instanceof Array&&!(b instanceof Array))return!1;for(h in b)if(d=a(b[h],c[h]),!d)return!1;return!0}return b===c}return!1}function b(a){for(var b=[],c=[],d=0;d<a.length;d++){var h=a[d],u=m.stringify(h);-1===g.indexOf(c,u)&&(b.push(h),c.push(u))}return b}function d(a){a=[].concat(a.Color).concat(a.Size).concat(a.Tooltips);return 0===a.length?!0:g.some(a,function(a){return"undefined"===typeof a.func})}function c(c,
d){if(c.previousFieldWellInfo){var e=g.filter(g.map(d,function(d){var e;e=b(c.previousFieldWellInfo[d]);d=b(c.fieldWellInfo[d]);e.length<d.length?(e=c.previousColumnsInfo?!a(c.previousColumnsInfo,c.columnsInfo):!0,e=e?h.DRAG_IN_NEW_FIELD:h.DRAG_IN_DUPLICATED_FIELD):e=e.length>d.length?h.REMOVE_FIELD:e.length===d.length?a(e,d)?h.NO_CHANGE:h.CHANGE_AGGREGATION_METHOD:void 0;return e}),function(a){return a!==h.NO_CHANGE});return 0===e.length?h.NO_CHANGE:e[0]}return h.DRAG_IN_NEW_FIELD}var h={DRAG_IN_NEW_FIELD:1,
DRAG_IN_DUPLICATED_FIELD:2,REMOVE_FIELD:3,CHANGE_AGGREGATION_METHOD:4,CHANGE_FIELD_ORDER:5,NO_CHANGE:6};return{ChangeType:h,getFieldWellChange:function(a){var b;b=a.previousFieldWellInfo?d(a.previousFieldWellInfo)!==d(a.fieldWellInfo):!0;var e=c(a,["Location","Latitude","Longitude"]);if(e!==h.NO_CHANGE)return{fieldWell:"Location",changeType:e,aggregationnessChanged:b};e=c(a,["Color","Size"]);if(e!==h.NO_CHANGE)return{fieldWell:"ColorSize",changeType:e,aggregationnessChanged:b};e=c(a,["Tooltips"]);
return e!==h.NO_CHANGE?{fieldWell:"Tooltips",changeType:e,aggregationnessChanged:b}:{fieldWell:null}}}})},"esriPBI/adapters/StorageAdapter":function(){define(["dojo/_base/declare","dojo/Deferred","dojo/_base/lang","./_Adapter"],function(g,m,a,b){g=g([b],{supports:null,settings:null,_value:null,constructor:function(a){a.persistedData&&(this._persistedData=a.persistedData)},postscript:function(){this.supports=a.mixin({read:!0,write:!0,remove:!0,version:"1.1"},this.supports);this.settings=a.mixin({managers:{behavior:!0,
extension:!0,layout:!0,map:!0,arcgis:!0,symbol:!0,tool:!0}},this.settings)},set:function(a,b){var h=new m;this._value!==b?(this.host.persistProperties&&this.host.persistProperties({merge:[{objectName:"mapObject",selector:null,properties:{value:b}}]}),this._value=b,h.resolve()):h.resolve(1);return h.promise},get:function(){if(this._persistedData){var a=new m;a.resolve(this._persistedData);return a.promise}},remove:function(){}});g.Scope={APP:"global",USER:"user"};return g})},"esriPBI/managers/ToolManager":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/promise/all dojo/when dojo/Stateful dojox/uuid/generateRandomUuid ../extensions/tools/_Tool ../store/TreeStore ../utils/logger! ../utils/nlsHelper ./_CommandManager".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s){function u(a,c){var h=function(a,f){if(a)if(a.tools){var g;if(g=a.hasOwnProperty("id")&&!f?{id:a.id,_type:"collection"}:c.createGroup({id:a.id,label:a.label,iconClass:a.iconClass||null}).then(function(a){return a}))return b(m.map(a.tools,function(b){return h(b,a)})).then(function(a){return d(g,function(b){b._children=m.filter(a,function(a){return a});return b})})}else return c.createTool(a).otherwise(function(a){e.error("failed to create tool",a)})},g=m.map(a,function(a){return h(a)});
return b(g).then(function(a){function b(a){a&&(a.observe(function(a,f,h){a&&(a.hasOwnProperty(d.childProperty)?-1<h&&-1<f?e.debug("insertedInto \x3e -1 \x26\x26 removedFrom \x3e -1"):-1<h?a._observe=b(d.getChildren(a)):-1<f&&a._observe&&(a._observe.remove(),a._observe=null):a.isInstanceOf&&a.isInstanceOf(n)&&(-1<f?a.disconnect():-1<h&&c._connect(a)))}),a.forEach(function(a){b(d.getChildren(a))}))}var d=new f({idProperty:"id",childProperty:"_children",data:a});b(d.getChildren());return d})}return g(s,
{_type:"tool",tools:null,toJson:function(){var b=this.tools,c=function(d){if(d){var e=[];d.forEach(function(d){var f={tools:c(b.getChildren(d))};"collection"===d._type?f.id=d.id:"group"===d._type?a.mixin(f,d.toJson()):d.isInstanceOf&&d.isInstanceOf(n)&&(f=d.toJson());f&&e.push(f)});return e}};return c(this.tools.getChildren())},initialize:function(a){var b=this,c=this.getInherited(arguments),e=d(a||this.adapter.getToolCollections(),function(a){return u(a,b)},function(){return u(null,b)});return d(e,
function(a){b.set("tools",a);return c.apply(b)})},createTool:function(a){var b=this;a=this._instantiate(a);a.then(function(a){b.emit("tool-created",a)});a.otherwise(function(a){b.emit("tool-creation-failed",a)});return a},createGroup:function(a){return p.localize(a).then(function(){return(new g(c,{_type:"group",_label:a.label,_labelSetter:function(a){this.label=this._label=a},postscript:function(){this.inherited(arguments);this.id||(this.id=h())},toJson:function(){return{label:this._label,id:this.id,
iconClass:this.iconClass}}}))(a)})},_traverse:function(a){var b=this.tools,c=function(d){m.forEach(d,function(d){d.isInstanceOf&&d.isInstanceOf(n)?a(d):c(b.getChildren(d))})};c(b.query())},_connect:function(a){var b=this;return this.inherited(arguments,[a,function(c){b.emit("tool-error",{error:c,tool:a})}])},getTool:function(a,b){function c(f){m.forEach(f,function(f){e.getChildren(f)?c(e.getChildren(f)):f.name===a&&f.extensionPackName===b&&(d=f)})}var d,e=this.tools;c(this.tools.query());return d}})})},
"dojox/uuid/generateRandomUuid":function(){define(["./_base"],function(){dojox.uuid.generateRandomUuid=function(){function g(){for(var a=Math.floor(Math.random()%1*Math.pow(2,32)).toString(m);8>a.length;)a="0"+a;return a}var m=16,a=g(),b=g(),b=b.substring(0,4)+"-4"+b.substring(5,8),d=g(),d="8"+d.substring(1,4)+"-"+d.substring(4,8),c=g();return a=(a+"-"+b+"-"+d+c).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(g){g.getObject("uuid",
!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(g,a){if(!g)throw a||(a="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(a);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};dojox.uuid.isValid=function(m){m=m.toString();
var a=g.isString(m)&&36==m.length&&m==m.toLowerCase();if(a){m=m.split("-");var a=5==m.length&&8==m[0].length&&4==m[1].length&&4==m[2].length&&4==m[3].length&&12==m[4].length,b;for(b in m)var d=parseInt(m[b],16),a=a&&isFinite(d)}return a};dojox.uuid.getVariant=function(g){if(!dojox.uuid._ourVariantLookupTable){var a=dojox.uuid.variant,b=[];b[0]=a.NCS;b[1]=a.NCS;b[2]=a.NCS;b[3]=a.NCS;b[4]=a.NCS;b[5]=a.NCS;b[6]=a.NCS;b[7]=a.NCS;b[8]=a.DCE;b[9]=a.DCE;b[10]=a.DCE;b[11]=a.DCE;b[12]=a.MICROSOFT;b[13]=a.MICROSOFT;
b[14]=a.UNKNOWN;b[15]=a.UNKNOWN;dojox.uuid._ourVariantLookupTable=b}g=g.toString();g=g.charAt(19);g=parseInt(g,16);dojox.uuid.assert(0<=g&&16>=g);return dojox.uuid._ourVariantLookupTable[g]};dojox.uuid.getVersion=function(g){dojox.uuid.assert(dojox.uuid.getVariant(g)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");g=g.toString();g=g.charAt(14);return parseInt(g,16)};dojox.uuid.getNode=function(g){dojox.uuid.assert(dojox.uuid.getVersion(g)==dojox.uuid.version.TIME_BASED,
"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");g=g.toString();return g.split("-")[4]};dojox.uuid.getTimestamp=function(g,a){dojox.uuid.assert(dojox.uuid.getVersion(g)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");g=g.toString();a||(a=null);switch(a){case "string":case String:return dojox.uuid.getTimestamp(g,Date).toUTCString();case "hex":var b=g.split("-"),d=b[0],c=b[1],b=b[2],b=b.slice(1),d=b+c+d;dojox.uuid.assert(15==d.length);return d;
case null:case "date":case Date:return b=g.split("-"),d=parseInt(b[0],16),c=parseInt(b[1],16),b=parseInt(b[2],16)&4095,b=(b<<16)+c,b*=4294967296,b+=d,new Date(b/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+a)}};return dojox.uuid})},"esriPBI/extensions/tools/_Tool":function(){define(["dojo/_base/declare","../_Command"],function(g,m){return g([m],{enabled:!0,visible:!0,iconClass:"",tooltip:"",_tooltipGetter:function(){return this.tooltip||
this.get("description")||this.get("label")||""},showTooltip:!0,toJson:function(){var a=this.inherited(arguments);this.iconClass&&(a.iconClass=this.iconClass);return a}})})},"esriPBI/extensions/_Command":function(){define("dojo/_base/declare dojo/Stateful dojo/Evented ./_ExtensionMixin dojo/Deferred dojox/uuid/generateRandomUuid dijit/Destroyable ../utils/logger!".split(" "),function(g,m,a,b,d,c,h,n){return g([m,b,h,a],{"-chains-":{initialize:"after",destroy:"after"},label:null,_labelSetter:function(a){this._created&&
(this._storeLabel=!0);this.label=a},description:null,_descriptionSetter:function(a){this._created&&(this._storedescription=!0);this.description=a},initialize:function(a){this.app=a},destroy:function(){this.app=null;this.inherited(arguments)},postscript:function(){this.inherited(arguments);this.id||(this.id=c());this._created=!0},execute:function(){},toJson:function(){var a=this.inherited(arguments);this._storeLabel&&(a.label=this.label);this._storedescription&&(a.description=this.description);a.id=
this.id;return a},clone:function(){return new this.constructor(this.toJson())},connect:function(a){clearTimeout(this._destroyTimer);if(!this._initialized)return this._initialized=!0,this.initialize(a)},disconnect:function(){var a=this;this._destroyTimer=setTimeout(function(){a.destroy()},0)},on:function(){return this.own(this.inherited(arguments))},onError:function(a){n.error("Error in command",a,this);this.emit("error",a)}})})},"esriPBI/utils/logger":function(){define(["../adapters/LogAdapter"],
function(g){var m=!1,a=new g,b={debug:0,info:1,warn:2,error:3},d={},c=[],h=function(c,f){var h=b[a.settings.defaultLevel];d[c]&&(h=d[c]);return f>=h},n=function(c){if(c&&!d.hasOwnProperty(c))if(a.settings.levels[c])d[c]=b[a.settings.levels[c]];else{var f=[],h;for(h in a.settings.levels)a.settings.levels.hasOwnProperty(h)&&f.push(h);f.sort();h=!1;for(var g=f.length-1;!h&&0<=g;){var n=f[g].replace("*","");0<=c.indexOf(n)&&(h=!0,d[c]=b[a.settings.levels[f[g]]]);g--}}},f=function(d){d&&(m?n(d):c.push(d));
return{init:function(b){a=b;m=!0;for(b=c.pop();b;)n(b),b=c.pop()},isInitialized:function(){return m},debug:function(){h(d,b.debug)&&a.log("debug",Array.prototype.slice.call(arguments),d);return Array.prototype.slice.call(arguments,0)},info:function(){h(d,b.info)&&a.log("info",Array.prototype.slice.call(arguments),d);return Array.prototype.slice.call(arguments,0)},warn:function(){h(d,b.warn)&&a.log("warn",Array.prototype.slice.call(arguments),d);return Array.prototype.slice.call(arguments,0)},error:function(){h(d,
b.error)&&a.log("error",Array.prototype.slice.call(arguments),d);return Array.prototype.slice.call(arguments,0)}}};return{dynamic:!0,load:function(a,b,c){a=b&&b.module&&b.module.mid;b=f(a);a||b.debug("Logger: can't figure out mid");c(b)}}})},"esriPBI/store/TreeStore":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/store/util/QueryResults","dojo/i18n!./nls/store"],function(g,m,a,b){var d=function(a){var b=[];this.notify=function(d,f,e){for(var g=0;g<b.length;g++)b[g]&&b[g].call(null,
d,f,e);-1<f&&a.splice(f,1);-1<e&&a.splice(e,0,d)};this.add=function(a){return b.push(a)};this.remove=function(a){a=m.indexOf(b,a);-1<a&&b.splice(a,1);return b.length}};return function(c){function h(a,b){u[a[x]]=a;b?t[a[x]]=b:delete t[a[x]];var c=a[B];if(c)for(var d=0;d<c.length;d++)h(c[d],a)}function n(){if(!u){u={};t={};for(var a=0;a<v.length;a++)h(v[a])}}function f(a,b,c,d){if(a=w[a?a[x]:""])for(var e=0;e<a.length;e++)a[e].notify(b,c,d)}function e(b){var c=[],c=b?b[B]&&b[B].slice(0):v.slice(0),
e=a(c);if(e){var f;e.observe=function(a){function c(){if(0===f.remove(a)){var b=m.indexOf(g,f);g&&g.splice(b,1)}}if(!f){var h=b?b[x]:"",g=w[h];g||(g=[],w[h]=g);f=new d(e);g.push(f)}f.add(a);return{cancel:c,remove:c}}}return e}function p(a){var b=t[a[x]],c=b?b[B]:v,d=m.indexOf(c,a);c.splice(d,1);f(b,a,d,-1)}function s(a){var b=a[x];delete u[b];delete t[b];if(a=a[B])for(b=0;b<a.length;b++)s(a[b])}var u,t,w={},v=c&&c.data||[],x=c&&c.idProperty||"id",B=c&&c.childProperty||"children";this.idProperty=x;
this.data=v;this.query=function(){return e()};this.getChildren=function(a){return e(a)};this.getParent=function(a){n();return t[a[x]]};this.get=function(a){n();return u[a]};this.put=function(a,c){n();var d=a[x],e=c&&c.before,w=c&&c.parent,J=c&&c.overwrite,I=u[d];if(I&&!1===J)throw Error(b.objectWithSameIdExist);if(!I&&!0===J)throw Error(b.noObjectWithSameIdExist);g.isString(e)&&(e=u[e]);a!==e&&(I&&(!e&&!w&&(d=(w=t[d])?w[B]:v,J=m.indexOf(d,I)+1,J<d.length&&(e=d[J])),p(I),s(I)),I=(w=e?t[e[x]]:w)?w[B]:
v,e=m.indexOf(I,e),0>e&&(e=I.length),I.splice(e,0,a),h(a,w),f(w,a,-1,e))};this.getIdentity=function(a){return a[x]};this.mayHaveChildren=function(a){return!!a[B]};this.remove=function(a){n();if(a=u[a])p(a),s(a)};this.add=function(a,b){b||(b={});b.overwrite=!1;this.put(a,b)}}})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(g,m,a){var b=function(d){function c(c){d[c]=function(){var f=arguments,e=a(d,function(a){Array.prototype.unshift.call(f,
a);return b(g[c].apply(g,f))});if("forEach"!==c||h)return e}}if(!d)return d;var h=!!d.then;h&&(d=m.delegate(d));c("forEach");c("filter");c("map");null==d.total&&(d.total=a(d,function(a){return a.length}));return d};m.setObject("dojo.store.util.QueryResults",b);return b})},"esriPBI/utils/nlsHelper":function(){define("dojo/_base/kernel dojo/_base/lang dojo/Deferred dojo/promise/all dojo/string dojo/i18n dojo/i18n!./nls/utils ./jsonHelper ./tryRequire".split(" "),function(g,m,a,b,d,c,h,n,f){function e(a,
b){if(a&&b)for(var c in b)a.hasOwnProperty(c)&&("object"===typeof a[c]?e(a[c],b[c]):a[c]=b[c])}return{localize:function(e){var g=[];n.find(e,function(a){return a.nls_location&&a.nls_property},function(m,t){var w=t[t.length-1],v=n.get(e,t,0,t.length-1),x=new a;c.load(m.nls_location,function(a,c){for(var g=[],n=0;n<a.length;n++)g.push(f(a[n]));b(g).then(function(a){c.apply(null,a)},function(){var a=t.join(".");x.reject(Error(d.substitute(h.failedToResolveProperty,[a,e.id||e.name||h.propertyOfObject])))})},
function(a){v[w]=a[m.nls_property];x.resolve()});g.push(x.promise)});return b(g).then(function(){return e})},override:function(b,d){var f=new a;require(["dojo/i18n!"+b],function(){var a=c.cache[b+"/"+g.locale];a&&e(a,d);f.resolve()});return f.promise}}})},"esriPBI/utils/jsonHelper":function(){define(["dojo/_base/lang"],function(g){return{find:function(m,a,b){function d(h){for(var n in h){c.push(n);var f=h[n];if(f)if(a(f))b(f,c);else{var e;if(e=g.isObject(f))if(e=!g.isFunction(f)){a:{if("object"===
typeof f&&(e=f.constructor&&f.constructor.prototype)){var p=void 0;for(p in e){e=!0;break a}}e=void 0}e=!e}e&&d(f)}c.pop()}}if(m){var c=[];d(m)}},get:function(g,a,b,d){b=b||0;for(d=void 0!==d?b+d:a.length;b<d&&!(g=g[a[b]],null===g||void 0===g);b++);return g}}})},"esriPBI/utils/tryRequire":function(){define(["require","dojo/Deferred","dojo/_base/lang","dojo/i18n!./nls/utils"],function(g,m,a,b){return function(a){var c,h=new m,n=function(e){c&&c.remove();h.reject({message:b.failedToLoadModule,mid:a,
error:e})};c=g.on&&g.on("error",function(b){var f=g.toUrl(a)+".js";b&&b.info&&f===b.info[0]?n(b):(c.remove(),c=null)});try{g([a],function(a){a&&"not-a-module"!==a?h.resolve(a):n(a)})}catch(f){n(f)}return h.promise}})},"esriPBI/managers/_CommandManager":function(){define("dojo/Evented dojo/_base/declare dojo/when dojo/promise/all ./_ExtensionManager ../utils/logger!".split(" "),function(g,m,a,b,d,c){return m([g,d],{connectCommands:function(){var c=this,d=[];this._traverse(function(b){b&&d.push(a(c._connect(b)))});
return b(d)},destroy:function(){this._traverse(function(a){a.disconnect()})},_traverse:function(){},_connect:function(b,d){var f=this,e=function(a){c.error("failed to initialize extension",b,a);try{b.destroy()}catch(d){}};try{return a(b.connect(this.app),function(){b.on("error",d);var a=b.execute;"function"===typeof a&&(b.execute=function(){try{return b.name&&f.emit("tool-execute",b),a.apply(this,arguments)}catch(c){b.onError(c)}})},e)}catch(g){e(g)}}})})},"esriPBI/managers/_ExtensionManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/when dojo/Deferred dojo/promise/all ./_Manager ../utils/jsonHelper ../utils/nlsHelper ../utils/tryRequire ../utils/logger! dojo/i18n!./nls/managers".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s){return g(h,{_instantiate:function(a,c){var h=new d;try{var g=this.app.extensionPackManager,x=a&&g.extensionPacks.get(a.extensionPackName),B=x&&g._getExtensionDefinition(this._type+"s",x,a.name);b(B,function(b){if(b){var d=b.location.replace(/^\.\//,x.name+"/"),d=d.replace(/\.js$/,"");e(d).then(function(d){var e=m.clone(b);delete e.location;e=m.mixin(e,a);n.find(e,function(a){return!!a.nls_location},function(a){a.nls_location=a.nls_location.replace(/^\.\//,x.name+
"/")});f.localize(e).then(function(){var a=new d(e,c);h.resolve(a)},function(b){h.reject({message:s.failedToLocalizeProperties,error:b,properties:e,definition:a})})},function(b){h.reject({message:s.failedToLoadModule,mid:d,error:b,definition:a})})}else h.reject({message:s.couldNotFindDefinition,definition:a})},function(b){h.reject({message:s.failToLoad,error:b,definition:a})})}catch(A){h.reject({message:s.failToLoad,error:A,definition:a})}h.promise.otherwise(function(a){p.error(a)});return h.promise}})})},
"esriPBI/managers/_Manager":function(){define("dojo/_base/declare dojo/_base/lang dojo/when dojo/Deferred dojo/Stateful dojo/Evented".split(" "),function(g,m,a,b,d,c){return g([d,c],{_type:"",adapter:null,registerEventListeners:function(){this.emit(this._type+"-manager-event-listeners-registered")},initialize:function(){this.emit(this._type+"-manager-initialized",this._getInitReference())},_getInitReference:function(){return this.adapter},startup:function(){},destroy:function(){this.emit(this._type+
"-manager-destroyed")},toJson:function(){}})})},"esriPBI/managers/ExtensionPackManager":function(){define("require dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/config dojo/when dojo/promise/all dojo/store/Observable dojo/store/Memory dojo/i18n!./nls/managers esri/request ../utils/logger! ./_Manager".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u){return m(u,{_type:"extension",extensionPacks:null,constructor:function(){this.extensionPacks=new n(new f({idProperty:"name"}));var a=this;
this.extensionPacks.query().observe(function(b,c,d){b&&-1<d&&a._loadPackage(b)})},toJson:function(){return this.extensionPacks.query().map(function(a){return{name:a.name,location:a.location}})},initialize:function(b){var d=this.getInherited(arguments),e=this;return c(b||this.adapter.getExtensionPacks(),function(b){a.forEach(b,function(a){e.extensionPacks.put(a)});return d.apply(e)})},getBehaviorDefinitions:function(a){return this._getExtensionDefinitions("behaviors",a,!0)},getToolDefinitions:function(a){return this._getExtensionDefinitions("tools",
a,!0)},getPictureMarkerSetDefinitions:function(a){return this._getExtensionDefinitions("pictureMarkerSets",a,!1)},_getExtensionDefinitions:function(b,d,e){if(b){var f=this;return c(this._getManifest(d),function(c){if(c)return a.map(c[b],function(a){return f._processExtensionDescription(a,d.name,e)})},function(){return[]})}},_processExtensionDescription:function(a,c,d){a=b.clone(a);d&&a.location&&(a.extensionPackName=c,delete a.location);return a},_getExtensionDefinition:function(a,b,d){if(a&&b&&d)return c(this._getExtensionDefinitions(a,
b),function(a){for(var b=0;b<(a&&a.length);b++){var c=a[b];if(c&&c.name===d)return c}})},_getManifest:function(a){if(a){if(!a._deferredManifest){a._deferredManifest=c(p({url:g.toUrl(a.name+"/manifest.json.txt")}));var b=this;a._deferredManifest.otherwise(function(c){s.error("failed to load extension pack's manifest",c,a);b.emit("extension-pack-loading-failed",{message:e.failedToLoadManifest,error:c,extensionPack:a})})}return a._deferredManifest}},_loadPackage:function(b){if(g.packs&&b.location)if(g.packs.hasOwnProperty(b.name)||
a.some(d.packages,function(a){return a.name===b.name}))s.error("extension pack with same name already loaded into Dojo",b),this.emit("extension-pack-loading-failed",{message:e.extensionPackWithSameNameLoaded,extensionPack:b});else{var c={name:b.name,location:b.location};/^\./.test(c.location)&&(c.location=window.location.pathname.replace(/\/[^/]+$/,"/")+c.location);d.packages.push(c);g.packs[b.name]=c}}})})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],
function(g,m,a,b){g=function(d){function c(b,c){var f=d[b];f&&(d[b]=function(h){var g;"put"===b&&(g=d.getIdentity(h));if(e)return f.apply(this,arguments);e=!0;try{var n=f.apply(this,arguments);a(n,function(a){c("object"==typeof a&&a||h,g)});return n}finally{e=!1}})}var h=[],g=0;d=m.delegate(d);d.notify=function(a,b){g++;for(var c=h.slice(),d=0,e=c.length;d<e;d++)c[d](a,b)};var f=d.query;d.query=function(c,e){e=e||{};var u=f.apply(this,arguments);if(u&&u.forEach){var t=m.mixin({},e);delete t.start;
delete t.count;var w=d.queryEngine&&d.queryEngine(c,t),v=g,x=[],B;u.observe=function(c,f){1==x.push(c)&&h.push(B=function(c,h){a(u,function(a){var p=a.length!=e.count,m,t;if(++v!=g)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var u,G=-1,A=-1;if(void 0!==h){var B=[].concat(a);w&&!c&&(B=w(a));m=0;for(t=a.length;m<t;m++){var z=a[m];if(d.getIdentity(z)==h&&!(0>B.indexOf(z))){u=z;G=m;(w||!c)&&a.splice(m,1);break}}}if(w){if(c&&(w.matches?w.matches(c):
w([c]).length))m=-1<G?G:a.length,a.splice(m,0,c),A=b.indexOf(w(a),c),a.splice(m,1),e.start&&0==A||!p&&A==a.length?A=-1:a.splice(A,0,c)}else c&&(void 0!==h?A=G:e.start||(A=d.defaultIndex||0,a.splice(A,0,c)));if((-1<G||-1<A)&&(f||!w||G!=A)){p=x.slice();for(m=0;a=p[m];m++)a(c||u,G,A)}})});var p={};p.remove=p.cancel=function(){var a=b.indexOf(x,c);-1<a&&(x.splice(a,1),x.length||h.splice(b.indexOf(h,B),1))};return p}}return u};var e;c("put",function(a,b){d.notify(a,b)});c("add",function(a){d.notify(a)});
c("remove",function(a){d.notify(void 0,a)});return d};m.setObject("dojo.store.Observable",g);return g})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(g,m,a){return g("dojo.store.Memory",null,{constructor:function(a){for(var d in a)this[d]=a[d];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:a,get:function(a){return this.data[this.index[a]]},getIdentity:function(a){return a[this.idProperty]},put:function(a,
d){var c=this.data,h=this.index,g=this.idProperty,g=a[g]=d&&"id"in d?d.id:g in a?a[g]:Math.random();if(g in h){if(d&&!1===d.overwrite)throw Error("Object already exists");c[h[g]]=a}else h[g]=c.push(a)-1;return g},add:function(a,d){(d=d||{}).overwrite=!1;return this.put(a,d)},remove:function(a){var d=this.index,c=this.data;if(a in d)return c.splice(d[a],1),this.setData(c),!0},query:function(a,d){return m(this.queryEngine(a,d)(this.data))},setData:function(a){a.items?(this.idProperty=a.identifier||
this.idProperty,a=this.data=a.items):this.data=a;this.index={};for(var d=0,c=a.length;d<c;d++)this.index[a[d][this.idProperty]]=d}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(g){return function(m,a){function b(b){b=g.filter(b,m);var d=a&&a.sort;d&&b.sort("function"==typeof d?d:function(a,b){for(var c,g=0;c=d[g];g++){var n=a[c.attribute],m=b[c.attribute],n=null!=n?n.valueOf():n,m=null!=m?m.valueOf():m;if(n!=m)return!!c.descending==(null==n||n>m)?-1:1}return 0});
if(a&&(a.start||a.count)){var n=b.length;b=b.slice(a.start||0,(a.start||0)+(a.count||Infinity));b.total=n}return b}switch(typeof m){default:throw Error("Can not query with a "+typeof m);case "object":case "undefined":var d=m;m=function(a){for(var b in d){var g=d[b];if(g&&g.test){if(!g.test(a[b],a))return!1}else if(g!=a[b])return!1}return!0};break;case "string":if(!this[m])throw Error("No filter function "+m+" was found in store");m=this[m];case "function":}b.matches=m;return b}})},"esriPBI/managers/DataManager":function(){define(["dojo/_base/declare",
"dojo/when","./_Manager"],function(g,m,a){return g(a,{_type:"data",startup:function(){return m(this.adapter&&this.adapter.initialize())},getDefaultDataAdapter:function(){return this.adapter}})})},"esriPBI/managers/LogManager":function(){define(["dojo/_base/declare","../adapters/LogAdapter","../utils/logger!","./_Manager"],function(g,m,a,b){return g(b,{_type:"log",initialize:function(){a.init(this.adapter);this.inherited(arguments)}})})},"esriPBI/managers/LayoutManager":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/when","./_ExtensionManager"],function(g,m,a,b){return g(b,{_type:"layout",layout:null,toJson:function(){return this.layout&&this.layout.toJson()},initialize:function(b){var c=this,h=this.getInherited(arguments),g=a(b||this.adapter.getLayout(),function(a){if(a)return a=c._instantiate(m.mixin({app:c.app},a),c.srcNodeRef),a.then(function(a){c.emit("layout-created",a)}),a.otherwise(function(a){c.emit("layout-creation-failed",a)}),a});return a(g,function(a){a&&(c.set("layout",a),
a.startup());return h.apply(c)})},_traverse:function(a){a(this.layout)}})})},"esriPBI/managers/MapManager":function(){define("dojo/_base/declare dojo/_base/array dojo/Deferred dojo/when dojo/_base/lang dojo/promise/all dojo/aspect dojo/on dojo/query dojo/dom-attr dojo/string dojo/i18n!./nls/managers ./_Manager ../utils/WebMapHelper ../widgets/MapWrapper/MapWrapper ../utils/selectionUtils ../utils/basemapHelper ../utils/MapUtils ../utils/mapUtility ../config esri/geometry/Extent esri/layers/FeatureLayer".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F){return g(u,{_type:"map",_mapNode:null,popup:null,selectedLayer:null,_selectedLayerSetter:function(a){this.selectedLayer!==a&&(this.selectedLayer=a,this.emit("selected-layer-change",a))},map:null,registerEventListeners:function(){this.inherited(arguments);this.app.arcgisManager.on("portal-loaded",d.hitch(this,this._portalLoaded));this.app.on("data-manager-started",d.hitch(this,this._dataStarted))},_dataStarted:function(a){t.initialize({data:a,dataAdapter:this.app.adapters.data})},
_portalLoaded:function(a){t.initialize({portal:a})},initialize:function(a){var e=this.getInherited(arguments);return c({mapOptions:b(this.adapter.getMapOptions(),function(a){return a},function(){return{}}),mapConfig:a||b(this.adapter.getMapConfiguration(),function(a){return a},function(){return{}})}).then(d.hitch(this,function(a){a.mapOptions&&a.mapOptions.extent&&(a.mapOptions.extent=new z(a.mapOptions.extent));this._mapConfig=a;e.apply(this)}))},startup:function(a){var c=this.getInherited(arguments),
e=this._mapConfig.mapConfig&&this._mapConfig.mapConfig.webmap;if(e)return b(x.checkAndReplaceBasemap(e),d.hitch(this,function(){if(!B.vectorTileSupported){var f=[],h;m.forEach(e.itemData.operationalLayers,function(a){a&&"VectorTileLayer"!==a.layerType&&f.push(a);a&&("VectorTileLayer"===a.layerType&&"Reference Layer"===a.title)&&(h=a.itemId)});e.itemData.operationalLayers=f;B.vectorItemId=h}return b(this._createMap(a),d.hitch(this,c))}));var f=function(a){return"979c6cc89af9449cbeb5342a439c6a76"===
a.itemId||"8b3b470883a744aeb60e5fff0a319ce7"===a.itemId};return b(x.getBasemaps(),d.hitch(this,function(e){e=e.filter(f);this._defaultBasemap={title:e[0].title,itemId:e[0].itemId,baseMapLayers:e[0].layers};return b(this._createMap(a),d.hitch(this,c))}))},_createMap:function(b){if(b&&this._mapConfig){var c=new w;try{var e=this._mapConfig.mapConfig&&this._mapConfig.mapConfig.webmap,f=this._mapConfig.mapConfig&&this._mapConfig.mapConfig.webmapExtensions,h=this._mapConfig.mapOptions,g=this._defaultBasemap;
if(!e)if(g)e={itemData:{baseMap:g}};else throw s.invalidMapConfiguration;h||(this._mapConfig.mapOptions={});if(f&&f.basemapExtent)this._mapConfig.mapOptions.extent=new z(f.basemapExtent);else if(!e.item||!e.item.extent)if((!h||!this._mapConfig.mapOptions.extent)&&this.app.arcgisManager.portal.defaultExtent){var n=this.app.arcgisManager.portal.defaultExtent,p=g&&g.baseMapLayers[0].resourceInfo&&g.baseMapLayers[0].resourceInfo.spatialReference;this._mapConfig.mapOptions.extent=p&&p.wkid!==n.spatialReference.wkid?
new z(g.baseMapLayers[0].resourceInfo.initialExtent):new z(this.app.arcgisManager.portal.defaultExtent)}var m=d.mixin({extItemData:f},e);return c._createMap(m,b,this._mapConfig.mapOptions).then(d.hitch(this,this._mapCreated))}catch(t){return(new a).reject({message:s.failedToCreateMap,error:t,"map-config":this._mapConfig})}}},getPowerBILayer:function(){return this.map?this.map.getLayer("MyLayer"):null},_mapCreated:function(a){var b=this;this.map=a;this._refreshRendererOnDataChange();this.popup=this.map.infoWindow;
if(a=(a=f(".logo-sm",this.map.root)[0])?a:f(".logo-med",this.map.root)[0]){var c=p.substitute(s.AM4PBIVersion,[C.buildNumber]);e.set(a,"title",c)}this.extentConstraint||this._setExtentConstraint();h.before(this.map,"removeLayer",function(a){if(a===b.selectedLayer){for(var c=A.getAllLayers(b.map,!0,!0),d,e=0;e<c.length;e++)if(a===c[e]){d=c[e===c.length-1?e-1:e+1]||c[c.length-1];d===a&&(d=null);break}b.set("selectedLayer",d)}});this.map.on("extent-change",d.hitch(this,function(a){a.delta&&(0!==a.delta.x&&
0!==a.delta.y)&&(a=a.extent.getCenter(),this.extentConstraint.contains(a)||(a.y<this.extentConstraint.ymin?(a.y=this.extentConstraint.ymin,this.map.centerAt(a)):a.y>this.extentConstraint.ymax&&(a.y=this.extentConstraint.ymax,this.map.centerAt(a))),this.app.save())}));this.map.on("extent-change, pan-end",d.hitch(this,function(){var a=this.map.getLayer("MyLayer");a&&"PowerBILayer"===a.type&&a.showFeaturesSelectedInMap()}));h.after(this.map,"onExtentChange",d.hitch(this,function(){setTimeout(d.hitch(this,
function(){var a=this.map.getLayer("MyLayer");a&&"PowerBILayer"===a.type&&a.showFeaturesSelectedInMap()},0))}));this.fallbackForReferenceLayer(this.map,this.app.arcgisManager.portal.portalUrl);this.emit("map-created",this.map)},fallbackForReferenceLayer:function(a,b){var c;m.forEach(a.layerIds,function(b){b=a.getLayer(b);if(("esri.layers.VectorTileLayer"===b.declaredClass||"esri.layers.ArcGISDynamicMapServiceLayer"===b.declaredClass)&&!b._basemapGalleryLayerType)c=b});if(c||B.vectorItemId)B.vectorTileSupported?
"esri.layers.ArcGISDynamicMapServiceLayer"===c.declaredClass?B.getRelatedVectorItem(b,c.itemId,a).then(function(b){a.addLayers(b);a.removeLayer(c)}):B.getRelatedItem(b,c.itemId).then(function(b){a.addLayers(b)}):B.vectorItemId&&B.getRelatedItem(b,B.vectorItemId).then(function(b){a.addLayers(b)})},recenterMap:function(a){var b=n(this.map,"resize",d.hitch(this,function(){b.remove();var c=setTimeout(d.hitch(this,function(){clearTimeout(c);this.map.centerAt(a)}),600)}))},_setExtentConstraint:function(){for(var a=
0;a<this.map.layerIds.length;a++)if(lyr=this.map.getLayer(this.map.layerIds[a]),"basemap"===lyr._basemapGalleryLayerType){this.extentConstraint=lyr.fullExtent;break}},_mapFailed:function(){this.emit("map-creation-failed")},toJson:function(){var a=this.map;if(a)return t.serializeMap(a)},_refreshRendererOnDataChange:function(){},"^map-created":function(){},"^map-creation-failed":function(){},"^selected-layer-change":function(){}})})},"esriPBI/utils/WebMapHelper":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/connect dojo/_base/Color dojo/dom-construct dojo/on dojo/Deferred dojo/when dojo/promise/all dojo/aspect dojo/i18n!./nls/utils esri/map esri/request esri/lang esri/layers/FeatureLayer esriPBI/layers/PowerBILayer esri/layers/VectorTileLayer esri/arcgis/utils esri/symbols/jsonUtils esri/symbols/PictureMarkerSymbol esri/layers/ServiceGeneratedFeatureCollection ./ProjectionHelper ./Random ../widgets/Popup/PopupTemplate ../serialize/LayerUtils ./layerUtils ./MapUtils ./mapUtility esri/dijit/Attribution ../extensions/Extensions".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M,L,G){var O=g(null,{_webMapVersion:"1.8",constructor:function(a){this.portal=a&&a.portal;this.dataAdapter=a&&a.dataAdapter},createMap:function(a,b,c){var d=new n,e=this;"string"===typeof a?A.getItem(a).then(function(a){a.item&&a.itemData?e._createMap(a,b,c).then(function(a){d.resolve(a)},function(a){d.reject(a)}):d.reject(s.failedToLoadWebmap)},function(a){d.reject(a)}):e._createMap(a,b,c).then(function(a){d.resolve(a)},function(a){d.reject(a)});
return d.promise},addLayer:function(a,b){return this.mergeWebmapOperationalLayers({item:{extent:[[-132,21],[-58,52]]},itemData:{operationalLayers:[b],version:this._webMapVersion}},a)},serializeMap:function(b){var c=new n;e({item:this._createItem(b),itemInfo:this.createWebMap(b,{saving:!0}),extItemInfo:this.createWebMapExtension(b,{saving:!0})}).then(function(d){d.item&&(d.item._id=b.itemId);d={webmap:{item:d.item,itemData:d.itemInfo},webmapExtensions:a.mixin({mapSettings:b.settings&&b.settings.toJson()},
d.extItemInfo)};var e=G.getProperty(b,"infographics");e&&(d.webmapExtensions.infographics=e);b.spatialReference.wkid!==L.getLayers(b)[0].spatialReference.wkid&&(d.webmapExtensions.basemapExtent=b.extent.toJson());c.resolve(d)},function(a){c.reject(a)});return c.promise},createWebMapItem:function(a,b){var c=new n;e({item:this._createItem(a),itemInfo:this.createWebMap(a,b),extItemInfo:this.createWebMapExtension(a,b)}).then(function(a){a.itemInfo&&(a.itemInfo.operationalLayers=K.combineLayers(a.itemInfo.operationalLayers,
a.extItemInfo.operationalLayers));c.resolve({item:a.item,itemData:a.itemInfo})},function(a){c.reject(a)});return c.promise},createWebMap:function(b,c){var d=this,f=new n;c=a.mixin(c,{saveExtensions:!1});e(this._createOperationalLayers(b,c)).then(function(a){f.resolve({operationalLayers:a,baseMap:d._createBaseMap(b,c),version:d._webMapVersion})},function(a){f.reject(a)});return f.promise},createWebMapExtension:function(b,c){var d=new n;c=a.mixin(c,{saveExtensions:!0});e(this._createOperationalLayers(b,
c)).then(function(a){d.resolve({operationalLayers:a})},function(a){d.reject(a)});return d.promise},mergeWebmapOperationalLayers:function(a,b,d){var e=new n;d=d||{};d.baseMap=this._createBaseMap(b,{useOnlyFirstLayerAsBasemap:!0});d.mapLayerIds=L.getLayerIds(b);d.ignorePopups=!1;d.usePopupManager=!0;d.createDefaultInfoTemplate=!0;d.targetSpatialReference=b.spatialReference;var f=c.create("div",{style:{display:"none"}},window.document.body);this.createMap(a,f,d).then(function(a){if(a&&a.map){A.getLegendLayers(a);
var d=L.getLayers(a.map),h=[];m.forEach(d,function(a){});a.map.removeAllLayers();a.itemInfo&&(a.itemInfo.itemData&&a.itemInfo.itemData.operationalLayers)&&m.forEach(h,function(b){m.forEach(a.itemInfo.itemData.operationalLayers,function(a){b.id===a.id&&(b.itemId=a.itemId,b._heatmapManager&&(b._heatmapManager.destroy(),b._heatmapManager=null))})});b.addLayers(h);a.map.destroy();c.destroy(f);e.resolve({extent:a.map.extent,layers:h})}else e.reject()},function(a){e.reject()});return e.promise},_filteredLayers:function(a){return"esri.layers.WMSLayer"===
a.declaredClass||"esri.layers.WebTiledLayer"===a.declaredClass||"esri.layers.VectorTileLayer"===a.declaredClass},_preProcessLayers:function(a,b){var c=[];m.forEach(a,function(a){a.featureCollection&&c.push(this._preProcessFeatureCollection(a.featureCollection,b))},this);return e(c)},_preProcessFeatureCollection:function(a,b){var c=this,d=[];m.forEach(a.layers,function(a){if(a.featureSet&&a.featureSet.features&&b.targetSpatialReference&&m.some(a.featureSet.features,function(a){return a&&a.geometry&&
a.geometry.spatialReference&&a.geometry.spatialReference.wkid!==b.targetSpatialReference.wkid})){var e=new H(c.portal&&c.portal.helperServices&&c.portal.helperServices.geometry&&c.portal.helperServices.geometry.url);d.push(e.projectFeatureCollection(a,b.targetSpatialReference))}});return e(d)},_createMap:function(b,c,d){var h=this,g=new n,p,k;d.bingMapsKey=this.portal&&this.portal.bingKey;d.geometryServiceURL=d.geometryServiceURL||this.portal&&this.portal.helperServices&&this.portal.helperServices.geometry&&
this.portal.helperServices.geometry.url;d.infoTemplateClass=I;d.baseMap&&(b.itemData.baseMap=d.baseMap);b.extItemData&&(b.extItemData.operationalLayers&&0<b.extItemData.operationalLayers.length)&&(b.itemData.operationalLayers=K.combineLayers(b.itemData.operationalLayers,b.extItemData.operationalLayers));d.mapLayerIds&&(k=(b.itemData.operationalLayers||[]).concat(b.itemData.basemap&&b.itemData.basemap.baseMapLayers||[]),m.forEach(k,function(a){-1!==m.indexOf(d.mapLayerIds,a.id)&&(a.origId=a.id,a.id=
a.id+"_"+J.next())}));p=a.clone(b.itemData);f(this._preProcessLayers(p.operationalLayers,d),function(){h._getWebMapApplicationConfiguration(b).then(function(a){A.createMap(b,c,d).then(function(c){var k=c&&c.map,n,s,t,u=[];k?(L.setPowerBILayerBehaviors(k),k.itemId=b&&b.item&&b.item._id,s=p.operationalLayers||[],t=(n=p.baseMap)&&p.baseMap.baseMapLayers||[],s=s.concat(t),n&&(G.setProperty(k,"basemapTitle",n.title),G.setProperty(k,"basemapItemId",n.itemId)),b.extItemData&&b.extItemData.infographics&&
G.setProperty(k,"infographics",b.extItemData.infographics),m.forEach(s,function(b){var c=k.getLayer(b.id);if(!c&&"AcetateLayer"===b.type&&(c=k.getLayer(b.id+"_0")))c.infoTemplate=b.infoTemplate;c?(c.isInstanceOf(F)&&(b.pointSymbol&&!c.pointSymbol&&(c.pointSymbol=C.fromJson(b.pointSymbol)),b.polygonSymbol&&!c.polygonSymbol&&(c.polygonSymbol=C.fromJson(b.polygonSymbol)),b.polylineSymbol&&!c.polygonSymbol&&(c.polylineSymbol=C.fromJson(b.polylineSymbol))),c.itemId=b.itemId,"CSV"===b.type&&b.url&&(c.type=
"CSV",c.url=b.url,c.locationInfo=b.locationInfo),!1===b.showLegend&&(c.showLegend=!1),d.createDefaultInfoTemplate&&(c.setInfoTemplate&&!c.infoTemplate)&&h._setDefaultInfoTemplate(c),h._postProcessLayer(k,b,a)):b.featureCollection&&b.featureCollection.layers&&(c=f(h._processBisLayer(k,b),function(){h._postProcessLayer(k,b,a)}))&&u.push(c)}),c.basemapTitle=n&&n.title,e(u).then(function(){g.resolve(c)})):g.reject(nl.failedToLoadMap)},function(a){g.reject(a)})},function(a){g.reject(a)})});return g.promise},
_setDefaultInfoTemplate:function(a){a.setInfoTemplate(I.getDefault(a))},_getWebMapApplicationConfiguration:function(a){var b=new n,c=this;a&&a.item&&a.item.id?t({url:c.portal.getRelatedItemsUrl(a.item.id),content:{f:"json",relationshipType:"Map2AppConfig",direction:"forward"}}).then(function(a){a&&a.relatedItems&&a.relatedItems[0]&&a.relatedItems[0].id?t({url:c.portal.getItemDataUrl(a.relatedItems[0].id),content:{f:"json"}}).then(function(a){b.resolve(a&&a.items&&a.items[0]&&a.items[0].operationalLayers)},
function(a){b.reject(a)}):b.resolve()},function(a){b.reject(a)}):b.resolve();return b.promise},_processBisLayer:function(a,b){var c=new n;f(x._fromWebMap(b,this.dataAdapter),function(b){a.addLayer(b);c.resolve()},function(){c.resolve()});return c.promise},_postProcessLayer:function(a,b,c){var e=function(a){a&&(1<a[3]?a[3]/=255:w.isDefined(a[3])||(a[3]=1),"string"===typeof a&&(a=d.fromHex(a).toRgba()));return a};if(b){var f=a.getLayer(b.id);if(f){b.esriMaps&&M._initializeProperties(f,b.esriMaps);var h=
M.getProperty(f,"_readonly.filteredRenderer");h&&require(["esriMaps/utils/filteredRendererUtils"],function(a){a.init(f.renderer,h)});m.some(c,function(a){if(a.id===b.id||a.id===b.origId){if(a.layerDefinition&&a.layerDefinition.drawingInfo&&a.layerDefinition.drawingInfo.renderer)if(a.layerDefinition.drawingInfo.renderer.clustererInfo)M.setProperty(f,"clusterInfo",{background:a.layerDefinition.drawingInfo.renderer.clustererInfo.background,foreground:a.layerDefinition.drawingInfo.renderer.clustererInfo.foreground,
radius:a.layerDefinition.drawingInfo.renderer.clustererInfo.radius});else if(a.layerDefinition.drawingInfo.renderer.heatMapInfo){a=a.layerDefinition.drawingInfo.renderer.heatMapInfo;var c=a.gradientStops&&a.gradientStops[0]&&a.gradientStops[0].offset,d=function(a){var b={};m.forEach(a,function(a){b[a.offset]=e(a.color)});return b};M.setProperty(f,"heatmapInfo",{radius:c?2*a.intensity:Math.round(4.5*a.intensity),colors:c?d(a.gradientStops):a.gradientStops})}return!0}});var k=M.getProperty(f,"clusterInfo");
k&&(require(["esriPBI/utils/clusterUtils"],function(a){a.create(f,{backgroundColor:e(k.background),foregroundColor:e(k.foreground),radius:k.radius})}),M.setProperty(f,"clusterInfo",void 0));var g=M.getProperty(f,"heatmapInfo");g&&(require(["esriPBI/utils/heatmapUtils"],function(a){a.create(f,{radius:g.radius,colors:g.colors||g.gradient})}),M.setProperty(f,"heatmapInfo",void 0))}}},_getAllLayers:function(a,b){var c=a.layerIds||[];b&&(c=c.slice(1));c=c.concat(a.graphicsLayerIds||[]);return m.map(c,
function(b){return a.getLayer(b)})},_createLayerObject:function(a,b){var c;c=K.toWebMapLayer(a,b);this._excludeLayer(a);return c},_excludeLayer:function(a){return"HotSpotFeatureCollection"===M.getProperty(a,"type")},_createLayerObjects:function(a,b){var c=[];m.forEach(a,function(a){(a=this._createLayerObject(a,b))&&c.push(a)},this);return c},_createOperationalLayers:function(a,b){return this._createLayerObjects(m.filter(this._getAllLayers(a,!0),function(a){return!this._isBaseMapLayer(a)},this),b)},
_isBaseMapLayer:function(a){return a._basemapGalleryLayerType},_createBaseMap:function(a,b){var c=b&&b.useOnlyFirstLayerAsBasemap?[a.getLayer(a.layerIds[0])]:m.filter(this._getAllLayers(a),function(a,b){return this._isBaseMapLayer(a)||0===b},this),c={baseMapLayers:this._createLayerObjects(c,b),title:b&&b.basemap&&b.basemap.title||c[0]&&c[0].layerInfos&&c[0].layerInfos[0]&&c[0].layerInfos[0].name||"Basemap"},d=G.getProperty(a,"basemapTitle"),e=G.getProperty(a,"basemapItemId");d&&(c.title=d);e&&(c.itemId=
e);return c},_createItem:function(a){var b=new n;(new H(this.portal&&this.portal.helperServices&&this.portal.helperServices.geometry&&this.portal.helperServices.geometry.url)).getNormalizedGeographicExtent(a.extent).then(function(a){b.resolve({extent:[[a.xmin,a.ymin],[a.xmax,a.ymax]]})},function(a){b.reject(a)});return b.promise}}),S;return{initialize:function(b){S?a.mixin(S,b):S=new O(b)},createMap:function(a,b,c){if(S)return S.createMap(a,b,c)},addLayer:function(a,b){if(S)return S.addLayer(a,b)},
serializeMap:function(a){if(S)return S.serializeMap(a)},createWebMapItem:function(a,b){if(S)return S.createWebMapItem(a,b)},createWebMap:function(a,b){if(S)return S.createWebMap(a,b)},mergeWebmapOperationalLayers:function(a,b,c){if(S)return S.mergeWebmapOperationalLayers(a,b,c)}}})},"esriPBI/layers/PowerBILayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dojo/when dojo/json dojo/Deferred dojo/topic dijit/Destroyable dojo/aspect esri/layers/FeatureLayer esri/renderers/UniqueValueRenderer esriPBI/utils/throttle esriPBI/layers/PowerBILayerStates esriPBI/widgets/Popup/PopupTemplate esriPBI/generatefeatures/FeatureGeneratorFactory esriPBI/utils/smartMappingUtils esriPBI/utils/clusterUtils esriPBI/utils/MapUtils esri/renderers/jsonUtils esri/TimeExtent esri/graphicsUtils ../generatefeatures/store/storeFactory ../widgets/SymbolStyle/utils/rendererUtils".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J){var I,K=1,M=g([p,f],{declaredClass:"esri.layers.FeatureLayer",__pbiSelectionIds:null,constructor:function(a,c,d){this.setExtensionProperties(c);this._registerGeneratorEvents();this.__pbiSelectionIds={};this.own(b(this,"powerbilayer-generate-start",function(){n.publish("powerbilayer-generate-start")}),b(this,"powerbilayer-generate-end",function(){n.publish("powerbilayer-generate-end")}),b(this,"powerbilayer-generate-interrupted",function(){n.publish("powerbilayer-generate-interrupted")}));
this.emit("powerbilayer-generate-start");var e=(new u(1,500)).throttle(this,this.applyEdits),f=this;setTimeout(function(){f.__pbiState!==t.FEATURE_GEN_INTERPUPTED&&f.generateFeatures().then(function(){f.emit("powerbilayer-generate-end")},function(a){},function(a){f.getExtensionProperties().generator.interrupted||(f._hookPowerBISelections(a.features),e(a.features,null,null).then(function(){f.emit("powerbilayer-applyedits-progress",a.done);1===a.done&&(f._fireUpdateStart(),f._fireUpdateEnd(null,{drawFinish:!0}))}))})},
0);I=this},toExtWebMap:function(){var a=this.getExtensionProperties(),b=[];"SingleLineAddress"===a.locationProvider.type&&(b=H.get(a.locationProvider).toJson());return{locationProvider:a.locationProvider,classBreaksCapabilities:a.classBreaksCapabilities,geometryCache:b}},generateFeatures:function(){this.__pbiState=t.FEATURE_GEN_INPROGRESS;var a=this.getExtensionProperties().locationProvider,b=this.getDataAdapter();return"SingleLineAddress"===a.type?(1500<b.queryCount()&&b.app.emit("powerbilayer-exceed-limit"),
this.getExtensionProperties().generator.generate(b.query(1500),this.getExtensionProperties().locationProvider)):"countries"===a.type?this.getExtensionProperties().generator.generate(b.query(null,a.field),this.getExtensionProperties().locationProvider):this.getExtensionProperties().generator.generate(b.query(),this.getExtensionProperties().locationProvider)},interruptFeatureGen:function(){this.getExtensionProperties().generator.interrupt();this.__pbiState=t.FEATURE_GEN_INTERPUPTED;this.emit("powerbilayer-generate-interrupted")},
updateClassBreaksCapabilities:function(a){this.getExtensionProperties().classBreaksCapabilities=a},getExtensionProperties:function(){return this.__powerbiProperties||{}},setExtensionProperties:function(a){this.__powerbiProperties=a},showFeaturesSelectedInMap:function(){this.clearFeaturesSelectedInMap();var b={},c=!1;a.forEach(this.getSelectedFeatures(),function(a){c=!0;a.attributes&&0<=a.attributes.OBJECTID&&(b[a.attributes.OBJECTID]=!0)});if(c){var d="",e="2",f="2",h=this.getExtensionProperties();
h&&(h.classBreaksCapabilities&&h.classBreaksCapabilities.colorField)&&(h.classBreaksCapabilities.sizeField||(d="6"),this.renderer instanceof s||(e="4",f="2"));a.forEach(this.graphics,function(a){if(a.attributes&&0<=a.attributes.OBJECTID){var c=a.attributes.OBJECTID;if((a=a.getShape())&&a.rawNode&&a.rawNode.style)c in b?(a.rawNode.style.opacity="1.0",a.rawNode.style.strokeWidth="",d&&a.rawNode.setAttribute("r",d)):(a.rawNode.style.opacity="0.2",a.rawNode.style.strokeWidth=f,a.rawNode.setAttribute("r",
e))}})}},clearFeaturesSelectedInMap:function(){a.forEach(this.graphics,function(a){if((a=a.getShape())&&a.rawNode&&a.rawNode.style)a.rawNode.style.opacity="",a.rawNode.style.strokeWidth="",a.rawNode.setAttribute("r",a.shape.r)})},getDataAdapter:function(){return this.getExtensionProperties().dataAdapter},setDefaultRenderer:function(a){var b=this.getDataAdapter();this.updateClassBreaksCapabilities(b.getClassBreaksCapabilities());return x.setDefaultRenderer(this).always(m.hitch(this,function(){a.emit("rendererChanged");
this.__pbiState=t.READY;n.publish("powerbilayer-ready")}))},destroy:function(){this.clear();this.inherited(arguments)},setLayerTimeInfo:function(){var a=this.getDataAdapter().fieldWellInfo.Time;if(0<a.length&&a[0].isDateTime){var b=this.getDataAdapter().queryTimeExtent();b&&(a=a[0].displayName,this.timeInfo={timeExtent:b,timeReference:{timeZone:"UTC",respectsDaylightSaving:!0},startTimeField:a,endTimeField:"",trackIdField:"",timeInterval:0,timeIntervalUnits:"",exportOptions:{useTime:!1,timeDataCumulative:!1,
TimeOffset:0,timeOffsetUnits:"esriTimeUnitsCenturies"}},this.setUseMapTime(!0),this._startTimeField=a)}},_registerGeneratorEvents:function(){this.own(b(this.__powerbiProperties.generator,"empty-data-source",m.hitch(this,function(){this.emit("empty-data-source")})))},_hookPowerBISelections:function(b){var c=this.getDataAdapter(),d=c.dataView,e;e="XY"==this.getExtensionProperties().locationProvider.type?2:1;a.forEach(b,function(b){var f=c.host.createSelectionIdBuilder(),h=b.attributes.ROWID;a.forEach(d.categorical.categories.slice(0,
e),function(a){f=f.withCategory(a,h).withSeries(a.values,a.values[h])});this.__pbiSelectionIds[h]=f.createSelectionId()},this)}});M.createLayer=function(c){c.locationProvider=c.locationProvider||c.dataAdapter.getLocationProvider();if(c.locationProvider){var d=c.fields||c.dataAdapter.getFields();m.mixin(c,{classBreaksCapabilities:c.classBreaksCapabilities||c.dataAdapter.getClassBreaksCapabilities()});var f=v.create(c.locationProvider);f.app=c.dataAdapter.app;var h=new M({featureSet:{features:[],geometryType:f.geometryType},
layerDefinition:{geometryType:f.geometryType,displayField:"ROWID",fields:[{name:"ROWID",alias:"ROWID",type:"esriFieldInteger"},{name:"OBJECTID",alias:"OBJECTID",type:"esriFieldTypeOID"}].concat(d)}},m.mixin(c,{generator:f}));h.type="PowerBILayer";h.__pbiId=K++ +"_ "+ +new Date;c.infoTemplate?h.setInfoTemplate(new w(c.infoTemplate)):h.setInfoTemplate(w.getDefault(c.dataAdapter.getFields()));h.setLayerTimeInfo();var g=c.dataAdapter.pbiSelectionManager;h.own(b(h,"selection-complete",function(b){var c=
h.getSelectedFeatures();n.publish("powerbilayer-selection",{features:c});0<c.length?(g.clear().then(function(){g.select(h.__pbiSelectionIds[c[0].attributes.ROWID])}),a.forEach(c.slice(1),function(a){g.select(h.__pbiSelectionIds[a.attributes.ROWID],!0)})):g.clear();h.showFeaturesSelectedInMap()}));h.own(b(h,"update-end",function(a){a.info&&a.info.drawFinish&&(h.__pbiState=t.FEATURE_GEN_DONE,0<h.graphics.length?(h.timeInfo&&A.showTimeSlider(h),h.fullExtent=F.graphicsExtent(h.graphics),h.emit("powerbilayer-fullextent-changed",
h.fullExtent)):(h.__pbiState=t.READY,n.publish("powerbilayer-ready")))}));this._selectHandler&&this._selectHandler.remove();this._selectHandler=e.around(h,"_selectHandler",function(a){return function(a,b,c,d,e){var f;switch(b){case p.SELECTION_NEW:this.clearSelection(!0);f=!0;break;case p.SELECTION_ADD:f=!0;break;case p.SELECTION_SUBTRACT:f=!1}d=a.features;var h=this._mode,g=[],n=this.objectIdField,m,s;if(f)for(f=0;f<d.length;f++)m=d[f],s=m.attributes[n],m.visible&&(m=h._addFeatureIIf(s,m),g.push(m),
this._selectFeatureIIf(s,m,h));else for(f=0;f<d.length;f++)m=d[f],s=m.attributes[n],m.visible&&(this._unSelectFeatureIIf(s,h),s=h._removeFeatureIIf(s),g.push(s||m));this._isSelOnly&&h._applyTimeFilter(!0);this._resolve([g,b,a.exceededTransferLimit?{queryLimitExceeded:!0}:null],"onSelectionComplete",c,e);if(a.exceededTransferLimit)this.onQueryLimitExceeded()}});return h}return null};M._fromWebMap=function(a,b){var c=new h,d=a.featureCollection.layers[0];H.get(d.layerDefinition.locationProvider).loadJson(d.layerDefinition.geometryCache);
var e=M.createLayer({id:"MyLayer",dataAdapter:b,infoTemplate:d.popupInfo,fields:d.layerDefinition.fields,locationProvider:d.layerDefinition.locationProvider,classBreaksCapabilities:d.layerDefinition.classBreaksCapabilities});isNaN(a.opacity)||e.setOpacity(a.opacity);e.setRenderer(C.fromJson(d.layerDefinition.drawingInfo.renderer));e.__pbiState=t.READY;e.__pbiRendererApplied=!0;n.publish("powerbilayer-ready");e.refresh();c.resolve(e);J.setMemorization(e,m.getObject("esriMaps.clusterInfo",!1,a));return c.promise};
M.getInstance=function(){return I};M.addLayer=function(a,c){var e=c.mapManager.map,f=M.createLayer(a);if(f)f.on("powerbilayer-fullextent-changed",function(b){c.skipSave=!0;d(a.autoZoom?e.setExtent(b,!0):!0,function(){c.skipSave=!1;a.rendererInfo&&f.timeInfo&&c.emit("time-info-set");a.rendererInfo?(f.__pbiState=t.READY,n.publish("powerbilayer-ready")):f.setDefaultRenderer(c)})}),b.once(f,"before-apply-edits, empty-data-source",m.hitch(this,function(){var a=c.mapManager.getPowerBILayer();a&&(a.destroy(),
e.removeLayer(a));e.addLayer(f);c.emit("PowerBILayerAdded",f)})),a.rendererInfo?(a.rendererInfo.clusterInfo?(f.setRenderer(a.rendererInfo.renderer),B.create(f,{backgroundColor:a.rendererInfo.clusterInfo.backgroundColor,foregroundColor:a.rendererInfo.clusterInfo.foregroundColor,radius:a.rendererInfo.clusterInfo.radius})):f.setRenderer(a.rendererInfo.renderer),f.setOpacity(a.rendererInfo.opacity),f.refresh()):x.setDefaultSimpleRenderer(f),f.__pbiRendererApplied=!0;else{var h=c.mapManager.getPowerBILayer();
h&&(h.destroy(),e.removeLayer(h))}};return M})},"esriPBI/utils/throttle":function(){define(["dojo/Deferred","dojo/_base/declare"],function(g,m){return m(null,{constructor:function(a,b){this.concurrency=a||4;this.delay=b;this.queue=[];this.pending=0;this.stopped=!1},throttle:function(a,b){function d(a){if(h.pending<h.concurrency&&!h.stopped){var b=h.queue.shift();b&&(h.delay?setTimeout(function(){c(b.args,b.dfd)},h.delay):c(b.args,b.dfd))}}function c(c,f){h.pending++;var e=b.apply(a,c),e=e.promise||
e;e.always(function(){h.pending--;d()});e.then(f.resolve,f.reject,f.progress)}var h=this;return function(){var a=arguments,b=new g;h.queue.push({args:a,dfd:b});d();return b.promise}},init:function(){this.stopped=!1},stop:function(){this.stopped=!0;this.queue=[];this.pending=0}})})},"esriPBI/layers/PowerBILayerStates":function(){define([],function(){return{FEATURE_GEN_INPROGRESS:101,FEATURE_GEN_DONE:102,FEATURE_GEN_INTERPUPTED:103,READY:104}})},"esriPBI/generatefeatures/FeatureGeneratorFactory":function(){define(["esriPBI/generatefeatures/FeatureGenerator_XY",
"esriPBI/generatefeatures/FeatureGenerator_SingleLineAddress","esriPBI/generatefeatures/FeatureGenerator_StandardGeography"],function(g,m,a){return{create:function(b){return"XY"===b.type?new g:"SingleLineAddress"===b.type?new m:new a}}})},"esriPBI/generatefeatures/FeatureGenerator_XY":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred esri/geometry/Point esri/geometry/webMercatorUtils esri/graphic esri/SpatialReference ./_FeatureGenerator".split(" "),function(g,m,
a,b,d,c,h,n,f){return g([f],{generate:function(a,f){var g=new b;if(0===a.length)this.emit("empty-data-source"),setTimeout(function(){g.progress({features:[],done:1},!0);g.resolve()},0);else{for(var m=[],t=0;t<a.length&&!this.interrupted;){var w=a[t],v=this._toDecimalDegree(w[f.yField],w[f.xField]);if(null!==v)var x=v[0],B=v[1];else this.emit("generate-error",w);x&&B&&-90<=x&&90>=x&&-180<=B&&180>=B?(v=c.lngLatToXY(B,x),m.push(new h(new d(v[0],v[1],new n({wkid:102100})),null,w,null))):this.emit("generate-error",
w);0===t%this.BATCH_SIZE&&(setTimeout(function(b,c){return function(){g.progress({features:b,done:c/a.length},!0)}}(m,t),0),m=[]);t++}setTimeout(function(){g.progress({features:m,done:1},!0);g.resolve()},0)}return g.promise},_toDecimalDegree:function(b,c){if((isNaN(b)||isNaN(c)||-90>b||90<b||-180>c||180<c)&&b&&c){if(isNaN(b)){b=m.trim(b.replace(/(?:^(?:&nbsp;)+)|(?:(?:&nbsp;)+$)/g,""));var d="S"==b.slice(-1).toUpperCase()||"S"==b.charAt(0).toUpperCase()||"-"==b.slice(-1)||"-"==b.charAt(0)?-1:1,f=
a.map(m.trim(b.replace(/(&deg;|&ordm;|\^|~|\*|'|&prime;|&quot;|&uml;|&Yacute;|\s|-|\+|[NSEW])/ig," ")).replace(/(\s\s|\s\s\s)/g," ").split(" "),parseFloat)}else d=1,f=[b];if(isNaN(c)){c=m.trim(c.replace(/(?:^(?:&nbsp;)+)|(?:(?:&nbsp;)+$)/g,""));var h="W"==c.slice(-1).toUpperCase()||"W"==c.charAt(0).toUpperCase()||"-"==c.slice(-1)||"-"==c.charAt(0)?-1:1,g=a.map(m.trim(c.replace(/(&deg;|&ordm;|\^|~|\*|'|&prime;|&quot;|&uml;|&Yacute;|\s|-|\+|[NSEW])/ig," ")).replace(/(\s\s|\s\s\s)/g," ").split(" "),
parseFloat)}else h=1,g=[c];if(a.every(f,this._isNumber)&&a.every(g,this._isNumber))d=this._convertDMStoDD(f,d,g,h),b=d[0],c=d[1];else return null}return[b,c]},_isNumber:function(a){return!isNaN(a)},_convertDMStoDD:function(a,b,c,d){var f=a[0]?a[0]:0,h=a[1]?a[1]:0;a=a[2]?a[2]:0;var g=c[0]?c[0]:0,n=c[1]?c[1]:0;c=c[2]?c[2]:0;9E3<Math.abs(f)?(a=Math.abs(f%100),h=Math.abs(parseInt(f%1E4/100)),f=parseInt(f/1E4)):90<Math.abs(f)&&(h=Math.abs(f%100),f=parseInt(f/100));18E3<Math.abs(g)?(c=Math.abs(g%100),n=
Math.abs(parseInt(g%1E4/100)),g=parseInt(g/1E4)):180<Math.abs(g)&&(n=Math.abs(g%100),g=parseInt(g/100));return[0<=f?(f+h/60+a/3600)*b:f-h/60-a/3600,0<=g?(g+n/60+c/3600)*d:g-n/60-c/3600]}})})},"esriPBI/generatefeatures/_FeatureGenerator":function(){define(["dojo/_base/declare","dojo/Evented"],function(g,m){return g([m],{BATCH_SIZE:150,geometryType:"esriGeometryPoint",interrupt:function(){this.interrupted=!0},generate:function(a,b){}})})},"esriPBI/generatefeatures/FeatureGenerator_SingleLineAddress":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/json","./_FeatureGenerator_Remote","../utils/serviceProxyHelper"],function(g,m,a,b,d){return g([b],{toQueryJson:function(b,h){return{url:d.get("geocode")+"/geocodeAddresses",content:{f:"json",outSR:102100,addresses:a.stringify({records:m.map(b.chunk,function(a){return{attributes:{OBJECTID:a.OBJECTID,SingleLine:a.locValue}}})})}}}})})},"esriPBI/generatefeatures/_FeatureGenerator_Remote":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/Deferred dojo/promise/all esri/geometry/jsonUtils esri/graphic esriPBI/utils/throttle esriPBI/utils/geocodeUtils ./_FeatureGenerator ./store/storeFactory".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p){function s(a,b,c){var d={},e=[],f=[],h=[],g=p.get(c);m.forEach(a,function(a){var h=a[c.field];h&&(g.get(h)?(f.length===b&&(e.push({chunk:f,type:"client"}),f=[]),f.push({attributes:a,geometry:g.get(h).geometry})):d[h]?d[h].rows.push(a):d[h]={rows:[a]})});0!==f.length&&e.push({chunk:f,type:"client"});a=1;for(var n in d)h.length===b&&(e.push({chunk:h,type:"remote"}),h=[]),h.push({locValue:n,OBJECTID:a++,rows:d[n].rows});0!==h.length&&e.push({chunk:h,type:"remote"});return e}
return g([e],{throttler:new n(4,200),constructor:function(){this.generateAsync=this.throttler.throttle(this,this.__generate)},interrupt:function(){this.throttler.stop();this.inherited(arguments)},generate:function(c,e){this.throttler.init();var f=new b;if(0===c.length)this.emit("empty-data-source"),setTimeout(function(){f.progress({features:[],done:1},!0);f.resolve()},0);else{var h="countries"===e.type?25:this.BATCH_SIZE,g={};g.eventId="SingleLineAddress"===e.type?this.app.adapters.log.eventIDEnum.WorldGeocode:
this.app.adapters.log.eventIDEnum.GeoenrichGeocode;g.eventType=this.app.adapters.log.eventTypeEnum.Invoke;g.eventData=c.length;this.app.adapters.log.logTelemetry(g);var n=0,p=s(c,h,e);d(m.map(p,function(b){return this.generateAsync(b,e).then(a.hitch(this,this.toFeatures)).then(function(a){var b=++n/p.length;setTimeout(function(){f.progress({features:a,done:b},!0)},0)})},this)).then(function(){setTimeout(f.resolve,0)})}return f.promise},__generate:function(a,c){if("client"===a.type)return(new b).resolve(a.chunk);
if("remote"===a.type){var d=this.toQueryJson(a,c);c.sourceCountry&&"world"!==c.sourceCountry&&(d.content.sourceCountry=c.sourceCountry);return f.go(a.chunk,p.get(c),d).otherwise(function(){return(new b).reject()})}return(new b).reject()},toFeatures:function(a){var b=[];m.forEach(a,function(a){a.geometry?b.push(new h(a.geometry,null,a.attributes,null)):this.emit("generate-error",a.attributes)},this);return b}})})},"esriPBI/utils/geocodeUtils":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/json dojo/Deferred esri/request esriPBI/utils/throttle esri/geometry/jsonUtils ./serviceProxyHelper".split(" "),
function(g,m,a,b,d,c,h,n,f){function e(b,e,f){return 0<b.length?c(f,{usePost:!0}).then(function(c){m.forEach(b,function(a){e.put({locValue:a.locValue,geometry:null})});(c=c.locations||c.results[0].value.features)&&m.forEach(c,function(c){for(var d,f=0;f<b.length;f++)if(b[f].OBJECTID.toString()===c.attributes.ResultID.toString()){d=b[f].locValue;break}d&&e.put({locValue:d,geometry:n.fromJson(a.mixin(c.location||c.geometry,{spatialReference:{wkid:102100}}))})})}):(new d).resolve()}var p=[],s={};return{go:function(a,
b,c){return e(a,b,c).then(function(){var c=[];m.forEach(a,function(a){m.forEach(a.rows,function(d){c.push({attributes:d,geometry:b.get(a.locValue).geometry})})});return c})},getCountryCoverage:function(){return 0===p.length?c({url:f.get("geoenrich")+"/Geoenrichment/Countries",content:{f:"json"}}).then(function(a){return p=a.countries},function(a){return[]}):p},geoGeogrphyLayers:function(b){return s[b]?s[b]:c({url:f.get("geoenrich")+"/Geoenrichment/StandardGeographyLevels/"+b,content:{f:"json"}}).then(function(c){(c=
a.getObject("geographyLevels.0.datasets.0.levels",null,c))&&(s[b]=c);return c||[]},function(a){return[]})}}})},"esriPBI/utils/serviceProxyHelper":function(){define(["dojo/_base/lang"],function(g){var m;return{set:function(a){m=a},get:function(a){return!m?"":g.getObject(a,!1,m)}}})},"esriPBI/generatefeatures/store/storeFactory":function(){define(["./cacheStore"],function(g){var m={};return{get:function(a){a=a.type+"."+a.sourceCountry;m[a]||(m[a]=new g({data:[],idProperty:"locValue"}));return m[a]}}})},
"esriPBI/generatefeatures/store/cacheStore":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/store/Memory","esri/geometry/jsonUtils"],function(g,m,a,b){return g([a],{toJson:function(){return m.filter(this.data,function(a){return null!==a.geometry&&void 0!==a.geometry})},loadJson:function(a){a&&this.setData(m.map(m.filter(a,function(a){return null!==a.geometry&&void 0!==a.geometry}),function(a){var d={};d[this.idProperty]=a[this.idProperty];d.geometry=b.fromJson(a.geometry);return d},
this))}})})},"esriPBI/generatefeatures/FeatureGenerator_StandardGeography":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/json ./_FeatureGenerator_Remote ../utils/serviceProxyHelper ../utils/codeColumns".split(" "),function(g,m,a,b,d,c,h){return g([d],{geometryType:"esriGeometryPolygon",toQueryJson:function(d,f){var e={f:"json",returnGeometry:!0,generalizationLevel:6,geographyLayers:f.type,outSR:102100},g=c.get("geoenrich")+"/StandardGeographiesBatchQuery/execute";return f.useID||
-1<m.indexOf(h.columns,f.field)?(f.useID=!0,{url:g,content:a.mixin(e,{useFuzzySearch:!1,geographyQueries:b.stringify(m.map(d.chunk,function(a){return{OBJECTID:a.OBJECTID,QUERY:"ID:'"+a.locValue+"'"}}))})}):{url:g,content:a.mixin(e,{useFuzzySearch:!0,geographyQueries:b.stringify(m.map(d.chunk,function(a){return{OBJECTID:a.OBJECTID,QUERY:a.locValue}}))})}}})})},"esriPBI/utils/smartMappingUtils":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/topic dojo/when dojo/promise/all dojo/Deferred esri/renderers/smartMapping esri/renderers/ClassBreaksRenderer esri/renderers/HeatmapRenderer esri/renderers/SimpleRenderer esri/renderers/UniqueValueRenderer esri/symbols/jsonUtils esri/Color esri/styles/size esri/styles/choropleth esri/styles/heatmap esri/styles/type ./clusterUtils ../defaults".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C){function z(b){var c=a.getObject("classBreaksCapabilities.colorField",!1,b.getExtensionProperties());return(b=m.filter(b.fields,function(a){return a.name===c})[0])?b.type:"esriFieldTypeString"}function F(b){var c=a.getObject("classBreaksCapabilities.sizeField",!1,b.getExtensionProperties());return(b=m.filter(b.fields,function(a){return a.name===c})[0])?b.type:"esriFieldTypeString"}function H(a){var b=z(a);return"esriFieldTypeDouble"===b||"esriFieldTypeInteger"===
b?G(a,C.color.renderers.colorParam).then(function(a){a.setOpacity(C.color.renderers.opacityParam);return a}):"esriFieldTypeString"===b?G(a,C.unique.renderers.uniqueColorParam).then(function(a){a.setOpacity(C.unique.renderers.opacityParam);return a}):(new h).reject()}function J(a){return O(a,C.size.renderers.sizeParam).then(function(a){a.setOpacity(C.size.renderers.opacityParam);return a})}function I(a){return L(a,D(C.simple.renderers.simpleParam,a.geometryType,na)).then(function(a){a.setOpacity(C.simple.renderers.opacityParam);
return a})}function K(a){var b=z(a);return"esriFieldTypeDouble"===b||"esriFieldTypeInteger"===b?U(a,C.sizecolor.renderers.sizeParam,C.sizecolor.renderers.colorParam).then(function(a){a.setOpacity(C.sizecolor.renderers.opacityParam);return a}):"esriFieldTypeString"===b?U(a,C.sizeunique.renderers.sizeParam,C.sizeunique.renderers.uniqueColorParam).then(function(a){a.setOpacity(C.sizeunique.renderers.opacityParam);return a}):(new h).reject()}function M(a,b){A.setClusterSetting(a,"temporary",b);return(new h).resolve(a)}
function L(a,b){a.setRenderer(new p(b));a.refresh();return(new h).resolve(a)}function G(a,b){var c=z(a);return"esriFieldTypeDouble"===c||"esriFieldTypeInteger"===c?P(a,null,b).then(function(b){a.setRenderer(b);a.refresh();return a}):"esriFieldTypeString"===c?aa(a,null,b).then(function(b){a.setRenderer(b);a.refresh();return a}):(new h).reject()}function O(a,b){return P(a,b,null).then(function(b){a.setRenderer(b);a.refresh();return a})}function S(a,b){return y(a,b).then(function(b){a.setRenderer(b);
a.refresh();return a})}function U(a,b,c){var d=z(a);return"esriFieldTypeDouble"===d||"esriFieldTypeInteger"===d?P(a,b,c).then(function(b){a.setRenderer(b);a.refresh();return a}):"esriFieldTypeString"===d?aa(a,b,c).then(function(b){a.setRenderer(b);a.refresh();return a}):(new h).reject()}function T(a){var b=D(C.simple.renderers.simpleParam,a.geometryType,na);b.opacity=0;a.setRenderer(new p(b));a.refresh()}function E(a,b){return v.getSchemes({theme:a||C.color.renderers.colorParam.theme,basemap:X,geometryType:b})}
function Q(a){return B.getSchemes({theme:C.unique.renderers.uniqueColorParam.theme,basemap:X,geometryType:a})}function N(b,c,e){var f=new h;d(c.infos||r(b,c).then(function(a){return b.uniqueValueInfos=a}),function(c){var d=new s(e,a.getObject("classBreaksCapabilities.colorField",!1,b.getExtensionProperties()));m.forEach(c,function(a){"esriGeometryPoint"===b.geometryType&&a.symbol.setSize(e.size);a.symbol.setOutline(e.outline);a.value&&d.addValue(a.value,a.symbol)});f.resolve(d)});return f.promise}
function q(b,c){if(c){var d=F(b);if("esriFieldTypeDouble"!==d&&"esriFieldTypeInteger"!==d||"esriGeometryPoint"!==b.geometryType)return null;d=w.getSchemes({theme:C.size.renderers.sizeParam.theme,basemap:X,geometryType:b.geometryType}).primaryScheme;d.minSize=c.minSize;d.maxSize=c.maxSize;return n.createClassedSizeRenderer({basemap:X,layer:b,classificationMethod:c.classificationMethod,numClasses:c.numClasses,scheme:c.scheme||d,field:a.getObject("classBreaksCapabilities.sizeField",!1,b.getExtensionProperties())}).then(function(a){return a.renderer.infos})}return null}
function k(b,c){return c?"esriFieldTypeDate"===F(b)?null:n.createClassedColorRenderer({basemap:X,layer:b,classificationMethod:c.classificationMethod,numClasses:"centered-on"===c.theme?0===c.numClasses%2?c.numClasses+1:c.numClasses:c.numClasses,scheme:c.scheme||E(c.theme,b.geometryType).primaryScheme,field:a.getObject("classBreaksCapabilities.colorField",!1,b.getExtensionProperties())}).then(function(a){return a.renderer.infos}):null}function r(b,c){if(c){var d=a.getObject("classBreaksCapabilities.colorField",
!1,b.getExtensionProperties());return n.createTypeRenderer({basemap:X,layer:b,numTypes:C.origin.renderers.uniqueColorParam.numTypes,scheme:c.scheme||Q(b.geometryType).primaryScheme,field:d}).then(function(a){return a.uniqueValueInfos})}return null}function y(b,c){return c?n.createHeatmapRenderer(a.mixin(c,{basemap:X,layer:b,scheme:c.scheme})).then(function(a){return a.renderer}):null}function D(a,b,c){"esriGeometryPolygon"===b?(b=u.fromJson(a.polygon),b.outline.setWidth(a.polygon.outline.width)):
(a=c?a.pointMS:a.point,b=u.fromJson(a),b.setSize(a.size),b.outline.setWidth(a.outline.width));return b}function P(b,d,e){var h;h=e?d?D(C.sizecolor.renderers.simpleParam,b.geometryType):D(C.color.renderers.simpleParam,b.geometryType):D(C.size.renderers.simpleParam,b.geometryType,na);var g=new f(h);return c({sizeInfo:q(b,d),colorInfo:k(b,e)}).then(function(c){c.sizeInfo&&"esriGeometryPoint"===b.geometryType&&g.setSizeInfo(a.mixin(d,{field:a.getObject("classBreaksCapabilities.sizeField",!1,b.getExtensionProperties()),
stops:m.map(c.sizeInfo,function(a){return{value:a.minValue,size:a.symbol.size}})}));c.colorInfo&&g.setColorInfo(a.mixin(e,{field:a.getObject("classBreaksCapabilities.colorField",!1,b.getExtensionProperties()),stops:m.map(c.colorInfo,function(a){return{value:a.minValue,color:a.symbol.color}})}));return g})}function aa(b,d,e){var f;f=e?d?D(C.sizeunique.renderers.simpleParam,b.geometryType):D(C.unique.renderers.simpleParam,b.geometryType):D(C.size.renderers.simpleParam,b.geometryType,na);return c({sizeInfo:q(b,
d),renderer:N(b,e,f)}).then(function(c){var e=c.renderer;c.sizeInfo&&"esriGeometryPoint"===b.geometryType&&e.setSizeInfo(a.mixin(d,{field:a.getObject("classBreaksCapabilities.sizeField",!1,b.getExtensionProperties()),stops:m.map(c.sizeInfo,function(a){return{value:a.minValue,size:a.symbol.size}})}));return e})}var X=C.origin.basemap,na=1;return{setDefaultSimpleRenderer:I,setDefaultColorRenderer:H,setDefaultSizeRenderer:J,setDefaultHeatmapRenderer:function(a){return S(a,C.heatmap.renderers.heapMapParam).then(function(a){a.setOpacity(C.heatmap.renderers.opacityParam);
return a})},setDefaultBivariateRenderer:K,setDefaultClusteringRenderer:function(a){a.renderer instanceof e&&T(a);A.create(a);return M(a,C.clustering.renderers.clusteringParam).then(function(a){a.setOpacity(C.clustering.renderers.opacityParam);return a})},setDefaultRenderer:function(b){var c=a.getObject("classBreaksCapabilities.sizeField",!1,b.getExtensionProperties()),d=a.getObject("classBreaksCapabilities.colorField",!1,b.getExtensionProperties());return c&&d?K(b):c?"esriGeometryPolygon"===b.geometryType?
I(b):J(b):d?H(b):b.renderer instanceof p?(new h).resolve():I(b)},setSimpleRenderer:L,setColorRenderer:G,setSizeRenderer:O,setHeatmapRenderer:S,setBivariateRenderer:U,setClusteringRenderer:M,setBaseMapScheme:function(a){X=a},getColorSchemes:E,getHeatmapColorSchemes:function(){return x.getSchemes({theme:C.heatmap.renderers.heapMapParam.theme,basemap:X})},getTypedColorSchemes:Q,getColorFieldType:z}})},"esri/renderers/smartMapping":function(){define("require module dojo/_base/array dojo/_base/lang dojo/has dojo/Deferred dojo/DeferredList dojo/promise/all dojo/when dojo/on ../kernel ../Color ../numberUtils ../promiseList ../lang ../styles/type ../styles/size ../styles/choropleth ../styles/heatmap ../styles/predominance ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ./UniqueValueRenderer ./ClassBreaksRenderer ./HeatmapRenderer ./BlendRenderer ./utils dojo/i18n!../nls/jsapi".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M,L,G){function O(a,b){a.reject(Error(b))}function S(a,b){if(a.loaded)b.call();else e.once(a,"load",b)}function U(a,b,c,d){var e;switch(c){case "point":e=new z;e.setColor(b);e.setSize(null!=d?d:a.size);b=new F;b.setColor(a.outline.color);b.setWidth(a.outline.width);e.setOutline(b);break;case "line":e=new F;e.setColor(b);e.setWidth(null!=d?d:a.width);break;case "polygon":e=new H,e.setColor(b),b=new F,b.setColor(a.outline.color),b.setWidth(a.outline.width),
e.setOutline(b)}return e}function T(a){a=a.geometryType;"esriGeometryPoint"===a||"esriGeometryMultipoint"===a?a="point":"esriGeometryPolyline"===a?a="line":"esriGeometryPolygon"===a&&(a="polygon");return a}function E(a,b){var c=a.scheme;c=c?v.cloneScheme(c):(c=v.getSchemes({theme:a.theme||ta,basemap:a.basemap,geometryType:b}))&&c.primaryScheme;return c}function Q(a,b){return a.label<b.label?-1:a.label>b.label?1:0}function N(a,b){return a.value<b.value?-1:a.value>b.value?1:0}function q(a,b){var c=
b.count-a.count;0===c&&(c=Q(a,b));return c}function k(a,b){var c=b.count-a.count;0===c&&(c=N(a,b));return c}function r(a,c,d){var e;b.isFunction(c)?e=c:"count"===c?(e=k,d&&d.codedValues&&(e=q)):"value"===c&&(e=N,d&&d.codedValues&&(e=Q));e&&a.sort(e)}function y(c,d,e){var f=e.layer,h=e.field,k=b.isFunction(h),g=h&&!k?f.getField(h):null,n=g?f.getDomain(g.name):null,p,m=-1,q,s=null==e.numTypes?10:-1===e.numTypes?c.length:e.numTypes,k=null==e.showOthers?!0:e.showOthers,t=null==e.sortBy?"count":e.sortBy,
u=e&&e.labelCallback,v=T(f),w=E(e,v),f=new J(null,h),h=e.predominanceScheme,x=e.useSizeInfo,A,G;if(h){var B=(A="polygon"===v)&&x,z=h.sizeInfo,x=x?A?z.marker:z:null;if(z=B&&z?z.background:null)f.backgroundFillSymbol=U(z,z.color,"polygon");A=G=A?B?x.size:null:"line"===v?h.width:h.size;w=h;v=B?"point":v}var K={domain:n,fieldInfo:g};a.forEach(c,function(a,b){K.value=a.value;a.label=L.createUniqueValueLabel(K);u&&(a.label=u(a));null===a.value&&(m=b)});-1<m&&(q=c.splice(m,1)[0]);r(c,t,n);g&&g.type===ea&&
(K.dateFormatInterval=L.calculateDateFormatInterval(a.map(a.filter(c,function(a,b){return b<s}),function(a){return a.value})));p=ia.createColors(w.colors,c.length);a.forEach(c,function(a,b){K.value=a.value;a.label=L.createUniqueValueLabel(K);u&&(a.label=u(a));a.symbol=U(w,p[b],v,G)});e.valueExpression&&(f.setValueExpression(e.valueExpression),f.valueExpressionTitle=e.valueExpressionTitle);f.legendOptions=e.legendOptions;p=ia.createColors(w.colors,s);for(g=0;g<s;g++)(n=c[g])&&f.addValue({value:n.value,
label:n.label,symbol:U(w,p[g],v,G)});k&&(f.defaultSymbol=U(w,w.noDataColor,v,A),f.defaultLabel=qa.other);q&&(q.symbol=U(w,w.noDataColor,v,A),c.push(q));d&&d.widthInfo&&f.setVisualVariables([d.widthInfo]);return{renderer:f,uniqueValueInfos:c,othersStartIndex:f.infos.length===c.length?-1:f.infos.length,scheme:h?C.cloneScheme(h):E(e,v)}}function D(a,b,c){var d=a.scheme;d=d?B.cloneScheme(d):(d=B.getSchemes({theme:c||a.theme||ba,basemap:a.basemap,geometryType:b}))&&d.primaryScheme;return d}function P(a){var b=
a.avg,c=b-a.stddev,d=b+a.stddev;c<a.min&&(c=a.min);d>a.max&&(d=a.max);a=u.round([c,d],{strictBounds:!0});c=a[0];d=a[1];a=[c,c+(b-c)/2,b,b+(d-b)/2,d];return u.round(a,{strictBounds:!0})}function aa(a,b,c){var d=(b-a)/(c-1),e,f=[a];for(e=1;e<=c-2;e++)f.push(a+e*d);f.push(b);return u.round(f,{strictBounds:!0})}function X(a,b,c,d){var e,f;a=a.statisticsPlugin.getSuggestedDataRange({statistics:b,isDate:c});if(a.defaultStatistics)e=a.min,f=a.max;else if(d&&(null==b.avg||!b.stddev))e=b.min,f=b.max;return null!=
e?[e,f]:null}function na(c,d,e,f,h){var k=null==f.useDefaultStatistics?!0:f.useDefaultStatistics;if(c&&!c.count&&!k)O(h,"smartMapping.createColorInfo: cannot create renderer when statistics.count is 0.");else{var g=f.layer,n=f.field,p=b.isFunction(n),m=(p=n&&!p?g.getField(n):null)&&p.type===ea,p=T(g),q=D(f,p),t=f.semiContinuous,r,v,w,x=d&&d.classBreakInfos,A=x&&x.length,G=d?A:5;if(q){var B=d&&-1<q.id.indexOf("seq-")?ka(q,{length:G}):ia.createColors(q.colors,G);if(B.length<G)O(h,"smartMapping.createColorInfo: not enough colors in the scheme.");
else{if(d){r=[];var z;1===A?(v=[x[0].minValue,x[0].maxValue],r=[0,1],z=ia.createColors(B,G)[0],w=[z,new s(z)]):t?(v=[],w=[],a.forEach(x,function(a,b){var c=0.1*(a.maxValue-a.minValue);0===b?v.push(a.minValue):v.push(a.minValue+c);b===A-1?v.push(a.maxValue):v.push(a.maxValue-c);z=new s(B[b]);w.push(z);w.push(new s(z));r.push(2*b);r.push(2*b+1)})):(v=a.map(x,function(a,b){r.push(b);return(a.minValue+a.maxValue)/2}),w=ia.createColors(B,G));v=u.round(v,{strictBounds:!0})}else v=(k=k?X(g,c,m,!0):null)?
aa(k[0],k[1],5):P(c),r=[0,2,4],w=ia.createColors(B,G);e={type:"colorInfo",field:n,valueExpression:f.valueExpression,valueExpressionTitle:f.valueExpressionTitle,normalizationField:e,stops:L.createColorStops({values:v,isDate:m,dateFormatOptions:m?L.timelineDateFormatOptions:null,colors:w,labelIndexes:r}),legendOptions:f.legendOptions};h.resolve({colorInfo:e,statistics:c,classBreaks:d,scheme:D(f,p)})}}else O(h,"smartMapping.createColorInfo: unable to find the specified scheme.")}}function Da(a,c,d,e){var f=
null==d.useDefaultStatistics?!0:d.useDefaultStatistics;if(a&&!a.count&&!f)O(e,"smartMapping.createOpacityInfo: cannot create opacityInfo when statistics.count is 0.");else{var h=d.layer,k=d.field,g=k&&!b.isFunction(k)?h.getField(k):null,n=g&&g.type===ea,p=(g=d.useStdDev)?P(a):null,h=(f=f?X(h,a,n,g):null)||(g?[p[0],p[4]]:[a.min,a.max]);e.resolve({opacityInfo:{type:"opacityInfo",field:k,valueExpression:d.valueExpression,valueExpressionTitle:d.valueExpressionTitle,normalizationField:c,stops:[{value:h[0],
opacity:0.3},{value:h[1],opacity:0.7}],legendOptions:d.legendOptions},statistics:a,defaultStatistics:!!f})}}function Ea(a,b){var c=a.scheme;c=c?x.cloneScheme(c):(c=x.getSchemes({theme:a.theme||va,basemap:a.basemap,geometryType:b}))&&c.primaryScheme;return c}function Ha(a,b){var c;switch(b){case "point":c=[a.minSize,a.maxSize];break;case "line":c=[a.minWidth,a.maxWidth];break;case "polygon":c=[a.marker.minSize,a.marker.maxSize]}return c}function Aa(a,c,d,e,f){var h=null==e.useDefaultStatistics?!0:
e.useDefaultStatistics,k=c&&[c.minSize,c.maxSize];if(a&&!a.count&&!h)O(f,"smartMapping.createSizeInfo: cannot create renderer when statistics.count is 0.");else{var g=e.layer,n=e.field,p=n&&!b.isFunction(n)?g.getField(n):null,m=p&&p.type===ea,p=T(g),q=Ea(e,p),k=k||Ha(q,p),s=(q=e.useStdDev)?P(a):null,g=(h=h?X(g,a,m,q):null)||(q?[s[0],s[4]]:[a.min,a.max]);f.resolve({sizeInfo:{type:"sizeInfo",field:n,valueExpression:e.valueExpression,valueExpressionTitle:e.valueExpressionTitle,valueUnit:"unknown",normalizationField:d,
legendOptions:e.legendOptions,minSize:k[0],maxSize:k[1],minDataValue:g[0],maxDataValue:g[1]},statistics:a,defaultStatistics:!!h,suggestedSizeRange:c,scheme:Ea(e,p)})}}function za(a,b,c){var d,e=[],f=1/(c+1);for(d=1;d<=c;d++)e.push(s.blendColors(a,b,f*d));return e}function Ma(a,b){var c=[];if(1===b)c=[a[0]];else if(2===b)c=[a[0],a[2]];else if(3===b)c=a;else{var d=b-a.length,c=d/2;0===d%2?(d=za(a[0],a[1],c),c=za(a[1],a[2],c)):(d=za(a[0],a[1],Math.floor(c)),c=za(a[1],a[2],Math.ceil(c)));c=[a[0]].concat(d).concat([a[1]]).concat(c).concat([a[2]])}return c}
function ka(b,c,d){var e,f=c.length,h=-1;d&&a.some(c,function(a,b){a.hasAvg&&(h=b);return-1<h});if(-1<h){var k=b.colors;b=h+1;c=f-h;d=k.slice(0,3);k=k.slice(2);d.reverse();d=Ma(d,b);k=Ma(k,c);d.reverse();e=[].concat(d).concat(k.slice(1))}else if((b=b.colorsForClassBreaks)&&0<b.length)if(a.some(b,function(a){a.numClasses===f&&(e=a.colors);return!!e}),!e&&(d=b[b.length-1],b=f-d.numClasses,0<b)){c=d.colors[d.numClasses-1];e=d.colors.splice(0);for(d=1;d<=b;d++)e.push(c)}e&&(e=ia.createColors(e,e.length));
return e}function ma(b,c,d,e){var f=d.field,h=T(d.layer),k=null==d.showOthers?!0:d.showOthers,g=d.classificationMethod||"equal-interval",n="standard-deviation"===g,p=d.normalizationType,m,q,s,t=b.classBreakInfos;(m=D(d,h,"high-to-low"))?(q=ka(m,t),!q||q.length!=t.length?O(e,"smartMapping.createClassedColorRenderer: unable to find suitable colors for number of classes."):(s=new I(null,f),d.valueExpression&&(s.setValueExpression(d.valueExpression),s.valueExpressionTitle=d.valueExpressionTitle),s.legendOptions=
d.legendOptions,s.classificationMethod=g,s.normalizationType=p,s.normalizationField="field"===p?d.normalizationField:void 0,s.normalizationTotal="percent-of-total"===p?b.normalizationTotal:void 0,k&&(s.defaultSymbol=U(m,m.noDataColor,h),s.defaultLabel=qa.other),a.forEach(t,function(a,b){s.addBreak({minValue:a.minValue,maxValue:a.maxValue,symbol:U(m,q[b],h),label:a.label})}),n||L.setLabelsForClassBreaks({classBreaks:s.infos,classificationMethod:g,normalizationType:p,round:!0}),c&&c.widthInfo&&s.setVisualVariables([c.widthInfo]),
b.renderer=s,b.scheme=D(d,h,"high-to-low"),e.resolve(b))):O(e,"smartMapping.createClassedColorRenderer: unable to find suitable style scheme.")}function pa(a){var d=new c,e=a.layer,k=null==a.useDefaultBreaks?!0:a.useDefaultBreaks,g=a.optimizeOutline,n=[e.statisticsPlugin.getClassBreaks(a)];g&&n.push(e.statisticsPlugin.getSuggestedOutline("object"===typeof g?g:null));(new h(n)).then(function(c){var h=c[0];c=c[1];var n=g&&c[0]?c[1]:null;if(h[0]||k&&!e.graphics.length){var h=h[1],p=k?X(e,h?{min:h.minValue,
max:h.maxValue}:{}):null;p&&(h=a.layer.statisticsPlugin.getClassBreaks(b.mixin(a,{classificationMethod:"equal-interval",numClasses:1,analyzeData:!1,minValue:p[0],maxValue:p[1],normalizationTotal:p[0]+p[1]})));f(h).then(function(a){a.defaultStatistics=!!p;d.resolve({cbResponse:a,suggestedOutline:n})}).otherwise(function(){O(d,"smartMapping: error when calculating default class breaks.")})}else O(d,"smartMapping: error when calculating class breaks.")});return d.promise}function ja(a,b,c,d){b=d||Ha(a,
b);a=b[0];b=(b[1]-a)/(4<=c?c-1:c);var e=[];for(d=0;d<c;d++)e.push(a+b*d);return e}function wa(b,c,d,e,f){var h=e.field,k=T(e.layer),g=null==e.showOthers?!0:e.showOthers,n=e.classificationMethod||"equal-interval",p=e.normalizationType,m=b.classBreakInfos,q=Ea(e,k),s=ja(q,k,m.length,c),t="polygon"===k,u=t?q.marker:q;c=t?q.background:null;var r;r=new I(null,h);e.valueExpression&&(r.setValueExpression(e.valueExpression),r.valueExpressionTitle=e.valueExpressionTitle);r.legendOptions=e.legendOptions;r.classificationMethod=
n;r.normalizationType=p;r.normalizationField="field"===p?e.normalizationField:void 0;r.normalizationTotal="percent-of-total"===p?b.normalizationTotal:void 0;g&&(r.defaultSymbol=U(u,u.noDataColor,t?"point":k),r.defaultLabel=qa.other);c&&(r.backgroundFillSymbol=U(c,c.color,k));a.forEach(m,function(a,b){r.addBreak({minValue:a.minValue,maxValue:a.maxValue,symbol:U(u,u.color,t?"point":k,s[b]),label:a.label})});"standard-deviation"!==n&&L.setLabelsForClassBreaks({classBreaks:r.infos,classificationMethod:n,
normalizationType:p,round:!0});d&&d.widthInfo&&r.setVisualVariables([d.widthInfo]);b.renderer=r;b.scheme=Ea(e,k);f.resolve(b)}function Ba(a){var b=a.scheme;b=b?A.cloneScheme(b):(b=A.getSchemes({theme:a.theme||Ca,basemap:a.basemap}))&&b.primaryScheme;return b}function xa(b,c,d){var e=null==c.useDefaultStatistics?!0:c.useDefaultStatistics;if(!b.count&&!e)O(d,"smartMapping.createHeatmapRenderer: cannot create renderer when statistics.count is 0.");else{var f=b.fieldOffset,h=null==c.blurRadius?10:c.blurRadius,
k=null==c.minRatio?0.01:c.minRatio,g=null==c.maxRatio?1:c.maxRatio,n=null==c.fadeToTransparent?!0:c.fadeToTransparent,p=Ba(c).colors,m=p.length,q=(e=!b.count&&e)?[0,100]:[b.min,b.max],t=new K;t.setBlurRadius(h);t.setField(c.field);null!=f&&t.setFieldOffset(f);t.setMinPixelIntensity(q[0]);t.setMaxPixelIntensity(q[1]);var f=p[0],u=[{ratio:0,color:new s([f.r,f.g,f.b,0])},{ratio:ga,color:new s([f.r,f.g,f.b,0])},{ratio:n?k:ga,color:f}],r=(g-k)/(m-1),p=ia.createColors(p,m);a.forEach(p,function(a,b){u.push({ratio:k+
r*b,color:a})});t.setColorStops(u);d.resolve({renderer:t,statistics:b,defaultStatistics:e,scheme:Ba(c)})}}function oa(a,b){var c=a.scheme;c=c?C.cloneScheme(c):(c=C.getSchemes({theme:a.theme||ta,basemap:a.basemap,geometryType:b}))&&c.primaryScheme;return c}function sa(b,c){var d={};a.forEach(b,function(a){var b=c.getField(a.name);d[a.name]=a.label||b&&b.alias||a.name});return function(a){return d[a.value]}}function Ia(b){return function(c,d){var e=a.indexOf(b,c.value),f=a.indexOf(b,d.value);return e-
f}}function Sa(b,d,e,f,h){var k=new c,g=b.layer;g.statisticsPlugin.getPredominantCategories({fields:d}).always(function(c){if(!c||!c.predominantCategoryInfos)c={predominantCategoryInfos:a.map(d,function(a){return{value:a,count:0}})};var n=y(c.predominantCategoryInfos,h,{layer:g,valueExpression:f.valueExpression,labelCallback:sa(b.fields,g),numTypes:-1,showOthers:b.showOthers,sortBy:Ia(d),predominanceScheme:e,useSizeInfo:b.includeSizeInfo});n.predominantCategoryInfos=n.uniqueValueInfos;delete n.uniqueValueInfos;
n.source=c.source;k.resolve(n)});return k.promise}function Ka(a,b,d,e){var f=new c;ia.createSizeInfo({layer:a.layer,valueExpression:e.valueExpression,sqlExpression:e.statisticsQuery.sqlExpression,sqlWhere:e.statisticsQuery.sqlWhere,scheme:d,optimizeForScale:a.optimizeForScale}).then(function(a){a.sizeInfo.legendOptions={title:qa.sumOfCategories};f.resolve(a)}).otherwise(function(a){O(f,"smartMapping.createPredominanceRenderer: error when calculating statistics for visual variable(size).")});return f.promise}
function Oa(a,b,d){var e=new c;a.layer.statisticsPlugin.getFieldStatistics({valueExpression:d.valueExpression,sqlExpression:d.statisticsQuery.sqlExpression,sqlWhere:d.statisticsQuery.sqlWhere}).then(function(a){var c=null==a.avg||null==a.stddev,f=100*(1/b.length),h=c?100:a.avg+1.285*a.stddev;100<h&&(h=100);f=u.round([f,h],{strictBounds:!0});e.resolve({opacityInfo:{type:"opacityInfo",valueExpression:d.valueExpression,stops:[{value:f[0],opacity:0.15},{value:f[1],opacity:1}],legendOptions:{title:qa.strengthOfPredominance}},
statistics:a,defaultStatistics:c})}).otherwise(function(a){O(e,"smartMapping.createPredominanceRenderer: error when calculating statistics for visual variable(opacity).")});return e.promise}function Qa(a,b,c,d){var e=T(a.layer),f=oa(a,e);a.layer.statisticsPlugin.getPredominanceExpressions({fields:b}).then(function(e){var h=Sa(a,b,f,e.predominantCategory,c),k,g;a.includeSizeInfo&&(k=Ka(a,b,f.sizeInfo,e.size));a.includeOpacityInfo&&(g=Oa(a,b,e.opacity));t([h,k,g]).then(function(a){var b=a[0],c=a[1],
e=a[2];a=[];if(b instanceof Error)O(d,"smartMapping.createPredominanceRenderer: unable to create unique-value renderer.");else{if(k){if(c instanceof Error){O(d,"smartMapping.createPredominanceRenderer: unable to create visual variable for symbol size.");return}a.push(L.cloneSizeInfo(c.sizeInfo));delete c.scheme;b.size=c}if(g){if(e instanceof Error){O(d,"smartMapping.createPredominanceRenderer: unable to create visual variable for symbol opacity.");return}a.push(L.cloneOpacityInfo(e.opacityInfo));
b.opacity=e}if(a.length){if(c=b.renderer.visualVariables)Array.prototype.push.apply(c,a),a=c;b.renderer.setVisualVariables(a)}d.resolve(b)}})}).otherwise(function(a){O(d,"smartMapping.createPredominanceRenderer: unable to generate expressions.")})}function Ta(b,c,d){var e=b;if("string"===typeof b)(b=d.getField(b))&&b.type===ea&&(e=d.getFieldLabel(b.name));else if("number"===typeof b||b instanceof Date)d=-1<a.indexOf(la,c)?null:"date",e=L.formatDate(b,{selector:d});return e}function Ua(a,c,d){var e=
c.startTime,f=c.endTime,h=c.layer;h.statisticsPlugin.getAgeExpressions({startTime:e,endTime:f,units:a.units}).then(function(c){var k=a.units,g="ageInfo_"+k;a.legendOptions={title:w.substitute({units:k,startTime:Ta(e,k,h),endTime:Ta(f,k,h)},qa[g])};b.mixin(a,c);d.resolve(a)}).otherwise(function(a){O(d,"smartMapping.createAgeInfo: unable to generate expressions to calculate age.")})}function Va(b,c){var d,e,f,h,k,g,n,p,m={};d=a.filter(b,function(b){e=b.name;f=e.toLowerCase();if(g=e!==c&&-1===a.indexOf(V,
f))n=n||(-1<a.indexOf(ha,b.type)?e:null),p=p||("esriFieldTypeString"===b.type?e:null);return g});a.forEach(d,function(b){e=b.name;f=e.toLowerCase();(h=-1<a.indexOf(ha,b.type))&&(m=Ra(e,f,ca,m,"number"));if(!m.rank||"string"===m.fieldType)(k="esriFieldTypeString"===b.type)&&(m=Ra(e,f,R,m,"string"))});return m.fieldName||n||p}function Ra(b,c,d,e,f){var h,k=-1;h=-1;var g,k=a.indexOf(d,c);for(g=0;g<d.length;g++)if(-1<c.indexOf(d[g])){h=g;break}c=k;if(-1<c&&(!e.rank||e.fieldType!==f||"exact"===e.matchType&&
e.fieldType===f&&e.rank>c))e={rank:c,matchType:"exact",fieldType:f,fieldName:b};else if(-1<h&&(!e.rank||e.fieldType===f&&"contains"===e.matchType&&e.rank>h))e={rank:h,matchType:"contains",fieldType:f,fieldName:b};return e}var ia={},Y=Math.pow(2,53)-1,qa=G.smartMapping,ta="default",ba="high-to-low",va="default",Ca="default",ga=0.01,fa=/(https?:)?\/\/services.*\.arcgis\.com/i,V="id fips fid objectid _objectid __objectid x y lat long latitude longitude shape shape_length shape_leng shape_area perimeter stretched_value fnode_ tnode_ lpoly_ rpoly_ poly_ subclass rings_ok rings_nok st_length(shape) st_area(shape)".split(" "),
ca="count percent sum elevation value valore valoare total gesamt score income age expected average median size cost expenditure revenue profit growth sale quantity population price unit length width difference distance".split(" "),R="type name status class category code value label zone symbol color owner district group species rating score party".split(" "),ea="esriFieldTypeDate",ha=["esriFieldTypeInteger","esriFieldTypeDouble","esriFieldTypeSingle","esriFieldTypeSmallInteger"],la=["hours","minutes",
"seconds"],Z=g.toAbsMid?g.toAbsMid("../plugins/FeatureLayerStatistics"):m.id.replace(/\/[^\/]*$/ig,"/")+"../plugins/FeatureLayerStatistics";b.mixin(ia,{createColors:function(a,b){var c=[],d=a.length,e;for(e=0;e<b;e++)c.push(new s(a[e%d]));return c},createTypeRenderer:function(a){var b=new c;if(!a||!a.layer||!a.field&&!a.valueExpression||!a.scheme&&!a.basemap)return O(b,"smartMapping.createTypeRenderer: missing parameters."),b.promise;var d=a.layer,e=a.optimizeOutline;d.addPlugin(Z).then(function(){var c=
[d.statisticsPlugin.getUniqueValues({field:a.field,valueExpression:a.valueExpression,includeAllCodedValues:a.includeAllCodedValues})];e&&c.push(d.statisticsPlugin.getSuggestedOutline("object"===typeof e?e:null));(new h(c)).then(function(c){var d=c[0];c=c[1];c=e&&c[0]?c[1]:null;d[0]?(d=d[1],c=y(d.uniqueValueInfos,c,a),c.source=d.source,c.partialData=d.partialData,b.resolve(c)):O(b,"smartMapping.createTypeRenderer: error when calculating unique values.")})}).otherwise(function(a){O(b,"smartMapping.createTypeRenderer: error when adding feature layer statistics plugin.")});
return b.promise},createColorInfo:function(a){var b=new c;if(!a||!a.layer||!a.field&&!a.valueExpression&&!a.sqlExpression)return O(b,"smartMapping.createColorInfo: missing parameters."),b.promise;var d=a.layer,e=a.normalizationField,f=e?"field":void 0;a.statistics?na(a.statistics,null,e,a,b):d.addPlugin(Z).then(function(){var c="group-similar"===a.theme||a.scheme&&0===a.scheme.id.indexOf("group-similar/");(c?d.statisticsPlugin.getClassBreaks({field:a.field,valueExpression:a.valueExpression,classificationMethod:"natural-breaks",
numClasses:a.numGroups||5,normalizationType:f,normalizationField:e,minValue:a.minValue,maxValue:a.maxValue}):d.statisticsPlugin.getFieldStatistics({field:a.field,valueExpression:a.valueExpression,sqlExpression:a.sqlExpression,sqlWhere:a.sqlWhere,normalizationType:f,normalizationField:e,minValue:a.minValue,maxValue:a.maxValue})).then(function(d){var f,h;c?f=d:h=d;na(h,f,e,a,b)}).otherwise(function(a){O(b,c?"smartMapping.createColorInfo: error when calculating class breaks.":"smartMapping.createColorInfo: error when calculating field statistics.")})}).otherwise(function(a){O(b,
"smartMapping.createColorInfo: error when adding feature layer statistics plugin.")});return b.promise},createColorRenderer:function(a){var b=new c;if(!a||!a.layer||!a.field&&!a.valueExpression&&!a.sqlExpression)return O(b,"smartMapping.createColorRenderer: missing parameters."),b.promise;var d=a.layer,e=a.normalizationField,f=e?"field":void 0,k=a.optimizeOutline;d.addPlugin(Z).then(function(){var c=[ia.createColorInfo(a)];k&&c.push(d.statisticsPlugin.getSuggestedOutline("object"===typeof k?k:null));
(new h(c)).then(function(c){var d=c[0];c=c[1];c=k&&c[0]?c[1]:null;if(d[0]){var d=d[1],h=a.field,g=T(a.layer),n=null==a.showOthers?!0:a.showOthers,p=B.cloneScheme(d.scheme),h=new I(null,h);a.valueExpression&&h.setValueExpression(a.valueExpression);n&&(h.defaultSymbol=U(p,p.noDataColor,g),h.defaultLabel=qa.other);h.addBreak({minValue:-Y,maxValue:Y,symbol:U(p,p.noDataColor,g)});h.normalizationType=f;h.normalizationField=e;g=[L.cloneColorInfo(d.colorInfo)];c&&c.widthInfo&&g.push(c.widthInfo);h.setVisualVariables(g);
b.resolve({renderer:h,colorInfo:L.cloneColorInfo(d.colorInfo),statistics:d.statistics,classBreaks:d.classBreaks,scheme:B.cloneScheme(d.scheme)})}else O(b,"smartMapping.createColorRenderer: error when calculating colorInfo.")})}).otherwise(function(a){O(b,"smartMapping.createColorRenderer: error when adding feature layer statistics plugin.")});return b.promise},createOpacityInfo:function(a){var b=new c;if(!a||!a.layer||!a.field&&!a.valueExpression&&!a.sqlExpression)return O(b,"smartMapping.createOpacityInfo: missing parameters."),
b.promise;var d=a.layer,e=a.normalizationField,f=e?"field":void 0;a.statistics?Da(a.statistics,e,a,b):d.addPlugin(Z).then(function(){d.statisticsPlugin.getFieldStatistics({field:a.field,valueExpression:a.valueExpression,sqlExpression:a.sqlExpression,sqlWhere:a.sqlWhere,normalizationType:f,normalizationField:e,minValue:a.minValue,maxValue:a.maxValue,features:a.features}).then(function(c){Da(c,e,a,b)}).otherwise(function(a){O(b,"smartMapping.createOpacityInfo: error when calculating field statistics.")})}).otherwise(function(a){O(b,
"smartMapping.createOpacityInfo: error when adding feature layer statistics plugin.")});return b.promise},createBlendRenderer:function(b){var d=new c,e=this,f,h=[],k={},g=[],p=[],m=b.opacityValueCombinationMethod||"avg",q={};if(!b||!b.layer||!b.blendedFields)return O(d,"smartMapping.createBlendRenderer: missing parameters."),d.promise;b.basemap=b.basemap||"topo";h=T(b.layer);f=E({basemap:b.basemap},h);f.colors=[new s("#e60000"),new s("#0000e6"),new s("#00e600"),new s("#e67300"),new s("#a900e6")];
q.fields=[];q.normalizationField=b.normalizationField;q.blendMode=b.blendMode||"source-over";q.symbol=U(f,f.noDataColor,b.markers?"point":h);k.layer=b.layer;k.normalizationField=b.normalizationField;k.useStdDev=b.useStdDev||!1;h=a.map(b.blendedFields,function(a,b){q.fields.push({field:a,color:f.colors[b]});k.field=a;return e.createOpacityInfo(k)});n(h).then(function(c){p[0]=c[0].opacityInfo.stops[0].value;p[1]=c[1].opacityInfo.stops[1].value;a.forEach(c.slice(0,1),function(a){var b=a.opacityInfo.stops[0].value,
c=a.opacityInfo.stops[1].value;"union"===m?(p[0]=b<p[0]?b:p[0],p[1]=c>p[1]?c:p[1]):"avg"===m&&(p[0]+=a.opacityInfo.stops[0].value,p[1]+=a.opacityInfo.stops[1].value)});g[0]={value:"avg"===m?p[0]/c.length:p[0],opacity:b.minOpacity?b.minOpacity:c[0].opacityInfo.stops[0].opacity};g[1]={value:"avg"===m?p[1]/c.length:p[1],opacity:b.maxOpacity?b.maxOpacity:c[0].opacityInfo.stops[1].opacity};q.opacityStops=g;d.resolve({renderer:new M(q),scheme:f,opacityInfos:c})});return d.promise},createSizeInfo:function(a){var b=
new c;if(!a||!a.layer||!a.field&&!a.valueExpression&&!a.sqlExpression)return O(b,"smartMapping.createSizeInfo: missing parameters."),b.promise;var d=a.layer,e=a.normalizationField,f=e?"field":void 0,k=a.optimizeForScale;a.statistics?Aa(a.statistics,null,e,a,b):d.addPlugin(Z).then(function(){var c=[d.statisticsPlugin.getFieldStatistics({field:a.field,valueExpression:a.valueExpression,sqlExpression:a.sqlExpression,sqlWhere:a.sqlWhere,normalizationType:f,normalizationField:e,minValue:a.minValue,maxValue:a.maxValue})];
k&&c.push(d.statisticsPlugin.getSuggestedSizeRange({optimizeForScale:!0===k?"map-scale":k}));(new h(c)).then(function(c){var d=c[0];c=k&&c[1];c=k&&c[0]?c[1]:null;d[0]?Aa(d[1],c,e,a,b):O(b,"smartMapping.createSizeInfo: error when calculating field statistics.")})}).otherwise(function(a){O(b,"smartMapping.createSizeInfo: error when adding feature layer statistics plugin.")});return b.promise},createSizeRenderer:function(a){var b=new c;if(!a||!a.layer||!a.field&&!a.valueExpression&&!a.sqlExpression)return O(b,
"smartMapping.createSizeRenderer: missing parameters."),b.promise;var d=a.layer,e=a.normalizationField,f=e?"field":void 0,k=a.optimizeOutline;d.addPlugin(Z).then(function(){var c=[ia.createSizeInfo(a)];k&&c.push(d.statisticsPlugin.getSuggestedOutline("object"===typeof k?k:null));(new h(c)).then(function(c){var d=c[0];c=c[1];c=k&&c[0]?c[1]:null;if(d[0]){var d=d[1],h=a.field,g=T(a.layer),n=null==a.showOthers?!0:a.showOthers,p=x.cloneScheme(d.scheme),m="polygon"===g,q=m?p.marker:p,p=m?p.background:null,
s="line"===g?q.noDataWidth:q.noDataSize,h=new I(null,h);a.valueExpression&&h.setValueExpression(a.valueExpression);n&&(h.defaultSymbol=U(q,q.noDataColor,m?"point":g,s),h.defaultLabel=qa.other);h.addBreak({minValue:-Y,maxValue:Y,symbol:U(q,q.color,m?"point":g)});p&&(h.backgroundFillSymbol=U(p,p.color,g));h.normalizationType=f;h.normalizationField=e;g=[L.cloneSizeInfo(d.sizeInfo)];c&&c.widthInfo&&g.push(c.widthInfo);h.setVisualVariables(g);b.resolve({renderer:h,sizeInfo:L.cloneSizeInfo(d.sizeInfo),
statistics:d.statistics,defaultStatistics:d.defaultStatistics,suggestedSizeRange:d.suggestedSizeRange,scheme:x.cloneScheme(d.scheme)})}else O(b,"smartMapping.createSizeRenderer: error when calculating sizeInfo.")})}).otherwise(function(a){O(b,"smartMapping.createSizeRenderer: error when adding feature layer statistics plugin.")});return b.promise},createClassedColorRenderer:function(a){var d=new c,e=a.minValue,f=a.maxValue,h;if(!a||!a.layer||!a.field&&!a.valueExpression)return O(d,"smartMapping.createClassedColorRenderer: missing parameters."),
d.promise;h=null!=e&&null!=f;if(!h&&(null!=e||null!=f))return O(d,"smartMapping.createClassedColorRenderer: both minValue and maxValue are required when specifying custom data range."),d.promise;a=b.mixin({analyzeData:!h},a);a.layer.addPlugin(Z).then(function(){pa(a).then(function(b){ma(b.cbResponse,b.suggestedOutline,a,d)}).otherwise(function(a){O(d,"smartMapping.createClassedColorRenderer: error when calculating class breaks.")})}).otherwise(function(a){O(d,"smartMapping.createClassedColorRenderer: error when adding feature layer statistics plugin.")});
return d.promise},createClassedSizeRenderer:function(a){var d=new c,e=a.minValue,f=a.maxValue,h;if(!a||!a.layer||!a.field&&!a.valueExpression)return O(d,"smartMapping.createClassedSizeRenderer: missing parameters."),d.promise;h=null!=e&&null!=f;if(!h&&(null!=e||null!=f))return O(d,"smartMapping.createClassedColorRenderer: both minValue and maxValue are required when specifying custom data range."),d.promise;a=b.mixin({analyzeData:!h},a);var k=a.layer;k.addPlugin(Z).then(function(){pa(a).then(function(b){a.optimizeForScale?
k.statisticsPlugin.getSuggestedSizeRange().then(function(c){wa(b.cbResponse,[c.minSize,c.maxSize],b.suggestedOutline,a,d)}).otherwise(function(c){wa(b.cbResponse,null,b.suggestedOutline,a,d)}):wa(b.cbResponse,null,b.suggestedOutline,a,d)}).otherwise(function(a){O(d,"smartMapping.createClassedSizeRenderer: error when calculating class breaks.")})}).otherwise(function(a){O(d,"smartMapping.createClassedSizeRenderer: error when adding feature layer statistics plugin.")});return d.promise},createHeatmapRenderer:function(a){var b=
new c;if(!a||!a.layer)return O(b,"smartMapping.createHeatmapRenderer: missing parameters."),b.promise;var d=a.layer;a.statistics?xa(a.statistics,a,b):d.addPlugin(Z).then(function(){d.statisticsPlugin.getHeatmapStatistics(a).then(function(c){xa(c,a,b)}).otherwise(function(a){O(b,"smartMapping.createHeatmapRenderer: error when calculating heatmap statistics.")})}).otherwise(function(a){O(b,"smartMapping.createHeatmapRenderer: error when adding feature layer statistics plugin.")});return b.promise},
applyHeatmapScheme:function(c){if(c&&c.renderer&&c.scheme){var d=Ba({scheme:c.scheme});c=c.renderer;var e=c.colorStops,d=d.colors;if(e.length===d.length+3){var f;f=new s(d[0]);e=a.map(e,function(a){return b.mixin({},a)});e[0].color=new s([f.r,f.g,f.b,0]);e[1].color=new s([f.r,f.g,f.b,0]);e[2].color=f;for(f=3;f<e.length;f++)e[f].color=d[f-3];c.setColorStops(e)}}},sampleSize:500,createPredominanceRenderer:function(b){var d=new c;if(!b||!b.layer||!(b.fields&&1<b.fields.length))return O(d,"smartMapping.createPredominanceRenderer: missing parameters."),
d.promise;if(5<b.fields.length)return O(d,"smartMapping.createPredominanceRenderer: too many fields. Maximum supported is 5."),d.promise;var e=b.layer;e.addPlugin(Z).then(function(){var c=a.map(b.fields,function(a){return a.name});S(e,function(){var h=e.getOutFields()||[],k=-1!==a.indexOf(h,"*"),g=b.optimizeOutline,k=k?null:a.filter(c,function(b){return-1===a.indexOf(h,b)});e.url&&!fa.test(e.url)?O(d,"smartMapping.createPredominanceRenderer: predominance renderer is not supported for this layer. Make sure the layer supports advanced SQL expressions and standardized queries."):
k&&k.length?O(d,"smartMapping.createPredominanceRenderer: make sure the layer is configured to fetch all fields specified in parameters."):(g=g?e.statisticsPlugin.getSuggestedOutline("object"===typeof g?g:null):null,f(g).always(function(a){a&&!a.widthInfo&&(a=null);Qa(b,c,a,d)}))})}).otherwise(function(a){O(d,"smartMapping.createPredominanceRenderer: error when adding feature layer statistics plugin.")});return d.promise},createAgeInfo:function(a){var b=new c;if(!a||!a.layer||!a.startTime||!a.endTime)return O(b,
"smartMapping.createAgeInfo: missing parameters."),b.promise;var d=a.layer;d.addPlugin(Z).then(function(){var c=a.units?{units:a.units}:d.statisticsPlugin.getSuggestedAgeUnits({startTime:a.startTime,endTime:a.endTime});f(c).then(function(c){Ua(c,a,b)}).otherwise(function(a){O(b,"smartMapping.createAgeInfo: unable to calculate age units.")})}).otherwise(function(a){O(b,"smartMapping.createAgeInfo: error when adding feature layer statistics plugin.")});return b.promise},excludedFields:V,getSuggestedField:function(a){var b=
new c;if(!a||!(a.layer||a.fields&&a.objectIdField))return O(b,"smartMapping.getSuggestedField: missing parameters."),b.promise;a.layer?S(a.layer,function(){b.resolve(Va(a.layer.fields,a.layer.objectIdField))}):b.resolve(Va(a.fields,a.objectIdField));return b.promise}});return ia})},"esri/numberUtils":function(){define(["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(g,m,a,b){var d=function(a,b){return a-b},c={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(a){var b=
String(a),d=b.match(c._reNumber);a={integer:0,fractional:0};d&&d[1]?(a.integer=d[1].split("").length,a.fractional=d[3]?d[3].split("").length:0):-1<b.toLowerCase().indexOf("e")&&(d=b.split("e"),b=d[0],d=d[1],b&&d&&(b=Number(b),d=Number(d),(a=0<d)||(d=Math.abs(d)),b=c.getDigits(b),a?(b.integer+=d,b.fractional=d>b.fractional?0:b.fractional-d):(b.fractional+=d,b.integer=d>b.integer?1:b.integer-d),a=b));return a},getFixedNumbers:function(a,b){var c,d;c=Number(a.toFixed(b));c<a?d=c+1/Math.pow(10,b):(d=
c,c-=1/Math.pow(10,b));c=Number(c.toFixed(b));d=Number(d.toFixed(b));return[c,d]},getPctChange:function(a,b,c,d){var g={prev:null,next:null},m;null!=c&&(m=a-c,c=b-c-m,g.prev=Math.floor(Math.abs(100*c/m)));null!=d&&(m=d-a,c=d-b-m,g.next=Math.floor(Math.abs(100*c/m)));return g},round:function(a,b){var f=a.slice(0),e,g,m,u,t,w,v,x,B,A=!b||null==b.tolerance?2:b.tolerance,C=b&&b.indexes,z=!b||null==b.strictBounds?!1:b.strictBounds;if(C)C.sort(d);else{C=[];for(w=0;w<f.length;w++)C.push(w)}for(w=0;w<C.length;w++)if(B=
C[w],e=f[B],g=0===B?null:f[B-1],m=B===f.length-1?null:f[B+1],u=c.getDigits(e),u=u.fractional){v=0;for(x=!1;v<=u&&!x;)t=c.getFixedNumbers(e,v),t=z&&0===w?t[1]:t[0],x=c.hasMinimalChange(e,t,g,m,A),v++;x&&(f[B]=t)}return f},hasMinimalChange:function(a,b,d,e,g){a=c.getPctChange(a,b,d,e);b=null==a.prev||a.prev<=g;d=null==a.next||a.next<=g;return b&&d||a.prev+a.next<=2*g},_reAllZeros:RegExp("\\"+a.decimal+"0+$","g"),_reSomeZeros:RegExp("(\\d)0*$","g"),format:function(a,b){b=b||{places:20,round:-1};var d=
m.format(a,b);d&&(d=d.replace(c._reSomeZeros,"$1").replace(c._reAllZeros,""));return d}};return c})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(g,m,a){var b=g.forEach;return function(d){function c(a,b){f[b]=a;s.progress([a,b]);0===--u&&s.resolve(f)}var h,g;d instanceof Array?g=d:d&&"object"===typeof d&&(h=d);var f,e=[];if(h){g=[];for(var p in h)Object.hasOwnProperty.call(h,p)&&(e.push(p),g.push(h[p]));f={}}else g&&(f=[]);if(!g||!g.length)return(new m).resolve(f);
var s=new m;s.promise.always(function(){f=e=null});var u=g.length;b(g,function(b,d){h||e.push(d);a(b,function(a){c(a,e[d])},function(a){c(a,e[d])})});return s.promise}})},"esri/styles/type":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../Color ./colors".split(" "),function(g,m,a,b,d,c){function h(a,b){return g.map(a,function(a){a=new d(a);null!=b&&(a.a=b);return a})}function n(a,b,e){var f;if(a=c[a])switch(f={},f.colors=h(a.stops),f.noDataColor=new d(b.noDataColor),f.opacity=
b.fillOpacity||1,e){case "point":f.outline={color:new d(b.outline.color),width:b.outline.width};f.size=b.size;break;case "line":f.width=b.width;break;case "polygon":f.outline={color:new d(b.outline.color),width:b.outline.width}}return f}function f(a){"esriGeometryPoint"===a||"esriGeometryMultipoint"===a?a="point":"esriGeometryPolyline"===a?a="line":"esriGeometryPolygon"===a&&(a="polygon");return a}a={color:[153,153,153,1],width:1};b="tropical-bliss desert-blooms under-the-sea vibrant-rainbow ocean-bay prairie-summer pastel-chalk".split(" ");
var e={"default":{name:"default",label:"Default",description:"Default theme for visualizing features by their type.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm".split(" "),dark:["satellite","hybrid","dark-gray"]},pointSchemes:{light:{common:{noDataColor:"#aaaaaa",outline:a,size:8},primary:"cat-dark",secondary:["cat-light"].concat(b)},dark:{common:{noDataColor:"#aaaaaa",outline:{color:[26,26,26,1],width:1},size:8},primary:"cat-light",secondary:["cat-dark"].concat(b)}},
lineSchemes:{light:{common:{noDataColor:"#aaaaaa",width:2},primary:"cat-dark",secondary:["cat-light"].concat(b)},dark:{common:{noDataColor:"#aaaaaa",width:2},primary:"cat-light",secondary:["cat-dark"].concat(b)}},polygonSchemes:{light:{common:{noDataColor:"#aaaaaa",outline:a,fillOpacity:0.8},primary:"cat-dark",secondary:["cat-light"].concat(b)},dark:{common:{noDataColor:"#aaaaaa",outline:{color:[51,51,51,1],width:1},fillOpacity:0.8},primary:"cat-light",secondary:["cat-dark"].concat(b)}}}},p={};(function(){var a,
b,c,d,f,h,g,n;for(a in e)for(d in b=e[a],c=b.basemapGroups,f=p[a]={basemaps:[].concat(c.light).concat(c.dark),point:{},line:{},polygon:{}},c){h=c[d];for(g=0;g<h.length;g++)n=h[g],b.pointSchemes&&(f.point[n]=b.pointSchemes[d]),b.lineSchemes&&(f.line[n]=b.lineSchemes[d]),b.polygonSchemes&&(f.polygon[n]=b.polygonSchemes[d])}})();return{getAvailableThemes:function(a){var b=[],c,d,f;for(c in e)d=e[c],f=p[c],a&&-1===g.indexOf(f.basemaps,a)||b.push({name:d.name,label:d.label,description:d.description,basemaps:f.basemaps.slice(0)});
return b},getSchemes:function(a){var b=a.theme,c=a.basemap,d=f(a.geometryType);a=p[b];var e,h;(e=(e=a&&a[d])&&e[c])&&(h={primaryScheme:n(e.primary,e.common,d),secondarySchemes:g.map(e.secondary,function(a){return n(a,e.common,d)})});return h},cloneScheme:function(a){var b;a&&(b=m.mixin({},a),b.colors=h(b.colors),b.noDataColor&&(b.noDataColor=new d(b.noDataColor)),b.outline&&(b.outline={color:b.outline.color&&new d(b.outline.color),width:b.outline.width}));return b}}})},"esri/styles/colors":function(){define(["dojo/_base/lang",
"dojo/has","../kernel"],function(g,m,a){return{"seq-yellow-orange-red-bright":{1:["#ff7b22"],2:["#c0370f","#ff7b22"],3:["#b1260b","#e05919","#ff8e33"],4:["#a11506","#d04814","#ef6a1d","#ffa143"],5:["#a11506","#d04814","#ef6a1d","#ff8e33","#ffb454"],6:"#a11506 #c0370f #e05919 #ef6a1d #ff8e33 #ffb454".split(" "),7:"#a11506 #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffc764".split(" "),8:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffc764".split(" "),9:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74".split(" "),
10:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" "),stops:["#910000","#c33910","#f6711f","#fbaf52","#ffed85"]},"seq-yellow-pink-purple":{1:["#b65fa5"],2:["#e6b7c4","#b65fa5"],3:["#eecec9","#d588b9","#a14e96"],4:["#f6e5cf","#dd9fbf","#cc71b4","#8c3c88"],5:["#f6e5cf","#dd9fbf","#cc71b4","#a14e96","#762a79"],6:"#f6e5cf #e6b7c4 #d588b9 #cc71b4 #a14e96 #762a79".split(" "),7:"#f6e5cf #e6b7c4 #d588b9 #cc71b4 #b65fa5 #8c3c88 #61196a".split(" "),8:"#fffcd4 #eecec9 #e6b7c4 #d588b9 #cc71b4 #b65fa5 #8c3c88 #61196a".split(" "),
9:"#fffcd4 #eecec9 #e6b7c4 #d588b9 #cc71b4 #b65fa5 #8c3c88 #762a79 #4b075b".split(" "),10:"#fffcd4 #eecec9 #e6b7c4 #d588b9 #cc71b4 #b65fa5 #8c3c88 #762a79 #4b075b #350242".split(" "),stops:["#fffcd4","#e0b2c1","#c168ad","#7b3578","#350242"]},"seq-red-blue-green":{1:["#6193b3"],2:["#bac6df","#6193b3"],3:["#d1d1e5","#8cb1d2","#4e8099"],4:["#e8dbeb","#a3bbd8","#75a6cc","#3b6e80"],5:["#e8dbeb","#a3bbd8","#75a6cc","#4e8099","#275b67"],6:"#e8dbeb #bac6df #8cb1d2 #75a6cc #4e8099 #275b67".split(" "),7:"#e8dbeb #bac6df #8cb1d2 #75a6cc #6193b3 #3b6e80 #14484d".split(" "),
8:"#ffe6f1 #d1d1e5 #bac6df #8cb1d2 #75a6cc #6193b3 #3b6e80 #14484d".split(" "),9:"#ffe6f1 #d1d1e5 #bac6df #8cb1d2 #75a6cc #6193b3 #3b6e80 #275b67 #003534".split(" "),10:"#ffe6f1 #d1d1e5 #bac6df #8cb1d2 #75a6cc #6193b3 #3b6e80 #275b67 #003534 #002624".split(" "),stops:["#ffe6f1","#b5c2d9","#6b9dc0","#366272","#002624"]},"seq-pink-red":{1:["#c75c49"],2:["#ecacaa","#c75c49"],3:["#f1c1c5","#e18073","#b44f3b"],4:["#f6d7e0","#e6968e","#db6a58","#a1412c"],5:["#f6d7e0","#e6968e","#db6a58","#b44f3b","#8d331d"],
6:"#f6d7e0 #ecacaa #e18073 #db6a58 #b44f3b #8d331d".split(" "),7:"#f6d7e0 #ecacaa #e18073 #db6a58 #c75c49 #a1412c #7a260f".split(" "),8:"#fcedfb #f1c1c5 #ecacaa #e18073 #db6a58 #c75c49 #a1412c #7a260f".split(" "),9:"#fcedfb #f1c1c5 #ecacaa #e18073 #db6a58 #c75c49 #a1412c #8d331d #661800".split(" "),10:"#fcedfb #f1c1c5 #ecacaa #e18073 #db6a58 #c75c49 #a1412c #8d331d #661800 #510b00".split(" "),stops:["#fcedfb","#e7a8a6","#d16351","#913729","#510b00"]},"seq-yellow-purple-blue":{1:["#8573cb"],2:["#cdc1d9",
"#8573cb"],3:["#ddd4d7","#ab99db","#7062b9"],4:["#eee8d6","#bcadda","#9a85dd","#5a50a7"],5:["#eee8d6","#bcadda","#9a85dd","#7062b9","#453e94"],6:"#eee8d6 #cdc1d9 #ab99db #9a85dd #7062b9 #453e94".split(" "),7:"#eee8d6 #cdc1d9 #ab99db #9a85dd #8573cb #5a50a7 #302d82".split(" "),8:"#fffcd4 #ddd4d7 #cdc1d9 #ab99db #9a85dd #8573cb #5a50a7 #302d82".split(" "),9:"#fffcd4 #ddd4d7 #cdc1d9 #ab99db #9a85dd #8573cb #5a50a7 #453e94 #1b1b70".split(" "),10:"#fffcd4 #ddd4d7 #cdc1d9 #ab99db #9a85dd #8573cb #5a50a7 #453e94 #1b1b70 #10104f".split(" "),
stops:["#fffcd4","#c8bcd4","#907cd4","#504692","#10104f"]},"seq-yellow-orange-red":{1:["#d4743c"],2:["#f2c38e","#d4743c"],3:["#f6d6a5","#e99e5f","#c35d30"],4:["#fbe9bd","#eeb177","#e58b48","#b24625"],5:["#fbe9bd","#eeb177","#e58b48","#c35d30","#a12f19"],6:"#fbe9bd #f2c38e #e99e5f #e58b48 #c35d30 #a12f19".split(" "),7:"#fbe9bd #f2c38e #e99e5f #e58b48 #d4743c #b24625 #90180d".split(" "),8:"#fffcd4 #f6d6a5 #f2c38e #e99e5f #e58b48 #d4743c #b24625 #90180d".split(" "),9:"#fffcd4 #f6d6a5 #f2c38e #e99e5f #e58b48 #d4743c #b24625 #a12f19 #7f0101".split(" "),
10:"#fffcd4 #f6d6a5 #f2c38e #e99e5f #e58b48 #d4743c #b24625 #a12f19 #7f0101 #660000".split(" "),stops:["#fffcd4","#eebe8b","#dd8042","#a24021","#660000"]},"seq-yellow-green-blue":{1:["#5a93a8"],2:["#b4d2c6","#5a93a8"],3:["#cde0ca","#82b6bc","#4b7e98"],4:["#e6eecf","#9bc4c1","#69a8b7","#3d6a89"],5:["#e6eecf","#9bc4c1","#69a8b7","#4b7e98","#2e557a"],6:"#e6eecf #b4d2c6 #82b6bc #69a8b7 #4b7e98 #2e557a".split(" "),7:"#e6eecf #b4d2c6 #82b6bc #69a8b7 #5a93a8 #3d6a89 #1f406a".split(" "),8:"#fffcd4 #cde0ca #b4d2c6 #82b6bc #69a8b7 #5a93a8 #3d6a89 #1f406a".split(" "),
9:"#fffcd4 #cde0ca #b4d2c6 #82b6bc #69a8b7 #5a93a8 #3d6a89 #2e557a #102b5b".split(" "),10:"#fffcd4 #cde0ca #b4d2c6 #82b6bc #69a8b7 #5a93a8 #3d6a89 #2e557a #102b5b #0d2644".split(" "),stops:["#fffcd4","#b1cdc2","#629eb0","#38627a","#0d2644"]},"seq-yellow-red-purple":{1:["#c45762"],2:["#ecb29e","#c45762"],3:["#f2cbb0","#df817a","#af465d"],4:["#f8e3c2","#e5998c","#d86868","#9b3557"],5:["#f8e3c2","#e5998c","#d86868","#af465d","#872351"],6:"#f8e3c2 #ecb29e #df817a #d86868 #af465d #872351".split(" "),7:"#f8e3c2 #ecb29e #df817a #d86868 #c45762 #9b3557 #72124c".split(" "),
8:"#fffcd4 #f2cbb0 #ecb29e #df817a #d86868 #c45762 #9b3557 #72124c".split(" "),9:"#fffcd4 #f2cbb0 #ecb29e #df817a #d86868 #c45762 #9b3557 #872351 #5e0146".split(" "),10:"#fffcd4 #f2cbb0 #ecb29e #df817a #d86868 #c45762 #9b3557 #872351 #5e0146 #420239".split(" "),stops:["#fffcd4","#e7ae9d","#ce6065","#88314f","#420239"]},"seq-orange-red-light":{1:["#d15e3d"],2:["#f1b093","#d15e3d"],3:["#f5c5ab","#e78662","#c14c31"],4:["#fadac3","#ec9b7a","#e27149","#b13925"],5:["#fadac3","#ec9b7a","#e27149","#c14c31",
"#a02619"],6:"#fadac3 #f1b093 #e78662 #e27149 #c14c31 #a02619".split(" "),7:"#fadac3 #f1b093 #e78662 #e27149 #d15e3d #b13925 #90140d".split(" "),8:"#ffefdc #f5c5ab #f1b093 #e78662 #e27149 #d15e3d #b13925 #90140d".split(" "),9:"#ffefdc #f5c5ab #f1b093 #e78662 #e27149 #d15e3d #b13925 #a02619 #7f0101".split(" "),10:"#ffefdc #f5c5ab #f1b093 #e78662 #e27149 #d15e3d #b13925 #a02619 #7f0101 #660202".split(" "),stops:["#ffefdc","#edac90","#da6843","#a03523","#660202"]},"seq-orange-red-dark":{1:["#ab472f"],
2:["#dea28b","#ab472f"],3:["#e9bca6","#c76f54","#9b3926"],4:["#f4d5c1","#d2886f","#bc5539","#8b2b1d"],5:["#f4d5c1","#d2886f","#bc5539","#9b3926","#7a1c13"],6:"#f4d5c1 #dea28b #c76f54 #bc5539 #9b3926 #7a1c13".split(" "),7:"#f4d5c1 #dea28b #c76f54 #bc5539 #ab472f #8b2b1d #6a0e0a".split(" "),8:"#ffefdc #e9bca6 #dea28b #c76f54 #bc5539 #ab472f #8b2b1d #6a0e0a".split(" "),9:"#ffefdc #e9bca6 #dea28b #c76f54 #bc5539 #ab472f #8b2b1d #7a1c13 #590000".split(" "),10:"#ffefdc #e9bca6 #dea28b #c76f54 #bc5539 #ab472f #8b2b1d #7a1c13 #590000 #470000".split(" "),
stops:["#ffefdc","#d99f88","#b34e34","#7d271a","#470000"]},"seq-single-blues":{1:["#9ecae1"],2:["#bdd7e7","#6baed6"],3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:"#eff3ff #c6dbef #9ecae1 #6baed6 #3182bd #08519c".split(" "),7:"#eff3ff #c6dbef #9ecae1 #6baed6 #4292c6 #2171b5 #084594".split(" "),8:"#f7fbff #deebf7 #c6dbef #9ecae1 #6baed6 #4292c6 #2171b5 #084594".split(" "),9:"#f7fbff #deebf7 #c6dbef #9ecae1 #6baed6 #4292c6 #2171b5 #08519c #08306b".split(" "),
10:"#f7fbff #deebf7 #c6dbef #9ecae1 #6baed6 #4292c6 #2171b5 #08519c #083582 #022259".split(" "),stops:[[239,243,255,1],[189,215,231,1],[107,174,214,1],[49,130,189,1],[8,81,156,1]]},"seq-single-greens":{1:["#a1d99b"],2:["#bae4b3","#74c476"],3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:"#edf8e9 #c7e9c0 #a1d99b #74c476 #31a354 #006d2c".split(" "),7:"#edf8e9 #c7e9c0 #a1d99b #74c476 #41ab5d #238b45 #005a32".split(" "),
8:"#f7fcf5 #e5f5e0 #c7e9c0 #a1d99b #74c476 #41ab5d #238b45 #005a32".split(" "),9:"#f7fcf5 #e5f5e0 #c7e9c0 #a1d99b #74c476 #41ab5d #238b45 #006d2c #00441b".split(" "),10:"#f7fcf5 #e5f5e0 #c7e9c0 #a1d99b #74c476 #41ab5d #238b45 #006d2c #065220 #023414".split(" "),stops:[[237,248,233,1],[186,228,179,1],[116,196,118,1],[49,163,84,1],[0,109,44,1]]},"seq-single-grays":{1:["#bdbdbd"],2:["#cccccc","#969696"],3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc",
"#969696","#636363","#252525"],6:"#f7f7f7 #d9d9d9 #bdbdbd #969696 #636363 #252525".split(" "),7:"#f7f7f7 #d9d9d9 #bdbdbd #969696 #737373 #525252 #252525".split(" "),8:"#ffffff #f0f0f0 #d9d9d9 #bdbdbd #969696 #737373 #525252 #252525".split(" "),9:"#ffffff #f0f0f0 #d9d9d9 #bdbdbd #969696 #737373 #525252 #252525 #000000".split(" "),10:"#ffffff #f0f0f0 #d9d9d9 #bdbdbd #999999 #7a7a7a #595959 #404040 #262626 #000000".split(" "),stops:[[247,247,247,1],[204,204,204,1],[150,150,150,1],[99,99,99,1],[37,37,
37,1]]},"seq-single-oranges":{1:["#fdae6b"],2:["#fdbe85","#fd8d3c"],3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:"#feedde #fdd0a2 #fdae6b #fd8d3c #e6550d #a63603".split(" "),7:"#feedde #fdd0a2 #fdae6b #fd8d3c #f16913 #d94801 #8c2d04".split(" "),8:"#fff5eb #fee6ce #fdd0a2 #fdae6b #fd8d3c #f16913 #d94801 #8c2d04".split(" "),9:"#fff5eb #fee6ce #fdd0a2 #fdae6b #fd8d3c #f16913 #d94801 #a63603 #7f2704".split(" "),10:"#fff5eb #fee6ce #fdd0a2 #fdae6b #fd8d3c #f16913 #d94801 #a63603 #7f2704 #591502".split(" "),
stops:[[254,237,222,1],[253,190,133,1],[253,141,60,1],[230,85,13,1],[166,54,3,1]]},"seq-single-purples":{1:["#bcbddc"],2:["#cbc9e2","#9e9ac8"],3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:"#f2f0f7 #dadaeb #bcbddc #9e9ac8 #756bb1 #54278f".split(" "),7:"#f2f0f7 #dadaeb #bcbddc #9e9ac8 #807dba #6a51a3 #4a1486".split(" "),8:"#fcfbfd #efedf5 #dadaeb #bcbddc #9e9ac8 #807dba #6a51a3 #4a1486".split(" "),9:"#fcfbfd #efedf5 #dadaeb #bcbddc #9e9ac8 #807dba #6a51a3 #54278f #3f007d".split(" "),
10:"#fcfbfd #efedf5 #dadaeb #bcbddc #9e9ac8 #807dba #6a51a3 #54278f #3f007d #2d0059".split(" "),stops:[[242,240,247,1],[203,201,226,1],[158,154,200,1],[117,107,177,1],[84,39,143,1]]},"seq-single-reds":{1:["#fc9272"],2:["#fcae91","#fb6a4a"],3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:"#fee5d9 #fcbba1 #fc9272 #fb6a4a #de2d26 #a50f15".split(" "),7:"#fee5d9 #fcbba1 #fc9272 #fb6a4a #ef3b2c #cb181d #99000d".split(" "),
8:"#fff5f0 #fee0d2 #fcbba1 #fc9272 #fb6a4a #ef3b2c #cb181d #99000d".split(" "),9:"#fff5f0 #fee0d2 #fcbba1 #fc9272 #fb6a4a #ef3b2c #cb181d #a50f15 #67000d".split(" "),10:"#fff5f0 #fee0d2 #fcbba1 #fc9272 #fb6a4a #ef3b2c #cb181d #a50f15 #7d0011 #52000b".split(" "),stops:[[254,229,217,1],[252,174,145,1],[251,106,74,1],[222,45,38,1],[165,15,21,1]]},"seq-multi-bugn":{1:["#99d8c9"],2:["#b2e2e2","#66c2a4"],3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2",
"#66c2a4","#2ca25f","#006d2c"],6:"#edf8fb #ccece6 #99d8c9 #66c2a4 #2ca25f #006d2c".split(" "),7:"#edf8fb #ccece6 #99d8c9 #66c2a4 #41ae76 #238b45 #005824".split(" "),8:"#f7fcfd #e5f5f9 #ccece6 #99d8c9 #66c2a4 #41ae76 #238b45 #005824".split(" "),9:"#f7fcfd #e5f5f9 #ccece6 #99d8c9 #66c2a4 #41ae76 #238b45 #006d2c #00441b".split(" "),10:"#f7fcfd #e5f5f9 #ccece6 #99d8c9 #66c2a4 #41ae76 #238b45 #006d2c #005824 #033d18".split(" "),stops:[[237,248,251,1],[178,226,226,1],[102,194,164,1],[44,162,95,1],[0,109,
44,1]]},"seq-multi-bupu":{1:["#9ebcda"],2:["#b3cde3","#8c96c6"],3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:"#edf8fb #bfd3e6 #9ebcda #8c96c6 #8856a7 #810f7c".split(" "),7:"#edf8fb #bfd3e6 #9ebcda #8c96c6 #8c6bb1 #88419d #6e016b".split(" "),8:"#f7fcfd #e0ecf4 #bfd3e6 #9ebcda #8c96c6 #8c6bb1 #88419d #6e016b".split(" "),9:"#f7fcfd #e0ecf4 #bfd3e6 #9ebcda #8c96c6 #8c6bb1 #88419d #810f7c #4d004b".split(" "),10:"#f7fcfd #e0ecf4 #bfd3e6 #9ebcda #8c96c6 #8c6bb1 #88419d #810f7c #680066 #3f013f".split(" "),
stops:[[237,248,251,1],[179,205,227,1],[140,150,198,1],[136,86,167,1],[129,15,124,1]]},"seq-multi-gnbu":{1:["#a8ddb5"],2:["#bae4bc","#7bccc4"],3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:"#f0f9e8 #ccebc5 #a8ddb5 #7bccc4 #43a2ca #0868ac".split(" "),7:"#f0f9e8 #ccebc5 #a8ddb5 #7bccc4 #4eb3d3 #2b8cbe #08589e".split(" "),8:"#f7fcf0 #e0f3db #ccebc5 #a8ddb5 #7bccc4 #4eb3d3 #2b8cbe #08589e".split(" "),9:"#f7fcf0 #e0f3db #ccebc5 #a8ddb5 #7bccc4 #4eb3d3 #2b8cbe #0868ac #084081".split(" "),
10:"#f7fcf0 #e0f3db #ccebc5 #a8ddb5 #7bccc4 #4eb3d3 #2b8cbe #08589e #084081 #0e2f6b".split(" "),stops:[[240,249,232,1],[186,228,188,1],[123,204,196,1],[67,162,202,1],[8,104,172,1]]},"seq-multi-orrd":{1:["#fdbb84"],2:["#fdcc8a","#fc8d59"],3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:"#fef0d9 #fdd49e #fdbb84 #fc8d59 #e34a33 #b30000".split(" "),7:"#fef0d9 #fdd49e #fdbb84 #fc8d59 #ef6548 #d7301f #990000".split(" "),
8:"#fff7ec #fee8c8 #fdd49e #fdbb84 #fc8d59 #ef6548 #d7301f #990000".split(" "),9:"#fff7ec #fee8c8 #fdd49e #fdbb84 #fc8d59 #ef6548 #d7301f #b30000 #7f0000".split(" "),10:"#fff7ec #fee8c8 #fdd49e #fdbb84 #fc8d59 #ef6548 #d7301f #b30000 #8a0002 #660000".split(" "),stops:[[254,240,217,1],[253,204,138,1],[252,141,89,1],[227,74,51,1],[179,0,0,1]]},"seq-multi-pubu":{1:["#a6bddb"],2:["#bdc9e1","#74a9cf"],3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1",
"#74a9cf","#2b8cbe","#045a8d"],6:"#f1eef6 #d0d1e6 #a6bddb #74a9cf #2b8cbe #045a8d".split(" "),7:"#f1eef6 #d0d1e6 #a6bddb #74a9cf #3690c0 #0570b0 #034e7b".split(" "),8:"#fff7fb #ece7f2 #d0d1e6 #a6bddb #74a9cf #3690c0 #0570b0 #034e7b".split(" "),9:"#fff7fb #ece7f2 #d0d1e6 #a6bddb #74a9cf #3690c0 #0570b0 #045a8d #023858".split(" "),10:"#fff7fb #ece7f2 #d0d1e6 #a6bddb #74a9cf #3690c0 #0570b0 #045a8d #06436b #05304d".split(" "),stops:[[241,238,246,1],[189,201,225,1],[116,169,207,1],[43,140,190,1],[4,90,
141,1]]},"seq-multi-pubugn":{1:["#a6bddb"],2:["#bdc9e1","#67a9cf"],3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:"#f6eff7 #d0d1e6 #a6bddb #67a9cf #1c9099 #016c59".split(" "),7:"#f6eff7 #d0d1e6 #a6bddb #67a9cf #3690c0 #02818a #016450".split(" "),8:"#fff7fb #ece2f0 #d0d1e6 #a6bddb #67a9cf #3690c0 #02818a #016450".split(" "),9:"#fff7fb #ece2f0 #d0d1e6 #a6bddb #67a9cf #3690c0 #02818a #016c59 #014636".split(" "),10:"#fff7fb #ece2f0 #d0d1e6 #a6bddb #67a9cf #3690c0 #02818a #016c59 #095742 #073d2c".split(" "),
stops:[[246,239,247,1],[189,201,225,1],[103,169,207,1],[28,144,153,1],[1,108,89,1]]},"seq-multi-purd":{1:["#c994c7"],2:["#d7b5d8","#df65b0"],3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:"#f1eef6 #d4b9da #c994c7 #df65b0 #dd1c77 #980043".split(" "),7:"#f1eef6 #d4b9da #c994c7 #df65b0 #e7298a #ce1256 #91003f".split(" "),8:"#f7f4f9 #e7e1ef #d4b9da #c994c7 #df65b0 #e7298a #ce1256 #91003f".split(" "),9:"#f7f4f9 #e7e1ef #d4b9da #c994c7 #df65b0 #e7298a #ce1256 #980043 #67001f".split(" "),
10:"#f7f4f9 #e7e1ef #d4b9da #c994c7 #df65b0 #e7298a #ce1256 #980043 #67001f #48000c".split(" "),stops:[[241,238,246,1],[215,181,216,1],[223,101,176,1],[221,28,119,1],[152,0,67,1]]},"seq-multi-rdpu":{1:["#fa9fb5"],2:["#fbb4b9","#f768a1"],3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:"#feebe2 #fcc5c0 #fa9fb5 #f768a1 #c51b8a #7a0177".split(" "),7:"#feebe2 #fcc5c0 #fa9fb5 #f768a1 #dd3497 #ae017e #7a0177".split(" "),
8:"#fff7f3 #fde0dd #fcc5c0 #fa9fb5 #f768a1 #dd3497 #ae017e #7a0177".split(" "),9:"#fff7f3 #fde0dd #fcc5c0 #fa9fb5 #f768a1 #dd3497 #ae017e #7a0177 #49006a".split(" "),10:"#fff7f3 #fde0dd #fcc5c0 #fa9fb5 #f768a1 #dd3497 #ae017e #7a0177 #49006a #2d004d".split(" "),stops:[[254,235,226,1],[251,180,185,1],[247,104,161,1],[197,27,138,1],[122,1,119,1]]},"seq-multi-ylgn":{1:["#addd8e"],2:["#c2e699","#78c679"],3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699",
"#78c679","#31a354","#006837"],6:"#ffffcc #d9f0a3 #addd8e #78c679 #31a354 #006837".split(" "),7:"#ffffcc #d9f0a3 #addd8e #78c679 #41ab5d #238443 #005a32".split(" "),8:"#ffffe5 #f7fcb9 #d9f0a3 #addd8e #78c679 #41ab5d #238443 #005a32".split(" "),9:"#ffffe5 #f7fcb9 #d9f0a3 #addd8e #78c679 #41ab5d #238443 #006837 #004529".split(" "),10:"#ffffe5 #f7fcb9 #d9f0a3 #addd8e #78c679 #41ab5d #238443 #006837 #09522c #023827".split(" "),stops:[[255,255,204,1],[194,230,153,1],[120,198,121,1],[49,163,84,1],[0,104,
55,1]]},"seq-multi-ylgnbu":{1:["#7fcdbb"],2:["#a1dab4","#41b6c4"],3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:"#ffffcc #c7e9b4 #7fcdbb #41b6c4 #2c7fb8 #253494".split(" "),7:"#ffffcc #c7e9b4 #7fcdbb #41b6c4 #1d91c0 #225ea8 #0c2c84".split(" "),8:"#ffffd9 #edf8b1 #c7e9b4 #7fcdbb #41b6c4 #1d91c0 #225ea8 #0c2c84".split(" "),9:"#ffffd9 #edf8b1 #c7e9b4 #7fcdbb #41b6c4 #1d91c0 #225ea8 #253494 #081d58".split(" "),10:"#ffffd9 #edf8b1 #c7e9b4 #7fcdbb #41b6c4 #1d91c0 #225ea8 #2f419e #152875 #061b42".split(" "),
stops:[[255,255,204,1],[161,218,180,1],[65,182,196,1],[44,127,184,1],[37,52,148,1]]},"seq-multi-ylorbr":{1:["#fec44f"],2:["#fed98e","#fe9929"],3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:"#ffffd4 #fee391 #fec44f #fe9929 #d95f0e #993404".split(" "),7:"#ffffd4 #fee391 #fec44f #fe9929 #ec7014 #cc4c02 #8c2d04".split(" "),8:"#ffffe5 #fff7bc #fee391 #fec44f #fe9929 #ec7014 #cc4c02 #8c2d04".split(" "),9:"#ffffe5 #fff7bc #fee391 #fec44f #fe9929 #ec7014 #cc4c02 #993404 #662506".split(" "),
10:"#ffffe5 #fff7bc #fee391 #fec44f #fe9929 #ec7014 #cc4c02 #993404 #702607 #57220b".split(" "),stops:[[255,255,212,1],[254,217,142,1],[254,153,41,1],[217,95,14,1],[153,52,4,1]]},"seq-multi-ylorrd":{1:["#feb24c"],2:["#fecc5c","#fd8d3c"],3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:"#ffffb2 #fed976 #feb24c #fd8d3c #f03b20 #bd0026".split(" "),7:"#ffffb2 #fed976 #feb24c #fd8d3c #fc4e2a #e31a1c #b10026".split(" "),
8:"#ffffcc #ffeda0 #fed976 #feb24c #fd8d3c #fc4e2a #e31a1c #b10026".split(" "),9:"#ffffcc #ffeda0 #fed976 #feb24c #fd8d3c #fc4e2a #e31a1c #bd0026 #800026".split(" "),10:"#ffffcc #ffeda0 #fed976 #feb24c #fd8d3c #fc4e2a #e31a1c #bd0026 #940025 #67001f".split(" "),stops:[[255,255,178,1],[254,204,92,1],[253,141,60,1],[240,59,32,1],[189,0,38,1]]},"seq-teal-lightgreen-bright":{1:["#add46a"],2:["#e2ebd3","#2d8078"],3:["#e2ebd3","#add46a","#2d8078"],4:["#e2ebd3","#c8e09f","#add46a","#2d8078"],5:["#e2ebd3",
"#c8e09f","#add46a","#62afa7","#2d8078"],6:"#e2ebd3 #c8e09f #add46a #8fc890 #62afa7 #2d8078".split(" "),7:"#e2ebd3 #d5e5b9 #c8e09f #add46a #8fc890 #50a098 #2d8078".split(" "),8:"#e2ebd3 #d5e5b9 #c8e09f #add46a #8fc890 #73bfb7 #50a098 #2d8078".split(" "),9:"#e2ebd3 #d5e5b9 #c8e09f #add46a #8fc890 #73bfb7 #62afa7 #50a098 #2d8078".split(" "),10:"#e2ebd3 #d5e5b9 #c8e09f #bada84 #add46a #8fc890 #73bfb7 #62afa7 #50a098 #2d8078".split(" "),stops:["#e2ebd3","#c8e09f","#add46a","#62afa7","#2d8078"]},"seq-green-lightgray-bright":{1:["#a3af96"],
2:["#e6e4e1","#4e6605"],3:["#e6e4e1","#a3af96","#4e6605"],4:["#e6e4e1","#d9d7d6","#7c9e14","#4e6605"],5:["#e6e4e1","#d9d7d6","#a3af96","#7c9e14","#4e6605"],6:"#e6e4e1 #d9d7d6 #a3af96 #93ba1c #7c9e14 #4e6605".split(" "),7:"#e6e4e1 #d9d7d6 #c0bebe #a3af96 #93ba1c #7c9e14 #4e6605".split(" "),8:"#e6e4e1 #d9d7d6 #c0bebe #b3b1b3 #a3af96 #93ba1c #7c9e14 #4e6605".split(" "),9:"#e6e4e1 #d9d7d6 #c0bebe #b3b1b3 #a3af96 #93ba1c #7c9e14 #65820d #4e6605".split(" "),10:"#e6e4e1 #d9d7d6 #cdcbca #c0bebe #b3b1b3 #a3af96 #93ba1c #7c9e14 #65820d #4e6605".split(" "),
stops:["#e6e4e1","#d9d7d6","#a3af96","#7c9e14","#4e6605"]},"seq-red-lightgray-bright":{1:["#b3bfd1"],2:["#d7e1ee","#991f17"],3:["#d7e1ee","#b3bfd1","#991f17"],4:["#d7e1ee","#cbd6e4","#c86558","#991f17"],5:["#d7e1ee","#cbd6e4","#b3bfd1","#c86558","#991f17"],6:"#d7e1ee #cbd6e4 #b3bfd1 #df8879 #c86558 #991f17".split(" "),7:"#d7e1ee #cbd6e4 #bfcbdb #b3bfd1 #df8879 #c86558 #991f17".split(" "),8:"#d7e1ee #cbd6e4 #bfcbdb #b3bfd1 #df8879 #c86558 #b04238 #991f17".split(" "),9:"#d7e1ee #cbd6e4 #bfcbdb #b3bfd1 #a4a2a8 #df8879 #c86558 #b04238 #991f17".split(" "),
10:"#d7e1ee #cbd6e4 #bfcbdb #b3bfd1 #a7b4c7 #a4a2a8 #df8879 #c86558 #b04238 #991f17".split(" "),stops:["#d7e1ee","#cbd6e4","#b3bfd1","#c86558","#991f17"]},"seq-blue-lightgray-bright":{1:["#9cadb4"],2:["#ebe6df","#007f99"],3:["#ebe6df","#9cadb4","#007f99"],4:["#ebe6df","#c3beb9","#40a7b9","#007f99"],5:["#ebe6df","#c3beb9","#9cadb4","#40a7b9","#007f99"],6:"#ebe6df #ded9d2 #c3beb9 #9cadb4 #40a7b9 #007f99".split(" "),7:"#ebe6df #ded9d2 #c3beb9 #9cadb4 #40a7b9 #2093a9 #007f99".split(" "),8:"#ebe6df #ded9d2 #d1ccc6 #c3beb9 #9cadb4 #40a7b9 #2093a9 #007f99".split(" "),
9:"#ebe6df #ded9d2 #d1ccc6 #c3beb9 #9cadb4 #60bbc9 #40a7b9 #2093a9 #007f99".split(" "),10:"#ebe6df #ded9d2 #d1ccc6 #c3beb9 #b6b1ac #9cadb4 #60bbc9 #40a7b9 #2093a9 #007f99".split(" "),stops:["#ebe6df","#c3beb9","#9cadb4","#40a7b9","#007f99"]},"seq-orange-lightgray-bright":{1:["#b39e93"],2:["#dfe1e6","#8c4a23"],3:["#dfe1e6","#b39e93","#8c4a23"],4:["#dfe1e6","#bbbfc9","#c4703e","#8c4a23"],5:["#dfe1e6","#bbbfc9","#b39e93","#c4703e","#8c4a23"],6:"#dfe1e6 #d3d6dc #bbbfc9 #e0834c #c4703e #8c4a23".split(" "),
7:"#dfe1e6 #d3d6dc #bbbfc9 #b39e93 #e0834c #c4703e #8c4a23".split(" "),8:"#dfe1e6 #d3d6dc #c7cbd3 #bbbfc9 #b39e93 #e0834c #c4703e #8c4a23".split(" "),9:"#dfe1e6 #d3d6dc #c7cbd3 #bbbfc9 #b39e93 #e0834c #c4703e #a85d31 #8c4a23".split(" "),10:"#dfe1e6 #d3d6dc #c7cbd3 #bbbfc9 #afb4bf #b39e93 #e0834c #c4703e #a85d31 #8c4a23".split(" "),stops:["#dfe1e6","#bbbfc9","#b39e93","#c4703e","#8c4a23"]},"seq-blue-red-yellow-bright":{1:["#c59ca4"],2:["#eae2bb","#1d4e89"],3:["#eae2bb","#c59ca4","#1d4e89"],4:["#e9d7b8",
"#e8c9b3","#a48d9e","#606d94"],5:["#e9d7b8","#e8c9b3","#c59ca4","#a48d9e","#606d94"],6:"#eae2bb #e9d7b8 #e8c9b3 #a48d9e #606d94 #1d4e89".split(" "),7:"#eae2bb #e9d7b8 #e8c9b3 #c59ca4 #a48d9e #606d94 #1d4e89".split(" "),8:"#eae2bb #e9d7b8 #e8c9b3 #e8baae #c59ca4 #a48d9e #606d94 #1d4e89".split(" "),9:"#eae2bb #e9d7b8 #e8c9b3 #e8baae #c59ca4 #a48d9e #827d99 #606d94 #1d4e89".split(" "),10:"#eae2bb #e9d7b8 #e8c9b3 #e8baae #d7aba9 #c59ca4 #a48d9e #827d99 #606d94 #1d4e89".split(" "),stops:["#e9d7b8","#e8c9b3",
"#c59ca4","#a48d9e","#606d94"]},"seq-gray-lightgreen-bright":{1:["#b1bf85"],2:["#635e5e","#d9f191"],3:["#635e5e","#b1bf85","#d9f191"],4:["#635e5e","#928d8d","#c2e655","#d9f191"],5:["#635e5e","#928d8d","#b1bf85","#c2e655","#d9f191"],6:"#7b7676 #928d8d #aaa5a5 #b6e038 #c2e655 #d9f191".split(" "),7:"#7b7676 #928d8d #aaa5a5 #b1bf85 #b6e038 #c2e655 #d9f191".split(" "),8:"#7b7676 #928d8d #aaa5a5 #b1bf85 #b6e038 #c2e655 #ceec73 #d9f191".split(" "),9:"#635e5e #7b7676 #928d8d #aaa5a5 #b1bf85 #b6e038 #c2e655 #ceec73 #d9f191".split(" "),
10:"#635e5e #7b7676 #928d8d #aaa5a5 #b1bf85 #b6e038 #c2e655 #ceec73 #d9f191 #e5f7ae".split(" "),stops:["#635e5e","#928d8d","#b1bf85","#c2e655","#d9f191"]},"seq-blue-tan-bright":{1:["#afbac4"],2:["#ebe6df","#436480"],3:["#ebe6df","#afbac4","#436480"],4:["#ebe6df","#d9c2b1","#7d9ab3","#436480"],5:["#ebe6df","#d9c2b1","#afbac4","#7d9ab3","#436480"],6:"#ebe6df #e5dad0 #d9c2b1 #7d9ab3 #607f99 #436480".split(" "),7:"#ebe6df #e5dad0 #d9c2b1 #afbac4 #7d9ab3 #607f99 #436480".split(" "),8:"#ebe6df #e5dad0 #dfcec0 #d9c2b1 #afbac4 #7d9ab3 #607f99 #436480".split(" "),
9:"#ebe6df #e5dad0 #dfcec0 #d9c2b1 #c4bebc #afbac4 #7d9ab3 #607f99 #436480".split(" "),10:"#ebe6df #e5dad0 #dfcec0 #d9c2b1 #c4bebc #afbac4 #9ab5cc #7d9ab3 #607f99 #436480".split(" "),stops:["#ebe6df","#d9c2b1","#afbac4","#7d9ab3","#436480"]},"seq-teal-lightbrown-bright":{1:["#aabdb5"],2:["#eee2cf","#3b758c"],3:["#eee2cf","#aabdb5","#3b758c"],4:["#eee2cf","#dbd0b9","#74a2b3","#3b758c"],5:["#eee2cf","#dbd0b9","#aabdb5","#74a2b3","#3b758c"],6:"#eee2cf #e4d9c4 #dbd0b9 #74a2b3 #588ba0 #3b758c".split(" "),
7:"#eee2cf #e4d9c4 #dbd0b9 #aabdb5 #74a2b3 #588ba0 #3b758c".split(" "),8:"#eee2cf #e4d9c4 #dbd0b9 #c7bea2 #aabdb5 #74a2b3 #588ba0 #3b758c".split(" "),9:"#eee2cf #e4d9c4 #dbd0b9 #c7bea2 #aabdb5 #91b8c7 #74a2b3 #588ba0 #3b758c".split(" "),10:"#eee2cf #e4d9c4 #dbd0b9 #d1c7ad #c7bea2 #aabdb5 #91b8c7 #74a2b3 #588ba0 #3b758c".split(" "),stops:["#eee2cf","#dbd0b9","#aabdb5","#74a2b3","#3b758c"]},"seq-reds-bright":{1:["#ec5244"],2:["#7b4238","#fff0dc"],3:["#7b4238","#ec5244","#fff0dc"],4:["#57453b","#c23d33",
"#f9816c","#fff0dc"],5:["#7b4238","#c23d33","#ec5244","#f9816c","#ffc4ae"],6:"#7b4238 #c23d33 #ec5244 #f9816c #ffc4ae #fff0dc".split(" "),7:"#57453b #7b4238 #c23d33 #ec5244 #f9816c #ffc4ae #fff0dc".split(" "),8:"#7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae".split(" "),9:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae".split(" "),10:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" "),stops:["#7b4238","#c23d33","#ec5244",
"#f9816c","#ffc4ae"]},"seq-purples-bright":{1:["#946bdc"],2:["#5a4a78","#e6e1ff"],3:["#5a4a78","#946bdc","#e6e1ff"],4:["#4e465c","#695291","#aa89e8","#e6e1ff"],5:["#4e465c","#695291","#8663c3","#aa89e8","#d7c4ff"],6:"#5a4a78 #775baa #946bdc #aa89e8 #d7c4ff #e6e1ff".split(" "),7:"#4e465c #5a4a78 #775baa #946bdc #aa89e8 #d7c4ff #e6e1ff".split(" "),8:"#5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff".split(" "),9:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff".split(" "),
10:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" "),stops:["#4e465c","#695291","#8663c3","#aa89e8","#d7c4ff"]},"seq-blues-bright":{1:["#50a5e7"],2:["#435c6c","#e6faff"],3:["#435c6c","#50a5e7","#e6faff"],4:["#404d54","#48799d","#74bbed","#e6faff"],5:["#404d54","#48799d","#4d96ce","#74bbed","#bce6f9"],6:"#435c6c #4b88b6 #4d96ce #74bbed #bce6f9 #e6faff".split(" "),7:"#404d54 #435c6c #4b88b6 #4d96ce #74bbed #bce6f9 #e6faff".split(" "),8:"#435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9".split(" "),
9:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9".split(" "),10:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" "),stops:["#404d54","#48799d","#4d96ce","#74bbed","#bce6f9"]},"seq-greens-bright":{1:["#33b581"],2:["#39544c","#f4ffea"],3:["#39544c","#4bc392","#f4ffea"],4:["#39544c","#368165","#64d2a2","#f4ffea"],5:["#39544c","#368165","#33b581","#64d2a2","#cbf6d9"],6:"#39544c #386757 #359b73 #4bc392 #7ce0b3 #f4ffea".split(" "),7:"#39544c #386757 #359b73 #4bc392 #64d2a2 #cbf6d9 #f4ffea".split(" "),
8:"#386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9".split(" "),9:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9".split(" "),10:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" "),stops:["#39544c","#368165","#33b581","#64d2a2","#cbf6d9"]},"seq-browns-bright":{1:["#eba748"],2:["#524834","#f9e0b7"],3:["#524834","#eba748","#f9e0b7"],4:["#524834","#ae8140","#eeb664","#f9e0b7"],5:["#715b38","#ae8140","#cc9444","#eeb664",
"#f9e0b7"],6:"#524834 #715b38 #ae8140 #eba748 #f0c47f #fff8eb".split(" "),7:"#524834 #715b38 #8f6e3c #ae8140 #eba748 #f0c47f #fff8eb".split(" "),8:"#715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7".split(" "),9:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7".split(" "),10:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" "),stops:["#715b38","#ae8140","#cc9444","#eeb664","#f9e0b7"]},"seq-dark-to-light-magenta-bright":{1:["#ec2e96"],
2:["#614149","#fff0ff"],3:["#614149","#ec2e96","#fff0ff"],4:["#7c3d58","#c33381","#ec90c6","#fff0ff"],5:["#7c3d58","#c33381","#e84fa6","#ec90c6","#fff0ff"],6:"#614149 #7c3d58 #c33381 #e84fa6 #ec90c6 #fff0ff".split(" "),7:"#614149 #7c3d58 #c33381 #ec2e96 #ea6fb6 #ec90c6 #fff0ff".split(" "),8:"#7c3d58 #9f386d #c33381 #ec2e96 #e84fa6 #ea6fb6 #ec90c6 #edb2d4".split(" "),9:"#614149 #7c3d58 #9f386d #c33381 #ec2e96 #e84fa6 #ea6fb6 #ec90c6 #edb2d4".split(" "),10:"#614149 #7c3d58 #9f386d #c33381 #ec2e96 #e84fa6 #ea6fb6 #ec90c6 #edb2d4 #fff0ff".split(" "),
stops:["#7c3d58","#c33381","#e84fa6","#ec90c6","#fff0ff"]},"seq-dark-to-light-purple-bright":{1:["#8b87e4"],2:["#4a4672","#f0f0ff"],3:["#4a4672","#8b87e4","#f0f0ff"],4:["#545086","#6f6abb","#aaa7ff","#f0f0ff"],5:["#545086","#6f6abb","#8b87e4","#aaa7ff","#f0f0ff"],6:"#4a4672 #545086 #6f6abb #8b87e4 #aaa7ff #f0f0ff".split(" "),7:"#545086 #615da1 #6f6abb #7c77d6 #9b97f1 #aaa7ff #f0f0ff".split(" "),8:"#545086 #615da1 #6f6abb #7c77d6 #8b87e4 #9b97f1 #aaa7ff #cdccff".split(" "),9:"#4a4672 #545086 #615da1 #6f6abb #7c77d6 #8b87e4 #9b97f1 #aaa7ff #cdccff".split(" "),
10:"#4a4672 #545086 #615da1 #6f6abb #7c77d6 #8b87e4 #9b97f1 #aaa7ff #cdccff #f0f0ff".split(" "),stops:["#545086","#6f6abb","#8b87e4","#aaa7ff","#f0f0ff"]},"seq-dark-to-light-blue-bright":{1:["#5686ff"],2:["#41495f","#e6f5fa"],3:["#41495f","#5686ff","#e6f5fa"],4:["#45537a","#4e6dbd","#96b8fe","#e6f5fa"],5:["#45537a","#4e6dbd","#5686ff","#96b8fe","#e6f5fa"],6:"#41495f #45537a #4e6dbd #5686ff #96b8fe #e6f5fa".split(" "),7:"#45537a #49609b #4e6dbd #5279de #769ffe #96b8fe #e6f5fa".split(" "),8:"#45537a #49609b #4e6dbd #5279de #5686ff #769ffe #96b8fe #b6d1fd".split(" "),
9:"#41495f #45537a #49609b #4e6dbd #5279de #5686ff #769ffe #96b8fe #b6d1fd".split(" "),10:"#41495f #45537a #49609b #4e6dbd #5279de #5686ff #769ffe #96b8fe #b6d1fd #e6f5fa".split(" "),stops:["#45537a","#4e6dbd","#5686ff","#96b8fe","#e6f5fa"]},"seq-dark-to-light-green-bright":{1:["#72c66d"],2:["#3d5439","#f5fff2"],3:["#3d5439","#72c66d","#f5fff2"],4:["#43683f","#5b9756","#b7e3b2","#f5fff2"],5:["#43683f","#5b9756","#72c66d","#b7e3b2","#f5fff2"],6:"#3d5439 #43683f #5b9756 #72c66d #b7e3b2 #f5fff2".split(" "),
7:"#43683f #4f804b #5b9756 #66af62 #95d490 #b7e3b2 #f5fff2".split(" "),8:"#43683f #4f804b #5b9756 #66af62 #72c66d #95d490 #b7e3b2 #daf1d5".split(" "),9:"#3d5439 #43683f #4f804b #5b9756 #66af62 #72c66d #95d490 #b7e3b2 #daf1d5".split(" "),10:"#3d5439 #43683f #4f804b #5b9756 #66af62 #72c66d #95d490 #b7e3b2 #daf1d5 #f5fff2".split(" "),stops:["#43683f","#5b9756","#72c66d","#b7e3b2","#f5fff2"]},"seq-brown-to-tan-bright":{1:["#d69253"],2:["#594439","#fff5e6"],3:["#594439","#d69253","#fff5e6"],4:["#744d30",
"#af6b2f","#ebc39a","#fff5e6"],5:["#744d30","#af6b2f","#d69253","#ebc39a","#fff5e6"],6:"#594439 #744d30 #af6b2f #d69253 #ebc39a #fff5e6".split(" "),7:"#744d30 #915c30 #af6b2f #cc7a2f #e1ab76 #ebc39a #fff5e6".split(" "),8:"#744d30 #915c30 #af6b2f #cc7a2f #d69253 #e1ab76 #ebc39a #f5dbbd".split(" "),9:"#594439 #744d30 #915c30 #af6b2f #cc7a2f #d69253 #e1ab76 #ebc39a #f5dbbd".split(" "),10:"#594439 #744d30 #915c30 #af6b2f #cc7a2f #d69253 #e1ab76 #ebc39a #f5dbbd #fff5e6".split(" "),stops:["#744d30","#af6b2f",
"#d69253","#ebc39a","#fff5e6"]},"seq-lightgray-blue-bright":{1:["#6e8d99"],2:["#325361","#faefdb"],3:["#325361","#6e8d99","#faefdb"],4:["#325361","#2f7589","#bcb4a6","#faefdb"],5:["#325361","#2f7589","#6e8d99","#bcb4a6","#faefdb"],6:"#325361 #316475 #2e859c #bcb4a6 #dbd2c0 #faefdb".split(" "),7:"#325361 #316475 #2e859c #6e8d99 #bcb4a6 #dbd2c0 #faefdb".split(" "),8:"#325361 #316475 #2f7589 #2e859c #9d978b #bcb4a6 #dbd2c0 #faefdb".split(" "),9:"#325361 #316475 #2f7589 #2e859c #6e8d99 #9d978b #bcb4a6 #dbd2c0 #faefdb".split(" "),
10:"#325361 #316475 #2f7589 #2e859c #2c96b0 #6e8d99 #9d978b #bcb4a6 #dbd2c0 #faefdb".split(" "),stops:["#325361","#2f7589","#6e8d99","#bcb4a6","#faefdb"]},"seq-lightgray-green-bright":{1:["#6f9988"],2:["#2c593f","#e6f4ff"],3:["#2c593f","#6f9988","#e6f4ff"],4:["#2c593f","#387c55","#aab5c0","#e6f4ff"],5:["#2c593f","#387c55","#6f9988","#aab5c0","#e6f4ff"],6:"#2e6a46 #387c55 #4ba072 #8c96a0 #aab5c0 #e6f4ff".split(" "),7:"#2e6a46 #387c55 #418e63 #6f9988 #8c96a0 #aab5c0 #e6f4ff".split(" "),8:"#2e6a46 #387c55 #418e63 #4ba072 #8c96a0 #aab5c0 #c8d5df #e6f4ff".split(" "),
9:"#2e6a46 #387c55 #418e63 #4ba072 #6f9988 #8c96a0 #aab5c0 #c8d5df #e6f4ff".split(" "),10:"#2c593f #2e6a46 #387c55 #418e63 #4ba072 #6f9988 #8c96a0 #aab5c0 #c8d5df #e6f4ff".split(" "),stops:["#2c593f","#387c55","#6f9988","#aab5c0","#e6f4ff"]},"seq-lightgray-darkmagenta-bright":{1:["#a3829b"],2:["#5c3a5b","#faefdb"],3:["#5c3a5b","#a3829b","#faefdb"],4:["#5c3a5b","#864d84","#bcb4a6","#faefdb"],5:["#5c3a5b","#864d84","#a3829b","#bcb4a6","#faefdb"],6:"#5c3a5b #71446f #9b5798 #9d978b #bcb4a6 #faefdb".split(" "),
7:"#5c3a5b #71446f #9b5798 #a3829b #9d978b #bcb4a6 #faefdb".split(" "),8:"#5c3a5b #71446f #864d84 #9b5798 #9d978b #bcb4a6 #dbd2c0 #faefdb".split(" "),9:"#5c3a5b #71446f #864d84 #9b5798 #a3829b #9d978b #bcb4a6 #dbd2c0 #faefdb".split(" "),10:"#5c3a5b #71446f #864d84 #9b5798 #b060ac #a3829b #9d978b #bcb4a6 #dbd2c0 #faefdb".split(" "),stops:["#5c3a5b","#864d84","#a3829b","#bcb4a6","#faefdb"]},"seq-yellow-darkblue-bright":{1:["#799a96"],2:["#3a4d6b","#ffec99"],3:["#3a4d6b","#799a96","#ffec99"],4:["#3a4d6b",
"#3d6da2","#ccbe6a","#ffec99"],5:["#3a4d6b","#3d6da2","#799a96","#ccbe6a","#ffec99"],6:"#3b5d87 #3d6da2 #3e7cbe #b3a752 #ccbe6a #ffec99".split(" "),7:"#3b5d87 #3d6da2 #3e7cbe #799a96 #b3a752 #ccbe6a #ffec99".split(" "),8:"#3b5d87 #3d6da2 #3e7cbe #3f8cd9 #b3a752 #ccbe6a #e6d581 #ffec99".split(" "),9:"#3b5d87 #3d6da2 #3e7cbe #3f8cd9 #799a96 #b3a752 #ccbe6a #e6d581 #ffec99".split(" "),10:"#3a4d6b #3b5d87 #3d6da2 #3e7cbe #3f8cd9 #799a96 #b3a752 #ccbe6a #e6d581 #ffec99".split(" "),stops:["#3a4d6b","#3d6da2",
"#799a96","#ccbe6a","#ffec99"]},"seq-lightred-darkgray-bright":{1:["#948889"],2:["#484c59","#ffe9e6"],3:["#484c59","#948889","#ffe9e6"],4:["#484c59","#63687a","#e0b9b5","#ffe9e6"],5:["#484c59","#63687a","#948889","#e0b9b5","#ffe9e6"],6:"#484c59 #63687a #71768a #c18983 #f0d1cd #ffe9e6".split(" "),7:"#484c59 #63687a #71768a #948889 #d1a19c #f0d1cd #ffe9e6".split(" "),8:"#484c59 #565a69 #63687a #71768a #d1a19c #e0b9b5 #f0d1cd #ffe9e6".split(" "),9:"#484c59 #565a69 #63687a #71768a #c18983 #d1a19c #e0b9b5 #f0d1cd #ffe9e6".split(" "),
10:"#484c59 #565a69 #63687a #71768a #948889 #c18983 #d1a19c #e0b9b5 #f0d1cd #ffe9e6".split(" "),stops:["#484c59","#63687a","#948889","#e0b9b5","#ffe9e6"]},"seq-lightmagenta-darkgray-bright":{1:["#9e8998"],2:["#4d4d41","#ffe1ff"],3:["#4d4d41","#9e8998","#ffe1ff"],4:["#4d4d41","#77756a","#e8a3e8","#ffe1ff"],5:["#4d4d41","#77756a","#9e8998","#e8a3e8","#ffe1ff"],6:"#4d4d41 #626155 #77756a #dd83dd #e8a3e8 #ffe1ff".split(" "),7:"#4d4d41 #626155 #77756a #9e8998 #dd83dd #e8a3e8 #ffe1ff".split(" "),8:"#4d4d41 #626155 #77756a #8c897e #dd83dd #e8a3e8 #f4c2f4 #ffe1ff".split(" "),
9:"#4d4d41 #626155 #77756a #8c897e #9e8998 #dd83dd #e8a3e8 #f4c2f4 #ffe1ff".split(" "),10:"#4d4d41 #626155 #77756a #8c897e #9e8998 #d164d1 #dd83dd #e8a3e8 #f4c2f4 #ffe1ff".split(" "),stops:["#4d4d41","#77756a","#9e8998","#e8a3e8","#ffe1ff"]},"seq-lightblue-darkgray-bright":{1:["#7d8e93"],2:["#4c4a44","#d9fcff"],3:["#4c4a44","#7d8e93","#d9fcff"],4:["#4c4a44","#6d6a63","#9cd2dc","#d9fcff"],5:["#4c4a44","#6d6a63","#7d8e93","#9cd2dc","#d9fcff"],6:"#4c4a44 #5c5a53 #6d6a63 #7ebdca #9cd2dc #d9fcff".split(" "),
7:"#4c4a44 #5c5a53 #6d6a63 #7d8e93 #7ebdca #9cd2dc #d9fcff".split(" "),8:"#4c4a44 #5c5a53 #6d6a63 #7d7a72 #7ebdca #9cd2dc #bbe7ed #d9fcff".split(" "),9:"#4c4a44 #5c5a53 #6d6a63 #7d7a72 #7d8e93 #7ebdca #9cd2dc #bbe7ed #d9fcff".split(" "),10:"#4c4a44 #5c5a53 #6d6a63 #7d7a72 #7d8e93 #5fa8b8 #7ebdca #9cd2dc #bbe7ed #d9fcff".split(" "),stops:["#4c4a44","#6d6a63","#7d8e93","#9cd2dc","#d9fcff"]},"div-orange-pink":{1:["#b796b8"],2:["#d8a79c","#b796b8"],3:["#d8a79c","#ffffff","#b796b8"],4:["#bf6d59","#e5c4bd",
"#cfb9d0","#874f88"],5:["#bf6d59","#e5c4bd","#ffffff","#cfb9d0","#874f88"],6:"#b24f38 #d8a79c #f2e2de #e7dce7 #b796b8 #6f2c71".split(" "),7:"#b24f38 #d8a79c #f2e2de #ffffff #e7dce7 #b796b8 #6f2c71".split(" "),8:"#b24f38 #cc8a7a #e5c4bd #f2e2de #e7dce7 #cfb9d0 #9f72a0 #6f2c71".split(" "),9:"#b24f38 #cc8a7a #e5c4bd #f2e2de #ffffff #e7dce7 #cfb9d0 #9f72a0 #6f2c71".split(" "),10:"#a53217 #b24f38 #cc8a7a #e5c4bd #f2e2de #e7dce7 #cfb9d0 #9f72a0 #6f2c71 #570959".split(" "),stops:["#a53217","#d2998b","#ffffff",
"#ab84ac","#570959"]},"div-orange-yellow-pink":{1:["#b795aa"],2:["#d8a78d","#b795aa"],3:["#d8a78d","#fffee6","#b795aa"],4:["#bf6c52","#e5c4ab","#cfb8be","#874f81"],5:["#bf6c52","#e5c4ab","#fffee6","#cfb8be","#874f81"],6:"#b24f35 #d8a78d #f2e1c8 #e7dbd2 #b795aa #6f2c6d".split(" "),7:"#b24f35 #d8a78d #f2e1c8 #fffee6 #e7dbd2 #b795aa #6f2c6d".split(" "),8:"#b24f35 #cc8970 #e5c4ab #f2e1c8 #e7dbd2 #cfb8be #9f7295 #6f2c6d".split(" "),9:"#b24f35 #cc8970 #e5c4ab #f2e1c8 #fffee6 #e7dbd2 #cfb8be #9f7295 #6f2c6d".split(" "),
10:"#a53217 #b24f35 #cc8970 #e5c4ab #f2e1c8 #e7dbd2 #cfb8be #9f7295 #6f2c6d #570959".split(" "),stops:["#a53217","#d2987f","#fffee6","#ab84a0","#570959"]},"div-bluegreen-redpurple":{1:["#bd929b"],2:["#92aeaa","#bd929b"],3:["#92aeaa","#ffffff","#bd929b"],4:["#497871","#b6c9c6","#d3b6bc","#924959"],5:["#497871","#b6c9c6","#ffffff","#d3b6bc","#924959"],6:"#245d54 #92aeaa #dbe4e3 #e9dbde #bd929b #7c2437".split(" "),7:"#245d54 #92aeaa #dbe4e3 #ffffff #e9dbde #bd929b #7c2437".split(" "),8:"#245d54 #6d938d #b6c9c6 #dbe4e3 #e9dbde #d3b6bc #a86d7a #7c2437".split(" "),
9:"#245d54 #6d938d #b6c9c6 #dbe4e3 #ffffff #e9dbde #d3b6bc #a86d7a #7c2437".split(" "),10:"#004238 #245d54 #6d938d #b6c9c6 #dbe4e3 #e9dbde #d3b6bc #a86d7a #7c2437 #660016".split(" "),stops:["#004238","#80a19c","#ffffff","#b3808b","#660016"]},"div-bluegreen-yellow-redpurple":{1:["#bd918d"],2:["#92ad9b","#bd918d"],3:["#92ad9b","#fffee6","#bd918d"],4:["#49786a","#b6c8b4","#d3b5ab","#924951"],5:["#49786a","#b6c8b4","#fffee6","#d3b5ab","#924951"],6:"#245d51 #92ad9b #dbe3cd #e9dac8 #bd918d #7c2434".split(" "),
7:"#245d51 #92ad9b #dbe3cd #fffee6 #e9dac8 #bd918d #7c2434".split(" "),8:"#245d51 #6d9383 #b6c8b4 #dbe3cd #e9dac8 #d3b5ab #a86d6f #7c2434".split(" "),9:"#245d51 #6d9383 #b6c8b4 #dbe3cd #fffee6 #e9dac8 #d3b5ab #a86d6f #7c2434".split(" "),10:"#004238 #245d51 #6d9383 #b6c8b4 #dbe3cd #e9dac8 #d3b5ab #a86d6f #7c2434 #660016".split(" "),stops:["#004238","#80a08f","#fffee6","#b37f7e","#660016"]},"div-green-orange":{1:["#d8a79c"],2:["#aab193","#d8a79c"],3:["#aab193","#ffffff","#d8a79c"],4:["#717d4b","#c6cbb7",
"#e5c4bd","#bf6d59"],5:["#717d4b","#c6cbb7","#ffffff","#e5c4bd","#bf6d59"],6:"#546327 #aab193 #e3e5db #f2e2de #d8a79c #b24f38".split(" "),7:"#546327 #aab193 #e3e5db #ffffff #f2e2de #d8a79c #b24f38".split(" "),8:"#546327 #8d976f #c6cbb7 #e3e5db #f2e2de #e5c4bd #cc8a7a #b24f38".split(" "),9:"#546327 #8d976f #c6cbb7 #e3e5db #ffffff #f2e2de #e5c4bd #cc8a7a #b24f38".split(" "),10:"#384903 #546327 #8d976f #c6cbb7 #e3e5db #f2e2de #e5c4bd #cc8a7a #b24f38 #a53217".split(" "),stops:["#384903","#9ca481","#ffffff",
"#d2998b","#a53217"]},"div-green-yellow-orange":{1:["#d8a78d"],2:["#aab085","#d8a78d"],3:["#aab085","#fffee6","#d8a78d"],4:["#717d44","#c6caa5","#e5c4ab","#bf6c52"],5:["#717d44","#c6caa5","#fffee6","#e5c4ab","#bf6c52"],6:"#546323 #aab085 #e3e4c6 #f2e1c8 #d8a78d #b24f35".split(" "),7:"#546323 #aab085 #e3e4c6 #fffee6 #f2e1c8 #d8a78d #b24f35".split(" "),8:"#546323 #8d9764 #c6caa5 #e3e4c6 #f2e1c8 #e5c4ab #cc8970 #b24f35".split(" "),9:"#546323 #8d9764 #c6caa5 #e3e4c6 #fffee6 #f2e1c8 #e5c4ab #cc8970 #b24f35".split(" "),
10:"#384903 #546323 #8d9764 #c6caa5 #e3e4c6 #f2e1c8 #e5c4ab #cc8970 #b24f35 #a53217".split(" "),stops:["#384903","#9ca375","#fffee6","#d2987f","#a53217"]},"div-bluegreen-orange":{1:["#d8a79c"],2:["#92aeaa","#d8a79c"],3:["#92aeaa","#ffffff","#d8a79c"],4:["#497871","#b6c9c6","#e5c4bd","#bf6d59"],5:["#497871","#b6c9c6","#ffffff","#e5c4bd","#bf6d59"],6:"#245d54 #92aeaa #dbe4e3 #f2e2de #d8a79c #b24f38".split(" "),7:"#245d54 #92aeaa #dbe4e3 #ffffff #f2e2de #d8a79c #b24f38".split(" "),8:"#245d54 #6d938d #b6c9c6 #dbe4e3 #f2e2de #e5c4bd #cc8a7a #b24f38".split(" "),
9:"#245d54 #6d938d #b6c9c6 #dbe4e3 #ffffff #f2e2de #e5c4bd #cc8a7a #b24f38".split(" "),10:"#004238 #245d54 #6d938d #b6c9c6 #dbe4e3 #f2e2de #e5c4bd #cc8a7a #b24f38 #a53217".split(" "),stops:["#004238","#80a19c","#ffffff","#d2998b","#a53217"]},"div-bluegreen-yellow-orange":{1:["#d8a78d"],2:["#92ad9b","#d8a78d"],3:["#92ad9b","#fffee6","#d8a78d"],4:["#49786a","#b6c8b4","#e5c4ab","#bf6c52"],5:["#49786a","#b6c8b4","#fffee6","#e5c4ab","#bf6c52"],6:"#245d51 #92ad9b #dbe3cd #f2e1c8 #d8a78d #b24f35".split(" "),
7:"#245d51 #92ad9b #dbe3cd #fffee6 #f2e1c8 #d8a78d #b24f35".split(" "),8:"#245d51 #6d9383 #b6c8b4 #dbe3cd #f2e1c8 #e5c4ab #cc8970 #b24f35".split(" "),9:"#245d51 #6d9383 #b6c8b4 #dbe3cd #fffee6 #f2e1c8 #e5c4ab #cc8970 #b24f35".split(" "),10:"#004238 #245d51 #6d9383 #b6c8b4 #dbe3cd #f2e1c8 #e5c4ab #cc8970 #b24f35 #a53217".split(" "),stops:["#004238","#80a08f","#fffee6","#d2987f","#a53217"]},"div-green-redpurple":{1:["#bd929b"],2:["#aab193","#bd929b"],3:["#aab193","#ffffff","#bd929b"],4:["#717d4b","#c6cbb7",
"#d3b6bc","#924959"],5:["#717d4b","#c6cbb7","#ffffff","#d3b6bc","#924959"],6:"#546327 #aab193 #e3e5db #e9dbde #bd929b #7c2437".split(" "),7:"#546327 #aab193 #e3e5db #ffffff #e9dbde #bd929b #7c2437".split(" "),8:"#546327 #8d976f #c6cbb7 #e3e5db #e9dbde #d3b6bc #a86d7a #7c2437".split(" "),9:"#546327 #8d976f #c6cbb7 #e3e5db #ffffff #e9dbde #d3b6bc #a86d7a #7c2437".split(" "),10:"#384903 #546327 #8d976f #c6cbb7 #e3e5db #e9dbde #d3b6bc #a86d7a #7c2437 #660016".split(" "),stops:["#384903","#9ca481","#ffffff",
"#b3808b","#660016"]},"div-green-yellow-redpurple":{1:["#bd918d"],2:["#aab085","#bd918d"],3:["#aab085","#fffee6","#bd918d"],4:["#717d44","#c6caa5","#d3b5ab","#924951"],5:["#717d44","#c6caa5","#fffee6","#d3b5ab","#924951"],6:"#546323 #aab085 #e3e4c6 #e9dac8 #bd918d #7c2434".split(" "),7:"#546323 #aab085 #e3e4c6 #fffee6 #e9dac8 #bd918d #7c2434".split(" "),8:"#546323 #8d9764 #c6caa5 #e3e4c6 #e9dac8 #d3b5ab #a86d6f #7c2434".split(" "),9:"#546323 #8d9764 #c6caa5 #e3e4c6 #fffee6 #e9dac8 #d3b5ab #a86d6f #7c2434".split(" "),
10:"#384903 #546323 #8d9764 #c6caa5 #e3e4c6 #e9dac8 #d3b5ab #a86d6f #7c2434 #660016".split(" "),stops:["#384903","#9ca375","#fffee6","#b37f7e","#660016"]},"div-orange-yellow-blue-light":{1:["#99a6ac"],2:["#d8a78d","#99a6ac"],3:["#d8a78d","#fffee6","#99a6ac"],4:["#bf6c52","#e5c4ab","#bbc3bf","#546b85"],5:["#bf6c52","#e5c4ab","#fffee6","#bbc3bf","#546b85"],6:"#b24f35 #d8a78d #f2e1c8 #dde1d3 #99a6ac #324d71".split(" "),7:"#b24f35 #d8a78d #f2e1c8 #fffee6 #dde1d3 #99a6ac #324d71".split(" "),8:"#b24f35 #cc8970 #e5c4ab #f2e1c8 #dde1d3 #bbc3bf #768898 #324d71".split(" "),
9:"#b24f35 #cc8970 #e5c4ab #f2e1c8 #fffee6 #dde1d3 #bbc3bf #768898 #324d71".split(" "),10:"#a53217 #b24f35 #cc8970 #e5c4ab #f2e1c8 #dde1d3 #bbc3bf #768898 #324d71 #10305e".split(" "),stops:["#a53217","#d2987f","#fffee6","#8897a2","#10305e"]},"div-orange-yellow-blue-dark":{1:["#92a1a3"],2:["#c0a183","#92a1a3"],3:["#c0a183","#fffee6","#92a1a3"],4:["#956442","#d5c0a4","#b6c0b9","#496476"],5:["#956442","#d5c0a4","#fffee6","#b6c0b9","#496476"],6:"#804521 #c0a183 #eadfc5 #dbdfd0 #92a1a3 #24455f".split(" "),
7:"#804521 #c0a183 #eadfc5 #fffee6 #dbdfd0 #92a1a3 #24455f".split(" "),8:"#804521 #aa8363 #d5c0a4 #eadfc5 #dbdfd0 #b6c0b9 #6d838c #24455f".split(" "),9:"#804521 #aa8363 #d5c0a4 #eadfc5 #fffee6 #dbdfd0 #b6c0b9 #6d838c #24455f".split(" "),10:"#6b2600 #804521 #aa8363 #d5c0a4 #eadfc5 #dbdfd0 #b6c0b9 #6d838c #24455f #002649".split(" "),stops:["#6b2600","#b59273","#fffee6","#809298","#002649"]},"div-red-yellow-pink":{1:["#b795aa"],2:["#d39688","#b795aa"],3:["#d39688","#fffee6","#b795aa"],4:["#b6504a","#e2b9a7",
"#cfb8be","#874f81"],5:["#b6504a","#e2b9a7","#fffee6","#cfb8be","#874f81"],6:"#a82e2a #d39688 #f0dbc7 #e7dbd2 #b795aa #6f2c6d".split(" "),7:"#a82e2a #d39688 #f0dbc7 #fffee6 #e7dbd2 #b795aa #6f2c6d".split(" "),8:"#a82e2a #c57369 #e2b9a7 #f0dbc7 #e7dbd2 #cfb8be #9f7295 #6f2c6d".split(" "),9:"#a82e2a #c57369 #e2b9a7 #f0dbc7 #fffee6 #e7dbd2 #cfb8be #9f7295 #6f2c6d".split(" "),10:"#990b0b #a82e2a #c57369 #e2b9a7 #f0dbc7 #e7dbd2 #cfb8be #9f7295 #6f2c6d #570959".split(" "),stops:["#990b0b","#cc8579","#fffee6",
"#ab84a0","#570959"]},"div-red-yellow-purple":{1:["#ae9db2"],2:["#d39688","#ae9db2"],3:["#d39688","#fffee6","#ae9db2"],4:["#b6504a","#e2b9a7","#c9bdc3","#775c90"],5:["#b6504a","#e2b9a7","#fffee6","#c9bdc3","#775c90"],6:"#a82e2a #d39688 #f0dbc7 #e4ded5 #ae9db2 #5c3b7e".split(" "),7:"#a82e2a #d39688 #f0dbc7 #fffee6 #e4ded5 #ae9db2 #5c3b7e".split(" "),8:"#a82e2a #c57369 #e2b9a7 #f0dbc7 #e4ded5 #c9bdc3 #927ca1 #5c3b7e".split(" "),9:"#a82e2a #c57369 #e2b9a7 #f0dbc7 #fffee6 #e4ded5 #c9bdc3 #927ca1 #5c3b7e".split(" "),
10:"#990b0b #a82e2a #c57369 #e2b9a7 #f0dbc7 #e4ded5 #c9bdc3 #927ca1 #5c3b7e #411b6d".split(" "),stops:["#990b0b","#cc8579","#fffee6","#a08daa","#411b6d"]},"div-blue-green":{1:["#aab193"],2:["#99a6ba","#aab193"],3:["#99a6ba","#ffffff","#aab193"],4:["#546b8c","#bbc4d1","#c6cbb7","#717d4b"],5:["#546b8c","#bbc4d1","#ffffff","#c6cbb7","#717d4b"],6:"#324e75 #99a6ba #dde1e8 #e3e5db #aab193 #546327".split(" "),7:"#324e75 #99a6ba #dde1e8 #ffffff #e3e5db #aab193 #546327".split(" "),8:"#324e75 #7689a3 #bbc4d1 #dde1e8 #e3e5db #c6cbb7 #8d976f #546327".split(" "),
9:"#324e75 #7689a3 #bbc4d1 #dde1e8 #ffffff #e3e5db #c6cbb7 #8d976f #546327".split(" "),10:"#10305e #324e75 #7689a3 #bbc4d1 #dde1e8 #e3e5db #c6cbb7 #8d976f #546327 #384903".split(" "),stops:["#10305e","#8898af","#ffffff","#9ca481","#384903"]},"div-red-blue":{1:["#99a6ba"],2:["#d39696","#99a6ba"],3:["#d39696","#ffffff","#99a6ba"],4:["#b65151","#e2b9b9","#bbc4d1","#546b8c"],5:["#b65151","#e2b9b9","#ffffff","#bbc4d1","#546b8c"],6:"#a82e2e #d39696 #f0dcdc #dde1e8 #99a6ba #324e75".split(" "),7:"#a82e2e #d39696 #f0dcdc #ffffff #dde1e8 #99a6ba #324e75".split(" "),
8:"#a82e2e #c57474 #e2b9b9 #f0dcdc #dde1e8 #bbc4d1 #7689a3 #324e75".split(" "),9:"#a82e2e #c57474 #e2b9b9 #f0dcdc #ffffff #dde1e8 #bbc4d1 #7689a3 #324e75".split(" "),10:"#990b0b #a82e2e #c57474 #e2b9b9 #f0dcdc #dde1e8 #bbc4d1 #7689a3 #324e75 #10305e".split(" "),stops:["#990b0b","#cc8585","#ffffff","#8898af","#10305e"]},"div-bluegreen-purple":{1:["#ae9dc0"],2:["#92aeaa","#ae9dc0"],3:["#92aeaa","#ffffff","#ae9dc0"],4:["#497871","#b6c9c6","#c9bed5","#775c97"],5:["#497871","#b6c9c6","#ffffff","#c9bed5",
"#775c97"],6:"#245d54 #92aeaa #dbe4e3 #e4deea #ae9dc0 #5c3c82".split(" "),7:"#245d54 #92aeaa #dbe4e3 #ffffff #e4deea #ae9dc0 #5c3c82".split(" "),8:"#245d54 #6d938d #b6c9c6 #dbe4e3 #e4deea #c9bed5 #927dac #5c3c82".split(" "),9:"#245d54 #6d938d #b6c9c6 #dbe4e3 #ffffff #e4deea #c9bed5 #927dac #5c3c82".split(" "),10:"#004238 #245d54 #6d938d #b6c9c6 #dbe4e3 #e4deea #c9bed5 #927dac #5c3c82 #411b6d".split(" "),stops:["#004238","#80a19c","#ffffff","#a08db6","#411b6d"]},"div-redpurple-blue":{1:["#99a6ba"],
2:["#bd929b","#99a6ba"],3:["#bd929b","#ffffff","#99a6ba"],4:["#924959","#d3b6bc","#bbc4d1","#546b8c"],5:["#924959","#d3b6bc","#ffffff","#bbc4d1","#546b8c"],6:"#7c2437 #bd929b #e9dbde #dde1e8 #99a6ba #324e75".split(" "),7:"#7c2437 #bd929b #e9dbde #ffffff #dde1e8 #99a6ba #324e75".split(" "),8:"#7c2437 #a86d7a #d3b6bc #e9dbde #dde1e8 #bbc4d1 #7689a3 #324e75".split(" "),9:"#7c2437 #a86d7a #d3b6bc #e9dbde #ffffff #dde1e8 #bbc4d1 #7689a3 #324e75".split(" "),10:"#660016 #7c2437 #a86d7a #d3b6bc #e9dbde #dde1e8 #bbc4d1 #7689a3 #324e75 #10305e".split(" "),
stops:["#660016","#b3808b","#ffffff","#8898af","#10305e"]},"div-orange-blue":{1:["#99a6ba"],2:["#d8a79c","#99a6ba"],3:["#d8a79c","#ffffff","#99a6ba"],4:["#bf6d59","#e5c4bd","#bbc4d1","#546b8c"],5:["#bf6d59","#e5c4bd","#ffffff","#bbc4d1","#546b8c"],6:"#b24f38 #d8a79c #f2e2de #dde1e8 #99a6ba #324e75".split(" "),7:"#b24f38 #d8a79c #f2e2de #ffffff #dde1e8 #99a6ba #324e75".split(" "),8:"#b24f38 #cc8a7a #e5c4bd #f2e2de #dde1e8 #bbc4d1 #7689a3 #324e75".split(" "),9:"#b24f38 #cc8a7a #e5c4bd #f2e2de #ffffff #dde1e8 #bbc4d1 #7689a3 #324e75".split(" "),
10:"#a53217 #b24f38 #cc8a7a #e5c4bd #f2e2de #dde1e8 #bbc4d1 #7689a3 #324e75 #10305e".split(" "),stops:["#a53217","#d2998b","#ffffff","#8898af","#10305e"]},"div-green-pink":{1:["#b796b8"],2:["#aab193","#b796b8"],3:["#aab193","#ffffff","#b796b8"],4:["#717d4b","#c6cbb7","#cfb9d0","#874f88"],5:["#717d4b","#c6cbb7","#ffffff","#cfb9d0","#874f88"],6:"#546327 #aab193 #e3e5db #e7dce7 #b796b8 #6f2c71".split(" "),7:"#546327 #aab193 #e3e5db #ffffff #e7dce7 #b796b8 #6f2c71".split(" "),8:"#546327 #8d976f #c6cbb7 #e3e5db #e7dce7 #cfb9d0 #9f72a0 #6f2c71".split(" "),
9:"#546327 #8d976f #c6cbb7 #e3e5db #ffffff #e7dce7 #cfb9d0 #9f72a0 #6f2c71".split(" "),10:"#384903 #546327 #8d976f #c6cbb7 #e3e5db #e7dce7 #cfb9d0 #9f72a0 #6f2c71 #570959".split(" "),stops:["#384903","#9ca481","#ffffff","#ab84ac","#570959"]},"div-red-green":{1:["#aab193"],2:["#d39696","#aab193"],3:["#d39696","#ffffff","#aab193"],4:["#b65151","#e2b9b9","#c6cbb7","#717d4b"],5:["#b65151","#e2b9b9","#ffffff","#c6cbb7","#717d4b"],6:"#a82e2e #d39696 #f0dcdc #e3e5db #aab193 #546327".split(" "),7:"#a82e2e #d39696 #f0dcdc #ffffff #e3e5db #aab193 #546327".split(" "),
8:"#a82e2e #c57474 #e2b9b9 #f0dcdc #e3e5db #c6cbb7 #8d976f #546327".split(" "),9:"#a82e2e #c57474 #e2b9b9 #f0dcdc #ffffff #e3e5db #c6cbb7 #8d976f #546327".split(" "),10:"#990b0b #a82e2e #c57474 #e2b9b9 #f0dcdc #e3e5db #c6cbb7 #8d976f #546327 #384903".split(" "),stops:["#990b0b","#cc8585","#ffffff","#9ca481","#384903"]},"div-bluegreen-pink":{1:["#b796b8"],2:["#92aeaa","#b796b8"],3:["#92aeaa","#ffffff","#b796b8"],4:["#497871","#b6c9c6","#cfb9d0","#874f88"],5:["#497871","#b6c9c6","#ffffff","#cfb9d0",
"#874f88"],6:"#245d54 #92aeaa #dbe4e3 #e7dce7 #b796b8 #6f2c71".split(" "),7:"#245d54 #92aeaa #dbe4e3 #ffffff #e7dce7 #b796b8 #6f2c71".split(" "),8:"#245d54 #6d938d #b6c9c6 #dbe4e3 #e7dce7 #cfb9d0 #9f72a0 #6f2c71".split(" "),9:"#245d54 #6d938d #b6c9c6 #dbe4e3 #ffffff #e7dce7 #cfb9d0 #9f72a0 #6f2c71".split(" "),10:"#004238 #245d54 #6d938d #b6c9c6 #dbe4e3 #e7dce7 #cfb9d0 #9f72a0 #6f2c71 #570959".split(" "),stops:["#004238","#80a19c","#ffffff","#ab84ac","#570959"]},"div-orange-purple":{1:["#ae9dc0"],
2:["#d8a79c","#ae9dc0"],3:["#d8a79c","#ffffff","#ae9dc0"],4:["#bf6d59","#e5c4bd","#c9bed5","#775c97"],5:["#bf6d59","#e5c4bd","#ffffff","#c9bed5","#775c97"],6:"#b24f38 #d8a79c #f2e2de #e4deea #ae9dc0 #5c3c82".split(" "),7:"#b24f38 #d8a79c #f2e2de #ffffff #e4deea #ae9dc0 #5c3c82".split(" "),8:"#b24f38 #cc8a7a #e5c4bd #f2e2de #e4deea #c9bed5 #927dac #5c3c82".split(" "),9:"#b24f38 #cc8a7a #e5c4bd #f2e2de #ffffff #e4deea #c9bed5 #927dac #5c3c82".split(" "),10:"#a53217 #b24f38 #cc8a7a #e5c4bd #f2e2de #e4deea #c9bed5 #927dac #5c3c82 #411b6d".split(" "),
stops:["#a53217","#d2998b","#ffffff","#a08db6","#411b6d"]},"div-orange-gray-blue":{1:["#4f847c"],2:["#8a6a36","#4f847c"],3:["#8a6a36","#333333","#4f847c"],4:["#c58e37","#6d5835","#466964","#62b9ac"],5:["#c58e37","#6d5835","#333333","#466964","#62b9ac"],6:"#e2a138 #8a6a36 #504534 #3c4e4b #4f847c #6cd4c5".split(" "),7:"#e2a138 #8a6a36 #504534 #333333 #3c4e4b #4f847c #6cd4c5".split(" "),8:"#e2a138 #a87c36 #6d5835 #504534 #3c4e4b #466964 #599e94 #6cd4c5".split(" "),9:"#e2a138 #a87c36 #6d5835 #504534 #333333 #3c4e4b #466964 #599e94 #6cd4c5".split(" "),
10:"#ffb339 #e2a138 #a87c36 #6d5835 #504534 #3c4e4b #466964 #599e94 #6cd4c5 #75efdd".split(" "),stops:["#ffb339","#997336","#333333","#549188","#75efdd"]},"div-yellow-gray-purple":{1:["#826288"],2:["#8a8356","#826288"],3:["#8a8356","#333333","#826288"],4:["#c5b86e","#6d684a","#68526c","#b681c0"],5:["#c5b86e","#6d684a","#333333","#68526c","#b681c0"],6:"#e2d279 #8a8356 #504e3f #4d434f #826288 #d190dd".split(" "),7:"#e2d279 #8a8356 #504e3f #333333 #4d434f #826288 #d190dd".split(" "),8:"#e2d279 #a89d62 #6d684a #504e3f #4d434f #68526c #9c71a4 #d190dd".split(" "),
9:"#e2d279 #a89d62 #6d684a #504e3f #333333 #4d434f #68526c #9c71a4 #d190dd".split(" "),10:"#ffed85 #e2d279 #a89d62 #6d684a #504e3f #4d434f #68526c #9c71a4 #d190dd #eba0f9".split(" "),stops:["#ffed85","#99905c","#333333","#8f6a96","#eba0f9"]},"div-red-gray-blue":{1:["#4f847c"],2:["#8a5757","#4f847c"],3:["#8a5757","#333333","#4f847c"],4:["#c57070","#6d4b4b","#466964","#62b9ac"],5:["#c57070","#6d4b4b","#333333","#466964","#62b9ac"],6:"#e27c7c #8a5757 #503f3f #3c4e4b #4f847c #6cd4c5".split(" "),7:"#e27c7c #8a5757 #503f3f #333333 #3c4e4b #4f847c #6cd4c5".split(" "),
8:"#e27c7c #a86464 #6d4b4b #503f3f #3c4e4b #466964 #599e94 #6cd4c5".split(" "),9:"#e27c7c #a86464 #6d4b4b #503f3f #333333 #3c4e4b #466964 #599e94 #6cd4c5".split(" "),10:"#ff8888 #e27c7c #a86464 #6d4b4b #503f3f #3c4e4b #466964 #599e94 #6cd4c5 #75efdd".split(" "),stops:["#ff8888","#995e5e","#333333","#549188","#75efdd"]},"div-green-gray-purple":{1:["#826288"],2:["#598459","#826288"],3:["#598459","#333333","#826288"],4:["#72b972","#4c694c","#68526c","#b681c0"],5:["#72b972","#4c694c","#333333","#68526c",
"#b681c0"],6:"#7ed47e #598459 #404e40 #4d434f #826288 #d190dd".split(" "),7:"#7ed47e #598459 #404e40 #333333 #4d434f #826288 #d190dd".split(" "),8:"#7ed47e #659e65 #4c694c #404e40 #4d434f #68526c #9c71a4 #d190dd".split(" "),9:"#7ed47e #659e65 #4c694c #404e40 #333333 #4d434f #68526c #9c71a4 #d190dd".split(" "),10:"#8bef8b #7ed47e #659e65 #4c694c #404e40 #4d434f #68526c #9c71a4 #d190dd #eba0f9".split(" "),stops:["#8bef8b","#5f915f","#333333","#8f6a96","#eba0f9"]},"div-blue-yellow-red-bright":{1:["#ead98b"],
2:["#954151","#1d4e89"],3:["#954151","#ead98b","#1d4e89"],4:["#954151","#ead98b","#9aacae","#1d4e89"],5:["#954151","#db9793","#ead98b","#7295bf","#1d4e89"],6:"#954151 #db9793 #ead98b #c2c29c #7295bf #1d4e89".split(" "),7:"#954151 #ba6f75 #db9793 #ead98b #9aacae #7295bf #1d4e89".split(" "),8:"#954151 #ba6f75 #db9793 #ead98b #c2c29c #9aacae #7295bf #1d4e89".split(" "),9:"#954151 #ba6f75 #db9793 #deba87 #ead98b #c2c29c #9aacae #7295bf #1d4e89".split(" "),10:"#954151 #ba6f75 #db9793 #deba87 #ead98b #c2c29c #9aacae #7295bf #4872a4 #1d4e89".split(" "),
stops:["#954151","#db9793","#ead98b","#7295bf","#1d4e89"]},"div-green-gray-bright":{1:["#dae6d5"],2:["#757172","#5d7a06"],3:["#757172","#dae6d5","#5d7a06"],4:["#757172","#bcb8b4","#9ebb51","#5d7a06"],5:["#757172","#bcb8b4","#dae6d5","#9ebb51","#5d7a06"],6:"#757172 #a5a19e #bcb8b4 #bfdc76 #9ebb51 #5d7a06".split(" "),7:"#757172 #a5a19e #bcb8b4 #dae6d5 #bfdc76 #9ebb51 #5d7a06".split(" "),8:"#757172 #a5a19e #bcb8b4 #d4d0ca #dae6d5 #bfdc76 #9ebb51 #5d7a06".split(" "),9:"#757172 #a5a19e #bcb8b4 #d4d0ca #dae6d5 #bfdc76 #9ebb51 #7e9b2b #5d7a06".split(" "),
10:"#757172 #8d8988 #a5a19e #bcb8b4 #d4d0ca #dae6d5 #bfdc76 #9ebb51 #7e9b2b #5d7a06".split(" "),stops:["#757172","#bcb8b4","#dae6d5","#9ebb51","#5d7a06"]},"div-red-green-bright":{1:["#dedad2"],2:["#54bebe","#c80064"],3:["#54bebe","#dedad2","#c80064"],4:["#54bebe","#98d1d1","#df979e","#c80064"],5:["#54bebe","#98d1d1","#dedad2","#df979e","#c80064"],6:"#54bebe #98d1d1 #dedad2 #e4bcad #df979e #c80064".split(" "),7:"#54bebe #98d1d1 #badbdb #dedad2 #e4bcad #df979e #c80064".split(" "),8:"#54bebe #98d1d1 #badbdb #dedad2 #e4bcad #df979e #d7658b #c80064".split(" "),
9:"#54bebe #76c8c8 #98d1d1 #badbdb #dedad2 #e4bcad #df979e #d7658b #c80064".split(" "),10:"#54bebe #76c8c8 #98d1d1 #badbdb #dedad2 #e4bcad #df979e #d7658b #d03277 #c80064".split(" "),stops:["#54bebe","#98d1d1","#dedad2","#df979e","#c80064"]},"div-red-blue-bright":{1:["#c5c8d4"],2:["#4d7799","#b5515b"],3:["#4d7799","#c5c8d4","#b5515b"],4:["#4d7799","#7fa4c4","#d48e95","#b5515b"],5:["#4d7799","#7fa4c4","#c5c8d4","#d48e95","#b5515b"],6:"#4d7799 #7fa4c4 #98bbd9 #c5c8d4 #d48e95 #b5515b".split(" "),7:"#4d7799 #7fa4c4 #98bbd9 #c5c8d4 #e3adb2 #d48e95 #b5515b".split(" "),
8:"#4d7799 #7fa4c4 #98bbd9 #c5c8d4 #f2cbcf #e3adb2 #d48e95 #b5515b".split(" "),9:"#4d7799 #668eae #7fa4c4 #98bbd9 #c5c8d4 #f2cbcf #e3adb2 #d48e95 #b5515b".split(" "),10:"#4d7799 #668eae #7fa4c4 #98bbd9 #c5c8d4 #f2cbcf #e3adb2 #d48e95 #c46f78 #b5515b".split(" "),stops:["#4d7799","#7fa4c4","#c5c8d4","#d48e95","#b5515b"]},"div-orange-gray-bright":{1:["#d5cbcb"],2:["#6d717a","#a65a2c"],3:["#6d717a","#d5cbcb","#a65a2c"],4:["#6d717a","#a2a6b1","#db9167","#a65a2c"],5:["#6d717a","#a2a6b1","#d5cbcb","#db9167",
"#a65a2c"],6:"#6d717a #a2a6b1 #d5cbcb #e2b49a #db9167 #a65a2c".split(" "),7:"#6d717a #a2a6b1 #bcc1cc #d5cbcb #e2b49a #db9167 #a65a2c".split(" "),8:"#6d717a #a2a6b1 #bcc1cc #d5cbcb #edd5ca #e2b49a #db9167 #a65a2c".split(" "),9:"#6d717a #878c95 #a2a6b1 #bcc1cc #d5cbcb #edd5ca #e2b49a #db9167 #a65a2c".split(" "),10:"#6d717a #878c95 #a2a6b1 #bcc1cc #d5cbcb #edd5ca #e2b49a #db9167 #cc7441 #a65a2c".split(" "),stops:["#6d717a","#a2a6b1","#d5cbcb","#db9167","#a65a2c"]},"div-blue-orange-bright":{1:["#d6cdcd"],
2:["#bf5b1d","#547a99"],3:["#bf5b1d","#d6cdcd","#547a99"],4:["#bf5b1d","#e48043","#84a7c4","#547a99"],5:["#bf5b1d","#e48043","#d6cdcd","#84a7c4","#547a99"],6:"#bf5b1d #e48043 #eb9b6a #d6cdcd #84a7c4 #547a99".split(" "),7:"#bf5b1d #e48043 #eb9b6a #d6cdcd #9cbdd9 #84a7c4 #547a99".split(" "),8:"#bf5b1d #d26d30 #e48043 #eb9b6a #d6cdcd #9cbdd9 #84a7c4 #547a99".split(" "),9:"#bf5b1d #d26d30 #e48043 #eb9b6a #d6cdcd #9cbdd9 #84a7c4 #6c90ae #547a99".split(" "),10:"#bf5b1d #d26d30 #e48043 #eb9b6a #f2b591 #d6cdcd #9cbdd9 #84a7c4 #6c90ae #547a99".split(" "),
stops:["#bf5b1d","#e48043","#d6cdcd","#84a7c4","#547a99"]},"div-blue-lightgreen-bright":{1:["#99b9c3"],2:["#dbf2e3","#364187"],3:["#dbf2e3","#99b9c3","#364187"],4:["#c5ead4","#99b9c3","#6f72b2","#364187"],5:["#dbf2e3","#c5ead4","#99b9c3","#6f72b2","#364187"],6:"#dbf2e3 #c5ead4 #99b9c3 #a7a3dc #6f72b2 #364187".split(" "),7:"#dbf2e3 #c5ead4 #98d9b5 #99b9c3 #a7a3dc #6f72b2 #364187".split(" "),8:"#dbf2e3 #c5ead4 #98d9b5 #99b9c3 #a7a3dc #8b8bc7 #6f72b2 #364187".split(" "),9:"#dbf2e3 #c5ead4 #aee1c4 #98d9b5 #99b9c3 #a7a3dc #8b8bc7 #6f72b2 #364187".split(" "),
10:"#dbf2e3 #c5ead4 #aee1c4 #98d9b5 #99b9c3 #a7a3dc #8b8bc7 #6f72b2 #525a9c #364187".split(" "),stops:["#dbf2e3","#c5ead4","#99b9c3","#6f72b2","#364187"]},"div-red-gray-bright":{1:["#c7d3e5"],2:["#667181","#be3027"],3:["#667181","#c7d3e5","#be3027"],4:["#667181","#97a2b3","#d5857f","#be3027"],5:["#667181","#97a2b3","#ebd9d8","#d5857f","#be3027"],6:"#667181 #97a2b3 #c7d3e5 #ebd9d8 #d5857f #be3027".split(" "),7:"#667181 #97a2b3 #c7d3e5 #ebd9d8 #e0afac #d5857f #be3027".split(" "),8:"#667181 #97a2b3 #afbbcc #c7d3e5 #ebd9d8 #e0afac #d5857f #be3027".split(" "),
9:"#667181 #97a2b3 #afbbcc #c7d3e5 #ebd9d8 #e0afac #d5857f #c95a53 #be3027".split(" "),10:"#667181 #7e8a9a #97a2b3 #afbbcc #c7d3e5 #ebd9d8 #e0afac #d5857f #c95a53 #be3027".split(" "),stops:["#667181","#97a2b3","#ebd9d8","#d5857f","#be3027"]},"div-blue-gray-bright":{1:["#ced9d9"],2:["#78716e","#009db3"],3:["#78716e","#ced9d9","#009db3"],4:["#78716e","#a19b96","#54c5d5","#009db3"],5:["#78716e","#a19b96","#ced9d9","#54c5d5","#009db3"],6:"#78716e #a19b96 #ced9d9 #7ed9e6 #54c5d5 #009db3".split(" "),7:"#78716e #a19b96 #b5afaa #ced9d9 #7ed9e6 #54c5d5 #009db3".split(" "),
8:"#78716e #a19b96 #b5afaa #c9c4be #ced9d9 #7ed9e6 #54c5d5 #009db3".split(" "),9:"#78716e #a19b96 #b5afaa #c9c4be #ced9d9 #7ed9e6 #54c5d5 #2ab1c4 #009db3".split(" "),10:"#78716e #8c8682 #a19b96 #b5afaa #c9c4be #ced9d9 #7ed9e6 #54c5d5 #2ab1c4 #009db3".split(" "),stops:["#78716e","#a19b96","#ced9d9","#54c5d5","#009db3"]},"div-red-lightgreen-bright":{1:["#bab0bf"],2:["#cfe6e6","#a60053"],3:["#cfe6e6","#bab0bf","#a60053"],4:["#cfe6e6","#a7d5d5","#da6aa2","#a60053"],5:["#cfe6e6","#a7d5d5","#bab0bf","#da6aa2",
"#a60053"],6:"#cfe6e6 #bbdddd #a7d5d5 #da6aa2 #c94788 #a60053".split(" "),7:"#cfe6e6 #bbdddd #a7d5d5 #bab0bf #da6aa2 #c94788 #a60053".split(" "),8:"#cfe6e6 #bbdddd #a7d5d5 #bab0bf #da6aa2 #c94788 #b7236d #a60053".split(" "),9:"#cfe6e6 #bbdddd #a7d5d5 #93cccc #bab0bf #da6aa2 #c94788 #b7236d #a60053".split(" "),10:"#cfe6e6 #bbdddd #a7d5d5 #93cccc #bab0bf #eb8dbc #da6aa2 #c94788 #b7236d #a60053".split(" "),stops:["#cfe6e6","#a7d5d5","#bab0bf","#da6aa2","#a60053"]},"div-blue-green-bright":{1:["#dae1da"],
2:["#3a8059","#434e96"],3:["#3a8059","#dae1da","#434e96"],4:["#3a8059","#85bf9b","#8a8fbf","#434e96"],5:["#3a8059","#85bf9b","#dae1da","#8a8fbf","#434e96"],6:"#3a8059 #85bf9b #abdebc #d1d0e7 #8a8fbf #434e96".split(" "),7:"#3a8059 #85bf9b #abdebc #dae1da #d1d0e7 #8a8fbf #434e96".split(" "),8:"#3a8059 #85bf9b #abdebc #dae1da #d1d0e7 #aeb0d3 #8a8fbf #434e96".split(" "),9:"#3a8059 #609f7a #85bf9b #abdebc #dae1da #d1d0e7 #aeb0d3 #8a8fbf #434e96".split(" "),10:"#3a8059 #609f7a #85bf9b #abdebc #dae1da #d1d0e7 #aeb0d3 #8a8fbf #666faa #434e96".split(" "),
stops:["#3a8059","#85bf9b","#dae1da","#8a8fbf","#434e96"]},"div-purple-brown-bright":{1:["#dbd3d4"],2:["#935b44","#84628b"],3:["#935b44","#dbd3d4","#84628b"],4:["#935b44","#bc9483","#b49fbc","#84628b"],5:["#935b44","#bc9483","#dbd3d4","#b49fbc","#84628b"],6:"#935b44 #bc9483 #d9c4c2 #ccbed4 #b49fbc #84628b".split(" "),7:"#935b44 #bc9483 #d9c4c2 #dbd3d4 #ccbed4 #b49fbc #84628b".split(" "),8:"#935b44 #bc9483 #d1b1a3 #d9c4c2 #dbd3d4 #ccbed4 #b49fbc #84628b".split(" "),9:"#935b44 #bc9483 #d1b1a3 #d9c4c2 #dbd3d4 #ccbed4 #b49fbc #9c81a3 #84628b".split(" "),
10:"#935b44 #a87864 #bc9483 #d1b1a3 #d9c4c2 #dbd3d4 #ccbed4 #b49fbc #9c81a3 #84628b".split(" "),stops:["#935b44","#bc9483","#dbd3d4","#b49fbc","#84628b"]},"div-blue-brown-bright":{1:["#cbd7e6"],2:["#946e43","#547a99"],3:["#946e43","#cbd7e6","#547a99"],4:["#946e43","#bd9f83","#90a9c0","#547a99"],5:["#946e43","#bd9f83","#cbd7e6","#90a9c0","#547a99"],6:"#946e43 #bd9f83 #cec7c5 #cbd7e6 #90a9c0 #547a99".split(" "),7:"#946e43 #bd9f83 #cec7c5 #cbd7e6 #adc0d3 #90a9c0 #547a99".split(" "),8:"#946e43 #bd9f83 #d1b7a3 #cec7c5 #cbd7e6 #adc0d3 #90a9c0 #547a99".split(" "),
9:"#946e43 #bd9f83 #d1b7a3 #cec7c5 #cbd7e6 #adc0d3 #90a9c0 #7291ac #547a99".split(" "),10:"#946e43 #a88663 #bd9f83 #d1b7a3 #cec7c5 #cbd7e6 #adc0d3 #90a9c0 #7291ac #547a99".split(" "),stops:["#946e43","#bd9f83","#cbd7e6","#90a9c0","#547a99"]},"div-teal-brown-bright":{1:["#d2dec8"],2:["#806c44","#448199"],3:["#806c44","#d2dec8","#448199"],4:["#806c44","#ad9d79","#8fb6bc","#448199"],5:["#806c44","#ad9d79","#d2dec8","#8fb6bc","#448199"],6:"#806c44 #ad9d79 #cbcaae #b5d0cd #8fb6bc #448199".split(" "),7:"#806c44 #ad9d79 #cbcaae #d2dec8 #b5d0cd #8fb6bc #448199".split(" "),
8:"#806c44 #ad9d79 #c4b594 #cbcaae #d2dec8 #b5d0cd #8fb6bc #448199".split(" "),9:"#806c44 #ad9d79 #c4b594 #cbcaae #d2dec8 #b5d0cd #8fb6bc #6a9baa #448199".split(" "),10:"#806c44 #97845f #ad9d79 #c4b594 #cbcaae #d2dec8 #b5d0cd #8fb6bc #6a9baa #448199".split(" "),stops:["#806c44","#ad9d79","#d2dec8","#8fb6bc","#448199"]},"div-green-teal-bright":{1:["#c8e6cf"],2:["#358c84","#5d7a06"],3:["#358c84","#c8e6cf","#5d7a06"],4:["#358c84","#73b5ae","#9cbd58","#5d7a06"],5:["#358c84","#73b5ae","#c8e6cf","#9cbd58",
"#5d7a06"],6:"#358c84 #73b5ae #92cac2 #bcde81 #9cbd58 #5d7a06".split(" "),7:"#358c84 #73b5ae #92cac2 #c8e6cf #bcde81 #9cbd58 #5d7a06".split(" "),8:"#358c84 #73b5ae #92cac2 #b1ded7 #c8e6cf #bcde81 #9cbd58 #5d7a06".split(" "),9:"#358c84 #73b5ae #92cac2 #b1ded7 #c8e6cf #bcde81 #9cbd58 #7d9b2f #5d7a06".split(" "),10:"#358c84 #54a199 #73b5ae #92cac2 #b1ded7 #c8e6cf #bcde81 #9cbd58 #7d9b2f #5d7a06".split(" "),stops:["#358c84","#73b5ae","#c8e6cf","#9cbd58","#5d7a06"]},"div-lightgreen-yellow-bright":{1:["#505944"],
2:["#ffea8c","#8cffdc"],3:["#ffea8c","#505944","#8cffdc"],4:["#ffea8c","#b3ab60","#5aa28b","#8cffdc"],5:["#ffea8c","#b3ab60","#505944","#5aa28b","#8cffdc"],6:"#ffea8c #b3ab60 #666b33 #417363 #5aa28b #8cffdc".split(" "),7:"#ffea8c #b3ab60 #666b33 #505944 #417363 #5aa28b #8cffdc".split(" "),8:"#ffea8c #d9ca76 #b3ab60 #8c8b49 #417363 #5aa28b #73d0b4 #8cffdc".split(" "),9:"#ffea8c #d9ca76 #b3ab60 #8c8b49 #505944 #417363 #5aa28b #73d0b4 #8cffdc".split(" "),10:"#ffea8c #d9ca76 #b3ab60 #8c8b49 #666b33 #505944 #417363 #5aa28b #73d0b4 #8cffdc".split(" "),
stops:["#ffea8c","#b3ab60","#505944","#5aa28b","#8cffdc"]},"div-lightblue-gray-bright":{1:["#757269"],2:["#faefdb","#80f3ff"],3:["#faefdb","#757269","#80f3ff"],4:["#faefdb","#a19c8f","#40b2c6","#80f3ff"],5:["#faefdb","#a19c8f","#00708d","#40b2c6","#80f3ff"],6:"#faefdb #a19c8f #50716e #2091aa #40b2c6 #80f3ff".split(" "),7:"#faefdb #a19c8f #50716e #00708d #2091aa #40b2c6 #80f3ff".split(" "),8:"#faefdb #cec5b5 #a19c8f #757269 #2091aa #40b2c6 #60d2e2 #80f3ff".split(" "),9:"#faefdb #cec5b5 #a19c8f #757269 #50716e #2091aa #40b2c6 #60d2e2 #80f3ff".split(" "),
10:"#faefdb #cec5b5 #a19c8f #757269 #50716e #00708d #2091aa #40b2c6 #60d2e2 #80f3ff".split(" "),stops:["#faefdb","#a19c8f","#00708d","#40b2c6","#80f3ff"]},"div-lightgreen-gray-bright":{1:["#555b61"],2:["#becdd9","#99ffc5"],3:["#becdd9","#555b61","#99ffc5"],4:["#becdd9","#788189","#64b47f","#99ffc5"],5:["#becdd9","#788189","#41543e","#64b47f","#99ffc5"],6:"#becdd9 #788189 #555b61 #4a8f5c #64b47f #99ffc5".split(" "),7:"#becdd9 #788189 #555b61 #2f6939 #4a8f5c #64b47f #99ffc5".split(" "),8:"#becdd9 #9ba7b1 #788189 #555b61 #4a8f5c #64b47f #7fdaa2 #99ffc5".split(" "),
9:"#becdd9 #9ba7b1 #788189 #555b61 #41543e #4a8f5c #64b47f #7fdaa2 #99ffc5".split(" "),10:"#becdd9 #9ba7b1 #788189 #555b61 #41543e #2f6939 #4a8f5c #64b47f #7fdaa2 #99ffc5".split(" "),stops:["#becdd9","#788189","#41543e","#64b47f","#99ffc5"]},"div-lightred-gray-bright":{1:["#616673"],2:["#d4d9e6","#ffbdb3"],3:["#d4d9e6","#616673","#ffbdb3"],4:["#d4d9e6","#9ba0ad","#c27166","#ffbdb3"],5:["#d4d9e6","#9ba0ad","#616673","#c27166","#ffbdb3"],6:"#9ba0ad #7e8390 #616673 #a44b40 #c27166 #e1978d".split(" "),
7:"#9ba0ad #7e8390 #616673 #6b472d #a44b40 #c27166 #e1978d".split(" "),8:"#d4d9e6 #b7bcc9 #9ba0ad #7e8390 #a44b40 #c27166 #e1978d #ffbdb3".split(" "),9:"#b7bcc9 #9ba0ad #7e8390 #616673 #6b472d #a44b40 #c27166 #e1978d #ffbdb3".split(" "),10:"#d4d9e6 #b7bcc9 #9ba0ad #7e8390 #616673 #6b472d #a44b40 #c27166 #e1978d #ffbdb3".split(" "),stops:["#d4d9e6","#9ba0ad","#616673","#c27166","#ffbdb3"]},"div-lightmagenta-gray-bright":{1:["#594154"],2:["#faefdb","#ff99ff"],3:["#faefdb","#594154","#ff99ff"],4:["#faefdb",
"#a7a194","#b650b6","#ff99ff"],5:["#faefdb","#a7a194","#594154","#b650b6","#ff99ff"],6:"#faefdb #a7a194 #54534d #922c91 #b650b6 #ff99ff".split(" "),7:"#faefdb #a7a194 #54534d #594154 #922c91 #b650b6 #ff99ff".split(" "),8:"#faefdb #d1c8b8 #a7a194 #7e7a70 #922c91 #b650b6 #db75da #ff99ff".split(" "),9:"#faefdb #d1c8b8 #a7a194 #7e7a70 #594154 #922c91 #b650b6 #db75da #ff99ff".split(" "),10:"#faefdb #d1c8b8 #a7a194 #7e7a70 #54534d #594154 #922c91 #b650b6 #db75da #ff99ff".split(" "),stops:["#faefdb","#a7a194",
"#594154","#b650b6","#ff99ff"]},"div-yellow-green-bright":{1:["#8fa17b"],2:["#38524d","#ffec99"],3:["#38524d","#8fa17b","#ffec99"],4:["#38524d","#4a7c6e","#ccbe6a","#ffec99"],5:["#38524d","#4a7c6e","#8fa17b","#ccbe6a","#ffec99"],6:"#38524d #41675e #53917f #b3a752 #ccbe6a #ffec99".split(" "),7:"#38524d #41675e #53917f #8fa17b #b3a752 #ccbe6a #ffec99".split(" "),8:"#38524d #41675e #4a7c6e #53917f #b3a752 #ccbe6a #e6d581 #ffec99".split(" "),9:"#38524d #41675e #4a7c6e #53917f #8fa17b #b3a752 #ccbe6a #e6d581 #ffec99".split(" "),
10:"#38524d #41675e #4a7c6e #53917f #5ca68f #8fa17b #b3a752 #ccbe6a #e6d581 #ffec99".split(" "),stops:["#38524d","#4a7c6e","#8fa17b","#ccbe6a","#ffec99"]},"div-lightblue-yellow-bright":{1:["#4b595e"],2:["#ffea8c","#aadbff"],3:["#ffea8c","#4b595e","#aadbff"],4:["#ffea8c","#b3ab60","#6693c8","#aadbff"],5:["#ffea8c","#b3ab60","#4b595e","#6693c8","#aadbff"],6:"#ffea8c #b3ab60 #8c8b49 #446fad #6693c8 #aadbff".split(" "),7:"#ffea8c #b3ab60 #8c8b49 #4b595e #446fad #6693c8 #aadbff".split(" "),8:"#ffea8c #d9ca76 #b3ab60 #8c8b49 #446fad #6693c8 #88b7e4 #aadbff".split(" "),
9:"#ffea8c #d9ca76 #b3ab60 #8c8b49 #4b595e #446fad #6693c8 #88b7e4 #aadbff".split(" "),10:"#ffea8c #d9ca76 #b3ab60 #8c8b49 #666b33 #4b595e #446fad #6693c8 #88b7e4 #aadbff".split(" "),stops:["#ffea8c","#b3ab60","#4b595e","#6693c8","#aadbff"]},"div-green-darkgray-bright":{1:["#4bb375"],2:["#4a4e54","#d9ffe9"],3:["#4a4e54","#4bb375","#d9ffe9"],4:["#4a4e54","#636a71","#92d9af","#d9ffe9"],5:["#4a4e54","#636a71","#4bb375","#92d9af","#d9ffe9"],6:"#575c63 #636a71 #6c8a83 #6fc692 #92d9af #d9ffe9".split(" "),
7:"#575c63 #636a71 #707880 #4bb375 #6fc692 #92d9af #d9ffe9".split(" "),8:"#575c63 #636a71 #707880 #6c8a83 #6fc692 #92d9af #b6eccc #d9ffe9".split(" "),9:"#575c63 #636a71 #707880 #6c8a83 #4bb375 #6fc692 #92d9af #b6eccc #d9ffe9".split(" "),10:"#4a4e54 #575c63 #636a71 #707880 #6c8a83 #4bb375 #6fc692 #92d9af #b6eccc #d9ffe9".split(" "),stops:["#4a4e54","#636a71","#4bb375","#92d9af","#d9ffe9"]},"div-brbg":{1:["#d8b365"],2:["#d8b365","#5ab4ac"],3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1",
"#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:"#8c510a #d8b365 #f6e8c3 #c7eae5 #5ab4ac #01665e".split(" "),7:"#8c510a #d8b365 #f6e8c3 #f5f5f5 #c7eae5 #5ab4ac #01665e".split(" "),8:"#8c510a #bf812d #dfc27d #f6e8c3 #c7eae5 #80cdc1 #35978f #01665e".split(" "),9:"#8c510a #bf812d #dfc27d #f6e8c3 #f5f5f5 #c7eae5 #80cdc1 #35978f #01665e".split(" "),10:"#543005 #8c510a #bf812d #dfc27d #f6e8c3 #c7eae5 #80cdc1 #35978f #01665e #003c30".split(" "),11:"#543005 #8c510a #bf812d #dfc27d #f6e8c3 #f5f5f5 #c7eae5 #80cdc1 #35978f #01665e #003c30".split(" "),
stops:[[166,97,26,1],[223,194,125,1],[245,245,245,1],[128,205,193,1],[1,133,113,1]]},"div-piyg":{1:["#e9a3c9"],2:["#e9a3c9","#a1d76a"],3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:"#c51b7d #e9a3c9 #fde0ef #e6f5d0 #a1d76a #4d9221".split(" "),7:"#c51b7d #e9a3c9 #fde0ef #f7f7f7 #e6f5d0 #a1d76a #4d9221".split(" "),8:"#c51b7d #de77ae #f1b6da #fde0ef #e6f5d0 #b8e186 #7fbc41 #4d9221".split(" "),9:"#c51b7d #de77ae #f1b6da #fde0ef #f7f7f7 #e6f5d0 #b8e186 #7fbc41 #4d9221".split(" "),
10:"#8e0152 #c51b7d #de77ae #f1b6da #fde0ef #e6f5d0 #b8e186 #7fbc41 #4d9221 #276419".split(" "),11:"#8e0152 #c51b7d #de77ae #f1b6da #fde0ef #f7f7f7 #e6f5d0 #b8e186 #7fbc41 #4d9221 #276419".split(" "),stops:[[208,28,139,1],[241,182,218,1],[247,247,247,1],[184,225,134,1],[77,172,38,1]]},"div-prgn":{1:["#af8dc3"],2:["#af8dc3","#7fbf7b"],3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:"#762a83 #af8dc3 #e7d4e8 #d9f0d3 #7fbf7b #1b7837".split(" "),
7:"#762a83 #af8dc3 #e7d4e8 #f7f7f7 #d9f0d3 #7fbf7b #1b7837".split(" "),8:"#762a83 #9970ab #c2a5cf #e7d4e8 #d9f0d3 #a6dba0 #5aae61 #1b7837".split(" "),9:"#762a83 #9970ab #c2a5cf #e7d4e8 #f7f7f7 #d9f0d3 #a6dba0 #5aae61 #1b7837".split(" "),10:"#40004b #762a83 #9970ab #c2a5cf #e7d4e8 #d9f0d3 #a6dba0 #5aae61 #1b7837 #00441b".split(" "),11:"#40004b #762a83 #9970ab #c2a5cf #e7d4e8 #f7f7f7 #d9f0d3 #a6dba0 #5aae61 #1b7837 #00441b".split(" "),stops:[[123,50,148,1],[194,165,207,1],[247,247,247,1],[166,219,160,
1],[0,136,55,1]]},"div-puor":{1:["#f1a340"],2:["#f1a340","#998ec3"],3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:"#b35806 #f1a340 #fee0b6 #d8daeb #998ec3 #542788".split(" "),7:"#b35806 #f1a340 #fee0b6 #f7f7f7 #d8daeb #998ec3 #542788".split(" "),8:"#b35806 #e08214 #fdb863 #fee0b6 #d8daeb #b2abd2 #8073ac #542788".split(" "),9:"#b35806 #e08214 #fdb863 #fee0b6 #f7f7f7 #d8daeb #b2abd2 #8073ac #542788".split(" "),10:"#7f3b08 #b35806 #e08214 #fdb863 #fee0b6 #d8daeb #b2abd2 #8073ac #542788 #2d004b".split(" "),
11:"#7f3b08 #b35806 #e08214 #fdb863 #fee0b6 #f7f7f7 #d8daeb #b2abd2 #8073ac #542788 #2d004b".split(" "),stops:[[230,97,1,1],[253,184,99,1],[247,247,247,1],[178,171,210,1],[94,60,153,1]]},"div-rdbu":{1:["#ef8a62"],2:["#ef8a62","#67a9cf"],3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:"#b2182b #ef8a62 #fddbc7 #d1e5f0 #67a9cf #2166ac".split(" "),7:"#b2182b #ef8a62 #fddbc7 #f7f7f7 #d1e5f0 #67a9cf #2166ac".split(" "),
8:"#b2182b #d6604d #f4a582 #fddbc7 #d1e5f0 #92c5de #4393c3 #2166ac".split(" "),9:"#b2182b #d6604d #f4a582 #fddbc7 #f7f7f7 #d1e5f0 #92c5de #4393c3 #2166ac".split(" "),10:"#67001f #b2182b #d6604d #f4a582 #fddbc7 #d1e5f0 #92c5de #4393c3 #2166ac #053061".split(" "),11:"#67001f #b2182b #d6604d #f4a582 #fddbc7 #f7f7f7 #d1e5f0 #92c5de #4393c3 #2166ac #053061".split(" "),stops:[[202,0,32,1],[244,165,130,1],[247,247,247,1],[146,197,222,1],[5,113,176,1]]},"div-rdgy":{1:["#ef8a62"],2:["#ef8a62","#999999"],3:["#ef8a62",
"#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:"#b2182b #ef8a62 #fddbc7 #e0e0e0 #999999 #4d4d4d".split(" "),7:"#b2182b #ef8a62 #fddbc7 #ffffff #e0e0e0 #999999 #4d4d4d".split(" "),8:"#b2182b #d6604d #f4a582 #fddbc7 #e0e0e0 #bababa #878787 #4d4d4d".split(" "),9:"#b2182b #d6604d #f4a582 #fddbc7 #ffffff #e0e0e0 #bababa #878787 #4d4d4d".split(" "),10:"#67001f #b2182b #d6604d #f4a582 #fddbc7 #e0e0e0 #bababa #878787 #4d4d4d #1a1a1a".split(" "),
11:"#67001f #b2182b #d6604d #f4a582 #fddbc7 #ffffff #e0e0e0 #bababa #878787 #4d4d4d #1a1a1a".split(" "),stops:[[202,0,32,1],[244,165,130,1],[255,255,255,1],[186,186,186,1],[64,64,64,1]]},"div-rdylbu":{1:["#fc8d59"],2:["#fc8d59","#91bfdb"],3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:"#d73027 #fc8d59 #fee090 #e0f3f8 #91bfdb #4575b4".split(" "),7:"#d73027 #fc8d59 #fee090 #ffffbf #e0f3f8 #91bfdb #4575b4".split(" "),
8:"#d73027 #f46d43 #fdae61 #fee090 #e0f3f8 #abd9e9 #74add1 #4575b4".split(" "),9:"#d73027 #f46d43 #fdae61 #fee090 #ffffbf #e0f3f8 #abd9e9 #74add1 #4575b4".split(" "),10:"#a50026 #d73027 #f46d43 #fdae61 #fee090 #e0f3f8 #abd9e9 #74add1 #4575b4 #313695".split(" "),11:"#a50026 #d73027 #f46d43 #fdae61 #fee090 #ffffbf #e0f3f8 #abd9e9 #74add1 #4575b4 #313695".split(" "),stops:[[215,25,28,1],[253,174,97,1],[255,255,191,1],[171,217,233,1],[44,123,182,1]]},"div-rdylgn":{1:["#fc8d59"],2:["#fc8d59","#91cf60"],
3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:"#d73027 #fc8d59 #fee08b #d9ef8b #91cf60 #1a9850".split(" "),7:"#d73027 #fc8d59 #fee08b #ffffbf #d9ef8b #91cf60 #1a9850".split(" "),8:"#d73027 #f46d43 #fdae61 #fee08b #d9ef8b #a6d96a #66bd63 #1a9850".split(" "),9:"#d73027 #f46d43 #fdae61 #fee08b #ffffbf #d9ef8b #a6d96a #66bd63 #1a9850".split(" "),10:"#a50026 #d73027 #f46d43 #fdae61 #fee08b #d9ef8b #a6d96a #66bd63 #1a9850 #006837".split(" "),
11:"#a50026 #d73027 #f46d43 #fdae61 #fee08b #ffffbf #d9ef8b #a6d96a #66bd63 #1a9850 #006837".split(" "),stops:[[215,25,28,1],[253,174,97,1],[255,255,191,1],[166,217,106,1],[26,150,65,1]]},"div-spectral":{1:["#fc8d59"],2:["#fc8d59","#99d594"],3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:"#d53e4f #fc8d59 #fee08b #e6f598 #99d594 #3288bd".split(" "),7:"#d53e4f #fc8d59 #fee08b #ffffbf #e6f598 #99d594 #3288bd".split(" "),
8:"#d53e4f #f46d43 #fdae61 #fee08b #e6f598 #abdda4 #66c2a5 #3288bd".split(" "),9:"#d53e4f #f46d43 #fdae61 #fee08b #ffffbf #e6f598 #abdda4 #66c2a5 #3288bd".split(" "),10:"#9e0142 #d53e4f #f46d43 #fdae61 #fee08b #e6f598 #abdda4 #66c2a5 #3288bd #5e4fa2".split(" "),11:"#9e0142 #d53e4f #f46d43 #fdae61 #fee08b #ffffbf #e6f598 #abdda4 #66c2a5 #3288bd #5e4fa2".split(" "),stops:[[215,25,28,1],[253,174,97,1],[255,255,191,1],[171,221,164,1],[43,131,186,1]]},"highlight-orange":{3:["rgba(165,50,23,0.40)","rgba(165,50,23,1.0)",
"rgba(165,50,23,0.40)"],5:["rgba(165,50,23,0.20)","rgba(165,50,23,0.60)","rgba(165,50,23,1.0)","rgba(165,50,23,0.60)","rgba(165,50,23,0.20)"],7:"rgba(165,50,23,0.10) rgba(165,50,23,0.40) rgba(165,50,23,0.70) rgba(165,50,23,1.0) rgba(165,50,23,0.70) rgba(165,50,23,0.40) rgba(165,50,23,0.10)".split(" "),9:"rgba(165,50,23,0.10) rgba(165,50,23,0.33) rgba(165,50,23,0.55) rgba(165,50,23,0.78) rgba(165,50,23,1.0) rgba(165,50,23,0.78) rgba(165,50,23,0.55) rgba(165,50,23,0.33) rgba(165,50,23,0.10)".split(" "),
stops:["rgba(165,50,23,0)","rgba(165,50,23,0.5)","rgba(165,50,23,1.0)","rgba(165,50,23,0.5)","rgba(165,50,23,0)"]},"highlight-bluegreen":{3:["rgba(0,66,56,0.40)","rgba(0,66,56,1.0)","rgba(0,66,56,0.40)"],5:["rgba(0,66,56,0.20)","rgba(0,66,56,0.60)","rgba(0,66,56,1.0)","rgba(0,66,56,0.60)","rgba(0,66,56,0.20)"],7:"rgba(0,66,56,0.10) rgba(10,66,56,0.40) rgba(0,66,56,0.70) rgba(0,66,56,1.0) rgba(0,66,56,0.70) rgba(0,66,56,0.40) rgba(0,66,56,0.10)".split(" "),9:"rgba(0,66,56,0.10) rgba(0,66,56,0.33) rgba(0,66,56,0.55) rgba(0,66,56,0.78) rgba(0,66,56,1.0) rgba(0,66,56,0.78) rgba(0,66,56,0.55) rgba(0,66,56,0.33) rgba(0,66,56,0.10)".split(" "),
stops:["rgba(0,66,56,0)","rgba(0,66,56,0.5)","rgba(0,66,56,1.0)","rgba(0,66,56,0.5)","rgba(0,66,56,0)"]},"highlight-red":{3:["rgba(153,11,11,0.40)","rgba(153,11,11,1.0)","rgba(153,11,11,0.40)"],5:["rgba(153,11,11,0.20)","rgba(153,11,11,0.60)","rgba(153,11,11,1.0)","rgba(153,11,11,0.60)","rgba(153,11,11,0.20)"],7:"rgba(153,11,11,0.10) rgba(153,11,11,0.40) rgba(153,11,11,0.70) rgba(153,11,11,1.0) rgba(153,11,11,0.70) rgba(153,11,11,0.40) rgba(153,11,11,0.10)".split(" "),9:"rgba(153,11,11,0.10) rgba(153,11,11,0.33) rgba(153,11,11,0.55) rgba(153,11,11,0.78) rgba(153,11,11,1.0) rgba(153,11,11,0.78) rgba(153,11,11,0.55) rgba(153,11,11,0.33) rgba(153,11,11,0.10)".split(" "),
stops:["rgba(153,11,11,0)","rgba(153,11,11,0.5)","rgba(153,11,11,1.0)","rgba(153,11,11,0.5)","rgba(153,11,11,0)"]},"highlight-orange-dark":{3:["rgba(107,38,0,0.40)","rgba(107,38,0,1.0)","rgba(107,38,0,0.40)"],5:["rgba(107,38,0,0.20)","rgba(107,38,0,0.60)","rgba(107,38,0,1.0)","rgba(107,38,0,0.60)","rgba(107,38,0,0.20)"],7:"rgba(107,38,0,0.10) rgba(107,38,0,0.40) rgba(107,38,0,0.70) rgba(107,38,0,1.0) rgba(107,38,0,0.70) rgba(107,38,0,0.40) rgba(107,38,0,0.10)".split(" "),9:"rgba(107,38,0,0.10) rgba(107,38,0,0.33) rgba(107,38,0,0.55) rgba(107,38,0,0.78) rgba(107,38,0,1.0) rgba(107,38,0,0.78) rgba(107,38,0,0.55) rgba(107,38,0,0.33) rgba(107,38,0,0.10)".split(" "),
stops:["rgba(107,38,0,0)","rgba(107,38,0,0.5)","rgba(107,38,0,1.0)","rgba(107,38,0,0.5)","rgba(107,38,0,0)"]},"highlight-orange-bright":{3:["rgba(255,179,57,0.40)","rgba(255,179,57,1.0)","rgba(255,179,57,0.40)"],5:["rgba(255,179,57,0.20)","rgba(255,179,57,0.60)","rgba(255,179,57,1.0)","rgba(255,179,57,0.60)","rgba(255,179,57,0.20)"],7:"rgba(255,179,57,0.10) rgba(1255,179,57,0.40) rgba(255,179,57,0.70) rgba(255,179,57,1.0) rgba(255,179,57,0.70) rgba(255,179,57,0.40) rgba(255,179,57,0.10)".split(" "),
9:"rgba(255,179,57,0.10) rgba(255,179,57,0.33) rgba(255,179,57,0.55) rgba(255,179,57,0.78) rgba(255,179,57,1.0) rgba(255,179,57,0.78) rgba(255,179,57,0.55) rgba(255,179,57,0.33) rgba(255,179,57,0.10)".split(" "),stops:["rgba(255,179,57,0)","rgba(255,179,57,0.5)","rgba(255,179,57,1.0)","rgba(255,179,57,0.5)","rgba(255,179,57,0)"]},"highlight-purple":{3:["rgba(65,27,109,0.40)","rgba(65,27,109,1.0)","rgba(65,27,109,0.40)"],5:["rgba(65,27,109,0.20)","rgba(65,27,109,0.60)","rgba(65,27,109,1.0)","rgba(65,27,109,0.60)",
"rgba(65,27,109,0.20)"],7:"rgba(65,27,109,0.10) rgba(165,27,109,0.40) rgba(65,27,109,0.70) rgba(65,27,109,1.0) rgba(65,27,109,0.70) rgba(65,27,109,0.40) rgba(65,27,109,0.10)".split(" "),9:"rgba(65,27,109,0.10) rgba(65,27,109,0.33) rgba(65,27,109,0.55) rgba(65,27,109,0.78) rgba(65,27,109,1.0) rgba(65,27,109,0.78) rgba(65,27,109,0.55) rgba(65,27,109,0.33) rgba(65,27,109,0.10)".split(" "),stops:["rgba(65,27,109,0)","rgba(65,27,109,0.5)","rgba(65,27,109,1.0)","rgba(65,27,109,0.5)","rgba(65,27,109,0)"]},
"highlight-pink":{3:["rgba(87,9,89,0.40)","rgba(87,9,89,1.0)","rgba(87,9,89,0.40)"],5:["rgba(87,9,89,0.20)","rgba(87,9,89,0.60)","rgba(87,9,89,1.0)","rgba(87,9,89,0.60)","rgba(87,9,89,0.20)"],7:"rgba(87,9,89,0.10) rgba(87,9,89,0.40) rgba(87,9,89,0.70) rgba(87,9,89,1.0) rgba(87,9,89,0.70) rgba(87,9,89,0.40) rgba(87,9,89,0.10)".split(" "),9:"rgba(87,9,89,0.10) rgba(87,9,89,0.33) rgba(87,9,89,0.55) rgba(87,9,89,0.78) rgba(87,9,89,1.0) rgba(87,9,89,0.78) rgba(87,9,89,0.55) rgba(87,9,89,0.33) rgba(87,9,89,0.10)".split(" "),
stops:["rgba(87,9,89,0)","rgba(87,9,89,0.5)","rgba(87,9,89,1.0)","rgba(87,9,89,0.5)","rgba(87,9,89,0)"]},"highlight-blue":{3:["rgba(16,48,94,0.40)","rgba(16,48,94,1.0)","rgba(16,48,94,0.40)"],5:["rgba(16,48,94,0.20)","rgba(16,48,94,0.60)","rgba(16,48,94,1.0)","rgba(16,48,94,0.60)","rgba(16,48,94,0.20)"],7:"rgba(16,48,94,0.10) rgba(116,48,94,0.40) rgba(16,48,94,0.70) rgba(16,48,94,1.0) rgba(16,48,94,0.70) rgba(16,48,94,0.40) rgba(16,48,94,0.10)".split(" "),9:"rgba(16,48,94,0.10) rgba(16,48,94,0.33) rgba(16,48,94,0.55) rgba(16,48,94,0.78) rgba(16,48,94,1.0) rgba(16,48,94,0.78) rgba(16,48,94,0.55) rgba(16,48,94,0.33) rgba(16,48,94,0.10)".split(" "),
stops:["rgba(16,48,94,0)","rgba(16,48,94,0.5)","rgba(16,48,94,1.0)","rgba(16,48,94,0.5)","rgba(16,48,94,0)"]},"highlight-blue-dark":{3:["rgba(0,38,73,0.40)","rgba(0,38,73,1.0)","rgba(0,38,73,0.40)"],5:["rgba(0,38,73,0.20)","rgba(0,38,73,0.60)","rgba(0,38,73,1.0)","rgba(0,38,73,0.60)","rgba(0,38,73,0.20)"],7:"rgba(0,38,73,0.10) rgba(10,38,73,0.40) rgba(0,38,73,0.70) rgba(0,38,73,1.0) rgba(0,38,73,0.70) rgba(0,38,73,0.40) rgba(0,38,73,0.10)".split(" "),9:"rgba(0,38,73,0.10) rgba(0,38,73,0.33) rgba(0,38,73,0.55) rgba(0,38,73,0.78) rgba(0,38,73,1.0) rgba(0,38,73,0.78) rgba(0,38,73,0.55) rgba(0,38,73,0.33) rgba(0,38,73,0.10)".split(" "),
stops:["rgba(0,38,73,0)","rgba(0,38,73,0.5)","rgba(0,38,73,1.0)","rgba(0,38,73,0.5)","rgba(0,38,73,0)"]},"highlight-blue-bright":{3:["rgba(117,239,221,0.40)","rgba(117,239,221,1.0)","rgba(117,239,221,0.40)"],5:["rgba(117,239,221,0.20)","rgba(117,239,221,0.60)","rgba(117,239,221,1.0)","rgba(117,239,221,0.60)","rgba(117,239,221,0.20)"],7:"rgba(117,239,221,0.10) rgba(1117,239,221,0.40) rgba(117,239,221,0.70) rgba(117,239,221,1.0) rgba(117,239,221,0.70) rgba(117,239,221,0.40) rgba(117,239,221,0.10)".split(" "),
9:"rgba(117,239,221,0.10) rgba(117,239,221,0.33) rgba(117,239,221,0.55) rgba(117,239,221,0.78) rgba(117,239,221,1.0) rgba(117,239,221,0.78) rgba(117,239,221,0.55) rgba(117,239,221,0.33) rgba(117,239,221,0.10)".split(" "),stops:["rgba(117,239,221,0)","rgba(117,239,221,0.5)","rgba(117,239,221,1.0)","rgba(117,239,221,0.5)","rgba(117,239,221,0)"]},"highlight-orange-gray":{3:["#bf9990","#a53217","#bf9990"],5:["#cccccc","#b97f72","#a53217","#b97f72","#cccccc"],7:"#cccccc #bf9990 #b26553 #a53217 #b26553 #bf9990 #cccccc".split(" "),
9:"#cccccc #c2a69f #b97f72 #af5944 #a53217 #af5944 #b97f72 #c2a69f #cccccc".split(" "),stops:["#cccccc","#b97f72","#a53217","#b97f72","#cccccc"]},"highlight-bluegreen-gray":{3:["#889e9b","#004238","#889e9b"],5:["#cccccc","#668782","#004238","#668782","#cccccc"],7:"#cccccc #889e9b #447069 #004238 #447069 #889e9b #cccccc".split(" "),9:"#cccccc #99aaa7 #668782 #33655d #004238 #33655d #668782 #99aaa7 #cccccc".split(" "),stops:["#cccccc","#668782","#004238","#668782","#cccccc"]},"highlight-red-gray":{3:["#bb8c8c",
"#990b0b","#bb8c8c"],5:["#cccccc","#b36c6c","#990b0b","#b36c6c","#cccccc"],7:"#cccccc #bb8c8c #aa4b4b #990b0b #aa4b4b #bb8c8c #cccccc".split(" "),9:"#cccccc #bf9c9c #b36c6c #a63b3b #990b0b #a63b3b #b36c6c #bf9c9c #cccccc".split(" "),stops:["#cccccc","#b36c6c","#990b0b","#b36c6c","#cccccc"]},"highlight-orange-gray-dark":{3:["#ac9588","#6b2600","#ac9588"],5:["#cccccc","#9c7966","#6b2600","#9c7966","#cccccc"],7:"#cccccc #ac9588 #8b5d44 #6b2600 #8b5d44 #ac9588 #cccccc".split(" "),9:"#cccccc #b4a399 #9c7966 #835033 #6b2600 #835033 #9c7966 #b4a399 #cccccc".split(" "),
stops:["#cccccc","#9c7966","#6b2600","#9c7966","#cccccc"]},"highlight-orange-gray-bright":{3:["#775e35","#ffb339","#775e35"],5:["#333333","#997336","#ffb339","#997336","#333333"],7:"#333333 #775e35 #bb8837 #ffb339 #bb8837 #775e35 #333333".split(" "),9:"#333333 #665335 #997336 #cc9338 #ffb339 #cc9338 #997336 #665335 #333333".split(" "),stops:["#333333","#997336","#ffb339","#997336","#333333"]},"highlight-purple-gray":{3:["#9e91ac","#411b6d","#9e91ac"],5:["#cccccc","#87749d","#411b6d","#87749d","#cccccc"],
7:"#cccccc #9e91ac #6f568d #411b6d #6f568d #9e91ac #cccccc".split(" "),9:"#cccccc #a9a0b4 #87749d #644785 #411b6d #644785 #87749d #a9a0b4 #cccccc".split(" "),stops:["#cccccc","#87749d","#411b6d","#87749d","#cccccc"]},"highlight-pink-gray":{3:["#a58ba6","#570959","#a58ba6"],5:["#cccccc","#926b93","#570959","#926b93","#cccccc"],7:"#cccccc #a58ba6 #7e4a7f #570959 #7e4a7f #a58ba6 #cccccc".split(" "),9:"#cccccc #af9baf #926b93 #743a76 #570959 #743a76 #926b93 #af9baf #cccccc".split(" "),stops:["#cccccc",
"#926b93","#570959","#926b93","#cccccc"]},"highlight-blue-gray":{3:["#8d98a7","#10305e","#8d98a7"],5:["#cccccc","#6e7e95","#10305e","#6e7e95","#cccccc"],7:"#cccccc #8d98a7 #4f6483 #10305e #4f6483 #8d98a7 #cccccc".split(" "),9:"#cccccc #9da5b1 #6e7e95 #3f577a #10305e #3f577a #6e7e95 #9da5b1 #cccccc".split(" "),stops:["#cccccc","#6e7e95","#10305e","#6e7e95","#cccccc"]},"highlight-blue-gray-dark":{3:["#8895a0","#002649","#8895a0"],5:["#cccccc","#66798b","#002649","#66798b","#cccccc"],7:"#cccccc #8895a0 #445d75 #002649 #445d75 #8895a0 #cccccc".split(" "),
9:"#cccccc #99a3ab #66798b #33506a #002649 #33506a #66798b #99a3ab #cccccc".split(" "),stops:["#cccccc","#66798b","#002649","#66798b","#cccccc"]},"highlight-blue-gray-bright":{3:["#49726c","#75efdd","#49726c"],5:["#333333","#549188","#75efdd","#549188","#333333"],7:"#333333 #49726c #5fb0a4 #75efdd #5fb0a4 #49726c #333333".split(" "),9:"#333333 #44625e #549188 #65c0b3 #75efdd #65c0b3 #549188 #44625e #333333".split(" "),stops:["#333333","#549188","#75efdd","#549188","#333333"]},"extremesdiv-bluegreen-yellow-orange":{stops:["rgba(0,66,56,1)",
"rgba(0,66,56,0.5)","rgba(255,255,255,0)","rgba(165,50,23,0.5)","rgba(165,50,23,1)"]},"extremesdiv-orange-yellow-blue-light":{stops:["rgba(165,50,23,1)","rgba(165,50,23,0.5)","rgba(255,255,255,0)","rgba(16,48,94,0.5)","rgba(16,48,94,1)"]},"extremesdiv-green-yellow-redpurple":{stops:["rgba(56,73,3,1)","rgba(56,73,3,0.5)","rgba(255,255,255,0)","rgba(102,0,22,0.5)","rgba(102,0,22,1)"]},"extremesdiv-green-yellow-orange":{stops:["rgba(56,73,3,1)","rgba(56,73,3,0.5)","rgba(255,255,255,0)","rgba(165,50,23,0.5)",
"rgba(165,50,23,1)"]},"extremesdiv-orange-purple":{stops:["rgba(165,50,23,1)","rgba(165,50,23,0.5)","rgba(255,255,255,0)","rgba(65,27,109,0.5)","rgba(65,27,109,1)"]},"extremesdiv-bluegreen-purple":{stops:["rgba(0,66,56,1)","rgba(0,66,56,0.5)","rgba(255,255,255,0)","rgba(65,27,109,0.5)","rgba(65,27,109,1)"]},"extremesdiv-bluegreen-orange":{stops:["rgba(0,66,56,1)","rgba(0,66,56,0.5)","rgba(255,255,255,0)","rgba(165,50,23,0.5)","rgba(165,50,23,1)"]},"extremesdiv-orange-pink":{stops:["rgba(165,50,23,1)",
"rgba(165,50,23,0.5)","rgba(255,255,255,0)","rgba(87,9,89,0.5)","rgba(87,9,89,1)"]},"extremesdiv-redpurple-blue":{stops:["rgba(102,0,22,1)","rgba(102,0,22,0.5)","rgba(255,255,255,0)","rgba(16,48,94,0.5)","rgba(16,48,94,1)"]},"extremesdiv-orange-blue":{stops:["rgba(165,50,23,1)","rgba(165,50,23,0.5)","rgba(255,255,255,0)","rgba(16,48,94,0.5)","rgba(16,48,94,1)"]},"extremesdiv-green-pink":{stops:["rgba(56,73,3,1)","rgba(56,73,3,0.5)","rgba(255,255,255,0)","rgba(87,9,89,0.5)","rgba(87,9,89,1)"]},"extremesdiv-bluegreen-redpurple":{stops:["rgba(0,66,56,1)",
"rgba(0,66,56,0.5)","rgba(255,255,255,0)","rgba(102,0,22,0.5)","rgba(102,0,22,1)"]},"extremesdiv-green-redpurple":{stops:["rgba(56,73,3,1)","rgba(56,73,3,0.5)","rgba(255,255,255,0)","rgba(102,0,22,0.5)","rgba(102,0,22,1)"]},"extremesdiv-green-orange":{stops:["rgba(56,73,3,1)","rgba(56,73,3,0.5)","rgba(255,255,255,0)","rgba(165,50,23,0.5)","rgba(165,50,23,1)"]},"extremesdiv-red-yellow-pink":{stops:["rgba(153,11,11,1)","rgba(153,11,11,0.5)","rgba(255,255,255,0)","rgba(87,9,89,0.5)","rgba(87,9,89,1)"]},
"extremesdiv-blue-green":{stops:["rgba(16,48,94,1)","rgba(16,48,94,0.5)","rgba(255,255,255,0)","rgba(56,73,3,0.5)","rgba(56,73,3,1)"]},"extremesdiv-bluegreen-yellow-redpurple":{stops:["rgba(0,66,56,1)","rgba(0,66,56,0.5)","rgba(255,255,255,0)","rgba(102,0,22,0.5)","rgba(102,0,22,1)"]},"extremesdiv-bluegreen-pink":{stops:["rgba(0,66,56,1)","rgba(0,66,56,0.5)","rgba(255,255,255,0)","rgba(87,9,89,0.5)","rgba(87,9,89,1)"]},"extremesdiv-orange-yellow-blue-dark":{stops:["rgba(107,38,0,1)","rgba(107,38,0,0.5)",
"rgba(255,255,255,0)","rgba(0,38,73,0.5)","rgba(0,38,73,1)"]},"extremesdiv-red-yellow-purple":{stops:["rgba(153,11,11,1)","rgba(153,11,11,0.5)","rgba(255,255,255,0)","rgba(65,27,109,0.5)","rgba(65,27,109,1)"]},"extremesdiv-orange-yellow-pink":{stops:["rgba(165,50,23,1)","rgba(165,50,23,0.5)","rgba(255,255,255,0)","rgba(87,9,89,0.5)","rgba(87,9,89,1)"]},"extremesdiv-orange-gray-blue":{stops:["rgba(255,179,57,1)","rgba(255,179,57,0.5)","rgba(255,255,255,0)","rgba(117,239,221,0.5)","rgba(117,239,221,1)"]},
"extremesdiv-yellow-gray-purple":{stops:["rgba(255,237,133,1)","rgba(255,237,133,0.5)","rgba(255,255,255,0)","rgba(235,160,249,0.5)","rgba(235,160,249,1)"]},"extremesdiv-red-gray-blue":{stops:["rgba(255,136,136,1)","rgba(255,136,136,0.5)","rgba(255,255,255,0)","rgba(117,239,221,0.5)","rgba(117,239,221,1)"]},"extremesdiv-green-gray-purple":{stops:["rgba(139,239,139,1)","rgba(139,239,139,0.5)","rgba(255,255,255,0)","rgba(235,160,249,0.5)","rgba(235,160,249,1)"]},"extremes-orange":{3:["rgba(165,50,23,1.0)",
"rgba(165,50,23,0.40)","rgba(165,50,23,1.0)"],5:["rgba(165,50,23,1.0)","rgba(165,50,23,0.60)","rgba(165,50,23,0.20)","rgba(165,50,23,0.60)","rgba(165,50,23,1.0)"],7:"rgba(165,50,23,1.0) rgba(165,50,23,0.70) rgba(165,50,23,0.40) rgba(165,50,23,0.10) rgba(165,50,23,0.40) rgba(165,50,23,0.70) rgba(165,50,23,1.0)".split(" "),9:"rgba(165,50,23,1.0) rgba(165,50,23,0.78) rgba(165,50,23,0.55) rgba(165,50,23,0.33) rgba(165,50,23,0.10) rgba(165,50,23,0.33) rgba(165,50,23,0.55) rgba(165,50,23,0.78) rgba(165,50,23,1.0)".split(" "),
stops:["rgba(165,50,23,1.0)","rgba(165,50,23,0.5)","rgba(165,50,23,0)","rgba(165,50,23,0.5)","rgba(165,50,23,1.0)"]},"extremes-bluegreen":{3:["rgba(0,66,56,1.0)","rgba(0,66,56,0.40)","rgba(0,66,56,1.0)"],5:["rgba(0,66,56,1.0)","rgba(0,66,56,0.60)","rgba(0,66,56,0.20)","rgba(0,66,56,0.60)","rgba(0,66,56,1.0)"],7:"rgba(0,66,56,1.0) rgba(0,66,56,0.70) rgba(0,66,56,0.40) rgba(0,66,56,0.10) rgba(0,66,56,0.40) rgba(0,66,56,0.70) rgba(0,66,56,1.0)".split(" "),9:"rgba(0,66,56,1.0) rgba(0,66,56,0.78) rgba(0,66,56,0.55) rgba(0,66,56,0.33) rgba(0,66,56,0.10) rgba(0,66,56,0.33) rgba(0,66,56,0.55) rgba(0,66,56,0.78) rgba(0,66,56,1.0)".split(" "),
stops:["rgba(0,66,56,1.0)","rgba(0,66,56,0.5)","rgba(0,66,56,0)","rgba(0,66,56,0.5)","rgba(0,66,56,1.0)"]},"extremes-red":{3:["rgba(153,11,11,1.0)","rgba(153,11,11,0.40)","rgba(153,11,11,1.0)"],5:["rgba(153,11,11,1.0)","rgba(153,11,11,0.60)","rgba(153,11,11,0.20)","rgba(153,11,11,0.60)","rgba(153,11,11,1.0)"],7:"rgba(153,11,11,1.0) rgba(153,11,11,0.70) rgba(153,11,11,0.40) rgba(153,11,11,0.10) rgba(153,11,11,0.40) rgba(153,11,11,0.70) rgba(153,11,11,1.0)".split(" "),9:"rgba(153,11,11,1.0) rgba(153,11,11,0.78) rgba(153,11,11,0.55) rgba(153,11,11,0.33) rgba(153,11,11,0.10) rgba(153,11,11,0.33) rgba(153,11,11,0.55) rgba(153,11,11,0.78) rgba(153,11,11,1.0)".split(" "),
stops:["rgba(153,11,11,1.0)","rgba(153,11,11,0.5)","rgba(153,11,11,0)","rgba(153,11,11,0.5)","rgba(153,11,11,1.0)"]},"extremes-orange-dark":{3:["rgba(107,38,0,1.0)","rgba(107,38,0,0.40)","rgba(107,38,0,1.0)"],5:["rgba(107,38,0,1.0)","rgba(107,38,0,0.60)","rgba(107,38,0,0.20)","rgba(107,38,0,0.60)","rgba(107,38,0,1.0)"],7:"rgba(107,38,0,1.0) rgba(107,38,0,0.70) rgba(107,38,0,0.40) rgba(107,38,0,0.10) rgba(107,38,0,0.40) rgba(107,38,0,0.70) rgba(107,38,0,1.0)".split(" "),9:"rgba(107,38,0,1.0) rgba(107,38,0,0.78) rgba(107,38,0,0.55) rgba(107,38,0,0.33) rgba(107,38,0,0.10) rgba(107,38,0,0.33) rgba(107,38,0,0.55) rgba(107,38,0,0.78) rgba(107,38,0,1.0)".split(" "),
stops:["rgba(107,38,0,1.0)","rgba(107,38,0,0.5)","rgba(107,38,0,0)","rgba(107,38,0,0.5)","rgba(107,38,0,1.0)"]},"extremes-orange-bright":{3:["rgba(255,179,57,1.0)","rgba(255,179,57,0.40)","rgba(255,179,57,1.0)"],5:["rgba(255,179,57,1.0)","rgba(255,179,57,0.60)","rgba(255,179,57,0.20)","rgba(255,179,57,0.60)","rgba(255,179,57,1.0)"],7:"rgba(255,179,57,1.0) rgba(255,179,57,0.70) rgba(255,179,57,0.40) rgba(255,179,57,0.10) rgba(255,179,57,0.40) rgba(255,179,57,0.70) rgba(255,179,57,1.0)".split(" "),
9:"rgba(255,179,57,1.0) rgba(255,179,57,0.78) rgba(255,179,57,0.55) rgba(255,179,57,0.33) rgba(255,179,57,0.10) rgba(255,179,57,0.33) rgba(255,179,57,0.55) rgba(255,179,57,0.78) rgba(255,179,57,1.0)".split(" "),stops:["rgba(255,179,57,1.0)","rgba(255,179,57,0.5)","rgba(255,179,57,0)","rgba(255,179,57,0.5)","rgba(255,179,57,1.0)"]},"extremes-purple":{3:["rgba(65,27,109,1.0)","rgba(65,27,109,0.40)","rgba(65,27,109,1.0)"],5:["rgba(65,27,109,1.0)","rgba(65,27,109,0.60)","rgba(65,27,109,0.20)","rgba(65,27,109,0.60)",
"rgba(65,27,109,1.0)"],7:"rgba(65,27,109,1.0) rgba(65,27,109,0.70) rgba(65,27,109,0.40) rgba(65,27,109,0.10) rgba(65,27,109,0.40) rgba(65,27,109,0.70) rgba(65,27,109,1.0)".split(" "),9:"rgba(65,27,109,1.0) rgba(65,27,109,0.78) rgba(65,27,109,0.55) rgba(65,27,109,0.33) rgba(65,27,109,0.10) rgba(65,27,109,0.33) rgba(65,27,109,0.55) rgba(65,27,109,0.78) rgba(65,27,109,1.0)".split(" "),stops:["rgba(65,27,109,1.0)","rgba(65,27,109,0.5)","rgba(65,27,109,0)","rgba(65,27,109,0.5)","rgba(65,27,109,1.0)"]},
"extremes-pink":{3:["rgba(87,9,89,1.0)","rgba(87,9,89,0.40)","rgba(87,9,89,1.0)"],5:["rgba(87,9,89,1.0)","rgba(87,9,89,0.60)","rgba(87,9,89,0.20)","rgba(87,9,89,0.60)","rgba(87,9,89,1.0)"],7:"rgba(87,9,89,1.0) rgba(87,9,89,0.70) rgba(87,9,89,0.40) rgba(87,9,89,0.10) rgba(87,9,89,0.40) rgba(87,9,89,0.70) rgba(87,9,89,1.0)".split(" "),9:"rgba(87,9,89,1.0) rgba(87,9,89,0.78) rgba(87,9,89,0.55) rgba(87,9,89,0.33) rgba(87,9,89,0.10) rgba(87,9,89,0.33) rgba(87,9,89,0.55) rgba(87,9,89,0.78) rgba(87,9,89,1.0)".split(" "),
stops:["rgba(87,9,89,1.0)","rgba(87,9,89,0.5)","rgba(87,9,89,0)","rgba(87,9,89,0.5)","rgba(87,9,89,1.0)"]},"extremes-blue":{3:["rgba(16,48,94,1.0)","rgba(16,48,94,0.40)","rgba(16,48,94,1.0)"],5:["rgba(16,48,94,1.0)","rgba(16,48,94,0.60)","rgba(16,48,94,0.20)","rgba(16,48,94,0.60)","rgba(16,48,94,1.0)"],7:"rgba(16,48,94,1.0) rgba(16,48,94,0.70) rgba(16,48,94,0.40) rgba(16,48,94,0.10) rgba(16,48,94,0.40) rgba(16,48,94,0.70) rgba(16,48,94,1.0)".split(" "),9:"rgba(16,48,94,1.0) rgba(16,48,94,0.78) rgba(16,48,94,0.55) rgba(16,48,94,0.33) rgba(16,48,94,0.10) rgba(16,48,94,0.33) rgba(16,48,94,0.55) rgba(16,48,94,0.78) rgba(16,48,94,1.0)".split(" "),
stops:["rgba(16,48,94,1.0)","rgba(16,48,94,0.5)","rgba(16,48,94,0)","rgba(16,48,94,0.5)","rgba(16,48,94,1.0)"]},"extremes-blue-dark":{3:["rgba(0,38,73,1.0)","rgba(0,38,73,0.40)","rgba(0,38,73,1.0)"],5:["rgba(0,38,73,1.0)","rgba(0,38,73,0.60)","rgba(0,38,73,0.20)","rgba(0,38,73,0.60)","rgba(0,38,73,1.0)"],7:"rgba(0,38,73,1.0) rgba(0,38,73,0.70) rgba(0,38,73,0.40) rgba(0,38,73,0.10) rgba(0,38,73,0.40) rgba(0,38,73,0.70) rgba(0,38,73,1.0)".split(" "),9:"rgba(0,38,73,1.0) rgba(0,38,73,0.78) rgba(0,38,73,0.55) rgba(0,38,73,0.33) rgba(0,38,73,0.10) rgba(0,38,73,0.33) rgba(0,38,73,0.55) rgba(0,38,73,0.78) rgba(0,38,73,1.0)".split(" "),
stops:["rgba(0,38,73,1.0)","rgba(0,38,73,0.5)","rgba(0,38,73,0)","rgba(0,38,73,0.5)","rgba(0,38,73,1.0)"]},"extremes-blue-bright":{3:["rgba(117,239,221,1.0)","rgba(117,239,221,0.40)","rgba(117,239,221,1.0)"],5:["rgba(117,239,221,1.0)","rgba(117,239,221,0.60)","rgba(117,239,221,0.20)","rgba(117,239,221,0.60)","rgba(117,239,221,1.0)"],7:"rgba(117,239,221,1.0) rgba(117,239,221,0.70) rgba(117,239,221,0.40) rgba(117,239,221,0.10) rgba(117,239,221,0.40) rgba(117,239,221,0.70) rgba(117,239,221,1.0)".split(" "),
9:"rgba(117,239,221,1.0) rgba(117,239,221,0.78) rgba(117,239,221,0.55) rgba(117,239,221,0.33) rgba(117,239,221,0.10) rgba(117,239,221,0.33) rgba(117,239,221,0.55) rgba(117,239,221,0.78) rgba(117,239,221,1.0)".split(" "),stops:["rgba(117,239,221,1.0)","rgba(117,239,221,0.5)","rgba(117,239,221,0)","rgba(117,239,221,0.5)","rgba(117,239,221,1.0)"]},"extremes-orange-gray":{3:["#a53217","#bf9990","#a53217"],5:["#a53217","#b97f72","#cccccc","#b97f72","#a53217"],7:"#a53217 #b26553 #bf9990 #cccccc #bf9990 #b26553 #a53217".split(" "),
9:"#a53217 #af5944 #b97f72 #c2a69f #cccccc #c2a69f #b97f72 #af5944 #a53217".split(" "),stops:["#a53217","#b97f72","#cccccc","#b97f72","#a53217"]},"extremes-bluegreen-gray":{3:["#004238","#889e9b","#004238"],5:["#004238","#668782","#cccccc","#668782","#004238"],7:"#004238 #447069 #889e9b #cccccc #889e9b #447069 #004238".split(" "),9:"#004238 #33655d #668782 #99aaa7 #cccccc #99aaa7 #668782 #33655d #004238".split(" "),stops:["#004238","#668782","#cccccc","#668782","#004238"]},"extremes-red-gray":{3:["#990b0b",
"#bb8c8c","#990b0b"],5:["#990b0b","#b36c6c","#cccccc","#b36c6c","#990b0b"],7:"#990b0b #aa4b4b #bb8c8c #cccccc #bb8c8c #aa4b4b #990b0b".split(" "),9:"#990b0b #a63b3b #b36c6c #bf9c9c #cccccc #bf9c9c #b36c6c #a63b3b #990b0b".split(" "),stops:["#990b0b","#b36c6c","#cccccc","#b36c6c","#990b0b"]},"extremes-orange-gray-dark":{3:["#6b2600","#ac9588","#6b2600"],5:["#6b2600","#9c7966","#cccccc","#9c7966","#6b2600"],7:"#6b2600 #8b5d44 #ac9588 #cccccc #ac9588 #8b5d44 #6b2600".split(" "),9:"#6b2600 #835033 #9c7966 #b4a399 #cccccc #b4a399 #9c7966 #835033 #6b2600".split(" "),
stops:["#6b2600","#9c7966","#cccccc","#9c7966","#6b2600"]},"extremes-orange-gray-bright":{3:["#ffb339","#775e35","#ffb339"],5:["#ffb339","#997336","#333333","#997336","#ffb339"],7:"#ffb339 #bb8837 #775e35 #333333 #775e35 #bb8837 #ffb339".split(" "),9:"#ffb339 #cc9338 #997336 #665335 #333333 #665335 #997336 #cc9338 #ffb339".split(" "),stops:["#ffb339","#997336","#333333","#997336","#ffb339"]},"extremes-purple-gray":{3:["#411b6d","#9e91ac","#411b6d"],5:["#411b6d","#87749d","#cccccc","#87749d","#411b6d"],
7:"#411b6d #6f568d #9e91ac #cccccc #9e91ac #6f568d #411b6d".split(" "),9:"#411b6d #644785 #87749d #a9a0b4 #cccccc #a9a0b4 #87749d #644785 #411b6d".split(" "),stops:["#411b6d","#87749d","#cccccc","#87749d","#411b6d"]},"extremes-pink-gray":{3:["#570959","#a58ba6","#570959"],5:["#570959","#926b93","#cccccc","#926b93","#570959"],7:"#570959 #7e4a7f #a58ba6 #cccccc #a58ba6 #7e4a7f #570959".split(" "),9:"#570959 #743a76 #926b93 #af9baf #cccccc #af9baf #926b93 #743a76 #570959".split(" "),stops:["#570959",
"#926b93","#cccccc","#926b93","#570959"]},"extremes-blue-gray":{3:["#10305e","#8d98a7","#10305e"],5:["#10305e","#6e7e95","#cccccc","#6e7e95","#10305e"],7:"#10305e #4f6483 #8d98a7 #cccccc #8d98a7 #4f6483 #10305e".split(" "),9:"#10305e #3f577a #6e7e95 #9da5b1 #cccccc #9da5b1 #6e7e95 #3f577a #10305e".split(" "),stops:["#10305e","#6e7e95","#cccccc","#6e7e95","#10305e"]},"extremes-blue-gray-dark":{3:["#002649","#8895a0","#002649"],5:["#002649","#66798b","#cccccc","#66798b","#002649"],7:"#002649 #445d75 #8895a0 #cccccc #8895a0 #445d75 #002649".split(" "),
9:"#002649 #33506a #66798b #99a3ab #cccccc #99a3ab #66798b #33506a #002649".split(" "),stops:["#002649","#66798b","#cccccc","#66798b","#002649"]},"extremes-blue-gray-bright":{3:["#75efdd","#49726c","#75efdd"],5:["#75efdd","#549188","#333333","#549188","#75efdd"],7:"#75efdd #5fb0a4 #49726c #333333 #49726c #5fb0a4 #75efdd".split(" "),9:"#75efdd #65c0b3 #549188 #44625e #333333 #44625e #549188 #65c0b3 #75efdd".split(" "),stops:["#75efdd","#549188","#333333","#549188","#75efdd"]},"cat-dark":{2:["#ed5151",
"#149ece"],3:["#ed5151","#149ece","#a7c636"],4:["#ed5151","#149ece","#a7c636","#9e559c"],5:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f"],6:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e".split(" "),7:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8".split(" "),8:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a".split(" "),9:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99".split(" "),10:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6".split(" "),
11:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779".split(" "),12:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" "),stops:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},"cat-light":{2:["#fd7f6f","#7eb0d5"],3:["#fd7f6f","#7eb0d5","#b2e061"],4:["#fd7f6f","#7eb0d5","#b2e061","#bd7ebe"],5:["#fd7f6f","#7eb0d5","#b2e061","#bd7ebe","#ffb55a"],
6:"#fd7f6f #7eb0d5 #b2e061 #bd7ebe #ffb55a #ffee65".split(" "),7:"#fd7f6f #7eb0d5 #b2e061 #bd7ebe #ffb55a #ffee65 #beb9db".split(" "),8:"#fd7f6f #7eb0d5 #b2e061 #bd7ebe #ffb55a #ffee65 #beb9db #fdcce5".split(" "),9:"#fd7f6f #7eb0d5 #b2e061 #bd7ebe #ffb55a #ffee65 #beb9db #fdcce5 #8bd3c7".split(" "),10:"#fd7f6f #7eb0d5 #b2e061 #bd7ebe #ffb55a #ffee65 #beb9db #fdcce5 #8bd3c7 #cbecc4".split(" "),11:"#fd7f6f #7eb0d5 #b2e061 #bd7ebe #ffb55a #ffee65 #beb9db #fdcce5 #8bd3c7 #cbecc4 #ffffaf".split(" "),12:"#fd7f6f #7eb0d5 #b2e061 #bd7ebe #ffb55a #ffee65 #beb9db #fdcce5 #8bd3c7 #cbecc4 #ffffaf #d9d9d9".split(" "),
stops:"#fd7f6f #7eb0d5 #b2e061 #bd7ebe #ffb55a #ffee65 #beb9db #fdcce5 #8bd3c7 #cbecc4 #ffffaf #d9d9d9".split(" ")},"predominant-v1":{stops:["#a03500","#3264c8","#72b38e","#d9b400","#986ba1"]},"predominant-v2":{stops:["#dc4b00","#3c6ccc","#4db478","#d9dc00","#986ba1"]},"predominant-v3":{stops:["#c44296","#1e8553","#d9bf0d","#00b6f1","#807b71"]},"predominant-v4":{stops:["#ccb642","#6998b4","#a67474","#8f8399","#a0a043"]},"predominant-v5":{stops:["#0bb4ff","#e60049","#9b19f5","#78dc0e","#dc0ab4"]},
"tropical-bliss":{stops:[[252,225,56,1],[255,247,153,1],[252,210,126,1],[241,152,60,1],[165,83,183,1],[177,169,208,1],[110,207,252,1],[76,129,205,1],[252,111,132,1],[252,62,90,1],[106,246,137,1],[72,136,92,1]]},"desert-blooms":{stops:[[16,36,50,1],[20,77,89,1],[255,199,48,1],[237,147,16,1],[166,79,27,1],[102,21,16,1],[217,53,26,1],[179,21,21,1],[74,9,50,1],[140,33,63,1],[24,56,46,1],[44,105,84,1]]},"under-the-sea":{stops:[[191,151,39,1],[96,113,0,1],[0,115,76,1],[112,68,137,1],[1,172,202,1],[2,78,
118,1],[240,145,0,1],[234,49,31,1],[198,0,75,1],[117,112,179,1],[102,102,102,1],[51,51,51,1]]},"vibrant-rainbow":{stops:[[255,251,0,1],[245,203,17,1],[159,212,12,1],[70,227,156,1],[50,184,166,1],[127,242,250,1],[173,0,242,1],[196,97,235,1],[235,114,0,1],[232,167,132,1],[191,46,46,1],[108,112,0,1]]},"ocean-bay":{stops:[[25,25,33,1],[17,73,92,1],[120,177,194,1],[69,79,75,1],[143,143,130,1],[155,224,192,1],[135,176,81,1],[247,236,136,1],[235,220,193,1],[219,182,88,1],[196,53,65,1],[117,53,30,1]]},"prairie-summer":{stops:[[51,
36,36,1],[117,21,85,1],[212,112,19,1],[214,137,137,1],[33,17,115,1],[130,170,214,1],[123,250,235,1],[110,201,168,1],[107,100,8,1],[234,218,64,1],[204,197,74,1],[31,194,53,1]]},"pastel-chalk":{stops:[[255,253,153,1],[245,230,164,1],[193,212,140,1],[184,227,208,1],[160,184,181,1],[203,247,250,1],[215,145,242,1],[223,193,235,1],[242,185,131,1],[232,196,178,1],[191,142,142,1],[148,153,92,1]]},election:{11:"#086ca0 #2668a0 #4364a1 #6160a1 #7e5ca2 #9c58a2 #a44d8b #ac4274 #b5385d #bd2d46 #c5222f".split(" "),
stops:"#086ca0 #2668a0 #4364a1 #6160a1 #7e5ca2 #9c58a2 #a44d8b #ac4274 #b5385d #bd2d46 #c5222f".split(" ")},temperature:{12:"#000068 #333399 #756db5 #9a93ca #c6c3e2 #e7e6f2 #fdece3 #fdd2bf #faa98b #f68460 #f23d2f #c60000".split(" "),stops:"#000068 #333399 #756db5 #9a93ca #c6c3e2 #e7e6f2 #fdece3 #fdd2bf #faa98b #f68460 #f23d2f #c60000".split(" ")},"elevation-warm-humid":{11:"#6c9a87 #77ad95 #86b89d #a9c0a7 #d5c9b6 #d4b8a4 #d4c1b4 #d4cecc #dcdddd #ebebeb #f5f5f5".split(" "),stops:"#6c9a87 #77ad95 #86b89d #a9c0a7 #d5c9b6 #d4b8a4 #d4c1b4 #d4cecc #dcdddd #ebebeb #f5f5f5".split(" ")},
"elevation-cool-humid":{11:"#72958e #82a5a0 #91b2ac #b4bfb5 #d5c9b6 #d4b8a4 #d4c1b4 #d4cecc #dcdddd #ebebeb #f5f5f5".split(" "),stops:"#72958e #82a5a0 #91b2ac #b4bfb5 #d5c9b6 #d4b8a4 #d4c1b4 #d4cecc #dcdddd #ebebeb #f5f5f5".split(" ")},"elevation-arid":{11:"#938b83 #a99f94 #b4aa9e #cabead #d5c9b6 #d4b8a4 #d4c1b4 #d4cecc #dcdddd #ebebeb #f5f5f5".split(" "),stops:"#938b83 #a99f94 #b4aa9e #cabead #d5c9b6 #d4b8a4 #d4c1b4 #d4cecc #dcdddd #ebebeb #f5f5f5".split(" ")},"elevation-polar":{8:"#94a9c0 #a3b4cb #abc0d5 #b8c9e0 #cad6e8 #dbe1f0 #edf2fb #eff3fb".split(" "),
stops:"#94a9c0 #a3b4cb #abc0d5 #b8c9e0 #cad6e8 #dbe1f0 #edf2fb #eff3fb".split(" ")},precipitation:{17:"#f11714 #f88c51 #fcb16b #fec784 #ffe6b6 #e7f0c0 #cfe5ac #b6db98 #9ed187 #85c860 #6ec13a #13b445 #00a64b #9089c4 #756db5 #625cab #2d2b94".split(" "),stops:"#f11714 #f88c51 #fcb16b #fec784 #ffe6b6 #e7f0c0 #cfe5ac #b6db98 #9ed187 #85c860 #6ec13a #13b445 #00a64b #9089c4 #756db5 #625cab #2d2b94".split(" ")},spectral:{6:"#b8529e #3853a3 #6fcbdc #69bc45 #f6eb0f #ec1e24".split(" "),stops:"#b8529e #3853a3 #6fcbdc #69bc45 #f6eb0f #ec1e24".split(" ")},
bathymetry:{14:"#e9f5ff #d4eaf8 #bfdff2 #abd5ec #96cae5 #81bfdf #6cb4d8 #5ca0ca #4c8dbc #3d79ae #2d65a0 #1d5292 #0d3e84 #08306b".split(" "),stops:"#e9f5ff #d4eaf8 #bfdff2 #abd5ec #96cae5 #81bfdf #6cb4d8 #5ca0ca #4c8dbc #3d79ae #2d65a0 #1d5292 #0d3e84 #08306b".split(" ")},"cat-dark-6":{6:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e".split(" "),stops:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e".split(" ")},"cat-light-6":{6:"#fd7f6f #7eb0d5 #b2e061 #bd7ebe #ffb55a #ffee65".split(" "),stops:"#fd7f6f #7eb0d5 #b2e061 #bd7ebe #ffb55a #ffee65".split(" ")}}})},
"esri/styles/size":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../Color"],function(g,m,a,b,d){function c(a,b){var c,e,f;if(a)switch(c={},b){case "point":c.color=new d(a.color);c.noDataColor=new d(a.noDataColor);c.outline={color:new d(a.outline.color),width:a.outline.width};c.size=a.size;c.noDataSize=a.noDataSize;c.minSize=a.minSize;c.maxSize=a.maxSize;c.opacity=a.opacity||1;break;case "line":c.color=new d(a.color);c.noDataColor=new d(a.noDataColor);c.width=a.width;
c.noDataWidth=a.noDataWidth;c.minWidth=a.minWidth;c.maxWidth=a.maxWidth;c.opacity=a.opacity||1;break;case "polygon":e=a.marker,f=a.background,c.marker={color:new d(e.color),noDataColor:new d(e.noDataColor),outline:{color:new d(e.outline.color),width:e.outline.width},size:e.size,noDataSize:e.noDataSize,minSize:e.minSize,maxSize:e.maxSize},c.background={color:new d(f.color),outline:{color:new d(f.outline.color),width:f.outline.width}},c.opacity=a.opacity||1,delete c.marker.opacity}return c}function h(a){var b;
a&&(b=m.mixin({},a),b.color&&(b.color=new d(b.color)),b.noDataColor&&(b.noDataColor=new d(b.noDataColor)),b.outline&&(b.outline={color:b.outline.color&&new d(b.outline.color),width:b.outline.width}));return b}function n(a){"esriGeometryPoint"===a||"esriGeometryMultipoint"===a?a="point":"esriGeometryPolyline"===a?a="line":"esriGeometryPolygon"===a&&(a="polygon");return a}a=[128,128,128,1];b=[128,128,128,1];var f={primary:{color:[227,139,79,1],noDataColor:a,outline:{color:[255,255,255,1],width:1},noDataSize:4,
size:12,minSize:8,maxSize:50,opacity:0.8},secondary:[{color:[128,128,128,1],noDataColor:a,outline:{color:[255,255,255,1],width:1},noDataSize:4,size:12,minSize:8,maxSize:50,opacity:0.8},{color:[255,255,255,1],noDataColor:a,outline:{color:[128,128,128,1],width:1},noDataSize:4,size:12,minSize:8,maxSize:50,opacity:0.8}]},e={primary:{color:[227,139,79,1],noDataColor:b,outline:{color:[51,51,51,1],width:1},noDataSize:4,size:12,minSize:8,maxSize:50,opacity:0.8},secondary:[{color:[178,178,178,1],noDataColor:b,
outline:{color:[51,51,51,1],width:1},noDataSize:4,size:12,minSize:8,maxSize:50,opacity:0.8},{color:[26,26,26,1],noDataColor:b,outline:{color:[128,128,128,1],width:1},noDataSize:4,size:12,minSize:8,maxSize:50,opacity:0.8}]},p={r:0,g:0,b:0,a:0},s={color:p,outline:{color:{r:166,g:166,b:166,a:1},width:1}},p={color:p,outline:{color:{r:166,g:166,b:166,a:1},width:1}},u={"default":{name:"default",label:"Default",description:"Default theme for visualizing features by varying their size to show data.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm".split(" "),
dark:["satellite","hybrid","dark-gray"]},pointSchemes:{light:f,dark:e},lineSchemes:{light:{primary:{color:[226,119,40,1],noDataColor:a,noDataWidth:1,width:1,minWidth:1,maxWidth:18},secondary:[{color:[77,77,77,1],noDataColor:a,noDataWidth:1,width:1,minWidth:1,maxWidth:18},{color:[153,153,153,1],noDataColor:a,noDataWidth:1,width:1,minWidth:1,maxWidth:18}]},dark:{primary:{color:[226,119,40,1],noDataColor:b,noDataWidth:1,width:1,minWidth:1,maxWidth:18},secondary:[{color:[255,255,255,1],noDataColor:b,
noDataWidth:1,width:1,minWidth:1,maxWidth:18},{color:[153,153,153,1],noDataColor:b,noDataWidth:1,width:1,minWidth:1,maxWidth:18}]}},polygonSchemes:{light:{primary:{marker:f.primary,background:p,opacity:f.primary.opacity},secondary:[{marker:f.secondary[0],background:p,opacity:f.secondary[0].opacity},{marker:f.secondary[1],background:p,opacity:f.secondary[1].opacity}]},dark:{primary:{marker:e.primary,background:s,opacity:e.primary.opacity},secondary:[{marker:e.secondary[0],background:s,opacity:e.secondary[0].opacity},
{marker:e.secondary[1],background:s,opacity:e.secondary[1].opacity}]}}}},t={};(function(){var a,b,c,d,e,f,h,g;for(a in u)for(d in b=u[a],c=b.basemapGroups,e=t[a]={basemaps:[].concat(c.light).concat(c.dark),point:{},line:{},polygon:{}},c){f=c[d];for(h=0;h<f.length;h++)g=f[h],b.pointSchemes&&(e.point[g]=b.pointSchemes[d]),b.lineSchemes&&(e.line[g]=b.lineSchemes[d]),b.polygonSchemes&&(e.polygon[g]=b.polygonSchemes[d])}})();return{getAvailableThemes:function(a){var b=[],c,d,e;for(c in u)d=u[c],e=t[c],
a&&-1===g.indexOf(e.basemaps,a)||b.push({name:d.name,label:d.label,description:d.description,basemaps:e.basemaps.slice(0)});return b},getSchemes:function(a){var b=a.theme,d=a.basemap,e=n(a.geometryType);a=t[b];var f;(a=(a=a&&a[e])&&a[d])&&(f={primaryScheme:c(a.primary,e),secondarySchemes:g.map(a.secondary,function(a){return c(a,e)})});return f},cloneScheme:function(a){var b;a&&(b=h(a),b.marker&&(b.marker=h(b.marker)),b.background&&(b.background=h(b.background)));return b}}})},"esri/styles/choropleth":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../Color ./colors".split(" "),
function(g,m,a,b,d,c){function h(a,b){return g.map(a,function(a){a=new d(a);null!=b&&(a.a=b);return a})}function n(a,b){var c,d=0;a.length===b.length&&((c=g.every(a,function(a,c){return a.r===b[c].r&&a.g===b[c].g&&a.b===b[c].b}))?d=1:(c=a.slice(0).reverse(),(c=g.every(c,function(a,c){return a.r===b[c].r&&a.g===b[c].g&&a.b===b[c].b}))&&(d=-1)));return d}function f(a,b){var c,d;if(d=n(b,a.colors))c=0<d?a:J.flipColors(a,!0);else{var e;g.some(a.colorsForClassBreaks,function(a){a.numClasses===b.length&&
(e=a.colors);return!!e});e&&(d=n(b,e))&&(c=0<d?a:J.flipColors(a,!0))}return c}function e(a,b){var c=a&&a.basemapGroups,d=a&&a.basemaps,e,f;if(c)for(e in c)if(d=c[e],d=g.indexOf(d,b),-1<d){f=e;break}f=f||b;return a&&f?a.schemes[f]:null}function p(a){var b=a.basemapGroups;a=a.basemaps;var c,d=[];if(b)for(c in b)d=d.concat(b[c]);else a&&(d=d.concat(a));return d}function s(a,b,e,f,n){var p,m,s=c[a];if(s){p={id:f+"/"+n+"/"+a,theme:f};f=b.fillOpacity;null==f&&-1!==g.indexOf(A,a)&&(f=0.8);p.opacity=f||1;
p.colors=h(s.stops);p.colorsForClassBreaks=[];for(m in s)"stops"!==m&&(m=+m,p.colorsForClassBreaks.push({numClasses:m,colors:h(s[m])}));p.noDataColor=new d(-1!==g.indexOf(A,a)?B:x);switch(e){case "point":p.outline={color:new d(b.outline.color),width:b.outline.width};p.size=b.size;break;case "line":p.width=b.width;break;case "polygon":p.outline={color:new d(b.outline.color),width:b.outline.width}}}return p}function u(a){"esriGeometryPoint"===a||"esriGeometryMultipoint"===a?a="point":"esriGeometryPolyline"===
a?a="line":"esriGeometryPolygon"===a&&(a="polygon");return a}a={color:[128,128,128,1],width:0.5};b={color:[153,153,153,1],width:0.5};var t={outline:b,fillOpacity:0.8,width:2,size:8},w={outline:a,fillOpacity:0.6,width:2,size:8},v={outline:{color:[153,153,153,0.5],width:0.5},fillOpacity:0.8,width:2,size:8},x="#aaaaaa",B="#ffffff",A="highlight-orange-gray highlight-bluegreen-gray highlight-purple-gray highlight-pink-gray highlight-blue-gray highlight-red-gray highlight-orange-gray-dark highlight-blue-gray-dark highlight-orange-gray-bright highlight-blue-gray-bright extremes-orange-gray extremes-bluegreen-gray extremes-purple-gray extremes-pink-gray extremes-blue-gray extremes-red-gray extremes-orange-gray-dark extremes-blue-gray-dark extremes-orange-gray-bright extremes-blue-gray-bright".split(" "),
C="seq-single-blues seq-single-greens seq-single-grays seq-single-oranges seq-single-purples seq-single-reds seq-multi-bugn seq-multi-bupu seq-multi-gnbu seq-multi-orrd seq-multi-pubu seq-multi-pubugn seq-multi-purd seq-multi-rdpu seq-multi-ylgn seq-multi-ylgnbu seq-multi-ylorbr seq-multi-ylorrd".split(" "),z="div-brbg div-piyg div-prgn div-puor div-rdbu div-rdgy div-rdylbu div-rdylgn div-spectral".split(" "),F="tropical-bliss desert-blooms under-the-sea vibrant-rainbow ocean-bay prairie-summer pastel-chalk".split(" "),
H={"high-to-low":{name:"high-to-low",label:"TODO",description:"TODO",basemaps:"streets gray topo terrain national-geographic oceans osm satellite hybrid dark-gray".split(" "),schemes:{streets:{common:t,primary:"seq-yellow-red-purple",secondary:"seq-yellow-orange-red seq-yellow-pink-purple seq-yellow-purple-blue seq-yellow-green-blue seq-teal-lightgreen-bright seq-green-lightgray-bright seq-teal-lightbrown-bright seq-reds-bright seq-purples-bright seq-greens-bright seq-browns-bright seq-dark-to-light-magenta-bright seq-dark-to-light-purple-bright seq-dark-to-light-blue-bright seq-dark-to-light-green-bright seq-brown-to-tan-bright seq-lightgray-blue-bright seq-lightgray-green-bright seq-lightgray-darkmagenta-bright seq-yellow-darkblue-bright seq-lightred-darkgray-bright".split(" ").concat(C)},
gray:{common:v,primary:"seq-yellow-red-purple",secondary:"seq-orange-red-light seq-yellow-orange-red seq-yellow-pink-purple seq-yellow-purple-blue seq-teal-lightgreen-bright seq-green-lightgray-bright seq-red-lightgray-bright seq-blue-lightgray-bright seq-orange-lightgray-bright seq-blue-red-yellow-bright seq-blue-tan-bright seq-teal-lightbrown-bright seq-reds-bright seq-purples-bright seq-blues-bright seq-greens-bright seq-browns-bright seq-dark-to-light-magenta-bright seq-dark-to-light-purple-bright seq-dark-to-light-blue-bright seq-dark-to-light-green-bright seq-brown-to-tan-bright seq-lightgray-blue-bright seq-lightgray-green-bright seq-lightgray-darkmagenta-bright seq-yellow-darkblue-bright seq-lightred-darkgray-bright".split(" ").concat(C)},
topo:{common:t,primary:"seq-yellow-green-blue",secondary:"seq-yellow-pink-purple seq-yellow-purple-blue seq-yellow-red-purple seq-yellow-orange-red seq-teal-lightgreen-bright seq-green-lightgray-bright seq-blue-lightgray-bright seq-orange-lightgray-bright seq-teal-lightbrown-bright seq-reds-bright seq-purples-bright seq-greens-bright seq-browns-bright seq-dark-to-light-magenta-bright seq-dark-to-light-purple-bright seq-dark-to-light-blue-bright seq-dark-to-light-green-bright seq-brown-to-tan-bright seq-lightgray-blue-bright seq-lightgray-green-bright seq-lightgray-darkmagenta-bright seq-yellow-darkblue-bright seq-lightred-darkgray-bright".split(" ").concat(C)},
terrain:{common:t,primary:"seq-pink-red",secondary:"seq-yellow-pink-purple seq-yellow-red-purple seq-yellow-orange-red seq-orange-red-light seq-teal-lightgreen-bright seq-green-lightgray-bright seq-red-lightgray-bright seq-blue-lightgray-bright seq-orange-lightgray-bright seq-blue-red-yellow-bright seq-blue-tan-bright seq-teal-lightbrown-bright seq-reds-bright seq-purples-bright seq-blues-bright seq-greens-bright seq-browns-bright seq-dark-to-light-magenta-bright seq-dark-to-light-purple-bright seq-dark-to-light-blue-bright seq-dark-to-light-green-bright seq-brown-to-tan-bright seq-lightgray-blue-bright seq-lightgray-green-bright seq-lightgray-darkmagenta-bright seq-yellow-darkblue-bright seq-lightred-darkgray-bright".split(" ").concat(C)},
"national-geographic":{common:t,primary:"seq-yellow-orange-red",secondary:"seq-yellow-red-purple seq-yellow-pink-purple seq-yellow-purple-blue seq-yellow-green-blue seq-teal-lightgreen-bright seq-blue-lightgray-bright seq-reds-bright seq-purples-bright seq-greens-bright seq-browns-bright seq-dark-to-light-magenta-bright seq-dark-to-light-purple-bright seq-dark-to-light-blue-bright seq-dark-to-light-green-bright seq-brown-to-tan-bright seq-lightgray-blue-bright seq-lightgray-green-bright seq-lightgray-darkmagenta-bright seq-yellow-darkblue-bright seq-lightred-darkgray-bright".split(" ").concat(C)},
oceans:{common:t,primary:"seq-yellow-green-blue",secondary:"seq-yellow-red-purple seq-yellow-orange-red seq-yellow-pink-purple seq-yellow-purple-blue seq-teal-lightgreen-bright seq-green-lightgray-bright seq-red-lightgray-bright seq-blue-lightgray-bright seq-blue-red-yellow-bright seq-teal-lightbrown-bright seq-reds-bright seq-purples-bright seq-greens-bright seq-browns-bright seq-dark-to-light-magenta-bright seq-dark-to-light-purple-bright seq-dark-to-light-blue-bright seq-dark-to-light-green-bright seq-brown-to-tan-bright seq-lightgray-blue-bright seq-lightgray-green-bright seq-lightgray-darkmagenta-bright seq-yellow-darkblue-bright seq-lightred-darkgray-bright".split(" ").concat(C)},
osm:{common:t,primary:"seq-red-blue-green",secondary:"seq-yellow-pink-purple seq-yellow-red-purple seq-yellow-purple-blue seq-teal-lightgreen-bright seq-blue-lightgray-bright seq-blue-red-yellow-bright seq-teal-lightbrown-bright seq-reds-bright seq-purples-bright seq-greens-bright seq-browns-bright seq-dark-to-light-magenta-bright seq-dark-to-light-purple-bright seq-dark-to-light-blue-bright seq-dark-to-light-green-bright seq-brown-to-tan-bright seq-lightgray-blue-bright seq-lightgray-green-bright seq-lightgray-darkmagenta-bright seq-yellow-darkblue-bright seq-lightred-darkgray-bright".split(" ").concat(C)},
satellite:{common:w,primary:"seq-orange-red-dark",secondary:"seq-yellow-green-blue seq-red-blue-green seq-yellow-purple-blue seq-teal-lightgreen-bright seq-blue-lightgray-bright seq-gray-lightgreen-bright seq-teal-lightbrown-bright seq-reds-bright seq-purples-bright seq-blues-bright seq-greens-bright seq-browns-bright seq-dark-to-light-magenta-bright seq-dark-to-light-purple-bright seq-dark-to-light-blue-bright seq-dark-to-light-green-bright seq-brown-to-tan-bright seq-lightgray-blue-bright seq-lightgray-green-bright seq-lightgray-darkmagenta-bright seq-yellow-darkblue-bright seq-lightred-darkgray-bright seq-lightmagenta-darkgray-bright seq-lightblue-darkgray-bright".split(" ").concat(C)},
hybrid:{common:w,primary:"seq-orange-red-dark",secondary:"seq-yellow-green-blue seq-red-blue-green seq-yellow-purple-blue seq-teal-lightgreen-bright seq-blue-lightgray-bright seq-gray-lightgreen-bright seq-teal-lightbrown-bright seq-reds-bright seq-purples-bright seq-blues-bright seq-greens-bright seq-browns-bright seq-dark-to-light-magenta-bright seq-dark-to-light-purple-bright seq-dark-to-light-blue-bright seq-dark-to-light-green-bright seq-brown-to-tan-bright seq-lightgray-blue-bright seq-lightgray-green-bright seq-lightgray-darkmagenta-bright seq-yellow-darkblue-bright seq-lightred-darkgray-bright seq-lightmagenta-darkgray-bright seq-lightblue-darkgray-bright".split(" ").concat(C)},
"dark-gray":{common:v,primary:"seq-dark-to-light-blue-bright",secondary:"seq-blue-lightgray-bright seq-gray-lightgreen-bright seq-reds-bright seq-purples-bright seq-blues-bright seq-greens-bright seq-browns-bright seq-dark-to-light-magenta-bright seq-dark-to-light-purple-bright seq-dark-to-light-green-bright seq-brown-to-tan-bright seq-lightgray-blue-bright seq-lightgray-green-bright seq-lightgray-darkmagenta-bright seq-yellow-darkblue-bright seq-teal-lightgreen-bright seq-lightred-darkgray-bright seq-lightmagenta-darkgray-bright seq-lightblue-darkgray-bright".split(" ").concat(C)}}},
"above-and-below":{name:"above-and-below",label:"TODO",description:"TODO",basemaps:"streets gray topo terrain national-geographic oceans osm satellite hybrid dark-gray".split(" "),schemes:{streets:{common:t,primary:"div-bluegreen-yellow-orange",secondary:"div-orange-yellow-blue-light div-green-yellow-redpurple div-green-yellow-orange div-green-gray-bright div-red-blue-bright div-blue-orange-bright div-blue-lightgreen-bright div-red-gray-bright div-blue-gray-bright div-red-lightgreen-bright div-green-teal-bright div-lightgreen-yellow-bright div-lightred-gray-bright".split(" ").concat(z)},
gray:{common:v,primary:"div-bluegreen-orange",secondary:"div-orange-purple div-bluegreen-purple div-orange-pink div-blue-yellow-red-bright div-green-gray-bright div-red-green-bright div-red-blue-bright div-orange-gray-bright div-blue-orange-bright div-blue-lightgreen-bright div-red-gray-bright div-blue-gray-bright div-red-lightgreen-bright div-blue-green-bright div-purple-brown-bright div-blue-brown-bright div-teal-brown-bright div-green-teal-bright div-lightgreen-yellow-bright div-lightblue-gray-bright div-lightgreen-gray-bright div-lightred-gray-bright div-yellow-green-bright div-green-darkgray-bright".split(" ").concat(z)},
topo:{common:t,primary:"div-orange-pink",secondary:"div-redpurple-blue div-orange-blue div-green-pink div-blue-yellow-red-bright div-green-gray-bright div-red-green-bright div-red-blue-bright div-orange-gray-bright div-blue-orange-bright div-blue-lightgreen-bright div-red-gray-bright div-blue-gray-bright div-red-lightgreen-bright div-blue-green-bright div-purple-brown-bright div-blue-brown-bright div-teal-brown-bright div-green-teal-bright div-lightgreen-yellow-bright div-lightblue-gray-bright div-lightgreen-gray-bright div-lightred-gray-bright div-yellow-green-bright div-green-darkgray-bright".split(" ").concat(z)},
terrain:{common:t,primary:"div-bluegreen-orange",secondary:"div-bluegreen-redpurple div-green-redpurple div-green-orange div-blue-yellow-red-bright div-green-gray-bright div-red-blue-bright div-orange-gray-bright div-blue-lightgreen-bright div-red-gray-bright div-blue-gray-bright div-red-lightgreen-bright div-blue-green-bright div-purple-brown-bright div-blue-brown-bright div-teal-brown-bright div-green-teal-bright div-lightgreen-yellow-bright div-lightblue-gray-bright div-lightgreen-gray-bright div-lightred-gray-bright div-yellow-green-bright div-green-darkgray-bright".split(" ").concat(z)},
"national-geographic":{common:t,primary:"div-orange-yellow-blue-light",secondary:"div-bluegreen-yellow-orange div-green-yellow-redpurple div-red-green-bright div-red-blue-bright div-orange-gray-bright div-red-gray-bright div-blue-gray-bright div-red-lightgreen-bright div-blue-green-bright div-purple-brown-bright div-green-teal-bright div-lightgreen-yellow-bright div-lightred-gray-bright div-yellow-green-bright div-green-darkgray-bright".split(" ").concat(z)},oceans:{common:t,primary:"div-red-yellow-pink",
secondary:"div-blue-green div-bluegreen-yellow-redpurple div-bluegreen-yellow-orange div-blue-yellow-red-bright div-green-gray-bright div-red-green-bright div-red-blue-bright div-orange-gray-bright div-blue-orange-bright div-blue-lightgreen-bright div-red-gray-bright div-blue-gray-bright div-red-lightgreen-bright div-blue-green-bright div-purple-brown-bright div-blue-brown-bright div-teal-brown-bright div-green-teal-bright div-lightgreen-yellow-bright div-lightblue-gray-bright div-lightgreen-gray-bright div-lightred-gray-bright div-yellow-green-bright div-green-darkgray-bright".split(" ").concat(z)},
osm:{common:t,primary:"div-bluegreen-pink",secondary:"div-bluegreen-redpurple div-bluegreen-orange div-orange-pink div-green-gray-bright div-red-blue-bright div-red-gray-bright div-blue-gray-bright div-red-lightgreen-bright div-blue-green-bright div-purple-brown-bright div-green-teal-bright div-lightgreen-yellow-bright div-lightred-gray-bright div-yellow-green-bright div-green-darkgray-bright".split(" ").concat(z)},satellite:{common:w,primary:"div-blue-green-bright",secondary:"div-red-yellow-purple div-orange-yellow-pink div-orange-yellow-blue-light div-green-gray-bright div-red-green-bright div-red-blue-bright div-orange-gray-bright div-blue-orange-bright div-blue-lightgreen-bright div-red-gray-bright div-blue-gray-bright div-red-lightgreen-bright div-orange-yellow-blue-dark div-purple-brown-bright div-blue-brown-bright div-teal-brown-bright div-green-teal-bright div-lightgreen-yellow-bright div-lightblue-gray-bright div-lightgreen-gray-bright div-lightred-gray-bright div-lightmagenta-gray-bright div-yellow-green-bright div-lightblue-yellow-bright div-green-darkgray-bright".split(" ").concat(z)},
hybrid:{common:w,primary:"div-blue-green-bright",secondary:"div-red-yellow-purple div-orange-yellow-pink div-orange-yellow-blue-light div-green-gray-bright div-red-green-bright div-red-blue-bright div-orange-gray-bright div-blue-orange-bright div-blue-lightgreen-bright div-red-gray-bright div-blue-gray-bright div-red-lightgreen-bright div-orange-yellow-blue-dark div-purple-brown-bright div-blue-brown-bright div-teal-brown-bright div-green-teal-bright div-lightgreen-yellow-bright div-lightblue-gray-bright div-lightgreen-gray-bright div-lightred-gray-bright div-lightmagenta-gray-bright div-yellow-green-bright div-lightblue-yellow-bright div-green-darkgray-bright".split(" ").concat(z)},
"dark-gray":{common:v,primary:"div-blue-green-bright",secondary:"div-yellow-gray-purple div-lightblue-yellow-bright div-red-gray-blue div-green-gray-purple div-orange-gray-blue div-green-gray-bright div-red-green-bright div-red-blue-bright div-orange-gray-bright div-blue-orange-bright div-blue-lightgreen-bright div-red-gray-bright div-blue-gray-bright div-red-lightgreen-bright div-green-teal-bright div-purple-brown-bright div-blue-brown-bright div-teal-brown-bright div-lightgreen-yellow-bright div-lightblue-gray-bright div-lightgreen-gray-bright div-lightred-gray-bright div-lightmagenta-gray-bright div-yellow-green-bright div-green-darkgray-bright".split(" ").concat(z)}}},
"centered-on":{name:"centered-on",label:"TODO",description:"TODO",basemaps:"streets gray topo terrain national-geographic oceans osm satellite hybrid dark-gray".split(" "),schemes:{streets:{common:{outline:b,width:2,size:8},primary:"highlight-orange",secondary:["highlight-bluegreen","highlight-orange-gray","highlight-bluegreen-gray"]},gray:{common:{outline:b,width:2,size:8},primary:"highlight-orange",secondary:["highlight-purple","highlight-orange-gray","highlight-purple-gray"]},topo:{common:{outline:b,
width:2,size:8},primary:"highlight-orange",secondary:["highlight-pink","highlight-orange-gray","highlight-pink-gray"]},terrain:{common:{outline:b,width:2,size:8},primary:"highlight-orange",secondary:["highlight-bluegreen","highlight-orange-gray","highlight-bluegreen-gray"]},"national-geographic":{common:{outline:b,width:2,size:8},primary:"highlight-orange",secondary:["highlight-blue","highlight-orange-gray","highlight-blue-gray"]},oceans:{common:{outline:b,width:2,size:8},primary:"highlight-red",
secondary:["highlight-pink","highlight-red-gray","highlight-pink-gray"]},osm:{common:{outline:b,width:2,size:8},primary:"highlight-pink",secondary:["highlight-bluegreen","highlight-pink-gray","highlight-bluegreen-gray"]},satellite:{common:{outline:a,width:2,size:8},primary:"highlight-orange-dark",secondary:["highlight-blue-dark","highlight-orange-gray-dark","highlight-blue-gray-dark"]},hybrid:{common:{outline:a,width:2,size:8},primary:"highlight-orange-dark",secondary:["highlight-blue-dark","highlight-orange-gray-dark",
"highlight-blue-gray-dark"]},"dark-gray":{common:{outline:a,width:2,size:8},primary:"highlight-orange-bright",secondary:["highlight-blue-bright","highlight-orange-gray-bright","highlight-blue-gray-bright"]}}},extremes:{name:"extremes",label:"TODO",description:"TODO",basemaps:"streets gray topo terrain national-geographic oceans osm satellite hybrid dark-gray".split(" "),schemes:{streets:{common:{outline:b,width:2,size:8},primary:"extremesdiv-bluegreen-yellow-orange",secondary:"extremesdiv-orange-yellow-blue-light extremesdiv-green-yellow-redpurple extremesdiv-green-yellow-orange extremes-orange extremes-bluegreen extremes-orange-gray extremes-bluegreen-gray".split(" ")},
gray:{common:{outline:b,width:2,size:8},primary:"extremesdiv-orange-purple",secondary:"extremesdiv-bluegreen-purple extremesdiv-bluegreen-orange extremesdiv-orange-pink extremes-orange extremes-purple extremes-orange-gray extremes-purple-gray".split(" ")},topo:{common:{outline:b,width:2,size:8},primary:"extremesdiv-orange-pink",secondary:"extremesdiv-redpurple-blue extremesdiv-orange-blue extremesdiv-green-pink extremes-orange extremes-pink extremes-orange-gray extremes-pink-gray".split(" ")},terrain:{common:{outline:b,
width:2,size:8},primary:"extremesdiv-bluegreen-orange",secondary:"extremesdiv-bluegreen-redpurple extremesdiv-green-redpurple extremesdiv-green-orange extremes-orange extremes-bluegreen extremes-orange-gray extremes-bluegreen-gray".split(" ")},"national-geographic":{common:{outline:b,width:2,size:8},primary:"extremesdiv-orange-yellow-blue-light",secondary:"extremesdiv-bluegreen-yellow-orange extremesdiv-green-yellow-redpurple extremes-orange extremes-blue extremes-orange-gray extremes-blue-gray".split(" ")},
oceans:{common:{outline:b,width:2,size:8},primary:"extremesdiv-red-yellow-pink",secondary:"extremesdiv-blue-green extremesdiv-bluegreen-yellow-redpurple extremesdiv-bluegreen-yellow-orange extremes-red extremes-pink extremes-red-gray extremes-pink-gray".split(" ")},osm:{common:{outline:b,width:2,size:8},primary:"extremesdiv-bluegreen-pink",secondary:"extremesdiv-bluegreen-redpurple extremesdiv-bluegreen-orange extremesdiv-orange-pink extremes-pink extremes-bluegreen extremes-pink-gray extremes-bluegreen-gray".split(" ")},
satellite:{common:{outline:a,width:2,size:8},primary:"extremesdiv-orange-yellow-blue-dark",secondary:"extremesdiv-red-yellow-purple extremesdiv-orange-yellow-pink extremesdiv-orange-yellow-blue-light extremes-orange-dark extremes-blue-dark extremes-orange-gray-dark extremes-blue-gray-dark".split(" ")},hybrid:{common:{outline:a,width:2,size:8},primary:"extremesdiv-orange-yellow-blue-dark",secondary:"extremesdiv-red-yellow-purple extremesdiv-orange-yellow-pink extremesdiv-orange-yellow-blue-light extremes-orange-dark extremes-blue-dark extremes-orange-gray-dark extremes-blue-gray-dark".split(" ")},
"dark-gray":{common:{outline:a,width:2,size:8},primary:"extremesdiv-orange-gray-blue",secondary:"extremesdiv-yellow-gray-purple extremesdiv-red-gray-blue extremesdiv-green-gray-purple extremes-orange-bright extremes-blue-bright extremes-orange-gray-bright extremes-blue-gray-bright".split(" ")}}},"group-similar":{name:"group-similar",label:"TODO",description:"TODO",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm".split(" "),dark:["satellite","hybrid","dark-gray"]},schemes:{light:{common:t,
primary:"spectral",secondary:["cat-dark","cat-light"].concat(F)},dark:{common:w,primary:"spectral",secondary:["cat-dark","cat-light"].concat(F)}}}},J={};m.mixin(J,{getAvailableThemes:function(a){var b=[],c,d,e;for(c in H)d=H[c],e=p(d),a&&-1===g.indexOf(e,a)||b.push({name:d.name,label:d.label,description:d.description,basemaps:e});return b},getSchemes:function(a){var b=a.theme,c=a.basemap,d=u(a.geometryType),f,h;(f=e(H[b],c))&&(h={primaryScheme:s(f.primary,f.common,d,b,c),secondarySchemes:g.map(f.secondary,
function(a){return s(a,f.common,d,b,c)})});return h},getSchemeById:function(a){var b,c,d,f,h;h=a.id;a=u(a.geometryType);if(h&&(h=h.split("/")))c=h[0],d=h[1],f=h[2];(h=e(H[c],d))&&(b=s(f,h.common,a,c,d));return b},cloneScheme:function(a){var b;a&&(b=m.mixin({},a),b.colors=h(b.colors),b.colorsForClassBreaks=g.map(b.colorsForClassBreaks,function(a){return{numClasses:a.numClasses,colors:h(a.colors)}}),b.noDataColor&&(b.noDataColor=new d(b.noDataColor)),b.outline&&(b.outline={color:b.outline.color&&new d(b.outline.color),
width:b.outline.width}));return b},flipColors:function(a,b){var c=b?a:J.cloneScheme(a);c.colors.reverse();g.forEach(c.colorsForClassBreaks,function(a){a.colors.reverse()});return c},getMatchingSchemes:function(a){var b=a.theme,c=u(a.geometryType),d=a.colors,h=H[b];a=p(h);var n,m=[];g.forEach(a,function(a){var p=e(h,a);p&&((n=f(s(p.primary,p.common,c,b,a),d))&&m.push(n),g.forEach(p.secondary,function(e){(n=f(s(e,p.common,c,b,a),d))&&m.push(n)}))});return m}});return J})},"esri/styles/heatmap":function(){define(["dojo/_base/array",
"dojo/_base/lang","dojo/has","../kernel","../Color"],function(g,m,a,b,d){function c(a,b){return g.map(a,function(a){a=new d(a);null!=b&&(a.a=b);return a})}var h={v1:"#85c1c8 #90a1be #9c8184 #a761aa #af4980 #b83055 #c0182a #c80000 #d33300 #de6600 #e99900 #f4cc00 #ffff00".split(" "),v2:"#f3e4e5 #e4becb #d498b2 #c57298 #b95685 #ae3972 #a21d5e #96004b #ab006f #c00093 #d500b7 #ea00db #ff00ff".split(" "),v3:"#d4e3f5 #b3c5f7 #93a6fa #7288fc #566ffd #3955fe #1d3bfe #0022ff #334ecc #667a99 #99a766 #ccd333 #ffff00".split(" "),
v4:"#0022c8 #2b1ca7 #551785 #801164 #aa0b43 #d50621 #ff0000 #ff3900 #ff7100 #ffaa00 #ffc655 #ffe3aa #ffffff".split(" ")},n={"default":{name:"default",label:"Default",description:"Default theme for visualizing features using heatmap.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm".split(" "),dark:["satellite","hybrid","dark-gray"]},schemes:{light:{primary:"v1",secondary:["v2","v3","v4"]},dark:{primary:"v4",secondary:["v1","v2","v3"]}}}},f={};(function(){var a,b,c,d,
h,g,m,x;for(a in n)for(d in b=n[a],c=b.basemapGroups,h=f[a]={basemaps:[].concat(c.light).concat(c.dark)},c){g=c[d];for(m=0;m<g.length;m++)x=g[m],b.schemes&&(h[x]=b.schemes[d])}})();return{getAvailableThemes:function(a){var b=[],c,d,h;for(c in n)d=n[c],h=f[c],a&&-1===g.indexOf(h.basemaps,a)||b.push({name:d.name,label:d.label,description:d.description,basemaps:h.basemaps.slice(0)});return b},getSchemes:function(a){var b=a.basemap;a=f[a.theme];var d;(b=a&&a[b])&&(d={primaryScheme:{colors:c(h[b.primary]),
opacity:0.7},secondarySchemes:g.map(b.secondary,function(a){return{colors:c(h[a]),opacity:0.7}})});return d},cloneScheme:function(a){var b;a&&(b=m.mixin({},a),b.colors=c(b.colors));return b}}})},"esri/styles/predominance":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../Color ./colors ./size".split(" "),function(g,m,a,b,d,c,h){function n(a,b){return g.map(a,function(a){a=new d(a);null!=b&&(a.a=b);return a})}function f(a,b,e,f){var h;if(a=c[a])switch(h={},h.colors=n(a.stops),
h.noDataColor=new d(b.noDataColor),h.opacity=b.fillOpacity||1,h.sizeInfo=f,e){case "point":h.outline={color:new d(b.outline.color),width:b.outline.width};h.size=b.size;break;case "line":h.width=b.width;break;case "polygon":h.outline={color:new d(b.outline.color),width:b.outline.width},f&&(f.marker&&null!=b.markerSize)&&(f.marker.size=b.markerSize)}return h}function e(a){"esriGeometryPoint"===a||"esriGeometryMultipoint"===a?a="point":"esriGeometryPolyline"===a?a="line":"esriGeometryPolygon"===a&&(a=
"polygon");return a}a={color:[153,153,153,1],width:1};var p={"default":{name:"default",label:"Default",description:"Default theme for visualizing features by their predominant category.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm".split(" "),dark:["satellite","hybrid","dark-gray"]},pointSchemes:{light:{common:{noDataColor:"#aaaaaa",outline:a,size:8},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5"]},dark:{common:{noDataColor:"#aaaaaa",
outline:{color:[26,26,26,1],width:1},size:8},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5"]}},lineSchemes:{light:{common:{noDataColor:"#aaaaaa",width:2},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5"]},dark:{common:{noDataColor:"#aaaaaa",width:2},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5"]}},polygonSchemes:{light:{common:{noDataColor:"#aaaaaa",
outline:a,fillOpacity:0.8,markerSize:8},primary:"predominant-v1",secondary:["predominant-v2","predominant-v3","predominant-v4","predominant-v5"]},dark:{common:{noDataColor:"#aaaaaa",outline:{color:[51,51,51,1],width:1},fillOpacity:0.8,markerSize:8},primary:"predominant-v2",secondary:["predominant-v1","predominant-v3","predominant-v4","predominant-v5"]}}}},s={};(function(){var a,b,c,d,e,f,h,g;for(a in p)for(d in b=p[a],c=b.basemapGroups,e=s[a]={basemaps:[].concat(c.light).concat(c.dark),point:{},line:{},
polygon:{}},c){f=c[d];for(h=0;h<f.length;h++)g=f[h],b.pointSchemes&&(e.point[g]=b.pointSchemes[d]),b.lineSchemes&&(e.line[g]=b.lineSchemes[d]),b.polygonSchemes&&(e.polygon[g]=b.polygonSchemes[d])}})();return{getAvailableThemes:function(a){var b=[],c,d,e;for(c in p)d=p[c],e=s[c],a&&-1===g.indexOf(e.basemaps,a)||b.push({name:d.name,label:d.label,description:d.description,basemaps:e.basemaps.slice(0)});return b},getSchemes:function(a){var b=a.theme,c=a.basemap,d=e(a.geometryType),n=(a=h.getSchemes({theme:"default",
basemap:a.basemap,geometryType:a.geometryType}))&&a.primaryScheme,b=s[b],p,m;(p=(p=b&&b[d])&&p[c])&&(m={primaryScheme:f(p.primary,p.common,d,n),secondarySchemes:g.map(p.secondary,function(a){return f(a,p.common,d,n)})});return m},cloneScheme:function(a){var b;a&&(b=m.mixin({},a),b.colors=n(b.colors),b.noDataColor&&(b.noDataColor=new d(b.noDataColor)),b.outline&&(b.outline={color:b.outline.color&&new d(b.outline.color),width:b.outline.width}),b.sizeInfo&&(b.sizeInfo=h.cloneScheme(b.sizeInfo)));return b}}})},
"esri/renderers/BlendRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has ../kernel ../Color ./Renderer".split(" "),function(g,m,a,b,d,c,h,n){return g(n,{declaredClass:"esri.renderer.BlendRenderer",constructor:function(a){m.mixin(this,a);this.blendMode=this.blendMode||"source-over";this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1;this._updateCache()},setFields:function(a){this.fields=a;this._updateCache()},setSymbol:function(a){this.symbol=
a},setBlendMode:function(a){this.blendMode=a},setOpacityStops:function(a){this.opacityStops=a;this._updateCache()},setNormalizationField:function(a){this.normalizationField=a;this._updateCache()},toJson:function(){},getSymbol:function(b){var c=this.fields,d=this._dataCache,g=this._opacityInfos;if(this._supportsCanvas&&d&&g){var n,m,w=[],v={};a.forEach(c,function(a,c){this._getColorComponent(b,g[c],d[c],!0,v);m=a.color.toRgba();m[3]=v.value||0;n=new h(m);n._data=v.data;w.push(n)},this);w.sort(this._colorSorter);
this.symbol.setColor(this._getBlendedColor(w));return this.symbol}},_colorSorter:function(a,b){var c=null!=a._data,d=null!=b._data;return c&&d?a._data-b._data:c?1:d?-1:0},_getBlendedColor:function(b){var c,d=this._canvas;d||(d=this._canvas=this._createCanvas(1,1));c=d.getContext("2d");c.globalCompositeOperation=this.blendMode;a.forEach(b,function(a){c.fillStyle=a.toCss(!0);c.fillRect(0,0,1,1)});b=c.getImageData(0,0,1,1).data;c.clearRect(0,0,d.width,d.height);return new h([b[0],b[1],b[2],b[3]/255])},
_createCanvas:function(a,c){return b.create("canvas",{width:a+"px",height:c+"px",style:"position: absolute; left: -10000px; top: 0px;"},document.body)},_updateCache:function(){var b=this.fields,c=this.opacityStops;this._dataCache=this._opacityInfos=null;if(b&&c){var d=this._dataCache=[],h=this._opacityInfos=[],g;a.forEach(b,function(a){g={field:a.field,normalizationField:this.normalizationField,stops:c};h.push(g);d.push(this._processOpacityInfo(g))},this)}}})})},"esri/renderers/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/date/locale ../kernel ../numberUtils ../Color dojo/i18n!../nls/jsapi dojo/i18n!dojo/cldr/nls/gregorian".split(" "),
function(g,m,a,b,d,c,h,n,f){function e(a){return a&&m.map(a,function(a){return new h(a)})}function p(a,b,c){var d="";0===b?d=u.lt+" ":b===c&&(d=u.gt+" ");return d+a}var s={},u={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%"},t={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},w={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},
timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},v={formatLength:"short",fullYear:!0},x={formatLength:"short"};g.mixin(s,{timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(a,c){var d,e=[];null!=a&&!(a instanceof
Date)&&(a=new Date(a));c=c||{};c=g.mixin({},c);var h=c.selector?c.selector.toLowerCase():null;d=!h||-1<h.indexOf("time");h=!h||-1<h.indexOf("date");d&&(c.timeOptions=c.timeOptions||x,c.timeOptions&&(c.timeOptions=g.mixin({},c.timeOptions),c.timeOptions.selector=c.timeOptions.selector||"time",e.push(c.timeOptions)));h&&(c.dateOptions=c.dateOptions||v,c.dateOptions&&(c.dateOptions=g.mixin({},c.dateOptions),c.dateOptions.selector=c.dateOptions.selector||"date",e.push(c.dateOptions)));e&&e.length?(e=
m.map(e,function(c){return b.format(a,c)}),d=1==e.length?e[0]:f["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return e[b]})):d=b.format(a);return d},createColorStops:function(a){var b=a.values,d=a.colors,e=a.labelIndexes,f=a.isDate,h=a.dateFormatOptions;a=[];return a=m.map(b,function(a,g){var n=null;if(!e||-1<m.indexOf(e,g)){var t;(t=f?s.formatDate(a,h):c.format(a))&&(n=p(t,g,b.length-1))}return{value:a,color:d[g],label:n}})},updateColorStops:function(a){var b=a.stops,
d=a.changes,e=a.isDate,f=a.dateFormatOptions,h=[],g,n=m.map(b,function(a){return a.value});m.forEach(d,function(a){h.push(a.index);n[a.index]=a.value});g=c.round(n,{indexes:h});m.forEach(b,function(a,d){a.value=n[d];if(null!=a.label){var h,m=null;(h=e?s.formatDate(g[d],f):c.format(g[d]))&&(m=p(h,d,b.length-1));a.label=m}})},createClassBreakLabel:function(a){var b=a.minValue,d=a.maxValue,e=a.isFirstBreak?"":u.gt+" ";a="percent-of-total"===a.normalizationType?u.pct:"";b=null==b?"":c.format(b);d=null==
d?"":c.format(d);return e+b+a+" "+n.smartMapping.minToMax+" "+d+a},setLabelsForClassBreaks:function(a){var b=a.classBreaks,d=a.classificationMethod,e=a.normalizationType,f=[];b&&b.length&&"standard-deviation"!==d&&(a.round?(f.push(b[0].minValue),m.forEach(b,function(a){f.push(a.maxValue)}),f=c.round(f),m.forEach(b,function(a,b){a.label=s.createClassBreakLabel({minValue:0===b?f[0]:f[b],maxValue:f[b+1],isFirstBreak:0===b,normalizationType:e})})):m.forEach(b,function(a,b){a.label=s.createClassBreakLabel({minValue:a.minValue,
maxValue:a.maxValue,isFirstBreak:0===b,normalizationType:e})}))},updateClassBreak:function(a){var b=a.classBreaks,c=a.normalizationType,d=a.change,e=d.index,d=d.value,f=-1,h=-1,g=b.length;"standard-deviation"!==a.classificationMethod&&(0===e?f=e:e===g?h=e-1:(h=e-1,f=e),-1<f&&f<g&&(a=b[f],a.minValue=d,a.label=s.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===f,normalizationType:c})),-1<h&&h<g&&(a=b[h],a.maxValue=d,a.label=s.createClassBreakLabel({minValue:a.minValue,
maxValue:a.maxValue,isFirstBreak:0===h,normalizationType:c})))},calculateDateFormatInterval:function(a){var b,c,d=a.length,e,f,h,g,n,p,s=Infinity,u;a=m.map(a,function(a){return new Date(a)});for(b=0;b<d-1;b++){e=a[b];h=[];n=Infinity;p="";for(c=b+1;c<d;c++)f=a[c],f=e.getFullYear()!==f.getFullYear()&&"year"||e.getMonth()!==f.getMonth()&&"month"||e.getDate()!==f.getDate()&&"day"||e.getHours()!==f.getHours()&&"hour"||e.getMinutes()!==f.getMinutes()&&"minute"||e.getSeconds()!==f.getSeconds()&&"second"||
"millisecond",g=t[f],g<n&&(n=g,p=f),h.push(f);n<s&&(s=n,u=p)}return u},createUniqueValueLabel:function(a){var b=a.value,d=a.fieldInfo,e=a.domain;a=a.dateFormatInterval;var f=String(b);(e=e&&e.codedValues?e.getName(b):null)?f=e:"number"===typeof b&&(f=d&&"esriFieldTypeDate"===d.type?s.formatDate(b,a&&w[a]):c.format(b));return f},cloneColorInfo:function(a){var b;a&&(b=g.mixin({},a),b.colors=e(b.colors),b.stops=b.stops&&m.map(b.stops,function(a){a=g.mixin({},a);a.color&&(a.color=new h(a.color));return a}),
b.legendOptions&&(b.legendOptions=g.mixin({},b.legendOptions)));return b},cloneOpacityInfo:function(a){var b;if(a){b=g.mixin({},a);if(a=b.opacityValues)b.opacityValues=a.slice(0);if(a=b.stops)b.stops=m.map(a,function(a){return g.mixin({},a)});if(a=b.legendOptions)b.legendOptions=g.mixin({},a)}return b},cloneSizeInfo:function(a){var b;if(a){b=g.mixin({},a);b.stops&&(b.stops=m.map(b.stops,function(a){return g.mixin({},a)}));if((a=b.minSize)&&"object"===typeof a)b.minSize=s.cloneSizeInfo(a);if((a=b.maxSize)&&
"object"===typeof a)b.maxSize=s.cloneSizeInfo(a);if(a=b.legendOptions)if(b.legendOptions=g.mixin({},a),a=a.customValues)b.legendOptions.customValues=a.slice(0)}return b}});return s})},"esriPBI/utils/clusterUtils":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Stateful dojo/Evented dojo/aspect dojo/when dojo/i18n!./nls/utils esri/graphic esri/Color esri/geometry/Point esri/symbols/TextSymbol esri/symbols/SimpleMarkerSymbol esri/dijit/PopupTemplate ./filteredRendererUtils ./clusterPieChartUtils".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v){function x(a,b){var c;do a:{c=a;for(var d=b,e=0,f=c.length;e<f;e++)for(var h=c[e],g=0,n=f;g<n;g++){var p=c[g];if(h!==p){var m=h.x-p.x,s=h.y-p.y;if(Math.sqrt(m*m+s*s)<d){d=h;e=d.attributes.clusterCount+p.attributes.clusterCount;d.x=(d.x*d.attributes.clusterCount+p.x*p.attributes.clusterCount)/e;d.y=(d.y*d.attributes.clusterCount+p.y*p.attributes.clusterCount)/e;d.attributes.clusterCount=e;d.attributes.children=d.attributes.children.concat(p.attributes.children);
c.splice(g,1);c=!0;break a}}}c=void 0}while(c)}function B(a,b){a.sort(function(a,b){return a.x===b.x?a.y-b.y:a.x-b.x});for(var c=[],d=0,e=a.length;d<e;d++){for(var f=a[d],h=!1,g=0;g<c.length;g++){var n=c[g];if(Math.sqrt(Math.pow(n.x-f.x,2)+Math.pow(n.y-f.y,2))<=b){h=n.attributes.clusterCount;n.x=(f.x+n.x*h)/(h+1);n.y=(f.y+n.y*h)/(h+1);n.attributes.clusterCount++;n.attributes.children.push(f.graphic);h=!0;break}}h||c.push({x:f.x,y:f.y,attributes:{clusterCount:1,children:[f.graphic]}})}x(c,2*b);return c}
var A=g(b,{foregroundColor:[255,255,255,1],backgroundColor:[255,0,0,0.75],radius:50,layer:null,_map:null,_singles:[],_points:[],_maxSingles:5E4,_fontSettings:{family:"Arial",size:"8pt",style:"normal",weight:"bold"},_foregroundColorSetter:function(a){this.foregroundColor=a;this._updateRenderer();this.layer.redraw()},_backgroundColorSetter:function(a){this.backgroundColor=a;this._updateRenderer();this.layer.redraw()},_radiusSetter:function(a){this.radius=a;this._updateRenderer();this.layer.redraw()},
postscript:function(){this.inherited(arguments);var a=this,b=function(){a._map=a.layer&&a.layer.getMap();a._map&&(a._onZoomStartHandle=a._map.on("zoom-start",m.hitch(a,a._clear)),a._init())};b();this._setMapHandle=c.after(this.layer,"_setMap",function(a){b();return a});this._unsetMapHandle=c.after(this.layer,"_unsetMap",function(){a._clear();a._onZoomStartHandle&&a._onZoomStartHandle.remove()});this._clickHandle=this.layer.on("click",m.hitch(this,this._onClick));this._updateRenderer()},_onClick:function(a){a.stopPropagation()},
_clearSingles:function(){a.forEach(this._singles,function(a){this._removeGraphic(a)},this);this._singles=null},_clearPoints:function(){a.forEach(this._points,function(a){this._removeGraphic(a.graphic)},this);this._points=null},_init:function(){var a=this;this._drawHandle||(this._drawHandle=c.around(this.layer,"_draw",function(b){return function(c){a.layer._removeShape(c);setTimeout(function(){a._originalDraw||(a._originalDraw=b);a._timeout||(a._timeout=setTimeout(function(){a._timeout=null;a._draw()},
0))},0)}}));this._timeChangeHandle||(this._timeChangeHandle=this._map.on("time-extent-change",function(){a._clearPoints();a._timeout||(a._timeout=setTimeout(function(){a._timeout=null;a._draw()},0))}));this._timeOffHandle||(this._timeOffHandle=this._map.on("layer-time-off",function(){setTimeout(function(){a._clearPoints();a._draw()},0)}));this.layer.redraw()},_clear:function(){if(this.layer&&this._clusters)for(var a=0;a<this._clusters.length;a++){var b=this._clusters[a];if(b.clusterGraphics)for(var c=
0;c<b.clusterGraphics.length;c++)this._removeGraphic(b.clusterGraphics[c])}this._clusters=[];this._clearSingles()},_removeGraphic:function(a){a.getDojoShape()&&this.layer._removeShape(a)},_draw:function(){var a=this._map&&this._map.extent.getWidth()/this._map.width;if(a){this._points=[];for(var b=0,c=this.layer.graphics.length;b<c;b++){var d=this.layer.graphics[b],e=d&&d.geometry;e&&(e.x&&e.y&&d.visible)&&(w.isFiltered(this.layer.renderer,d)||this._points.push({graphic:d,x:e.x,y:e.y,attributes:d.attributes}))}a=
B(this._points,a*this.radius);b=v.canUsePieChartClustering(this.layer.renderer);this._clear();this._clusters=a;a.sort(function(a,b){return b.attributes.clusterCount-a.attributes.clusterCount});c=0;for(d=a.length;c<d;c++)this._drawCluster(a[c],b)}},_drawCluster:function(a,b){var c=a.attributes.clusterCount,d=this;1<c?(a.clusterGraphics=[],b?h(v.getPieChartSymbol(this.layer.renderer,a,this._getClusterSymbolSize(c),this.foregroundColor,this._fontSettings),function(b){d._setClusterGraphics(a,[b]);d._drawGraphics(a.clusterGraphics)}):
(this._setClusterGraphics(a,[this._getClusterSymbol(c),this._getTextSymbol(c)]),this._drawGraphics(a.clusterGraphics))):(c=a.attributes.children[0])&&this._drawGraphics([c])},_setClusterGraphics:function(b,c){a.forEach(c,function(a){b.clusterGraphics.push(new f(new p(b.x,b.y,this._map.spatialReference),a,b.attributes))},this)},_drawGraphics:function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];d&&(this.layer._updateExtent(d),this._originalDraw(d,!1))}},_getClusterSymbol:function(a){a=this._getClusterSymbolSize(a);
return new u({type:"esriSMS",style:"esriSMSCircle",color:new e(this.backgroundColor),size:a})},_getClusterSymbolSize:function(a){return 5*Math.log(a/5)+20},_getTextSymbol:function(a){return new s({text:a,color:new e(this.foregroundColor),font:this._fontSettings,yoffset:-2})},destroy:function(){this._clear();clearTimeout(this._timeout);this._timeout=null;this._drawHandle.remove();this._timeChangeHandle.remove();this._timeOffHandle.remove();this._onZoomStartHandle.remove();this._setMapHandle.remove();
this._unsetMapHandle.remove();this._clickHandle.remove();this._updateRenderer()},_updateRenderer:function(){var a=this.layer,b=this;clearTimeout(this._updateRendererTimeout);this._updateRendererTimeout=setTimeout(function(){b._updateRendererTimeout=null;a&&a.setRenderer(a.renderer)},0)}});return new (g(d,{get:function(a){return a&&a.___clusterView},getClusterSetting:function(a,b){return a&&a.___clusterSetting&&a.___clusterSetting[b]},setClusterSetting:function(a,b,c){a&&(a.___clusterSetting||(a.___clusterSetting=
{}),a.___clusterSetting[b]=c,a.___clusterView.set("radius",c.radius),a.___clusterView.set("foregroundColor",c.foregroundColor),a.___clusterView.set("backgroundColor",c.backgroundColor))},removeClusterSetting:function(a){a&&a.___clusterSetting&&delete a.___clusterSetting},create:function(a,b){if(a&&!a.___clusterView){if("esriGeometryPoint"!==a.geometryType)throw Error(n.clusteringOnlyForPoints);a.___clusterView=new A(m.mixin({layer:a},b));this.emit("clustering-enabled",{layer:a})}return a.___clusterView},
remove:function(a){a&&a.___clusterView&&(a.___clusterView.destroy(),delete a.___clusterView,a.redraw())},"^clustering-enabled":function(){},"^clustering-disabled":function(){}}))})},"esriPBI/utils/clusterPieChartUtils":function(){define("dojo/_base/array dojo/_base/window dojo/dom-construct dojo/has dojox/gfx dojox/charting/Chart dojox/charting/plot2d/Pie dojox/gfx/utils esri/Color esri/symbols/SimpleMarkerSymbol esri/renderers/ClassBreaksRenderer esri/renderers/UniqueValueRenderer esri/symbols/PictureMarkerSymbol".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u){function t(a,b){var c=a&&a.getSymbol(b);return c&&c.color&&c.color.toHex()}return{canUsePieChartClustering:function(a){var c=a.isInstanceOf(p);if(8>=b("ie"))return!1;if(a&&(c||a.isInstanceOf(s))){for(var d=0;d<a.infos.length;d++)if(!a.infos[d].symbol.isInstanceOf(e))return!1;return c?1<a.infos.length&&a.infos[0].symbol.size===a.infos[a.infos.length-1].symbol.size:!0}return!1},getPieChartSymbol:function(b,e,p,s,A){var C=[],z=d.pt2px(p);g.forEach(e.attributes.children,
function(a){var c=t(b,a);c&&(g.some(C,function(a){if(a.color===c)return a.y++,!0})||C.push({x:1,y:1,color:c}))});var F=a.create("div",null,m.body());p=(new c(F)).addPlot("default",{type:h,labels:!1,radius:z/2}).addSeries("PieChart",C,{stroke:{width:0}}).resize(z,z).surface;p.createText({x:"50%",y:"58%",text:e.attributes.clusterCount.toString(),align:"middle"}).setFill(new f(s)).setFont(A);return n.toSvg(p).then(function(b){a.destroy(F);var c=new u,d=encodeURIComponent,e=b.indexOf("\x3cdefs"),f=b.indexOf("\x3cg\x3e",
e);b=b.substring(0,e)+b.substring(f);c.url="data:image/svg+xml,"+d(b);c.width=z;c.height=z;return c})}}})},"dojox/charting/Chart":function(){define("../main dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/dom-style dojo/dom dojo/dom-geometry dojo/dom-construct dojo/_base/Color dojo/sniff ./Element ./SimpleTheme ./Series ./axis2d/common dojox/gfx/shape dojox/gfx dojo/has!dojo-bidi?./bidi/Chart dojox/lang/functional dojox/lang/functional/fold dojox/lang/functional/reversed".split(" "),function(g,
m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B){function A(a,b){a&&b&&(a.min=Math.min(a.min,b.min),a.max=Math.max(a.max,b.max));return a||b}function C(b,c){var d={},e={};a.forEach(b,function(a){var b=d[a.name]=a.getSeriesStats();a.hAxis&&(e[a.hAxis]=A(e[a.hAxis],{min:b.hmin,max:b.hmax}));a.vAxis&&(e[a.vAxis]=A(e[a.vAxis],{min:b.vmin,max:b.vmax}))});a.forEach(b,function(a){var b=d[a.name];if(a.hAxis){var f=e[a.hAxis];b.hmin=f.min;b.hmax=f.max}a.vAxis&&(f=e[a.vAxis],b.vmin=f.min,b.vmax=f.max);a.initializeScalers(c,
b)})}var z=m.getObject("charting",!0,g),F=B.lambda("item.clear()"),H=B.lambda("item.purgeGroup()"),J=B.lambda("item.destroy()"),I=B.lambda("item.dirty \x3d false"),K=B.lambda("item.dirty \x3d true"),M=B.lambda("item.name"),L={l:10,t:10,r:10,b:10};g=b(e("dojo-bidi")?"dojox.charting.NonBidiChart":"dojox.charting.Chart",null,{constructor:function(a,b){b||(b={});this.margins=b.margins||L;this._customMargins=!!b.margins;this.stroke=b.stroke;this.fill=b.fill;this.delayInMs=b.delayInMs||200;this.title=b.title;
this.titleGap=b.titleGap;this.titlePos=b.titlePos;this.titleFont=b.titleFont;this.titleFontColor=b.titleFontColor;this.titleAlign=b.titleAlign;this.chartTitle=null;this.htmlLabels=!0;"htmlLabels"in b&&(this.htmlLabels=b.htmlLabels);this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=!0;this.node=c.byId(a);var d=h.getMarginBox(a);this.surface=v.createSurface(this.node,d.w||400,d.h||300);-1==this.surface.declaredClass.indexOf("vml")&&(this._nativeClip=!0)},
destroy:function(){a.forEach(this.series,J);a.forEach(this.stack,J);B.forIn(this.axes,J);this.surface.destroy();this.chartTitle&&this.chartTitle.tagName&&n.destroy(this.chartTitle)},getCoords:function(){var a=this.node,b=d.getComputedStyle(a),b=h.getMarginBox(a,b),a=h.position(a,!0);b.x=a.x;b.y=a.y;return b},setTheme:function(a){this.theme=a.clone();this._customMargins||(this.margins=this.theme.chart.margins||L);this.dirty=!0;return this},addAxis:function(a,b){var c;c=b&&b.type||"Default";if("string"==
typeof c){if(!z.axis2d||!z.axis2d[c])throw Error("Can't find axis: "+c+" - Check require() dependencies.");c=new z.axis2d[c](this,b)}else c=new c(this,b);c.name=a;c.dirty=!0;a in this.axes&&this.axes[a].destroy();this.axes[a]=c;this.dirty=!0;return this},getAxis:function(a){return this.axes[a]},removeAxis:function(a){a in this.axes&&(this.axes[a].destroy(),delete this.axes[a],this.dirty=!0);return this},addPlot:function(a,b){var c;c=b&&b.type||"Default";if("string"==typeof c){if(!z.plot2d||!z.plot2d[c])throw Error("Can't find plot: "+
c+" - didn't you forget to dojo.require() it?");c=new z.plot2d[c](this,b)}else c=new c(this,b);c.name=a;c.dirty=!0;a in this.plots?(this.stack[this.plots[a]].destroy(),this.stack[this.plots[a]]=c):(this.plots[a]=this.stack.length,this.stack.push(c));this.dirty=!0;return this},getPlot:function(a){return this.stack[this.plots[a]]},removePlot:function(b){if(b in this.plots){var c=this.plots[b];delete this.plots[b];this.stack[c].destroy();this.stack.splice(c,1);B.forIn(this.plots,function(a,b,d){a>c&&
(d[b]=a-1)});var d=a.filter(this.series,function(a){return a.plot!=b});d.length<this.series.length&&(a.forEach(this.series,function(a){a.plot==b&&a.destroy()}),this.runs={},a.forEach(d,function(a,b){this.runs[a.plot]=b},this),this.series=d);this.dirty=!0}return this},getPlotOrder:function(){return B.map(this.stack,M)},setPlotOrder:function(a){var b={},c=B.filter(a,function(a){if(!(a in this.plots)||a in b)return!1;b[a]=1;return!0},this);c.length<this.stack.length&&B.forEach(this.stack,function(a){a=
a.name;a in b||c.push(a)});a=B.map(c,function(a){return this.stack[this.plots[a]]},this);B.forEach(a,function(a,b){this.plots[a.name]=b},this);this.stack=a;this.dirty=!0;return this},movePlotToFront:function(a){if(a in this.plots){var b=this.plots[a];if(b){var c=this.getPlotOrder();c.splice(b,1);c.unshift(a);return this.setPlotOrder(c)}}return this},movePlotToBack:function(a){if(a in this.plots){var b=this.plots[a];if(b<this.stack.length-1){var c=this.getPlotOrder();c.splice(b,1);c.push(a);return this.setPlotOrder(c)}}return this},
addSeries:function(a,b,c){b=new u(this,b,c);b.name=a;a in this.runs?(this.series[this.runs[a]].destroy(),this.series[this.runs[a]]=b):(this.runs[a]=this.series.length,this.series.push(b));this.dirty=!0;!("ymin"in b)&&"min"in b&&(b.ymin=b.min);!("ymax"in b)&&"max"in b&&(b.ymax=b.max);return this},getSeries:function(a){return this.series[this.runs[a]]},removeSeries:function(a){if(a in this.runs){var b=this.runs[a];delete this.runs[a];this.series[b].destroy();this.series.splice(b,1);B.forIn(this.runs,
function(a,c,d){a>b&&(d[c]=a-1)});this.dirty=!0}return this},updateSeries:function(a,b,c){a in this.runs&&(a=this.series[this.runs[a]],a.update(b),c?this.dirty=!0:(this._invalidateDependentPlots(a.plot,!1),this._invalidateDependentPlots(a.plot,!0)));return this},getSeriesOrder:function(a){return B.map(B.filter(this.series,function(b){return b.plot==a}),M)},setSeriesOrder:function(a){var b,c={},d=B.filter(a,function(a){if(!(a in this.runs)||a in c)return!1;var d=this.series[this.runs[a]];if(b){if(d.plot!=
b)return!1}else b=d.plot;c[a]=1;return!0},this);B.forEach(this.series,function(a){var e=a.name;!(e in c)&&a.plot==b&&d.push(e)});this.series=B.map(d,function(a){return this.series[this.runs[a]]},this).concat(B.filter(this.series,function(a){return a.plot!=b}));B.forEach(this.series,function(a,b){this.runs[a.name]=b},this);this.dirty=!0;return this},moveSeriesToFront:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[0])return c.splice(b,1),c.unshift(a),
this.setSeriesOrder(c)}return this},moveSeriesToBack:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[c.length-1])return c.splice(b,1),c.push(a),this.setSeriesOrder(c)}return this},resize:function(a,b){switch(arguments.length){case 1:h.setMarginBox(this.node,a);break;case 2:h.setMarginBox(this.node,{w:a,h:b})}var c=h.getMarginBox(this.node),d=this.surface.getDimensions();return d.width!=c.w||d.height!=c.h?(this.surface.setDimensions(c.w,c.h),this.dirty=
!0,this.render()):this},getGeometry:function(){var a={};B.forIn(this.axes,function(b){b.initialized()&&(a[b.name]={name:b.name,vertical:b.vertical,scaler:b.scaler,ticks:b.ticks})});return a},setAxisWindow:function(b,c,d,e){var f=this.axes[b];f&&(f.setWindow(c,d),a.forEach(this.stack,function(a){if(a.hAxis==b||a.vAxis==b)a.zoom=e}));return this},setWindow:function(b,c,d,e,f){"plotArea"in this||this.calculateGeometry();B.forIn(this.axes,function(a){var f,h;f=a.getScaler().bounds;h=f.span/(f.upper-f.lower);
a.vertical?(f=c,h=e/h/f):(f=b,h=d/h/f);a.setWindow(f,h)});a.forEach(this.stack,function(a){a.zoom=f});return this},zoomIn:function(a,b,c){var d=this.axes[a];if(d){var d=d.getScaler().bounds,e=Math.min(b[0],b[1]),f=Math.max(b[0],b[1]),e=b[0]<d.lower?d.lower:e,f=b[1]>d.upper?d.upper:f;this.setAxisWindow(a,(d.upper-d.lower)/(f-e),e-d.lower);c?this.delayedRender():this.render()}},calculateGeometry:function(){if(this.dirty)return this.fullGeometry();var b=a.filter(this.stack,function(a){return a.dirty||
a.hAxis&&this.axes[a.hAxis].dirty||a.vAxis&&this.axes[a.vAxis].dirty},this);C(b,this.plotArea);return this},fullGeometry:function(){this._makeDirty();a.forEach(this.stack,F);this.theme||this.setTheme(new s);a.forEach(this.series,function(a){if(!(a.plot in this.plots)){if(!z.plot2d||!z.plot2d.Default)throw Error("Can't find plot: Default - didn't you forget to dojo.require() it?");var b=new z.plot2d.Default(this,{});b.name=a.plot;this.plots[a.plot]=this.stack.length;this.stack.push(b)}this.stack[this.plots[a.plot]].addSeries(a)},
this);a.forEach(this.stack,function(a){a.assignAxes&&a.assignAxes(this.axes)},this);var b=this.dim=this.surface.getDimensions();b.width=v.normalizedLength(b.width);b.height=v.normalizedLength(b.height);B.forIn(this.axes,F);C(this.stack,b);var c=this.offsets={l:0,r:0,t:0,b:0},d=this;B.forIn(this.axes,function(a){e("dojo-bidi")&&d._resetLeftBottom(a);B.forIn(a.getOffsets(),function(a,b){c[b]=Math.max(a,c[b])})});if(this.title){this.titleGap=0==this.titleGap?0:this.titleGap||this.theme.chart.titleGap||
20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";this.titleAlign=this.titleAlign||this.theme&&this.theme.chart&&this.theme.chart.titleAlign||"middle";var f=v.normalizedLength(v.splitFontString(this.titleFont).size);c["top"==this.titlePos?"t":"b"]+=f+this.titleGap}B.forIn(this.margins,function(a,b){c[b]+=a});this.plotArea={width:b.width-c.l-c.r,
height:b.height-c.t-c.b};B.forIn(this.axes,F);C(this.stack,this.plotArea);return this},render:function(){this._delayedRenderHandle&&(clearTimeout(this._delayedRenderHandle),this._delayedRenderHandle=null);this.theme&&this.theme.clear();if(this.dirty)return this.fullRender();this.calculateGeometry();B.forEachRev(this.stack,function(a){a.render(this.dim,this.offsets)},this);B.forIn(this.axes,function(a){a.render(this.dim,this.offsets)},this);this._makeClean();return this},fullRender:function(){this.fullGeometry();
var b=this.offsets,c=this.dim,d=Math.max(0,c.width-b.l-b.r),e=Math.max(0,c.height-b.t-b.b);a.forEach(this.series,H);B.forIn(this.axes,H);a.forEach(this.stack,H);var f=this.surface.children;if(w.dispose)for(var h=0;h<f.length;++h)w.dispose(f[h]);this.chartTitle&&this.chartTitle.tagName&&n.destroy(this.chartTitle);this.surface.clear();this.chartTitle=null;this._renderChartBackground(c,b);this._renderPlotBackground(c,b,d,e);B.foldr(this.stack,function(a,d){return d.render(c,b),0},0);this._nativeClip||
this._renderChartBackground(c,b);this.title&&this._renderTitle(c,b);B.forIn(this.axes,function(a){a.render(c,b)});this._makeClean();return this},_renderTitle:function(a,b){var c="canvas"==v.renderer&&this.htmlLabels||!e("ie")&&!e("opera")&&this.htmlLabels?"html":"gfx",d=v.normalizedLength(v.splitFontString(this.titleFont).size),f=v._base._getTextBox(this.title,{font:this.titleFont}),h=this.titleAlign,g=e("dojo-bidi")&&this.isRightToLeft(),n=a.width/2;"edge"===h?(h="left",n=g?a.width-(b.r+f.w):b.l):
"middle"!=h&&(g&&(h="left"===h?"right":"left"),"left"===h?n=this.margins.l:"right"===h&&(h="left",n=a.width-(this.margins.l+f.w)));this.chartTitle=t.createText[c](this,this.surface,n,"top"==this.titlePos?d+this.margins.t:a.height-this.margins.b,h,this.title,this.titleFont,this.titleFontColor)},_renderChartBackground:function(a,b){var c=this.theme,e,h=void 0!==this.fill?this.fill:c.chart&&c.chart.fill,c=void 0!==this.stroke?this.stroke:c.chart&&c.chart.stroke;if("inherit"==h){e=this.node;for(h=new f(d.get(e,
"backgroundColor"));0==h.a&&e!=document.documentElement;)h=new f(d.get(e,"backgroundColor")),e=e.parentNode}h&&(this._nativeClip?(h=p.prototype._shapeFill(p.prototype._plotFill(h,a),{x:0,y:0,width:a.width+1,height:a.height+1}),this.surface.createRect({width:a.width+1,height:a.height+1}).setFill(h)):(h=p.prototype._plotFill(h,a,b),b.l&&(e={x:0,y:0,width:b.l,height:a.height+1},this.surface.createRect(e).setFill(p.prototype._shapeFill(h,e))),b.r&&(e={x:a.width-b.r,y:0,width:b.r+1,height:a.height+2},
this.surface.createRect(e).setFill(p.prototype._shapeFill(h,e))),b.t&&(e={x:0,y:0,width:a.width+1,height:b.t},this.surface.createRect(e).setFill(p.prototype._shapeFill(h,e))),b.b&&(e={x:0,y:a.height-b.b,width:a.width+1,height:b.b+2},this.surface.createRect(e).setFill(p.prototype._shapeFill(h,e)))));c&&this.surface.createRect({width:a.width-1,height:a.height-1}).setStroke(c)},_renderPlotBackground:function(a,b,c,d){var e=this.theme,f=e.plotarea&&e.plotarea.fill,e=e.plotarea&&e.plotarea.stroke,h={x:b.l-
1,y:b.t-1,width:c+2,height:d+2};f&&(f=p.prototype._shapeFill(p.prototype._plotFill(f,a,b),h),this.surface.createRect(h).setFill(f));e&&this.surface.createRect({x:b.l,y:b.t,width:c+1,height:d+1}).setStroke(e)},delayedRender:function(){this._delayedRenderHandle||(this._delayedRenderHandle=setTimeout(m.hitch(this,function(){this.render()}),this.delayInMs));return this},connectToPlot:function(a,b,c){return a in this.plots?this.stack[this.plots[a]].connect(b,c):null},fireEvent:function(a,b,c){if(a in this.runs){var d=
this.series[this.runs[a]].plot;d in this.plots&&(d=this.stack[this.plots[d]])&&d.fireEvent(a,b,c)}return this},_makeClean:function(){a.forEach(this.axes,I);a.forEach(this.stack,I);a.forEach(this.series,I);this.dirty=!1},_makeDirty:function(){a.forEach(this.axes,K);a.forEach(this.stack,K);a.forEach(this.series,K);this.dirty=!0},_invalidateDependentPlots:function(b,c){if(b in this.plots){var d=this.stack[this.plots[b]],e,f=c?"vAxis":"hAxis";if(d[f]){if((e=this.axes[d[f]])&&e.dependOnData())e.dirty=
!0,a.forEach(this.stack,function(a){a[f]&&a[f]==d[f]&&(a.dirty=!0)})}else d.dirty=!0}},setDir:function(a){return this},_resetLeftBottom:function(a){},formatTruncatedLabel:function(a,b,c){}});return e("dojo-bidi")?b("dojox.charting.Chart",[g,x]):g})},"dojox/main":function(){define(["dojo/_base/kernel"],function(g){return g.dojox})},"dojox/charting/Element":function(){define(["dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/shape"],function(g,m,a,b,d){return a("dojox.charting.Element",
null,{chart:null,group:null,htmlElements:null,dirty:!0,renderingOptions:null,constructor:function(a,b){this.chart=a;this.group=null;this.htmlElements=[];this.dirty=!0;this.trailingSymbol="...";this._events=[];b&&b.renderingOptions&&(this.renderingOptions=b.renderingOptions)},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.getGroup().removeShape();var a=this.getGroup().children;if(d.dispose)for(var b=0;b<a.length;++b)d.dispose(a[b],!0);this.getGroup().rawNode&&m.empty(this.getGroup().rawNode);
this.getGroup().clear();d.dispose&&d.dispose(this.getGroup(),!0);this.getGroup()!=this.group&&(this.group.rawNode&&m.empty(this.group.rawNode),this.group.clear(),d.dispose&&d.dispose(this.group,!0));this.group=null}this.dirty=!0;this._events.length&&(g.forEach(this._events,function(a){a.shape.disconnect(a.handle)}),this._events=[]);return this},cleanGroup:function(a){this.destroyHtmlElements();a||(a=this.chart.surface);if(this.group){var b;a=this.getGroup().children;if(d.dispose)for(var g=0;g<a.length;++g)d.dispose(a[g],
!0);this.getGroup().rawNode&&(b=this.getGroup().bgNode,m.empty(this.getGroup().rawNode));this.getGroup().clear();b&&this.getGroup().rawNode.appendChild(b)}else if(this.group=a.createGroup(),this.renderingOptions&&this.group.rawNode&&"http://www.w3.org/2000/svg"==this.group.rawNode.namespaceURI)for(g in this.renderingOptions)this.group.rawNode.setAttribute(g,this.renderingOptions[g]);this.dirty=!0;return this},getGroup:function(){return this.group},destroyHtmlElements:function(){this.htmlElements.length&&
(g.forEach(this.htmlElements,m.destroy),this.htmlElements=[])},destroy:function(){this.purgeGroup()},overrideShape:function(a,b){},getTextWidth:function(a,d){return b._base._getTextBox(a,{font:d}).w||0},getTextWithLimitLength:function(a,b,d,f){if(!a||0>=a.length)return{text:"",truncated:f||!1};if(!d||0>=d)return{text:a,truncated:f||!1};var e=a.substring(0,1)+this.trailingSymbol,g=this.getTextWidth(e,b);if(d<=g)return{text:e,truncated:!0};if(this.getTextWidth(a,b)<=d)return{text:a,truncated:f||!1};
f=0;for(e=a.length;f<e;){if(2>=e-f){for(;this.getTextWidth(a.substring(0,f)+this.trailingSymbol,b)>d;)f-=1;return{text:a.substring(0,f)+this.trailingSymbol,truncated:!0}}g=f+Math.round(0.618*(e-f));this.getTextWidth(a.substring(0,g),b)<d?f=g:e=g}},getTextWithLimitCharCount:function(a,b,d,f){return!a||0>=a.length?{text:"",truncated:f||!1}:!d||0>=d||a.length<=d?{text:a,truncated:f||!1}:{text:a.substring(0,d)+this.trailingSymbol,truncated:!0}},_plotFill:function(a,d,g){if(!a||!a.type||!a.space)return a;
var f=a.space,e;switch(a.type){case "linear":if("plot"===f||"shapeX"===f||"shapeY"===f){a=b.makeParameters(b.defaultLinearGradient,a);a.space=f;if("plot"===f||"shapeX"===f)e=d.height-g.t-g.b,a.y1=g.t+e*a.y1/100,a.y2=g.t+e*a.y2/100;if("plot"===f||"shapeY"===f)e=d.width-g.l-g.r,a.x1=g.l+e*a.x1/100,a.x2=g.l+e*a.x2/100}break;case "radial":"plot"===f&&(a=b.makeParameters(b.defaultRadialGradient,a),a.space=f,f=d.width-g.l-g.r,d=d.height-g.t-g.b,a.cx=g.l+f*a.cx/100,a.cy=g.t+d*a.cy/100,a.r=a.r*Math.sqrt(f*
f+d*d)/200);break;case "pattern":if("plot"===f||"shapeX"===f||"shapeY"===f){a=b.makeParameters(b.defaultPattern,a);a.space=f;if("plot"===f||"shapeX"===f)e=d.height-g.t-g.b,a.y=g.t+e*a.y/100,a.height=e*a.height/100;if("plot"===f||"shapeY"===f)e=d.width-g.l-g.r,a.x=g.l+e*a.x/100,a.width=e*a.width/100}}return a},_shapeFill:function(a,d){if(!a||!a.space)return a;var g=a.space,f;switch(a.type){case "linear":if("shape"===g||"shapeX"===g||"shapeY"===g){a=b.makeParameters(b.defaultLinearGradient,a);a.space=
g;if("shape"===g||"shapeX"===g)f=d.width,a.x1=d.x+f*a.x1/100,a.x2=d.x+f*a.x2/100;if("shape"===g||"shapeY"===g)f=d.height,a.y1=d.y+f*a.y1/100,a.y2=d.y+f*a.y2/100}break;case "radial":"shape"===g&&(a=b.makeParameters(b.defaultRadialGradient,a),a.space=g,a.cx=d.x+d.width/2,a.cy=d.y+d.height/2,a.r=a.r*d.width/200);break;case "pattern":if("shape"===g||"shapeX"===g||"shapeY"===g){a=b.makeParameters(b.defaultPattern,a);a.space=g;if("shape"===g||"shapeX"===g)f=d.width,a.x=d.x+f*a.x/100,a.width=f*a.width/100;
if("shape"===g||"shapeY"===g)f=d.height,a.y=d.y+f*a.y/100,a.height=f*a.height/100}}return a},_pseudoRadialFill:function(a,d,g,f,e){if(!a||"radial"!==a.type||"shape"!==a.space)return a;var p=a.space;a=b.makeParameters(b.defaultRadialGradient,a);a.space=p;if(4>arguments.length)return a.cx=d.x,a.cy=d.y,a.r=a.r*g/100,a;p=5>arguments.length?f:(e+f)/2;return{type:"linear",x1:d.x,y1:d.y,x2:d.x+a.r*g*Math.cos(p)/100,y2:d.y+a.r*g*Math.sin(p)/100,colors:a.colors}}})})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),
function(g,m,a,b,d,c,h,n,f,e){function p(a,b){if(!s)return a.splice(b,1);var c=a.length;if(c){for(;b<c;)a[b]=a[b+1],b++;a.length--}}var s=!!d("chrome"),u=g.shape={};u.Shape=a("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(d("gfxRegistry")){var a=u.register(this);this.getUID=function(){return a}}},destroy:function(){d("gfxRegistry")&&u.dispose(this);this.rawNode&&"__gfxObject__"in
this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var a=this.getBoundingBox();if(!a)return null;var b=this._getRealMatrix();return[e.multiplyPoint(b,a.x,
a.y),e.multiplyPoint(b,a.x+a.width,a.y),e.multiplyPoint(b,a.x+a.width,a.y+a.height),e.multiplyPoint(b,a.x,a.y+a.height)]},getEventSource:function(){return this.rawNode},setClip:function(a){this.clip=a},getClip:function(){return this.clip},setShape:function(a){this.shape=g.makeParameters(this.shape,a);this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=null,this;var b=null;if("object"==typeof a&&"type"in a)switch(a.type){case "linear":b=g.makeParameters(g.defaultLinearGradient,
a);break;case "radial":b=g.makeParameters(g.defaultRadialGradient,a);break;case "pattern":b=g.makeParameters(g.defaultPattern,a)}else b=g.normalizeColor(a);this.fillStyle=b;return this},setStroke:function(a){if(!a)return this.strokeStyle=null,this;if("string"==typeof a||m.isArray(a)||a instanceof f)a={color:a};a=this.strokeStyle=g.makeParameters(g.defaultStroke,a);a.color=g.normalizeColor(a.color);return this},setTransform:function(a){this.matrix=e.clone(a?e.normalize(a):e.identity);return this._applyTransform()},
_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?
this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&this.parent.remove(this,a);return this},_setParent:function(a,b){this.parent=a;return this._updateParentMatrix(b)},_updateParentMatrix:function(a){this.parentMatrix=a?e.clone(a):null;return this._applyTransform()},_getRealMatrix:function(){for(var a=this.matrix,b=this.parent;b;)b.matrix&&(a=e.multiply(b.matrix,a)),b=b.parent;return a}});u._eventsProcessing={on:function(a,b){return c(this.getEventSource(),a,u.fixCallback(this,
g.fixTarget,b))},connect:function(a,b,c){"on"==a.substring(0,2)&&(a=a.substring(2));return this.on(a,c?m.hitch(b,c):b)},disconnect:function(a){return a.remove()}};u.fixCallback=function(a,c,d,e){e||(e=d,d=null);if(m.isString(e)){d=d||b.global;if(!d[e])throw['dojox.gfx.shape.fixCallback: scope["',e,'"] is null (scope\x3d"',d,'")'].join("");return function(b){return c(b,a)?d[e].apply(d,arguments||[]):void 0}}return!d?function(b){return c(b,a)?e.apply(d,arguments):void 0}:function(b){return c(b,a)?e.apply(d,
arguments||[]):void 0}};m.extend(u.Shape,u._eventsProcessing);u.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(a){var b=a.getParent();b&&b.remove(a,!0);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,b){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){b||(a.parent=null,a.parentMatrix=null);p(this.children,c);break}return this},clear:function(a){for(var b,
c=0;c<this.children.length;++c)b=this.children[c],b.parent=null,b.parentMatrix=null,a&&b.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var a=null;h.forEach(this.children,function(b){var c=b.getBoundingBox();c&&((b=b.getTransform())&&(c=e.multiplyRectangle(b,c)),a?(a.x=Math.min(a.x,c.x),a.y=Math.min(a.y,c.y),a.endX=Math.max(a.endX,c.x+c.width),a.endY=Math.max(a.endY,c.y+c.height)):a={x:c.x,y:c.y,endX:c.x+c.width,endY:c.y+c.height})});a&&(a.width=a.endX-a.x,a.height=
a.endY-a.y);return a}return null},_moveChildToFront:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){p(this.children,b);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){p(this.children,b);this.children.unshift(a);break}return this}};u.Surface=a("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){h.forEach(this._nodes,
n.destroy);this._nodes=[];h.forEach(this._events,function(a){a&&a.remove()});this._events=[];this.rawNode=null;if(d("ie"))for(;this._parent.lastChild;)n.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(a){},whenLoaded:function(a,b){var d=m.hitch(a,b);if(this.isLoaded)d(this);else c.once(this,"load",function(a){d(a)})}});m.extend(u.Surface,u._eventsProcessing);
u.Rect=a("dojox.gfx.shape.Rect",u.Shape,{constructor:function(a){this.shape=g.getDefault("Rect");this.rawNode=a},getBoundingBox:function(){return this.shape}});u.Ellipse=a("dojox.gfx.shape.Ellipse",u.Shape,{constructor:function(a){this.shape=g.getDefault("Ellipse");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});u.Circle=a("dojox.gfx.shape.Circle",u.Shape,{constructor:function(a){this.shape=
g.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});u.Line=a("dojox.gfx.shape.Line",u.Shape,{constructor:function(a){this.shape=g.getDefault("Line");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});u.Polyline=a("dojox.gfx.shape.Polyline",
u.Shape,{constructor:function(a){this.shape=g.getDefault("Polyline");this.rawNode=a},setShape:function(a,b){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);return this},_normalizePoints:function(){var a=this.shape.points,b=a&&a.length;if(b&&"number"==typeof a[0]){for(var c=[],d=0;d<b;d+=2)c.push({x:a[d],y:a[d+1]});this.shape.points=c}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=
this.shape.points,b=a.length,c=a[0],d=c.x,e=c.y,f=c.x,h=c.y,g=1;g<b;++g)c=a[g],d>c.x&&(d=c.x),f<c.x&&(f=c.x),e>c.y&&(e=c.y),h<c.y&&(h=c.y);this.bbox={x:d,y:e,width:f-d,height:h-e}}return this.bbox}});u.Image=a("dojox.gfx.shape.Image",u.Shape,{constructor:function(a){this.shape=g.getDefault("Image");this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});u.Text=a(u.Shape,{constructor:function(a){this.fontStyle=null;this.shape=
g.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle="string"==typeof a?g.splitFontString(a):g.makeParameters(g.defaultFont,a);this._setFont();return this},getBoundingBox:function(){var a=null;this.getShape().text&&(a=g._base._computeTextBoundingBox(this));return a}});u.Creator={createShape:function(a){switch(a.type){case g.defaultPath.type:return this.createPath(a);case g.defaultRect.type:return this.createRect(a);case g.defaultCircle.type:return this.createCircle(a);
case g.defaultEllipse.type:return this.createEllipse(a);case g.defaultLine.type:return this.createLine(a);case g.defaultPolyline.type:return this.createPolyline(a);case g.defaultImage.type:return this.createImage(a);case g.defaultText.type:return this.createText(a);case g.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(g.Group)},createRect:function(a){return this.createObject(g.Rect,a)},createEllipse:function(a){return this.createObject(g.Ellipse,
a)},createCircle:function(a){return this.createObject(g.Circle,a)},createLine:function(a){return this.createObject(g.Line,a)},createPolyline:function(a){return this.createObject(g.Polyline,a)},createImage:function(a){return this.createObject(g.Image,a)},createText:function(a){return this.createObject(g.Text,a)},createPath:function(a){return this.createObject(g.Path,a)},createTextPath:function(a){return this.createObject(g.TextPath,{}).setText(a)},createObject:function(a,b){return null}};return u})},
"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/Color dojox/lang/utils dojox/gfx/gradutils".split(" "),function(g,m,a,b,d,c){var h=a("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(a){a=a||{};var b=h.defaultTheme;m.forEach("chart plotarea axis grid series marker indicator".split(" "),function(c){this[c]=g.delegate(b[c],a[c])},this);a.seriesThemes&&a.seriesThemes.length?(this.colors=null,
this.seriesThemes=a.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(a.colors||h.defaultColors).slice(0));this.markerThemes=null;a.markerThemes&&a.markerThemes.length&&(this.markerThemes=a.markerThemes.slice(0));this.markers=a.markers?g.clone(a.markers):g.delegate(h.defaultMarkers);this.noGradConv=a.noGradConv;this.noRadialConv=a.noRadialConv;a.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var a=new this.constructor({chart:this.chart,plotarea:this.plotarea,
axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});m.forEach("clone clear next skip addMixin post getTick".split(" "),function(b){this.hasOwnProperty(b)&&(a[b]=this[b])},this);return a},clear:function(){this._current=0},next:function(a,c,e){var h=d.merge,m;if(this.colors){m=g.delegate(this.series);
var h=g.delegate(this.marker),u=new b(this.colors[this._current%this.colors.length]),t;m.stroke&&m.stroke.color?(m.stroke=g.delegate(m.stroke),t=new b(m.stroke.color),m.stroke.color=new b(u),m.stroke.color.a=t.a):m.stroke={color:u};h.stroke&&h.stroke.color?(h.stroke=g.delegate(h.stroke),t=new b(h.stroke.color),h.stroke.color=new b(u),h.stroke.color.a=t.a):h.stroke={color:u};!m.fill||m.fill.type?m.fill=u:(t=new b(m.fill),m.fill=new b(u),m.fill.a=t.a);!h.fill||h.fill.type?h.fill=u:(t=new b(h.fill),
h.fill=new b(u),h.fill.a=t.a)}else m=this.seriesThemes?h(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,h=this.markerThemes?h(this.marker,this.markerThemes[this._current%this.markerThemes.length]):m;m={series:m,marker:h,symbol:h&&h.symbol||this._markers[this._current%this._markers.length]};++this._current;c&&(m=this.addMixin(m,a,c));e&&(m=this.post(m,a));return m},skip:function(){++this._current},addMixin:function(a,b,c,h){if(g.isArray(c))m.forEach(c,function(c){a=
this.addMixin(a,b,c)},this);else{var s={};"color"in c&&("line"==b||"area"==b?(g.setObject("series.stroke.color",c.color,s),g.setObject("marker.stroke.color",c.color,s)):g.setObject("series.fill",c.color,s));m.forEach("stroke outline shadow fill filter font fontColor labelWiring".split(" "),function(a){var b="marker"+a.charAt(0).toUpperCase()+a.substr(1),d=b in c;a in c&&(g.setObject("series."+a,c[a],s),d||g.setObject("marker."+a,c[a],s));d&&g.setObject("marker."+a,c[b],s)});"marker"in c&&(s.symbol=
c.marker,s.symbol=c.marker);a=d.merge(a,s)}h&&(a=this.post(a,b));return a},post:function(a,b){var c=a.series.fill,h;if(!this.noGradConv&&this.shapeSpaces[c.space]&&"linear"==c.type){if("bar"==b)h={x1:c.y1,y1:c.x1,x2:c.y2,y2:c.x2};else if(!this.noRadialConv&&"shape"==c.space&&("slice"==b||"circle"==b))h={type:"radial",cx:0,cy:0,r:100};if(h)return d.merge(a,{series:{fill:h}})}return a},getTick:function(a,b){var c=this.axis.tick,h=a+"Tick",g=d.merge;c?this.axis[h]&&(c=g(c,this.axis[h])):c=this.axis[h];
b&&(c?b[h]&&(c=g(c,b[h])):c=b[h]);return c},inspectObjects:function(a){m.forEach("chart plotarea axis grid series marker indicator".split(" "),function(b){a(this[b])},this);this.seriesThemes&&m.forEach(this.seriesThemes,a);this.markerThemes&&m.forEach(this.markerThemes,a)},reverseFills:function(){this.inspectObjects(function(a){a&&a.fill&&(a.fill=c.reverse(a.fill))})},addMarker:function(a,b){this.markers[a]=b;this._buildMarkerArray()},setMarkers:function(a){this.markers=a;this._buildMarkerArray()},
_buildMarkerArray:function(){this._markers=[];for(var a in this.markers)this._markers.push(this.markers[a])}});g.mixin(h,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,
titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333",titleAlign:"middle"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:0.8,length:3},microTick:{width:0.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},
outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:0.1,color:"#ccc"},lineShadow:null,lineFill:null,stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",
radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:0.1,color:"#ccc"},markerShadow:null}}});return h})},"dojox/lang/utils":function(){define(["..","dojo/_base/lang"],function(g,m){var a=m.getObject("lang.utils",!0,g),b={},d=Object.prototype.toString,c=function(a){if(a)switch(d.call(a)){case "[object Array]":return a.slice(0);case "[object Object]":return m.delegate(a)}return a};
m.mixin(a,{coerceType:function(a,b){switch(typeof a){case "number":return Number(eval("("+b+")"));case "string":return String(b);case "boolean":return Boolean(eval("("+b+")"))}return eval("("+b+")")},updateWithObject:function(d,g,f){if(!g)return d;for(var e in d)if(e in g&&!(e in b)){var p=d[e];p&&"object"==typeof p?a.updateWithObject(p,g[e],f):d[e]=f?a.coerceType(p,g[e]):c(g[e])}return d},updateWithPattern:function(d,g,f,e){if(!g||!f)return d;for(var p in f)p in g&&!(p in b)&&(d[p]=e?a.coerceType(f[p],
g[p]):c(g[p]));return d},merge:function(b,c){if(c){var f=d.call(b),e=d.call(c),g,s;switch(e){case "[object Array]":if(e==f){f=Array(Math.max(b.length,c.length));g=0;for(e=f.length;g<e;++g)f[g]=a.merge(b[g],c[g]);return f}return c.slice(0);case "[object Object]":if(e==f&&b){f=m.delegate(b);for(g in c)g in b?(e=b[g],s=c[g],s!==e&&(f[g]=a.merge(e,s))):f[g]=m.clone(c[g]);return f}return m.clone(c)}}return c}});return a})},"dojox/gfx/gradutils":function(){define(["./_base","dojo/_base/lang","./matrix",
"dojo/_base/Color"],function(g,m,a,b){function d(a,d){if(0>=a)return d[0].color;var g=d.length;if(1<=a)return d[g-1].color;for(var f=0;f<g;++f){var e=d[f];if(e.offset>=a)return f?(g=d[f-1],b.blendColors(new b(g.color),new b(e.color),(a-g.offset)/(e.offset-g.offset))):e.color}return d[g-1].color}g=g.gradutils={};g.getColor=function(c,h){var g;if(c){switch(c.type){case "linear":g=Math.atan2(c.y2-c.y1,c.x2-c.x1);g=a.rotate(-g);var f=a.project(c.x2-c.x1,c.y2-c.y1),e=a.multiplyPoint(f,h),p=a.multiplyPoint(f,
c.x1,c.y1),f=a.multiplyPoint(f,c.x2,c.y2),f=a.multiplyPoint(g,f.x-p.x,f.y-p.y).x;g=a.multiplyPoint(g,e.x-p.x,e.y-p.y).x/f;break;case "radial":g=h.x-c.cx,e=h.y-c.cy,g=Math.sqrt(g*g+e*e)/c.r}return d(g,c.colors)}return new b(c||[0,0,0,0])};g.reverse=function(a){if(a)switch(a.type){case "linear":case "radial":if(a=m.delegate(a),a.colors){for(var b=a.colors,d=b.length,f=0,e,g=a.colors=Array(b.length);f<d;++f)e=b[f],g[f]={offset:1-e.offset,color:e.color};g.sort(function(a,b){return a.offset-b.offset})}}return a};
return g})},"dojox/charting/Series":function(){define(["dojo/_base/lang","dojo/_base/declare","./Element"],function(g,m,a){return m("dojox.charting.Series",a,{constructor:function(a,d,c){g.mixin(this,c);"string"!=typeof this.plot&&(this.plot="default");this.update(d)},clear:function(){this.dyn={}},update:function(a){g.isArray(a)?this.data=a:(this.source=a,this.data=this.source.data,this.source.setSeriesObject&&this.source.setSeriesObject(this));this.dirty=!0;this.clear()}})})},"dojox/charting/axis2d/common":function(){define(["dojo/_base/lang",
"dojo/_base/window","dojo/dom-geometry","dojox/gfx","dojo/has"],function(g,m,a,b,d){var c=g.getObject("dojox.charting.axis2d.common",!0),h=function(a){a.marginLeft="0px";a.marginTop="0px";a.marginRight="0px";a.marginBottom="0px";a.paddingLeft="0px";a.paddingTop="0px";a.paddingRight="0px";a.paddingBottom="0px";a.borderLeftWidth="0px";a.borderTopWidth="0px";a.borderRightWidth="0px";a.borderBottomWidth="0px"};return g.mixin(c,{createText:{gfx:function(a,b,c,d,h,g,m,w){return b.createText({x:c,y:d,text:g,
align:h}).setFont(m).setFill(w)},html:function(c,f,e,g,s,u,t,w,v){f=m.doc.createElement("div");var x=f.style,B;c.getTextDir&&(f.dir=c.getTextDir(u));h(x);x.font=t;f.innerHTML=String(u).replace(/\s/g,"\x26nbsp;");x.color=w;x.position="absolute";x.left="-10000px";m.body().appendChild(f);var A=b.normalizedLength(b.splitFontString(t).size);v||(f.getBoundingClientRect?(B=f.getBoundingClientRect(),B=B.width||B.right-B.left):B=a.getMarginBox(f).w);"rtl"==f.dir&&(e+=v?v:B);m.body().removeChild(f);x.position=
"relative";if(v)switch(x.width=v+"px",s){case "middle":x.textAlign="center";x.left=e-v/2+"px";break;case "end":x.textAlign="right";x.left=e-v+"px";break;default:x.left=e+"px",x.textAlign="left"}else switch(s){case "middle":x.left=Math.floor(e-B/2)+"px";break;case "end":x.left=Math.floor(e-B)+"px";break;default:x.left=Math.floor(e)+"px"}x.top=Math.floor(g-A)+"px";x.whiteSpace="nowrap";v=m.doc.createElement("div");x=v.style;h(x);x.width="0px";x.height="0px";v.appendChild(f);c.node.insertBefore(v,c.node.firstChild);
d("dojo-bidi")&&c.htmlElementsRegistry.push([v,e,g,s,u,t,w]);return v}}})})},"dojox/lang/functional":function(){define(["./functional/lambda","./functional/array","./functional/object"],function(g){return g})},"dojox/lang/functional/lambda":function(){define(["../..","dojo/_base/lang","dojo/_base/array"],function(g,m,a){var b=m.getObject("lang.functional",!0,g),d={},c=1<"ab".split(/a*/).length?String.prototype.split:function(a){var b=this.split.call(this,a);(a=a.exec(this))&&0==a.index&&b.unshift("");
return b},h=function(b){var d=[],h=c.call(b,/\s*->\s*/m);if(1<h.length)for(;h.length;)b=h.pop(),d=h.pop().split(/\s*,\s*|\s+/m),h.length&&h.push("(function("+d.join(", ")+"){ return ("+b+"); })");else if(b.match(/\b_\b/))d=["_"];else{var h=b.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),g=b.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(h||g)h&&(d.push("$1"),b="$1"+b),g&&(d.push("$2"),b+="$2");else{var h=b.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,
"").match(/([a-z_$][a-z_$\d]*)/gi)||[],n={};a.forEach(h,function(a){n.hasOwnProperty(a)||(d.push(a),n[a]=1)})}}return{args:d,body:b}},n=function(a){return a.length?function(){var c=a.length-1,d=b.lambda(a[c]).apply(this,arguments);for(--c;0<=c;--c)d=b.lambda(a[c]).call(this,d);return d}:function(a){return a}};m.mixin(b,{rawLambda:function(a){return h(a)},buildLambda:function(a){a=h(a);return"function("+a.args.join(",")+"){return ("+a.body+");}"},lambda:function(a){if("function"==typeof a)return a;
if(a instanceof Array)return n(a);if(d.hasOwnProperty(a))return d[a];var b=h(a);return d[a]=new Function(b.args,"return ("+b.body+");")},clearLambdaCache:function(){d={}}});return b})},"dojox/lang/functional/array":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(g,m,a,b){var d={};m.mixin(b,{filter:function(a,h,n){"string"==typeof a&&(a=a.split(""));n=n||g.global;h=b.lambda(h);var f=[],e,p,s;if(m.isArray(a)){p=0;for(s=a.length;p<s;++p)e=a[p],h.call(n,
e,p,a)&&f.push(e)}else if("function"==typeof a.hasNext&&"function"==typeof a.next)for(p=0;a.hasNext();)e=a.next(),h.call(n,e,p++,a)&&f.push(e);else for(p in a)p in d||(e=a[p],h.call(n,e,p,a)&&f.push(e));return f},forEach:function(a,h,n){"string"==typeof a&&(a=a.split(""));n=n||g.global;h=b.lambda(h);var f,e;if(m.isArray(a)){f=0;for(e=a.length;f<e;h.call(n,a[f],f,a),++f);}else if("function"==typeof a.hasNext&&"function"==typeof a.next)for(f=0;a.hasNext();h.call(n,a.next(),f++,a));else for(f in a)f in
d||h.call(n,a[f],f,a);return n},map:function(a,h,n){"string"==typeof a&&(a=a.split(""));n=n||g.global;h=b.lambda(h);var f,e,p;if(m.isArray(a)){f=Array(e=a.length);for(p=0;p<e;f[p]=h.call(n,a[p],p,a),++p);}else if("function"==typeof a.hasNext&&"function"==typeof a.next){f=[];for(p=0;a.hasNext();f.push(h.call(n,a.next(),p++,a)));}else for(p in f=[],a)p in d||f.push(h.call(n,a[p],p,a));return f},every:function(a,h,n){"string"==typeof a&&(a=a.split(""));n=n||g.global;h=b.lambda(h);var f,e;if(m.isArray(a)){f=
0;for(e=a.length;f<e;++f)if(!h.call(n,a[f],f,a))return!1}else if("function"==typeof a.hasNext&&"function"==typeof a.next)for(f=0;a.hasNext();){if(!h.call(n,a.next(),f++,a))return!1}else for(f in a)if(!(f in d)&&!h.call(n,a[f],f,a))return!1;return!0},some:function(a,h,n){"string"==typeof a&&(a=a.split(""));n=n||g.global;h=b.lambda(h);var f,e;if(m.isArray(a)){f=0;for(e=a.length;f<e;++f)if(h.call(n,a[f],f,a))return!0}else if("function"==typeof a.hasNext&&"function"==typeof a.next)for(f=0;a.hasNext();){if(h.call(n,
a.next(),f++,a))return!0}else for(f in a)if(!(f in d)&&h.call(n,a[f],f,a))return!0;return!1}});return b})},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(g,m,a){var b={};m.mixin(a,{keys:function(a){var c=[],h;for(h in a)h in b||c.push(h);return c},values:function(a){var c=[],h;for(h in a)h in b||c.push(a[h]);return c},filterIn:function(d,c,h){h=h||g.global;c=a.lambda(c);var n={},f,e;for(e in d)e in b||(f=d[e],c.call(h,f,e,d)&&(n[e]=f));
return n},forIn:function(d,c,h){h=h||g.global;c=a.lambda(c);for(var n in d)n in b||c.call(h,d[n],n,d);return h},mapIn:function(d,c,h){h=h||g.global;c=a.lambda(c);var n={},f;for(f in d)f in b||(n[f]=c.call(h,d[f],f,d));return n}});return a})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(g,m,a,b){var d={};g.mixin(b,{foldl:function(c,h,n,f){"string"==typeof c&&(c=c.split(""));f=f||a.global;h=b.lambda(h);var e,p;if(g.isArray(c)){e=
0;for(p=c.length;e<p;n=h.call(f,n,c[e],e,c),++e);}else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(e=0;c.hasNext();n=h.call(f,n,c.next(),e++,c));else for(e in c)e in d||(n=h.call(f,n,c[e],e,c));return n},foldl1:function(c,h,n){"string"==typeof c&&(c=c.split(""));n=n||a.global;h=b.lambda(h);var f,e,p;if(g.isArray(c)){f=c[0];e=1;for(p=c.length;e<p;f=h.call(n,f,c[e],e,c),++e);}else if("function"==typeof c.hasNext&&"function"==typeof c.next){if(c.hasNext()){f=c.next();for(e=1;c.hasNext();f=
h.call(n,f,c.next(),e++,c));}}else for(e in p=!0,c)e in d||(p?(f=c[e],p=!1):f=h.call(n,f,c[e],e,c));return f},foldr:function(c,d,g,f){"string"==typeof c&&(c=c.split(""));f=f||a.global;d=b.lambda(d);for(var e=c.length;0<e;--e,g=d.call(f,g,c[e],e,c));return g},foldr1:function(c,d,g){"string"==typeof c&&(c=c.split(""));g=g||a.global;d=b.lambda(d);for(var f=c.length,e=c[f-1],f=f-1;0<f;--f,e=d.call(g,e,c[f],f,c));return e},reduce:function(a,d,g){return 3>arguments.length?b.foldl1(a,d):b.foldl(a,d,g)},
reduceRight:function(a,d,g){return 3>arguments.length?b.foldr1(a,d):b.foldr(a,d,g)},unfold:function(c,d,g,f,e){e=e||a.global;d=b.lambda(d);g=b.lambda(g);c=b.lambda(c);for(var p=[];!c.call(e,f);p.push(d.call(e,f)),f=g.call(e,f));return p}})})},"dojox/lang/functional/reversed":function(){define(["dojo/_base/lang","dojo/_base/kernel","./lambda"],function(g,m,a){g.mixin(a,{filterRev:function(b,d,c){"string"==typeof b&&(b=b.split(""));c=c||m.global;d=a.lambda(d);for(var h=[],g,f=b.length-1;0<=f;--f)g=
b[f],d.call(c,g,f,b)&&h.push(g);return h},forEachRev:function(b,d,c){"string"==typeof b&&(b=b.split(""));c=c||m.global;d=a.lambda(d);for(var h=b.length-1;0<=h;d.call(c,b[h],h,b),--h);},mapRev:function(b,d,c){"string"==typeof b&&(b=b.split(""));c=c||m.global;d=a.lambda(d);for(var h=b.length,g=Array(h),h=h-1,f=0;0<=h;g[f++]=d.call(c,b[h],h,b),--h);return g},everyRev:function(b,d,c){"string"==typeof b&&(b=b.split(""));c=c||m.global;d=a.lambda(d);for(var h=b.length-1;0<=h;--h)if(!d.call(c,b[h],h,b))return!1;
return!0},someRev:function(b,d,c){"string"==typeof b&&(b=b.split(""));c=c||m.global;d=a.lambda(d);for(var h=b.length-1;0<=h;--h)if(d.call(c,b[h],h,b))return!0;return!1}});return a})},"dojox/charting/plot2d/Pie":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare ./Base ./_PlotEvents ./common dojox/gfx dojox/gfx/matrix dojox/lang/functional dojox/lang/utils dojo/has".split(" "),function(g,m,a,b,d,c,h,n,f,e,p){return a("dojox.charting.plot2d.Pie",[b,d],{defaultParams:{labels:!0,ticks:!1,
fixed:!0,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:!0,radGrad:"native",fanSize:5,startAngle:0},optionalParams:{radius:0,omitLabels:!1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",labelWiring:{}},constructor:function(a,b){this.opt=g.clone(this.defaultParams);e.updateWithObject(this.opt,b);e.updateWithPattern(this.opt,b,this.optionalParams);this.axes=[];this.run=null;this.dyn=[];this.runFilter=[]},clear:function(){this.inherited(arguments);this.dyn=
[];this.run=null;return this},setAxis:function(a){return this},addSeries:function(a){this.run=a;return this},getSeriesStats:function(){return g.delegate(c.defaultStats)},getRequiredColors:function(){return this.run?this.run.data.length:0},render:function(a,b){if(!this.dirty)return this;this.resetEvents();this.dirty=!1;this._eventSeries={};this.cleanGroup();var c=this.group,d=this.chart.theme;if(!this.run||!this.run.data.length)return this;var e=(a.width-b.l-b.r)/2,x=(a.height-b.t-b.b)/2,B=Math.min(e,
x),A="font"in this.opt?this.opt.font:d.series.font,C,z=n._degToRad(this.opt.startAngle),F=z,H,J,I,K,M=this.events(),L=m.map(this.run.data,function(a,b){"number"!=typeof a&&a.hidden&&(this.runFilter.push(b),a.hidden=!1);return m.some(this.runFilter,function(a){return a==b})?"number"==typeof a?0:{y:0,text:a.text}:a},this);this.dyn=[];"radius"in this.opt&&(B=this.opt.radius,K=B-this.opt.labelOffset);var G={cx:b.l+e,cy:b.t+x,r:B};if(this.opt.shadow||d.shadow){H=this.opt.shadow||d.shadow;var O=g.clone(G);
O.cx+=H.dx;O.cy+=H.dy;c.createCircle(O).setFill(H.color).setStroke(H)}if(c.setFilter&&(this.opt.filter||d.filter))c.createCircle(G).setFill(d.series.stroke).setFilter(this.opt.filter||d.filter);if("number"==typeof L[0]){H=f.map(L,"x ? Math.max(x, 0) : 0");if(f.every(H,"\x3c\x3d 0"))return c.createCircle(G).setStroke(d.series.stroke),this.dyn=m.map(H,function(){return{}}),this;J=f.map(H,"/this",f.foldl(H,"+",0));this.opt.labels&&(I=m.map(J,function(a){return 0<a?this._getLabel(100*a)+"%":""},this))}else{H=
f.map(L,"x ? Math.max(x.y, 0) : 0");if(f.every(H,"\x3c\x3d 0"))return c.createCircle(G).setStroke(d.series.stroke),this.dyn=m.map(H,function(){return{}}),this;J=f.map(H,"/this",f.foldl(H,"+",0));this.opt.labels&&(I=m.map(J,function(a,b){if(0>a)return"";var c=L[b];return"text"in c?c.text:this._getLabel(100*a)+"%"},this))}var S=f.map(L,function(a,b){var c=[this.opt,this.run];null!==a&&"number"!=typeof a&&c.push(a);this.opt.styleFunc&&c.push(this.opt.styleFunc(a));return d.next("slice",c,!0)},this);
this.opt.labels&&(C=A?h.normalizedLength(h.splitFontString(A).size):0,H=f.foldl1(f.map(I,function(a,b){return h._base._getTextBox(a,{font:S[b].series.font}).w},this),"Math.max(a, b)")/2,0>this.opt.labelOffset&&(B=Math.min(e-2*H,x-C)+this.opt.labelOffset),K=B-this.opt.labelOffset);var U=Array(J.length);m.some(J,function(d,e){if(0>d)return!1;var f=L[e],h=S[e],g;if(0==d)return this.dyn.push({fill:h.series.fill,stroke:h.series.stroke}),!1;if(1<=d){g=this._plotFill(h.series.fill,a,b);g=this._shapeFill(g,
{x:G.cx-G.r,y:G.cy-G.r,width:2*G.r,height:2*G.r});g=this._pseudoRadialFill(g,{x:G.cx,y:G.cy},G.r);var p=c.createCircle(G).setFill(g).setStroke(h.series.stroke);this.dyn.push({fill:g,stroke:h.series.stroke});M&&(f={element:"slice",index:e,run:this.run,shape:p,x:e,y:"number"==typeof f?f:f.y,cx:G.cx,cy:G.cy,cr:B},this._connectEvents(f),U[e]=f);return!1}var m=F+2*d*Math.PI;e+1==J.length&&(m=z+2*Math.PI);var p=m-F,v=G.cx+B*Math.cos(F),w=G.cy+B*Math.sin(F),x=G.cx+B*Math.cos(m),A=G.cy+B*Math.sin(m);g=n._degToRad(this.opt.fanSize);
if(h.series.fill&&"radial"===h.series.fill.type&&"fan"===this.opt.radGrad&&p>g){var K=c.createGroup(),C=Math.ceil(p/g),O=p/C;g=this._shapeFill(h.series.fill,{x:G.cx-G.r,y:G.cy-G.r,width:2*G.r,height:2*G.r});for(var I=0;I<C;++I){var H=0==I?v:G.cx+B*Math.cos(F+(I-0.2)*O),E=0==I?w:G.cy+B*Math.sin(F+(I-0.2)*O),N=I==C-1?x:G.cx+B*Math.cos(F+(I+1+0.2)*O),T=I==C-1?A:G.cy+B*Math.sin(F+(I+1+0.2)*O);K.createPath().moveTo(G.cx,G.cy).lineTo(H,E).arcTo(B,B,0,O>Math.PI,!0,N,T).lineTo(G.cx,G.cy).closePath().setFill(this._pseudoRadialFill(g,
{x:G.cx,y:G.cy},B,F+(I+0.5)*O,F+(I+0.5)*O))}K.createPath().moveTo(G.cx,G.cy).lineTo(v,w).arcTo(B,B,0,p>Math.PI,!0,x,A).lineTo(G.cx,G.cy).closePath().setStroke(h.series.stroke);p=K}else p=c.createPath().moveTo(G.cx,G.cy).lineTo(v,w).arcTo(B,B,0,p>Math.PI,!0,x,A).lineTo(G.cx,G.cy).closePath().setStroke(h.series.stroke),(g=h.series.fill)&&"radial"===g.type?(g=this._shapeFill(g,{x:G.cx-G.r,y:G.cy-G.r,width:2*G.r,height:2*G.r}),"linear"===this.opt.radGrad&&(g=this._pseudoRadialFill(g,{x:G.cx,y:G.cy},B,
F,m))):g&&"linear"===g.type&&(g=this._plotFill(g,a,b),g=this._shapeFill(g,p.getBoundingBox())),p.setFill(g);this.dyn.push({fill:g,stroke:h.series.stroke});M&&(f={element:"slice",index:e,run:this.run,shape:p,x:e,y:"number"==typeof f?f:f.y,cx:G.cx,cy:G.cy,cr:B},this._connectEvents(f),U[e]=f);F=m;return!1},this);if(this.opt.labels){var T=p("dojo-bidi")&&this.chart.isRightToLeft();if("default"==this.opt.labelStyle)F=z,m.some(J,function(b,d){if(0>=b)return!1;var e=S[d];if(1<=b)return this.renderLabel(c,
G.cx,G.cy+C/2,I[d],e,0<this.opt.labelOffset),!0;var f=F+2*b*Math.PI;d+1==J.length&&(f=z+2*Math.PI);if(this.opt.omitLabels&&0.001>f-F)return!1;var h=(F+f)/2,g=G.cx+K*Math.cos(h),h=G.cy+K*Math.sin(h)+C/2;this.renderLabel(c,T?a.width-g:g,h,I[d],e,0<this.opt.labelOffset);F=f;return!1},this);else if("columns"==this.opt.labelStyle){var F=z,E=this.opt.omitLabels,Q=[];m.forEach(J,function(a,b){var c=F+2*a*Math.PI;b+1==J.length&&(c=z+2*Math.PI);var d=(F+c)/2;Q.push({angle:d,left:0>Math.cos(d),theme:S[b],index:b,
omit:E?0.001>c-F:!1});F=c});e=h._base._getTextBox("a",{font:A}).h;this._getProperLabelRadius(Q,e,1.1*G.r);m.forEach(Q,function(b,d){if(!b.omit){var e=G.cx-2*G.r,f=G.cx+2*G.r,g=h._base._getTextBox(I[d],{font:b.theme.series.font}).w,n=G.cx+b.labelR*Math.cos(b.angle),p=G.cy+b.labelR*Math.sin(b.angle),f=b.left?e+g:f-g,e=b.left?e:f,m=c.createPath().moveTo(G.cx+G.r*Math.cos(b.angle),G.cy+G.r*Math.sin(b.angle));Math.abs(b.labelR*Math.cos(b.angle))<2*G.r-g&&m.lineTo(n,p);m.lineTo(f,p).setStroke(b.theme.series.labelWiring);
this.renderLabel(c,T?a.width-g-e:e,p,I[d],b.theme,!1,"left")}},this)}}var N=0;this._eventSeries[this.run.name]=f.map(L,function(a){return 0>=a?null:U[N++]});p("dojo-bidi")&&this._checkOrientation(this.group,a,b);return this},_getProperLabelRadius:function(a,b,c){var d,e,f=1,h=1;if(1==a.length)a[0].labelR=c;else{for(var g=0;g<a.length;g++){var n=Math.abs(Math.sin(a[g].angle));a[g].left?f>=n&&(f=n,d=a[g]):h>=n&&(h=n,e=a[g])}d.labelR=e.labelR=c;this._calculateLabelR(d,a,b);this._calculateLabelR(e,a,
b)}},_calculateLabelR:function(a,b,c){for(var d=a.index,e=b.length,f=a.labelR;!(b[d%e].left^b[(d+1)%e].left);)b[(d+1)%e].omit||(f=(Math.sin(b[d%e].angle)*f+(b[d%e].left?-c:c))/Math.sin(b[(d+1)%e].angle),f=f<a.labelR?a.labelR:f,b[(d+1)%e].labelR=f),d++;d=a.index;for(e=0==d?e-1:d-1;!(b[d].left^b[e].left);)b[e].omit||(f=(Math.sin(b[d].angle)*f+(b[d].left?c:-c))/Math.sin(b[e].angle),f=f<a.labelR?a.labelR:f,b[e].labelR=f),d--,e--,d=0>d?d+b.length:d,e=0>e?e+b.length:e}})})},"dojox/charting/plot2d/Base":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojox/gfx ../Element ./common ../axis2d/common dojo/has".split(" "),
function(g,m,a,b,d,c,h,n){g=g("dojox.charting.plot2d.Base",d,{constructor:function(a,b){b&&b.tooltipFunc&&(this.tooltipFunc=b.tooltipFunc)},clear:function(){this.series=[];this.dirty=!0;return this},setAxis:function(a){return this},assignAxes:function(a){m.forEach(this.axes,function(b){this[b]&&this.setAxis(a[this[b]])},this)},addSeries:function(a){this.series.push(a);return this},getSeriesStats:function(){return c.collectSimpleStats(this.series,a.hitch(this,"isNullValue"))},calculateAxes:function(a){this.initializeScalers(a,
this.getSeriesStats());return this},initializeScalers:function(){return this},isDataDirty:function(){return m.some(this.series,function(a){return a.dirty})},render:function(a,b){return this},renderLabel:function(a,c,d,g,n,m,w){a=h.createText[this.opt.htmlLabels&&"vml"!=b.renderer?"html":"gfx"](this.chart,a,c,d,w?w:"middle",g,n.series.font,n.series.fontColor);m&&(this.opt.htmlLabels&&"vml"!=b.renderer?a.style.pointerEvents="none":a.rawNode&&(a.rawNode.style.pointerEvents="none"));this.opt.htmlLabels&&
"vml"!=b.renderer&&this.htmlElements.push(a);return a},getRequiredColors:function(){return this.series.length},_getLabel:function(a){return c.getLabel(a,this.opt.fixed,this.opt.precision)}});n("dojo-bidi")&&g.extend({_checkOrientation:function(a,b,c){this.chart.applyMirroring(this.group,b,c)}});return g})},"dojox/charting/plot2d/common":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Color dojox/gfx dojox/lang/functional ../scaler/common".split(" "),function(g,m,a,b,d,c){var h=g.getObject("dojox.charting.plot2d.common",
!0);return g.mixin(h,{doIfLoaded:c.doIfLoaded,makeStroke:function(c){if(!c)return c;if("string"==typeof c||c instanceof a)c={color:c};return b.makeParameters(b.defaultStroke,c)},augmentColor:function(b,c){var d=new a(b),h=new a(c);h.a=d.a;return h},augmentStroke:function(a,b){var c=h.makeStroke(a);c&&(c.color=h.augmentColor(c.color,b));return c},augmentFill:function(b,c){new a(c);return"string"==typeof b||b instanceof a?h.augmentColor(b,c):b},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,
hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(a,b){for(var c=g.delegate(h.defaultStats),d=0;d<a.length;++d)for(var s=a[d],u=0;u<s.data.length;u++)if(!b(s.data[u])){if("number"==typeof s.data[u]){var u=c.vmin,t=c.vmax;m.forEach(s.data,function(a,d){if(!b(a)){var h=d+1,g=a;isNaN(g)&&(g=0);c.hmin=Math.min(c.hmin,h);c.hmax=Math.max(c.hmax,h);c.vmin=Math.min(c.vmin,g);c.vmax=Math.max(c.vmax,g)}})}else{var w=c.hmin,v=c.hmax,u=c.vmin,t=c.vmax;(!("xmin"in s)||!("xmax"in
s)||!("ymin"in s)||!("ymax"in s))&&m.forEach(s.data,function(a,d){if(!b(a)){var h="x"in a?a.x:d+1,g=a.y;isNaN(h)&&(h=0);isNaN(g)&&(g=0);c.hmin=Math.min(c.hmin,h);c.hmax=Math.max(c.hmax,h);c.vmin=Math.min(c.vmin,g);c.vmax=Math.max(c.vmax,g)}});"xmin"in s&&(c.hmin=Math.min(w,s.xmin));"xmax"in s&&(c.hmax=Math.max(v,s.xmax))}"ymin"in s&&(c.vmin=Math.min(u,s.ymin));"ymax"in s&&(c.vmax=Math.max(t,s.ymax));break}return c},calculateBarSize:function(a,b,c){c||(c=1);var d=b.gap,d=(a-2*d)/c;"minBarSize"in b&&
(d=Math.max(d,b.minBarSize));"maxBarSize"in b&&(d=Math.min(d,b.maxBarSize));d=Math.max(d,1);return{size:d,gap:(a-d*c)/2}},collectStackedStats:function(a){var b=g.clone(h.defaultStats);if(a.length){b.hmin=Math.min(b.hmin,1);b.hmax=d.foldl(a,"seed, run -\x3e Math.max(seed, run.data.length)",b.hmax);for(var c=0;c<b.hmax;++c){var p=a[0].data[c],p=p&&("number"==typeof p?p:p.y);isNaN(p)&&(p=0);b.vmin=Math.min(b.vmin,p);for(var m=1;m<a.length;++m){var u=a[m].data[c],u=u&&("number"==typeof u?u:u.y);isNaN(u)&&
(u=0);p+=u}b.vmax=Math.max(b.vmax,p)}}return b},curve:function(a,b){var c=a.slice(0);"x"==b&&(c[c.length]=c[0]);return m.map(c,function(a,d){if(0==d)return"M"+a.x+","+a.y;if(isNaN(b)){if("X"==b||"x"==b||"S"==b){var h,g=c[d-1],n=c[d],m,x,B,A=1/6;1==d?(h="x"==b?c[c.length-2]:g,A=1/3):h=c[d-2];d==c.length-1?(m="x"==b?c[1]:n,A=1/3):m=c[d+1];x=Math.sqrt((n.x-g.x)*(n.x-g.x)+(n.y-g.y)*(n.y-g.y));B=Math.sqrt((n.x-h.x)*(n.x-h.x)+(n.y-h.y)*(n.y-h.y));var C=Math.sqrt((m.x-g.x)*(m.x-g.x)+(m.y-g.y)*(m.y-g.y)),
z=B*A,A=C*A;z>x/2&&A>x/2?(z=x/2,A=x/2):z>x/2?(z=x/2,A=x/2*C/B):A>x/2&&(A=x/2,z=x/2*B/C);"S"==b&&(h==g&&(z=0),n==m&&(A=0));x=g.x+z*(n.x-h.x)/B;h=g.y+z*(n.y-h.y)/B;B=n.x-A*(m.x-g.x)/C;g=n.y-A*(m.y-g.y)/C}}else return n=a.x-c[d-1].x,"C"+(a.x-(b-1)*(n/b))+","+c[d-1].y+" "+(a.x-n/b)+","+a.y+" "+a.x+","+a.y;return"C"+(x+","+h+" "+B+","+g+" "+n.x+","+n.y)}).join(" ")},getLabel:function(a,b,d){return c.doIfLoaded("dojo/number",function(c){return(b?c.format(a,{places:d}):c.format(a))||""},function(){return b?
a.toFixed(d):a.toString()})}})})},"dojox/charting/scaler/common":function(){define(["dojo/_base/lang"],function(g){var m=function(a,b){return Math.abs(a-b)<=1E-6*(Math.abs(a)+Math.abs(b))},a=g.getObject("dojox.charting.scaler.common",!0),b={};return g.mixin(a,{doIfLoaded:function(a,c,h){if(void 0===b[a])try{b[a]=require(a)}catch(g){b[a]=null}return b[a]?c(b[a]):h()},getNumericLabel:function(b,c,h){var g="";a.doIfLoaded("dojo/number",function(a){g=(h.fixed?a.format(b,{places:0>c?-c:0}):a.format(b))||
""},function(){g=h.fixed?b.toFixed(0>c?-c:0):b.toString()});if(h.labelFunc){var f=h.labelFunc(g,b,c);if(f)return f}if(h.labels){for(var f=h.labels,e=0,p=f.length;e<p;){var s=Math.floor((e+p)/2);f[s].value<b?e=s+1:p=s}if(e<f.length&&m(f[e].value,b))return f[e].text;--e;if(0<=e&&e<f.length&&m(f[e].value,b))return f[e].text;e+=2;if(e<f.length&&m(f[e].value,b))return f[e].text}return g}})})},"dojox/charting/plot2d/_PlotEvents":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare",
"dojo/_base/connect"],function(g,m,a,b){return a("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=[];this._eventSeries={}},destroy:function(){this.resetEvents();this.inherited(arguments)},plotEvent:function(a){},raiseEvent:function(a){this.plotEvent(a);var b=g.delegate(a);b.originalEvent=a.type;b.originalPlot=a.plot;b.type="onindirect";m.forEach(this.chart.stack,function(a){a!==this&&a.plotEvent&&(b.plot=a,a.plotEvent(b))},this)},connect:function(a,c){this.dirty=
!0;return b.connect(this,"plotEvent",a,c)},events:function(){return!!this.plotEvent.after},resetEvents:function(){this._shapeEvents.length&&(m.forEach(this._shapeEvents,function(a){a.shape.disconnect(a.handle)}),this._shapeEvents=[]);this.raiseEvent({type:"onplotreset",plot:this})},_connectSingleEvent:function(a,b){this._shapeEvents.push({shape:a.eventMask,handle:a.eventMask.connect(b,this,function(h){a.type=b;a.event=h;this.raiseEvent(a);a.event=null})})},_connectEvents:function(a){a&&(a.chart=this.chart,
a.plot=this,a.hAxis=this.hAxis||null,a.vAxis=this.vAxis||null,a.eventMask=a.eventMask||a.shape,this._connectSingleEvent(a,"onmouseover"),this._connectSingleEvent(a,"onmouseout"),this._connectSingleEvent(a,"onclick"))},_reconnectEvents:function(a){(a=this._eventSeries[a])&&m.forEach(a,this._connectEvents,this)},fireEvent:function(a,b,h,g){if((a=this._eventSeries[a])&&a.length&&h<a.length)h=a[h],h.type=b,h.event=g||null,this.raiseEvent(h),h.event=null}})})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p){var s=a.utils={};m.mixin(s,{forEach:function(b,c,e){e=e||g.global;c.call(e,b);(b instanceof a.Surface||b instanceof a.Group)&&d.forEach(b.children,function(a){s.forEach(a,c,e)})},serialize:function(b){var c={},e;if((e=b instanceof a.Surface)||b instanceof a.Group){if(c.children=d.map(b.children,s.serialize),e)return c.children}else c.shape=b.getShape();if(b.getTransform&&(e=b.getTransform()))c.transform=e;if(b.getStroke&&(e=b.getStroke()))c.stroke=e;if(b.getFill&&(e=
b.getFill()))c.fill=e;if(b.getFont&&(e=b.getFont()))c.font=e;return c},toJson:function(a,b){return h.toJson(s.serialize(a),b)},deserialize:function(a,b){if(b instanceof Array)return d.map(b,m.hitch(null,s.deserialize,a));var c="shape"in b?a.createShape(b.shape):a.createGroup();"transform"in b&&c.setTransform(b.transform);"stroke"in b&&c.setStroke(b.stroke);"fill"in b&&c.setFill(b.fill);"font"in b&&c.setFont(b.font);"children"in b&&d.forEach(b.children,m.hitch(null,s.deserialize,c));return c},fromJson:function(a,
b){return s.deserialize(a,h.fromJson(b))},toSvg:function(d){var e=new n;if("svg"===a.renderer)try{var f=s._cleanSvg(s._innerXML(d.rawNode));e.callback(f)}catch(h){e.errback(h)}else{s._initSvgSerializerDeferred||s._initSvgSerializer();var g=s.toJson(d),f=function(){try{var a=d.getDimensions(),f=a.width,h=a.height,n=s._gfxSvgProxy.document.createElement("div");s._gfxSvgProxy.document.body.appendChild(n);c.withDoc(s._gfxSvgProxy.document,function(){b.style(n,"width",f);b.style(n,"height",h)},this);s._gfxSvgProxy[dojox._scopeName].gfx.createSurface(n,
f,h).whenLoaded(null,function(a){try{s._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(a,g);var b=s._cleanSvg(n.innerHTML);a.clear();a.destroy();s._gfxSvgProxy.document.body.removeChild(n);e.callback(b)}catch(c){e.errback(c)}})}catch(p){e.errback(p)}};0<s._initSvgSerializerDeferred.fired?f():s._initSvgSerializerDeferred.addCallback(f)}return e},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){s._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!s._initSvgSerializerDeferred){s._initSvgSerializerDeferred=
new n;var a=c.doc.createElement("iframe");b.style(a,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var d;f("ie")?a.onreadystatechange=function(){"complete"==a.contentWindow.document.readyState&&(a.onreadystatechange=function(){},d=setInterval(function(){a.contentWindow[g.scopeMap.dojo[1]._scopeName]&&(a.contentWindow[g.scopeMap.dojox[1]._scopeName].gfx&&a.contentWindow[g.scopeMap.dojox[1]._scopeName].gfx.utils)&&(clearInterval(d),a.contentWindow.parent[g.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=
a.contentWindow,a.contentWindow.parent[g.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:a.onload=function(){a.onload=function(){};d=setInterval(function(){a.contentWindow[g.scopeMap.dojo[1]._scopeName]&&(a.contentWindow[g.scopeMap.dojox[1]._scopeName].gfx&&a.contentWindow[g.scopeMap.dojox[1]._scopeName].gfx.utils)&&(clearInterval(d),a.contentWindow.parent[g.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=a.contentWindow,a.contentWindow.parent[g.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50)};var h=p.dojoxGfxSvgProxyFrameUrl||e.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");a.setAttribute("src",h.toString());c.body().appendChild(a)}},_innerXML:function(a){return a.innerXML?a.innerXML:a.xml?a.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(a):null},_cleanSvg:function(a){a&&(-1==a.indexOf('xmlns\x3d"http://www.w3.org/2000/svg"')&&(a=a.substring(4,a.length),a='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"'+a),-1==a.indexOf('xmlns:xlink\x3d"http://www.w3.org/1999/xlink"')&&
(a=a.substring(4,a.length),a='\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink"'+a),-1===a.indexOf("xlink:href")&&(a=a.replace(/href\s*=/g,"xlink:href\x3d")),a=a.replace(/<img\b([^>]*)>/gi,"\x3cimage $1 /\x3e"),a=a.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),a=a.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),a=a.replace(/[=]([^"']+?)(\s|>)/g,'\x3d"$1"$2'),a=a.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return a}});return s})},"esriPBI/defaults":function(){define(["dojo/_base/lang",
"esri/styles/heatmap","esri/styles/size","esri/styles/choropleth","esri/styles/type"],function(g,m,a,b,d){m={basemap:"gray",renderers:{opacityParam:1,heapMapParam:{blurRadius:10,theme:"default",scheme:m.getSchemes({theme:"default",basemap:"gray"}).primaryScheme},clusteringParam:{radius:50,foregroundColor:[255,255,255,1],backgroundColor:[255,0,0,0.75]},colorParam:{classificationMethod:"quantile",numClasses:5,theme:"high-to-low",scheme:b.getSchemes({theme:"high-to-low",basemap:"gray",geometryType:"esriGeometryPoint"}).primaryScheme},
sizeParam:{classificationMethod:"quantile",numClasses:5,minSize:8,maxSize:28,theme:"default",scheme:g.mixin(a.getSchemes({theme:"default",basemap:"gray",geometryType:"esriGeometryPoint"}).primaryScheme,{minSize:8,maxSize:28})},uniqueColorParam:{theme:"default",numTypes:-1,scheme:d.getSchemes({theme:"default",basemap:"gray",geometryType:"esriGeometryPoint"}).primaryScheme},simpleParam:{point:{angle:0,color:[0,184,170,153],outline:{color:[255,255,255,255],style:"esriSLSSolid",type:"esriSLS",width:1},
size:10,style:"esriSMSCircle",type:"esriSMS",xoffset:0,yoffset:0},pointMS:{angle:0,color:[0,184,170,153],outline:{color:[1,121,107,255],style:"esriSLSSolid",type:"esriSLS",width:1},size:10,style:"esriSMSCircle",type:"esriSMS",xoffset:0,yoffset:0},polygon:{color:[0,184,170,153],outline:{color:[255,255,255,255],style:"esriSLSSolid",type:"esriSLS",width:1},style:"esriSFSSolid",type:"esriSFS"}}}};return{origin:m,heatmap:g.clone(m),simple:g.clone(m),clustering:g.clone(m),size:g.clone(m),color:g.clone(m),
unique:g.clone(m),sizecolor:g.clone(m),sizeunique:g.clone(m)}})},"esriPBI/widgets/SymbolStyle/utils/rendererUtils":function(){define("dojo/_base/lang dojo/_base/array esriPBI/defaults esriPBI/utils/clusterUtils esriPBI/utils/smartMappingUtils esriPBI/widgets/SymbolStyle/utils/colorUtils esri/renderers/HeatmapRenderer esri/renderers/SimpleRenderer esri/renderers/ClassBreaksRenderer esri/renderers/UniqueValueRenderer".split(" "),function(g,m,a,b,d,c,h,n,f,e){function p(a){if(b.get(a))return w.CLUSTERING;
if(a.renderer instanceof h)return w.HEATMAP;if(a.renderer instanceof n)return w.SIMPLE;if(a.renderer instanceof f)return a.renderer.sizeInfo?a.renderer.colorInfo?w.SIZECOLOR:w.SIZE:w.COLOR;if(a.renderer instanceof e)return a.renderer.sizeInfo?w.SIZEUNIQUE:w.UNIQUE}function s(a){a=m.map(a.renderer.colorStops.slice(3),function(a){return a.color});return{colors:a,scheme:g.mixin(g.clone(d.getHeatmapColorSchemes().primaryScheme),{colors:a})}}function u(a){var b=m.map(a.renderer.infos.slice(0,12),function(a){return a.symbol.color});
return{colors:b,scheme:g.mixin(g.clone(d.getTypedColorSchemes(a.geometryType).primaryScheme),{colors:b})}}function t(b,c){var d=b.renderer.defaultSymbol;d.getFill();var e=d.getStroke(),f=e.color;"esriGeometryPoint"===b.geometryType?g.mixin(a[c].renderers.simpleParam.point,{size:d.size,outline:{color:[f.r,f.g,f.b,255*f.a],style:"esriSLSSolid",type:"esriSLS",width:e.width}}):"esriGeometryPolygon"===b.geometryType&&g.mixin(a[c].renderers.simpleParam.polygon,{outline:{color:[f.r,f.g,f.b,255*f.a],style:"esriSLSSolid",
type:"esriSLS",width:e.width}})}var w={SIMPLE:"simple",HEATMAP:"heatmap",SIZE:"size",COLOR:"color",UNIQUE:"unique",SIZECOLOR:"sizecolor",SIZEUNIQUE:"sizeunique",CLUSTERING:"clustering"};return{rendererType:w,getCurrentRendererType:p,getCurrentHeatmapScheme:s,getCurrentUniqueScheme:u,getCurrentColorScheme:function(a,b){var c=a.renderer.colorInfo;m.map(c.stops,function(a){return a.color});var d=m.filter(b,function(a){return a.scheme.id===c.scheme.id},this)[0];if(d)return{colors:d.scheme.colors,scheme:d.scheme}},
setMemorization:function(b,c){var d=p(b);g.mixin(a[d].renderers,{opacityParam:b.opacity});c&&g.mixin(a.clustering.renderers.clusteringParam,{radius:c.radius,foregroundColor:c.foreground,backgroundColor:c.background});if(d===w.SIMPLE){var e=b.renderer.getSymbol(),f=e.getFill(),h=e.getStroke(),n=h.color;"esriGeometryPoint"===b.geometryType?g.mixin(a[d].renderers.simpleParam.pointMS,{color:[f.r,f.g,f.b,255*f.a],outline:{color:[n.r,n.g,n.b,255*n.a],style:"esriSLSSolid",type:"esriSLS",width:h.width},size:e.size}):
"esriGeometryPolygon"===b.geometryType&&g.mixin(a[d].renderers.simpleParam.polygon,{color:[f.r,f.g,f.b,255*f.a],outline:{color:[n.r,n.g,n.b,255*n.a],style:"esriSLSSolid",type:"esriSLS",width:h.width}})}else d===w.HEATMAP?g.mixin(a.heatmap.renderers.heapMapParam,{blurRadius:b.renderer.blurRadius,scheme:s(b)}):d===w.SIZE?(g.mixin(a.size.renderers.sizeParam,b.renderer.sizeInfo),f=b.renderer.defaultSymbol,e=f.getFill(),f=f.getStroke(),h=f.color,g.mixin(a[d].renderers.simpleParam.pointMS,{color:[e.r,e.g,
e.b,255*e.a],outline:{color:[h.r,h.g,h.b,255*h.a],style:"esriSLSSolid",type:"esriSLS",width:f.width}})):d===w.COLOR?(g.mixin(a.color.renderers.colorParam,b.renderer.colorInfo),t(b,d)):d===w.SIZECOLOR?(g.mixin(a.sizecolor.renderers.sizeParam,b.renderer.sizeInfo),g.mixin(a.sizecolor.renderers.colorParam,b.renderer.colorInfo)):d===w.UNIQUE?(g.mixin(a.unique.renderers.uniqueColorParam,{scheme:u(b).scheme}),t(b,d)):d===w.SIZEUNIQUE&&(g.mixin(a.sizeunique.renderers.uniqueColorParam,{scheme:u(b).scheme}),
g.mixin(a.sizeunique.renderers.sizeParam,b.renderer.sizeInfo))}}})},"esriPBI/widgets/SymbolStyle/utils/colorUtils":function(){define(["dojo/_base/array","esri/Color"],function(g,m){function a(a){return g.map(a,function(a){return(new m(a)).toHex()}).join(".")}return{compareColorStops:function(b,d){return a(b)===a(d)}}})},"esri/layers/ServiceGeneratedFeatureCollection":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style dojo/has ../kernel ../SpatialReference ../geometry/Extent ../geometry/webMercatorUtils ../renderers/SimpleRenderer ./layer ./FeatureLayer ../dijit/PopupTemplate".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w){return g([u],{declaredClass:"esri.layers._ServiceGeneratedFeatureCollection",constructor:function(b,c){this.pointSymbol=c&&c.pointSymbol;this.polylineSymbol=c&&c.polylineSymbol;this.polygonSymbol=c&&c.polygonSymbol;this._outSR=c&&(c.outSpatialReference||c.outSR)||new f({wkid:4326});this._options=a.mixin({},c)},parse:function(){},getFeatureLayers:function(){var a=[];this._fLayers&&(a=a.concat(this._fLayers));return a},onRefresh:function(){},onOpacityChange:function(){},
refresh:function(){this.loaded&&(this._map&&!this._io&&this.visible)&&this._createLayer()},_createLayer:function(b){var c=this;this._fireUpdateStart();b=this.parse(b);b.addCallback(function(a){c._io=null;c._initLayer(a)});b.addErrback(function(b){c._io=null;b=a.mixin(Error(),b);b.message="Unable to load resource: "+c.url+" "+(b.message||"");c._fireUpdateEnd(b);c.onError(b)})},_initLayer:function(c){this.loaded&&this._removeInternalLayers();this.name=c.name;this.description=c.description;this.snippet=
c.snippet;this.defaultVisibility=void 0!==c.visibility?this.visible=!!c.visibility:this.visible=!0;this.featureInfos=c.featureInfos;this.fullExtent=this.initialExtent=new e(c.lookAtExtent);this.copyright=c.author||c.copyright;var d;if((c=a.getObject("featureCollection.layers",!1,c))&&0<c.length)this._fLayers=[],b.forEach(c,function(b,c){var e=a.getObject("featureSet.features",!1,b);e&&0<e.length&&(d=a.mixin({outFields:["*"],infoTemplate:b.popupInfo?new w(b.popupInfo):null,editable:!1},this._options),
d.id&&(d.id=d.id+"_"+c),b.layerDefinition.capabilities="Query,Data",e=new t(b,d),e.geometryType&&(this["_"+e.geometryType]=e),this._fLayers.push(e))},this),0===this._fLayers.length&&delete this._fLayers;this.items=[];this._esriGeometryPoint&&(this.items=this.items.concat(this._esriGeometryPoint.graphics),this.pointSymbol&&(c=new s(this.pointSymbol),this._esriGeometryPoint.setRenderer(c)));this._esriGeometryPolyline&&(this.items=this.items.concat(this._esriGeometryPolyline.graphics),this.polylineSymbol&&
(c=new s(this.polylineSymbol),this._esriGeometryPolyline.setRenderer(c)));this._esriGeometryPolygon&&(this.items=this.items.concat(this._esriGeometryPolygon.graphics),this.polygonSymbol&&(c=new s(this.polygonSymbol),this._esriGeometryPolygon.setRenderer(c)));this._fireUpdateEnd();this.loaded&&(this._addInternalLayers(),this.onRefresh())},_addInternalLayers:function(){var a=this._map;this._fireUpdateStart();var c=a.spatialReference,d=this._outSR,e;if(c.wkid)e=c._isWebMercator()&&d._isWebMercator()||
c.wkid===d.wkid;else if(c.wkt)e=c.wkt===d.wkt;else return;if(!e)if(c._isWebMercator()&&4326===d.wkid)this._converter=p.geographicToWebMercator;else if(d._isWebMercator()&&4326===c.wkid)this._converter=p.webMercatorToGeographic;else return;(c=this._fLayers)&&0<c.length&&b.forEach(c,function(b){if(this._converter){var c=b.graphics,d,e,f=c?c.length:0;for(d=0;d<f;d++)(e=c[d].geometry)&&c[d].setGeometry(this._converter(e))}a.addLayer(b)},this);this.setVisibility(this.visible);this._fireUpdateEnd()},_removeInternalLayers:function(){var a=
this._map;a&&b.forEach(this.getFeatureLayers(),a.removeLayer,a)},setScaleRange:function(a,c){this.inherited(arguments);b.forEach(this.getFeatureLayers(),function(b){b.setScaleRange(a,c)});this._options.minScale=this.minScale;this._options.maxScale=this.maxScale},setOpacity:function(a){this.opacity!=a&&(b.forEach(this.getFeatureLayers(),function(b){b.setOpacity(a)}),this.opacity=this._options.opacity=a,this.onOpacityChange(a))},onVisibilityChange:function(a){this._fireUpdateStart();b.forEach(this.getFeatureLayers(),
function(b){b.setVisibility(a)});this._fireUpdateEnd()},_setMap:function(a,b){this.inherited(arguments);this._map=a;var e=this._div=d.create("div",null,b);c.set(e,"position","absolute");this._addInternalLayers();this.evaluateSuspension();return e},_unsetMap:function(a,b){this._io&&this._io.cancel();m.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var c=this._div;c&&(b.removeChild(c),d.destroy(c));this._div=null;this.inherited(arguments)}})})},"esriPBI/utils/ProjectionHelper":function(){define("dojo/_base/declare dojo/_base/array dojo/Deferred dojo/i18n!./nls/utils esri/config esri/geometry/normalizeUtils esri/geometry/webMercatorUtils esri/geometry/Polygon esri/geometry/jsonUtils esri/tasks/GeometryService esri/tasks/ProjectParameters esri/SpatialReference".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s){return g(null,{constructor:function(a){this._geometryServiceUrl=a;if(!a&&!d.defaults.geometryService)throw b.parameterGeometryServiceUrlMissing;this._geometryService=a?new e(a):d.defaults.geometryService},toGeographic:function(b,c){var d=new a;this.project([b],b.spatialReference,new s(4326)).then(function(a){d.resolve(a[0])},function(a){d.reject(a)});return d.promise},projectGeometries:function(b,c,d,e){if(c===d||c&&c.equals&&c.equals(d))return(new a).resolve(b);
var h=new a,g=m.map(b,function(a){if(a)return e||(e=f.getJsonType(a)),a.toJson();if("esriGeometryPoint"===e)return{spatialReference:c,x:void 0,y:void 0}});require(["esri/arcgis/csv"],function(a){a._projectGeometries(g,e,c,d,function(a){h.resolve(m.map(a,function(a){if(a){if((a=f.fromJson(a))&&"point"===a.type&&(isNaN(a.x)||isNaN(a.y)))a=null;if(a&&"polygon"===a.type&&(!a.rings||0===a.rings.length))a=null;if(a&&"polyline"===a.type&&(!a.paths||0===a.paths.length))a=null;return a}return null}))},function(a,
b){h.reject()})});return h.promise},projectFeatureCollection:function(b,c){var d=new a,e;c&&m.some(b.featureSet.features,function(a){if(a&&a.geometry&&a.geometry.spatialReference&&a.geometry.spatialReference.wkid!==c.wkid)return e=new s(a.geometry.spatialReference),!0})?require(["esri/arcgis/csv"],function(a){m.forEach(b.featureSet.features,function(a){a&&!a.geometry&&(a.geometry=null)});a._projectFeatureSet(b,e,c,function(a){d.resolve(a)})}):d.resolve(b);return d.promise},project:function(c,d,e){if(c&&
d&&e){var f=new a;d.wkid===e.wkid?f.resolve(c):d.isWebMercator()&&4326===e.wkid?f.resolve(m.map(c,function(a){return a&&h.webMercatorToGeographic(a)})):4326===d.wkid&&e.isWebMercator()?f.resolve(m.map(c,function(a){if(a=a&&h.geographicToWebMercator(a))a.spatialReference=new s(e.wkid);return a})):(d=new p,d.geometries=c,d.outSR=e,this._geometryService.project(d).then(function(a){a&&0<a.length?f.resolve(a):f.reject({message:b.projectionFailed,result:a})},function(a){f.reject({message:b.projectionFailed,
error:a})}));return f.promise}throw b.undefinedGeometry;},getNormalizedGeographicExtent:function(b){var c=new a,d=this;this.getNormalizedExtent(b).then(function(a){d.toGeographic(a).then(function(a){c.resolve(a)},function(a){c.reject(a)})});return c.promise},getNormalizedExtent:function(b){var d=new a;b&&b.spatialReference&&b.spatialReference._isWrappable()?c.normalizeCentralMeridian([b],this._geometryService,function(a){if(a[0].rings){var c=(new n(b.spatialReference)).addRing(a[0].rings[0]).getExtent();
a=(new n(b.spatialReference)).addRing(a[0].rings[1]).getExtent();d.resolve(c.getWidth()>a.getWidth()?c:a)}else d.resolve(a[0])}):d.resolve(b);return d.promise}})})},"esriPBI/serialize/LayerUtils":function(){define("dojo/_base/array dojo/_base/lang ../utils/layerUtils ../utils/clusterUtils ../utils/heatmapUtils ./WebMapLayers ./EMFLayers".split(" "),function(g,m,a,b,d,c,h){function n(a){var b=[];g.forEach(a,function(a){a.index?1===a.index?b.unshift(a):b[a.index-1]?b.splice(a.index-1,0,a):b.push(a):
b.push(a)});return 0<b.length?b:a}function f(a,b){g.forEach(a,function(a){g.forEach(b,function(b){a.id===b.id&&(a.esriMaps=b.esriMaps,b.remove=!0)})});var c=g.filter(b,function(a){return!0!==a.remove});return a.concat(c)}return{toWebMapLayer:function(e,f){if(f&&!0===f.saveExtensions){var g=h.toWebMapExtensionLayer(e,m.mixin({saveEsriMaps:!0},f));if(!g&&e.id){var g=b.get(e),n=d.get(e),g={id:e.id,esriMaps:g?m.mixin(a.getPropertiesJson(e),{clusterInfo:{background:g.backgroundColor,foreground:g.foregroundColor,
radius:g.radius}}):a.getPropertiesJson(e)};n&&(g.esriMaps=m.mixin(g.esriMaps,{heatmapInfo:{radius:n.radius,colors:n.colors}}))}return g}return f&&!1===f.saveExtensions?c.toWebmapLayer(e,f):h.toWebMapExtensionLayer(e,m.mixin({saveEsriMaps:!0},f))||c.toWebmapLayer(e,f)},combineLayers:function(a,b){return n(f(a,b))}}})},"esriPBI/utils/heatmapUtils":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Stateful dojo/Evented dojo/aspect dojo/has dojo/when dojo/dom-construct esri/Color esri/lang esri/geometry/screenUtils ./ProjectionHelper".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u){function t(a,b){for(var c=Array(a),d=0;d<a;d++)for(var e=c[d]=Array(b),f=0;f<b;f++)e[f]=0;return c}function w(a,b,c,d,e){for(var f=[],h=0;h<a.graphics.length;h++){var g=a.graphics[h].geometry;p.isDefined(g)&&f.push(g)}h=f&&f[0]&&f[0].spatialReference;g=b.spatialReference;if(h&&h.wkid!==g.wkid){var m=new u;return n(m.projectGeometries(f,h,g,a.geometryType),function(a){return v(a,b,c,d,e)})}return v(f,b,c,d,e)}function v(a,b,c,d,e){b=b.extent;var f=b.getWidth()/c,
h=b.xmin-e*f,g=b.ymin-e*f,n=b.xmax+e*f;e=b.ymax+e*f;for(var f=[],p=0;p<a.length;p++){var m=a[p],k=m&&m.x,u=m&&m.y;null!==k&&(null!==u&&!isNaN(k)&&!isNaN(u)&&u>=g&&u<=e&&k>=h&&k<=n)&&(m=s.toScreenGeometry(b,c,d,m),f.push({x:m.x,y:m.y}))}return f}function x(a,b){var c=A(1,b).getContext("2d"),d=c.createLinearGradient(0,0,0,b),e={},f=function(a){var b=Object.keys(a).sort()[0];a[b][3]=0;return a};if(a instanceof Array)for(var h=0,g=a.length-1;h<=g;h++)e[h/g]=a[h];else{B(c,d,f(a),b);h=0;for(g=Object.keys(a).length-
1;h<=g;h++){var n=c.getImageData(0,h/g*b,1,1).data;e[h/g]=[n[0],n[1],n[2],n[3]/255]}}B(c,d,f(e),b);c=c.getImageData(0,0,1,b).data;return(J=!!c.buffer)?new Uint32Array(c.buffer):c}function B(a,b,c,d){for(var f in c)c.hasOwnProperty(f)&&b.addColorStop(f,new e(c[f]));a.fillStyle=b;a.fillRect(0,0,1,d)}function A(a,b){H?(H.width=a,H.height=b):(H=f.create("canvas",{id:"__heatmap__",width:a+"px",height:b+"px",style:"position: absolute; left: -10000px; top: 0px;"},null),document.body.appendChild(H));return H}
function C(a,b,c,d,e){var f=a.getMap(),h=a._div&&"function"===typeof a._div.createImage?a._div:null,g=Math.round(b/4.5);if(f&&h){var p=f.width,m=f.height,q=x(c,d);return n(w(a,f,p,m,b),function(a){a=e||z(a,p,m,b,g);var c=F(f,p,m,a,h,q);return{image:{remove:function(){h.remove(c);c=null}},intensities:a}})}}function z(a,b,c,d,e){for(var f=2*d+1,h=e*e,g=Array(f),n=t(b,c),p=t(b,c),m=0;m<f;m++)g[m]=Math.exp(-Math.pow(m-d,2)/(2*h))/Math.sqrt(2*Math.PI)*e;for(m=0;m<a.length;m++){e=a[m];for(var h=e.x-d,k=
0;k<f;k++)0<=h&&(h<b&&0<=e.y&&e.y<c)&&(p[h][e.y]+=g[k]),h++}for(m=0;m<b;m+=I?2:1){a=n[m];e=p[m];for(h=0;h<c;h+=I?2:1)for(var k=h-d,s=0;s<f;s++){if(0<=k&&k<c&&e[k]){var u=e[k]*g[s];a[h]+=u;I&&n[m+1]&&(a[h+1]=n[m+1][h]=n[m+1][h+1]+=u)}k++}}return n}function F(a,b,c,d,e,f){a=a.__visibleRect;var h=A(b,c),g=h.getContext("2d"),n=g.createImageData(b,c),m,q;J&&(m=new ArrayBuffer(4*b*c),q=new Uint8ClampedArray(m),m=new Uint32Array(m));for(var k=0;k<b;k++)for(var s=d[k],u=0;u<c;u++){var t=Math.floor(s[u]),
v=4*t,w=u*b+k;if(J)m[w]=0===t?0:f[t]||f[f.length-1];else for(var x=0;4>x;x++)n.data[4*w+x]=0===t?0:p.isDefined(f[v+x])?f[v+x]:f[f.length-(4-x)]}J&&n.data.set(q);g.putImageData(n,0,0);return e.createImage({x:-a.x,y:-a.y,width:b,height:c,src:h.toDataURL()})}var H,J,I=h("ie"),K=g(b,{radius:70,colors:[[255,255,255,0],[253,248,58,0.6],[255,97,33,0.6],[253,35,27,0.6],[218,37,58,0.6],[182,37,88,0.6],[92,40,170,0.6],[2,42,248,0.6]],layer:null,_radiusSetter:function(a){this.radius=a;this.layer.redraw()},_colorsSetter:function(a){this.colors=
a;this._timeout||(this._intensities=this._tmpIntensities);this.layer.redraw()},postscript:function(){this.inherited(arguments);var a=this;this._drawHandle=c.around(this.layer,"_draw",function(){return function(b){if(a.layer&&(a.layer.getMap()&&a.layer.visible)&&(a._zoomHandle||(a._zoomHandle=a.layer.getMap().on("zoom",m.hitch(a,a._clear))),b&&a.layer._removeShape(b),b=a.layer._mode&&0<a.layer._mode._pending,!a._timeout||b))clearTimeout(a._timeout),a._timeout=setTimeout(function(){a._timeout=null;
a._draw()},b?500:0)}});this.layer.redraw();this._updateRenderer()},_clear:function(){this._image&&(this._image.remove(),this._image=null)},_draw:function(){this._clear();n(C(this.layer,this.radius,this.colors,512,this._intensities),m.hitch(this,function(a){this._image=a.image;this._tmpIntensities=a.intensities;this._intensities=null}))},destroy:function(){clearTimeout(this._timeout);this._drawHandle.remove();this._zoomHandle.remove();this._clear();this._updateRenderer()},_updateRenderer:function(){var a=
this.layer,b=this;clearTimeout(this._updateRendererTimeout);this._updateRendererTimeout=setTimeout(function(){b._updateRendererTimeout=null;a&&a.setRenderer(a.renderer)},0)}});return(new g(d,{get:function(a){return a&&a.__heatmap},create:function(a,b){var c=8>=h("ie");if(a&&!a.__heatmap&&!c)return a.__heatmap=new K(m.mixin({layer:a},b)),this.emit("heatmap-enabled",{layer:a}),a.__heatmap},remove:function(a){a&&a.__heatmap&&(a.__heatmap.destroy(),delete a.__heatmap,a.redraw(),this.emit("heatmap-disabled",
{layer:a}))}}))()})},"esriPBI/serialize/WebMapLayers":function(){define("dojo/_base/array dojo/_base/lang dojo/when esri/layers/ArcGISDynamicMapServiceLayer esri/layers/ArcGISTiledMapServiceLayer esri/layers/FeatureLayer esri/layers/GeoRSSLayer esri/layers/KMLLayer esri/layers/layer esri/layers/OpenStreetMapLayer esri/virtualearth/VETiledLayer esri/layers/WebTiledLayer esri/layers/WMSLayer esri/layers/VectorTileLayer ../utils/layerUtils esriPBI/layers/PowerBILayer ../utils/clusterUtils ../utils/heatmapUtils ../utils/Random ./LayerInfoHelper ./FeatureLayerEMFFunctions".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z){function F(a,b){var c=J(a,b);c.type="KML";c.copyright=a.copyright;c.visibleFolders=g.map(g.filter(a.folders,function(a){return a.visible}),function(a){return a.id});return c}function H(a,b){var c=J(a,b);c.type="WMS";c.layers=g.map(a.layerInfos,function(a){return{name:a.name,title:a.title,legendURL:a.legendURL}});c.visibleLayers=a.visibleLayers;c.extent=[[a.extent.xmin,a.extent.ymin],[a.extent.xmax,a.extent.ymax]];c.version=a.version;c.maxWidth=a.maxWidth;
c.maxHeight=a.maxHeight;c.mapUrl=a.getMapUrl;c.spatialReferences=a.spatialReferences;c.format=a.getImageFormat();return c}function J(a,b){var c={url:a.url||b.sharedLayerUrl,id:b&&b.newId?A.next():a.id,visibility:a.visible,opacity:a.opacity,title:a.name||a.title||a.arcgisProps&&a.arcgisProps.title||"",minScale:a.minScale,maxScale:a.maxScale,itemId:a.itemId,refreshInterval:a.refreshInterval,showLegend:a.showLegend};0<=a._index&&(c.index=a._index);if(b&&b.saving&&b.saveEsriMaps){c.esriMaps=w.getPropertiesJson(a);
var d=x.get(a),e=B.get(a);d&&(c.esriMaps=m.mixin(c.esriMaps,{clusterInfo:{background:d.backgroundColor,foreground:d.foregroundColor,radius:d.radius}}));e&&(c.esriMaps=m.mixin(c.esriMaps,{heatmapInfo:{radius:e.radius,colors:e.colors}}))}"reference"===a._basemapGalleryLayerType&&(c.isReference=!0);return c}return{toWebmapLayer:function(a,g){if(a.isInstanceOf(b)||a.isInstanceOf(d)){var m=new C(a),w=J(a,g);w.visibleLayers=m.getVisibleLayers();w.layers=m.getLayerInfos();w.infoTemplates=a.infoTemplates;
return w}return a.isInstanceOf(h)?(m=J(a,g),m.type="GeoRSS",m.copyright=a.copyright,m.pointSymbol=a.pointSymbol&&a.pointSymbol.toJson(),m.polygonSymbol=a.polygonSymbol&&a.polygonSymbol.toJson(),m.lineSymbol=a.polylineSymbol&&a.polylineSymbol.toJson(),m):a.isInstanceOf(n)?F(a,g):a.isInstanceOf(e)?(m=J(a,g),m.type="OpenStreetMap",m):a.isInstanceOf(p)?(m=J(a,g),m.type=a.mapStyle===p.MAP_STYLE_AERIAL?"BingMapsAerial":a.mapStyle===p.MAP_STYLE_ROAD?"BingMapsRoad":"BingMapsHybrid",delete m.url,m):a.isInstanceOf(s)?
(m=J(a,g),m.type="WebTiledLayer",m.templateUrl=a.urlTemplate,m.subDomains=a.subDomains,m.tileInfo=a.tileInfo,m):a.isInstanceOf(u)?H(a,g):a.isInstanceOf(t)?(m=J(a,g),m.type="VectorTileLayer",m.layerType="VectorTileLayer",m.styleUrl=a.url,m):a.isInstanceOf(c)&&!a.isInstanceOf(v)?this.featureLayerObj(a,g):a.isInstanceOf(f)&&!a.isInstanceOf(v)?J(a,g):null},featureLayerObj:function(b,d){if(b.mode!==c.MODE_SELECTION){var e=J(b,d);"AcetateLayer"===b.type&&(e.type="AcetateLayer",e.infoTemplate=b.infoTemplate,
e.id=e.id.replace("_0",""));var f;f=b.url||d.sharedLayerUrl?"CSV"===b.type?z.writeCSVLayer(b,d):z.writeServiceFeatureLayer(b,d):z.writeFeatureCollection(b,d);return a(f,function(a){return m.mixin(e,a)})}}}})},"esri/layers/GeoRSSLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../config ../request ../urlUtils ./ServiceGeneratedFeatureCollection".split(" "),function(g,m,a,b,d,c,h,n,f){return g([f],{declaredClass:"esri.layers.GeoRSSLayer",serviceUrl:n.getProtocolForWebResource()+
"//utility.arcgis.com/sharing/rss",constructor:function(a,b){c.defaults.geoRSSService&&(this.serviceUrl=c.defaults.geoRSSService);this._createLayer()},parse:function(){return this._io=h({url:this.serviceUrl,content:{url:this.url,refresh:this.loaded?!0:void 0,outSR:this._outSR?a.toJson(this._outSR.toJson()):void 0},callbackParamName:"callback"})},_initLayer:function(a){this.inherited(arguments);this.loaded||(this.loaded=!0,this.onLoad(this))}})})},"esri/layers/KMLLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/sniff dojo/io-query dojo/dom-construct dojo/dom-style ../kernel ../config ../lang ../request ../urlUtils ../SpatialReference ../geometry/webMercatorUtils ../dijit/PopupTemplate ./layer ./KMLFolder ./KMLGroundOverlay ./MapImageLayer ./FeatureLayer".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H){var J=m([A],{declaredClass:"esri.layers.KMLLayer",serviceUrl:w.getProtocolForWebResource()+"//utility.arcgis.com/sharing/kml",constructor:function(a,c){this._outSR=c&&c.outSR||new v({wkid:4326});this._options=b.mixin({},c);s.defaults.kmlService&&(this.serviceUrl=s.defaults.kmlService);var d=this.linkInfo=c&&c.linkInfo;d&&(this.visible=!!d.visibility,this._waitingForMap=!!d.viewFormat);(!d||d&&d.visibility&&!this._waitingForMap)&&this._parseKml();
this.refresh=b.hitch(this,this.refresh);this.registerConnectEvents("esri.layers.KMLLayer",!0)},getFeature:function(a){if(a){var c=a.type,e=a.id,f;switch(c){case "esriGeometryPoint":case "esriGeometryPolyline":case "esriGeometryPolygon":(a=this["_"+c])&&(f=b.getObject("_mode._featureMap."+e,!1,a));break;case "GroundOverlay":if(a=this._groundLyr){var h=a.getImages(),c=h.length;for(a=0;a<c;a++)if(h[a].id===e){f=h[a];break}}break;case "NetworkLink":d.some(this._links,function(a){return a.linkInfo&&a.linkInfo.id===
e?(f=a,!0):!1});break;case "Folder":c=(h=this.folders)?h.length:0;for(a=0;a<c;a++)if(h[a].id===e){f=h[a];break}}return f}},getLayers:function(){var a=[];this._groundLyr&&a.push(this._groundLyr);this._fLayers&&(a=a.concat(this._fLayers));this._links&&d.forEach(this._links,function(b){b.declaredClass&&a.push(b)});return a},setFolderVisibility:function(a,b){a&&(this._fireUpdateStart(),(a.visible=b)&&(b=this._areLocalAncestorsVisible(a)),this._setState(a,b),this._fireUpdateEnd())},onRefresh:function(){},
onOpacityChange:function(){},_parseKml:function(a){var d=this;this._fireUpdateStart();this._io=t({url:this.serviceUrl,content:{url:this._url.path+this._getQueryParameters(a),model:"simple",folders:"",refresh:this.loaded?!0:void 0,outSR:c.toJson(this._outSR.toJson())},callbackParamName:"callback",load:function(a){d._io=null;d._initLayer(a)},error:function(a){d._io=null;a=b.mixin(Error(),a);a.message="Unable to load KML: "+(a.message||"");d._fireUpdateEnd(a);d.onError(a)}})},_initLayer:function(a){var c;
this.loaded&&(c=[],d.forEach(this.folders,function(a){a.visible&&c.push(a.id)}),this._options.minScale=this.minScale,this._options.maxScale=this.maxScale,this._options.opacity=this.opacity,this._removeInternalLayers());this.name=a.name;this.description=a.description;this.snippet=a.snippet;this.visibility=a.visibility;this.featureInfos=a.featureInfos;var e,f,h=this.folders=a.folders,g=[],n;if(h){f=h.length;for(e=0;e<f;e++)n=h[e]=new C(h[e]),-1===n.parentFolderId&&g.push(n)}var h=this._links=a.networkLinks,
p;f=h?h.length:0;for(e=0;e<f;e++)h[e].viewRefreshMode&&-1!==h[e].viewRefreshMode.toLowerCase().indexOf("onregion")||(p=b.mixin({},this._options),p.linkInfo=h[e],p.id&&(p.id=p.id+"_"+e),h[e]=new J(h[e].href,p),h[e]._parentLayer=this,h[e]._parentFolderId=this._getLinkParentId(h[e].linkInfo.id));if((h=a.groundOverlays)&&0<h.length){p=b.mixin({},this._options);p.id&&(p.id+="_mapImage");n=this._groundLyr=new F(p);f=h.length;for(e=0;e<f;e++)n.addImage(new z(h[e]))}if((a=b.getObject("featureCollection.layers",
!1,a))&&0<a.length)this._fLayers=[],d.forEach(a,function(a,c){var d=b.getObject("featureSet.features",!1,a);d&&0<d.length&&(p=b.mixin({outFields:["*"],infoTemplate:a.popupInfo?new B(a.popupInfo):null,editable:!1},this._options),p.id&&(p.id=p.id+"_"+c),a.layerDefinition.capabilities="Query,Data",d=new H(a,p),d.geometryType&&(this["_"+d.geometryType]=d),this._fLayers.push(d))},this),0===this._fLayers.length&&delete this._fLayers;if(!this.loaded){f=g.length;for(e=0;e<f;e++)n=g[e],this._setState(n,n.visible)}this._fireUpdateEnd();
this.loaded?(this._addInternalLayers(),d.forEach(this.folders,function(a){-1<d.indexOf(c,a.id)?this.setFolderVisibility(a,!0):this.setFolderVisibility(a,!1)},this),this.onRefresh()):(this.loaded=!0,this.onLoad(this))},_addInternalLayers:function(){var a=this._map;this._fireUpdateStart();this._links&&d.forEach(this._links,function(b){b.declaredClass&&(a.addLayer(b),b._waitingForMap&&(b._waitingForMap=null,b.visible?b._parseKml(a):b._wMap=a))});var b=a.spatialReference,c=this._outSR,e;if(!b.equals(c))if(b.isWebMercator()&&
4326===c.wkid)e=x.geographicToWebMercator;else if(c.isWebMercator()&&4326===b.wkid)e=x.webMercatorToGeographic;else return;this._groundLyr&&(e&&d.forEach(this._groundLyr.getImages(),function(a){a.extent=e(a.extent)}),a.addLayer(this._groundLyr));(b=this._fLayers)&&0<b.length&&d.forEach(b,function(b){if(e){var c=b.graphics,d,f,h=c?c.length:0;for(d=0;d<h;d++)(f=c[d].geometry)&&c[d].setGeometry(e(f))}a.addLayer(b)});this.onVisibilityChange(this.visible)},_removeInternalLayers:function(){var a=this._map;
this._links&&d.forEach(this._links,function(a){a.declaredClass&&a._io&&a._io.cancel()});a&&d.forEach(this.getLayers(),a.removeLayer,a)},_setState:function(a,b){var c=a.featureInfos,d,e,f,h=c?c.length:0,g=b?"show":"hide";for(f=0;f<h;f++)if(d=c[f],e=this.getFeature(d))if("Folder"===d.type)this._setState(e,b&&e.visible);else if("NetworkLink"===d.type)this._setInternalVisibility(e,b);else e[g]()},_areLocalAncestorsVisible:function(a){var b=a.parentFolderId;for(a=a.visible;a&&-1!==b;)b=this.getFeature({type:"Folder",
id:b}),a=a&&b.visible,b=b.parentFolderId;return a},_setInternalVisibility:function(a,b){var c=a._parentLayer,d=a._parentFolderId;for(b=b&&a.visible;b&&c;)b=b&&c.visible,-1<d&&(b=b&&c._areLocalAncestorsVisible(c.getFeature({type:"Folder",id:d}))),d=c._parentFolderId,c=c._parentLayer;this._setIntState(a,b)},_setIntState:function(a,b){a&&d.forEach(a.getLayers(),function(c){c.linkInfo?a._setIntState(c,b&&c.visible&&a._areLocalAncestorsVisible(a.getFeature({type:"Folder",id:c._parentFolderId}))):c.setVisibility(b)})},
_getLinkParentId:function(a){var b=-1;this.folders&&d.some(this.folders,function(c){return c.networkLinkIds&&-1!==d.indexOf(c.networkLinkIds,a)?(b=c.id,!0):!1});return b},_checkAutoRefresh:function(){var b=this.linkInfo;if(b)if(this.visible){if(this.loaded&&this._map){var c=b.refreshMode,d=b.refreshInterval,e=b.viewRefreshMode,b=b.viewRefreshTime;c&&(-1!==c.toLowerCase().indexOf("oninterval")&&0<d)&&(this._stopAutoRefresh(),this._timeoutHandle=setTimeout(this.refresh,1E3*d));e&&(-1!==e.toLowerCase().indexOf("onstop")&&
0<b)&&!this._extChgHandle&&(this._extChgHandle=a.connect(this._map,"onExtentChange",this,this._extentChanged))}}else this._stopAutoRefresh(),a.disconnect(this._extChgHandle),delete this._extChgHandle},_stopAutoRefresh:function(){clearTimeout(this._timeoutHandle);this._timeoutHandle=null},_getQueryParameters:function(a){a=a||this._map;var c={},d=this.linkInfo,e=a&&a.extent,f;this._url.query&&(b.mixin(c,this._url.query),f=!!this._url.query.token);if(p.id&&!f&&(f=p.id.findCredential(this._url.path)))c.token=
f.token;if(d){f=d.viewFormat;var h=d.httpQuery,d=d.viewBoundScale;if(e&&f){var m=e,s=e,t=e.spatialReference;t&&(t.isWebMercator()?m=x.webMercatorToGeographic(e):4326===t.wkid&&(s=x.geographicToWebMercator(e)));e=m.getCenter();s=Math.max(s.getWidth(),s.getHeight());d&&(m=m.expand(d));f=f.replace(/\[bboxWest\]/ig,m.xmin).replace(/\[bboxEast\]/ig,m.xmax).replace(/\[bboxSouth\]/ig,m.ymin).replace(/\[bboxNorth\]/ig,m.ymax).replace(/\[lookatLon\]/ig,e.x).replace(/\[lookatLat\]/ig,e.y).replace(/\[lookatRange\]/ig,
s).replace(/\[lookatTilt\]/ig,0).replace(/\[lookatHeading\]/ig,0).replace(/\[lookatTerrainLon\]/ig,e.x).replace(/\[lookatTerrainLat\]/ig,e.y).replace(/\[lookatTerrainAlt\]/ig,0).replace(/\[cameraLon\]/ig,e.x).replace(/\[cameraLat\]/ig,e.y).replace(/\[cameraAlt\]/ig,s).replace(/\[horizFov\]/ig,60).replace(/\[vertFov\]/ig,60).replace(/\[horizPixels\]/ig,a.width).replace(/\[vertPixels\]/ig,a.height).replace(/\[terrainEnabled\]/ig,0);b.mixin(c,n.queryToObject(f))}h&&(h=h.replace(/\[clientVersion\]/ig,
p.version).replace(/\[kmlVersion\]/ig,2.2).replace(/\[clientName\]/ig,"ArcGIS API for JavaScript").replace(/\[language\]/ig,g.locale),b.mixin(c,n.queryToObject(h)))}a=[];for(var v in c)u.isDefined(c[v])&&a.push(v+"\x3d"+c[v]);return(a=a.join("\x26"))?"?"+a:""},setScaleRange:function(a,b){this.inherited(arguments);d.forEach(this.getLayers(),function(c){c.setScaleRange(a,b)})},setOpacity:function(a){this.opacity!=a&&(d.forEach(this.getLayers(),function(b){b.setOpacity(a)}),this.opacity=a,this.onOpacityChange(a))},
_setMap:function(a,b){this.inherited(arguments);this._map=a;var c=this._div=f.create("div",null,b);e.set(c,"position","absolute");this._addInternalLayers();this.evaluateSuspension();return c},_unsetMap:function(b,c){this._io&&this._io.cancel();this._stopAutoRefresh();a.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var d=this._div;d&&(c.removeChild(d),f.destroy(d));this._wMap=this._div=null;this.inherited(arguments)},onVisibilityChange:function(a){this.loaded?
(this._fireUpdateStart(),this._setInternalVisibility(this,a),this._checkAutoRefresh(),this._fireUpdateEnd()):this.linkInfo&&a&&(this._waitingForMap||this._parseKml(this._wMap))},refresh:function(){this.loaded&&(this._map&&!this._io&&this.visible)&&this._parseKml()},getFeatureCollection:function(a){var b,c=[];if(a=this.getFeature({type:"Folder",id:a}))(b=d.map(a.featureInfos,function(a){if("esriGeometryPoint"===a.type||"esriGeometryPolyline"===a.type||"esriGeometryPolygon"===a.type)return a.id},this))&&
0<b.length&&d.forEach(this._fLayers,function(a){var e,f;e=a.toJson();e.featureSet.features&&0<e.featureSet.features.length&&(f=d.filter(e.featureSet.features,function(c){if(-1!==d.indexOf(b,c.attributes[a.objectIdField]))return c},this));f&&0<f.length&&(e.featureSet.features=f,c.push(e))},this);return c},getFeatureCount:function(a){a=this.getFeature({type:"Folder",id:a});var b={points:0,polylines:0,polygons:0};a&&d.forEach(a.featureInfos,function(a){"esriGeometryPoint"===a.type&&(b.points+=1);"esriGeometryPolyline"===
a.type&&(b.polylines+=1);"esriGeometryPolygon"===a.type&&(b.polygons+=1)});return b},_extentChanged:function(){this._stopAutoRefresh();this._timeoutHandle=setTimeout(this.refresh,1E3*this.linkInfo.viewRefreshTime)}});return J})},"esri/layers/KMLFolder":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(g,m,a,b,d){return g(null,{declaredClass:"esri.layers.KMLFolder",constructor:function(a){m.mixin(this,a);d.isDefined(this.visibility)&&(this.visible=
!!this.visibility)}})})},"esri/layers/KMLGroundOverlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./MapImage".split(" "),function(g,m,a,b,d,c){return g([c],{declaredClass:"esri.layers.KMLGroundOverlay",constructor:function(a){d.isDefined(this.visibility)&&(this.visible=!!this.visibility)}})})},"esri/virtualearth/VETiledLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/_base/config dojo/has dojo/string dojo/_base/Deferred ../kernel ../urlUtils ../SpatialReference ../layers/TileInfo ../layers/TiledMapServiceLayer ../geometry/Extent ../request".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w){g=g(u,{declaredClass:"esri.virtualearth.VETiledLayer",constructor:function(a){try{if(a=m.mixin({bingMapsKey:null,culture:"en-US"},a||{}),this.url=e.getProtocolForWebResource()+"//dev.virtualearth.net/REST/v1",this._url=e.urlToObject(this.url),this.spatialReference=new p({wkid:102100}),this.tileInfo=new s({rows:256,cols:256,dpi:96,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:1,resolution:78271.5169639999,scale:2.95828763795777E8},
{level:2,resolution:39135.7584820001,scale:1.47914381897889E8},{level:3,resolution:19567.8792409999,scale:7.3957190948944E7},{level:4,resolution:9783.93962049996,scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,
scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:0.597164283559817,scale:2256.994353},{level:19,resolution:0.298582141647617,
scale:1128.497176},{level:20,resolution:0.1492910708238085,scale:564.248588}]}),this.initialExtent=this.fullExtent=new t(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,new p({wkid:102100})),m.mixin(this,a),this.hasAttributionData=this.showAttribution,this._initLayer=m.hitch(this,this._initLayer),this._errorHandler=m.hitch(this,this._errorHandler),this._getTileInfo=m.hitch(this,this._getTileInfo),this.bingMapsKey)this._getTileInfo();else throw Error("BingMapsKey must be provided.");
}catch(b){throw this.onError(b),b;}},_unsetMap:function(a,b){this.inherited("_unsetMap",arguments)},_getTileInfo:function(){if(this.mapStyle){var a=this._url.path+"/Imagery/Metadata/"+this.mapStyle;if(this.bingMapsKey){var b=this.resourceInfo;!this.loaded&&b?this._initLayer(b):w({url:a,content:m.mixin({},{key:this.bingMapsKey,ss:!0,c:this.culture,include:this.hasAttributionData?"imageryProviders":null}),callbackParamName:"jsonp",load:this._initLayer,error:this._errorHandler})}}},_initLayer:function(c,
d){if(200!==c.statusCode){var f=Error();f.code=c.statusCode;f.message=c.statusDescription;f.details=c.errorDetails;f.authenticationResultCode=c.authenticationResultCode;this.onError(f)}else try{this.resourceInfo=a.toJson(c);var f=c.resourceSets[0].resources[0],g=f.imageUrl.replace("{","${");this.tileServers=b.map(f.imageUrlSubdomains,function(a){var b=e.getProtocolForWebResource();return h.substitute(g,{subdomain:a}).replace("http:",b)});this._tsLength=this.tileServers.length;if(this.loaded)this.refresh(),
this.onMapStyleChange();else{this.copyright=this.copyright||"\x26copy; 2012 Microsoft Corporation and its data suppliers";this.loaded=!0;this.onLoad(this);var n=this.loadCallback;n&&(delete this.loadCallback,n(this))}}catch(p){this.onError(p)}},getAttributionData:function(){var b=new n,c=a.fromJson(this.resourceInfo),e;this.hasAttributionData&&c&&(e=m.getObject("resourceSets.0.resources.0.imageryProviders",!1,c));e?b.callback({contributors:e}):(c=Error("Layer does not have attribution data"),c.log=
d.isDebug,b.errback(c));return b},getTileUrl:function(a,b,c){return h.substitute(this.tileServers[b%this._tsLength].replace(/\{/g,"${"),{quadkey:this._getQuadKey(a,b,c),culture:this.culture,token:this.bingMapsKey})},_getQuadKey:function(a,b,c){var d="",e,f;for(f=a;0<f;f--)a="0",e=1<<f-1,0!=(c&e)&&a++,0!=(b&e)&&(a++,a++),d+=a;return d},setMapStyle:function(a){this.mapStyle=a;this._getTileInfo()},setCulture:function(a){this.culture=a;this._getTileInfo()},setBingMapsKey:function(a){this.bingMapsKey=
a},onMapStyleChange:function(){}});m.mixin(g,{MAP_STYLE_AERIAL:"aerial",MAP_STYLE_AERIAL_WITH_LABELS:"aerialWithLabels",MAP_STYLE_ROAD:"road"});return g})},"esri/layers/WebTiledLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/url dojo/sniff dojo/string ../config ../kernel ../request ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t){function w(a,b){var c=[],d,f;if(a&&b&&(b.customLayerParameters||
b.customParameters)){d=m.clone(b.customParameters||{});m.mixin(d,b.customLayerParameters||{});f=e.urlToObject(a);for(var h in f.query)d.hasOwnProperty(h)||c.push(h+"\x3d"+f.query[h]);a=f.path+(c.length?"?"+c.join("\x26"):"")}return a}return g(u,{declaredClass:"esri.layers.WebTiledLayer",constructor:function(g,n){n||(n={});this.urlTemplate=g=w(g,n.wmtsInfo);var u=new s(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,new p({wkid:102100})),A=new s(-2.0037508342787E7,-2.003750834278E7,
2.003750834278E7,2.0037508342787E7,new p({wkid:102100}));this.initialExtent=n.initialExtent||u;this.fullExtent=n.fullExtent||A;this.tileInfo=n.tileInfo?n.tileInfo:new t({dpi:96,rows:256,cols:256,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,resolution:156543.033928,scale:5.91657527591555E8},{level:1,resolution:78271.5169639999,scale:2.95828763795777E8},{level:2,resolution:39135.7584820001,scale:1.47914381897889E8},{level:3,resolution:19567.8792409999,
scale:7.3957190948944E7},{level:4,resolution:9783.93962049996,scale:3.6978595474472E7},{level:5,resolution:4891.96981024998,scale:1.8489297737236E7},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},
{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:0.597164283559817,scale:2256.994353},{level:19,resolution:0.298582141647617,scale:1128.497176},{level:20,resolution:0.14929107082380833,
scale:564.248588},{level:21,resolution:0.07464553541190416,scale:282.124294},{level:22,resolution:0.03732276770595208,scale:141.062147},{level:23,resolution:0.01866138385297604,scale:70.5310735}]});this.spatialReference=new p(this.tileInfo.spatialReference.toJson());this.copyright=n.copyright||"";var C=new b(g),u=C.scheme+"://"+C.authority+"/";this.urlPath=g.substring(u.length);this.tileServers=n.tileServers||[];-1===C.authority.indexOf("{subDomain}")&&this.tileServers.push(u);if(n.subDomains&&0<
n.subDomains.length&&1<C.authority.split(".").length){this.subDomains=n.subDomains;var z;a.forEach(n.subDomains,function(a){-1<C.authority.indexOf("${subDomain}")?z=C.scheme+"://"+c.substitute(C.authority,{subDomain:a})+"/":-1<C.authority.indexOf("{subDomain}")&&(z=C.scheme+"://"+C.authority.replace(/\{subDomain\}/gi,a)+"/");this.tileServers.push(z)},this)}this.tileServers=a.map(this.tileServers,function(a){"/"!==a.charAt(a.length-1)&&(a+="/");return a});this._levelToLevelValue=[];a.forEach(this.tileInfo.lods,
function(a){this._levelToLevelValue[a.level]=a.levelValue||a.level},this);this._wmtsInfo=n.wmtsInfo;var F=m.hitch(this,function(){this.loaded=!0;this.onLoad(this)});if(d("chrome")){var u=this.getTileUrl(0,0,0),A=h.defaults.io,H="with-credentials"===A.useCors?e.canUseXhr(u,!0):-1;(A=-1<H?A.corsEnabledServers[H]:null)&&A.withCredentials?f({url:u,handleAs:"arraybuffer"}).addBoth(function(a){F()}):F()}else F()},getTileUrl:function(a,b,d){a=this._levelToLevelValue[a];var f=this.tileServers[b%this.tileServers.length]+
c.substitute(this.urlPath,{level:a,col:d,row:b}),f=f.replace(/\{level\}/gi,a).replace(/\{row\}/gi,b).replace(/\{col\}/gi,d),f=this._appendCustomLayerParameters(f),f=this.addTimestampToURL(f);return e.addProxy(f)},_appendCustomLayerParameters:function(a){var b,c;if(this._wmtsInfo&&(this._wmtsInfo.customLayerParameters||this._wmtsInfo.customParameters))for(b in c=m.clone(this._wmtsInfo.customParameters||{}),m.mixin(c,this._wmtsInfo.customLayerParameters||{}),c)a+=(-1===a.indexOf("?")?"?":"\x26")+b+
"\x3d"+encodeURIComponent(c[b]);return a}})})},"esri/layers/WMSLayer":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/sniff ../config ../graphic ../kernel ../request ../urlUtils ../dijit/PopupTemplate ../SpatialReference ../geometry/Extent ../geometry/Point ./DynamicMapServiceLayer ./WMSLayerInfo dojo/query".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x){return a([v],{declaredClass:"esri.layers.WMSLayer",_CRS_TO_EPSG:{84:4326,83:4269,27:4267},
_REVERSED_LAT_LONG_RANGES:[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,
22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],_WEB_MERCATOR:[102100,3857,102113,900913],_WORLD_MERCATOR:[3395,54004],allExtents:[],version:null,constructor:function(a,c){var d=p.urlToObject(a);if(d.query&&(d.query.version||d.query.Version||d.query.VERSION))this.version=d.query.version||d.query.Version||d.query.VERSION;this.url=a=this._stripParameters(a,"version service request bbox format height width layers srs crs styles transparent bgcolor exceptions time elevation sld wfs".split(" "));
this._url=p.urlToObject(a);this._getCapabilitiesURL=a;this._initLayer=b.hitch(this,this._initLayer);this._parseCapabilities=b.hitch(this,this._parseCapabilities);this._getCapabilitiesError=b.hitch(this,this._getCapabilitiesError);c?(this.customParameters=c.customParameters,this.customLayerParameters=c.customLayerParameters,this.imageFormat=this._getImageFormat(c.format),this.imageTransparency=!1!==c.transparent,this.visibleLayers=c.visibleLayers?c.visibleLayers:[],this.version=c.version||this.version,
c.resourceInfo?this._readResourceInfo(c.resourceInfo):this._getCapabilities()):(this.imageFormat="image/png",this.imageTransparency=!0,this.visibleLayers=[],this._getCapabilities());this._blankImageURL=g.toUrl("../images/pixel.png");this.extentProcessor=this._createExtentProcessor(0);this._createChildLayer()},setVisibleLayers:function(a){this.visibleLayers=(a=this._checkVisibleLayersList(a))?a:[];this.refresh(!0)},setImageFormat:function(a){this.imageFormat=this._getImageFormat(a);this.refresh(!0)},
setImageTransparency:function(a){this.imageTransparency=a;this.refresh(!0)},setCustomParameters:function(a,b){this.customParameters=a;this.customLayerParameters=b;this.refresh(!0)},refresh:function(){this.inherited(arguments);this._childLayer&&this._childLayer.refresh.apply(this._childLayer,arguments)},getImageUrl:function(a,b,c,d){if(!this.visibleLayers||0===this.visibleLayers.length)d(this._blankImageURL);else{a=this._getImageParams(a,b,c);a=this._mixinCustomLayerParameters(a);b=this.getMapURL;
var e;b+=-1===b.indexOf("?")?"?":"";for(e in a)a.hasOwnProperty(e)&&(b+="?"===b.substring(b.length-1,b.length)?"":"\x26",b+=e+"\x3d"+a[e]);d(p.addProxy(b))}},_setMap:function(a,b,c){var d=this.inherited(arguments);a.wrapAround180?this._childLayer&&(this.suspended&&this._childLayer.suspend(),this._childLayer._setMap(a,d)):this._childLayer=this.extentProcessor=null;return d},_unsetMap:function(a,b){this._childLayer&&this._childLayer._unsetMap(a,this._div);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);
this._childLayer&&this._childLayer.suspend()},onResume:function(){this.inherited(arguments);this._childLayer&&this._childLayer.resume()},_createChildLayer:function(){this._childLayer=new v(null,{extentProcessor:this._createExtentProcessor(1)});this._childLayer._isChildLayer=!0;this._childLayer.getImageUrl=b.hitch(this,this.getImageUrl);this._childLayer.loaded=!0},_createExtentProcessor:function(a){return b.hitch(this,this._extentProcessor,a)},_extentProcessor:function(a,b){var c=b.extent,d=b.width,
e=0;if(c){var f=c.getWidth()/d,h=c.bisect(),c=h.extents,g=c[a];g&&(d=h.marginLeft/f,e=0===a?d:d+c[0].getWidth()/f,d=Math.ceil(g.getWidth()/f),e=Math.ceil(e));c=g}return{extent:c,width:d,marginLeft:e}},_getImageParams:function(a,b,c){var e=a.spatialReference.wkid;-1===d.indexOf(this.spatialReferences,e)&&a.spatialReference.latestWkid&&(e=a.spatialReference.latestWkid);if(d.some(this._WEB_MERCATOR,function(a){return a==e})){var f=d.filter(this.spatialReferences,function(a){return d.some(this._WEB_MERCATOR,
function(b){return b==a})},this);0===f.length&&(f=d.filter(this.spatialReferences,function(a){return d.some(this._WORLD_MERCATOR,function(b){return b==a})},this));e=0<f.length?f[0]:this._WEB_MERCATOR[0]}this.spatialReferences=d.filter(this.spatialReferences,function(a){return a!==e});this.spatialReferences.unshift(e);var f=a.xmin,h=a.xmax,g=a.ymin;a=a.ymax;var n={SERVICE:"WMS",REQUEST:"GetMap"};n.FORMAT=this.imageFormat;n.TRANSPARENT=this.imageTransparency?"TRUE":"FALSE";n.STYLES="";n.VERSION=this.version;
n.LAYERS=this.visibleLayers?this.visibleLayers.toString():null;n.WIDTH=b;n.HEIGHT=c;this.maxWidth<b&&(n.WIDTH=this.maxWidth);this.maxHeight<c&&(n.HEIGHT=this.maxHeight);b=e?e:NaN;isNaN(b)||("1.3.0"==this.version?n.CRS="EPSG:"+b:n.SRS="EPSG:"+b);"1.3.0"==this.version&&this._useLatLong(b)?n.BBOX=g+","+f+","+a+","+h:n.BBOX=f+","+g+","+h+","+a;return n},_initLayer:function(a,d){this.spatialReference=new u(this.extent.spatialReference);this.initialExtent=new t(this.extent);this.fullExtent=new t(this.extent);
this.visibleLayers=this._checkVisibleLayersList(this.visibleLayers);var f=b.hitch(this,function(){this.loaded=!0;this.onLoad(this);var a=this._loadCallback;a&&(delete this._loadCallback,a(this))});if(c("chrome")){var g=h.defaults.io,n="with-credentials"===g.useCors?p.canUseXhr(this.getMapURL,!0):-1;(g=-1<n?g.corsEnabledServers[n]:null)&&g.withCredentials?e({url:this.getMapURL,handleAs:"text",content:{SERVICE:"WMS",REQUEST:"GetMap"}}).addBoth(function(){f()}):f()}else f()},_readResourceInfo:function(a){a.extent?
a.layerInfos?(this.extent=a.extent,this.allExtents[0]=a.extent,this.layerInfos=a.layerInfos,this.description=a.description?a.description:"",this.copyright=a.copyright?a.copyright:"",this.title=a.title?a.title:"",this.getMapURL=a.getMapURL?a.getMapURL:this._getCapabilitiesURL,this.getFeatureInfoURL=a.getFeatureInfoURL,this.featureInfoFormat=a.featureInfoFormat,this.version=a.version?a.version:"1.3.0",this.maxWidth=a.maxWidth?a.maxWidth:5E3,this.maxHeight=a.maxHeight?a.maxHeight:5E3,this.spatialReferences=
a.spatialReferences?a.spatialReferences:[],this.imageFormat=this._getImageFormat(a.format),this.setScaleRange(a.minScale,a.maxScale),this.customLayerParameters=a.customLayerParameters||this.customLayerParameters,this.customParameters=a.customParameters||this.customParameters,this._initLayer()):this._errorHandler(Error("esri.layers.WMSLayer: unable to find the 'layerInfos' property in resourceInfo")):this._errorHandler(Error("esri.layers.WMSLayer: Unable to find the 'extent' property in resourceInfo."))},
_getCapabilities:function(){var a=this._url.query?this._url.query:{};a.SERVICE="WMS";a.REQUEST="GetCapabilities";this.version&&(a.VERSION=this.version);var a=this._mixinCustomParameters(a),b=this._url.path+"?",c;for(c in a)a.hasOwnProperty(c)&&(b+="?"==b.substring(b.length-1,b.length)?"":"\x26",b+=c+"\x3d"+a[c]);e({url:b,handleAs:"xml",headers:{"Content-Type":null},load:this._parseCapabilities,error:this._getCapabilitiesError},{usePost:!1})},_parseCapabilities:function(a){if(a){var b=this;this.version=
this._getAttributeValue("WMS_Capabilities","version",a,null);this.version||(this.version=this._getAttributeValue("WMT_MS_Capabilities","version",a,"1.3.0"));var c=this._getTag("Service",a);this.title=this._getTagValue("Title",c,"");this.title||(this.title=this._getTagValue("Name",c,""));this.copyright=this._getTagValue("AccessConstraints",c,"");this.description=this._getTagValue("Abstract",c,"");this.maxWidth=parseInt(this._getTagValue("MaxWidth",c,5E3),10);this.maxHeight=parseInt(this._getTagValue("MaxHeight",
c,5E3),10);if(c=this._getTag("Layer",a)){var e=this._getLayerInfo(c),f=0,h=null,c=this._getTag("Capability",a);d.forEach(c.childNodes,function(a){"Layer"==a.nodeName&&(0===f?h=a:(1===f&&e.name&&(e.name="",e.subLayers=[],e.subLayers.push(this._getLayerInfo(h))),e.subLayers.push(this._getLayerInfo(a))),f++)},this);if(e){this.layerInfos=e.subLayers;if(!this.layerInfos||0===this.layerInfos.length)this.layerInfos=[e];this.extent=e.extent;this.extent||(e.extent=new t(this.layerInfos[0].extent.toJson()),
this.extent=e.extent);this.allExtents=e.allExtents;if(!this.allExtents||!this.allExtents.length)e.allExtents=[],d.forEach(this.layerInfos[0].allExtents,function(a,b){a&&(e.allExtents[b]=new t(a.toJson()))}),this.allExtents=e.allExtents;this.spatialReferences=e.spatialReferences;if(!this.spatialReferences.length&&0<this.layerInfos.length)for(var g=function(a){var b;for(b=0;b<a.subLayers.length;b++){var c=a.subLayers[b],d=c.spatialReferences;!d.length&&(c.subLayers&&0<c.subLayers.length)&&(d=g(c));
if(d.length)return d}return[]},c=0;c<this.layerInfos.length;c++){var n=this.layerInfos[c];this.spatialReferences=this.layerInfos[0].spatialReferences;!this.spatialReferences.length&&(n.subLayers&&0<n.subLayers.length)&&(this.spatialReferences=g(n));if(this.spatialReferences.length)break}}c=function(c){if((c=m.query("DCPType",b._getTag(c,a)))&&0<c.length)if((c=m.query("HTTP",c[0]))&&0<c.length)if((c=m.query("Get",c[0]))&&0<c.length)if(c=b._getAttributeValue("OnlineResource","xlink:href",c[0],null))return c.indexOf("\x26")===
c.length-1&&(c=c.substring(0,c.length-1)),b._stripParameters(c,["service","request"]);return null};n=function(c){var e=[];0===m.query("Operation",a).length?d.forEach(m.query("Format",b._getTag(c,a)),function(a){e.push(a.text?a.text:a.textContent)}):d.forEach(m.query("Operation",a),function(a){a.getAttribute("name")===c&&d.forEach(m.query("Format",a),function(a){e.push(a.text?a.text:a.textContent)})});return e};this.getMapURL=c("GetMap")||this._getCapabilitiesURL;this.getMapFormats=n("GetMap");d.some(this.getMapFormats,
function(a){return-1<a.indexOf(this.imageFormat)},this)||(this.imageFormat=this.getMapFormats[0]);if(this.getFeatureInfoURL=c("GetFeatureInfo"))this.getFeatureInfoFormats=n("GetFeatureInfo"),-1<d.indexOf(this.getFeatureInfoFormats,"text/html")?this.featureInfoFormat="text/html":-1<d.indexOf(this.getFeatureInfoFormats,"text/plain")&&(this.featureInfoFormat="text/plain");if(!this.featureInfoFormat){var p=function(a){if(a&&(a.queryable=!1,a.subLayers))for(var b=0;b<a.subLayers.length;b++)p(a.subLayers[b])};
p(e)}this._initLayer()}else this._errorHandler(Error("esri.layers.WMSLayer: Response does not contain any layers."))}else this._errorHandler(Error("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (Response is null.)"))},_getCapabilitiesError:function(a){a&&a.message&&(a.message="GetCapabilities request for "+this._getCapabilitiesURL+" failed. ("+a.message+")");this._errorHandler(a)},_getLayerInfo:function(a){if(!a)return null;var b=new x;b.name="";b.title="";b.description="";b.allExtents=
[];b.spatialReferences=[];b.queryable="1"===a.getAttribute("queryable");b.subLayers=[];var c=this._getTag("LatLonBoundingBox",a);c&&(b.allExtents[0]=this._getExtent(c,4326));var e=this._getTag("EX_GeographicBoundingBox",a),f;e&&(f=new t(0,0,0,0,new u({wkid:4326})),f.xmin=parseFloat(this._getTagValue("westBoundLongitude",e,0)),f.ymin=parseFloat(this._getTagValue("southBoundLatitude",e,0)),f.xmax=parseFloat(this._getTagValue("eastBoundLongitude",e,0)),f.ymax=parseFloat(this._getTagValue("northBoundLatitude",
e,0)),b.allExtents[0]=f);!c&&!e&&(f=new t(-180,-90,180,90,new u({wkid:4326})),b.allExtents[0]=f);b.extent=b.allExtents[0];var h=-1<d.indexOf(["1.0.0","1.1.0","1.1.1"],this.version)?"SRS":"CRS";d.forEach(a.childNodes,function(a){if("Name"==a.nodeName)b.name=(a.text?a.text:a.textContent)||"";else if("Title"==a.nodeName)b.title=(a.text?a.text:a.textContent)||"";else if("Abstract"==a.nodeName)b.description=(a.text?a.text:a.textContent)||"";else if("BoundingBox"==a.nodeName){var c=a.getAttribute(h);c&&
0===c.indexOf("EPSG:")?(c=parseInt(c.substring(5),10),0!==c&&!isNaN(c)&&(a="1.3.0"==this.version?this._getExtent(a,c,this._useLatLong(c)):this._getExtent(a,c),b.allExtents[c]=a,b.extent||(b.extent=a))):c&&0===c.indexOf("CRS:")?(c=parseInt(c.substring(4),10),0!==c&&!isNaN(c)&&(this._CRS_TO_EPSG[c]&&(c=this._CRS_TO_EPSG[c]),b.allExtents[c]=this._getExtent(a,c))):(c=parseInt(c,10),0!==c&&!isNaN(c)&&(b.allExtents[c]=this._getExtent(a,c)))}else if(a.nodeName==h)a=(a.text?a.text:a.textContent).split(" "),
d.forEach(a,function(a){a=-1<a.indexOf(":")?parseInt(a.split(":")[1],10):parseInt(a,10);0!==a&&!isNaN(a)&&(this._CRS_TO_EPSG[a]&&(a=this._CRS_TO_EPSG[a]),-1==d.indexOf(b.spatialReferences,a)&&b.spatialReferences.push(a))},this);else if("Style"==a.nodeName&&!b.legendURL){if(a=this._getTag("LegendURL",a))if(a=this._getTag("OnlineResource",a))b.legendURL=a.getAttribute("xlink:href")}else"Layer"===a.nodeName&&b.subLayers.push(this._getLayerInfo(a))},this);b.title=b.title||b.name;return b},_getImageFormat:function(a){switch(a?
a.toLowerCase():""){case "jpg":return"image/jpeg";case "bmp":return"image/bmp";case "gif":return"image/gif";case "svg":return"image/svg+xml";default:return"image/png"}},getImageFormat:function(){switch(this.imageFormat?this.imageFormat.toLowerCase():""){case "image/jpeg":return"jpg";case "image/bmp":return"bmp";case "image/gif":return"gif";case "image/svg+xml":return"svg";default:return"png"}},_getExtent:function(a,b,c){var d;if(a){d=new t;var e=parseFloat(a.getAttribute("minx")),f=parseFloat(a.getAttribute("miny")),
h=parseFloat(a.getAttribute("maxx"));a=parseFloat(a.getAttribute("maxy"));c?(d.xmin=isNaN(f)?-1*Number.MAX_VALUE:f,d.ymin=isNaN(e)?-1*Number.MAX_VALUE:e,d.xmax=isNaN(a)?Number.MAX_VALUE:a,d.ymax=isNaN(h)?Number.MAX_VALUE:h):(d.xmin=isNaN(e)?-1*Number.MAX_VALUE:e,d.ymin=isNaN(f)?-1*Number.MAX_VALUE:f,d.xmax=isNaN(h)?Number.MAX_VALUE:h,d.ymax=isNaN(a)?Number.MAX_VALUE:a);d.spatialReference=new u({wkid:b})}return d},_useLatLong:function(a){var b,c;for(c=0;c<this._REVERSED_LAT_LONG_RANGES.length;c++){var d=
this._REVERSED_LAT_LONG_RANGES[c];if(a>=d[0]&&a<=d[1]){b=!0;break}}return b},_getTag:function(a,b){var c=m.query(a,b);return c&&0<c.length?c[0]:null},_getTagValue:function(a,b,c){return(a=m.query(a,b))&&0<a.length?a[0].text?a[0].text:a[0].textContent:c},_getAttributeValue:function(a,b,c,d){return(a=m.query(a,c))&&0<a.length?a[0].getAttribute(b):d},_checkVisibleLayersList:function(a){if(a&&(0<a.length&&this.layerInfos&&0<this.layerInfos.length)&&"number"==typeof a[0]){var b=[];d.forEach(a,function(a){a<
this.layerInfos.length&&b.push(this.layerInfos[a].name)},this);a=b}return a},_stripParameters:function(a,b){var c=p.urlToObject(a),e,f=[];for(e in c.query)c.query.hasOwnProperty(e)&&-1===d.indexOf(b,e.toLowerCase())&&f.push(e+"\x3d"+c.query[e]);return c.path+(f.length?"?"+f.join("\x26"):"")},_getPopupGraphic:function(a,b){var c=this.visibleLayers;if(!c||0===c.length)return null;var e=this._popupGraphic;e||(e=new s({title:this.title||"",description:'\x3cdiv style\x3d"position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;"\x3e\x3ciframe src\x3d"{QUERY_URL}" width\x3d"250" height\x3d"147" frameborder\x3d"0" marginwidth\x3d"0" marginheight\x3d"0" style\x3d"position:absolute;top:0;left:0;width:100%;height:100%;border:0;background:url(\''+
g.toUrl("../dijit/images/loading-throb.gif")+"') transparent center no-repeat;\" onload\x3d\"(event.target || event.srcElement).style.background \x3d 'none';\"\x3e\x3c/iframe\x3e\x3c/div\x3e"}),e=this._popupGraphic=new n(null,null,{},e),e._layer=this);var f=function(a){var b=[];if(a&&(a.queryable&&(a.showPopup&&a.name)&&b.push(a.name),a.subLayers))for(var c=0;c<a.subLayers.length;c++){var d=f(a.subLayers[c]);d.length&&(b=b.concat(d))}return b},h=f({subLayers:this.layerInfos}),h=d.filter(h,function(a){return-1<
d.indexOf(c,a)});if(h.length){var p=this.getFeatureInfoURL,m=this._getImageParams(a.extent,a.width,a.height),m=this._mixinCustomLayerParameters(m);m.REQUEST="GetFeatureInfo";m.INFO_FORMAT=this.featureInfoFormat;m.QUERY_LAYERS=h.join();m.FEATURE_COUNT=25;"1.3.0"===this.version?(m.I=Math.round(b.x),m.J=Math.round(b.y)):(m.X=Math.round(b.x),m.Y=Math.round(b.y));var p=p+(-1===p.indexOf("?")?"?":""),u;for(u in m)m.hasOwnProperty(u)&&(p+="?"===p.substring(p.length-1,p.length)?"":"\x26",p+=u+"\x3d"+m[u]);
e.attributes.QUERY_URL=p;return e}return null},_mixinCustomParameters:function(a){if(this.customParameters)for(var b in this.customParameters)a[b]=encodeURIComponent(this.customParameters[b]);return a},_mixinCustomLayerParameters:function(a){if(this.customLayerParameters||this.customParameters){var c=b.clone(this.customParameters||{});b.mixin(c,this.customLayerParameters||{});for(var d in c)"styles"===d.toLowerCase()&&delete a.STYLES,a[d]=encodeURIComponent(c[d])}return a}})})},"esri/layers/WMSLayerInfo":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","dojo/has","../kernel"],function(g,m,a,b,d){return g(null,{declaredClass:"esri.layers.WMSLayerInfo",name:null,title:null,description:null,extent:null,legendURL:null,subLayers:[],allExtents:[],spatialReferences:[],queryable:!1,showPopup:!1,constructor:function(a){a&&(this.name=a.name,this.title=a.title,this.description=a.description,this.extent=a.extent,this.legendURL=a.legendURL,this.subLayers=a.subLayers?a.subLayers:[],this.allExtents=a.allExtents?a.allExtents:
[],this.spatialReferences=a.spatialReferences?a.spatialReferences:[],this.queryable=!!a.queryable,this.showPopup=!!a.showPopup)},clone:function(){var b={name:this.name,title:this.title,description:this.description,legendURL:this.legendURL},d;this.extent&&(b.extent=this.extent.getExtent());b.subLayers=[];a.forEach(this.subLayers,function(a){b.subLayers.push(a.clone())});b.allExtents=[];for(d in this.allExtents)d=parseInt(d,10),isNaN(d)||(b.allExtents[d]=this.allExtents[d].getExtent());b.spatialReferences=
[];a.forEach(this.spatialReferences,function(a){b.spatialReferences.push(a)});b.queryable=this.queryable;b.showPopup=this.showPopup;return b}})})},"esriPBI/serialize/LayerInfoHelper":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","esri/layers/FeatureLayer"],function(g,m,a,b){return g(null,{constructor:function(a){this._map=(this._layer=a)&&a._map},getLayerInfos:function(){var d=[];this._map&&this._layer.layerInfos&&a.forEach(this._layer.layerInfos,function(a){var h=this._map.getLayer(this._layer.id+
"_"+a.id),g=this._getDynamicLayerInfo(a.id)||a.toJson();delete g.source;g.layerDefinition=this.getLayerDefinition(a.id);g.popupInfo=h&&h.mode===b.MODE_SELECTION&&h.infoTemplate&&h.infoTemplate.info;d.push(g)},this);if(0<d.length)return d},getVisibleLayers:function(){if(this._layer&&this._layer.visibleLayers){var b=this._layer.visibleLayers,c,h,g;do{c=b.length;for(h=0;h<c;h++)(g=this.getLayerInfo(b[h]))&&(-1!==g.parentLayerId&&-1===a.indexOf(b,g.parentLayerId))&&b.push(g.parentLayerId)}while(b.length!==
c);return b.sort()}},getLayerInfo:function(a){for(var b,h=0;h<this._layer.layerInfos.length;h++)if((b=this._layer.layerInfos[h].id)&&b.id===a)return b},getLayerDefinition:function(a){var b=this._getDefinitionExpression(a),h=this._getDynamicLayerInfo(a);a=this._getDrawingInfo(a);h=h&&h.source;if(b||h||a)return{definitionExpression:b,source:h,drawingInfo:a}},_getDefinitionExpression:function(a){return this._layer.layerDefinitions&&this._layer.layerDefinitions[a]},_getDynamicLayerInfo:function(a){var b,
h=0;if(this._layer.dynamicLayerInfos)for(;h<this._layer.dynamicLayerInfos.length;h++)if((b=this._layer.dynamicLayerInfos[h])&&b.id===a)return b.toJson()},_getDrawingInfo:function(a){return(a=this._layer.layerDrawingOptions&&this._layer.layerDrawingOptions[a])&&a.toJson()}})})},"esriPBI/serialize/FeatureLayerEMFFunctions":function(){define("dojo/_base/array dojo/_base/lang dojo/when dojo/promise/all dojo/Deferred esri/request esri/config ../utils/Random ../utils/midHelper ../utils/jsonHelper ../utils/fieldUtils ../utils/layerUtils ../utils/logger!".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u){function t(a,b){if(b)for(var c=0;c<b.length;c++){var d=b[c];if(d.name===a&&(d=p.getProperty(d,"sanitizedFieldName")))return d}return a}function w(a,b){function c(b){"string"===typeof b&&(b=b.replace(/\{(.*?)\}/g,function(b,c){return"{"+t(c,a.fields)+"}"}));return b}var d=a.infoTemplate&&a.infoTemplate.info&&m.clone(a.infoTemplate.info);d&&b&&(g.forEach(d.fieldInfos,function(b){b.fieldName=t(b.fieldName,a.fields)}),d.title=c(d.title),d.description=c(d.description));
return d}function v(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}return{toBase64:function(a){var b=new d,e=this;c({url:a.url+".txt",handleAs:"text"}).then(function(c){a.imageData=c;a.contentType="image";a.url=n.next();b.resolve()}).otherwise(function(){var c=h.defaults.io.getProxyUrl?h.defaults.io.getProxyUrl(a.url):a.url;if(v()){var d=document.createElement("canvas"),f=d.getContext("2d"),g=new Image;g.onload=function(){var c;d.height=g.height;d.width=g.width;
f.drawImage(g,0,0);try{c=d.toDataURL()}catch(h){d=null;e.toBase64FallBack(a).then(b.resolve).otherwise(b.reject);return}var p=c.indexOf(";base64,")+8;c=c.substr(p);a.imageData=c;a.url=n.next();d=null;b.resolve()};g.onerror=function(){d=null;e.toBase64FallBack(a).then(b.resolve).otherwise(b.reject)};g.src=c}else e.toBase64FallBack(a).then(b.resolve).otherwise(b.reject)});return b.promise},toBase64FallBack:function(a){return c({url:require.toUrl("esriMapsX")+"/symbols/Standard/OrangeStickpin.png.txt",
handleAs:"text"}).then(function(b){a.imageData=b;a.contentType="image";a.url=n.next();return b})},prepareRendererJson:function(a,c){var d=a.renderer.toJson(),h=c&&c.saving,n=this;c&&c.useSanitizedFieldNames&&g.forEach(["field","field1","field2","field3"],function(b){d[b]&&(d[b]=t(d[b],a.fields))});var p=[];e.find(d,function(a){return"esriPMS"===a.type},function(a){var b;a.url&&(b=f.urlToMid(a.url));b&&(h?a.url=b:p.push(n.toBase64(a).otherwise(function(b){u.error("Couldn't obtain image data for '"+
a.url+"'.")})))});return 0<p.length?b(p).then(function(){return d}):d},writeServiceFeatureLayer:function(b,c){return a(this.prepareRendererJson(b,c),function(a){return{mode:b.mode,popupInfo:w(b,c&&c.useSanitizedFieldNames),layerDefinition:{definitionExpression:b.getDefinitionExpression(),drawingInfo:{renderer:a},minScale:b.minScale,maxScale:b.maxScale}}})},writeFeatureCollection:function(b,c){return a(this.writeLayer(b,c),function(a){a.layerDefinition.type="AcetateLayer"===b.type?b.type:"Feature Layer";
s.getProperty(b,"isTimeEnabled")&&b.timeInfo&&(a.layerDefinition.timeInfo=b.timeInfo);a.featureSet={geometryType:b.geometryType,features:c&&c.emptyFeatureSet?[]:g.map(g.filter(b.graphics,function(a){return a.geometry}),function(a){return a.toJson()}),nextObjectId:b._nextId};return{featureCollection:{layers:[a]}}})},writeCSVLayer:function(b,c){return a(this.writeLayer(b,c),function(a){a.columnDelimeter=",";a.type="CSV";return a})},writeLayer:function(b,c){var d=c&&c.useSanitizedFieldNames;return a(this.prepareRendererJson(b,
c),function(a){return{popupInfo:w(b,d),locationInfo:b.locationInfo,layerDefinition:{name:b.name,displayField:d?t(b.displayField,b.fields):b.displayField,visibilityField:d?t(b.visibilityField,b.fields):b.visibilityField,geometryType:b.geometryType,drawingInfo:{renderer:a},hasAttachments:b.hasAttachments,objectIdField:d?t(b.objectIdField,b.fields):b.objectIdField,typeIdField:d?t(b.typeIdField,b.fields):b.typeIdField,minScale:b.minScale,maxScale:b.maxScale,fields:g.map(b.fields,function(a){var e={alias:a.alias,
domain:a.domain&&a.domain.toJson(),editable:a.editable,length:a.length,name:d?t(a.name,b.fields):a.name,nullable:a.nullable,type:a.type};c&&c.saving&&(e.customFormat=a.customFormat);return e}),types:g.map(b.types,function(a){return a.toJson()}),templates:g.map(b.templates,function(a){return a.toJson()}),capabilities:b.capabilities}}})},getSanitizedFieldName:t}})},"esriPBI/utils/midHelper":function(){define(["dojo/_base/lang"],function(g){return{isMid:function(m){if(g.isString(m))for(var a in require.packs)if(0===
m.lastIndexOf(a+"/",0))return!0;return!1},midToUrl:function(g){return require.toUrl(g)},urlToMid:function(g){for(var a in require.packs){var b=require.toUrl(a);if(0===g.lastIndexOf(b+"/",0))return a+g.substr(b.length)}}}})},"esriPBI/serialize/EMFLayers":function(){define("require dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when ../utils/MapUtils ./WebMapLayers ../utils/portal esriPBI/layers/PowerBILayer".split(" "),function(g,m,a,b,d,c,h,n,f){return{toWebMapExtensionLayer:function(b,d){if(b.isInstanceOf(f)){b._index=
m.indexOf(c.getLayers(b._map),b);var g;if(d.bisLayerAsFeatureCollection||d.saving){if(g=h.featureLayerObj(b,a.mixin({emptyFeatureSet:!d.bisLayerAsFeatureCollection&&d.saving},d)),d.saving){var n=g.featureCollection.layers[0];a.mixin(n.layerDefinition,b.toExtWebMap());n.layerDefinition.type="PowerBILayer";g.refreshInterval=b.refreshInterval;g.type="PowerBILayer"}}else g=void 0;return g}return null}}})},"esriPBI/utils/mapUtility":function(){define(["dojo/_base/array","./_Properties"],function(g,m){function a(a){return a.__emfProperties||
(a.__emfProperties=new m)}return{getProperty:function(b,d){return a(b).get(d)},setProperty:function(b,d,c){return a(b).set(d,c)},getProperties:a,_initializeProperties:function(a,d){a.__emfProperties||(a.__emfProperties=new m(d))},getMaxAllowableOffset:function(a,d){return a.extent.getWidth()/a.width*d},getAllLayers:function(a,d,c){var h=g.map(a.layerIds.concat(a.graphicsLayerIds),function(c){return a.getLayer(c)});return d||c?g.filter(h,function(a){return d&&a._selOnly||c&&a._basemapGalleryLayerType?
!1:!0}):h},getSmartMappingBasemapType:function(a){a=a.getLayer(a.layerIds[0]);if(!a.url)return"esri.layers.OpenStreetMapLayer"===a.declaredClass?"osm":"topo";a=a.url.toLowerCase();if(-1<a.indexOf("arcgis/rest/services/world_street_map"))return"streets";if(-1<a.indexOf("arcgis/rest/services/canvas/world_light_gray_base"))return"gray";if(!(-1<a.indexOf("arcgis/rest/services/world_topo_map")||-1<a.indexOf("arcgis/rest/services/usgstopo"))){if(-1<a.indexOf("arcgis/rest/services/world_terrain_base"))return"terrain";
if(-1<a.indexOf("arcgis/rest/services/natgeo_world_map"))return"national-geographic";if(-1<a.indexOf("arcgis/rest/services/ocean/world_ocean_base"))return"oceans";if(-1<a.indexOf("arcgis/rest/services/world_imagery"))return"satellite";if(-1<a.indexOf("arcgis/rest/services/reference/world_boundaries_and_places"))return"hybrid";if(-1<a.indexOf("arcgis/rest/services/canvas/world_dark_gray_base"))return"dark-gray"}return"topo"}}})},"esri/dijit/Attribution":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/query dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-class dojo/dom-geometry ../kernel ../lang ../SpatialReference ../geometry/webMercatorUtils ../geometry/Extent".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B){return g(null,{declaredClass:"esri.dijit.Attribution",itemDelimiter:" | ",listClass:"esriAttributionList",itemClass:"esriAttributionItem",lastItemClass:"esriAttributionLastItem",delimiterClass:"esriAttributionDelim",constructor:function(a,c){try{m.mixin(this,a);this._attributions={};this._pendingDfds={};this._activeLayers=[];this._sharedLayers=[];var e=this.domNode=n.byId(c),h=this.map,g="\x3cspan class\x3d'"+this.listClass+"'\x3e\x3c/span\x3e";e&&(f.set(e,
"innerHTML",g),this.listNode=d.query(".esriAttributionList",e)[0],this.itemNodes={});this._eventConnections=[b.connect(h,"onLayerAdd",this,this._onLayerAdd),b.connect(h,"onLayerRemove",this,this._onLayerRemove),b.connect(h,"onLayerSuspend",this,this._onLayerSuspend),b.connect(h,"onLayerResume",this,this._onLayerResume),b.connect(h,"onResize",this,this._adjustFocus),b.connect(h,"onExtentChange",this,this._onExtentChange)];if(h.loaded){var p=h.layerIds.concat(h.graphicsLayerIds),s,u,t=p.length;for(u=
0;u<t;u++)s=h.getLayer(p[u]),s.loaded&&this._onLayerAdd(s)}}catch(v){}},startup:function(){},destroy:function(){a.forEach(this._eventConnections,b.disconnect);e.destroy(this.listNode);this.map=this.domNode=this._eventConnections=this.listNode=this._attributions=this._pendingDfds=this.itemNodes=this._activeLayers=this._lastItem=this._sharedLayers=null},_onLayerAdd:function(a){try{var b=this._attributions,c=a.id;if(!w.isDefined(b[c])&&a.showAttribution)if(a.hasAttributionData){var d=a.getAttributionData();
this._pendingDfds[c]=1;b[c]=d;d.addBoth(m.partial(this._onAttributionLoad,this,a))}else b[c]=a.copyright||a.copyrightText||"",b[c]?(a.suspended||this._activeLayers.push(c),this._createNode(c)):this._onLayerRemove(a)}catch(e){}},_onAttributionLoad:function(a,b,c){var d=a._attributions,e=a._pendingDfds,f=b.id;if(e&&e[f]){delete e[f];if(!c||c instanceof Error)c="";d[f]=c?a._createIndexByLevel(c,-1!==b.declaredClass.toLowerCase().indexOf("vetiledlayer")):b.copyright||b.copyrightText||"";d[f]?(b.suspended||
a._activeLayers.push(f),a._createNode(f)):a._onLayerRemove(b)}},_onLayerRemove:function(b){try{var c=b.id,d=this.itemNodes,f,h=-1;this._onLayerSuspend(b);delete this._attributions[c];delete this._pendingDfds[c];f=this._getGroupIndex(c);-1!==f&&(h=a.indexOf(this._sharedLayers[f],c),-1!==h&&(this._sharedLayers[f].splice(h,1),1>=this._sharedLayers[f].length&&this._sharedLayers.splice(f,1)));d[c]&&-1===h&&e.destroy(d[c]);delete d[c];this._updateLastItem()}catch(g){}},_onLayerSuspend:function(b){try{var c=
b.id;if(this._attributions[c]){var d=a.indexOf(this._activeLayers,c),e=this.itemNodes[c];-1!==d&&this._activeLayers.splice(d,1);e&&this._toggleItem(e,!1,this._getGroupIndex(c))}}catch(f){}},_adjustFocus:function(){var a=this.domNode.scrollWidth>this.domNode.clientWidth,b=s.contains(this.domNode,"esriAttributionOpen");f.set(this.domNode,"tabIndex",a||b?"0":"")},_onLayerResume:function(b){try{var c=b.id,d=this._attributions[c],e=this.itemNodes[c];if(d&&(-1===a.indexOf(this._activeLayers,c)&&this._activeLayers.push(c),
e)){var h=m.isString(d)?d:this._getContributorsList(d,this.map.extent,this.map.getLevel());m.isString(d)||f.set(e,"innerHTML",h?h+this._getDelimiter():"");h&&this._toggleItem(e,!0,this._getGroupIndex(c))}}catch(g){}},_onExtentChange:function(a,b,c,d){try{var e=this._activeLayers,h=this._attributions,g=this.itemNodes,n,p,s,u,t=e.length||0;for(u=0;u<t;u++)if(p=e[u],s=h[p],(n=g[p])&&!m.isString(s)){var v=this._getContributorsList(s,a,d?d.level:-1);f.set(n,"innerHTML",v?v+this._getDelimiter():"");this._toggleItem(n,
!!v,-1)}}catch(w){}this._adjustCursorStyle()},_createNode:function(a){if(this.domNode){var b=this._checkShareInfo(a),c=b&&b.sharedWith,c=c&&this.itemNodes[c],d=this.map,f=this._attributions[a],f=m.isString(f)?f:this._getContributorsList(f,d.extent,d.getLevel()),d=!!f&&!d.getLayer(a).suspended;c?(this.itemNodes[a]=c,this._toggleItem(c,d,b.index)):(a=this.itemNodes[a]=e.create("span",{"class":this.itemClass,innerHTML:f?f+this._getDelimiter():"",style:{display:d?"inline":"none"}},this.listNode),d&&this._setLastItem(a));
this._adjustCursorStyle()}},_checkShareInfo:function(b){var c=this._attributions,d,e,f=-1,h=c[b],g;if(h&&m.isString(h)){for(e in c)if(d=c[e],e!==b&&d&&m.isString(d)&&d.length===h.length&&d.toLowerCase()===h.toLowerCase()){g=e;break}c=this._sharedLayers;d=c.length;if(g){for(e=0;e<d;e++)if(h=c[e],-1!==a.indexOf(h,g)){f=e;h.push(b);break}-1===f&&(f=c.push([g,b])-1)}}return-1<f?{index:f,sharedWith:g}:null},_getGroupIndex:function(b){var c=this._sharedLayers,d,e=c.length,f=-1;for(d=0;d<e;d++)if(-1!==a.indexOf(c[d],
b)){f=d;break}return f},_getDelimiter:function(){var a=this.itemDelimiter;return a?"\x3cspan class\x3d'"+this.delimiterClass+"'\x3e"+a+"\x3c/span\x3e":""},_toggleItem:function(b,c,d){if(-1<d&&!c){d=this._sharedLayers[d];var e,f=d.length,h=this._activeLayers;for(e=0;e<f;e++)if(-1!==a.indexOf(h,d[e]))return}p.set(b,"display",c?"inline":"none");this._updateLastItem()},_updateLastItem:function(){var a=this.listNode.childNodes,b;b=a.length;var c;if(b)for(b-=1;0<=b;b--)if(c=a[b],"none"!==p.get(c,"display")){this._setLastItem(c);
break}this._adjustCursorStyle()},_setLastItem:function(a){var b=this.itemClass,c=this.lastItemClass;this._lastItem&&s.replace(this._lastItem,b,c);a&&(s.replace(a,c,b),this._lastItem=a)},_createIndexByLevel:function(a,b){var c=a.contributors,d,e,f,h,g=c?c.length:0,n,p,m=new v(4326),s={},u;for(h=0;h<g;h++){d=c[h];p=(e=d.coverageAreas)?e.length:0;for(n=0;n<p;n++){f=e[n];u=f.bbox;u={extent:x.geographicToWebMercator(new B(u[1],u[0],u[3],u[2],m)),attribution:d.attribution||"",zoomMin:f.zoomMin-(b&&f.zoomMin?
1:0),zoomMax:f.zoomMax-(b&&f.zoomMax?1:0),score:w.isDefined(f.score)?f.score:100,objectId:h};for(f=u.zoomMin;f<=u.zoomMax;f++)s[f]=s[f]||[],s[f].push(u)}}return s},_getContributorsList:function(a,b,c){var d="";if(b&&w.isDefined(c)&&-1<c){a=a[c];c=b.getCenter().normalize();for(var e=a?a.length:0,f=[],h={},d=0;d<e;d++)b=a[d],!h[b.objectId]&&b.extent.contains(c)&&(h[b.objectId]=1,f.push(b));f.sort(function(a,b){return b.score-a.score||a.objectId-b.objectId});e=f.length;for(d=0;d<e;d++)f[d]=f[d].attribution;
d=f.join(", ")}return d},_adjustCursorStyle:function(){var a=u.position(this.listNode.parentNode,!0).h;s.contains(this.listNode.parentNode,"esriAttributionOpen")?(s.remove(this.listNode.parentNode,"esriAttributionOpen"),a>u.position(this.listNode.parentNode,!0).h?(p.set(this.listNode.parentNode,"cursor","pointer"),s.add(this.listNode.parentNode,"esriAttributionOpen")):p.set(this.listNode.parentNode,"cursor","default")):(s.add(this.listNode.parentNode,"esriAttributionOpen"),a<u.position(this.listNode.parentNode,
!0).h?p.set(this.listNode.parentNode,"cursor","pointer"):p.set(this.listNode.parentNode,"cursor","default"),s.remove(this.listNode.parentNode,"esriAttributionOpen"));this._adjustFocus()}})})},"esriPBI/widgets/MapWrapper/MapWrapper":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/Color dojo/_base/window dojo/dom-class dojo/string dojo/on dojo/aspect dojo/query dijit/_base/focus dojo/topic dijit/registry dijit/layout/ContentPane dijit/_FocusMixin dojo/dom-construct dojo/dom-geometry esri/layers/FeatureLayer esri/geometry/ScreenPoint esri/geometry/Extent esri/tasks/query esri/arcgis/utils ../../MapSettings ../Popup/Popup ../../utils/WebMapHelper dojo/_base/Deferred dojo/Deferred dojo/promise/all dojo/when dojo/has dojo/json esri/dijit/Attribution esri/graphicsUtils ../../utils/filteredRendererUtils ../../utils/logger! ../../utils/symbolHelper ../../utils/layerUtils ../../utils/mapUtility".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M,L,G,O,S,U,T,E,Q,N,q,k,r,y){return m(null,{baseClass:"mapWrapper",selected:!1,hasSlider:!0,loadedPromise:null,maxPopupContainer:null,_createMap:function(a,c,e){if(c)if(this.map)q.error("map already exists");else{if(a){k.midsToUrls(a);var f=this,h=new G,g=[],n;e=e||{};e.infoWindow||(e.infoWindow=new K({},B.create("div")));M.createMap(a,c,{mapOptions:e,usePopupManager:!0}).then(function(c){f._updateInfoWindowOnChanges(c.map);d.forEach(y.getAllLayers(c.map),
function(a){r.setName(a)});O(g).then(function(a){if(0<a.length){for(var b=0;b<a.length;b++)n=n?n.union(a[b]):a[b];c.map.setExtent(n,!0)}});c.map.__container.dir="ltr";f.map=c.map;f.map.settings=new I(a.extItemData&&a.extItemData.mapSettings);f.map.mapWrapper=f;f.map.loaded?f._mapLoaded():b.connect(f.map,"onLoad",function(){f._mapLoaded()});f.loadedPromise&&(f.loadedPromise.resolve(),f.loadedPromise=null);h.resolve(f.map)},function(a){q.error("create map failed",a);h.reject();f.loadedPromise&&(f.loadedPromise.reject(),
f.loadedPromise=null)});return h.promise}}else q.error("no map node specified")},_setupPopup:function(a){function b(c){var e=!1;d.forEach((a.graphicsLayerIds||[]).concat(a.layerIds||[]),function(b){if((b=a.getLayer(b))&&b.loaded&&b.visible&&b.infoTemplate)b.isInstanceOf(C)&&!b.suspended?c.push(b):-1!==b.declaredClass.indexOf("ArcGISImageServiceLayer")&&(c.push(b),e=!0)});return e}function c(a,b){return d.map(a,function(a){var c=new L;-1!==a.declaredClass.indexOf("ArcGISImageServiceLayer")?a.queryVisibleRasters(b,
{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0},c.resolve,c.reject):a.queryFeatures(b,function(b){b=d.map(b.features,function(b){return a._mode._addFeatureIIf(b.attributes[a.objectIdField],b)});N.hasFilteredGroups(a.renderer)&&(b=d.filter(b,function(b){return!N.isFiltered(a.renderer,b)}));c.resolve(b)},c.reject);return c})}function e(d){var f=a.infoWindow,h=d.graphic&&d.graphic.getInfoTemplate()?d.graphic:null,g=[],k=b(g);f.hide();f.clearFeatures();if(h||g.length){var n=J._calculateClickTolerance(g),
p=d.screenPoint,m=a.toMap(new z(p.x-n,p.y+n)),p=a.toMap(new z(p.x+n,p.y-n)),n=new H;n.geometry=new F(m.x,m.y,p.x,p.y,a.spatialReference);n.timeExtent=a.timeExtent;m=[];h&&(p=new L,p.resolve([h]),m.push(p));m=m.concat(c(g,n));f.setFeatures(m);f.show(d.mapPoint,{closestFirst:!k})}}var f=a.on("click",e);a.disablePopups=function(){f&&(f.remove(),f=null)};a.enablePopups=function(){f||(f=a.on("click",e))}},_mapLoaded:function(){b.connect(this,"resize",a.hitch(this,function(){this.map&&this.map.resize()}));
d.forEach(y.getAllLayers(this.map),function(a){this._onLayerAddResultFunction(a)},this);e(this.map,"LayerAddResult",a.hitch(this,this._onLayerAddResultFunction))},_onLayerAddResultFunction:function(a){r.setName(a)},_updateInfoWindowOnChanges:function(b){function c(a,b){return d.some(a,function(a){return b===a})}function e(a,f){var h=b.infoWindow.features;if(h){for(var g=b.infoWindow.getSelectedFeature(),k=h.length-1;0<=k;k--){var n=h[k];n&&n.getLayer()===a&&(!f||c(f,n))&&h.splice(k,1)}h.length?b.infoWindow.setFeatures(h):
b.infoWindow.hide();g||(h=d.indexOf(h,g),0<h&&b.infoWindow.select(h))}}function f(c){if(c)var h=c.on("visibility-change",function(a){a.visible||e(c)}),g=p.after(c,"setRenderer",function(){if(N.hasFilteredGroups(c.renderer)){var a=d.filter(b.infoWindow.features,function(a){return a.getLayer()===c&&N.isFiltered(c.renderer,a)});e(c,a)}}),k=b.on("layer-remove",a.hitch(this,function(a){a.layer===c&&(k.remove(),k=null,h.remove(),h=null,g.remove(),g=null,e(c))}))}d.forEach(y.getAllLayers(b),function(a){f(a)});
b.on("layer-add",a.hitch(this,function(a){f(a.layer)}))}})})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),function(g,m,a,b,d,c,h,n){c.focus=function(a){if(a){var b="node"in a?a.node:a,h=a.bookmark;a=a.openedForWindow;var g=h?h.isCollapsed:!1;if(b){var m="iframe"==b.tagName.toLowerCase()?b.contentWindow:b;if(m&&m.focus)try{m.focus()}catch(t){}c._onFocusNode(b)}if(h&&d.withGlobal(a||d.global,
n.isCollapsed)&&!g){a&&a.focus();try{d.withGlobal(a||d.global,n.moveToBookmark,null,[h])}catch(w){}}}};c.watch("curNode",function(a,c,d){n._curFocus=d;n._prevFocus=c;d&&b.publish("focusNode",d)});c.watch("activeStack",function(a,b,c){n._activeStack=c});c.on("widget-blur",function(a,c){b.publish("widgetBlur",a,c)});c.on("widget-focus",function(a,c){b.publish("widgetFocus",a,c)});a.mixin(n,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return n.getBookmark().isCollapsed},getBookmark:function(){return(d.global==
window?h:new h.SelectionManager(d.global)).getBookmark()},moveToBookmark:function(a){return(d.global==window?h:new h.SelectionManager(d.global)).moveToBookmark(a)},getFocus:function(a,b){var h=!c.curNode||a&&m.isDescendant(c.curNode,a.domNode)?n._prevFocus:c.curNode;return{node:h,bookmark:h&&h==c.curNode&&d.withGlobal(b||d.global,n.getBookmark),openedForWindow:b}},_activeStack:[],registerIframe:function(a){return c.registerIframe(a)},unregisterIframe:function(a){a&&a.remove()},registerWin:function(a,
b){return c.registerWin(a,b)},unregisterWin:function(a){a&&a.remove()}});return n})},"dijit/selection":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/sniff dojo/_base/window dijit/focus".split(" "),function(g,m,a,b,d,c){var h=function(f){var e=f.document;this.getType=function(){if(e.getSelection){var a="text",b;try{b=f.getSelection()}catch(c){}b&&1==b.rangeCount&&(b=b.getRangeAt(0),b.startContainer==b.endContainer&&(1==b.endOffset-b.startOffset&&3!=b.startContainer.nodeType)&&(a=
"control"));return a}return e.selection.type.toLowerCase()};this.getSelectedText=function(){if(e.getSelection){var a=f.getSelection();return a?a.toString():""}return"control"==this.getType()?null:e.selection.createRange().text};this.getSelectedHtml=function(){if(e.getSelection){var a=f.getSelection();if(a&&a.rangeCount){var b,c="";for(b=0;b<a.rangeCount;b++){var d=a.getRangeAt(b).cloneContents(),h=e.createElement("div");h.appendChild(d);c+=h.innerHTML}return c}return null}return"control"==this.getType()?
null:e.selection.createRange().htmlText};this.getSelectedElement=function(){if("control"==this.getType()){if(e.getSelection){var a=f.getSelection();return a.anchorNode.childNodes[a.anchorOffset]}if((a=e.selection.createRange())&&a.item)return e.selection.createRange().item(0)}return null};this.getParentElement=function(){if("control"==this.getType()){var a=this.getSelectedElement();if(a)return a.parentNode}else if(e.getSelection){if(a=e.getSelection()){for(a=a.anchorNode;a&&1!=a.nodeType;)a=a.parentNode;
return a}}else return a=e.selection.createRange(),a.collapse(!0),a.parentElement();return null};this.hasAncestorElement=function(a){return null!=this.getAncestorElement.apply(this,arguments)};this.getAncestorElement=function(a){var b=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(b,arguments)};this.isTag=function(a,b){if(a&&a.tagName)for(var c=a.tagName.toLowerCase(),d=0;d<b.length;d++){var e=String(b[d]).toLowerCase();if(c==e)return e}return""};this.getParentOfType=
function(a,b){for(;a;){if(this.isTag(a,b).length)return a;a=a.parentNode}return null};this.collapse=function(a){if(e.getSelection){var b=f.getSelection();b.removeAllRanges?a?b.collapseToStart():b.collapseToEnd():b.collapse(a)}else b=e.selection.createRange(),b.collapse(a),b.select()};this.remove=function(){var a=e.selection;e.getSelection?(a=f.getSelection(),a.deleteFromDocument()):"none"!=a.type.toLowerCase()&&a.clear();return a};this.selectElementChildren=function(a,c){var d;a=m.byId(a);if(e.getSelection){var h=
f.getSelection();b("opera")?(d=h.rangeCount?h.getRangeAt(0):e.createRange(),d.setStart(a,0),d.setEnd(a,3==a.nodeType?a.length:a.childNodes.length),h.addRange(d)):h.selectAllChildren(a)}else if(d=a.ownerDocument.body.createTextRange(),d.moveToElementText(a),!c)try{d.select()}catch(g){}};this.selectElement=function(a,c){var f;a=m.byId(a);if(e.getSelection){var h=e.getSelection();f=e.createRange();h.removeAllRanges&&(b("opera")&&h.getRangeAt(0)&&(f=h.getRangeAt(0)),f.selectNode(a),h.removeAllRanges(),
h.addRange(f))}else try{h=a.tagName?a.tagName.toLowerCase():"",f="img"===h||"table"===h?d.body(e).createControlRange():d.body(e).createRange(),f.addElement(a),c||f.select()}catch(g){this.selectElementChildren(a,c)}};this.inSelection=function(a){if(a){var b,c;if(e.getSelection){var d=f.getSelection();d&&0<d.rangeCount&&(c=d.getRangeAt(0));if(c&&c.compareBoundaryPoints&&e.createRange)try{if(b=e.createRange(),b.setStart(a,0),1===c.compareBoundaryPoints(c.START_TO_END,b))return!0}catch(h){}}else{c=e.selection.createRange();
try{b=a.ownerDocument.body.createTextRange(),b.moveToElementText(a)}catch(g){}if(c&&b&&1===c.compareEndPoints("EndToStart",b))return!0}}return!1};this.getBookmark=function(){var a,b,d=e.selection,h=c.curNode;if(e.getSelection){if(d=f.getSelection())if(d.isCollapsed){if(a=h?h.tagName:"")if(a=a.toLowerCase(),"textarea"==a||"input"==a&&(!h.type||"text"==h.type.toLowerCase()))return d={start:h.selectionStart,end:h.selectionEnd,node:h,pRange:!0},{isCollapsed:d.end<=d.start,mark:d};a={isCollapsed:!0};d.rangeCount&&
(a.mark=d.getRangeAt(0).cloneRange())}else b=d.getRangeAt(0),a={isCollapsed:!1,mark:b.cloneRange()}}else if(d){a=h?h.tagName:"";a=a.toLowerCase();if(h&&a&&("button"==a||"textarea"==a||"input"==a)){if(d.type&&"none"==d.type.toLowerCase())return{isCollapsed:!0,mark:null};b=d.createRange();return{isCollapsed:b.text&&b.text.length?!1:!0,mark:{range:b,pRange:!0}}}a={};try{b=d.createRange(),a.isCollapsed=!("Text"==d.type?b.htmlText.length:b.length)}catch(g){return a.isCollapsed=!0,a}if("CONTROL"==d.type.toUpperCase())if(b.length){a.mark=
[];d=0;for(h=b.length;d<h;)a.mark.push(b.item(d++))}else a.isCollapsed=!0,a.mark=null;else a.mark=b.getBookmark()}return a};this.moveToBookmark=function(b){if(b=b.mark)if(e.getSelection){var c=f.getSelection();c&&c.removeAllRanges&&(b.pRange?(c=b.node,c.selectionStart=b.start,c.selectionEnd=b.end):(c.removeAllRanges(),c.addRange(b)))}else if(e.selection&&b){var d;b.pRange?d=b.range:a.isArray(b)?(d=e.body.createControlRange(),g.forEach(b,function(a){d.addElement(a)})):(d=e.body.createTextRange(),d.moveToBookmark(b));
d.select()}};this.isCollapsed=function(){return this.getBookmark().isCollapsed}},n=new h(window);n.SelectionManager=h;return n})},"esriPBI/MapSettings":function(){define(["dojo/_base/declare","dojo/Stateful"],function(g,m){return g([m],{title:"ArcGIS",selectionColor:"#ffff00",autoZoomOnAdd:!0,percentageDecimals:2,currencyDecimals:2,currencySymbol:"USD",decimal:2,dateFormat:"shortDate",toJson:function(){return{title:this.title,selectionColor:this.selectionColor,autoZoomOnAdd:this.autoZoomOnAdd,percentageDecimals:this.percentageDecimals,
currencyDecimals:this.currencyDecimals,currencySymbol:this.currencySymbol,decimal:this.decimal,dateFormat:this.dateFormat}}})})},"esriPBI/widgets/Popup/Popup":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/connect dojo/has dojo/window dojo/mouse dojo/aspect dojo/on dojo/dom-attr dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-geometry dojo/touch dojo/Evented dojo/query dijit/Destroyable esri/lang esriPBI/utils/selectionUtils ../../extensions/tools/_ToggleTool esri/dijit/Popup dojo/i18n!./nls/Popup ../_ToolContainerMixin".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J){return g([F],{postscript:function(){var c=dojo.query(".titlePane",this._positioner)[0];p.place(this._prevFeatureButton,c,"first");this.freezeCycleFinished=this.freezeCycle=this.freezePop=!1;this.freezeHeight=this.freezeWidth=0;this._eventConnections.push([b.connect(this,"onSetFeatures",a.hitch(this,function(a){1<this.features.length||"Feature Layer"===this.features[0]._layer.type?(a=dojo.query(".titlePane",this._positioner)[0],u.set(a,{display:"flex",
flexDirection:"row"})):(a=dojo.query(".titlePane",this._positioner)[0],u.set(a,{display:"none"}))})),b.connect(this._nextFeatureButton,"click",a.hitch(this,function(a){this.features?1<this.features.length&&(this.freezePop=!0,this._setPosition(this.location)):this.freezePop=!1})),b.connect(this._positioner,h.leave,a.hitch(this,function(a){this.freezePop||(this.freezeCycleFinished=this.freezeCycle=this.freezePop=!1,this.freezeHeight=this.freezeWidth=0)})),b.connect(dojo.query("div[title\x3d'Close']",
this._positioner)[0],"click",a.hitch(this,function(a){this.freezeCycleFinished=this.freezeCycle=this.freezePop=!1;this.freezeHeight=this.freezeWidth=0}))])},_updatePagingInfo:function(){var a=this.features?this.features.length:0,b=this._nls,c="\x26nbsp;";this.pagingInfo&&(1<a&&b.NLS_pagingInfo)&&(c=A.substitute({index:this.selectedIndex+1,total:a},b.NLS_pagingInfo));c=c.replace(/(\(|\))/ig,"");this.setTitle(c)},_setPosition:function(a){if(this.freezePop&&!this.freezeCycle)if(this.freezeCycleFinished){var b=
dojo.query("div[dojoAttachPoint\x3d'_description']",this._contentPane)[0];b?(u.get(b,"width")>this.freezeWidth&&(m.forEach(dojo.query(".attrValue",b),function(a){dojo.isIE?u.set(a,{whiteSpace:"pre-line",wordBreak:"break-all"}):u.set(a,{whiteSpace:"pre-line",wordBreak:"break-word"})}),m.forEach(dojo.query(".attrName",b),function(a){dojo.isIE?u.set(a,{whiteSpace:"pre-line",wordBreak:"break-all"}):u.set(a,{whiteSpace:"pre-line",wordBreak:"break-word"})})),dojo.isIE?u.set(b,{whiteSpace:"pre-line",wordBreak:"break-all"}):
u.set(b,{whiteSpace:"pre-line",wordBreak:"break-word"}),u.set(b,{width:this.freezeWidth+"px",height:this.freezeHeight+"px"})):(b=dojo.query("div[dojoAttachPoint\x3d'_pinDescription']",this._contentPane)[0],"undefined"===typeof b&&(this._contentPane.innerHTML="\x3cdiv dojoAttachPoint\x3d'_pinDescription'\x3e"+this._contentPane.innerHTML+"\x3c/div\x3e",b=dojo.query("div[dojoAttachPoint\x3d'_pinDescription']",this._contentPane)[0]),b&&u.set(b,{width:this.freezeWidth+"px",height:this.freezeHeight+"px"}))}else{this.freezeCycle=
!0;for(var d=this.freezeHeight=this.freezeWidth=0;d<this.features.length;d++)this.select(d);this.freezeCycle=!1;this.freezeCycleFinished=!0;this.select(1)}else{var b=dojo.query("div[dojoAttachPoint\x3d'_description']",this._contentPane)[0],d=t.position(this.map.container,!0),e=d.w,f=d.h,h=a.y-12-50,g=f-a.y-12-50;if(this._contentPane){if(b){h=Math.max(h,g);(g=dojo.query(".esriViewPopup",this._contentPane)[0])&&u.set(g,{maxHeight:h+"px"});var g=dojo.query(".mediaSection",this._contentPane)[0],n=!s.contains(g,
"hidden");g&&n?(u.set(b,{maxWidth:"330px",width:e-36+"px"}),u.set(g,{maxWidth:"330px",width:e-36+"px"}),dojo.isIE?u.set(b,{whiteSpace:"pre-line",wordBreak:"break-all"}):u.set(b,{whiteSpace:"pre-line",wordBreak:"break-word"})):(u.set(b,{maxWidth:e-36+"px"}),dojo.query(".attrValue",b).length&&(g=u.get(b,"width"),2>u.get(b,"max-width")-g?(u.set(b,{width:g+"px"}),m.forEach(dojo.query(".attrValue",b),function(a){dojo.isIE?u.set(a,{whiteSpace:"pre-line",wordBreak:"break-all"}):u.set(a,{whiteSpace:"pre-line",
wordBreak:"break-word"})}),m.forEach(dojo.query(".attrName",b),function(a){dojo.isIE?u.set(a,{whiteSpace:"pre-line",wordBreak:"break-all"}):u.set(a,{whiteSpace:"pre-line",wordBreak:"break-word"})})):(m.forEach(dojo.query(".attrValue",b),function(a){u.set(a,{whiteSpace:"nowrap"})}),m.forEach(dojo.query(".attrName",b),function(a){u.set(a,{whiteSpace:"nowrap"})}))));this.freezeWidth=Math.max(this.freezeWidth,u.get(b,"width"));this.freezeHeight=Math.min(Math.max(this.freezeHeight,u.get(b,"height")),h)}else b=
dojo.query("div[dojoAttachPoint\x3d'_pinDescription']",this._contentPane)[0],"undefined"===typeof b&&(this._contentPane.innerHTML="\x3cdiv dojoAttachPoint\x3d'_pinDescription'\x3e"+this._contentPane.innerHTML+"\x3c/div\x3e",b=dojo.query("div[dojoAttachPoint\x3d'_pinDescription']",this._contentPane)[0]),u.set(b,{maxWidth:e-36+"px",overflow:"hidden"}),g=u.get(b,"width"),2>u.get(b,"max-width")-g?dojo.isIE?u.set(b,{width:e-36+"px",whiteSpace:"pre-line",wordBreak:"break-all"}):u.set(b,{width:e-36+"px",
whiteSpace:"pre-line",wordBreak:"break-word"}):u.set(b,{whiteSpace:"nowrap"}),this.freezeWidth=Math.max(this.freezeWidth,u.get(b,"width")),this.freezeHeight=Math.max(this.freezeHeight,u.get(b,"height"));var b=a.x,p=a.y;a=this.offsetX||0;var h=13,n=g=0,v="Left",w="bottom",x=t.getContentBox(this._positioner),q=x.w/2,k=x.h/2,v=u.get(this._sizers[0],"height")+this._maxHeight+u.get(this._sizers[1],"height"),r=v/2,A=0,w=0,z=e,B=b,e=p,C=this.anchor.toLowerCase();if("auto"===C){if(C=c.getBox)C=C(),A=Math.max(C.l,
d.x),z=Math.min(C.l+C.w,d.x+d.w),w=Math.max(C.t,d.y),f=Math.min(C.t+C.h,d.y+d.h),B+=d.x,e+=d.y;C=-b+(z-x.w)/2+h;12<C&&(C=0);x.w-Math.abs(C)<12+h&&0>C&&(C=-x.w+(12+h));var J=e-w>r,F=f-e>=r,d=e-w-12>=v,r=f-e-12>=v,z=z-B-12>=x.w,x=B-A-12>=x.w;J&&F?z?(w="",v="Left"):x?(w="",v="Right"):d?(n=C,v="Left",w="bottom"):r?(n=C,v="Left",w="top"):v-(e-w)<v-(f-e)?(n=C,v="Left",w="bottom"):(n=C,v="Left",w="top"):d?(n=C,v="Left",w="bottom"):r?(n=C,v="Left",w="top"):J?(n=C,v="Left",w="bottom"):F?(n=C,v="Left",w="top"):
v-(e-w)<v-(f-e)?(n=C,v="Left",w="bottom"):(n=C,v="Left",w="top");z&&d?(v="Left",w="bottom",n=0):z&&r?(v="Left",w="top",n=0):x&&r?(v="Right",w="top",n=0):x&&d&&(v="Right",w="bottom",n=0)}else w=v="",-1!==C.indexOf("top")?w="bottom":-1!==C.indexOf("bottom")&&(w="top"),-1!==C.indexOf("left")?v="Right":-1!==C.indexOf("right")&&(v="Left");d=w+v;switch(d){case "top":case "bottom":g=12;h=0;break;case "Left":case "Right":h=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":g=12,
h=-16}u.set(this.domNode,{left:b+"px",top:p+"px",right:null,bottom:null});b={left:null,right:null,top:null,bottom:null};v?b[v.toLowerCase()]=h+a+n+"px":b.left=-q+"px";w?b[w]=g+"px":b.top=-k+"px";u.set(this._positioner,b);this._showPointer(d,n)}}},_showPointer:function(a,b){s.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));s.remove(this._outerPointer,["right","left","hidden"]);u.set(this._pointer,{left:""});"Right"===a||"Left"===a?(a=a.toLowerCase(),
s.add(this._outerPointer,a)):(s.add(this._pointer,a),-5>b&&0<=a.indexOf("Left")?u.set(this._pointer,{left:-b+2.5+"px"}):-5<b&&0<=a.indexOf("Left")&&u.set(this._pointer,{left:"5px"}))}})})},"esriPBI/extensions/tools/_ToggleTool":function(){define(["dojo/_base/declare","./_Tool"],function(g,m){return g(m,{checked:!1})})},"esriPBI/widgets/_ToolContainerMixin":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dijit/Destroyable"],function(g,m,a,b){return g([b],{store:null,toolCollectionId:null,
constructor:function(b){a.mixin(this,b)},postCreate:function(){this.inherited(arguments);this.observeTools()},observeTools:function(a,b){function h(a,b){if(g.store.mayHaveChildren(a)){var c=g.store.getChildren(a);c&&c.observe&&(m.forEach(c,function(a,c){g.addTool(a,c,b)}),g.own(c.observe(function(a,c,d){-1<c&&g.removeTool(a,c,b);-1<d&&g.addTool(a,d,b)})))}}b||(b=this);if(this.store)if(this.toolCollectionId){var g=this;if(a)h(a,b);else{var f=g.store.get(g.toolCollectionId);f&&h(f,b)}}else logger.error("getTools() toolCollectionId is required");
else logger.error("getTools() store is required")},addTool:function(){},removeTool:function(){}})})},"esriPBI/utils/symbolHelper":function(){define(["./jsonHelper","./midHelper"],function(g,m){return{midsToUrls:function(a){g.find(a,function(a){return"esriPMS"===a.type},function(a){m.isMid(a.url)&&(a.url=m.midToUrl(a.url))})}}})},"esriPBI/utils/basemapHelper":function(){define("dojo/_base/array ./portal esri/request dojo/promise/all esri/dijit/Basemap esri/dijit/BasemapLayer ./MapUtils ./basemaps dojo/Deferred".split(" "),
function(g,m,a,b,d,c,h,n,f){function e(){var a=new f;t=n.raster_tile_layers.concat(n.vector_tile_layers).concat(n.osm_layer);h.vectorTileSupported?a.resolve(n.vector_tile_layers.concat(n.osm_layer)):a.resolve(n.raster_tile_layers.concat(n.osm_layer));return a}function p(a,b){var c=a&&a.itemData&&a.itemData.baseMap,d=function(a){var b=g.filter(t,function(b){return-1!==g.indexOf(a,b.itemId)}),b=g.filter(b,function(a){var b=c.title.toLowerCase();a=a.title.toLowerCase();return-1!==b.indexOf(a)});0<b.length&&
(c.baseMapLayers=b[0].layers)};h.vectorTileSupported?g.every(c.baseMapLayers,function(a){return"VectorTileLayer"===a.type||"OpenStreetMap"===a.type})||d(u):g.every(c.baseMapLayers,function(a){return"VectorTileLayer"!==a.type})||d(s);b.resolve()}var s=["25869b8718c0419db87dad07de5b02d8","8b3b470883a744aeb60e5fff0a319ce7","d8855ee4d3d74413babfb0f41203b168"],u=["358ec1e175ea41c3bf5c68f0da11ae2b","979c6cc89af9449cbeb5342a439c6a76","55ebf90799fa4a3fa57562700a68c405"],t;return{getBasemaps:e,checkAndReplaceBasemap:function(a){var b=
new f;e().then(function(){p(a,b)});return b}}})},"esri/dijit/Basemap":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../request ./BasemapLayer".split(" "),function(g,m,a,b,d,c,h){return g(null,{declaredClass:"esri.dijit.Basemap",id:null,title:"",thumbnailUrl:null,layers:null,itemId:null,basemapGallery:null,constructor:function(a,b){a=a||{};this.id=a.id;this.itemId=a.itemId;this.layers=a.layers;this.title=a.title||"";this.thumbnailUrl=a.thumbnailUrl;this.basemapGallery=
b},getLayers:function(b){if(this.layers)return this.layers;if(this.itemId)return b=c({url:(b||d.dijit._arcgisUrl)+"/content/items/"+this.itemId+"/data",content:{f:"json"},callbackParamName:"callback",error:a.hitch(this,function(a,b){if(this.basemapGallery)this.basemapGallery.onError("esri.dijit.Basemap: could not access basemap item.")})}),b.addCallback(a.hitch(this,function(a,b){if(a.baseMap)return this.layers=[],m.forEach(a.baseMap.baseMapLayers,function(a){this.layers.push(new h(a))},this),this.layers;
if(this.basemapGallery)this.basemapGallery.onError("esri.dijit.Basemap: could not access basemap item.");return[]})),b}})})},"esri/dijit/BasemapLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(g,m,a,b){return g(null,{declaredClass:"esri.dijit.BasemapLayer",constructor:function(a){a=a||{};this.url=a.url;this.type=a.type;this.isReference=!0===a.isReference?!0:!1;this.opacity=a.opacity;this.visibleLayers=a.visibleLayers;this.displayLevels=a.displayLevels;
this.exclusionAreas=a.exclusionAreas;this.bandIds=a.bandIds;this.templateUrl=a.templateUrl;this.copyright=a.copyright;this.subDomains=a.subDomains;this.fullExtent=a.fullExtent;this.initialExtent=a.initialExtent;this.tileInfo=a.tileInfo;this.tileServers=a.tileServers;this.styleUrl=a.styleUrl}})})},"esriPBI/utils/basemaps":function(){define(function(){return{osm_layer:{itemId:"5d2bfa736f8448b3a1708e1f6be23eed",layers:[{type:"OpenStreetMap",layerType:"OpenStreetMap",opacity:1,visibility:!0,id:"OpenStreetMap"}],
title:"OpenStreetMap",thumbnailUrl:"https://www.arcgis.com/sharing/rest/content/items/5d2bfa736f8448b3a1708e1f6be23eed/info/thumbnail/temposm.jpg"},vector_tile_layers:[{itemId:"358ec1e175ea41c3bf5c68f0da11ae2b",layers:[{id:"VectorTile_748",type:"VectorTileLayer",layerType:"VectorTileLayer",title:"Dark Gray Canvas Base",styleUrl:"http://www.arcgis.com/sharing/rest/content/items/57436c01bc754dbb87dfb636b6484022/resources/styles/root.json",itemId:"57436c01bc754dbb87dfb636b6484022",visibility:!0,opacity:1},
{id:"VectorTile_9885",type:"VectorTileLayer",layerType:"VectorTileLayer",title:"Dark Gray Canvas Reference",styleUrl:"http://www.arcgis.com/sharing/rest/content/items/c348d484f6d14189a40fdfb24d54414c/resources/styles/root.json",itemId:"c348d484f6d14189a40fdfb24d54414c",isReference:!0,visibility:!0,opacity:1}],title:"Dark Gray Canvas",thumbnailUrl:"https://www.arcgis.com/sharing/rest/content/items/358ec1e175ea41c3bf5c68f0da11ae2b/info/thumbnail/dark_canvas_map.jpg"},{itemId:"979c6cc89af9449cbeb5342a439c6a76",
layers:[{id:"VectorTile_2360",type:"VectorTileLayer",layerType:"VectorTileLayer",title:"Light Gray Canvas Base",styleUrl:"http://www.arcgis.com/sharing/rest/content/items/1e47168d181248e491541ffd5a91c0de/resources/styles/root.json",itemId:"1e47168d181248e491541ffd5a91c0de",visibility:!0,opacity:1},{id:"VectorTile_3587",type:"VectorTileLayer",layerType:"VectorTileLayer",title:"Light Gray Canvas Reference",styleUrl:"http://www.arcgis.com/sharing/rest/content/items/b11b54e79acf4f9d8f6fbbdd5db97547/resources/styles/root.json",
itemId:"b11b54e79acf4f9d8f6fbbdd5db97547",isReference:!0,visibility:!0,opacity:1}],title:"Light Gray Canvas",thumbnailUrl:"https://www.arcgis.com/sharing/rest/content/items/979c6cc89af9449cbeb5342a439c6a76/info/thumbnail/light_canvas_map.jpg"},{itemId:"55ebf90799fa4a3fa57562700a68c405",layers:[{id:"VectorTile_3028",type:"VectorTileLayer",layerType:"VectorTileLayer",title:"World Street Map",styleUrl:"http://www.arcgis.com/sharing/rest/content/items/a60a37a27cc140ddad15f919cd5a69f2/resources/styles/root.json",
itemId:"a60a37a27cc140ddad15f919cd5a69f2",visibility:!0,opacity:1}],title:"Streets",thumbnailUrl:"https://www.arcgis.com/sharing/rest/content/items/55ebf90799fa4a3fa57562700a68c405/info/thumbnail/streets_map.jpg"}],raster_tile_layers:[{itemId:"25869b8718c0419db87dad07de5b02d8",layers:[{id:"layer0",layerType:"ArcGISTiledMapServiceLayer",url:"https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Base/MapServer",visibility:!0,opacity:1,title:"World Dark Gray Canvas Base"},{id:"World_Dark_Gray_Reference_8618",
layerType:"ArcGISTiledMapServiceLayer",url:"https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",visibility:!0,opacity:1,title:"World Dark Gray Reference",isReference:!0}],title:"Dark Gray Canvas",thumbnailUrl:"https://www.arcgis.com/sharing/rest/content/items/25869b8718c0419db87dad07de5b02d8/info/thumbnail/DGCanvasBase.png"},{itemId:"8b3b470883a744aeb60e5fff0a319ce7",layers:[{id:"World_Light_Gray_Base_1486",layerType:"ArcGISTiledMapServiceLayer",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",
visibility:!0,opacity:1,title:"World Light Gray Canvas Base"},{id:"World_Light_Gray_Reference_8656",layerType:"ArcGISTiledMapServiceLayer",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",visibility:!0,opacity:1,title:"World Light Gray Reference",isReference:!0}],title:"Light Gray Canvas",thumbnailUrl:"https://www.arcgis.com/sharing/rest/content/items/8b3b470883a744aeb60e5fff0a319ce7/info/thumbnail/light_gray_canvas.jpg"},{itemId:"d8855ee4d3d74413babfb0f41203b168",
layers:[{id:"World_Street_Map_8421",layerType:"ArcGISTiledMapServiceLayer",url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",visibility:!0,opacity:1,title:"World Street Map"}],title:"Streets",thumbnailUrl:"https://www.arcgis.com/sharing/rest/content/items/d8855ee4d3d74413babfb0f41203b168/info/thumbnail/world_street_map.jpg"}]}})},"esriPBI/managers/ArcGISManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Deferred dojo/when dojo/on dojo/json dojo/_base/array esri/lang esri/config esri/dijit/geoenrichment/config esri/arcgis/utils ./_Manager ../utils/PortalUtil ../utils/SignInUtil ../utils/serviceProxyHelper ../utils/portal ../adapters/StorageAdapter esri/tasks/GeometryService ../utils/logger! ../utils/nlsHelper".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z){return g([u],{_type:"arcgis",initialize:function(){s.arcgisUrl=this.adapter.settings.portalUrl+"/sharing/content/items"},portal:null,startup:function(a,c){var d=this,f=new b,h=this.getInherited(arguments);(new t(this.adapter.settings.portalUrl)).on("load",function(a){d.emit("portal-loaded",a);d.portal=a;x.set(d.portal);d.portal.helperServices&&(d.portal.helperServices.geometry&&d.portal.helperServices.geometry.url)&&(e.defaults.geometryService=new A(d.portal.helperServices.geometry.url));
d.adapter.settings.serviceProxy?v.set(d.adapter.settings.serviceProxy):C.error("Proxy service was not specified. Hence cannot use ArcGIS premium services.");f.resolve()});return f.then(m.hitch(this,h))},toJson:function(){return this.adapter.settings},hasGeoEnrichmentService:function(){return this.portal&&this.portal.helperServices&&this.portal.helperServices.geoenrichment&&0<this.portal.helperServices.geoenrichment.url.length}})})},"esri/dijit/geoenrichment/config":function(){define(["../../urlUtils"],
function(g){g=g.getProtocolForWebResource();return{portalUrl:g+"//arcgis.com",server:g+"//geoenrich.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer",levels:["Admin3","Admin2"],highestLevel:"Admin1",locatorUrl:g+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",addressFormat:"${Address}, ${City}, ${Region} ${Postal}"}})},"esriPBI/utils/PortalUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/string dojo/Deferred esri/request esri/arcgis/Portal".split(" "),function(g,
m,a,b,d,c){return g(c.Portal,{_addItemUrl:"${url}/sharing/rest/content/users/${userName}/addItem",_analyzeJsonCsvUrl:"${url}/sharing/rest/content/features/analyze",_communityUserUrl:"${url}/sharing/rest/community/users/${userName}?f\x3djson",_deleteUserItemUrl:"${url}/sharing/rest/content/users/${userName}/items/${itemID}/delete",_itemDataUrl:"${url}/sharing/rest/content/items/${itemID}/data",_itemPublishUrl:"${url}/sharing/rest/content/users/${userName}/publish",_itemStatusUrl:"${url}/sharing/rest/content/users/${userName}/items/${itemID}/status",
_itemWindowUrl:"${url}/home/item.html?id\x3d${itemID}",_featuresGenerateUrl:"${url}/sharing/rest/content/features/generate",_generateTokenUrl:"${url}/sharing/rest/generateToken?referer\x3d${referer}",_relatedItemsUrl:"${url}/sharing/rest/content/items/${itemID}/relatedItems",_searchServiceNameAvailableUrl:"${url}/sharing/rest/portals/${portalID}/isServiceNameAvailable?name\x3d${name}\x26type\x3d${type}\x26f\x3djson",_shareUserItemUrl:"${url}/sharing/rest/content/users/${userName}/items/${itemID}/share",
_unshareUserItemUrl:"${url}/sharing/rest/content/users/${userName}/items/${itemID}/unshare",_updateUserItemUrl:"${url}/sharing/rest/content/users/${userName}/items/${itemID}/update",_userSelfUrl:"${url}/sharing/rest/accounts/self",_portalUrl:"${protocol}${portalName}",_itemInfoUrl:"${url}/sharing/rest/content/users/${userName}/items/${itemID}",oAuthAppConfig:null,canAccess:function(a){var c=new b;d({url:a,content:{f:"json"}}).then(function(a){c.resolve(!0)},function(a){c.resolve(!1)});return c.promise},
getAddItemUrl:function(){return a.substitute(this._addItemUrl,{url:this._getPortalUrl(),userName:this.getCurrentUsername()})},getAnalyzeJsonCsvUrl:function(){return a.substitute(this._analyzeJsonCsvUrl,{url:this._getPortalUrl()})},getCommunityUserUrl:function(){return a.substitute(this._communityUserUrl,{url:this._getPortalUrl(),userName:this.getCurrentUsername()})},getDeleteUserItemUrl:function(b){return a.substitute(this._deleteUserItemUrl,{url:this._getPortalUrl(),userName:this.getCurrentUsername(),
itemID:b})},getItemDataUrl:function(b){return a.substitute(this._itemDataUrl,{url:this._getPortalUrl(),itemID:b})},getItemPublishUrl:function(){return a.substitute(this._itemPublishUrl,{url:this._getPortalUrl(),userName:this.getCurrentUsername()})},getItemStatusUrl:function(b){return a.substitute(this._itemStatusUrl,{url:this._getPortalUrl(),userName:this.getCurrentUsername(),itemID:b})},getItemWindowUrl:function(b,c){return a.substitute(this._itemWindowUrl,{url:this._getPortalUrl(c),itemID:b})},
getFeaturesGenerateUrl:function(){return a.substitute(this._featuresGenerateUrl,{url:this._getPortalUrl()})},getGenerateTokenUrl:function(){return a.substitute(this._generateTokenUrl,{url:this._getPortalSecureUrl(),referer:encodeURIComponent(window.location.host)})},getRelatedItemsUrl:function(b){return a.substitute(this._relatedItemsUrl,{url:this._getPortalUrl(),itemID:b})},getSearchServiceNameAvailableUrl:function(b,c,d){return a.substitute(this._searchServiceNameAvailableUrl,{url:this._getPortalUrl(),
portalID:b,name:c,type:d})},getShareUserItemUrl:function(b){return a.substitute(this._shareUserItemUrl,{url:this._getPortalUrl(),userName:this.getCurrentUsername(),itemID:b})},getUnshareUserItemUrl:function(b){return a.substitute(this._unshareUserItemUrl,{url:this._getPortalUrl(),userName:this.getCurrentUsername(),itemID:b})},getUpdateUserItemUrl:function(b){return a.substitute(this._updateUserItemUrl,{url:this._getPortalUrl(),userName:this.getCurrentUsername(),itemID:b})},requestGetUserSelf:function(){return d({url:a.substitute(this._userSelfUrl,
{url:this._getPortalUrl()}),content:{f:"json"}})},_getPortalUrl:function(b){var c=/^https:\/\//;return this.allSSL||c.test(this.url)?this._getPortalSecureUrl(b):a.substitute(this._portalUrl,{protocol:"http://",portalName:this.getPortalName(b)})},_getPortalSecureUrl:function(b){return a.substitute(this._portalUrl,{protocol:"https://",portalName:this.getPortalName(b)})},getPortalName:function(a){return a&&this.urlKey&&this.customBaseUrl?(this.urlKey+"."+this.customBaseUrl).replace("https://","").replace("http://",
""):this.url.replace("https://","").replace("http://","")},getCurrentUsername:function(){var a=this.getPortalUser();return a&&a.username},toJSON:function(){},getUserRole:function(){var a=this.getPortalUser();return a&&a.role&&(a=a.role.split("_"),1<a.length)?a[1]:""},getUserItem:function(c){var g=new b;d({url:a.substitute(this._itemInfoUrl,{url:this._getPortalUrl(),userName:this.getCurrentUsername(),itemID:c}),content:{f:"json"}}).then(function(a){g.resolve(a)},function(a){g.reject(a)});return g.promise}})})},
"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s){var u={options:{disableIdentityLookup:!0},requestParams:{f:"json"}},t=function(a){function c(e){a[e]||(a[e]=function(){var c=arguments;return b.when(a,function(a){Array.prototype.unshift.call(c,a.results||a);return t(d[e].apply(d,
c))})})}if(!a)return a;a.then&&(a=m.delegate(a));a.total||(a.total=b.when(a,function(a){return f.isDefined(a.total)?a.total:a.length||0}));c("forEach");c("filter");c("map");c("some");c("every");return a},w={useSSL:function(a,b){var c=u&&u.self||{};if(c&&!c.isPortal)return-1!==a.indexOf("https:")||c.allSSL?b.replace("http:","https:"):b;var d=w.getLocation(b);if(-1<c.portalHostname.toLowerCase().indexOf(d.hostname.toLowerCase())&&d.port&&"80"!==d.port&&"443"!==d.port){var e=d.pathname,e=0===e.indexOf("/")?
e:"/"+e;return c.allSSL||-1<a.indexOf("https:")?"https://"+d.hostname+(c.httpsPort&&"443"!==c.httpsPort?":"+c.httpsPort:"")+e+d.search:"http://"+d.hostname+(c.httpPort&&"80"!==c.httpPort?":"+c.httpPort:"")+e+d.search}return-1!==a.indexOf("https:")||c.allSSL?b.replace("http:","https:"):b},formatUrl:function(a){var b=u.currentToken;return-1!==a.indexOf("null")?null:w.useSSL(window.location.protocol,b?a+(-1!==a.indexOf("?")?"\x26":"?")+("token\x3d"+b):a)},getLocation:function(a){var b=document.createElement("a");
b.href=a;return{protocol:b.protocol,hostname:b.hostname,port:b.port,pathname:b.pathname,search:b.search,hash:b.hash,host:b.host}},resultsToTypedArray:function(a,b,c){c=c?c.listings||c.notifications||c.userInvitations||c.tags||c.items||c.groups||c.comments||c.provisions||c.results||c:[];return d.map(c,function(c){c=m.mixin(c,b||{});return a?new a(c):c})},clearFieldsFromObject:function(a,b){var c,d=a.length;if(m.isArray(a))for(c=0;c<d;c++)delete b[a[c]];else for(c in a)delete b[c];return b},requestToTypedArray:function(a,
b,c,d,e){return t(w.request(a,b,c).then(m.partial(w.resultsToTypedArray,d,e)))},request:function(a,b,c){var d;b&&b.portal&&delete b.portal;b&&b.form&&(d=b.form,delete b.form);b=m.mixin(m.mixin({},b||{}),u.requestParams);c=m.mixin(c||{},u.options);return e({url:w.useSSL(window.location.protocol,a.url||a),content:b,callbackParamName:"callback",timeout:c&&c.timeout||0,form:d},c)},formatQueryParams:function(a,b,c){a=m.mixin(m.mixin({},a),m.isString(b)?{q:b}:b||{});a.q=!c&&u.extraQuery?"("+a.q+")"+u.extraQuery:
a.q;return a}},v=g([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(a){m.mixin(this,a);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?new Date(this.created):null}}),x=g([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(a){m.mixin(this,a);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),B=g([],{declaredClass:"esri.arcgis.PortalItem",constructor:function(a){m.mixin(this,a);this.folderId=this.ownerFolder||
this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")):null;this.itemDataUrl=w.formatUrl(this.itemUrl+"/data");this.thumbnailUrl=w.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?
new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var a=this.type;return{source:-1<d.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===a?a:null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(a){var b=m.isString(a)?{comment:a}:a;return w.request(this.itemUrl+"/addComment",
b,{usePost:!0}).then(m.hitch(this,function(a){return new v(m.mixin(b,{id:a.commentId,item:this}))}))},updateComment:function(a){if(a&&a.url&&a.comment)return w.request(a.url+"/update",{comment:a.comment},{usePost:!0}).then(function(b){a.id=b.commentId;return a});throw Error();},getComments:function(){return w.requestToTypedArray(this.itemUrl+"/comments",null,null,v,{item:this})},deleteComment:function(a){if(a&&a.url)return w.request(a.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(a){var b=
m.isObject(a)?a:{rating:parseFloat(a)};return w.request(this.itemUrl+"/addRating",b,{usePost:!0}).then(m.hitch(this,function(a){return new x(m.mixin(b,{id:a.ratingId,item:this}))}))},getRating:function(){return w.request(this.itemUrl+"/rating").then(m.hitch(this,function(a){return new x(m.mixin(a,{item:this}))}))},deleteRating:function(){return w.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var a=this.type,b=this.typeKeywords||[],c=a;"Feature Service"===a||"Feature Collection"===
a?c=-1<d.indexOf(b,"Table")?"Table":-1<d.indexOf(b,"Route Layer")?"Route Layer":"Feature Layer":"Image Service"===a?c=-1<d.indexOf(b,"Elevation 3D Layer")?"Elevation Layer":"Imagery Layer":"Scene Service"===a?c="Scene Layer":"Scene Package"===a?c="Scene Layer Package":"Stream Service"===a?c="Feature Layer":"Geoprocessing Service"===a&&this.portal&&this.portal.isPortal?c=-1<d.indexOf(b,"Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===a?c="Locator":"Microsoft Powerpoint"===a?c="Microsoft PowerPoint":
"GeoJson"===a?this.type=c="GeoJSON":"Globe Service"===a?c="Globe Layer":"Vector Tile Service"===a?c="Tile Layer":"Map Service"===a?c=-1<d.indexOf(b,"Hosted Service")||-1<d.indexOf(b,"Tiled")?"Tile Layer":"Map Image Layer":a&&-1<a.toLowerCase().indexOf("add in")?c=a.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===a&&(c="Big Data File Share");return c},_getIconUrl:function(){var a=this.type&&this.type.toLowerCase()||"",b=this.typeKeywords||[],c=!1,e=!1,f=!1;0<a.indexOf("service")||"feature collection"===
a||"kml"===a||"wms"===a||"wmts"===a||"wfs"===a?(c=-1<d.indexOf(b,"Hosted Service"),"feature service"===a||"feature collection"===a||"kml"===a||"wfs"===a?(f=-1<d.indexOf(b,"Table"),e=-1<d.indexOf(b,"Route Layer"),a=f?"table":e?"routelayer":c?"featureshosted":"features"):a="map service"===a||"wms"===a||"wmts"===a?c||-1<d.indexOf(b,"Tiled")||"wmts"===a?"maptiles":"mapimages":"scene service"===a?-1<d.indexOf(b,"Line")?"sceneweblayerline":-1<d.indexOf(b,"3DObject")?"sceneweblayermultipatch":-1<d.indexOf(b,
"Point")?"sceneweblayerpoint":-1<d.indexOf(b,"IntegratedMesh")?"sceneweblayermesh":-1<d.indexOf(b,"PointCloud")?"sceneweblayerpointcloud":-1<d.indexOf(b,"Polygon")?"sceneweblayerpolygon":"sceneweblayer":"image service"===a?-1<d.indexOf(b,"Elevation 3D Layer")?"elevationlayer":"imagery":"stream service"===a?"streamlayer":"vector tile service"===a?"vectortile":"datastore catalog service"===a?"datastorecollection":"geocoding service"===a?"geocodeservice":"layers"):a="web map"===a||"cityengine web scene"===
a?"maps":"web scene"===a?-1<d.indexOf(b,"ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===a||"mobile application"===a||"application"===a||"operation view"===a||"desktop application"===a?"apps":"map document"===a||"map package"===a||"published map"===a||"scene document"===a||"globe document"===a||"basemap package"===a||"mobile basemap package"===a||"mobile map package"===a||"project package"===a||"project template"===a||"pro map"===a||"layout"===a||"layer"===a&&-1<d.indexOf(b,
"ArcGIS Pro")||"explorer map"===a&&d.indexOf(b,"Explorer Document")?"mapsgray":"service definition"===a||"csv"===a||"shapefile"===a||"cad drawing"===a||"geojson"===a||"360 vr experience"===a?"datafiles":"explorer add in"===a||"desktop add in"===a||"windows viewer add in"===a||"windows viewer configuration"===a?"appsgray":"arcgis pro add in"===a||"arcgis pro configuration"===a?"addindesktop":"rule package"===a||"file geodatabase"===a||"csv collection"===a||"kml collection"===a||"windows mobile package"===
a||"map template"===a||"desktop application template"===a||"arcpad package"===a||"code sample"===a||"form"===a||"document link"===a||"vector tile package"===a||"operations dashboard add in"===a||"rules package"===a||"image"===a||"workflow manager package"===a||"desktop style"===a||"explorer map"===a&&-1<d.indexOf(b,"Explorer Mapping Application")||-1<d.indexOf(b,"Document")?"datafilesgray":"network analysis service"===a||"geoprocessing service"===a||"geodata service"===a||"geometry service"===a||
"geoprocessing package"===a||"locator package"===a||"geoprocessing sample"===a||"workflow manager service"===a||"raster function template"===a?"toolsgray":"layer"===a||"layer package"===a||"explorer layer"===a?"layersgray":"scene package"===a?"scenepackage":"tile package"===a?"tilepackage":"task file"===a?"taskfile":"report template"===a?"report-template":"statistical data collection"===a?"statisticaldatacollection":"insights workbook"===a?"workbook":"insights model"===a?"insightsmodel":"insights page"===
a?"insightspage":"relational database connection"===a?"relationaldatabaseconnection":"big data file share"===a?"datastorecollection":"image collection"===a?"imagecollection":"style"===a?"style":"maps";return a?h.toUrl("../css/images/item_type_icons/"+a+"16.png"):null},_getIsPremiumContent:function(){var a=this.typeKeywords,b=!1;if(-1<d.indexOf(a,"Requires Subscription")||-1<d.indexOf(a,"Requires Credits"))b=!0;return b},_getPremiumIconUrl:function(){var a=this.typeKeywords,b;this.isPremiumContent&&
(b=-1<d.indexOf(a,"Requires Credits")?"premiumcredits":"premiumitem");return b?h.toUrl("../css/images/item_type_icons/"+b+"16.png"):null}}),A=g([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(a){m.mixin(this,a);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?w.formatUrl(this.url+"/info/"+
this.banner):"";this.thumbnail=this.thumbnail?w.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?w.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var b in this.listingProperties)this[b]&&
(this.listingProperties[b]=this[b]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=d.map(this.screenshots,m.hitch(this,function(a){return w.formatUrl(this.url+"/info/"+a)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?w.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+this.vendor.thumbnail):w.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return w.requestToTypedArray(this.commentsUrl,
null,null,v,{item:this})},getVendor:function(){return this.vendor}}),C=g([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(a){m.mixin(this,a);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;this.listing=a.listing?new A(m.mixin(a.listing,{portal:this.portal})):null}}),z=g([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(a){m.mixin(this,
a);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=w.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return w.request(this.url+"/users")},queryItems:function(a,b){a=w.formatQueryParams({},a,b);a.q="group:"+this.id+(a.q?" "+a.q:"");return this.portal.queryItems(a)}}),F=g([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(a){m.mixin(this,
a);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return w.requestToTypedArray(this.url,null,null,B,{portal:this.portal,folderId:this.id})}}),H=g([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(a){m.mixin(this,a);this.url=(this.portal&&this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;
this.thumbnailUrl=this.thumbnail?w.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getGroups:function(){return t(w.request(this.url).then(m.hitch(this,function(a){return w.resultsToTypedArray(z,{portal:this.portal},a.groups)})))},getNotifications:function(){return w.requestToTypedArray(this.url+"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return w.requestToTypedArray(this.url+
"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return w.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return t(this.getContent().then(function(a){return a.folders}))},getItems:function(a){return t(this.getContent(a).then(function(a){return a.items}))},getItem:function(a){return w.request(this.portal.portalUrl+"content/items/"+a).then(m.hitch(this,function(a){return new B(m.mixin(a,{portal:this.portal}))}))},getContent:function(a){var b=
this.url.replace("community","content")+(a?"/"+a:"");return w.request(b).then(m.hitch(this,function(b){b.folders=w.resultsToTypedArray(F,{portal:this.portal},b.folders);b.items=w.resultsToTypedArray(B,{portal:this.portal,folderId:a},b.items);return b}))}});return{Portal:g([s],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(a){a=m.isObject(a)?a:{url:a};this.registerConnectEvents();u={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};a.self?
(u.self=a.self,m.mixin(this,{url:a.url||p.getProtocolForWebResource()+"//"+(a.self.urlKey?a.self.urlKey+"."+a.self.customBaseUrl:a.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",a=a.self.user?this.signIn():this.init(this.url)):(a.url&&m.mixin(this,{url:a.url}),a=this.init(this.url));a.then(m.hitch(this,function(){this.emit("ready",this);this.onLoad(this)}))},init:function(a,b){a=(a||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==
a.indexOf("/sharing")?a+"/":a+"/sharing/rest/";return this._getSelf(this.portalUrl).then(m.hitch(this,function(a){u.self=m.mixin({},a);if((a=a.user)&&b)u.currentToken=b&&b.token,u.loggedInUser=new H(m.mixin(a,{portal:this,credential:b}));u.self.id&&!1===u.self.canSearchPublic&&(u.extraQuery=" AND orgid:"+u.self.id);m.mixin(this,u.self);this.thumbnailUrl=w.formatUrl(this.portalUrl+"portals/self/resources/"+this.thumbnail);this.isOrganization=this.access&&this.access.length?!0:!1;this.created=this.created?
new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),m.hitch(this,function(a){this.onError(a);throw a;}))},signIn:function(){var a=new b,c=m.hitch(this,function(){this._onSignIn().then(m.hitch(this,function(){a.resolve(u.loggedInUser)}),m.hitch(this,function(b){a.reject(b)}))});if(!u||!u.self)this.on("load",m.hitch(this,function(){c()}));else u&&u.loggedInUser?setTimeout(function(){a.resolve(u.loggedInUser)},0):c();return a},signOut:function(){u.loggedInUser.credential&&
u.loggedInUser.credential.destroy();u.loggedInUser=null;u.options.disableIdentityLookup=!0;w.clearFieldsFromObject(u.self,this);u.self=null;return this.init(this.url)},getPortalUser:function(){return u.loggedInUser},addResource:function(a,b){return w.request(this.portalUrl+"portals/self/addResource",{key:a,text:b},{usePost:!0})},update:function(a){return w.request(this.portalUrl+"portals/self/update",a,{usePost:!0})},queryGroups:function(a,b){return this._queryPortal(this.portalUrl+"community/groups",
w.formatQueryParams({},a,b),z)},queryItems:function(a,b){return this._queryPortal(this.portalUrl+"search",w.formatQueryParams({},a,b),B)},queryListings:function(a){a=w.formatQueryParams({},a,!0);var b="";a.q&&-1<a.q.toLowerCase().indexOf("mylistings:true")?(a.q=a.q.toLowerCase().replace("mylistings:true",""),b="?mylistings\x3dtrue"):a.q||(a.q='""');return this._queryPortal(this.portalUrl+"content/listings"+b,a,A)},queryCustomerList:function(a,b){var c=w.formatQueryParams({},a,!0);return this._queryPortal(this.portalUrl+
"portals/self/customersList",c)},getProvisions:function(){return this.getCustomers().then(m.hitch(this,function(a){return a.purchases}))},getInterests:function(){return this.getCustomers().then(m.hitch(this,function(a){return a.interests}))},getTrials:function(){return this.getCustomers().then(m.hitch(this,function(a){return a.trials}))},getCustomers:function(a){return w.request(this.portalUrl+"portals/self/customers",{status:a||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(a){return a.purchases})},
getMyInterests:function(){return this.getPurchases().then(function(a){return a.interests})},getPurchases:function(){return w.request(this.portalUrl+"portals/self/purchases").then(m.hitch(this,function(a){a.interests=d.map(a.interests,function(a){return m.mixin(a.provision,{listing:a.listing})});a.purchases=d.map(a.purchases,function(a){return m.mixin(a.provision,{listing:a.listing})});a.trials=d.map(a.trials,function(a){return m.mixin(a.provision,{listing:a.listing})});a.interests=w.resultsToTypedArray(C,
{portal:this},a.interests);a.trials=w.resultsToTypedArray(C,{portal:this},a.trials);a.purchases=w.resultsToTypedArray(C,{portal:this},a.purchases);return a}))},queryUsers:function(a,b){return this._queryPortal(this.portalUrl+"community/users",w.formatQueryParams({sortField:"username"},a,b),H)},_onSignIn:function(){u.options.disableIdentityLookup=!1;u.self=null;return n.id.getCredential(this.portalUrl).then(m.hitch(this,"init",this.url)).then(function(){return u.loggedInUser},m.hitch(this,function(a){u.options.disableIdentityLookup=
!0;this.onError(a);throw a;}))},_getSelf:function(c){var d;c+="portals/self";u.self?(d=new b,setTimeout(function(){d.resolve(u.self)},0)):d=w.request(c,{culture:a.locale});return d},_queryPortal:function(a,c,d){var e=m.mixin({num:10,start:0,sortField:"title",sortOrder:"asc"},c),f=["start","query","num","nextStart"];a=w.request(a,e).then(m.hitch(this,function(a){a.results=w.resultsToTypedArray(d,{portal:this},a);a.queryParams=m.mixin({},e);a.nextQueryParams=m.mixin(e,{start:a.nextStart});return w.clearFieldsFromObject(f,
a)}));a=m.delegate(a);a.queryParams=m.mixin({},e);a.nextQueryParams=b.when(a,function(a){return a.nextQueryParams});return t(a)}}),PortalFolder:F,PortalGroup:z,PortalItem:B,PortalUser:H,PortalComment:v,PortalRating:x,PortalUtil:w,PortalResult:t,PortalListing:A}})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(g,m,a,b){g=new g;m.id=b.safeMixin(g,a);return m.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v){return m([w],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(a){d.mixin(this,a);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(c,d,e){this._nls||(this._nls=v.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var f=this._loginDialog,g=e&&e.error,n=e&&e.token,p=new b(function(){f.onCancel()});if(f.open)return c=Error("BUSY"),c.code="IdentityManager.1",c.log=a.isDebug,p.errback(c),p;u.hide(f.errMsg_);g&&(403==g.code&&n)&&(h.set(f.errMsg_,"innerHTML",this._nls.forbidden),u.show(f.errMsg_));f.dfd_=
p;f.serverInfo_=d;f.resUrl_=c;f.admin_=e&&e.isAdmin;h.set(f.resLink_,{title:c,innerHTML:"("+(this.getResourceName(c)||this._nls.lblItem)+")"});h.set(f.serverLink_,{title:d.server,innerHTML:(-1!==d.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":d.server)+" "});f.txtPwd_.set("value","");f.show();return p},_createLoginDialog:function(){var b=this._nls,c=s.substitute(b,this._dialogContent),c=s.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},c),d=new e({title:b.title,content:c,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(a){a.charOrCode===n.ENTER&&this.execute_()},execute_:function(){var a=this.txtUser_.get("value"),c=this.txtPwd_.get("value"),d=this.dfd_,f=this;if(this.form_.validate()&&a&&c){this.btnSubmit_.set("label",b.lblSigning);var g=p.id.findCredential(f.resUrl_,a),n=function(c){f.btnSubmit_.set("label",
b.lblOk);f.btnSubmit_.set("disabled",!1);u.hide(f.errMsg_);f.hide();e._DialogLevelManager.hide(f);var h=f.serverInfo_;f.dfd_=f.serverInfo_=f.generateDfd_=f.resUrl_=null;var n,p,m=g,v;c&&(n=c.token,p=s.isDefined(c.expires)?Number(c.expires):null,v=!!c.ssl,m?(m.userId=a,m.token=n,m.expires=p,m.validity=c.validity,m.ssl=v,m.creationTime=(new Date).getTime()):m=new t({userId:a,server:h.server,token:n,expires:p,ssl:v,isAdmin:f.admin_,validity:c.validity}));d.callback(m)};g&&!g._enqueued?n():(f.btnSubmit_.set("disabled",
!0),f.generateDfd_=p.id.generateToken(this.serverInfo_,{username:a,password:c},{isAdmin:this.admin_}).addCallback(n).addErrback(function(a){f.btnSubmit_.set("disabled",!1);f.generateDfd_=null;f.btnSubmit_.set("label",b.lblOk);h.set(f.errMsg_,"innerHTML",a&&a.code?b.invalidUser:b.noAuthService);u.show(f.errMsg_)}))}},cancel_:function(){d.generateDfd_&&d.generateDfd_.cancel();var b=d.dfd_,c=d.resUrl_,f=d.serverInfo_;d.btnSubmit_.set("disabled",!1);d.dfd_=d.serverInfo_=d.generateDfd_=d.resUrl_=null;
u.hide(d.errMsg_);e._DialogLevelManager.hide(d);d.esriIdMgr_.onDialogCancel({resourceUrl:c,serverInfo:f});c=Error("ABORTED");c.code="IdentityManager.2";c.log=a.isDebug;b.errback(c)}}),c=d.domNode;d.form_=f.byNode(g.query(".esriIdForm",c)[0]);d.txtUser_=f.byNode(g.query(".esriIdUser",c)[0]);d.txtPwd_=f.byNode(g.query(".esriIdPwd",c)[0]);d.btnSubmit_=f.byNode(g.query(".esriIdSubmit",c)[0]);d.btnCancel_=f.byNode(g.query(".esriIdCancel",c)[0]);d.resLink_=g.query(".resLink",c)[0];d.serverLink_=g.query(".serverLink",
c)[0];d.errMsg_=g.query(".esriErrorMsg",c)[0];d.connect(d.txtUser_,"onKeyPress",d.keypressed_);d.connect(d.txtPwd_,"onKeyPress",d.keypressed_);d.connect(d.btnSubmit_,"onClick",d.execute_);d.connect(d.btnCancel_,"onClick",d.onCancel);d.connect(d,"onCancel",d.cancel_);return d}})})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M,L,G,O){function S(){}var U=new d;U.resolve(!0);z=b("dijit._DialogBase"+(v("dojo-bidi")?"_NoBidi":""),[H,I,K,J],{templateString:O,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:z.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:0.9,
closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=p.getLocalization("dijit","common");u.mixin(this,a);this.inherited(arguments)},postCreate:function(){f.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);a.after(this,"onExecute",u.hitch(this,"hide"),!0);a.after(this,"onCancel",u.hitch(this,"hide"),!0);this._modalconnects=
[]},onLoad:function(){this.resize();this._position();this.autofocus&&E.isTop(this)&&(this._getFocusItems(),C.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();C.focus(this._firstFocusItem)},_endDrag:function(){var a=n.position(this.domNode),b=x.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var b=this.domNode;this.titleBar&&this.draggable?
(this._moveable=new (6==v("ie")?A:B)(b,{handle:this.titleBar}),a.after(this._moveable,"onMoveStop",u.hitch(this,"_endDrag"),!0)):h.add(b,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":m.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:u.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!h.contains(this.ownerDocumentBody,"dojoMove")){var a=this.domNode,b=x.getBox(this.ownerDocument),
c=this._relativePosition,d=n.position(a),e=Math.floor(b.l+(c?Math.min(c.x,b.w-d.w):(b.w-d.w)/2)),b=Math.floor(b.t+(c?Math.min(c.y,b.h-d.h):(b.h-d.h)/2));f.set(a,{left:e+"px",top:b+"px"})}},_onKey:function(a){if(a.keyCode==s.TAB){this._getFocusItems();var b=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(C.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b==this._lastFocusItem&&!a.shiftKey&&(C.focus(this._firstFocusItem),
a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==s.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return U.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),E.hide(this));var a=x.get(this.ownerDocument);this._modalconnects.push(t(a,"scroll",u.hitch(this,"resize",null)));this._modalconnects.push(t(this.domNode,"keydown",
u.hitch(this,"_onKey")));f.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();var b;this._fadeInDeferred=new d(u.hitch(this,function(){b.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,S);a=this._fadeInDeferred.promise;b=e.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:u.hitch(this,function(){E.show(this,this.underlayAttrs)}),onEnd:u.hitch(this,function(){this.autofocus&&E.isTop(this)&&(this._getFocusItems(),
C.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return a},hide:function(){if(!this._alreadyInitialized||!this.open)return U.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new d(u.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,S);this._fadeOutDeferred.then(u.hitch(this,"onHide"));var b=this._fadeOutDeferred.promise;a=e.fadeOut({node:this.domNode,duration:this.duration,
onEnd:u.hitch(this,function(){this.domNode.style.display="none";E.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var c;c=this._modalconnects.pop();)c.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return b},resize:function(a){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!a){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),m.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(a){a&&f.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var b=x.getBox(this.ownerDocument);b.w*=this.maxRatio;b.h*=this.maxRatio;var c=n.position(this.domNode);c.w>=b.w||c.h>=b.h?(a={w:Math.min(c.w,b.w),h:Math.min(c.h,b.h)},this._shrunk=!0):this._shrunk=!1}if(a){n.setMarginBox(this.domNode,
a);b=[];this.titleBar&&b.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&b.push({domNode:this.actionBarNode,region:"bottom"});c={domNode:this.containerNode,region:"center"};b.push(c);var d=G.marginBox2contentBox(this.domNode,a);G.layoutChildren(this.domNode,d,b);this._singleChild?(b=G.marginBox2contentBox(this.containerNode,c),this._singleChild.resize({w:b.w,h:b.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();!v("touch")&&!a&&this._position()}},
_layoutChildren:function(){m.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();E.hide(this);this.inherited(arguments)}});v("dojo-bidi")&&(z=b("dijit._DialogBase",z,{_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},
_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var T=b("dijit.Dialog",[L,z],{});T._DialogBase=z;var E=T._DialogLevelManager={_beginZIndex:950,show:function(a,b){Q[Q.length-1].focus=C.curNode;var c=Q[Q.length-1].dialog?Q[Q.length-1].zIndex+2:T._DialogLevelManager._beginZIndex;f.set(a.domNode,"zIndex",c);M.show(b,c-1);Q.push({dialog:a,underlayAttrs:b,zIndex:c})},hide:function(a){if(Q[Q.length-1].dialog==a){Q.pop();var b=Q[Q.length-
1];1==Q.length?M.hide():M.show(b.underlayAttrs,b.zIndex-1);if(a.refocus){a=b.focus;if(b.dialog&&(!a||!c.isDescendant(a,b.dialog.domNode)))b.dialog._getFocusItems(),a=b.dialog._firstFocusItem;if(a)try{a.focus()}catch(d){}}}else b=m.indexOf(m.map(Q,function(a){return a.dialog}),a),-1!=b&&Q.splice(b,1)},isTop:function(a){return Q[Q.length-1].dialog==a}},Q=T._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];C.watch("curNode",function(a,b,c){a=Q[Q.length-1].dialog;if(c&&a&&!a._fadeOutDeferred&&
c.ownerDocument==a.ownerDocument){do if(c==a.domNode||h.contains(c,"dijitPopup"))return;while(c=c.parentNode);a.focus()}});v("dijit-legacy-requires")&&w(0,function(){g(["dijit/TooltipDialog"])});return T})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(g,m){var a=m.prototype.onMove;return g("dojo.dnd.TimedMoveable",m,{timeout:40,constructor:function(a,d){d||(d={});d.timeout&&("number"==typeof d.timeout&&0<=d.timeout)&&(this.timeout=d.timeout)},onMoveStop:function(b){b._timer&&
(clearTimeout(b._timer),a.call(this,b,b._leftTop));m.prototype.onMoveStop.apply(this,arguments)},onMove:function(b,d){b._leftTop=d;if(!b._timer){var c=this;b._timer=setTimeout(function(){b._timer=null;a.call(c,b,b._leftTop)},this.timeout)}}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s){var u=
g("dijit.DialogUnderlay",[n,f],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){b.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(c(this.domNode,"keydown",m.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=h.getBox(this.ownerDocument);b.top=c.t+"px";b.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new e(this.domNode);var a=h.get(this.ownerDocument);this._modalConnects=[p.on("resize",m.hitch(this,"layout")),c(a,"scroll",
m.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});u.show=function(a,b){var c=u._singleton;!c||c._destroyed?c=s._underlay=u._singleton=new u(a):a&&c.set(a);d.set(c.domNode,"zIndex",b);c.open||c.show()};u.hide=function(){var a=
u._singleton;a&&!a._destroyed&&a.hide()};return u})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(g,m,a,b){return g(b.Credential,{})})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/regexp ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z){var F={},H=function(a){var b=(new h(a.owningSystemUrl)).host;a=(new h(a.server)).host;var c=/.+\.arcgis\.com$/i;return c.test(b)&&c.test(a)},J=function(a,c){return!(!H(a)||!c||!b.some(c,function(b){return b.test(a.server)}))},I,K=g(A,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=a.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=
[];this._getOAuthHash()},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_adminSvcs:/\/admin\/services(\/|$)/i,_agolSuffix:".arcgis.com",_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},
{regex:/https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer|VectorTileServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(a){var c=this.serverInfos;c?(a=b.filter(a,function(a){return!this.findServerInfo(a.server)},this),this.serverInfos=c.concat(a)):
this.serverInfos=a;b.forEach(a,function(a){a.owningSystemUrl&&this._portals.push(a.owningSystemUrl);if(a.hasPortal){this._portals.push(a.server);var b=u.defaults.io.corsEnabledServers,c=this._getOrigin(a.tokenServiceUrl);v.canUseXhr(a.server)||b.push(a.server.replace(/^https?:\/\//i,""));v.canUseXhr(c)||b.push(c.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(a){var c=this.oAuthInfos;c?(a=b.filter(a,function(a){return!this.findOAuthInfo(a.portalUrl)},this),this.oAuthInfos=c.concat(a)):
this.oAuthInfos=a},registerToken:function(b){var c=this._sanitizeUrl(b.server),d=this.findServerInfo(c),e=!0,f;d||(d=new w,d.server=this._getServerInstanceRoot(c),d.tokenServiceUrl=this._getTokenSvcUrl(c),d.hasPortal=!0,this.registerServers([d]));(f=this.findCredential(c,b.userId))?(a.mixin(f,b),e=!1):(f=new I({userId:b.userId,server:d.server,token:b.token,expires:b.expires,ssl:b.ssl,scope:this._isServerRsrc(c)?"server":"portal"}),f.resources=[c],this.credentials.push(f));f.onTokenChange(!1);e||f.refreshServerTokens()},
toJson:function(){return t.fixJson({serverInfos:b.map(this.serverInfos,function(a){return a.toJson()}),oAuthInfos:b.map(this.oAuthInfos,function(a){return a.toJson()}),credentials:b.map(this.credentials,function(a){return a.toJson()})})},initialize:function(d){if(d){a.isString(d)&&(d=c.fromJson(d));var e=d.serverInfos,f=d.oAuthInfos;d=d.credentials;if(e){var h=[];b.forEach(e,function(a){a.server&&a.tokenServiceUrl&&h.push(a.declaredClass?a:new w(a))});h.length&&this.registerServers(h)}if(f){var g=
[];b.forEach(f,function(a){a.appId&&g.push(a.declaredClass?a:new z(a))});g.length&&this.registerOAuthInfos(g)}d&&b.forEach(d,function(a){a.userId&&(a.server&&a.token&&a.expires&&a.expires>(new Date).getTime())&&(a=a.declaredClass?a:new I(a),a.onTokenChange(),this.credentials.push(a))},this)}},findServerInfo:function(a){var c;a=this._sanitizeUrl(a);b.some(this.serverInfos,function(b){this._hasSameServerInstance(b.server,a)&&(c=b);return!!c},this);return c},findOAuthInfo:function(a){var c;a=this._sanitizeUrl(a);
b.some(this.oAuthInfos,function(b){this._hasSameServerInstance(b.portalUrl,a)&&(c=b);return!!c},this);return c},findCredential:function(a,c){var d,e;a=this._sanitizeUrl(a);e=this._isServerRsrc(a)?"server":"portal";c?b.some(this.credentials,function(b){this._hasSameServerInstance(b.server,a)&&(c===b.userId&&b.scope===e)&&(d=b);return!!d},this):b.some(this.credentials,function(b){this._hasSameServerInstance(b.server,a)&&(-1!==this._getIdenticalSvcIdx(a,b)&&b.scope===e)&&(d=b);return!!d},this);return d},
getCredential:function(b,c){var e,f,h=!0;t.isDefined(c)&&(a.isObject(c)?(e=!!c.token,f=c.error,h=!1!==c.prompt):e=c);b=this._sanitizeUrl(b);var g=new d(x._dfdCanceller),n=this._isAdminResource(b),p=e&&this._doPortalSignIn(b)?this._getEsriAuthCookie():null;e=e?this.findCredential(b):null;if(p||e)return h=Error("You are currently signed in as: '"+(p&&p.email||e&&e.userId)+"'. You do not have access to this resource: "+b),h.code="IdentityManagerBase.1",h.httpCode=f&&f.httpCode,h.messageCode=f?f.messageCode:
null,h.subcode=f?f.subcode:null,h.details=f?f.details:null,h.log=m.isDebug,g.errback(h),g;if(f=this._findCredential(b,c))return g.callback(f),g;if(f=this.findServerInfo(b))!f.hasServer&&this._isServerRsrc(b)&&(f._restInfoDfd=this._getTokenSvcUrl(b,!0),f.hasServer=!0);else{p=this._getTokenSvcUrl(b);if(!p)return h=Error("Unknown resource - could not find token service endpoint."),h.code="IdentityManagerBase.2",h.log=m.isDebug,g.errback(h),g;f=new w;f.server=this._getServerInstanceRoot(b);a.isString(p)?
(f.tokenServiceUrl=p,f.hasPortal=!0):(f._restInfoDfd=p,f.hasServer=!0);this.registerServers([f])}h&&(f.hasPortal&&void 0===f._selfReq&&!this._findOAuthInfo(b))&&(f._selfReq={owningTenant:c&&c.owningTenant,selfDfd:this._getPortalSelf(f.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),b)});return this._enqueue(b,f,c,g,n)},getResourceName:function(a){return this._isRESTService(a)?a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(a)&&
a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""},generateToken:function(b,c,d){var e,f,g,n,p,u,t=this._rePortalTokenSvc.test(b.tokenServiceUrl),q=new h(window.location.href.toLowerCase()),k=this._getEsriAuthCookie(),r,w=!c;n=b.shortLivedTokenValidity;var x;c&&(x=s.id.tokenValidity||n||s.id.defaultTokenValidity,x>n&&(x=n));d&&(e=d.isAdmin,f=d.serverUrl,g=d.token,u=d.ssl,b.customParameters=d.customParameters);
if(e)n=b.adminTokenServiceUrl;else{n=b.tokenServiceUrl;p=new h(n.toLowerCase());k&&(r=(r=k.auth_tier)&&r.toLowerCase());if(("web"===r||b.webTierAuth)&&d&&d.serverUrl&&!u&&"http"===q.scheme&&(v.hasSameOrigin(q.uri,n,!0)||"https"===p.scheme&&q.host===p.host&&"7080"===q.port&&"7443"===p.port))n=n.replace(/^https:/i,"http:").replace(/:7443/i,":7080");w&&t&&(n=n.replace(/\/rest/i,""))}e=a.mixin({url:n,content:a.mixin({request:"getToken",username:c&&c.username,password:c&&c.password,serverUrl:f,token:g,
expiration:x,referer:e||t?window.location.host:null,client:e?"referer":null,f:"json"},b.customParameters),handleAs:"json",callbackParamName:w?"callback":void 0},d&&d.ioArgs);d={usePost:!w,disableIdentityLookup:!0,useProxy:this._useProxy(b,d)};t||(e.withCredentials=!1);t=B(e,d);t.addCallback(function(a){if(!a||!a.token)return a=Error("Unable to generate token"),a.code="IdentityManagerBase.3",a.log=m.isDebug,a;var d=b.server;F[d]||(F[d]={});c&&(F[d][c.username]=c.password);a.validity=x;return a});t.addErrback(function(a){});
return t},isBusy:function(){return!!this._busy},checkSignInStatus:function(a){return this.getCredential(a,{prompt:!1})},setRedirectionHandler:function(a){this._redirectFunc=a},setProtocolErrorHandler:function(a){this._protocolFunc=a},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var a=this.credentials.slice();b.forEach(a,function(a){a.destroy()})}this.onCredentialsDestroy()},_getOAuthHash:function(){var a=
window.location.hash;if(a){"#"===a.charAt(0)&&(a=a.substring(1));var a=e.queryToObject(a),b=!1;a.access_token&&a.expires_in&&a.state&&a.hasOwnProperty("username")?(a.state=c.fromJson(a.state),this._oAuthHash=a,b=!0):a.error&&a.error_description&&"access_denied"===a.error&&(b=!0);if(b&&(!n("ie")||8<n("ie")))window.location.hash=""}},_findCredential:function(a,c){var d=-1,e,f,h,g,n=c&&c.token;e=c&&c.resource;var p=this._isServerRsrc(a)?"server":"portal",m=b.filter(this.credentials,function(b){return this._hasSameServerInstance(b.server,
a)&&b.scope===p},this);a=e||a;if(m.length)if(1===m.length)if(e=m[0],h=(f=(g=this.findServerInfo(e.server))&&g.owningSystemUrl)&&this.findCredential(f,e.userId),d=this._getIdenticalSvcIdx(a,e),n)-1!==d&&(e.resources.splice(d,1),this._removeResource(a,h));else return-1===d&&e.resources.push(a),this._addResource(a,h),e;else{var q,k;b.some(m,function(b){k=this._getIdenticalSvcIdx(a,b);return-1!==k?(q=b,h=(f=(g=this.findServerInfo(q.server))&&g.owningSystemUrl)&&this.findCredential(f,q.userId),d=k,!0):
!1},this);if(n)q&&(q.resources.splice(d,1),this._removeResource(a,h));else if(q)return this._addResource(a,h),q}},_findOAuthInfo:function(a){var c=this.findOAuthInfo(a);c||b.some(this.oAuthInfos,function(b){this._isIdProvider(b.portalUrl,a)&&(c=b);return!!c},this);return c},_addResource:function(a,b){b&&-1===this._getIdenticalSvcIdx(a,b)&&b.resources.push(a)},_removeResource:function(a,b){var c=-1;b&&(c=this._getIdenticalSvcIdx(a,b),-1<c&&b.resources.splice(c,1))},_useProxy:function(a,b){return b&&
b.isAdmin&&!v.hasSameOrigin(a.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(a.tokenServiceUrl)&&10.1==a.currentVersion&&!v.hasSameOrigin(a.tokenServiceUrl,window.location.href)},_getOrigin:function(a){a=new h(a);return a.scheme+"://"+a.host+(t.isDefined(a.port)?":"+a.port:"")},_getServerInstanceRoot:function(a){var b=a.toLowerCase(),c=b.indexOf(this._agsRest);-1===c&&this._isAdminResource(a)&&(c=b.indexOf("/admin"));-1===c&&(c=b.indexOf("/sharing"));-1===c&&"/"===b.substr(-1)&&
(c=b.length-1);return-1<c?a.substring(0,c):a},_hasSameServerInstance:function(a,b){a=a.toLowerCase();b=this._getServerInstanceRoot(b).toLowerCase();a=a.substr(a.indexOf(":"));b=b.substr(b.indexOf(":"));return a===b},_sanitizeUrl:function(b){b=v.fixUrl(a.trim(b));var c=(u.defaults.io.proxyUrl||"").toLowerCase(),d=c?b.toLowerCase().indexOf(c+"?"):-1;-1!==d&&(b=b.substring(d+c.length+1));return v.urlToObject(b).path},_isRESTService:function(a){return-1<a.indexOf(this._agsRest)},_isAdminResource:function(a){return this._agsAdmin.test(a)||
this._adminSvcs.test(a)},_isServerRsrc:function(a){return this._isRESTService(a)||this._isAdminResource(a)},_isIdenticalService:function(a,b){var c;if(this._isRESTService(a)&&this._isRESTService(b)){var d=this._getSuffix(a).toLowerCase(),e=this._getSuffix(b).toLowerCase();c=d===e;c||(c=/(.*)\/(MapServer|FeatureServer).*/ig,c=d.replace(c,"$1")===e.replace(c,"$1"))}else this._isAdminResource(a)&&this._isAdminResource(b)?c=!0:!this._isServerRsrc(a)&&(!this._isServerRsrc(b)&&this._isPortalDomain(a))&&
(c=!0);return c},_isPortalDomain:function(c){c=c.toLowerCase();var d=(new h(c)).authority,e=this._portalConfig,f=-1!==d.indexOf(this._agolSuffix);!f&&e&&(f=this._hasSameServerInstance(this._getServerInstanceRoot(e.restBaseUrl),c));if(!f){if(!this._arcgisUrl&&(e=a.getObject("esri.arcgis.utils.arcgisUrl")))this._arcgisUrl=(new h(e)).authority;this._arcgisUrl&&(f=this._arcgisUrl.toLowerCase()===d)}f||(f=b.some(this._portals,function(a){return this._hasSameServerInstance(a,c)},this));return f=f||this._agsPortal.test(c)},
_isIdProvider:function(a,c){var d=-1,e=-1;b.forEach(this._gwDomains,function(b,f){-1===d&&b.regex.test(a)&&(d=f);-1===e&&b.regex.test(c)&&(e=f)});var f=!1;if(-1<d&&-1<e)if(0===d||4===d){if(0===e||4===e)f=!0}else if(1===d){if(1===e||2===e)f=!0}else 2===d?2===e&&(f=!0):3===d&&3===e&&(f=!0);if(!f){var h=this.findServerInfo(c),g=h&&h.owningSystemUrl;g&&(H(h)&&this._isPortalDomain(g)&&this._isIdProvider(a,g))&&(f=!0)}return f},_isPublic:function(a){a=this._sanitizeUrl(a);return b.some(this._publicUrls,
function(b){return b.test(a)})},_getIdenticalSvcIdx:function(a,c){var d=-1;b.some(c.resources,function(b,c){return this._isIdenticalService(a,b)?(d=c,!0):!1},this);return d},_getSuffix:function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(a){var c,d;if((c=this._isRESTService(a))||this._isAdminResource(a))return d=a.toLowerCase().indexOf(c?this._agsRest:"/admin/"),c=a.substring(0,d)+"/admin/generateToken",a=a.substring(0,d)+"/rest/info",d=
B({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),d.adminUrl_=c,d;if(this._isPortalDomain(a)){var e="";b.some(this._gwDomains,function(b){b.regex.test(a)&&(e=b.tokenServiceUrl);return!!e});e||b.some(this._portals,function(b){this._hasSameServerInstance(b,a)&&(e=b+this._gwTokenUrl);return!!e},this);e||(d=a.toLowerCase().indexOf("/sharing"),-1!==d&&(e=a.substring(0,d)+this._gwTokenUrl));e||(e=this._getOrigin(a)+this._gwTokenUrl);e&&(c=(new h(a)).port,/^http:\/\//i.test(a)&&
"7080"===c&&(e=e.replace(/:7080/i,":7443")),e=e.replace(/http:/i,"https:"));return e}if(-1!==a.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_getPortalSelf:function(a,b){"https:"===window.location.protocol?a=a.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(b)&&(a=a.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return B({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,disableIdentityLookup:!0})},
_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var a;if(f.isSupported()){var b=this._getAllCookies("esri_auth"),d;for(d=0;d<b.length;d++){var e=c.fromJson(b[d]);if(e.portalApp){a=e;break}}}return a},_getAllCookies:function(a){var b=[],c=document.cookie.match(RegExp("(?:^|; )"+p.escapeString(a)+"\x3d([^;]*)","g"));if(c)for(a=0;a<c.length;a++){var d=c[a],e=d.indexOf("\x3d");-1<e&&(d=d.substring(e+1),b.push(decodeURIComponent(d)))}return b},_doPortalSignIn:function(a){if(f.isSupported()){var b=
this._getEsriAuthCookie(),c=this._portalConfig,d=window.location.href,e=this.findServerInfo(a);if(this.useSignInPage&&(c||this._isPortalDomain(d)||b)&&(e?e.hasPortal||e.owningSystemUrl&&this._isPortalDomain(e.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(d,a)||c&&(this._hasSameServerInstance(this._getServerInstanceRoot(c.restBaseUrl),a)||this._isIdProvider(c.restBaseUrl,a))||v.hasSameOrigin(d,a,!0)))return!0}return!1},_checkProtocol:function(b,c,d,e){var f=!0;e=e?c.adminTokenServiceUrl:
c.tokenServiceUrl;if(0===a.trim(e).toLowerCase().indexOf("https:")&&0!==window.location.href.toLowerCase().indexOf("https:")&&(!u.defaults.io.useCors||!v.canUseXhr(e)&&!v.canUseXhr(v.getProxyUrl(!0).path)))f=this._protocolFunc?!!this._protocolFunc({resourceUrl:b,serverInfo:c}):!1,f||(b=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),b.code="IdentityManagerBase.4",b.log=m.isDebug,d(b));return f},_enqueue:function(a,b,c,e,f,h){e||(e=new d(x._dfdCanceller));e.resUrl_=
a;e.sinfo_=b;e.options_=c;e.admin_=f;e.refresh_=h;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(e)):this._xoReqs.push(e):this._doSignIn(e);return e},_doSignIn:function(c){this._busy=c;var d=this,e=function(a){var e=c.options_&&c.options_.resource,f=c.resUrl_,h=c.refresh_,g=!1;-1===b.indexOf(d.credentials,a)&&(h&&-1!==b.indexOf(d.credentials,h)?(h.userId=a.userId,
h.token=a.token,h.expires=a.expires,h.validity=a.validity,h.ssl=a.ssl,h.creationTime=a.creationTime,g=!0,a=h):d.credentials.push(a));a.resources||(a.resources=[]);a.resources.push(e||f);a.scope=d._isServerRsrc(f)?"server":"portal";a.onTokenChange();var e=d._soReqs,n={};d._soReqs=[];b.forEach(e,function(b){if(!this._isIdenticalService(f,b.resUrl_)){var c=this._getSuffix(b.resUrl_);n[c]||(n[c]=!0,a.resources.push(b.resUrl_))}},d);c.callback(a);b.forEach(e,function(b){b.callback(a)});d._busy=c.resUrl_=
c.sinfo_=c.refresh_=null;if(!g)d.onCredentialCreate({credential:a});d._soReqs.length&&d._doSignIn(d._soReqs.shift());d._xoReqs.length&&d._doSignIn(d._xoReqs.shift())},f=function(a){c.errback(a);d._busy=c.resUrl_=c.sinfo_=c.refresh_=null;d._soReqs.length&&d._doSignIn(d._soReqs.shift());d._xoReqs.length&&d._doSignIn(d._xoReqs.shift())},h=function(a,b,h,g){var n=c.sinfo_,p=!c.options_||!1!==c.options_.prompt,s=n.hasPortal&&d._findOAuthInfo(c.resUrl_);d._doPortalSignIn(c.resUrl_)?(a=d._getEsriAuthCookie(),
s=d._portalConfig,a?e(new I({userId:a.email,server:n.server,token:a.token,expires:null})):p?(p="",a=window.location.href,p=d.signInPage?d.signInPage:s?s.baseUrl+s.signin:d._isIdProvider(a,c.resUrl_)?d._getOrigin(a)+"/home/signin.html":n.tokenServiceUrl.replace(d._rePortalTokenSvc,"")+"/home/signin.html",p=p.replace(/http:/i,"https:"),s&&!1===s.useSSL&&(p=p.replace(/https:/i,"http:")),0===a.toLowerCase().replace("https","http").indexOf(p.toLowerCase().replace("https","http"))?(n=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+
c.resUrl_),n.code="IdentityManagerBase.5",n.log=m.isDebug,f(n)):d._redirectFunc?d._redirectFunc({signInPage:p,returnUrlParamName:"returnUrl",returnUrl:a,resourceUrl:c.resUrl_,serverInfo:n}):window.location=p+"?returnUrl\x3d"+window.escape(a)):(n=Error("User is not signed in."),n.code="IdentityManagerBase.6",n.log=m.isDebug,f(n))):a?e(new I({userId:a,server:n.server,token:h,expires:t.isDefined(g)?Number(g):null,ssl:!!b})):s?(a=s._oAuthCred,a||(b=new C(s,window.localStorage),h=new C(s,window.sessionStorage),
b.isValid()&&h.isValid()?b.expires>h.expires?(a=b,h.destroy()):(a=h,b.destroy()):a=b.isValid()?b:h,s._oAuthCred=a),a.isValid()?e(new I({userId:a.userId,server:n.server,token:a.token,expires:a.expires,ssl:a.ssl,_oAuthCred:a})):d._oAuthHash&&d._oAuthHash.state.portalUrl===s.portalUrl?(p=d._oAuthHash,n=new I({userId:p.username,server:n.server,token:p.access_token,expires:(new Date).getTime()+1E3*Number(p.expires_in),ssl:"true"===p.ssl,oAuthState:p.state,_oAuthCred:a}),a.storage=p.persist?window.localStorage:
window.sessionStorage,a.token=n.token,a.expires=n.expires,a.userId=n.userId,a.ssl=n.ssl,a.save(),d._oAuthHash=null,e(n)):p?c._pendingDfd=d.oAuthSignIn(c.resUrl_,n,s,c.options_).addCallbacks(e,f):(n=Error("User is not signed in."),n.code="IdentityManagerBase.6",n.log=m.isDebug,f(n))):p?d._checkProtocol(c.resUrl_,n,f,c.admin_)&&(p=c.options_,c.admin_&&(p=p||{},p.isAdmin=!0),c._pendingDfd=d.signIn(c.resUrl_,n,p).addCallbacks(e,f)):(n=Error("User is not signed in."),n.code="IdentityManagerBase.6",n.log=
m.isDebug,f(n))},g=function(){var a=c.sinfo_,h=a.owningSystemUrl,g=c.options_,n,p,m,s;g&&(n=g.token,p=g.error,m=g.prompt);s=d._findCredential(h,{token:n,resource:c.resUrl_});!s&&H(a)&&b.some(d.credentials,function(a){this._isIdProvider(h,a.server)&&(s=a);return!!s},d);s?(g=d.findCredential(c.resUrl_,s.userId))?e(g):J(a,d._legacyFed)?(g=s.toJson(),g.server=a.server,g.resources=null,e(new I(g))):(c._pendingDfd=d.generateToken(d.findServerInfo(s.server),null,{serverUrl:c.resUrl_,token:s.token,ssl:s.ssl})).addCallbacks(function(b){e(new I({userId:s.userId,
server:a.server,token:b.token,expires:t.isDefined(b.expires)?Number(b.expires):null,ssl:!!b.ssl,isAdmin:c.admin_,validity:b.validity}))},f):(d._busy=null,n&&(c.options_.token=null),(c._pendingDfd=d.getCredential(h.replace(/\/?$/,"/sharing"),{resource:c.resUrl_,owningTenant:a.owningTenant,token:n,error:p,prompt:m})).addCallbacks(function(a){d._enqueue(c.resUrl_,c.sinfo_,c.options_,c,c.admin_)},function(a){f(a)}))},n=c.sinfo_.owningSystemUrl,p=this._isServerRsrc(c.resUrl_),s=c.sinfo_._restInfoDfd;s?
s.addCallbacks(function(b){var e=c.sinfo_;e.adminTokenServiceUrl=e._restInfoDfd.adminUrl_;e._restInfoDfd=null;e.tokenServiceUrl=a.getObject("authInfo.tokenServicesUrl",!1,b)||a.getObject("authInfo.tokenServiceUrl",!1,b)||a.getObject("tokenServiceUrl",!1,b);e.shortLivedTokenValidity=a.getObject("authInfo.shortLivedTokenValidity",!1,b);e.currentVersion=b.currentVersion;e.owningTenant=b.owningTenant;(b=e.owningSystemUrl=b.owningSystemUrl)&&d._portals.push(b);p&&b?g():h()},function(){c.sinfo_._restInfoDfd=
null;var a=Error("Unknown resource - could not find token service endpoint.");a.code="IdentityManagerBase.2";a.log=m.isDebug;f(a)}):p&&n?g():c.sinfo_._selfReq?c.sinfo_._selfReq.selfDfd.then(function(a){var b={},e,f,h,g;a&&(e=a.user&&a.user.username,b.username=e,b.allSSL=a.allSSL,f=a.supportsOAuth,h=a.currentVersion,"multitenant"===a.portalMode&&(g=a.customBaseUrl));c.sinfo_.webTierAuth=!!e;return e&&d.normalizeWebTierAuth?d.generateToken(c.sinfo_,null,{ssl:b.allSSL}).always(function(a){b.portalToken=
a&&a.token;b.tokenExpiration=a&&a.expires;return b}):!e&&f&&4.4<=parseFloat(h)&&!d._doPortalSignIn(c.resUrl_)?d._generateOAuthInfo({portalUrl:c.sinfo_.server,customBaseUrl:g,owningTenant:c.sinfo_._selfReq.owningTenant}).always(function(){return b}):b}).always(function(a){c.sinfo_._selfReq=null;a?h(a.username,a.allSSL,a.portalToken,a.tokenExpiration):h()}):h()},_generateOAuthInfo:function(a){var b=this,c,e=a.portalUrl,f=a.customBaseUrl,h=a.owningTenant;if(a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&
!this._hasTestedIfAppIsOnPortal){c=window.location.href;var g=c.indexOf("?");-1<g&&(c=c.slice(0,g));g=c.search(/\/(apps|home)\//);c=-1<g?c.slice(0,g):null}a&&c?(this._hasTestedIfAppIsOnPortal=!0,a=B({url:c+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){b.defaultOAuthInfo=new z({appId:"arcgisonline",popup:!0,popupCallbackUrl:c+"/home/oauth-callback.html"})})):(a=new d,a.resolve(),a=a.promise);return a.then(function(){if(b.defaultOAuthInfo)return e=e.replace(/^http:/i,"https:"),
B({url:e+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:h,client_id:b.defaultOAuthInfo.appId,redirect_uri:v.getAbsoluteUrl(b.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(a){if(a.valid){var c=b.defaultOAuthInfo.clone();c.portalUrl=a.urlKey&&f?"https://"+a.urlKey+"."+f:e;b.oAuthInfos.push(c)}})})}});I=g(A,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(b){a.mixin(this,b);this.resources=this.resources||
[];t.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var a=this,c=this.resources&&this.resources[0],d=s.id.findServerInfo(this.server),e=d&&d.owningSystemUrl,f=!!e&&"server"===this.scope,h=f&&J(d,s.id._legacyFed),g=f&&s.id.findServerInfo(e),n,p=(n=d.webTierAuth)&&s.id.normalizeWebTierAuth,m=F[this.server],m=m&&m[this.userId],q={username:this.userId,password:m},k;if(!n||p)if(f&&!g&&b.some(s.id.serverInfos,function(a){s.id._isIdProvider(e,
a.server)&&(g=a);return!!g}),n=g&&s.id.findCredential(g.server,this.userId),!f||n)if(h)n.refreshToken();else{if(f)k={serverUrl:c,token:n&&n.token,ssl:n&&n.ssl};else if(p)q=null,k={ssl:this.ssl};else if(m)this.isAdmin&&(k={isAdmin:!0});else{var u;c&&(c=s.id._sanitizeUrl(c),this._enqueued=1,u=s.id._enqueue(c,d,null,null,this.isAdmin,this),u.addCallback(function(){a._enqueued=0;a.refreshServerTokens()}).addErrback(function(){a._enqueued=0}));return u}return s.id.generateToken(f?g:d,f?null:q,k).addCallback(function(b){a.token=
b.token;a.expires=t.isDefined(b.expires)?Number(b.expires):null;a.creationTime=(new Date).getTime();a.validity=b.validity;a.onTokenChange();a.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&b.forEach(s.id.credentials,function(a){var b=s.id.findServerInfo(a.server),c=b&&b.owningSystemUrl;if(a!==this&&a.userId===this.userId&&c&&"server"===a.scope&&(s.id._hasSameServerInstance(this.server,c)||s.id._isIdProvider(c,this.server)))J(b,s.id._legacyFed)?
(a.token=this.token,a.expires=this.expires,a.creationTime=this.creationTime,a.validity=this.validity,a.onTokenChange()):a.refreshToken()},this)},onTokenChange:function(a){clearTimeout(this._refreshTimer);var b=this.server&&s.id.findServerInfo(this.server),c=(b=b&&b.owningSystemUrl)&&s.id.findServerInfo(b);!1!==a&&((!b||"portal"===this.scope||c&&c.webTierAuth&&!s.id.normalizeWebTierAuth)&&(t.isDefined(this.expires)||t.isDefined(this.validity)))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=
this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var a=b.indexOf(s.id.credentials,this);-1<a&&s.id.credentials.splice(a,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var a=t.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,
scope:this.scope}),b=this.resources;b&&0<b.length&&(a.resources=b);return a},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var b=6E4*this.tokenRefreshBuffer,c=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>c&&(c=0);this._refreshTimer=setTimeout(a.hitch(this,this.refreshToken),c>b?c-b:c)}});K.Credential=I;return K})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(g,m){g.cookie=function(a,b,d){var c=document.cookie,h;
if(1==arguments.length)h=(h=c.match(RegExp("(?:^|; )"+m.escapeString(a)+"\x3d([^;]*)")))?decodeURIComponent(h[1]):void 0;else{d=d||{};c=d.expires;if("number"==typeof c){var g=new Date;g.setTime(g.getTime()+864E5*c);c=d.expires=g}c&&c.toUTCString&&(d.expires=c.toUTCString());b=encodeURIComponent(b);var c=a+"\x3d"+b,f;for(f in d)c+="; "+f,g=d[f],!0!==g&&(c+="\x3d"+g);document.cookie=c}return h};g.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled=
"CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return g.cookie})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(g,m,a,b,d){return g(null,{declaredClass:"esri.ServerInfo",constructor:function(a){m.mixin(this,a)},toJson:function(){return d.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,
shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}})})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has","dojo/json"],function(g,m,a,b){return m(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,expires:null,ssl:null,token:null,userId:null,constructor:function(a,
b){this.oAuthInfo=a;this.storage=b;this._init()},isValid:function(){var a=!1;if(this.oAuthInfo&&this.token&&this.userId){var b=(new Date).getTime();this.expires>b&&(this.expires-b)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(a=!0)}return a},save:function(){if(this.storage){var a=this._load(),c=this.oAuthInfo;if(c&&c.authNamespace&&c.portalUrl){var h=a[c.authNamespace];h||(h=a[c.authNamespace]={});h[c.portalUrl]={expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",
b.stringify(a))}catch(g){}}}},destroy:function(){var a=this._load(),c=this.oAuthInfo;if(c&&c.authNamespace&&c.portalUrl&&this.storage){var h=a[c.authNamespace];if(h){delete h[c.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",b.stringify(a))}catch(g){}}}c&&(this.oAuthInfo=c._oAuthCred=null)},_init:function(){var a=this._load(),b=this.oAuthInfo;if(b&&(b.authNamespace&&b.portalUrl)&&(a=a[b.authNamespace]))if(a=a[b.portalUrl])this.expires=a.expires,this.ssl=a.ssl,this.token=a.token,this.userId=a.userId},
_load:function(){var a={};if(this.storage){var c=this.storage.getItem("esriJSAPIOAuth");if(c)try{a=b.parse(c)}catch(h){}}return a}})})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(g,m,a,b,d){var c=a(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(a){b.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,showSocialLogins:!1,popup:!1,
popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d480,width\x3d800,location,resizable,scrollbars,status"},a)},_oAuthCred:null,toJson:function(){return m.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,showSocialLogins:this.showSocialLogins,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures})},
clone:function(){return new c(this.toJson())}});return c})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(g,m,a,b,d,c,h,n){return g("dijit.form.Form",[d,c,h,n],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(a){m.set(this.domNode,"encType",a);b("ie")&&(this.domNode.encoding=a);this._set("encType",a)},reset:function(a){var b={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:a?a.target:this.domNode,target:a?a.target:this.domNode};!1!==this.onReset(b)&&b.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(a){this.reset(a);a.stopPropagation();a.preventDefault();return!1},_onSubmit:function(b){var c=this.constructor.prototype;if(this.execute!=c.execute||this.onExecute!=c.onExecute)a.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(b)&&(b.stopPropagation(),b.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),function(g,m,a,b,d,c,h){var n=g("dijit.form.ValidationTextBox",d,{templateString:h,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",
regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(a,b){b!=n.prototype[a]&&(m.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+a+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",b))},_setRegExpGenAttr:function(a){this._deprecateRegExp("regExpGen",a);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(a){this._deprecateRegExp("regExp",a)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},
validator:function(a,b){return RegExp("^(?:"+this._computeRegexp(b)+")"+(this.required?"":"?")+"$").test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||void 0!==this.parse(a,b))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(a){return(this.trim?/^\s*$/:/^$/).test(a)},getErrorMessage:function(){var a="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:
!this.invalidMessage?this.promptMessage:this.invalidMessage,b="$_unset_$"==this.missingMessage?this.messages.missingMessage:!this.missingMessage?a:this.missingMessage;return this.required&&this._isEmpty(this.textbox.value)?b:a},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(a){var b="",c=this.disabled||this.isValid(a);c&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),h=!c&&a&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||
a)&&d||h)&&(this._maskValidSubsetError||h&&!this._hasBeenBlurred&&a)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=a&&h,b=this.getErrorMessage(a)):"Incomplete"==this.state?(b=this.getPromptMessage(a),this._maskValidSubsetError=!this._hasBeenBlurred||a):d&&(b=this.getPromptMessage(a));this.set("message",b);return c},displayMessage:function(a){a&&this.focused?c.show(a,this.domNode,this.tooltipPosition,
!this.isLeftToRight()):c.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(b){this.constraints=a.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(a){!a.locale&&this.lang&&(a.locale=this.lang);this._set("constraints",a);this._refreshState()},_setPatternAttr:function(a){this._set("pattern",a);this._refreshState()},
_computeRegexp:function(a){var b=this.pattern;"function"==typeof b&&(b=b.call(this,a));if(b!=this._lastRegExp){var c="";this._lastRegExp=b;".*"!=b&&b.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=a;break;case ")":c+="|$)";break;default:c+="(?:"+a+"|$)"}});try{"".search(c)}catch(d){c=this.pattern}this._partialre="^(?:"+c+")$"}return b},postMixInProperties:function(){this.inherited(arguments);
this.messages=b.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setMessageAttr:function(a){this._set("message",a);this.displayMessage(a)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");
this.inherited(arguments)},destroy:function(){c.hide(this.domNode);this.inherited(arguments)}});return n})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),function(g,m,a,b,d,c,h,n,f,e,p){n=g("dijit.form.TextBox"+(h("dojo-bidi")?"_NoBidi":""),[n,f],{templateString:e,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',
_buttonInputDisabled:h("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>h("ie")&&this.defer(function(){try{var b=a.getComputedStyle(this.domNode);if(b){var c=b.fontFamily;
if(c){var d=this.domNode.getElementsByTagName("INPUT");if(d)for(b=0;b<d.length;b++)d[b].style.fontFamily=c}}}catch(e){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||(this._attachPoints.push("_phspan"),this._phspan=m.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(c(this._phspan,"mousedown",function(a){a.preventDefault()}),c(this._phspan,"touchend, pointerup, MSPointerUp",d.hitch(this,function(){this.focus()}))));this._phspan.innerHTML=
"";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){b.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.",
"","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){b.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),h("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.inherited(arguments),this._updatePlaceHolder())}});
9>h("ie")&&(n.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},p._setSelectionRange=f._setSelectionRange=function(a,b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});h("dojo-bidi")&&(n=g("dijit.form.TextBox",n,{_setPlaceHolderAttr:function(a){this.inherited(arguments);this.applyTextDir(this._phspan)}}));
return n})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(g,m,a,b,d,c,h,n){var f=m("dijit.form._TextBoxMixin"+(b("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var d;void 0!==a&&(d=this.filter(a),
"string"!=typeof c&&(c=null!==d&&("number"!=typeof d||!isNaN(d))?this.filter(this.format(d,this.constraints)):"",0!=this.compare(d,this.filter(this.parse(c,this.constraints)))&&(c=null)));if(null!=c&&("number"!=typeof c||!isNaN(c))&&this.textbox.value!=c)this.textbox.value=c,this._set("displayedValue",this.get("displayedValue"));this.inherited(arguments,[d,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a=
"":"string"!=typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},_onInput:function(a){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||a);delete this._lastInputProducingEvent;this.intermediateChanges&&this._handleOnChange(this.get("value"),
!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(h(this.textbox,"keydown, keypress, paste, cut, compositionend",c.hitch(this,function(a){var f;if("keydown"==a.type&&229!=a.keyCode){f=a.keyCode;switch(f){case d.SHIFT:case d.ALT:case d.CTRL:case d.META:case d.CAPS_LOCK:case d.NUM_LOCK:case d.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&
!a.altKey){switch(f){case d.NUMPAD_0:case d.NUMPAD_1:case d.NUMPAD_2:case d.NUMPAD_3:case d.NUMPAD_4:case d.NUMPAD_5:case d.NUMPAD_6:case d.NUMPAD_7:case d.NUMPAD_8:case d.NUMPAD_9:case d.NUMPAD_MULTIPLY:case d.NUMPAD_PLUS:case d.NUMPAD_ENTER:case d.NUMPAD_MINUS:case d.NUMPAD_PERIOD:case d.NUMPAD_DIVIDE:return}if(65<=f&&90>=f||48<=f&&57>=f||f==d.SPACE)return;f=!1;for(var g in d)if(d[g]===a.keyCode){f=!0;break}if(!f)return}}(f=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(f=65<=a.keyCode&&
90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==d.SPACE?String.fromCharCode(a.keyCode):a.keyCode);f||(f=229);if("keypress"==a.type){if("string"!=typeof f)return;if("a"<=f&&"z">=f||"A"<=f&&"Z">=f||"0"<=f&&"9">=f||" "===f)if(a.ctrlKey||a.metaKey||a.altKey)return}var n={faux:!0},m;for(m in a)/^(layer[XY]|returnValue|keyLocation)$/.test(m)||(g=a[m],"function"!=typeof g&&"undefined"!=typeof g&&(n[m]=g));c.mixin(n,{charOrCode:f,_wasConsumed:!1,preventDefault:function(){n._wasConsumed=!0;a.preventDefault()},
stopPropagation:function(){a.stopPropagation()}});this._lastInputProducingEvent=n;!1===this.onInput(n)&&(n.preventDefault(),n.stopPropagation());if(!n._wasConsumed&&9>=b("ie"))switch(a.keyCode){case d.TAB:case d.ESCAPE:case d.DOWN_ARROW:case d.UP_ARROW:case d.LEFT_ARROW:case d.RIGHT_ARROW:break;default:if(a.keyCode==d.ENTER&&"textarea"!=this.textbox.tagName.toLowerCase())break;this.defer(function(){this.textbox.value!==this._lastInputEventValue&&h.emit(this.textbox,"input",{bubbles:!0})})}})),h(this.textbox,
"input",c.hitch(this,"_onInput")),h(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=c.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||
(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=h.once(this.domNode,"mouseup, touchend",c.hitch(this,function(a){this._isTextSelected()||f.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=
null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});b("dojo-bidi")&&(f=m("dijit.form._TextBoxMixin",f,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));f._setSelectionRange=n._setSelectionRange=function(a,b,
c){a.setSelectionRange&&a.setSelectionRange(b,c)};f.selectInputText=n.selectInputText=function(b,c,d){b=a.byId(b);isNaN(c)&&(c=0);isNaN(d)&&(d=b.value?b.value.length:0);try{b.focus(),f._setSelectionRange(b,c,d)}catch(h){}};return f})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B){function A(){}var C=m("dijit._MasterTooltip",[t,w],{duration:s.defaultDuration,templateString:x,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new v(this.domNode);this.fadeIn=a.fadeIn({node:this.domNode,duration:this.duration,onEnd:n.hitch(this,"_onShow")});this.fadeOut=a.fadeOut({node:this.domNode,duration:this.duration,onEnd:n.hitch(this,"_onHide")})},show:function(a,b,c,d,e,f,g){if(!this.aroundNode||!(this.aroundNode===
b&&this.containerNode.innerHTML==a))if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;e&&this.set("textDir",e);this.containerNode.align=d?"right":"left";var p=u.around(this.domNode,b,c&&c.length?c:z.defaultPosition,!d,n.hitch(this,"orient")),m=p.aroundNodePos;"M"==p.corner.charAt(0)&&"M"==p.aroundCorner.charAt(0)?(this.connectorNode.style.top=m.y+(m.h-this.connectorNode.offsetHeight>>1)-p.y+"px",this.connectorNode.style.left=""):"M"==p.corner.charAt(1)&&
"M"==p.aroundCorner.charAt(1)?this.connectorNode.style.left=m.x+(m.w-this.connectorNode.offsetWidth>>1)-p.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");h.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=f||A;this.onMouseLeave=g||A}},orient:function(a,b,d,e,f){this.connectorNode.style.top="";var h=e.h;e=e.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+d];this.domNode.style.width="auto";var g=c.position(this.domNode);if(p("ie")||p("trident"))g.w+=2;var n=Math.min(Math.max(e,1),g.w);c.setMarginBox(this.domNode,{w:n});"B"==d.charAt(0)&&"B"==b.charAt(0)?(a=c.position(a),b=
this.connectorNode.offsetHeight,a.h>h?(this.connectorNode.style.top=h-(f.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(f.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,g.w-e)},_onShow:function(){p("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=
!1,this.aroundNode=null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=A},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});p("dojo-bidi")&&C.extend({_setAutoTextDir:function(a){this.applyTextDir(a);g.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=
this.textDir}});B.showTooltip=function(a,b,c,d,e,f,h){c&&(c=g.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));z._masterTT||(B._masterTT=z._masterTT=new C);return z._masterTT.show(a,b,c,d,e,f,h)};B.hideTooltip=function(a){return z._masterTT&&z._masterTT.hide(a)};var z=m("dijit.Tooltip",t,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(a){g.forEach(this._connections||[],function(a){g.forEach(a,function(a){a.remove()})},
this);this._connectIds=g.filter(n.isArrayLike(a)?a:a?[a]:[],function(a){return b.byId(a,this.ownerDocument)},this);this._connections=g.map(this._connectIds,function(a){a=b.byId(a,this.ownerDocument);var c=this.selector,d=c?function(a){return e.selector(c,a)}:function(a){return a},h=this;return[e(a,d(f.enter),function(){h._onHover(this)}),e(a,d("focusin"),function(){h._onHover(this)}),e(a,d(f.leave),n.hitch(h,"_onUnHover")),e(a,d("focusout"),n.hitch(h,"set","state","DORMANT"))]},this);this._set("connectId",
a)},addTarget:function(a){a=a.id||a;-1==g.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=g.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);d.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;g.forEach(n.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(a){return this.label||
this.domNode.innerHTML},state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(a){case "DORMANT":this._connectNode&&(z.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state",
"SHOWING")},this.showDelay));break;case "SHOWING":var b=this.getContent(this._connectNode);if(!b){this.set("state","DORMANT");return}z.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,n.hitch(this,"set","state","SHOWING"),n.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&
a!=this._connectNode&&this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");g.forEach(this._connections||[],function(a){g.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});
z._MasterTooltip=C;z.show=B.showTooltip;z.hide=B.hideTooltip;z.defaultPosition=["after-centered","before-centered"];return z})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query dojo/sniff dojo/json dijit/form/Button dojo/query".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(a){this._oAuthRedirectFunc=a},oAuthSignIn:function(a,b,c,d){var f=this._oAuthDfd=new n;f.resUrl_=a;f.sinfo_=b;f.oinfo_=c;var h=!d||!1!==d.oAuthPopupConfirmation;if(!c.popup||!h)return this._doOAuthSignIn(a,b,c),f;this._nls||(this._nls=p.identity);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());a=this.oAuthDialog;b=d&&d.error;d=d&&d.token;m.hide(a.errMsg_);b&&(403==b.code&&d)&&(e.set(a.errMsg_,"innerHTML",this._nls.forbidden),m.show(a.errMsg_));a.show();
return f},setOAuthResponseHash:function(a){var b=this._oAuthDfd;this._oAuthDfd=null;if(b&&a)if(clearInterval(this._oAuthIntervalId),"#"===a.charAt(0)&&(a=a.substring(1)),a=s.queryToObject(a),a.error)a=Error("access_denied"===a.error?"ABORTED":"OAuth: "+a.error+" - "+a.error_description),a.code="IdentityManagerBase.2",a.log=h.isDebug,b.errback(a);else{var c=b.oinfo_._oAuthCred,d=new g({userId:a.username,server:b.sinfo_.server,token:a.access_token,expires:(new Date).getTime()+1E3*Number(a.expires_in),
ssl:"true"===a.ssl,_oAuthCred:c});c.storage=a.persist?window.localStorage:window.sessionStorage;c.token=d.token;c.expires=d.expires;c.userId=d.userId;c.ssl=d.ssl;c.save();b.callback(d)}},_createOAuthDialog:function(){var b=this._nls,e=a.substitute(b,this._oAuthDialogContent),g=new d({title:b.title,content:e,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var a=g.esriIdMgr_._oAuthDfd;g.hide_();g.esriIdMgr_._doOAuthSignIn(a.resUrl_,a.sinfo_,a.oinfo_)},cancel_:function(){var a=
g.esriIdMgr_._oAuthDfd;g.esriIdMgr_._oAuthDfd=null;g.hide_();var b=Error("ABORTED");b.code="IdentityManager.2";b.log=h.isDebug;a.errback(b)},hide_:function(){m.hide(g.errMsg_);g.hide();d._DialogLevelManager.hide(g)}}),b=g.domNode;g.btnSubmit_=c.byNode(f.query(".esriIdSubmit",b)[0]);g.btnCancel_=c.byNode(f.query(".esriIdCancel",b)[0]);g.errMsg_=f.query(".esriErrorMsg",b)[0];g.connect(g.btnSubmit_,"onClick",g.execute_);g.connect(g.btnCancel_,"onClick",g.onCancel);g.connect(g,"onCancel",g.cancel_);return g},
_doOAuthSignIn:function(a,c,d){var e=this,f={client_id:d.appId,response_type:"token",state:t.stringify({portalUrl:d.portalUrl}),expiration:d.expiration,locale:d.locale,redirect_uri:d.popup?b.getAbsoluteUrl(d.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};d.forceLogin&&(f.force_login=!0);d.showSocialLogins&&(f.showSocialLogins=!0);var g=d.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",n=g+"?"+s.objectToQuery(f);if(d.popup){var p;7===u("ie")?(p=window.open(d.popupCallbackUrl,
"esriJSAPIOAuth",d.popupWindowFeatures),p.location=n):p=window.open(n,"esriJSAPIOAuth",d.popupWindowFeatures);p?(p.focus(),this._oAuthDfd.oAuthWin_=p,this._oAuthIntervalId=setInterval(function(){if(p.closed){clearInterval(e._oAuthIntervalId);var a=e._oAuthDfd;if(a){var b=Error("ABORTED");b.code="IdentityManager.2";b.log=h.isDebug;a.errback(b)}}},500)):(a=Error("ABORTED"),a.code="IdentityManager.2",a.log=h.isDebug,this._oAuthDfd.errback(a))}else this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:f,
authorizeUrl:g,resourceUrl:a,serverInfo:c,oAuthInfo:d}):window.location=n}}})},"esriPBI/utils/SignInUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/Deferred dojo/json dojo/when dojo/Evented dojo/aspect dojo/request/script dojox/html/entities esri/request esri/config esri/lang ./PortalUtil esri/IdentityManagerBase esri/IdentityManager ../adapters/StorageAdapter ./logger! dojo/i18n!../widgets/SignInDialog/nls/SignInDialog dojo/i18n!../layout/nls/SidePanelLayout ./OAuthHelper".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F){return g(n,{portalUrl:null,constructor:function(a){m.mixin(this,a);this.portalUrl=a.arcgisAdapter.settings.portalUrl;if(this.arcgisAdapter.settings.ignoreProtocolErrors||this.arcgisAdapter.settings.oAuth){var b=this;x.setProtocolErrorHandler(function(a){return-1!==b.portalUrl.indexOf(a.serverInfo.server)})}this.arcgisAdapter.settings.identityManagerTokenValidity&&(x.tokenValidity=this.arcgisAdapter.settings.identityManagerTokenValidity)},signIn:function(){var a=
this;(new w(this.portalUrl)).on("load",function(b){a._portal=b;a.emit("portal-loaded",b);b.user||a._interceptIdentityManagerSignIn(a.arcgisAdapter.settings.oAuth&&b.supportsOAuth);b.signIn().then(function(){a._signedIn=!0;a._setupInstrumentationAndSSL();a.emit("signed-in")},function(b){a.emit("signin-failed",b);A.error("sign in failed",b)})})},signOut:function(){x.credentials=[];this.storageAdapter.remove("PortalToken",B.Scope.USER)},_createCredential:function(a){var b;try{b=(a=a&&("string"===typeof a?
c.parse(a):a))&&a.token}catch(e){return(new d).reject(A.error("failed to parse token JSON",a,e))}if(!b)return(new d).reject();var f=this.portalUrl,h=f+"/sharing/rest/portals/self";return s({url:h,content:{f:"json",token:b}},{disableIdentityLookup:!0}).then(function(c){var e=new d;c?c.error?(A.error("failed to get portal's self",h,c),e.reject({error:c.error})):c.user?c.user.orgId?e.resolve(new v.Credential({userId:c.user.username,server:f,token:b,expires:a.expires,ssl:!!c.allSSL})):(A.error("SignIn.NonOrgAccount",
c),e.reject({code:"SignIn.NonOrgAccount"})):e.resolve(new v.Credential({server:f,token:b,expires:a.expires,ssl:!!c.allSSL})):(A.error("failed to get portal's self",h),e.reject());return e.promise},function(){return(new d).reject()})},_createCredentialFromStoredToken:function(){return h(this.storageAdapter.get("PortalToken",B.Scope.USER),m.hitch(this,this._createCredential))},_createCredentialFromDefaultToken:function(){return h(this.arcgisAdapter.getToken(),m.hitch(this,this._createCredential))},
_promptForCredentials:function(){var a=new d,b=this;this.layout.showSignIn(function(c){var e=new d,f=x.findServerInfo(b.portalUrl);h(x.generateToken(f,{username:c.userId,password:c.password}),function(c){h(b._createCredential(c),function(b){e.resolve(b);a.resolve(b)},function(a){e.reject(a)})},function(a){e.reject({code:"SignIn.InvalidCredentials",error:a})});return e.promise});return a.promise},_getCredential:function(a){var b=this;return b._createCredentialFromStoredToken().otherwise(m.hitch(b,
b._createCredentialFromDefaultToken)).otherwise(function(){b.emit("ui-sign-in");return a.apply(b,arguments)})},_interceptIdentityManagerSignIn:function(a){var c=this,d=x.signIn;x.signIn=function(e,f){if(-1!==c.portalUrl.indexOf(f.server)){var g=new b,n=a?m.hitch(c,c._authenticateUsingOAuth):m.hitch(c,c._promptForCredentials);h(c._getCredential(n),function(a){a&&g.resolve(a)},function(a){A.error(a);var b=a&&a.error_description&&p.encode(a.error_description);c.layout.showMessage(C.invalidUserTitle,
b||"");g.reject(a)});return g}return d.apply(this,arguments)}},_authenticateUsingOAuth:function(){var a=this,b=F.init({appId:a.arcgisAdapter.settings.oAuth.appId,portal:a.portalUrl,expiration:a.arcgisAdapter.settings.identityManagerTokenValidity||20160,popup:a.arcgisAdapter.settings.oAuth.popup||a._signedIn,callbackPage:a.arcgisAdapter.settings.oAuth.popupCallbackUrl}),e=function(b){if(b){if(b.error)return(new d).reject(b);b.persist?a.storageAdapter.set("PortalToken",c.stringify({token:b.access_token,
expires:b.expires_at}),B.Scope.USER):a.storageAdapter.remove("PortalToken",B.Scope.USER);return a._createCredential({token:b.access_token,expires:b.expires_at})}F.popup?b=h(a._showSignInLinkForOAuth(),e):(F.signIn(),b=void 0);return b};return h(b,e)},_showSignInLinkForOAuth:function(){var a=new d,b=this;require(["dijit/_WidgetBase","dojo/i18n!../widgets/SignInDialog/nls/SignInDialog","dojo/dom-construct","dojo/on"],function(c,d,e,f){c=g(c,{baseClass:"oauthLink",postCreate:function(){var b=this,c=
e.create("a",{href:"#",innerHTML:d.clickHereToSignIn},this.domNode),g=function(){F.popupWindow&&!F.popupWindow.closed?F.popupWindow.focus():h(F.signIn(),function(c){b.destroy();a.resolve(c)},function(){a.reject()})};f(c,"click,keypress",function(a){("click"===a.type||13===a.keyCode)&&g()});g()}});b.layout.showWidget(new c,{showModal:!0})});return a.promise},_setupInstrumentationAndSSL:function(){var a=this,b=function(c,d){if(-1!==d.indexOf(a._portal.url))return!0;if("object"===typeof c){if(c.url)return-1!==
d.indexOf(c.url);for(var e in c)if(c.hasOwnProperty(e)&&b(c[e],d))return!0}};s.setRequestPreCallback(function(c){var d=c.url,e=d,f=a.arcgisAdapter.settings.instrumentationID||"EMF";b(a._portal.helperServices,c.url)&&(u.defaults.io.proxyUrl&&(e=d.replace(u.defaults.io.proxyUrl+"?","")),d+=-1===e.indexOf("?")?"?appID\x3d":"\x26appID\x3d",d+=f);"https:"===window.location.protocol&&0===d.indexOf("http:")&&(d=d.replace("http:","https:"));c.url=d;return c})}})})},"esriPBI/utils/OAuthHelper":function(){define("dojo/_base/lang dojo/_base/json dojo/_base/url dojo/cookie dojo/Deferred dojo/io-query".split(" "),
function(g,m,a,b,d,c){m={portal:"http://www.arcgis.com",getPopupCallbackPage:function(a){return window.location.protocol+"//"+window.location.host+window.location.pathname.replace(/\/[^\/]+$/,"")+"/"+(a||"oauth-callback.html")},init:function(a){g.mixin(this,a);this.portalUrl=this.portal+"/sharing/rest";this.popupCallbackPage=this.getPopupCallbackPage(a.callbackPage);return this.checkOAuthResponse(window.location.href,!0)},signIn:function(){this.deferred=new d;var a={client_id:this.appId,response_type:"token",
expiration:this.expiration,redirect_uri:this.popup?this.popupCallbackPage:window.location.href.replace(/#.*$/,""),force_login:!0},a=this.portal.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize?"+c.objectToQuery(a);this.popup?this.popupWindow=window.open(a,"esrioauth","width\x3d480,height\x3d320,location\x3dyes,status\x3dyes,scrollbars\x3dyes"):window.location=a;return this.deferred.promise},checkOAuthResponse:function(a,b){this.popupWindow&&this.popupWindow.close();var c=this.parseFragment(a);
if(c)return b&&(window.location.hash=""),c.error?(Error(c.error).details=[c.error_description],this.deferred&&this.deferred.reject(c)):this.deferred&&this.deferred.resolve(c),c},parseFragment:function(b){b=new a(b);if(b=b.fragment?c.queryToObject(b.fragment):null)return b.access_token&&(b.expires_in=Number(b.expires_in),b.expires_at=(new Date).getTime()+1E3*b.expires_in,b.ssl="true"===b.ssl),b}};return window.OAuthHelper=m})},"esriPBI/managers/StorageManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/when dojo/i18n!./nls/managers ./_Manager ../utils/_loaders/ConfigLoader ../utils/logger!".split(" "),
function(g,m,a,b,d,c,h,n){return g([c],{_type:"storage",load:function(){var c=new a;b(h.load(this),m.hitch(this,function(a){this.emit("configs-loaded",a);c.resolve(a)}),function(){c.resolve({})});return c.promise},store:function(a){return b(h.save(this,a))},setItem:function(c,e,h){if(this._supports("write"))return h=b(this.adapter.set(c,e,h)),h.otherwise(function(a){n.info("failed to store value in StorageAdapter, key: "+c+", value: "+e,a)}),h;h=new a;var g=d.setNotSupported;n.warn(g);h.reject(Error(g));
return h.promise},getItem:function(c,e){if(this._supports("read")){var h=b(this.adapter.get(c,e));h.otherwise(function(a){n.info("failed to load value in StorageAdapter, key: "+c,a)});return h}var h=new a,g=d.getNotSupported;n.warn(g);h.reject(Error(g));return h.promise},removeItem:function(c,e){if(this._supports("remove")){var h=b(this.adapter.remove(c,e));h.otherwise(function(a){n.info("failed to remove value in StorageAdapter, key: "+c,a)});return h}var h=new a,g=d.removeNotSuported;n.warn(g);
h.reject(Error(g));return h.promise},_supports:function(a){return!(!this.adapter||!this.adapter.supports||!this.adapter.supports[a])}})})},"esriPBI/utils/_loaders/ConfigLoader":function(){define("require dojo/_base/declare dojo/_base/array dojo/json dojo/Deferred dojo/promise/all dojo/when ../../adapters/StorageAdapter ../../config ../logger!".split(" "),function(g,m,a,b,d,c,h,n,f,e){return{loaders:["./Loader1_0"],load:function(a){var b=new d,c=this,f=-1,n=function(){e.info("No configuration loaded from storage");
b.reject()};performLoad=function(){var d=c.loaders[++f];d?g([d],function(c){c=new c({storageManager:a});h(c.load(),function(a){b.resolve(a)},function(){n()})}):n()};performLoad();return b.promise},save:function(a,d){if(a.adapter.supports.write){var e,h;for(h in d){var g=d[h];if(a.adapter.settings.managers&&a.adapter.settings.managers[h]&&(g=g.toJson()))e||(e={version:f.version}),e[h]=g}if(e)return c(e).then(function(c){return a.setItem("app-config",b.stringify(c),n.Scope.APP)})}}}})},"esriPBI/appRouter":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array ./layers/PowerBILayer ./layers/PowerBILayerStates ./utils/clusterUtils ./utils/wellUtils".split(" "),
function(g,m,a,b,d,c,h){function n(a){p=a.__pbiState===d.READY||a.__pbiRendererApplied?{clusterInfo:c.get(a),renderer:a.renderer,opacity:a.opacity}:null}var f=!0,e,p,s=g(null,{constructor:function(a){m.mixin(this,a||{})},route:function(){var a,c=b.getInstance();if(c){var d=this.app.adapters.data.getFieldWellChange();"Location"===d.fieldWell?a=this.routeLocationChange(c,d):"ColorSize"===d.fieldWell?a=this.routeColorSizeChange(c,d):"Tooltips"===d.fieldWell?a=this.routeTooltipsChange(c,d):d.fieldWell||
(a=this.routeFiltering(c));c.interruptFeatureGen()}else a=!0;a&&b.addLayer({id:"MyLayer",locationProvider:e,rendererInfo:p,dataAdapter:this.app.adapters.data,autoZoom:f},this.app)},routeLocationChange:function(a,b){p=e=null;return f=!0},routeColorSizeChange:function(a,b){e=a.getExtensionProperties().locationProvider;f=a.__pbiState!==d.READY;p=null;return b.changeType===h.ChangeType.REMOVE_FIELD&&!b.aggregationnessChanged||b.changeType===h.ChangeType.DRAG_IN_DUPLICATED_FIELD?(a.setDefaultRenderer(this.app),
a.setPowerBIInfoTemplate(),!1):!0},routeTooltipsChange:function(a,b){f=a.__pbiState!==d.READY;n(a);e=a.getExtensionProperties().locationProvider;return b.changeType===h.ChangeType.DRAG_IN_DUPLICATED_FIELD?!1:b.changeType===h.ChangeType.REMOVE_FIELD&&!b.aggregationnessChanged?(a.setPowerBIInfoTemplate(),!1):!0},routeFiltering:function(a){e=a.getExtensionProperties().locationProvider;n(a);return f=!0}}),u;s.createSingleton=function(a){u||(u=new s(a));return u};return s})},"esriPBI/override":function(){define(["dojo/_base/lang",
"dojo/_base/connect","esri/layers/TiledMapServiceLayer","dijit/form/HorizontalSlider"],function(g,m,a,b){g.mixin(a.prototype,{_popTile:function(a){var b=m.disconnect;b(a._onload_connect);b(a._onerror_connect);b(a._onabort_connect);a._onload_connect=a._onerror_connect=a._onabort_connect=null;this._loadingList&&(this._loadingList.remove(a.id),this._fireOnUpdateEvent())}});g.mixin(b.prototype,{setSilently:function(a,b){this.set("_onChangeActive",!1);this.set(a,b);this.set("_onChangeActive",!0)}});return 0})},
"esriPBI/utils/_loaders/Loader1_0":function(){define("dojo/_base/declare dojo/_base/lang dojo/when dojo/promise/all dojo/i18n!./../nls/utils ../../adapters/StorageAdapter ./_Loader".split(" "),function(g,m,a,b,d,c,h){return g(h,{version:"1.0",load:function(){return a(this.storageManager.getItem("app-config",c.Scope.APP),this.fromJSON).then(function(a){if(a)return a;throw Error(d.failedToLoadConfiguration);})}})})},"esriPBI/utils/_loaders/_Loader":function(){define(["dojo/_base/declare","dojo/_base/lang",
"dojo/json","../logger!"],function(g,m,a,b){return g(null,{version:"0",storageManager:null,constructor:function(a){m.mixin(this,a)},load:function(){},upgrade:function(a){return a},fromJSON:function(d){if(d)try{return a.parse(d)}catch(c){b.info("Failed to parse stored configuration value, skipping...",d,c)}}})})},"esri/layers/VectorTileLayerImpl":function(){define("dojo/_base/lang dojo/has dojo/dom-construct dojo/dom-style dojo/io-query ../geometry/Extent ../geometry/screenUtils ../geometry/scaleUtils ../SpatialReference ../config ../lang ../domUtils ../urlUtils ../kernel ./layer ./TileInfo ./unitBezier ./vectorTiles/request ./vectorTiles/core/promiseUtils ./vectorTiles/core/urlUtils ./vectorTiles/layers/support/vectorTileLayerLoader ./vectorTiles/views/vectorTiles/style/StyleRepository ./vectorTiles/views/vectorTiles/VectorTileContainer ./vectorTiles/views/vectorTiles/TileHandler ./vectorTiles/views/2d/engine/StageGL ./vectorTiles/views/2d/FrameBudget ./vectorTiles/views/2d/layers/support/TileInfoView ./vectorTiles/views/2d/layers/support/TileStrategy ./vectorTiles/views/2d/layers/support/TileKey ./vectorTiles/views/webgl/webgl-utils".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M,L,G,O){var S=x.ease;h=w.createSubclass({declaredClass:"esri.layers.VectorTileLayer",_mapsWithAttribution:["World_Basemap"],_eventMap:{"style-change":["style"]},constructor:function(a,b){this._frame=this._frame.bind(this);this._params=b||{};b&&(b.tileServers&&b.tileServers.length)&&(this.tileServers=b.tileServers=b.tileServers.map(function(a){return u.getAbsoluteUrl(a)},this));this._viewState={scale:0,width:0,height:0,size:[0,0],rotation:0,
resolution:1,center:[0,0],toScreen:function(a,b){var c=this.center[1]+0.5*this.resolution*this.height;a[0]=(b[0]-(this.center[0]-0.5*this.resolution*this.width))/this.resolution;a[1]=(c-b[1])/this.resolution;return a},toMap:function(a,b){var c=this.center[1]+0.5*this.resolution*this.height;a[0]=this.center[0]-0.5*this.resolution*this.width+b[0]*this.resolution;a[1]=c-b[1]*this.resolution;return a}};this._budget=new K(6);this._renderParameters={budget:this._budget,state:this._viewState,devicePixelRatio:window.devicePixelRatio,
stationary:!0};this._updateParameters={budget:this._budget,state:this._viewState,devicePixelRatio:window.devicePixelRatio,stationary:!0};this.setStyle(a);this.registerConnectEvents()},setStyle:function(a){return this.loadStyle(a)},getStyle:function(){return this.currentStyleInfo&&this.currentStyleInfo.style||null},opacity:1,setOpacity:function(a){if(this.opacity!=a)this.onOpacityChange(this.opacity=a)},onOpacityChange:function(){},_pinching:!1,_refreshTS:null,_reCheckTS:/[\?\&]_ts=/ig,_reReplaceTS:/([\?\&]_ts=)[0-9]+/ig,
addTimestampToURL:function(a){var b=this._refreshTS;b&&(a=this._reCheckTS.test(a)?a.replace(this._reReplaceTS,"$$$1"+b):a+((-1===a.indexOf("?")?"?":"\x26")+"_ts\x3d"+b));return a},getTileUrl:function(a,b,c){var e=this._getToken(),f=this._url&&this._url.query,h=this.tileServers[b%this.tileServers.length],h=h.replace(/\{z\}/gi,a.toString()).replace(/\{level\}/gi,a.toString()).replace(/\{y\}/gi,b.toString()).replace(/\{row\}/gi,b.toString()).replace(/\{x\}/gi,c.toString()).replace(/\{col\}/gi,c.toString());
f&&(h+="?"+d.objectToQuery(f));if(e&&(!f||!f.token))h+=(-1===h.indexOf("?")?"?":"\x26")+"token\x3d"+e;h=this.addTimestampToURL(h);return u.addProxy(h)},loadStyle:function(a){if(this._loadingPromise&&"string"===typeof a&&this.url===a)return this._loadingPromise;this._stopDisplay();var b=this._loadingPromise;this._loadingPromise=z.loadMetadata(a).then(function(a){this.url=a.url;this._url=a.parsedUrl;this.currentStyleInfo={serviceUrl:a.serviceUrl,styleUrl:a.styleUrl,style:a.style,layerDefinition:a.layerDefinition};
this.styleRepository=new F(a.style,a);this._read(a.layerDefinition);this.onStyleChange(this.getStyle())}.bind(this)).then(function(){this.loaded||(this.loaded=!0,this.onLoad(this));!this.suspended&&!this._tileHandler&&this._startDisplay()}.bind(this)).otherwise(function(a){this._errorHandler(a);throw a;}.bind(this));b&&!b.isFulfilled()&&b.cancel();return this._loadingPromise},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},
takeScreenshot:function(a){return this._stageGL?this._stageGL.takeScreenshot(a):A.reject("No valid GL context!")},_setMap:function(c,d,e){this.inherited(arguments);this._map=c;var f=this._div=a.create("div",null,d);b.set(f,{position:"absolute",width:c.width+"px",height:c.height+"px",overflow:"visible",opacity:this.opacity});this._onResizeHandle=c.on("resize",g.hitch(this,this._onResizeHandler));this._onOpacityHandle=this.on("opacity-change",g.hitch(this,this._opacityChangeHandler));this._onScaleVisHandle=
this.on("scale-visibility-change",g.hitch(this,function(){}));this._onVisibilityHandle=this.on("visibility-change",g.hitch(this,function(){}));this._stageGL=new I;this._stageGL.setElement(this._stageGL.createElement());this._div.appendChild(this._stageGL.element);this._stageGL.parent={requestChildRender:this._scheduleRender.bind(this)};this._stageGL.attach(this._renderParameters);this._startDisplay();this.evaluateSuspension();if(this.suspended&&!c.loaded)var h=c.on("load",g.hitch(this,function(){h.remove();
this.evaluateSuspension()}));return f},_unsetMap:function(b,c){this._map=null;this.suspended||this._stopDisplay();this._stageGL.detach(this._renderParameters);this._stageGL=null;a.destroy(this._div);this._div=null;this._handles&&this._handles.forEach(function(a){a.remove()});this._handles=null;this._onResizeHandle=this._onResizeHandle&&this._onResizeHandle.remove()&&null;this._onOpacityHandle=this._onOpacityHandle&&this._onOpacityHandle.remove()&&null;this._onScaleVisHandle=this._onScaleVisHandle&&
this._onScaleVisHandle.remove()&&null;this._onVisibilityHandle=this._onVisibilityHandle&&this._onVisibilityHandle.remove()&&null;this.inherited(arguments)},_read:function(a){this.version=a.currentVersion||a.version;this.fullExtent=new c(a.fullExtent);this.initialExtent=new c(a.initialExtent);this.spatialReference=this.fullExtent.spatialReference;this.tileInfo=new v(a.tileInfo);this.tileInfo.size=[this.tileInfo.cols,this.tileInfo.height];this.tileInfo.spatialReference.isWrappable=this.tileInfo.spatialReference._isWrappable();
this.tileInfo.scales=this.tileInfo.lods.map(function(a){return a.scale});this.tileInfo.scaleToZoom=function(a){for(var b=this.scales,c=b.length-1,d=0;d<c;d++){var e=b[d],f=b[d+1];if(e<=a)break;if(f===a)return d+1;if(e>a&&f<a)return d+1-(a-f)/(e-f)}return d};this._hasMin||this.setMinScale(a.minScale);this._hasMax||this.setMaxScale(a.maxScale);a.tileMap&&(this.tileIndexUrl=C.join(this.currentStyleInfo.serviceUrl,a.tileMap));this._params.tileServers||(this.tileServers=this.currentStyleInfo.serviceUrl?
a.tiles.map(function(a,b,c){return C.join(this.currentStyleInfo.serviceUrl,a)},this):a.tiles);a=null;this.currentStyleInfo.serviceUrl&&(a=C.urlToObject(this.currentStyleInfo.serviceUrl),a=this._getDefaultAttribution(a.path));a?(this.attributionDataUrl=a,this.hasAttributionData=!0):(this.attributionDataUrl=null,this.hasAttributionData=!1)},_getDefaultAttribution:function(a){var b=a.match(/^https?:\/\/(basemaps|basemapsbeta)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);
if(b&&(a=b[3])){var b=b[2]||"",c;a=a.toLowerCase();for(var d=0,e=this._mapsWithAttribution.length;d<e;d++)if(c=this._mapsWithAttribution[d],-1<c.toLowerCase().indexOf(a))return a=window.location.protocol,("http:"===a||"https:"===a?a:"https:")+"//static.arcgis.com/attribution/Vector"+b+"/"+c}},_startDisplay:function(){var a={styleRepository:this.styleRepository,tileIndexUrl:this.tileIndexUrl,tileInfo:this.tileInfo,fullExtent:{width:this.fullExtent.getWidth()},getTileUrl:this.getTileUrl.bind(this)};
this._renderParameters.devicePixelRatio=this._updateParameters.devicePixelRatio=window.devicePixelRatio;this._vectorTileContainer=new H;this._stageGL.addChild(this._vectorTileContainer);this._tileHandler=new J(a,this._scheduleUpdate.bind(this));this._tileInfoView=new M(this.tileInfo,this.fullExtent);this._tileHandler.updateTile.bind(this._tileHandler);this._tileHandler.start().then(function(){this._tileStrategy=new L(this._vectorTileContainer,this._tileInfoView,this._scheduleUpdate.bind(this),function(a,
b){return this._tileHandler.getVectorTile(G.fromId(a),b)}.bind(this));this._vectorTileContainer.initialize(this._tileHandler.spriteMosaic,this._tileHandler.glyphMosaic,this.tileInfo,this._tileInfoView);this._scheduleUpdate()}.bind(this))},_stopDisplay:function(){this._tileStrategy&&(this._frameRequested=this._updateRequested=this._renderRequested=!1,this._animation&&(this._animation.stop(),this._animation=null),this._vectorTileContainer.removeAllChildren(),this._stageGL.removeChild(this._vectorTileContainer),
this._vectorTileContainer=null,this._tileHandler.stop(),this._tileHandler.destroy(),this._tileStrategy.destroy(),this._tileInfoView=this._tileHandler=this._tileStrategy=null)},_scheduleRender:function(){this._renderRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleUpdate:function(){this._updateRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleFrame:function(){this._map&&!this._frameRequested&&(this._frameRequested=!0,E(this._frame))},_frame:function(){if(this._frameRequested){this._frameRequested=
!1;this._renderParameters.devicePixelRatio!==window.devicePixelRatio&&(this._renderParameters.devicePixelRatio=this._updateParameters.devicePixelRatio=window.devicePixelRatio,this._stopDisplay(),this._startDisplay());this._animation&&(this._animation.step(),this._animation.running||(this._animation=null));this._updateParameters.stationary=this._renderParameters.stationary=!this._animation&&!this._pinching&&!this._panning;this._budget.reset();this._viewState.resolution=this._viewState.scale/(96*39.37*
n.getUnitValueForSR(this.spatialReference));this._renderRequested&&(this._renderRequested=!1,this._stageGL.render(this._renderParameters));if(this._updateRequested){this._updateRequested=!1;var a=this._tileHandler.updateTile.bind(this._tileHandler);this._tileStrategy.updateTiles(a,this._updateParameters);this._tileStrategy.update(this._updateParameters)}this._animation&&(this._scheduleRender(),this._scheduleUpdate())}},_setViewState:function(a){a=g.mixin(this._viewState,a);a.center.type&&(a.center=
[a.center.x,a.center.y]);this._scheduleRender();this._scheduleUpdate()},_animateViewState:function(a,b){var c=b.immediate||0===e.defaults.map.zoomDuration;this._animation=null;if(c)this._setViewState(a);else{var c=this._viewState,d=e.defaults.map.zoomDuration,f=U()+16,h=c.center[0],g=c.center[1],n=c.scale,p=Array.isArray(a.center)?a.center[0]:a.center.x,m=Array.isArray(a.center)?a.center[1]:a.center.y,s=a.scale||c.scale,u=this;this._animation={running:!0,stop:function(){this.running=!1},step:function(){if(this.running){var a=
(U()+16-f)/d;1<=a&&(a=1,this.running=!1);a=S(a);u._setViewState({center:[h+(p-h)*a,g+(m-g)*a],scale:n+(s-n)*a})}}};this._scheduleRender();this._scheduleUpdate()}},onStyleChange:function(a){},_opacityChangeHandler:function(a){this._div&&(this._div.style.opacity=a.opacity)},_onResizeHandler:function(a){var b=this._div&&this._div.style;b&&(b.width=a.width+"px",b.height=a.height+"px",this._setViewState({center:a.extent.getCenter(),width:a.width,height:a.height,size:[a.width,a.height]}))},onResume:function(){var a=
this._map;this.inherited(arguments);s.show(this._div);this._setViewState({center:a.extent.getCenter(),scale:a.getScale(),width:a.width,height:a.height,size:[a.width,a.height]});this._handles=[a.on("pan-end",g.hitch(this,this._onPanEndHandler)),a.on("pan",g.hitch(this,this._onPanExtentChangeHandler)),a.on("extent-change",g.hitch(this,this._onExtentChangeHandler)),a.on("scale",g.hitch(this,this._onScaleHandler))]},onSuspend:function(){this.inherited(arguments);s.hide(this._div);this._handles.forEach(function(a){a.remove()});
this._handles=null},_onPanEndHandler:function(a){this._panning=!1;this._setViewState({center:a.extent.getCenter(),scale:this._map.getScale()})},_onPanExtentChangeHandler:function(a){this._panning=!0;this._animation&&(this._animation.stop(),this._animation=null);this._setViewState({center:a.extent.getCenter(),scale:this._map.getScale()})},_onExtentChangeHandler:function(a){var b=this._pinching||a.immediate;this._animateViewState({center:a.extent.getCenter(),scale:a.lod.scale},{immediate:b});this._pinching=
!1},_onScaleHandler:function(a){this._animation&&(this._animation.stop(),this._animation=null);var b=this._map;if(b._zoomAnimDiv.extent)this._pinching=this._panning=!1,this._animateViewState({center:b._zoomAnimDiv.extent.getCenter(),scale:b._zoomAnimDiv.newLod.scale},{immediate:a.immediate});else{var c=b.navigationManager,d=c._dragOrigin;a=b.extent.getCenter();var e=d.x-0.5*b.width,d=d.y-0.5*b.height,f=b.extent.getWidth()/b.width,h;c._pinchScale?(this._pinching=!0,c=c._pinchScale,h=f/c,a.x-=e*(h-
f),a.y+=d*(h-f),b=b.__LOD.scale/c,this._setViewState({center:a,scale:b})):c._zoomEndExtent&&(this._pinching=!1,c=b.getScale()/b.navigationManager._zoomEndLod.scale,h=f/c,a.x-=e*(h-f),a.y+=d*(h-f),b=b.navigationManager._zoomEndLod.scale,this._animateViewState({center:a,scale:b},{immediate:!1}))}}});h.ACCESS_TOKEN=null;h.supported=function(){return O.detectWebGL()[0]};var U=function(){var a,b=window.performance||{},c=b.now||b.webkitNow||b.msNow||b.oNow||b.mozNow;if(void 0!==c)return function(){return c.call(b)};
a=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-a}}();f=m("ff");p=m("ie");t=m("webkit");m=m("opera");var T=(new Date).getTime(),E=window.requestAnimationFrame;E||(E=window[(t&&"webkit"||f&&"moz"||m&&"o"||p&&"ms")+"RequestAnimationFrame"])||(E=function(a){var b=U(),c=Math.max(0,16-(b-T)),d=window.setTimeout(function(){a(U())},c);T=b+c;return d});return h})},
"esri/layers/unitBezier":function(){define([],function(){var g=function(a,b,d,c){function h(a,b){var c,d,h,p;b=null==b?1E-6:b;h=a;for(d=0;8>d;d++){p=((e*h+f)*h+g)*h-a;if(Math.abs(p)<b)return h;c=(3*e*h+2*f)*h+g;if(1E-6>Math.abs(c))break;h-=p/c}c=0;d=1;h=a;if(h<c)return c;if(h>d)return d;for(;c<d;){p=((e*h+f)*h+g)*h;if(Math.abs(p-a)<b)break;a>p?c=h:d=h;h=0.5*(d-c)+c}return h}var g=3*a,f=3*(d-a)-g,e=1-g-f,p=3*b,m=3*(c-b)-p,u=1-p-m;return function(a,b){var c=h(a,b);return((u*c+m)*c+p)*c}},m=/^cubic-bezier\((.*)\)/;
g.parse=function(a){var b=g[a]||null;if(!b&&(a=m.exec(a)))a=a[1].split(",").map(function(a){return parseFloat(a.trim())}),4===a.length&&!a.some(function(a){return isNaN(a)})&&(b=g.apply(g,a));return b};g.ease=g(0.25,0.1,0.25,1);g.linear=g(0,0,1,1);g.easeIn=g["ease-in"]=g(0.42,0,1,1);g.easeOut=g["ease-out"]=g(0,0,0.58,1);g.easeInOut=g["ease-in-out"]=g(0.42,0,0.58,1);return g})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang"],function(g,m,a,
b){return function(d,c){var h=b.mixin({},{url:d,failOk:!0},c);"array-buffer"===c.responseType?(h.handleAs="arraybuffer",delete h.responseType):c.responseType&&(h.handleAs=c.responseType,delete h.responseType);null!==c.query&&(h.content=h.query,delete h.query);return a(h).then(function(a){return{data:a}})}})},"esri/layers/vectorTiles/core/promiseUtils":function(){define(["require","exports","dojo/Deferred","./Error"],function(g,m,a,b){m.eachAlways=function(b){var c=new a,h=[],g=b.length;0===g&&c.resolve(h);
b.forEach(function(a){var b={promise:a};h.push(b);a.then(function(a){b.value=a}).otherwise(function(a){b.error=a}).then(function(){--g;0===g&&c.resolve(h)})});return c.promise};m.create=function(b){var c=new a;b(function(a){void 0===a&&(a=null);return c.resolve(a)},c.reject);return c.promise};m.reject=function(b){var c=new a;c.reject(b);return c.promise};m.resolve=function(b){void 0===b&&(b=null);var c=new a;c.resolve(b);return c.promise};m.after=function(b,c){void 0===c&&(c=null);var h=0,g=new a(function(){h&&
(clearTimeout(h),h=0)}),h=setTimeout(function(){g.resolve(c)},b);return g.promise};m.timeout=function(d,c,h){var g=0,f=new a(d.cancel);d.then(function(a){f.isFulfilled()||(f.resolve(a),g&&(clearTimeout(g),g=0))});d.otherwise(function(a){f.isFulfilled()||(f.reject(a),g&&(clearTimeout(g),g=0))});g=setTimeout(function(){var a=h||new b("promiseUtils:timeout","The wrapped promise did not resolve within "+c+" ms");f.reject(a)},c);return f.promise};m.wrapCallback=function(b){var c=!1,h=new a(function(){return c=
!0});b(function(a){c||h.resolve(a)});return h.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(g,m,a,b,d){g=function(b){function d(){b.apply(this,arguments)}a(d,b);return d}(d);g.prototype.type="error";return g})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(g,m){function a(){this.constructor=g}for(var b in m)m.hasOwnProperty(b)&&
(g[b]=m[b]);g.prototype=null===m?Object.create(m):(a.prototype=m.prototype,new a)}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(g,m,a,b){var d=arguments.length,c=3>d?m:null===b?b=Object.getOwnPropertyDescriptor(m,a):b,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(g,m,a,b);else for(var n=g.length-1;0<=n;n--)if(h=g[n])c=(3>d?h(c):3<d?h(m,a,c):h(m,a))||c;return 3<d&&c&&Object.defineProperty(m,a,c),
c}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","dojo/string"],function(g,m,a,b,d){return function(){function a(b,c,f){this.name=b;this.message=c&&d.substitute(c,f,function(a){return null==a?"":a})||"";this.details=f}a.prototype.toString=function(){return"["+this.name+"]: "+this.message};return a}()})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],
function(g,m,a,b){function d(a){return c(a)||p.test(a)}function c(a){return a&&"/"===a[0]&&"/"===a[1]}function h(a){if("string"===typeof a)return new b(n(a));a.scheme||(a.scheme=m.appUrl.scheme);return a}function n(a,b){void 0===b&&(b=m.appBaseUrl);if(c(a))return"file"===m.appUrl.scheme?"https:"+a:m.appUrl.scheme+":"+a;if(p.test(a))return a;var d=f,e;if("/"===a[0]){e=b;var h=e.indexOf("//"),h=e.indexOf("/",h+2);e=-1===h?e:e.slice(0,h)}else e=b;return d(e,a)}function f(){for(var a=[],b=0;b<arguments.length;b++)a[b-
0]=arguments[b];if(a&&a.length){b=[];if(d(a[0])){var c=a[0],f=c.indexOf("//");b.push(c.slice(0,f+1));e.test(a[0])&&(b[0]+="/");a[0]=c.slice(f+2)}else"/"===a[0][0]&&b.push("");a=a.reduce(function(a,b){return a.concat(b.split("/"))},[]);for(c=0;c<a.length;c++)f=a[c],".."===f&&0<b.length?b.pop():f&&("."!==f||0===b.length)&&b.push(f);return b.join("/")}}m.normalize=function(b){return a.normalize(b)};m.canUseXhr=function(b){return a.canUseXhr(b)};g=Function("return this")();m.appUrl=new b(g.location);
m.appBaseUrl=function(){var a=m.appUrl.path,a=a.substring(0,a.lastIndexOf(a.split("/")[a.split("/").length-1]));return""+(m.appUrl.scheme+"://"+m.appUrl.host+(null!=m.appUrl.port?":"+m.appUrl.port:""))+a}();var e=/^\s*file:/i,p=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;m.isAbsolute=d;m.urlToObject=function(b){return a.urlToObject(b)};m.getOrigin=function(a){if("data:"===a.slice(0,5))return null;var b=a.indexOf("://");if(-1===b&&c(a))b=2;else if(-1!==b)b+=3;else return null;b=a.indexOf("/",b);return-1===b?a:
a.slice(0,b)};m.makeAbsolute=n;m.hasSameOrigin=function(a,b,c){void 0===c&&(c=!1);a=h(a);b=h(b);return!c&&a.scheme!==b.scheme?!1:a.host.toLowerCase()===b.host.toLowerCase()&&a.port===b.port};m.join=f})},"esri/layers/vectorTiles/layers/support/vectorTileLayerLoader":function(){define("require exports dojo/has dojo/_base/lang ../../core/promiseUtils ../../core/urlUtils ../../config ../../request".split(" "),function(g,m,a,b,d,c,h,n){function f(a){if(a){var b=c.getOrigin(a);!c.canUseXhr(b)&&-1===v.indexOf(b)&&
v.push(b);return a}}function e(a,b,d){if(null!=b.sources){d&&-1!==d.path.indexOf("root.json")&&(d.path=d.path.substr(0,d.path.indexOf("root.json")),a.styleUrl=d.path);var e=u(b,d),f=b.sprite,h=b.glyphs;e&&e.url&&(e=d&&d.path?d.path:e.url,b.sprite&&!c.isAbsolute(b.sprite)&&(f=c.join(e,b.sprite)),b.glyphs&&!c.isAbsolute(b.glyphs)&&(h=c.join(e,b.glyphs)));a.style=b;a.spriteUrl=f;a.glyphsUrl=h;return s(a,b,d)}if(b.hasOwnProperty("tileInfo"))return a.layerDefinition=b,a.serviceUrl=d.path,p(a,b,d)}function p(a,
b,d){if(w&&!b.hasOwnProperty("defaultStyles"))throw Error("Service definition must have 'defaultStyles' element!");b=b.defaultStyles;c.isAbsolute(b)?a.styleUrl=c.normalize(b):a.styleUrl=c.normalize(c.join(d.path,b));f(a.styleUrl);return n(c.join(a.styleUrl,"root.json"),{responseType:"json"}).then(function(b){var d=b.data.sprite,e=b.data.glyphs;d&&!c.isAbsolute(d)&&(d=c.join(a.styleUrl,d));e&&!c.isAbsolute(e)&&(e=c.join(a.styleUrl,e));a.spriteUrl=d;a.glyphsUrl=e;return a.style=b.data})}function s(a,
b,e){(b=u(b,e))||d.reject("Source isn't available in the syle object!");if(b.url)return a.serviceUrl=b.url,c.isAbsolute(a.serviceUrl)||(a.serviceUrl=c.join(e.path,a.serviceUrl)),f(a.serviceUrl),n(a.serviceUrl,{query:{f:"json"},responseType:"json"}).then(function(b){a.layerDefinition=t(b.data);return a});a.layerDefinition=t(b);return d.resolve(a)}function u(a,b){if(!a.sources)return null;var d=a.sources,e=null;if(d.esri)e=d.esri,b&&(e.url&&!c.isAbsolute(e.url))&&(d=b.path.substring(0,b.path.lastIndexOf("/")),
e.url=c.join(d,e.url));else{for(var f=0,h=Object.keys(d);f<h.length;f++){var g=h[f];if(-1!==g.toLocaleLowerCase().indexOf("street")&&"vector"===e.type){e=d[g];break}}if(!e){f=0;for(h=Object.keys(d);f<h.length&&!(g=h[f],e=d[g],"vector"===e.type);f++);}}return e}function t(a){if(a.hasOwnProperty("tileInfo"))return a;for(var b={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},c=(b.xmax-b.xmin)/512,d=[],e=a.hasOwnProperty("minzoom")?
parseFloat(a.minzoom):0,h=a.hasOwnProperty("maxzoom")?parseFloat(a.maxzoom):16;e<h;e++){var g=c/Math.pow(2,e);d.push({level:e,scale:Math.floor(3779.527559055118*g),resolution:g})}a.tiles.forEach(f);return{capabilities:"TilesOnly",initialExtent:b,fullExtent:b,minScale:d[0].scale,maxScale:d[d.length-1].scale,tiles:a.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:d,spatialReference:{wkid:102100}}}}var w=0,v=h.defaults&&h.defaults.io.corsEnabledServers||
h.request.corsEnabledServers;m.loadMetadata=function(a){if(!a)return d.reject("invalid input URL!");var h={layerDefinition:null,parsedUrl:null,serviceUrl:null,style:null,styleUrl:null,url:null,spriteUrl:null,glyphsUrl:null};if("string"!==typeof a)return e(h,a,null).then(function(){return h});a=h.url=c.normalize(a);var g=h.parsedUrl=c.urlToObject(a);f(a);return n(g.path,{responseType:"json",query:b.mixin({f:"json"},g.query)}).then(function(a){return e(h,a.data,g)}).then(function(){return h})}})},"esri/layers/vectorTiles/config":function(){define(["require",
"exports","esri/config"],function(g,m,a){return a})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","./StyleLayer"],function(g,m,a){return function(){function b(a,c){this.styleJSON=a;this.version=parseFloat(a.version);this.sprite=c?c.spriteUrl:a.sprite;this.glyphs=c?c.glyphsUrl:a.glyphs;this.layers=(a.layers||[]).map(b._create);this._identifyRefLayers()}b.prototype._identifyRefLayers=function(){for(var a=[],b=[],h=0,g=this.layers;h<g.length;h++){var f=
g[h];if(1===f.type){var e=f.sourceLayer,e=e+("|"+JSON.stringify(f.minzoom)),e=e+("|"+JSON.stringify(f.maxzoom)),e=e+("|"+JSON.stringify(f.filter));a.push({key:e,layer:f})}2===f.type&&(e=f.sourceLayer,e+="|"+JSON.stringify(f.minzoom),e+="|"+JSON.stringify(f.maxzoom),e+="|"+JSON.stringify(f.filter),e+="|"+JSON.stringify(f.layout["line-cap"]),e+="|"+JSON.stringify(f.layout["line-join"]),b.push({key:e,layer:f}))}this._assignRefLayers(a);this._assignRefLayers(b)};b.prototype._assignRefLayers=function(a){a.sort(function(a,
b){return a.key<b.key?-1:a.key>b.key?1:0});for(var b,h,g=a.length,f=0;f<g;f++){var e=a[f];if(e.key===b)e.layer.refLayerId=h;else if(b=e.key,h=e.layer.id,1===e.layer.type&&!e.layer.hasPaintProperty("fill-outline-color"))for(var p=f+1;p<g;p++){var m=a[p];if(m.key===b){if(m.layer.hasPaintProperty("fill-outline-color")){a[f]=m;a[p]=e;h=m.layer.id;break}}else break}}};b._create=function(b,c,h){c=1-(1+c)*(1/(h.length+1));switch(b.type){case "background":return new a.StyleLayer(0,b,c);case "fill":return new a.StyleLayer(1,
b,c);case "line":return new a.StyleLayer(2,b,c);case "symbol":return new a.StyleLayer(3,b,c);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":throw Error("Unsupported vector tile circle layer");}throw Error("Unknown vector tile layer");};return b}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define(["require","exports","./StyleDefinition","./StyleProperty","./Filter"],function(g,m,a,b,d){g=function(){function c(b,c,d){this.type=b;this.id=
c.id;this.source=c.source;this.sourceLayer=c["source-layer"];this.minzoom=c.minzoom;this.maxzoom=c.maxzoom;this.filter=c.filter;this.layout=c.layout;this.paint=c.paint;this.z=d;switch(b){case 0:this._layoutDefinition=a.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=a.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=a.StyleDefinition.fillLayoutDefinition;this._paintDefinition=a.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=a.StyleDefinition.lineLayoutDefinition;
this._paintDefinition=a.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=a.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=a.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}c.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=d.createFilter(this.filter)};c.prototype.hasLayoutProperty=function(a){var b=this._layoutProperties;
return b&&b[a]?!0:!1};c.prototype.hasPaintProperty=function(a){var b=this._paintProperties;return b?void 0!==b[a]:!1};c.prototype.getLayoutValue=function(a,b){var c,d=this._layoutProperties;d&&(d=d[a])&&(c=d.getValue(b));d=this._layoutDefinition[a];void 0===c&&(c=d["default"]);"enum"===d.type&&(c=d.values.indexOf(c));return c};c.prototype.getPaintValue=function(a,b){var c,d=this._paintProperties;d&&(d=d[a])&&(c=d.getValue(b));d=this._paintDefinition[a];void 0===c&&(c=d["default"]);"enum"===d.type&&
(c=d.values.indexOf(c));return c};c.prototype._parseLayout=function(a){var c={},d;for(d in a)c[d]=new b(this._layoutDefinition[d],a[d]);return c};c.prototype._parsePaint=function(a){var c={},d;for(d in a)c[d]=new b(this._paintDefinition[d],a[d]);return c};return c}();m.StyleLayer=g;g=function(){return function(a,b){this.cap=a.getLayoutValue("line-cap",b);this.join=a.getLayoutValue("line-join",b);this.miterLimit=a.getLayoutValue("line-miter-limit",b);this.roundLimit=a.getLayoutValue("line-round-limit",
b)}}();m.LineLayout=g;g=function(){return function(a,b,d){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b);this.optional=a.getLayoutValue("icon-optional",b);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b);this.size=a.getLayoutValue("icon-size",b);this.rotate=a.getLayoutValue("icon-rotate",b);this.padding=a.getLayoutValue("icon-padding",b);this.keepUpright=a.getLayoutValue("icon-keep-upright",b);this.offset=
a.getLayoutValue("icon-offset",b);d&&(1===this.rotationAlignment&&!a.hasLayoutProperty("icon-rotation-alignment"))&&(this.rotationAlignment=0)}}();m.IconLayout=g;g=function(){return function(a,b,d){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b);this.optional=a.getLayoutValue("text-optional",b);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b);this.font=a.getLayoutValue("text-font",b);this.maxWidth=a.getLayoutValue("text-max-width",
b);this.lineHeight=a.getLayoutValue("text-line-height",b);this.letterSpacing=a.getLayoutValue("text-letter-spacing",b);this.justify=a.getLayoutValue("text-justify",b);this.anchor=a.getLayoutValue("text-anchor",b);this.maxAngle=a.getLayoutValue("text-max-angle",b);this.size=a.getLayoutValue("text-size",b);this.rotate=a.getLayoutValue("text-rotate",b);this.padding=a.getLayoutValue("text-padding",b);this.keepUpright=a.getLayoutValue("text-keep-upright",b);this.transform=a.getLayoutValue("text-transform",
b);this.offset=a.getLayoutValue("text-offset",b);d&&(1===this.rotationAlignment&&!a.hasLayoutProperty("text-rotation-alignment"))&&(this.rotationAlignment=0)}}();m.TextLayout=g})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(g,m){var a=function(){function a(){}a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],
"default":"visible"}};a.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point",
"line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",
minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!0},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number","default":1.2},
"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",
values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};a.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};a.fillPaintDefinition={"fill-opacity":{type:"number",
minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};a.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},
"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}};a.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,
maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color",
"default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};a.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",
minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};a.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",
value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};return a}();m.StyleDefinition=a})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(g,m,a,b){return function(){function d(a,b){var g;switch(a.type){case "number":g=!0;break;case "color":g=!0;b=d._parseColor(b);break;case "array":g="number"===a.value;break;default:g=!1}this.getValue=
g?this._interpolate(b):this._piecewise(b)}d.prototype._piecewise=function(a){var b=a.stops;return b?function(a){var c=b.length;if(0!==c){for(var d=0,g=0;g<c;g++)if(b[g][0]<=a)d=g;else break;return b[d][1]}}:function(){return a}};d.prototype._interpolate=function(a){var d=a.stops;if(d){var g=a.base||1;return function(a){for(var c,p,m=d.length,u=0;u<m;u++){var t=d[u];if(t[0]<=a)c=t;else{p=t;break}}if(c&&p){u=p[0]-c[0];a-=c[0];a=1===g?a/u:(Math.pow(g,a)-1)/(Math.pow(g,u)-1);if(Array.isArray(c[1])){c=
c[1];p=p[1];m=[];for(u=0;u<c.length;u++)m.push(b.interpolate(c[u],p[u],a));return m}return b.interpolate(c[1],p[1],a)}if(c)return c[1];if(p)return p[1]}}return function(){return a}};d._parseColor=function(b){if(Array.isArray(b))return b;if("string"===typeof b){var h=new a(b);if(h)return[h.r/255,h.g/255,h.b/255,h.a||1]}if(b&&b.stops)return b.stops=b.stops.map(function(a){return[a[0],d._parseColor(a[1])]}),b;throw Error("Incorrect color definition "+b);};return d}()})},"esri/layers/vectorTiles/Color":function(){define(["require",
"exports","esri/Color"],function(g,m,a){return function(){return function(b){return new a(b)}}()})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(g,m){function a(a,b){a%=b;return 0<=a?a:a+b}m.C_INFINITY=Number.POSITIVE_INFINITY;m.C_PI=Math.PI;m.C_2PI=2*m.C_PI;m.C_PI_BY_2=m.C_PI/2;m.C_RAD_TO_256=128/m.C_PI;m.C_256_TO_RAD=m.C_PI/128;m.C_DEG_TO_256=256/360;m.C_DEG_TO_RAD=m.C_PI/180;m.C_SQRT2=1.414213562;m.C_SQRT2_INV=1/m.C_SQRT2;var b=1/Math.LN2;
m.positiveMod=a;m.radToByte=function(b){return a(b*m.C_RAD_TO_256,256)};m.degToByte=function(b){return a(b*m.C_DEG_TO_256,256)};m.log2=function(a){return Math.log(a)*b};m.sqr=function(a){return a*a};m.clamp=function(a,b,h){return Math.min(Math.max(a,b),h)};m.interpolate=function(a,b,h){return a*(1-h)+b*h};m.between=function(a,b,h){return a>=b&&a<=h||a>=h&&a<=b}})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(g,m){return function(){function a(b,
d,c){this._op=b;"$type"===d?(this._val=c instanceof Array?c.map(function(b){return a._types.indexOf(b)}):a._types.indexOf(c),this._op+=11):(this._key=d,this._val=c)}a.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=this._val;case 6:return a.values[this._key]>=this._val;
case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var d=0,c=this._val;d<c.length;d++){var h=c[d];if(h.filter(a))return!0}return!1;case 10:d=0;for(c=this._val;d<c.length;d++)if(h=c[d],!h.filter(a))return!1;return!0;case 11:d=0;for(c=this._val;d<c.length;d++)if(h=c[d],h.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<this._val;case 15:return a.type>this._val;
case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}};a.createFilter=function(b){if(!b)return new a(0,void 0,!0);var d=b[0];if(1>=b.length)return new a(0,void 0,"any"!==d);switch(d){case "\x3d\x3d":return new a(1,b[1],b[2]);case "!\x3d":return new a(2,b[1],b[2]);case "\x3e":return new a(4,b[1],b[2]);case "\x3c":return new a(3,b[1],b[2]);case "\x3e\x3d":return new a(6,b[1],b[2]);case "\x3c\x3d":return new a(5,
b[1],b[2]);case "in":return new a(7,b[1],b.slice(2));case "!in":return new a(8,b[1],b.slice(2));case "any":return new a(9,void 0,b.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,b.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,b.slice(1).map(a.createFilter.bind(this)));default:throw Error("invalid operator: "+d);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileContainer":function(){define("require exports ../../core/tsSupport/extendsHelper dojo/has ../../core/libs/gl-matrix/vec3 ../../core/libs/gl-matrix/mat4 ../2d/engine/Container ./renderers/Renderer ./GeometryUtils ./StencilClipGenerator".split(" "),
function(g,m,a,b,d,c,h,n,f,e){return function(b){function h(){b.call(this);this.isInitialized=!1;this._displayHeight=this._displayWidth=0;this._clip=new e;this._tileCoordinateScale=d.create();this._orientationVec=d.create();this._displayScale=d.create();this._orientationVec.set([0,0,1]);this._defaultTransform=c.create()}a(h,b);h.prototype.initialize=function(a,b,c,d){this._renderer=new n(a,b);this._tileInfoView=d;this._tileInfo=c;this.isInitialized=!0};h.prototype.prepareChildrenRenderParameters=
function(a){var b=a.state;if(!b||!this._tileInfo||!this.isInitialized)return a;a.displayLevel=this._tileInfo.scaleToZoom(b.scale);a.requiredLevel=this._tileInfoView.getClosestInfoForScale(b.scale).level;a.renderer=this._renderer;return a};h.prototype.renderChildren=function(a){if(!(0===this.children.length||!this.isInitialized||!a||!a.state)){this.sortChildren(function(a,b){return b.resolution-a.resolution});this._clip.update(this.children);this._updateTilesTransform(a.state,this._tileInfoView.getClosestInfoForScale(a.state.scale).level);
var c=a.context;c.setDepthWriteEnabled(!0);this._renderer.setStateParams(a.state,a.devicePixelRatio,a.displayLevel);this._renderer.drawClippingMasks(c,this.children);c.setStencilWriteMask(0);c.setBlendFunctionSeparate(1,771,1,771);c.setStencilOp(7680,7680,7681);c.setDepthFunction(515);c.setBlendingEnabled(!1);c.setStencilTestEnabled(!0);c.setDepthTestEnabled(!0);c.setDepthWriteEnabled(!0);a.drawphase=0;b.prototype.renderChildren.call(this,a);c.setDepthWriteEnabled(!1);c.setBlendingEnabled(!0);a.drawphase=
1;b.prototype.renderChildren.call(this,a);a.drawphase=2;b.prototype.renderChildren.call(this,a);c.setStencilTestEnabled(!1);c.setDepthTestEnabled(!1);this._renderer.needsRedraw()&&this.requestRender()}};h.prototype.attachChild=function(a,b){return a.attach(b)};h.prototype.detachChild=function(a,b){a.detach(b)};h.prototype.renderChild=function(a,b){a.render(b)};h.prototype._updateTilesTransform=function(a,b){var c=1/a.width,d=1/a.height,e=[0,0];this._calculateRelativeViewProjMat(this._tileInfo.lods[b].resolution,
a.resolution,a.rotation,this._tileInfo.size[1],4096,a.width,a.height,this._defaultTransform);for(var f=0,h=this.children;f<h.length;f++){var g=h[f];a.toScreen(e,g.topLeft);e[1]=a.height-e[1];g.tileTransform.displayCoord[0]=2*e[0]*c-1;g.tileTransform.displayCoord[1]=2*e[1]*d-1;g.key.level===b&&4096===g.coordRange?g.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this._tileInfo.lods[g.key.level].resolution,a.resolution,a.rotation,this._tileInfo.size[1],g.coordRange,
a.width,a.height,g.tileTransform.transform)}};h.prototype._calculateRelativeViewProjMat=function(a,b,d,e,h,g,n,p){var m=0.125;512!==e&&4096!==h&&(m=e/h);a=m*(a/b);this._tileCoordinateScale.set([a,a,1]);if(g!==this._displayWidth||n!==this._displayHeight)this._displayScale.set([2/g,-2/n,1]),this._displayWidth=g,this._displayHeight=n;c.identity(p);c.scale(p,p,this._tileCoordinateScale);c.rotate(p,p,-d*f.C_DEG_TO_RAD,this._orientationVec);c.scale(p,p,this._displayScale);c.transpose(p,p)};return h}(h)})},
"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],function(g){var m={create:function(){var a=new g.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new g.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},fromValues:function(a,b,d){var c=new g.ARRAY_TYPE(3);c[0]=a;c[1]=b;c[2]=d;return c},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,d,c){a[0]=b;a[1]=d;a[2]=c;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+
d[1];a[2]=b[2]+d[2];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];return a}};m.sub=m.subtract;m.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];return a};m.mul=m.multiply;m.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];return a};m.div=m.divide;m.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};m.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);
return a};m.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);return a};m.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);return a};m.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};m.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;return a};m.scaleAndAdd=function(a,b,d,c){a[0]=b[0]+d[0]*c;a[1]=b[1]+d[1]*c;a[2]=b[2]+d[2]*c;return a};m.distance=function(a,
b){var d=b[0]-a[0],c=b[1]-a[1],h=b[2]-a[2];return Math.sqrt(d*d+c*c+h*h)};m.dist=m.distance;m.squaredDistance=function(a,b){var d=b[0]-a[0],c=b[1]-a[1],h=b[2]-a[2];return d*d+c*c+h*h};m.sqrDist=m.squaredDistance;m.length=function(a){var b=a[0],d=a[1];a=a[2];return Math.sqrt(b*b+d*d+a*a)};m.len=m.length;m.squaredLength=function(a){var b=a[0],d=a[1];a=a[2];return b*b+d*d+a*a};m.sqrLen=m.squaredLength;m.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};m.inverse=function(a,b){a[0]=1/b[0];
a[1]=1/b[1];a[2]=1/b[2];return a};m.normalize=function(a,b){var d=b[0],c=b[1],h=b[2],d=d*d+c*c+h*h;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d);return a};m.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};m.cross=function(a,b,d){var c=b[0],h=b[1];b=b[2];var g=d[0],f=d[1];d=d[2];a[0]=h*d-b*f;a[1]=b*g-c*d;a[2]=c*f-h*g;return a};m.lerp=function(a,b,d,c){var h=b[0],g=b[1];b=b[2];a[0]=h+c*(d[0]-h);a[1]=g+c*(d[1]-g);a[2]=b+c*(d[2]-b);return a};m.hermite=function(a,b,d,c,h,g){var f=
g*g,e=f*(2*g-3)+1,p=f*(g-2)+g,m=f*(g-1);g=f*(3-2*g);a[0]=b[0]*e+d[0]*p+c[0]*m+h[0]*g;a[1]=b[1]*e+d[1]*p+c[1]*m+h[1]*g;a[2]=b[2]*e+d[2]*p+c[2]*m+h[2]*g;return a};m.bezier=function(a,b,d,c,h,g){var f=1-g,e=f*f,p=g*g,m=e*f,e=3*g*e,f=3*p*f;g*=p;a[0]=b[0]*m+d[0]*e+c[0]*f+h[0]*g;a[1]=b[1]*m+d[1]*e+c[1]*f+h[1]*g;a[2]=b[2]*m+d[2]*e+c[2]*f+h[2]*g;return a};m.random=function(a,b){b=b||1;var d=2*g.RANDOM()*Math.PI,c=2*g.RANDOM()-1,h=Math.sqrt(1-c*c)*b;a[0]=Math.cos(d)*h;a[1]=Math.sin(d)*h;a[2]=c*b;return a};
m.transformMat4=function(a,b,d){var c=b[0],h=b[1];b=b[2];var g=d[3]*c+d[7]*h+d[11]*b+d[15],g=g||1;a[0]=(d[0]*c+d[4]*h+d[8]*b+d[12])/g;a[1]=(d[1]*c+d[5]*h+d[9]*b+d[13])/g;a[2]=(d[2]*c+d[6]*h+d[10]*b+d[14])/g;return a};m.transformMat3=function(a,b,d){var c=b[0],h=b[1];b=b[2];a[0]=c*d[0]+h*d[3]+b*d[6];a[1]=c*d[1]+h*d[4]+b*d[7];a[2]=c*d[2]+h*d[5]+b*d[8];return a};m.transformQuat=function(a,b,d){var c=b[0],h=b[1],g=b[2];b=d[0];var f=d[1],e=d[2];d=d[3];var p=d*c+f*g-e*h,m=d*h+e*c-b*g,u=d*g+b*h-f*c,c=-b*
c-f*h-e*g;a[0]=p*d+c*-b+m*-e-u*-f;a[1]=m*d+c*-f+u*-b-p*-e;a[2]=u*d+c*-e+p*-f-m*-b;return a};m.rotateX=function(a,b,d,c){var h=[],g=[];h[0]=b[0]-d[0];h[1]=b[1]-d[1];h[2]=b[2]-d[2];g[0]=h[0];g[1]=h[1]*Math.cos(c)-h[2]*Math.sin(c);g[2]=h[1]*Math.sin(c)+h[2]*Math.cos(c);a[0]=g[0]+d[0];a[1]=g[1]+d[1];a[2]=g[2]+d[2];return a};m.rotateY=function(a,b,d,c){var h=[],g=[];h[0]=b[0]-d[0];h[1]=b[1]-d[1];h[2]=b[2]-d[2];g[0]=h[2]*Math.sin(c)+h[0]*Math.cos(c);g[1]=h[1];g[2]=h[2]*Math.cos(c)-h[0]*Math.sin(c);a[0]=
g[0]+d[0];a[1]=g[1]+d[1];a[2]=g[2]+d[2];return a};m.rotateZ=function(a,b,d,c){var h=[],g=[];h[0]=b[0]-d[0];h[1]=b[1]-d[1];h[2]=b[2]-d[2];g[0]=h[0]*Math.cos(c)-h[1]*Math.sin(c);g[1]=h[0]*Math.sin(c)+h[1]*Math.cos(c);g[2]=h[2];a[0]=g[0]+d[0];a[1]=g[1]+d[1];a[2]=g[2]+d[2];return a};m.forEach=function(){var a=m.create();return function(b,d,c,h,g,f){d||(d=3);c||(c=0);for(h=h?Math.min(h*d+c,b.length):b.length;c<h;c+=d)a[0]=b[c],a[1]=b[c+1],a[2]=b[c+2],g(a,a,f),b[c]=a[0],b[c+1]=a[1],b[c+2]=a[2];return b}}();
m.angle=function(a,b){var d=m.fromValues(a[0],a[1],a[2]),c=m.fromValues(b[0],b[1],b[2]);m.normalize(d,d);m.normalize(c,c);d=m.dot(d,c);return 1<d?0:Math.acos(d)};m.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};m.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};m.equals=function(a,b){var d=a[0],c=a[1],h=a[2],n=b[0],f=b[1],e=b[2];return Math.abs(d-n)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(n))&&Math.abs(c-f)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(h-
e)<=g.EPSILON*Math.max(1,Math.abs(h),Math.abs(e))};return m})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],function(){var g={EPSILON:1E-6};g.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;g.RANDOM=Math.random;g.ENABLE_SIMD=!1;g.SIMD_AVAILABLE=g.ARRAY_TYPE===Float32Array&&"SIMD"in this;g.USE_SIMD=g.ENABLE_SIMD&&g.SIMD_AVAILABLE;g.setMatrixArrayType=function(a){g.ARRAY_TYPE=a};var m=Math.PI/180;g.toRadian=function(a){return a*m};g.equals=function(a,b){return Math.abs(a-
b)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return g})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],function(g){var m={scalar:{},SIMD:{},create:function(){var a=new g.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new g.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=
a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},fromValues:function(a,b,d,c,h,n,f,e,p,m,u,t,w,v,x,B){var A=new g.ARRAY_TYPE(16);A[0]=a;A[1]=b;A[2]=d;A[3]=c;A[4]=h;A[5]=n;A[6]=f;A[7]=e;A[8]=p;A[9]=m;A[10]=u;A[11]=t;A[12]=w;A[13]=v;A[14]=x;A[15]=B;return A},set:function(a,b,
d,c,h,g,f,e,p,m,u,t,w,v,x,B,A){a[0]=b;a[1]=d;a[2]=c;a[3]=h;a[4]=g;a[5]=f;a[6]=e;a[7]=p;a[8]=m;a[9]=u;a[10]=t;a[11]=w;a[12]=v;a[13]=x;a[14]=B;a[15]=A;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};m.scalar.transpose=function(a,b){if(a===b){var d=b[1],c=b[2],h=b[3],g=b[6],f=b[7],e=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=d;a[6]=b[9];a[7]=b[13];a[8]=c;a[9]=g;a[11]=b[14];a[12]=h;a[13]=f;a[14]=
e}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};m.SIMD.transpose=function(a,b){var d,c,h,g,f,e,p;d=SIMD.Float32x4.load(b,0);c=SIMD.Float32x4.load(b,4);h=SIMD.Float32x4.load(b,8);g=SIMD.Float32x4.load(b,12);f=SIMD.Float32x4.shuffle(d,c,0,1,4,5);e=SIMD.Float32x4.shuffle(h,g,0,1,4,5);p=SIMD.Float32x4.shuffle(f,e,0,2,4,6);f=SIMD.Float32x4.shuffle(f,e,1,3,5,7);SIMD.Float32x4.store(a,
0,p);SIMD.Float32x4.store(a,4,f);f=SIMD.Float32x4.shuffle(d,c,2,3,6,7);e=SIMD.Float32x4.shuffle(h,g,2,3,6,7);d=SIMD.Float32x4.shuffle(f,e,0,2,4,6);c=SIMD.Float32x4.shuffle(f,e,1,3,5,7);SIMD.Float32x4.store(a,8,d);SIMD.Float32x4.store(a,12,c);return a};m.transpose=g.USE_SIMD?m.SIMD.transpose:m.scalar.transpose;m.scalar.invert=function(a,b){var d=b[0],c=b[1],h=b[2],g=b[3],f=b[4],e=b[5],p=b[6],m=b[7],u=b[8],t=b[9],w=b[10],v=b[11],x=b[12],B=b[13],A=b[14],C=b[15],z=d*e-c*f,F=d*p-h*f,H=d*m-g*f,J=c*p-h*
e,I=c*m-g*e,K=h*m-g*p,M=u*B-t*x,L=u*A-w*x,G=u*C-v*x,O=t*A-w*B,S=t*C-v*B,U=w*C-v*A,T=z*U-F*S+H*O+J*G-I*L+K*M;if(!T)return null;T=1/T;a[0]=(e*U-p*S+m*O)*T;a[1]=(h*S-c*U-g*O)*T;a[2]=(B*K-A*I+C*J)*T;a[3]=(w*I-t*K-v*J)*T;a[4]=(p*G-f*U-m*L)*T;a[5]=(d*U-h*G+g*L)*T;a[6]=(A*H-x*K-C*F)*T;a[7]=(u*K-w*H+v*F)*T;a[8]=(f*S-e*G+m*M)*T;a[9]=(c*G-d*S-g*M)*T;a[10]=(x*I-B*H+C*z)*T;a[11]=(t*H-u*I-v*z)*T;a[12]=(e*L-f*O-p*M)*T;a[13]=(d*O-c*L+h*M)*T;a[14]=(B*F-x*J-A*z)*T;a[15]=(u*J-t*F+w*z)*T;return a};m.SIMD.invert=function(a,
b){var d,c,h,g,f,e,p,m,u;e=SIMD.Float32x4.load(b,0);p=SIMD.Float32x4.load(b,4);m=SIMD.Float32x4.load(b,8);u=SIMD.Float32x4.load(b,12);f=SIMD.Float32x4.shuffle(e,p,0,1,4,5);c=SIMD.Float32x4.shuffle(m,u,0,1,4,5);d=SIMD.Float32x4.shuffle(f,c,0,2,4,6);c=SIMD.Float32x4.shuffle(c,f,1,3,5,7);f=SIMD.Float32x4.shuffle(e,p,2,3,6,7);g=SIMD.Float32x4.shuffle(m,u,2,3,6,7);h=SIMD.Float32x4.shuffle(f,g,0,2,4,6);g=SIMD.Float32x4.shuffle(g,f,1,3,5,7);f=SIMD.Float32x4.mul(h,g);f=SIMD.Float32x4.swizzle(f,1,0,3,2);e=
SIMD.Float32x4.mul(c,f);p=SIMD.Float32x4.mul(d,f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,f),e);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,f),p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);f=SIMD.Float32x4.mul(c,h);f=SIMD.Float32x4.swizzle(f,1,0,3,2);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,f),e);u=SIMD.Float32x4.mul(d,f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(g,f));u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,f),u);u=SIMD.Float32x4.swizzle(u,
2,3,0,1);f=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,3,0,1),g);f=SIMD.Float32x4.swizzle(f,1,0,3,2);h=SIMD.Float32x4.swizzle(h,2,3,0,1);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,f),e);m=SIMD.Float32x4.mul(d,f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(h,f));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,f),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);f=SIMD.Float32x4.mul(d,c);f=SIMD.Float32x4.swizzle(f,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,f),m);u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,
f),u);f=SIMD.Float32x4.swizzle(f,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,f),m);u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(h,f));f=SIMD.Float32x4.mul(d,g);f=SIMD.Float32x4.swizzle(f,1,0,3,2);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(h,f));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,f),m);f=SIMD.Float32x4.swizzle(f,2,3,0,1);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,f),p);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(c,f));f=SIMD.Float32x4.mul(d,h);f=SIMD.Float32x4.swizzle(f,1,0,3,2);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,
f),p);u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(c,f));f=SIMD.Float32x4.swizzle(f,2,3,0,1);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(g,f));u=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,f),u);d=SIMD.Float32x4.mul(d,e);d=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(d,2,3,0,1),d);d=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(d,1,0,3,2),d);f=SIMD.Float32x4.reciprocalApproximation(d);d=SIMD.Float32x4.sub(SIMD.Float32x4.add(f,f),SIMD.Float32x4.mul(d,SIMD.Float32x4.mul(f,f)));d=SIMD.Float32x4.swizzle(d,0,0,0,0);if(!d)return null;
SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(d,e));SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(d,p));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(d,m));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(d,u));return a};m.invert=g.USE_SIMD?m.SIMD.invert:m.scalar.invert;m.scalar.adjoint=function(a,b){var d=b[0],c=b[1],h=b[2],g=b[3],f=b[4],e=b[5],p=b[6],m=b[7],u=b[8],t=b[9],w=b[10],v=b[11],x=b[12],B=b[13],A=b[14],C=b[15];a[0]=e*(w*C-v*A)-t*(p*C-m*A)+B*(p*v-m*w);a[1]=-(c*(w*C-v*A)-t*(h*C-g*A)+B*(h*v-g*w));a[2]=
c*(p*C-m*A)-e*(h*C-g*A)+B*(h*m-g*p);a[3]=-(c*(p*v-m*w)-e*(h*v-g*w)+t*(h*m-g*p));a[4]=-(f*(w*C-v*A)-u*(p*C-m*A)+x*(p*v-m*w));a[5]=d*(w*C-v*A)-u*(h*C-g*A)+x*(h*v-g*w);a[6]=-(d*(p*C-m*A)-f*(h*C-g*A)+x*(h*m-g*p));a[7]=d*(p*v-m*w)-f*(h*v-g*w)+u*(h*m-g*p);a[8]=f*(t*C-v*B)-u*(e*C-m*B)+x*(e*v-m*t);a[9]=-(d*(t*C-v*B)-u*(c*C-g*B)+x*(c*v-g*t));a[10]=d*(e*C-m*B)-f*(c*C-g*B)+x*(c*m-g*e);a[11]=-(d*(e*v-m*t)-f*(c*v-g*t)+u*(c*m-g*e));a[12]=-(f*(t*A-w*B)-u*(e*A-p*B)+x*(e*w-p*t));a[13]=d*(t*A-w*B)-u*(c*A-h*B)+x*(c*
w-h*t);a[14]=-(d*(e*A-p*B)-f*(c*A-h*B)+x*(c*p-h*e));a[15]=d*(e*w-p*t)-f*(c*w-h*t)+u*(c*p-h*e);return a};m.SIMD.adjoint=function(a,b){var d,c,h,g,f,e,p,m,u;d=SIMD.Float32x4.load(b,0);c=SIMD.Float32x4.load(b,4);h=SIMD.Float32x4.load(b,8);g=SIMD.Float32x4.load(b,12);p=SIMD.Float32x4.shuffle(d,c,0,1,4,5);e=SIMD.Float32x4.shuffle(h,g,0,1,4,5);f=SIMD.Float32x4.shuffle(p,e,0,2,4,6);e=SIMD.Float32x4.shuffle(e,p,1,3,5,7);p=SIMD.Float32x4.shuffle(d,c,2,3,6,7);c=SIMD.Float32x4.shuffle(h,g,2,3,6,7);d=SIMD.Float32x4.shuffle(p,
c,0,2,4,6);c=SIMD.Float32x4.shuffle(c,p,1,3,5,7);p=SIMD.Float32x4.mul(d,c);p=SIMD.Float32x4.swizzle(p,1,0,3,2);h=SIMD.Float32x4.mul(e,p);g=SIMD.Float32x4.mul(f,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,p),h);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,p),g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);p=SIMD.Float32x4.mul(e,d);p=SIMD.Float32x4.swizzle(p,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,p),h);u=SIMD.Float32x4.mul(f,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);
h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(c,p));u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,p),u);u=SIMD.Float32x4.swizzle(u,2,3,0,1);p=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,3,0,1),c);p=SIMD.Float32x4.swizzle(p,1,0,3,2);d=SIMD.Float32x4.swizzle(d,2,3,0,1);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,p),h);m=SIMD.Float32x4.mul(f,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(d,p));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,p),m);m=SIMD.Float32x4.swizzle(m,2,3,0,
1);p=SIMD.Float32x4.mul(f,e);p=SIMD.Float32x4.swizzle(p,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,p),m);u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,p),u);p=SIMD.Float32x4.swizzle(p,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,p),m);u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(d,p));p=SIMD.Float32x4.mul(f,c);p=SIMD.Float32x4.swizzle(p,1,0,3,2);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(d,p));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,p),m);p=SIMD.Float32x4.swizzle(p,2,3,0,1);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,
p),g);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(e,p));p=SIMD.Float32x4.mul(f,d);p=SIMD.Float32x4.swizzle(p,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,p),g);u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(e,p));p=SIMD.Float32x4.swizzle(p,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(c,p));u=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,p),u);SIMD.Float32x4.store(a,0,h);SIMD.Float32x4.store(a,4,g);SIMD.Float32x4.store(a,8,m);SIMD.Float32x4.store(a,12,u);return a};m.adjoint=g.USE_SIMD?m.SIMD.adjoint:
m.scalar.adjoint;m.determinant=function(a){var b=a[0],d=a[1],c=a[2],h=a[3],g=a[4],f=a[5],e=a[6],p=a[7],m=a[8],u=a[9],t=a[10],w=a[11],v=a[12],x=a[13],B=a[14];a=a[15];return(b*f-d*g)*(t*a-w*B)-(b*e-c*g)*(u*a-w*x)+(b*p-h*g)*(u*B-t*x)+(d*e-c*f)*(m*a-w*v)-(d*p-h*f)*(m*B-t*v)+(c*p-h*e)*(m*x-u*v)};m.SIMD.multiply=function(a,b,d){var c=SIMD.Float32x4.load(b,0),h=SIMD.Float32x4.load(b,4),g=SIMD.Float32x4.load(b,8);b=SIMD.Float32x4.load(b,12);var f=SIMD.Float32x4.load(d,0),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,
0,0,0,0),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),g),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),b))));SIMD.Float32x4.store(a,0,f);f=SIMD.Float32x4.load(d,4);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),g),
SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),b))));SIMD.Float32x4.store(a,4,f);f=SIMD.Float32x4.load(d,8);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),g),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),b))));SIMD.Float32x4.store(a,8,f);d=SIMD.Float32x4.load(d,12);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,
0,0,0,0),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),g),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),b))));SIMD.Float32x4.store(a,12,c);return a};m.scalar.multiply=function(a,b,d){var c=b[0],h=b[1],g=b[2],f=b[3],e=b[4],p=b[5],m=b[6],u=b[7],t=b[8],w=b[9],v=b[10],x=b[11],B=b[12],A=b[13],C=b[14];b=b[15];var z=d[0],F=d[1],H=d[2],J=d[3];a[0]=z*c+F*e+H*t+J*B;a[1]=z*h+F*p+H*w+J*A;a[2]=z*g+F*
m+H*v+J*C;a[3]=z*f+F*u+H*x+J*b;z=d[4];F=d[5];H=d[6];J=d[7];a[4]=z*c+F*e+H*t+J*B;a[5]=z*h+F*p+H*w+J*A;a[6]=z*g+F*m+H*v+J*C;a[7]=z*f+F*u+H*x+J*b;z=d[8];F=d[9];H=d[10];J=d[11];a[8]=z*c+F*e+H*t+J*B;a[9]=z*h+F*p+H*w+J*A;a[10]=z*g+F*m+H*v+J*C;a[11]=z*f+F*u+H*x+J*b;z=d[12];F=d[13];H=d[14];J=d[15];a[12]=z*c+F*e+H*t+J*B;a[13]=z*h+F*p+H*w+J*A;a[14]=z*g+F*m+H*v+J*C;a[15]=z*f+F*u+H*x+J*b;return a};m.multiply=g.USE_SIMD?m.SIMD.multiply:m.scalar.multiply;m.mul=m.multiply;m.scalar.translate=function(a,b,d){var c=
d[0],h=d[1];d=d[2];var g,f,e,p,m,u,t,w,v,x,B,A;b===a?(a[12]=b[0]*c+b[4]*h+b[8]*d+b[12],a[13]=b[1]*c+b[5]*h+b[9]*d+b[13],a[14]=b[2]*c+b[6]*h+b[10]*d+b[14],a[15]=b[3]*c+b[7]*h+b[11]*d+b[15]):(g=b[0],f=b[1],e=b[2],p=b[3],m=b[4],u=b[5],t=b[6],w=b[7],v=b[8],x=b[9],B=b[10],A=b[11],a[0]=g,a[1]=f,a[2]=e,a[3]=p,a[4]=m,a[5]=u,a[6]=t,a[7]=w,a[8]=v,a[9]=x,a[10]=B,a[11]=A,a[12]=g*c+m*h+v*d+b[12],a[13]=f*c+u*h+x*d+b[13],a[14]=e*c+t*h+B*d+b[14],a[15]=p*c+w*h+A*d+b[15]);return a};m.SIMD.translate=function(a,b,d){var c=
SIMD.Float32x4.load(b,0),h=SIMD.Float32x4.load(b,4),g=SIMD.Float32x4.load(b,8),f=SIMD.Float32x4.load(b,12);d=SIMD.Float32x4(d[0],d[1],d[2],0);b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]);c=SIMD.Float32x4.mul(c,SIMD.Float32x4.swizzle(d,0,0,0,0));h=SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(d,1,1,1,1));g=SIMD.Float32x4.mul(g,SIMD.Float32x4.swizzle(d,2,2,2,2));b=SIMD.Float32x4.add(c,SIMD.Float32x4.add(h,SIMD.Float32x4.add(g,
f)));SIMD.Float32x4.store(a,12,b);return a};m.translate=g.USE_SIMD?m.SIMD.translate:m.scalar.translate;m.scalar.scale=function(a,b,d){var c=d[0],h=d[1];d=d[2];a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*h;a[5]=b[5]*h;a[6]=b[6]*h;a[7]=b[7]*h;a[8]=b[8]*d;a[9]=b[9]*d;a[10]=b[10]*d;a[11]=b[11]*d;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};m.SIMD.scale=function(a,b,d){var c;d=SIMD.Float32x4(d[0],d[1],d[2],0);c=SIMD.Float32x4.load(b,0);SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(c,
SIMD.Float32x4.swizzle(d,0,0,0,0)));c=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(c,SIMD.Float32x4.swizzle(d,1,1,1,1)));c=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(c,SIMD.Float32x4.swizzle(d,2,2,2,2)));a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};m.scale=g.USE_SIMD?m.SIMD.scale:m.scalar.scale;m.rotate=function(a,b,d,c){var h=c[0],n=c[1];c=c[2];var f=Math.sqrt(h*h+n*n+c*c),e,p,m,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M,L,G;if(Math.abs(f)<g.EPSILON)return null;
f=1/f;h*=f;n*=f;c*=f;e=Math.sin(d);p=Math.cos(d);m=1-p;d=b[0];f=b[1];u=b[2];t=b[3];w=b[4];v=b[5];x=b[6];B=b[7];A=b[8];C=b[9];z=b[10];F=b[11];H=h*h*m+p;J=n*h*m+c*e;I=c*h*m-n*e;K=h*n*m-c*e;M=n*n*m+p;L=c*n*m+h*e;G=h*c*m+n*e;h=n*c*m-h*e;n=c*c*m+p;a[0]=d*H+w*J+A*I;a[1]=f*H+v*J+C*I;a[2]=u*H+x*J+z*I;a[3]=t*H+B*J+F*I;a[4]=d*K+w*M+A*L;a[5]=f*K+v*M+C*L;a[6]=u*K+x*M+z*L;a[7]=t*K+B*M+F*L;a[8]=d*G+w*h+A*n;a[9]=f*G+v*h+C*n;a[10]=u*G+x*h+z*n;a[11]=t*G+B*h+F*n;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);
return a};m.scalar.rotateX=function(a,b,d){var c=Math.sin(d);d=Math.cos(d);var h=b[4],g=b[5],f=b[6],e=b[7],p=b[8],m=b[9],u=b[10],t=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=h*d+p*c;a[5]=g*d+m*c;a[6]=f*d+u*c;a[7]=e*d+t*c;a[8]=p*d-h*c;a[9]=m*d-g*c;a[10]=u*d-f*c;a[11]=t*d-e*c;return a};m.SIMD.rotateX=function(a,b,d){var c=SIMD.Float32x4.splat(Math.sin(d));d=SIMD.Float32x4.splat(Math.cos(d));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],
a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var h=SIMD.Float32x4.load(b,4);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(h,d),SIMD.Float32x4.mul(b,c)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,d),SIMD.Float32x4.mul(h,c)));return a};m.rotateX=g.USE_SIMD?m.SIMD.rotateX:m.scalar.rotateX;m.scalar.rotateY=function(a,b,d){var c=Math.sin(d);d=Math.cos(d);var h=b[0],g=b[1],f=b[2],e=b[3],p=b[8],m=b[9],u=b[10],t=b[11];b!==a&&(a[4]=b[4],
a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=h*d-p*c;a[1]=g*d-m*c;a[2]=f*d-u*c;a[3]=e*d-t*c;a[8]=h*c+p*d;a[9]=g*c+m*d;a[10]=f*c+u*d;a[11]=e*c+t*d;return a};m.SIMD.rotateY=function(a,b,d){var c=SIMD.Float32x4.splat(Math.sin(d));d=SIMD.Float32x4.splat(Math.cos(d));b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var h=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,
d),SIMD.Float32x4.mul(b,c)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(h,c),SIMD.Float32x4.mul(b,d)));return a};m.rotateY=g.USE_SIMD?m.SIMD.rotateY:m.scalar.rotateY;m.scalar.rotateZ=function(a,b,d){var c=Math.sin(d);d=Math.cos(d);var h=b[0],g=b[1],f=b[2],e=b[3],p=b[4],m=b[5],u=b[6],t=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=h*d+p*c;a[1]=g*d+m*c;a[2]=f*d+u*c;a[3]=e*d+t*c;a[4]=p*d-h*c;a[5]=m*d-g*c;a[6]=u*d-f*
c;a[7]=t*d-e*c;return a};m.SIMD.rotateZ=function(a,b,d){var c=SIMD.Float32x4.splat(Math.sin(d));d=SIMD.Float32x4.splat(Math.cos(d));b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var h=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(h,d),SIMD.Float32x4.mul(b,c)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,d),SIMD.Float32x4.mul(h,c)));return a};m.rotateZ=g.USE_SIMD?
m.SIMD.rotateZ:m.scalar.rotateZ;m.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};m.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};m.fromRotation=function(a,b,d){var c=d[0],h=d[1];d=d[2];var n=Math.sqrt(c*c+h*h+d*d),f;if(Math.abs(n)<g.EPSILON)return null;n=1/n;c*=n;
h*=n;d*=n;n=Math.sin(b);b=Math.cos(b);f=1-b;a[0]=c*c*f+b;a[1]=h*c*f+d*n;a[2]=d*c*f-h*n;a[3]=0;a[4]=c*h*f-d*n;a[5]=h*h*f+b;a[6]=d*h*f+c*n;a[7]=0;a[8]=c*d*f+h*n;a[9]=h*d*f-c*n;a[10]=d*d*f+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};m.fromXRotation=function(a,b){var d=Math.sin(b),c=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=d;a[7]=0;a[8]=0;a[9]=-d;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};m.fromYRotation=function(a,b){var d=Math.sin(b),c=Math.cos(b);a[0]=c;a[1]=
0;a[2]=-d;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=d;a[9]=0;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};m.fromZRotation=function(a,b){var d=Math.sin(b),c=Math.cos(b);a[0]=c;a[1]=d;a[2]=0;a[3]=0;a[4]=-d;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};m.fromRotationTranslation=function(a,b,d){var c=b[0],h=b[1],g=b[2],f=b[3],e=c+c,p=h+h,m=g+g;b=c*e;var u=c*p,c=c*m,t=h*p,h=h*m,g=g*m,e=f*e,p=f*p,f=f*m;a[0]=1-(t+g);a[1]=u+f;a[2]=c-p;a[3]=0;a[4]=
u-f;a[5]=1-(b+g);a[6]=h+e;a[7]=0;a[8]=c+p;a[9]=h-e;a[10]=1-(b+t);a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a};m.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};m.getRotation=function(a,b){var d=b[0]+b[5]+b[10],c=0;0<d?(c=2*Math.sqrt(d+1),a[3]=0.25*c,a[0]=(b[6]-b[9])/c,a[1]=(b[8]-b[2])/c,a[2]=(b[1]-b[4])/c):b[0]>b[5]&b[0]>b[10]?(c=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/c,a[0]=0.25*c,a[1]=(b[1]+b[4])/c,a[2]=(b[8]+b[2])/c):b[5]>b[10]?(c=2*Math.sqrt(1+b[5]-
b[0]-b[10]),a[3]=(b[8]-b[2])/c,a[0]=(b[1]+b[4])/c,a[1]=0.25*c,a[2]=(b[6]+b[9])/c):(c=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/c,a[0]=(b[8]+b[2])/c,a[1]=(b[6]+b[9])/c,a[2]=0.25*c);return a};m.fromRotationTranslationScale=function(a,b,d,c){var h=b[0],g=b[1],f=b[2],e=b[3],p=h+h,m=g+g,u=f+f;b=h*p;var t=h*m,h=h*u,w=g*m,g=g*u,f=f*u,p=e*p,m=e*m,e=e*u,u=c[0],v=c[1];c=c[2];a[0]=(1-(w+f))*u;a[1]=(t+e)*u;a[2]=(h-m)*u;a[3]=0;a[4]=(t-e)*v;a[5]=(1-(b+f))*v;a[6]=(g+p)*v;a[7]=0;a[8]=(h+m)*c;a[9]=(g-p)*c;a[10]=
(1-(b+w))*c;a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a};m.fromRotationTranslationScaleOrigin=function(a,b,d,c,h){var g=b[0],f=b[1],e=b[2],m=b[3],s=g+g,u=f+f,t=e+e;b=g*s;var w=g*u,g=g*t,v=f*u,f=f*t,e=e*t,s=m*s,u=m*u,m=m*t,t=c[0],x=c[1];c=c[2];var B=h[0],A=h[1];h=h[2];a[0]=(1-(v+e))*t;a[1]=(w+m)*t;a[2]=(g-u)*t;a[3]=0;a[4]=(w-m)*x;a[5]=(1-(b+e))*x;a[6]=(f+s)*x;a[7]=0;a[8]=(g+u)*c;a[9]=(f-s)*c;a[10]=(1-(b+v))*c;a[11]=0;a[12]=d[0]+B-(a[0]*B+a[4]*A+a[8]*h);a[13]=d[1]+A-(a[1]*B+a[5]*A+a[9]*
h);a[14]=d[2]+h-(a[2]*B+a[6]*A+a[10]*h);a[15]=1;return a};m.fromQuat=function(a,b){var d=b[0],c=b[1],h=b[2],g=b[3],f=d+d,e=c+c,m=h+h,d=d*f,s=c*f,c=c*e,u=h*f,t=h*e,h=h*m,f=g*f,e=g*e,g=g*m;a[0]=1-c-h;a[1]=s+g;a[2]=u-e;a[3]=0;a[4]=s-g;a[5]=1-d-h;a[6]=t+f;a[7]=0;a[8]=u+e;a[9]=t-f;a[10]=1-d-c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};m.frustum=function(a,b,d,c,h,g,f){var e=1/(d-b),m=1/(h-c),s=1/(g-f);a[0]=2*g*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*m;a[6]=0;a[7]=0;a[8]=(d+b)*e;a[9]=(h+c)*m;a[10]=
(f+g)*s;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*(f*g)*s;a[15]=0;return a};m.perspective=function(a,b,d,c,h){b=1/Math.tan(b/2);var g=1/(c-h);a[0]=b/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(h+c)*g;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*h*c*g;a[15]=0;return a};m.perspectiveFromFieldOfView=function(a,b,d,c){var h=Math.tan(b.upDegrees*Math.PI/180),g=Math.tan(b.downDegrees*Math.PI/180),f=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var e=2/(f+b),m=2/(h+g);
a[0]=e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=m;a[6]=0;a[7]=0;a[8]=-(0.5*(f-b)*e);a[9]=0.5*(h-g)*m;a[10]=c/(d-c);a[11]=-1;a[12]=0;a[13]=0;a[14]=c*d/(d-c);a[15]=0;return a};m.ortho=function(a,b,d,c,h,g,f){var e=1/(b-d),m=1/(c-h),s=1/(g-f);a[0]=-2*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*m;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*s;a[11]=0;a[12]=(b+d)*e;a[13]=(h+c)*m;a[14]=(f+g)*s;a[15]=1;return a};m.lookAt=function(a,b,d,c){var h,n,f,e,p,s,u,t,w=b[0],v=b[1];b=b[2];f=c[0];e=c[1];n=c[2];u=d[0];c=d[1];h=d[2];if(Math.abs(w-
u)<g.EPSILON&&Math.abs(v-c)<g.EPSILON&&Math.abs(b-h)<g.EPSILON)return m.identity(a);d=w-u;c=v-c;u=b-h;t=1/Math.sqrt(d*d+c*c+u*u);d*=t;c*=t;u*=t;h=e*u-n*c;n=n*d-f*u;f=f*c-e*d;(t=Math.sqrt(h*h+n*n+f*f))?(t=1/t,h*=t,n*=t,f*=t):f=n=h=0;e=c*f-u*n;p=u*h-d*f;s=d*n-c*h;(t=Math.sqrt(e*e+p*p+s*s))?(t=1/t,e*=t,p*=t,s*=t):s=p=e=0;a[0]=h;a[1]=e;a[2]=d;a[3]=0;a[4]=n;a[5]=p;a[6]=c;a[7]=0;a[8]=f;a[9]=s;a[10]=u;a[11]=0;a[12]=-(h*w+n*v+f*b);a[13]=-(e*w+p*v+s*b);a[14]=-(d*w+c*v+u*b);a[15]=1;return a};m.str=function(a){return"mat4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};m.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};m.add=function(a,b,
d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];a[3]=b[3]+d[3];a[4]=b[4]+d[4];a[5]=b[5]+d[5];a[6]=b[6]+d[6];a[7]=b[7]+d[7];a[8]=b[8]+d[8];a[9]=b[9]+d[9];a[10]=b[10]+d[10];a[11]=b[11]+d[11];a[12]=b[12]+d[12];a[13]=b[13]+d[13];a[14]=b[14]+d[14];a[15]=b[15]+d[15];return a};m.subtract=function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];a[4]=b[4]-d[4];a[5]=b[5]-d[5];a[6]=b[6]-d[6];a[7]=b[7]-d[7];a[8]=b[8]-d[8];a[9]=b[9]-d[9];a[10]=b[10]-d[10];a[11]=b[11]-d[11];a[12]=b[12]-d[12];
a[13]=b[13]-d[13];a[14]=b[14]-d[14];a[15]=b[15]-d[15];return a};m.sub=m.subtract;m.multiplyScalar=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*d;a[5]=b[5]*d;a[6]=b[6]*d;a[7]=b[7]*d;a[8]=b[8]*d;a[9]=b[9]*d;a[10]=b[10]*d;a[11]=b[11]*d;a[12]=b[12]*d;a[13]=b[13]*d;a[14]=b[14]*d;a[15]=b[15]*d;return a};m.multiplyScalarAndAdd=function(a,b,d,c){a[0]=b[0]+d[0]*c;a[1]=b[1]+d[1]*c;a[2]=b[2]+d[2]*c;a[3]=b[3]+d[3]*c;a[4]=b[4]+d[4]*c;a[5]=b[5]+d[5]*c;a[6]=b[6]+d[6]*c;a[7]=b[7]+d[7]*
c;a[8]=b[8]+d[8]*c;a[9]=b[9]+d[9]*c;a[10]=b[10]+d[10]*c;a[11]=b[11]+d[11]*c;a[12]=b[12]+d[12]*c;a[13]=b[13]+d[13]*c;a[14]=b[14]+d[14]*c;a[15]=b[15]+d[15]*c;return a};m.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};m.equals=function(a,b){var d=a[0],c=a[1],h=a[2],n=a[3],f=a[4],e=a[5],m=a[6],s=a[7],
u=a[8],t=a[9],w=a[10],v=a[11],x=a[12],B=a[13],A=a[14],C=a[15],z=b[0],F=b[1],H=b[2],J=b[3],I=b[4],K=b[5],M=b[6],L=b[7],G=b[8],O=b[9],S=b[10],U=b[11],T=b[12],E=b[13],Q=b[14],N=b[15];return Math.abs(d-z)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(c-F)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(h-H)<=g.EPSILON*Math.max(1,Math.abs(h),Math.abs(H))&&Math.abs(n-J)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(J))&&Math.abs(f-I)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(e-
K)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(K))&&Math.abs(m-M)<=g.EPSILON*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(s-L)<=g.EPSILON*Math.max(1,Math.abs(s),Math.abs(L))&&Math.abs(u-G)<=g.EPSILON*Math.max(1,Math.abs(u),Math.abs(G))&&Math.abs(t-O)<=g.EPSILON*Math.max(1,Math.abs(t),Math.abs(O))&&Math.abs(w-S)<=g.EPSILON*Math.max(1,Math.abs(w),Math.abs(S))&&Math.abs(v-U)<=g.EPSILON*Math.max(1,Math.abs(v),Math.abs(U))&&Math.abs(x-T)<=g.EPSILON*Math.max(1,Math.abs(x),Math.abs(T))&&Math.abs(B-E)<=g.EPSILON*
Math.max(1,Math.abs(B),Math.abs(E))&&Math.abs(A-Q)<=g.EPSILON*Math.max(1,Math.abs(A),Math.abs(Q))&&Math.abs(C-N)<=g.EPSILON*Math.max(1,Math.abs(C),Math.abs(N))};return m})},"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(g,m,a,b){var d;(function(a){a[a.BEFORE=0]="BEFORE";a[a.ATTACHING=1]="ATTACHING";a[a.DETACHING=2]="DETACHING";a[a.RENDERING=3]="RENDERING";a[a.AFTER=4]="AFTER";a[a.DONE=5]=
"DONE"})(d||(d={}));return function(b){function h(){b.apply(this,arguments);this._childrenSet=new Set;this._childrenToAttach=[];this._childrenToDetach=[];this._renderPhase=d.DONE;this.children=[]}a(h,b);Object.defineProperty(h.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});h.prototype.attach=function(a){return!0};h.prototype.detach=function(a){var b=this.children;a=this.prepareChildrenRenderParameters(a);for(var c=0,d=b.length;c<d;c++){var h=b[c];
h.attached&&(this.detachChild(h,a),h.attached=!1,h.parent=null)}};h.prototype.render=function(a){var b=this.prepareChildrenRenderParameters(a);this._renderPhase=d.BEFORE;this.beforeRenderChildren(a,b);this._renderPhase=d.ATTACHING;this.attachChildren(b)||this.requestRender();this._renderPhase=d.DETACHING;for(var c=this._childrenToDetach;0<c.length;){var h=c.shift();this.detachChild(h,b);h.attached=!1;h.parent=null}this._renderPhase=d.RENDERING;this.renderChildren(b);this._renderPhase=d.AFTER;this.afterRenderChildren(a,
b);this._renderPhase=d.DONE};h.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)};h.prototype.addChildAt=function(a,b){void 0===b&&(b=this.numChildren);if(!a||this.contains(a))return a;var c=a.parent;c&&c!==this&&c.removeChild(a);b>=this.numChildren?this.children.push(a):this.children.splice(b,0,a);this._childrenSet.add(a);c=this._childrenToDetach.indexOf(a);-1<c&&this._childrenToDetach.splice(c,1);this._childrenToAttach.push(a);this._renderPhase>=d.RENDERING&&this.requestRender();
return a};h.prototype.contains=function(a){return this._childrenSet.has(a)};h.prototype.getChildIndex=function(a){return this.children.indexOf(a)};h.prototype.getChildAt=function(a){return 0>a||a>this.children.length?null:this.children[a]};h.prototype.removeAllChildren=function(){for(var a=this.numChildren;a--;)this.removeChildAt(0)};h.prototype.removeChild=function(a){return this.contains(a)?this.removeChildAt(this.getChildIndex(a)):a};h.prototype.removeChildAt=function(a){if(0>a||a>=this.children.length)return null;
a=this.children.splice(a,1)[0];this._childrenSet["delete"](a);if(a.attached)this._childrenToDetach.push(a),this._renderPhase>=d.RENDERING&&this.requestRender();else{var b=this._childrenToAttach.indexOf(a);-1<b&&this._childrenToAttach.splice(b,1)}return a};h.prototype.requestChildRender=function(a){a&&(a.parent===this&&this._renderPhase>=d.RENDERING)&&this.requestRender()};h.prototype.setChildIndex=function(a,b){var c=this.getChildIndex(a);-1<c&&(this.children.splice(c,1),this.children.splice(b,0,
a),this._renderPhase>=d.RENDERING&&this.requestRender())};h.prototype.sortChildren=function(a){this._renderPhase>d.RENDERING&&this.requestRender();return this.children.sort(a)};h.prototype.attachChildren=function(a){var b=this._childrenToAttach;if(0===b.length)return!0;for(var c=0===b.length;!c;)c=b.shift(),this.attachChild(c,a)&&(c.attached=!0,c.parent=this),c=0===b.length;return 0===b.length};h.prototype.renderChildren=function(a){for(var b=this.children,c=0,d=b.length;c<d;c++){var h=b[c];h.attached&&
this.renderChild(h,a)}};h.prototype.beforeRenderChildren=function(a,b){};h.prototype.afterRenderChildren=function(a,b){};return h}(b)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper"],function(g,m,a){var b=0;return function(){function a(){this.attached=!1;this._opacity=1;this._visible=!0;Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-do-"+b++})}Object.defineProperty(a.prototype,
"opacity",{get:function(){return this._opacity},set:function(a){this._opacity!==a&&(this._opacity=a,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(a){this._visible!==a&&(this._visible=a,this.requestRender())},enumerable:!0,configurable:!0});a.prototype.requestRender=function(){this.parent&&this.parent.requestChildRender(this)};a.prototype.dispose=function(){};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/Renderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../GeometryUtils ./BackgroundRenderer ./LineRenderer ./FillRenderer ./SymbolRenderer ./TileInfoRenderer ./FadeRecorder".split(" "),
function(g,m,a,b,d,c,h,n,f,e){return function(){function g(a,b,m){void 0===m&&(m=!0);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this._pixelRatio=1;this._SpriteMosaic=a;this._glyphMosaic=b;this._ignoreSpeed=!m;this._backgroundRenderer=new d;this._lineRenderer=new c;this._fillRenderer=new h;this._symbolRenderer=new n;this._tileInfoRenderer=
new f;this._fadeRecorder=new e.FadeRecorder(300);this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._backgroundColor=new Float32Array([1,0,0,1])}g.prototype.setStateParams=function(c,d,e){this._pixelRatio=d;this._fadeRecorder.recordLevel(e);this._state=c;if(this._state.width!==this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/c.width,this._extrudeScaleVector[1]=-2/c.height,
a.identity(this._extrudeMatrix),a.rotate(this._extrudeMatrix,this._extrudeMatrix,-c.rotation*b.C_DEG_TO_RAD,this._extrudeRotateVector),a.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),a.transpose(this._extrudeMatrix,this._extrudeMatrix),a.identity(this._extrudeNoRotationMatrix),a.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,this._extrudeScaleVector),a.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,
this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};g.prototype.drawClippingMasks=function(a,b){if(0!==b.length){a.setDepthWriteEnabled(!1);a.setDepthTestEnabled(!1);a.setStencilTestEnabled(!0);a.setBlendingEnabled(!1);a.setColorMask(!1,!1,!1,!1);a.setStencilOp(7680,7680,7681);a.setClearStencil(0);a.clear(a.gl.STENCIL_BUFFER_BIT);for(var c=0;c<b.length;c++){var d=b[c];d.attached&&d.visible&&(a.setStencilFunctionSeparate(1032,519,d.stencilData.reference,d.stencilData.mask),
a.setStencilWriteMask(d.stencilData.mask),this._backgroundRenderer.renderSolidColor(a,{u_matrix:d.tileTransform.transform,u_normalized_origin:d.tileTransform.displayCoord,u_coord_range:d.coordRange,u_depth:0,u_color:this._backgroundColor}))}a.setColorMask(!0,!0,!0,!0);a.setBlendingEnabled(!0);a.setStencilWriteMask(255)}};g.prototype.renderDebug=function(a,b){var c=b.key;this._backgroundColor.set([c.col%2,c.row%2,0===c.col%2&&0===c.row%2?1:0,0.5]);this._backgroundRenderer.renderSolidColor(a,{u_matrix:b.tileTransform.transform,
u_normalized_origin:b.tileTransform.displayCoord,u_coord_range:b.coordRange,u_depth:0,u_color:this._backgroundColor})};g.prototype.renderBucket=function(a,b,c,d,e,f,h,g){switch(b.type){case 0:2!==e&&this._renderBackground(a,c,e,f,h,g);break;case 1:2!==e&&this._renderFill(a,b,c,e,f,h,g);break;case 2:1===e&&this._renderLine(a,b,c,f,h,g);break;case 3:2===e&&this._renderSymbol(a,b,c,d,f,h,g)}};g.prototype.renderTileInfo=function(a,b){this._tileInfoRenderer.render(a,b)};g.prototype.needsRedraw=function(){return this._fadeRecorder.needsRedraw()};
g.prototype._renderBackground=function(a,b,c,d,e,f){this._backgroundRenderer.render(a,b,c,d,e,this._SpriteMosaic,this._SpriteMosaic.pixelRatio,f)};g.prototype._renderLine=function(a,b,c,d,e,f){this._lineRenderer.render(a,b,c,this._state,d,e,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,f)};g.prototype._renderFill=function(a,b,c,d,e,f,h){this._fillRenderer.render(a,b,c,this._state.rotation,d,e,f,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,h)};g.prototype._renderSymbol=
function(a,b,c,d,e,f,h){var g=!0;d===e.key.level&&(g=!1);a.setStencilTestEnabled(g);this._symbolRenderer.render(a,b,c,this._state.rotation,this._fadeRecorder.getFadeValues(this._ignoreSpeed),e,f,this._SpriteMosaic,this._glyphMosaic,this._extrudeMatrix,this._extrudeNoRotationMatrix,this._SpriteMosaic.pixelRatio,h)};return g}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/BackgroundRenderer":function(){define("require exports dojo/text!./shaders/background.vs.glsl dojo/text!./shaders/background.fs.glsl dojo/text!./shaders/patternFillShader.vs.glsl dojo/text!./shaders/patternFillShader.fs.glsl ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/vec4 ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p){return function(){function g(){this._patternMatrix=h.create();this._color=n.create();this._initialized=!1}g.prototype.renderSolidColor=function(a,b){this._initialized||this._initialize(a);a.bindVAO(this._solidVertexArrayObject);a.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",b.u_matrix);this._solidProgram.setUniform2fv("u_normalized_origin",b.u_normalized_origin);this._solidProgram.setUniform1f("u_coord_range",b.u_coord_range||
4096);this._solidProgram.setUniform1f("u_depth",b.u_depth||0);this._solidProgram.setUniform4fv("u_color",b.u_color||new Float32Array([1,0,0,1]));a.drawArrays(5,0,4);a.bindVAO()};g.prototype.render=function(a,b,c,d,e,f,g,n){this._initialized||this._initialize(a);var m=e.getPaintValue("background-color",b);n*=e.getPaintValue("background-opacity",b);var p=e.getPaintValue("background-pattern",b),s=void 0!==p,J=m[3]*n,I=s||1>J;if(!(I&&0===c)&&(I||1!==c)){if(s){a.bindVAO(this._patternVertexArrayObject);
a.bindProgram(this._patternProgram);c=f.getMosaicItemPosition(p,!0);if(!c)return;b=d.coordRange/512/Math.pow(2,Math.floor(b)-d.key.level)/g;h.identity(this._patternMatrix);g=1/(c.size[1]*b);this._patternMatrix[0]=1/(c.size[0]*b);this._patternMatrix[4]=g;f.bind(a,9729,0);this._patternProgram.setUniformMatrix4fv("u_transformMatrix",d.tileTransform.transform);this._patternProgram.setUniform2fv("u_normalized_origin",d.tileTransform.displayCoord);this._patternProgram.setUniform1f("u_depth",e.z);this._patternProgram.setUniformMatrix3fv("u_pattern_matrix",
this._patternMatrix);this._patternProgram.setUniform1f("u_opacity",n);this._patternProgram.setUniform2f("u_pattern_tl",c.tl[0],c.tl[1]);this._patternProgram.setUniform2f("u_pattern_br",c.br[0],c.br[1]);this._patternProgram.setUniform1i("u_texture",0)}else this._color[0]=J*m[0],this._color[1]=J*m[1],this._color[2]=J*m[2],this._color[3]=J,a.bindVAO(this._solidVertexArrayObject),a.bindProgram(this._solidProgram),this._solidProgram.setUniformMatrix4fv("u_transformMatrix",d.tileTransform.transform),this._solidProgram.setUniform2fv("u_normalized_origin",
d.tileTransform.displayCoord),this._solidProgram.setUniform1f("u_coord_range",d.coordRange),this._solidProgram.setUniform1f("u_depth",e.z||0),this._solidProgram.setUniform4fv("u_color",this._color);a.drawArrays(5,0,4);a.bindVAO()}};g.prototype._initialize=function(h){if(this._initialized)return!0;var g={a_pos:0},n=new f(h,a,b,g);if(!n)return!1;var m=new f(h,d,c,g);if(!m)return!1;var s={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},B=new Int8Array([0,0,1,0,
0,1,1,1]),A=p.createVertex(h,35044,B),A=new e(h,g,s,{geometry:A}),B=new Int16Array([0,0,4096,0,0,4096,4096,4096]),B=p.createVertex(h,35044,B);h=new e(h,g,{geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:B});this._solidProgram=n;this._patternProgram=m;this._vertexAttributes=s;this._solidVertexArrayObject=A;this._patternVertexArrayObject=h;return this._initialized=!0};return g}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat3":function(){define(["./common"],
function(g){var m={create:function(){var a=new g.ARRAY_TYPE(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a},clone:function(a){var b=new g.ARRAY_TYPE(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];
a[8]=b[8];return a},fromValues:function(a,b,d,c,h,n,f,e,m){var s=new g.ARRAY_TYPE(9);s[0]=a;s[1]=b;s[2]=d;s[3]=c;s[4]=h;s[5]=n;s[6]=f;s[7]=e;s[8]=m;return s},set:function(a,b,d,c,h,g,f,e,m,s){a[0]=b;a[1]=d;a[2]=c;a[3]=h;a[4]=g;a[5]=f;a[6]=e;a[7]=m;a[8]=s;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(a===b){var d=b[1],c=b[2],h=b[5];a[1]=b[3];a[2]=b[6];a[3]=d;a[5]=b[7];a[6]=c;a[7]=h}else a[0]=b[0],a[1]=b[3],a[2]=b[6],
a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var d=b[0],c=b[1],h=b[2],g=b[3],f=b[4],e=b[5],m=b[6],s=b[7],u=b[8],t=u*f-e*s,w=-u*g+e*m,v=s*g-f*m,x=d*t+c*w+h*v;if(!x)return null;x=1/x;a[0]=t*x;a[1]=(-u*c+h*s)*x;a[2]=(e*c-h*f)*x;a[3]=w*x;a[4]=(u*d-h*m)*x;a[5]=(-e*d+h*g)*x;a[6]=v*x;a[7]=(-s*d+c*m)*x;a[8]=(f*d-c*g)*x;return a},adjoint:function(a,b){var d=b[0],c=b[1],h=b[2],g=b[3],f=b[4],e=b[5],m=b[6],s=b[7],u=b[8];a[0]=f*u-e*s;a[1]=h*s-c*u;a[2]=c*e-h*f;a[3]=
e*m-g*u;a[4]=d*u-h*m;a[5]=h*g-d*e;a[6]=g*s-f*m;a[7]=c*m-d*s;a[8]=d*f-c*g;return a},determinant:function(a){var b=a[3],d=a[4],c=a[5],h=a[6],g=a[7],f=a[8];return a[0]*(f*d-c*g)+a[1]*(-f*b+c*h)+a[2]*(g*b-d*h)},multiply:function(a,b,d){var c=b[0],h=b[1],g=b[2],f=b[3],e=b[4],m=b[5],s=b[6],u=b[7];b=b[8];var t=d[0],w=d[1],v=d[2],x=d[3],B=d[4],A=d[5],C=d[6],z=d[7];d=d[8];a[0]=t*c+w*f+v*s;a[1]=t*h+w*e+v*u;a[2]=t*g+w*m+v*b;a[3]=x*c+B*f+A*s;a[4]=x*h+B*e+A*u;a[5]=x*g+B*m+A*b;a[6]=C*c+z*f+d*s;a[7]=C*h+z*e+d*u;
a[8]=C*g+z*m+d*b;return a}};m.mul=m.multiply;m.translate=function(a,b,d){var c=b[0],h=b[1],g=b[2],f=b[3],e=b[4],m=b[5],s=b[6],u=b[7];b=b[8];var t=d[0];d=d[1];a[0]=c;a[1]=h;a[2]=g;a[3]=f;a[4]=e;a[5]=m;a[6]=t*c+d*f+s;a[7]=t*h+d*e+u;a[8]=t*g+d*m+b;return a};m.rotate=function(a,b,d){var c=b[0],h=b[1],g=b[2],f=b[3],e=b[4],m=b[5],s=b[6],u=b[7];b=b[8];var t=Math.sin(d);d=Math.cos(d);a[0]=d*c+t*f;a[1]=d*h+t*e;a[2]=d*g+t*m;a[3]=d*f-t*c;a[4]=d*e-t*h;a[5]=d*m-t*g;a[6]=s;a[7]=u;a[8]=b;return a};m.scale=function(a,
b,d){var c=d[0];d=d[1];a[0]=c*b[0];a[1]=c*b[1];a[2]=c*b[2];a[3]=d*b[3];a[4]=d*b[4];a[5]=d*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};m.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a};m.fromRotation=function(a,b){var d=Math.sin(b),c=Math.cos(b);a[0]=c;a[1]=d;a[2]=0;a[3]=-d;a[4]=c;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};m.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};m.fromMat2d=function(a,
b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};m.fromQuat=function(a,b){var d=b[0],c=b[1],h=b[2],g=b[3],f=d+d,e=c+c,m=h+h,d=d*f,s=c*f,c=c*e,u=h*f,t=h*e,h=h*m,f=g*f,e=g*e,g=g*m;a[0]=1-c-h;a[3]=s-g;a[6]=u+e;a[1]=s+g;a[4]=1-d-h;a[7]=t-f;a[2]=u-e;a[5]=t+f;a[8]=1-d-c;return a};m.normalFromMat4=function(a,b){var d=b[0],c=b[1],h=b[2],g=b[3],f=b[4],e=b[5],m=b[6],s=b[7],u=b[8],t=b[9],w=b[10],v=b[11],x=b[12],B=b[13],A=b[14],C=b[15],z=d*e-c*f,F=d*m-h*f,H=d*s-g*
f,J=c*m-h*e,I=c*s-g*e,K=h*s-g*m,M=u*B-t*x,L=u*A-w*x,u=u*C-v*x,G=t*A-w*B,t=t*C-v*B,w=w*C-v*A,v=z*w-F*t+H*G+J*u-I*L+K*M;if(!v)return null;v=1/v;a[0]=(e*w-m*t+s*G)*v;a[1]=(m*u-f*w-s*L)*v;a[2]=(f*t-e*u+s*M)*v;a[3]=(h*t-c*w-g*G)*v;a[4]=(d*w-h*u+g*L)*v;a[5]=(c*u-d*t-g*M)*v;a[6]=(B*K-A*I+C*J)*v;a[7]=(A*H-x*K-C*F)*v;a[8]=(x*I-B*H+C*z)*v;return a};m.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};m.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};m.add=function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];a[3]=b[3]+d[3];a[4]=b[4]+d[4];a[5]=b[5]+d[5];a[6]=b[6]+d[6];a[7]=b[7]+d[7];a[8]=b[8]+d[8];return a};m.subtract=function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];a[4]=b[4]-d[4];a[5]=b[5]-d[5];a[6]=b[6]-d[6];a[7]=b[7]-d[7];a[8]=b[8]-d[8];return a};m.sub=m.subtract;m.multiplyScalar=
function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*d;a[5]=b[5]*d;a[6]=b[6]*d;a[7]=b[7]*d;a[8]=b[8]*d;return a};m.multiplyScalarAndAdd=function(a,b,d,c){a[0]=b[0]+d[0]*c;a[1]=b[1]+d[1]*c;a[2]=b[2]+d[2]*c;a[3]=b[3]+d[3]*c;a[4]=b[4]+d[4]*c;a[5]=b[5]+d[5]*c;a[6]=b[6]+d[6]*c;a[7]=b[7]+d[7]*c;a[8]=b[8]+d[8]*c;return a};m.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};m.equals=function(a,
b){var d=a[0],c=a[1],h=a[2],n=a[3],f=a[4],e=a[5],m=a[6],s=a[7],u=a[8],t=b[0],w=b[1],v=b[2],x=b[3],B=b[4],A=b[5],C=a[6],z=b[7],F=b[8];return Math.abs(d-t)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(c-w)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(h-v)<=g.EPSILON*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(n-x)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(f-B)<=g.EPSILON*Math.max(1,Math.abs(f),Math.abs(B))&&Math.abs(e-A)<=g.EPSILON*Math.max(1,Math.abs(e),Math.abs(A))&&
Math.abs(m-C)<=g.EPSILON*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(s-z)<=g.EPSILON*Math.max(1,Math.abs(s),Math.abs(z))&&Math.abs(u-F)<=g.EPSILON*Math.max(1,Math.abs(u),Math.abs(F))};return m})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],function(g){var m={create:function(){var a=new g.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new g.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,d,
c){var h=new g.ARRAY_TYPE(4);h[0]=a;h[1]=b;h[2]=d;h[3]=c;return h},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},set:function(a,b,d,c,h){a[0]=b;a[1]=d;a[2]=c;a[3]=h;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];a[3]=b[3]+d[3];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];return a}};m.sub=m.subtract;m.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];a[3]=b[3]*d[3];return a};m.mul=
m.multiply;m.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];a[3]=b[3]/d[3];return a};m.div=m.divide;m.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};m.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);a[3]=Math.floor(b[3]);return a};m.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);a[3]=Math.min(b[3],d[3]);return a};m.max=function(a,
b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);a[3]=Math.max(b[3],d[3]);return a};m.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};m.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;return a};m.scaleAndAdd=function(a,b,d,c){a[0]=b[0]+d[0]*c;a[1]=b[1]+d[1]*c;a[2]=b[2]+d[2]*c;a[3]=b[3]+d[3]*c;return a};m.distance=function(a,b){var d=b[0]-a[0],c=b[1]-a[1],h=b[2]-a[2],g=b[3]-a[3];
return Math.sqrt(d*d+c*c+h*h+g*g)};m.dist=m.distance;m.squaredDistance=function(a,b){var d=b[0]-a[0],c=b[1]-a[1],h=b[2]-a[2],g=b[3]-a[3];return d*d+c*c+h*h+g*g};m.sqrDist=m.squaredDistance;m.length=function(a){var b=a[0],d=a[1],c=a[2];a=a[3];return Math.sqrt(b*b+d*d+c*c+a*a)};m.len=m.length;m.squaredLength=function(a){var b=a[0],d=a[1],c=a[2];a=a[3];return b*b+d*d+c*c+a*a};m.sqrLen=m.squaredLength;m.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};m.inverse=function(a,b){a[0]=
1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};m.normalize=function(a,b){var d=b[0],c=b[1],h=b[2],g=b[3],f=d*d+c*c+h*h+g*g;0<f&&(f=1/Math.sqrt(f),a[0]=d*f,a[1]=c*f,a[2]=h*f,a[3]=g*f);return a};m.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};m.lerp=function(a,b,d,c){var h=b[0],g=b[1],f=b[2];b=b[3];a[0]=h+c*(d[0]-h);a[1]=g+c*(d[1]-g);a[2]=f+c*(d[2]-f);a[3]=b+c*(d[3]-b);return a};m.random=function(a,b){b=b||1;a[0]=g.RANDOM();a[1]=g.RANDOM();a[2]=g.RANDOM();a[3]=g.RANDOM();m.normalize(a,
a);m.scale(a,a,b);return a};m.transformMat4=function(a,b,d){var c=b[0],h=b[1],g=b[2];b=b[3];a[0]=d[0]*c+d[4]*h+d[8]*g+d[12]*b;a[1]=d[1]*c+d[5]*h+d[9]*g+d[13]*b;a[2]=d[2]*c+d[6]*h+d[10]*g+d[14]*b;a[3]=d[3]*c+d[7]*h+d[11]*g+d[15]*b;return a};m.transformQuat=function(a,b,d){var c=b[0],h=b[1],g=b[2],f=d[0],e=d[1],m=d[2];d=d[3];var s=d*c+e*g-m*h,u=d*h+m*c-f*g,t=d*g+f*h-e*c,c=-f*c-e*h-m*g;a[0]=s*d+c*-f+u*-m-t*-e;a[1]=u*d+c*-e+t*-f-s*-m;a[2]=t*d+c*-m+s*-e-u*-f;a[3]=b[3];return a};m.forEach=function(){var a=
m.create();return function(b,d,c,h,g,f){d||(d=4);c||(c=0);for(h=h?Math.min(h*d+c,b.length):b.length;c<h;c+=d)a[0]=b[c],a[1]=b[c+1],a[2]=b[c+2],a[3]=b[c+3],g(a,a,f),b[c]=a[0],b[c+1]=a[1],b[c+2]=a[2],b[c+3]=a[3];return b}}();m.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};m.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};m.equals=function(a,b){var d=a[0],c=a[1],h=a[2],n=a[3],f=b[0],e=b[1],m=b[2],s=b[3];return Math.abs(d-f)<=g.EPSILON*Math.max(1,
Math.abs(d),Math.abs(f))&&Math.abs(c-e)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(h-m)<=g.EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(n-s)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))};return m})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require","exports","dojo/has"],function(g,m,a){return function(){function a(d,c,h,g,f){this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines=
void 0;this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};this._context=d;this._vertexShaderSource=c;this._fragmentShaderSource=h;this._defines=f;this._id=a._nextId++;this._locations=g}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});a.prototype.dispose=function(){var a=this._context.gl;this._vShader&&(a.deleteShader(this._vShader),this._vShader=null);this._fShader&&(a.deleteShader(this._fShader),this._fShader=null);this._glName&&(a.deleteProgram(this._glName),this._glName=null)};a.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=
this._loadShader(35632);var a=this._context.gl,b=a.createProgram();a.attachShader(b,this._vShader);a.attachShader(b,this._fShader);for(var h in this._locations)a.bindAttribLocation(b,this._locations[h],h);a.linkProgram(b);a.getProgramParameter(b,a.LINK_STATUS);this._glName=b;this._initialized=!0}};a.prototype.getUniformLocation=function(a){this.initialize();void 0===this._nameToUniformLocation[a]&&(this._nameToUniformLocation[a]=this._context.gl.getUniformLocation(this._glName,a));return this._nameToUniformLocation[a]};
a.prototype.hasUniform=function(a){return null!==this.getUniformLocation(a)};a.prototype.getAttribLocation=function(a){this.initialize();void 0===this._nameToAttribLocation[a]&&(this._nameToAttribLocation[a]=this._context.gl.getAttribLocation(this._glName,a));return this._nameToAttribLocation[a]};a.prototype.setUniform1i=function(a,b){var h=this._nameToUniform1[a];if(void 0===h||b!==h)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(a),b),this._nameToUniform1[a]=
b};a.prototype.setUniform1f=function(a,b){var h=this._nameToUniform1[a];if(void 0===h||b!==h)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(a),b),this._nameToUniform1[a]=b};a.prototype.setUniform1fv=function(d,c){var h=this._nameToUniform2[d];if(void 0===h||!a._arraysEqual(c,h))this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(d),c),void 0===h?this._nameToUniform2[d]=new Float32Array(c):h.set(c)};a.prototype.setUniform2f=function(a,
b,h){var g=this._nameToUniform2[a];if(void 0===g||b!==g[0]||h!==g[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(a),b,h),void 0===g?this._nameToUniform2[a]=new Float32Array([b,h]):(g[0]=b,g[1]=h)};a.prototype.setUniform2fv=function(d,c){var h=this._nameToUniform2[d];if(void 0===h||!a._arraysEqual(c,h))this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(d),c),void 0===h?this._nameToUniform2[d]=new Float32Array(c):h.set(c)};a.prototype.setUniform3f=
function(a,b,h,g){var f=this._nameToUniform3[a];if(void 0===f||b!==f[0]||h!==f[1]||g!==f[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(a),b,h,g),void 0===f?this._nameToUniform3[a]=new Float32Array([b,h,g]):(f[0]=b,f[1]=h,f[2]=g)};a.prototype.setUniform3fv=function(d,c){var h=this._nameToUniform3[d];if(void 0===h||!a._arraysEqual(c,h))this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(d),c),void 0===h?this._nameToUniform3[d]=
new Float32Array(c):h.set(c)};a.prototype.setUniform4f=function(a,b,h,g,f){var e=this._nameToUniform4[a];if(void 0===e||b!==e[0]||h!==e[1]||g!==e[2]||f!==e[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(a),b,h,g,f),void 0===e?this._nameToUniform4[a]=new Float32Array([b,h,g,f]):(e[0]=b,e[1]=h,e[2]=g,e[3]=f)};a.prototype.setUniform4fv=function(d,c){var h=this._nameToUniform4[d];if(void 0===h||!a._arraysEqual(c,h))this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(d),
c),void 0===h?this._nameToUniform4[d]=new Float32Array(c):h.set(c)};a.prototype.setUniformMatrix3fv=function(d,c,h){void 0===h&&(h=!1);var g=this._nameToUniformMatrix3[d];if(void 0===g||(9===g.length?!a._matrix3Equal(g,c):!a._arraysEqual(c,g)))this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(d),h,c),void 0===g?this._nameToUniformMatrix3[d]=new Float32Array(c):g.set(c)};a.prototype.setUniformMatrix4fv=function(d,c,h){void 0===h&&(h=!1);var g=this._nameToUniformMatrix4[d];
if(void 0===g||(16===g.length?!a._matrix4Equal(g,c):!a._arraysEqual(c,g)))this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(d),h,c),void 0===g?this._nameToUniformMatrix4[d]=new Float32Array(c):g.set(c)};a._padToThree=function(a){var b=a.toString();1E3>a&&(b=("  "+a).slice(-3));return b};a.prototype._addLineNumbers=function(d){var c=2;return d.replace(/\n/g,function(){return"\n"+a._padToThree(c++)+":"})};a.prototype._loadShader=function(a){var b=35633===a?this._vertexShaderSource:
this._fragmentShaderSource;if(void 0!==this._defines){var h="";if(Array.isArray(this._defines))for(var g=0,f=this._defines;g<f.length;g++)var e=f[g],h=h+("#define "+e+"\n");else for(e in this._defines)h+="#define "+e+"\n";b=h+b}h=this._context.gl;a=h.createShader(a);h.shaderSource(a,b);h.compileShader(a);h.getShaderParameter(a,h.COMPILE_STATUS);return a};a._matrix4Equal=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===
b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};a._matrix3Equal=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};a._arraysEqual=function(a,b){if(a.length!==b.length)return!1;for(var h=0;h<a.length;++h)if(a[h]!==b[h])return!1;return!0};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require","exports"],
function(g,m){return function(){function a(b,d,c,h,g){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=b;this._layout=c;this._buffers=h;this._locations=d;g&&(this._indexBuffer=g);this._id=a._nextId++}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});a.prototype.dispose=function(a){void 0===
a&&(a=!0);var d=this._context.extensions.vao;d&&this._glName&&(d.deleteVertexArrayOES(this._glName),this._glName=null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(a){for(var c in this._buffers)this._buffers[c].dispose(),delete this._buffers[c];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}};a.prototype.initialize=function(){if(!this._initialized){var a=this._context.extensions.vao;if(a){var d=a.createVertexArrayOES();a.bindVertexArrayOES(d);this._bindLayout();
a.bindVertexArrayOES(null);this._glName=d}this._initialized=!0}};a.prototype.bind=function(){this.initialize();var a=this._context.extensions.vao;a?a.bindVertexArrayOES(this.glName):(this._context.bindVAO(null),this._bindLayout())};a.prototype._bindLayout=function(){var a=this._buffers,d=this._context.extensions.vao,c=this._layout,h=this._indexBuffer,g=this._context.gl,f,e,m=0,s;for(s in a){f=a[s];e=c[s];this._context.bindBuffer(f);for(m=0;m<e.length;++m){f=e[m];var u=this._locations[f.name];if(4>=
f.count){if(g.enableVertexAttribArray(u),g.vertexAttribPointer(u,f.count,f.type,f.normalized,f.stride,f.offset),f.divisor&&0<f.divisor){var t=this._context.extensions.angleInstancedArrays;t&&t.vertexAttribDivisorANGLE(u,f.divisor)}}else if(16===f.count&&5126===f.type)for(var w=0;4>w;w++)g.enableVertexAttribArray(u+w),g.vertexAttribPointer(u+w,4,f.type,f.normalized,f.stride,f.offset+16*w),f.divisor&&0<f.divisor&&(t=this._context.extensions.angleInstancedArrays)&&t.vertexAttribDivisorANGLE(u+w,f.divisor)}}h&&
(d?g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,h.glName):this._context.bindBuffer(h))};a.prototype.unbind=function(){this.initialize();var a=this._context.extensions.vao;a?a.bindVertexArrayOES(null):this._unbindLayout()};a.prototype._unbindLayout=function(){var a=this._buffers,d=this._layout,c=this._locations,h=this._context,g=h.gl,f,e,m,s=0,u=0,t;for(t in a){f=a[t];e=d[t];s=0;for(u=e.length;s<u;++s)m=e[s],g.disableVertexAttribArray(c[m.name]);h.unbindBuffer(f.bufferType)}(a=this._indexBuffer)&&h.unbindBuffer(a.bufferType)};
a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require","exports"],function(g,m){return function(){function a(b,d,c,h){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=b;this._bufferType=d;this._usage=c;this._id=a._nextId++;this._glName=this._context.gl.createBuffer();h&&this.setData(h)}a.createIndex=function(b,d,c){return new a(b,34963,d,c)};a.createVertex=function(b,d,c){return new a(b,
34962,d,c)};Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"bufferType",{get:function(){return this._bufferType},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null)};a.prototype.setData=function(a){if(a){if("number"===typeof a)this._size=
a;else{var d=a.byteLength;a instanceof Uint16Array&&(d/=2,this._indexType=5123);a instanceof Uint32Array&&(d/=4,this._indexType=5125);this._size=d}d=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,a,this._usage);this._context.bindVAO(d)}};a.prototype.setSubData=function(a,d,c,h){void 0===d&&(d=0);void 0===c&&(c=0);if(a){a instanceof Uint16Array&&(d*=2,c*=2,h*=2);a instanceof Uint32Array&&(d*=4,c*=4,h*=2);var g=this._context.getBoundVAO();
this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferSubData(this._bufferType,d,(a instanceof ArrayBuffer?a:a.buffer).slice(c,h));this._context.bindVAO(g)}};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/LineRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec2 dojo/text!./shaders/lineShader.vs.glsl dojo/text!./shaders/lineShader.fs.glsl dojo/text!./shaders/patternLineShader.vs.glsl dojo/text!./shaders/patternLineShader.fs.glsl dojo/text!./shaders/lineJoinShader.vs.glsl dojo/text!./shaders/lineJoinShader.fs.glsl ../../webgl/Program ../../webgl/VertexArrayObject ../GeometryUtils".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w){return function(){function g(){this._joinAttributeLocations={a_pos:0,a_vertexOffset:1};this._triangleAttributeLocations={a_pos:0,a_offset:1,a_accumulatedDistance:2};this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=d.create();this._screenSize=c.create();this._color=b.create();this._dashArray=c.create()}g.prototype.render=function(b,c,d,e,f,h,g,n,m,p){if(0!==c.triangleElementCount){this._initialized||this._initialize(b);var s=f.tileTransform.transform,
u=f.coordRange/512,t=h.getPaintValue("line-translate",d);if(0!==t[0]||0!==t[1]){a.copy(this._viewProjMat,f.tileTransform.transform);var s=t[0],t=t[1],v=0,S=0,S=(1<<f.key.level)/Math.pow(2,d)*u,v=e.rotation;if(1===h.getPaintValue("line-translate-anchor",d))var U=Math.sin(w.C_DEG_TO_RAD*-v),T=Math.cos(w.C_DEG_TO_RAD*-v),v=S*(s*T-t*U),S=S*(s*U+t*T);else v=S*s,S*=t;this._offsetVector[0]=v;this._offsetVector[1]=S;this._offsetVector[2]=0;a.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);
s=this._viewProjMat}U=h.getPaintValue("line-pattern",d);T=void 0!==U;v=1/m;t=h.getPaintValue("line-blur",d)+v;S=h.getPaintValue("line-width",d);v=0.5*(S+v);p*=h.getPaintValue("line-opacity",d);var E=h.getPaintValue("line-color",d),Q=E[3]*p;this._color[0]=Q*E[0];this._color[1]=Q*E[1];this._color[2]=Q*E[2];this._color[3]=Q;if(1<v&&0<c.joinCount&&!T&&(this._screenSize[0]=0.5*e.width,this._screenSize[1]=0.5*e.height,e=Math.ceil(2*v),E=v-0.25,Q=this._getJoinsVAO(b,f)))b.bindVAO(Q),b.bindProgram(this._joinProgram),
Q=1/(0<m?m:1),this._joinProgram.setUniformMatrix4fv("u_transformMatrix",s),this._joinProgram.setUniform2fv("u_normalized_origin",f.tileTransform.displayCoord),this._joinProgram.setUniform1f("u_depth",h.z),this._joinProgram.setUniform2fv("u_screen",this._screenSize),this._joinProgram.setUniform1f("u_size",e),this._joinProgram.setUniform4fv("u_color",this._color),this._joinProgram.setUniform1f("u_lineHalfWidth",E),this._joinProgram.setUniform1f("u_pixelRatio",m),this._joinProgram.setUniform1f("u_oneOverPixelRatio",
Q),b.drawArrays(0,c.joinStart,c.joinCount),b.bindVAO();if(m=this._getTrianglesVAO(b,f)){b.bindVAO(m);if(T){if(d=g.getMosaicItemPosition(U,!0))g.bind(b,9729,0),b.bindProgram(this._patternLineProgram),this._patternLineProgram.setUniformMatrix4fv("u_transformMatrix",s),this._patternLineProgram.setUniformMatrix4fv("u_extrudeMatrix",n),this._patternLineProgram.setUniform2fv("u_normalized_origin",f.tileTransform.displayCoord),this._patternLineProgram.setUniform1f("u_depth",h.z),this._patternLineProgram.setUniform1f("u_lineHalfWidth",
v),this._patternLineProgram.setUniform1f("u_blur",t),this._patternLineProgram.setUniform1f("u_opacity",p),this._patternLineProgram.setUniform2f("u_pattern_tl",d.tl[0],d.tl[1]),this._patternLineProgram.setUniform2f("u_pattern_br",d.br[0],d.br[1]),this._patternLineProgram.setUniform2f("u_spriteSize",u*d.size[0],d.size[1]),this._patternLineProgram.setUniform1i("u_texture",0)}else g=h.getPaintValue("line-dasharray",d),2>g.length&&(g=[1,-1]),u*=S,this._dashArray[0]=u*g[0],this._dashArray[1]=u*g[1],b.bindProgram(this._triangleslProgram),
this._triangleslProgram.setUniformMatrix4fv("u_transformMatrix",s),this._triangleslProgram.setUniformMatrix4fv("u_extrudeMatrix",n),this._triangleslProgram.setUniform2fv("u_normalized_origin",f.tileTransform.displayCoord),this._triangleslProgram.setUniform1f("u_depth",h.z),this._triangleslProgram.setUniform4fv("u_color",this._color),this._triangleslProgram.setUniform1f("u_lineHalfWidth",v),this._triangleslProgram.setUniform2fv("u_dasharray",this._dashArray),this._triangleslProgram.setUniform1f("u_blur",
t);b.drawElements(4,c.triangleElementCount,5125,12*c.triangleElementStart);b.bindVAO()}}};g.prototype._initialize=function(a){if(this._initialized)return!0;var b=new u(a,h,n,this._triangleAttributeLocations),c=new u(a,f,e,this._triangleAttributeLocations);a=new u(a,p,s,this._joinAttributeLocations);this._triangleslProgram=b;this._patternLineProgram=c;this._trianglesVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5122,
offset:4,stride:12,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5122,offset:8,stride:12,normalized:!1,divisor:0}]};this._joinProgram=a;this._joinVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]};return this._initialized=!0};g.prototype._getTrianglesVAO=function(a,b){if(b.lineTrianglesVertexArrayObject)return b.lineTrianglesVertexArrayObject;var c=b.lineVertexBuffer,d=b.lineTrianglesIndexBuffer;if(!c||!d)return null;b.lineTrianglesVertexArrayObject=
new t(a,this._triangleAttributeLocations,this._trianglesVertexAttributes,{geometry:c},d);return b.lineTrianglesVertexArrayObject};g.prototype._getJoinsVAO=function(a,b){if(b.lineJoinsVertexArrayObject)return b.lineJoinsVertexArrayObject;var c=b.lineJoinVertexBuffer;if(!c)return null;b.lineJoinsVertexArrayObject=new t(a,this._joinAttributeLocations,this._joinVertexAttributes,{geometry:c});return b.lineJoinsVertexArrayObject};return g}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],
function(g){var m={create:function(){var a=new g.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new g.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var d=new g.ARRAY_TYPE(2);d[0]=a;d[1]=b;return d},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,d){a[0]=b;a[1]=d;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];return a}};m.sub=m.subtract;m.multiply=function(a,b,d){a[0]=
b[0]*d[0];a[1]=b[1]*d[1];return a};m.mul=m.multiply;m.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];return a};m.div=m.divide;m.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};m.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};m.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);return a};m.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);return a};m.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);
return a};m.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;return a};m.scaleAndAdd=function(a,b,d,c){a[0]=b[0]+d[0]*c;a[1]=b[1]+d[1]*c;return a};m.distance=function(a,b){var d=b[0]-a[0],c=b[1]-a[1];return Math.sqrt(d*d+c*c)};m.dist=m.distance;m.squaredDistance=function(a,b){var d=b[0]-a[0],c=b[1]-a[1];return d*d+c*c};m.sqrDist=m.squaredDistance;m.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};m.len=m.length;m.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};m.sqrLen=m.squaredLength;
m.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};m.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};m.normalize=function(a,b){var d=b[0],c=b[1],d=d*d+c*c;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d);return a};m.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};m.cross=function(a,b,d){b=b[0]*d[1]-b[1]*d[0];a[0]=a[1]=0;a[2]=b;return a};m.lerp=function(a,b,d,c){var h=b[0];b=b[1];a[0]=h+c*(d[0]-h);a[1]=b+c*(d[1]-b);return a};m.random=function(a,b){b=b||1;var d=2*g.RANDOM()*Math.PI;a[0]=Math.cos(d)*
b;a[1]=Math.sin(d)*b;return a};m.transformMat2=function(a,b,d){var c=b[0];b=b[1];a[0]=d[0]*c+d[2]*b;a[1]=d[1]*c+d[3]*b;return a};m.transformMat2d=function(a,b,d){var c=b[0];b=b[1];a[0]=d[0]*c+d[2]*b+d[4];a[1]=d[1]*c+d[3]*b+d[5];return a};m.transformMat3=function(a,b,d){var c=b[0];b=b[1];a[0]=d[0]*c+d[3]*b+d[6];a[1]=d[1]*c+d[4]*b+d[7];return a};m.transformMat4=function(a,b,d){var c=b[0];b=b[1];a[0]=d[0]*c+d[4]*b+d[12];a[1]=d[1]*c+d[5]*b+d[13];return a};m.forEach=function(){var a=m.create();return function(b,
d,c,h,g,f){d||(d=2);c||(c=0);for(h=h?Math.min(h*d+c,b.length):b.length;c<h;c+=d)a[0]=b[c],a[1]=b[c+1],g(a,a,f),b[c]=a[0],b[c+1]=a[1];return b}}();m.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};m.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};m.equals=function(a,b){var d=a[0],c=a[1],h=b[0],n=b[1];return Math.abs(d-h)<=g.EPSILON*Math.max(1,Math.abs(d),Math.abs(h))&&Math.abs(c-n)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(n))};return m})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FillRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/vec4 ../../../core/libs/gl-matrix/vec3 dojo/text!./shaders/solidFillShader.vs.glsl dojo/text!./shaders/solidFillShader.fs.glsl dojo/text!./shaders/patternFillShader.vs.glsl dojo/text!./shaders/patternFillShader.fs.glsl dojo/text!./shaders/fillOutlineShader.vs.glsl dojo/text!./shaders/fillOutlineShader.fs.glsl ../../webgl/Program ../../webgl/VertexArrayObject ../GeometryUtils".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w){var v=1/65536;return function(){function g(){this._outlineAttributeLocations={a_pos:0,a_offset:1,a_xnormal:2};this._fillAttributeLocations={a_pos:0};this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=c.create();this._patternMatrix=b.create();this._color=d.create();this._outlineColor=d.create()}g.prototype.render=function(c,d,e,f,h,g,n,m,p,s,u){this._initialized||this._initialize(c);var t=n.getPaintValue("fill-pattern",e),x=void 0!==t;if(!(x&&
0===h)){var S=n.getPaintValue("fill-antialias",e)&&!x;u*=n.getPaintValue("fill-opacity",e);var U=n.getPaintValue("fill-color",e),T=!1;if(!x){var E=U[3]*u;1===E&&0===h&&(T=!0);1>E&&1===h&&(T=!0)}if(T||0!==h){var Q=g.tileTransform.transform,E=g.coordRange/512,N=n.getPaintValue("fill-translate",e);if(0!==N[0]||0!==N[1]){a.copy(this._viewProjMat,g.tileTransform.transform);var Q=N[0],N=N[1],q=0,k=0,E=(1<<g.key.level)/Math.pow(2,e)*E;1===n.getPaintValue("fill-translate-anchor",e)?(k=Math.sin(w.C_DEG_TO_RAD*
-f),f=Math.cos(w.C_DEG_TO_RAD*-f),q=E*(Q*f-N*k),k=E*(Q*k+N*f)):(q=E*Q,k=E*N);this._offsetVector[0]=q;this._offsetVector[1]=k;this._offsetVector[2]=0;a.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);Q=this._viewProjMat}if(f=this._getTrianglesVAO(c,g)){if(x){if(1===h&&(t=m.getMosaicItemPosition(t,!0)))E=g.coordRange/512/Math.pow(2,Math.round(e)-g.key.level)/s,b.identity(this._patternMatrix),x=1/(t.size[1]*E),this._patternMatrix[0]=1/(t.size[0]*E),this._patternMatrix[4]=x,c.bindVAO(f),
m.bind(c,9729,0),c.bindProgram(this._patternFillProgram),this._patternFillProgram.setUniformMatrix4fv("u_transformMatrix",Q),this._patternFillProgram.setUniform2fv("u_normalized_origin",g.tileTransform.displayCoord),this._patternFillProgram.setUniform1f("u_depth",n.z),this._patternFillProgram.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix),this._patternFillProgram.setUniform1f("u_opacity",u),this._patternFillProgram.setUniform2f("u_pattern_tl",t.tl[0],t.tl[1]),this._patternFillProgram.setUniform2f("u_pattern_br",
t.br[0],t.br[1]),this._patternFillProgram.setUniform1i("u_texture",0),c.drawElements(4,d.triangleElementCount,5125,12*d.triangleElementStart),c.bindVAO()}else T&&(E=U[3]*u,this._color[0]=E*U[0],this._color[1]=E*U[1],this._color[2]=E*U[2],this._color[3]=E,c.bindVAO(f),c.bindProgram(this._solidFillProgram),this._solidFillProgram.setUniformMatrix4fv("u_transformMatrix",Q),this._solidFillProgram.setUniform2fv("u_normalized_origin",g.tileTransform.displayCoord),this._solidFillProgram.setUniform1f("u_depth",
n.z+v),this._solidFillProgram.setUniform4fv("u_color",this._color),c.drawElements(4,d.triangleElementCount,5125,12*d.triangleElementStart),c.bindVAO());if(S&&0<d.outlineElementCount&&1===h){e=n.getPaintValue("fill-outline-color",e);if(0===e[3]){if(1!==this._color[3])return;e=U}s=0.75/s;u*=e[3];this._outlineColor[0]=u*e[0];this._outlineColor[1]=u*e[1];this._outlineColor[2]=u*e[2];this._outlineColor[3]=u;if(u=this._getOutlineVAO(c,g))c.bindVAO(u),c.bindProgram(this._outlineProgram),this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",
Q),this._outlineProgram.setUniformMatrix4fv("u_extrudeMatrix",p),this._outlineProgram.setUniform2fv("u_normalized_origin",g.tileTransform.displayCoord),this._outlineProgram.setUniform1f("u_depth",n.z),this._outlineProgram.setUniform1f("u_outline_width",s),this._outlineProgram.setUniform4fv("u_color",this._outlineColor),c.drawElements(4,d.outlineElementCount,5125,12*d.outlineElementStart),c.bindVAO()}}}}};g.prototype._initialize=function(a){if(this._initialized)return!0;var b=new u(a,h,n,{a_pos:0});
if(!b)return!1;var c=new u(a,f,e,this._fillAttributeLocations);if(!c)return!1;a=new u(a,p,s,this._outlineAttributeLocations);this._solidFillProgram=b;this._patternFillProgram=c;this._trianglesVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]};this._outlineProgram=a;this._outlineVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,
divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:8,normalized:!1,divisor:0}]};return this._initialized=!0};g.prototype._getTrianglesVAO=function(a,b){if(b.polygonTrianglesVertexArrayObject)return b.polygonTrianglesVertexArrayObject;var c=b.polygonTrianglesVertexBuffer,d=b.polygonTrianglesIndexBuffer;if(!c||!d)return null;b.polygonTrianglesVertexArrayObject=new t(a,this._fillAttributeLocations,this._trianglesVertexAttributes,{geometry:c},d);return b.polygonTrianglesVertexArrayObject};
g.prototype._getOutlineVAO=function(a,b){if(b.polygonOutlineVertexArrayObject)return b.polygonOutlineVertexArrayObject;var c=b.polygonOutlinesVertexBuffer,d=b.polygonOutlinesIndexBuffer;if(!c||!d)return null;b.polygonOutlineVertexArrayObject=new t(a,this._outlineAttributeLocations,this._outlineVertexAttributes,{geometry:c},d);return b.polygonOutlineVertexArrayObject};return g}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SymbolRenderer":function(){define(["require","exports","./IconRenderer",
"./SDFRenderer"],function(g,m,a,b){return function(){function d(){this._iconRenderer=new a;this._sdfRenderer=new b}d.prototype.render=function(a,b,d,f,e,g,m,u,t,w,v,x,B){b.hasData()&&(0<b.marketElementCount&&!b.isSDF&&this._iconRenderer.render(a,b,d,f,e,g,m,u,w,v,B),0<b.textElementCount&&this._sdfRenderer.render(a,b,d,f,e,g,m,t,w,v,x,B))};return d}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/IconRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 dojo/text!./shaders/iconShader.vs.glsl dojo/text!./shaders/iconShader.fs.glsl ../../webgl/Program ../../webgl/VertexArrayObject ../GeometryUtils".split(" "),
function(g,m,a,b,d,c,h,n,f){return function(){function e(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};this._spritesTextureSize=new Float32Array(2);this._initialized=!1;this._extrudeMat=a.create();this._scaleVec=b.create()}e.prototype.render=function(b,c,d,e,h,g,n,m,A,C,z){this._initialized||this._initialize(b);z*=n.getPaintValue("icon-opacity",d);var F=n.getLayoutValue("icon-rotation-alignment",d);1===F&&1===n.getLayoutValue("symbol-placement",d)&&!n.hasLayoutProperty("icon-rotation-alignment")&&
(F=0);var H=0===F,F=n.getLayoutValue("icon-keep-upright",d)&&H,J=n.getLayoutValue("icon-size",d);e=f.degToByte(e);this._spritesTextureSize[0]=m.width/4;this._spritesTextureSize[1]=m.height/4;H?a.copy(this._extrudeMat,A):a.copy(this._extrudeMat,C);1!==J&&(this._scaleVec[0]=J,this._scaleVec[1]=J,this._scaleVec[2]=1,a.scale(this._extrudeMat,this._extrudeMat,this._scaleVec));m.bind(b,9729,0);b.bindProgram(this._iconProgram);if(m=this._getIconVAO(b,g))b.bindVAO(m),this._iconProgram.setUniformMatrix4fv("u_transformMatrix",
g.tileTransform.transform),this._iconProgram.setUniformMatrix4fv("u_extrudeMatrix",this._extrudeMat),this._iconProgram.setUniform2fv("u_normalized_origin",g.tileTransform.displayCoord),this._iconProgram.setUniform1f("u_depth",n.z),this._iconProgram.setUniform2fv("u_mosaicSize",this._spritesTextureSize),this._iconProgram.setUniform1f("u_mapRotation",e),this._iconProgram.setUniform1f("u_keepUpright",F?1:0),this._iconProgram.setUniform1f("u_level",10*d),this._iconProgram.setUniform1f("u_fadeSpeed",10*
h.fadeSpeed),this._iconProgram.setUniform1f("u_minfadeLevel",10*h.minfadeLevel),this._iconProgram.setUniform1f("u_maxfadeLevel",10*h.maxfadeLevel),this._iconProgram.setUniform1f("u_fadeChange",10*(d+h.fadeChange)),this._iconProgram.setUniform1f("u_opacity",z),this._iconProgram.setUniform1i("u_texture",0),b.drawElements(4,c.marketElementCount,5125,12*c.markerElementStart),b.bindVAO()};e.prototype._initialize=function(a){if(this._initialized)return!0;this._iconProgram=new h(a,d,c,this._attributeLocations);
this._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};return this._initialized=!0};e.prototype._getIconVAO=function(a,b){if(b.iconVertexArrayObject)return b.iconVertexArrayObject;var c=b.iconVertexBuffer,
d=b.iconIndexBuffer;if(!c||!d)return null;b.iconVertexArrayObject=new n(a,this._attributeLocations,this._iconVertexAttributes,{geometry:c},d);return b.iconVertexArrayObject};return e}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SDFRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec4 ../../../core/libs/gl-matrix/vec3 dojo/text!./shaders/sdfShader.vs.glsl dojo/text!./shaders/sdfShader.fs.glsl ../../webgl/Program ../../webgl/VertexArrayObject ../GeometryUtils".split(" "),
function(g,m,a,b,d,c,h,n,f,e){return function(){function g(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};this._initialized=!1;this._extrudeMat=a.create();this._haloColor=b.create();this._sdfColor=b.create();this._scaleVec=d.create()}g.prototype.render=function(b,c,d,f,h,g,n,m,p,z,F,H){this._initialized||this._initialize(b);var J=n.getLayoutValue("text-size",d),I=J/24;f=e.degToByte(f);var K=n.getLayoutValue("text-rotation-alignment",d);1===K&&1===n.getLayoutValue("symbol-placement",
d)&&!n.hasLayoutProperty("text-rotation-alignment")&&(K=0);var M=0===K,K=n.getLayoutValue("text-keep-upright",d)&&M;F=0.1*24/J/F;H*=n.getPaintValue("text-opacity",d);this._glyphTextureSize||(this._glyphTextureSize=new Float32Array([m.width/4,m.height/4]));M?a.copy(this._extrudeMat,p):a.copy(this._extrudeMat,z);this._scaleVec[0]=I;this._scaleVec[1]=I;this._scaleVec[2]=1;a.scale(this._extrudeMat,this._extrudeMat,this._scaleVec);m.bind(b,9729,0);b.bindProgram(this._sdfProgram);if(m=this._getSDFVAO(b,
g))b.bindVAO(m),this._sdfProgram.setUniformMatrix4fv("u_transformMatrix",g.tileTransform.transform),this._sdfProgram.setUniformMatrix4fv("u_extrudeMatrix",this._extrudeMat),this._sdfProgram.setUniform2fv("u_normalized_origin",g.tileTransform.displayCoord),this._sdfProgram.setUniform1f("u_depth",n.z),this._sdfProgram.setUniform2fv("u_mosaicSize",this._glyphTextureSize),this._sdfProgram.setUniform1f("u_mapRotation",f),this._sdfProgram.setUniform1f("u_keepUpright",K?1:0),this._sdfProgram.setUniform1f("u_level",
10*d),this._sdfProgram.setUniform1f("u_fadeSpeed",10*h.fadeSpeed),this._sdfProgram.setUniform1f("u_minfadeLevel",10*h.minfadeLevel),this._sdfProgram.setUniform1f("u_maxfadeLevel",10*h.maxfadeLevel),this._sdfProgram.setUniform1f("u_fadeChange",10*(d+h.fadeChange)),this._sdfProgram.setUniform1f("u_opacity",H),this._sdfProgram.setUniform1i("u_texture",0),h=n.getPaintValue("text-halo-color",d),0<h[3]&&(g=h[3]*H,this._haloColor[0]=g*h[0],this._haloColor[1]=g*h[1],this._haloColor[2]=g*h[2],this._haloColor[3]=
g,h=F+n.getPaintValue("text-halo-blur",d)/I/8,I=0.75-n.getPaintValue("text-halo-width",d)/I/8,this._sdfProgram.setUniform4fv("u_color",this._haloColor),this._sdfProgram.setUniform1f("u_edgeDistance",I),this._sdfProgram.setUniform1f("u_edgeWidth",h),b.drawElements(4,c.textElementCount,5125,12*c.textElementStart)),d=n.getPaintValue("text-color",d),0<d[3]&&(n=d[3]*H,this._sdfColor[0]=n*d[0],this._sdfColor[1]=n*d[1],this._sdfColor[2]=n*d[2],this._sdfColor[3]=n,this._sdfProgram.setUniform4fv("u_color",
this._sdfColor),this._sdfProgram.setUniform1f("u_edgeDistance",0.75),this._sdfProgram.setUniform1f("u_edgeWidth",F),b.drawElements(4,c.textElementCount,5125,12*c.textElementStart),b.bindVAO())};g.prototype._initialize=function(a){if(this._initialized)return!0;this._sdfProgram=new n(a,c,h,this._attributeLocations);this._sdfVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,
divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};return this._initialized=!0};g.prototype._getSDFVAO=function(a,b){if(b.textVertexArrayObject)return b.textVertexArrayObject;var c=b.textVertexBuffer,d=b.textIndexBuffer;if(!c||!d)return null;b.textVertexArrayObject=new f(a,this._attributeLocations,this._sdfVertexAttributes,{geometry:c},d);return b.textVertexArrayObject};return g}()})},
"esri/layers/vectorTiles/views/vectorTiles/renderers/TileInfoRenderer":function(){define("require exports dojo/text!./shaders/background.vs.glsl dojo/text!./shaders/background.fs.glsl dojo/text!./shaders/tileInfo.vs.glsl dojo/text!./shaders/tileInfo.fs.glsl ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject ../../webgl/Texture ../GeometryUtils".split(" "),function(g,m,a,b,d,c,h,n,f,e,p){return function(){function g(){this._initialized=!1;this._maxWidth=0;this._color=new Float32Array([1,
0,0,1])}g.prototype.render=function(a,b){this._initialized||this._initialize(a);a.bindVAO(this._outlineVertexArrayObject);a.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",b.coordRange);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);
a.setLineWidth(2);a.drawArrays(3,0,4);a.bindVAO();var c=this._getTexture(a,b);c&&(a.bindVAO(this._tileInfoVertexArrayObject),a.bindProgram(this._tileInfoProgram),a.bindTexture(c,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",b.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",b.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",b.coordRange/512),this._tileInfoProgram.setUniform2f("u_delta",
8,8),this._tileInfoProgram.setUniform2f("u_dimensions",c.descriptor.width,c.descriptor.height),a.drawArrays(5,0,4),a.bindVAO())};g.prototype._initialize=function(e){if(this._initialized)return!0;var g={a_pos:0},m=new h(e,a,b,g),p=new h(e,d,c,g),s={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},B=new Int8Array([0,0,1,0,1,1,0,1]),B=f.createVertex(e,35044,B),B=new n(e,g,s,{geometry:B}),A=new Int8Array([0,0,1,0,0,1,1,1]),A=f.createVertex(e,35044,A);e=new n(e,g,
s,{geometry:A});this._outlineProgram=m;this._tileInfoProgram=p;this._vertexAttributes=s;this._outlineVertexArrayObject=B;this._tileInfoVertexArrayObject=e;return this._initialized=!0};g.prototype._getTexture=function(a,b){if(b.texture)return b.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var c=b.key.id,
d=this._canvas.getContext("2d");d.font="24px sans-serif";d.textAlign="left";d.textBaseline="middle";var f=d.measureText(c),f=Math.pow(2,Math.ceil(p.log2(f.width+2)));f>this._maxWidth&&(this._maxWidth=f);d.clearRect(0,0,this._maxWidth,32);d.fillStyle=b.key.level>b.refKey.level?"red":"blue";d.fillText(c,0,16);b.texture=new e(a,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return b.texture};return g}()})},"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require",
"exports"],function(g,m){return function(){function a(b,d,c){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._context=b;this._desc={pixelFormat:d.pixelFormat,dataType:d.dataType,target:d.target?d.target:3553,samplingMode:d.samplingMode?d.samplingMode:9729,wrapMode:d.wrapMode?d.wrapMode:10497,maxAnisotropy:d.maxAnisotropy,flipped:void 0!==d.flipped?d.flipped:!1,hasMipmap:void 0!==d.hasMipmap?d.hasMipmap:!1,level:void 0!==d.level?d.level:
0,unpackAlignment:d.unpackAlignment?d.unpackAlignment:4,width:d.width,height:d.height};this._id=++a._nextId;this.setData(c)}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._context&&this._glName&&
(this._context.gl.deleteTexture(this._glName),this._glName=null)};a.prototype.resize=function(a,d){var c=this._desc;c.width===a&&c.height===d||(c.width=a,c.height=d,this.setData(null))};a.prototype.setData=function(b){var d=this._context.gl;this._glName||(this._glName=d.createTexture());void 0===b&&(b=null);null===b&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var c=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var h=this._desc;a._validateTexture(h);
d.pixelStorei(d.UNPACK_ALIGNMENT,h.unpackAlignment);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,h.flipped?1:0);b instanceof ImageData||b instanceof HTMLImageElement||b instanceof HTMLCanvasElement||b instanceof HTMLVideoElement?(d.texImage2D(d.TEXTURE_2D,h.level,h.pixelFormat,h.pixelFormat,h.dataType,b),void 0===this._desc.width&&(this._desc.width=b.width),void 0===this._desc.height&&(this._desc.height=b.height)):d.texImage2D(d.TEXTURE_2D,h.level,h.pixelFormat,h.width,h.height,0,h.pixelFormat,h.dataType,
b);h.hasMipmap&&this.generateMipmap();a._applySamplingMode(d,this._desc);a._applyWrapMode(d,this._desc);a._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(c,0)};a.prototype.updateData=function(a,d,c,h,g,f){var e=this._context.gl,m=this._desc,s=this._context.getBoundTexture(0);this._context.bindTexture(this,0);f instanceof ImageData||f instanceof HTMLImageElement||f instanceof HTMLCanvasElement||f instanceof HTMLVideoElement?e.texSubImage2D(e.TEXTURE_2D,a,d,
c,m.pixelFormat,m.dataType,f):e.texSubImage2D(e.TEXTURE_2D,a,d,c,h,g,m.pixelFormat,m.dataType,f);this._context.bindTexture(s,0)};a.prototype.generateMipmap=function(){var b=this._desc;b.hasMipmap||(b.hasMipmap=!0,a._validateTexture(b));9729===b.samplingMode?(this._samplingModeDirty=!0,b.samplingMode=9985):9728===b.samplingMode&&(this._samplingModeDirty=!0,b.samplingMode=9984);b=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var d=this._context.gl;d.generateMipmap(d.TEXTURE_2D);
this._context.bindTexture(b,0)};a.prototype.setSamplingMode=function(b){b!==this._desc.samplingMode&&(this._desc.samplingMode=b,a._validateTexture(this._desc),this._samplingModeDirty=!0)};a.prototype.setWrapMode=function(b){b!==this._desc.wrapMode&&(this._desc.wrapMode=b,a._validateTexture(this._desc),this._wrapModeDirty=!0)};a.prototype.applyChanges=function(){var b=this._context.gl,d=this._desc;this._samplingModeDirty&&(a._applySamplingMode(b,d),this._samplingModeDirty=!1);this._wrapModeDirty&&
(a._applyWrapMode(b,d),this._wrapModeDirty=!1)};a._isPowerOfTwo=function(a){return 0===(a&a-1)};a._validateTexture=function(b){!a._isPowerOfTwo(b.width)||a._isPowerOfTwo(b.height)};a._applySamplingMode=function(a,d){var c=d.samplingMode;if(9985===c||9987===c)c=9729;else if(9984===c||9986===c)c=9728;a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,d.samplingMode)};a._applyWrapMode=function(a,d){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,d.wrapMode);
a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,d.wrapMode)};a._applyAnisotropicFilteringParameters=function(a,d){if(null!=d.maxAnisotropy){var c=a.extensions.textureFilterAnisotropic;if(c){var h=a.gl;h.texParameterf(h.TEXTURE_2D,c.TEXTURE_MAX_ANISOTROPY_EXT,d.maxAnisotropy)}}};a._nextId=0;return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FadeRecorder":function(){define(["require","exports","../../../core/now"],function(g,m,a){(function(){return function(a,d){this.level=a;this.now=
d}})();g=function(){return function(a,d,c,h){this.fadeSpeed=a;this.minfadeLevel=d;this.maxfadeLevel=c;this.fadeChange=h}}();m.FadeProperties=g;g=function(){function b(a){void 0===a&&(a=300);this._levelSnapshots=[];this._duration=a}b.prototype.recordLevel=function(b){var c=a(),h=this._levelSnapshots;0===h.length&&(h.push({level:b,now:0}),h.push({level:b,now:0}));(2===h.length||h[0].level!==b)&&h.push({level:b,now:c})};b.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var a=
this._duration,b=this._levelSnapshots,h=b.length,g=b[h-1],f=-1;h>f+1&&b[f+1].now+a<g.now;)f++;for(0>f&&(f=0);f<h;f++)if(b[f].level!==g.level)return!0;return!1};b.prototype.getFadeValues=function(b){void 0===b&&(b=!1);for(var c=this._duration,h=a(),g=this._levelSnapshots;3<g.length&&g[1].now+c<h;)g.shift();g[1].now+c<h&&(g[0].level=g[1].level);var f=g[0].level,e=g[g.length-1],m=e.level,s=Math.min(f,m),f=Math.max(f,m),g=(e.level-g[1].level)/((e.now-g[1].now)/c);return b?{fadeSpeed:0,minfadeLevel:s,
maxfadeLevel:f,fadeChange:0}:{fadeSpeed:g,minfadeLevel:s,maxfadeLevel:f,fadeChange:(h-e.now)/c*g}};return b}();m.FadeRecorder=g})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(g,m,a){return function(){var b=a.performance||{};if(b.now)return function(){return b.now()};if(b.webkitNow)return function(){return b.webkitNow()};if(b.mozNow)return function(){return b.mozNow()};if(b.msNow)return function(){return b.msNow()};if(b.oNow)return function(){return b.oNow()};
var d;d=b.timing&&b.timing.navigationStart?b.timing.navigationStart:Date.now();return function(){return Date.now()-d}}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(g,m){return"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{}})},"esri/layers/vectorTiles/views/vectorTiles/StencilClipGenerator":function(){define(["require","exports","./GeometryUtils"],function(g,m,a){var b=function(){function a(b){this.children=
[];this.stageTile=b}a.prototype.tryAdd=function(b){if(a.isChildOf(b,this.stageTile.key)){for(var h=0,g=this.children;h<g.length;h++)if(a.isChildOf(b,g[h]))return;this.children.push(b)}};a.prototype.equals=function(a){if(this.stageTile.key.id!==a.stageTile.key.id||this.children.length!==a.children.length)return!1;for(var b=0;b<this.children.length;b++)if(this.children[b].id!==a.children[b].id)return!1;return!0};a.isChildOf=function(a,b){if(a.level<=b.level)return!1;var d=a.level-b.level,f=a.col>>d;
return a.row>>d===b.row&&f===b.col};return a}();return function(){function d(){this._tileGroups=[];this._bitOffset=0}d.prototype.update=function(c){this._tileGroups=[];this._bitOffset=0;if(0!==c.length){for(var d=[],g=c.length,f=0;f<g;f++)if(c[f].attached&&c[f].visible){for(var e=new b(c[f]),m=f+1;m<g;m++)e.tryAdd(c[m].key);e.children.sort(function(a,b){return a.level<b.level?-1:1});this._reuseExisting(e)||d.push(e)}if(0<d.length){c=Math.ceil(a.log2(d.length+1));g=(1<<c)-1<<this._bitOffset;f=1;e=
void 0;for(m=0;m<d.length;m++){var s=d[m],e=f++<<this._bitOffset;s.stageTile.stencilData.mask=g;s.stageTile.stencilData.reference=e}this._bitOffset+=c;this._tileGroups.push(d)}}};d.prototype._reuseExisting=function(a){for(var b=0,d=this._tileGroups;b<d.length;b++)for(var f=0,e=d[b];f<e.length;f++){var g=e[f];if(g.equals(a)&&g.stageTile.stencilData.mask===a.stageTile.stencilData.mask&&g.stageTile.stencilData.reference===a.stageTile.stencilData.reference)return!0}return!1};return d}()})},"esri/layers/vectorTiles/views/vectorTiles/TileHandler":function(){define("require exports module dojo/Deferred dojo/promise/all ../../core/workers ../../core/promiseUtils ../../core/requireUtils ../../request ../2d/layers/support/TileKey ./TileIndex ./SpriteMosaic ./SpriteSource ./GlyphMosaic ./GlyphSource ./VectorTileDisplayObject ./GeometryUtils".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x){return function(){function m(a,b,c,d){void 0===d&&(d=!1);this.devicePixelRatio=c;this.allowUpdates=d;this._tileIndex=this._connection=this._glyphMosaic=this._spriteMosaic=null;this._ongoingRequests={};this._vectorTileLayer=a;this._requestUpdate=b}m.prototype.destroy=function(){this.stop();this._vectorTileLayer=this._requestUpdate=null};Object.defineProperty(m.prototype,"spriteMosaic",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});
Object.defineProperty(m.prototype,"glyphMosaic",{get:function(){return this._glyphMosaic},enumerable:!0,configurable:!0});m.prototype.start=function(){var e=this;this.stop();var f=this._vectorTileLayer.styleRepository,h=new u(f.sprite,this.devicePixelRatio);h.devicePixelRatio=devicePixelRatio;var m=h.load().then(function(){e._spriteMosaic=new s(1024,1024);e._spriteMosaic.setSpriteSource(h)}),p=new w(f.glyphs);this._glyphMosaic=new t(1024,1024,p);var v=this._fetchTileMap(this._vectorTileLayer.tileIndexUrl),
x=c.open(this,n.getAbsMid("./WorkerTileHandler",g,a)).then(function(a){e._connection=a}),B=new b(function(a){m.isFulfilled()||m.cancel();v.isFulfilled()||v.cancel();x.isFulfilled()||x.cancel()});d([m,v,x]).then(function(a){d(e._connection.broadcast("setLayers",f.styleJSON)).then(function(){B.resolve()})});return this._broadcastPromise=B.promise};m.prototype.stop=function(){this._broadcastPromise&&!this._broadcastPromise.isFulfilled()&&this._broadcastPromise.cancel();this._connection&&(this._connection.close(),
this._connection=null)};m.prototype.updateTile=function(a,b){if(this.allowUpdates){if(!this._broadcastPromise.isFulfilled()||!this._connection)return h.reject(Error("no connection"));var c=Math.round(x.degToByte(b.state.rotation));if(a.rotation===c)return null;a.rotation=c;return this._connection.invoke("update",{key:a.id,rotation:c},[],{id:a.workerID}).then(function(b){a.updateSymbolData(b);return a})}};m.prototype.getVectorTileWithLRC=function(a,b,c,d){void 0===d&&(d=0);return this.getVectorTile(e.from(a,
b,c,0),{state:{rotation:d}})};m.prototype.getVectorTile=function(a,b){var c=this;if(!this._broadcastPromise.isFulfilled()||!this._connection)return h.reject(Error("no connection"));var d=this._vectorTileLayer.tileInfo,e=Math.round(b?b.state.rotation:0);if(d.lods.length<=a.level)return h.reject("Cannot create tile for the requested level");var f=this._tileIndex?this._tileIndex.dataKey(a):a;return!f?h.reject(Error("no data")):this._getTileData(this._connection,a,f,e).then(function(b){if(!b||!b.tileData)return h.reject("No data");
var g=d.size[0]*d.lods[a.level].resolution,n=d.origin,m=n.x+a.col*g+a.world*c._vectorTileLayer.fullExtent.width,p=m+g,n=n.y-a.row*g,g=n-g;c._requestUpdate();return new v(a,f,[m,n,p,g],c._vectorTileLayer.tileInfo.size[1],4096,e,b.tileData,c._vectorTileLayer.styleRepository,c._glyphMosaic,c.allowUpdates?b.workerId:-1,c._connection)})};m.prototype.fetchTileData=function(a){a=e.fromId(a);a=this._vectorTileLayer.getTileUrl(a.level,a.row,a.col);return f(a,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(a){return{data:{protobuff:a.data},
buffers:[a.data]}})};m.prototype.getSprites=function(a){return h.resolve({data:{spriteItems:this._spriteMosaic.getSpriteItems(a.sprites)}})};m.prototype.getGlyphs=function(a){return this._glyphMosaic.getGlyphItems(a.tileID,a.font,a.codePoints).then(function(a){return{data:{glyphItems:a}}})};m.prototype.getStyleRepository=function(){return this._vectorTileLayer.styleRepository};m.prototype.getTileIndex=function(){return this._tileIndex};m.prototype._getTileData=function(a,b,c,d){var e=this,f={id:null};
if(a=this._ongoingRequests[b.id])return a;a=this._connection.invoke("getTile",{key:b.id,refKey:c.id,rotation:d,cacheTile:this.allowUpdates},[],f).then(function(a){delete e._ongoingRequests[b.id];return{tileData:a,workerId:f.id}}).otherwise(function(a){delete e._ongoingRequests[b.id];e.allowUpdates&&e._connection.invoke("destructTileData",{key:b.id},[],f);return h.reject(a)});return this._ongoingRequests[b.id]=a};m.prototype._fetchTileMap=function(a){var b=this;return!a?null:f(a,{callbackParamName:"callback",
responseType:"json"}).then(function(a){b._tileIndex=new p(a.data)})};return m}()})},"esri/layers/vectorTiles/core/workers":function(){define(["require","exports","./workers/workers"],function(g,m,a){for(var b in a)m.hasOwnProperty(b)||(m[b]=a[b])})},"esri/layers/vectorTiles/core/workers/workers":function(){define("require exports dojo/Deferred dojo/promise/all ../promiseUtils ./Connection ./JobProxy".split(" "),function(g,m,a,b,d,c,h){function n(a,c){for(var d=[],e=0,f=u.length;e<f;e++)d.push(u[e].openConnection(a,
c));return b(d).then(function(a){})}function f(a){t[a]=!0;if(!s&&t.every(function(a){return a})){for(var b in B)(a=x[b])&&B[b].resolve(a);B={};s=!0}}function e(b){var d=v++;b=new c(b,d);var e=new a;x[d]=b;s?e.resolve(b):B[d]=e;return e.promise}var p=Math.max((navigator.hardwareConcurrency||2)-1,2),s=!1,u=[],t=[],w=0,v=0,x={},B={},A=!1;m.open=function(a,b){if(!1===A){for(var c=0;c<p;++c){var g=new h(x,c,f);u.push(g);t.push(!1)}A=!0}return e(a).then(function(a){return n(b,a.id).then(function(){return a}).otherwise(function(a){return d.reject(a)})})};
m.terminate=function(){for(var a=0,b=u.length;a<b;a++)u[a].terminate();u=[];t=[];s=!1};m.closeConnection=function(a){if(a)if(x[a.id]&&delete x[a.id],s)for(var b=0,c=u.length;b<c;b++)u[b].closeConnection(a.id);else if(b=B[a.id])b.promise.cancel(),delete B[a.id]};m.invoke=function(a,b,c,e,f){var h=null;e&&(h=e.id);if(null===h&&(h=w=(w+1)%u.length,!t[h]&&!u.some(function(a,b,c){h=(h+1)%c.length;return t[h]})))return d.reject(Error("No worker available"));a=u[h].invoke(a,b,c,f);e&&(e.id=h);return a};
m.broadcast=function(a,b,c,d){for(var e=[],f=0,h=u.length;f<h;f++)t[f]&&e.push(u[f].invoke(a,b,c,d));return e}})},"esri/layers/vectorTiles/core/workers/Connection":function(){define(["require","exports","./workers"],function(g,m,a){return function(){function b(a,b){this.client=a;this.id=b}b.prototype.invoke=function(b,c,h,g){return a.invoke(b,c,h,g,this.id)};b.prototype.broadcast=function(b,c,h){return a.broadcast(b,c,h,this.id)};b.prototype.close=function(){a.closeConnection(this)};return b}()})},
"esri/layers/vectorTiles/core/workers/JobProxy":function(){define("require exports dojo/_base/kernel dojo/_base/lang dojo/_base/url dojo/Deferred ../../kernel ../../config ../../request ../Logger ../urlUtils ./WorkerFallbackImpl".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s){function u(){if(!A){var a=void 0;try{a=new Worker(v)}catch(b){w.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new s}return t(a)}if(!C){var a=new d(v),c=n.defaults?n.defaults.io.corsEnabledServers:
n.request.corsEnabledServers;-1===c.indexOf(a.host)&&c.push(a.host);C=f(v,{responseType:"text"})}return C.then(function(a){var b;try{b=new Worker(URL.createObjectURL(new Blob([a.data],{type:"text/javascript"})))}catch(c){w.warn("Failed to create Worker. Fallback to execute module in main thread",c),b=new s}return t(b)})}function t(d){function e(c){if(c&&c.data&&c.data.type)if(c=c.data.type,"\x3cworker-loaded\x3e"===c){c=d;var g;null!=n["default"]?(g=b.mixin({},n),delete g["default"],g=JSON.parse(JSON.stringify(g))):
g=JSON.parse(JSON.stringify(n));c.postMessage({type:"\x3cconfigure\x3e",configure:{esriConfig:g,dojoConfig:{async:!0,baseUrl:B,locale:a.locale,has:{"esri-cors":1,"dojo-test-sniff":0,"config-deferredInstrumentation":0},paths:{esri:"esri",dojo:"dojo",dojox:"dojox",dstore:"dstore",moment:"moment"}},loaderUrl:x}})}else"\x3cworker-configured\x3e"===c&&(d.removeEventListener("message",e),d.removeEventListener("error",f),h.resolve(d))}function f(a){a.preventDefault();d.removeEventListener("message",e);d.removeEventListener("error",
f);w.warn("Failed to create Worker. Fallback to execute module in main thread",a);d=new s;d.addEventListener("message",e);d.addEventListener("error",f)}var h=new c;d.addEventListener("message",e);d.addEventListener("error",f);return h.promise}var w=e.getLogger("esri.core.workers"),v=p.makeAbsolute(g.toUrl("./worker.js")),x=p.makeAbsolute(g.toUrl("./worker-init.js")),B=p.makeAbsolute("../../../../../../",x)+"/",A=!p.hasSameOrigin(v,location.href),C=null;return function(){function a(b,c,d){var e=this;
this.connections=b;this.index=c;this.workerInitCallback=d;this.msgCount=0;this.outgoingJobs={};this.incomingJobs={};this.incomingStaticJobs={};u().then(function(a){e.worker=a;e.worker.addEventListener("message",e.message.bind(e));e.worker.addEventListener("error",function(a){a.preventDefault();w.error(a)});e.workerInitCallback(e.index)})}a.prototype.terminate=function(){this.worker.terminate()};a.prototype.openConnection=function(a,b){return this.invoke("\x3copen-connection\x3e",{path:a},void 0,b)};
a.prototype.closeConnection=function(a){this.invoke("\x3cclose-connection\x3e",void 0,void 0,a)};a.prototype.invoke=function(a,b,d,e){var f=this,h=++this.msgCount,g=new c(function(a){f.worker.postMessage({type:"\x3ccancel\x3e",id:h,connection:e,data:{reason:a}});f.outgoingJobs[h]&&delete f.outgoingJobs[h]});this.outgoingJobs[h]=g;this.worker.postMessage({type:a,id:h,connection:e,data:b},d);return g.promise};a.prototype.message=function(a){var b=this;if(a&&a.data){var c=a.data.type;if(c){var d=a.data,
e=a.data.id;if("\x3cresponse\x3e"===c&&e){if(a=this.outgoingJobs[e])delete this.outgoingJobs[e],d.error?a.reject(d.error):a.resolve(d.data)}else if("\x3ccancel\x3e"===c&&e)(a=this.incomingJobs[e])&&a.cancel(d.data.reason),d.staticMsg&&(a=this.incomingStaticJobs[e])&&a.cancel(d.data.reason);else if("\x3cstatic-message\x3e"===c){var f=d.staticMsg;a=h.workerMessages[f];!a||"function"!==typeof a?this.worker.postMessage({type:"\x3cstatic-message\x3e",staticMsg:f,id:e,error:a+" message type is not available on the kernel!"}):
(d=a.call(this,d.data),this.incomingStaticJobs[e]=d,d.then(function(a){b.worker.postMessage({type:"\x3cstatic-message\x3e",staticMsg:f,id:e,data:a.data},a.buffers)}).otherwise(function(a){a||(a="Error encountered at method"+f);(!a.dojoType||"cancel"!==a.dojoType)&&b.worker.postMessage({type:"\x3cstatic-message\x3e",staticMsg:f,id:e,error:a})}).always(function(){delete b.incomingStaticJobs[e]}))}else{var g=d.connection;if(a=this.connections[g])if(a=a.client){var n=a[c];"function"===typeof n&&(d=n.call(a,
d.data),this.incomingJobs[e]=d,d.then(function(a){b.worker.postMessage({type:"\x3cresponse\x3e",id:e,connection:g,error:a.error,data:a.data},a.buffers)}).otherwise(function(a){a||(a="Error encountered at method"+c);(!a.dojoType||"cancel"!==a.dojoType)&&b.worker.postMessage({type:"\x3cresponse\x3e",id:e,connection:g,error:a})}).always(function(){delete b.incomingJobs[e]}))}}}}};return a}()})},"esri/layers/vectorTiles/kernel":function(){define(["require","exports","esri/kernel","./identity/IdentityManager"],
function(g,m,a,b){return function(){function d(){}Object.defineProperty(d,"id",{get:function(){return a.id?b:null},enumerable:!0,configurable:!0});d.workerMessages={};return d}()})},"esri/layers/vectorTiles/identity/IdentityManager":function(){define(["require","exports","esri/IdentityManager"],function(g,m,a){m.findCredential=function(b){return a.findCredential(b)}})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],function(g,m,a){var b={info:0,warn:1,error:2};
g=function(){function a(b){void 0===b&&(b={});this.module=b.module||"";this.writer=b.writer||null;this.level=b.level||null;null!=b.enabled&&(this.enabled=!!b.enabled);a._loggers[this.module]=this;b=this.module.lastIndexOf(".");-1!==b&&(this.parent=a.getLogger(this.module.slice(0,b)))}a.prototype.log=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];this._isEnabled()&&this._matchLevel(a)&&(d=this._inheritedWriter())&&d.apply(void 0,[a,this.module].concat(b))};a.prototype.error=
function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.log.apply(this,["error"].concat(a))};a.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.log.apply(this,["warn"].concat(a))};a.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this.log.apply(this,["info"].concat(a))};a.prototype.getLogger=function(b){return a.getLogger(this.module+"."+b)};a.getLogger=function(b){var h=a._loggers[b];h||(h=new a({module:b}));
return h};a.prototype._parentWithMember=function(a,b){for(var d=this;d&&null==d[a];)d=d.parent;return d?d[a]:b};a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};a.prototype._consoleWriter=function(a,b){for(var d=[],f=2;f<arguments.length;f++)d[f-2]=arguments[f];console[a].apply(console,["["+b+"]"].concat(d))};a.prototype._matchLevel=function(a){return b[this._parentWithMember("level","error")]<=b[a]};a.prototype._isEnabled=function(){return this._parentWithMember("enabled",
!0)};a._loggers={};return a}();g.getLogger("esri").level="warn";return g})},"esri/layers/vectorTiles/core/workers/WorkerFallbackImpl":function(){define(["require","exports"],function(g,m){var a=function(){return this}(),b=function(){return function(){var a=this,b=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(c){a[c]=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];return b[c].apply(b,a)}})}}(),d=a.MutationObserver||
a.WebKitMutationObserver,c=function(){var b;if(a.process&&a.process.nextTick)b=function(b){a.process.nextTick(b)};else if(a.Promise)b=function(b){a.Promise.resolve().then(b)};else if(d){var c=[],f=document.createElement("div");(new d(function(){for(;0<c.length;)c.shift()()})).observe(f,{attributes:!0});b=function(a){c.push(a);f.setAttribute("queueStatus","1")}}return b}();return function(){function a(){this._dispatcher=new b;this._connections={};this._outgoingStaticMessages={};this._isInitialized=
!1;this._workerPostMessage({type:"\x3cworker-loaded\x3e"})}a.prototype.terminate=function(){this._connections={}};Object.defineProperty(a.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(a){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&
this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,configurable:!0});a.prototype.postMessage=function(a,b){var d=this;c(function(){d._workerMessageHandler(new MessageEvent("message",{data:a}))})};a.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)};a.prototype.addEventListener=function(a,b,c){this._dispatcher.addEventListener(a,b,c)};a.prototype.removeEventListener=function(a,b,c){this._dispatcher.removeEventListener(a,
b,c)};a.prototype._workerPostMessage=function(a,b){var d=this;c(function(){d.dispatchEvent(new MessageEvent("message",{data:a}))})};a.prototype._workerMessageHandler=function(a){var b=this,c=a.data;if(c){var d=c.connection,h=c.type;if("\x3cconfigure\x3e"===h)this._isInitialized||this._workerPostMessage({type:"\x3cworker-configured\x3e"});else if("\x3copen-connection\x3e"===h){a=c.data.path;var m=c.id;this._connections[d]?this._workerPostMessage({type:"\x3cresponse\x3e",id:m,connection:d}):g(["./WorkerConnection",
a],function(a,c){b._connections[d]=new a(c,{postMessage:function(a,c){return b._workerPostMessage(a,c)}},d);b._workerPostMessage({type:"\x3cresponse\x3e",id:m,data:{connection:d},error:void 0})})}else"\x3cclose-connection\x3e"===h?this._connections[d]&&delete this._connections[d]:"\x3cstatic-message\x3e"===h?(a=c.id,this._outgoingStaticMessages[a]&&(h=this._outgoingStaticMessages[a],delete this._outgoingStaticMessages[a],c.error?h.reject(c.error):h.resolve(c.data))):h&&(c=this._connections[d])&&c.proxy.message(a)}};
return a}()})},"esri/layers/vectorTiles/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(g,m,a){function b(d,c){if(Array.isArray(c)){var h=new a;d(c,function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];h.resolve(a)});return h.promise}return b(d,[c]).then(function(a){return a[0]})}m.when=b;m.getAbsMid=function(a,b,h){return b.toAbsMid?b.toAbsMid(a):h.id.replace(/\/[^\/]*$/ig,"/")+a}})},"esri/layers/vectorTiles/views/2d/layers/support/TileKey":function(){define(["require",
"exports"],function(g,m){return function(){function a(a,d,c,h){this.level=a;this.row=d;this.col=c;this.world=h}a.from=function(b,d,c,h){var g=typeof b;return"object"===g?b:"string"===g?a.fromId(b):new a(b,d,c,h)};a.fromId=function(b){b=b.split("/");var d=b[1],c=b[2],h=b[3];return new a(parseFloat(b[0]),parseFloat(d),parseFloat(c),parseFloat(h))};a.getId=function(a,d,c,h){return"object"===typeof a?a.level+"/"+a.row+"/"+a.col+"/"+a.world:a+"/"+d+"/"+c+"/"+h};Object.defineProperty(a.prototype,"id",{get:function(){return a.getId(this)},
enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/vectorTiles/TileIndex":function(){define(["require","exports","../2d/layers/support/TileKey"],function(g,m,a){return function(){function b(a){if(!("index"in a))throw Error("The tilemap is missing the 'index' property.");this._tilemap=a.index}b.prototype.dataKey=function(b){var c=[b];if(0>b.level||0>b.row||0>b.col||0<b.row>>b.level||0<b.col>>b.level)return null;for(;0!==b.level;)b=new a(b.level-1,b.row>>1,b.col>>1,b.world),
c.push(b);b=this._tilemap;var h=c.pop(),g,f;if(1===b)return h;for(;c.length;){g=c.pop();f=h.level+1;var e=2*h.row,m=2*h.col;f=[a.getId(f,e,m,g.world),a.getId(f,e,m+1,g.world),a.getId(f,e+1,m,g.world),a.getId(f,e+1,m+1,g.world)].indexOf(g.id);if(b)if(0===b[f]){h=null;break}else if(1===b[f]){h=g;break}else h=g,b=b[f]}return h};b.prototype.forEach=function(a,b,h,g,f){this._callback=f;this._maxLevel=b+a;this._forEach(this._tilemap,b,h,g)};b.prototype._forEach=function(a,b,h,g){0!==a&&(this._callback(b,
h,g),b!==this._maxLevel&&"object"===typeof a&&(this._forEach(a[0],b+1,2*h,2*g),this._forEach(a[1],b+1,2*h,2*g+1),this._forEach(a[2],b+1,2*h+1,2*g),this._forEach(a[3],b+1,2*h+1,2*g+1)))};return b}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteMosaic":function(){define(["require","exports","./Rect","./RectangleBinPack","../webgl/Texture"],function(g,m,a,b,d){return function(){function c(a,c){this._height=this._width=0;this._mosaicRects={};this._dirty=!1;this.pixelRatio=1;this._width=a;this._height=
c;this._binPack=new b(a,c)}Object.defineProperty(c.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});c.prototype.setSpriteSource=function(a){this._dispose();this.pixelRatio=a.devicePixelRatio;this._mosaicData||(this._binPack=new b(this._width,this._height),this._mosaicData=new Uint32Array(Math.floor(this._width)*Math.floor(this._height)));this._sprites=
a};c.prototype.getSpriteItem=function(a,b){void 0===b&&(b=!1);var c=this._mosaicRects[a];if(c)return c;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;var d=this._sprites.getSpritePosition(a);if(!d||!d.width||!d.height)return null;var g=this._allocateImage(d.width,d.height);if(0>=g.width)return null;c={rect:g,width:d.width,height:d.height,sdf:d.sdf,pixelRatio:d.pixelRatio};this._copy(g,d,b);return this._mosaicRects[a]=c};c.prototype.getSpriteItems=function(a){for(var b={},c=0;c<
a.length;c++){var d=a[c];b[d]=this.getSpriteItem(d)}return b};c.prototype.getMosaicItemPosition=function(a,b){var c=this.getSpriteItem(a,b),d=c&&c.rect;if(!d)return null;d.width=c.width;d.height=c.height;return{size:[c.width,c.height],tl:[(d.x+1)/this._width,(d.y+1)/this._height],br:[(d.x+1+c.width)/this._width,(d.y+1+c.height)/this._height]}};c.prototype.bind=function(a,b,c){void 0===c&&(c=0);this._texture||(this._texture=new d(a,{pixelFormat:6408,dataType:5121,width:this._width,height:this._height},
new Uint8Array(this._mosaicData.buffer)));this._texture.setSamplingMode(b);a.bindTexture(this._texture,c);this._dirty&&this._texture.setData(new Uint8Array(this._mosaicData.buffer));this._dirty=!1};c._copyBits=function(a,b,c,d,g,m,u,t,w,v,x){var B=d*b+c;u=t*m+u;if(x){u-=m;for(x=-1;x<=v;x++,B=((x+v)%v+d)*b+c,u+=m)for(t=-1;t<=w;t++)g[u+t]=a[B+(t+w)%w]}else for(x=0;x<v;x++){for(t=0;t<w;t++)g[u+t]=a[B+t];B+=b;u+=m}};c.prototype._copy=function(a,b,d){if(this._sprites&&"loaded"===this._sprites.loadStatus){var e=
new Uint32Array(this._sprites.image.buffer);c._copyBits(e,this._sprites.width,b.x,b.y,this._mosaicData,this._width,a.x+1,a.y+1,b.width,b.height,d);this._dirty=!0}};c.prototype._allocateImage=function(b,c){b+=2;c+=2;var d=this._binPack.allocate(b+(b%4?4-b%4:0),c+(c%4?4-c%4:0));0>=d.width&&(d=new a(0,0,0,0));return d};c.prototype._dispose=function(){this._binPack=this._mosaicData=null;this._mosaicRects={};this._dirty=!0};return c}()})},"esri/layers/vectorTiles/views/vectorTiles/Rect":function(){define(["require",
"exports"],function(g,m){return function(){function a(a,d,c,h){void 0===a&&(a=0);void 0===d&&(d=0);void 0===c&&(c=0);void 0===h&&(h=0);this.x=a;this.y=d;this.width=c;this.height=h}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/vectorTiles/RectangleBinPack":function(){define(["require","exports","./Rect"],function(g,m,a){return function(){function b(b,c){this._height=this._width=
0;this._free=[];this._width=b;this._height=c;this._free.push(new a(0,0,b,c))}b.prototype.allocate=function(b,c){for(var h=null,g=-1,f=0;f<this._free.length;++f){var e=this._free[f];if(b<=e.width&&c<=e.height&&(null===h||e.y<=h.y&&e.x<=h.x))h=e,g=f}if(null===h)return new a;this._free.splice(g,1);h.width<h.height?(h.width>b&&this._free.push(new a(h.x+b,h.y,h.width-b,c)),h.height>c&&this._free.push(new a(h.x,h.y+c,h.width,h.height-c))):(h.width>b&&this._free.push(new a(h.x+b,h.y,h.width-b,h.height)),
h.height>c&&this._free.push(new a(h.x,h.y+c,b,h.height-c)));return new a(h.x,h.y,b,c)};b.prototype.release=function(a){for(var b=0;b<this._free.length;++b){var h=this._free[b];if(h.y===a.y&&h.height===a.height&&h.x+h.width===a.x)h.width+=a.width;else if(h.x===a.x&&h.width===a.width&&h.y+h.height===a.y)h.height+=a.height;else if(a.y===h.y&&a.height===h.height&&a.x+a.width===h.x)h.x=a.x,h.width+=a.width;else if(a.x===h.x&&a.width===h.width&&a.y+a.height===h.y)h.y=a.y,h.height+=a.height;else continue;
this._free.splice(b,1);this.release(a)}this._free.push(a)};return b}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteSource":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojo/Deferred dojo/promise/all ../../request ../../kernel ../../core/promiseUtils".split(" "),function(g,m,a,b,d,c,h,n,f){return function(){function a(b,c){this.baseURL=b;this.devicePixelRatio=c;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=
null;this.loadStatus="not-loaded"}a.prototype.getSpritePosition=function(a){return this._spritesData[a]};a.prototype.load=function(){var a=this;this.loadStatus="loading";return!this.baseURL?f.resolve(this):this._loadSprites().then(function(){a.loadStatus="loaded";return a}).otherwise(function(b){a.loadStatus="failed";return a})};a.prototype._loadSprites=function(){var a=this;this._isRetina=1.15<this.devicePixelRatio?!0:!1;var b=this.baseURL,e=this._isRetina?"@2x":"",f=h(b+e+".json",{callbackParamName:"callback",
responseType:"json"}).then(function(b){a._spritesData=b.data}),g=new d,m=new Image;m.crossOrigin="anonymous";m.onload=function(){m.onload=null;a.width=m.width;a.height=m.height;var b=document.createElement("canvas");b.width=m.width;b.height=m.height;b=b.getContext("2d");b.drawImage(m,0,0,m.width,m.height);for(var b=b.getImageData(0,0,m.width,m.height),b=new Uint8Array(b.data),c,d=0;d<b.length;d+=4)c=b[d+3]/255,b[d]*=c,b[d+1]*=c,b[d+2]*=c;a.image=b;g.resolve()};b=""+b+e+".png";n.id&&(e=n.id.findCredential(b))&&
e.token&&(b+="?token\x3d"+e.token);m.src=b;return c([f,g.promise])};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphMosaic":function(){define("require exports dojo/promise/all dojo/Deferred ./Rect ../webgl/Texture ./RectangleBinPack".split(" "),function(g,m,a,b,d,c,h){return function(){function g(a,b,c){this.height=this.width=0;this._dirty=!1;this._glyphIndex={};this._rangePromises={};this.width=a;this.height=b;this._glyphSource=c;this._binPack=new h(a,b);this._glyphData=new Uint8Array(a*
b)}g.prototype.getGlyphItems=function(c,e,h){for(var g=this,n=[],m=this._glyphSource,w=new Set,v=1/256,x=0;x<h.length;x++)w.add(Math.floor(h[x]*v));var B=[];w.forEach(function(a){if(256>=a){var c=new b;B.push(c.promise);var d=e+a,f=g._rangePromises[d];f?f.push(c):(g._rangePromises[d]=[c],m.getRange(e,a).then(function(){var a=g._rangePromises[d];delete g._rangePromises[d];for(var b=0;b<a.length;b++)a[b].resolve()}))}});return a(B).then(function(a){a=g._glyphIndex[e];a||(a={},g._glyphIndex[e]=a);for(var b=
0;b<h.length;b++){var v=h[b],w=a[v];if(w)w.tileIDs.add(c),n[v]={rect:w.rect,metrics:w.metrics};else{var x=m.getGlyph(e,v);if(x&&x.metrics){var w=x.metrics,B=void 0;if(0===w.width)B=new d(0,0,0,0);else{var I=w.width+6,K=w.height+6,B=g._binPack.allocate(I+(I%4?4-I%4:0),K+(K%4?4-K%4:0));0>=B.width&&(B=new d(0,0,0,0));var x=x.bitmap,M=void 0,L=void 0;if(x)for(var G=0;G<K;G++)for(var M=I*G,L=g.width*(B.y+G)+B.x,O=0;O<I;O++)g._glyphData[L+O]=x[M+O]}I=new Set;I.add(c);a[v]={rect:B,metrics:w,tileIDs:I};n[v]=
{rect:B,metrics:w};g._dirty=!0}}}return n})};g.prototype.removeGlyphs=function(a){for(var b in this._glyphIndex){var c=this._glyphIndex[b];if(c){var d=void 0,h;for(h in c)if(d=c[h],d.tileIDs["delete"](a),0===d.tileIDs.size){for(var d=d.rect,g=void 0,n=void 0,m=0;m<d.height;m++){g=this.width*(d.y+m)+d.x;for(n=0;n<d.width;n++)this._glyphData[g+n]=0}delete c[h];this._dirty=!0}}}};g.prototype.bind=function(a,b,d){void 0===d&&(d=0);this._texture||(this._texture=new c(a,{pixelFormat:6406,dataType:5121,
width:this.width,height:this.height},new Uint8Array(this.width*this.height)));this._texture.setSamplingMode(b);a.bindTexture(this._texture,d);this._dirty&&this._texture.setData(this._glyphData);this._dirty=!1};return g}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphSource":function(){define(["require","exports","../../core/promiseUtils","../../request","../../core/pbf"],function(g,m,a,b,d){var c=function(){function a(b){this._metrics=[];for(this._bitmaps=[];b.next();)switch(b.tag()){case 1:for(var c=
b.getMessage();c.next();)switch(c.tag()){case 3:for(var d=c.getMessage(),h=void 0,g=void 0,n=void 0,m=void 0,v=void 0,x=void 0,B=void 0;d.next();)switch(d.tag()){case 1:h=d.getUInt32();break;case 2:g=d.getBytes();break;case 3:n=d.getUInt32();break;case 4:m=d.getUInt32();break;case 5:v=d.getSInt32();break;case 6:x=d.getSInt32();break;case 7:B=d.getUInt32();break;default:d.skip()}h&&(this._metrics[h]={width:n,height:m,left:v,top:x,advance:B},this._bitmaps[h]=g);break;default:c.skip()}break;default:b.skip()}}
a.prototype.getMetrics=function(a){return this._metrics[a]};a.prototype.getBitmap=function(a){return this._bitmaps[a]};return a}(),h=function(){function a(){this._ranges=[]}a.prototype.getRange=function(a){return this._ranges[a]};a.prototype.addRange=function(a,b){this._ranges[a]=b};return a}();return function(){function g(a){this._glyphInfo={};this._baseURL=a}g.prototype.getRange=function(f,e){var h=this._getFontStack(f);if(h.getRange(e))return a.resolve();var g=256*e,n=g+255,g=this._baseURL.replace("{fontstack}",
f).replace("{range}",g+"-"+n);return b(g,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(a){h.addRange(e,new c(new d(new Uint8Array(a.data),new DataView(a.data))))})};g.prototype.getGlyph=function(a,b){var c=this._getFontStack(a);if(c){var d=Math.floor(b/256);if(!(256<d))return c=c.getRange(d),!c?void 0:{metrics:c.getMetrics(b),bitmap:c.getBitmap(b)}}};g.prototype._getFontStack=function(a){var b=this._glyphInfo[a];b||(b=this._glyphInfo[a]=new h);return b};return g}()})},
"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(g,m){return function(){function a(a,d,c,h){this._tag=0;this._dataType=99;this._data=a;this._dataView=d;this._pos=c||0;this._end=h||a.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var d=this._decodeVarint();this._tag=d>>3;this._dataType=d&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=
function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){return this._decodeVarint()};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){return this._decodeSVarint()};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];
this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var a=this._dataView,d=this._pos,a=a.getUint32(d,!0)+4294967296*a.getUint32(d+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,d=this._pos,a=a.getUint32(d,!0)+4294967296*a.getInt32(d+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=
this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),d=this._pos,d=this._toString(this._data,d,d+a);this._skip(a);return d};a.prototype.getBytes=function(){var a=this._getLength(),d=this._pos,d=this._toBytes(this._data,d,d+a);this._skip(a);
return d};a.prototype.getMessage=function(){var b=this._getLength(),d=this._pos,d=new a(this._data,this._dataView,d,d+b);this._skip(b);return d};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=
function(){var a=this._data,d=this._pos,c=0,h;if(10<=this._end-d){if(h=a[d++],c|=h&127,0!==(h&128)&&(h=a[d++],c|=(h&127)<<7,0!==(h&128)&&(h=a[d++],c|=(h&127)<<14,0!==(h&128)&&(h=a[d++],c|=(h&127)<<21,0!==(h&128)&&(h=a[d++],c+=268435456*(h&127),0!==(h&128)&&(h=a[d++],c+=34359738368*(h&127),0!==(h&128)&&(h=a[d++],c+=4398046511104*(h&127),0!==(h&128)&&(h=a[d++],c+=562949953421312*(h&127),0!==(h&128)&&(h=a[d++],c+=72057594037927936*(h&127),0!==(h&128)&&(h=a[d++],c+=9223372036854775E3*(h&127),0!==(h&128)))))))))))throw Error("Varint too long!");
}else{for(var g=1;d!==this._end;){h=a[d];if(0===(h&128))break;++d;c+=(h&127)*g;g*=128}if(d===this._end)throw Error("Varint overrun!");++d;c+=h*g}this._pos=d;return c};a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,d,c){var h="",g="";for(c=Math.min(this._end,c);d<c;++d){var f=a[d];f&128?g+="%"+f.toString(16):
(h+=decodeURIComponent(g)+String.fromCharCode(f),g="")}g.length&&(h+=decodeURIComponent(g));return h};a.prototype._toBytes=function(a,d,c){c=Math.min(this._end,c);return new Uint8Array(a.buffer,d,c-d)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileDisplayObject":function(){define("require exports ../../core/tsSupport/extendsHelper ../webgl/BufferObject ../2d/engine/DisplayObject ../../core/libs/gl-matrix/vec2 ../../core/libs/gl-matrix/mat4 ./RenderBucket".split(" "),function(g,
m,a,b,d,c,h,n){return function(d){function e(a,b,e,g,n,m,x,B,A,C,z){d.call(this);this._renderBuckets=[];this._symbolUpdateData=this._vectorTileData=null;this.topLeft=[0,0];this.bottomRight=[0,0];this.tileTransform={transform:Float32Array[16],displayCoord:Float32Array[2]};this.stencilData={mask:0,reference:0};this.key=a;this.refKey=b;this.topLeft[0]=e[0];this.topLeft[1]=e[1];this.bottomRight[0]=e[2];this.bottomRight[1]=e[3];this.widthInPixels=g;this.coordRange=n;this.rotation=m;this._vectorTileData=
x;this.styleLayers=B;this._glyphsMosaic=A;this.workerID=C;this._connection=z;this.id=a.id;this.status=3;this.tileTransform.transform=h.create();this.tileTransform.displayCoord=c.create()}a(e,d);e.prototype.updateSymbolData=function(a){a&&(this._symbolUpdateData=a,this.requestRender())};e.prototype.dispose=function(){-1!==this.workerID&&(this._connection&&6!==this.status&&7!==this.status)&&this._connection.broadcast("destructTileData",{key:this.id,worker:this.workerID},[]);this.polygonTrianglesVertexArrayObject&&
(this.polygonTrianglesVertexArrayObject.dispose(),this.polygonTrianglesVertexArrayObject=null);this.polygonOutlineVertexArrayObject&&(this.polygonOutlineVertexArrayObject.dispose(),this.polygonOutlineVertexArrayObject=null);this.lineTrianglesVertexArrayObject&&(this.lineTrianglesVertexArrayObject.dispose(),this.lineTrianglesVertexArrayObject=null);this.lineJoinsVertexArrayObject&&(this.lineJoinsVertexArrayObject.dispose(),this.lineJoinsVertexArrayObject=null);this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),
this.iconVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.polygonTrianglesVertexBuffer&&(this.polygonTrianglesVertexBuffer.dispose(),this.polygonTrianglesVertexBuffer=null);this.polygonTrianglesIndexBuffer&&(this.polygonTrianglesIndexBuffer.dispose(),this.polygonTrianglesIndexBuffer=null);this.polygonOutlinesVertexBuffer&&(this.polygonOutlinesVertexBuffer.dispose(),this.polygonOutlinesVertexBuffer=null);this.polygonOutlinesIndexBuffer&&
(this.polygonOutlinesIndexBuffer.dispose(),this.polygonOutlinesIndexBuffer=null);this.lineVertexBuffer&&(this.lineVertexBuffer.dispose(),this.lineVertexBuffer=null);this.lineTrianglesIndexBuffer&&(this.lineTrianglesIndexBuffer.dispose(),this.lineTrianglesIndexBuffer=null);this.lineJoinVertexBuffer&&(this.lineJoinVertexBuffer.dispose(),this.lineJoinVertexBuffer=null);this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),
this.iconIndexBuffer=null);this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null);this._renderBuckets=[];this.status=7};e.prototype.attach=function(a){this.status=3;if(!this._vectorTileData)return!1;if(0===this._renderBuckets.length)for(var c=new Uint32Array(this._vectorTileData.bucketDataInfo),d=c.length,e=0;e<d;){var f=c[e],h=c[e+1];0===h?(h=new n.BackgroundRenderBucket,h.layerID=f,this._renderBuckets.push(h),
e+=2):1===h?(h=new n.FillRenderBucket,h.layerID=f,h.triangleElementStart=c[e+2],h.triangleElementCount=c[e+3],h.outlineElementStart=c[e+4],h.outlineElementCount=c[e+5],this._renderBuckets.push(h),e+=6):2===h?(h=new n.LineRenderBucket,h.layerID=f,h.triangleElementStart=c[e+2],h.triangleElementCount=c[e+3],h.joinStart=c[e+4],h.joinCount=c[e+5],this._renderBuckets.push(h),e+=6):3===h&&(h=new n.SymbolRenderBucket,h.layerID=f,h.markerElementStart=c[e+2],h.marketElementCount=c[e+3],h.textElementStart=c[e+
4],h.textElementCount=c[e+5],h.isSDF=0!==c[e+6],this._renderBuckets.push(h),e+=7)}c=a.context;a=a.budget;d=new Uint32Array(this._vectorTileData.bufferDataInfo);e=d.length;for(h=f=0;h<e;h+=2,f++){var g=d[h],m=d[h+1];if(!(0>=m||0===this._vectorTileData.bufferData[f].byteLength)){if(a&&a.done)return!1;switch(g){case 2:this.polygonTrianglesVertexBuffer||(this.polygonTrianglesVertexBuffer=b.createVertex(c,35044,this._vectorTileData.bufferData[f]));break;case 6:this.polygonTrianglesIndexBuffer||(this.polygonTrianglesIndexBuffer=
b.createIndex(c,35044,new Uint32Array(this._vectorTileData.bufferData[f],0,m/4)));break;case 3:this.polygonOutlinesVertexBuffer||(this.polygonOutlinesVertexBuffer=b.createVertex(c,35044,this._vectorTileData.bufferData[f]));break;case 7:this.polygonOutlinesIndexBuffer||(this.polygonOutlinesIndexBuffer=b.createIndex(c,35044,new Uint32Array(this._vectorTileData.bufferData[f],0,m/4)));break;case 0:this.lineVertexBuffer||(this.lineVertexBuffer=b.createVertex(c,35044,this._vectorTileData.bufferData[f]));
break;case 8:this.lineTrianglesIndexBuffer||(this.lineTrianglesIndexBuffer=b.createIndex(c,35044,this._vectorTileData.bufferData[f]));break;case 1:this.lineJoinVertexBuffer||(this.lineJoinVertexBuffer=b.createVertex(c,35044,this._vectorTileData.bufferData[f]));break;case 4:this.iconVertexBuffer||(this.iconVertexBuffer=b.createVertex(c,35044,this._vectorTileData.bufferData[f]));break;case 9:this.iconIndexBuffer||(this.iconIndexBuffer=b.createIndex(c,35044,new Uint32Array(this._vectorTileData.bufferData[f],
0,m/4)));break;case 5:this.textVertexBuffer||(this.textVertexBuffer=b.createVertex(c,35044,this._vectorTileData.bufferData[f]));break;case 10:this.textIndexBuffer||(this.textIndexBuffer=b.createIndex(c,35044,new Uint32Array(this._vectorTileData.bufferData[f],0,m/4)))}}}this.status=4;return!0};e.prototype.detach=function(a){};e.prototype.render=function(a){if(this.visible&&4===this.status){var b=a.context,c=a.renderer;if(b&&c){var d=a.drawphase;this._symbolUpdateData&&this._updateSymbolData(a);b.setStencilFunction(514,
this.stencilData.reference,this.stencilData.mask);var e=this.styleLayers,f=void 0!==a.layerOpacity?a.layerOpacity:1;if(0!==f){var h,g=this._renderBuckets.length,n=0;if(0===d)for(n=g-1;0<=n;n--)h=this._renderBuckets[n],3!==h.type&&h.hasData()&&c.renderBucket(b,h,a.displayLevel,a.requiredLevel,d,this,e.layers[h.layerID],f);else for(n=0;n<g;n++)h=this._renderBuckets[n],h.hasData()&&c.renderBucket(b,h,a.displayLevel,a.requiredLevel,d,this,e.layers[h.layerID],f)}}}};e.prototype._updateSymbolData=function(a){var c=
new Uint32Array(this._symbolUpdateData.bucketDataInfo),d=c.length;if(0===d)return this._symbolUpdateData=null,!0;if(1>a.budget.remaining)return this.requestRender(),!1;a=a.context;a.bindVAO(null);for(var e=new Uint32Array(this._symbolUpdateData.bufferDataInfo),f=e.length,h=0,g=0;g<f;g+=2,h++){var m=e[g],A=e[g+1];if(!(0>=A||0===this._symbolUpdateData.bufferData[h].byteLength))switch(m){case 4:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconVertexBuffer=
b.createVertex(a,35044,this._symbolUpdateData.bufferData[h]);break;case 9:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.iconIndexBuffer=b.createIndex(a,35044,new Uint32Array(this._symbolUpdateData.bufferData[h],0,A/4));break;case 5:this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textVertexBuffer=b.createVertex(a,35044,this._symbolUpdateData.bufferData[h]);break;case 10:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),
this.textIndexBuffer=null),this.textIndexBuffer=b.createIndex(a,35044,new Uint32Array(this._symbolUpdateData.bufferData[h],0,A/4))}}a=0;for(e=this._renderBuckets.length;a<e;a++)this._renderBuckets[a]instanceof n.SymbolRenderBucket&&(f=this._renderBuckets[a],f.markerElementStart=0,f.marketElementCount=0,f.textElementStart=0,f.textElementCount=0);for(f=0;f<d;){g=c[f];h=-1;a=0;for(e=this._renderBuckets.length;a<e;a++)if(this._renderBuckets[a].layerID===g){h=a;break}if(a=this._renderBuckets[h])a.markerElementStart=
c[f+2],a.marketElementCount=c[f+3],a.textElementStart=c[f+4],a.textElementCount=c[f+5];f+=7}this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this._symbolUpdateData=null;return!0};return e}(d)})},"esri/layers/vectorTiles/views/vectorTiles/RenderBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper"],
function(g,m,a,b){g=function(){return function(a){this.type=a}}();m.RenderBucket=g;b=function(b){function c(){b.call(this,2);this.joinCount=this.joinStart=this.triangleElementCount=this.triangleElementStart=0}a(c,b);c.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.joinCount};return c}(g);m.LineRenderBucket=b;b=function(b){function c(){b.call(this,1);this.outlineElementCount=this.outlineElementStart=this.triangleElementCount=this.triangleElementStart=0}a(c,b);c.prototype.hasData=
function(){return 0<this.triangleElementCount||0<this.outlineElementCount};return c}(g);m.FillRenderBucket=b;b=function(b){function c(){b.call(this,3);this.textElementCount=this.textElementStart=this.marketElementCount=this.markerElementStart=0;this.isSDF=!1}a(c,b);c.prototype.hasData=function(){return 0<this.marketElementCount||0<this.textElementCount};return c}(g);m.SymbolRenderBucket=b;g=function(b){function c(){b.call(this,0)}a(c,b);c.prototype.hasData=function(){return!0};return c}(g);m.BackgroundRenderBucket=
g})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper ./../math/vec2 ./../math/mat2d dojo/text!./webgl/stencil.vs.glsl dojo/text!./webgl/stencil.fs.glsl ./webgl/BitBlitRenderer ../../support/screenshotUtils ../../../core/promiseUtils ../math/common ./Container ../../webgl/RenderingContext ../../webgl/FramebufferObject ../../webgl/webgl-utils ../../webgl/Program ../../webgl/VertexArrayObject ../../webgl/BufferObject".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B){function A(a){return{budget:a.budget,state:a.state,devicePixelRatio:a.devicePixelRatio,stationary:a.stationary}}var C={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(g){function m(){g.apply(this,arguments);this._clipData=new Float32Array(8);this._upperLeft=b.create();this._upperRight=b.create();this._lowerLeft=b.create();this._lowerRight=b.create();this._mat2=d.create();this._clipRendererInitialized=!1}a(m,g);m.prototype.createElement=
function(){var a=document.createElement("canvas");a.setAttribute("class","esri-display-object");return a};m.prototype.setElement=function(a){this.element=a};m.prototype.attach=function(a){this._resizeCanvas(a);var b=w.setupWebGL(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0});this._renderingContext=new u(b[0]);this.attached=!0;this._cachedRenderParams=A(a);return g.prototype.attach.call(this,a)};m.prototype.detach=function(a){g.prototype.detach.call(this,a);this._cachedRenderParams=this._renderingContext=
null};m.prototype.beforeRenderChildren=function(a,c){var e=a.state;if(!e.spatialReference||!(e.spatialReference._isWrappable?e.spatialReference._isWrappable():e.spatialReference.isWrappable))this._clipFrame=!1;else{var f=e.width,h=e.height,g=e.rotation,n=this._renderingContext,f=f*a.devicePixelRatio,h=h*a.devicePixelRatio,m=p.toRadian(g),s=Math.abs(Math.cos(m)),u=Math.abs(Math.sin(m)),v=Math.round(f*s+h*u),w=Math.round(e.worldScreenWidth);if(v<=w)this._clipFrame=!1;else{if(!this._clipFBO||this._clipFBO.width!==
f||this._clipFBO.height!==h)this._clipFBO=new t(n,{colorTarget:0,depthStencilTarget:3,width:f,height:h});var x=0.5*f,A=0.5*h,v=1/f,e=1/h,w=0.5*w*a.devicePixelRatio,q=0.5*(f*u+h*s),f=this._upperLeft,s=this._upperRight,u=this._lowerLeft,k=this._lowerRight;b.set(f,-w,-q);b.set(s,w,-q);b.set(u,-w,q);b.set(k,w,q);d.identity(this._mat2);d.translate(this._mat2,this._mat2,[x,A]);0!==g&&d.rotate(this._mat2,this._mat2,m);b.transformMat2d(f,f,this._mat2);b.transformMat2d(s,s,this._mat2);b.transformMat2d(u,u,
this._mat2);b.transformMat2d(k,k,this._mat2);g=this._clipData;g.set([2*u[0]*v-1,2*(h-u[1])*e-1,2*k[0]*v-1,2*(h-k[1])*e-1,2*f[0]*v-1,2*(h-f[1])*e-1,2*s[0]*v-1,2*(h-s[1])*e-1]);this._clipRendererInitialized||this._initializeClipRenderer(n);this._clipVBO.setData(g);n.bindFramebuffer(this._clipFBO);n.setDepthWriteEnabled(!0);n.setStencilWriteMask(255);n.setClearColor(0,0,0,0);n.setClearDepth(1);n.setClearStencil(0);n.clear(n.gl.COLOR_BUFFER_BIT|n.gl.DEPTH_BUFFER_BIT|n.gl.STENCIL_BUFFER_BIT);this._clipFrame=
!0}}};m.prototype.afterRenderChildren=function(a,b){if(this._clipFrame&&this._clipRendererInitialized){var c=this._renderingContext;c.bindFramebuffer();c.bindVAO(this._clipVAO);c.bindProgram(this._clipStencilProgram);c.setDepthWriteEnabled(!1);c.setDepthTestEnabled(!1);c.setStencilTestEnabled(!0);c.setBlendingEnabled(!1);c.setColorMask(!1,!1,!1,!1);c.setStencilOp(7680,7680,7681);c.setStencilWriteMask(255);c.setStencilFunction(519,1,255);c.drawElements(4,6,5123,0);c.bindVAO();c.setColorMask(!0,!0,
!0,!0);c.setBlendingEnabled(!0);c.setStencilWriteMask(255);c.setStencilFunction(514,1,255);this._blitRenderer.render(c,this._clipFBO.colorTexture,9728,1);c.setStencilTestEnabled(!1)}};m.prototype.render=function(a){var b=this.element.style;this.visible?(b.display="block",b.opacity=""+this.opacity,this._resizeCanvas(a),g.prototype.render.call(this,a),this._cachedRenderParams=A(a)):b.display="none"};m.prototype.takeScreenshot=function(a){var b=this._cachedRenderParams.devicePixelRatio,c=b*this._cachedRenderParams.state.width,
d=b*this._cachedRenderParams.state.height,h=0,g=0,n=c,m=d,p=c,s=d;if(p=a.area)h=b*p.x,g=b*p.y,n=b*p.width,m=b*p.height;void 0!==a.width&&void 0!==a.height?(p=a.width/a.height,m*p<n?(p*=m,h+=Math.floor((n-p)/2),n=Math.floor(p)):(p=n/p,g+=Math.floor((m-p)/2),m=Math.floor(p)),p=a.width,s=a.height):(p=n,s=m);b=document.createElement("canvas");b.width=p;b.height=s;var u=b.getContext("2d"),v=new Uint8Array(4*n*m),w=this._renderingContext,x=t.create(w,{colorTarget:1,depthStencilTarget:3,width:c,height:d});
w.bindFramebuffer(x);w.setViewport(0,0,c,d);this._cachedRenderParams.budget&&this._cachedRenderParams.budget.reset(Number.MAX_VALUE);var q=this._cachedRenderParams,k=this._renderingContext.gl;this._renderingContext.setClearColor(1,1,1,1);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT|k.STENCIL_BUFFER_BIT);q.context=this._renderingContext;this.renderChildren(q);x.readPixels(h,d-(g+m),n,m,6408,5121,
v);w.bindFramebuffer();w=u.getImageData(0,0,p,s);if(0!==h||0!==g||n!==c||m!==d||p!==c||s!==d)f.resampleHermite(v,n,m,w.data,p,s,!0);else{for(var c=m-1,d=0,n=4*n,r=k=q=x=m=g=h=void 0;d<c;){k=d*n;r=c*n;for(h=0;h<n;h+=4)g=v[k+h],m=v[k+h+1],x=v[k+h+2],q=v[k+h+3],v[k+h]=v[r+h],v[k+h+1]=v[r+h+1],v[k+h+2]=v[r+h+2],v[k+h+3]=v[r+h+3],v[r+h]=g,v[r+h+1]=m,v[r+h+2]=x,v[r+h+3]=q;d++;c--}n=w.data;c=0;for(d=v.length;c<d;c++)n[c]=v[c]}u.putImageData(w,0,0);u=C[a.format?a.format.toLowerCase():"png"];v=1;void 0!==
a.quality&&(v=a.quality/100);a=b.toDataURL(u,v);return e.resolve({dataURL:a,x:0,y:0,width:p,height:s})};m.prototype.prepareChildrenRenderParameters=function(a){if(!this.attached||!this._renderingContext)return null;var b=this._renderingContext,c=b.gl;b.setDepthWriteEnabled(!0);b.setStencilWriteMask(255);b.setClearColor(0,0,0,0);b.setClearDepth(1);b.setClearStencil(0);b.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT|c.STENCIL_BUFFER_BIT);b.setViewport(0,0,this.element.width,this.element.height);b.setDepthWriteEnabled(!1);
a.context=b;return a};m.prototype.attachChild=function(a,b){return a.attach(b)};m.prototype.detachChild=function(a,b){return a.detach(b)};m.prototype.renderChild=function(a,b){return a.render(b)};m.prototype._resizeCanvas=function(a){var b=this.element,c=b.style,d=a.state,e=a.devicePixelRatio;a=d.width*e;e*=d.height;if(b.width!==a||b.height!==e)b.width=a,b.height=e,c.width=d.width+"px",c.height=d.height+"px"};m.prototype._initializeClipRenderer=function(a){if(this._clipRendererInitialized)return!0;
this._blitRenderer=new n;var b={a_pos:0},d=new v(a,c,h,b);if(!d)return!1;var e=B.createVertex(a,35040,32),f=new Uint16Array([0,1,2,2,1,3]),f=B.createIndex(a,35044,f);a=new x(a,b,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:e},f);this._clipStencilProgram=d;this._clipVBO=e;this._clipVAO=a;return this._clipRendererInitialized=!0};return m}(s)})},"esri/layers/vectorTiles/views/2d/math/vec2":function(){define(["./common"],function(g){var m=g.GLMAT_ARRAY_TYPE,
a=g.GLMAT_RANDOM,b={create:function(){var a=new m(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new m(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var h=new m(2);h[0]=a;h[1]=b;return h},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,h){a[0]=b;a[1]=h;return a},add:function(a,b,h){a[0]=b[0]+h[0];a[1]=b[1]+h[1];return a},subtract:function(a,b,h){a[0]=b[0]-h[0];a[1]=b[1]-h[1];return a}};b.sub=b.subtract;b.multiply=function(a,b,h){a[0]=b[0]*h[0];a[1]=b[1]*h[1];return a};
b.mul=b.multiply;b.divide=function(a,b,h){a[0]=b[0]/h[0];a[1]=b[1]/h[1];return a};b.div=b.divide;b.min=function(a,b,h){a[0]=Math.min(b[0],h[0]);a[1]=Math.min(b[1],h[1]);return a};b.max=function(a,b,h){a[0]=Math.max(b[0],h[0]);a[1]=Math.max(b[1],h[1]);return a};b.scale=function(a,b,h){a[0]=b[0]*h;a[1]=b[1]*h;return a};b.scaleAndAdd=function(a,b,h,g){a[0]=b[0]+h[0]*g;a[1]=b[1]+h[1]*g;return a};b.distance=function(a,b){var h=b[0]-a[0],g=b[1]-a[1];return Math.sqrt(h*h+g*g)};b.dist=b.distance;b.squaredDistance=
function(a,b){var h=b[0]-a[0],g=b[1]-a[1];return h*h+g*g};b.sqrDist=b.squaredDistance;b.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};b.len=b.length;b.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};b.sqrLen=b.squaredLength;b.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};b.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};b.normalize=function(a,b){var h=b[0],g=b[1],h=h*h+g*g;0<h&&(h=1/Math.sqrt(h),a[0]=b[0]*h,a[1]=b[1]*h);return a};b.dot=function(a,b){return a[0]*
b[0]+a[1]*b[1]};b.cross=function(a,b,h){b=b[0]*h[1]-b[1]*h[0];a[0]=a[1]=0;a[2]=b;return a};b.lerp=function(a,b,h,g){var f=b[0];b=b[1];a[0]=f+g*(h[0]-f);a[1]=b+g*(h[1]-b);return a};b.random=function(b,c){c=c||1;var h=2*a()*Math.PI;b[0]=Math.cos(h)*c;b[1]=Math.sin(h)*c;return b};b.transformMat2=function(a,b,h){var g=b[0];b=b[1];a[0]=h[0]*g+h[2]*b;a[1]=h[1]*g+h[3]*b;return a};b.transformMat2d=function(a,b,h){var g=b[0];b=b[1];a[0]=h[0]*g+h[2]*b+h[4];a[1]=h[1]*g+h[3]*b+h[5];return a};b.transformMat3=
function(a,b,h){var g=b[0];b=b[1];a[0]=h[0]*g+h[3]*b+h[6];a[1]=h[1]*g+h[4]*b+h[7];return a};b.transformMat4=function(a,b,h){var g=b[0];b=b[1];a[0]=h[0]*g+h[4]*b+h[12];a[1]=h[1]*g+h[5]*b+h[13];return a};b.forEach=function(){var a=b.create();return function(b,h,g,f,e,m){h||(h=2);g||(g=0);for(f=f?Math.min(f*h+g,b.length):b.length;g<f;g+=h)a[0]=b[g],a[1]=b[g+1],e(a,a,m),b[g]=a[0],b[g+1]=a[1];return b}}();b.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};return b})},"esri/layers/vectorTiles/views/2d/math/common":function(){define([],
function(){if(!g)var g=1E-6;if(!m)var m="undefined"!==typeof Float32Array?Float32Array:Array;if(!a)var a=Math.random;var b={GLMAT_EPSILON:g,GLMAT_ARRAY_TYPE:m,GLMAT_RANDOM:a,setMatrixArrayType:function(a){b.GLMAT_ARRAY_TYPE=a}},d=Math.PI/180,c=180/Math.PI;b.toRadian=function(a){return a*d};b.toDegree=function(a){return a*c};b.setMatrixArrayType(Array);return b})},"esri/layers/vectorTiles/views/2d/math/mat2d":function(){define(["./common"],function(g){var m=g.GLMAT_ARRAY_TYPE;g={create:function(){var a=
new m(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new m(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var d=b[0],c=b[1],h=b[2],g=b[3],f=b[4],e=b[5],m=d*g-c*h;if(!m)return null;m=1/m;a[0]=g*m;a[1]=-c*m;a[2]=-h*m;a[3]=d*m;a[4]=(h*e-g*f)*m;a[5]=(c*f-d*e)*m;return a},
determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,d){var c=b[0],h=b[1],g=b[2],f=b[3],e=b[4];b=b[5];var m=d[0],s=d[1],u=d[2],t=d[3],w=d[4];d=d[5];a[0]=c*m+g*s;a[1]=h*m+f*s;a[2]=c*u+g*t;a[3]=h*u+f*t;a[4]=c*w+g*d+e;a[5]=h*w+f*d+b;return a}};g.mul=g.multiply;g.rotate=function(a,b,d){var c=b[0],h=b[1],g=b[2],f=b[3],e=b[4];b=b[5];var m=Math.sin(d);d=Math.cos(d);a[0]=c*d+g*m;a[1]=h*d+f*m;a[2]=c*-m+g*d;a[3]=h*-m+f*d;a[4]=e;a[5]=b;return a};g.scale=function(a,b,d){var c=b[1],h=b[2],
g=b[3],f=b[4],e=b[5],m=d[0];d=d[1];a[0]=b[0]*m;a[1]=c*m;a[2]=h*d;a[3]=g*d;a[4]=f;a[5]=e;return a};g.translate=function(a,b,d){var c=b[0],h=b[1],g=b[2],f=b[3],e=b[4];b=b[5];var m=d[0];d=d[1];a[0]=c;a[1]=h;a[2]=g;a[3]=f;a[4]=c*m+g*d+e;a[5]=h*m+f*d+b;return a};g.fromRotation=function(a,b){var d=Math.sin(b),c=Math.cos(b);a[0]=c;a[1]=d;a[2]=-d;a[3]=c;a[4]=0;a[5]=0;return a};g.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];a[4]=0;a[5]=0;return a};g.fromTranslation=function(a,b){a[0]=1;a[1]=
0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};g.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};g.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return g})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports dojo/text!./bitblit.vs.glsl dojo/text!./bitblit.fs.glsl ../../../webgl/Program ../../../webgl/VertexArrayObject ../../../webgl/BufferObject".split(" "),
function(g,m,a,b,d,c,h){return function(){function g(){this._initialized=!1}g.prototype.render=function(a,b,c,d){a&&b&&(this._initialized||this._initialize(a),a.setBlendFunctionSeparate(1,771,1,771),a.bindVAO(this._vertexArrayObject),a.bindProgram(this._program),b.setSamplingMode(c),a.bindTexture(b,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",d),a.drawArrays(5,0,4),a.bindVAO())};g.prototype._initialize=function(f){if(this._initialized)return!0;var e={a_pos:0,a_tex:1},
g=new d(f,a,b,e);if(!g)return!1;var n=new Int8Array(16);n[0]=-1;n[1]=-1;n[2]=0;n[3]=0;n[4]=1;n[5]=-1;n[6]=1;n[7]=0;n[8]=-1;n[9]=1;n[10]=0;n[11]=1;n[12]=1;n[13]=1;n[14]=1;n[15]=1;f=new c(f,e,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:h.createVertex(f,35044,n)});this._program=g;this._vertexArrayObject=f;return this._initialized=!0};return g}()})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require",
"exports","dojo/_base/lang"],function(g,m,a){m.adjustScreenshotSettings=function(b,d){b=a.mixin({format:"png",quality:100},b||{});var c,h;b.includePadding?(c=d.width,h=d.height):(c=d.width-d.padding.left-d.padding.right,h=d.height-d.padding.top-d.padding.bottom);var g=c/h;void 0!==b.width&&void 0===b.height?b.height=b.width/g:void 0!==b.height&&void 0===b.width&&(b.width=g*b.height);void 0!==b.height&&(b.height=Math.floor(b.height));void 0!==b.width&&(b.width=Math.floor(b.width));!b.area&&!b.includePadding&&
(b.area={x:d.padding.left,y:d.padding.top,width:c,height:h});return b};m.resampleHermite=function(a,d,c,h,g,f,e){void 0===e&&(e=!0);var m=d/g;c/=f;for(var s=Math.ceil(m/2),u=Math.ceil(c/2),t=0;t<f;t++)for(var w=0;w<g;w++){for(var v=4*(w+(e?f-t-1:t)*g),x=0,B=0,A=0,C=0,z=0,F=0,H=0,J=(t+0.5)*c,I=Math.floor(t*c);I<(t+1)*c;I++)for(var K=Math.abs(J-(I+0.5))/u,M=(w+0.5)*m,K=K*K,L=Math.floor(w*m);L<(w+1)*m;L++){var G=Math.abs(M-(L+0.5))/s,x=Math.sqrt(K+G*G);-1<=x&&1>=x&&(x=2*x*x*x-3*x*x+1,0<x&&(G=4*(L+I*
d),H+=x*a[G+3],A+=x,255>a[G+3]&&(x=x*a[G+3]/250),C+=x*a[G],z+=x*a[G+1],F+=x*a[G+2],B+=x))}h[v]=C/B;h[v+1]=z/B;h[v+2]=F/B;h[v+3]=H/A}}})},"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define(["require","exports","./enums","./Extensions"],function(g,m,a,b){return function(){function d(a,d){this.gl=null;this._extensions=void 0;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,
modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=
0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.gl=a;this._extensions=new b(a,d);var g=a.getParameter(a.VIEWPORT);this._viewport={x:g[0],y:g[1],width:g[2],height:g[3]};g=this.extensions.textureFilterAnisotropic;this._parameters={versionString:a.getParameter(a.VERSION),
maxVertexTextureImageUnits:a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:a.getParameter(a.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:g?a.getParameter(g.MAX_TEXTURE_MAX_ANISOTROPY_EXT):void 0,maxTextureImageUnits:a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)};this.enforceState()}Object.defineProperty(d.prototype,"extensions",{get:function(){return this._extensions},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});d.prototype.setBlendingEnabled=function(a){this._blendEnabled!==a&&(!0===a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=a)};d.prototype.setBlendColor=function(a,b,d,f){if(a!==this._blendColorState.r||b!==this._blendColorState.g||d!==this._blendColorState.b||f!==this._blendColorState.a)this.gl.blendColor(a,b,d,f),
this._blendColorState.r=a,this._blendColorState.g=b,this._blendColorState.b=d,this._blendColorState.a=f};d.prototype.setBlendFunction=function(a,b){if(a!==this._blendFunctionState.srcRGB||b!==this._blendFunctionState.dstRGB)this.gl.blendFunc(a,b),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=a,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=b};d.prototype.setBlendFunctionSeparate=function(a,b,d,f){if(this._blendFunctionState.srcRGB!==a||this._blendFunctionState.srcAlpha!==
d||this._blendFunctionState.dstRGB!==b||this._blendFunctionState.dstAlpha!==f)this.gl.blendFuncSeparate(a,b,d,f),this._blendFunctionState.srcRGB=a,this._blendFunctionState.srcAlpha=d,this._blendFunctionState.dstRGB=b,this._blendFunctionState.dstAlpha=f};d.prototype.setBlendEquation=function(a){this._blendEquationState.mode!==a&&(this.gl.blendEquation(a),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=a)};d.prototype.setBlendEquationSeparate=function(a,b){if(this._blendEquationState.mode!==
a||this._blendEquationState.modeAlpha!==b)this.gl.blendEquationSeparate(a,b),this._blendEquationState.mode=a,this._blendEquationState.modeAlpha=b};d.prototype.setColorMask=function(a,b,d,f){if(this._colorMaskState.r!==a||this._colorMaskState.g!==b||this._colorMaskState.b!==d||this._colorMaskState.a!==f)this.gl.colorMask(a,b,d,f),this._colorMaskState.r=a,this._colorMaskState.g=b,this._colorMaskState.b=d,this._colorMaskState.a=f};d.prototype.setClearColor=function(a,b,d,f){if(this._clearColor.r!==a||
this._clearColor.g!==b||this._clearColor.b!==d||this._clearColor.a!==f)this.gl.clearColor(a,b,d,f),this._clearColor.r=a,this._clearColor.g=b,this._clearColor.b=d,this._clearColor.a=f};d.prototype.setFaceCullingEnabled=function(a){this._polygonCullingEnabled!==a&&(!0===a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=a)};d.prototype.setPolygonOffsetFillEnabled=function(a){this._polygonOffsetFillEnabled!==a&&(!0===a?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):
this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=a)};d.prototype.setPolygonOffset=function(a,b){if(this._polygonOffset[0]!==a||this._polygonOffset[1]!==b)this._polygonOffset[0]=a,this._polygonOffset[1]=b,this.gl.polygonOffset(a,b)};d.prototype.setCullFace=function(a){this._cullFace!==a&&(this.gl.cullFace(a),this._cullFace=a)};d.prototype.setFrontFace=function(a){this._frontFace!==a&&(this.gl.frontFace(a),this._frontFace=a)};d.prototype.setScissorTestEnabled=function(a){this._scissorTestEnabled!==
a&&(!0===a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=a)};d.prototype.setScissorRect=function(a,b,d,f){if(this._scissorRect.x!==a||this._scissorRect.y!==b||this._scissorRect.width!==d||this._scissorRect.height!==f)this.gl.scissor(a,b,d,f),this._scissorRect.x=a,this._scissorRect.y=b,this._scissorRect.width=d,this._scissorRect.height=f};d.prototype.setDepthTestEnabled=function(a){this._depthTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.DEPTH_TEST):
this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=a)};d.prototype.setClearDepth=function(a){this._clearDepth!==a&&(this.gl.clearDepth(a),this._clearDepth=a)};d.prototype.setDepthFunction=function(a){this._depthFunction!==a&&(this.gl.depthFunc(a),this._depthFunction=a)};d.prototype.setDepthWriteEnabled=function(a){this._depthWriteEnabled!==a&&(this.gl.depthMask(a),this._depthWriteEnabled=a)};d.prototype.setDepthRange=function(a,b){if(this._depthRange.zNear!==a||this._depthRange.zFar!==b)this.gl.depthRange(a,
b),this._depthRange.zNear=a,this._depthRange.zFar=b};d.prototype.setStencilTestEnabled=function(a){this._stencilTestEnabled!==a&&(!0===a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=a)};d.prototype.setClearStencil=function(a){a!==this._clearStencil&&(this.gl.clearStencil(a),this._clearStencil=a)};d.prototype.setStencilFunction=function(a,b,d){if(this._stencilFunction.func!==a||this._stencilFunction.ref!==b||this._stencilFunction.mask!==d)this.gl.stencilFunc(a,
b,d),this._stencilFunction.face=1032,this._stencilFunction.func=a,this._stencilFunction.ref=b,this._stencilFunction.mask=d};d.prototype.setStencilFunctionSeparate=function(a,b,d,f){if(this._stencilFunction.face!==a||this._stencilFunction.func!==b||this._stencilFunction.ref!==d||this._stencilFunction.mask!==f)this.gl.stencilFuncSeparate(a,b,d,f),this._stencilFunction.face=a,this._stencilFunction.func=b,this._stencilFunction.ref=d,this._stencilFunction.mask=f};d.prototype.setStencilWriteMask=function(a){this._stencilWriteMask!==
a&&(this.gl.stencilMask(a),this._stencilWriteMask=a)};d.prototype.setStencilOp=function(a,b,d){if(this._stencilOperation.fail!==a||this._stencilOperation.zFail!==b||this._stencilOperation.zPass!==d)this.gl.stencilOp(a,b,d),this._stencilOperation.face=1032,this._stencilOperation.fail=a,this._stencilOperation.zFail=b,this._stencilOperation.zPass=d};d.prototype.setStencilOpSeparate=function(a,b,d,f){if(this._stencilOperation.face!==a||this._stencilOperation.fail!==b||this._stencilOperation.zFail!==d||
this._stencilOperation.zPass!==f)this.gl.stencilOpSeparate(a,b,d,f),this._stencilOperation.face=a,this._stencilOperation.face=a,this._stencilOperation.fail=b,this._stencilOperation.zFail=d,this._stencilOperation.zPass=f};d.prototype.setLineWidth=function(a){var b=this._lineWidth;this._lineWidth!==a&&(this.gl.lineWidth(a),this._lineWidth=a);return b};d.prototype.setActiveTexture=function(b){var d=this._activeTextureUnit;0<=b&&b!==this._activeTextureUnit&&(this.gl.activeTexture(a.BASE_TEXTURE_UNIT+
b),this._activeTextureUnit=b);return d};d.prototype.clear=function(a){a&&this.gl.clear(a)};d.prototype.drawArrays=function(a,b,d){this.gl.drawArrays(a,b,d)};d.prototype.drawElements=function(a,b,d,f){5123===d?this.gl.drawElements(a,b,d,f):5125===d&&this._extensions.elementIndexUint&&this.gl.drawElements(a,b,d,f)};d.prototype.drawArraysInstanced=function(a,b,d,f){this._extensions.angleInstancedArrays&&this._extensions.angleInstancedArrays.drawArraysInstancedANGLE(a,b,d,f)};d.prototype.drawElementsInstanced=
function(a,b,d,f,e){this._extensions.angleInstancedArrays&&this._extensions.angleInstancedArrays.drawElementsInstancedANGLE(a,b,d,f,e)};d.prototype.setViewport=function(a,b,d,f){var e=this._viewport;if(e.x!==a||e.y!==b||e.width!==d||e.height!==f)e.x=a,e.y=b,e.width=d,e.height=f,this.gl.viewport(a,b,d,f)};d.prototype.getViewport=function(){return this._viewport};d.prototype.bindProgram=function(a){a?this._activeShaderProgram!==a&&(a.initialize(),this.gl.useProgram(a.glName),this._activeShaderProgram=
a):(this.gl.useProgram(null),this._activeShaderProgram=null)};d.prototype.bindTexture=function(a,b){void 0===b&&(b=0);-1===d._MAX_TEXTURE_IMAGE_UNITS&&(d._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));var g=this._textureUnitMap[b];this.setActiveTexture(b);null==a?(null!=g&&this.gl.bindTexture(g.descriptor.target,null),this._textureUnitMap[b]=null):g&&g.id===a.id?a.applyChanges():(this.gl.bindTexture(a.descriptor.target,a.glName),a.applyChanges(),this._textureUnitMap[b]=
a)};d.prototype.bindFramebuffer=function(a){a?this._activeFramebuffer!==a&&(a.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.glName),this._activeFramebuffer=a):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};d.prototype.bindBuffer=function(a){a&&(34962===a.bufferType?this._activeVertexBuffer=d._bindBuffer(this.gl,a,a.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=d._bindBuffer(this.gl,a,a.bufferType,this._activeIndexBuffer))};d.prototype.unbindBuffer=
function(a){34962===a?this._activeVertexBuffer=d._bindBuffer(this.gl,null,a,this._activeVertexBuffer):this._activeIndexBuffer=d._bindBuffer(this.gl,null,a,this._activeIndexBuffer)};d.prototype.bindVAO=function(a){a?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===a.id||(a.bind(),this._activeVertexArrayObject=a):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};d.prototype.getBoundTexture=function(a){return this._textureUnitMap[a]};
d.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};d.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};d.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var a=0;a<this.parameters.maxTextureImageUnits;a++)this.bindTexture(null,a);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);
this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);
this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};d.prototype.enforceState=function(){var b=this.gl,d=this._extensions.vao;d&&d.bindVertexArrayOES(null);for(var g=0;g<this.parameters.maxVertexAttributes;g++)b.disableVertexAttribArray(g);this._activeVertexBuffer?b.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):b.bindBuffer(34962,null);this._activeIndexBuffer?b.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):
b.bindBuffer(34963,null);if(d&&this._activeVertexArrayObject){if(d=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(d)}b.bindFramebuffer(b.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);b.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);b.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);!0===this._blendEnabled?b.enable(this.gl.BLEND):
b.disable(this.gl.BLEND);b.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);b.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);b.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);b.clearDepth(this._clearDepth);b.clearStencil(this._clearStencil);b.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,
this._colorMaskState.a);b.cullFace(this._cullFace);b.depthFunc(this._depthFunction);b.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST);b.depthMask(this._depthWriteEnabled);b.frontFace(this._frontFace);b.lineWidth(this._lineWidth);!0===this._polygonCullingEnabled?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE);b.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?b.enable(b.POLYGON_OFFSET_FILL):
b.disable(b.POLYGON_OFFSET_FILL);b.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?b.enable(b.SCISSOR_TEST):b.disable(b.SCISSOR_TEST);b.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);b.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?b.enable(b.STENCIL_TEST):b.disable(b.STENCIL_TEST);
b.stencilMask(this._stencilWriteMask);for(d=0;d<this.parameters.maxTextureImageUnits;d++)b.activeTexture(a.BASE_TEXTURE_UNIT+d),b.bindTexture(3553,null),(g=this._textureUnitMap[d])&&b.bindTexture(g.descriptor.target,g.glName);b.activeTexture(a.BASE_TEXTURE_UNIT+this._activeTextureUnit);b.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};d._bindBuffer=function(a,b,d,f){if(!b)return a.bindBuffer(d,null),null;if(f===b)return f;a.bindBuffer(d,b.glName);return b};
d._MAX_TEXTURE_IMAGE_UNITS=-1;return d}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require","exports"],function(g,m){m.BASE_TEXTURE_UNIT=33984})},"esri/layers/vectorTiles/views/webgl/Extensions":function(){define(["require","exports"],function(g,m){return function(){function a(a,d){this._compressedTextureS3TCInit=this._shaderTextureLODInit=this._textureFilterAnisotropicInit=this._depthTextureInit=this._elementIndexUintInit=this._standardDerivativesInit=this._angleInstancedArraysInit=
this._vaoInit=!1;this._gl=a;if(d&&d.disabledExtensions){var c=d.disabledExtensions;c.vao&&(this._vao=null,this._vaoInit=!0);c.angleInstancedArrays&&(this._angleInstancedArrays=null,this._angleInstancedArraysInit=!0);c.standardDerivatives&&(this._standardDerivatives=null,this._standardDerivativesInit=!0);c.elementIndexUint&&(this._elementIndexUint=null,this._elementIndexUintInit=!0);c.depthTexture&&(this._depthTexture=null,this._depthTextureInit=!0);c.textureFilterAnisotropic&&(this._textureFilterAnisotropic=
null,this._textureFilterAnisotropicInit=!0);c.compressedTextureS3TC&&(this._compressedTextureS3TC=null,this._compressedTextureS3TCInit=!0);c.shaderTextureLOD&&(this._shaderTextureLOD=null,this._shaderTextureLODInit=!0)}}Object.defineProperty(a.prototype,"vao",{get:function(){this._vaoInit||(this._vao=this._gl.getExtension("OES_vertex_array_object")||this._gl.getExtension("MOZ_OES_vertex_array_object")||this._gl.getExtension("WEBKIT_OES_vertex_array_object"),this._vaoInit=!0);return this._vao},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"angleInstancedArrays",{get:function(){this._angleInstancedArraysInit||(this._angleInstancedArrays=this._gl.getExtension("ANGLE_instanced_arrays"),this._angleInstancedArraysInit=!0);return this._angleInstancedArrays},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"standardDerivatives",{get:function(){this._standardDerivativesInit||(this._standardDerivatives=this._gl.getExtension("OES_standard_derivatives"),this._standardDerivativesInit=
!0);return this._standardDerivatives},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"elementIndexUint",{get:function(){this._elementIndexUintInit||(this._elementIndexUint=this._gl.getExtension("OES_element_index_uint"),this._elementIndexUintInit=!0);return this._elementIndexUint},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"depthTexture",{get:function(){this._depthTextureInit||(this._depthTexture=this._gl.getExtension("WEBGL_depth_texture")||this._gl.getExtension("MOZ_WEBGL_depth_texture")||
this._gl.getExtension("WEBKIT_WEBGL_depth_texture"),this._depthTextureInit=!0);return this._depthTexture},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"textureFilterAnisotropic",{get:function(){this._textureFilterAnisotropicInit||(this._textureFilterAnisotropic=this._gl.getExtension("EXT_texture_filter_anisotropic")||this._gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this._gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this._textureFilterAnisotropicInit=!0);
return this._textureFilterAnisotropic},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"shaderTextureLOD",{get:function(){this._shaderTextureLODInit||(this._shaderTextureLOD=this._gl.getExtension("EXT_shader_texture_lod"),this._shaderTextureLODInit=!0);return this._shaderTextureLOD},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"compressedTextureS3TC",{get:function(){this._compressedTextureS3TCInit||(this._compressedTextureS3TC=this._gl.getExtension("WEBGL_compressed_texture_s3tc"),
this._compressedTextureS3TCInit=!0);return this._compressedTextureS3TC},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require","exports","./Texture"],function(g,m,a){return function(){function b(d,c,h,g){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=d;this._desc={colorTarget:c.colorTarget,depthStencilTarget:c.depthStencilTarget,width:c.width,
height:c.height,multisampled:c.multisampled};this._id=b._nextId++;h&&(d=void 0,h instanceof a?(this._colorAttachment=h,d=h.descriptor):(d=h,this._colorAttachment=new a(this._context,d)),b._validateTextureDimensions(d,this._desc));g&&(h=void 0,g instanceof a?(this._depthStencilTexture=g,h=this._depthStencilTexture.descriptor):(h=g,this._depthStencilTexture=new a(this._context,h)),b._validateTextureDimensions(h,this._desc))}b.create=function(a,c){return new b(a,c)};b.createWithAttachments=function(a,
c,h,g){return new b(a,h,c,g)};Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof a?this._colorAttachment:null},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this._context&&this._glName&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),
this._context.gl.deleteFramebuffer(this._glName),this._glName=null)};b.prototype.attachColorTexture=function(a){if(a){b._validateTextureDimensions(a.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a.glName,0)}this._colorAttachment=a}};b.prototype.detachColorTexture=function(){var b=void 0;if(this._colorAttachment instanceof a){b=this._colorAttachment;
if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;this._context.gl.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)}this._colorAttachment=null}return b};b.prototype.attachDepthStencilTexture=function(a){if(a){b._validateTextureDimensions(a.descriptor,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;
c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,a.glName,0)}this._depthStencilTexture=a}};b.prototype.detachDepthStencilTexture=function(){var a=this._depthStencilTexture;if(a&&this._initialized){this._context.bindFramebuffer(this);var b=this._context.gl;this._context.gl.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return a};b.prototype.copyToTexture=function(a,b,h,g,f,e,m){var s=this._context;s.bindTexture(m);
s.bindFramebuffer(this);s.gl.copyTexSubImage2D(3553,0,f,e,a,b,h,g)};b.prototype.readPixels=function(a,b,h,g,f,e,m){this._context.bindFramebuffer(this);this._context.gl.readPixels(a,b,h,g,f,e,m)};b.prototype.resize=function(d,c){var h=this._desc;if(!(h.width===d&&h.height===c))if(this._initialized)h.width=d,h.height=c,this._colorAttachment instanceof a?(g=this._colorAttachment,h=g.descriptor,h.width=d,h.height=c,this._colorAttachment=new a(this._context,h),b._validateTextureDimensions(g.descriptor,
this._desc)):this._colorAttachment=null,null!=this._depthStencilTexture&&(h=this._depthStencilTexture.descriptor,h.width=d,h.height=c,this._depthStencilTexture=new a(this._context,h)),this._initialized=!1;else{h.width=d;h.height=c;if(this._colorAttachment instanceof a){var g=this._colorAttachment;g.resize(d,c)}this._depthStencilTexture&&this._depthStencilTexture.resize(d,c)}};b.prototype.initialize=function(){if(this._initialized)return!1;var b=this._context.gl,c=b.createFramebuffer(),h=this._desc;
b.bindFramebuffer(b.FRAMEBUFFER,c);if(!this._colorAttachment)if(0===h.colorTarget)this._colorAttachment=new a(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:h.width,height:h.height});else{var g=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,g);b.renderbufferStorage(b.RENDERBUFFER,b.RGBA4,h.width,h.height);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.RENDERBUFFER,g);this._colorAttachment=g}this._colorAttachment instanceof
a&&b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this._colorAttachment.glName,0);switch(h.depthStencilTarget){case 1:case 3:g=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,g);var f=1===h.depthStencilTarget?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT;b.renderbufferStorage(b.RENDERBUFFER,1===h.depthStencilTarget?b.DEPTH_COMPONENT16:b.DEPTH_STENCIL,h.width,h.height);b.framebufferRenderbuffer(b.FRAMEBUFFER,f,b.RENDERBUFFER,g);this._depthAttachment=g;break;case 2:g=
b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,g);b.renderbufferStorage(b.RENDERBUFFER,b.STENCIL_INDEX8,h.width,h.height);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.STENCIL_ATTACHMENT,b.RENDERBUFFER,g);this._stencilAttachment=g;break;case 4:this._depthStencilTexture||(this._depthStencilTexture=new a(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:h.width,height:h.height})),b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,
this._depthStencilTexture.glName,0)}b.checkFramebufferStatus(b.FRAMEBUFFER);this._glName=c;return this._initialized=!0};b.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof a){var b=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var c=this._context.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,null,0)}b.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(b=this._colorAttachment,c=this._context.gl,
this._initialized&&(this._context.bindFramebuffer(this),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(b));this._colorAttachment=null};b.prototype._disposeDepthStencilAttachments=function(){var a=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);var b=this._context.gl;b.framebufferRenderbuffer(b.FRAMEBUFFER,1===this._desc.depthStencilTarget?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,
b.RENDERBUFFER,null)}a.deleteRenderbuffer(this._depthAttachment);this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),b=this._context.gl,b.framebufferRenderbuffer(b.FRAMEBUFFER,b.STENCIL_ATTACHMENT,b.RENDERBUFFER,null)),a.deleteRenderbuffer(this._stencilAttachment),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),a=this._context.gl,a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,
a.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};b._validateTextureDimensions=function(a,b){if(!(void 0!==b.width&&0<=b.width)||!(void 0!==b.height&&0<=b.height))b.width=a.width,b.height=a.height};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/webgl/webgl-utils":function(){define([],function(){var g=function(a,d){for(var c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],h=null,g=0;g<c.length;++g){try{h=a.getContext(c[g],d)}catch(f){}if(h)break}return h},
m=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,d){return window.setTimeout(a,1E3/60)}).bind(window),a=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout).bind(window);return{create3DContext:g,setupWebGL:function(a,d){function c(c){var d=a.parentNode;
d&&(d.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+c+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}if(!window.WebGLRenderingContext)return c('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'];
var h=g(a,d);return!h?(c('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e']):[h]},detectWebGL:function(){var a;try{a=window.WebGLRenderingContext}catch(d){a=[!1,0]}var c;try{c=g(document.createElement("canvas"))}catch(h){c=
[!1,1]}return!a?[!1,0]:!c?[!1,1]:[!0,{VERSION:c.getParameter(c.VERSION),SHADING_LANGUAGE_VERSION:c.getParameter(c.SHADING_LANGUAGE_VERSION),VENDOR:c.getParameter(c.VENDOR),RENDERER:c.getParameter(c.RENDERER),EXTENSIONS:c.getSupportedExtensions(),MAX_TEXTURE_SIZE:c.getParameter(c.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:c.getParameter(c.MAX_RENDERBUFFER_SIZE),MAX_VERTEX_TEXTURE_IMAGE_UNITS:c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]},requestAnimFrame:m,cancelAnimFrame:a}})},"esri/layers/vectorTiles/views/2d/FrameBudget":function(){define(["require",
"exports","../../core/now"],function(g,m,a){return function(){function b(a){void 0===a&&(a=Number.MAX_VALUE);this._budget=this._begin=0;this.enabled=!0;this.reset(a)}b.now=function(){return a()};Object.defineProperty(b.prototype,"done",{get:function(){return this.enabled&&this.elapsed>=this._budget},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"elapsed",{get:function(){return a()-this._begin},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"remaining",{get:function(){return Math.max(this._budget-
this.elapsed,0)},enumerable:!0,configurable:!0});b.prototype.reset=function(b){void 0===b&&(b=Number.MAX_VALUE);this._begin=a();this._budget=this.enabled?b:Number.MAX_VALUE};return b}()})},"esri/layers/vectorTiles/views/2d/layers/support/TileInfoView":function(){define("require exports ./LODInfo ./TileKey ./TileSpan ./TileCoverage".split(" "),function(g,m,a,b,d,c){var h=function(){function a(b,c,d,f,h,g,m,n){this.x=b;this.ymin=c;this.ymax=d;this.invM=f;this.leftAdjust=h;this.rightAdjust=g;this.leftBound=
m;this.rightBound=n}a.create=function(b,c){b[1]>c[1]&&(d=[c,b],b=d[0],c=d[1]);var d=b[0],h=b[1],g=c[0],m=c[1],n=g-d,x=m-h,x=0!==x?n/x:0,B=(Math.ceil(h)-h)*x,A=(Math.floor(h)-h)*x;return new a(d,Math.floor(h),Math.ceil(m),x,0>n?B:A,0>n?A:B,0>n?g:d,0>n?d:g);var d};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),
n=[[0,0],[0,0],[0,0],[0,0]];return function(){function f(b,c){var d=this;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var f=b.lods.slice();f.sort(function(a,b){return b.scale-a.scale});var h=this._lodInfos=f.map(function(d){return a.create(b,d,c)});f.forEach(function(a,b){d._infoByLevel[a.level]=h[b];d._infoByScale[a.scale]=h[b];d.scales[b]=a.scale},this);this._wrap=b.spatialReference.isWrappable}f.prototype.getTileTopLeft=function(a,b){var c=this._infoByLevel[b.level];
return!c?a:c.getTileTopLeft(a,b)};f.prototype.getTileBottomRight=function(a,b){var c=this._infoByLevel[b.level];return!c?a:c.getTileBottomRight(a,b)};f.prototype.getTileResolution=function(a){a=this._infoByLevel[a.level];return!a?-1:a.resolution};f.prototype.getTileParentId=function(a){a=b.from(a);var c=this._lodInfos.indexOf(this._infoByLevel[a.level])-1;return 0>c?null:this.getTileIdAtParent(this._lodInfos[c],a)};f.prototype.getTileIdAtParent=function(a,c){var d=b.from(c),f=this._infoByLevel[d.level];
if(a.resolution<f.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+a.resolution+" is not a parent resolution of "+f.resolution);return a.resolution===f.resolution?d.id:b.getId(a.level,Math.floor(d.row*f.resolution/a.resolution+0.01),Math.floor(d.col*f.resolution/a.resolution+0.01),d.world)};f.prototype.getTileCoverage=function(a){var b=this.getClosestInfoForScale(a.scale),f=this._wrap,g;g=Infinity;var m=-Infinity,w,v,x=[];n[0][0]=n[0][1]=n[1][1]=n[3][0]=0;n[1][0]=
n[2][0]=a.size[0];n[2][1]=n[3][1]=a.size[1];for(var B=n.map(function(c){a.toMap(c,c);c[0]=b.getColumnForX(c[0]);c[1]=b.getRowForY(c[1]);return c}),A=[],C=3,z=0;4>z;z++)B[z][1]!==B[C][1]&&(C=h.create(B[z],B[C]),g=Math.min(C.ymin,g),m=Math.max(C.ymax,m),void 0===A[C.ymin]&&(A[C.ymin]=[]),A[C.ymin].push(C)),C=z;if(null==g||null==m||100<m-g)return null;for(B=[];g<m;){null!=A[g]&&(B=B.concat(A[g]));w=Infinity;v=-Infinity;for(z=B.length-1;0<=z;z--)C=B[z],w=Math.min(w,C.getLeftCol()),v=Math.max(v,C.getRightCol());
w=Math.floor(w);v=Math.floor(v);if(g>=b.first[1]&&g<=b.last[1])if(f)if(b.size[0]<b.worldSize[0]){z=Math.floor(w/b.worldSize[0]);for(C=Math.floor(v/b.worldSize[0]);z<=C;z++)x.push(new d(g,Math.max(b.getFirstColumnForWorld(z),w),Math.min(b.getLastColumnForWorld(z),v)))}else x.push(new d(g,w,v));else w>b.last[0]||v<b.first[0]||(w=Math.max(w,b.first[0]),v=Math.min(v,b.last[0]),x.push(new d(g,w,v)));g+=1;for(z=B.length-1;0<=z;z--)C=B[z],C.ymax>=g?C.incrRow():B.splice(z,1)}return new c(b,x)};f.prototype.intersects=
function(a,c){var d=b.from(c),f=this._infoByLevel[d.level],h=a.lodInfo;if(h.resolution>f.resolution){var g=b.fromId(this.getTileIdAtParent(h,d)),m=h.denormalizeCol(g.col,g.world);return a.spans.some(function(a){return a.row===g.row&&a.colFrom<=m&&a.colTo>=m})}if(h.resolution<f.resolution){var n=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]),B=n[0],A=n[1],C=
n[2],n=n[3],z=f.denormalizeCol(d.col,d.world),F=h.getColumnForX(f.getXForColumn(z)),H=h.getRowForY(f.getYForRow(d.row)),z=h.getColumnForX(f.getXForColumn(z+1))-1,f=h.getRowForY(f.getYForRow(d.row+1))-1;return!(F>n||z<C||H>A||f<B)}var J=h.denormalizeCol(d.col,d.world);return a.spans.some(function(a){return a.row===d.row&&a.colFrom<=J&&a.colTo>=J})};f.prototype.getClosestInfoForScale=function(a){var b=this.scales;this._infoByScale[a]||(a=b.reduce(function(b,c,d,f){return Math.abs(c-a)<Math.abs(b-a)?
c:b},b[0]));return this._infoByScale[a]};return f}()})},"esri/layers/vectorTiles/views/2d/layers/support/LODInfo":function(){define(["require","exports","./TileKey","../../../../geometry/support/spatialReferenceUtils"],function(g,m,a,b){function d(a,b,d){a[0]=b;a[1]=d;return a}return function(){function c(a,b,c,d,g,m,u,t,w,v,x){this.level=a;this.resolution=b;this.origin=c;this.first=d;this.last=g;this.size=m;this.norm=u;this.worldStart=t;this.worldEnd=w;this.worldSize=v;this.wrap=x}c.create=function(a,
g,f){var e=b.getInfo(a.spatialReference),m=[a.origin.x,a.origin.y],s=[a.size[0]*g.resolution,a.size[1]*g.resolution],u=[-Infinity,-Infinity],t=[Infinity,Infinity],w=[Infinity,Infinity];f&&(d(u,Math.max(0,Math.floor((f.xmin-m[0])/s[0])),Math.max(0,Math.floor((m[1]-f.ymax)/s[1]))),d(t,Math.max(0,Math.floor((f.xmax-m[0])/s[0])),Math.max(0,Math.floor((m[1]-f.ymin)/s[1]))),d(w,t[0]-u[0]+1,t[1]-u[1]+1));var v;e?(a=[Math.ceil(Math.round(2*e.origin[1]/g.resolution)/a.size[0]),w[1]],e=[Math.floor((e.origin[0]-
m[0])/s[0]),u[1]],f=[a[0]-e[0]-1,t[1]],v=!0):(e=u,f=t,a=w,v=!1);return new c(g.level,g.resolution,m,u,t,w,s,e,f,a,v)};c.prototype.normalizeCol=function(a){if(!this.wrap)return a;var b=this.worldSize[0];return 0>a?b-1-Math.abs((a+1)%b):a%b};c.prototype.denormalizeCol=function(a,b){return!this.wrap?a:this.worldSize[0]*b+a};c.prototype.getWorldForColumn=function(a){return!this.wrap?0:Math.floor(a/this.worldSize[0])};c.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};
c.prototype.getLastColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1};c.prototype.getColumnForX=function(a){return(a-this.origin[0])/this.norm[0]};c.prototype.getXForColumn=function(a){return this.origin[0]+a*this.norm[0]};c.prototype.getRowForY=function(a){return(this.origin[1]-a)/this.norm[1]};c.prototype.getYForRow=function(a){return this.origin[1]-a*this.norm[1]};c.prototype.getTileTopLeft=function(b,c){var f=a.from(c);return d(b,this.getXForColumn(this.denormalizeCol(f.col,
f.world)),this.getYForRow(f.row))};c.prototype.getTileBottomRight=function(b,c){var f=a.from(c);return d(b,this.getXForColumn(this.denormalizeCol(f.col,f.world)+1),this.getYForRow(f.row+1))};return c}()})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(g,m,a){m.isGeographic=function(b){return b.wkid?null==a[b.wkid]:b.wkt?/^\s*GEOGCS/i.test(b.wkt):!1};m.getInfo=function(a){return a.wkid?b[a.wkid]:null};g=[-2.0037508342788905E7,
2.0037508342788905E7];m=[-2.0037508342787E7,2.0037508342787E7];var b={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:g,origin:m,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:g,origin:m,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:g,origin:m,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:g,origin:m,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define([],function(){var g,m={values:[1,0.3048,0.3048006096012192,0.3047972654,0.9143917962,0.201166195164,0.9143984146160287,0.3047994715386762,20.11676512155263,20.11678249437587,0.9143985307444408,0.91439523,0.3047997101815088,20.116756,5E4,15E4],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,
2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,
3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,
3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,
3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,
5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,
6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,
6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,
6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,
6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,
7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,
7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,
26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,
53034:0,53048:0,53049:0,54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,
103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,
103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,
103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,
103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(g=2E3;2045>=g;g++)m[g]=0;for(g=2056;2065>=g;g++)m[g]=0;for(g=2067;2135>=g;g++)m[g]=0;for(g=2137;2154>=g;g++)m[g]=0;for(g=2161;2170>=g;g++)m[g]=0;for(g=2172;2193>=g;g++)m[g]=0;for(g=2195;2198>=g;g++)m[g]=0;for(g=2200;2203>=g;g++)m[g]=0;for(g=2205;2217>=g;g++)m[g]=0;for(g=2222;2224>=g;g++)m[g]=1;for(g=2225;2250>=
g;g++)m[g]=2;for(g=2251;2253>=g;g++)m[g]=1;for(g=2257;2264>=g;g++)m[g]=2;for(g=2274;2279>=g;g++)m[g]=2;for(g=2280;2282>=g;g++)m[g]=1;for(g=2283;2289>=g;g++)m[g]=2;for(g=2290;2292>=g;g++)m[g]=0;for(g=2308;2313>=g;g++)m[g]=0;for(g=2315;2491>=g;g++)m[g]=0;for(g=2494;2866>=g;g++)m[g]=0;for(g=2867;2869>=g;g++)m[g]=1;for(g=2870;2888>=g;g++)m[g]=2;for(g=2891;2895>=g;g++)m[g]=2;for(g=2896;2898>=g;g++)m[g]=1;for(g=2902;2908>=g;g++)m[g]=2;for(g=2915;2920>=g;g++)m[g]=2;for(g=2921;2923>=g;g++)m[g]=1;for(g=2924;2930>=
g;g++)m[g]=2;for(g=2931;2962>=g;g++)m[g]=0;for(g=2964;2968>=g;g++)m[g]=2;for(g=2969;2973>=g;g++)m[g]=0;for(g=2975;2991>=g;g++)m[g]=0;for(g=2995;3051>=g;g++)m[g]=0;for(g=3054;3079>=g;g++)m[g]=0;for(g=3081;3088>=g;g++)m[g]=0;for(g=3092;3101>=g;g++)m[g]=0;for(g=3106;3138>=g;g++)m[g]=0;for(g=3146;3151>=g;g++)m[g]=0;for(g=3153;3166>=g;g++)m[g]=0;for(g=3168;3172>=g;g++)m[g]=0;for(g=3174;3203>=g;g++)m[g]=0;for(g=3294;3358>=g;g++)m[g]=0;for(g=3367;3403>=g;g++)m[g]=0;for(g=3408;3416>=g;g++)m[g]=0;for(g=3417;3438>=
g;g++)m[g]=2;for(g=3441;3446>=g;g++)m[g]=2;for(g=3447;3450>=g;g++)m[g]=0;for(g=3451;3459>=g;g++)m[g]=2;for(g=3460;3478>=g;g++)m[g]=0;for(g=3554;3559>=g;g++)m[g]=0;for(g=3560;3570>=g;g++)m[g]=2;for(g=3571;3581>=g;g++)m[g]=0;for(g=3594;3597>=g;g++)m[g]=0;for(g=3601;3604>=g;g++)m[g]=0;for(g=3637;3639>=g;g++)m[g]=0;for(g=3665;3667>=g;g++)m[g]=0;for(g=3693;3695>=g;g++)m[g]=0;for(g=3701;3727>=g;g++)m[g]=0;for(g=3728;3739>=g;g++)m[g]=2;for(g=3740;3751>=g;g++)m[g]=0;for(g=3753;3760>=g;g++)m[g]=2;for(g=3761;3773>=
g;g++)m[g]=0;for(g=3775;3777>=g;g++)m[g]=0;for(g=3779;3781>=g;g++)m[g]=0;for(g=3783;3785>=g;g++)m[g]=0;for(g=3788;3791>=g;g++)m[g]=0;for(g=3797;3802>=g;g++)m[g]=0;for(g=3814;3816>=g;g++)m[g]=0;for(g=3825;3829>=g;g++)m[g]=0;for(g=3832;3841>=g;g++)m[g]=0;for(g=3844;3852>=g;g++)m[g]=0;for(g=3873;3885>=g;g++)m[g]=0;for(g=3890;3893>=g;g++)m[g]=0;for(g=3907;3912>=g;g++)m[g]=0;for(g=3942;3950>=g;g++)m[g]=0;for(g=3968;3970>=g;g++)m[g]=0;for(g=3973;3976>=g;g++)m[g]=0;for(g=3986;3989>=g;g++)m[g]=0;for(g=3994;3997>=
g;g++)m[g]=0;for(g=4048;4051>=g;g++)m[g]=0;for(g=4056;4063>=g;g++)m[g]=0;for(g=4093;4096>=g;g++)m[g]=0;for(g=4390;4398>=g;g++)m[g]=0;for(g=4399;4413>=g;g++)m[g]=2;for(g=4418;4433>=g;g++)m[g]=2;for(g=4455;4457>=g;g++)m[g]=2;for(g=4484;4489>=g;g++)m[g]=0;for(g=4491;4554>=g;g++)m[g]=0;for(g=4568;4589>=g;g++)m[g]=0;for(g=4652;4656>=g;g++)m[g]=0;for(g=4766;4800>=g;g++)m[g]=0;for(g=5014;5016>=g;g++)m[g]=0;for(g=5069;5072>=g;g++)m[g]=0;for(g=5105;5130>=g;g++)m[g]=0;for(g=5173;5188>=g;g++)m[g]=0;for(g=5253;5259>=
g;g++)m[g]=0;for(g=5269;5275>=g;g++)m[g]=0;for(g=5292;5311>=g;g++)m[g]=0;for(g=5329;5331>=g;g++)m[g]=0;for(g=5343;5349>=g;g++)m[g]=0;for(g=5355;5357>=g;g++)m[g]=0;for(g=5387;5389>=g;g++)m[g]=0;for(g=5459;5463>=g;g++)m[g]=0;for(g=5479;5482>=g;g++)m[g]=0;for(g=5518;5520>=g;g++)m[g]=0;for(g=5530;5539>=g;g++)m[g]=0;for(g=5550;5552>=g;g++)m[g]=0;for(g=5562;5583>=g;g++)m[g]=0;for(g=5623;5625>=g;g++)m[g]=2;for(g=5631;5639>=g;g++)m[g]=0;for(g=5649;5653>=g;g++)m[g]=0;for(g=5663;5680>=g;g++)m[g]=0;for(g=5682;5685>=
g;g++)m[g]=0;for(g=5875;5877>=g;g++)m[g]=0;for(g=5921;5940>=g;g++)m[g]=0;for(g=6050;6125>=g;g++)m[g]=0;for(g=6244;6275>=g;g++)m[g]=0;for(g=6328;6348>=g;g++)m[g]=0;for(g=6350;6356>=g;g++)m[g]=0;for(g=6366;6372>=g;g++)m[g]=0;for(g=6381;6387>=g;g++)m[g]=0;for(g=6393;6404>=g;g++)m[g]=0;for(g=6480;6483>=g;g++)m[g]=0;for(g=6511;6514>=g;g++)m[g]=0;for(g=6579;6581>=g;g++)m[g]=0;for(g=6619;6624>=g;g++)m[g]=0;for(g=6625;6627>=g;g++)m[g]=2;for(g=6628;6632>=g;g++)m[g]=0;for(g=6634;6637>=g;g++)m[g]=0;for(g=6669;6692>=
g;g++)m[g]=0;for(g=6707;6709>=g;g++)m[g]=0;for(g=6720;6723>=g;g++)m[g]=0;for(g=6732;6738>=g;g++)m[g]=0;for(g=6931;6933>=g;g++)m[g]=0;for(g=6956;6959>=g;g++)m[g]=0;for(g=7005;7007>=g;g++)m[g]=0;for(g=7057;7070>=g;g++)m[g]=2;for(g=7074;7082>=g;g++)m[g]=0;for(g=7109;7118>=g;g++)m[g]=0;for(g=7119;7127>=g;g++)m[g]=1;for(g=7374;7376>=g;g++)m[g]=0;for(g=7528;7586>=g;g++)m[g]=0;for(g=7587;7645>=g;g++)m[g]=2;for(g=7845;7859>=g;g++)m[g]=0;for(g=20002;20032>=g;g++)m[g]=0;for(g=20062;20092>=g;g++)m[g]=0;for(g=
20135;20138>=g;g++)m[g]=0;for(g=20248;20258>=g;g++)m[g]=0;for(g=20348;20358>=g;g++)m[g]=0;for(g=20436;20440>=g;g++)m[g]=0;for(g=20822;20824>=g;g++)m[g]=0;for(g=20934;20936>=g;g++)m[g]=0;for(g=21035;21037>=g;g++)m[g]=0;for(g=21095;21097>=g;g++)m[g]=0;for(g=21148;21150>=g;g++)m[g]=0;for(g=21413;21423>=g;g++)m[g]=0;for(g=21473;21483>=g;g++)m[g]=0;for(g=21780;21782>=g;g++)m[g]=0;for(g=21891;21894>=g;g++)m[g]=0;for(g=21896;21899>=g;g++)m[g]=0;for(g=22171;22177>=g;g++)m[g]=0;for(g=22181;22187>=g;g++)m[g]=
0;for(g=22191;22197>=g;g++)m[g]=0;for(g=22234;22236>=g;g++)m[g]=0;for(g=22521;22525>=g;g++)m[g]=0;for(g=22991;22994>=g;g++)m[g]=0;for(g=23028;23038>=g;g++)m[g]=0;for(g=23830;23853>=g;g++)m[g]=0;for(g=23866;23872>=g;g++)m[g]=0;for(g=23877;23884>=g;g++)m[g]=0;for(g=23886;23894>=g;g++)m[g]=0;for(g=23946;23948>=g;g++)m[g]=0;for(g=24311;24313>=g;g++)m[g]=0;for(g=24342;24347>=g;g++)m[g]=0;for(g=24370;24374>=g;g++)m[g]=10;for(g=24375;24381>=g;g++)m[g]=0;for(g=24718;24721>=g;g++)m[g]=0;for(g=24817;24821>=
g;g++)m[g]=0;for(g=24877;24882>=g;g++)m[g]=0;for(g=24891;24893>=g;g++)m[g]=0;for(g=25391;25395>=g;g++)m[g]=0;for(g=25828;25838>=g;g++)m[g]=0;for(g=26191;26195>=g;g++)m[g]=0;for(g=26391;26393>=g;g++)m[g]=0;for(g=26701;26722>=g;g++)m[g]=0;for(g=26729;26799>=g;g++)m[g]=2;for(g=26801;26803>=g;g++)m[g]=2;for(g=26811;26813>=g;g++)m[g]=2;for(g=26847;26870>=g;g++)m[g]=2;for(g=26891;26899>=g;g++)m[g]=0;for(g=26901;26923>=g;g++)m[g]=0;for(g=26929;26946>=g;g++)m[g]=0;for(g=26948;26998>=g;g++)m[g]=0;for(g=27037;27040>=
g;g++)m[g]=0;for(g=27205;27232>=g;g++)m[g]=0;for(g=27258;27260>=g;g++)m[g]=0;for(g=27391;27398>=g;g++)m[g]=0;for(g=27561;27564>=g;g++)m[g]=0;for(g=27571;27574>=g;g++)m[g]=0;for(g=27581;27584>=g;g++)m[g]=0;for(g=27591;27594>=g;g++)m[g]=0;for(g=28191;28193>=g;g++)m[g]=0;for(g=28348;28358>=g;g++)m[g]=0;for(g=28402;28432>=g;g++)m[g]=0;for(g=28462;28492>=g;g++)m[g]=0;for(g=29118;29122>=g;g++)m[g]=0;for(g=29168;29172>=g;g++)m[g]=0;for(g=29177;29185>=g;g++)m[g]=0;for(g=29187;29195>=g;g++)m[g]=0;for(g=29900;29903>=
g;g++)m[g]=0;for(g=30161;30179>=g;g++)m[g]=0;for(g=30491;30494>=g;g++)m[g]=0;for(g=30729;30732>=g;g++)m[g]=0;for(g=31251;31259>=g;g++)m[g]=0;for(g=31265;31268>=g;g++)m[g]=0;for(g=31275;31279>=g;g++)m[g]=0;for(g=31281;31297>=g;g++)m[g]=0;for(g=31461;31469>=g;g++)m[g]=0;for(g=31491;31495>=g;g++)m[g]=0;for(g=31917;31922>=g;g++)m[g]=0;for(g=31965;32E3>=g;g++)m[g]=0;for(g=32001;32003>=g;g++)m[g]=2;for(g=32005;32031>=g;g++)m[g]=2;for(g=32033;32060>=g;g++)m[g]=2;for(g=32064;32067>=g;g++)m[g]=2;for(g=32074;32077>=
g;g++)m[g]=2;for(g=32081;32086>=g;g++)m[g]=0;for(g=32107;32130>=g;g++)m[g]=0;for(g=32133;32158>=g;g++)m[g]=0;for(g=32164;32167>=g;g++)m[g]=2;for(g=32180;32199>=g;g++)m[g]=0;for(g=32201;32260>=g;g++)m[g]=0;for(g=32301;32360>=g;g++)m[g]=0;for(g=32601;32662>=g;g++)m[g]=0;for(g=32664;32667>=g;g++)m[g]=2;for(g=32701;32761>=g;g++)m[g]=0;for(g=53001;53004>=g;g++)m[g]=0;for(g=53008;53019>=g;g++)m[g]=0;for(g=53021;53032>=g;g++)m[g]=0;for(g=53042;53046>=g;g++)m[g]=0;for(g=53074;53080>=g;g++)m[g]=0;for(g=54001;54004>=
g;g++)m[g]=0;for(g=54008;54019>=g;g++)m[g]=0;for(g=54021;54032>=g;g++)m[g]=0;for(g=54042;54046>=g;g++)m[g]=0;for(g=54048;54053>=g;g++)m[g]=0;for(g=54074;54080>=g;g++)m[g]=0;for(g=102001;102040>=g;g++)m[g]=0;for(g=102042;102063>=g;g++)m[g]=0;for(g=102065;102067>=g;g++)m[g]=0;for(g=102070;102117>=g;g++)m[g]=0;for(g=102122;102216>=g;g++)m[g]=0;for(g=102221;102377>=g;g++)m[g]=0;for(g=102382;102388>=g;g++)m[g]=0;for(g=102389;102398>=g;g++)m[g]=2;for(g=102399;102444>=g;g++)m[g]=0;for(g=102445;102447>=g;g++)m[g]=
2;for(g=102448;102458>=g;g++)m[g]=0;for(g=102459;102468>=g;g++)m[g]=2;for(g=102469;102496>=g;g++)m[g]=0;for(g=102500;102519>=g;g++)m[g]=1;for(g=102520;102524>=g;g++)m[g]=0;for(g=102525;102529>=g;g++)m[g]=2;for(g=102530;102561>=g;g++)m[g]=0;for(g=102570;102588>=g;g++)m[g]=0;for(g=102590;102598>=g;g++)m[g]=0;for(g=102601;102603>=g;g++)m[g]=0;for(g=102605;102628>=g;g++)m[g]=0;for(g=102629;102646>=g;g++)m[g]=2;for(g=102648;102700>=g;g++)m[g]=2;for(g=102701;102703>=g;g++)m[g]=0;for(g=102707;102730>=g;g++)m[g]=
2;for(g=102733;102758>=g;g++)m[g]=2;for(g=102767;102798>=g;g++)m[g]=0;for(g=102965;102969>=g;g++)m[g]=0;for(g=102971;102973>=g;g++)m[g]=0;for(g=102975;102989>=g;g++)m[g]=0;for(g=102990;102992>=g;g++)m[g]=1;for(g=102997;103002>=g;g++)m[g]=0;for(g=103003;103008>=g;g++)m[g]=2;for(g=103009;103011>=g;g++)m[g]=0;for(g=103012;103014>=g;g++)m[g]=2;for(g=103019;103021>=g;g++)m[g]=0;for(g=103022;103024>=g;g++)m[g]=2;for(g=103029;103031>=g;g++)m[g]=0;for(g=103032;103034>=g;g++)m[g]=2;for(g=103065;103068>=g;g++)m[g]=
0;for(g=103074;103076>=g;g++)m[g]=0;for(g=103077;103079>=g;g++)m[g]=1;for(g=103080;103082>=g;g++)m[g]=0;for(g=103083;103085>=g;g++)m[g]=2;for(g=103090;103093>=g;g++)m[g]=0;for(g=103097;103099>=g;g++)m[g]=0;for(g=103100;103102>=g;g++)m[g]=2;for(g=103107;103109>=g;g++)m[g]=0;for(g=103110;103112>=g;g++)m[g]=2;for(g=103113;103116>=g;g++)m[g]=0;for(g=103117;103120>=g;g++)m[g]=2;for(g=103153;103157>=g;g++)m[g]=0;for(g=103158;103162>=g;g++)m[g]=2;for(g=103163;103165>=g;g++)m[g]=0;for(g=103166;103168>=g;g++)m[g]=
1;for(g=103169;103171>=g;g++)m[g]=2;for(g=103186;103188>=g;g++)m[g]=0;for(g=103189;103191>=g;g++)m[g]=2;for(g=103192;103195>=g;g++)m[g]=0;for(g=103196;103199>=g;g++)m[g]=2;for(g=103200;103224>=g;g++)m[g]=0;for(g=103225;103227>=g;g++)m[g]=1;for(g=103232;103237>=g;g++)m[g]=0;for(g=103238;103243>=g;g++)m[g]=2;for(g=103244;103246>=g;g++)m[g]=0;for(g=103247;103249>=g;g++)m[g]=2;for(g=103254;103256>=g;g++)m[g]=0;for(g=103257;103259>=g;g++)m[g]=2;for(g=103264;103266>=g;g++)m[g]=0;for(g=103267;103269>=g;g++)m[g]=
2;for(g=103300;103375>=g;g++)m[g]=0;for(g=103381;103383>=g;g++)m[g]=0;for(g=103384;103386>=g;g++)m[g]=1;for(g=103387;103389>=g;g++)m[g]=0;for(g=103390;103392>=g;g++)m[g]=2;for(g=103397;103399>=g;g++)m[g]=0;for(g=103400;103471>=g;g++)m[g]=2;for(g=103476;103478>=g;g++)m[g]=0;for(g=103479;103481>=g;g++)m[g]=2;for(g=103486;103488>=g;g++)m[g]=0;for(g=103489;103491>=g;g++)m[g]=2;for(g=103492;103495>=g;g++)m[g]=0;for(g=103496;103499>=g;g++)m[g]=2;for(g=103528;103543>=g;g++)m[g]=0;for(g=103544;103548>=g;g++)m[g]=
2;for(g=103549;103551>=g;g++)m[g]=0;for(g=103552;103554>=g;g++)m[g]=1;for(g=103555;103557>=g;g++)m[g]=2;for(g=103558;103560>=g;g++)m[g]=0;for(g=103571;103573>=g;g++)m[g]=0;for(g=103574;103576>=g;g++)m[g]=2;for(g=103577;103580>=g;g++)m[g]=0;for(g=103581;103583>=g;g++)m[g]=2;for(g=103600;103694>=g;g++)m[g]=0;for(g=103700;103793>=g;g++)m[g]=2;for(g=103794;103871>=g;g++)m[g]=0;for(g=103900;103971>=g;g++)m[g]=2;return m})},"esri/layers/vectorTiles/views/2d/layers/support/TileSpan":function(){define(["require",
"exports"],function(g,m){return function(){return function(a,b,d){this.row=a;this.colFrom=b;this.colTo=d}}()})},"esri/layers/vectorTiles/views/2d/layers/support/TileCoverage":function(){define(["require","exports"],function(g,m){return function(){return function(a,b){this.lodInfo=a;this.spans=b}}()})},"esri/layers/vectorTiles/views/2d/layers/support/TileStrategy":function(){define(["require","exports","../../../../core/LRUCache","./TileKey"],function(g,m,a,b){function d(a,b){a["delete"](b)}var c=
[],h=[],n=[null,null],f=[],e=new a(30);return function(){function a(b,c,d,e,f){void 0===f&&(f=null);this.container=b;this.tileInfoView=c;this.requestUpdate=d;this.fetchTile=e;this.tileFilter=f;this._tiles=new Map;this._tilesToRender=new Map;this._requests=new Map;this._updates=new Map;this._prevResolution=Number.POSITIVE_INFINITY;this._isStationary=!1}a.prototype.destroy=function(){this._requests&&(this._requests.forEach(function(a){a.isFulfilled()||a.cancel()}),this._tilesToRender=this._requests=
null)};Object.defineProperty(a.prototype,"updating",{get:function(){return 0!==this._requests.size||0!==this._updates.size},enumerable:!0,configurable:!0});a.prototype.update=function(a){var h=this,g=this._tiles,m=this._tilesToRender,n=this._requests,p=this._updates,B=this.tileInfoView.getTileCoverage(a.state);if(B){var A=B.lodInfo.level,C=a.state.resolution>this._prevResolution;this._createCoverageList(c,B);var z=this.tileFilter?this.tileFilter([],c):c;m.clear();for(var F=0,H=0;H<z.length;H++){var J=
z[H];if(g.has(J)){var I=g.get(J);m.set(J,I);F++;I.attached||C||this._addParentTile(J,m)}else e.has(J)?F++:n.has(J)||this._getTile(J,a),C||this._addParentTile(J,m)}var K=F===z.length;!this._isStationary&&a.stationary&&this.requestUpdate();this._isStationary=a.stationary;var M=[],L=[],G;g.forEach(function(a,c){G=b.from(c);m.has(c)||((C||!K)&&h.tileInfoView.intersects(B,G)?L.push(c):(G.level>A||!h.tileInfoView.intersects(B,G))&&M.push(c))});for(I=0;I<L.length;I++)J=L[I],m.set(J,g.get(J));for(a=0;a<M.length;a++)J=
M[a],p.has(J)&&(p.get(J).cancel(J),d(p,J)),I=g.get(J),I.dispose(),d(g,J);this.container.removeAllChildren();m.forEach(function(a){return h.container.addChild(a)});n.forEach(function(a,c){G=b.from(c);if(G.level>A||!h.tileInfoView.intersects(B,G))a.cancel(),f.push(c)});for(g=0;g<f.length;g++)J=f[g],d(n,J);f.length=0}};a.prototype.updateTiles=function(a,b){var c=this;this._tilesToRender.forEach(function(e,f){if(e.attached){var h=a(e,b);h&&(c._updates.has(f)&&(c._updates.get(f).cancel(),d(c._updates,
f)),h.then(function(a){d(c._updates,f);c._tilesToRender.has(f)&&c._tilesToRender.set(f,a)}).otherwise(function(a){d(c._updates,f);if(a&&"cancel"!==a.dojoType)throw a;}),c._updates.set(f,h))}})};a.prototype._addParentTile=function(a,b){this._getAvailableParentTile(n,a);n[0]&&!b.has(n[0])&&b.set(n[0],n[1])};a.prototype._getTile=function(a,c){var f=this,h=this.fetchTile(a,c).then(function(c){var e=b.fromId(a);f.tileInfoView.getTileTopLeft(c.topLeft,e);f.tileInfoView.getTileBottomRight(c.bottomRight,
e);c.resolution=f.tileInfoView.getTileResolution(e);f._tiles.set(a,c);d(f._requests,a);f.requestUpdate()}).otherwise(function(b){b&&"no data"===b.message&&e.insert(a,a);d(f._requests,a)});this._requests.set(a,h)};a.prototype._getAvailableParentTile=function(a,b){a[0]=null;a[1]=null;for(var c=b;c=this.tileInfoView.getTileParentId(c);)if(this._tiles.has(c)){a[0]=c;a[1]=this._tiles.get(c);break}return a};a.prototype._createCoverageList=function(a,c){a.length=0;h.length=0;var d=c.spans;if(0!==d.length){for(var e=
0,f=0,g=Infinity,m=-Infinity,e=d[0].row,f=d[d.length-1].row,n=0;n<d.length;n++)for(var p=d[n],z=p.colFrom,p=p.colTo;z<=p;z++)g=Math.min(g,z),m=Math.max(m,z);var n=c.lodInfo,z=n.level,f=e+Math.floor((f-e)/2),g=g+Math.floor((m-g)/2),F,p=f-e;0<=p&&p<d.length&&(F=b.from(z,f,n.normalizeCol(g),n.getWorldForColumn(g)),h.push({dist:0,id:F.id}));for(var H,m=0;m<d.length;m++){p=d[m];e=p.row;z=p.colFrom;for(p=p.colTo;z<=p;z++)H=Math.abs(z-g)+Math.abs(e-f),0!==H&&(F.row=e,F.col=n.normalizeCol(z),F.world=n.getWorldForColumn(z),
h.push({dist:H,id:F.id}))}h.sort(function(a,b){return a.dist-b.dist});for(d=0;d<h.length;d++)a.push(h[d].id)}};return a}()})},"esri/layers/vectorTiles/core/LRUCache":function(){define(["require","exports"],function(g,m){return function(){function a(a){this._cache={};this._lruQueue=[];if(0>=a)throw Error("LRU cache size must be bigger than zero!");this._maxSize=a}a.prototype.has=function(a){return void 0!==this._cache[a]};a.prototype.insert=function(a,d){null!==this.use(a)?this._cache[a]=d:(this._collect(),
this._cache[a]=d,this._lruQueue.unshift(a))};a.prototype.use=function(a){var d=this._cache[a];if(!d)return null;this._lruQueue.splice(this._lruQueue.indexOf(a),1);this._lruQueue.unshift(a);return d};a.prototype.print=function(){for(var a=0,d=this._lruQueue;a<d.length;a++);};a.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var a=this._lruQueue.pop(),d=this._cache[a];d&&d.dispose&&d.dispose();delete this._cache[a]}};return a}()})},"esri/layers/ImageServiceLayerMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/json dojo/_base/config dojo/_base/connect dojo/has dojo/io-query ../kernel ../config ../lang ../request ../deferredUtils ../urlUtils ../geometry/Extent ../geometry/Point ../geometry/Polygon ./MosaicRule ./RasterFunction ./DimensionalDefinition ./Raster ./PixelBlock ./pixelFilters/VectorFieldPixelFilter ./rasterFormats/ImageCanvasDecoder ./TimeInfo ./Field ../graphic ../tasks/ImageServiceIdentifyTask ../tasks/ImageServiceIdentifyParameters".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M,L,G,O){return g(null,{declaredClass:"esri.layers.ImageServiceLayerMixin",_rasterFieldPrefix:"Raster.",_renderingRuleFieldSubPrefix:"ServicePixelValue.",_eventMap:{"rendering-change":!0,"mosaic-rule-change":!0,"spatial-reference-change":!0},constructor:function(a,b){this.useMapTime=b&&b.hasOwnProperty("useMapTime")?!!b.useMapTime:!0},_initialize:function(a,b){this._url=w.urlToObject(a);this.raster=new F(this._url.path);this.infoTemplate=
b&&b.infoTemplate;var c=b&&b.imageServiceParameters;this.format=c&&c.format;this.compressionTolerance=c&&c.compressionTolerance?c.compressionTolerance:0.01;this.interpolation=c?c.interpolation:null;this.compressionQuality=c?c.compressionQuality:null;this.bandIds=c?c.bandIds:null;this.mosaicRule=c?c.mosaicRule:null;this.renderingRule=c?c.renderingRule:null;this.useMapDimensionValue=b&&b.hasOwnProperty("useMapDimensionValue")?!!b.useMapDimensionValue:!0;this.activeMapDimensions=b&&b.activeMapDimensions;
this._params=m.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},c?c.toJson():{});this.pixelFilter=b&&b.pixelFilter;this.originalPixelData=this.pixelData=null;this.hasDataChanged=!0;this._requestDataHandler=m.hitch(this,this._requestDataHandler);this._requestDataErrorHandler=m.hitch(this,this._requestDataErrorHandler);this._rasterReadPromise=null;this._initLayer=m.hitch(this,
this._initLayer);this._queryVisibleRastersHandler=m.hitch(this,this._queryVisibleRastersHandler);this._visibleRasters=[];this._rasterAttributeTableFields=[];this._rasterAttributeTableFeatures=[];this._renderingRuleAttributeTable={};this._useRenderingRuleAttributeTable=!1;this._loadCallback=b&&b.loadCallback;(c=b&&b.resourceInfo)?this._initLayer(c):u({url:this._url.path,content:m.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},
disableClientCaching:!1,_initLayer:function(a,b){if(!(null===a||void 0===a)){this._findCredential();(this.credential&&this.credential.ssl||a&&a._ssl)&&this._useSSL();var c=this.minScale,d=this.maxScale;m.mixin(this,a);this.minScale=c;this.maxScale=d;this.initialExtent=this.fullExtent=this.extent=new v(a.extent);this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);for(var e=this.minValues,f=this.maxValues,
h=this.meanValues,g=this.stdvValues,n=this.bands=[],c=0,d=this.bandCount;c<d;c++)n[c]={min:e[c],max:f[c],mean:h[c],stddev:g[c]};this.timeInfo=(c=this.timeInfo)&&c.timeExtent?new K(c):null;d=this.fields=[];if(e=a.fields)for(c=0;c<e.length;c++)d.push(new M(e[c]));this.version=a.currentVersion;this.version||(this.version="fields"in a||"objectIdField"in a||"timeInfo"in a?10:9.3);s.isDefined(a.minScale)&&!this._hasMin&&this.setMinScale(a.minScale);s.isDefined(a.maxScale)&&!this._hasMax&&this.setMaxScale(a.maxScale);
c={};a.defaultMosaicMethod?(c.method=a.defaultMosaicMethod,c.operation=a.mosaicOperator,c.sortField=a.sortField,c.sortValue=a.sortValue):c.method=A.METHOD_NONE;this.defaultMosaicRule=new A(c);this.defaultMosaicRule.ascending=!0;this._useRenderingRuleAttributeTable=10<this.version&&"esriImageServiceDataTypeThematic"===this.serviceDataType&&!this.hasRasterAttributeTable;this._setDefaultRenderingRule(!0);this._isScientificData()&&(!this.mosaicRule||this.mosaicRule&&!this.mosaicRule.multidimensionalDefinition)&&
this._setDefaultMultidimensionalDefinition(!0);10<this.version&&this.hasRasterAttributeTable&&this.getRasterAttributeTable().then(m.hitch(this,function(a){a&&(a.features&&0<a.features.length)&&(this._rasterAttributeTableFeatures=m.clone(a.features));a&&(a.fields&&0<a.fields.length)&&(this._rasterAttributeTableFields=m.clone(a.fields))}));this._isVectorData()&&!s.isDefined(this.pixelFilter)&&(this.vectorFieldPixelFilter=new J,this.vectorFieldPixelFilter.isDataUV="esriImageServiceDataTypeVector-UV"===
this.serviceDataType,this.pixelFilter=this.vectorFieldPixelFilter.computeMagnitudeAndDirection,this.getKeyProperties().then(m.hitch(this,this._setFlowRepresentation)));this.loaded=!0;this._setDefaultFilter();this.onLoad(this);if(c=this._loadCallback)delete this._loadCallback,c(this)}},getKeyProperties:function(){var b=this._url.path+"/keyProperties",d=new a(t._dfdCanceller);10<this.version?(d._pendingDfd=u({url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),d._pendingDfd.then(function(a){d.callback(a)},
function(a){d.errback(a)})):(b=Error("Layer does not have key properties"),b.log=c.isDebug,d.errback(b));return d},getRasterAttributeTable:function(b){var e=this._url.path+"/rasterAttributeTable",f=new a(t._dfdCanceller),h={f:"json"},g=this.hasRasterAttributeTable;b&&b.renderingRule&&(h.renderingRule=d.toJson(b.renderingRule.toJson()),g=!0);10<this.version&&g?(f._pendingDfd=u({url:e,content:h,handleAs:"json",callbackParamName:"callback"}),f._pendingDfd.then(function(a){f.callback(a)},function(a){f.errback(a)})):
(b=Error("Layer does not support raster attribute table"),b.log=c.isDebug,f.errback(b));return f},_getRenderingRuleAttributeTable:function(b){var c=new a(t._dfdCanceller);if(!b||!b.renderingRule)return c.errback(Error("Rendering rule is not specified")),c;b=b.renderingRule;var d=b.functionName;this._renderingRuleAttributeTable&&d&&this._renderingRuleAttributeTable.hasOwnProperty(d)?c.resolve(this._renderingRuleAttributeTable[d]):c=this.getRasterAttributeTable({renderingRule:b}).then(m.hitch(this,
function(a){var b;a&&(a.features&&a.features.length&&a.fields&&a.fields.length)&&(b={features:m.clone(a.features),fields:m.clone(a.fields)},d&&(this._renderingRuleAttributeTable[d]=b));return b}));return c},_getRasterAttributeTableFeatures:function(){var b=new a;if(this._rasterAttributeTableFeatures&&0<this._rasterAttributeTableFeatures.length)return b.resolve(this._rasterAttributeTableFeatures),b;if(10<this.version&&this.hasRasterAttributeTable)return b=this.getRasterAttributeTable(),b.then(m.hitch(this,
function(a){a&&(a.features&&0<a.features.length)&&(this._rasterAttributeTableFeatures=m.clone(a.features))})),b;b.resolve(this._rasterAttributeTableFeatures);return b},_getRenderingRuleAttributeTableFeatures:function(b){b=b&&b.renderingRule;return!b?(b=new a,b.errback(Error("Rendering rule is not specified")),b):this._getRenderingRuleAttributeTable({renderingRule:b}).then(function(a){return a&&a.features})},getCustomRasterFields:function(a){var c=a?a.rasterAttributeTableFieldPrefix:this._rasterFieldPrefix;
a=10.3<=this.version?"esriFieldTypeDouble":"esriFieldTypeString";var d={name:this._rasterFieldPrefix+"ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:a},e={name:this._rasterFieldPrefix+"ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:a},f={name:this._rasterFieldPrefix+"ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"esriFieldTypeDouble"},h=this.fields?m.clone(this.fields):[];a=h.length;
h[a]=e;if(10.4<=this.version&&"esri.layers.ArcGISImageServiceLayer"===this.declaredClass&&(!this.rasterFunctionInfos||!this.rasterFunctionInfos.length||this._isRasterFunctionInfoAvailable("none")))a++,h[a]=f;if(this.capabilities&&-1<this.capabilities.toLowerCase().indexOf("catalog")||this.fields&&0<this.fields.length)a++,h[a]=d;if(s.isDefined(this.pixelFilter)&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType))d={name:this._rasterFieldPrefix+
"Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"esriFieldTypeDouble"},e={name:this._rasterFieldPrefix+"Direction",alias:"Direction",domain:null,editable:!1,type:"esriFieldTypeDouble"},a++,h[a]=d,a++,h[a]=e;a=this._rasterAttributeTableFields;if((d=this.renderingRule&&this.renderingRule.functionName)&&this._renderingRuleAttributeTable&&this._renderingRuleAttributeTable.hasOwnProperty(d))a=this._renderingRuleAttributeTable[d].fields;a&&0<a.length&&(a=b.filter(a,function(a){return"esriFieldTypeOID"!==
a.type&&"value"!==a.name.toLowerCase()}),a=b.map(a,function(a){var b=m.clone(a);b.name=c+a.name;return b}),h=h.concat(a));var g=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;10.4<=this.version&&this.rasterFunctionInfos&&b.forEach(this.rasterFunctionInfos,function(a){a&&(a.name&&"none"!==a.name.toLowerCase())&&(a={name:g+a.name.replace(/ /gi,"_"),alias:a.name,domain:null,editable:!1,type:"esriFieldTypeDouble"},h.push(a))});return h},_prepareGetImageParameters:function(a,b,c,e){e=s.isDefined(e)?
e:this._params;var f=a.spatialReference.wkid||d.toJson(a.spatialReference.toJson(!1));delete e._ts;m.mixin(e,{bbox:a.xmin+","+a.ymin+","+a.xmax+","+a.ymax,imageSR:f,bboxSR:f,size:b+","+c},this.disableClientCaching?{_ts:(new Date).getTime()}:{});delete e.compressionTolerance;e.format&&"LERC"===e.format.toUpperCase()&&(e.compressionTolerance=this.compressionTolerance);e.token=this._getToken()},getImageUrl:function(a,b,c,d,e){e=s.isDefined(e)?e:this._params;this._prepareGetImageParameters(a,b,c,e);a=
m.clone(e);this._cleanupRequestParams(a);b=this._url.path+"/exportImage?";c=w.addProxy(b+f.objectToQuery(m.mixin(a,{f:"image"})));var h=a.token;c.length>p.defaults.io.postLength||this.useMapImage?this._jsonRequest=u({url:b,content:m.mixin(a,{f:"json"}),callbackParamName:"callback",load:function(a,b){var c=a.href;h&&(c+=-1===c.indexOf("?")?"?token\x3d"+h:"\x26token\x3d"+h);d(w.addProxy(c))},error:this._errorHandler}):d(c)},onRenderingChange:function(){},onMosaicRuleChange:function(){},setInterpolation:function(a,
b){this.interpolation=this._params.interpolation=a;b||this.refresh(!0)},setCompressionQuality:function(a,b){this.compressionQuality=this._params.compressionQuality=a;b||this.refresh(!0)},setCompressionTolerance:function(a,b){this.compressionTolerance=a;b||this.refresh(!0)},setBandIds:function(a,b){var c=!1;this.bandIds!==a&&(c=!0);this.bandIds=a;this._params.bandIds=a.join(",");if(c&&!b)this.onRenderingChange();b||this.refresh(!0)},setDefaultBandIds:function(a){this.bandIds=this._params.bandIds=null;
a||this.refresh(!0)},setDisableClientCaching:function(a){this.disableClientCaching=a},setMosaicRule:function(a,b){var c=!1;this.mosaicRule!==a&&(c=!0);this.mosaicRule=a;this._params.mosaicRule=d.toJson(a.toJson());if(c&&!b)this.onMosaicRuleChange();b||this.refresh(!0)},setRenderingRule:function(a,b){var c=!1;this.renderingRule!==a&&(c=!0);this.renderingRule=a;this._params.renderingRule=a?d.toJson(a.toJson()):null;this._useRenderingRuleAttributeTable&&this._getRenderingRuleAttributeTable({renderingRule:a});
if(c)this.onRenderingChange();this._setDefaultFilter();b||this.refresh(!0)},setImageFormat:function(a,b){this.format=this._params.format=a;this._setDefaultFilter();b||this.refresh(!0)},setInfoTemplate:function(a){this.infoTemplate=a},setDefinitionExpression:function(a,b){var c=this.mosaicRule?this.mosaicRule.toJson():{};this.mosaicRule||(this.defaultMosaicRule?c=this.defaultMosaicRule.toJson():c.method=A.METHOD_NONE);c.where=a;c=new A(c);this.setMosaicRule(c,b);return this},getDefinitionExpression:function(){return this.mosaicRule?
this.mosaicRule.where:null},setPixelFilter:function(a){this.pixelFilter=a;this._isDefaultPixelFilter=!1},getPixelData:function(a){return a?(this._useBrowserDecoding()&&(this.originalPixelData={pixelBlock:this._getPixelBlockFromCanvas(this._context,this._map.width,this._map.height),extent:this._map.extent}),this.originalPixelData):this.pixelData},redraw:function(){this.hasDataChanged=!1;this._setPixelData(this.originalPixelData)},queryVisibleRasters:function(c,d,e,f){var h=this._map,g=t._fixDfd(new a(t._dfdCanceller));
this._visibleRasters=[];var n,k,p=!0,s=this.infoTemplate?this.infoTemplate.info:null,u=s?m.clone(this.infoTemplate.info.fieldInfos):null;d=d||{};if(s&&this.infoTemplate.info.mediaInfos&&this.infoTemplate.info.mediaInfos.length){var v=[];b.forEach(this.infoTemplate.info.mediaInfos,function(a){v=v.concat(a&&a.value&&a.value.fields||[])});v.length&&b.forEach(u,function(a){a&&-1<v.indexOf(a.fieldName)&&(a.visible=!0)})}if(u&&0<u.length){p=!1;for(n=0;n<u.length;n++)if((k=u[n])&&k.fieldName.toLowerCase()!==
this._rasterFieldPrefix.toLowerCase()+"servicepixelvalue"&&(k.visible||s.title&&-1<s.title.toLowerCase().indexOf(k.fieldName.toLowerCase()))){p=!0;break}}var w=(k=this._removeVisualizationStretchFunction(this.renderingRule))&&k.functionName,A=[];if(10.4<=this.version){var z=!1;if(this.rasterFunctionInfos&&u){var B=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;b.forEach(this.rasterFunctionInfos,function(a){var c=B+a.name.replace(/ /gi,"_");b.some(u,function(a){return a.visible&&a.fieldName===
c})&&(z=z||w&&w===a.name,A.push(new C({rasterFunction:a.name})))})}k&&!z&&A.push(k)}n=new O;n.geometry=c.geometry;n.returnGeometry=this._map.spatialReference.equals(this.spatialReference);n.returnCatalogItems=p;n.timeExtent=c.timeExtent;n.mosaicRule=this.mosaicRule||null;n.renderingRule=10.4>this.version&&k||null;n.renderingRules=A||null;h&&(c=new x((h.extent.xmax-h.extent.xmin)/h.width,(h.extent.ymax-h.extent.ymin)/h.height,h.extent.spatialReference),n.pixelSize=c);d.requestParams=n;var L=this;c=
new G(this.url);(g._pendingDfd=c.execute(n)).addCallbacks(function(a){L._queryVisibleRastersHandler(a,d,e,f,g)},function(a){L._resolve([a],null,f,g,!0)});return g},_queryVisibleRastersHandler:function(a,c,e,f,h){function g(){var a=this.getCustomRasterFields(c),d=this._getDomainFields(a),f=c?c.returnDomainValues:!1,u=c&&c.rasterAttributeTableFieldPrefix,w,x,G,A,z,B,L,K,C,F;this._useRenderingRuleAttributeTable&&this.renderingRule?(a=this._getRenderingRuleAttributeTableFeatures({renderingRule:this.renderingRule}),
F=n):a=this._getRasterAttributeTableFeatures();a.then(m.hitch(this,function(a){for(w=0;w<t.length;w++){ja=t[w];ja.setInfoTemplate(this.infoTemplate);ja._layer=this;if(n){C=n.replace(/ /gi,"").split(",");x=n;G=C;p&&p.length>=w&&(x=p[w].replace(/ /gi,", "),G=p[w].split(" "));ja.attributes[this._rasterFieldPrefix+"ItemPixelValue"]=G;ja.attributes[this._rasterFieldPrefix+"ServicePixelValue"]=C;k&&(ja.attributes[this._rasterFieldPrefix+"ServicePixelValue.Raw"]=k.replace(/ /gi,"").split(","));if(this.pixelFilter){var c=
new H({height:1,width:1,pixelType:"F32",pixels:[],statistics:[]});b.forEach(G,function(a){c.addData({pixels:[a],statistics:{minValue:a,maxValue:a,noDataValue:null}})});this.pixelFilter({pixelBlock:c,extent:new v(0,0,0,0,this._map.spatialReference)});if("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)ja.attributes[this._rasterFieldPrefix+"Magnitude"]=c.pixels[0][0],ja.attributes[this._rasterFieldPrefix+"Direction"]=c.pixels[1][0]}b.forEach(O,
function(a){ja.attributes[a.name]=a.value});var g=F||x;if(a&&0<a.length&&(A=b.filter(a,function(a){if(a&&a.attributes)return a.attributes.hasOwnProperty("Value")?a.attributes.Value==g:a.attributes.VALUE==g}),0<A.length&&(z=m.clone(A[0]),u&&z))){K={};for(B in z.attributes)z.attributes.hasOwnProperty(B)&&(L=u+B,K[L]=z.attributes[B]);z.attributes=K;ja.attributes=m.mixin(ja.attributes,z.attributes)}}f&&(d&&0<d.length)&&b.forEach(d,function(a){if(a){var b=ja.attributes[a.name];s.isDefined(b)&&(b=this._getDomainValue(a.domain,
b),s.isDefined(b)&&(ja.attributes[a.name]=b))}},this);wa.push(ja);this._visibleRasters.push(ja)}this._resolve([wa,null,!0],null,e,h)}))}var n=a.value,k=a.value,p,t,w=0,x=0,G=this,A=this.objectIdField,z,K,O=[];f=c.requestParams.renderingRules;var C=a.processedValues,F=this.renderingRule&&d.toJson(this._removeVisualizationStretchFunction(this.renderingRule).toJson());if(f&&C&&f.length===C.length){var M=this._rasterFieldPrefix+this._renderingRuleFieldSubPrefix;b.forEach(f,function(a,b){if(a.functionName){var c=
{name:M+a.functionName.replace(/ /gi,"_"),value:C[b].replace(/ /gi,"").split(",")};O.push(c);F&&F===d.toJson(a.toJson())&&(n=C[b])}})}f=this.infoTemplate&&this.infoTemplate.info&&this.infoTemplate.info.layerOptions&&this.infoTemplate.info.layerOptions.hasOwnProperty("showNoDataRecords")?this.infoTemplate.info.layerOptions.showNoDataRecords:!0;if(a.catalogItems){var I=0,J,ma,pa=a.catalogItems.features.length;K=0;t=Array(pa);p=Array(pa);z=Array(pa);for(w=0;w<pa;w++)-1<a.properties.Values[w].toLowerCase().indexOf("nodata")&&
K++;J=pa-K;for(w=0;w<pa;w++)K=!0,-1<a.properties.Values[w].toLowerCase().indexOf("nodata")?(ma=J++,f||(K=!1,t.length--,p.length--,z.length--)):ma=I++,K&&(t[ma]=a.catalogItems.features[w],p[ma]=a.properties.Values[w],z[ma]=t[ma].attributes[A])}this._visibleRasters=[];var ja;if((a=-1<n.toLowerCase().indexOf("nodata"))&&!f)t=[],p=[],z=[];n&&(!t&&!a)&&(A="ObjectId",t=[],ja=new L(new v(this.fullExtent),null,{ObjectId:0}),t.push(ja));var wa=[];t?!this._map.spatialReference.equals(this.spatialReference)&&
z&&0<z.length?u({url:this._url.path+"/query",content:{f:"json",objectIds:z.join(","),returnGeometry:!0,outSR:d.toJson(G._map.spatialReference.toJson()),outFields:A},handleAs:"json",callbackParamName:"callback",load:function(a){if(0===a.features.length)G._resolve([wa,null,null],null,e,h);else{for(w=0;w<a.features.length;w++)for(x=0;x<t.length;x++)t[x].attributes[A]==a.features[w].attributes[A]&&(t[x].geometry=new B(a.features[w].geometry),t[x].geometry.setSpatialReference(G._map.spatialReference));
g.call(G)}},error:function(a){G._resolve([wa,null,null],null,e,h)}}):g.call(this):this._resolve([wa,null,null],null,e,h)},getVisibleRasters:function(){var a=this._visibleRasters,b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},_getDomainFields:function(a){if(a){var c=[];b.forEach(a,function(a){if(a.domain){var b={};b.name=a.name;b.domain=a.domain;c.push(b)}});return c}},_getDomainValue:function(a,c){if(a&&a.codedValues){var d;b.some(a.codedValues,function(a){return a.code===c?(d=a.name,
!0):!1});return d}},_requestData:function(a,b,c){this._rasterReadPromise&&this._rasterReadPromise.cancel();a=m.clone(a);var d=a._normalize(!0);this._prepareGetImageParameters(d,b,c);b=m.clone(this._params);this._cleanupRequestParams(b);b.extent=a;b.format=b.format||(10.3<=this.version?"lerc":"jpgpng");"lerc"===b.format.toLowerCase()&&(!b.lercVersion&&10.5<=this.version)&&(b.lercVersion=2);c=null;this._useBrowserDecoding()&&(c=new I({ctx:this._context}));b={imageServiceParameters:b,nBands:Math.min(this.bandCount,
3),pixelType:this.pixelType,decodeFunc:c?m.hitch(c,"decode"):null};this._rasterReadPromise=this.raster.read(b,this._requestDataHandler,this._requestDataErrorHandler)},_requestDataHandler:function(a){if(!this._rasterReadPromise||!this._rasterReadPromise.isCanceled())this.originalPixelData=a,this.hasDataChanged=!0,this._setPixelData(a)},_setPixelData:function(a){a=this._clonePixelData(a);this.pixelFilter&&this.pixelFilter(a);this.pixelData=a;if(!this._rasterReadPromise||!this._rasterReadPromise.isCanceled())this._drawPixelData(),
this._rasterReadPromise=null},_clonePixelData:function(a){if(null===a||void 0===a)return a;var b={};a.extent&&(b.extent=m.clone(a.extent));a=a.pixelBlock;if(null===a||void 0===a)return b;b.pixelBlock=a.clone();return b},_setDefaultFilter:function(){},_getPixelBlockFromCanvas:function(a,b,c){a=a.getImageData(0,0,b,c).data;for(var d=b*c,e=0,f=0,h=new Uint8Array(d),g=new Uint8Array(d),m=new Uint8Array(d),n=new Uint8Array(d),p=Infinity,s=Infinity,u=Infinity,t=-Infinity,v=-Infinity,w=-Infinity,x,G,A,e=
0;e<d;e++)x=a[f++],G=a[f++],A=a[f++],p=p<x?p:x,t=t>x?t:x,s=s<G?s:G,v=v>G?v:G,u=u<A?u:A,w=w>A?w:A,h[e]=x,g[e]=G,m[e]=A,n[e]=a[f++]&1;return new H({width:b,height:c,pixels:[h,g,m],pixelType:"U8",mask:n,statistics:[{minValue:p,maxValue:t},{minValue:s,maxValue:v},{minValue:u,maxValue:w}]})},_useBrowserDecoding:function(){return(void 0===this.pixelFilter||null===this.pixelFilter)&&("jpeg"===this.format.toLowerCase()||"jpg"===this.format.toLowerCase()||-1<this.format.toLowerCase().indexOf("png"))},getMultidimensionalInfo:function(){var b=
this._url.path+"/multiDimensionalInfo",d=new a(t._dfdCanceller);if(this._multidimensionalInfo)return d.resolve(this._multidimensionalInfo),d;10.3<=this.version&&this.hasMultidimensions?(d._pendingDfd=u({url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),d._pendingDfd.then(m.hitch(this,function(a){this._multidimensionalInfo=a.multidimensionalInfo;d.callback(a.multidimensionalInfo)}),function(a){d.errback(a)})):(b=Error("Layer does not support multidimensional info"),b.log=c.isDebug,
d.errback(b));return d},getDefaultMultidimensionalDefinition:function(){var b,c,d,e=[],f=new a(t._dfdCanceller);if(this._defaultMultidimensionalDefinition)return f.resolve(this._defaultMultidimensionalDefinition),f;f._pendingDfd=this.getMultidimensionalInfo();f._pendingDfd.then(m.hitch(this,function(a){b=a;c=b.variables[0].dimensions;for(d in c)c.hasOwnProperty(d)&&(c[d].hasRanges?e.push(new z({variableName:"",dimensionName:c[d].name,isSlice:!1,values:[c[d].values[0]]})):e.push(new z({variableName:"",
dimensionName:c[d].name,isSlice:!0,values:[c[d].extent[0]]})));this._defaultMultidimensionalDefinition=e;f.callback(e)}),function(a){f.errback(a)});return f},_setDefaultMultidimensionalDefinition:function(a){var b,c={};this.getDefaultMultidimensionalDefinition().then(m.hitch(this,function(d){b=d;0<b.length&&(this.mosaicRule?(c=m.clone(this.mosaicRule),c.multidimensionalDefinition=b):this.defaultMosaicRule?(c=m.clone(this.defaultMosaicRule),c.multidimensionalDefinition=b):c=new A({multidimensionalDefinition:b}),
this.setMosaicRule(c,a))}))},_setDefaultRenderingRule:function(a){var b={};if(!this.renderingRule&&"esri.layers.ArcGISImageServiceVectorLayer"!==this.declaredClass&&this.rasterFunctionInfos&&this.rasterFunctionInfos.length&&"none"!==this.rasterFunctionInfos[0].name.toLowerCase())b.rasterFunction=this.rasterFunctionInfos[0].name;else if(!this.renderingRule&&"esri.layers.ArcGISImageServiceVectorLayer"===this.declaredClass&&10.3<this.version){var c="esriImageServiceDataTypeVector-UV"===this.serviceDataType?
7:10;b.rasterFunction="Resample";b.rasterFunctionArguments={ResamplingType:c,InputCellSize:{x:this.pixelSizeX,y:this.pixelSizeY}}}b.hasOwnProperty("rasterFunction")&&(this.defaultRenderingRule=new C(b),this.setRenderingRule(this.defaultRenderingRule,a))},_cleanupRequestParams:function(a){if(!a)return a;if(a.time&&a.mosaicRule){var c=new A(d.fromJson(a.mosaicRule));if(c&&c.multidimensionalDefinition&&0<c.multidimensionalDefinition.length){var e=b.filter(c.multidimensionalDefinition,function(a){return"StdTime"!==
a.dimensionName});c.multidimensionalDefinition=e;a.mosaicRule=d.toJson(c.toJson())}}var c="displayOnPan drawMode styling id opacity visible resourceInfo useMapDimensionValue extent".split(" "),f;for(f in c)a.hasOwnProperty(c[f])&&delete a[c[f]];return a},_removeVisualizationStretchFunction:function(a){var c=a&&a.functionName;if(!c||"stretch"!==c.toLowerCase())return a;var d=a.functionArguments.Raster;return d&&d.functionName&&b.some(this.rasterFunctionInfos,function(a){return d.functionName===a.name})?
d:a},_isScientificData:function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType||"esriImageServiceDataTypeScientific"===this.serviceDataType},_isVectorData:function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType},_isRasterFunctionInfoAvailable:function(a){return b.some(a&&(this.rasterFunctionInfos||[]),function(b){return b&&b.name&&
b.name.toLowerCase()===a.toLowerCase()})},_createPixelData:function(a){a=new H({width:2,height:2,pixels:a,pixelType:this.pixelType,statistics:a});var b=this.fullExtent.getCenter(),b=new v(b.x,b.y,b.x+this.pixelSizeX,b.y+this.pixelSizeY,this.spatialReference);return{pixelBlock:a,extent:b}},_resolve:function(a,b,c,d,e){b&&this[b].apply(this,a);c&&c.apply(null,a);d&&t._resDfd(d,a,e)},_toggleTime:function(){var a=this._map;this.timeInfo&&this.useMapTime&&a&&!this.suspended?(this._timeConnect||(this._timeConnect=
h.connect(a,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(a.timeExtent)):(h.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},setUseMapTime:function(a,b){this.useMapTime=a;this._toggleTime();!b&&this._map&&this.refresh(!0)},_setTime:function(a){this._params&&(this._params.time=a?a.toJson().join(","):null)},_onTimeExtentChangeHandler:function(a){this.suspended||(this._setTime(a),this.refresh(!0))},handleSpatialReferenceChange:function(){this.onSpatialReferenceChange()}})})},
"esri/layers/MosaicRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../geometry/Point".split(" "),function(g,m,a,b,d,c){var h=g(null,{declaredClass:"esri.layers.MosaicRule",method:null,where:null,sortField:null,sortValue:null,ascending:!1,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,multidimensionalDefinition:[],constructor:function(a){m.isObject(a)&&(m.mixin(this,a),a.mosaicMethod&&(this.method=a.mosaicMethod),this.method&&"esri"!==this.method.toLowerCase().substring(0,
4)&&(this.method=this._getMethodEnum(this.method)),a.mosaicOperation&&(this.operation=a.mosaicOperation),this.operation&&"MT_"!==this.operation.toUpperCase().substring(0,3)&&(this.operation=this._getOperatorEnum(this.operation)),a.fids&&(this.objectIds=a.fids),a.viewpoint&&(this.viewpoint=new c(a.viewpoint)),this.multidimensionalDefinition=a.multidimensionalDefinition||[])},toJson:function(){var a=null,b=this.multidimensionalDefinition?this.multidimensionalDefinition.length:0;if(b)for(var a=[],c=
0;c<b;c++)a.push("esri.layers.DimensionalDefinition"===this.multidimensionalDefinition[c].declaredClass?this.multidimensionalDefinition[c].toJson():this.multidimensionalDefinition[c]);a={mosaicMethod:this.method,where:this.where,sortField:this.sortField,sortValue:this.sortValue,ascending:this.ascending,lockRasterIds:this.lockRasterIds,viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:this.objectIds,mosaicOperation:this.operation,multidimensionalDefinition:a};return d.filter(a,function(a){if(null!==
a)return!0})},_getMethodEnum:function(a){if(a){var b=h.METHOD_NONE;switch(a.toLowerCase()){case "byattribute":b=h.METHOD_ATTRIBUTE;break;case "center":b=h.METHOD_CENTER;break;case "lockraster":b=h.METHOD_LOCKRASTER;break;case "nadir":b=h.METHOD_NADIR;break;case "northwest":b=h.METHOD_NORTHWEST;break;case "seamline":b=h.METHOD_SEAMLINE;break;case "viewpoint":b=h.METHOD_VIEWPOINT}return b}},_getOperatorEnum:function(a){if(a)switch(a.toLowerCase()){case "first":return h.OPERATION_FIRST;case "last":return h.OPERATION_LAST;
case "max":return h.OPERATION_MAX;case "min":return h.OPERATION_MIN;case "blend":return h.OPERATION_BLEND;case "mean":return h.OPERATION_MEAN;case "sum":return h.OPERATION_SUM}}});m.mixin(h,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",
OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND",OPERATION_SUM:"MT_SUM"});return h})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(g,m,a,b,d){var c=g(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,constructor:function(a){if(m.isObject(a)){var b=
0;this.functionName=a.rasterFunction;this.functionArguments=m.clone(a.rasterFunctionArguments||a.arguments);m.mixin(this,a);if(a=this.functionArguments)if(a.Raster=this._toRasterFunction(a.Raster),a.Raster2=this._toRasterFunction(a.Raster2),a.DEM=this._toRasterFunction(a.DEM),a.FillRaster=this._toRasterFunction(a.FillRaster),a.Rasters&&a.Rasters.length)for(b=0;b<a.Rasters.length;b++)a.Rasters[b]=this._toRasterFunction(a.Rasters[b])}},_toRasterFunction:function(a){return a&&(a.rasterFunction||a.functionName)?
new c(a):a},_rfToJson:function(a){a&&"esri.layers.RasterFunction"===a.declaredClass&&(a=a.toJson());return a},toJson:function(){var a=m.clone(this.functionArguments||this.arguments);if(a&&(a.Raster=this._rfToJson(a.Raster),a.Raster2=this._rfToJson(a.Raster2),a.DEM=this._rfToJson(a.DEM),a.FillRaster=this._rfToJson(a.FillRaster),a.Rasters&&a.Rasters.length)){var b,c=[];for(b=0;b<a.Rasters.length;b++)c.push(this._rfToJson(a.Rasters[b]));a.Rasters=c}return d.filter({rasterFunction:this.functionName,rasterFunctionArguments:a,
variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(a){if(null!==a&&void 0!==a)return!0})}});return c})},"esri/layers/DimensionalDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(g,m,a,b,d){return g(null,{declaredClass:"esri.layers.DimensionalDefinition",variableName:null,dimensionName:null,values:[],isSlice:!1,constructor:function(a){m.isObject(a)&&m.mixin(this,a)},toJson:function(){return d.filter({variableName:this.variableName,
dimensionName:this.dimensionName,values:this.values,isSlice:this.isSlice},function(a){return null!==a})}})})},"esri/layers/Raster":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/config dojo/json dojo/sniff ../kernel ../Evented ../request ../geometry/Extent ../SpatialReference ../deferredUtils ./PixelBlock ./rasterFormats/LercCodec ./rasterFormats/Lerc2Codec".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x){var B,A,C,z,F,H,J=null,
I=null,K=function(a){"U1"===a||"U2"===a||"U4"===a||"U8"===a?(a="U8",I=Math.pow(2,8)-1,J=Uint8Array):"U16"===a?(I=I||Math.pow(2,16)-1,J=Uint16Array):"U32"===a?(I=I||Math.pow(2,32)-1,J=Uint32Array):"S8"===a?(I=I||0-Math.pow(2,7),J=Int8Array):"S16"===a?(I=I||0-Math.pow(2,15),J=Int16Array):"S32"===a?(I=I||0-Math.pow(2,31),J=Int32Array):J=Float32Array;return a},M=function(a,b){return a.height!==b.height||a.width!==b.width?!1:!0};return m(e,{declaredClass:"esri.layers.Raster",imageServiceUrl:null,validPixelTypes:"U1 U2 U4 U8 U16 U32 S8 S16 S32 F32".split(" "),
validFormats:"lerc jpeg jpg jpgpng png png8 png24 png32 bip bsq tiff".split(" "),_eventMap:{"raster-read-complete":["pixelData","params"]},constructor:function(a){this.imageServiceUrl=a;this.registerConnectEvents();this._loadRasterFormatModules()},read:function(c,e,f){var h=this,g=new b(t._dfdCanceller);if(10>n("ie"))throw"This browser is not supported.";if(!c.imageServiceParameters)throw"Insufficient parameters to read data";var m=a.clone(c.imageServiceParameters),s=c.pixelType;d.some(this.validPixelTypes,
function(a){return a===s})||(m.pixelType="F32");d.some(this.validFormats,function(a){return a.toLowerCase()===m.format.toLowerCase()})||(m.format="lerc");var u=c.decodeFunc,v;this._prepareGetImageParameters(m);var q=m.width,k=m.height,r=m.extent;delete m.width;delete m.height;delete m.extent;g._pendingDfd=p({url:this.imageServiceUrl+"/exportImage",handleAs:"arraybuffer",content:a.mixin(m,{f:"image"}),load:function(a){h.decode(a,{width:q,height:k,planes:null,pixelType:s,noDataValue:m.noData,format:m.format,
decodeFunc:u}).then(function(a){v={pixelBlock:a,extent:r};h._resolve([v,m],"onRasterReadComplete",e,g)},function(a){h._resolve([a],null,f,g,!0)})},error:function(a){h._resolve([a],null,f,g,!0)}});return g.promise},decode:function(a,b){if(void 0===b||null===b)throw"missing decode options";var c,d;b.format&&(c=b.format.toUpperCase());"BSQ"!==c&&"BIP"!==c&&(c=this._getFormat(a));d=b.decodeFunc;if(void 0===d||null===d)d=this._getFormatDecoderDfd(c);return d(a,b)},onRasterReadComplete:function(){},_prepareGetImageParameters:function(b){if(b.size&&
b.bbox){var c=b.size.split(",");b.width=parseFloat(c[0]);b.height=parseFloat(c[1]);b.extent||(c=b.bbox.split(","),b.extent=new s(parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]),new u(b.bboxSR)))}else{if(!b.width||Math.floor(b.width)!==b.width||!b.height||Math.floor(b.height)!==b.height)throw"Incorrect Image Dimensions";if(!b.extent||"esri.geometry.Extent"!==b.extent.declaredClass)throw"Incorrect extent";var c=b.extent,d=c.spatialReference.wkid||h.toJson(c.spatialReference.toJson());
delete b._ts;a.mixin(b,{bbox:c.xmin+","+c.ymin+","+c.xmax+","+c.ymax,imageSR:d,bboxSR:d,size:b.width+","+b.height},b.disableClientCaching?{_ts:(new Date).getTime()}:{})}},_adjustExtent:function(a,b,c){var d=a.ymax-a.ymin,e=a.xmax-a.xmin;c>=b?a.ymax=a.ymin+e*b/c:(e=d*c/b,a.xmax=a.xmin+e);return a},_resolve:function(a,b,c,d,e){b&&this[b].apply(this,a);c&&c.apply(null,a);d&&t._resDfd(d,a,e)},_getFormatDecoderDfd:function(c){var d=null;switch(c){case "LERC":d=this._decodeLerc;break;case "LERC2":d=this._decodeLerc2;
break;case "JPEG":d=this._decodeJpeg;break;case "PNG":d=this._decodePng;break;case "BSQ":d=this._decodeBsq;break;case "BIP":d=this._decodeBip;break;case "TIFF":d=this._decodeTiff;break;default:d=function(a,b){throw"The raster format is not supported";}}d=a.hitch(this,d);return function(a,e){var f=new b;try{var h;"LERC"===c||!0===F?(h=d(a,e),f.resolve(h)):H.then(function(){h=d(a,e);f.resolve(h)})}catch(g){f.reject(g)}return f}},_getFormat:function(a){a=new Uint8Array(a,0,10);var b="";if(255===a[0]&&
216===a[1])b="JPEG";else if(137===a[0]&&80===a[1]&&78===a[2]&&71===a[3])b="PNG";else if(67===a[0]&&110===a[1]&&116===a[2]&&90===a[3]&&73===a[4]&&109===a[5]&&97===a[6]&&103===a[7]&&101===a[8]&&32===a[9])b="LERC";else if(76===a[0]&&101===a[1]&&114===a[2]&&99===a[3]&&50===a[4]&&32===a[5])b="LERC2";else if(-1<String.fromCharCode.apply(null,a).toLowerCase().indexOf("error"))b="ERROR";else if(73===a[0]&&73===a[1]&&42===a[2]&&0===a[3]||77===a[0]&&77===a[1]&&0===a[2]&&42===a[3])b="TIFF";return b},_validateDecodeParams:function(a){if(!a.height||
Math.floor(a.height)!==a.height)throw"Height not provided.";if(!a.width||Math.floor(a.width)!==a.width)throw"Width not provided.";},_decodeJpeg:function(a,b){if(!B)throw"The jpeg decoder module is not loaded.";this._validateDecodeParams(b);var c=(new B).decode(a);if(!M(c,b))throw"The decoded image dimensions are incorrect.";var d=[],e,f;for(e=0;e<c.pixels.length;e++)f=c.pixels[e],d.push(this._calculateBandStatistics(f));return new w({width:c.width,height:c.height,pixels:c.pixels,pixelType:"U8",mask:c.mask,
statistics:d})},_decodePng:function(a,b){if(!A)throw"The png decoder module is not loaded.";this._validateDecodeParams(b);var c=new Uint8Array(a),d=new A(c),c=new Uint8Array(4*b.width*b.height);d.copyToImageData(c,d.decodePixels());for(var e=d=0,f,e=new Uint8Array(b.width*b.height),d=0;d<b.width*b.height;d++)e[d]=c[4*d+3];for(var h=new w({width:b.width,height:b.height,pixels:[],pixelType:"U8",mask:e,statistics:[]}),d=0;3>d;d++){f=new Uint8Array(b.width*b.height);for(e=0;e<b.width*b.height;e++)f[e]=
c[4*e+d];h.addData({pixels:f,statistics:this._calculateBandStatistics(f)})}return h},_decodeBsq:function(a,b){if(!C)throw"The bsq decoder module is not loaded.";this._validateDecodeParams(b);I=b.noDataValue;b.pixelType=K(b.pixelType);var c=C.decodeBSQ(a,{bandCount:b.planes,width:b.width,height:b.height,pixelType:J,noDataValue:I}),d=[],e,f=null;for(e=0;e<c.pixels.length;e++)f=c.pixels[e],d.push(this._calculateBandStatistics(f));return new w({width:b.width,height:b.height,pixels:c.pixels,pixelType:b.pixelType,
mask:c.maskData,statistics:d})},_decodeBip:function(a,b){this._validateDecodeParams(b);I=b.noDataValue;b.pixelType=K(b.pixelType);var c=C.decodeBIP(a,{bandCount:b.planes,width:b.width,height:b.height,pixelType:J,noDataValue:I}),d=[],e,f=null;for(e=0;e<c.pixels.length;e++)f=c.pixels[e],d.push(this._calculateBandStatistics(f));return new w({width:b.width,height:b.height,pixels:c.pixels,pixelType:b.pixelType,mask:c.maskData,statistics:d})},_decodeTiff:function(a,b){this._validateDecodeParams(b);I=b.noDataValue;
b.pixelType=K(b.pixelType);var c=z.decode(a),d=[],e,f=null;for(e=0;e<c.pixels.length;e++)f=c.pixels[e],d.push(this._calculateBandStatistics(f,c.maskData));return new w({width:c.width,height:c.height,pixels:c.pixels,pixelType:c.pixelType,mask:c.maskData,statistics:d})},_decodeLerc:function(a,b){this._validateDecodeParams(b);I=b.noDataValue;b.pixelType=K(b.pixelType);for(var c=0,d,e=0,f,h=a.byteLength-10;e<h;){var g=v.decode(a,{inputOffset:e,encodedMaskData:d,returnMask:0===c?!0:!1,returnEncodedMask:0===
c?!0:!1,returnFileInfo:!0,pixelType:J,noDataValue:I}),e=g.fileInfo.eofOffset;0===c&&(d=g.encodedMaskData,f=new w({width:b.width,height:b.height,pixels:[],pixelType:b.pixelType,mask:g.maskData,statistics:[]}));c++;if(!M(g,b))throw"The decoded image dimensions are incorrect";f.addData({pixels:g.pixelData,statistics:{minValue:g.minValue,maxValue:g.maxValue,noDataValue:g.noDataValue}})}return f},_decodeLerc2:function(a,b){this._validateDecodeParams(b);I=b.noDataValue;b.pixelType=K(b.pixelType);for(var c=
0,d,e,f=0,h,g=a.byteLength-10;f<g;){e=x.decode(a,{inputOffset:f,maskData:d,returnFileInfo:!0});f=e.fileInfo.eofOffset;0===c&&(d=e.maskData,h=new w({width:b.width,height:b.height,pixels:[],pixelType:e.fileInfo.pixelType,mask:e.maskData,statistics:[]}));c++;if(!M(e,b))throw"The decoded image dimensions are incorrect";h.addData({pixels:e.pixelData,statistics:{minValue:e.minValue,maxValue:e.maxValue,noDataValue:e.noDataValue}})}return h},_calculateBandStatistics:function(a,b){var c=Infinity,d=-Infinity,
e=a.length,f,h=0;if(b)for(f=0;f<e;f++)b[f]&&(h=a[f],c=h<c?h:c,d=h>d?h:d);else for(f=0;f<e;f++)h=a[f],c=h<c?h:c,d=h>d?h:d;return{minValue:c,maxValue:d}},_loadRasterFormatModules:function(){F||(H||(H=new b),10>n("ie")?H.isRejected()||H.reject("unsupported browser version"):g(["./rasterFormats/JpgPlus","./rasterFormats/Png","./rasterFormats/Raw","./rasterFormats/TiffDecoder","./rasterFormats/Zlib"],function(a,b,c,d){B=a;A=b;C=c;z=d;F=!0;H.isResolved()||H.resolve(!0)}))}})})},"esri/layers/PixelBlock":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(g,m,a,b){return g([],{declaredClass:"esri.layers.PixelBlock",planes:null,width:null,height:null,pixelType:null,pixels:[],statistics:[],constructor:function(a){if(a){if(!a.width||Math.floor(a.width)!==a.width)throw"PixelBlock: incorrect width";if(!a.height||Math.floor(a.height)!==a.height)throw"PixelBlock: incorrect height";if(!a.pixels||!a.statistics)throw"PixelBlock: pixel data or statistics not present";this.width=a.width;this.height=a.height;this.pixels=
a.pixels;this.pixelType=a.pixelType||null;this.statistics=a.statistics;this.mask=a.mask||null}},getPlaneCount:function(){return this.pixels.length!==this.statistics.length?0:this.statistics.length},addData:function(a){if(!a.pixels||!a.statistics)throw"Pixel data or statistics are not present";if(a.pixels.length!==this.width*this.height)throw"Inconsistent pixel data size";this.statistics.push(a.statistics);this.pixels.push(a.pixels)},getAsRGBA:function(){var a=new ArrayBuffer(4*this.width*this.height);
switch(this.pixelType){case "S8":case "S16":case "U16":case "S32":case "U32":case "F32":case "F64":this._fillFromNon8Bit(a);break;default:this._fillFrom8Bit(a)}return new Uint8ClampedArray(a)},getAsRGBAFloat:function(){var a=new Float32Array(4*this.width*this.height);this._fillFrom32Bit(a);return a},clone:function(){var a=new this.constructor;a.width=this.width;a.height=this.height;a.pixelType=this.pixelType;this.mask&&(a.mask=new Uint8Array(this.mask));var b,h;if(this.pixels){a.pixels=[];h=this.pixels.length;
for(b=0;b<h;b++)a.pixels[b]=new Float32Array(this.pixels[b])}if(this.statistics){a.statistics=[];h=this.statistics.length;for(b=0;b<h;b++)a.statistics[b]=m.clone(this.statistics[b])}return a},_fillFrom8Bit:function(a){var b=this.pixels,h=this.mask;if(!a||!b||!b.length)return 0;var g,f,e;g=f=e=b[0];3<=b.length&&(f=b[1],e=b[2]);var b=new Uint32Array(a),m=this.width*this.height;if(g.length!==m)return 0;if(h&&h.length===m)for(a=0;a<m;a++)h[a]&&(b[a]=-16777216|e[a]<<16|f[a]<<8|g[a]);else for(a=0;a<m;a++)b[a]=
-16777216|e[a]<<16|f[a]<<8|g[a]},_fillFromNon8Bit:function(a){var b=this.pixels,h=this.mask,g=this.statistics;if(!a||!b||!b.length)return 0;var f=1,e=0;g&&0<g.length?(e=g[0].minValue,f=255/(g[0].maxValue-g[0].minValue)):(f=255,"S8"===this.pixelType?(e=-128,f=127):"U16"===this.pixelType?f=65535:"S16"===this.pixelType?(e=-32768,f=32767):"U32"===this.pixelType?f=4294967295:"S32"===this.pixelType?(e=-2147483648,f=2147483647):"F32"===this.pixelType?(e=-3.4*1E39,f=3.4*1E39):"F64"===this.pixelType&&(e=-Number.MAX_VALUE,
f=Number.MAX_VALUE),f=255/(f-e));a=new Uint32Array(a);var g=this.width*this.height,m,s,u;m=b[0];if(m.length!==g)return 0;if(3<=b.length)if(s=b[1],u=b[2],h&&h.length===g)for(b=0;b<g;b++)h[b]&&(a[b]=-16777216|(u[b]-e)*f<<16|(s[b]-e)*f<<8|(m[b]-e)*f);else for(b=0;b<g;b++)a[b]=-16777216|(u[b]-e)*f<<16|(s[b]-e)*f<<8|(m[b]-e)*f;else if(h&&h.length===g)for(b=0;b<g;b++)s=(m[b]-e)*f,h[b]&&(a[b]=-16777216|s<<16|s<<8|s);else for(b=0;b<g;b++)s=(m[b]-e)*f,a[b]=-16777216|s<<16|s<<8|s},_fillFrom32Bit:function(a){var b=
this.pixels,h=this.mask;if(!a||!b||!b.length)return 0;var g,f,e;g=f=e=b[0];3<=b.length&&(f=b[1],e=b[2]);var m=this.width*this.height;if(g.length!==m)return 0;var s=0;if(h&&h.length===m)for(b=0;b<m;b++)a[s++]=g[b],a[s++]=f[b],a[s++]=e[b],a[s++]=h[b];else for(b=0;b<m;b++)a[s++]=g[b],a[s++]=f[b],a[s++]=e[b],a[s++]=255}})})},"esri/layers/rasterFormats/LercCodec":function(){define([],function(){var g={defaultNoDataValue:-3.4027999387901484E38,decode:function(a,b){var d;b=b||{};var c=b.inputOffset||0,h=
b.encodedMaskData||null===b.encodedMaskData,n={},f=new Uint8Array(a,c,10);n.fileIdentifierString=String.fromCharCode.apply(null,f);if("CntZImage"!=n.fileIdentifierString.trim())throw"Unexpected file identifier string: "+n.fileIdentifierString;c+=10;f=new DataView(a,c,24);n.fileVersion=f.getInt32(0,!0);n.imageType=f.getInt32(4,!0);n.height=f.getUint32(8,!0);n.width=f.getUint32(12,!0);n.maxZError=f.getFloat64(16,!0);c+=24;if(!h)if(f=new DataView(a,c,16),n.mask={},n.mask.numBlocksY=f.getUint32(0,!0),
n.mask.numBlocksX=f.getUint32(4,!0),n.mask.numBytes=f.getUint32(8,!0),n.mask.maxValue=f.getFloat32(12,!0),c+=16,0<n.mask.numBytes){var h=new Uint8Array(Math.ceil(n.width*n.height/8)),f=new DataView(a,c,n.mask.numBytes),e=f.getInt16(0,!0),p=2,s=0;do{if(0<e)for(;e--;)h[s++]=f.getUint8(p++);else for(var u=f.getUint8(p++),e=-e;e--;)h[s++]=u;e=f.getInt16(p,!0);p+=2}while(p<n.mask.numBytes);if(-32768!==e||s<h.length)throw"Unexpected end of mask RLE encoding";n.mask.bitset=h;c+=n.mask.numBytes}else 0===
(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)&&(h=new Uint8Array(Math.ceil(n.width*n.height/8)),n.mask.bitset=h);f=new DataView(a,c,16);n.pixels={};n.pixels.numBlocksY=f.getUint32(0,!0);n.pixels.numBlocksX=f.getUint32(4,!0);n.pixels.numBytes=f.getUint32(8,!0);n.pixels.maxValue=f.getFloat32(12,!0);c+=16;h=n.pixels.numBlocksX;f=n.pixels.numBlocksY;h+=0<n.width%h?1:0;e=f+(0<n.height%f?1:0);n.pixels.blocks=Array(h*e);for(s=p=0;s<e;s++)for(u=0;u<h;u++){var t=0,f=new DataView(a,c,Math.min(10,a.byteLength-
c)),w={};n.pixels.blocks[p++]=w;var v=f.getUint8(0);t++;w.encoding=v&63;if(3<w.encoding)throw"Invalid block encoding ("+w.encoding+")";if(2===w.encoding)c++;else{if(0!==v&&2!==v){v>>=6;w.offsetType=v;if(2===v)w.offset=f.getInt8(1),t++;else if(1===v)w.offset=f.getInt16(1,!0),t+=2;else if(0===v)w.offset=f.getFloat32(1,!0),t+=4;else throw"Invalid block offset type";if(1===w.encoding)if(v=f.getUint8(t),t++,w.bitsPerPixel=v&63,v>>=6,w.numValidPixelsType=v,2===v)w.numValidPixels=f.getUint8(t),t++;else if(1===
v)w.numValidPixels=f.getUint16(t,!0),t+=2;else if(0===v)w.numValidPixels=f.getUint32(t,!0),t+=4;else throw"Invalid valid pixel count type";}c+=t;if(3!=w.encoding)if(0===w.encoding){v=(n.pixels.numBytes-1)/4;if(v!==Math.floor(v))throw"uncompressed block has invalid length";f=new ArrayBuffer(4*v);t=new Uint8Array(f);t.set(new Uint8Array(a,c,4*v));f=new Float32Array(f);w.rawData=f;c+=4*v}else 1===w.encoding&&(v=Math.ceil(w.numValidPixels*w.bitsPerPixel/8),f=Math.ceil(v/4),f=new ArrayBuffer(4*f),t=new Uint8Array(f),
t.set(new Uint8Array(a,c,v)),w.stuffedData=new Uint32Array(f),c+=v)}}n.eofOffset=c;var c=null!=b.noDataValue?b.noDataValue:g.defaultNoDataValue,e=b.encodedMaskData,x=b.returnMask,p=0,s=n.pixels.numBlocksX,u=n.pixels.numBlocksY,w=Math.floor(n.width/s),t=Math.floor(n.height/u),v=2*n.maxZError,h=Number.MAX_VALUE,B,e=e||(n.mask?n.mask.bitset:null),A,f=new (b.pixelType||Float32Array)(n.width*n.height);x&&e&&(A=new Uint8Array(n.width*n.height));for(var x=new Float32Array(w*t),C,z,F=0;F<=u;F++){var H=F!==
u?t:n.height%u;if(0!==H)for(var J=0;J<=s;J++){var I=J!==s?w:n.width%s;if(0!==I){var K=F*n.width*t+J*w,M=n.width-I,L=n.pixels.blocks[p],G,O;if(2>L.encoding){if(0===L.encoding)G=L.rawData;else{G=L.stuffedData;O=L.bitsPerPixel;B=L.numValidPixels;C=L.offset;z=v;var S=x,U=n.pixels.maxValue,T=(1<<O)-1,E=0,Q=void 0,N=0,q=void 0,k=void 0,r=Math.ceil((U-C)/z),Q=4*G.length-Math.ceil(O*B/8);G[G.length-1]<<=8*Q;for(Q=0;Q<B;Q++)0===N&&(k=G[E++],N=32),N>=O?(q=k>>>N-O&T,N-=O):(N=O-N,q=(k&T)<<N&T,k=G[E++],N=32-N,
q+=k>>>N),S[Q]=q<r?C+q*z:U;G=x}O=0}else d=2===L.encoding?0:L.offset;var y;if(e)for(z=0;z<H;z++){K&7&&(y=e[K>>3],y<<=K&7);for(C=0;C<I;C++)K&7||(y=e[K>>3]),y&128?(A&&(A[K]=1),B=2>L.encoding?G[O++]:d,h=h>B?B:h,f[K++]=B):(A&&(A[K]=0),f[K++]=c),y<<=1;K+=M}else if(2>L.encoding)for(z=0;z<H;z++){for(C=0;C<I;C++)B=G[O++],h=h>B?B:h,f[K++]=B;K+=M}else{h=h>d?d:h;for(z=0;z<H;z++){for(C=0;C<I;C++)f[K++]=d;K+=M}}if(1===L.encoding&&O!==L.numValidPixels)throw"Block and Mask do not match";p++}}}d=A;A={width:n.width,
height:n.height,pixelData:f,minValue:h,maxValue:n.pixels.maxValue,noDataValue:c};d&&(A.maskData=d);b.returnEncodedMask&&n.mask&&(A.encodedMaskData=n.mask.bitset?n.mask.bitset:null);if(b.returnFileInfo&&(A.fileInfo=m(n),b.computeUsedBitDepths)){d=A.fileInfo;y=n.pixels.numBlocksX*n.pixels.numBlocksY;G={};for(O=0;O<y;O++)c=n.pixels.blocks[O],0===c.encoding?G.float32=!0:1===c.encoding?G[c.bitsPerPixel]=!0:G[0]=!0;n=Object.keys(G);d.bitDepths=n}return A}},m=function(a){return{fileIdentifierString:a.fileIdentifierString,
fileVersion:a.fileVersion,imageType:a.imageType,height:a.height,width:a.width,maxZError:a.maxZError,eofOffset:a.eofOffset,mask:a.mask?{numBlocksX:a.mask.numBlocksX,numBlocksY:a.mask.numBlocksY,numBytes:a.mask.numBytes,maxValue:a.mask.maxValue}:null,pixels:{numBlocksX:a.pixels.numBlocksX,numBlocksY:a.pixels.numBlocksY,numBytes:a.pixels.numBytes,maxValue:a.pixels.maxValue,noDataValue:this.noDataValue}}};return g})},"esri/layers/rasterFormats/Lerc2Codec":function(){define([],function(){var g={unstuff:function(a,
d,c,h,g,f,e,m){var s=(1<<c)-1,u=0,t,w=0,v,x;t=4*a.length-Math.ceil(c*h/8);a[a.length-1]<<=8*t;if(g)for(t=0;t<h;t++)0===w&&(x=a[u++],w=32),w>=c?(v=x>>>w-c&s,w-=c):(w=c-w,v=(x&s)<<w&s,x=a[u++],w=32-w,v+=x>>>w),d[t]=g[v];else{g=Math.ceil((m-f)/e);for(t=0;t<h;t++)0===w&&(x=a[u++],w=32),w>=c?(v=x>>>w-c&s,w-=c):(w=c-w,v=(x&s)<<w&s,x=a[u++],w=32-w,v+=x>>>w),d[t]=v<g?f+v*e:m}},unstuffLUT:function(a,d,c,h,g,f){var e=(1<<d)-1,m=0,s=0,u=0,t=u=0,w,v=[],s=4*a.length-Math.ceil(d*c/8);a[a.length-1]<<=8*s;for(var x=
Math.ceil((f-h)/g),s=0;s<c;s++)0===u&&(w=a[m++],u=32),u>=d?(t=w>>>u-d&e,u-=d):(u=d-u,t=(w&e)<<u&e,w=a[m++],u=32-u,t+=w>>>u),v[s]=t<x?h+t*g:f;v.unshift(h);return v},unstuff2:function(a,d,c,h,g,f,e,m){var s=(1<<c)-1,u=0,t,w=0,v=0,x,B,A;if(g)for(t=0;t<h;t++)0===w&&(B=a[u++],w=32,v=0),w>=c?(x=B>>>v&s,w-=c,v+=c):(A=c-w,x=B>>>v&s,B=a[u++],w=32-A,x|=(B&(1<<A)-1)<<c-A,v=A),d[t]=g[x];else{g=Math.ceil((m-f)/e);for(t=0;t<h;t++)0===w&&(B=a[u++],w=32,v=0),w>=c?(x=B>>>v&s,w-=c,v+=c):(A=c-w,x=B>>>v&s,B=a[u++],w=
32-A,x|=(B&(1<<A)-1)<<c-A,v=A),d[t]=x<g?f+x*e:m}return d},unstuffLUT2:function(a,d,c,h,g,f){for(var e=(1<<d)-1,m=0,s=0,u=0,t=0,w=0,v=0,x,B=[],A=Math.ceil((f-h)/g),s=0;s<c;s++)0===t&&(x=a[m++],t=32,v=0),t>=d?(w=x>>>v&e,t-=d,v+=d):(u=d-t,w=x>>>v&e,x=a[m++],t=32-u,w|=(x&(1<<u)-1)<<d-u,v=u),B[s]=w<A?h+w*g:f;B.unshift(h);return B},originalUnstuff:function(a,d,c,h){var g=(1<<c)-1,f=0,e,m=0,s,u;e=4*a.length-Math.ceil(c*h/8);a[a.length-1]<<=8*e;for(e=0;e<h;e++)0===m&&(u=a[f++],m=32),m>=c?(s=u>>>m-c&g,m-=
c):(m=c-m,s=(u&g)<<m&g,u=a[f++],m=32-m,s+=u>>>m),d[e]=s;return d},originalUnstuff2:function(a,d,c,h){var g=(1<<c)-1,f=0,e,m=0,s=0,u,t,w;for(e=0;e<h;e++)0===m&&(t=a[f++],m=32,s=0),m>=c?(u=t>>>s&g,m-=c,s+=c):(w=c-m,u=t>>>s&g,t=a[f++],m=32-w,u|=(t&(1<<w)-1)<<c-w,s=w),d[e]=u;return d}},m={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(a){for(var d=65535,c=65535,h=a.length,g=Math.floor(h/2),f=0;g;){var e=359<=g?359:g,g=g-e;do d+=a[f++]<<8,c+=d+=a[f++];while(--e);d=(d&65535)+(d>>>16);c=(c&65535)+
(c>>>16)}h&1&&(c+=d+=a[f]<<8);return((c&65535)+(c>>>16)<<16|(d&65535)+(d>>>16))>>>0},readHeaderInfo:function(a,d){var c=d.ptr,h=new Uint8Array(a,c,6),g={};g.fileIdentifierString=String.fromCharCode.apply(null,h);if(0!==g.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+g.fileIdentifierString;c+=6;h=new DataView(a,c,52);g.fileVersion=h.getInt32(0,!0);c+=4;3<=g.fileVersion&&(g.checksum=h.getUint32(4,!0),c+=4);h=new DataView(a,c,48);g.height=h.getUint32(0,
!0);g.width=h.getUint32(4,!0);g.numValidPixel=h.getUint32(8,!0);g.microBlockSize=h.getInt32(12,!0);g.blobSize=h.getInt32(16,!0);g.imageType=h.getInt32(20,!0);g.maxZError=h.getFloat64(24,!0);g.zMin=h.getFloat64(32,!0);g.zMax=h.getFloat64(40,!0);c+=48;d.headerInfo=g;d.ptr=c;if(3<=g.fileVersion&&(c=this.computeChecksumFletcher32(new Uint8Array(a,c-48,g.blobSize-14)),c!==g.checksum))throw"Checksum failed.";return!0},readMask:function(a,d){var c=d.ptr,h=d.headerInfo,g=h.width*h.height,f=h.numValidPixel,
e=new DataView(a,c,4),h={};h.numBytes=e.getUint32(0,!0);c+=4;if((0===f||g===f)&&0!==h.numBytes)throw"invalid mask";if(0===f)f=new Uint8Array(Math.ceil(g/8)),h.bitset=f,e=new Uint8Array(g),d.pixels.resultMask=e,c+=h.numBytes;else if(0<h.numBytes){var f=new Uint8Array(Math.ceil(g/8)),e=new DataView(a,c,h.numBytes),m=e.getInt16(0,!0),s=2,u=0,t=0;do{if(0<m)for(;m--;)f[u++]=e.getUint8(s++);else{t=e.getUint8(s++);for(m=-m;m--;)f[u++]=t}m=e.getInt16(s,!0);s+=2}while(s<h.numBytes);if(-32768!==m||u<f.length)throw"Unexpected end of mask RLE encoding";
e=new Uint8Array(g);for(s=s=m=0;s<g;s++)s&7?(m=f[s>>3],m<<=s&7):m=f[s>>3],m&128&&(e[s]=1);d.pixels.resultMask=e;h.bitset=f;c+=h.numBytes}d.ptr=c;d.mask=h;return!0},readDataOneSweep:function(a,d,c){var h=d.ptr,g=d.headerInfo,f=g.width*g.height,g=g.numValidPixel*m.getDateTypeSize(g.imageType);if(c===Uint8Array)a=new Uint8Array(a,h,g);else{var e=new ArrayBuffer(g);(new Uint8Array(e)).set(new Uint8Array(a,h,g));a=new c(e)}if(a.length===f)d.pixels.resultPixels=a;else{d.pixels.resultPixels=new c(f);for(e=
e=c=0;e<f;e++)d.pixels.resultMask[e]&&(d.pixels.resultPixels[e]=a[c++])}d.ptr=h+g;return!0},readHuffman:function(b,d,c){var h=d.headerInfo,g=h.width*h.height,f=this.HUFFMAN_LUT_BITS_MAX,h=new DataView(b,d.ptr,16);d.ptr+=16;if(2>h.getInt32(0,!0))throw"unsupported Huffman version";var e=h.getInt32(4,!0),p=h.getInt32(8,!0),s=h.getInt32(12,!0);if(p>=s)return!1;var u=new Uint32Array(s-p);m.decodeBits(b,d,u);for(var t=[],w,v,h=p;h<s;h++)w=h-(h<e?0:e),t[w]={first:u[h-p],second:null};h=b.byteLength-d.ptr;
u=Math.ceil(h/4);u=new ArrayBuffer(4*u);(new Uint8Array(u)).set(new Uint8Array(b,d.ptr,h));b=new Uint32Array(u);var u=0,x,B=0;x=b[0];for(h=p;h<s;h++)w=h-(h<e?0:e),v=t[w].first,0<v&&(t[w].second=x<<u>>>32-v,32-u>=v?(u+=v,32===u&&(u=0,B++,x=b[B])):(u+=v-32,B++,x=b[B],t[w].second|=x>>>32-u));for(var A=0===d.headerInfo.imageType?128:0,C=d.headerInfo.height,z=d.headerInfo.width,F=0,H=0,J=new a,h=0;h<t.length;h++)void 0!==t[h]&&(F=Math.max(F,t[h].first));for(var H=F>=f?f:F,f=[],I,h=p;h<s;h++)if(w=h-(h<
e?0:e),v=t[w].first,0<v)if(x=[v,w],v<=H){w=t[w].second<<H-v;I=1<<H-v;for(p=0;p<I;p++)f[w|p]=x}else{w=t[w].second;I=J;for(p=v-1;0<=p;p--)(v=w>>>p&1)?(I.right||(I.right=new a),I=I.right):(I.left||(I.left=new a),I=I.left),0===p&&!I.val&&(I.val=x[1])}var e=d.pixels.resultMask,K,t=s=0;0<u&&(B++,u=0);x=b[B];c=new c(g);if(d.headerInfo.numValidPixel===z*C)for(h=p=0;h<C;h++)for(w=0;w<z;w++,p++){g=0;t=K=x<<u>>>32-H;32-u<H&&(t=K|=b[B+1]>>>64-u-H);if(f[t])g=f[t][1],u+=f[t][0];else{K=x<<u>>>32-F;32-u<F&&(K|=b[B+
1]>>>64-u-F);I=J;for(t=0;t<F;t++)if(I=(v=K>>>F-t-1&1)?I.right:I.left,!I.left&&!I.right){g=I.val;u=u+t+1;break}}32<=u&&(u-=32,B++,x=b[B]);g-=A;g=0<w?g+s:0<h?g+c[p-z]:g+s;g&=255;s=c[p]=g}else for(h=p=0;h<C;h++)for(w=0;w<z;w++,p++)if(e[p]){g=0;t=K=x<<u>>>32-H;32-u<H&&(t=K|=b[B+1]>>>64-u-H);if(f[t])g=f[t][1],u+=f[t][0];else{K=x<<u>>>32-F;32-u<F&&(K|=b[B+1]>>>64-u-F);I=J;for(t=0;t<F;t++)if(I=(v=K>>>F-t-1&1)?I.right:I.left,!I.left&&!I.right){g=I.val;u=u+t+1;break}}32<=u&&(u-=32,B++,x=b[B]);g-=A;g=0<w&&
e[p-1]?g+s:0<h&&e[p-z]?g+c[p-z]:g+s;g&=255;s=c[p]=g}d.pixels.resultPixels=c;d.ptr=d.ptr+4*(B+1)+(0<u?4:0)},decodeBits:function(a,d,c,h){var m=d.headerInfo.fileVersion,f=0,e=new DataView(a,d.ptr,5),p=e.getUint8(0);f++;var s=p>>6,u=0===s?4:3-s,t=0<(p&32)?!0:!1,s=p&31,p=0;if(1===u)p=e.getUint8(f),f++;else if(2===u)p=e.getUint16(f,!0),f+=2;else if(4===u)p=e.getUint32(f,!0),f+=4;else throw"Invalid valid pixel count type";h=h||0;var u=2*d.headerInfo.maxZError,w,v,x;if(t){d.counter.lut++;x=e.getUint8(f);
f++;t=Math.ceil((x-1)*s/8);w=Math.ceil(t/4);w=new ArrayBuffer(4*w);v=new Uint8Array(w);d.ptr+=f;v.set(new Uint8Array(a,d.ptr,t));f=new Uint32Array(w);d.ptr+=t;for(e=0;x-1>>>e;)e++;t=Math.ceil(p*e/8);w=Math.ceil(t/4);w=new ArrayBuffer(4*w);v=new Uint8Array(w);v.set(new Uint8Array(a,d.ptr,t));a=new Uint32Array(w);d.ptr+=t;d=3<=m?g.unstuffLUT2(f,s,x-1,h,u,d.headerInfo.zMax):g.unstuffLUT(f,s,x-1,h,u,d.headerInfo.zMax);3<=m?g.unstuff2(a,c,e,p,d):g.unstuff(a,c,e,p,d)}else d.counter.bitstuffer++,e=s,d.ptr+=
f,0<e&&(t=Math.ceil(p*e/8),w=Math.ceil(t/4),w=new ArrayBuffer(4*w),v=new Uint8Array(w),v.set(new Uint8Array(a,d.ptr,t)),a=new Uint32Array(w),d.ptr+=t,3<=m?g.unstuff2(a,c,e,p,!1,h,u,d.headerInfo.zMax):g.unstuff(a,c,e,p,!1,h,u,d.headerInfo.zMax))},readTiles:function(a,d,c){var h=d.headerInfo,g=h.width,f=h.height,e=h.microBlockSize,h=h.imageType,p=Math.ceil(g/e),s=Math.ceil(f/e);d.pixels.numBlocksY=s;d.pixels.numBlocksX=p;for(var u=d.pixels.ptr=0,t=0,w=0,v=0,x=0,B=0,A=0,C=0,z=u=0,F=0,H=0,A=A=u=A=0,J,
I=new c(e*e),f=f%e||e,K=g%e||e,w=0;w<s;w++){x=w!==s-1?e:f;for(v=0;v<p;v++){B=v!==p-1?e:K;F=w*g*e+v*e;H=g-B;A=a.byteLength-d.ptr;t=new DataView(a,d.ptr,Math.min(10,A));J={};A=0;C=t.getUint8(0);A++;u=C>>6&255;z=C>>2&15;if(z!==(v*e>>3&15))throw"integrity issue";C&=3;if(3<C)throw d.ptr+=A,"Invalid block encoding ("+C+")";if(2===C)d.counter.constant++,d.ptr+=A;else if(0===C){d.counter.uncompressed++;d.ptr+=A;A=x*B*m.getDateTypeSize(h);u=a.byteLength-d.ptr;A=A<u?A:u;u=new ArrayBuffer(A);t=new Uint8Array(u);
t.set(new Uint8Array(a,d.ptr,A));J=new c(u);A=0;if(d.pixels.resultMask)for(u=0;u<x;u++){for(t=0;t<B;t++)d.pixels.resultMask[F]&&(d.pixels.resultPixels[F]=J[A++]),F++;F+=H}else for(u=0;u<x;u++){for(t=0;t<B;t++)d.pixels.resultPixels[F++]=J[A++];F+=H}d.ptr+=A*m.getDateTypeSize(h)}else if(u=m.getDataTypeUsed(h,u),J=m.getOnePixel(J,A,u,t),A+=m.getDateTypeSize(u),3===C)if(d.ptr+=A,d.counter.constantoffset++,d.pixels.resultMask)for(u=0;u<x;u++){for(t=0;t<B;t++)d.pixels.resultMask[F]&&(d.pixels.resultPixels[F]=
J),F++;F+=H}else for(u=0;u<x;u++){for(t=0;t<B;t++)d.pixels.resultPixels[F++]=J;F+=H}else if(d.ptr+=A,m.decodeBits(a,d,I,J),A=0,d.pixels.resultMask)for(u=0;u<x;u++){for(t=0;t<B;t++)d.pixels.resultMask[F]&&(d.pixels.resultPixels[F]=I[A++]),F++;F+=H}else for(u=0;u<x;u++){for(t=0;t<B;t++)d.pixels.resultPixels[F++]=I[A++];F+=H}}}},formatFileInfo:function(a){return{fileIdentifierString:a.headerInfo.fileIdentifierString,fileVersion:a.headerInfo.fileVersion,imageType:a.headerInfo.imageType,height:a.headerInfo.height,
width:a.headerInfo.width,numValidPixel:a.headerInfo.numValidPixel,microBlockSize:a.headerInfo.microBlockSize,blobSize:a.headerInfo.blobSize,maxZError:a.headerInfo.maxZError,pixelType:m.getPixelType(a.headerInfo.imageType),eofOffset:a.eofOffset,mask:a.mask?{numBytes:a.mask.numBytes}:null,pixels:{numBlocksX:a.pixels.numBlocksX,numBlocksY:a.pixels.numBlocksY,maxValue:a.headerInfo.zMax,minValue:a.headerInfo.zMin,noDataValue:a.noDataValue}}},constructConstantSurface:function(a){var d=a.headerInfo.zMax,
c=a.headerInfo.height*a.headerInfo.width,h=0;if(a.pixels.resultMask)for(h=0;h<c;h++)a.pixels.resultMask[h]&&(a.pixels.resultPixels[h]=d);else for(h=0;h<c;h++)a.pixels.resultPixels[h]=d},getDataTypeArray:function(a){switch(a){case 0:a=Int8Array;break;case 1:a=Uint8Array;break;case 2:a=Int16Array;break;case 3:a=Uint16Array;break;case 4:a=Int32Array;break;case 5:a=Uint32Array;break;case 6:a=Float32Array;break;case 7:a=Float64Array;break;default:a=Float32Array}return a},getPixelType:function(a){switch(a){case 0:a=
"S8";break;case 1:a="U8";break;case 2:a="S16";break;case 3:a="U16";break;case 4:a="S32";break;case 5:a="U32";break;case 6:a="F32";break;case 7:a="F64";break;default:a="F32"}return a},isValidPixelValue:function(a,d){if(null===d||void 0===d)return!1;var c;switch(a){case 0:c=-128<=d&&127>=d;break;case 1:c=0<=d&&255>=d;break;case 2:c=-32768<=d&&32767>=d;break;case 3:c=0<=d&&65536>=d;break;case 4:c=-2147483648<=d&&2147483647>=d;break;case 5:c=0<=d&&4294967296>=d;break;case 6:c=-3.4027999387901484E38<=
d&&3.4027999387901484E38>=d;break;case 7:c=4.9E-324<=d&&1.7976931348623157E308>=d;break;default:c=!1}return c},getDateTypeSize:function(a){var d=0;switch(a){case 0:case 1:d=1;break;case 2:case 3:d=2;break;case 4:case 5:case 6:d=4;break;case 7:d=8;break;default:d=a}return d},getDataTypeUsed:function(a,d){var c=a;switch(a){case 2:case 4:c=a-d;break;case 3:case 5:c=a-2*d;break;case 6:c=0===d?a:1===d?2:1;break;case 7:c=0===d?a:a-2*d+1;break;default:c=a}return c},getOnePixel:function(a,d,c,h){a=0;switch(c){case 0:a=
h.getInt8(d);break;case 1:a=h.getUint8(d);break;case 2:a=h.getInt16(d,!0);break;case 3:a=h.getUint16(d,!0);break;case 4:a=h.getInt32(d,!0);break;case 5:a=h.getUInt32(d,!0);break;case 6:a=h.getFloat32(d,!0);break;case 7:a=h.getFloat64(d,!0);break;default:throw"the decoder does not understand this pixel type";}return a}},a=function(a,d,c){this.val=a;this.left=d;this.right=c};return{decode:function(a,d){d=d||{};var c=d.maskData||null===d.maskData,h=d.noDataValue,g=0,f={};f.ptr=d.inputOffset||0;f.pixels=
{};if(m.readHeaderInfo(a,f)){var g=f.headerInfo,e=m.getDataTypeArray(g.imageType);if(c)f.pixels.resultMask=d.maskData,f.ptr+=4;else if(!m.readMask(a,f))return;c=g.width*g.height;f.pixels.resultPixels=new e(c);f.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};if(0!==g.numValidPixel)if(g.zMax===g.zMin)m.constructConstantSurface(f);else{var p=new DataView(a,f.ptr,2),s=p.getUint8(0,!0);f.ptr++;s?m.readDataOneSweep(a,f,e):1<g.fileVersion&&1>=g.imageType&&1E-5>Math.abs(g.maxZError-
0.5)?(p=p.getUint8(1,!0),f.ptr++,p?m.readHuffman(a,f,e):m.readTiles(a,f,e)):m.readTiles(a,f,e)}f.eofOffset=f.ptr;d.inputOffset?(e=f.headerInfo.blobSize+d.inputOffset-f.ptr,1<=Math.abs(e)&&(f.eofOffset=d.inputOffset+f.headerInfo.blobSize)):(e=f.headerInfo.blobSize-f.ptr,1<=Math.abs(e)&&(f.eofOffset=f.headerInfo.blobSize));e={width:g.width,height:g.height,pixelData:f.pixels.resultPixels,minValue:g.zMin,maxValue:g.zMax,maskData:f.pixels.resultMask};if(f.pixels.resultMask&&m.isValidPixelValue(g.imageType,
h)){p=f.pixels.resultMask;for(g=0;g<c;g++)p[g]||(e.pixelData[g]=h);e.noDataValue=h}f.noDataValue=h;d.returnFileInfo&&(e.fileInfo=m.formatFileInfo(f));return e}},getBandCount:function(a){for(var d=0,c=0,h={ptr:0,pixels:{}};c<a.byteLength-58;)m.readHeaderInfo(a,h),c+=h.headerInfo.blobSize,d++,h.ptr=c;return d}}})},"esri/layers/pixelFilters/VectorFieldPixelFilter":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../../kernel ../../lang dojo/_base/array".split(" "),function(g,m,a,b,d,c){return g(null,
{declaredClass:"esri.layers.pixelFilters.VectorFieldPixelFilter",speedUnits:["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"],constructor:function(a){m.mixin(this,a);this.isDataUV=a&&a.isDataUV?a.isDataUV:!1;this.computeMagnitudeAndDirection=m.hitch(this,this.computeMagnitudeAndDirection);this.unitConversionFactor=1;this._updateUnitConvFactor()},setUnits:function(a,b){this.inputUnit=a;this.outputUnit=b;this.unitConversionFactor=1;this._updateUnitConvFactor()},
_updateUnitConvFactor:function(){var a=c.indexOf(this.speedUnits,this.inputUnit),b=c.indexOf(this.speedUnits,this.outputUnit);if(this.inputUnit&&this.outputUnit&&0<=a&&0<=b){var d=[1,0.277778,0.514444,0.3048,0.44704,0];this.unitConversionFactor=d[a]/d[b]}},computeMagnitudeAndDirection:function(a){if(!d.isDefined(a))throw"Could not compute magnitude and direction. No pixel data is available.";var b=a.pixelBlock;if(!d.isDefined(b)||2!==b.getPlaneCount())throw"Could not compute magnitude and direction. Pixel data does not contain two bands.";
var c=a.extent,e=(c.xmax-c.xmin)/b.width,g=(c.ymax-c.ymin)/b.height,m=c.xmin+e/2,c=c.ymax-g/2;b.statistics[0].minValue=0;b.statistics[0].maxValue=0;var u=180/Math.PI,t=[],w=0,v=0,x=0,B=!d.isDefined(b.mask),A,C,z,F,H,J,I,K;H=I=Infinity;J=K=-Infinity;for(w=0;w<b.height;w++)for(v=0;v<b.width;v++,x++)if(t.push([m+e*v,c-g*w]),B||b.mask[x])z=A=b.pixels[0][x]*this.unitConversionFactor,F=C=b.pixels[1][x],this.isDataUV&&(z=Math.sqrt(A*A+C*C),F=90-u*Math.atan2(C,A),b.pixels[0][x]=z*this.unitConversionFactor,
b.pixels[1][x]=F),z>J&&(J=z),z<H&&(H=z),F>K&&(K=F),F<I&&(I=F);b.statistics[0].maxValue=J;b.statistics[0].minValue=H;b.statistics[1].maxValue=K;b.statistics[1].minValue=I;a.locations=t;return a}})})},"esri/layers/rasterFormats/ImageCanvasDecoder":function(){define(["require","dojo/_base/declare","dojo/Deferred","dojo/sniff"],function(g,m,a,b){var d;return m(null,{constructor:function(a){this.ctx=a.ctx;this._loadRasterFormatModule()},decode:function(b,d){if(!d.width||!d.height)throw"Native decoding requires the image format, width and height";
var g=new a,f,e=new Uint8Array(b),m=this._getFormat(b);if("error"===m)throw"invalid format";"jpeg"===m&&(f=this._getMask(e,d));var s="",u,t;for(u=0;u<e.length;u+=65535)t=e.subarray(u,u+65535>e.length-1?e.length-1:u+65535),s+=String.fromCharCode.apply(null,t);var e="data:image/"+m+";base64,"+window.btoa(s),w=new Image,v;w.src=e;var x=this;w.onload=function(){x.ctx.clearRect(0,0,d.width,d.height);x.ctx.drawImage(w,0,0);var a=x.ctx.getImageData(0,0,w.width,w.height);v=a.data;if(f)for(u=0;u<f.length;u++)v[4*
u+3]=f[u]?255:0;x.ctx.putImageData(a,0,0);g.resolve(null)};w.onerror=function(){g.reject("cannot load image")};return g},_getFormat:function(a){a=new Uint8Array(a,0,10);var b="error";255===a[0]&&216===a[1]?b="jpeg":137===a[0]&&(80===a[1]&&78===a[2]&&71===a[3])&&(b="png");return b},_getMask:function(a,b){var g;try{if(!d)throw"The zlib decoder module is not loaded.";var f=0,e=0,m=Math.round(a.length/2);1===m%2&&(m+=1);for(var s=a.length-2,f=m;f<s&&!(255===a[f]&&217===a[f+1]);f++);m=f+=2;if(m<a.length-
1){var u=(new d(a.subarray(m))).getBytes();g=new Uint8Array(b.width*b.height);for(f=m=0;f<u.length;f++)for(e=7;0<=e;e--)g[m++]=u[f]>>e&1}}catch(t){}return g},_loadRasterFormatModule:function(){10>b("ie")||g(["./Zlib"],function(a){d=a})}})})},"esri/tasks/ImageServiceIdentifyTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../request ../geometry/normalizeUtils ./Task ./ImageServiceIdentifyResult".split(" "),function(g,m,a,b,d,c,h,n){g=g(h,{declaredClass:"esri.tasks.ImageServiceIdentifyTask",
constructor:function(a){this._url.path+="/identify";this._handler=m.hitch(this,this._handler)},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(a,b,c,d,h){try{var g=new n(a);this._successHandler([g],"onComplete",c,h)}catch(m){this._errorHandler(m,d,h)}},execute:function(a,b,c,h){var g=h.assembly;a=this._encode(m.mixin({},this._url.query,{f:"json"},a.toJson(g&&g[0])));var n=this._handler,w=this._errorHandler;return d({url:this._url.path,content:a,callbackParamName:"callback",
load:function(a,d){n(a,d,b,c,h.dfd)},error:function(a){w(a,c,h.dfd)}})},onComplete:function(){}});c._createWrappers(g);return g})},"esri/tasks/ImageServiceIdentifyResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../geometry/jsonUtils ./FeatureSet".split(" "),function(g,m,a,b,d,c){return g(null,{declaredClass:"esri.tasks.ImageServiceIdentifyResult",constructor:function(a){a.catalogItems&&(this.catalogItems=new c(a.catalogItems));a.location&&(this.location=d.fromJson(a.location));
this.catalogItemVisibilities=a.catalogItemVisibilities;this.name=a.name;this.objectId=a.objectId;this.value=a.value;this.processedValues=a.processedValues;this.properties=a.properties}})})},"esri/tasks/ImageServiceIdentifyParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/has ../kernel ../lang ../geometry/jsonUtils".split(" "),function(g,m,a,b,d,c,h,n){return g(null,{declaredClass:"esri.tasks.ImageServiceIdentifyParameters",geometry:null,mosaicRule:null,
renderingRule:null,renderingRules:null,pixelSizeX:null,pixelSizeY:null,pixelSize:null,returnGeometry:!1,returnCatalogItems:!0,timeExtent:null,toJson:function(c){var d=c&&c.geometry||this.geometry;c={geometry:d,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,mosaicRule:this.mosaicRule?a.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?a.toJson(this.renderingRule.toJson()):null};d&&(c.geometryType=n.getJsonType(d));d=this.timeExtent;c.time=d?d.toJson().join(","):
null;h.isDefined(this.pixelSizeX)&&h.isDefined(this.pixelSizeY)?c.pixelSize=a.toJson({x:parseFloat(this.pixelSizeX),y:parseFloat(this.pixelSizeY)}):this.pixelSize&&(c.pixelSize=this.pixelSize?a.toJson(this.pixelSize.toJson()):null);this.renderingRules&&(c.renderingRules=a.toJson(b.map(this.renderingRules,function(a){return a.toJson()})));return c}})})},"esri/layers/ArcGISImageServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../config ./DynamicMapServiceLayer ./ImageServiceLayerMixin".split(" "),
function(g,m,a,b,d,c,h){return g([c,h],{declaredClass:"esri.layers.ArcGISImageServiceLayer",constructor:function(a,b){this._initialize(a,b);this.useMapImage=b&&b.useMapImage||!1},refresh:function(a){if(a)this.inherited(arguments);else{var b=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=b}},exportMapImage:function(a,b){var c=d.defaults.map,c=m.mixin({size:c.width+","+c.height},this._params,a?a.toJson(this.normalization):{},{f:"json"});delete c._ts;
this._exportMapImage(this._url.path+"/exportImage",c,b)}})})},"esri/layers/ArcGISImageServiceVectorLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/json dojo/sniff ../kernel ../lang ./GraphicsLayer ./ImageServiceLayerMixin ../renderers/VectorFieldRenderer ../geometry/Point ../geometry/Extent ../graphic dojox/gfx".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t){return g([n,f],{declaredClass:"esri.layers.ArcGISImageServiceVectorLayer",constructor:function(a,
b){this.symbolTileSize=b&&b.symbolTileSize?b.symbolTileSize:50;this._maxMag=this._minMag=null;this.setVectorRendererStyle(b&&b.rendererStyle?b.rendererStyle:e.STYLE_SINGLE_ARROW);var c=m.clone(this._params);delete c.imageServiceParameters;delete c.pixelFilter;delete c.rendererStyle;delete c.symbolTileSize;this._initialize(a,b);this.geometryType="esriGeometryPoint";this.symbolTileSizeUnits="Pixels";m.mixin(this._params,c)},getField:function(a){return this._getField(a,!0)},setVectorRendererStyle:function(a){this.rendererStyle=
a;this._updateVectorFieldRenderer();this.useDefaultRenderer=!0},setRenderer:function(){this.useDefaultRenderer=!1;this.inherited(arguments)},getFlowRepresentation:function(){return this._vectorFlowRepresentation},onRendererChange:function(){},onResume:function(){this.inherited(arguments);this._toggleTime()},onSuspend:function(){this.inherited(arguments);this._toggleTime()},_refresh:function(a){if(10>d("ie"))this.onError(Error("Unable to refresh. This layer is not supported in the current browser."));
else if(!1===this.hasMultidimensions)this.onError(Error("Unable to refresh. This layer does not have multi-dimensional info."));else{this.setImageFormat("LERC",!0);a=this.fullExtent.xmin;var b=this.fullExtent.ymax,c=m.clone(this._map.extent),e=this._map.width*(1/this.symbolTileSize),e=e?Math.ceil(e):50,f=this._map.height*(1/this.symbolTileSize),f=f?Math.ceil(f):Math.ceil(e*((c.ymax-c.ymin)/(c.xmax-c.xmin))),g=(c.xmax-c.xmin)/e,h=(c.ymax-c.ymin)/f;c.xmin=a+Math.floor((c.xmin-a)/g)*g;c.xmax=a+Math.ceil((c.xmax-
a)/g)*g;c.ymin=b+Math.floor((c.ymin-b)/h)*h;c.ymax=b+Math.ceil((c.ymax-b)/h)*h;this._requestData(c,e,f)}},_drawPixelData:function(){this.clear();if(this.pixelData){var a=this.pixelData.pixelBlock,c=this.pixelData.extent,d=this.pixelData.locations,e=h.isDefined(a.mask)&&0<a.mask.length;if(a&&c&&d){if(this.useDefaultRenderer&&this.renderer&&(!h.isDefined(this._minMag)||!h.isDefined(this._maxMag))){var f=this._getServiceMinMaxStats();f?(this._minMag=f.min,this._maxMag=f.max):(this._minMag=a.statistics[0].minValue,
this._maxMag=a.statistics[0].maxValue);var f={type:"sizeInfo",minSize:t.px2pt(0.2*this.symbolTileSize),maxSize:t.px2pt(0.8*this.symbolTileSize),minDataValue:this._minMag,maxDataValue:this._maxMag},g=[];g.push(f);g.push({type:"colorInfo"});this.renderer.setVisualVariables(g)}for(var m=g=f=0,n,H=c.spatialReference?c.spatialReference._getInfo():null,f=0;f<a.height;f++)for(g=0;g<a.width;g++,m++)if(n=d[m],(!e||a.mask[m])&&n&&2===n.length){n=new p(n[0],n[1],c.spatialReference);H&&(n.x=s.prototype._normalizeX(n.x,
H).x);var J={Magnitude:a.pixels[0][m],Direction:a.pixels[1][m],Location:b.toJson(n.toJson())};n=new u(n,null,J);this.add(n)}}}},_getServiceMinMaxStats:function(){if(!h.isDefined(this.minValues)||!h.isDefined(this.maxValues)||2>this.minValues.length||2>this.maxValues.length)return null;var a=this.minValues[0],b=this.maxValues[0],c=this.minValues[1],d=this.maxValues[1];if(this.pixelFilter&&a&&b&&c&&d){var e=[];e.push([a,b]);e.push([c,d]);c=this._createPixelData(e);this.pixelFilter(c);c&&(c.pixelBlock&&
c.pixelBlock.pixels&&0<c.pixelBlock.pixels.length)&&(a=c.pixelBlock.pixels[0][0],b=c.pixelBlock.pixels[0][1])}return a&&b?{min:a,max:b}:null},_updateVectorFieldRenderer:function(){var a={type:"sizeInfo",minSize:t.px2pt(0.2*this.symbolTileSize),maxSize:t.px2pt(0.8*this.symbolTileSize),minDataValue:this._minMag,maxDataValue:this._maxMag},b=[];b.push(a);a=new e({style:this.rendererStyle,visualVariables:b,flowRepresentation:this._vectorFlowRepresentation});this.setRenderer(a)},_getField:function(a,b){if(h.isDefined(a))return b&&
(a=a.toLowerCase()),"magnitude"!==a&&"direction"!==a?null:{name:a,alias:a,domain:null,editable:!1,length:50,type:"esriFieldTypeDouble"}},_requestDataErrorHandler:function(a){"CancelError"!==a.name&&(this.clear(),this.onError(a))},_setFlowRepresentation:function(a){a&&(this.renderer&&h.isDefined(a.FlowDirection))&&(this._vectorFlowRepresentation="oceanographic"===a.FlowDirection.toLowerCase()?this.renderer.FLOW_TO:this.renderer.FLOW_FROM);this.renderer&&(this.renderer.flowRepresentation=this._vectorFlowRepresentation)}})})},
"esri/layers/CSVLayer":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../arcgis/csv ./FeatureLayer ../geometry/Extent ../tasks/FeatureSet".split(" "),function(g,m,a,b,d,c,h,n,f){return m(h,{declaredClass:"esri.layers.CSVLayer",_preventInit:!0,_fieldTypeMap:{Date:"esriFieldTypeDate",Number:"esriFieldTypeDouble",String:"esriFieldTypeString"},constructor:function(b,c){this.url=b;c=a.mixin({},c);this.columnDelimiter=c.columnDelimiter;this.latitudeFieldName=c.latitudeFieldName;
this.longitudeFieldName=c.longitudeFieldName;var d=c.layerDefinition;d||(d={fields:c.fields||[],geometryType:"esriGeometryPoint",copyrightText:c.copyright},c.fields&&g.forEach(c.fields,function(a){a.type=this._fieldTypeMap[a.type||"String"];a.alias||(a.alias=a.name)},this));this._buildCsvFcParam={url:this.url,columnDelimiter:this.columnDelimiter,layerDefinition:d,outFields:c.outFields};this.latitudeFieldName&&this.longitudeFieldName&&(this._buildCsvFcParam.locationInfo={locationType:"coordinates",
latitudeFieldName:this.latitudeFieldName,longitudeFieldName:this.longitudeFieldName});this._projectFeatures=a.hitch(this,this._projectFeatures);this._addFeatures=a.hitch(this,this._addFeatures);this._initCSVLayer(c)},refresh:function(){this._fireUpdateStart();this.applyEdits(null,null,this.graphics);this._loadFeatures()},_setMap:function(a){var b=this.inherited(arguments);this._fireUpdateStart();this._projectFeatures(this._csvFC).then(this._addFeatures).otherwise(this._errorHandler);this._csvFC=null;
return b},_initCSVLayer:function(a){var b=this;c.buildCSVFeatureCollection(this._buildCsvFcParam).then(function(c){b._csvFC=c;var d=c.layerDefinition;d.extent=b._getFCExtent(c);a.outFields||(a.outFields=["*"]);b._initFeatureLayer({layerDefinition:d},a)}).otherwise(this._errorHandler)},_loadFeatures:function(){c.buildCSVFeatureCollection(this._buildCsvFcParam).then(this._projectFeatures).then(this._addFeatures).otherwise(this._errorHandler)},_projectFeatures:function(a){return c.projectFeatureCollection(a,
this._map.spatialReference)},_addFeatures:function(a){a=new f(a.featureSet);this.applyEdits(a.features,null,null);this._fireUpdateEnd()},_getFCExtent:function(a){var b;if(a&&a.featureSet&&a.featureSet.features){a=a.featureSet.features;var c=a.length;if(1<c){var d=a[0].geometry;b=new n(d.x,d.y,d.x,d.y);for(c-=1;0<c;c--)d=a[c].geometry,b.xmin=Math.min(b.xmin,d.x),b.ymin=Math.min(b.ymin,d.y),b.xmax=Math.max(b.xmax,d.x),b.ymax=Math.max(b.ymax,d.y);0>=b.getWidth()&&0>=b.getHeight()&&(b=null)}}return b}})})},
"esri/arcgis/csv":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/sniff dojo/number dojox/data/CsvStore ../kernel ../config ../request ../SpatialReference ../geometry/jsonUtils ../geometry/webMercatorUtils".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s){function u(a){var b=0,c="";m.forEach([","," ",";","|","\t"],function(d){var e=a.split(d).length;e>b&&(b=e,c=d)});return c}function t(a,c){if(!a||"[object Date]"!==Object.prototype.toString.call(a)||isNaN(a.getTime()))return!1;
var d=!0;if(b("chrome")&&/\d+\W*$/.test(c)){if(c.match(/[^0-9a-zA-Z\s]/))return!1;var e=c.match(/[a-zA-Z]{2,}/);if(e){for(var d=!1,f=0,g=e.length,h=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i;!d&&f<=g&&!(d=!h.test(e[f]));)f++;d=!d}}return d}function w(a,b,e){var f=a.indexOf("\n"),f=g.trim(a.substr(0,f)),h=b.columnDelimiter;h||(h=u(f));var n=new c({data:a,separator:h});n.fetch({onComplete:function(a,
c){var f=0,h={layerDefinition:b.layerDefinition,featureSet:{features:[],geometryType:"esriGeometryPoint"}},p=h.layerDefinition.objectIdField,s=h.layerDefinition.fields;!p&&!m.some(s,function(a){return"esriFieldTypeOID"===a.type?(p=a.name,!0):!1})&&(s.push({name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1}),p="__OBJECTID");var u,v,w=n._attributes,x=[],q=[];m.forEach(s,function(a){"esriFieldTypeDate"===a.type?x.push(a.name):("esriFieldTypeDouble"===a.type||"esriFieldTypeInteger"===
a.type)&&q.push(a.name)});b.locationInfo&&"coordinates"===b.locationInfo.locationType?(u=b.locationInfo.latitudeFieldName,v=b.locationInfo.longitudeFieldName):m.forEach(w,function(a){var b;b=m.indexOf(A,a.toLowerCase());-1!==b&&(u=a);b=m.indexOf(C,a.toLowerCase());-1!==b&&(v=a)});if(!u||!v)setTimeout(function(){},1),e&&e(null,Error("File does not seem to contain fields with point coordinates."));else{-1===m.indexOf(q,u)&&q.push(u);-1===m.indexOf(q,v)&&q.push(v);var k;g.isArray(b.outFields)&&-1===
m.indexOf(b.outFields,"*")&&(k=b.outFields);m.forEach(w,function(a){m.some(s,function(b){return a===b.name})||s.push({name:a,alias:a,type:a===u||a===v?"esriFieldTypeDouble":"esriFieldTypeString"})});var w=0,r=a.length;for(w;w<r;w++){var z=a[w],B=n.getAttributes(z),I={};m.forEach(B,function(a){if(a&&(a===u||a===v||!k||-1<m.indexOf(k,a))){var b=a;0===a.length&&m.forEach(s,function(b,c){b.name==="attribute_"+(c-1)&&(a="attribute_"+(c-1))});if(-1<m.indexOf(x,a)){var b=n.getValue(z,b),c=new Date(b);I[a]=
t(c,b)?c.getTime():null}else if(-1<m.indexOf(q,a)){c=d.parse(n.getValue(z,b));if((a===u||a===v)&&(isNaN(c)||181<Math.abs(c)))c=parseFloat(n.getValue(z,b));isNaN(c)?I[a]=null:I[a]=c}else I[a]=n.getValue(z,b)}});I[p]=f;f++;var B=I[u],J=I[v];null==J||(null==B||isNaN(B)||isNaN(J))||(k&&-1===m.indexOf(k,u)&&delete I[u],k&&-1===m.indexOf(k,v)&&delete I[v],h.featureSet.features.push({geometry:{x:J,y:B,spatialReference:{wkid:4326}},attributes:I}))}h.layerDefinition.name="csv";e&&e(h)}},onError:function(a){e&&
e(null,a)}});return!0}function v(a,b,c,d,e,f){0===a.length&&e(null);var h=p.getGeometryType(b),u=[];m.forEach(a,function(a){a=new h(a);a.spatialReference=c;u.push(a)},this);b=[102113,102100,3857];c.wkid&&4326===c.wkid&&d.wkid&&-1<m.indexOf(b,d.wkid)?(m.forEach(u,function(a){a.xmin?(a.xmin=Math.max(a.xmin,-180),a.xmax=Math.min(a.xmax,180),a.ymin=Math.max(a.ymin,-89.99),a.ymax=Math.min(a.ymax,89.99)):a.rings?m.forEach(a.rings,function(a){m.forEach(a,function(a){a[0]=Math.min(Math.max(a[0],-180),180);
a[1]=Math.min(Math.max(a[1],-89.99),89.99)},this)},this):a.paths?m.forEach(a.paths,function(a){m.forEach(a,function(a){a[0]=Math.min(Math.max(a[0],-180),180);a[1]=Math.min(Math.max(a[1],-89.99),89.99)},this)},this):a.x&&(a.x=Math.min(Math.max(a.x,-180),180),a.y=Math.min(Math.max(a.y,-89.99),89.99))},this),a=[],m.forEach(u,function(b){b=s.geographicToWebMercator(b);102100!==d.wkid&&(b.spatialReference=d);a.push(b.toJson())},this),e(a)):null!==c.wkid&&-1<m.indexOf(b,c.wkid)&&null!==d.wkid&&4326===d.wkid?
(a=[],m.forEach(u,function(b){a.push(s.webMercatorToGeographic(b).toJson())},this),e(a)):(b=function(b,c){b&&b.length===a.length?(a=[],m.forEach(b,function(b){b&&(b.rings&&0<b.rings.length&&0<b.rings[0].length&&0<b.rings[0][0].length&&!isNaN(b.rings[0][0][0])&&!isNaN(b.rings[0][0][1])||b.paths&&0<b.paths.length&&0<b.paths[0].length&&0<b.paths[0][0].length&&!isNaN(b.paths[0][0][0])&&!isNaN(b.paths[0][0][1])||b.xmin&&!isNaN(b.xmin)&&b.ymin&&!isNaN(b.ymin)||b.x&&!isNaN(b.x)&&b.y&&!isNaN(b.y))?a.push(b.toJson()):
a.push(null)},this),e(a)):f(b,c)},n.defaults.geometryService?n.defaults.geometryService.project(u,d,g.hitch(this,b),f):e(null))}function x(a,b){var c=[102113,102100,3857];return a&&b&&a.wkid===b.wkid&&a.wkt===b.wkt||a&&b&&a.wkid&&b.wkid&&-1<m.indexOf(c,a.wkid)&&-1<m.indexOf(c,b.wkid)?!0:!1}function B(a,b,c,d){if(a.featureSet&&0!==a.featureSet.features.length)if(x(c,b))d(a);else{var f,h=function(b){var c=[];m.forEach(a.featureSet.features,function(a,d){b[d]&&(a.geometry=b[d],c.push(a))},this);d(a)},
n=function(b,c){d(a)},s=function(d,e){v(f,a.featureSet.geometryType,b,c,g.hitch(this,h),g.hitch(this,n))};a.featureSet.features&&0<a.featureSet.features.length?(f=[],m.forEach(a.featureSet.features,function(b){if(b.geometry.toJson)f.push(b.geometry);else{var c=p.getGeometryType(a.featureSet.geometryType);f.push(new c(b.geometry))}}),b.toJson||(b=new e(b)),c.toJson||(c=new e(c)),v(f,a.featureSet.geometryType,b,c,g.hitch(this,h),g.hitch(this,s))):d(a)}}var A="lat latitude y ycenter latitude83 latdecdeg point-y lat_dd".split(" "),
C="lon lng long longitude x xcenter longitude83 longdecdeg point-x long_dd".split(" ");return{latFieldStrings:A,longFieldStrings:C,buildCSVFeatureCollection:function(b){var c=new a,d=function(a,b){b?c.errback(b):c.callback(a)},e={url:b.url,handleAs:"text",load:function(a){w(a,b,g.hitch(this,d))},error:function(a){c.errback(a)}};-1<b.url.indexOf("arcgis.com")&&(-1<b.url.indexOf("/content/items")&&-1<b.url.indexOf("/data"))&&(e.headers={"Content-Type":""});f(e,{usePost:!1});return c},projectFeatureCollection:function(b,
c,d){var f=new a;d||(d=new e({wkid:4326}));B(b,d,c,g.hitch(this,function(a){f.callback(a)}));return f},generateDefaultPopupInfo:function(a){var b={esriFieldTypeDouble:1,esriFieldTypeSingle:1},c={esriFieldTypeInteger:1,esriFieldTypeSmallInteger:1},d={esriFieldTypeDate:1},e=null;a=m.map(a.layerDefinition.fields,g.hitch(this,function(a){"NAME"===a.name.toUpperCase()&&(e=a.name);var f="esriFieldTypeOID"!==a.type&&"esriFieldTypeGlobalID"!==a.type&&"esriFieldTypeGeometry"!==a.type,h=null;if(f){var m=a.name.toLowerCase();
if(-1<",stretched value,fnode_,tnode_,lpoly_,rpoly_,poly_,subclass,subclass_,rings_ok,rings_nok,".indexOf(","+m+",")||-1<m.indexOf("area")||-1<m.indexOf("length")||-1<m.indexOf("shape")||-1<m.indexOf("perimeter")||-1<m.indexOf("objectid")||m.indexOf("_")===m.length-1||m.indexOf("_i")===m.length-2&&1<m.length)f=!1;a.type in c?h={places:0,digitSeparator:!0}:a.type in b?h={places:2,digitSeparator:!0}:a.type in d&&(h={dateFormat:"shortDateShortTime"})}return g.mixin({},{fieldName:a.name,label:a.alias,
isEditable:!0,tooltip:"",visible:f,format:h,stringFieldOption:"textbox"})}));return{title:e?"{"+e+"}":"",fieldInfos:a,description:null,showAttachments:!1,mediaInfos:[]}},_getSeparator:u,_isValidDate:t,_processCsvData:w,_projectGeometries:v,_sameSpatialReference:x,_projectFeatureSet:B}})},"dojox/data/CsvStore":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/xhr dojo/_base/kernel dojo/data/util/filter dojo/data/util/simpleFetch".split(" "),function(g,m,a,b,d,c){m=m("dojox.data.CsvStore",
null,{constructor:function(a){this._attributes=[];this._attributeIndexes={};this._dataArray=[];this._arrayOfAllItems=[];this._loadFinished=!1;a.url&&(this.url=a.url);this._csvData=a.data;a.label?this.label=a.label:""===this.label&&(this.label=void 0);this._storeProp="_csvStore";this._idProp="_csvId";this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._loadInProgress=!1;this._queuedFetches=[];this.identifier=a.identifier;""===this.identifier?delete this.identifier:this._idMap=
{};"separator"in a&&(this.separator=a.separator);"urlPreventCache"in a&&(this.urlPreventCache=a.urlPreventCache?!0:!1)},url:"",label:"",identifier:"",separator:",",urlPreventCache:!1,_assertIsItem:function(a){if(!this.isItem(a))throw Error(this.declaredClass+": a function was passed an item argument that was not an item");},_getIndex:function(a){a=this.getIdentity(a);this.identifier&&(a=this._idMap[a]);return a},getValue:function(a,b,c){this._assertIsItem(a);var d=c;if("string"===typeof b)b=this._attributeIndexes[b],
null!=b&&(d=this._dataArray[this._getIndex(a)][b]||c);else throw Error(this.declaredClass+": a function was passed an attribute argument that was not a string");return d},getValues:function(a,b){var c=this.getValue(a,b);return c?[c]:[]},getAttributes:function(a){this._assertIsItem(a);var b=[];a=this._dataArray[this._getIndex(a)];for(var c=0;c<a.length;c++)""!==a[c]&&b.push(this._attributes[c]);return b},hasAttribute:function(a,b){this._assertIsItem(a);if("string"===typeof b){var c=this._attributeIndexes[b],
d=this._dataArray[this._getIndex(a)];return"undefined"!==typeof c&&c<d.length&&""!==d[c]}throw Error(this.declaredClass+": a function was passed an attribute argument that was not a string");},containsValue:function(a,b,c){var e=void 0;"string"===typeof c&&(e=d.patternToRegExp(c,!1));return this._containsValue(a,b,c,e)},_containsValue:function(a,b,c,d){a=this.getValues(a,b);for(b=0;b<a.length;++b){var g=a[b];if("string"===typeof g&&d)return null!==g.match(d);if(c===g)return!0}return!1},isItem:function(a){if(a&&
a[this._storeProp]===this)if(a=a[this._idProp],this.identifier){if(this._dataArray[this._idMap[a]])return!0}else if(0<=a&&a<this._dataArray.length)return!0;return!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){},getFeatures:function(){return this._features},getLabel:function(a){if(this.label&&this.isItem(a))return this.getValue(a,this.label)},getLabelAttributes:function(a){return this.label?[this.label]:null},_fetchItems:function(b,c,f){var e=this,g=function(a,b){var f=null;
if(a.query){var g,h,f=[],m=a.queryOptions?a.queryOptions.ignoreCase:!1,p={};for(g in a.query)h=a.query[g],"string"===typeof h&&(p[g]=d.patternToRegExp(h,m));for(m=0;m<b.length;++m){var s=!0,u=b[m];for(g in a.query)h=a.query[g],e._containsValue(u,g,h,p[g])||(s=!1);s&&f.push(u)}}else f=b.slice(0,b.length);c(f,a)};if(this._loadFinished)g(b,this._arrayOfAllItems);else if(""!==this.url)if(this._loadInProgress)this._queuedFetches.push({args:b,filter:g});else{this._loadInProgress=!0;var m=a.get({url:e.url,
handleAs:"text",preventCache:e.urlPreventCache});m.addCallback(function(a){try{e._processData(a),g(b,e._arrayOfAllItems),e._handleQueuedFetches()}catch(c){f(c,b)}});m.addErrback(function(a){e._loadInProgress=!1;if(f)f(a,b);else throw a;});var u=null;b.abort&&(u=b.abort);b.abort=function(){m&&-1===m.fired&&m.cancel();u&&u.call(b)}}else if(this._csvData)try{this._processData(this._csvData),this._csvData=null,g(b,this._arrayOfAllItems)}catch(t){f(t,b)}else{var w=Error(this.declaredClass+": No CSV source data was provided as either URL or String data input.");
if(f)f(w,b);else throw w;}},close:function(a){},_getArrayOfArraysFromCsvFileContents:function(a){if(g.isString(a)){var b=RegExp("^\\s+","g"),c=RegExp("\\s+$","g"),d=RegExp('""',"g"),m=[],s=this._splitLines(a);for(a=0;a<s.length;++a){var u=s[a];if(0<u.length){for(var u=u.split(this.separator),t=0;t<u.length;){var w=u[t].replace(b,""),v=w.replace(c,""),x=v.charAt(0),B=v.charAt(v.length-1),A=v.charAt(v.length-2),C=v.charAt(v.length-3);if(2===v.length&&'""'==v)u[t]="";else if('"'==x&&('"'!=B||'"'==B&&
'"'==A&&'"'!=C)){if(t+1===u.length)return;u[t]=w+this.separator+u[t+1];u.splice(t+1,1)}else'"'==x&&'"'==B&&(v=v.slice(1,v.length-1),v=v.replace(d,'"')),u[t]=v,t+=1}m.push(u)}}this._attributes=m.shift();for(a=0;a<this._attributes.length;a++)this._attributeIndexes[this._attributes[a]]=a;this._dataArray=m}},_splitLines:function(a){var b=[],c,d="",g=!1;for(c=0;c<a.length;c++){var m=a.charAt(c);switch(m){case '"':g=!g;d+=m;break;case "\r":g?d+=m:(b.push(d),d="",c<a.length-1&&"\n"==a.charAt(c+1)&&c++);
break;case "\n":g?d+=m:(b.push(d),d="");break;default:d+=m}}""!==d&&b.push(d);return b},_processData:function(a){this._getArrayOfArraysFromCsvFileContents(a);this._arrayOfAllItems=[];if(this.identifier&&void 0===this._attributeIndexes[this.identifier])throw Error(this.declaredClass+": Identity specified is not a column header in the data set.");for(a=0;a<this._dataArray.length;a++){var b=a;this.identifier&&(b=this._dataArray[a][this._attributeIndexes[this.identifier]],this._idMap[b]=a);this._arrayOfAllItems.push(this._createItemFromIdentity(b))}this._loadFinished=
!0;this._loadInProgress=!1},_createItemFromIdentity:function(a){var b={};b[this._storeProp]=this;b[this._idProp]=a;return b},getIdentity:function(a){return this.isItem(a)?a[this._idProp]:null},fetchItemByIdentity:function(c){var d,f=c.scope?c.scope:b.global;if(this._loadFinished)d=this._createItemFromIdentity(c.identity),this.isItem(d)||(d=null),c.onItem&&c.onItem.call(f,d);else{var e=this;if(""!==this.url)this._loadInProgress?this._queuedFetches.push({args:c}):(this._loadInProgress=!0,d=a.get({url:e.url,
handleAs:"text"}),d.addCallback(function(a){try{e._processData(a);var b=e._createItemFromIdentity(c.identity);e.isItem(b)||(b=null);c.onItem&&c.onItem.call(f,b);e._handleQueuedFetches()}catch(d){c.onError&&c.onError.call(f,d)}}),d.addErrback(function(a){this._loadInProgress=!1;c.onError&&c.onError.call(f,a)}));else if(this._csvData)try{e._processData(e._csvData),e._csvData=null,d=e._createItemFromIdentity(c.identity),e.isItem(d)||(d=null),c.onItem&&c.onItem.call(f,d)}catch(g){c.onError&&c.onError.call(f,
g)}}},getIdentityAttributes:function(a){return this.identifier?[this.identifier]:null},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var a=0;a<this._queuedFetches.length;a++){var b=this._queuedFetches[a],c=b.filter,d=b.args;c?c(d,this._arrayOfAllItems):this.fetchItemByIdentity(b.args)}this._queuedFetches=[]}}});g.extend(m,c);return m})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(g){var m={};g.setObject("dojo.data.util.filter",m);m.patternToRegExp=
function(a,b){for(var d="^",c=null,g=0;g<a.length;g++)switch(c=a.charAt(g),c){case "\\":d+=c;g++;d+=a.charAt(g);break;case "*":d+=".*";break;case "?":d+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":d+="\\";default:d+=c}d+="$";return b?RegExp(d,"mi"):RegExp(d,"m")};return m})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(g,m,a){var b={};g.setObject("dojo.data.util.simpleFetch",
b);b.errorHandler=function(a,b){b.onError&&b.onError.call(b.scope||m.global,a,b)};b.fetchHandler=function(b,c){var g=c.abort||null,n=!1,f=c.start?c.start:0,e=c.count&&Infinity!==c.count?f+c.count:b.length;c.abort=function(){n=!0;g&&g.call(c)};var p=c.scope||m.global;c.store||(c.store=this);c.onBegin&&c.onBegin.call(p,b.length,c);c.sort&&b.sort(a.createSortFunction(c.sort,this));if(c.onItem)for(var s=f;s<b.length&&s<e;++s){var u=b[s];n||c.onItem.call(p,u,c)}c.onComplete&&!n&&(s=null,c.onItem||(s=b.slice(f,
e)),c.onComplete.call(p,s,c))};b.fetch=function(a){a=a||{};a.store||(a.store=this);this._fetchItems(a,g.hitch(this,"fetchHandler"),g.hitch(this,"errorHandler"));return a};return b})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(g){var m={};g.setObject("dojo.data.util.sorter",m);m.basicComparator=function(a,b){var d=-1;null===a&&(a=void 0);null===b&&(b=void 0);if(a==b)d=0;else if(a>b||null==a)d=1;return d};m.createSortFunction=function(a,b){function d(a,b,c,d){return function(e,
f){var g=d.getValue(e,a),h=d.getValue(f,a);return b*c(g,h)}}for(var c=[],g,n=b.comparatorMap,f=m.basicComparator,e=0;e<a.length;e++){g=a[e];var p=g.attribute;if(p){g=g.descending?-1:1;var s=f;n&&("string"!==typeof p&&"toString"in p&&(p=p.toString()),s=n[p]||f);c.push(d(p,g,s,b))}}return function(a,b){for(var d=0;d<c.length;){var e=c[d++](a,b);if(0!==e)return e}return 0}};return m})},"esri/layers/WFSLayer":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/has dojo/on ../request ../kernel ../graphic ../renderers/jsonUtils ../symbols/jsonUtils ../Color ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../SpatialReference ../geometry/webMercatorUtils ../geometry/Extent ../geometry/Point ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ./LabelClass ./GraphicsLayer".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I){return g([I],{declaredClass:"esri.layers.WFSLayer",constructor:function(b){this.geometryType=this.describeFeatureTypeUrl=this.getFeatureUrl=this.layerNamespace="";this.fields=[];this.spatialReferences=[];this.fullExtent=null;this.visible=!0;this.renderer=null;this.id="WFSLayer";this._url="";this._version="1.1.0";this._layerName="";this._nsLayerNames={};this._layerDefinedGeometryType="esriGeometryComplex";this._wkid=3857;this._mode="snapshot";
this._maxFeatures=100;this._inverseResponse=this._inverseFilter=!1;this._nsGeometryFieldName=this._getFeatureRequest=this._nsFields="";this._graphicArray=[];this._gmlNS="http://www.opengis.net/gml";this._layerEventHandlers=[];this.customParameters=this._describeFeatureTypeCallback=this._getCapabilitiesCallback=null;this.showLabels=!0;this.labelingInfo=null;b&&(b.id&&(this.id=b.id),this.showLabels=null!==b.showLabels?b.showLabels:!0);this.onError=a.hitch(this,this.onError);this._errorSupport=a.hitch(this,
this._errorSupport);this._parseGml=a.hitch(this,this._parseGml);this._getCapabilities=a.hitch(this,this._getCapabilities);this._getCapabilitiesResponse=a.hitch(this,this._getCapabilitiesResponse);this._describeFeatureTypeResponse=a.hitch(this,this._describeFeatureTypeResponse);this._pointSymbol=new t(t.STYLE_CIRCLE,6,new w(w.STYLE_SOLID,new u([0,255,0]),1),new u([255,0,0]));this._lineSymbol=new w(w.STYLE_SOLID,new u([0,255,0]),3);this._polygonSymbol=new v(v.STYLE_SOLID,new w(w.STYLE_SOLID,new u([255,
0,0]),2),new u([255,255,0,0.25]));this.loaded=!1;this._isProjectedOk=!0},initialize:function(a,b){a.id&&(this.id=a.id);a.url&&(this._url=a.url);a.version&&(this._version=a.version);this.customParameters=a.customParameters;this._getCapabilities(b)},selectLayer:function(a,b){this._layerName=a.layerName;this._wkid=a.wkid;this._mode=a.mode;this._maxFeatures=a.maxFeatures;this._inverseResponse=a.swapXY;this._inverseFilter=a.swapXYFilter;this.geometryType=a.geometryType;this._describeFeatureType(b);this.loaded=
!0},toJson:function(){var a={};a.id=this.id;a.url=this._url;a.version=this._version;a.mode="snapshot"===this._mode?0:1;a.name=this._layerName;a.geometryType=this.geometryType;a.wkid=this._wkid;a.maxFeatures=this._maxFeatures;a.swapXY=this._inverseResponse;a.swapXYFilter=this._inverseFilter;a.pointSymbol=this._pointSymbol.toJson();a.lineSymbol=this._lineSymbol.toJson();a.polygonSymbol=this._polygonSymbol.toJson();a.showLabels=this.showLabels;this.labelingInfo&&(a.labelingInfo=b.map(this.labelingInfo,
function(a){return a.toJson()}));this.customParameters&&(a.customParameters=this.customParameters);return a},fromJson:function(a,c){a.id&&(this.id=a.id);a.url&&(this._url=a.url);a.version&&(this._version=a.version);a.mode&&(this._mode=0===a.mode?"snapshot":"onDemand");a.name&&(this._layerName=a.name);a.geometryType&&(this.geometryType=a.geometryType);a.wkid&&(this._wkid=a.wkid);a.maxFeatures&&(this._maxFeatures=a.maxFeatures);a.swapXY&&(this._inverseResponse=a.swapXY);a.swapXYFilter&&(this._inverseFilter=
a.swapXYFilter);a.pointSymbol&&(this._pointSymbol=s.fromJson(a.pointSymbol));a.lineSymbol&&(this._lineSymbol=s.fromJson(a.lineSymbol));a.polygonSymbol&&(this._polygonSymbol=s.fromJson(a.polygonSymbol));this.showLabels=null!=a.showLabels?a.showLabels:!0;a.labelingInfo&&(this.labelingInfo=b.map(a.labelingInfo,function(a){return new J(a)}));this.customParameters=a.customParameters;this._getCapabilities(c);this.loaded=!0},setPointSymbol:function(a){this._pointSymbol=a},setLineSymbol:function(a){this._lineSymbol=
a},setPolygonSymbol:function(a){this._polygonSymbol=a},_setMap:function(b){this._map=b;var c=this.inherited(arguments);this._map&&(this._layerEventHandlers.push(this._map.on("extent-change",a.hitch(this,"refresh"))),this._layerEventHandlers.push(this.on("visibility-change",a.hitch(this,"_visibilityChange"))));this._getFeature();this.refresh();return c},_unsetMap:function(){for(var a=0;a<this._layerEventHandlers.length;a++)d.disconnect(this._layerEventHandlers[a]);this.refresh();this.inherited(arguments)},
refresh:function(a){this.clear();this.redraw();"ondemand"===this._mode.toLowerCase()&&this._fireUpdateStart()},redraw:function(){if(this.visible)for(var a=0;a<this._graphicArray.length;a++){var b=this._graphicArray[a],c=b.geometry,d=null;"point"===c.type?d=this.renderer?this.renderer.getSymbol(b):this._pointSymbol:"multipoint"===c.type?d=this.renderer?this.renderer.getSymbol(b):this._pointSymbol:"polyline"===c.type?d=this.renderer?this.renderer.getSymbol(b):this._lineSymbol:"polygon"===c.type&&(d=
this.renderer?this.renderer.getSymbol(b):this._polygonSymbol);b.setSymbol(d);this.add(b)}},_visibilityChange:function(a){this.visible=a.visible;this.redraw()},onUpdateStart:function(){this._getFeature()},onUpdateEnd:function(){this.clear();this.redraw()},setLabelingInfo:function(a){a?(this.labelingInfo=a,this._fixLabelExpr()):delete this.labelingInfo;this.onLabelingInfoChange()},onLabelingInfoChange:function(){},_fixLabelExpr:function(){var a=/\[([^\[\]]+)\]/ig,c,d=this,e=function(a,b){var c=d._getField(b,
!0);return"["+(c&&c.name||b)+"]"};b.forEach(this.labelingInfo,function(b){if(c=b.labelExpression)b.labelExpression=c.replace(a,e)})},_getField:function(a,c){var d=this.fields;if(!d||0===d.length)return null;var e;c&&(a=a.toLowerCase());b.some(d,function(b){var d=!1;(d=c?b&&b.name.toLowerCase()===a?!0:!1:b&&b.name===a?!0:!1)&&(e=b);return d});return e},setCustomParameters:function(a){this.customParameters=a;this._getFeature();this.refresh()},_getCapabilities:function(b){this._getCapabilitiesCallback=
b;b=a.trim(this._url);if(""===b)this.onError("WFSLayer: url is invalid");else if("1.0.0"!==this._version&&"1.1.0"!==this._version&&"2.0.0"!==this._version)this.onError("WFSLayer: version is invalid");else if(""!==b){var c=-1===b.indexOf("?")?"?":"\x26";b=b+c+"service\x3dWFS\x26request\x3dGetCapabilities\x26version\x3d"+this._version;b=this._appendCustomParameters(b);n({url:b,handleAs:"text",headers:{"Content-Type":null}},{usePost:!1}).then(this._getCapabilitiesResponse,this._errorSupport)}},_errorSupport:function(a){this.onError(a)},
_getCapabilitiesResponse:function(a){var b,c,d,e,f,g=new DOMParser;try{var h=g.parseFromString(a,"text/xml"),m=this._readExceptionReport(h,a);if(m)this.onError("WFSLayer: getCapabilities - returns exception: "+m);else{var n=h.documentElement.attributes.getNamedItem("version");if(n){this._version=n.value;var p="2.0.0"===this._version?"http://www.opengis.net/wfs/2.0":"http://www.opengis.net/wfs";if("2.0.0"===this._version){b=h.getElementsByTagNameNS("http://www.opengis.net/ows/1.1","Operation");for(c=
0;c<b.length;c++){if((e=b[c].attributes.getNamedItem("name"))&&"DescribeFeatureType"===e.value)getList=b[c].getElementsByTagNameNS("http://www.opengis.net/ows/1.1","Get"),this.describeFeatureTypeUrl=getList[0].attributes.getNamedItem("xlink:href").value;e&&"GetFeature"===e.value&&(f=b[c].getElementsByTagNameNS("http://www.opengis.net/ows/1.1","Post"),this.getFeatureUrl=f[0].attributes.getNamedItem("xlink:href").value)}}else if("1.1.0"===this._version){b=h.getElementsByTagNameNS("http://www.opengis.net/ows",
"Operation");for(c=0;c<b.length;c++){if((e=b[c].attributes.getNamedItem("name"))&&"DescribeFeatureType"===e.value)getList=b[c].getElementsByTagNameNS("http://www.opengis.net/ows","Get"),this.describeFeatureTypeUrl=getList[0].attributes.getNamedItem("xlink:href").value;if(e&&"GetFeature"===e.value&&(f=b[c].getElementsByTagNameNS("http://www.opengis.net/ows","Post"))&&f.length)this.getFeatureUrl=f[0].attributes.getNamedItem("xlink:href").value}}else if("1.0.0"===this._version){var q=h.getElementsByTagNameNS(p,
"DescribeFeatureType");if(!q||!q.length){this.onError("WFSLayer: getCapabilities - no describeFeatureType info");return}getList=q[0].getElementsByTagNameNS(p,"Get");this.describeFeatureTypeUrl=getList[0].attributes.getNamedItem("onlineResource").value;var k=h.getElementsByTagNameNS(p,"GetFeature");if(!k||!k.length){this.onError("WFSLayer: getCapabilities - no GetFeature info");return}if((f=k[0].getElementsByTagNameNS(p,"Post"))&&f.length)this.getFeatureUrl=f[0].attributes.getNamedItem("onlineResource").value}this._nsLayerNames=
{};a=[];var s=h.getElementsByTagNameNS(p,"FeatureTypeList");for(c=0;c<s.length;c++){var u=s[c].getElementsByTagNameNS(p,"FeatureType");for(d=0;d<u.length;d++){var t=u[d],v=t.getElementsByTagNameNS(p,"Name")[0],w=v.textContent,x=w.indexOf(":"),A=w.substring(0,x),z=w.substring(x+1),B=v.lookupNamespaceURI(A);null===B&&(B=v.lookupNamespaceURI(null));this._nsLayerNames[z]={prefix:A,namespace:B};var C=t.getElementsByTagNameNS(p,"Title"),F=0<C.length?C[0].textContent:"";""===F&&(F=z);this.spatialReferences=
this._readFactoryCodes(this._version,t);var H=this._readDefaultBBOX(this._version,t);a.push({name:z,title:F,spatialReferences:this.spatialReferences,extent:H})}}this._describeFeatureType();var I=this._getCapabilitiesCallback;I&&I(a)}else this.onError("WFSLayer: getCapabilities - document not recognized.")}}catch(J){this.onError("WFSLayer: getCapabilities - parsing error")}},_readFactoryCodes:function(a,b){var c,d,e=[];if("2.0.0"===a||"1.1.0"===a){c=b.getElementsByTagNameNS("*","DefaultSRS");this._addCodeList(e,
c[0]);c=b.getElementsByTagNameNS("*","DefaultCRS");this._addCodeList(e,c[0]);c=b.getElementsByTagNameNS("*","OtherSRS");for(d=0;d<c.length;d++)this._addCodeList(e,c[d]);c=b.getElementsByTagNameNS("*","OtherCRS");for(d=0;d<c.length;d++)this._addCodeList(e,c[d])}else"1.0.0"===a&&(c=b.getElementsByTagNameNS("*","SRS"),this._addCodeList(e,c[0]));for(c=!1;0<e.length;){4326===e[0]&&(c=!0);break}c||e.push(4326);return e},_addCodeList:function(a,b){if(b){var c=b.textContent.match(/\d+/g);0<c.length&&(c=parseInt(c[c.length-
1],10),84===c&&(c=4326),a.push(c))}},_readDefaultBBOX:function(a,b){var c,d,e,f;if("2.0.0"===a||"1.1.0"===a){c=b.getElementsByTagNameNS("*","WGS84BoundingBox");if(!c[0]||!c[0].attributes)return[];d=c[0].getElementsByTagNameNS("*","LowerCorner");f=c[0].getElementsByTagNameNS("*","UpperCorner");if(0>=d.length||0>=f.length)return[];e=d[0].textContent;c=e.indexOf(" ");d=e.substring(0,c);e=e.substring(c+1);c=f[0].textContent;var g=c.indexOf(" ");f=c.substring(0,g);c=c.substring(g+1)}else if("1.0.0"===
a){c=b.getElementsByTagNameNS("*","LatLongBoundingBox");if(!c[0]||!c[0].attributes)return[];d=c[0].attributes.getNamedItem("minx").value;e=c[0].attributes.getNamedItem("miny").value;f=c[0].attributes.getNamedItem("maxx").value;c=c[0].attributes.getNamedItem("maxy").value}d=parseFloat(d,10);e=parseFloat(e,10);f=parseFloat(f,10);c=parseFloat(c,10);return[d,e,f,c]},_describeFeatureType:function(b){if(""!==this._layerName)if(""===this._wkid)this.onError("WFSLayer: invalid wkid");else if("snapshot"!==
this._mode&&"onDemand"!==this._mode)this.onError("WFSLayer: invalid mode");else if(""===this._maxFeatures||0>this._maxFeatures||1E6<this._maxFeatures)this.onError("WFSLayer: invalid maxFeatures");else{this._describeFeatureTypeCallback=b;var c=a.trim(this.describeFeatureTypeUrl);if(""!==c){var d=-1===c.indexOf("?")?"?":"\x26",e=this._nsLayerNames[this._layerName];if(void 0===e)this.onError("WFSLayer: invalid layerName");else b=e.prefix,e=e.namespace,c=c+d+"service\x3dWFS\x26request\x3dDescribeFeatureType\x26version\x3d"+
this._version,c+="\x26typeName\x3d",""!==b&&(c+=b+":"),c+=this._layerName,""!==b&&(c+="\x26namespace\x3dxmlns("+b+"\x3d"+e+")"),c=this._appendCustomParameters(c),n({url:c,handleAs:"text",headers:{"Content-Type":null}},{usePost:!1}).then(this._describeFeatureTypeResponse,this._errorSupport)}}},_describeFeatureTypeResponse:function(a){var b;b=(new DOMParser).parseFromString(a,"text/xml");if(a=this._readExceptionReport(b,a))this.onError("WFSLayer: DescribeFeatureType - returns exception: "+a);else{this.fields=
[];a=b.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","schema");for(b=0;b<a.length;b++){var c=this._readAllFields(a[b]);null!==c&&(this._layerDefinedGeometryType=c[0],this.fields=c[1])}if(!this.geometryType||""===this.geometryType)this.geometryType=this._layerDefinedGeometryType;for(b=0;b<this.fields.length;b++)a=this.fields[b],"esriFieldTypeGeometry"===a.type&&(this._nsGeometryFieldName=a.name);this.layerNamespace=this._nsLayerNames[this._layerName].namespace;if(0===this.fields.length)this.onError("WFSLayer: DescribeFeatureType - can't get fields");
else this._getFeature(),(b=this._describeFeatureTypeCallback)&&b(this.fields)}},_readAllFields:function(a){for(var b=a.childNodes,c=0;c<b.length;c++){var d=b[c];if("element"===d.localName){var e=d.attributes;if(e.name.value===this._layerName)return(b=e.type)?(d=b.value,b=d.indexOf(":"),d=d.substring(b+1),this._readFieldsFromGlobalComplextType(a,d)):this._readFieldsFromLocalComplextType(d)}}return null},_readFieldsFromGlobalComplextType:function(a,b){for(var c=a.childNodes,d=0;d<c.length;d++){var e=
c[d];if("complexType"===e.localName&&e.attributes.name.value===b)return this._readFieldsFromLocalComplextType(e)}return null},_readFieldsFromLocalComplextType:function(a){var b=[],c="esriGeometryComplex";a=a.getElementsByTagNameNS("http://www.w3.org/2001/XMLSchema","element");for(var d=0;d<a.length;d++){var e=a[d],f="",g=e.attributes.getNamedItem("name");g&&(f=g.value);if(""!==f){var h=g="",e=e.attributes.getNamedItem("type"),g="unknown";if(null!==e){var h=e.value,m=h.indexOf(":"),g=h.substring(0,
m),h=h.substring(m+1),g=e.lookupNamespaceURI(g);null===g&&(g=e.lookupNamespaceURI(null))}e="Unknown";switch(h){case "integer":case "nonPositiveInteger":case "negativeInteger":case "long":case "int":case "short":case "byte":case "nonNegativeInteger":case "unsignedLong":case "unsignedInt":case "unsignedShort":case "unsignedByte":case "positiveInteger":e="esriFieldTypeInteger";b.push({name:f,alias:f,type:e,wfsNamespace:g});break;case "float":case "double":case "decimal":e="esriFieldTypeDouble";b.push({name:f,
alias:f,type:e,wfsNamespace:g});break;case "boolean":case "string":case "gYearMonth":case "gYear":case "gMonthDay":case "gDay":case "gMonth":case "anyURI":case "QName":case "NOTATION":case "normalizedString":case "token":case "language":case "IDREFS":case "ENTITIES":case "NMTOKEN":case "NMTOKENS":case "Name":case "NCName":case "ID":case "IDREF":case "ENTITY":e="esriFieldTypeString";b.push({name:f,alias:f,type:e,wfsNamespace:g});break;case "duration":case "dateTime":case "time":case "date":e="esriFieldTypeDate";
b.push({name:f,alias:f,type:e,wfsNamespace:g});break;case "PointPropertyType":case "MultiPointPropertyType":e="esriFieldTypeGeometry";c="esriGeometryPoint";b.push({name:f,alias:f,type:e,wfsNamespace:g});break;case "MultiCurvePropertyType":case "MultiLineStringPropertyType":e="esriFieldTypeGeometry";c="esriGeometryPolyline";b.push({name:f,alias:f,type:e,wfsNamespace:g});break;case "MultiSurfacePropertyType":case "MultiPolygonPropertyType":e="esriFieldTypeGeometry";c="esriGeometryPolygon";b.push({name:f,
alias:f,type:e,wfsNamespace:g});break;case "GeometryPropertyType":case "MultiGeometryPropertyType":e="esriFieldTypeGeometry",c="esriGeometryComplex",b.push({name:f,alias:f,type:e,wfsNamespace:g})}}}return[c,b]},_getFeature:function(){var a;a="\x3c?xml version\x3d'1.0' encoding\x3d'utf-8'?\x3e\n\x3cGetFeature \n";a+=" xmlns:xsi\x3d'http://www.w3.org/2001/XMLSchema-instance'\n";a+=" xmlns:gml\x3d'http://www.opengis.net/gml'\n";a+=" xmlns:ogc\x3d'http://www.opengis.net/ogc'\n";a+=" xmlns:wfs\x3d'http://www.opengis.net/wfs'\n";
a="2.0.0"===this._version?a+" xmlns\x3d'http://www.opengis.net/wfs/2.0'\n":a+" xmlns\x3d'http://www.opengis.net/wfs'\n";var b=this._nsLayerNames[this._layerName];if(void 0===b)this.onError("WFSLayer: invalid layerName");else{var c=b.prefix,b=b.namespace;if("ondemand"===this._mode.toLowerCase()&&""===this._nsGeometryFieldName)this.onError("WFSLayer: GetFeature - can't use 'onDemand' mode as geometryFieldName is unknown.");else if(a+=" xmlns:"+c+"\x3d'"+b+"'\n",a="2.0.0"===this._version?a+(" version\x3d'"+
this._version+"' service\x3d'WFS' count\x3d'"+this._maxFeatures+"'\x3e\n"):a+(" version\x3d'"+this._version+"' service\x3d'WFS' maxFeatures\x3d'"+this._maxFeatures+"'\x3e\n"),a="2.0.0"===this._version?a+(" \x3cQuery typeNames\x3d'"+c+":"+this._layerName+"' srsName\x3d'EPSG:"+this._wkid+"'\x3e\n"):a+(" \x3cwfs:Query typeName\x3d'"+c+":"+this._layerName+"' srsName\x3d'EPSG:"+this._wkid+"'\x3e\n"),"ondemand"===this._mode.toLowerCase()&&(a+="  \x3cogc:Filter xmlns:ogc\x3d'http://www.opengis.net/ogc'\x3e\n",
a+="   \x3cogc:BBOX\x3e\n",a+="    \x3cogc:PropertyName\x3e"+c+":"+this._nsGeometryFieldName+"\x3c/ogc:PropertyName\x3e\n",a+="    \x3cgml:Box srsName\x3d'EPSG:"+this._wkid+"'\x3e\n",a=this._inverseFilter?a+"      \x3cgml:coordinates\x3e{ymin},{xmin} {ymax},{xmax}\x3c/gml:coordinates\x3e\n":a+"      \x3cgml:coordinates\x3e{xmin},{ymin} {xmax},{ymax}\x3c/gml:coordinates\x3e\n",a+="    \x3c/gml:Box\x3e\n",a+="   \x3c/ogc:BBOX\x3e\n",a+="  \x3c/ogc:Filter\x3e\n"),a="2.0.0"===this._version?a+" \x3c/Query\x3e\n":
a+" \x3c/wfs:Query\x3e\n",this._getFeatureRequest=a+="\x3c/GetFeature\x3e\n",""===this.getFeatureUrl)this.onError("WFSLayer: getFeature - server doesn't support POST method.");else if(""!==this._getFeatureRequest&&this._map&&null!==this._map.spatialReference.wkid){a=this._getFeatureRequest;if("ondemand"===this._mode.toLowerCase()){a=this._map.extent.xmin;var c=this._map.extent.ymin,b=this._map.extent.xmax,d=this._map.extent.ymax,e={},f=this._map.spatialReference,g=new x(this._wkid);this._projectFromSRToSR(f,
g,a,c,e)&&(a=e.x,c=e.y);this._projectFromSRToSR(f,g,b,d,e)&&(b=e.x,d=e.y);a=this._getFeatureRequest.replace(/{xmin}/,a).replace(/{ymin}/,c).replace(/{xmax}/,b).replace(/{ymax}/,d)}c=this._appendCustomParameters(this.getFeatureUrl);n({url:c,handleAs:"text",headers:{"Content-Type":"text/xml"},postData:a},{usePost:!0}).then(this._parseGml,this._errorSupport)}}},_parseGml:function(a){if(this._map&&this._map.spatialReference&&this._map.spatialReference.wkid){var b=(new DOMParser).parseFromString(a,"text/xml");
if(a=this._readExceptionReport(b,a))this.onError("WFSLayer: GetFeature - returns exception: "+a);else this._gmlNS="2.0.0"===this._version?"http://www.opengis.net/gml/3.2":"http://www.opengis.net/gml",""===this._wkid&&(this._wkid=this._map.spatialReference.wkid),this._graphicArray=this._readFeatureMembers(b,this._wkid,2,this._nsLayerNames[this._layerName].namespace,this._layerName),this.fullExtent=this._createFullExtent(this._graphicArray),this.onLabelingInfoChange(),"ondemand"===this._mode.toLowerCase()?
this._fireUpdateEnd():this.refresh()}},_limit4326:function(a){for(var b=0;b<a.length;b++){var c=a[b].geometry;4326===c.spatialReference.wkid&&(c.x=this._limit4326X(c.x),c.y=this._limit4326Y(c.y))}},_limit4326X:function(a){180<=a&&(a=179.99);-180>=a&&(a=-179.99);return a},_limit4326Y:function(a){90<=a&&(a=89.99);-90>=a&&(a=-89.99);return a},_createFullExtent:function(a){for(var b=null,c=0;c<a.length;c++){var d=a[c].geometry,e=null;(e="point"===d.geometryType?new A(d.x,d.y,d.x,d.y,d.spatialReference):
d.getExtent())&&(b=null===b?e:b.union(e))}return b},_readExceptionReport:function(a,b){return 0<a.getElementsByTagNameNS("*","ExceptionReport").length||0<a.getElementsByTagNameNS("*","ServiceExceptionReport").length?b:""},_readFeatureMembers:function(a,b,c,d,e){var f,g,h,m;g=this._readWkidFromNode(a);-1!=g&&(b=g);g=this._readSrsDimension(a);0!==g&&(c=g);var n=[];h=a.getElementsByTagNameNS("*","featureMembers");for(g=0;g<h.length;g++){f=h[g];m=f.getElementsByTagNameNS(d,e);0===m.length&&(m=f.getElementsByTagNameNS(null,
e));0===m.length&&(m=f.getElementsByTagNameNS("*",e));for(f=0;f<m.length;f++)this._readLayer(n,m[f],b,c)}h=a.getElementsByTagNameNS("*","featureMember");for(g=0;g<h.length;g++){f=h[g];m=f.getElementsByTagNameNS(d,e);0===m.length&&(m=f.getElementsByTagNameNS(null,e));0===m.length&&(m=f.getElementsByTagNameNS("*",e));for(f=0;f<m.length;f++)this._readLayer(n,m[f],b,c)}h=a.getElementsByTagNameNS("*","member");for(g=0;g<h.length;g++){f=h[g];m=f.getElementsByTagNameNS(d,e);0===m.length&&(m=f.getElementsByTagNameNS(null,
e));0===m.length&&(m=f.getElementsByTagNameNS("*",e));for(f=0;f<m.length;f++)this._readLayer(n,m[f],b,c)}return n},_readLayer:function(a,b,c,d){var e,f;f=this._readSrsDimension(b);0!==f&&(d=f);var g=b.childNodes,h="",m=null;for(b=0;b<g.length;b++)if(e=g[b],1==e.nodeType&&(f=e.localName,"boundedBy"!==f)){e=this._readGeometry(e,c,d);if(!this._isProjectedOk){this._isProjectedOk=!0;break}if(null!==e){m=e;h=f;break}}if(m){c={};for(b=0;b<g.length;b++)if(e=g[b],f=e.localName,d=e.textContent,f!==h)for(e=
0;e<this.fields.length;e++){var n=this.fields[e];n.name==f&&(c[f]="esriFieldTypeDouble"===n.type?parseFloat(d,10):"esriFieldTypeInteger"===n.type?parseInt(d,10):d.trim())}this._convertWFSGeometryToGraphicObjects(a,m,c)}},_convertWFSGeometryToGraphicObjects:function(a,b,c){var d;if("point"===b.geometryType&&("esriGeometryPoint"===this.geometryType||"esriGeometryComplex"===this.geometryType))d=new e,b=new C(b),d.setGeometry(b),d.setAttributes(c),a.push(d);else if("multipoint"===b.geometryType&&("esriGeometryPoint"===
this.geometryType||"esriGeometryComplex"===this.geometryType))d=new e,b=new z(b),d.setGeometry(b),d.setAttributes(c),a.push(d);else if("polyline"===b.geometryType&&("esriGeometryPolyline"===this.geometryType||"esriGeometryComplex"===this.geometryType))d=new e,b=new F(b),d.setGeometry(b),d.setAttributes(c),a.push(d);else if("polygon"===b.geometryType&&("esriGeometryPolygon"===this.geometryType||"esriGeometryComplex"===this.geometryType))d=new e,b=new H(b),d.setGeometry(b),d.setAttributes(c),a.push(d);
else if("multigeometry"===b.geometryType)for(d=0;d<b.length;d++)this._convertWFSGeometryToGraphicObjects(a,b[d],c)},_readGeometry:function(a,b,c){var d,e;d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);e=a.getElementsByTagNameNS(this._gmlNS,"MultiSurface");if(1<=e.length)for(d=0;d<e.length;)return this._readMultiSurface(e[d],b,c);e=a.getElementsByTagNameNS(this._gmlNS,"MultiCurve");if(1<=e.length){var f=[];for(d=0;d<e.length;d++){var g=this._readMultiCurve(e[d],b,
c);for(a=0;a<g.length;a++)f.push(g[a])}return{geometryType:"polyline",paths:f,spatialReference:{wkid:this._map.spatialReference.wkid}}}e=a.getElementsByTagNameNS(this._gmlNS,"MultiGeometry");for(d=0;d<e.length;)return this._readMultiGeometry(e[d],b,c);e=a.getElementsByTagNameNS(this._gmlNS,"Geometry");for(d=0;d<e.length;)return this._readGeometry(e[d],b,c);e=a.getElementsByTagNameNS(this._gmlNS,"GeometryCollection");for(d=0;d<e.length;)return this._readGeometryCollection(e[d],b,c);e=a.getElementsByTagNameNS(this._gmlNS,
"Surface");for(d=0;d<e.length;)return this._readSurface(e[d],b,c);e=a.getElementsByTagNameNS(this._gmlNS,"Curve");for(d=0;d<e.length;)return this._readCurve(e[d],b,c);e=a.getElementsByTagNameNS(this._gmlNS,"MultiPolygon");for(d=0;d<e.length;)return this._readMultiPolygon(e[d],b,c);e=a.getElementsByTagNameNS(this._gmlNS,"Polygon");for(d=0;d<e.length;)return this._readPolygon(e[d],b,c);e=a.getElementsByTagNameNS(this._gmlNS,"MultiLineString");for(d=0;d<e.length;)return this._readMultiLineString(e[d],
b,c);e=a.getElementsByTagNameNS(this._gmlNS,"LineString");for(d=0;d<e.length;){b=this._readLineString(e[d],b,c);c={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};d=[];for(a=0;a<b.length;a++)d.push(b[a]);c.paths.push(d);return c}e=a.getElementsByTagNameNS(this._gmlNS,"LinearRing");for(d=0;d<e.length;)return this._readLinearRing(e[d],b,c);e=a.getElementsByTagNameNS(this._gmlNS,"Box");if(1<=e.length)for(d=0;d<e.length;)return this._readBox(e[d],b,c);e=a.getElementsByTagNameNS(this._gmlNS,
"Envelope");for(d=0;d<e.length;)return this._readEnvelope(e[d],b,c);e=a.getElementsByTagNameNS(this._gmlNS,"MultiPoint");if(1<=e.length)for(d=0;d<e.length;)return this._readMultiPoint(e[d],b,c);e=a.getElementsByTagNameNS(this._gmlNS,"Point");for(d=0;d<e.length;)return this._readPoint(e[d],b,c);return null},_readGeometryCollection:function(a,b,c){var d,e=this._readWkidFromNode(a);-1!=e&&(b=e);e=this._readSrsDimension(a);0!==e&&(c=e);e=[];e.geometryType="multigeometry";e.spatialReference={wkid:this._map.spatialReference.wkid};
d=a.getElementsByTagNameNS(this._gmlNS,"geometryMember");for(a=0;a<d.length;a++){var f=this._readGeometryMember(d[a],b,c);e.push(f)}return e},_readMultiGeometry:function(a,b,c){var d,e=this._readWkidFromNode(a);-1!=e&&(b=e);e=this._readSrsDimension(a);0!==e&&(c=e);e=[];e.geometryType="multigeometry";e.spatialReference={wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"geometryMember");for(a=0;a<d.length;a++){var f=this._readGeometryMember(d[a],b,c);e.push(f)}return e},
_readSurface:function(a,b,c){var d,e;d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);var f=[];f.geometryType="multigeometry";f.spatialReference={wkid:this._map.spatialReference.wkid};e=a.getElementsByTagNameNS(this._gmlNS,"Point");for(d=0;d<e.length;d++)f.push(this._readPoint(e[d],b,c));e=a.getElementsByTagNameNS(this._gmlNS,"patches");for(d=0;d<e.length;d++){a=this._readPatches(e[d],b,c);for(var g=0;g<a.length;g++)f.push(a[g])}return f},_readMultiSurface:function(a,
b,c){var d,e,f;d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);var g=[];g.geometryType="multigeometry";g.spatialReference={wkid:this._map.spatialReference.wkid};f=a.getElementsByTagNameNS(this._gmlNS,"surfaceMember");for(d=0;d<f.length;d++){var h=this._readSurfaceMember(f[d],b,c);for(e=0;e<h.length;e++)g.push(h[e])}f=a.getElementsByTagNameNS(this._gmlNS,"surfaceMembers");for(d=0;d<f.length;d++){a=this._readSurfaceMembers(f[d],b,c);for(e=0;e<a.length;e++)g.push(a[e])}return g},
_readCurve:function(a,b,c){var d,e=this._readWkidFromNode(a);-1!=e&&(b=e);e=this._readSrsDimension(a);0!==e&&(c=e);e={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};d=a.getElementsByTagNameNS(this._gmlNS,"segments");for(a=0;a<d.length;a++)for(var f=this._readSegments(d[a],b,c),g=0;g<f.length;g++)e.paths.push(f[g]);return e},_readSegments:function(a,b,c){var d,e=this._readWkidFromNode(a);-1!=e&&(b=e);e=this._readSrsDimension(a);0!==e&&(c=e);e=[];e.geometryType=
"multigeometry";e.spatialReference={wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"LineStringSegment");for(a=0;a<d.length;a++){var f=this._readLineStringSegment(d[a],b,c);e.push(f)}return e},_readLineStringSegment:function(a,b,c){var d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);for(a=a.getElementsByTagNameNS(this._gmlNS,"posList");0<a.length;)return this._readPosList(a[0],b,c)},_readMultiCurve:function(a,b,c){var d,e,f,g;d=this._readWkidFromNode(a);
-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);var h=[];h.spatialReference={wkid:this._map.spatialReference.wkid};f=a.getElementsByTagNameNS(this._gmlNS,"curveMember");for(d=0;d<f.length;d++){g=this._readCurveMember(f[d],b,c);for(e=0;e<g.length;e++)h.push(g[e])}f=a.getElementsByTagNameNS(this._gmlNS,"curveMembers");for(d=0;d<f.length;d++){g=this._readCurveMembers(f[d],b,c);for(e=0;e<g.length;e++)h.push(g[e])}return h},_readGeometryMember:function(a,b,c){var d,e;d=this._readWkidFromNode(a);
-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);e=a.getElementsByTagNameNS(this._gmlNS,"Point");for(d=0;d<e.length;)return this._readPoint(e[d],b,c);e=a.getElementsByTagNameNS(this._gmlNS,"LineString");for(d=0;d<e.length;){b=this._readLineString(e[d],b,c);c={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};d=[];for(a=0;a<b.length;a++)d.push(b[a]);c.paths.push(d);return c}e=a.getElementsByTagNameNS(this._gmlNS,"Polygon");for(d=0;d<e.length;)return this._readPolygon(e[d],
b,c);return null},_readSurfaceMember:function(a,b,c){var d,e=this._readWkidFromNode(a);-1!=e&&(b=e);e=this._readSrsDimension(a);0!==e&&(c=e);e=[];e.geometryType="multigeometry";e.spatialReference={wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"Polygon");for(a=0;a<d.length;a++){var f=this._readPolygon(d[a],b,c);e.push(f)}return e},_readSurfaceMembers:function(a,b,c){var d,e=this._readWkidFromNode(a);-1!=e&&(b=e);e=this._readSrsDimension(a);0!==e&&(c=e);e=[];e.geometryType=
"multigeometry";e.spatialReference={wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"Polygon");for(a=0;a<d.length;a++){var f=this._readPolygon(d[a],b,c);e.push(f)}return e},_readCurveMember:function(a,b,c){var d,e=this._readWkidFromNode(a);-1!=e&&(b=e);e=this._readSrsDimension(a);0!==e&&(c=e);e=[];e.geometryType="multigeometry";e.spatialReference={wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"LineString");for(a=0;a<d.length;a++){var f=this._readLineString(d[a],
b,c);e.push(f)}return e},_readCurveMembers:function(a,b,c){var d,e=this._readWkidFromNode(a);-1!=e&&(b=e);e=this._readSrsDimension(a);0!==e&&(c=e);e=[];e.geometryType="multigeometry";e.spatialReference={wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"LineString");for(a=0;a<d.length;a++){var f=this._readLineString(d[a],b,c);e.push(f)}return e},_readBox:function(a,b,c){var d,e,f,g,h,m,n,p=this._readWkidFromNode(a);-1!=p&&(b=p);p=this._readSrsDimension(a);0!==p&&(c=p);p=
{geometryType:"polygon",rings:[],spatialReference:{wkid:this._map.spatialReference.wkid}};e=a.getElementsByTagNameNS(this._gmlNS,"coordinates");for(d=0;d<e.length;d++)if(f=this._readCoordinates(e[d],b,c))return 1<=f.length&&(g=m=f[0][0],h=n=f[0][1]),1<=f.length&&(m=f[1][0],n=f[1][1]),p.rings.push([[g,h],[g,n],[m,n],[m,h],[g,h]]),p;e=a.getElementsByTagNameNS(this._gmlNS,"coord");if(2<=e.length){if((a=this._readCoord(e[0],b,c))&&1<=a.length)g=m=a[0][0],h=n=a[0][1];if((b=this._readCoord(e[1],b,c))&&
1<=b.length)m=b[0][0],n=b[0][1];p.rings.push([[g,h],[g,n],[m,n],[m,h],[g,h]]);return p}return null},_readEnvelope:function(a,b,c){var d,e,f,g;d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);e=a.getElementsByTagNameNS(this._gmlNS,"lowerCorner");for(d=0;d<e.length;d++){var h=this._readCoordinates(e[d],b,c);h&&(f=h[0])}e=a.getElementsByTagNameNS(this._gmlNS,"upperCorner");for(d=0;d<e.length;d++)(a=this._readCoordinates(e[d],b,c))&&(g=a[0]);return f&&g?{geometryType:"polygon",
rings:[[[f[0],f[1]],[f[0],g[1]],[g[0],g[1]],[g[0],f[1]],[f[0],f[1]]]],spatialReference:{wkid:this._map.spatialReference.wkid}}:null},_readPolygon:function(a,b,c){var d,e,f;d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);var g={geometryType:"polygon",rings:[],spatialReference:{wkid:this._map.spatialReference.wkid}};e=a.getElementsByTagNameNS(this._gmlNS,"outerBoundaryIs");for(d=0;d<e.length;d++)f=this._readOuterBoundaryIs(e[d],b,c),g.rings.push(f);e=a.getElementsByTagNameNS(this._gmlNS,
"innerBoundaryIs");for(d=0;d<e.length;d++)f=this._readInnerBoundaryIs(e[d],b,c),g.rings.push(f);e=a.getElementsByTagNameNS(this._gmlNS,"exterior");for(d=0;d<e.length;d++)f=this._readExterior(e[d],b,c),g.rings.push(f);e=a.getElementsByTagNameNS(this._gmlNS,"interior");for(d=0;d<e.length;d++)f=this._readInterior(e[d],b,c),g.rings.push(f);return g},_readPolygonMember:function(a,b,c){var d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);for(a=a.getElementsByTagNameNS(this._gmlNS,
"Polygon");0<a.length;)return this._readPolygon(a[0],b,c);return null},_readMultiPolygon:function(a,b,c){var d,e=this._readWkidFromNode(a);-1!=e&&(b=e);e=this._readSrsDimension(a);0!==e&&(c=e);e=[];e.geometryType="multigeometry";e.spatialReference={wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"polygonMember");for(a=0;a<d.length;a++){var f=this._readPolygonMember(d[a],b,c);e.push(f)}return e},_readOuterBoundaryIs:function(a,b,c){var d=this._readWkidFromNode(a);-1!=d&&
(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);for(a=a.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<a.length;)return this._readLinearRing(a[0],b,c);return null},_readInnerBoundaryIs:function(a,b,c){var d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);for(a=a.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<a.length;)return this._readLinearRing(a[0],b,c);return null},_readExterior:function(a,b,c){var d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);
0!==d&&(c=d);for(a=a.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<a.length;)return this._readLinearRing(a[0],b,c);return null},_readInterior:function(a,b,c){var d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);for(a=a.getElementsByTagNameNS(this._gmlNS,"LinearRing");0<a.length;)return this._readLinearRing(a[0],b,c);return null},_readPatches:function(a,b,c){var d,e=this._readWkidFromNode(a);-1!=e&&(b=e);e=this._readSrsDimension(a);0!==e&&(c=e);e=[];e.spatialReference=
{wkid:this._map.spatialReference.wkid};d=a.getElementsByTagNameNS(this._gmlNS,"PolygonPatch");for(a=0;a<d.length;a++)e.push(this._readPolygon(d[a],b,c));return e},_readLineString:function(a,b,c){var d,e,f,g,h;d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);var m=[];m.spatialReference={wkid:this._map.spatialReference.wkid};f=a.getElementsByTagNameNS(this._gmlNS,"coordinates");for(d=0;d<f.length;d++)if(g=this._readCoordinates(f[d],b,c))for(e=0;e<g.length;e++)h=g[e],
m.push(h);f=a.getElementsByTagNameNS(this._gmlNS,"coord");for(d=0;d<f.length;d++)if(g=this._readCoord(f[d],b,c))for(e=0;e<g.length;e++)h=g[e],m.push(h);f=a.getElementsByTagNameNS(this._gmlNS,"posList");for(d=0;d<f.length;d++)if(g=this._readPosList(f[d],b,c))for(e=0;e<g.length;e++)h=g[e],m.push(h);return m},_readLineStringMember:function(a,b,c){var d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);for(a=a.getElementsByTagNameNS(this._gmlNS,"LineString");0<a.length;)return this._readLineString(a[0],
b,c);return null},_readMultiLineString:function(a,b,c){var d,e=this._readWkidFromNode(a);-1!=e&&(b=e);e=this._readSrsDimension(a);0!==e&&(c=e);e={geometryType:"polyline",paths:[],spatialReference:{wkid:this._map.spatialReference.wkid}};d=a.getElementsByTagNameNS(this._gmlNS,"lineStringMember");for(a=0;a<d.length;a++){var f=this._readLineStringMember(d[a],b,c);f&&e.paths.push(f)}return 1<=e.paths.length?e:null},_readPoint:function(a,b,c){var d,e,f;d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);
0!==d&&(c=d);e=a.getElementsByTagNameNS(this._gmlNS,"coordinates");for(d=0;d<e.length;d++)if(f=this._readCoordinates(e[d],b,c))return{geometryType:"point",x:f[0][0],y:f[0][1],spatialReference:{wkid:this._map.spatialReference.wkid}};e=a.getElementsByTagNameNS(this._gmlNS,"pos");for(d=0;d<e.length;d++)if((f=this._readPos(e[d],b,c))&&0<f.length)return{geometryType:"point",x:f[0][0],y:f[0][1],spatialReference:{wkid:this._map.spatialReference.wkid}};e=a.getElementsByTagNameNS(this._gmlNS,"coord");for(d=
0;d<e.length;d++)if(a=this._readCoord(e[d],b,c))return{geometryType:"point",x:a[0][0],y:a[0][1],spatialReference:{wkid:this._map.spatialReference.wkid}};return null},_readPointMember:function(a,b,c){var d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);for(a=a.getElementsByTagNameNS(this._gmlNS,"Point");0<a.length;)return this._readPoint(a[0],b,c);return null},_readMultiPoint:function(a,b,c){var d,e=this._readWkidFromNode(a);-1!=e&&(b=e);e=this._readSrsDimension(a);
0!==e&&(c=e);e={geometryType:"multipoint",points:[],spatialReference:{wkid:this._map.spatialReference.wkid}};d=a.getElementsByTagNameNS(this._gmlNS,"pointMember");for(a=0;a<d.length;a++){var f=this._readPointMember(d[a],b,c);f&&e.points.push([f.x,f.y])}return 1<=e.points.length?e:null},_readLinearRing:function(a,b,c){var d,e;d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);e=a.getElementsByTagNameNS(this._gmlNS,"coordinates");for(d=0;d<e.length;)return this._readCoordinates(e[d],
b,c);e=a.getElementsByTagNameNS(this._gmlNS,"posList");for(d=0;d<e.length;)return this._readCoordinates(e[d],b,c);e=a.getElementsByTagNameNS(this._gmlNS,"pos");for(d=0;d<e.length;)return this._readPos(e[d],b,c)},_readCoordinatesBody:function(a,b,c){var d,e=new x(a);b=b.trim();var f,g,h=[];h.spatialReference={wkid:this._map.spatialReference.wkid};a=this._isReverse(a,this.version);if(b)if(2===c){if((b=b.match(/[0123456789.\-\+eE]+/g))&&2<=b.length)for(c=0;c<b.length;c+=2)f=parseFloat(b[c]),g=parseFloat(b[c+
1]),a&&(d=g,g=f,f=d),d={},this._projectFromSRToSR(e,this._map.spatialReference,f,g,d)&&(f=d.x,g=d.y),h.push([f,g])}else if(3===c&&(b=b.match(/[0123456789.\-\+eE]+/g))&&3<=b.length)for(c=0;c<b.length;c+=3)f=parseFloat(b[c]),g=parseFloat(b[c+1]),a&&(d=g,g=f,f=d),d={},this._projectFromSRToSR(e,this._map.spatialReference,f,g,d)&&(f=d.x,g=d.y),h.push([f,g]);return h},_readCoord:function(a,b,c){var d,e,f,g,h=this._readWkidFromNode(a);-1!=h&&(b=h);h=new x(b);f=this._readSrsDimension(a);0!==f&&(c=f);var m=
this._isReverse(b,this.version),n=[];n.spatialReference={wkid:this._map.spatialReference.wkid};f=0;e=a.getElementsByTagNameNS(this._gmlNS,"X");for(d=0;d<e.length;){f=this._readFloat(e[d],b,c);break}g=0;e=a.getElementsByTagNameNS(this._gmlNS,"Y");for(d=0;d<e.length;){g=this._readFloat(e[d],b,c);break}m&&(a=g,g=f,f=a);a={};this._projectFromSRToSR(h,this._map.spatialReference,f,g,a)&&(f=a.x,g=a.y);n.push(m?[g,f]:[f,g]);return n},_readCoordinates:function(a,b,c){var d=this._readWkidFromNode(a);-1!=d&&
(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);return this._readCoordinatesBody(b,a.textContent,c)},_readPos:function(a,b,c){var d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);return this._readCoordinatesBody(b,a.textContent,c)},_readPosList:function(a,b,c){var d=this._readWkidFromNode(a);-1!=d&&(b=d);d=this._readSrsDimension(a);0!==d&&(c=d);return this._readCoordinatesBody(b,a.textContent,c)},_projectFromSRToSR:function(a,b,c,d,e){if(B.canProject(a,b))return a=
new C(c,d,a),b=B.project(a,b),e.x=b.x,e.y=b.y,!0;e.x=c;e.y=d;return this._isProjectedOk=!1},_readFloat:function(a){return(a=a.textContent)?parseFloat(a):0},_readSrsDimension:function(a){return a.attributes&&(a=a.attributes.getNamedItem("srsDimension"))?parseInt(a.value,10):0},_readWkidFromNode:function(a){if(a.attributes&&(a=a.attributes.getNamedItem("srsName")))if((a=a.value.match(/\d+/g))&&0<a.length)return a=parseInt(a[a.length-1],10),84===a&&(a=4326),parseInt(a,10);return-1},_isReverse:function(a,
b){return this._inverseResponse},_appendCustomParameters:function(a){if(this.customParameters)for(var b in this.customParameters)a+=(-1===a.indexOf("?")?"?":"\x26")+b+"\x3d"+encodeURIComponent(this.customParameters[b]);return a}})})},"esri/layers/StreamLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/array dojo/_base/Color dojo/_base/lang dojo/has dojo/io-query dojo/on dojo/aspect ../kernel ../request ../graphic ./FeatureLayer ./StreamMode ./StreamTrackManager ../geometry/jsonUtils ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../renderers/SimpleRenderer ./PurgeOptions".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z){return g([u],{declaredClass:"esri.layers.StreamLayer",_preventInit:!0,constructor:function(a,b){b=b||{};if(!b.mode||b.mode===u.MODE_STREAM)this._isStream=!0,this.currentMode=this.mode=u.MODE_STREAM,this._mode=new t(this);this.purgeOptions=new z(this,b.purgeOptions||{});this.purgeInterval=b.purgeInterval||0;this._reconnectAttempts=0;this.maxReconnectAttempts=10;this.socket=this._reconnectTimeoutId=null;this._keepLatestQueried=!1;this._keepLatestUrl=
null;this._relatedQueried=!1;this._joinField=this._relatedUrl=null;this._refreshing=!1;this._attemptReconnect=d.hitch(this,this._attemptReconnect);this._purge=d.hitch(this,this._purge);this._processServiceJson=d.hitch(this,this._processServiceJson);if(d.isObject(a)&&a.layerDefinition)this._initFeatureLayer(a,b);else{var c=this;p({url:a,content:d.mixin({f:"json"}),callbackParamName:"callback"}).then(function(a){c._processServiceJson(a,b)},function(a){c._errorHandler(a)})}},_processServiceJson:function(b,
c){var d=this;b.relatedFeatures&&b.relatedFeatures.featuresUrl&&b.relatedFeatures.joinField?(this._relatedUrl=b.relatedFeatures.featuresUrl,this.objectIdField=this._joinField=b.relatedFeatures.joinField,p({url:this._relatedUrl,content:{f:"json"},callbackParamName:"callback"}).then(function(e){e=e.fields||[];var f=a.map(b.fields,function(a){return a.name.toLowerCase()});a.forEach(e,function(c){-1===a.indexOf(f,c.name.toLowerCase())&&b.fields.push(c)});c.resourceInfo=b;d._initFeatureLayer(d._url,c)},
function(a){d.onError({error:a})})):(c.resourceInfo=b,this._initFeatureLayer(this._url,c))},_initLayer:function(a,b){this.inherited(arguments);if(a){var c;if(a.layerDefinition)this.purgeOptions=new z(this,this._params.purgeOptions||{}),this.socketUrl=this._params.socketUrl||a.layerDefinition.socketUrl||void 0;else{if(this._params.socketUrl)this.socketUrl=this._params.socketUrl;else{var d=this._getWebsocketConnectionInfo(a),e=d.urls;e&&e.length?(this._socketUrls=e,this.socketUrl=e[0],this.socketDirection=
"broadcast"===this._params.socketDirection?"broadcast":"subscribe",this.socketUrl+="/"+this.socketDirection,this._websocketToken=d.token,e.length>this.maxReconnectAttempts&&(this.maxReconnectAttempts=e.length)):(this.socketUrl=void 0,d="No web socket urls were retrieved from the Stream Service. Layer will not attempt to connect.","https:"===location.protocol&&(d+=" An insecure web socket connection cannot be made from a secure web page."),this.onError(Error(d)))}if(this._params.filter)try{this._filter=
c=this._makeFilter(this._params.filter)}catch(f){this.onError(Error("Error trying to create filter object: "+f+". Layer will not have filter applied")),this._filter=null}if(this._params.geometryDefinition||this._outFields||this._defnExpr){c=c||{};c.geometry=this._params.geometryDefinition;c.outFields=this._outFields;c.where=this._defnExpr;try{this._filter=c=this._makeFilter(c)}catch(g){this.onError(Error("Error trying to create filter object: "+g+". Layer will not have filter applied")),this._filter=
null}}}this.maximumTrackPoints=this._params.maximumTrackPoints||0===this._params.maximumTrackPoints?this._params.maximumTrackPoints:1;(this._params.refreshRate||0===this._params.refreshRate)&&this._mode&&this._mode._setRefreshRate&&this._mode._setRefreshRate(this._params.refreshRate);this._keepLatestUrl=a.keepLatestArchive?a.keepLatestArchive.featuresUrl:null;a.relatedFeatures&&(a.relatedFeatures.featuresUrl&&a.relatedFeatures.joinField)&&(this._relatedUrl=a.relatedFeatures.featuresUrl,this.objectIdField=
this._joinField=a.relatedFeatures.joinField);this.objectIdField||this._makeObjectIdField();this._map&&(this.socketUrl&&!this._connected)&&this.connect()}},_setMap:function(a){var b=this.inherited(arguments),c=this._getRenderer();if(this.timeInfo&&(this._trackIdField||c&&(c.latestObservationRenderer||c.trackRenderer)))this._trackManager=new w(this),this._trackManager.initialize(a);this.socketUrl&&(!this._connected&&this._map)&&this.connect();return b},_unsetMap:function(b,c){a.forEach(this._connects,
m.disconnect);(this._connected||this._reconnecting||this.socket)&&this.disconnect();this._togglePurgeT();this.inherited(arguments);this._map=null},_suspend:function(){this._togglePurgeT();this.inherited(arguments)},_resume:function(){this.inherited(arguments);this._togglePurgeT(!0)},clear:function(){try{this._mode&&this._mode._clearDrawBuffer&&this._mode._clearDrawBuffer(),this._mode&&this._mode._clearTimeBin&&this._mode._clearTimeBin(),this._mode&&this._mode._clearFeatureMap&&this._mode._clearFeatureMap(),
this._trackManager&&this._trackManager.clearTracks()}catch(a){}this.inherited(arguments)},redraw:function(){this._mode&&this._mode._flushDrawBuffer&&this._mode._flushDrawBuffer();this.inherited(arguments)},setDefinitionExpression:function(a){this.setFilter({where:a})},getDefinitionExpression:function(){var a;this._filter&&(a=this._filter.where);return a},destroy:function(){this.disconnect();this.inherited(arguments)},onResume:function(a){this.inherited(arguments)},setGeometryDefinition:function(a){this.setFilter({geometry:a})},
getGeometryDefinition:function(){var a;this._filter&&(a=this._filter.geometry);return a},connect:function(a){var b=this,c={},d=this._filter,e,f,g=this.socketUrl,m;try{if(!this._connected){if(this._map){var n;if(this._relatedUrl&&!this._relatedQueried&&this._mode._fetchArchive)return n=this.on("update-end",function(a){b._relatedQueried=!0;n.remove();n=null;(!a||!a.error)&&b.connect()}),this._mode._fetchArchive(this._relatedUrl),!1;if(this._keepLatestUrl&&!this._keepLatestQueried&&this._mode._fetchArchive)return n=
this.on("update-end",function(a){b._keepLatestQueried=!0;n.remove();n=null;(!a||!a.error)&&b.connect()}),this._mode._fetchArchive(this._keepLatestUrl),!1}this._websocketToken&&(c.token=this._websocketToken);this._map&&(this._map.spatialReference&&this.spatialReference)&&this._map.spatialReference.wkid!==this.spatialReference.wkid&&(c.outSR=this._map.spatialReference.wkid);if(d)for(f in d)null!==d[f]&&(e="geometry"===f?JSON.stringify(d[f]):d[f],c[f]=e);g+="?"+h.objectToQuery(c);return m=this._createConnection(g,
a)}}catch(p){a&&a(p,!1),this.onConnectionError({error:p})}},disconnect:function(a){var b=this._refreshing?"Disconnecting as part of layer refresh cycle":"Connection closed from client",c=this._refreshing?!0:!1;this._reconnectTimeoutId&&clearTimeout(this._reconnectTimeoutId);this._refreshing=this._reconnecting=this._connected=!1;this.socket&&this.socket.close();this.onDisconnect({willReconnect:c,message:b});a&&a(null,!0)},setFilter:function(a){var b,c;if(this._collection)return this.onError("Filter can only be set when the source of the layer is a Stream Service"),
!1;try{if(void 0!==a.outFields)return c=Error("Outfields property cannot be changed after layer is created"),this.onFilterChange({filter:this.getFilter(),error:c}),!1;b=this._makeFilter(a)}catch(d){return c=Error(d),this.onFilterChange({filter:this.getFilter(),error:c}),!1}if(this.socket)a={filter:b},this.socket.send(JSON.stringify(a));else n.once(this,"connect",function(a){this.setFilter(b)});return!0},getFilter:function(){var b=this._filter,c={},d=["geometry","outFields","where"];b&&a.forEach(d,
function(a){var d=b[a];d&&("geometry"===a?d=v.fromJson(d):"outFields"===a&&(d=d.split(",")),c[a]=d)});return c},setMaximumTrackPoints:function(a){if(!a&&0!==a)return!1;this.maximumTrackPoints=a;this._mode.propertyChangeHandler(3)},getUniqueValues:function(b){var c,d={},e=[];c=this._getField(b,!0);if(!c)return e;b=c.name;a.forEach(this.graphics||[],function(a){a=(a.attributes||{})[b];void 0!==a&&!d[a]&&(d[a]=1,e.push(a))});e.sort(function(a,b){return a<b?-1:a>b?1:0});return e},getLatestObservations:function(){var a=
[];return a=this._trackManager?this._trackManager.getLatestObservations():this.graphics},setPurgeInterval:function(a){var b=this.purgeInterval;this.purgeInterval=a;this._togglePurgeT();a&&this._togglePurgeT(!0);if(b!==a)this.onPurgeIntervalChange();return this},_togglePurgeT:function(a){if(a&&this.purgeInterval){var b=this;clearTimeout(this._purgeT);this._mode&&this._mode._flushDrawBuffer&&(this._purgeT=setTimeout(function(){!b.updating&&!b.suspended&&(b._mode._flushDrawBuffer(),b._togglePurgeT(!0))},
6E4*this.purgeInterval))}else this._purgeT&&(clearTimeout(this._purgeT),this._refreshT=null)},onMessage:function(){},onConnect:function(){},onDisconnect:function(){},onFilterChange:function(){},onAttemptReconnect:function(){},onConnectionError:function(){},onPurgeIntervalChange:function(){},_createConnection:function(a,b){var c=this,d=new WebSocket(a);d.onopen=function(){c.socket=d;c._connected=!0;c._reconnecting=!1;c._reconnectAttempts=0;c._bind();c.onConnect();b&&b(null,!0)};d.onclose=function(a){var b,
d=!0,e=c._connected,f=null;if(c._connected||c._reconnecting){if(a.code)if(b="Connection failed: ",1001===a.code)b+=a.reason||"Service is going away.",d=!1;else if(4400===a.code)b+=a.reason||"Invalid url parameters. Check filter properties.",d=!1;else if(4404===a.code)b+="Service not found",d=!1;else if(4401===a.code||4403===a.code)b+="Not authorized",d=!1;d&&(c._reconnectAttempts+=1,c._reconnectAttempts>c.maxReconnectAttempts&&(b="Maximum reconnect attempts exceeded",d=!1,e=!0));c._connected=!1;e&&
(b&&(f=Error(b)),c.onDisconnect({error:f,willReconnect:d}));d?c._attemptReconnect():c.socket=null}else c.socket||(f=Error("Could not make connection to service"),c.onConnectionError({error:f})),c.socket=null,c._connected=!1};d.onerror=function(a){};return d},_purge:function(){var a,b=[],c;if(this.purgeOptions.displayCount&&this.graphics.length>this.purgeOptions.displayCount)for(a=0;a<this.graphics.length-this.purgeOptions.displayCount;a++)c=this.graphics[a],b.push(c);0<b.length&&(this._mode._removeFeatures(b),
this._trackManager&&this._trackManager.removeFeatures(b))},_bind:function(){var a=this;this.socket.onmessage=function(b){a._onMessage(JSON.parse(b.data))}},_onMessage:function(a){var b=this;this.onMessage(a);var c={create:function(a){b._create(a)},update:function(a){b._update(a)},"delete":function(a){b._delete(a)}};if(a.type)c[a.type](a.feature);else a.hasOwnProperty("filter")?b._handleFilterMessage(a):this._create(a)},_create:function(a){function b(a){if(!c._featureHasOID(a,d)){if(!a.geometry)return!1;
a.attributes=a.attributes||{};a.attributes[d]=c._nextId++}a=a.declaredClass?a:new s(a);c._mode.drawFeature(a)}var c=this,d=c.objectIdField;a.length?a.forEach(function(a){a&&b(a)}):a&&b(a)},_delete:function(a){var b=this,c=a[b.objectIdField]||a.attributes[b.objectIdField],d=!1;this.graphics.forEach(function(a){a.attributes[b.objectIdField]==c&&(d=a)});d&&this.remove(d)},_update:function(a){var b=this,c=!1;this.graphics.forEach(function(d){d.attributes[b.objectIdField]==a.attributes[b.objectIdField]&&
(c=d)});c&&(a.attributes&&c.setAttributes(a.attributes),a.geometry&&c.setGeometry(v.fromJson(a.geometry)))},_makeFilter:function(a){var b,c=null;a=a||{};if(void 0!==a.geometry)if(c=c||{},null===a.geometry)c.geometry=null;else{b="string"===typeof a.geometry?v.fromJson(JSON.parse(a.geometry)):a.geometry.declaredClass?a.geometry:v.fromJson(a.geometry);if(!b||"point"===b.type)throw"Query object contains invalid geometry";"extent"!==b.type&&(b=b.getExtent());if(!b||0===b.getHeight()&&0===b.getWidth())throw"Invalid filter geometry: Extent cannot have a height and width of 0";
c.spatialRel="esriSpatialRelIntersects";c.geometryType="esriGeometryEnvelope";c.geometry=b.toJson()}void 0!==a.where&&(c=c||{},c.where=a.where);if(void 0!==a.outFields&&(c=c||{},a="string"===typeof a.outFields?"*"===a.outFields?null:a.outFields.replace(/,\s+/g,",").split(","):null===a.outFields?null:a.outFields,a=this._makeOutFields(a))){if(a.errors&&0<a.errors.length)throw"Invalid filter outFields. "+a.errors.join(",");c.outFields=a.fields?a.fields.join(","):null}return c},_makeOutFields:function(b){var c=
this,d=[],e=[],f={fields:null};if(!b||0===b.length)return f;a.forEach(b,function(a){if("*"===a)return f;var b=c._getField(a,!0);b?d.push(b.name):e.push("Field named "+a+" not found in schema.")});b=c._getOutFields();a.forEach(b,function(b){c._getField(b)&&-1===a.indexOf(d,b)&&d.push(b)});f.fields=d;f.errors=e;return f},_handleFilterMessage:function(a){a.error?(a=Error(a.error.join(",")),this.onFilterChange({filter:this.getFilter(),error:a})):(a=a.filter,a.geometry&&"string"===typeof a.geometry&&(a.geometry=
JSON.parse(a.geometry)),this._filter=a,this.onFilterChange({filter:this.getFilter()}))},_getWebsocketConnectionInfo:function(b){var c={urls:[]},d,e=[],f=[],g,h,m;b.streamUrls&&a.forEach(b.streamUrls,function(a){"ws"===a.transport&&(d=a.urls,c.token=a.token)});if(!d)return c;a.forEach(d,function(a){0===a.lastIndexOf("wss",0)?f.push(a):e.push(a)});b="https:"===location.protocol||0===this.url.lastIndexOf("https:",0)?f:0===e.length?f:e;if(1<b.length)for(g=0;g<b.length-1;g++)h=g+Math.floor(Math.random()*
(b.length-g)),m=b[h],b[h]=b[g],b[g]=m;c.urls=b;return c},_attemptReconnect:function(){var a=this,b;this._reconnectTimeoutId=null;a._connected=!1;if(!a._socketUrls)return!1;if(!a._collection&&!a._reconnecting&&a.socket&&a.credential)return a._reconnecting=!0,a._getServiceConnectionMetadata(a._attemptReconnect),!1;a._reconnecting=!0;a.socket=null;if(a._reconnectAttempts>a.maxReconnectAttempts)return a._reconnecting=!1;a.socketUrl=a._socketUrls[a._reconnectAttempts>a._socketUrls.length-1?a._reconnectAttempts%
a._socketUrls.length:a._reconnectAttempts];a.socketUrl+="/"+a.socketDirection;b=a._randomIntFromInterval(0,1E3);this._reconnectTimeoutId=setTimeout(function(){a.onAttemptReconnect({count:a._reconnectAttempts,url:a.socketUrl});a.connect()},1E3*a._reconnectAttempts+b)},_getServiceConnectionMetadata:function(a){var b=this,c=b._url.path;a="function"===typeof a?a:null;p({url:c,content:d.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(function(c){c=b._getWebsocketConnectionInfo(c);
b._websocketToken=c.token;a&&a()},function(a){b.onError(Error(a))})},_setDefaultRenderer:function(){var a=this.geometryType,c=new b([5,112,176,0.8]),d=new b([255,255,255]),d=new B(B.STYLE_SOLID,d,1),e;if("esriGeometryPoint"===a||"esriGeometryMultipoint"===a)e=new A(A.STYLE_CIRCLE,10,d,c);else if("esriGeometryPolyline"===a)e=new B(B.STYLE_SOLID,c,2);else if("esriGeometryPolygon"===a||"esriGeometryEnvelope"===a)c=new b([5,112,176,0.2]),d=new b([5,112,176,0.8]),d=new B(B.STYLE_SOLID,d,1),e=new x(x.STYLE_SOLID,
d,c);e&&this.setRenderer(new C(e))},_makeObjectIdField:function(){var b=1,c,d,e=[];if(!this.objectIdField){c=this.fields.length;for(d=0;d<c;d++)e.push(this.fields[d].name.toLowerCase());for(;-1!==a.indexOf(e,"objectid_"+b);)b+=1;this.objectIdField="objectid_"+b;this.fields.push({name:"objectid_"+b,type:"esriFieldTypeOID",alias:"objectid_"+b,nullable:!1})}},_featureHasOID:function(a,b){return a.attributes&&(a.attributes[b]||0===a.attributes[b])},_randomIntFromInterval:function(a,b){return Math.floor(Math.random()*
(b-a+1)+a)}})})},"esri/layers/StreamTrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../graphic ../geometry/Polyline ./TrackManager".split(" "),function(g,m,a,b,d,c,h,n){return g([n],{declaredClass:"esri.layers._StreamTrackManager",constructor:function(a){this.inherited(arguments)},initialize:function(a){this.inherited(arguments)},addFeatures:function(b,c){function d(a,b){var c,e,f,h;g[a]||(g[a]=[]);c=g[a];0<n&&(b.length>n&&b.splice(0,b.length-
n),f=b.length+c.length,f>n&&(e=c.splice(0,f-n)));f=b.length;for(h=0;h<f;h+=1)c.push(b[h]);return{deletes:e,adds:b}}var g,h,m,n,v={},x={},B;if(c)return this.inherited(arguments),v;g=this.trackMap;h=this.layer;m=h._trackIdField;n=h.maximumTrackPoints||0;a.forEach(b,function(a){var b=a.attributes[m];a.visible&&(x[b]||(x[b]=[]),x[b].push(a))});for(B in x)x.hasOwnProperty(B)&&(h=d(B,x[B]),v[B]=h);return v},removeFeatures:function(b){var c=[],d=this.layer.objectIdField,g=this.layer._trackIdField;b&&(a.forEach(b,
function(b){var f,h,m,n;h=b.attributes[g];f=b.attributes[d];if(m=this.trackMap[h])for(b=0;b<m.length;b+=1)if(n=m[b],n.attributes[d]===f){this.trackMap[h].splice(b,1);-1===a.indexOf(h)&&c.push(h);break}},this),0<b.length&&this.refreshTracks(c))},drawTracks:function(b){function d(a){var b=n[a],e=b&&1<b.length,f,v,F;if((F=g.trackLineMap[a])&&!e)m.remove(F),delete g.trackLineMap[a],F=null;if(!e)return!1;e=[];for(f=b.length-1;0<=f;f-=1)(v=b[f].geometry)&&e.push([v.x,v.y]);b={};b[w]=a;1<e.length&&(F?(a=
F.geometry,a.removePath(0),a.addPath(e),F.setGeometry(a)):(F=new c(new h({paths:[e],spatialReference:t}),null,b),m.add(F),g.trackLineMap[a]=F))}var g=this,m=this.container,n,t,w,v;if(m)if(n=this.trackMap,t=this.map.spatialReference,w=this.layer._trackIdField,b)a.forEach(b,function(a){d(a)});else for(v in n)n.hasOwnProperty(v)&&d(v)},refreshTracks:function(b){function c(a){var b,e;a=d[a]||[];b=a.length;for(e=0;e<b;e++)g._repaint(a[e],null,!0)}var d=this.trackMap,g=this.layer;g._getRenderer();var h;
this.drawTracks(b);if(b)a.forEach(b,function(a){c(a)});else for(h in d)d.hasOwnProperty(h)&&c(h)},getLatestObservations:function(){var a,b,c=this.trackMap,d=[];for(a in c)c.hasOwnProperty(a)&&(b=c[a],d.push(b[b.length-1]));return d},destroy:function(){this.inherited(arguments);this.trackLineMap=null}})})},"esri/layers/PurgeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Stateful","dojo/has","../kernel"],function(g,m,a,b,d){return g([a],{declaredClass:"esri.layers.PurgeOptions",
constructor:function(a,b){this.parent=a;for(var d in b)this[d]=b[d]},_displayCountSetter:function(a){this.displayCount=a;this.parent.refresh()}})})},"esri/layers/ImageServiceParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang".split(" "),function(g,m,a,b,d,c){g=g(null,{declaredClass:"esri.layers.ImageServiceParameters",extent:null,width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,compressionQuality:null,bandIds:null,
timeExtent:null,mosaicRule:null,renderingRule:null,noData:null,compressionTolerance:null,adjustAspectRatio:null,lercVersion:null,toJson:function(b){var d=this.bbox||this.extent;b=(d=d&&b&&d._normalize(!0))?d.spatialReference.wkid||a.toJson(d.spatialReference.toJson()):null;var f=this.imageSpatialReference,d={bbox:d?d.xmin+","+d.ymin+","+d.xmax+","+d.ymax:null,bboxSR:b,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,imageSR:f?f.wkid||a.toJson(f.toJson()):b,format:this.format,
interpolation:this.interpolation,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null,mosaicRule:this.mosaicRule?a.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?a.toJson(this.renderingRule.toJson()):null,noData:this.noData,noDataInterpretation:this.noDataInterpretation,compressionTolerance:this.compressionTolerance,adjustAspectRatio:this.adjustAspectRatio,lercVersion:this.lercVersion};b=this.timeExtent;d.time=b?b.toJson().join(","):null;
return c.filter(d,function(a){if(null!==a&&void 0!==a)return!0})}});m.mixin(g,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor",NODATA_MATCH_ALL:"esriNoDataMatchAll",NODATA_MATCH_ANY:"esriNoDataMatchAny"});return g})},"esriPBI/extensions/tools/ZoomToFeatureTool":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/i18n!./nls/Tools","./_Tool"],
function(g,m,a,b){return g(b,{execute:function(){this.app.mapManager.popup._zoomToFeature({preventDefault:function(){}})},initialize:function(b){if(!b.mapManager.popup||!b.mapManager.popup._zoomToFeature)throw Error(a.errorToolNotSupportedByPopup);}})})},"esriPBI/extensions/tools/SelectTool":function(){define("dojo/_base/declare dojo/on dojo/query dojo/_base/lang dojo/_base/array dojo/dom-class dojo/dom-style dojo/dom-construct dojo/topic esri/renderers/HeatmapRenderer ./_Tool ./subtools/ExtentSelectTool ./subtools/IndirectSelectTool ./subtools/PointSelectTool dojo/i18n!./nls/Tools ../../utils/clusterUtils ../../layout/_Layout".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x){var B,A,C;return g([p],{toggle:!1,enabled:!0,visible:!1,initialize:function(a){this.map=a.mapManager.map;a.on("rendererChanged",b.hitch(this,this._updateToolAvailability));this.map.on("layer-add",b.hitch(this,this._updateToolAvailability));this.map.on("layer-remove",b.hitch(this,function(){delete this._isTimeSliderPlaying;this._updateToolAvailability()}));f.subscribe("timeaware-state-change",b.hitch(this,function(a){this._isTimeSliderPlaying=a;this._updateToolAvailability()}));
f.subscribe("exceed-selectlimit",b.hitch(this,this._exceedSelectLimit));this._createSubSelectionTools(a.mapManager.map.root);this._updateToolAvailability()},_createSubSelectionTools:function(a){a=n.create("div",{"class":"selectionToolContainer"},a);B=n.create("div",{"class":"layerSelect layerSelectPoint disabled",title:w.select_Default},a);A=n.create("div",{"class":"layerSelect layerSelectRegular disabled",title:w.select_Regular},a);C=n.create("div",{"class":"layerSelect layerSelectReference disabled",
title:w.selection_Reference},a);m(B,"click",b.hitch(this,function(){c.contains(B,"disabled")||this._startPointSelectionTool()}));m(A,"click",b.hitch(this,function(){c.contains(A,"disabled")||this._startRegularSelectionTool()}));m(C,"click",b.hitch(this,function(){c.contains(C,"disabled")||this._startReferenceSelectionTool()}))},_startPointSelectionTool:function(){this._resetTools();this.workingtool=new t({map:this.map});this.workingtool.start();c.add(B,"selected")},_startRegularSelectionTool:function(){this._resetTools();
this.workingtool=new s({map:this.map});this.workingtool.start();c.add(A,"selected")},_startReferenceSelectionTool:function(){this._resetTools();this.workingtool=new u({map:this.map,referenceLayer:this._getReferenceLayers()[0]});this.workingtool.start();c.add(C,"selected")},_updateToolAvailability:function(){var a=this.map.getLayer("MyLayer");if(a){var b=!1;a&&(!(a.renderer instanceof e)&&!v.get(a))&&(b=!0);b&&!this._isTimeSliderPlaying?(B&&c.remove(B,"disabled"),A&&c.remove(A,"disabled"),this._getReferenceLayers()[0]?
c.remove(C,"disabled"):c.add(C,"disabled")):this._disableAllTools()}else this._disableAllTools();c.contains(B,"disabled")||this._startPointSelectionTool()},_exceedSelectLimit:function(){this.app.layoutManager.layout.showMessage("",w.exceededSelectionLimit,x.MessageTypes.warning)},_disableAllTools:function(){d.forEach([B,A,C],function(a){c.add(a,"disabled")});this._resetTools()},_getReferenceLayers:function(){return d.filter(d.map(this.map.graphicsLayerIds.concat(this.map.layerIds),function(a){return this.map.getLayer(a)},
this),function(a){return this.selectableReferenceLayer(a)},this)},selectableReferenceLayer:function(a){return"PowerBILayer"!==a.type&&!a._basemapGalleryLayerType?"esri.layers.ArcGISDynamicMapServiceLayer"===a.declaredClass||"esri.layers.VectorTileLayer"===a.declaredClass||"Feature Layer"===a.type&&"esriGeometryPoint"!==a.geometryType&&"esriGeometryPolyline"!==a.geometryType:!1},_resetTools:function(){this.workingtool&&(this.workingtool.end(),this.workingtool=null);d.forEach([B,A,C],function(a){c.remove(a,
"selected")})},execute:function(){}})})},"esriPBI/extensions/tools/subtools/ExtentSelectTool":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/on esri/toolbars/draw esri/layers/FeatureLayer esri/tasks/query esriPBI/utils/selectionUtils ./PointSelectTool".split(" "),function(g,m,a,b,d,c,h,n,f,e){return g([e],{start:function(){this._prepareDrawTool();this._startDrawTool(!0);this.inherited(arguments)},end:function(){try{this.keydownHandler&&this.keydownHandler.remove(),
this.keyupHandler&&this.keyupHandler.remove(),this._drawTool.deactivate(),this.inherited(arguments)}catch(a){}},_prepareDrawTool:function(){var d=this.layer;this._drawTool=new c(this.map,{showTooltips:!1});b.connect(this._drawTool,"onDrawEnd",m.hitch(this,function(b){this.map.infoWindow.hide();var c=this.layer.getSelectedFeatures(),e=[];a.forEach(c,function(a){a.attributes&&0<=a.attributes.OBJECTID&&e.push(a.attributes.OBJECTID)});d&&d.visible&&(this.isCtrlDown||d.clearSelection(),c=new n,c.geometry=
b,f.layerSelectFeatures(d,c,h.SELECTION_ADD,null,e,this.isCtrlDown))}))},_startDrawTool:function(a){this._drawTool.activate(c.EXTENT);this.isCtrlDown=!1;var b=this;this.keydownHandler=d(document,"keydown",function(a){a.keyCode==dojo.keys.CTRL&&(b.isCtrlDown=!0)});this.keyupHandler=d(document,"keyup",function(a){a.keyCode==dojo.keys.CTRL&&(b.isCtrlDown=!1)})}})})},"esri/toolbars/draw":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/_base/window dojo/has dojo/sniff dojo/keys dojo/dom-construct dojo/dom-style dojo/dom-geometry ../kernel ../sniff ./_toolbar ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../graphic ../geometry/jsonUtils ../geometry/webMercatorUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/Rect dojo/i18n!../nls/jsapi".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K){var M=g(w,{declaredClass:"esri.toolbars.Draw",_eventMap:{"draw-complete":!0,"draw-end":["geometry"]},constructor:function(a,b){this.markerSymbol=new v(v.STYLE_SOLID,10,new x(x.STYLE_SOLID,new d([255,0,0]),2),new d([0,0,0,0.25]));this.lineSymbol=new x(x.STYLE_SOLID,new d([255,0,0]),2);this.fillSymbol=new B(B.STYLE_SOLID,new x(x.STYLE_SOLID,new d([255,0,0]),2),new d([0,0,0,0.25]));this._points=[];this._mouse=!h("esri-touch")&&!h("esri-pointer");
this._defaultOptions={showTooltips:!0,drawTime:75,tolerance:8,tooltipOffset:15};this._options=m.mixin(m.mixin({},this._defaultOptions),b||{});if(n("ios")||n("android"))this._options.showTooltips=!1;this._onKeyDownHandler=m.hitch(this,this._onKeyDownHandler);this._onMouseDownHandler=m.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=m.hitch(this,this._onMouseUpHandler);this._onClickHandler=m.hitch(this,this._onClickHandler);this._onMouseMoveHandler=m.hitch(this,this._onMouseMoveHandler);
this._onMouseDragHandler=m.hitch(this,this._onMouseDragHandler);this._onDblClickHandler=m.hitch(this,this._onDblClickHandler);this._updateTooltip=m.hitch(this,this._updateTooltip);this._hideTooltip=m.hitch(this,this._hideTooltip);this._redrawGraphic=m.hitch(this,this._redrawGraphic)},_geometryType:null,respectDrawingVertexOrder:!1,setRespectDrawingVertexOrder:function(a){this.respectDrawingVertexOrder=a},setMarkerSymbol:function(a){this.markerSymbol=a},setLineSymbol:function(a){this.lineSymbol=a},
setFillSymbol:function(a){this.fillSymbol=a},activate:function(a,c){this._geometryType&&this.deactivate();var d=this.map,e=b.connect,f=M;this._options=m.mixin(m.mixin({},this._options),c||{});d.navigationManager.setImmediateClick(!1);switch(a){case f.ARROW:case f.LEFT_ARROW:case f.RIGHT_ARROW:case f.UP_ARROW:case f.DOWN_ARROW:case f.TRIANGLE:case f.CIRCLE:case f.ELLIPSE:case f.RECTANGLE:this._deactivateMapTools(!0,!1,!1,!0);this._onClickHandler_connect=e(d,"onClick",this._onClickHandler);this._mouse?
(this._onMouseDownHandler_connect=e(d,"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler_connect=e(d,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=e(d,"onMouseUp",this._onMouseUpHandler)):(this._onMouseDownHandler2_connect=e(d,"onMouseDragStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=e(d,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler2_connect=e(d,"onMouseDragEnd",this._onMouseUpHandler));h("esri-touch")&&!h("esri-pointer")&&
(this._onMouseDownHandler2_connect=e(d,"onSwipeStart",this._onMouseDownHandler),this._onMouseDragHandler2_connect=e(d,"onSwipeMove",this._onMouseDragHandler),this._onMouseUpHandler2_connect=e(d,"onSwipeEnd",this._onMouseUpHandler));break;case f.POINT:this._onClickHandler_connect=e(d,"onClick",this._onClickHandler);break;case f.LINE:case f.EXTENT:case f.FREEHAND_POLYLINE:case f.FREEHAND_POLYGON:this._deactivateMapTools(!0,!1,!1,!0);this._mouse?(this._onMouseDownHandler_connect=e(d,"onMouseDown",this._onMouseDownHandler),
this._onMouseDragHandler_connect=e(d,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=e(d,"onMouseUp",this._onMouseUpHandler)):(this._onMouseDownHandler_connect=e(d,"onMouseDragStart",this._onMouseDownHandler),this._onMouseDragHandler_connect=e(d,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler_connect=e(d,"onMouseDragEnd",this._onMouseUpHandler));h("esri-touch")&&!h("esri-pointer")&&(this._onMouseDownHandler2_connect=e(d,"onSwipeStart",this._onMouseDownHandler),
this._onMouseDragHandler2_connect=e(d,"onSwipeMove",this._onMouseDragHandler),this._onMouseUpHandler2_connect=e(d,"onSwipeEnd",this._onMouseUpHandler));break;case f.POLYLINE:case f.POLYGON:case f.MULTI_POINT:d.navigationManager.setImmediateClick(!0);this._onClickHandler_connect=e(d,"onClick",this._onClickHandler);this._onDblClickHandler_connect=e(d,"onDblClick",this._onDblClickHandler);this._dblClickZoom=d.isDoubleClickZoom;d.disableDoubleClickZoom();break;default:return}this._onKeyDown_connect=e(d,
"onKeyDown",this._onKeyDownHandler);this._redrawConnect=e(d,"onExtentChange",this._redrawGraphic);this._geometryType=a;this._toggleTooltip(!0);d.snappingManager&&("freehandpolyline"!==this._geometryType&&"freehandpolygon"!==this._geometryType)&&(d.snappingManager._startSelectionLayerQuery(),d.snappingManager._setUpSnapping());this.onActivate(this._geometryType)},deactivate:function(){var a=this.map;this._clear();var c=b.disconnect;c(this._onMouseMoveHandler_connect);c(this._onMouseDownHandler_connect);
c(this._onMouseDragHandler_connect);c(this._onMouseUpHandler_connect);c(this._onMouseDownHandler2_connect);c(this._onMouseDragHandler2_connect);c(this._onMouseUpHandler2_connect);c(this._onClickHandler_connect);c(this._onDblClickHandler_connect);c(this._onKeyDown_connect);c(this._redrawConnect);this._onMouseDownHandler_connect=this._onMouseMoveHandler_connect=this._onMouseDragHandler_connect=this._onMouseUpHandler_connect=this._onMouseDownHandler2_connect=this._onMouseDragHandler2_connect=this._onMouseUpHandler2_connect=
this._onClickHandler_connect=this._onDblClickHandler_connect=this._onKeyDown_connect=this._redrawConnect=null;a.snappingManager&&(a.snappingManager._stopSelectionLayerQuery(),a.snappingManager._killOffSnapping());switch(this._geometryType){case M.CIRCLE:case M.ELLIPSE:case M.TRIANGLE:case M.ARROW:case M.LEFT_ARROW:case M.RIGHT_ARROW:case M.UP_ARROW:case M.DOWN_ARROW:case M.RECTANGLE:case M.LINE:case M.EXTENT:case M.FREEHAND_POLYLINE:case M.FREEHAND_POLYGON:this._activateMapTools(!0,!1,!1,!0);break;
case M.POLYLINE:case M.POLYGON:case M.MULTI_POINT:this._dblClickZoom&&a.enableDoubleClickZoom()}c=this._geometryType;this._geometryType=null;a.navigationManager.setImmediateClick(!1);this._toggleTooltip(!1);this.onDeactivate(c)},_clear:function(){this._graphic&&this.map.graphics.remove(this._graphic,!0);this._tGraphic&&this.map.graphics.remove(this._tGraphic,!0);this._graphic=this._tGraphic=null;this.map.snappingManager&&this.map.snappingManager._setGraphic(null);this._points=[]},finishDrawing:function(){var c,
d=this._points,e=this.map.spatialReference,f=M,d=d.slice(0,d.length);switch(this._geometryType){case f.POLYLINE:if(!this._graphic||2>d.length)return;c=new F(e);c.addPath([].concat(d));break;case f.POLYGON:if(!this._graphic||3>d.length)return;c=new H(e);d=[].concat(d,[d[0].offset(0,0)]);!H.prototype.isClockwise(d)&&!this.respectDrawingVertexOrder&&d.reverse();c.addRing(d);break;case f.MULTI_POINT:c=new J(e),a.forEach(d,function(a){c.addPoint(a)})}b.disconnect(this._onMouseMoveHandler_connect);this._clear();
this._setTooltipMessage(0);this._drawEnd(c)},_drawEnd:function(a){if(a){var b=this.map.spatialReference,c;this.onDrawEnd(a);b&&(b.isWebMercator()?c=z.webMercatorToGeographic(a,!0):4326===b.wkid&&(c=C.fromJson(a.toJson())));this.onDrawComplete({geometry:a,geographicGeometry:c})}},_normalizeRect:function(a,b,c){var d=a.x;a=a.y;var e=b.x;b=b.y;var f=Math.abs(d-e),g=Math.abs(a-b);return{x:Math.min(d,e),y:Math.max(a,b),width:f,height:g,spatialReference:c}},_onMouseDownHandler:function(a){this._dragged=
!1;var b;this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);var c=b||a.mapPoint,d=M;b=this.map;var e=b.spatialReference;this._points.push(c.offset(0,0));switch(this._geometryType){case d.LINE:this._graphic=b.graphics.add(new A(new F({paths:[[[c.x,c.y],[c.x,c.y]]],spatialReference:e}),this.lineSymbol),!0);b.snappingManager&&b.snappingManager._setGraphic(this._graphic);break;case d.FREEHAND_POLYLINE:this._oldPoint=a.screenPoint;c=new F(e);c.addPath(this._points);this._graphic=b.graphics.add(new A(c,
this.lineSymbol),!0);b.snappingManager&&b.snappingManager._setGraphic(this._graphic);break;case d.CIRCLE:case d.ELLIPSE:case d.TRIANGLE:case d.ARROW:case d.LEFT_ARROW:case d.RIGHT_ARROW:case d.UP_ARROW:case d.DOWN_ARROW:case d.RECTANGLE:case d.FREEHAND_POLYGON:this._oldPoint=a.screenPoint,c=new H(e),c.addRing(this._points),this._graphic=b.graphics.add(new A(c,this.fillSymbol),!0),b.snappingManager&&b.snappingManager._setGraphic(this._graphic)}h("esri-touch")&&a.preventDefault()},_onMouseMoveHandler:function(a){var b;
this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);var c=this._points[this._points.length-1];a=b||a.mapPoint;b=this._tGraphic;var d=b.geometry;switch(this._geometryType){case M.POLYLINE:case M.POLYGON:d.setPoint(0,0,{x:c.x,y:c.y}),d.setPoint(0,1,{x:a.x,y:a.y}),b.setGeometry(d)}},_onMouseDragHandler:function(a){if(this._graphic||this._points.length)if(h("esri-touch")&&!this._points.length)a.preventDefault();else{this._dragged=!0;var b;this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);
var c=this._points[0],d=b||a.mapPoint,e=this.map,f=e.spatialReference;b=this._graphic;var g=M,n=e.toScreen(c),p=e.toScreen(d),q=[],q=p.x-n.x,p=p.y-n.y,k=Math.sqrt(q*q+p*p);switch(this._geometryType){case g.CIRCLE:this._hideTooltip();b.geometry=H.createCircle({center:n,r:k,numberOfPoints:60,map:e});b.setGeometry(b.geometry);break;case g.ELLIPSE:this._hideTooltip();b.geometry=H.createEllipse({center:n,longAxis:q,shortAxis:p,numberOfPoints:60,map:e});b.setGeometry(b.geometry);break;case g.TRIANGLE:this._hideTooltip();
q=[[0,-k],[0.8660254037844386*k,0.5*k],[-0.8660254037844386*k,0.5*k],[0,-k]];b.geometry=this._toPolygon(q,n.x,n.y);b.setGeometry(b.geometry);break;case g.ARROW:this._hideTooltip();c=p/k;e=q/k;d=0.25*e*k;f=0.25*k/(p/q);k*=0.25*c;q=[[q,p],[q-d*(1+24/f),p+24*e-k],[q-d*(1+12/f),p+12*e-k],[-12*c,12*e],[12*c,-12*e],[q-d*(1-12/f),p-12*e-k],[q-d*(1-24/f),p-24*e-k],[q,p]];b.geometry=this._toPolygon(q,n.x,n.y);b.setGeometry(b.geometry);break;case g.LEFT_ARROW:this._hideTooltip();q=0>=q?[[q,0],[0.75*q,p],[0.75*
q,0.5*p],[0,0.5*p],[0,-0.5*p],[0.75*q,-0.5*p],[0.75*q,-p],[q,0]]:[[0,0],[0.25*q,p],[0.25*q,0.5*p],[q,0.5*p],[q,-0.5*p],[0.25*q,-0.5*p],[0.25*q,-p],[0,0]];b.geometry=this._toPolygon(q,n.x,n.y);b.setGeometry(b.geometry);break;case g.RIGHT_ARROW:this._hideTooltip();q=0<=q?[[q,0],[0.75*q,p],[0.75*q,0.5*p],[0,0.5*p],[0,-0.5*p],[0.75*q,-0.5*p],[0.75*q,-p],[q,0]]:[[0,0],[0.25*q,p],[0.25*q,0.5*p],[q,0.5*p],[q,-0.5*p],[0.25*q,-0.5*p],[0.25*q,-p],[0,0]];b.geometry=this._toPolygon(q,n.x,n.y);b.setGeometry(b.geometry);
break;case g.UP_ARROW:this._hideTooltip();q=0>=p?[[0,p],[-q,0.75*p],[-0.5*q,0.75*p],[-0.5*q,0],[0.5*q,0],[0.5*q,0.75*p],[q,0.75*p],[0,p]]:[[0,0],[-q,0.25*p],[-0.5*q,0.25*p],[-0.5*q,p],[0.5*q,p],[0.5*q,0.25*p],[q,0.25*p],[0,0]];b.geometry=this._toPolygon(q,n.x,n.y);b.setGeometry(b.geometry);break;case g.DOWN_ARROW:this._hideTooltip();q=0<=p?[[0,p],[-q,0.75*p],[-0.5*q,0.75*p],[-0.5*q,0],[0.5*q,0],[0.5*q,0.75*p],[q,0.75*p],[0,p]]:[[0,0],[-q,0.25*p],[-0.5*q,0.25*p],[-0.5*q,p],[0.5*q,p],[0.5*q,0.25*p],
[q,0.25*p],[0,0]];b.geometry=this._toPolygon(q,n.x,n.y);b.setGeometry(b.geometry);break;case g.RECTANGLE:this._hideTooltip();q=[[0,0],[q,0],[q,p],[0,p],[0,0]];b.geometry=this._toPolygon(q,n.x,n.y);b.setGeometry(b.geometry);break;case g.LINE:b.setGeometry(m.mixin(b.geometry,{paths:[[[c.x,c.y],[d.x,d.y]]]}));break;case g.EXTENT:b&&e.graphics.remove(b,!0);b=new I(this._normalizeRect(c,d,f));b._originOnly=!0;this._graphic=e.graphics.add(new A(b,this.fillSymbol),!0);e.snappingManager&&e.snappingManager._setGraphic(this._graphic);
break;case g.FREEHAND_POLYLINE:this._hideTooltip();if(!1===this._canDrawFreehandPoint(a)){h("esri-touch")&&a.preventDefault();return}this._points.push(a.mapPoint.offset(0,0));b.geometry._insertPoints([d.offset(0,0)],0);b.setGeometry(b.geometry);break;case g.FREEHAND_POLYGON:this._hideTooltip();if(!1===this._canDrawFreehandPoint(a)){h("esri-touch")&&a.preventDefault();return}this._points.push(a.mapPoint.offset(0,0));b.geometry._insertPoints([d.offset(0,0)],0);b.setGeometry(b.geometry)}h("esri-touch")&&
a.preventDefault()}},_canDrawFreehandPoint:function(a){if(!this._oldPoint)return!1;var b=this._oldPoint.x-a.screenPoint.x,c=this._oldPoint.y-a.screenPoint.y,d=this._options.tolerance;if((0>b?-1*b:b)<d&&(0>c?-1*c:c)<d)return!1;b=new Date;if(b-this._startTime<this._options.drawTime)return!1;this._startTime=b;this._oldPoint=a.screenPoint;return!0},_onMouseUpHandler:function(a){if(!this._dragged||!this._graphic)this._clear();else{0===this._points.length&&this._points.push(a.mapPoint.offset(0,0));var b;
this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);var c=this._points[0];b=b||a.mapPoint;var d=this.map.spatialReference,e=M,f;switch(this._geometryType){case e.CIRCLE:case e.ELLIPSE:case e.TRIANGLE:case e.ARROW:case e.LEFT_ARROW:case e.RIGHT_ARROW:case e.UP_ARROW:case e.DOWN_ARROW:case e.RECTANGLE:f=this._graphic.geometry;break;case e.LINE:f=new F({paths:[[[c.x,c.y],[b.x,b.y]]],spatialReference:d});break;case e.EXTENT:f=(new I(this._normalizeRect(c,b,d))).getExtent();break;case e.FREEHAND_POLYLINE:f=
new F(d);f.addPath([].concat(this._points,[b.offset(0,0)]));break;case e.FREEHAND_POLYGON:f=new H(d),c=[].concat(this._points,[b.offset(0,0),this._points[0].offset(0,0)]),!H.prototype.isClockwise(c)&&!this.respectDrawingVertexOrder&&c.reverse(),f.addRing(c)}h("esri-touch")&&a.preventDefault();this._clear();this._drawEnd(f)}},_onClickHandler:function(a){var c;this.map.snappingManager&&(c=this.map.snappingManager._snappingPoint);a=c||a.mapPoint;c=this.map;var d=c.toScreen(a),e=M;this._points.push(a.offset(0,
0));switch(this._geometryType){case e.POINT:this._drawEnd(a.offset(0,0));this._setTooltipMessage(0);break;case e.POLYLINE:1===this._points.length?(d=new F(c.spatialReference),d.addPath(this._points),this._graphic=c.graphics.add(new A(d,this.lineSymbol),!0),c.snappingManager&&c.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=b.connect(c,"onMouseMove",this._onMouseMoveHandler),this._tGraphic=c.graphics.add(new A(new F({paths:[[[a.x,a.y],[a.x,a.y]]],spatialReference:c.spatialReference}),
this.lineSymbol),!0)):(this._graphic.geometry._insertPoints([a.offset(0,0)],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol),c=this._tGraphic,d=c.geometry,d.setPoint(0,0,a.offset(0,0)),d.setPoint(0,1,a.offset(0,0)),c.setGeometry(d));break;case e.POLYGON:1===this._points.length?(d=new H(c.spatialReference),d.addRing(this._points),this._graphic=c.graphics.add(new A(d,this.fillSymbol),!0),c.snappingManager&&c.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=
b.connect(c,"onMouseMove",this._onMouseMoveHandler),this._tGraphic=c.graphics.add(new A(new F({paths:[[[a.x,a.y],[a.x,a.y]]],spatialReference:c.spatialReference}),this.fillSymbol),!0)):(this._graphic.geometry._insertPoints([a.offset(0,0)],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.fillSymbol),c=this._tGraphic,d=c.geometry,d.setPoint(0,0,a.offset(0,0)),d.setPoint(0,1,a.offset(0,0)),c.setGeometry(d));break;case e.MULTI_POINT:a=this._points;1===a.length?(d=new J(c.spatialReference),
d.addPoint(a[a.length-1]),this._graphic=c.graphics.add(new A(d,this.markerSymbol),!0),c.snappingManager&&c.snappingManager._setGraphic(this._graphic)):(this._graphic.geometry.addPoint(a[a.length-1]),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.markerSymbol));break;case e.ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],d.x,d.y);break;case e.LEFT_ARROW:this._addShape([[0,0],[24,24],[24,12],[96,12],[96,-12],[24,-12],[24,-24],[0,0]],d.x,
d.y);break;case e.RIGHT_ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],d.x,d.y);break;case e.UP_ARROW:this._addShape([[0,0],[-24,24],[-12,24],[-12,96],[12,96],[12,24],[24,24],[0,0]],d.x,d.y);break;case e.DOWN_ARROW:this._addShape([[0,0],[-24,-24],[-12,-24],[-12,-96],[12,-96],[12,-24],[24,-24],[0,0]],d.x,d.y);break;case e.TRIANGLE:this._addShape([[0,-48],[41.56921938165306,24],[-41.56921938165306,24],[0,-48]],d.x,d.y);break;case e.RECTANGLE:this._addShape([[0,
-96],[96,-96],[96,0],[0,0],[0,-96]],d.x-48,d.y+48);break;case e.CIRCLE:this._clear();this._drawEnd(H.createCircle({center:d,r:48,numberOfPoints:60,map:c}));break;case e.ELLIPSE:this._clear(),this._drawEnd(H.createEllipse({center:d,longAxis:48,shortAxis:24,numberOfPoints:60,map:c}))}this._setTooltipMessage(this._points.length)},_addShape:function(a,b,c){this._setTooltipMessage(0);this._clear();this._drawEnd(this._toPolygon(a,b,c))},_toPolygon:function(b,c,d){var e=this.map,f=new H(e.spatialReference);
f.addRing(a.map(b,function(a){return e.toMap({x:a[0]+c,y:a[1]+d})}));return f},_onDblClickHandler:function(c){var d,e=this._points,f=this.map.spatialReference,g=M;h("esri-touch")&&e.push(c.mapPoint);var m=e[e.length-1],n=e[e.length-2],e=m&&n&&m.x===n.x&&m.y===n.y?e.slice(0,e.length-1):e.slice(0,e.length);switch(this._geometryType){case g.POLYLINE:if(!this._graphic||2>e.length){b.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(c);return}d=new F(f);d.addPath([].concat(e));
break;case g.POLYGON:if(!this._graphic||2>e.length){b.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(c);return}d=new H(f);c=[].concat(e,[e[0].offset(0,0)]);!H.prototype.isClockwise(c)&&!this.respectDrawingVertexOrder&&c.reverse();d.addRing(c);break;case g.MULTI_POINT:d=new J(f),a.forEach(e,function(a){d.addPoint(a)})}b.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(d)},_onKeyDownHandler:function(a){a.keyCode===f.ESCAPE&&
(b.disconnect(this._onMouseMoveHandler_connect),this._clear(),this._setTooltipMessage(0))},_toggleTooltip:function(a){this._options.showTooltips&&(a?this._tooltip||(this._tooltip=e.create("div",{"class":"tooltip"},this.map.container),s.isBodyLtr()||p.set(this._tooltip,"direction","rtl"),this._tooltip.style.display="none",this._tooltip.style.position="fixed",this._setTooltipMessage(0),this._onTooltipMouseEnterHandler_connect=b.connect(this.map,"onMouseOver",this._updateTooltip),this._onTooltipMouseLeaveHandler_connect=
b.connect(this.map,"onMouseOut",this._hideTooltip),this._onTooltipMouseMoveHandler_connect=b.connect(this.map,"onMouseMove",this._updateTooltip)):this._tooltip&&(b.disconnect(this._onTooltipMouseEnterHandler_connect),b.disconnect(this._onTooltipMouseLeaveHandler_connect),b.disconnect(this._onTooltipMouseMoveHandler_connect),e.destroy(this._tooltip),this._tooltip=null))},_hideTooltip:function(){var a=this._tooltip;a&&(a.style.display="none")},_setTooltipMessage:function(a){var b=this._tooltip;if(b){var c=
"";switch(this._geometryType){case M.POINT:c=K.toolbars.draw.addPoint;break;case M.ARROW:case M.LEFT_ARROW:case M.RIGHT_ARROW:case M.UP_ARROW:case M.DOWN_ARROW:case M.TRIANGLE:case M.RECTANGLE:case M.CIRCLE:case M.ELLIPSE:c=K.toolbars.draw.addShape;break;case M.LINE:case M.EXTENT:case M.FREEHAND_POLYLINE:case M.FREEHAND_POLYGON:c=K.toolbars.draw.freehand;break;case M.POLYLINE:case M.POLYGON:c=K.toolbars.draw.start;1===a?c=K.toolbars.draw.resume:2<=a&&(c=K.toolbars.draw.complete);break;case M.MULTI_POINT:c=
K.toolbars.draw.addMultipoint,1<=a&&(c=K.toolbars.draw.finish)}b.innerHTML=c}},_updateTooltip:function(a){var b=this._tooltip;if(b){var d;a.clientX||a.pageY?(d=a.clientX,a=a.clientY):(d=a.clientX+c.body().scrollLeft-c.body().clientLeft,a=a.clientY+c.body().scrollTop-c.body().clientTop);b.style.display="none";p.set(b,{left:d+this._options.tooltipOffset+"px",top:a+"px"});b.style.display=""}},_redrawGraphic:function(a,b,c,d){if(c||this.map.wrapAround180)(a=this._graphic)&&a.setGeometry(a.geometry),(a=
this._tGraphic)&&a.setGeometry(a.geometry)},onActivate:function(){},onDeactivate:function(){},onDrawComplete:function(){},onDrawEnd:function(){}});m.mixin(M,{POINT:"point",MULTI_POINT:"multipoint",LINE:"line",EXTENT:"extent",POLYLINE:"polyline",POLYGON:"polygon",FREEHAND_POLYLINE:"freehandpolyline",FREEHAND_POLYGON:"freehandpolygon",ARROW:"arrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",TRIANGLE:"triangle",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle"});
return M})},"esri/toolbars/_toolbar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../Evented"],function(g,m,a,b,d){return g([d],{declaredClass:"esri.toolbars._Toolbar",constructor:function(a){this.map=a},_cursors:{move:"pointer","move-v":"pointer","move-gv":"pointer",box0:"nw-resize",box1:"n-resize",box2:"ne-resize",box3:"e-resize",box4:"se-resize",box5:"s-resize",box6:"sw-resize",box7:"w-resize",box8:"pointer"},_deactivateMapTools:function(a,b,d,f){var e=this.map;
a&&(this._mapNavState={isDoubleClickZoom:e.isDoubleClickZoom,isClickRecenter:e.isClickRecenter,isPan:e.isPan,isRubberBandZoom:e.isRubberBandZoom,isKeyboardNavigation:e.isKeyboardNavigation,isScrollWheelZoom:e.isScrollWheelZoom},e.disableDoubleClickZoom(),e.disableClickRecenter(),e.disablePan(),e.disableRubberBandZoom(),e.disableKeyboardNavigation());b&&e.hideZoomSlider();d&&e.hidePanArrows();f&&e.graphics.disableMouseEvents()},_activateMapTools:function(a,b,d,f){var e=this.map,g=this._mapNavState;
a&&g&&(g.isDoubleClickZoom&&e.enableDoubleClickZoom(),g.isClickRecenter&&e.enableClickRecenter(),g.isPan&&e.enablePan(),g.isRubberBandZoom&&e.enableRubberBandZoom(),g.isKeyboardNavigation&&e.enableKeyboardNavigation(),g.isScrollWheelZoom&&e.enableScrollWheelZoom());b&&e.showZoomSlider();d&&e.showPanArrows();f&&e.graphics.enableMouseEvents()}})})},"esriPBI/extensions/tools/subtools/PointSelectTool":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect esri/layers/FeatureLayer esri/geometry/ScreenPoint esri/geometry/Extent esri/tasks/query esriPBI/utils/selectionUtils esriPBI/utils/layerUtils".split(" "),
function(g,m,a,b,d,c,h,n,f,e){return g(null,{constructor:function(a){m.mixin(this,a||{});this.layer=this.map.getLayer("MyLayer")},start:function(){this.onMapClickHandler||(this.onMapClickHandler=b.connect(this.map,"onClick",m.hitch(this,this.onClickHandler)))},end:function(){try{this.onMapClickHandler&&this.onMapClickHandler.remove()}catch(a){}},onClickHandler:function(b){var c=this.layer,g=b.mapPoint,m=!1;b.graphic&&(b.graphic.getLayer&&b.graphic.getLayer()&&"AcetateLayer"===b.graphic.getLayer().type)&&
(m=!0);m||e.setReferenceLayerPopup(this.map,g);m=new n;m.geometry=new h(g.x,g.y,g.x,g.y,this.map.spatialReference);var w=this.layer.getSelectedFeatures(),v=[];a.forEach(w,function(a){a.attributes&&0<=a.attributes.OBJECTID&&v.push(a.attributes.OBJECTID)});b.ctrlKey||c.clearSelection();f.layerSelectFeatures(c,m,d.SELECTION_ADD,g,v,b.ctrlKey)}})})},"esriPBI/extensions/tools/subtools/IndirectSelectTool":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/dom-construct dojo/dom-class dojo/dom-style dojo/on dojo/debounce esriPBI/utils/layerUtils esri/toolbars/draw esri/layers/FeatureLayer esri/geometry/ScreenPoint esri/geometry/Extent esri/tasks/query esri/graphicsUtils esriPBI/utils/selectionUtils".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x){return g(null,{constructor:function(a){m.mixin(this,a||{});this.layer=this.map.getLayer("MyLayer")},start:function(){if(this.referenceLayer){var a=this.map,b=a.infoWindow;this.mapClickHandeler=a.on("click",m.hitch(this,function(a){this.map.infoWindow.hide();if("esri.layers.ArcGISDynamicMapServiceLayer"===this.referenceLayer.declaredClass)var c=b.on("set-features",m.hitch(this,function(a){c.remove();c=null;a=a.target.getSelectedFeature();b.hide();this.layer.clearSelection();
this.layer.emit("selection-complete",{features:[]});"polygon"===a.geometry.type&&x.selectFeaturesInFeatureCollection(this.layer,a.geometry,s.SELECTION_NEW)}));else{a=a.mapPoint;var d=new w;("esri.layers.VectorTileLayer"===this.referenceLayer.declaredClass||!this.referenceLayer.visibleAtMapScale)&&this.updateReferenceLayer();d.geometry=a;"Feature Layer"===this.referenceLayer.type&&(this.referenceLayer.clearSelection(),this.layer.clearSelection(),this.referenceLayer.queryFeatures(d,m.hitch(this,function(a){(a=
a.features[0])?x.selectFeaturesInFeatureCollection(this.layer,a.geometry,s.SELECTION_NEW).then(m.hitch(this,function(a){a&&0===a.length&&this.layer.emit("selection-complete",{features:[]})})):this.layer.emit("selection-complete",{features:[]})})))}}))}},end:function(){try{this.mapClickHandeler&&this.mapClickHandeler.remove(),this.mapMouseHandler&&this.mapMouseHandler.remove()}catch(a){}},updateReferenceLayer:function(){var b=this.map.getLayersVisibleAtScale(),c;a.some(b,function(a){if(a.url&&"Feature Layer"===
a.type&&a.mode===s.MODE_SELECTION)return c=a,!0});c&&(this.referenceLayer=c)}})})},"esriPBI/extensions/tools/TelemetrySettings":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array ./_Tool ../_ShowWidgetMixin dojo/i18n!./nls/Tools esriPBI/widgets/TelemetrySettings/TelemetrySettingsPane".split(" "),function(g,m,a,b,d,c,h){return g([b,d],{title:c.mapSettingsTitle,execute:function(){this._previousShownWidget||this.app.mapManager.map.getLayer("MyLayer")&&this.placeWidget(new h({app:this.app}))}})})},
"esriPBI/extensions/_ShowWidgetMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","../utils/logger!"],function(g,m,a,b){return g(null,{_previousShownWidget:null,_destroyWidgetHandle:null,layout:null,initialize:function(a){this.layout=a.layoutManager.layout},placeWidget:function(a,b){this._previousShownWidget||(this._previousShownWidget=a,this._watchDestroy(a),this.layout.showWidget(a,b))},_watchDestroy:function(b){this._destroyWidgetHandle&&this._destroyWidgetHandle.remove();
this._destroyWidgetHandle=a.after(b,"destroy",m.hitch(this,this._widgetDestroyed))},_widgetDestroyed:function(){b.debug("widget destroy handled in command: "+this.label,this._previousShownWidget);this._previousShownWidget=null;this._destroyWidgetHandle.remove();this._destroyWidgetHandle=null}})})},"esriPBI/widgets/TelemetrySettings/TelemetrySettingsPane":function(){define("dojo/_base/declare dojo/_base/lang dijit/_TemplatedMixin dijit/_WidgetBase dojo/dom-attr dojo/dom-class dojo/text!./templates/TelemetrySettingsPane.html ../../telemetry/telemetryConfig dojo/i18n!./nls/nlsTelemetrySettings".split(" "),
function(g,m,a,b,d,c,h,n,f){return g([b,a],{templateString:h,nls:f,checkedValue:!0,constructor:function(a){m.mixin(this,a);this.retriveCheckValue()},retriveCheckValue:function(){if(this.app.adapters.log.loggingSupported){if(n.appId){var a=localStorage.getItem("_esri_"+n.appId+"_ifParticipate");"true"===a?checkedValue=!0:"false"===a&&(checkedValue=!1)}}else checkedValue=!1},postCreate:function(){this._disableToggle();this.toggleOnCheckBox.checked=checkedValue;this._updateLabel(checkedValue)},onToggle:function(){checkedValue=
this.toggleOnCheckBox.checked;this._updateLabel(checkedValue);localStorage.setItem("_esri_M4PBI_ifParticipate",checkedValue)},_updateLabel:function(a){this.toggleCheckboxLabel.innerHTML=a?f.telemetryOn:f.telemetryOff},_disableToggle:function(){this.app.adapters.log.loggingSupported?(d.remove(this.toggleOnCheckBox,"disabled"),c.remove(this.toggleCheckboxLabel,"disabled"),c.remove(this.toggleDiv,"disabled")):(d.set(this.toggleOnCheckBox,"disabled",!0),c.add(this.toggleCheckboxLabel,"disabled"),c.add(this.toggleDiv,
"disabled"))}})})},"esriPBI/extensions/tools/HelpTool":function(){define(["dojo/_base/declare","./_Tool"],function(g,m){return g([m],{execute:function(){window.open("http://www.esri.com/powerbihelp")}})})},"esriPBI/extensions/tools/SelectBaseMapTool":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/promise/all dojo/when ../../utils/portal ./_Tool ../_ShowWidgetMixin ../../layout/_Layout dojo/i18n!./nls/Tools ../../utils/basemapHelper".split(" "),function(g,m,a,b,d,c,h,n,
f,e,p){return g([h,n],{title:e.selectBasemapTitle,basemaps:null,initialize:function(){this.basemaps=this.getBasemaps()},execute:function(){var a=this;d(a.basemaps,function(b){b&&0!==b.length?require(["esriPBI/widgets/BasemapMenu/BasemapMenu"],function(c){a._previousShownWidget||(c=new c({map:a.app.mapManager.map,basemaps:b}),c.on("basemap-change",m.hitch(a,function(){var b=setTimeout(function(){clearTimeout(b);a.app.save()},3E3)})),a.placeWidget(c))}):a.app.layoutManager.layout.showMessage("",e.noBasemapAvailableMessage,
f.MessageTypes.warning)},function(){a.app.layoutManager.layout.showMessage("",e.noBasemapAvailableMessage,f.MessageTypes.warning)})},getBasemaps:function(){return b({vector:d(p.getBasemaps(),function(a){return a},function(){return[]})}).then(function(a){return a.vector.sort(function(a,b){var c=a.title.toUpperCase(),d=b.title.toUpperCase();return c<d?-1:c>d?1:0})})},_showAlert:function(a){app.layoutManager.layout.showMessage("",a,f.MessageTypes.warning)}})})},"esriPBI/extensions/tools/ShowInfographicsTool":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array ./_Tool ../_ShowWidgetMixin dojo/i18n!./nls/Tools".split(" "),
function(g,m,a,b,d,c){return g([b,d],{title:c.symbolStyleTitle,execute:function(){var a=this;require(["esriPBI/widgets/Infographics/settingsPanel"],function(b){b=new b({app:a.app});a.placeWidget(b)})}})})},"esriPBI/extensions/tools/ShowSearchTool":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/connect dojo/aspect dojo/query dojo/when dojo/on dojo/dom-class dojo/dom-construct dojo/string dojo/i18n!./nls/Tools esri/request esri/urlUtils esri/config esri/geometry/Extent esri/layers/FeatureLayer esri/layers/ArcGISTiledMapServiceLayer esri/layers/ArcGISDynamicMapServiceLayer esri/layers/VectorTileLayer esri/arcgis/utils ../../layout/_Layout ../../utils/WebMapHelper ../../extensions/tools/_Tool ../../extensions/_ShowWidgetMixin ../../utils/layerUtils ../../utils/MapUtils ../../utils/portal ../../widgets/Popup/PopupTemplate".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M,L,G){return g([J,I],{referenceLayer:[],initialize:function(a){this.app=a;this._map=a.mapManager.map},_getReferenceLayer:function(a){return m.filter(m.map(a.graphicsLayerIds.concat(a.layerIds),function(b){return a.getLayer(b)},this),function(a){return this.selectableReferenceLayer(a)},this)},selectableReferenceLayer:function(a){return"PowerBILayer"!==a.type&&!a._basemapGalleryLayerType?"esri.layers.ArcGISDynamicMapServiceLayer"===a.declaredClass||
"esri.layers.VectorTileLayer"===a.declaredClass||"Feature Layer"===a.type:!1},execute:function(){var b=this;this.referenceLayer=this._getReferenceLayer(this._map);f.add(this.app.layoutManager.layout.sidePanel,"referenceLayerTool");require(["esriPBI/widgets/Search/Search"],function(c){if(!b._previousShownWidget){m.some(b.referenceLayer,function(a){if(a.itemId)return b.selectedId=a.itemId,!0});var e=new c({searchType:c.searchTypes.FeatureService,autoZoom:b._map.settings.autoZoomOnAdd?!0:!1,useCategories:!1,
mapEnrichmentCategoriesUrl:b.app.arcgisManager.adapter.settings.mapEnrichmentCategoriesUrl,selectedId:b.selectedId});b.placeWidget(e);f.add(b.app.layoutManager.layout.sidePanel,"referenceLayerTool");this._destroyWidgetHandle=d.after(e,"destroy",a.hitch(this,function(){this._destroyWidgetHandle.remove();this._destroyWidgetHandle=null;f.remove(b.app.layoutManager.layout.sidePanel,"referenceLayerTool")}));d.after(e,"onSelect",function(a){b.selectedId=a?a.id:null;b._onSelect(a,e,{zoomTo:b._map.settings.autoZoomOnAdd})},
!0)}})},_loadMapService:function(a,b,c){if(a&&a.url){b.onProgressBegin();var d=this;a.url.lastIndexOf("?");b.onProgressBegin();var e=a.url;z.getItem(a.id).then(function(a){b.onProgressComplete();a=new A(e);d._map.addLayer(a)},function(a){b.onProgressComplete()});a=new A(a.url);this._map.addLayers([a]);b.onProgressComplete()}},_loadFeatureService:function(a,b,c){b.onProgressBegin();var d=this,e=a.url,f=a.title,g=a.id;c=c||{};u({url:e+"/layers",content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(a){var h=
{alertShown:!1};"Feature Layer"===a.type?d._loadFeatureLayer(e,f,a.timeInfo,b,c,h).itemId=g:m.forEach(a.layers,function(a){d._loadFeatureLayer(e+"/"+a.id,f,a.timeInfo,b,c,h).itemId=g})},function(a){b.onProgressComplete();d._failed(s.featureServiceErrorTitle,p.substitute(s.featureServiceErrorMessage,{title:f}),a)})},_loadFeatureLayer:function(a,c,e,f,g,h){var m=x.MODE_ONDEMAND;e&&(m=x.MODE_SNAPSHOT);var n=new x(a,{mode:m,outFields:["*"]}),k=this,r=d.after(n,"onError",function(a){r.remove();u.remove();
h.alertShown||(h.alertShown=!0,k._failed(s.featureServiceErrorTitle,p.substitute(s.featureServiceErrorMessage,{title:c}),a));f.onProgressComplete()},!0),u=d.after(n,"onLoad",function(){u.remove();n.name=c===n.name?n.name:c+" - "+n.name;n.infoTemplate||n.setInfoTemplate(G.getDefault(n));if(g.zoomTo)var a=b.connect(n,"onUpdateEnd",function(){a.remove();K.gotoLayer(n,k.app.arcgisManager.portal)});k._map.addLayers([n]);r.remove();f.onProgressComplete()});return n},_loadVectorTileService:function(a,b,
c){var d=this;c=this.app.arcgisManager.portal.portalUrl;b.onProgressBegin();M.addVectorTileLayer(a,this._map,c).then(function(a){d._map.addLayers(a);d.app.save();b.onProgressComplete()})},_loadWebMap:function(a,b,c,d){var e=this;c.onProgressBegin();H.mergeWebmapOperationalLayers(a,this._map).then(function(a){c.onProgressComplete()},function(a){c.onProgressComplete();e._failed(s.webMapErrorTitle,p.substitute(s.webMapErrorMessage,{title:b}),a)})},_failed:function(a,b,c){this.addLayerHandle&&(this.addLayerHandle.remove(),
this.addLayerHandle=null);this.referenceLayer=this._getReferenceLayer(this._map);this.app.layoutManager.layout.showMessage(a,s.warning+": "+a,F.MessageTypes.warning)},_onSelect:function(a,b,c){this._map&&a&&a.url?(this._map.emit("layer-added-from-ArcGIS",{}),this.trackRefLayer(),"Map Service"===a.type?this._loadMapService(a,b,c):"Feature Service"===a.type?this._loadFeatureService(a,b,c):"Web Map"===a.type?this._loadWebMap(a.id,a.title,b,c):"Vector Tile Service"===a.type&&this._loadVectorTileService(a,
b,c)):this.removeRefLayer()},trackRefLayer:function(){var a=this,b=this._map;this.removeRefLayer();this.addLayerHandle=b.on("layer-add",function(b){b=b.layer;!b._basemapGalleryLayerType&&("PowerBILayer"!==b.type&&"AcetateLayer"!==b.type)&&(a.referenceLayer.push(b),b.setOpacity(0.5))});this.updateEndHandle=b.on("update-end",function(b){a.updateEndHandle&&a.updateEndHandle.remove();a.updateEndHandle=null;a.addLayerHandle&&a.addLayerHandle.remove();a.addLayerHandle=null;a.app.save()})},removeRefLayer:function(){if(0<
this.referenceLayer.length){for(l in this.referenceLayer)this._map.removeLayer(this.referenceLayer[l]);this.referenceLayer=[]}}})})},"esriPBI/extensions/tools/MapThemeTool":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array ./_Tool ../_ShowWidgetMixin dojo/i18n!./nls/Tools esriPBI/widgets/MapTheme/MapTheme".split(" "),function(g,m,a,b,d,c,h){return g([b,d],{title:c.mapThemeTitle,execute:function(){this._previousShownWidget||this.app.mapManager.map.getLayer("MyLayer")&&this.placeWidget(new h({app:this.app}))}})})},
"esriPBI/widgets/MapTheme/MapTheme":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dojo/topic dojo/i18n!./nls/MapTheme dojo/text!./templates/MapTheme.html dijit/_WidgetBase dijit/_TemplatedMixin dojo/dom-class esriPBI/defaults esriPBI/utils/smartMappingUtils esriPBI/utils/clusterUtils esri/renderers/ClassBreaksRenderer esri/renderers/HeatmapRenderer esri/renderers/SimpleRenderer esri/renderers/UniqueValueRenderer".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,
u,t,w,v,x,B){return m([f,e],{baseClass:"mapTheme",templateString:n,nls:h,constructor:function(b){a.mixin(this,b||{})},postCreate:function(){this.app.mapManager.getPowerBILayer()&&(this._updateThemeOptions(),this.own(c.subscribe("powerbilayer-ready",a.hitch(this,this._updateThemeOptions))))},_updateThemeOptions:function(){var c=this.app.mapManager.getPowerBILayer();"esriGeometryPoint"!==c.geometryType?(p.add(this.sizecolor,"hide"),p.add(this.size,"hide"),p.add(this.heatmap,"hide"),p.add(this.clustering,
"hide")):(p.remove(this.sizecolor,"hide"),p.remove(this.size,"hide"),p.remove(this.heatmap,"hide"),p.remove(this.clustering,"hide"));var d=c.getExtensionProperties();a.getObject("classBreaksCapabilities.sizeField",!1,d)&&a.getObject("classBreaksCapabilities.colorField",!1,d)&&"esriGeometryPoint"===c.geometryType?(p.remove(this.sizecolor,"hide"),"esriFieldTypeString"===u.getColorFieldType(c)?p.add(this.sizecolorDiv,"categorical"):p.remove(this.sizecolorDiv,"categorical")):p.add(this.sizecolor,"hide");
a.getObject("classBreaksCapabilities.sizeField",!1,d)&&"esriGeometryPoint"===c.geometryType?p.remove(this.size,"hide"):p.add(this.size,"hide");a.getObject("classBreaksCapabilities.colorField",!1,d)?(p.remove(this.color,"hide"),"esriFieldTypeString"===u.getColorFieldType(c)?p.add(this.colorDiv,"categorical"):p.remove(this.colorDiv,"categorical")):p.add(this.color,"hide");"esriGeometryPolygon"===c.geometryType?(p.add(this.simpleDiv,"polygon"),p.add(this.colorDiv,"polygon")):(p.remove(this.simpleDiv,
"polygon"),p.remove(this.colorDiv,"polygon"));b.forEach([this.clustering,this.sizecolor,this.size,this.color,this.heatmap,this.simple],function(a){p.remove(a,"renderedSelected")});t.get(c)?p.add(this.clustering,"renderedSelected"):c.renderer instanceof w?c.renderer.sizeInfo&&c.renderer.colorInfo?p.add(this.sizecolor,"renderedSelected"):c.renderer.sizeInfo?p.add(this.size,"renderedSelected"):c.renderer.colorInfo&&p.add(this.color,"renderedSelected"):c.renderer instanceof B?c.renderer.sizeInfo&&c.renderer.infos?
p.add(this.sizecolor,"renderedSelected"):c.renderer.sizeInfo?p.add(this.size,"renderedSelected"):c.renderer.infos&&p.add(this.color,"renderedSelected"):c.renderer instanceof v?p.add(this.heatmap,"renderedSelected"):c.renderer instanceof x&&p.add(this.simple,"renderedSelected")},_removeClustering:function(){var a=this.app.mapManager.getPowerBILayer();t.get(a)&&t.remove(a)},_onRendererChanged:function(){this._updateThemeOptions();this.app.emit("rendererChanged")},_simple:function(){var b=this.app.mapManager.getPowerBILayer();
t.get(b)?(this._removeClustering(),u.setDefaultSimpleRenderer(b).then(a.hitch(this,this._onRendererChanged))):b.renderer instanceof x||u.setDefaultSimpleRenderer(b).then(a.hitch(this,this._onRendererChanged))},_heatmap:function(){var b=this.app.mapManager.getPowerBILayer();t.get(b)&&this._removeClustering();b.renderer instanceof v||u.setDefaultHeatmapRenderer(b).then(a.hitch(this,this._onRendererChanged))},_size:function(){var b=this.app.mapManager.getPowerBILayer();t.get(b)&&this._removeClustering();
(b.renderer instanceof w||b.renderer instanceof B)&&b.renderer.sizeInfo&&!b.renderer.colorInfo&&!b.renderer.infos?(b.setOpacity(s.size.renderers.opacityParam),this._updateThemeOptions()):u.setDefaultSizeRenderer(b).then(a.hitch(this,this._onRendererChanged))},_color:function(){var b=this.app.mapManager.getPowerBILayer();t.get(b)&&this._removeClustering();(b.renderer instanceof w||b.renderer instanceof B)&&b.renderer.colorInfo&&!b.renderer.sizeInfo?(b.setOpacity(s.color.renderers.opacityParam),this._updateThemeOptions()):
u.setDefaultColorRenderer(b).then(a.hitch(this,this._onRendererChanged))},_sizecolor:function(){var b=this.app.mapManager.getPowerBILayer();t.get(b)&&this._removeClustering();(b.renderer instanceof w||b.renderer instanceof B)&&b.renderer.colorInfo&&b.renderer.sizeInfo?(b.setOpacity(s.sizecolor.renderers.opacityParam),this._updateThemeOptions()):u.setDefaultBivariateRenderer(b).then(a.hitch(this,this._onRendererChanged))},_clustering:function(){var b=this.app.mapManager.getPowerBILayer();t.get(b)||
u.setDefaultClusteringRenderer(b).then(a.hitch(this,this._onRendererChanged))}})})},"esriPBI/extensions/tools/SymbolStyleTool":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array ./_Tool ../_ShowWidgetMixin dojo/i18n!./nls/Tools esriPBI/widgets/SymbolStyle/SymbolStyle".split(" "),function(g,m,a,b,d,c,h){return g([b,d],{title:c.symbolStyleTitle,execute:function(){this._previousShownWidget||this.app.mapManager.getPowerBILayer()&&this.placeWidget(new h({app:this.app}))}})})},"esriPBI/widgets/SymbolStyle/SymbolStyle":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/topic dojo/i18n!./nls/SymbolStyle dojo/text!./templates/SymbolStyle.html dijit/_WidgetBase dijit/_TemplatedMixin esri/renderers/ClassBreaksRenderer esri/renderers/HeatmapRenderer esri/renderers/SimpleRenderer esri/renderers/UniqueValueRenderer esriPBI/utils/clusterUtils ./configs/_configSimple ./configs/_configSize ./configs/_configUnique ./configs/_configHeatmap ./configs/_configCluster ./configs/_configColor ./configs/_configOpacity ./configs/_configSizeColor ./configs/_configSizeType".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F){return g([h,n],{baseClass:"symbolStyle",templateString:c,nls:d,stylers:[],constructor:function(a){m.mixin(this,a||{})},postMixInProperties:function(){m.mixin(this,t);m.mixin(this,w);m.mixin(this,v);m.mixin(this,x);m.mixin(this,B);m.mixin(this,A);m.mixin(this,z);m.mixin(this,F);m.mixin(this,C)},postCreate:function(){this.stylers=[];this.own(b.subscribe("powerbilayer-ready",m.hitch(this,function(){this._updateStyler()})));this._showStyler()},_showStyler:function(){var a=
this.app.mapManager.getPowerBILayer(),b=a.renderer;u.get(a)?this._configCluster(this.app):b instanceof e?this._configHeatmap(this.app):b instanceof p?this._configSimple(this.app):b instanceof f?b.sizeInfo&&a.renderer.colorInfo?this._configSizeColor(this.app):b.sizeInfo?this._configSize(this.app):b.colorInfo&&this._configColor(this.app):b instanceof s&&(b.sizeInfo?this._configSizeType(this.app):this._configUnique(this.app));this._configOpacity(this.app)},_updateStyler:function(){this._clearStyler();
this._showStyler()},_clearStyler:function(){a.forEach(this.stylers,function(a){a.destroyRecursive()});this.stylers=[]},__config:function(a,b){var c=new a({app:this.app});c.placeAt(b);c.startup();this.stylers.push(c);return c},_onRendererChanged:function(){this.app.emit("rendererChanged")},destroyRecursive:function(){this.inherited(arguments);this.stylers=[]}})})},"esriPBI/widgets/SymbolStyle/configs/_configSimple":function(){define(["dojo/_base/lang","dojo/on","esriPBI/utils/smartMappingUtils","../Simple"],
function(g,m,a,b){return{_configSimple:function(d){var c=this.__config(b,this.simpleDetails);c.own(m(c,"symbolChanged",g.hitch(this,function(b){a.setSimpleRenderer(d.mapManager.getPowerBILayer(),b).then(g.hitch(this,this._onRendererChanged))})))}}})},"esriPBI/widgets/SymbolStyle/Simple":function(){define("dojo/_base/declare dojo/_base/lang dojox/mvc/Templated dojo/on dojo/dom-style esri/Color esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleFillSymbol esri/symbols/jsonUtils esri/renderers/SimpleRenderer esri/renderers/ClassBreaksRenderer esri/renderers/UniqueValueRenderer esriPBI/defaults ./utils/rendererUtils dojo/i18n!./nls/Simple dojo/text!./templates/Simple.html ./_Styler dijit/form/HorizontalSlider ./ColorPicker ./ValuePicker".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B){return g([a,B],{templateString:x,nls:v,baseClass:"simpleWidget",paramName:"simpleParam",showSizeOption:!0,constructor:function(a){m.mixin(this,a||{})},postMixInProperties:function(){var a,b=this.app.mapManager.getPowerBILayer();if(b.renderer instanceof p)a=b.renderer.getSymbol();else if(b.renderer instanceof s||b.renderer instanceof u)a=b.renderer.defaultSymbol;if(a){this.size=a.size||10;var d=a.getFill();this.fillColor=d;this.fillTransparency=100-100*
d.a;a=a.getStroke();this.outLineColor=a.color;this.outLineWidth=a.width;this.outLineTransparency=100-100*this.outLineColor.a}else this.size=10,this.fillColor=new c("#e38b4f"),this.fillTransparency=0,this.outLineColor=new c("#ffffff"),this.outLineWidth=1,this.outLineTransparency=0;"esriGeometryPolygon"===b.geometryType&&(this.showSizeOption=!1);this.intermediateChanges=this._canIntermediateChanges()},postCreate:function(){this.showSizeOption||d.set(this.sizeOption.domNode,"display","none");this.inherited(arguments)},
isNotDefault:function(){var a=this.app.mapManager.getPowerBILayer(),b=a.renderer.defaultSymbol||a.renderer.getSymbol(),d;d="esriGeometryPoint"===a.geometryType?a.renderer instanceof p||a.renderer instanceof s&&!a.renderer.colorInfo?t.origin.renderers.simpleParam.pointMS:t.origin.renderers.simpleParam.point:t.origin.renderers.simpleParam.polygon;return"esriGeometryPoint"===a.geometryType&&b.size!==d.size?!0:(new c(b.color)).toHex()!==(new c(d.color)).toHex()?!0:255*b.color.a!==d.color[3]?!0:(new c(b.outline.color)).toHex()!==
(new c(d.outline.color)).toHex()?!0:b.outline.width!==d.outline.width?!0:255*b.outline.color.a!==d.outline.color[3]?!0:!1},_registerStylerChangeHandlers:function(){this.own(b(this.fillColorOption,"colorChanged",m.hitch(this,function(a){this.emit("symbolChanged",this.toSymbol());this._setEditState(!0)})),b(this.outLineColorOption,"colorChanged",m.hitch(this,function(a){this.emit("symbolChanged",this.toSymbol());this._setEditState(!0)})),b(this.fillTransparencyOption,"valueChanged",m.hitch(this,function(a){this.emit("symbolChanged",
this.toSymbol());this._setEditState(!0)})),b(this.sizeOption,"valueChanged",m.hitch(this,function(a){this.emit("symbolChanged",this.toSymbol());this._setEditState(!0)})),b(this.outLineWidthOption,"valueChanged",m.hitch(this,function(a){this.emit("symbolChanged",this.toSymbol());this._setEditState(!0)})),b(this.outLineTransparencyOption,"valueChanged",m.hitch(this,function(a){this.emit("symbolChanged",this.toSymbol());this._setEditState(!0)})))},_revertToDefault:function(){this.inherited(arguments);
var a=this.app.mapManager.getPowerBILayer(),b;b="esriGeometryPoint"===a.geometryType?a.renderer instanceof p||a.renderer instanceof s&&!a.renderer.colorInfo?t.origin.renderers.simpleParam.pointMS:t.origin.renderers.simpleParam.point:t.origin.renderers.simpleParam.polygon;var c=e.fromJson(b);"esriGeometryPoint"===a.geometryType&&c.setSize(b.size);c.outline.setWidth(b.outline.width);this.emit("symbolChanged",c);this.sizeOption.set("value",b.size,!1);this.fillColorOption.set("color",b.color,!1);this.outLineColorOption.set("color",
b.outline.color,!1);this.outLineWidthOption.set("value",b.outline.width,!1);this.outLineTransparencyOption.set("value",100*((255-b.outline.color[3])/255),!1);this.fillTransparencyOption.set("value",100*((255-b.color[3])/255),!1)},toSymbol:function(){var a=this.app.mapManager.getPowerBILayer();if("esriGeometryPoint"===a.geometryType)return this._toMarkerSymbol();if("esriGeometryPolygon"===a.geometryType)return this._toFillSymbol()},_toMarkerSymbol:function(){var a=this.app.mapManager.getPowerBILayer(),
a=a.renderer instanceof p||a.renderer instanceof s&&!a.renderer.colorInfo?t[w.getCurrentRendererType(a)].renderers.simpleParam.pointMS:t[w.getCurrentRendererType(a)].renderers.simpleParam.point,b=e.fromJson(m.mixin(a,{angle:0,color:m.mixin(this.fillColorOption.get("color"),{a:1-this.fillTransparencyOption.get("value")/100}),outline:{color:m.mixin(this.outLineColorOption.get("color"),{a:1-this.outLineTransparencyOption.get("value")/100}),style:"esriSLSSolid",type:"esriSLS",width:this.outLineWidthOption.get("value")},
size:this.sizeOption.get("value"),style:"esriSMSCircle",type:"esriSMS",xoffset:0,yoffset:0}));b.setSize(a.size);b.outline.setWidth(a.outline.width);return b},_toFillSymbol:function(){var a=this.app.mapManager.getPowerBILayer(),a=t[w.getCurrentRendererType(a)].renderers.simpleParam.polygon,b=e.fromJson(m.mixin(a,{color:m.mixin(this.fillColorOption.get("color"),{a:1-this.fillTransparencyOption.get("value")/100}),outline:{color:m.mixin(this.outLineColorOption.get("color"),{a:1-this.outLineTransparencyOption.get("value")/
100}),style:"esriSLSSolid",type:"esriSLS",width:this.outLineWidthOption.get("value")},style:"esriSFSSolid",type:"esriSFS"}));b.outline.setWidth(a.outline.width);return b}})})},"dojox/mvc/Templated":function(){define("dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./at".split(" "),function(g,m,a,b,d){return g("dojox.mvc.Templated",[a,b,d],{bindings:null,startup:function(){var a=m.isFunction(this.bindings)&&this.bindings.call(this)||this.bindings,
b;for(b in a){var d=this[b],f=a[b];if(d)for(var e in f)d.set(e,f[e])}this.inherited(arguments)}})})},"dojox/mvc/at":function(){define(["dojo/_base/kernel","dojo/_base/lang","./sync","./_atBindingExtension"],function(g,m,a){g.experimental("dojox.mvc");g=function(b,d){return{atsignature:"dojox.mvc.at",target:b,targetProp:d,bindDirection:a.both,direction:function(a){this.bindDirection=a;return this},transform:function(a){this.converter=a;return this},equals:function(a){this.equalsCallback=a;return this}}};
g.from=a.from;g.to=a.to;g.both=a.both;return m.setObject("dojox.mvc.at",g)})},"dojox/mvc/sync":function(){define(["dojo/_base/lang","dojo/_base/config","dojo/_base/array","dojo/has"],function(g,m,a,b){function d(c,d,h,m,u,t,w,v,x,B){if(!h(x,v)&&!("*"==u&&0>a.indexOf(m.get("properties")||[w],w)||"*"==u&&w in(B||{}))){h="*"==u?w:u;b("mvc-bindings-log-api")&&n(m,h,t,w);try{x=c?c(x,d):x}catch(A){b("mvc-bindings-log-api");return}b("mvc-bindings-log-api");g.isFunction(m.set)?m.set(h,x):m[h]=x}}var c=g.getObject("dojox.mvc",
!0);b.add("mvc-bindings-log-api",(m.mvc||{}).debugBindings);var h;if(b("mvc-bindings-log-api"))var n=function(a,b,c,d){return[[c.canConvertToLoggable||!c.declaredClass?c:c.declaredClass,d].join(":"),[a.canConvertToLoggable||!a.declaredClass?a:a.declaredClass,b].join(":")]};m={from:1,to:2,both:3};h=function(f,e,m,s,u){var t=(u||{}).converter,w,v,x;t&&(w={source:f,target:m},v=t.format&&g.hitch(w,t.format),x=t.parse&&g.hitch(w,t.parse));var B=[],A=[],C=g.mixin({},f.constraints,m.constraints),t=(u||{}).bindDirection||
c.both,z=(u||{}).equals||h.equals;b("mvc-bindings-log-api")&&n(f,e,m,s);if("*"==s){if("*"!=e)throw Error("Unmatched wildcard is specified between source and target.");u=m.get("properties");if(!u){u=[];for(var F in m)m.hasOwnProperty(F)&&"_watchCallbacks"!=F&&u.push(F)}A=m.get("excludes")}else u=[e];t&c.from&&(g.isFunction(f.set)&&g.isFunction(f.watch)?B.push(f.watch.apply(f,("*"!=e?[e]:[]).concat([function(a,b,c){d(v,C,z,m,s,f,a,b,c,A)}]))):b("mvc-bindings-log-api"),a.forEach(u,function(a){if("*"!=
s||!(a in(A||{}))){var b=g.isFunction(f.get)?f.get(a):f[a];d(v,C,z,m,"*"==s?a:s,f,a,void 0,b)}}));t&c.to&&(t&c.from||a.forEach(u,function(a){if("*"!=s||!(a in(A||{}))){var b=g.isFunction(m.get)?m.get(s):m[s];d(x,C,z,f,a,m,"*"==s?a:s,void 0,b)}}),g.isFunction(m.set)&&g.isFunction(m.watch)?B.push(m.watch.apply(m,("*"!=s?[s]:[]).concat([function(a,b,c){d(x,C,z,f,e,m,a,b,c,A)}]))):b("mvc-bindings-log-api"));b("mvc-bindings-log-api");F={};F.unwatch=F.remove=function(){for(var a=null;a=B.pop();)a.unwatch();
b("mvc-bindings-log-api")};return F};g.mixin(c,m);return g.setObject("dojox.mvc.sync",g.mixin(h,{equals:function(a,b){return a===b||"number"==typeof a&&isNaN(a)&&"number"==typeof b&&isNaN(b)||g.isFunction((a||{}).getTime)&&g.isFunction((b||{}).getTime)&&a.getTime()==b.getTime()||(g.isFunction((a||{}).equals)?a.equals(b):g.isFunction((b||{}).equals)?b.equals(a):!1)}},m))})},"dojox/mvc/_atBindingExtension":function(){define(["dojo/_base/config","dojo/has","dijit/_WidgetBase","./atBindingExtension"],
function(g,m,a,b){m.add("mvc-extension-per-widget",(g.mvc||{}).extensionPerWidget);m("mvc-extension-per-widget")||b(a.prototype)})},"dojox/mvc/atBindingExtension":function(){define("dojo/aspect dojo/_base/array dojo/_base/lang dijit/_WidgetBase ./_atBindingMixin dijit/registry".split(" "),function(g,m,a,b,d){return function(b){m.forEach(arguments,function(b){b.dataBindAttr||(a._mixin(b,d.mixin),g.before(b,"postscript",function(a,b){this._dbpostscript(a,b)}),g.before(b,"startup",function(){this._started||
this._startAtWatchHandles()}),g.before(b,"destroy",function(){this._stopAtWatchHandles()}),g.around(b,"set",function(b){return function(c,e){return c==d.prototype.dataBindAttr?this._setBind(e):"dojox.mvc.at"==(e||{}).atsignature?this._setAtWatchHandle(c,e):b.apply(this,a._toArray(arguments))}}))});return arguments}})},"dojox/mvc/_atBindingMixin":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/declare dojo/has dojo/Stateful ./resolve ./sync".split(" "),function(g,m,a,b,d,c,h){function n(a){var b;
try{b=require("dijit/registry")}catch(c){return}for(a=a.domNode&&a.domNode.parentNode;a;){if(a=b.getEnclosingWidget(a)){var d=a._relTargetProp||"target";if((m.isFunction(a.get)?a.get(d):a[d])||d in a.constructor.prototype)return a}a=a&&a.domNode.parentNode}}function f(a,d,e,f,g){function v(){x.Two&&x.Two.unwatch();delete x.Two;var n=B&&(m.isFunction(B.get)?B.get(A):B[A]),v=c(a,n),n=c(e,n);b("mvc-bindings-log-api")&&(!v||/^rel:/.test(a));b("mvc-bindings-log-api")&&(!n||/^rel:/.test(e));if(v&&n&&(!/^rel:/.test(a)&&
!/^rel:/.test(e)||B))(!v.set||!v.watch)&&"*"==d?b("mvc-bindings-log-api"):null==d?(m.isFunction(n.set)?n.set(f,v):n[f]=v,b("mvc-bindings-log-api")):x.Two=h(v,d,n,f,g)}var x={},B=n(e),A=B&&B._relTargetProp||"target";v();if(B&&/^rel:/.test(a)||/^rel:/.test(e)&&m.isFunction(B.set)&&m.isFunction(B.watch))x.rel=B.watch(A,function(a,c,d){c!==d&&(b("mvc-bindings-log-api"),v())});var C={};C.unwatch=C.remove=function(){for(var a in x)x[a]&&x[a].unwatch(),delete x[a]};return C}b("mvc-bindings-log-api");var e=
{dataBindAttr:"data-mvc-bindings",_dbpostscript:function(a,b){var c=this._refs=(a||{}).refs||{},e;for(e in a)if("dojox.mvc.at"==(a[e]||{}).atsignature){var f=a[e];delete a[e];c[e]=f}var f=new d,g=this;f.toString=function(){return"[Mixin value of widget "+g.declaredClass+", "+(g.id||"NO ID")+"]"};f.canConvertToLoggable=!0;this._startAtWatchHandles(f);for(e in c)void 0!==f[e]&&((a=a||{})[e]=f[e]);this._stopAtWatchHandles()},_startAtWatchHandles:function(a){this.canConvertToLoggable=!0;var b=this._refs;
if(b){var c=this._atWatchHandles=this._atWatchHandles||{};this._excludes=null;for(var d in b)b[d]&&"*"!=d&&(c[d]=f(b[d].target,b[d].targetProp,a||this,d,{bindDirection:b[d].bindDirection,converter:b[d].converter,equals:b[d].equalsCallback}));if("dojox.mvc.at"==(b["*"]||{}).atsignature)c["*"]=f(b["*"].target,b["*"].targetProp,a||this,"*",{bindDirection:b["*"].bindDirection,converter:b["*"].converter,equals:b["*"].equalsCallback})}},_stopAtWatchHandles:function(){for(var a in this._atWatchHandles)this._atWatchHandles[a].unwatch(),
delete this._atWatchHandles[a]},_setAtWatchHandle:function(a,b){if("ref"==a)throw Error(this+": 1.7 ref syntax used in conjunction with 1.8 dojox/mvc/at syntax, which is not supported.");var c=this._atWatchHandles=this._atWatchHandles||{};c[a]&&(c[a].unwatch(),delete c[a]);this._excludes=this[a]=null;this._started?c[a]=f(b.target,b.targetProp,this,a,{bindDirection:b.bindDirection,converter:b.converter,equals:b.equalsCallback}):this._refs[a]=b},_setBind:function(a){a=eval("({"+a+"})");for(var b in a){var c=
a[b];"dojox.mvc.at"==(c||{}).atsignature&&this._setAtWatchHandle(b,c)}},_getExcludesAttr:function(){if(this._excludes)return this._excludes;var a=[],b;for(b in this._atWatchHandles)"*"!=b&&a.push(b);return a},_getPropertiesAttr:function(){if(this.constructor._attribs)return this.constructor._attribs;var a=["onClick"].concat(this.constructor._setterAttrs);g.forEach(["id","excludes","properties","ref","binding"],function(b){b=g.indexOf(a,b);0<=b&&a.splice(b,1)});return this.constructor._attribs=a}};
e[e.dataBindAttr]="";a=a("dojox/mvc/_atBindingMixin",null,e);a.mixin=e;return a})},"dojox/mvc/resolve":function(){define(["dojo/_base/lang","dijit/registry","dojo/Stateful"],function(g,m){return g.setObject("dojox.mvc.resolve",function(a,b){if("string"==typeof a){var d=a.match(/^(expr|rel|widget):(.*)$/)||[];try{a="rel"==d[1]?g.getObject(d[2]||"",!1,b):"widget"==d[1]?m.byId(d[2]):g.getObject(d[2]||a,!1,b)}catch(c){}}return a})})},"esriPBI/widgets/SymbolStyle/_Styler":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/dom-class esriPBI/defaults ./utils/rendererUtils".split(" "),
function(g,m,a,b,d,c){return g([a],{changed:!1,paramName:"",startup:function(){this.inherited(arguments);this._setEditState(this.isNotDefault())},postCreate:function(){setTimeout(m.hitch(this,this._registerStylerChangeHandlers),100)},_registerStylerChangeHandlers:function(){throw Error("_registerStylerChangeHandlers() function is not implemented");},isNotDefault:function(){throw Error("isNotDefault() function is not implemented");},_toggleContent:function(){b.toggle(this.stylerContent,"dijitHidden");
b.toggle(this.stylerFliperArrow,"flip")},_canIntermediateChanges:function(){var a=this.app.mapManager.getPowerBILayer();return"esriGeometryPoint"===a.geometryType?1500>=a.graphics.length:500>=a.graphics.length},_revertToDefault:function(){this._setEditState(!1);var a=this.app.mapManager.getPowerBILayer(),a=c.getCurrentRendererType(a);if(this.paramName)d[a].renderers[this.paramName]=m.clone(d.origin.renderers[this.paramName]);else throw Error("paramName for this styler is not defined.");},_setEditState:function(a){if(null==
a||void 0==a)a=!1;(this.changed=a)?b.contains(this.revertDefault,"revertDisabled")&&b.remove(this.revertDefault,"revertDisabled"):b.contains(this.revertDefault,"revertDisabled")||b.add(this.revertDefault,"revertDisabled")}})})},"esriPBI/widgets/SymbolStyle/ColorPicker":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/window dojo/dom-attr dojo/i18n!./nls/Color dojox/mvc/Templated esri/Color dojo/Evented dojo/text!./templates/ColorPicker.html dojo/text!./images/PBI_Colors_image.txt".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t){return g([e,s],{templateString:u,baseClass:"colorPickerWidget",showTitle:!0,nls:f,pbiColors:["#ffffff #e6e6e6 #cccccc #b3b3b3 #808080 #666666".split(" "),"#000000 #999999 #666666 #333333 #1a1a1a #000000".split(" "),"#00b8aa #99e3dd #66d4cc #33c6bb #008a80 #005c55".split(" "),"#374649 #afb5b6 #879092 #5f6b6d #293537 #1c2325".split(" "),"#fd625e #fec0bf #fea19e #fd817e #be4a47 #7f312f".split(" "),"#f2c811 #fae9a0 #f7de70 #f5d341 #b6960d #796409".split(" "),"#5f6b6d #bfc4c5 #9fa6a7 #7f898a #475052 #303637".split(" "),
"#8ad4eb #d0eef7 #b9e5f3 #a1ddef #689fb0 #456a76".split(" "),"#fe9666 #ffd5c2 #fec0a3 #feab85 #bf714d #7f4b33".split(" "),"#a66999 #dbc3d6 #caa5c2 #b887ad #7d4f73 #53354d".split(" ")],pbiColors64:t,colorPickerId:"colorPicker",canvasId:"colorCanvas",colorPaletteId:"colorCanvas1_palette",colorPicerkBoxId:"colorCanvas1_pickerBox",colorHexId:"colorCanvas1_hex",canvasCount:1,img:null,ctx:null,constructor:function(a){m.mixin(this,a||{});this.canvasId=this.colorPickerId+"_canvas";this.colorPaletteId=this.colorPickerId+
"_palette";this.colorPicerkBoxId=this.colorPickerId+"_pickerbox";this.colorHexId=this.colorPickerId+"_hex"},postCreate:function(){this.showTitle||d.add(this.title,"dijitHidden")},_setColorAttr:function(b,c){var d=new p(b);d.a=1;this.color=d;var e=d.toHex();a.set(this.previewBlock,"background-color",e);n.set(this.colorCanvasHexBox,"value",e.toUpperCase());a.set(this.previewBlock,"border-color",e);a.set(this.previousColor,"background-color",e);a.set(this.newColor,"background-color",e);this.colorPickerBox.style.display=
"none";!1!==c&&this.emit("colorChanged",d)},_getColorAttr:function(){return this.color},_select:function(){"none"==this.colorPickerBox.style.display?(this._positionContainer(),document.getElementById(this.colorPicerkBoxId+"_spacer")||this._createColorSpreads(),this._setupColorBox(),this.colorPickerBox.style.display="block",h.scrollIntoView(this.colorPickerBox)):this.colorPickerBox.style.display="none"},_positionContainer:function(){var a=document.getElementById(this.colorPaletteId);c.position(this.colorPalette);
var a=this.findPos(a),b=window.innerHeight,d=c.position(this.colorPalette),b=b-d.y;document.getElementById(this.colorPicerkBoxId).style.top=220<b?a[1]-80+"px":a[1]-100-220+"px"},findPos:function(a){var b=0,c=0;if(a.offsetParent){b=a.offsetLeft;for(c=a.offsetTop;a=a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop}return[b,c]},_createColorSpreads:function(){for(var a=this,c=0;c<this.pbiColors.length;c++){b.create("div",{className:"esriPBIColorSeparator",id:this.colorPicerkBoxId+"_spacer",title:f.click},
this.spreadHolder);var d=b.create("div",{className:"esriPBIColorSpreadBox"},this.spreadHolder);b.create("div",{className:"esriPBITopPatch",style:"background-color: "+this.pbiColors[c][0],title:f.click},d).addEventListener("click",function(b){a.set("color",b.target.style.backgroundColor)});b.create("div",{className:"esriPBISpacerPatch"},d);for(var d=b.create("div",{className:"esriPBIColorSpreadColumn"},d),e=1;e<this.pbiColors[c].length;e++)b.create("div",{className:"esriPBIColorPatch",style:"background-color: "+
this.pbiColors[c][e]},d).addEventListener("click",function(b){a.set("color",b.target.style.backgroundColor)})}this.closeSpreadButton.addEventListener("click",function(){a.colorSpreads.style.display="none";a.colorBox.style.display="block"})},_setupColorBox:function(){this.img=new Image;this.canvas=document.getElementById(this.canvasId);this.ctx=this.canvas.getContext("2d");var b=this;this.img.onload=function(){b.ctx.drawImage(b.img,0,0);b.img.style.display="none"};this.img.setAttribute("src",this.pbiColors64);
this.canvas.addEventListener("click",function(a){a=b.ctx.getImageData(a.layerX,a.layerY,1,1).data;a=b.rgbToHex(a[0],a[1],a[2]);b.set("color",a)});this.canvas.addEventListener("mousemove",function(c){c=b.ctx.getImageData(c.layerX,c.layerY,1,1).data;c=b.rgbToHex(c[0],c[1],c[2]);a.set(b.newColor,"background-color",c);n.set(b.colorCanvasHexBox,"value",c.toUpperCase())});this.closeCanvasButton.addEventListener("click",function(){b.colorSpreads.style.display="block";b.colorBox.style.display="none"})},rgbToHex:function(a,
b,c){function d(a){a=a.toString(16);return 1==a.length?"0"+a:a}return"#"+d(a)+d(b)+d(c)},_colorInputChange:function(a){a=a.target.value;/^(#)?([0-9a-fA-F]{3})([0-9a-fA-F]{3})?$/.test(a)&&this.set("color",a)}})})},"esriPBI/widgets/SymbolStyle/ValuePicker":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/debounce dojo/number dojo/dom-class dojo/dom-construct dojox/mvc/Templated dijit/ColorPalette dojo/Evented dojo/text!./templates/ValuePicker.html dijit/form/HorizontalSlider dijit/form/TextBox".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s){return g([f,p],{templateString:s,baseClass:"valuePickerWidget",constructor:function(a){m.mixin(this,a||{})},startup:function(){this.inherited(arguments);this.intermediateChanges||(this._onKeyUp=d(this._onKeyUp,200));this.own(b(this.valueSlider,"change",m.hitch(this,function(a){this._update(this.format(a));this.emit("valueChanged",a)})),b(this.valueTextbox,"keydown",function(a){a.stopPropagation()}),b(this.valueTextbox,"keyup",m.hitch(this,this._onKeyUp)),b(this.valueTextbox,
"blur",m.hitch(this,this._onBlur)))},_onKeyUp:function(a){13===a.keyCode&&this._update(a.target.value)},_onBlur:function(a){this._update(a.target.value)},_update:function(a){a=this.deformat(a,this.valueSlider.maximum);isNaN(a)?h.add(this.valueTextbox,"invalid"):(h.remove(this.valueTextbox,"invalid"),a<=this.valueSlider.maximum&&a>=this.valueSlider.minimum?this.set("value",a):h.add(this.valueTextbox,"invalid"))},_setValueAttr:function(a,b){this.value=a;this.valueTextbox.value=this.format(a);this.valueSlider.setSilently("value",
a);!1!==b&&this.emit("valueChanged",a)},_getValueAttr:function(){return this.value},format:function(a){return"%"===this.formatter?c.format(a,{places:"0"})+"%":"px"===this.formatter?c.format(a,{places:"0"})+"px":a},deformat:function(a,b){return"%"===this.formatter?"%"===a.charAt(a.length-1)?c.parse(a.substring(0,a.length-1)):c.parse(a):"px"===this.formatter?"px"===a.substring(a.length-2,a.length)?c.parse(a.substring(0,a.length-2)):c.parse(a):NaN}})})},"dijit/ColorPalette":function(){define("require dojo/text!./templates/ColorPalette.html ./_Widget ./_TemplatedMixin ./_PaletteMixin ./hccss dojo/i18n dojo/_base/Color dojo/_base/declare dojo/dom-construct dojo/string dojo/i18n!dojo/nls/colors dojo/colors".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p){var s=f("dijit.ColorPalette",[a,b,d],{palette:"7x10",_palettes:{"7x10":["white seashell cornsilk lemonchiffon lightyellow palegreen paleturquoise lightcyan lavender plum".split(" "),"lightgray pink bisque moccasin khaki lightgreen lightseagreen lightskyblue cornflowerblue violet".split(" "),"silver lightcoral sandybrown orange palegoldenrod chartreuse mediumturquoise skyblue mediumslateblue orchid".split(" "),"gray red orangered darkorange yellow limegreen darkseagreen royalblue slateblue mediumorchid".split(" "),
"dimgray crimson chocolate coral gold forestgreen seagreen blue blueviolet darkorchid".split(" "),"darkslategray firebrick saddlebrown sienna olive green darkcyan mediumblue darkslateblue darkmagenta".split(" "),"black darkred maroon brown darkolivegreen darkgreen midnightblue navy indigo purple".split(" ")],"3x4":[["white","lime","green","blue"],["silver","yellow","fuchsia","navy"],["gray","red","purple","black"]]},templateString:m,baseClass:"dijitColorPalette",_dyeFactory:function(a,b,c,d){return new this._dyeClass(a,
b,c,d)},buildRendering:function(){this.inherited(arguments);this._dyeClass=f(s._Color,{palette:this.palette});this._preparePalette(this._palettes[this.palette],h.getLocalization("dojo","colors",this.lang))}});s._Color=f("dijit._Color",n,{template:"\x3cspan class\x3d'dijitInline dijitPaletteImg'\x3e\x3cimg src\x3d'${blankGif}' alt\x3d'${alt}' title\x3d'${title}' class\x3d'dijitColorPaletteSwatch' style\x3d'background-color: ${color}'/\x3e\x3c/span\x3e",hcTemplate:"\x3cspan class\x3d'dijitInline dijitPaletteImg' style\x3d'position: relative; overflow: hidden; height: 12px; width: 14px;'\x3e\x3cimg src\x3d'${image}' alt\x3d'${alt}' title\x3d'${title}' style\x3d'position: absolute; left: ${left}px; top: ${top}px; ${size}'/\x3e\x3c/span\x3e",
_imagePaths:{"7x10":g.toUrl("./themes/a11y/colors7x10.png"),"3x4":g.toUrl("./themes/a11y/colors3x4.png")},constructor:function(a,b,c,d){this._title=d;this._row=b;this._col=c;this.setColor(n.named[a])},getValue:function(){return this.toHex()},fillCell:function(a,b){var d=p.substitute(c("highcontrast")?this.hcTemplate:this.template,{color:this.toHex(),blankGif:b,alt:this._title,title:this._title,image:this._imagePaths[this.palette].toString(),left:-20*this._col-5,top:-20*this._row-5,size:"7x10"==this.palette?
"height: 145px; width: 206px":"height: 64px; width: 86px"});e.place(d,a)}});return s})},"dijit/_PaletteMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on ./_CssStateMixin ./a11yclick ./focus ./typematic".split(" "),function(g,m,a,b,d,c,h,n,f,e,p){return g("dijit._PaletteMixin",n,{defaultTimeout:500,timeoutChangeRate:0.9,value:"",_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:null,_dyeFactory:function(a){return new ("string"==
typeof this.dyeClass?c.getObject(this.dyeClass):this.dyeClass)(a)},_preparePalette:function(a,e){this._cells=[];var g=this._blankGif;this.own(h(this.gridNode,f,c.hitch(this,"_onCellClick")));for(var m=0;m<a.length;m++)for(var n=b.create("tr",{tabIndex:"-1",role:"row"},this.gridNode),x=0;x<a[m].length;x++){var B=a[m][x];if(B){var A=this._dyeFactory(B,m,x,e[B]),B=b.create("td",{"class":this.cellClass,tabIndex:"-1",title:e[B],role:"gridcell"},n);A.fillCell(B,g);B.idx=this._cells.length;this._cells.push({node:B,
dye:A})}}this._xDim=a[0].length;this._yDim=a.length;var C={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1},z;for(z in C)this.own(p.addKeyListener(this.domNode,{keyCode:d[z],ctrlKey:!1,altKey:!1,shiftKey:!1},this,function(){var a=C[z];return function(b){this._navigateByKey(a,b)}}(),this.timeoutChangeRate,this.defaultTimeout))},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node)},focus:function(){e.focus(this._currentFocus)},
_onCellClick:function(a){for(var b=a.target;"TD"!=b.tagName;){if(!b.parentNode||b==this.gridNode)return;b=b.parentNode}var c=this._getDye(b).getValue();this._setCurrent(b);e.focus(b);this._setValueAttr(c,!0);a.stopPropagation();a.preventDefault()},_setCurrent:function(a){"_currentFocus"in this&&m.set(this._currentFocus,"tabIndex","-1");(this._currentFocus=a)&&m.set(a,"tabIndex",this.tabIndex)},_setValueAttr:function(b,c){0<=this._selectedCell&&a.remove(this._cells[this._selectedCell].node,this.cellClass+
"Selected");this._selectedCell=-1;if(b)for(var d=0;d<this._cells.length;d++)if(b==this._cells[d].dye.getValue()){this._selectedCell=d;a.add(this._cells[d].node,this.cellClass+"Selected");break}this._set("value",0<=this._selectedCell?b:null);if(c||void 0===c)this.onChange(b)},onChange:function(){},_navigateByKey:function(a,b){if(-1!=b){var d=this._currentFocus.idx+a;d<this._cells.length&&-1<d&&(d=this._cells[d].node,this._setCurrent(d),this.defer(c.hitch(e,"focus",d)))}},_getDye:function(a){return this._cells[a.idx].dye}})})},
"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(g,m,a,b){var d={};m.setObject("dojo.colors",d);var c=function(a,b,c){0>c&&++c;1<c&&--c;var d=6*c;return 1>d?a+(b-a)*d:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a};g.colorFromRgb=a.fromRgb=function(d,f){var e=d.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(e){var g=e[2].split(/\s*,\s*/),h=g.length,e=e[1];if("rgb"==e&&3==h||"rgba"==e&&4==h)return e=g[0],"%"==e.charAt(e.length-1)?(e=b.map(g,
function(a){return 2.56*parseFloat(a)}),4==h&&(e[3]=g[3]),a.fromArray(e,f)):a.fromArray(g,f);if("hsl"==e&&3==h||"hsla"==e&&4==h){var e=(parseFloat(g[0])%360+360)%360/360,m=parseFloat(g[1])/100,t=parseFloat(g[2])/100,m=0.5>=t?t*(m+1):t+m-t*m,t=2*t-m,e=[256*c(t,m,e+1/3),256*c(t,m,e),256*c(t,m,e-1/3),1];4==h&&(e[3]=g[3]);return a.fromArray(e,f)}}return null};var h=function(a,b,c){a=Number(a);return isNaN(a)?c:a<b?b:a>c?c:a};a.prototype.sanitize=function(){this.r=Math.round(h(this.r,0,255));this.g=Math.round(h(this.g,
0,255));this.b=Math.round(h(this.b,0,255));this.a=h(this.a,0,1);return this};d.makeGrey=a.makeGrey=function(b,c){return a.fromArray([b,b,b,c])};m.mixin(a.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,
149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,
0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],
lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,
0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,
232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,
250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return a})},"esriPBI/widgets/SymbolStyle/configs/_configSize":function(){define("dojo/_base/lang dojo/on dojo/dom-style esriPBI/utils/smartMappingUtils ../Simple ../Size".split(" "),function(g,m,a,b,d,c){return{_configSize:function(h){var n=this.__config(c,this.sizeDetails),
f=this.__config(d,this.simpleDetails);a.set(f.sizeOption.domNode,"display","none");n.own(m(n,"sizeInfoChanged",g.hitch(this,function(a){var c=h.mapManager.getPowerBILayer();b.setSizeRenderer(c,a,c.renderer.defaultSymbol).then(g.hitch(this,this._onRendererChanged))})));f.own(m(f,"symbolChanged",g.hitch(this,function(a){var c=h.mapManager.getPowerBILayer();b.setSizeRenderer(c,c.renderer.sizeInfo,a).then(g.hitch(this,this._onRendererChanged))})))}}})},"esriPBI/widgets/SymbolStyle/Size":function(){define("dojo/_base/declare dojo/_base/lang dojox/mvc/Templated dojo/on ./_Styler esriPBI/defaults ./utils/colorUtils ./utils/rendererUtils dojo/i18n!./nls/Size dojo/text!./templates/Size.html ./Classification dojox/form/HorizontalRangeSlider".split(" "),
function(g,m,a,b,d,c,h,n,f,e){return g([a,d],{templateString:e,nls:f,baseClass:"sizeWidget",paramName:"sizeParam",constructor:function(a){m.mixin(this,a||{})},postMixInProperties:function(){if(this.sizeInfo=this.app.mapManager.getPowerBILayer().renderer.sizeInfo)this.classificationMethod=this.sizeInfo.classificationMethod,this.numClasses=this.sizeInfo.numClasses,this.minSize=this.sizeInfo.minSize,this.maxSize=this.sizeInfo.maxSize;this.intermediateChanges=this._canIntermediateChanges()},isNotDefault:function(){return this.numClasses!==
c.origin.renderers.sizeParam.numClasses?!0:this.minSize!==c.origin.renderers.sizeParam.minSize?!0:this.classificationMethod!==c.origin.renderers.sizeParam.classificationMethod?!0:this.maxSize!==c.origin.renderers.sizeParam.maxSize?!0:!1},_revertToDefault:function(){this.inherited(arguments);this.sizeInfo=m.clone(c.origin.renderers.sizeParam);this.emit("sizeInfoChanged",this.sizeInfo);this.classificationOption.set("method",this.sizeInfo.classificationMethod,!1);this.classificationOption.ignoreNumberSpinnerChange=
!0;this.classificationOption.set("numClass",this.sizeInfo.numClasses,!1);this.minmaxSlider.setSilently("value",[this.sizeInfo.minSize,this.sizeInfo.maxSize])},_registerStylerChangeHandlers:function(){var a=this;this.own(b(this.classificationOption,"methodChanged",m.hitch(this,function(b,d){var e=this.app.mapManager.getPowerBILayer(),e=c[n.getCurrentRendererType(e)].renderers.sizeParam;this.sizeInfo=m.mixin(e,{classificationMethod:b,numClasses:d});this.emit("sizeInfoChanged",this.sizeInfo);a._setEditState(!0)})),
b(this.classificationOption,"value-not-default",m.hitch(this,function(){this._setEditState(!0)})))},_minmaxSizeChange:function(a){var b=this.app.mapManager.getPowerBILayer(),b=c[n.getCurrentRendererType(b)].renderers.sizeParam;m.mixin(b.scheme,{minSize:a[0],maxSize:a[1]});this.sizeInfo=m.mixin(b,{minSize:a[0],maxSize:a[1]});this.emit("sizeInfoChanged",this.sizeInfo);this._setEditState(!0)}})})},"esriPBI/widgets/SymbolStyle/Classification":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojox/mvc/Templated dojo/Evented dojo/debounce dojo/i18n!./nls/Classification dojo/text!./templates/Classification.html dijit/form/NumberSpinner".split(" "),
function(g,m,a,b,d,c,h,n){var f=["equal-interval","natural-breaks","quantile","standard-deviation"];return g([b,d],{templateString:n,nls:h,baseClass:"classificationWidget",ignoreNumberSpinnerChange:!1,constructor:function(a){m.mixin(this,a||{})},postMixInProperties:function(){this.numClasses=this.numClasses||5;this.classificationMethod=this.classificationMethod||"quantile";this._numberOfClasesChange=c(m.hitch(this,function(a){5!==a&&this.emit("value-not-default");this.ignoreNumberSpinnerChange?this.ignoreNumberSpinnerChange=
!1:!isNaN(a)&&this.numClassOption.validate()&&(this.numClasses=a,this.emit("methodChanged",this.classificationMethod,this.numClasses))}),500)},postCreate:function(){this.classificationMethodOption.value=this.classificationMethod},_setMethodAttr:function(b,c){this.classificationMethod=b;this.classificationMethodOption.selectedIndex=a.indexOf(f,b);!1!==c&&this.emit("methodChanged",this.classificationMethod,this.numClasses)},_setNumClassAttr:function(a,b){this.numClasses=a;this.numClassOption.set("value",
a,b);!1!==b&&this.emit("methodChanged",this.classificationMethod,this.numClasses)},_classificationChange:function(a){this.classificationMethod=f[a.target.selectedIndex];this.emit("methodChanged",this.classificationMethod,this.numClasses)}})})},"dijit/form/NumberSpinner":function(){define(["dojo/_base/declare","dojo/keys","./_Spinner","./NumberTextBox"],function(g,m,a,b){return g("dijit.form.NumberSpinner",[a,b.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(a,b){var g=
this.constraints,m=isNaN(a),f=!isNaN(g.max),e=!isNaN(g.min);m&&0!=b&&(a=0<b?e?g.min:f?g.max:0:f?this.constraints.max:e?g.min:0);var p=a+b;if(m||isNaN(p))return a;f&&p>g.max&&(p=g.max);e&&p<g.min&&(p=g.min);return p},_onKeyDown:function(a){if(!this.disabled&&!this.readOnly&&(a.keyCode==m.HOME||a.keyCode==m.END)&&!a.ctrlKey&&(!a.altKey&&!a.metaKey)&&"undefined"!=typeof this.get("value")){var b=this.constraints[a.keyCode==m.HOME?"min":"max"];"number"==typeof b&&this._setValueAttr(b,!1);a.stopPropagation();
a.preventDefault()}}})})},"dijit/form/_Spinner":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/sniff dojo/mouse dojo/on ../typematic ./RangeBoundTextBox dojo/text!./templates/Spinner.html ./_TextBoxMixin".split(" "),function(g,m,a,b,d,c,h,n,f,e){return g("dijit.form._Spinner",n,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:f,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},
adjust:function(a){return a},_arrowPressed:function(a,b,c){!this.disabled&&!this.readOnly&&(this._setValueAttr(this.adjust(this.get("value"),b*c),!1),e.selectInputText(this.textbox,this.textbox.value.length))},_arrowReleased:function(){this._wheelTimer=null},_typematicCallback:function(a,b,c){var d=this.smallDelta;b==this.textbox&&(b=c.keyCode,d=b==m.PAGE_UP||b==m.PAGE_DOWN?this.largeDelta:this.smallDelta,b=b==m.UP_ARROW||b==m.PAGE_UP?this.upArrowNode:this.downArrowNode);-1==a?this._arrowReleased(b):
this._arrowPressed(b,b==this.upArrowNode?1:-1,d)},_wheelTimer:null,_mouseWheeled:function(a){if(this.focused){a.stopPropagation();a.preventDefault();var b=a.wheelDelta/120;Math.floor(b)!=b&&(b=0<a.wheelDelta?1:-1);a=a.detail?-1*a.detail:b;if(0!==a){var c=this[0<a?"upArrowNode":"downArrowNode"];this._arrowPressed(c,a,this.smallDelta);this._wheelTimer&&this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(c)},50)}}},_setConstraintsAttr:function(a){this.inherited(arguments);
this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(a,b){this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(c(this.domNode,d.wheel,a.hitch(this,
"_mouseWheeled")),h.addListener(this.upArrowNode,this.textbox,{keyCode:m.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),h.addListener(this.downArrowNode,this.textbox,{keyCode:m.DOWN_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),h.addListener(this.upArrowNode,this.textbox,{keyCode:m.PAGE_UP,ctrlKey:!1,altKey:!1,
shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),h.addListener(this.downArrowNode,this.textbox,{keyCode:m.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox","dojo/i18n!./nls/validate"],function(g,m,a){return g("dijit.form.RangeBoundTextBox",
a,{rangeMessage:"",rangeCheck:function(a,d){return("min"in d?0<=this.compare(a,d.min):!0)&&("max"in d?0>=this.compare(a,d.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var a=this.get("value");if(null==a)return!1;var d=!1;"min"in this.constraints&&(d=this.constraints.min,d=0>this.compare(a,"number"==typeof d&&0<=d&&0!=a?0:d));!d&&"max"in this.constraints&&(d=this.constraints.max,d=0<this.compare(a,"number"!=typeof d||0<
d?d:0));return d},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(a){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(a))},getErrorMessage:function(a){var d=this.get("value");return null!=d&&""!==d&&("number"!=typeof d||!isNaN(d))&&!this.isInRange(a)?this.rangeMessage:this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);this.rangeMessage||(this.messages=
m.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(g,m,a,b){return g("dijit.form.MappedTextBox",b,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(a){return a.toString?a.toString():""},toString:function(){var a=this.filter(this.get("value"));
return null!=a?"string"==typeof a?a:this.serialize(a,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=a.place("\x3cinput type\x3d'hidden'"+(this.name&&!m("msapp")?' name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"")+"/\x3e",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},"dijit/form/NumberTextBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/i18n dojo/string dojo/number ./RangeBoundTextBox".split(" "),
function(g,m,a,b,d,c){var h=function(b){b=b||{};var c=a.getLocalization("dojo.cldr","number",a.normalizeLocale(b.locale)),d=b.pattern?b.pattern:c[(b.type||"decimal")+"Format"];b="number"==typeof b.places?b.places:"string"===typeof b.places&&0<b.places.length?b.places.replace(/.*,/,""):-1!=d.indexOf(".")?d.split(".")[1].replace(/[^#0]/g,"").length:0;return{sep:c.decimal,places:b}},n=g("dijit.form.NumberTextBoxMixin",null,{pattern:function(a){return"("+(this.focused&&this.editOptions?this._regExpGenerator(m.delegate(a,
this.editOptions))+"|":"")+this._regExpGenerator(a)+")"},value:NaN,editOptions:{pattern:"#.######"},_formatter:d.format,_regExpGenerator:d.regexp,_decimalInfo:h(),postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(a){var b="number"==typeof a.places?a.places:0;b&&b++;"number"!=typeof a.max&&(a.max=9*Math.pow(10,15-b));"number"!=typeof a.min&&(a.min=-9*Math.pow(10,15-b));this.inherited(arguments,[a]);this.focusNode&&(this.focusNode.value&&
!isNaN(this.value))&&this.set("value",this.value);this._decimalInfo=h(a)},_onFocus:function(){if(!this.disabled&&!this.readOnly){var a=this.get("value");"number"==typeof a&&!isNaN(a)&&(a=this.format(a,this.constraints),void 0!==a&&(this.textbox.value=a));this.inherited(arguments)}},format:function(a,b){var c=String(a);if("number"!=typeof a)return c;if(isNaN(a))return"";if(!("rangeCheck"in this&&this.rangeCheck(a,b))&&!1!==b.exponent&&/\de[-+]?\d/i.test(c))return c;this.editOptions&&this.focused&&
(b=m.mixin({},b,this.editOptions));return this._formatter(a,b)},_parser:d.parse,parse:function(a,b){var c=m.mixin({},b,this.editOptions&&this.focused?this.editOptions:{});if(this.focused&&null!=c.places){var d=c.places,d="number"===typeof d?d:Number(d.split(",").pop());c.places="0,"+d}c=this._parser(a,c);this.editOptions&&(this.focused&&isNaN(c))&&(c=this._parser(a,b));return c},_getDisplayedValueAttr:function(){var a=this.inherited(arguments);return isNaN(a)?this.textbox.value:a},filter:function(a){if(null==
a||"string"==typeof a&&""==a)return NaN;"number"==typeof a&&(!isNaN(a)&&0!=a)&&(a=d.round(a,this._decimalInfo.places));return this.inherited(arguments,[a])},serialize:function(a,b){return"number"!=typeof a||isNaN(a)?"":this.inherited(arguments)},_setBlurValue:function(){var a=m.hitch(m.delegate(this,{focused:!0}),"get")("value");this._setValueAttr(a,!0)},_setValueAttr:function(a,b,c){if(void 0!==a&&void 0===c)if(c=String(a),"number"==typeof a)if(isNaN(a))c="";else{if("rangeCheck"in this&&this.rangeCheck(a,
this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(c))c=void 0}else a?a=void 0:(c="",a=NaN);this.inherited(arguments,[a,b,c])},_getValueAttr:function(){var a=this.inherited(arguments);if(isNaN(a)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&RegExp("^"+d._realNumberRegexp(m.delegate(this.constraints))+"$").test(this.textbox.value))return a=Number(this.textbox.value),isNaN(a)?void 0:a}else return a},isValid:function(a){if(!this.focused||
this._isEmpty(this.textbox.value))return this.inherited(arguments);var b=this.get("value");return!isNaN(b)&&this.rangeCheck(b,this.constraints)?!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)?!0:this.inherited(arguments):!1},_isValidSubset:function(){var a="number"==typeof this.constraints.min,c="number"==typeof this.constraints.max,d=this.get("value");if(isNaN(d)||!a&&!c)return this.inherited(arguments);var g=d|0,h=0>d,m=-1!=this.textbox.value.indexOf(this._decimalInfo.sep),
n=(this.maxLength||20)-this.textbox.value.length,v=m?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"",g=m?g+"."+v:g+"",n=b.rep("9",n),m=d;h?m=Number(g+n):d=Number(g+n);return!(a&&d<this.constraints.min||c&&m>this.constraints.max)}});g=g("dijit.form.NumberTextBox",[c,n],{baseClass:"dijitTextBox dijitNumberTextBox"});g.Mixin=n;return g})},"esriPBI/widgets/SymbolStyle/configs/_configUnique":function(){define("dojo/_base/lang dojo/on dojo/dom-style esriPBI/utils/smartMappingUtils ../Simple ../Unique".split(" "),
function(g,m,a,b,d,c){function h(a,c,d,h,m){b.setColorRenderer(a,{infos:c,scheme:d},h).then(g.hitch(m,m._onRendererChanged))}return{_configUnique:function(b){var f=this.__config(c,this.uniqueDetails),e=this.__config(d,this.simpleDetails);a.set(e.fillColorOption.domNode,"display","none");a.set(e.fillTransparencyOption.domNode,"display","none");var p;f.own(m(f,"uniqueValueInfoChanged",g.hitch(this,function(a){var c=b.mapManager.getPowerBILayer();h(c,a,p,c.renderer.defaultSymbol,this)})),m(f,"schemeChanged",
g.hitch(this,function(a){var c=b.mapManager.getPowerBILayer();p=a;h(c,null,p,c.renderer.defaultSymbol,this)})));e.own(m(e,"symbolChanged",g.hitch(this,function(a){var c=b.mapManager.getPowerBILayer();h(c,c.renderer.infos,p,a,this)})))}}})},"esriPBI/widgets/SymbolStyle/Unique":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojox/mvc/Templated dojo/on dojo/dom-construct ./_Styler ./mixins/_ColorRampMixin ./utils/colorUtils ./utils/rendererUtils esriPBI/defaults esriPBI/utils/smartMappingUtils esri/renderers/UniqueValueRenderer ../../utils/clusterUtils dojo/i18n!./nls/Unique dojo/text!./templates/Unique.html ./ColorPicker ./ColorRampPicker dijit/form/HorizontalSlider".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B){return g([b,h,n],{templateString:v,nls:w,baseClass:"uniqueWidget",paramName:"uniqueColorParam",constructor:function(a){m.mixin(this,a||{})},postMixInProperties:function(){this.infos=this.app.mapManager.getPowerBILayer().renderer.infos},startup:function(){this.inherited(arguments);setTimeout(m.hitch(this,function(){this.set("table",this.infos)}),0)},getAvailableSchemes:function(){var a=this.app.mapManager.getPowerBILayer();return s.getTypedColorSchemes(a.geometryType)},
getCurrentScheme:function(){var a=this.app.mapManager.getPowerBILayer();return e.getCurrentUniqueScheme(a)},isNotDefault:function(){var b=this.app.mapManager.getPowerBILayer(),c=s.getTypedColorSchemes(b.geometryType).primaryScheme,b=a.map(b.renderer.infos.slice(0,12),function(a){return a.symbol.color}),c=c.colors;return c.length!==b.length?!0:f.compareColorStops(c,b)?!1:!0},_revertToDefault:function(){this.inherited(arguments);var a=p.origin.renderers.uniqueColorParam.scheme;this.emit("schemeChanged",
a);this.colorRamp.set("selected",{colors:a.colors,scheme:a},!1);this.colorRamp._rampClearSelectCss()},_registerStylerChangeHandlers:function(){this.own(d(this.colorRamp,"color-ramp-change",m.hitch(this,function(a){this.app.mapManager.getPowerBILayer().renderer.sizeInfo?m.mixin(p.sizeunique.renderers.uniqueColorParam,{scheme:a.scheme}):m.mixin(p.unique.renderers.uniqueColorParam,{scheme:a.scheme});this.emit("schemeChanged",a.scheme);this._setEditState(!0)})),d(this.app.mapManager.getPowerBILayer(),
"update-end",m.hitch(this,function(a){this.infos=a.target.renderer.infos;this.set("table",this.infos)})))},_setTableAttr:function(b){c.empty(this.colorTable);var f=c.create("table",{},this.colorTable),g=0,h=this.app.mapManager.getPowerBILayer();a.forEach(b,function(n){var u=c.create("tr",{},f);c.create("td",{"class":"titleTd",innerHTML:n.value},u);if(!h.uniqueValueInfos){var t={},v=h.renderer.attributeField;a.forEach(b,function(a){t[a.value]=0});a.forEach(h.graphics,function(a){(a=a.attributes[v])&&
(t[a]+=1)});h.uniqueValueInfos=[];for(var w in t)h.uniqueValueInfos.push({value:w,count:t[w]})}w=0;var B=a.filter(h.uniqueValueInfos,function(a){return a.value===n.value})[0];B&&(w=B.count);c.create("td",{"class":"countTd",innerHTML:w},u);u=c.create("td",{"class":"colorPickerTd"},u);w=new x({color:n.symbol.getFill(),showTitle:!1,colorPickerId:"colorPicker_"+g});g++;w.placeAt(u);this.own(d(w,"colorChanged",m.hitch(this,function(c){n.symbol.setColor(c);m.mixin(p[e.getCurrentRendererType(h)].renderers.uniqueColorParam,
{infos:b});c=a.map(b.slice(0,12),function(a){return a.symbol.color});var d=s.getTypedColorSchemes(h.geometryType);this.colorRamp.set("selected",{colors:c,scheme:m.mixin(m.clone(d.primaryScheme),{colors:c})},!1);this.emit("uniqueValueInfoChanged",b);this._setEditState(!0)})))},this)}})})},"esriPBI/widgets/SymbolStyle/mixins/_ColorRampMixin":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(g,m){return g(null,{getAvailableSchemes:function(){throw Error("getAvailableSchemes() function is not implemented");
},getCurrentScheme:function(){throw Error("getCurrentScheme() function is not implemented");},startup:function(){this.inherited(arguments);this.setColorRamp()},setColorRamp:function(){this.colorRamp&&(this.colorRamp.set("schemes",this.getAvailableSchemes(),!1),this.colorRampTimer=setTimeout(m.hitch(this,function(){var a=this.getCurrentScheme();a&&this.colorRamp.set("selected",a,!1)}),0))},destroy:function(){clearTimeout(this.colorRampTimer);this.inherited(arguments)}})})},"esriPBI/widgets/SymbolStyle/ColorRampPicker":function(){define("esri/kernel esri/dijit/_EventedWidget esri/dijit/_Tooltip esri/dijit/SymbolStyler/_DelayedUpdate esri/dijit/SymbolStyler/colorRampUtil esri/dijit/SymbolStyler/schemeUtil dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/a11yclick dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style dojo/dom-geometry dojo/has dojo/on dojo/query dojo/i18n!./nls/Color dojox/gfx dojo/window dojo/text!./templates/ColorRampPicker.html ./utils/colorUtils dojo/NodeList-dom dijit/form/Button".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J){return p("esriPBI.widgets.SymbolStyle.ColorRampPicker",[m,h,n,b,a],{baseClass:"esriColorRampPicker",templateString:H,labels:C,css:{item:"esriItem",selected:"esriSelected",container:"esriContainer",container2:"esriContainer2",list:"esriList",preview:"esriPreview",flipper:"esriFlipper",viewport:"esriViewport",previewholder:"esriPreviewHolder",button:"esriPreviewButton",rampbase:"esriRampBase"},schemes:null,selected:null,numStops:0,_schemesChanged:!1,
_selectedChanged:!1,_numStopsChanged:!1,_orientationChanged:!1,_commitPropsTrigger:null,_colorRampSurfaces:null,_previewRampSurface:null,_rampsAndSchemes:null,rampListContainer:null,constructor:function(a){this._colorRampSurfaces=[];this._commitPropsTrigger=this.createUpdateTrigger(this._commitProperties,this)},_commitProperties:function(){var a,b;if(this._schemesChanged||this._numStopsChanged)this._numStopsChanged=this._schemesChanged=!1,a=c.getColorRampsWithSchemes(this.schemes,this.numStops),b=
this._hasStops(),this._rampsAndSchemes=a,this.dap_colorRampPicker&&t.empty(this.dap_colorRampPicker),this._colorRampSurfaces=[],e.forEach(a,function(a){this._createColorRampItem({colors:a.colors,hasStops:b})},this),this._renderSuggestions();this._selectedChanged&&(this._selectedChanged=!1,this._renderSelected());this._orientationChanged&&(this._orientationChanged=!1,this._renderSelected(),this._renderSuggestions());this.selected||this.set("selected",this._rampsAndSchemes[0])},_hasStops:function(){return 0<
this.numStops},_createColorRampItem:function(a){var b=a.colors;a=a.numClasses;var c=t.create("div",{className:this.css.item,tabIndex:0},this.dap_colorRampPicker),e=w.get(c,"height"),f=w.get(c,"width"),b=d.createColorRamp({node:c,width:f,height:e,colors:b,numClasses:a});this._colorRampSurfaces.push(b)},_renderSuggestions:function(){var a=this._colorRampSurfaces,b=this._rampsAndSchemes,c=this._hasStops();e.forEach(a,function(a,e){d.updateColorRamp({ramp:a,colors:b[e].colors,hasStops:c})})},_renderSelected:function(){var a=
this.selected.colors,b=this.dap_previewRamp,c=w.get(b,"height"),e=w.get(b,"width"),f=this._hasStops();this._previewRampSurface?d.updateColorRamp({ramp:this._previewRampSurface,colors:a,hasStops:f}):this._previewRampSurface=this.createColorRampHoriz({node:b,height:c,width:e,colors:a,hasStops:f})},getStyle:function(){return this.get("selected")},_setSchemesAttr:function(a){this._schemesChanged=!0;this._set("schemes",c.cloneScheme(a));this._commitPropsTrigger()},_getSelectedAttr:function(){var a=this.selected,
b={colors:c._createColors(a.colors)};a.scheme&&(b.scheme=c.cloneScheme(a.scheme));return b},_setSelectedAttr:function(a,b){s.isArray(a)&&(a={colors:a});this._selectedChanged=!0;this._set("selected",a);if(this._rampsAndSchemes){for(var c=-1,d=0;d<this._rampsAndSchemes.length;d++)if(this._rampsAndSchemes[d].scheme.id&&this._rampsAndSchemes[d].scheme.id===a.scheme.id||J.compareColorStops(this._rampsAndSchemes[d].colors,a.colors)||J.compareColorStops(this._rampsAndSchemes[d].colors,s.clone(a.colors).reverse())){c=
d;break}var d=this.css.selected,e="."+this.css.item;A(e,this.dap_colorRampPicker).removeClass(d);-1<c&&u.add(A(e,this.dap_colorRampPicker)[c],d)}this._commitPropsTrigger();!1!==b&&this.emit("color-ramp-change",this.get("selected"))},_getSuggestions:function(){return e.map(this._rampsAndSchemes,function(a){return a.colors})},_setNumStopsAttr:function(a){this._numStopsChanged=!0;this._set("numStops",0<a?a:0);this._commitPropsTrigger()},postCreate:function(){this.inherited(arguments);this._addHandlers();
this.createTooltips([{node:this.dap_colorFlipper,label:this.labels.flipColorsTooltip},{node:this.dap_colorRampPicker,label:this.labels.selectRampTooltip},{node:this.previewHolderButton,label:this.labels.selectRampTooltip}])},_addHandlers:function(){this.own(B(this.dap_colorRampPicker,B.selector("."+this.css.item,f),s.partial(this._rampClickHandler,this)));this.own(B(this.dap_colorFlipper,f,s.hitch(this,function(){this.flipColors()})));this.own(B(this.previewHolderButton,"click",s.hitch(this,function(){this.toggleList()})))},
_rampClickHandler:function(a){var b=a.css.selected,c="."+a.css.item,d=A("."+a.css.item,a.dap_colorRampPicker).indexOf(this);A(c,a.dap_colorRampPicker).removeClass(b);u.add(this,b);a.set("selected",a._rampsAndSchemes[d]);a.hideList()},_rampClearSelectCss:function(){var a=this.css.selected,b="."+this.css.item;A(b,this.dap_colorRampPicker).removeClass(a);u.add(A(b,this.dap_colorRampPicker)[0],a)},flipColors:function(){var a=this._rampsAndSchemes,b=this.selected;-1===e.indexOf(this._getSuggestions(),
b.colors)&&b.colors.reverse();e.forEach(a,function(a){c.flipColors(a.scheme)});this._orientationChanged=!0;this.set("selected",b);this._commitPropsTrigger()},createColorRampHoriz:function(a){var b=a.node,c=a.width,e=a.height;a=d._stopsFromColors(a);b=z.createSurface(b,c,e);return b=b.createRect(b.getDimensions()).setFill({type:"linear",x1:0,y1:0,x2:c,y2:0,colors:a})},toggleList:function(a){if(u.contains(this.rampListContainer,"rampListHidden")){var b=document.getElementById("previewHolder");v.position(this.rampListContainer);
a=6<this._colorRampSurfaces.length?220:110;var b=this.findPos(b),c=window.innerHeight,d=v.position(this.domNode),c=c-(d.y+28),d=document.getElementById("rampListBox");document.getElementById("dap_colorRampPicker");d.style.top=c>a?b[1]-44+"px":b[1]-72-a+"px";u.replace(this.rampListContainer,"rampListShown","rampListHidden");F.scrollIntoView(this.rampListContainer)}else this.hideList()},findPos:function(a){var b=0,c=0;if(a.offsetParent){b=a.offsetLeft;for(c=a.offsetTop;a=a.offsetParent;)b+=a.offsetLeft,
c+=a.offsetTop}return[b,c]},hideList:function(){u.replace(this.rampListContainer,"rampListHidden","rampListShown")},destroy:function(){this.inherited(arguments);e.forEach(this._colorRampSurfaces,function(a){a.destroy()});this._previewRampSurface&&this._previewRampSurface.destroy()}})})},"esri/dijit/_Tooltip":function(){define(["dijit/Tooltip","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom"],function(g,m,a,b,d){return a(null,{declaredClass:"esri.dijit._Tooltip",_tooltips:null,
constructor:function(){this._tooltips=[]},startup:function(){this.inherited(arguments);this._started||m.forEach(this._tooltips,function(a){a.startup()})},destroy:function(){this.inherited(arguments);m.forEach(this._tooltips,function(a){a.destroy()});this._tooltips=null},createTooltips:function(a){m.forEach(a,function(a){this.createTooltip(a.node,a.label)},this)},createTooltip:function(a,d){var m=this._getConnectId(a);m&&(m="object"===typeof d?b.mixin({},d,{connectId:m}):{connectId:m,label:d},m=new g(m),
this._started&&m.startup(),this._tooltips.push(m))},_getConnectId:function(a){var d,g;if(a){if(b.isArray(a)){if(d=[],m.forEach(a,function(a){(g=this._getNode(a))&&d.push(g)}),0===d.length)return}else if(d=this._getNode(a),!d)return;return d}},_getNode:function(a){return d.byId(a.domNode||a)},findTooltip:function(a){var d=this._getNode(a),g,f,e;if(a){a=this._tooltips;g=a.length;for(var p=0;p<g;p++)if(f=a[p],e=b.isArray(f.connectId)?-1<m.indexOf(f.connectId,d):f.connectId===d)return f}}})})},"esri/dijit/SymbolStyler/_DelayedUpdate":function(){define(["dojo/_base/declare"],
function(g){return g(null,{declaredClass:"esri.dijit._DelayedUpdate",createUpdateTrigger:function(g,a){var b=-1;return function(){-1<b||(b=setTimeout(function(){b=-1;g.call(a)},0))}}})})},"esri/dijit/SymbolStyler/colorRampUtil":function(){define(["dojo/_base/array","dojox/gfx"],function(g,m){var a={createColorRamp:function(b){var d=b.node,c=b.width,g=b.height;b=a._stopsFromColors(b);d=m.createSurface(d,c,g);return d=d.createRect(d.getDimensions()).setFill({type:"linear",x1:0,y1:0,x2:0,y2:g,colors:b})},
updateColorRamp:function(b){var d=b.ramp,c=d.getFill();c.colors=a._stopsFromColors(b);d.setFill(c);return d},_stopsFromColors:function(a){var d=a.colors;a=a.hasStops;var c=d.length,g=a?1/c:1/(c-1),m=[],f=d[0],e;if("object"===typeof f&&f.hasOwnProperty("offset")&&f.hasOwnProperty("color"))return d;for(var p=0;p<c;p++)e=p*g,f=d[c-1-p],m.push({offset:e,color:f}),a&&(e=(p+1)*g,m.push({offset:e,color:f}));return m}};return a})},"esri/dijit/SymbolStyler/schemeUtil":function(){define(["../../Color","dojo/_base/array",
"dojo/_base/lang"],function(g,m,a){var b={getColorRamps:function(a,c){var g=b.getColorRampsWithSchemes(a,c);return m.map(g,function(a){return a.colors})},getColorRampsWithSchemes:function(a,c){var g=b._unify(a),n=[];m.forEach(g,function(a){var d=!!a.colorsForClassBreaks,d=0<c?d?b._maxSupportedClassBreakColors(a.colorsForClassBreaks,c):a.colors:a.colors;n.push({colors:d,scheme:a})});return n},_unify:function(a){return[a.primaryScheme].concat(a.secondarySchemes)},_maxSupportedClassBreakColors:function(a,
b){for(var g,m=a.length,f,e=0;e<m;e++){f=a[e];if(b<f.numClasses)break;g=f.colors}return g},getFillColors:function(a){a=b._unify(a);var c=[],g;m.forEach(a,function(a){g=a.marker||a;g.colors?c=c.concat(g.colors):c.push(g.color)});return b._removeDuplicates(c)},_removeDuplicates:function(a){var b={},g;return m.filter(a,function(a){(g=!b[a.toHex()])&&(b[a.toHex()]=1);return g})},getOutlineColors:function(a){a=b._unify(a);var c=[],g;m.forEach(a,function(a){g=a.marker||a;g.outline?c.push(g.outline.color):
g.colors?c=c.concat(g.colors):c.push(g.color)});return b._removeDuplicates(c)},flipColors:function(a){a.colors&&a.colors.reverse();a.colorsForClassBreaks&&m.forEach(a.colorsForClassBreaks,function(a){1<a.numClasses&&a.colors.reverse()})},cloneScheme:function(d){var c;d&&(c=a.mixin({},d),c.colors=b._createColors(c.colors),c.colorsForClassBreaks=m.map(c.colorsForClassBreaks,function(a){return{numClasses:a.numClasses,colors:b._createColors(a.colors)}}),c.noDataColor&&(c.noDataColor=new g(c.noDataColor)),
c.outline&&(c.outline={color:c.outline.color&&new g(c.outline.color),width:c.outline.width}));return c},_createColors:function(a,b){return m.map(a,function(a){a=new g(a);null!=b&&(a.a=b);return a})}};return b})},"esriPBI/widgets/SymbolStyle/configs/_configHeatmap":function(){define(["dojo/_base/lang","dojo/on","esriPBI/utils/smartMappingUtils","../HeatMap"],function(g,m,a,b){return{_configHeatmap:function(d){var c=this.__config(b,this.heatmapDetails),h=d.mapManager.getPowerBILayer();c.own(m(c,"heatmapInfoChanged",
g.hitch(this,function(b){var c=h.opacity;a.setHeatmapRenderer(h,b).then(g.hitch(this,function(){0===c&&h.setOpacity(1E-4);this._onRendererChanged()}))})))}}})},"esriPBI/widgets/SymbolStyle/HeatMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojox/mvc/Templated dojo/on ./_Styler ./mixins/_ColorRampMixin esriPBI/utils/smartMappingUtils esriPBI/defaults ./utils/colorUtils ./utils/rendererUtils dojo/i18n!./nls/HeatMap dojo/text!./templates/HeatMap.html dijit/form/HorizontalSlider esriPBI/widgets/SymbolStyle/ColorRampPicker esriPBI/widgets/SymbolStyle/ValuePicker".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u){return g([b,c,h],{templateString:u,nls:s,baseClass:"heatmapWidget",paramName:"heapMapParam",constructor:function(a){m.mixin(this,a||{})},postMixInProperties:function(){this.blurRadius=this.app.mapManager.getPowerBILayer().renderer.blurRadius;this.intermediateChanges=this._canIntermediateChanges()},getAvailableSchemes:function(){return n.getHeatmapColorSchemes()},getCurrentScheme:function(){var a=this.app.mapManager.getPowerBILayer();return p.getCurrentHeatmapScheme(a)},
isNotDefault:function(){var b=this.app.mapManager.getPowerBILayer();if(b.renderer.blurRadius!==f.origin.renderers.heapMapParam.blurRadius)return!0;var c=f.origin.renderers.heapMapParam.scheme.colors,b=a.map(b.renderer.colorStops.slice(3),function(a){return a.color});return e.compareColorStops(c,b)?!1:!0},_revertToDefault:function(){this.inherited(arguments);this.heatmapInfo=m.clone(f.origin.renderers.heapMapParam);this.emit("heatmapInfoChanged",this.heatmapInfo);this.colorRamp.set("schemes",n.getHeatmapColorSchemes(),
!1);this.colorRamp.set("selected",this.heatmapInfo.scheme,!1);this.blurRadiusSlider.setSilently("value",this.heatmapInfo.blurRadius);this.colorRamp._rampClearSelectCss()},_registerStylerChangeHandlers:function(){this.own(d(this.blurRadiusSlider,"change",m.hitch(this,function(a){this.heatmapInfo=m.mixin(f.heatmap.renderers.heapMapParam,{blurRadius:a});this.emit("heatmapInfoChanged",this.heatmapInfo);this._setEditState(!0)})),d(this.colorRamp,"color-ramp-change",m.hitch(this,function(a){this.heatmapInfo=
m.mixin(f.heatmap.renderers.heapMapParam,{scheme:a.scheme});this.emit("heatmapInfoChanged",this.heatmapInfo);this._setEditState(!0)})))}})})},"esriPBI/widgets/SymbolStyle/configs/_configCluster":function(){define("dojo/_base/lang dojo/on esriPBI/utils/smartMappingUtils esriPBI/utils/clusterPieChartUtils ../Cluster ../Unique".split(" "),function(g,m,a,b,d,c){return{_configCluster:function(h){var n=this.__config(d,this.clusterDetails),f=h.mapManager.getPowerBILayer();n.own(m(n,"clusterInfoChanged",
g.hitch(this,function(b){a.setClusteringRenderer(f,b);f.refresh();this._onRendererChanged()})));if(b.canUsePieChartClustering(f.renderer)){h=this.__config(c,this.uniqueDetails);var e;h.own(m(h,"uniqueValueInfoChanged",g.hitch(this,function(b){a.setColorRenderer(f,{infos:b,scheme:e},f.renderer.defaultSymbol).then(g.hitch(this,this._onRendererChanged))})),m(h,"schemeChanged",g.hitch(this,function(b){e=b;a.setColorRenderer(f,{infos:null,scheme:e},f.renderer.defaultSymbol).then(g.hitch(this,this._onRendererChanged))})))}}}})},
"esriPBI/widgets/SymbolStyle/Cluster":function(){define("dojo/_base/declare dojo/_base/lang dojox/mvc/Templated dojo/on dojo/dom-class ./_Styler ./utils/rendererUtils esri/Color esriPBI/defaults esriPBI/utils/smartMappingUtils esriPBI/utils/clusterUtils esriPBI/utils/clusterPieChartUtils dojo/i18n!./nls/Cluster dojo/text!./templates/Cluster.html ./ColorPicker dijit/form/NumberSpinner".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t){return g([a,c],{templateString:t,nls:u,baseClass:"clusterWidget",
paramName:"clusteringParam",ignoreNumberSpinnerChange:!1,constructor:function(a){m.mixin(this,a||{})},postMixInProperties:function(){this.clustering=p.get(this.app.mapManager.getPowerBILayer());this.bkColor=(new n(this.clustering.backgroundColor)).toHex();this.textColor=(new n(this.clustering.foregroundColor)).toHex();this._radiusChange=m.hitch(this,function(a){a!==f.origin.renderers.clusteringParam.radius&&this._setEditState(!0);this.ignoreNumberSpinnerChange?this.ignoreNumberSpinnerChange=!1:!isNaN(a)&&
this.radiusOption.validate()&&(this.clustering=m.mixin(f.clustering.renderers.clusteringParam,{radius:a}),this.emit("clusterInfoChanged",this.clustering))})},postCreate:function(){s.canUsePieChartClustering(this.app.mapManager.getPowerBILayer().renderer)&&d.add(this.bkColorOption.domNode,"dijitHidden");this.inherited(arguments)},isNotDefault:function(){return this.clustering.radius!==f.origin.renderers.clusteringParam.radius?!0:(new n(this.clustering.backgroundColor)).toHex()!==(new n(f.origin.renderers.clusteringParam.backgroundColor)).toHex()?
!0:(new n(this.clustering.foregroundColor)).toHex()!==(new n(f.origin.renderers.clusteringParam.foregroundColor)).toHex()?!0:!1},_revertToDefault:function(){this.clustering=m.clone(f.origin.renderers.clusteringParam);this.emit("clusterInfoChanged",this.clustering);this.bkColorOption.set("color",f.origin.renderers.clusteringParam.backgroundColor,!1);this.textColorOption.set("color",f.origin.renderers.clusteringParam.foregroundColor,!1);this.ignoreNumberSpinnerChange=!0;this.radiusOption.set("value",
f.origin.renderers.clusteringParam.radius);this.inherited(arguments)},_registerStylerChangeHandlers:function(){this.own(b(this.bkColorOption,"colorChanged",m.hitch(this,function(a){this.clustering=m.mixin(f.clustering.renderers.clusteringParam,{backgroundColor:a.toRgba()});this.emit("clusterInfoChanged",this.clustering);this._setEditState(!0)})),b(this.textColorOption,"colorChanged",m.hitch(this,function(a){this.clustering=m.mixin(f.clustering.renderers.clusteringParam,{foregroundColor:a.toRgba()});
this.emit("clusterInfoChanged",this.clustering);this._setEditState(!0)})))}})})},"esriPBI/widgets/SymbolStyle/configs/_configColor":function(){define("dojo/_base/lang dojo/on dojo/dom-style esriPBI/utils/smartMappingUtils ../Simple ../Color".split(" "),function(g,m,a,b,d,c){return{_configColor:function(h){var n=this.__config(c,this.colorDetails),f=this.__config(d,this.simpleDetails);a.set(f.fillColorOption.domNode,"display","none");a.set(f.fillTransparencyOption.domNode,"display","none");n.own(m(n,
"colorInfoChanged",g.hitch(this,function(a){var c=h.mapManager.getPowerBILayer();b.setColorRenderer(c,a,c.renderer.defaultSymbol).then(g.hitch(this,this._onRendererChanged))})));f.own(m(f,"symbolChanged",g.hitch(this,function(a){var c=h.mapManager.getPowerBILayer();b.setColorRenderer(c,c.renderer.colorInfo,a).then(g.hitch(this,this._onRendererChanged))})))}}})},"esriPBI/widgets/SymbolStyle/Color":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojox/mvc/Templated dojo/on ./_Styler ./mixins/_ColorRampMixin ./utils/rendererUtils esriPBI/utils/smartMappingUtils esriPBI/defaults ./utils/colorUtils esri/dijit/SymbolStyler/schemeUtil dojo/i18n!./nls/Color dojo/text!./templates/Color.html ./ColorRampPicker dijit/form/HorizontalSlider ./Classification ./ColorTheme".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w){return g([b,c,h],{templateString:t,nls:u,baseClass:"colorWidget",paramName:"colorParam",constructor:function(a){m.mixin(this,a||{})},postMixInProperties:function(){if(this.colorInfo=this.app.mapManager.getPowerBILayer().renderer.colorInfo)this.classificationMethod=this.colorInfo.classificationMethod,this.numClasses=this.colorInfo.numClasses,this.theme=this.colorInfo.theme},getAvailableSchemes:function(){var a=this.app.mapManager.getPowerBILayer();return f.getColorSchemes(this.theme,
a.geometryType)},getCurrentScheme:function(){var a=this.app.mapManager.getPowerBILayer();return n.getCurrentColorScheme(a,this.colorRamp._rampsAndSchemes)},isNotDefault:function(){var b=this.app.mapManager.getPowerBILayer();if(this.colorInfo.numClasses!==e.origin.renderers.colorParam.numClasses||this.colorInfo.classificationMethod!==e.origin.renderers.colorParam.classificationMethod||this.colorInfo.theme!==e.origin.renderers.colorParam.theme)return!0;var c=f.getColorSchemes(e.origin.renderers.colorParam.theme,
b.geometryType).primaryScheme,d=a.map(b.renderer.colorInfo.stops,function(a){return a.color}),b=c.colorsForClassBreaks[b.renderer.colorInfo.stops.length-1].colors;return b.length!==d.length?!0:p.compareColorStops(b,d)?!1:!0},_revertToDefault:function(){this.inherited(arguments);var a=this.app.mapManager.getPowerBILayer();this.colorInfo=m.clone(e.origin.renderers.colorParam);this.classificationOption.set("method",this.colorInfo.classificationMethod,!1);this.classificationOption.ignoreNumberSpinnerChange=
!0;this.classificationOption.set("numClass",this.colorInfo.numClasses,!1);this.colorThemeOption.set("value",this.colorInfo.theme,!1);a=f.getColorSchemes(this.colorInfo.theme,a.geometryType);this.colorRamp.set("schemes",a);setTimeout(m.hitch(this,function(){this.colorRamp.set("selected",this.colorRamp._rampsAndSchemes[0],!1);this.colorInfo.scheme=this.colorRamp._rampsAndSchemes[0].scheme;this.emit("colorInfoChanged",this.colorInfo)}),0);this.colorRamp._rampClearSelectCss()},_registerStylerChangeHandlers:function(){this.own(d(this.classificationOption,
"methodChanged",m.hitch(this,function(a,b){var c=this.app.mapManager.getPowerBILayer(),c=e[n.getCurrentRendererType(c)].renderers.colorParam;this.colorInfo=m.mixin(c,{classificationMethod:a,numClasses:b});this.emit("colorInfoChanged",this.colorInfo);this._setEditState(!0)})),d(this.classificationOption,"value-not-default",m.hitch(this,function(){this._setEditState(!0)})),d(this.colorThemeOption,"themeChanged",m.hitch(this,function(a){var b=this.app.mapManager.getPowerBILayer(),c=e[n.getCurrentRendererType(b)].renderers.colorParam,
b=f.getColorSchemes(a,b.geometryType);this.colorRamp.set("schemes",b);setTimeout(m.hitch(this,function(){this.colorRamp.set("selected",this.colorRamp._rampsAndSchemes[0]);this.colorInfo=m.mixin(c,{theme:a,scheme:this.colorRamp._rampsAndSchemes[0]});this.emit("colorInfoChanged",this.colorInfo)}),0);this._setEditState(!0)})),d(this.colorRamp,"color-ramp-change",m.hitch(this,function(a){var b=this.app.mapManager.getPowerBILayer(),b=e[n.getCurrentRendererType(b)].renderers.colorParam;this.colorInfo=m.mixin(b,
{scheme:a.scheme});this.emit("colorInfoChanged",this.colorInfo);this._setEditState(!0)})))}})})},"esriPBI/widgets/SymbolStyle/ColorTheme":function(){define("dojo/_base/declare dojo/_base/lang dojox/mvc/Templated dojo/Evented dojo/i18n!./nls/ColorTheme dojo/store/Memory dojo/text!./templates/ColorTheme.html dijit/form/FilteringSelect".split(" "),function(g,m,a,b,d,c,h){function n(a){switch(a){case "high-to-low":return d.highToLow;case "above-and-below":return d.aboveAndBelow;case "centered-on":return d.centered;
case "extremes":return d.extremes;default:return d.highToLow}}return g([a,b],{templateString:h,nls:d,baseClass:"colorTheme",constructor:function(a){m.mixin(this,a||{})},postMixInProperties:function(){this.colorTheme=this.colorTheme||"high-to-low"},startup:function(){this.inherited(arguments);this._fillColorThemes()},_onColorThemeChange:function(a){this.colorTheme=this._getTheme();this.emit("themeChanged",this.colorTheme)},_setValueAttr:function(a,b){this.colorTheme=a;this._rendererColorTheme.set("value",
n(this.colorTheme),!1);!1!==b&&this.emit("themeChanged",this.colorTheme)},_fillColorThemes:function(){var a=function(a,b,c,d){return"\x3chtml\x3e\x3cbody\x3e\x3ctable style\x3d'width: 100%'\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd\x3e\x3cdiv class\x3d'colorThemeInner'\x3e\x3cdiv class\x3d'"+c+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'"+d+"_themeTitle'\x3e"+a+"\x3c/div\x3e\x3cdiv class\x3d'"+d+"_themeMsg'\x3e"+b+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/body\x3e\x3c/html\x3e"};
this.themesData=[];this.themesData.push({name:d.highToLow,label:a(d.highToLow,d.highToLowMsg,this.baseClass+"_highToLowIcon",this.baseClass)});this.themesData.push({name:d.aboveAndBelow,label:a(d.aboveAndBelow,d.aboveAndBelowMsg,this.baseClass+"_aboveAndBelowIcon",this.baseClass)});this.themesData.push({name:d.centered,label:a(d.centered,d.centeredMsg,this.baseClass+"_centeredIcon",this.baseClass)});this.themesStore=new c({data:this.themesData,idProperty:"name"});this._rendererColorTheme.set("store",
this.themesStore);this._rendererColorTheme.set("labelAttr","label");this._rendererColorTheme.set("labelType","html");this._rendererColorTheme.set("value",n(this.colorTheme),!1);this._rendererColorTheme.textbox.readOnly=!0;this._rendererColorTheme.textbox.onclick=m.hitch(this,function(){this._rendererColorTheme.loadDropDown()})},_getTheme:function(){switch(this._rendererColorTheme?this._rendererColorTheme.get("value"):"high-to-low"){case d.highToLow:return"high-to-low";case d.aboveAndBelow:return"above-and-below";
case d.centered:return"centered-on";case d.extremes:return"extremes";default:return"high-to-low"}}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(g,m,a,b,d){return g("dijit.form.FilteringSelect",[b,d],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||
this.inherited(arguments)},_callbackSetLabel:function(a,b,d,f){b&&b[this.searchAttr]!==this._lastQuery||!b&&a.length&&this.store.getIdentity(a[0])!=this._lastQuery||(a.length?this.set("item",a[0],f):this.set("value","",f||void 0===f&&!this.focused,this.textbox.value,null))},_openResultList:function(a,b,d){b[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},
_setValueAttr:function(b,d,g,f){this._onChangeActive||(d=null);if(void 0===f){if(null===b||""===b)if(b="",!m.isString(g)){this._setDisplayedValueAttr(g||"",d);return}var e=this;this._lastQuery=b;a(this.store.get(b),function(a){e._callbackSetLabel(a?[a]:[],void 0,void 0,d)})}else this.valueNode.value=b,this.inherited(arguments,[b,d,g,f])},_setItemAttr:function(a,b,d){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(a){return a.replace(/([\\\*\?])/g,
"\\$1")},_setDisplayedValueAttr:function(b,d){null==b&&(b="");if(!this._created){if(!("displayedValue"in this.params))return;d=!1}if(this.store){this.closeDropDown();var g=m.clone(this.query),f=this._getDisplayQueryString(b),e;this.store._oldAPI?e=f:(e=this._patternToRegExp(f),e.toString=function(){return f});this._lastQuery=g[this.searchAttr]=e;this._lastDisplayedValue=this.textbox.value=b;this._set("displayedValue",b);var p=this,s={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};m.mixin(s,this.fetchProperties);
this._fetchHandle=this.store.query(g,s);a(this._fetchHandle,function(a){p._fetchHandle=null;p._callbackSetLabel(a||[],g,s,d)},function(a){p._fetchHandle=null})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/kernel dojo/_base/lang dojo/store/util/QueryResults ./_AutoCompleterMixin ./_ComboBoxMenu ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),function(g,m,a,b,d,
c,h,n,f){return g("dijit.form.ComboBoxMixin",[n,c],{dropDownClass:h,hasDownArrow:!0,templateString:f,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(a){this._set("hasDownArrow",a);this._buttonNode.style.display=a?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(a){a.get||b.mixin(a,{_oldAPI:!0,get:function(a){var b=new m;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},
onError:function(a){b.reject(a)}});return b.promise},query:function(a,c){var e=new m(function(){f.abort&&f.abort()});e.total=new m;var f=this.fetch(b.mixin({query:a,onBegin:function(a){e.total.resolve(a)},onComplete:function(a){e.resolve(a)},onError:function(a){e.reject(a)}},c));return d(e)}});this._set("store",a)},postMixInProperties:function(){var c=this.params.store||this.store;c&&this._setStoreAttr(c);this.inherited(arguments);if(!this.params.store&&this.store&&!this.store._oldAPI){var d=this.declaredClass;
b.mixin(this.store,{getValue:function(b,c){a.deprecated(d+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return b[c]},getLabel:function(b){a.deprecated(d+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return b.name},fetch:function(c){a.deprecated(d+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],b.hitch(this,function(a){(new a({objectStore:this})).fetch(c)}))}})}},
buildRendering:function(){this.inherited(arguments);this.focusNode.setAttribute("aria-autocomplete",this.autoComplete?"both":"list")}})})},"dijit/form/_AutoCompleterMixin":function(){define("dojo/aspect dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/query dojo/regexp dojo/sniff ./DataList ./_TextBoxMixin ./_SearchMixin".split(" "),function(g,m,a,b,d,c,h,n,f,e,p){m=m("dijit.form._AutoCompleterMixin",p,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",
maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var b=0;if("number"==typeof a.selectionStart)b=a.selectionStart;else if(n("ie")){var c=a.ownerDocument.selection.createRange().duplicate();a=a.createTextRange();c.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",c),b=String(a.text).replace(/\r/g,"").length}catch(d){}}return b},_setCaretPos:function(a,b){b=parseInt(b);e.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",
a?"true":"false")},_onKey:function(a){if(!(32<=a.charCode)){var c=a.charCode||a.keyCode;if(!(c==b.ALT||c==b.CTRL||c==b.META||c==b.SHIFT)){var d=this.dropDown,e=null;this._abortQuery();this.inherited(arguments);if(!a.altKey&&!a.ctrlKey&&!a.metaKey)switch(this._opened&&(e=d.getHighlightedOption()),c){case b.PAGE_DOWN:case b.DOWN_ARROW:case b.PAGE_UP:case b.UP_ARROW:this._opened&&this._announceOption(e);a.stopPropagation();a.preventDefault();break;case b.ENTER:if(e){if(e==d.nextButton){this._nextSearch(1);
a.stopPropagation();a.preventDefault();break}else if(e==d.previousButton){this._nextSearch(-1);a.stopPropagation();a.preventDefault();break}a.stopPropagation();a.preventDefault()}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case b.TAB:c=this.get("displayedValue");if(d&&(c==d._messages.previousMessage||c==d._messages.nextMessage))break;e&&this._selectOption(e);case b.ESCAPE:this._opened&&(this._lastQuery=null,this.closeDropDown())}}}},_autoCompleteText:function(a){var b=
this.focusNode;e.selectInputText(b,b.value.length);var c=this.ignoreCase?"toLowerCase":"substr";0==a[c](0).indexOf(this.focusNode.value[c](0))?(c=this.autoComplete?this._getCaretPos(b):b.value.length,c+1>b.value.length&&(b.value=a,e.selectInputText(b,c))):(b.value=a,e.selectInputText(b))},_openResultList:function(a,b,c){var e=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();!a.length&&0==c.start?this.closeDropDown():(this._nextSearch=this.dropDown.onPage=d.hitch(this,function(b){a.nextPage(-1!==
b);this.focus()}),this.dropDown.createOptions(a,c,d.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in c?(c.direction?this.dropDown.highlightFirstOption():c.direction||this.dropDown.highlightLastOption(),e&&this._announceOption(this.dropDown.getHighlightedOption())):this.autoComplete&&(!this._prev_key_backspace&&!/^[*]+$/.test(b[this.searchAttr].toString()))&&this._announceOption(this.dropDown.containerNode.firstChild.nextSibling))},_showResultList:function(){this.closeDropDown(!0);
this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;b&&(a==b._messages.previousMessage||a==b._messages.nextMessage)?this._setValueAttr(this._lastValueReported,!0):"undefined"==typeof this.item?
(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState());this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(a,b,c){var d="";a&&(c||(c=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),d=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c);this.set("value",d,b,c,a)},_announceOption:function(b){if(b){var c;if(b==this.dropDown.nextButton||b==this.dropDown.previousButton)c=
b.innerHTML,this.item=void 0,this.value="";else{var d=this.dropDown.items[b.getAttribute("item")];c=(this.store._oldAPI?this.store.getValue(d,this.searchAttr):d[this.searchAttr]).toString();this.set("item",d,!1,c)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",a.get(b,"id"));this._autoCompleteText(c)}},_selectOption:function(a){this.closeDropDown();a&&this._announceOption(a);this._setCaretPos(this.focusNode,this.focusNode.value.length);
this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup";this.dropDown=new (d.isString(this.dropDownClass)?d.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:d.hitch(this,this._selectOption),id:b,dir:this.dir,textDir:this.textDir})}this._lastInput=a;this.inherited(arguments)},
_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!this.store&&this.srcNodeRef&&(this.store=new f({},this.srcNodeRef),!("value"in this.params))){var a=this.item=this.store.fetchSelectedItem();if(a){var b=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(a,b):a[b]}}},postCreate:function(){var a=c('label[for\x3d"'+this.id+'"]');a.length&&(a[0].id||(a[0].id=this.id+"_label"),this.domNode.setAttribute("aria-labelledby",
a[0].id));this.inherited(arguments);g.after(this,"onSearch",d.hitch(this,"_openResultList"),!0)},_getMenuLabelFromItem:function(a){a=this.labelFunc(a,this.store);var b=this.labelType;"none"!=this.highlightMatch&&("text"==this.labelType&&this._lastInput)&&(a=this.doHighlight(a,this._lastInput),b="html");return{html:"html"==b,label:a}},doHighlight:function(a,b){var c=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),d=this.queryExpr.indexOf("${0}");b=h.escapeString(b);return this._escapeHtml(a.replace(RegExp((0==
d?"^":"")+"("+b+")"+(d==this.queryExpr.length-4?"$":""),c),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'\x3cspan class\x3d"dijitComboBoxHighlightMatch"\x3e$1\x3c/span\x3e')},_escapeHtml:function(a){return a=String(a).replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;")},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},
_setValueAttr:function(a,b,c,d){this._set("item",d||null);null==a&&(a="");this.inherited(arguments)}});n("dojo-bidi")&&m.extend({_setTextDirAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",a)}});return m})},"dijit/form/DataList":function(){define("dojo/_base/declare dojo/dom dojo/_base/lang dojo/query dojo/store/Memory ../registry".split(" "),function(g,m,a,b,d,c){function h(b){return{id:b.value,value:b.value,name:a.trim(b.innerText||b.textContent||"")}}return g("dijit.form.DataList",
d,{constructor:function(d,f){this.domNode=m.byId(f);a.mixin(this,d);this.id&&c.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:b("option",this.domNode).map(h)}])},destroy:function(){c.remove(this.id)},fetchSelectedItem:function(){var a=b("\x3e option[selected]",this.domNode)[0]||b("\x3e option",this.domNode)[0];return a&&h(a)}})})},"dijit/form/_SearchMixin":function(){define("dojo/_base/declare dojo/keys dojo/_base/lang dojo/query dojo/string dojo/when ../registry".split(" "),
function(g,m,a,b,d,c,h){return g("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(a){this._set("list",a)},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_patternToRegExp:function(a){return RegExp("^"+a.replace(/(\\.)|(\*)|(\?)|\W/g,function(a,b,c,d){return c?".*":d?".":b?b:"\\"+a})+"$",this.ignoreCase?"mi":"m")},_abortQuery:function(){this.searchTimer&&(this.searchTimer=this.searchTimer.remove());this._queryDeferHandle&&
(this._queryDeferHandle=this._queryDeferHandle.remove());this._fetchHandle&&(this._fetchHandle.abort&&(this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1),this._fetchHandle.cancel&&(this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1),this._fetchHandle=null)},_processInput:function(a){if(!this.disabled&&!this.readOnly){a=a.charOrCode;var b=!1;this._prev_key_backspace=!1;switch(a){case m.DELETE:case m.BACKSPACE:b=this._maskValidSubsetError=this._prev_key_backspace=
!0;break;default:b="string"==typeof a||229==a}if(b)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(b){this._abortQuery();var f=this,e=a.clone(this.query),g={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},h=d.substitute(this.queryExpr,[b.replace(/([\\\*\?])/g,"\\$1")]),m,t=function(){var a=f._fetchHandle=f.store.query(e,
g);!f.disabled&&!(f.readOnly||m!==f._lastQuery)&&c(a,function(b){f._fetchHandle=null;!f.disabled&&(!f.readOnly&&m===f._lastQuery)&&c(a.total,function(a){b.total=a;var c=f.pageSize;if(isNaN(c)||c>b.total)c=b.total;b.nextPage=function(a){g.direction=a=!1!==a;g.count=c;a?(g.start+=b.length,g.start>=b.total&&(g.count=0)):(g.start-=c,0>g.start&&(g.count=Math.max(c+g.start,0),g.start=0));0>=g.count?(b.length=0,f.onSearch(b,e,g)):t()};f.onSearch(b,e,g)})},function(a){f._fetchHandle=null})};a.mixin(g,this.fetchProperties);
this.store._oldAPI?m=h:(m=this._patternToRegExp(h),m.toString=function(){return h});this._lastQuery=e[this.searchAttr]=m;this._queryDeferHandle=this.defer(t,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var a=this.list;a&&(this.store=h.byId(a))}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare dojo/dom-class dojo/dom-style dojo/keys ../_WidgetBase ../_TemplatedMixin ./_ComboBoxMenuMixin ./_ListMouseMixin".split(" "),
function(g,m,a,b,d,c,h,n){return g("dijit.form._ComboBoxMenu",[d,c,n,h],{templateString:"\x3cdiv class\x3d'dijitReset dijitMenu' data-dojo-attach-point\x3d'containerNode' style\x3d'overflow: auto; overflow-x: hidden;' role\x3d'listbox'\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point\x3d'previousButton' role\x3d'option'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitMenuItem dijitMenuNextButton' data-dojo-attach-point\x3d'nextButton' role\x3d'option'\x3e\x3c/div\x3e\x3c/div\x3e",
baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);this.isLeftToRight()||(m.add(this.previousButton,"dijitMenuItemRtl"),m.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var a=this.ownerDocument.createElement("div");a.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");a.setAttribute("role","option");return a},onHover:function(a){m.add(a,"dijitMenuItemHover")},onUnhover:function(a){m.remove(a,
"dijitMenuItemHover")},onSelect:function(a){m.add(a,"dijitMenuItemSelected")},onDeselect:function(a){m.remove(a,"dijitMenuItemSelected")},_page:function(b){var c=0,d=this.domNode.scrollTop,g=a.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();c<g;){var h=this.getHighlightedOption();if(b){if(!h.previousSibling||"none"==h.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!h.nextSibling||"none"==h.nextSibling.style.display)break;this.selectNextNode()}h=
this.domNode.scrollTop;c+=(h-d)*(b?-1:1);d=h}},handleKey:function(a){switch(a.keyCode){case b.DOWN_ARROW:return this.selectNextNode(),!1;case b.PAGE_DOWN:return this._page(!1),!1;case b.UP_ARROW:return this.selectPreviousNode(),!1;case b.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/has dojo/i18n dojo/i18n!./nls/ComboBox".split(" "),function(g,m,a,b,d){var c=m("dijit.form._ComboBoxMenuMixin"+
(b("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=d.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(a){this._set("value",a);this.onChange(a)},onClick:function(a){if(a==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(a==
this.nextButton)this._setSelectedAttr(null),this.onPage(1);else this.onChange(a)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(a,b){var c=this._createMenuItem(),d=b(a);d.html?c.innerHTML=d.label:c.appendChild(c.ownerDocument.createTextNode(d.label));""==c.innerHTML&&(c.innerHTML="\x26#160;");return c},createOptions:function(b,c,d){this.items=b;this.previousButton.style.display=0==c.start?"none":"";a.set(this.previousButton,"id",this.id+
"_prev");g.forEach(b,function(b,c){var e=this._createOption(b,d);e.setAttribute("item",c);a.set(e,"id",this.id+c);this.nextButton.parentNode.insertBefore(e,this.nextButton)},this);var e=!1;b.total&&!b.total.then&&-1!=b.total?c.start+c.count<b.total?e=!0:c.start+c.count>b.total&&c.count==b.length&&(e=!0):c.count==b.length&&(e=!0);this.nextButton.style.display=e?"":"none";a.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var a=this.containerNode;2<a.childNodes.length;)a.removeChild(a.childNodes[a.childNodes.length-
2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});b("dojo-bidi")&&(c=m("dijit.form._ComboBoxMenuMixin",
c,{_createOption:function(){var a=this.inherited(arguments);this.applyTextDir(a);return a}}));return c})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(g,m,a,b){return g("dijit.form._ListMouseMixin",b,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=!0;this._listConnect("click","_onClick");this._listConnect("mousedown","_onMouseDown");this._listConnect("mouseup","_onMouseUp");this._listConnect("mouseover",
"_onMouseOver");this._listConnect("mouseout","_onMouseOut")},_onClick:function(a,b){this._setSelectedAttr(b,!1);this._deferredClick&&this._deferredClick.remove();this._deferredClick=this.defer(function(){this._deferredClick=null;this.onClick(b)})},_onMouseDown:function(a,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging=!0;this._setSelectedAttr(b,!1)},_onMouseUp:function(a,b){this._isDragging=!1;var g=this.selected,m=this._hoveredNode;g&&b==g?this.defer(function(){this._onClick(a,
g)}):m&&this.defer(function(){this._onClick(a,m)})},_onMouseOut:function(a,b){this._hoveredNode&&(this.onUnhover(this._hoveredNode),this._hoveredNode=null);this._isDragging&&(this._cancelDrag=(new Date).getTime()+1E3)},_onMouseOver:function(a,b){this._cancelDrag&&((new Date).getTime()>this._cancelDrag&&(this._isDragging=!1),this._cancelDrag=null);this._hoveredNode=b;this.onHover(b);this._isDragging&&this._setSelectedAttr(b,!1)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on",
"dojo/window"],function(g,m,a){return g("dijit.form._ListBase",null,{selected:null,_listConnect:function(a,d){var c=this;return c.own(m(c.containerNode,m.selector(function(a,b,c){return a.parentNode==c},a),function(a){c[d](a,this)}))},selectFirstNode:function(){for(var a=this.containerNode.firstChild;a&&"none"==a.style.display;)a=a.nextSibling;this._setSelectedAttr(a,!0)},selectLastNode:function(){for(var a=this.containerNode.lastChild;a&&"none"==a.style.display;)a=a.previousSibling;this._setSelectedAttr(a,
!0)},selectNextNode:function(){var a=this.selected;if(a){for(a=a.nextSibling;a&&"none"==a.style.display;)a=a.nextSibling;a?this._setSelectedAttr(a,!0):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var a=this.selected;if(a){for(a=a.previousSibling;a&&"none"==a.style.display;)a=a.previousSibling;a?this._setSelectedAttr(a,!0):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(b,d){if(this.selected!=b){var c=this.selected;if(c)this.onDeselect(c);
b&&(d&&a.scrollIntoView(b),this.onSelect(b));this._set("selected",b)}else if(b)this.onSelect(b)}})})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v){return g("dijit._HasDropDown",v,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,
dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){!this.disabled&&!this.readOnly&&("MSPointerDown"!=a.type&&"pointerdown"!=a.type&&a.preventDefault(),this.own(p.once(this.ownerDocument,s.release,e.hitch(this,"_onDropDownMouseUp"))),this.toggleDropDown())},_onDropDownMouseUp:function(a){var b=this.dropDown,e=!1;if(a&&this._opened){var f=c.position(this._buttonNode,!0);if(!(a.pageX>=f.x&&a.pageX<=f.x+f.w)||!(a.pageY>=
f.y&&a.pageY<=f.y+f.h)){for(f=a.target;f&&!e;)d.contains(f,"dijitPopup")?e=!0:f=f.parentNode;if(e){f=a.target;if(b.onItemClick){for(var g;f&&!(g=u.byNode(f));)f=f.parentNode;if(g&&g.onClick&&g.getParent)g.getParent().onItemClick(g,a)}return}}}if(this._opened){if(b.focus&&(!1!==b.autoFocus||"mouseup"==a.type&&!this.hovering))this._focusDropDownTimer=this.defer(function(){b.focus();delete this._focusDropDownTimer})}else this.focus&&this.defer("focus")},_onDropDownClick:function(a){this._stopClickEvents&&
(a.stopPropagation(),a.preventDefault())},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";d.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},
postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(p(this._buttonNode,s.press,e.hitch(this,"_onDropDownMouseDown")),p(this._buttonNode,"click",e.hitch(this,"_onDropDownClick")),p(a,"keydown",e.hitch(this,"_onKey")),p(a,"keyup",e.hitch(this,"_onKeyUp")))},destroy:function(){this._opened&&this.closeDropDown(!0);this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(a){if(!this.disabled&&
!this.readOnly){var b=this.dropDown,c=a.target;if(b&&(this._opened&&b.handleKey)&&!1===b.handleKey(a))a.stopPropagation(),a.preventDefault();else if(b&&this._opened&&a.keyCode==f.ESCAPE)this.closeDropDown(),a.stopPropagation(),a.preventDefault();else if(!this._opened&&(a.keyCode==f.DOWN_ARROW||(a.keyCode==f.ENTER||a.keyCode==f.SPACE&&(!this._searchTimer||a.ctrlKey||a.altKey||a.metaKey))&&("input"!==(c.tagName||"").toLowerCase()||c.type&&"text"!==c.type.toLowerCase())))this._toggleOnKeyUp=!0,a.stopPropagation(),
a.preventDefault()}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(e.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1);this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new m,b=e.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?b():this.loadDropDown(b);return a},toggleDropDown:function(){!this.disabled&&
!this.readOnly&&(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,f=a.domNode,g=this._aroundNode||this.domNode,h=this,m=w.open({parent:this,popup:a,around:g,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){h.closeDropDown(!0)},onCancel:function(){h.closeDropDown(!0)},onClose:function(){b.set(h._popupStateNode,"popupActive",!1);d.remove(h._popupStateNode,"dijitHasDropDownOpen");h._set("_opened",!1)}});if(this.forceWidth||
this.autoWidth&&g.offsetWidth>a._popupWrapper.offsetWidth){var g=g.offsetWidth-a._popupWrapper.offsetWidth,n={w:a.domNode.offsetWidth+g};this._origStyle=f.style.cssText;e.isFunction(a.resize)?a.resize(n):c.setMarginBox(f,n);"R"==m.corner[1]&&(a._popupWrapper.style.left=a._popupWrapper.style.left.replace("px","")-g+"px")}b.set(this._popupStateNode,"popupActive","true");d.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");
this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"!==f.getAttribute("role")&&!f.getAttribute("aria-labelledby")&&f.setAttribute("aria-labelledby",this.id);return m},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus&&this.focus(),w.close(this.dropDown),this._opened=!1);this._origStyle&&(this.dropDown.domNode.style.cssText=this._origStyle,
delete this._origStyle)}})})},"esriPBI/widgets/SymbolStyle/configs/_configOpacity":function(){define(["dojo/_base/lang","dojo/on","../Opacity"],function(g,m,a){return{_configOpacity:function(b){var d=this.__config(a,this.opacityDetails);d.own(m(d,"opacityChanged",g.hitch(this,function(a){b.mapManager.getPowerBILayer().setOpacity(a);this._onRendererChanged()})))}}})},"esriPBI/widgets/SymbolStyle/Opacity":function(){define("dojo/_base/declare dojo/_base/lang dojox/mvc/Templated dojo/on ./_Styler esriPBI/defaults esriPBI/utils/clusterUtils ./utils/rendererUtils esri/renderers/HeatmapRenderer dojo/i18n!./nls/Opacity dojo/text!./templates/Opacity.html ./ValuePicker".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p){return g([a,d],{templateString:p,nls:e,baseClass:"opacityWidget",paramName:"opacityParam",constructor:function(a){m.mixin(this,a||{})},postMixInProperties:function(){this.layerOpacity=100*(1-this.app.mapManager.getPowerBILayer().opacity);this.intermediateChanges=this._canIntermediateChanges()},isNotDefault:function(){return this.app.mapManager.getPowerBILayer().opacity!==c.origin.renderers.opacityParam},_revertToDefault:function(){this.inherited(arguments);this.emit("opacityChanged",
c.origin.renderers.opacityParam);this.layerTransparencyOption.set("value",100*(1-c.origin.renderers.opacityParam),!1)},_registerStylerChangeHandlers:function(){this.own(b(this.layerTransparencyOption,"valueChanged",m.hitch(this,function(a){var b=this.app.mapManager.getPowerBILayer(),d=c[n.getCurrentRendererType(b)].renderers,e=1-a/100;100===a&&b.renderer instanceof f?this.emit("opacityChanged",1E-4):this.emit("opacityChanged",e);d.opacityParam=e;this._setEditState(!0)})))}})})},"esriPBI/widgets/SymbolStyle/configs/_configSizeColor":function(){define("dojo/_base/lang dojo/on dojo/dom-style esriPBI/utils/smartMappingUtils ../Size ../Color".split(" "),
function(g,m,a,b,d,c){return{_configSizeColor:function(a){var n=this.__config(d,this.sizeDetails),f=this.__config(c,this.colorDetails),e=a.mapManager.getPowerBILayer();n.own(m(n,"sizeInfoChanged",g.hitch(this,function(a){b.setBivariateRenderer(e,a,e.renderer.colorInfo).then(g.hitch(this,this._onRendererChanged));b.setBivariateRenderer(e,a,e.renderer.colorInfo).then(g.hitch(this,this._onRendererChanged))})));f.own(m(f,"colorInfoChanged",g.hitch(this,function(a){b.setBivariateRenderer(e,e.renderer.sizeInfo,
a).then(g.hitch(this,this._onRendererChanged))})))}}})},"esriPBI/widgets/SymbolStyle/configs/_configSizeType":function(){define(["dojo/_base/lang","dojo/on","esriPBI/utils/smartMappingUtils","../Size","../Unique"],function(g,m,a,b,d){function c(b,c,d,e,m){a.setBivariateRenderer(b,c,{field:b.renderer.attributeField,infos:d,scheme:e}).then(g.hitch(m,m._onRendererChanged))}return{_configSizeType:function(a){var n=a.mapManager.getPowerBILayer();a=this.__config(b,this.sizeDetails);var f=this.__config(d,
this.uniqueDetails),e;a.own(m(a,"sizeInfoChanged",g.hitch(this,function(a){c(n,a,n.renderer.infos,e,this)})));f.own(m(f,"uniqueValueInfoChanged",g.hitch(this,function(a){c(n,n.renderer.sizeInfo,a,e,this)})),m(f,"schemeChanged",g.hitch(this,function(a){e=a;c(n,n.renderer.sizeInfo,null,e,this)})))}}})},"esriPBI/extensions/tools/LocationTypeTool":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/_base/array dojo/topic ./_Tool ../_ShowWidgetMixin dojo/i18n!./nls/Tools esriPBI/widgets/LocationType/LocationType".split(" "),
function(g,m,a,b,d,c,h,n,f){return g([c,h],{title:n.locationTypeTitle,initialize:function(){this.set("visible",!1);this.own(a(this.app,"PowerBILayerAdded",m.hitch(this,this._updateToolAvailability)));this._updateToolAvailability()},execute:function(){if(!this._previousShownWidget){var a=this.app.mapManager.getPowerBILayer();a&&this.placeWidget(new f({app:this.app,locationProvider:a.getExtensionProperties().locationProvider}))}},_updateToolAvailability:function(a){if(a=this.app.mapManager.getPowerBILayer())"XY"===
m.getObject("locationProvider.type",null,a.getExtensionProperties())?(this.set("visible",!1),this.set("toggle",!1)):this.set("visible",!0)}})})},"esriPBI/widgets/LocationType/LocationType":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dojo/when dojo/dom-class dojo/dom-construct dojo/dom-attr dojo/dom-style dojo/i18n!./nls/LocationType dojo/text!./templates/LocationType.html dijit/_WidgetBase dijit/_TemplatedMixin esriPBI/layers/PowerBILayer esriPBI/utils/geocodeUtils esriPBI/generatefeatures/FeatureGenerator_SingleLineAddress esriPBI/generatefeatures/FeatureGenerator_StandardGeography".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B){return m([u,t],{baseClass:"locationType",templateString:s,nls:p,constructor:function(b){a.mixin(this,b||{})},postCreate:function(){this.gtSelect=this._createGeometryTypeSelect();this.ltSelect=this._createLocationTypeSelect();this.scTypeSelect=this._createCountryTypeSelect();this.scSelect=this._createCountrySelect();this.own(d(this.gtSelect,"change",a.hitch(this,this._gtChanged)),d(this.scTypeSelect,"change",a.hitch(this,this._scTypeChanged)),d(this.scSelect,
"change",a.hitch(this,this._scChanged)),d(this.app,"PowerBILayerAdded",a.hitch(this,function(a){this.locationProvider=a.getExtensionProperties().locationProvider;"XY"===this.locationProvider.type&&this.destroyRecursive()})));"SingleLineAddress"!==this.locationProvider.type&&"XY"!==this.locationProvider.type&&(this.gtSelect.value="polygon",h.remove(this.polygonOptions,"dijitHidden"));var b;b=this.locationProvider.sourceCountry&&"world"!==this.locationProvider.sourceCountry?"single":"global";this.scTypeSelect.value=
b;this._scTypeChanged({target:{value:b}})},_scChanged:function(d){(d=d.target.value)&&c(v.geoGeogrphyLayers(d),a.hitch(this,function(a){this._updateLtOptions(this.ltSelect,b.map(a,function(a){return{label:a.name,value:a.id}}))}))},_gtChanged:function(a){a=a.target.value;"point"===a?h.add(this.polygonOptions,"dijitHidden"):"polygon"===a&&h.remove(this.polygonOptions,"dijitHidden")},_scTypeChanged:function(a){a=a.target.value;n.empty(this.ltSelect);"global"===a?(e.set(this.scSelect,"opacity",0.5),f.set(this.scSelect,
"disabled",1),this._updateLtOptions(this.ltSelect,[{label:p.country,value:"countries"}])):"single"===a&&(e.set(this.scSelect,"opacity",1),f.remove(this.scSelect,"disabled"),this._scChanged({target:{value:this.scSelect.value}}))},_createGeometryTypeSelect:function(){var a=n.create("select",{id:"gtSelect"},this.gtSelectContainer);b.forEach([{label:p.point,value:"point"},{label:p.polygon,value:"polygon"}],function(b){n.create("option",{value:b.value,innerHTML:b.label},a)});return a},_createCountryTypeSelect:function(){var a=
n.create("select",{id:"scTypeSelect"},this.scTypeSelectDiv);b.forEach([{label:p.oneCountry,value:"single"},{label:p.moreCountries,value:"global"}],function(b){n.create("option",{value:b.value,innerHTML:b.label},a)});return a},_createCountrySelect:function(){var d=n.create("select",{id:"scSelect"},this.scSelectDiv);c(v.getCountryCoverage(),a.hitch(this,function(e){b.forEach(b.map(e,function(a){return{label:a.name,value:a.id}}),function(a){n.create("option",{value:a.value,innerHTML:a.label},d)});!this.locationProvider.sourceCountry||
"world"===this.locationProvider.sourceCountry?d.value="US":(d.value=this.locationProvider.sourceCountry,c(v.geoGeogrphyLayers(this.locationProvider.sourceCountry),a.hitch(this,function(a){this._updateLtOptions(this.ltSelect,b.map(a,function(a){return{label:a.name,value:a.id}}));"XY"!==this.locationProvider.type&&"SingleLineAddress"!==this.locationProvider.type&&(this.ltSelect.value=this.locationProvider.type)})))}));return d},_updateLtOptions:function(a,c){n.empty(a);b.forEach(c,function(b){n.create("option",
{value:b.value,innerHTML:b.label},a)})},_createLocationTypeSelect:function(){return n.create("select",{id:"ltSelect"},this.ltSelectDiv)},_readdLayer:function(b,c){delete c.rendererInfo;w.addLayer(a.mixin(c,{generator:new b}),this.app)},_ok:function(){var b=this.ltSelect.value,c=this.gtSelect.value,d;"single"===this.scTypeSelect.value&&(d=this.scSelect.value);var e=this.app.mapManager.getPowerBILayer().getExtensionProperties();"point"===c?this._readdLayer(x,a.mixin(e,{locationProvider:{type:"SingleLineAddress",
field:e.locationProvider.field,sourceCountry:d}})):"polygon"===c&&this._readdLayer(B,a.mixin(e,{locationProvider:{type:b,field:e.locationProvider.field,sourceCountry:d}}))}})})},"esriPBI/extensions/tools/AddLocation":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/i18n!./nls/Tools esriPBI/extensions/tools/_Tool esriPBI/extensions/_ShowWidgetMixin esriPBI/widgets/SearchBox/SearchBox".split(" "),function(g,m,a,b,d,c,h){return g([d,c],{initialize:function(a){this.app=a;this._map=a.mapManager.map;
(this.geocoder=this.getValidGeocoder())?this.set("enabled",!0):this.set("enabled",!1)},execute:function(){var a=new h({map:this._map,geocoderUrl:this.geocoder.url});this.placeWidget(a)},getValidGeocoder:function(){var a=m.getObject("helperServices.geocode.0",!1,this.app.arcgisManager.portal);if(a){var b=a.url;if(b&&0<b.toLowerCase().indexOf(".arcgis.com/arcgis/rest/services/world/geocodeserver"))return a}return null}})})},"esriPBI/widgets/SearchBox/SearchBox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/event dojox/html/entities dijit/_TemplatedMixin dijit/_WidgetBase dijit/form/TextBox dijit/form/Textarea dojo/dom-construct dojo/dom-class dojo/dom-style dojo/keys esri/request esri/geometry/Point esri/InfoTemplate esri/symbols/PictureMarkerSymbol esri/graphicsUtils dojo/text!./templates/SearchBox.html dojo/i18n!./nls/nlsSearchBox dojo/_base/array esri/graphic esri/geometry/Extent esri/layers/FeatureLayer esri/tasks/FeatureSet esriPBI/utils/layerUtils esriPBI/utils/MapUtils ./ColorPallete".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M){return g([c,d],{templateString:B,nls:A,constructor:function(a){if(!a.map||!a.geocoderUrl)throw"all parameter requirements not met";},postCreate:function(){var a=this,b=this.debounce(this._searchInput,this);this.search=new h({placeHolder:A.searchPlaceHolder,intermediateChanges:!0,onBlur:function(){""===m.trim(this.value)&&(e.remove(this.domNode,"esriMapsExpandSearch"),a._clearSuggestionList())},onInput:function(a){b(a)},"class":"esriMapsSearchLocation"},
this.searchBox);e.add(this.suggestions,"dijitHidden");this.checkAndUpdateSearchResult();this.updateSearchBoxDisplay()},debounce:function(a,b){var c;return function(){c&&(clearTimeout(c),c=null);var d=arguments;c=setTimeout(function(){a.apply(b,d)},200)}},_searchInput:function(a){var b=this;if(""!==m.trim(this.search.value)){var c=this.map.extent.getCenter().toJson();this._suggestLocations(this.geocoderUrl,{text:this.search.value,center:JSON.stringify(c)}).then(function(c){b._clearSuggestionList();
13===a.keyCode||"click"===a.type?(b.search.set("value",""),b.search.focus(),b._findSuggestedResults(c.suggestions[0])):(e.remove(b.suggestions,"dijitHidden"),C.forEach(c.suggestions,function(a){f.create("li",{innerHTML:a.text,onclick:function(){b.search.set("value","");b.search.focus();b._findSuggestedResults(a);b._clearSuggestionList()}},b.suggestions)}))})}else b._clearSuggestionList()},checkAndUpdateSearchResult:function(){var a=K.getAcetateLayer(this.map);C.forEach(a,m.hitch(this,function(a){this.updateResultList(a)}))},
_searchToolClicked:function(a){this._searchInput(a)},_clearAll:function(){this._clearSuggestionList();this.search.set("value","");this.search.focus()},_clearSuggestionList:function(){for(;this.suggestions.firstChild;)this.suggestions.removeChild(this.suggestions.firstChild);e.add(this.suggestions,"dijitHidden")},_suggestLocations:function(a,b){return u({url:a+"/suggest",content:{text:b.text,location:b.center,distance:5E3,f:"json"},handleAs:"json",callbackParamName:"callback"})},_findLocation:function(a,
b){return u({url:a+"/find",content:{text:b.text,f:"json",magicKey:b.magicKey,bbox:b.bbox,outSR:this.map.spatialReference.wkid,outFields:"Place_addr, name",maxLocations:b.maxLocations},handleAs:"json",callbackParamName:"callback"})},_findSuggestedResults:function(a){var b=this;this.searchText=a.text;var c={text:a.text,magicKey:a.magicKey};a.isCollection&&(c.maxLocations=10,c.bbox=JSON.stringify(this.map.extent.toJson()));this._findLocation(this.geocoderUrl,c).then(function(a){b.createAcetateLayer(a.locations)})},
checkAcetateLayerCount:function(){var a=0;C.forEach(this.map.graphicsLayerIds,m.hitch(this,function(b){b=this.map.getLayer(b);b.type&&"AcetateLayer"===b.type&&a++}));return a},updateSearchBoxDisplay:function(){10>this.checkAcetateLayerCount()?(e.remove(this.search.domNode,"dijitHidden"),e.remove(this.searchIcon,"dijitHidden")):(e.add(this.search.domNode,"dijitHidden"),e.add(this.searchIcon,"dijitHidden"))},createAcetateLayer:function(a){var b=[],c=!1,d="colorBlock"+(this.checkAcetateLayerCount()+
1),e=this;C.forEach(a,m.hitch(this,function(a){var e=new t(a.feature.geometry.x,a.feature.geometry.y,this.map.spatialReference),f=new v(require.toUrl("esriPBI/themes/common/images/"+d+".svg"),30,30);this._getContent(a);var g=a.feature.attributes;g.name=a.name;0<g.Place_addr.length&&!c&&(c=!0);a=new z(e,f,g);b.push(a)}));if(0<b.length){this.emptyMessage&&(f.destroy(this.emptyMessage),this.emptyMessage=null);a=this.createFeatureCollection(c);var g=new H(a,{mode:H.MODE_SNAPSHOT});I.setName(g,this.searchText);
a=new w("",this._getContent(c,g));g.setInfoTemplate(a);g.type="AcetateLayer";this.map.addLayer(g);var h=this.map,n=g.on("edits-complete",function(){n.remove();n=null;h.setExtent(x.graphicsExtent(g.graphics).expand(2))});a=this._copyFeatures(b,g);g.applyEdits(a,null,null);this.updateResultList(g)}else this.resultListDiv||(this.resultListDiv=f.create("div",null,this.resultList)),this.emptyMessage||(this.emptyMessage=f.create("div",{"class":"noLocationsFound",innerHTML:"No matching location found"},
this.resultListDiv,"first")),p.set(this.emptyMessage,"display","block"),setTimeout(function(){p.set(e.emptyMessage,"display","none")},3E3)},updateResultList:function(a){var b=this;this.resultListDiv||(this.resultListDiv=f.create("div",null,this.resultList));var c=f.create("div",{"class":"searchResult",onclick:function(){b.map.setExtent(x.graphicsExtent(a.graphics).expand(2))}},this.resultListDiv,"first"),d=f.create("div",{"class":"locationMarker"},c),e=new M({layer:a});f.place(e.domNode,d);var d=
f.create("div",{"class":"searchInfo"},c),g=f.create("div",{innerHTML:a.name,"class":"resultName",onclick:function(c){c.stopPropagation();b.renameTextBox(g,a)}},d);f.create("div",{innerHTML:a.graphics.length+" locations","class":"locationCount"},d);f.create("div",{innerHTML:"Delete","class":"deleteLocation",onclick:function(d){d.stopPropagation();b.map.removeLayer(a);f.destroy(c);b.updateSearchBoxDisplay()}},d);this.updateSearchBoxDisplay()},renameTextBox:function(c,d){var e;c.innerHTML="";var f=this;
endEdit=function(a){e.destroy();""===m.trim(e.value)?c.innerHTML=b.encode(d.name):a||(a=0<d.graphics[0].attributes.Place_addr.length?!0:!1,c.innerHTML=b.encode(e.value),d.name=e.value,a=new w("",f._getContent(a,d)),d.setInfoTemplate(a),f.map.infoWindow.hide())};e=(new n({"class":"renameResultText",value:d.name,trim:!0,intermediateChanges:!0,onClick:function(b){a.stop(b)},onBlur:endEdit,onKeyPress:function(a){(a.charOrCode===s.ENTER||a.charOrCode===s.ESCAPE)&&endEdit()},onFocus:function(){this.textbox&&
this.textbox.select&&this.textbox.select()}})).placeAt(c,"after");e.focus()},_copyFeatures:function(a){return C.map(a,function(a){return new z(a.geometry,a.symbol,a.attributes,a.infoTemplate)},this)},createFeatureCollection:function(a){var b=[{name:"name",alias:"Name",type:"esriFieldTypeString"}];a&&b.push({name:"Place_addr",alias:"Address",type:"esriFieldTypeString"});a={geometryType:"esriGeometryPoint",objectIdField:"ObjectID",drawingInfo:{renderer:{type:"simple"}},fields:b};b=new J;b.features=
[];b.geometryType="esriGeometryPoint";b.spatialReference=this.map.spatialReference;return{layerDefinition:a,featureSet:b}},_getContent:function(a,b){var c="";return c=b?a?"\x3cb\x3eResult\x3c/b\x3e: "+b.name+" \x3cbr\x3e\x3cb\x3eName\x3c/b\x3e: ${name} \x3cbr\x3e\x3cb\x3eAddress\x3c/b\x3e: ${Place_addr}":"\x3cb\x3eResult\x3c/b\x3e: "+b.name+" \x3cbr\x3e\x3cb\x3eAddress\x3c/b\x3e: ${name}":a?"\x3cbr\x3e\x3cb\x3eName\x3c/b\x3e: ${name} \x3cbr\x3e\x3cb\x3eAddress\x3c/b\x3e: ${Place_addr}":"\x3cb\x3eAddress\x3c/b\x3e: ${name}"},
_removeResultGraphics:function(){for(var a=this.map.graphics.graphics.length-1;0<=a;a--){var b=this.map.graphics.graphics[a];b&&"search"===b._type&&(this.map.graphics.remove(b),this.map.infoWindow.isShowing&&this.map.infoWindow.hide())}}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(g,m,a,b){return g("dijit.form.Textarea",[b,a],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);
m.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),function(g,m,a,b,d,c,h){a.add("textarea-needs-help-shrinking",function(){var a=c.body(),b=m.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",
height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},a,"last"),d=b.scrollHeight>=b.clientHeight;a.removeChild(b);return d});return g("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);var a=this.textbox;a.style.overflowY="hidden";
this.own(d(a,"focus, resize",b.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(h.on("resize",b.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(a){this.inherited(arguments);this.resize()},_estimateHeight:function(){var a=this.textbox;a.rows=(a.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function b(){var a=!1;""===c.value&&(c.value=" ",a=!0);var d=c.scrollHeight;a&&(c.value="");return d}var c=
this.textbox;"hidden"==c.style.overflowY&&(c.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(b()||c.offsetHeight){var d=b()+Math.max(c.offsetHeight-c.clientHeight,0),g=d+"px";g!=c.style.height&&(c.style.height=g,c.rows=1);if(a("textarea-needs-help-shrinking")){var h=b(),m=c.style.minHeight,t=4,w=c.scrollTop;c.style.minHeight=g;for(c.style.height="auto";0<d;){c.style.minHeight=Math.max(d-t,4)+"px";g=b();h-=g;d-=h;if(h<t)break;h=g;t<<=1}c.style.height=d+"px";c.style.minHeight=m;c.scrollTop=
w}c.style.overflowY=b()>c.clientHeight?"auto":"hidden";"hidden"==c.style.overflowY&&(c.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(g,m,a,b){return g("dijit.form.SimpleTextarea",b,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"\x3ctextarea ${!nameAttrSetting} data-dojo-attach-point\x3d'focusNode,containerNode,textbox' autocomplete\x3d'off'\x3e\x3c/textarea\x3e",
postMixInProperties:function(){!this.value&&this.srcNodeRef&&(this.value=this.srcNodeRef.value);this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);a("ie")&&this.cols&&m.add(this.textbox,"dijitTextAreaCols")},filter:function(a){a&&(a=a.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(b){if(this.maxLength){var c=parseInt(this.maxLength),g=this.textbox.value.replace(/\r/g,""),c=g.length-c;if(0<c){var m=this.textbox;if(m.selectionStart){var f=m.selectionStart,
e=0;a("opera")&&(e=(this.textbox.value.substring(0,f).match(/\r/g)||[]).length);this.textbox.value=g.substring(0,f-c-e)+g.substring(f-e);m.setSelectionRange(f-c,f-c)}else this.ownerDocument.selection&&(m.focus(),g=this.ownerDocument.selection.createRange(),g.moveStart("character",-c),g.text="",g.select())}}this.inherited(arguments)}})})},"esriPBI/widgets/SearchBox/ColorPallete":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dijit/_TemplatedMixin dijit/_WidgetBase dojo/text!./templates/ColorPallete.html dojo/dom-class esri/symbols/PictureMarkerSymbol".split(" "),
function(g,m,a,b,d,c,h,n,f){return g([c,d],{templateString:h,layer:null,postCreate:function(){this.inherited(arguments);this.markerIcon.src=this.layer.graphics[0].symbol.url},displayPallete:function(a){this.pallete||this.createPallete();n.contains(this.dropdown,"open")?(b.destroy(this.pallete),this.pallete=null,n.remove(this.dropdown,"open")):n.add(this.dropdown,"open");a.stopPropagation()},createPallete:function(){var a=this;this.pallete=b.create("div",{"class":"pallete"},this.dropdown);for(var c=
1;10>=c;c++)b.create("div",{"class":"colorBlock"+c,onclick:function(b){a.updateSelection(b)}},this.pallete)},updateSelection:function(b){var c=new f(require.toUrl("esriPBI/themes/common/images/"+b.target.className+".svg"),30,30);a.forEach(this.layer.graphics,m.hitch(this,function(a){a.setSymbol(c)}));this.markerIcon.src=this.layer.graphics[0].symbol.url}})})},"esriPBI/layout/SidePanelLayout":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/dom dojo/dom-geometry dojo/dom-construct dojo/dom-class dojo/dom-style dojo/query dojo/topic dojo/when dojo/on dojo/string dojo/html dojo/aspect dojo/json dojo/_base/fx dojo/_base/array dojo/_base/lang dojo/_base/window dijit/registry dojox/mvc/StatefulArray ./_Layout ../extensions/_SelectedLayerMixin dojo/text!./templates/SidePanelLayout.html dojo/i18n!./nls/SidePanelLayout dijit/layout/BorderContainer dijit/layout/ContentPane ../widgets/MenuBar/MenuBar ../widgets/ToolBar/ToolBar ../widgets/Infographics/Infographics ../widgets/Infographics/CardManager ../widgets/SignInDialog/SignInDialog dojo/i18n!../widgets/SignInDialog/nls/SignInDialog ./ClosablePanel ./SlidingPanel ../widgets/_ToolContainerMixin ../ThemeUtils ../adapters/StorageAdapter ../utils/layerUtils ../utils/autoTooltip ../utils/logger! ../utils/MapUtils ../widgets/_ShowModalMixin ../_LayoutErrorsMixin".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K,M,L,G,O,S,U,T,E,Q,N,q,k,r,y,D,P,aa,X,na,Da,Ea){var Ha={skin:"light",css:{titleColor:"#ffffff",headerColor:"#01709b",headerHoverColor:"#2aade3",accentColor:"#3093ca",titleTextColor:"#000000",accentTextColor:"#ffffff",fontFamily:"'Segoe UI', Avenir, 'Helvetica Neue', Arial, sans-serif"}};return g([I,b,d,Da,Ea],{baseClass:"esriMapsSidePanelLayout",templateString:M,nls:L,sidePanelWidth:null,mapContentsStartupVisibility:"SHOW",hideKeepMeSignedIn:!1,
defaultKeepMeSignedIn:!0,hideSignOutButton:!1,hideSignedInUser:!1,headerTitle:"",layerMenuSettings:{showLayerTransparencySlider:!0,slideOpen:!0},toolContainers:{main:{label:L.main_label},layerPrimary:{label:L.layerPrimary_label},layerSecondary:{label:L.layerSecondary_label},popup:{label:L.popup_label},select:{label:L.select_label}},constructor:function(){this.theme=z.clone(Ha)},_placeToolContainers:function(){this.createToolbar(this.app.toolManager.tools,this.mainToolBar);this.createSecondaryToolBar(this.app.toolManager.tools,
this.secondaryToolBar);this.createThirdToolBar(this.app.toolManager.tools,this.thirdToolBar);var a=n.create("div",{"class":"esriMapsFloatToolbarContainer"},this.app.mapManager.map.root);this.esriMapsFloatToolbar=n.create("div",{},a);this.createFloatToolBar(this.app.toolManager.tools,this.esriMapsFloatToolbar)},_createInfographicsContainer:function(){var a=T.loadCards(this.app.mapManager.map);a&&0<a.length&&(this.cardManager||(this.cardManager=new E({app:this.app,container:this.infographicsContainer})),
this.cardManager.reviveSavedCards(a));s.subscribe("infographic-create",z.hitch(this,function(a){this.cardManager||(this.cardManager=new E({app:this.app,container:this.infographicsContainer}));this.cardManager.createInfographicCard(a);this._resizeTimeSlider()}));s.subscribe("infographic-remove",z.hitch(this,function(a){this.cardManager&&(this.cardManager.removeInfographicCard(a),this._resizeTimeSlider())}));s.subscribe("infographic-save",z.hitch(this,function(){this.app.save()}))},createToolbar:function(a,
b,c){new U({menuItemType:c&&c.menuItemType||"IconLabel",store:a,toolCollectionId:"main","class":"esriMapsMainMenuBar"},b)},createSecondaryToolBar:function(a,b,c){new U({menuItemType:c&&c.menuItemType||"IconLabel",store:a,toolCollectionId:"secondary","class":"esriMapsMainMenuBar"},b)},createThirdToolBar:function(a,b,c){new U({menuItemType:c&&c.menuItemType||"IconOnly",store:a,toolCollectionId:"third","class":"esriMapsMainMenuBar"},b)},createFloatToolBar:function(a,b,c){new U({menuItemType:c&&c.menuItemType||
"IconOnly",store:a,toolCollectionId:"floatTools","class":"esriMapsFloatToolBar"},b)},getMapNode:function(){return this.mapWrapperContainer},updateView:function(a){a.inFocusEditMode?(e.set(this.sidePanel,"display",""),e.set(this.mainToolBarContainer.domNode,"display","")):(this.activeClosablePanel&&this.activeClosablePanel.widget&&(this.activeClosablePanel.widget.destroy(),C.forEach(p(".esriMapsDropDownMenu .esriMapsToolbarCommand.esriMapsCommandIcon.esriMapsSelectedCommand",this.mainToolBarContainer.domNode),
function(a){f.remove(a,"esriMapsSelectedCommand")})),e.set(this.sidePanel,"display","none"),e.set(this.mainToolBarContainer.domNode,"display","none"));this._map&&a.recenterMap&&this.app.mapManager.recenterMap(this._map.extent.getCenter());this.bc.resize()},startup:function(){this.app.mapManager.on("map-created",z.hitch(this,this._mapCreated));this.app.arcgisManager.on("signed-in",z.hitch(this,function(){this.app.arcgisManager.portal.getPortalUser();this.bc.resize()}));this.app.on("edit-mode",z.hitch(this,
this.updateView));t.once(this.app,"powerbilayer-exceed-limit",z.hitch(this,this.showExceedingLimitMessage));this._setPanelWidth(this.sidePanel);this.bc.startup();this._registerEventListeners();"HIDE"===this.mapContentsStartupVisibility&&this._toggleSidePanel(!1);y.applyTheme(this.theme);this.inherited(arguments);aa(this.domNode)},_setThemeAttr:function(a){a&&(a=z.mixin({},Ha,a),this._set("theme",a),y.applyTheme(a))},_setPanelWidth:function(a){this.sidePanelWidth&&(a.style.width=this.sidePanelWidth)},
_registerEventListeners:function(){this.own(t(this.collapseButton,"click",z.hitch(this,function(){this._toggleSidePanel(!1)})),s.subscribe("powerbilayer-generate-start,show-loading",z.hitch(this,function(){this._showLoading()})),s.subscribe("powerbilayer-ready,powerbilayer-generate-interrupted,hide-loading",z.hitch(this,function(){this._hideLoading()})))},_toggleSidePanel:function(a){var b={node:this.sidePanel,duration:100,properties:{}};a?a&&(f.remove(this.sidePanel,"esriMapsSidePanelCollapsed"),
h.isBodyLtr()?b.properties.left=0:b.properties.right=0,b.onEnd=z.hitch(this,function(){this.miniMode&&(e.set(p(".esriMapsCollapseArea",F.body())[0],{visibility:"visible"}),e.set(p(".esriMapsCollapsePad",F.body())[0],{visibility:"visible"}))}),A.animateProperty(b).play()):(b.onEnd=z.hitch(this,function(){f.add(this.sidePanel,"esriMapsSidePanelCollapsed");this.miniMode&&e.set(p(".esriMapsCollapseArea",F.body())[0],{visibility:"hidden"})}),this.miniMode&&e.set(p(".esriMapsCollapsePad",F.body())[0],{visibility:"hidden"}),
a=-h.getMarginBox(this.sidePanel).w.toString(),h.isBodyLtr()?b.properties.left=a:b.properties.right=a,A.animateProperty(b).play())},showWidget:function(a,b){this._hideLoading();e.set(this.bc.domNode,{visibility:"visible"});!a||!a.isInstanceOf||!a.isInstanceOf(m)?X.error("showWidget: invalid arguments",a,b):a.domNode&&(b&&b.showModal?this._showWidgetModal(a,b):this._showWidgetLarge(a,b))},showMessage:function(a,b,c,d){this._hideLoading();c=c||I.MessageTypes.info;n.destroy("powerbi-message");var e=
n.create("div",{id:"powerbi-message","class":"layoutMessageContainer "+c},this.domNode);n.create("div",{"class":"icon",innerHTML:"\x3cdiv class\x3d'"+c+"'\x3e\x3c/div\x3e"},e);n.create("div",{"class":"layoutMessage",innerHTML:b,title:b},e);t(n.create("div",{"class":"closeLayoutMessage",innerHTML:"\x3cdiv class\x3d'x'\x3e\x26#x2715;\x3c/div\x3e"},e),"click",function(){n.destroy(e)})},showExceedingLimitMessage:function(){this.showMessage("",L.limit_exceeded,I.MessageTypes.warning)},showSignIn:function(a){var b=
this,c=new Q({defaultKeepMeSignedIn:b.defaultKeepMeSignedIn,hideKeepMeSignedIn:b.hideKeepMeSignedIn,portalName:b.app.arcgisManager.portal.portalName});c.on("authentication-required",function(d){u(a({userId:d.username,password:d.password}),function(a){if(d.remember){var e=function(){b.app.adapters.storage.set("PortalToken",B.stringify(a.toJson()),D.Scope.USER)};x.after(a,"onTokenChange",function(){e()});e()}else b.app.adapters.storage.remove("PortalToken",D.Scope.USER);c.destroyRecursive()},function(a){c.signInFailed();
a&&("SignIn.NonOrgAccount"===a.code?b.showMessage(N.nonOrganizationAccountTitle,N.nonOrganizationAccount):"SignIn.InactiveAccount"===a.code?b.showMessage(N.inactiveArcGISSubscriptionTitle,N.inactiveArcGISSubscription):"SignIn.InvalidCredentials"===a.code&&b.showMessage(N.invalidUserTitle,N.invalidUser))})});b.showWidget(c,{showModal:!0})},_showWidgetLarge:function(a,b){this._showCloseable(a,b)},_showWidgetModal:function(a,b){this.showModal(a,b)},_showCloseable:function(a,b){this.activeClosablePanel&&
(this.activeClosablePanel.destroyRecursive(),this.activeClosablePanel=null);var c=new q({panelTitle:b&&b.title||"",widget:a,predecessor:this.esriMapsSidePanelElement});c.startup();var d=h.position(c.domNode);this._resizeTimeSlider(d.w);t.once(c,"panel-closed",z.hitch(this,function(){this._resizeTimeSlider(1)}));this._toggleSidePanel(!0);this.activeClosablePanel=c;this._setPanelWidth(c.domNode);this.emit("active-widget-changed",{activeWidget:a});e.set(this.sidePanel,{height:"inherit"});this.bc.resize();
e.set(this.sidePanel,{height:this._getNewHeight(a.domNode)});var f=x.before(c,"_close",z.hitch(this,function(){this._toggleSidePanel(!1);this.bc.resize();f.remove()}))},_resizeTimeSlider:function(a){var b,c;this.timeSliderContainer&&(a||(a=h.position(this.sidePanel),a=Math.floor(a.x+a.w)),c=h.getMarginBox(this.infographicsContainer.domNode).w,b=a+c+16,e.set(this.timeSliderContainer,"left",a+"px"),0<a||0<c?e.set(this.timeSliderContainer,"width","calc(100% - "+b+"px)"):e.set(this.timeSliderContainer,
"width",""))},_getNewHeight:function(a){var b=h.position(a);if(""===a.style.height&&0===b.h)return"100%";a=h.position(this.sidePanel);return b.h+b.y-a.y+"px"},_mapCreated:function(a){this._map=a;this.own(this._map.on("resize",z.hitch(this,function(a){this._resizeTimeSlider()})));this._placeToolContainers();this._createInfographicsContainer();this._hideLoadingOnStartup();e.set(this.bc.domNode,{visibility:"visible"})},_showLoading:function(){this.loadingIndicatorDiv||(this.loadingIndicatorDiv=n.create("div",
{id:"powerbilayer-busyindicator","class":"powerbilayerloading"},this.domNode))},_hideLoadingOnStartup:function(){var a=C.some(na.getLayers(this._map),function(a){return"basemap"===a._basemapGalleryLayerType&&"esri.layers.VectorTileLayer"===a.declaredClass}),a=na.vectorTileSupported&&a?1200:0,b=setTimeout(z.hitch(this,function(){clearTimeout(b);n.destroy("initLoadingIndicator")}),a)},_hideLoading:function(){this.loadingIndicatorDiv&&(n.destroy(this.loadingIndicatorDiv),this.loadingIndicatorDiv=null);
this.bc.resize()},_signOutClick:function(){this.app.arcgisManager.portal.signOut()},toJson:function(){var a=this.inherited(arguments);a.mapContentsStartupVisibility=this.mapContentsStartupVisibility;a.theme=this.theme;a.sidePanelWidth=this.sidePanelWidth;a.hideKeepMeSignedIn=this.hideKeepMeSignedIn;a.defaultKeepMeSignedIn=this.defaultKeepMeSignedIn;a.hideSignOutButton=this.hideSignOutButton;a.hideSignedInUser=this.hideSignedInUser;a.headerTitle=this.headerTitle;return a}})})},"dojox/mvc/StatefulArray":function(){define(["dojo/_base/lang",
"dojo/Stateful"],function(g,m){function a(a){a._watchElementCallbacks&&a._watchElementCallbacks();return a}var b=function(d){d=g._toArray(d||[]);d.constructor=b;return g.mixin(d,{pop:function(){return this.splice(this.get("length")-1,1)[0]},push:function(){this.splice.apply(this,[this.get("length"),0].concat(g._toArray(arguments)));return this.get("length")},reverse:function(){return a([].reverse.apply(this,g._toArray(arguments)))},shift:function(){return this.splice(0,1)[0]},sort:function(){return a([].sort.apply(this,
g._toArray(arguments)))},splice:function(a,b){var d=this.get("length");a+=0>a?d:0;var f=Math.min(a,d),e=this.slice(a,a+b),m=g._toArray(arguments).slice(2);[].splice.apply(this,[a,b].concat(Array(m.length)));for(var s=0;s<m.length;s++)this[f+s]=m[s];this._watchElementCallbacks&&this._watchElementCallbacks(a,e,m);this._watchCallbacks&&this._watchCallbacks("length",d,d-e.length+m.length);return e},unshift:function(){this.splice.apply(this,[0,0].concat(g._toArray(arguments)));return this.get("length")},
concat:function(a){return new b([].concat.apply(this,arguments))},join:function(a){for(var b=[],d=this.get("length"),f=0;f<d;f++)b.push(this.get(f));return b.join(a)},slice:function(a,d){var g=this.get("length");d=(void 0===d?g:d)+(0>d?g:0);for(var f=[],g=a+(0>a?g:0)||0;g<Math.min(d,this.get("length"));g++)f.push(this.get(g));return new b(f)},watchElements:function(a){var b=this._watchElementCallbacks,d=this;b||(b=this._watchElementCallbacks=function(a,c,f){for(var g=[].concat(b.list),m=0;m<g.length;m++)g[m].call(d,
a,c,f)},b.list=[]);b.list.push(a);var f={};f.unwatch=f.remove=function(){for(var d=b.list,f=0;f<d.length;f++)if(d[f]==a){d.splice(f,1);break}};return f}},m.prototype,{set:function(a,b){if("length"==a){var d=this.get("length");d<b?this.splice.apply(this,[d,0].concat(Array(b-d))):b<d&&this.splice.apply(this,[b,d-b])}else d=this.length,m.prototype.set.call(this,a,b),d!=this.length&&m.prototype.set.call(this,"length",this.length);return this},isInstanceOf:function(a){return m.prototype.isInstanceOf.apply(this,
arguments)||a==b}})};b._meta={bases:[m]};return g.setObject("dojox.mvc.StatefulArray",b)})},"esriPBI/extensions/_SelectedLayerMixin":function(){define(["dojo/_base/declare"],function(g){return g(null,{selectedLayer:null,initialize:function(g){var a=this,b=function(){a.set("selectedLayer",g.mapManager.selectedLayer)};b();g.mapManager.on("selected-layer-change",b)},_selectedLayerSetter:function(g){this.selectedLayer=g;this.set("enabled",!!this.selectedLayer);this.onSelectedLayerChange(g)},onSelectedLayerChange:function(){}})})},
"dijit/layout/BorderContainer":function(){define("dojo/_base/array dojo/cookie dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/touch ../_WidgetBase ../_Widget ../_TemplatedMixin ./LayoutContainer ./utils".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v){var x=a("dijit.layout._Splitter",[u,t],{live:!0,templateString:'\x3cdiv class\x3d"dijitSplitter" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex\x3d"0" role\x3d"separator"\x3e\x3cdiv class\x3d"dijitSplitterThumb"\x3e\x3c/div\x3e\x3c/div\x3e',
constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);b.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var a=m(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var a=
this.horizontal?"h":"w",b=c.getMarginBox(this.child.domNode)[a],d=g.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],a=c.getContentBox(d.domNode)[a]-10;return Math.min(this.child.maxSize,b+a)},_startDrag:function(a){this.cover||(this.cover=d.place("\x3cdiv class\x3ddijitSplitterCover\x3e\x3c/div\x3e",this.child.domNode,"after"));b.add(this.cover,"dijitSplitterCoverActive");this.fake&&d.destroy(this.fake);if(!(this._resize=this.live))(this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),
b.add(this.domNode,"dijitSplitterShadow"),d.place(this.fake,this.domNode,"after");b.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");this.fake&&b.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var g=this._factor,m=this.horizontal,n=m?"pageY":"pageX",s=a[n],t=this.domNode.style,m=m?"h":"w",u=h.getComputedStyle(this.child.domNode),v=c.getMarginBox(this.child.domNode,u)[m],w=this._computeMaxSize(),x=Math.max(this.child.minSize,
c.getPadBorderExtents(this.child.domNode,u)[m]+10),m=this.region,B="top"==m||"bottom"==m?"top":"left",O=parseInt(t[B],10),S=this._resize,U=f.hitch(this.container,"_layoutChildren",this.child.id),m=this.ownerDocument;this._handlers=this._handlers.concat([e(m,p.move,this._drag=function(a,b){var c=a[n]-s,d=g*c+v,e=Math.max(Math.min(d,w),x);(S||b)&&U(e);t[B]=c+O+g*(e-d)+"px"}),e(m,"dragstart",function(a){a.stopPropagation();a.preventDefault()}),e(this.ownerDocumentBody,"selectstart",function(a){a.stopPropagation();
a.preventDefault()}),e(m,p.release,f.hitch(this,"_stopDrag"))]);a.stopPropagation();a.preventDefault()},_onMouse:function(a){a="mouseover"==a.type||"mouseenter"==a.type;b.toggle(this.domNode,"dijitSplitterHover",a);b.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(a){try{this.cover&&b.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&d.destroy(this.fake),b.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),
this._drag(a),this._drag(a,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&m(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyDown:function(a){this._resize=!0;var b=this.horizontal,d=1;switch(a.keyCode){case b?n.UP_ARROW:n.LEFT_ARROW:d*=-1;case b?n.DOWN_ARROW:n.RIGHT_ARROW:break;default:return}b=c.getMarginSize(this.child.domNode)[b?"h":"w"]+this._factor*
d;this.container._layoutChildren(this.child.id,Math.max(Math.min(b,this._computeMaxSize()),this.child.minSize));a.stopPropagation();a.preventDefault()},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),B=a("dijit.layout._Gutter",[u,t],{templateString:'\x3cdiv class\x3d"dijitGutter" role\x3d"presentation"\x3e\x3c/div\x3e',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},
buildRendering:function(){this.inherited(arguments);b.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}});a=a("dijit.layout.BorderContainer",w,{gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:x,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);var b=a.region,c=a.isLeftToRight();"leading"==b&&(b=c?"left":"right");"trailing"==b&&(b=c?"right":"left");if(b&&
"center"!=b&&(a.splitter||this.gutters)&&!a._splitterWidget)c=a.splitter?this._splitterClass:B,f.isString(c)&&(c=f.getObject(c)),c=new c({id:a.id+"_splitter",container:this,child:a,region:b,live:this.liveSplitters}),c.isSplitter=!0,a._splitterWidget=c,b="bottom"==b||b==(this.isLeftToRight()?"right":"left"),d.place(c.domNode,a.domNode,b?"before":"after"),c.startup()},layout:function(){this._layoutChildren()},removeChild:function(a){var b=a._splitterWidget;b&&(b.destroy(),delete a._splitterWidget);
this.inherited(arguments)},getChildren:function(){return g.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return g.filter(this.getChildren(),function(b){return b.region==a})[0]._splitterWidget},resize:function(a,b){if(!this.cs||!this.pe){var d=this.domNode;this.cs=h.getComputedStyle(d);this.pe=c.getPadExtents(d,this.cs);this.pe.r=h.toPixelValue(d,this.cs.paddingRight);this.pe.b=h.toPixelValue(d,this.cs.paddingBottom);h.set(d,"padding","0px")}this.inherited(arguments)},
_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var c=[];g.forEach(this._getOrderedChildren(),function(a){c.push(a);a._splitterWidget&&c.push(a._splitterWidget)});v.layoutChildren(this.domNode,{l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},c,a,b)}},destroyRecursive:function(){g.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy();delete a._splitterWidget});this.inherited(arguments)}});a.ChildWidgetProperties={splitter:!1,
minSize:0,maxSize:Infinity};f.mixin(a.ChildWidgetProperties,w.ChildWidgetProperties);f.extend(s,a.ChildWidgetProperties);a._Splitter=x;a._Gutter=B;return a})},"dijit/layout/LayoutContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-style dojo/_base/lang ../_WidgetBase ./_LayoutWidget ./utils".split(" "),function(g,m,a,b,d,c,h,n){m=m("dijit.layout.LayoutContainer",h,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){this._started||(g.forEach(this.getChildren(),
this._setupChild,this),this.inherited(arguments))},_setupChild:function(b){this.inherited(arguments);b.region&&a.add(b.domNode,this.baseClass+"Pane")},_getOrderedChildren:function(){var a=g.map(this.getChildren(),function(a,b){return{pane:a,weight:["center"==a.region?Infinity:0,a.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(a.region)?1:-1),b]}},this);a.sort(function(a,b){for(var c=a.weight,d=b.weight,f=0;f<c.length;f++)if(c[f]!=d[f])return c[f]-d[f];return 0});return g.map(a,function(a){return a.pane})},
layout:function(){n.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(a,b){this.inherited(arguments);this._started&&this.layout()},removeChild:function(c){this.inherited(arguments);this._started&&this.layout();a.remove(c.domNode,this.baseClass+"Pane");b.set(c.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});b.set(c.domNode,/top|bottom/.test(c.region)?"width":"height","auto")}});m.ChildWidgetProperties={region:"",layoutAlign:"",
layoutPriority:0};d.extend(c,m.ChildWidgetProperties);return m})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang ../_Widget ../_Container ../_Contained ../Viewport dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style".split(" "),function(g,m,a,b,d,c,h,n,f){return c("dijit.layout._LayoutWidget",[m,a,b],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments);h.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);
var a=this.getParent&&this.getParent();if(!a||!a.isLayoutContainer)this.resize(),this.own(d.on("resize",g.hitch(this,"resize")))}},resize:function(a,b){var c=this.domNode;a&&n.setMarginBox(c,a);var d=b||{};g.mixin(d,a||{});if(!("h"in d)||!("w"in d))d=g.mixin(n.getMarginBox(c),d);var h=f.getComputedStyle(c),m=n.getMarginExtents(c,h),v=n.getBorderExtents(c,h),d=this._borderBox={w:d.w-(m.w+v.w),h:d.h-(m.h+v.h)},m=n.getPadExtents(c,h);this._contentBox={l:f.toPixelValue(c,h.paddingLeft),t:f.toPixelValue(c,
h.paddingTop),w:d.w-m.w,h:d.h-m.h};this.layout()},layout:function(){},_setupChild:function(a){h.add(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,b){this.inherited(arguments);this._started&&this._setupChild(a)},removeChild:function(a){h.remove(a.domNode,this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}})})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(g,
m){return g("dijit._Contained",null,{_getSibling:function(a){var b=this.getParent();return b&&b._getSiblingOfChild&&b._getSiblingOfChild(this,"previous"==a?-1:1)||null},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var a=this.getParent();return!a||!a.getIndexOfChild?-1:a.getIndexOfChild(this)}})})},"esriPBI/widgets/MenuBar/MenuBar":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/dom-construct dojo/dom-class dijit/MenuBar dijit/PopupMenuBarItem dijit/Menu dijit/MenuItem dijit/DropDownMenu dijit/PopupMenuItem dijit/MenuBarItem dijit/focus ../_ToolContainerMixin".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w){return g([h,w],{baseClass:"dijitMenuBar esriMapsMenuBar",menuItemType:"LabelOnly",_handles:[],_postCreated:!1,addTool:function(a,f,g){if(a){var m,t,w,F=a.get("label");this.store.mayHaveChildren(a)&&0<this.store.getChildren(a).length?(t=new p({"class":"esriMapsDropDownMenu"}),this.observeTools(a,t),m=g.isInstanceOf(h)?new n:new s,m.set("popup",t),"IconOnly"===this.menuBarItemType?t=d.place("\x3cspan class\x3d'dijitReset dijitInline dijitIcon "+a.iconClass+"'\x3e\x3c/span\x3e",
m.domNode,"first"):m.set("label",F),m.set("title",a.description||""),this.isPreviewMode&&m.set("_onFocus",function(){})):(w=a.iconClass||"",g.isInstanceOf(h)?(m=new u,"IconOnly"===this.menuItemType&&w?t=d.place("\x3cspan class\x3d'dijitReset dijitInline dijitIcon esriMapsCommandIcon "+w+"'\x3e\x3c/span\x3e",m.domNode,"first"):"IconOnly"===this.menuBarItemType&&w&&(t=d.place("\x3cspan class\x3d'dijitReset dijitInline dijitIcon esriMapsCommandIcon "+w+"'\x3e\x3c/span\x3e",m.domNode,"first"))):(m=new e,
"IconOnly"===this.menuItemType&&w?m.set("iconClass","esriMapsCommandIcon "+w):"IconAndLabel"===this.menuItemType&&w&&m.set("iconClass","esriMapsCommandIcon "+w)),this._setTooltip(m,a),this.isPreviewMode||this._attachCommand(m,a,t));if(m){var H=b.after(a,"destroy",function(){m.destroy&&m.destroy();H.remove()});if("IconOnly"!==this.menuBarItemType&&m&&m.isInstanceOf(n)||"IconOnly"!==this.menuItemType&&m&&!m.isInstanceOf(u)&&!m.isInstanceOf(n))F&&m.set("label",F),m.own(a.watch("label",function(a,b,c){c&&
m.set("label",c)}));a._isDesignMode&&m.domNode&&c.add(m.domNode,"esriMapsDesignTime");g.addChild(m,f)}}},removeTool:function(a,b,c){c.removeChild(b)},_getTooltip:function(a){return a?a.get("tooltip")||"":""},_setTooltip:function(a,b){if(b){var c=this;a.set("title",this._getTooltip(b));a.own(b.watch("tooltip",function(d,e,f){a.set("title",c._getTooltip(b))}))}},_attachCommand:function(a,b,c){function d(){a.domNode.style.display=b.get("visible")?"":"none"}a._command=b;a.set("disabled",!a._command.enabled);
a.own(b.watch("enabled",function(b,c,d){a.set("disabled",!d)}));d();a.own(b.watch("visible",d));var e=!1;a.set("onClick",function(){t.curNode&&t.curNode.blur();t.set("curNode",null);e||(e=!0,setTimeout(function(){e=!1},500),b.execute())})}})})},"dijit/MenuBar":function(){define(["dojo/_base/declare","dojo/keys","./_MenuBase","dojo/text!./templates/MenuBar.html"],function(g,m,a,b){return g("dijit.MenuBar",a,{templateString:b,baseClass:"dijitMenuBar",popupDelay:0,_isMenuBar:!0,_orient:["below"],_moveToPopup:function(a){if(this.focusedChild&&
this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a)},focusChild:function(a){this.inherited(arguments);this.activated&&(a.popup&&!a.disabled)&&this._openItemPopup(a,!0)},_onChildDeselect:function(a){this.currentPopupItem==a&&(this.currentPopupItem=null,a._closePopup());this.inherited(arguments)},_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()},_onDownArrow:function(a){this._moveToPopup(a)},_onUpArrow:function(){},onItemClick:function(a,
b){a.popup&&a.popup.isShowingNow&&(!/^key/.test(b.type)||b.keyCode!==m.DOWN_ARROW)?(a.focusNode.focus(),this._cleanUp(!0)):this.inherited(arguments)}})})},"dijit/_MenuBase":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/lang dojo/mouse dojo/on dojo/window ./a11yclick ./registry ./_Widget ./_CssStateMixin ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w){return m("dijit._MenuBase",[s,w,t,u],{selected:null,
_setSelectedAttr:function(a){this.selected!=a&&(this.selected&&(this.selected._setSelected(!1),this._onChildDeselect(this.selected)),a&&a._setSelected(!0),this._set("selected",a))},activated:!1,_setActivatedAttr:function(a){d.toggle(this.domNode,"dijitMenuActive",a);d.toggle(this.domNode,"dijitMenuPassive",!a);this._set("activated",a)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:!1,childSelector:function(a){var b=p.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},
postCreate:function(){var a=this,b="string"==typeof this.childSelector?this.childSelector:c.hitch(this,"childSelector");this.own(n(this.containerNode,n.selector(b,h.enter),function(){a.onItemHover(p.byNode(this))}),n(this.containerNode,n.selector(b,h.leave),function(){a.onItemUnhover(p.byNode(this))}),n(this.containerNode,n.selector(b,e),function(b){a.onItemClick(p.byNode(this),b);b.stopPropagation()}),n(this.containerNode,n.selector(b,"focusin"),function(){a._onItemFocus(p.byNode(this))}));this.inherited(arguments)},
onKeyboardSearch:function(a,b,c,d){this.inherited(arguments);if(a&&(-1==d||a.popup&&1==d))this.onItemClick(a,b)},_keyboardSearchCompare:function(a,b){return a.shortcutKey?b==a.shortcutKey.toLowerCase()?-1:0:this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){this.set("selected",
this.currentPopupItem);this._stopPendingCloseTimer()},onItemHover:function(a){this.activated?(this.set("selected",a),a.popup&&(!a.disabled&&!this.hover_timer)&&(this.hover_timer=this.defer(function(){this._openItemPopup(a)},this.popupDelay))):Infinity>this.passivePopupDelay&&(this.passive_hover_timer&&this.passive_hover_timer.remove(),this.passive_hover_timer=this.defer(function(){this.onItemClick(a,{type:"click"})},this.passivePopupDelay));this._hoveredChild=a;a._set("hovering",!0)},_onChildDeselect:function(a){this._stopPopupTimer();
this.currentPopupItem==a&&(this._stopPendingCloseTimer(),this._pendingClose_timer=this.defer(function(){this.currentPopupItem=this._pendingClose_timer=null;a._closePopup()},this.popupDelay))},onItemUnhover:function(a){this._hoveredChild==a&&(this._hoveredChild=null);this.passive_hover_timer&&(this.passive_hover_timer.remove(),this.passive_hover_timer=null);a._set("hovering",!1)},_stopPopupTimer:function(){this.hover_timer&&(this.hover_timer=this.hover_timer.remove())},_stopPendingCloseTimer:function(){this._pendingClose_timer&&
(this._pendingClose_timer=this._pendingClose_timer.remove())},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){this.passive_hover_timer&&this.passive_hover_timer.remove();this.focusChild(a);if(a.disabled)return!1;if(a.popup){this.set("selected",a);this.set("activated",!0);var c=/^key/.test(b._origType||b.type)||0==b.clientX&&0==b.clientY;this._openItemPopup(a,c)}else this.onExecute(),a._onClick?a._onClick(b):a.onClick(b)},_openItemPopup:function(a,
b){if(a!=this.currentPopupItem){this.currentPopupItem&&(this._stopPendingCloseTimer(),this.currentPopupItem._closePopup());this._stopPopupTimer();var d=a.popup;d.parentMenu=this;this.own(this._mouseoverHandle=n.once(d.domNode,"mouseover",c.hitch(this,"_onPopupHover")));var e=this;a._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){b&&e.focusChild(a);e._cleanUp()},onExecute:c.hitch(this,"_cleanUp",!0),onClose:function(){e._mouseoverHandle&&(e._mouseoverHandle.remove(),
delete e._mouseoverHandle)}},b);this.currentPopupItem=a}},onOpen:function(){this.isShowingNow=!0;this.set("activated",!0)},onClose:function(){this.set("activated",!1);this.set("selected",null);this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();this.currentPopupItem&&(this.focused&&(b.set(this.selected.focusNode,"tabIndex",this.tabIndex),this.selected.focusNode.focus()),this.currentPopupItem._closePopup(),this.currentPopupItem=null)},_onItemFocus:function(a){if(this._hoveredChild&&
this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild);this.set("selected",a)},_onBlur:function(){this._cleanUp(!0);this.inherited(arguments)},_cleanUp:function(a){this._closeChild();"undefined"==typeof this.isShowingNow&&this.set("activated",!1);a&&this.set("selected",null)}})})},"dijit/_KeyNavContainer":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/keys dojo/_base/lang ./registry ./_Container ./_FocusMixin ./_KeyNavMixin".split(" "),function(g,
m,a,b,d,c,h,n,f,e){return m("dijit._KeyNavContainer",[f,e,n],{connectKeyNavHandlers:function(a,b){var e=this._keyNavCodes={},f=c.hitch(this,"focusPrev"),h=c.hitch(this,"focusNext");g.forEach(a,function(a){e[a]=f});g.forEach(b,function(a){e[a]=h});e[d.HOME]=c.hitch(this,"focusFirstChild");e[d.END]=c.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){b.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);g.forEach(this.getChildren(),
c.hitch(this,"_startupChild"))},addChild:function(a,b){this.inherited(arguments);this._startupChild(a)},_startupChild:function(a){a.set("tabIndex","-1")},_getFirst:function(){var a=this.getChildren();return a.length?a[0]:null},_getLast:function(){var a=this.getChildren();return a.length?a[a.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),!0)},childSelector:function(a){return(a=
h.byNode(a))&&a.getParent()==this}})})},"dijit/_KeyNavMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dijit/registry dijit/_FocusMixin".split(" "),function(g,m,a,b,d,c,h,n){return m("dijit._KeyNavMixin",n,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);a.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var f=this._keyNavCodes={};f[b.HOME]=d.hitch(this,"focusFirstChild");f[b.END]=d.hitch(this,
"focusLastChild");f[this.isLeftToRight()?b.LEFT_ARROW:b.RIGHT_ARROW]=d.hitch(this,"_onLeftArrow");f[this.isLeftToRight()?b.RIGHT_ARROW:b.LEFT_ARROW]=d.hitch(this,"_onRightArrow");f[b.UP_ARROW]=d.hitch(this,"_onUpArrow");f[b.DOWN_ARROW]=d.hitch(this,"_onDownArrow")}var e=this,f="string"==typeof this.childSelector?this.childSelector:d.hitch(this,"childSelector");this.own(c(this.domNode,"keypress",d.hitch(this,"_onContainerKeypress")),c(this.domNode,"keydown",d.hitch(this,"_onContainerKeydown")),c(this.domNode,
"focus",d.hitch(this,"_onContainerFocus")),c(this.containerNode,c.selector(f,"focusin"),function(a){e._onChildFocus(h.getEnclosingWidget(this),a)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},
focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(a,b){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),a.set("tabIndex",this.tabIndex),a.focus(b?"end":"start"))},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||this.focus()},_onFocus:function(){a.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(b){a.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild&&(this.focusedChild.set("tabIndex",
"-1"),this.lastFocusedChild=this.focusedChild,this._set("focusedChild",null));this.inherited(arguments)},_onChildFocus:function(a){a&&a!=this.focusedChild&&(this.focusedChild&&!this.focusedChild._destroyed&&this.focusedChild.set("tabIndex","-1"),a.set("tabIndex",this.tabIndex),this.lastFocused=a,this._set("focusedChild",a))},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(a,b,c,d){a&&this.focusChild(a)},_keyboardSearchCompare:function(a,b){var c=a.domNode,c=(a.label||(c.focusNode?
c.focusNode.label:"")||c.innerText||c.textContent||"").replace(/^\s+/,"").substr(0,b.length).toLowerCase();return b.length&&c==b?-1:0},_isFormElement:function(a){return"INPUT"===a.tagName||"TEXTAREA"===a.tagName||"SELECT"===a.tagName||"BUTTON"===a.tagName},_onContainerKeydown:function(a){if(!this._isFormElement(document.activeElement)){var c=this._keyNavCodes[a.keyCode];c?(c(a,this.focusedChild),a.stopPropagation(),a.preventDefault(),this._searchString=""):a.keyCode==b.SPACE&&(this._searchTimer&&
!a.ctrlKey&&!a.altKey&&!a.metaKey)&&(a.stopImmediatePropagation(),a.preventDefault(),this._keyboardSearch(a," "))}},_onContainerKeypress:function(a){if(!this._isFormElement(document.activeElement)&&!(a.charCode<=b.SPACE||a.ctrlKey||a.altKey||a.metaKey))a.preventDefault(),a.stopPropagation(),this._keyboardSearch(a,String.fromCharCode(a.charCode).toLowerCase())},_keyboardSearch:function(a,b){var c=null,g,h=0;d.hitch(this,function(){this._searchTimer&&this._searchTimer.remove();this._searchString+=b;
var a=/^(.)\1*$/.test(this._searchString)?1:this._searchString.length;g=this._searchString.substr(0,a);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var d=this.focusedChild||null;if(1==a||!d)if(d=this._getNextFocusableChild(d,1),!d)return;a=d;do{var f=this._keyboardSearchCompare(d,g);f&&0==h++&&(c=d);if(-1==f){h=-1;break}d=this._getNextFocusableChild(d,1)}while(d&&d!=a)})();this.onKeyboardSearch(c,a,g,h)},_onChildBlur:function(){},
_getNextFocusableChild:function(a,b){var c=a;do{if(a)a=this._getNext(a,b);else if(a=this[0<b?"_getFirst":"_getLast"](),!a)break;if(null!=a&&a!=c&&a.isFocusable())return a}while(a!=c);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(a,b){if(a)for(a=a.domNode;a;)if((a=a[0>b?"previousSibling":"nextSibling"])&&"getAttribute"in a){var c=h.byNode(a);if(c)return c}return null}})})},"dijit/PopupMenuBarItem":function(){define(["dojo/_base/declare","./PopupMenuItem",
"./MenuBarItem"],function(g,m,a){return g("dijit.PopupMenuBarItem",[m,a._MenuBarItemMixin],{})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),function(g,m,a,b,d,c,h){return g("dijit.PopupMenuItem",h,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var a=b("*",this.srcNodeRef);this.inherited(arguments,[a[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(b,
c){var e=this.popup;d.open(a.delegate(b,{popup:this.popup,around:this.domNode}));c&&e.focus&&e.focus()},_closePopup:function(){d.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var a=b("[widgetId]",this.dropDownContainer)[0];this.popup=c.byNode(a)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display=
"none";this.arrowWrapper&&m.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(a){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(a),delete this.popup);this.inherited(arguments)}})})},"dijit/MenuItem":function(){define("dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/_base/kernel dojo/sniff dojo/_base/lang ./_Widget ./_TemplatedMixin ./_Contained ./_CssStateMixin dojo/text!./templates/MenuItem.html".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s){h=g("dijit.MenuItem"+(c("dojo-bidi")?"_NoBidi":""),[n,f,e,p],{templateString:s,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(a){this._set("label",a);var b="",c;c=a.search(/{\S}/);if(0<=c){var b=a.charAt(c+1),d=a.substr(0,c);a=a.substr(c+3);c=d+b+a;a=d+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+b+"\x3c/span\x3e"+a}else c=a;this.domNode.setAttribute("aria-label",c+" "+this.accelKey);this.containerNode.innerHTML=a;this._set("shortcutKey",b)},iconClass:"dijitNoIcon",
_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this._set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);a.set(this.containerNode,"id",this.id+"_text");this.accelKeyNode&&a.set(this.accelKeyNode,"id",this.id+"_accel");m.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==c("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_setSelected:function(a){b.toggle(this.domNode,
"dijitMenuItemSelected",a)},setLabel:function(a){d.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},setDisabled:function(a){d.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(b){this.accelKeyNode&&(this.accelKeyNode.style.display=
b?"":"none",this.accelKeyNode.innerHTML=b,a.set(this.containerNode,"colSpan",b?"1":"2"));this._set("accelKey",b)}});c("dojo-bidi")&&(h=g("dijit.MenuItem",h,{_setLabelAttr:function(a){this.inherited(arguments);"auto"===this.textDir&&this.applyTextDir(this.textDirNode)}}));return h})},"dijit/MenuBarItem":function(){define(["dojo/_base/declare","./MenuItem","dojo/text!./templates/MenuBarItem.html"],function(g,m,a){a=g("dijit._MenuBarItemMixin",null,{templateString:a,_setIconClassAttr:null});g=g("dijit.MenuBarItem",
[m,a],{});g._MenuBarItemMixin=a;return g})},"dijit/Menu":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ./popup ./DropDownMenu dojo/ready".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v){p("dijit-legacy-requires")&&v(0,function(){g(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return a("dijit.Menu",w,{constructor:function(){this._bindings=
[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):m.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return u.get(this._iframeContentDocument(a))||this._iframeContentDocument(a).__parent__||a.name&&document.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||
a.name&&document.frames[a.name]&&document.frames[a.name].document||null},bindDomNode:function(a){a=b.byId(a,this.ownerDocument);var c;if("iframe"==a.tagName.toLowerCase()){var g=a;c=this._iframeContentWindow(g);c=s.body(c.document)}else c=a==s.body(this.ownerDocument)?this.ownerDocument.documentElement:a;var h={node:a,iframe:g};d.set(a,"_dijitMenu"+this.id,this._bindings.push(h));var m=f.hitch(this,function(a){var b=this.selector,c=b?function(a){return e.selector(b,a)}:function(a){return a},d=this;
return[e(a,c(this.leftClickToOpen?"click":"contextmenu"),function(a){a.stopPropagation();a.preventDefault();(new Date).getTime()<d._lastKeyDown+500||d._scheduleOpen(this,g,{x:a.pageX,y:a.pageY},a.target)}),e(a,c("keydown"),function(a){if(93==a.keyCode||a.shiftKey&&a.keyCode==n.F10||d.leftClickToOpen&&a.keyCode==n.SPACE)a.stopPropagation(),a.preventDefault(),d._scheduleOpen(this,g,null,a.target),d._lastKeyDown=(new Date).getTime()})]});h.connects=c?m(c):[];g&&(h.onloadHandler=f.hitch(this,function(){var a=
this._iframeContentWindow(g),a=s.body(a.document);h.connects=m(a)}),g.addEventListener?g.addEventListener("load",h.onloadHandler,!1):g.attachEvent("onload",h.onloadHandler))},unBindDomNode:function(a){var c;try{c=b.byId(a,this.ownerDocument)}catch(e){return}a="_dijitMenu"+this.id;if(c&&d.has(c,a)){for(var f=d.get(c,a)-1,g=this._bindings[f],h;h=g.connects.pop();)h.remove();(h=g.iframe)&&(h.removeEventListener?h.removeEventListener("load",g.onloadHandler,!1):h.detachEvent("onload",g.onloadHandler));
d.remove(c,a);delete this._bindings[f]}},_scheduleOpen:function(a,b,c,d){this._openTimer||(this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:d,delegatedTarget:a,iframe:b,coords:c})},1))},_openMyself:function(a){function d(){v.refocus&&w&&w.focus();t.close(v)}var e=a.target,f=a.iframe,g=a.coords,m=!g;this.currentTarget=a.delegatedTarget;if(g){if(f){a=c.position(f,!0);var e=this._iframeContentWindow(f),e=c.docScroll(e.document),n=h.getComputedStyle(f),s=h.toPixelValue,
u=(p("ie")&&p("quirks")?0:s(f,n.paddingLeft))+(p("ie")&&p("quirks")?s(f,n.borderLeftWidth):0),f=(p("ie")&&p("quirks")?0:s(f,n.paddingTop))+(p("ie")&&p("quirks")?s(f,n.borderTopWidth):0);g.x+=a.x+u-e.x;g.y+=a.y+f-e.y}}else g=c.position(e,!0),g.x+=10,g.y+=10;var v=this,f=this._focusManager.get("prevNode");a=this._focusManager.get("curNode");var w=!a||b.isDescendant(a,this.domNode)?f:a;t.open({popup:this,x:g.x,y:g.y,onExecute:d,onCancel:d,orient:this.isLeftToRight()?"L":"R"});this.focus();m||this.defer(function(){this._cleanUp(!0)});
this._onBlur=function(){this.inherited("_onBlur",arguments);t.close(this)}},destroy:function(){m.forEach(this._bindings,function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(g,m,a,b){return g("dijit.DropDownMenu",b,{templateString:a,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(a){this._moveToPopup(a);
a.stopPropagation();a.preventDefault()},_onLeftArrow:function(a){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else a.stopPropagation(),a.preventDefault()}})})},"esriPBI/widgets/ToolBar/ToolBar":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/on dojo/dom-construct dojo/dom-class dojo/dom-attr dojo/query dijit/MenuBar dijit/PopupMenuBarItem dijit/Menu dijit/MenuItem dijit/DropDownMenu dijit/PopupMenuItem dijit/MenuBarItem dijit/focus ../_ToolContainerMixin".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B){return g([e,B],{baseClass:"dijitMenuBar esriMapsMenuBar",menuItemType:"LabelOnly",_handles:[],_postCreated:!1,addTool:function(a,b,e){if(a){var f,g=a.get("label");this.store.mayHaveChildren(a)&&0<this.store.getChildren(a).length?("main"===this.toolCollectionId||"secondary"===this.toolCollectionId?(e=c.create("div",{"class":"esriMapsDropDownMenu"},e.domNode||e),"main"===this.toolCollectionId?(toolbarName=c.create("span",{"class":"esriMapsToolbarCommand esriMapsCommandIcon  esriDropdownButton mapStyleButton"},
e),c.create("span",{"class":"esriMapsCommandIconMapStyle"},toolbarName),c.create("span",{"class":"esriMapsCommandLabel",innerHTML:"Map style"},toolbarName),toolbarUl=c.create("ul",{"class":"menuListContainer mapStyleTools"},e)):"secondary"===this.toolCollectionId&&(toolbarName=c.create("span",{"class":"esriMapsToolbarCommand esriMapsCommandIcon esriDropdownButton analyticsButton"},e),c.create("span",{"class":"esriMapsCommandIconAnalytics"},toolbarName),c.create("span",{"class":"esriMapsCommandLabel",
innerHTML:"Analytics"},toolbarName),toolbarUl=c.create("ul",{"class":"menuListContainer analyticsTools"},e))):e=c.create("div",{"class":"esriMapsDropDownMenu"},e.domNode||e),this.observeTools(a,e)):(b=a.iconClass||"","LabelOnly"===this.menuItemType?f="main"===this.toolCollectionId||"secondary"===this.toolCollectionId?c.create("li",{"class":"esriMapsToolbarCommand",innerHTML:g},e.childNodes[1]):c.create("span",{"class":"esriMapsToolbarCommand",innerHTML:g},e):"IconLabel"===this.menuItemType&&b?(f=
"main"===this.toolCollectionId||"secondary"===this.toolCollectionId?c.create("li",{"class":"esriMapsToolbarCommand esriMapsCommandIcon "},e.childNodes[1]):c.create("span",{"class":"esriMapsToolbarCommand esriMapsCommandIcon"},e),c.create("span",{"class":b},f),c.create("span",{"class":"esriMapsCommandLabel",innerHTML:g},f)):"IconOnly"===this.menuItemType&&b&&(f=c.create("span",{"class":"esriMapsToolbarCommand esriMapsCommandIcon esriMapsCommandIconOnly",id:a.name,"aria-label":g,innerHTML:""},e),c.create("span",
{"class":b,"aria-label":g,innerHTML:""},f)),this.own(d(f,"click",m.hitch(this,function(b){b.stopPropagation();a.get("enabled")&&(a.execute(),this._applySelectedStyle(b.currentTarget))}))),this._attachCommand(void 0,a,f))}},_applySelectedStyle:function(a){f(".esriMapsToolbarCommand").filter(function(a){return!h.contains(a,"esriMapsCommandIconOnly")}).forEach(function(a){h.remove(a,"esriMapsSelectedCommand")});h.contains(a,"esriMapsCommandIconOnly")||h.add(a,"esriMapsSelectedCommand")},_attachCommand:function(a,
b,c){function d(){c.style.display=b.get("visible")?"":"none"}d();b.watch("visible",d);b.watch("toggle",function(){b.get("toggle")?h.add(c,"esriMapsSelectedCommand"):h.remove(c,"esriMapsSelectedCommand")});b.watch("enabled",function(){b.get("enabled")?h.remove(c,"disabled"):h.add(c,"disabled")});b.watch("tooltip",function(){n.set(c,"title",b.get("tooltip"))})}})})},"esriPBI/widgets/Infographics/Infographics":function(){define(["dojo/_base/lang","../../utils/mapUtility","dojo/topic","./Variables"],
function(g,m,a,b){function d(a,b){var c=m.getProperty(a,"infographics");return g.getObject(b,!1,c)}function c(b,c,d){var h=m.getProperty(b,"infographics");h||(h={});g.setObject(c,d,h);m.setProperty(b,"infographics",h);a.publish("infographic-save",c)}var h={bufferType:"radius",radius:{value:1,units:"miles"},driveTime:{value:1,units:"minutes"},comparisonLevel:"Admin1"};return{getDemographics:function(){return b.demographics},loadSettings:function(a){var b=d(a,"settings");b||(c(a,"settings",h),b=d(a,
"settings"));return b},loadCards:function(a){var b=d(a,"cards");b||(c(a,"cards",[]),b=[]);return b},store:c}})},"esriPBI/widgets/Infographics/Variables":function(){define(["dojo/i18n!./nls/Variables"],function(g){return{demographics:[{categoryName:g.nls_categoryPopulation,dataCollection:[{name:g.nls_collectionTotalPopulation,label:"US Total Population",id:"totalPopulation",type:"one",variables:[{id:"TOTPOP_CY",name:"2016 Total Population (Esri)",label:"2016 US Total Population (Esri)",dataCategory:"populationtotals"},
{id:"TOTPOP10",name:"2010 Total Population (Esri)",label:"2010 US Total Population (Esri)",dataCategory:"populationtotals"}]},{name:g.nls_collectionPopulationByGender,label:"2016 US Population by Gender",id:"populationByGender",type:"related",showBarChart:!0,variables:[{id:"MALES_CY",name:"2016 Male Population (Esri)",label:"Male",dataCategory:"5yearincrements"},{id:"FEMALES_CY",name:"2016 Female Population (Esri)",label:"Female",dataCategory:"5yearincrements"}]},{name:g.nls_collectionTotalHouseholds,
label:"US Total households",id:"totalHouseholds",type:"one",variables:[{id:"TOTHH_CY",name:"2016 Total Households (Esri)",label:"2016 US Total Households (Esri)",dataCategory:"householdtotals"},{id:"TOTHH10",name:"2010 Total Households (Esri)",label:"2010 US Total Households (Esri)",dataCategory:"householdtotals"}]},{name:g.nls_collectionAverageHouseholdSize,label:"US Average household size",id:"averageHouseholdSize",type:"one",variables:[{id:"AVGHHSZ_CY",name:"2016 Average Household Size (Esri)",
label:"2016 US Average Household Size (Esri)",dataCategory:"householdtotals"}]},{name:g.nls_collectionPopulationDensity,label:"US Population Density",id:"populationDensity",type:"one",variables:[{id:"POPDENS_CY",name:"2016 Population Density (Pop per Square Mile) (Esri)",label:"2016 US Population Density (Pop per Sq Mile)",dataCategory:"populationtotals"},{id:"POPDENS10",name:"2010 Population Density (Pop per Square Mile) (Esri)",label:"2010 US Population Density (Pop per Sq Mile)",dataCategory:"populationtotals"}]},
{name:g.nls_collectionPopulationGrpQtrs,label:"US Population in group quarters",id:"populationInGroupQuarters",type:"one",variables:[{id:"GQPOP_CY",name:"2016 Group Quarters Population (Esri)",label:"2016 US Group Quarters Population",dataCategory:"groupquarters"}]},{name:g.nls_collectionDiversityIndex,label:"US Diversity Index",id:"diversityIndex",type:"one",variables:[{id:"DIVINDX_CY",name:"2016 Diversity Index (Esri)",label:"2016 US Diversity Index",dataCategory:"policy"}]}]},{categoryName:g.nls_categoryAge,
dataCollection:[{name:g.nls_collectionMedianAge,label:"US Median age",id:"medianAge",type:"one",variables:[{id:"MEDAGE_CY",name:"2016 Median Age (Esri)",label:"2016 US Median Age (Esri)",dataCategory:"policy"}]},{name:g.nls_collectionTotalPopByAge,label:"2016 US Total Population by Age",id:"totalPopulationByAge",type:"related",showBarChart:!0,variables:[{id:"POP0_CY",name:"2016 Total Population Age 0-4 (Esri)",label:"0-4",dataCategory:"5yearincrements"},{id:"POP5_CY",name:"2016 Total Population Age 5-9 (Esri)",
label:"5-9",dataCategory:"5yearincrements"},{id:"POP10_CY",name:"2016 Total Population Age 10-14 (Esri)",label:"10-14",dataCategory:"5yearincrements"},{id:"POP15_CY",name:"2016 Total Population Age 15-19 (Esri)",label:"15-19",dataCategory:"5yearincrements"},{id:"POP20_CY",name:"2016 Total Population Age 20-24 (Esri)",label:"20-24",dataCategory:"5yearincrements"},{id:"POP25_CY",name:"2016 Total Population Age 25-29 (Esri)",label:"25-29",dataCategory:"5yearincrements"},{id:"POP30_CY",name:"2016 Total Population Age 30-34 (Esri)",
label:"30-34",dataCategory:"5yearincrements"},{id:"POP35_CY",name:"2016 Total Population Age 35-39 (Esri)",label:"35-39",dataCategory:"5yearincrements"},{id:"POP40_CY",name:"2016 Total Population Age 40-44 (Esri)",label:"40-44",dataCategory:"5yearincrements"},{id:"POP45_CY",name:"2016 Total Population Age 45-49 (Esri)",label:"45-49",dataCategory:"5yearincrements"},{id:"POP50_CY",name:"2016 Total Population Age 50-54 (Esri)",label:"50-54",dataCategory:"5yearincrements"},{id:"POP55_CY",name:"2016 Total Population Age 55-59 (Esri)",
label:"55-59",dataCategory:"5yearincrements"},{id:"POP60_CY",name:"2016 Total Population Age 60-64 (Esri)",label:"60-64",dataCategory:"5yearincrements"},{id:"POP65_CY",name:"2016 Total Population Age 65-69 (Esri)",label:"65-69",dataCategory:"5yearincrements"},{id:"POP70_CY",name:"2016 Total Population Age 70-74 (Esri)",label:"70-74",dataCategory:"5yearincrements"},{id:"POP75_CY",name:"2016 Total Population Age 75-79 (Esri)",label:"75-79",dataCategory:"5yearincrements"},{id:"POP80_CY",name:"2016 Total Population Age 80-84 (Esri)",
label:"80-84",dataCategory:"5yearincrements"}]},{name:g.nls_collectionPopOver18,label:"US Population over 18",id:"populationOver18",type:"one",variables:[{id:"POP18UP_CY",name:"2016 Total Population Age 18+ (Esri)",label:"2016 US Total Population Age 18+",dataCategory:"5yearincrements"}]},{name:g.nls_collectionChildrenUnder14,label:"US Children under 14",id:"childrenUnder14",type:"one",variables:[{id:"CHILD_CY",name:"2016 Children (Age \x3c14)",label:"2016 US Children under 14",dataCategory:"AtRisk"}]},
{name:g.nls_collectionMedianAgeByGender,label:"2016 US Median age by Gender",id:"medianAgeByGender",type:"related",showBarChart:!1,variables:[{id:"MEDMAGE_CY",name:"2016 Median Male Age (Esri)",label:"Male",dataCategory:"5yearincrements"},{id:"MEDFAGE_CY",name:"2016 Median Female Age (Esri)",label:"Female",dataCategory:"5yearincrements"}]}]},{categoryName:g.nls_categoryIncome,dataCollection:[{name:g.nls_collectionHouseholdIncome,label:"US Household Income",id:"householdIncome",type:"one",variables:[{id:"MEDHINC_CY",
name:"2016 Median Household Income (Esri)",label:"2016 US Median Household Income",dataCategory:"wealth"},{id:"AVGHINC_CY",name:"2016 Average Household Income (Esri)",label:"2016 US Average Household Income",dataCategory:"wealth"}]},{name:g.nls_collectionPerCapitaIncome,label:"US Per Capita Income",id:"perCapitaIncome",type:"one",variables:[{id:"PCI_CY",name:"2016 Per Capita Income (Esri)",label:"2016 US Per Capita Income",dataCategory:"wealth"}]},{name:g.nls_collectionMedDispIncByAge,label:"2016 US Median Disposable Income and Householder Age",
id:"medianDisposableIncomeByAge",type:"related",showBarChart:!1,variables:[{id:"MEDDIA15CY",name:"2016 Median Disposable Income and Householder Age 15-24 (Esri)",label:"15-24",dataCategory:"disposableincome"},{id:"MEDDIA25CY",name:"2016 Median Disposable Income and Householder Age 25-34 (Esri)",label:"25-34",dataCategory:"disposableincome"},{id:"MEDDIA35CY",name:"2016 Median Disposable Income and Householder Age 35-44 (Esri)",label:"35-44",dataCategory:"disposableincome"},{id:"MEDDIA45CY",name:"2016 Median Disposable Income and Householder Age 45-54 (Esri)",
label:"45-54",dataCategory:"disposableincome"},{id:"MEDDIA55CY",name:"2016 Median Disposable Income and Householder Age 55-64 (Esri)",label:"55-64",dataCategory:"disposableincome"},{id:"MEDDIA65CY",name:"2016 Median Disposable Income and Householder Age 65-74 (Esri)",label:"65-74",dataCategory:"disposableincome"},{id:"MEDDIA75CY",name:"2016 Median Disposable Income and Householder Age 75+ (Esri)",label:"75+",dataCategory:"disposableincome"}]}]},{categoryName:g.nls_categoryHomeOwnership,dataCollection:[{name:g.nls_collectionTotalHousingUnits,
label:"US Total Housing Units",id:"totalHousingUnits",type:"one",variables:[{id:"TOTHU_CY",name:"2016 Total Housing Units (Esri)",label:"2016 US Total Housing Units",dataCategory:"housingunittotals"}]},{name:g.nls_collectionHousingOccupation,label:"US Housing Occupation",id:"housingOccupation",type:"related",showBarChart:!0,variables:[{id:"OWNER_CY",name:"2016 Owner Occupied Housing Units (Esri)",label:"Owner",dataCategory:"ownerrenter"},{id:"RENTER_CY",name:"2016 Renter Occupied Housing Units (Esri)",
label:"Renter",dataCategory:"ownerrenter"},{id:"VACANT_CY",name:"2016 Vacant Housing Units (Esri)",label:"Vacant",dataCategory:"vacant"}]},{name:g.nls_collectionHomeValue,label:"US Home Value",id:"homeValue",type:"one",variables:[{id:"MEDVAL_CY",name:"2016 Median Home Value (Esri)",label:"2016 US Median Home Value (Esri)",dataCategory:"homevalue"},{id:"AVGVAL_CY",name:"2016 Average Home Value",label:"2016 US Average Home Value",dataCategory:"homevalue"}]}]},{categoryName:g.nls_categoryPresenceOfChildren,
dataCollection:[{name:g.nls_collectionTotalFamilyHouseholds,label:"US Total Family Households",id:"totalFamilyHouseholds",type:"one",variables:[{id:"FAMHH_CY",name:"2016 Total Family Households (Esri)",label:"2016 US Total Family Households (Esri)",dataCategory:"householdtotals"},{id:"FAMHH10",name:"2010 Total Family Households (U.S. Census)",label:"2010 US Total Family Households (US Census)",dataCategory:"householdtype"}]}]},{categoryName:g.nls_categoryTotalEducationalAttainment,dataCollection:[{name:g.nls_collectionTotalEducationalAttainment,
label:"US Total Educational Attainment",id:"educationalAttainment",type:"related",showBarChart:!0,variables:[{id:"NOHS_CY",name:"2016 Education: Less than 9th Grade (Esri)",label:"No High School",dataCategory:"educationalattainment"},{id:"SOMEHS_CY",name:"2016 Education: 9-12th Grade/No Diploma (Esri)",label:"Some High School",dataCategory:"educationalattainment"},{id:"HSGRAD_CY",name:"2016 Education: High School Diploma (Esri)",label:"High School Diploma",dataCategory:"educationalattainment"},{id:"GED_CY",
name:"2016 Education: GED/Alternative Credential (Esri)",label:"GED or Alternative Credential",dataCategory:"educationalattainment"},{id:"SMCOLL_CY",name:"2016 Education: Some College/No Degree (Esri)",label:"Some College or No Degree",dataCategory:"educationalattainment"},{id:"ASSCDEG_CY",name:"2016 Education: Associate's Degree (Esri)",label:"Associate's Degree",dataCategory:"educationalattainment"},{id:"BACHDEG_CY",label:"2016 Education: Bachelor's Degree (Esri)",name:"Bachelor's Degree",dataCategory:"educationalattainment"},
{id:"BACHDEG_CY",name:"2016 Education: Graduate/Professional Degree (Esri)",label:"Graduate Degree",dataCategory:"educationalattainment"},{id:"EDUCBASECY",name:"2016 Educational Attainment Base (Esri)",label:"Base",dataCategory:"educationalattainment"}]}]},{categoryName:g.nls_categoryMaritalStatus,dataCollection:[{name:g.nls_collectionTotalMaritalStatusAgeAbove15,label:"2016 US Total Marital Status Above 15",id:"totalMaritalStatus",type:"related",showBarChart:!0,variables:[{id:"NEVMARR_CY",name:"2016 Population Age 15+: Never Married (Esri)",
label:"Never Married",dataCategory:"maritalstatustotals"},{id:"MARRIED_CY",name:"2016 Population Age 15+: Married (Esri)",label:"Married",dataCategory:"maritalstatustotals"},{id:"WIDOWED_CY",name:"2016 Population Age 15+: Widowed (Esri)",label:"Widowed",dataCategory:"maritalstatustotals"},{id:"DIVORCD_CY",name:"2016 Population Age 15+: Divorced (Esri)",label:"Divorced",dataCategory:"maritalstatustotals"},{id:"MARBASE_CY",name:"2016 Marital Status Base (Esri)",label:"Base",dataCategory:"maritalstatustotals"}]}]}]}})},
"esriPBI/widgets/Infographics/CardManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style dojo/dom-class dojo/dom-geometry dijit/registry dojo/Deferred dojo/promise/all dojo/when dojo/on dojo/query dojo/dnd/Source dojo/dnd/Avatar esri/request dojo/topic dojo/Stateful esri/lang esriPBI/utils/serviceProxyHelper ./Infographics ./OneVariable ./RelatedVariable ./enrichUtil dojo/i18n!./nls/CardManager esriPBI/layout/_Layout".split(" "),function(g,
m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x,B,A,C,z,F,H,J,I,K){var M;return g([B],{app:null,queryGeometry:null,container:null,_dndSource:null,constructor:function(b){m.mixin(this,b);this.infographicSettings=z.loadSettings(this.app.mapManager.map);this.container&&(this.containerNode=this.container.domNode,this._dndSource=new t(this.containerNode,{withHandles:!0,creator:this._dndCreator,singular:!0,checkAcceptance:m.hitch(this,function(a,b){return this.inEditMode&&this._dndSource===a})}),s(this._dndSource,"DndStart",
m.hitch(this,function(a){a===this._dndSource&&(this._oldGenerateText=w.prototype._generateText,w.prototype._generateText=m.hitch(this,this._generateText),this._customGenerateText=!0)})),s(this._dndSource,"DndDrop",m.hitch(this,function(a){a===this._dndSource&&this.save()})),s(this._dndSource,"DndCancel",m.hitch(this,function(){this._customGenerateText&&(w.prototype._generateText=this._oldGenerateText,this._customGenerateText=!1)})));this.app.on("edit-mode",m.hitch(this,function(b){this.inEditMode=
b.inFocusEditMode;a.forEach(this._getCards(),function(a){a.set("editMode",this.inEditMode)},this);this._toggleEditState();this._repositionTools()}))},postscript:function(){this._map=this.app.mapManager.map;this.watch("queryGeometry",this._getInfographics);x.subscribe("infographic-setting",m.hitch(this,function(){0<this._getPBISelectedFeatures().length&&("driveTime"===this.infographicSettings.bufferType&&10<this._getPBISelectedFeatures().length?this.app.layoutManager.layout.showMessage("",I.selectionLimit,
K.MessageTypes.warning):this.set("queryGeometry",{features:this._getPBISelectedFeatures()}))}));x.subscribe("powerbilayer-selection",m.hitch(this,function(a){var b,c=this._map.extent;if(0<a.features.length)"driveTime"===this.infographicSettings.bufferType&&10<a.features.length?this.app.layoutManager.layout.showMessage("",I.selectionLimit,K.MessageTypes.warning):b={features:a.features};else if(0===a.features.length&&this.queryGeometry&&(this.queryGeometry.extent&&this.queryGeometry.extent!==c||this.queryGeometry.features))b=
{extent:c};b&&this.set("queryGeometry",b)}));this._map.on("extent-change",m.hitch(this,function(a){!(0<this._getPBISelectedFeatures().length)&&(a.delta&&0!==a.delta.x&&0!==a.delta.y||a.levelChange)&&this.set("queryGeometry",{extent:a.extent})}));this._map.on("resize",m.hitch(this,this._handleResizing))},createInfographicCard:function(b){var c=m.clone(this._getDataCollection(b)),d=a.map(c.variables,function(a){return a.dataCategory+"."+a.id});p(this._performEnrichment(d),m.hitch(this,function(a){this._createCard({cardId:b,
result:a,collection:c})}))},reviveSavedCards:function(b){var c={},d={};a.forEach(b,function(b){var e=d[b.cardId]=m.clone(this._getDataCollection(b.cardId)),e=a.map(e.variables,function(a){return a.dataCategory+"."+a.id});c[b.cardId]=this._performEnrichment(e)},this);e(c).then(m.hitch(this,function(a){for(var c=0;c<b.length;c++){var e=b[c].cardId;this._createCard({cardId:e,result:a[e],collection:d[e]},!0)}}))},removeInfographicCard:function(a){if(a=this._getCard(a))this.containerNode.removeChild(a.domNode.parentNode),
a.destroy();this._repositionTools();this.save()},save:function(){for(var a=[],b=this._dndSource.getAllNodes(),c=0;c<b.length;c++){var d={},e=n.byNode(b[c].firstChild);d.cardId=e.get("cardId");if(e=e.get("selectedVariable"))d.selectedVariable=e;a.push(d)}z.store(this.app.mapManager.map,"cards",a)},_createCard:function(a,b){var c=a.result,d=a.collection;delete a.result;delete a.collection;A.isDefined(this.inEditMode)||(this.inEditMode=this.app.inFocusEditMode);c&&c.actual&&(m.mixin(a,{variableData:d.variables,
variableValues:c,label:d.label,editMode:this.inEditMode}),"related"===d.type?(m.mixin(a,d.showBarChart),c=new H(a)):c=new F(a),c.startup(),c.on("variable-changed",m.hitch(this,function(){this.save()})),this._dndSource.insertNodes(!1,[c.domNode],!b),this._toggleEditState(),this._repositionTools(),this._handleResizing(),b||this.save())},_getPBISelectedFeatures:function(){return this.app.mapManager.getPowerBILayer()&&this.app.mapManager.getPowerBILayer().getSelectedFeatures()},_getInfographics:function(){if(0!==
this._getCards().length){var b={};m.mixin(b,this.queryGeometry);b.features&&m.mixin(b,this.infographicSettings);var c=this._getAnalysisVariables(),d=this;this._performEnrichment(c,b).then(function(b){a.forEach(d._getCards(),function(a){var c=a.get("variableData"),c=d._getVariableValues(c,b);a.set("variableValues",c)})})}},_performEnrichment:function(a,b){var c=new f;if(!a)return c.reject(),c;if(!b){b={};var d=this._getPBISelectedFeatures();0<d.length&&10>=d.length&&"driveTime"!==this.infographicSettings.bufferType?
(m.mixin(b,{features:d}),m.mixin(b,this.infographicSettings)):m.mixin(b,{extent:this._map.extent})}b.analysisVariables=a;p(J.performEnrich(b),function(a){c.resolve(a)});return c},_dndCreator:function(a,d){var e=b.create("div");e.id=dojo.dnd.getUniqueId();c.add(e,"dojoDndItem");"avatar"!==d&&b.place(a,e);return{node:e,data:a,type:"cards"}},_generateText:function(){return this._dndSource&&this._dndSource.getSelectedNodes()[0]&&this._dndSource.getSelectedNodes()[0].firstChild?n.byNode(this._dndSource.getSelectedNodes()[0].firstChild).get("label"):
""},_getCards:function(){return this.container.getChildren()},_getCard:function(b){var c=null;a.some(this._getCards(),function(a){if(a.get("cardId")===b)return c=a,!0});return c},_toggleEditState:function(){c.toggle(this.containerNode,"esriMapsInfographicsEditMode",this.inEditMode)},_handleResizing:function(){250>this._map.width?(M||(M=b.create("div",{"class":"esriMapsInfographicsFullSize"},this._map.root)),d.set(this.containerNode,"width","100%"),d.set(this.containerNode,"height","100%"),a.forEach(this._getCards(),
function(a){d.set(a.domNode,"width","calc(100% - 21px)")})):(M&&(c.remove(M,"esriMapsInfographicsFullSize"),b.destroy(M),M=null),d.set(this.containerNode,"width",""),d.set(this.containerNode,"height",""),a.forEach(this._getCards(),function(a){d.set(a.domNode,"width","")}))},_repositionTools:function(){if(this.container){var a=u(".esriSimpleSlider",this.app.mapManager.map.root)[0],b=u(".selectionToolContainer",this.app.mapManager.map.root)[0];h.getMarginBox(a);var c=h.getMarginBox(this.containerNode).w;
0<c?(d.set(a,"right",c+8+"px"),d.set(b,"right",c+8+"px")):(d.set(a,"right",""),d.set(b,"right",""))}},_getVariableValues:function(b,c){if(c){var d=m.clone(c);delete d.actual;delete d.comparison;d.fields=a.filter(d.fields,function(c){return a.some(b,function(a){return a.id===c.name})});d.actual={};a.forEach(b,function(a){a=a.id;d.actual[a]=c.actual[a];c.comparison&&(d.comparison||(d.comparison={}),d.comparison[a]=c.comparison[a])});return d}},_getDataCollection:function(a){for(var b=z.getDemographics(),
c=0;c<b.length;c++)for(var d=b[c],e=0;e<d.dataCollection.length;e++){var f=d.dataCollection[e];if(f.id===a)return f}},_getAnalysisVariables:function(){var b=[];a.forEach(this._getCards(),function(c){c=c.get("variableData");a.forEach(c,function(c){-1===a.indexOf(b,c.id)&&b.push(c.dataCategory+"."+c.id)})});return b}})})},"dojo/dnd/Source":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom-class ../dom-geometry ../mouse ../ready ../topic ./common ./Selector ./Manager".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s){a.isAsync||n(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var u=m("dojo.dnd.Source",p,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(a,c){b.mixin(this,b.mixin({},c));var e=this.accept;if(e.length){this.accept={};for(var g=0;g<e.length;++g)this.accept[e[g]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;
this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&d.add(this.node,"dojoDndSource");this.targetState="";this.accept&&d.add(this.node,"dojoDndTarget");this.horizontal&&d.add(this.node,"dojoDndHorizontal");this.topics=[f.subscribe("/dnd/source/over",b.hitch(this,"onDndSourceOver")),f.subscribe("/dnd/start",b.hitch(this,"onDndStart")),f.subscribe("/dnd/drop",b.hitch(this,"onDndDrop")),f.subscribe("/dnd/cancel",b.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,b){if(this==
a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,e=!1,f=0;f<d.length;++f)if(d[f]in this.accept){e=!0;break}if(!e)return!1}return!0},copyState:function(a,b){if(a)return!0;2>arguments.length&&(b=this==s.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){u.superclass.destroy.call(this);g.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(a){if(!(this.isDragging&&
"Disabled"==this.targetState)){u.superclass.onMouseMove.call(this,a);var b=s.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var d=this.getSelectedNodes();d.length&&b.startDrag(this,d,this.copyState(e.getCopyKeyState(a),!0))}if(this.isDragging){d=!1;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current)this.targetBox=c.position(this.current,!0);d=this.horizontal?a.pageX-this.targetBox.x<
this.targetBox.w/2==c.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2}if(this.current!=this.targetAnchor||d!=this.before)this._markTargetAnchor(d),b.canDrop(!this.current||b.source!=this||!(this.current.id in this.selection))}}},onMouseDown:function(a){if(!this.mouseDown&&this._legalMouseDown(a)&&(!this.skipForm||!e.isFormElement(a)))this.mouseDown=!0,this._lastX=a.pageX,this._lastY=a.pageY,u.superclass.onMouseDown.call(this,a)},onMouseUp:function(a){this.mouseDown&&
(this.mouseDown=!1,u.superclass.onMouseUp.call(this,a))},onDndSourceOver:function(a){this!==a?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(a=s.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==a?c?"Copied":"Moved":"");b=this.accept&&this.checkAcceptance(a,b);this._changeState("Target",b?
"":"Disabled");this==a&&s.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,d){if(this==d)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){this.targetAnchor&&(this._unmarkTargetAnchor(),this.targetAnchor=null);this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(a,b,c){var d=this._normalizedCreator;
this._normalizedCreator=this.creator?function(b,c){return d.call(this,a.getItem(b.id).data,c)}:c?function(b){var c=a.getItem(b.id);b=b.cloneNode(!0);b.id=e.getUniqueId();return{node:b,data:c.data,type:c.type}}:function(b){var c=a.getItem(b.id);a.delItem(b.id);return{node:b,data:c.data,type:c.type}};this.selectNone();!c&&!this.creator&&a.selectNone();this.insertNodes(!0,b,this.before,this.current);!c&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=d},onDropInternal:function(a,b){var c=
this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(b)this._normalizedCreator=this.creator?function(a,b){return c.call(this,this.getItem(a.id).data,b)}:function(a){var b=this.getItem(a.id);a=a.cloneNode(!0);a.id=e.getUniqueId();return{node:a,data:b.data,type:b.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,a,this.before,this.current);this._normalizedCreator=
c}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){u.superclass.onOverEvent.call(this);s.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){u.superclass.onOutEvent.call(this);s.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){this.current==this.targetAnchor&&this.before==a||(this.targetAnchor&&this._removeItemClass(this.targetAnchor,
this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After"))},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetBox=this.targetAnchor=null,this.before=!0)},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!h.isLeft(a))return!1;
if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(d.contains(a,"dojoDndHandle"))return!0;if(d.contains(a,"dojoDndItem")||d.contains(a,"dojoDndIgnore"))break}return!1}});return u})},"dojo/dnd/Selector":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../dom ../dom-construct ../mouse ../_base/NodeList ../on ../touch ./common ./Container".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s){var u=m("dojo.dnd.Selector",s,{constructor:function(a,c){c||
(c={});this.singular=c.singular;this.autoSync=c.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(f(this.node,e.press,b.hitch(this,"onMouseDown")),f(this.node,e.release,b.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var a=new n,b=p._empty,c;for(c in this.selection)c in b||a.push(d.byId(c));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(a,b){this._addItemClass(d.byId(b),
"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=p._empty,b;for(b in this.selection)if(!(b in a)){var e=d.byId(b);this.delItem(b);c.destroy(e)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(b,c){c=c||a.global;var d=this.selection,e=p._empty,f;for(f in d)f in e||b.call(c,this.getItem(f),f,this)},sync:function(){u.superclass.sync.call(this);this.anchor&&!this.getItem(this.anchor.id)&&(this.anchor=null);var a=[],b=p._empty,
c;for(c in this.selection)c in b||this.getItem(c)||a.push(c);g.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,b,c,d){var e=this._normalizedCreator;this._normalizedCreator=function(b,c){var d=e.call(this,b,c);a?(this.anchor?this.anchor!=d.node&&(this._removeItemClass(d.node,"Anchor"),this._addItemClass(d.node,"Selected")):(this.anchor=d.node,this._removeItemClass(d.node,"Selected"),this._addItemClass(this.anchor,"Anchor")),this.selection[d.node.id]=1):(this._removeItemClass(d.node,
"Selected"),this._removeItemClass(d.node,"Anchor"));return d};u.superclass.insertNodes.call(this,b,c,d);this._normalizedCreator=e;return this},destroy:function(){u.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!p.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=!0,h.isLeft(a)&&(a.stopPropagation(),a.preventDefault());else{if(!this.singular&&a.shiftKey){p.getCopyKeyState(a)||
this._removeSelection();var b=this.getAllNodes();if(b.length&&(this.anchor||(this.anchor=b[0],this._addItemClass(this.anchor,"Anchor")),this.selection[this.anchor.id]=1,this.anchor!=this.current)){for(var c=0,d;c<b.length&&!(d=b[c],d==this.anchor||d==this.current);++c);for(++c;c<b.length;++c){d=b[c];if(d==this.anchor||d==this.current)break;this._addItemClass(d,"Selected");this.selection[d.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}else this.singular?this.anchor==
this.current?p.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1):p.getCopyKeyState(a)?this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),
this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1):this.current.id in this.selection||(this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);a.stopPropagation();a.preventDefault()}},onMouseUp:function(){this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current&&(this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1))},
onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=f(this.node,e.move,b.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var a=p._empty,b;for(b in this.selection)if(!(b in a)){var c=d.byId(b);c&&this._removeItemClass(c,"Selected")}this.selection={};return this},_removeAnchor:function(){this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),
this.anchor=null);return this}});return u})},"dojo/dnd/Container":function(){define("../_base/array ../_base/declare ../_base/kernel ../_base/lang ../_base/window ../dom ../dom-class ../dom-construct ../Evented ../has ../on ../query ../touch ./common".split(" "),function(g,m,a,b,d,c,h,n,f,e,p,s,u,t){m=m("dojo.dnd.Container",f,{skipForm:!1,allowNested:!1,constructor:function(a,d){this.node=c.byId(a);d||(d={});this.creator=d.creator||null;this.skipForm=d.skipForm;this.parent=d.dropParent&&c.byId(d.dropParent);
this.map={};this.current=null;this.containerState="";h.add(this.node,"dojoDndContainer");(!d||!d._skipStartup)&&this.startup();this.events=[p(this.node,u.over,b.hitch(this,"onMouseOver")),p(this.node,u.out,b.hitch(this,"onMouseOut")),p(this.node,"dragstart",b.hitch(this,"onSelectStart")),p(this.node,"selectstart",b.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(b,
c){c=c||a.global;var d=this.map,e=t._empty,f;for(f in d)f in e||b.call(c,d[f],f,this);return c},clearItems:function(){this.map={}},getAllNodes:function(){return s((this.allowNested?"":"\x3e ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=t.getUniqueId();var c=b.getAttribute("dndType"),d=b.getAttribute("dndData");a[b.id]={data:d||b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);
this.map=a;return this},insertNodes:function(a,b,c){this.parent.firstChild?b?c||(c=this.parent.firstChild):c&&(c=c.nextSibling):c=null;var d;if(c)for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),c.parentNode.insertBefore(d.node,c);else for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),this.parent.appendChild(d.node);return this},destroy:function(){g.forEach(this.events,function(a){a.remove()});
this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");a&&a.length&&(this.parent=a[0])}this.defaultCreator=t._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&b!=this.node;)try{b=b.parentNode}catch(c){b=null}b||(this._changeState("Container",
"Over"),this.onOverEvent());b=this._getChildByEvent(a);this.current!=b&&(this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b)},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=null}}this.current&&(this._removeItemClass(this.current,"Over"),this.current=null);this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){if(!this.skipForm||!t.isFormElement(a))a.stopPropagation(),
a.preventDefault()},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,b){var c="dojoDnd"+a,d=a.toLowerCase()+"State";h.replace(this.node,c+b,c+this[d]);this[d]=b},_addItemClass:function(a,b){h.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){h.remove(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if((b==this.parent||this.allowNested)&&h.contains(a,"dojoDndItem"))return a;return null},_normalizedCreator:function(a,
c){var d=(this.creator||this.defaultCreator).call(this,a,c);b.isArray(d.type)||(d.type=["text"]);d.node.id||(d.node.id=t.getUniqueId());h.add(d.node,"dojoDndItem");return d}});t._createNode=function(a){return!a?t._createSpan:function(b){return n.create(a,{innerHTML:b})}};t._createTrTd=function(a){var b=n.create("tr");n.create("td",{innerHTML:a},b);return b};t._createSpan=function(a){return n.create("span",{innerHTML:a})};t._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};t._defaultCreator=
function(a){a=a.tagName.toLowerCase();var c="tbody"==a||"thead"==a?t._createTrTd:t._createNode(t._defaultCreatorNodes[a]);return function(a,d){var e=a&&b.isObject(a),f,g;e&&a.tagName&&a.nodeType&&a.getAttribute?(f=a.getAttribute("dndData")||a.innerHTML,e=(e=a.getAttribute("dndType"))?e.split(/\s*,\s*/):["text"],g=a):(f=e&&a.data?a.data:a,e=e&&a.type?a.type:["text"],g=("avatar"==d?t._createSpan:c)(String(f)));g.id||(g.id=t.getUniqueId());return{node:g,data:f,type:e}}};return m})},"dojo/dnd/Manager":function(){define("../_base/array ../_base/declare ../_base/lang ../_base/window ../dom-class ../Evented ../has ../keys ../on ../topic ../touch ./common ./autoscroll ./Avatar".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t){var w=m("dojo.dnd.Manager",[c],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:h("touch")?0:16,OFFSET_Y:h("touch")?-64:16,overSource:function(a){this.avatar&&(this.target=a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=Boolean(this.target),this.avatar.update());e.publish("/dnd/source/over",a)},outSource:function(a){this.avatar?this.target==a&&(this.target=null,this.canDropFlag=
!1,this.avatar.update(),e.publish("/dnd/source/over",null)):e.publish("/dnd/source/over",null)},startDrag:function(c,g,h){function m(a){a.preventDefault();a.stopPropagation()}u.autoScrollStart(b.doc);this.source=c;this.nodes=g;this.copy=Boolean(h);this.avatar=this.makeAvatar();b.body().appendChild(this.avatar.node);e.publish("/dnd/start",c,g,this.copy);this.events=[f(b.doc,p.move,a.hitch(this,"onMouseMove")),f(b.doc,p.release,a.hitch(this,"onMouseUp")),f(b.doc,"keydown",a.hitch(this,"onKeyDown")),
f(b.doc,"keyup",a.hitch(this,"onKeyUp")),f(b.doc,"dragstart",m),f(b.body(),"selectstart",m)];d.add(b.body(),"dojoDnd"+(h?"Copy":"Move"))},canDrop:function(a){a=Boolean(this.target&&a);this.canDropFlag!=a&&(this.canDropFlag=a,this.avatar.update())},stopDrag:function(){d.remove(b.body(),["dojoDndCopy","dojoDndMove"]);g.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new t(this)},updateAvatar:function(){this.avatar.update()},
onMouseMove:function(a){var b=this.avatar;b&&(u.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",b.top=a.pageY+this.OFFSET_Y+"px",b=Boolean(this.source.copyState(s.getCopyKeyState(a))),this.copy!=b&&this._setCopyStatus(b));h("touch")&&a.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&this.canDropFlag){var b=Boolean(this.source.copyState(s.getCopyKeyState(a)));e.publish("/dnd/drop/before",this.source,this.nodes,b,this.target,a);e.publish("/dnd/drop",this.source,
this.nodes,b,this.target,a)}else e.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case n.CTRL:a=Boolean(this.source.copyState(!0));this.copy!=a&&this._setCopyStatus(a);break;case n.ESCAPE:e.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==n.CTRL&&(a=Boolean(this.source.copyState(!1)),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();
d.replace(b.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});s._manager=null;w.manager=s.manager=function(){s._manager||(s._manager=new w);return s._manager};return w})},"dojo/dnd/Avatar":function(){define("../_base/declare ../_base/window ../dom ../dom-attr ../dom-class ../dom-construct ../hccss ../query".split(" "),function(g,m,a,b,d,c,h,n){return g("dojo.dnd.Avatar",null,{constructor:function(a){this.manager=a;this.construct()},construct:function(){var a=c.create("table",
{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),d=this.manager.source,g,m=c.create("tbody",null,a),n=c.create("tr",null,m),t=c.create("td",null,n),w=Math.min(5,this.manager.nodes.length),v=0;h("highcontrast")&&c.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},t);c.create("span",{innerHTML:d.generateText?this._generateText():""},t);for(b.set(n,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});v<w;++v)d.creator?g=d._normalizedCreator(d.getItem(this.manager.nodes[v].id).data,
"avatar").node:(g=this.manager.nodes[v].cloneNode(!0),"tr"==g.tagName.toLowerCase()&&(n=c.create("table"),c.create("tbody",null,n).appendChild(g),g=n)),g.id="",n=c.create("tr",null,m),t=c.create("td",null,n),t.appendChild(g),b.set(n,{"class":"dojoDndAvatarItem",style:{opacity:(9-v)/10}});this.node=a},destroy:function(){c.destroy(this.node);this.node=!1},update:function(){d.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(h("highcontrast")){var b=a.byId("a11yIcon"),c="+";this.manager.canDropFlag&&
!this.manager.copy?c="\x3c ":!this.manager.canDropFlag&&!this.manager.copy?c="o":this.manager.canDropFlag||(c="x");b.innerHTML=c}n("tr.dojoDndAvatarHeader td span"+(h("highcontrast")?" span":""),this.node).forEach(function(a){a.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},"esriPBI/widgets/Infographics/OneVariable":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-class dojo/dom-construct dojo/number dojo/string dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/OneVariable.html dojo/i18n!./nls/OneVariable ./tooltip".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s){return g([n,f],{templateString:e,nls:p,editMode:!1,variableData:null,variableValues:null,selectedVariable:null,constructor:function(a){m.mixin(this,a)},postCreate:function(){this.inherited(arguments);this._initSelect();this._updateUI();this.watch("editMode",m.hitch(this,this._updateUI));this.watch("variableValues",m.hitch(this,this._updateSelectedVariableInfo))},destroy:function(){this.selectedVariable=this.variableData=this.variableValues=null;d.destroy(this.variableList);
this.variableList=null},_initSelect:function(){this.variableList=d.create("select",{"class":"infographicsVariableList",onchange:m.hitch(this,this._onSelectedVariableChange)},this._variablesListDiv);for(var a=0;a<this.variableData.length;a++){var b={value:this.variableData[a].id,innerHTML:this.variableData[a].label};0===a&&(b.selected=!0);d.create("option",b,this.variableList)}this.selectedVariable=this.variableData[0].id;this._updateSelectedVariableInfo()},_showPopup:function(a){s.show(p.multipleAreas,
a.target)},_onSelectedVariableChange:function(a){this.selectedVariable=a.target.value;this._updateSelectedVariableInfo();this.emit("variable-changed")},_updateSelectedVariableInfo:function(){var d=a.filter(this.variableData,m.hitch(this,function(a){return a.id===this.selectedVariable}));this._selectedVariableLabel.innerHTML=d[0].label.toUpperCase()||"";if(this.variableValues&&(this._distanceLabel.innerHTML=this._getDistanceLabel(),this._selectedVariableValue.innerHTML=c.format(this.variableValues.actual[this.selectedVariable])||
" -- ",b.toggle(this._infographicsComparisonDisplay,"displayNone",!this.variableValues.comparison),this.variableValues.comparison)){b.toggle(this._infoIcon,"displayNone",!this.variableValues.hasMultipleComparisonAreas);var d=this.variableValues.hasMultipleComparisonAreas?p.notApplicable:this.variableValues.geographyName.toUpperCase(),e=this.variableValues.hasMultipleComparisonAreas?"--":c.format(this.variableValues.comparison[this.selectedVariable]);this._geographyName.innerHTML=d;this._comparisonValue.innerHTML=
e}},_getDistanceLabel:function(){return("point"===this.variableValues.geometryType?h.substitute(p.defaultSelectLabel,[this.variableValues.distance,this.variableValues.units]):"polygon"===this.variableValues.geometryType?p.polygonSelectLabel:p.extentLabel).toUpperCase()},_updateUI:function(){var a=this.get("editMode");b.toggle(this._selectedVariableLabel,"displayNone",a);b.toggle(this.domNode,"cardContainerEditMode",a);b.toggle(this._variablesListDiv,"displayNone",!a);b.toggle(this._dragHandle,"displayNone",
!a)}})})},"esriPBI/widgets/Infographics/tooltip":function(){define(["dijit/TooltipDialog","dijit/popup"],function(g,m){return{show:function(a,b){if(a&&b){var d=new g({content:a,onMouseLeave:function(){m.close(d);d&&(d.destroy(),d=null)}});m.open({popup:d,around:b});var c=setTimeout(function(){clearTimeout(c);m.close(d);d&&(d.destroy(),d=null)},5E3)}}}})},"esriPBI/widgets/Infographics/RelatedVariable":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-class dojo/dom-attr dojo/query dojo/number dijit/registry dijit/_WidgetBase dijit/_TemplatedMixin dijit/form/CheckBox ./Bar ./tooltip dojo/i18n!./nls/RelatedVariable dojo/string dojo/text!./templates/RelatedVariable.html".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x){return g([e,p],{templateString:x,nls:w,editMode:!1,variableData:null,variableValues:null,selectedVariable:null,showBarChart:!0,selectionColor:"#374649",comparisonColor:"#3599B8",constructor:function(a){m.mixin(this,a)},postMixInProperties:function(){this.label=this.label.toUpperCase()},postCreate:function(){this._initSelectedVariables();this._buildUI();this.watch("editMode",m.hitch(this,this._buildUI));this.watch("variableValues",m.hitch(this,this._buildUI))},
destroy:function(){this.selectedVariable=this.variableValues=this.variableData=null},_initSelectedVariables:function(){this.selectedVariable||(this.selectedVariable={},a.forEach(this.variableData,function(a){this.selectedVariable[a.id]=!0},this))},_buildUI:function(){var c=this;b.empty(c._tableContainer);b.empty(c._selectAllChecboxDiv);c._selectAllCheckbox=null;var e=b.create("table",{},c._tableContainer);c.variableValues&&(c._distanceLabel.innerHTML=c._getDistanceLabel(),d.toggle(c._legend,"displayNone",
!(c.showBarChart&&c.variableValues.comparison)),c.showBarChart&&c.variableValues.comparison&&(d.toggle(this._infoIcon,"displayNone",!this.variableValues.hasMultipleComparisonAreas),c._comparisonLegendLabel.innerHTML=c.variableValues.hasMultipleComparisonAreas?w.notApplicable:c.variableValues.geographyName.toUpperCase()),c._calculateTotalofValues());d.toggle(this._selectAllChecboxDiv,"displayNone",!c.editMode);d.toggle(this._dragHandle,"displayNone",!c.editMode);d.toggle(this.domNode,"cardContainerEditMode",
c.editMode);c.editMode&&this._initSelectAllCheckbox();a.forEach(function(){return c.editMode?c.variableData:a.filter(c.variableData,function(a){return c.selectedVariable&&c.selectedVariable[a.id]})}(),function(a){var d=a.id,f=a.label;a=b.create("tr",{},e);if(c.editMode){var g=b.create("td",{style:"width: 24px;"},a),g=b.create("div",{},g);(new s({"class":"pbiCheckbox12",name:d,checked:c.editMode&&c.selectedVariable&&c.selectedVariable[d]?!0:!1,onClick:m.hitch(c,c._variableCheckClick,d)},g)).startup()}b.create("td",
{style:"text-align: left;",innerHTML:f},a);f=c.variableValues&&c.variableValues.actual&&c.variableValues.actual[d];b.create("td",{style:"text-align: right;",innerHTML:n.format(f)||"--"},a);c.showBarChart&&(a=b.create("tr",{},e),c.editMode&&b.create("td",{},a),a=b.create("td",{colSpan:2},a),c.variableValues&&(g=b.create("div",{},a),(new u({percent:100*(f/c.variableValues.totalActual)+"%",color:c.selectionColor},g)).startup()),c.variableValues&&c.variableValues.comparison&&(f={},a=b.create("div",{},
a),c.variableValues.hasMultipleComparisonAreas||(f.percent=100*(c.variableValues.comparison[d]/c.variableValues.totalComparison)+"%",f.color=c.comparisonColor),(new u(f,a)).startup()))})},_getDistanceLabel:function(){return("point"===this.variableValues.geometryType?v.substitute(w.defaultSelectLabel,[this.variableValues.distance,this.variableValues.units]):"polygon"===this.variableValues.geometryType?w.polygonSelectLabel:w.extentLabel).toUpperCase()},_showPopup:function(a){t.show(w.multipleAreas,
a.target)},_variableCheckClick:function(b,d){var e=c.get(d.target,"checked");this.selectedVariable[b]=e;a.every(this.variableData,function(a){return this.selectedVariable[a.id]===e},this)?this._selectAllCheckbox.set("checked",e):this._selectAllCheckbox.set("checked",!1);this.emit("variable-changed")},_initSelectAllCheckbox:function(){var c=a.every(this.variableData,function(a){return!0===this.selectedVariable[a.id]},this);this._selectAllCheckbox=(new s({"class":"pbiCheckbox12",checked:c,name:"selectAllCheckbox",
onClick:m.hitch(this,this._selectAllClick)})).placeAt(this._selectAllChecboxDiv);this._selectAllCheckbox.startup();b.create("label",{"for":"selectAllCheckbox",innerHTML:w.selectAll,style:"margin-left: 2px;"},this._selectAllChecboxDiv)},_selectAllClick:function(b){var d=c.get(b.target,"checked");b=h(".pbiCheckbox12",this._tableContainer);a.forEach(b,function(a){f.byNode(a).set("checked",d)});a.forEach(this.variableData,function(a){this.selectedVariable[a.id]=d},this);this.emit("variable-changed")},
_getSum:function(b){var c=0;a.forEach(this.variableData,function(a){a=m.getObject(a.id,!1,b);isNaN(a)||(c+=parseInt(a))},this);return c},_calculateTotalofValues:function(){this.variableValues&&(this.variableValues.totalActual=this._getSum(this.variableValues.actual),this.variableValues.comparison&&(this.variableValues.totalComparison=this._getSum(this.variableValues.comparison)))}})})},"dijit/form/CheckBox":function(){define("require dojo/_base/declare dojo/dom-attr dojo/has dojo/query dojo/ready ./ToggleButton ./_CheckBoxMixin dojo/text!./templates/CheckBox.html dojo/NodeList-dom ../a11yclick".split(" "),
function(g,m,a,b,d,c,h,n,f){b("dijit-legacy-requires")&&c(0,function(){g(["dijit/form/RadioButton"])});return m("dijit.form.CheckBox",[h,n],{templateString:f,baseClass:"dijitCheckBox",_setValueAttr:function(a,b){"string"==typeof a&&(this.inherited(arguments),a=!0);this._created&&this.set("checked",a,b)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},
_fillContent:function(){},_onFocus:function(){this.id&&d("label[for\x3d'"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&d("label[for\x3d'"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(g,m,a,b){return g("dijit.form.ToggleButton",[a,b],{baseClass:"dijitToggleButton",setChecked:function(a){m.deprecated("setChecked("+
a+") is deprecated. Use set('checked',"+a+") instead.","","2.0");this.set("checked",a)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(g,m){return g("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(a){var b=this.checked;this._set("checked",!b);var d=this.inherited(arguments);this.set("checked",d?this.checked:b);return d},_setCheckedAttr:function(a,b){this._set("checked",a);var d=this.focusNode||this.domNode;
this._created&&m.get(d,"checked")!=!!a&&m.set(d,"checked",!!a);d.setAttribute(this._aria_attr,String(a));this._handleOnChange(a,b)},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.checked&&a.setAttribute("checked","checked");void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.checked)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare",
"dojo/dom-attr"],function(g,m){return g("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(a){this._set("readOnly",a);m.set(this.focusNode,"readOnly",a)},_setLabelAttr:void 0,_getSubmitValue:function(a){return null==a||""===a?"on":a},_setValueAttr:function(a){a=this._getSubmitValue(a);this._set("value",a);m.set(this.focusNode,"value",a)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));
m.set(this.focusNode,"value",this.value)},_onClick:function(a){return this.readOnly?(a.stopPropagation(),a.preventDefault(),!1):this.inherited(arguments)}})})},"esriPBI/widgets/Infographics/Bar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-construct","dijit/_WidgetBase"],function(g,m,a,b){return g([b],{percent:null,color:null,constructor:function(a,b){m.mixin(this,a)},buildRendering:function(){var b={},c;this.domNode=a.create("div",{"class":"infographicsBar"});this.color?(c=
"span-fill",m.mixin(b,{width:this.percent,"background-color":this.color})):(c="span-stripe",m.mixin(b,{width:"100%"}));a.create("span",{"class":c,style:b},this.domNode)}})})},"esriPBI/widgets/Infographics/enrichUtil":function(){define("dojo/_base/lang dojo/_base/array dojo/Deferred dojo/topic esri/SpatialReference esri/geometry/geometryEngine esri/geometry/Polygon esri/request ../../utils/serviceProxyHelper".split(" "),function(g,m,a,b,d,c,h,n,f){function e(a,b){var c=a.results[0].value.FeatureSet,
d={actual:{},fields:[]};b.bufferType&&(d.distance="driveTime"===b.bufferType?b.driveTime.value:b.radius.value,d.units="driveTime"===b.bufferType?b.driveTime.units:b.radius.units);b.features&&(d.geometryType=b.features[0].geometry.type);if(0<c.length){b.comparisonLevel&&(2===c[0].features.length?(d.geographyName=c[0].features[1].attributes.StdGeographyName,d.hasMultipleComparisonAreas=!1):d.hasMultipleComparisonAreas=!0);var e=m.filter(c[0].fields,function(a){return m.some(b.analysisVariables,function(b){b=
b.substring(b.indexOf(".")+1);return b===a.name})});m.forEach(e,function(a){d.actual[a.name]=c[0].features[0].attributes[a.name];b.comparisonLevel&&(d.comparison||(d.comparison={}),d.comparison[a.name]=c[0].features[1].attributes[a.name]);d.fields.push({name:a.name,fullName:a.fullName,alias:a.alias,decimals:a.decimals,type:a.type,units:a.units})})}return d}function p(b){var c=[],e=new a;if(b.extent){var f=h.fromExtent(b.extent);c.push({geometry:{rings:f.rings,spatialReference:new d(f.spatialReference.wkid)}});
e.resolve(c)}else b.features&&(f=m.map(b.features,function(a){return a.geometry}),s(f,{bufferType:b.bufferType,bufferDistance:"driveTime"===b.bufferType?b.driveTime.value:b.radius.value,bufferUnits:"driveTime"===b.bufferType?b.driveTime.units:b.radius.units}).then(function(a){a={geometry:{rings:a.rings,spatialReference:new d(a.spatialReference.wkid)}};b.comparisonLevel&&(a.comparisonLevels=[{layer:b.comparisonLevel}]);c.push(a);e.resolve(c)},function(a){e.reject()}));return e}function s(b,d){var e,
f=new a;if("point"===b[0].type)if("radius"===d.bufferType){var g=c.geodesicBuffer(b,[d.bufferDistance],d.bufferUnits,!0);e=0<g.length?g[0]:g;f.resolve(e)}else"driveTime"===d.bufferType&&t(b,d.bufferDistance).then(function(a){var b=a&&a.saPolygons;a=m.map(b.features,function(a){return new h({rings:a.geometry.rings,spatialReference:b.spatialReference})});e=c.union(a);f.resolve(e)},function(a){f.reject()});else e=c.union(b),f.resolve(e);return f}function u(a,b){var c=f.get("geoenrich")+"/Geoenrichment/enrich/",
d={studyAreas:JSON.stringify(a),analysisVariables:JSON.stringify(b),useData:JSON.stringify({sourceCountry:"US"}),forStorage:!1,f:"json"};return w(c,d)}function t(a,b){var c=f.get("serviceArea")+"/solveServiceArea/",d=m.map(a,function(a){return{geometry:{x:a.x,y:a.y,spatialReference:{wkid:a.spatialReference.wkid}}}}),d={facilities:JSON.stringify({features:d,doNotLocateOnRestrictedElements:!0}),defaultBreaks:b,outSR:102100,f:"json"};return w(c,d)}function w(a,b){return n({url:a,content:b,handleAs:"json"},
{usePost:!0})}return{performEnrich:function(a){b.publish("show-loading");return p(a).then(function(c){return u(c,a.analysisVariables).then(function(c){b.publish("hide-loading");return e(c,a)},function(){b.publish("hide-loading")})},function(){b.publish("hide-loading")})},parseResult:e}})},"esriPBI/widgets/SignInDialog/SignInDialog":function(){define("dojo/_base/declare dojo/text!./templates/SignInDialog.html dojo/topic dojo/dom-construct dojo/i18n!./nls/SignInDialog dojo/on dojo/_base/connect dojo/aspect dojo/dom dojo/_base/lang dojo/string dojo/dom-class dojo/dom-style dojo/dom-attr dojox/mvc/Templated dijit/form/CheckBox ../_SignInMixin".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v,x){return g([w,x],{templateString:m,nls:d,signUpLink:"https://www.arcgis.com/home/troubleshoot.html",esriOfficeTrialLink:"http://www.esri.com/software/arcgis/arcgisonline/evaluate",hideKeepMeSignedIn:!1,defaultKeepMeSignedIn:!1,portalName:null,signInFailed:function(){this.signInPasswordTextInput.value="";this.signInUsernameTextInput.focus()},postCreate:function(){c(this.signInUsernameTextInput,"keypress",e.hitch(this,this.changeFocusToPassword));c(this.signInPasswordTextInput,
"keypress",e.hitch(this,this.changeFocusToSignIn));c(this.signInButton,"click",e.hitch(this,function(){(""!==e.trim(this.signInUsernameTextInput.value)||""!==e.trim(this.signInPasswordTextInput.value))&&this.callAuthenticate()}));c(this.signInLinkDiv,"click",e.hitch(this,this.checkSignUpLink));c(this.freeTrialLinkDiv,"click",e.hitch(this,this.checkTrialLink));c(this.signInLinkDiv,"keypress",e.hitch(this,function(a){13===a.keyCode&&this.checkSignUpLink()}));c(this.freeTrialLinkDiv,"keypress",e.hitch(this,
function(a){13===a.keyCode&&this.checkTrialLink()}));this.hideKeepMeSignedIn?(u.set(this.signInCheckRememberDiv,"display","none"),this.checkRemember.set("checked",!1)):u.set(this.signInCheckRememberDiv,"display","block");"undefined"!==typeof this.defaultKeepMeSignedIn&&!this.defaultKeepMeSignedIn?this.checkRemember.set("checked",!1):this.checkRemember.set("checked",!0);var a=d.arcGIS;this.portalName&&(a=this.portalName);t.set(this.signInHeaderText,"innerHTML",p.substitute(d.subTitle,{portalName:a}));
this.showSignInDialog()},showSignInDialog:function(){setTimeout(e.hitch(this,function(){var a=this.credential&&this.credential.userId;a?(this.signInUsernameTextInput.value=a,this.signInPasswordTextInput.focus()):(this.signInUsernameTextInput.value="",this.signInUsernameTextInput.focus())}),0);u.set(this.signInDialogContainer,"display","block")},changeFocusToPassword:function(a){13===a.keyCode&&""!==e.trim(this.signInUsernameTextInput.value)&&this.signInPasswordTextInput.focus()},changeFocusToSignIn:function(a){13===
a.keyCode&&""!==e.trim(this.signInPasswordTextInput.value)&&this.callAuthenticate()},checkSignUpLink:function(){window.open(this.signUpLink)},checkTrialLink:function(){window.open(this.esriOfficeTrialLink)},checkTabIndex:function(a){9===a.keyCode&&7===a.target.tabIndex&&(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation(),a.preventDefault(),this.signInUsernameTextInput.focus())},hideDialog:function(){this.signInDialogContainer&&(!1===this.checkRemember.get("checked")&&(this.signInUsernameTextInput.value=
""),this.signInDialogContainer.style.display="none")},callAuthenticate:function(){this.emit("authentication-required",{method:"user",username:this.signInUsernameTextInput.value,password:this.signInPasswordTextInput.value,remember:this.checkRemember.checked})}})})},"esriPBI/widgets/_SignInMixin":function(){define(["dojo/_base/declare"],function(g){return g(null,{supportsOAuth:!1,portalName:null,"^authentication-required":function(){}})})},"esriPBI/layout/ClosablePanel":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/aspect dojo/fx dojo/dom-class dojo/dom-construct dojo/dom-style dojo/dom-geometry dojo/query dijit/_WidgetBase dijit/_TemplatedMixin dijit/registry dojo/text!./templates/ClosablePanel.html dojo/i18n!./nls/SidePanelLayout".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w){return g([p,s],{templateString:t,nls:w,panelTitle:"",panelSubtitle:"",loadingIndicatorDiv:null,postCreate:function(){var d=this;this.panelSubtitle&&c.add(this.contents,"esriMapsSidePanelContentsWithSubTitle");this.placeAt(this.predecessor,"after");var e=b.after(this.widget,"destroy",function(){d._close()});"AddDataWizard"===this.widget._widgetType?(b.after(this.widget.addDataModelForloading,"onProgressComplete",function(){d.hideLoadingIndicator()}),b.before(this.widget.addDataModelForloading,
"onProgressBegin",function(){d.showLoadingIndicator()})):(b.after(this.widget,"onProgressComplete",function(){d.hideLoadingIndicator()}),b.before(this.widget,"onProgressBegin",function(){d.showLoadingIndicator()}));this.widget.placeAt(this.contentContainer);a(this.closeButton,"click",function(){d.emit("panel-closed");e.remove();d._removeToolSelectedStyle();d.widget.destroyRecursive();d._close()})},_removeToolSelectedStyle:function(){e(".esriMapsToolbarCommand").filter(function(a){return!c.contains(a,
"esriMapsCommandIconOnly")}).forEach(function(a){c.remove(a,"esriMapsSelectedCommand")})},showLoadingIndicator:function(){if(!this.loadingIndicatorDiv){this.loadingIndicatorDiv=h.create("div",{"class":"esriMapsLoadingIndicator"},this.mainContents);var a=h.create("table",{"class":"esriMapsFullSize"},this.loadingIndicatorDiv),a=h.create("tbody",{},a),a=h.create("tr",{valign:"middle",align:"center"},a),a=h.create("td",{},a);h.create("div",{"class":"esriMapsLoaderImg"},a)}},hideLoadingIndicator:function(){h.destroy(this.loadingIndicatorDiv);
this.loadingIndicatorDiv=null},resize:function(){this.widget&&(this.widget.domNode&&this.widget.resize)&&this.widget.resize()},_getNewHeight:function(a){n.set(a.parentElement,{height:"inherit"});var b,c=u.byNode(a);if(b=c&&c.widget&&c.widget.domNode)if(c=f.position(b),""!==b.style.height||0!==c.h)b=f.position(a.parentElement),n.set(a.parentElement,{height:c.h+c.y-b.y+"px"})},_close:function(){try{this.destroyRecursive()}catch(a){}}})})},"esriPBI/layout/SlidingPanel":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/fx dojo/_base/window dojo/on dojo/aspect dojo/fx dojo/query dojo/dom-style dojo/dom-geometry dojo/dom-class dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/SlidingPanel.html dojo/i18n!./nls/SidePanelLayout".split(" "),
function(g,m,a,b,d,c,h,n,f,e,p,s,u,t,w,v){return g([u,t],{templateString:w,nls:v,panelTitle:"",postCreate:function(){var a=this;this.placeAt(this.predecessor,"after");this.widget.placeAt(this.contentContainer);var b=e.getMarginBox(this.predecessor).w;225>=b&&f.set(this.collapseButton,{display:"none"});a._resizeToSliver();this.own(d(window,"resize",m.hitch(this,function(){a._resizeToSliver()})));f.set(this.domNode,e.isBodyLtr()?"left":"right",b+"px");h.combine([this._createSlideAnimation(this.domNode,
0),this._createSlideAnimation(this.predecessor,-b)]).play();this.own(c.after(this.widget,"destroy",function(){a._close(b,!0)}));this.own(d(this.backButton,"click",function(){a._close(b)}));this.own(d(this.collapseButton,"click",function(){a.collapseWidget._toggleSidePanel(!1)}));c.after(this.widget,"onProgressComplete",function(){a.hideLoadingIndicator()});c.before(this.widget,"onProgressBegin",function(){a.showLoadingIndicator()})},resize:function(){this.widget.resize&&(this.widget.resize(),this._resizeToSliver())},
_resizeToSliver:function(){var a=n(".esriMapsCollapseArea",b.body())[0],c=n(".esriMapsSidePanel",b.body())[0];if(a&&c&&p.contains(b.body(),"esriMapsMiniMode")){if((a=e.getMarginBox(c).w-e.getMarginBox(a).w)&&this.mainContents)f.set(this.mainContents,{width:a+"px"}),f.set(this.collapseButton,{display:"none"})}else!p.contains(b.body(),"esriMapsMiniMode")&&this.mainContents&&(f.set(this.mainContents,{width:"225px"}),f.set(this.collapseButton,{display:"block"}))},showLoadingIndicator:function(){if(!this.loadingIndicatorDiv){this.loadingIndicatorDiv=
s.create("div",{"class":"esriMapsLoadingIndicator"},this.mainContents);var a=s.create("table",{"class":"esriMapsFullSize"},this.loadingIndicatorDiv),a=s.create("tbody",{},a),a=s.create("tr",{valign:"middle",align:"center"},a),a=s.create("td",{},a);s.create("div",{"class":"esriMapsLoaderImg"},a)}},hideLoadingIndicator:function(){s.destroy(this.loadingIndicatorDiv);this.loadingIndicatorDiv=null},onWidgetClosed:function(){},_close:function(a,b){b?(this.destroyRecursive(),f.set(this.predecessor,e.isBodyLtr()?
"left":"right",0),this.onWidgetClosed()):h.combine([this._createSlideAnimation(this.domNode,a,m.hitch(this,function(){this.destroyRecursive()})),this._createSlideAnimation(this.predecessor,0)]).play()},_createSlideAnimation:function(b,c,d){b={node:b,units:"px",duration:this.skipAnimation?0:250,properties:{},onEnd:d};e.isBodyLtr()?b.properties.left=c:b.properties.right=c;return a.animateProperty(b)}})})},"esriPBI/ThemeUtils":function(){define("dojo/string dojo/dom-style dojo/dom-construct dojo/dom-attr dojo/dom-class dojo/_base/window dojo/text!./themes/theme_template.css.txt".split(" "),
function(g,m,a,b,d,c,h){var n=function(a,b,c){a[b]=c;b=document.getElementById("esriMapsThemeStyle");c=document.createElement("style");a=g.substitute(h,{titleColor:a.titleColor,headerColor:a.headerColor,headerHoverColor:a.headerHoverColor,accentColor:a.accentColor,titleTextColor:a.titleTextColor,accentTextColor:a.accentTextColor,fontFamily:a.fontFamily});var d=document.getElementsByTagName("head")[0];c.type="text/css";c.id="esriMapsThemeStyle";c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a));
b?d.replaceChild(c,b):d.appendChild(c)};return{changeThemeStyle:n,applyTheme:function(a){if(a.css)for(var e in a.css)n(a.css,e,a.css[e]);if(a.skin){e=c.body();var g=b.get(c,"data-emf-skin");d.remove(e,g);d.add(e,a.skin);b.set(e,"data-emf-skin",a.skin)}}}})},"esriPBI/utils/autoTooltip":function(){define(["dijit/Tooltip","esri/dijit/geoenrichment/DataBrowser/autoTooltip"],function(g,m){return m})},"esri/dijit/geoenrichment/DataBrowser/autoTooltip":function(){define(["dojo/on","dojo/query","dijit/Tooltip"],
function(g,m,a){var b=null;return function(d){g(d,".TrimWithEllipses:mouseover",function(){this!==b&&this.offsetWidth<this.scrollWidth&&(b=this,a.show(b.textContent,b,["above","below"]),g.once(b,"mouseout, mousedown, touchstart",function(){a.hide(b);b=null}))})}})},"esriPBI/widgets/_ShowModalMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-construct dojo/dom-class dojo/on ./Modal/Modal".split(" "),function(g,m,a,b,d,c,h){return g(null,{showModal:function(g,f){d.add(g.domNode,
"esriMapsModal");var e=new h({content:g});if(!f||!("closeButton"in f)||f.closeButton){var m=b.create("div",{"class":"esriMapsClose"},g.domNode);c(m,"click",function(){g.destroy()})}a.after(g,"destroy",function(){e.destroy()});e.placeAt(this.domNode);e.startup()}})})},"esriPBI/widgets/Modal/Modal":function(){define("dojo/_base/declare dojo/_base/lang dojox/mvc/Templated dojo/text!./templates/Modal.html dojo/dom-class dijit/layout/_LayoutWidget".split(" "),function(g,m,a,b,d,c){return g([a,c],{templateString:b,
content:null,_setContentAttr:function(a){this._set("content",a);m.isString(a)?this.containerNode.innerHTML=a:(this.containerNode.innerHTML="",this.containerNode.appendChild(a.domNode||a))},layout:function(){var a=this.domNode,b=this.containerNode,c=b.firstChild;c.style.position="absolute";b.style.overflow="visible";var d=Math.max(0,(a.clientHeight-c.offsetHeight)/2),a=Math.max(0,(a.clientWidth-c.offsetWidth)/2);c.style.top=d+"px";c.style.left=a+"px";b.style.overflow=""}})})},"esriPBI/_LayoutErrorsMixin":function(){define(["dojo/_base/declare",
"dojo/string","./layout/_Layout","dojo/i18n!./layout/nls/SidePanelLayout"],function(g,m,a,b){return g(null,{startup:function(){this.inherited(arguments);var d=this;this.app.toolManager.on("tool-error",function(c){var g=m.substitute(b.errorInTool,{toolLabel:c&&c.tool&&c.tool.label||""});d.showMessage(g,c&&c.error||Error(),a.MessageTypes.error)})}})})},"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/HorizontalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown, onkeyup:_onKeyUp"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitSliderBarContainerH" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event\x3d"press:_onBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c/div\r\n\t\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:dojox/form/resources/HorizontalRangeSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH dojoxRangeSlider" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onkeyup:_onKeyUp" role\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" dojoAttachEvent\x3d"onmousedown:_onClkDecBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cinput dojoAttachPoint\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3cdiv role\x3d"presentation" class\x3d"dojoxRangeSliderBarContainer" dojoAttachPoint\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachPoint\x3d"sliderHandle,focusNode" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onmousedown:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" dojoAttachEvent\x3d"onmousedown:_onBarClick"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachPoint\x3d"sliderHandleMax" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onmousedown:_onHandleClickMax" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" dojoAttachEvent\x3d"onmousedown:_onRemainingBarClick"\x3e\x3c/div\r\n\t\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" dojoAttachEvent\x3d"onmousedown:_onClkIncBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:dojox/form/resources/VerticalRangeSlider.html":'\x3ctable class\x3d"dijitReset dijitSlider dijitSliderV dojoxRangeSlider" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconV" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"decrementButton" dojoAttachEvent\x3d"onclick: increment"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper" dojoAttachEvent\x3d"onclick:_onClkIncBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"leftDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV" style\x3d"text-align:center;height:100%;"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" style\x3d"height:100%;"\r\n\t\t\t\x3e\x3cinput dojoAttachPoint\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3ccenter role\x3d"presentation" style\x3d"position:relative;height:100%;" dojoAttachPoint\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV" dojoAttachEvent\x3d"onmousedown:_onRemainingBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableV" style\x3d"vertical-align:top;" role\x3d"slider"\r\n\t\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleV" dojoAttachPoint\x3d"sliderHandle,focusNode" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onmousedown:_onHandleClick"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onmousedown:_onBarClick"\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableV" style\x3d"vertical-align:top;" role\x3d"slider"\r\n\t\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleV" dojoAttachPoint\x3d"sliderHandleMax" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onmousedown:_onHandleClickMax"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"containerNode,rightDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV" style\x3d"text-align:center;height:100%;"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper" dojoAttachEvent\x3d"onclick:_onClkDecBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconV" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"incrementButton" dojoAttachEvent\x3d"onclick: decrement"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:dijit/form/templates/VerticalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderV" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeyup:_onKeyUp"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconV" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"leftDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderDecorationC" style\x3d"height:100%;"\r\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3ccenter class\x3d"dijitReset dijitSliderBarContainerV" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c!--#5629--\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV" data-dojo-attach-event\x3d"press:_onBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableV" style\x3d"vertical-align:top;"\r\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleV" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,rightDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconV" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:esri/dijit/templates/TimeSlider.html":'   \x3cdiv class\x3d"esriTimeSlider"\x3e\r\n   \x3ctable width\x3d"100%" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0"\x3e\r\n   \x3ctr\x3e\r\n   \x3ctd align\x3d"right" valign\x3d"middle"\x3e\x3cbutton dojoType\x3d"dijit.form.Button" showLabel\x3d"false" iconClass\x3d"tsButton tsPlayButton" dojoAttachEvent\x3d"onClick:_onPlay" dojoAttachPoint\x3d"playPauseBtn" type\x3d"button"\x3e${NLS_play}\x3c/button\x3e\x3c/td\x3e\r\n   \x3ctd align\x3d"center" valign\x3d"middle" width\x3d"80%" class\x3d"tsTmp"\x3e\x3c/td\x3e\r\n   \x3ctd align\x3d"left" valign\x3d"middle" width\x3d"30"\x3e\x3cbutton dojoType\x3d"dijit.form.Button" showLabel\x3d"false" iconClass\x3d"tsButton tsPrevButton" dojoAttachEvent\x3d"onClick:_onPrev" dojoAttachPoint\x3d"previousBtn" type\x3d"button"\x3e${NLS_previous}\x3c/button\x3e\x3c/td\x3e\r\n   \x3ctd align\x3d"left" valign\x3d"middle"\x3e\x3cbutton dojoType\x3d"dijit.form.Button" showLabel\x3d"false" iconClass\x3d"tsButton tsNextButton" dojoAttachEvent\x3d"onClick:_onNext" dojoAttachPoint\x3d"nextBtn" type\x3d"button"\x3e${NLS_next}\x3c/button\x3e\x3c/td\x3e\r\n   \x3c/tr\x3e    \r\n   \x3c/table\x3e\r\n   \x3c/div\x3e',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esriPBI/widgets/TimeSlider/templates/TimeSlider.html":'\x3cdiv class\x3d"esriTimeSlider"\x3e\r\n    \x3ctable width\x3d"100%" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0"\x3e\r\n        \x3ctr\x3e\r\n            \x3ctd align\x3d"right" valign\x3d"middle"\x3e\r\n                \x3cbutton dojoType\x3d"dijit.form.Button" showLabel\x3d"false" iconClass\x3d"tsButton tsPlayButton" dojoAttachEvent\x3d"onClick:_onPlay" dojoAttachPoint\x3d"playPauseBtn" type\x3d"button"\x3e${NLS_play}\x3c/button\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd align\x3d"left" valign\x3d"middle" width\x3d"30"\x3e\r\n                \x3cbutton dojoType\x3d"dijit.form.Button" showLabel\x3d"false" iconClass\x3d"tsButton tsPrevButton" dojoAttachEvent\x3d"onClick:_onPrev" dojoAttachPoint\x3d"previousBtn" type\x3d"button"\x3e${NLS_previous}\x3c/button\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd align\x3d"left" valign\x3d"middle"\x3e\r\n                \x3cbutton dojoType\x3d"dijit.form.Button" showLabel\x3d"false" iconClass\x3d"tsButton tsNextButton" dojoAttachEvent\x3d"onClick:_onNext" dojoAttachPoint\x3d"nextBtn" type\x3d"button"\x3e${NLS_next}\x3c/button\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd align\x3d"center" valign\x3d"middle" width\x3d"80%" class\x3d"tsTmp"\x3e\x3c/td\x3e\r\n        \x3c/tr\x3e    \r\n    \x3c/table\x3e\r\n\x3c/div\x3e',
"url:esriPBI/widgets/TimeSlider/templates/TimeSliderWidget.html":'\x3cdiv class\x3d"tsContainer" data-dojo-attach-point\x3d"tsContainer"\x3e\r\n    \x3cdiv class\x3d"tsFullSizeView" data-dojo-attach-point\x3d"fullSizeView"\x3e\r\n        \x3cdiv class\x3d"sliderDiv" data-dojo-attach-point\x3d"sliderDiv"\x3e\x3c/div\x3e\r\n        \x3ctable\x3e\r\n            \x3ctd align\x3d"left"\x3e\x3cdiv class\x3d"esriTimeStopLabel esriTimeStopLabelStart" data-dojo-attach-point\x3d"startTimeLabel"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd align\x3d"center"\x3e\x3cdiv class\x3d"esriTimeExtentLabelFull" data-dojo-attach-point\x3d"timeExtentLabelFull"\x3e\x3c/div\x3e\x3c/td\x3e\r\n            \x3ctd align\x3d"right"\x3e\x3cdiv class\x3d"esriTimeStopLabel esriTimeStopLabelEnd" data-dojo-attach-point\x3d"endTimeLabel"\x3e\x3c/div\x3e\x3c/td\x3e\r\n        \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"tsCompactView" data-dojo-attach-point\x3d"compactView"\x3e\r\n        \x3cdiv\x3e\r\n            \x3cbutton dojoType\x3d"dijit.form.Button" showLabel\x3d"false" iconClass\x3d"tsButton tsPlayButton" data-dojo-attach-point\x3d"playPauseBtnSmall" type\x3d"button"\x3e${nls.play}\x3c/button\x3e\r\n            \x3cdiv class\x3d"esriTimeExtentLabelCompact" data-dojo-attach-point\x3d"timeExtentLabelCompact"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/background.vs.glsl":"attribute vec2 a_pos;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform mediump vec2 u_normalized_origin;\r\nuniform mediump float u_coord_range;\r\nuniform mediump float u_depth;\r\n\r\nvoid main() {\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n}\r\n","url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/background.fs.glsl":"uniform lowp vec4 u_color;\r\nvoid main() {\r\n  gl_FragColor \x3d u_color;\r\n}",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/patternFillShader.vs.glsl":"uniform highp mat4 u_transformMatrix;\r\nuniform highp vec2 u_normalized_origin;\r\nuniform mediump float u_depth;\r\nuniform mediump mat3 u_pattern_matrix; // can we use meduim precision??\r\n\r\nattribute vec2 a_pos;\r\n\r\nvarying mediump vec2 v_tileTextureCoord;\r\n\r\nvoid main()\r\n{\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0);\r\n  // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n  // The pattern matrix is a 3x3 scale matrix which 'tiles' the texture inside the tile, translating from tile coordinates\r\n  // (-4k to 8k -1) to texture coordinates.\r\n  v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/patternFillShader.fs.glsl":"uniform lowp float u_opacity;\r\nuniform mediump vec2 u_pattern_tl;\r\nuniform mediump vec2 u_pattern_br;\r\nuniform sampler2D u_texture;\r\n\r\nvarying mediump vec2 v_tileTextureCoord;\r\n\r\nvoid main()\r\n{\r\n  // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n  mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n  // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n  // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n  // we need to only sample from area that has our sprite in the mosaic.\r\n  mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n  // sample the sprite mosaic\r\n  lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n  gl_FragColor \x3d u_opacity * color;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineShader.vs.glsl":"/* The implementation of the renderer is based on the article and implementation of MB described here:\r\n* https://www.mapbox.com/blog/drawing-antialiased-lines/\r\n*/\r\n\r\nattribute vec2 a_pos;\r\nattribute vec2 a_offset;\r\nattribute float a_accumulatedDistance;\r\n\r\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n// relative to the tile's upper left corner\r\n// the extrusion vector.\r\nuniform highp mat4 u_transformMatrix;\r\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\r\nuniform highp mat4 u_extrudeMatrix;\r\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\r\nuniform highp vec2 u_normalized_origin;\r\n// the z of the layer. Given by the order of the layers in the style\r\nuniform mediump float u_depth;\r\n// the inset and outset of the line\r\nuniform mediump float u_lineHalfWidth;\r\n// the interpolated normal to the line. the information is packed into the LSB of the vertex coordinate\r\nvarying mediump vec2 v_normal;\r\n// the accumulated distance along the line. We need this information in order to render the dashes.\r\nvarying highp float v_accumulatedDistance;\r\n\r\nconst float scale \x3d 1.0 / 31.0;\r\n\r\nvoid main()\r\n{\r\n  // extract the normal from the list significat bit. It has a value of 0 or 1, but we need it to be either -1 or 1 therefore\r\n  // we need to change 0 to -1.\r\n  lowp vec2 normal \x3d mod(a_pos, 2.0);\r\n  normal.y \x3d normal.y \x3d\x3d 0.0 ? -1.0 : 1.0;\r\n  v_normal \x3d normal;\r\n\r\n  // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n  // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n  mediump vec2 dist \x3d u_lineHalfWidth * a_offset * scale;\r\n\r\n  // transform the vertex\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n\r\n  // the accumulated distance will be used to calculate the dashes (or the no-data...)\r\n  v_accumulatedDistance \x3d a_accumulatedDistance;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineShader.fs.glsl":"/* The implementation of the renderer is based on the article and implementation of MB described here:\r\n* https://www.mapbox.com/blog/drawing-antialiased-lines/\r\n*/\r\n\r\nuniform mediump float u_lineHalfWidth;\r\nuniform lowp vec4 u_color;\r\nuniform mediump vec2 u_dasharray;\r\nuniform lowp float u_blur;\r\n\r\nvarying mediump vec2 v_normal;\r\nvarying highp float v_accumulatedDistance;\r\n\r\nvoid main()\r\n{\r\n  // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n  // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n  // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n  mediump float fragDist \x3d length(v_normal) * u_lineHalfWidth;\r\n\r\n  // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n  // We need to count for both sides of the line.\r\n  lowp float alpha \x3d clamp( min(fragDist + u_blur + 1.0, u_lineHalfWidth - fragDist) / u_blur, 0.0, 1.0);\r\n\r\n  // now calculate the dashes given the accumulated distance of the line:\r\n  // start with calculating a normalized position along the line\r\n  lowp float dashPos \x3d  mod(v_accumulatedDistance, u_dasharray.x + u_dasharray.y);\r\n\r\n  // calculate the contribution to the alpha of the dash part. It is provided by the shortest portion of the position along the dash.\r\n  // we must clamp since the value might be bigger than 1 or smaller than zero (when over a dash).\r\n  //   | \x3c--- pos along the dash part\r\n  // -------_______-------_______\r\n  // when the dashPos is over the 'gap' part of the dash u_dasharray.x - dashPos is negative and therefore the alpha will\r\n  // get clamped to zero.\r\n  // when u_dasharray.x - dashPos is positive, or when dashPos is smaller than 1.0, it gives us a soft edge to each dash part.\r\n  // along the direction of the line.\r\n  lowp float dashAlpha \x3d clamp( min(dashPos, u_dasharray.x - dashPos), 0.0, 1.0);\r\n\r\n  // if we don't have a no-data part to the dash then it is a solid line\r\n  dashAlpha \x3d max(sign(-u_dasharray.y), dashAlpha); //sign(-u_dasharray.y) \x3e 0.0 ? 1.0 : dashAlpha;\r\n  // finally multiply the fragment's alpha by the calculated dash-alpha\r\n  alpha *\x3d dashAlpha;\r\n\r\n  // output the fragment color\r\n gl_FragColor \x3d alpha * u_color;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/patternLineShader.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_offset;\r\nattribute float a_accumulatedDistance;\r\n\r\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n// relative to the tile's upper left corner\r\n// the extrusion vector.\r\nuniform highp mat4 u_transformMatrix;\r\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\r\nuniform highp mat4 u_extrudeMatrix;\r\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\r\nuniform highp vec2 u_normalized_origin;\r\n// the z of the layer. Given by the order of the layers in the style\r\nuniform mediump float u_depth;\r\n// the inset and outset of the line\r\nuniform mediump float u_lineHalfWidth;\r\n// the interpolated normal to the line. the information is packed into the LSB of the vertex coordinate\r\nvarying mediump vec2 v_normal;\r\n// the accumulated distance along the line. We need this information in order to render the dashes.\r\nvarying highp float v_accumulatedDistance;\r\n\r\nconst float scale \x3d 1.0 / 31.0;\r\n\r\nvoid main()\r\n{\r\n  // extract the normal from the list significat bit. It has a value of 0 or 1, but we need it to be either -1 or 1 therefore\r\n  // we need to change 0 to -1.\r\n  lowp vec2 normal \x3d mod(a_pos, 2.0);\r\n  normal.y \x3d normal.y \x3d\x3d 0.0 ? -1.0 : 1.0;\r\n  v_normal \x3d normal;\r\n\r\n  // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n  // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n  mediump vec2 dist \x3d u_lineHalfWidth * a_offset * scale;\r\n\r\n  // transform the vertex\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n\r\n  // the accumulated distance will be used to calculate the dashes (or the no-data...)\r\n  v_accumulatedDistance \x3d a_accumulatedDistance;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/patternLineShader.fs.glsl":"uniform mediump float u_lineHalfWidth;\r\nuniform lowp float u_blur;\r\nuniform lowp float u_opacity;\r\nuniform mediump vec2 u_pattern_tl;\r\nuniform mediump vec2 u_pattern_br;\r\nuniform mediump vec2 u_spriteSize;\r\nuniform sampler2D u_texture;\r\n\r\nvarying mediump vec2 v_normal;\r\nvarying highp float v_accumulatedDistance;\r\n\r\nvoid main()\r\n{\r\n  // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n  // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n  // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n  mediump float fragDist \x3d length(v_normal) * u_lineHalfWidth;\r\n\r\n  // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n  // We need to count for both sides of the line.\r\n  lowp float alpha \x3d clamp( min(fragDist + u_blur + 1.0, u_lineHalfWidth - fragDist) / u_blur, 0.0, 1.0);\r\n  // add the line's opacity to the alpha\r\n  alpha *\x3d u_opacity;\r\n\r\n  // we need to calculate the relative portion of the line texture along the line given the accumulated distance aliong the line\r\n  // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n  mediump float relativeTexX \x3d mod(v_accumulatedDistance / u_spriteSize.x, 1.0);\r\n\r\n  // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n  // which range from -1.0 to 1.0. On the line's centerline, the value of the interpolated normal is 0.0, however the relative\r\n  // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n  // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n  //              | -\x3e linwe-width / 2\r\n  //      - - - - - - - - - - - - - -\r\n  //              | -\x3e linwe-width / 2\r\n  //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n  mediump float relativeTexY \x3d 0.5 + (v_normal.y * u_lineHalfWidth / u_spriteSize.y);\r\n\r\n  // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n  mediump vec2 texCoord \x3d mix(u_pattern_tl, u_pattern_br, vec2(relativeTexX, relativeTexY));\r\n\r\n  // get the color from the texture\r\n  lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n  // 'un-premultiply' the color\r\n  lowp float inv_alpha \x3d (1.0 / clamp(color.a, 0.00390625, 1.0));\r\n  // finally write the fragment value\r\n  gl_FragColor \x3d alpha * color;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineJoinShader.vs.glsl":"attribute vec2 a_pos;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform highp vec2 u_normalized_origin;\r\nuniform highp float u_depth;\r\nuniform highp vec2 u_screen;\r\nuniform mediump float u_size;\r\nuniform mediump float u_pixelRatio;\r\n\r\nvarying mediump vec2 v_vertexPosition;\r\n\r\nvoid main()\r\n{\r\n  gl_PointSize \x3d u_pixelRatio * u_size;\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0);\r\n\r\n  // calculate the vertex position in pixels (we need to add one in order to shift the origin from the center of the viewport)\r\n  v_vertexPosition \x3d (gl_Position.xy + 1.0) * u_screen;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineJoinShader.fs.glsl":"uniform lowp vec4 u_color;\r\nuniform mediump float u_lineHalfWidth;\r\nuniform mediump float u_oneOverPixelRatio;\r\n\r\nvarying mediump vec2 v_vertexPosition;\r\n\r\nvoid main()\r\n{\r\n  // get the distance of the current fragment from the actual vertex\r\n  mediump float fragDist \x3d length(v_vertexPosition - u_oneOverPixelRatio * gl_FragCoord.xy);\r\n\r\n  // rounding the quare: calculate the alpha given the difference between the line-width and the distance of the fragment\r\n  // from the center-line. We will end up with a nice round circle with a soft edge.\r\n  lowp float alpha \x3d clamp(u_lineHalfWidth - fragDist, 0.0, 1.0);\r\n\r\n  // finally output the fragment color\r\n  gl_FragColor \x3d alpha * u_color;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/solidFillShader.vs.glsl":"attribute vec2 a_pos;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform highp vec2 u_normalized_origin;\r\nuniform mediump float u_depth;\r\n\r\nvoid main()\r\n{\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n}\r\n","url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/solidFillShader.fs.glsl":"uniform lowp vec4 u_color;\r\nvoid main()\r\n{\r\n  gl_FragColor \x3d u_color;\r\n}",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/fillOutlineShader.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_offset;\r\nattribute vec2 a_xnormal;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform highp mat4 u_extrudeMatrix;\r\nuniform highp vec2 u_normalized_origin;\r\nuniform mediump float u_depth;\r\nuniform mediump float u_outline_width;\r\n\r\nvarying lowp vec2 v_normal;\r\n\r\nconst float scale \x3d 1.0 / 15.0;\r\n\r\nvoid main()\r\n{\r\n  v_normal \x3d a_xnormal;\r\n\r\n   // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n    // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n  mediump vec4 dist \x3d vec4(u_outline_width * a_offset * scale, 0.0, 0.0);\r\n\r\n  // Remove the texture normal bit of the position before scaling it with the\r\n  // model/view matrix. Add the extrusion vector *after* the model/view matrix\r\n  // because we're extruding the line in pixel space, regardless of the current\r\n  // tile's zoom level.\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * dist;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/fillOutlineShader.fs.glsl":"uniform lowp vec4 u_color;\r\nvarying mediump vec2 v_normal;\r\n\r\nvoid main()\r\n{\r\n  // Calculate the distance of the pixel from the line in pixels.\r\n  lowp float dist \x3d abs(v_normal.y);\r\n\r\n  lowp float alpha \x3d smoothstep(1.0, 0.0, dist);\r\n  gl_FragColor \x3d alpha * u_color;\r\n}\r\n","url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/iconShader.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_vertexOffset;\r\nattribute vec4 a_tex;\r\nattribute vec4 a_levelInfo;\r\n\r\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n// relative to the tile's upper left corner\r\n// the extrusion vector.\r\nuniform highp mat4 u_transformMatrix;\r\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\r\nuniform highp mat4 u_extrudeMatrix;\r\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\r\nuniform highp vec2 u_normalized_origin;\r\n// the size of the mosaic given in pixels\r\nuniform vec2 u_mosaicSize;\r\n// the z of the layer. Given by the order of the layers in the style\r\nuniform mediump float u_depth;\r\n// the map's rotation from the north\r\nuniform mediump float u_mapRotation;\r\nuniform mediump float u_level;\r\n// indicate whether the current set of iconst should be kept upright when the map is rotated\r\nuniform lowp float u_keepUpright;\r\n// the rate of the change in the opacity (fade) of the icons\r\nuniform mediump float u_fadeSpeed;\r\n// the low level we transition (to/from)\r\nuniform mediump float u_minfadeLevel;\r\n// the high level we transition (to/from)\r\nuniform mediump float u_maxfadeLevel;\r\n// the amount of fade given teh current time past the last recorded level\r\nuniform mediump float u_fadeChange;\r\n// the opacity of the layer given by the painter\r\nuniform mediump float u_opacity;\r\n// the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\nvarying lowp vec2 v_tex;\r\n// the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n// opacity of the layer given by the painter\r\nvarying lowp float v_transparency;\r\n\r\n// the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n// by 16 and then at the shader devide by the same number\r\nconst float offsetPrecision \x3d 1.0 / 32.0;\r\n\r\nvoid main()\r\n{\r\n  mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n  mediump float a_angle        \x3d a_levelInfo[1];\r\n  mediump float a_minLevel    \x3d a_levelInfo[2];\r\n  mediump float a_maxLevel    \x3d a_levelInfo[3];\r\n\r\n  // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n  mediump float delta_z \x3d 0.0;\r\n\r\n  // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n  mediump float rotated \x3d mod(a_angle - u_mapRotation, 256.0);\r\n  delta_z +\x3d (1.0 - step(u_keepUpright,0.0)) * step(65.0,rotated) * (1.0 - step(193.0,rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (65 \x3c\x3d rotated) \x26\x26 (rotated \x3c 193)\r\n\r\n  // u_level is the current service level adjusted for the change in font size\r\n  delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n  delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n  // calculate the alpha given the change in the fade and the fade-speed\r\n  lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n  // if the speed is positive we are zooming in and therefore we need to 'fade-in'. Else we need to 'fade-out'\r\n  v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n  // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n  if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n  {\r\n      v_transparency \x3d 0.0;\r\n  }\r\n  if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n  {\r\n      v_transparency \x3d 1.0;\r\n  }\r\n\r\n  // if label had been faded out, clip it\r\n  delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\r\n  v_tex \x3d a_tex.xy / u_mosaicSize;\r\n\r\n  v_transparency *\x3d u_opacity;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/iconShader.fs.glsl":"uniform lowp sampler2D u_texture;\r\nvarying lowp vec2 v_tex;\r\nvarying lowp float v_transparency;\r\n\r\nvoid main()\r\n{\r\n  lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n  gl_FragColor \x3d v_transparency * color;\r\n}\r\n","url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/sdfShader.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_vertexOffset;\r\nattribute vec4 a_tex;\r\nattribute vec4 a_levelInfo;\r\n\r\n// attribute bool a_visible; // --\x3e a one bit controlling the visibility of the vertex\r\n\r\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n// relative to the tile's upper left corner\r\n// the extrusion vector.\r\nuniform highp mat4 u_transformMatrix;\r\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\r\nuniform highp mat4 u_extrudeMatrix;\r\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\r\nuniform highp vec2 u_normalized_origin;\r\n// the size of the mosaic given in pixels\r\nuniform vec2 u_mosaicSize;\r\n// the z of the layer. Given by the order of the layers in the style\r\nuniform mediump float u_depth;\r\n// the map's rotation from the north\r\nuniform mediump float u_mapRotation;\r\nuniform mediump float u_level;\r\n// indicate whether the current set of iconst should be kept upright when the map is rotated\r\nuniform lowp float u_keepUpright;\r\n// the rate of the change in the opacity (fade) of the icons\r\nuniform mediump float u_fadeSpeed;\r\n// the low level we transition (to/from)\r\nuniform mediump float u_minfadeLevel;\r\n// the high level we transition (to/from)\r\nuniform mediump float u_maxfadeLevel;\r\n// the amount of fade given teh current time past the last recorded level\r\nuniform mediump float u_fadeChange;\r\n// the opacity of the layer given by the painter\r\nuniform mediump float u_opacity;\r\n// the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\nvarying lowp vec2 v_tex;\r\n// the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n// opacity of the layer given by the painter\r\nvarying lowp float v_transparency;\r\n\r\n// the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n// by 16 and then at the shader devide by the same number\r\nconst float offsetPrecision \x3d 1.0 / 32.0;\r\n\r\nvoid main()\r\n{\r\n  mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n  mediump float a_angle        \x3d a_levelInfo[1];\r\n  mediump float a_minLevel    \x3d a_levelInfo[2];\r\n  mediump float a_maxLevel    \x3d a_levelInfo[3];\r\n\r\n  // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n  mediump float delta_z \x3d 0.0;\r\n\r\n  // TODO: force clipping the vertex in case that the vertex isn't visible\r\n  //delta_z +\x3d a_visible ? 0.0 : 1.0;\r\n\r\n  // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n  mediump float rotated \x3d mod(a_angle - u_mapRotation, 256.0);\r\n  delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(65.0, rotated) * (1.0 - step(193.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (65 \x3c\x3d rotated) \x26\x26 (rotated \x3c 193)\r\n\r\n  // u_level is the current service level adjusted for the change in font size\r\n  delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n  delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n  // calculate the alpha given the change in the fade and the fade-speed\r\n  lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n  // if the speed is positive we are zooming in and therefore we need to 'fade-in'. Else we need to 'fade-out'\r\n  v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n  // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n  if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n  {\r\n      v_transparency \x3d 0.0;\r\n  }\r\n  if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n  {\r\n      v_transparency \x3d 1.0;\r\n  }\r\n\r\n  // if label has been faded out, clip it\r\n  delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\r\n  v_tex \x3d a_tex.xy / u_mosaicSize;\r\n\r\n  v_transparency *\x3d u_opacity;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/sdfShader.fs.glsl":"uniform lowp sampler2D u_texture;\r\nuniform lowp vec4 u_color;\r\nuniform mediump float u_edgeDistance;\r\nuniform mediump float u_edgeWidth;\r\n\r\nvarying lowp vec2 v_tex;\r\nvarying lowp float v_transparency;\r\n\r\n// this is taken from http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf\r\n// and https://www.mapbox.com/blog/text-signed-distance-fields/\r\n// http://metalbyexample.com/rendering-text-in-metal-with-signed-distance-fields/\r\n\r\nvoid main()\r\n{\r\n  // read the distance from the SDF texture\r\n  lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n  // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n  mediump float alpha \x3d smoothstep(u_edgeDistance - u_edgeWidth, u_edgeDistance + u_edgeWidth, dist) * v_transparency;\r\n\r\n  gl_FragColor \x3d alpha * u_color;\r\n\r\n// YF: this code allow having both a fill and an outline colors combined in a single pass\r\n//  lowp float geometryAlpha \x3d smoothstep(0.75 - 0.21, 0.75 + 0.21, dist) * v_transparency;\r\n//  lowp vec4 geometryColor \x3d vec4(u_color.rgb, geometryAlpha * u_color.a);\r\n//\r\n//  if (true) {\r\n//    lowp float haloAlpha \x3d smoothstep(0.0 - 0.1, 0.0 + 0.1, dist) * v_transparency;\r\n//    lowp vec4 haloColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n//    haloColor \x3d vec4(haloColor.rgb, haloAlpha);\r\n//\r\n//    // calculate the composite color\r\n//    lowp float compositeAlpha \x3d geometryColor.a + haloColor.a * (1.0 - geometryColor.a);\r\n//    lowp vec3 compositeColor \x3d vec3(geometryColor) * geometryColor.a + vec3(haloColor) * haloColor.a * (1.0 - geometryColor.a);\r\n//    compositeColor /\x3d compositeAlpha;\r\n//    gl_FragColor \x3d vec4(compositeColor, compositeAlpha);\r\n//  }\r\n//  else {\r\n//    gl_FragColor \x3d geometryColor;\r\n//  }\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/tileInfo.vs.glsl":"attribute vec2 a_pos;\r\n\r\nuniform highp mat4 u_transformMatrix;\r\nuniform mediump vec2 u_normalized_origin;\r\nuniform mediump float u_depth;\r\nuniform mediump float u_coord_ratio;\r\nuniform mediump vec2 u_delta; // in tile coordinates\r\nuniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\nvarying mediump vec2 v_tex;\r\n\r\nvoid main() {\r\n  mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n  gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n  v_tex \x3d a_pos;\r\n}\r\n",
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/tileInfo.fs.glsl":"uniform mediump sampler2D u_texture;\r\nvarying mediump vec2 v_tex;\r\n\r\nvoid main(void) {\r\n  lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n  gl_FragColor \x3d 0.75 * color;\r\n}\r\n","url:esri/layers/vectorTiles/views/2d/engine/webgl/stencil.vs.glsl":"attribute vec2 a_pos;\r\n\r\nvoid main() {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n}\r\n","url:esri/layers/vectorTiles/views/2d/engine/webgl/stencil.fs.glsl":"void main() {\r\n  gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n}\r\n",
"url:esri/layers/vectorTiles/views/2d/engine/webgl/bitblit.vs.glsl":"attribute vec2 a_pos;\r\nattribute vec2 a_tex;\r\n\r\nvarying mediump vec2 v_uv;\r\n\r\nvoid main(void) {\r\n  gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n  v_uv \x3d a_tex;\r\n}\r\n","url:esri/layers/vectorTiles/views/2d/engine/webgl/bitblit.fs.glsl":"\tuniform lowp sampler2D u_tex;\r\n\tuniform lowp float u_opacity;\r\n\r\n\tvarying mediump vec2 v_uv;\r\n\r\n\tvoid main() {\r\n\t\tlowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n    // Note: output in pre-multiplied alpha for correct alpha compositing\r\n\t\tgl_FragColor \x3d color *  u_opacity;\r\n\t}\r\n",
"url:esriPBI/widgets/TelemetrySettings/templates/TelemetrySettingsPane.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"telemetryTitle"\x3e${nls.telemetryPaneTitle}\x3c/div\x3e\r\n    \x3cdiv class\x3d"telemetryDoc"\x3e${nls.telemetryDoc}\x3c/div\x3e\r\n    \x3cdiv class\x3d"telemetryViewDoclink"\x3e\x3ca href\x3d"http://doc.arcgis.com/en/maps-for-powerbi/get-started/euei-program.htm" target\x3d"_blank"\x3e${nls.telemetryViewLable}\x3c/a\x3e \x3c/div\x3e   \r\n  \x3ctable style\x3d"width:100%;"\x3e\r\n   \x3ctr\x3e\r\n     \x3ctd width\x3d"70%"\x3e\x3cdiv class\x3d"senddata"\x3e${nls.telemetryToggle}\x3c/div\x3e\x3c/td\x3e\r\n     \x3ctd width\x3d"20%"\x3e\r\n       \x3cdiv class\x3d"pbiToggle" data-dojo-attach-point\x3d"toggleDiv"\x3e\r\n        \x3clabel for\x3d"toggleOnCheck"\x3e\r\n          \x3cinput type\x3d"checkbox" id\x3d"toggleOnCheck" data-dojo-attach-point\x3d"toggleOnCheckBox" data-dojo-attach-event\x3d"onclick: onToggle"\x3e\r\n          \x3cdiv class\x3d"toggleOutside"\x3e\x3cdiv class\x3d"toggleInside"\x3e\x3c/div\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/td\x3e\r\n     \x3ctd width\x3d"10%"\x3e\x3cdiv class\x3d"on" data-dojo-attach-point\x3d"toggleCheckboxLabel"\x3e\x3c/div\x3e\x3c/td\x3e\r\n   \x3c/tr\x3e\r\n  \x3c/table\x3e\r\n\r\n\x3c/div\x3e',
"url:esriPBI/widgets/MapTheme/templates/MapTheme.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"rendererTile" data-dojo-attach-point\x3d"simple"\x3e\r\n\t\t\x3cdiv class\x3d"simple" data-dojo-attach-event\x3d"click: _simple" data-dojo-attach-point\x3d"simpleDiv" title\x3d"${nls.simple}"\x3e \x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"rendererTileTitle"\x3e ${nls.simple}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"rendererTile" data-dojo-attach-point\x3d"heatmap"\x3e\r\n        \x3cdiv class\x3d"heatmap" data-dojo-attach-event\x3d"click: _heatmap" title\x3d"${nls.heatmap}"\x3e \x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"rendererTileTitle"\x3e ${nls.heatmap}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"rendererTile" data-dojo-attach-point\x3d"size"\x3e\r\n        \x3cdiv class\x3d"size" data-dojo-attach-event\x3d"click: _size" title\x3d"${nls.size}"\x3e \x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"rendererTileTitle"\x3e ${nls.size}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"rendererTile" data-dojo-attach-point\x3d"color"\x3e\r\n        \x3cdiv class\x3d"color" data-dojo-attach-event\x3d"click: _color" data-dojo-attach-point\x3d"colorDiv" title\x3d"${nls.color}"\x3e \x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"rendererTileTitle"\x3e ${nls.color}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"rendererTile" data-dojo-attach-point\x3d"sizecolor"\x3e\r\n        \x3cdiv class\x3d"sizecolor" data-dojo-attach-event\x3d"click: _sizecolor" data-dojo-attach-point\x3d"sizecolorDiv" title\x3d"${nls.sizecolor}"\x3e \x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"rendererTileTitle"\x3e ${nls.sizecolor}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"rendererTile" data-dojo-attach-point\x3d"clustering"\x3e\r\n        \x3cdiv class\x3d"clustering" data-dojo-attach-event\x3d"click: _clustering" title\x3d"${nls.clustering}"\x3e \x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"rendererTileTitle"\x3e ${nls.clustering}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esriPBI/widgets/SymbolStyle/templates/SymbolStyle.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"opacityDetails"\x3e\x3c/div\x3e\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"simpleDetails"\x3e\x3c/div\x3e\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"colorDetails"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"sizeDetails"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"sizecolorDetails"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"heatmapDetails"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"clusterDetails"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"uniqueDetails"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esriPBI/widgets/SymbolStyle/templates/Simple.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"styleTitle" data-dojo-attach-event\x3d"click: _toggleContent" \x3e\r\n      \x3cdiv class\x3d"titleArrow" data-dojo-attach-point\x3d"stylerFliperArrow"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"titleContent"\x3e${nls.simpleTitle}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"revertToDefaultHolder"\x3e\r\n        \x3cdiv id\x3d"revertDefaultSimple" data-dojo-attach-point\x3d"revertDefault" class\x3d"revertToDefaultLink revertDisabled" data-dojo-attach-event\x3d"click: _revertToDefault"\x3e${nls.revert}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n   \x3cdiv class\x3d"content" data-dojo-attach-point\x3d"stylerContent"\x3e\r\n       \x3cdiv data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/ValuePicker"\r\n            data-dojo-props\x3d"title: \'${nls.size}\', value: \'${size}\', minimum: 1, maximum:100, formatter: \'px\', intermediateChanges: ${intermediateChanges} "\r\n            data-dojo-attach-point\x3d"sizeOption"\x3e\r\n       \x3c/div\x3e\r\n\r\n       \x3cdiv data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/ColorPicker"\r\n            data-dojo-props\x3d"title: \'${nls.fillColor}\', color: \'${fillColor}\', colorPickerId: \'fillColorPicker\' "\r\n            data-dojo-attach-point\x3d"fillColorOption"\x3e\r\n       \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/ValuePicker"\r\n\t\t \tdata-dojo-props\x3d"title: \'${nls.fillTransparency}\', value: \'${fillTransparency}\', minimum:0, maximum: 100, formatter:\'%\', intermediateChanges: ${intermediateChanges} "\r\n          data-dojo-attach-point\x3d"fillTransparencyOption"\x3e\r\n    \x3c/div\x3e\r\n\r\n       \x3cdiv data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/ColorPicker"\r\n            data-dojo-props\x3d"title: \'${nls.outLineColor}\', color: \'${outLineColor}\', colorPickerId: \'outlineColorPicker\' "\r\n            data-dojo-attach-point\x3d"outLineColorOption"\x3e\r\n       \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/ValuePicker"\r\n\t\t data-dojo-props\x3d"title: \'${nls.outLineWidth}\', value: \'${outLineWidth}\', minimum: 1, maximum:20, formatter: \'px\', intermediateChanges: ${intermediateChanges} "\r\n          data-dojo-attach-point\x3d"outLineWidthOption"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/ValuePicker"\r\n     data-dojo-props\x3d"title: \'${nls.outLineTransparency}\', value: \'${outLineTransparency}\', minimum: 0, maximum:100, formatter: \'%\', intermediateChanges: ${intermediateChanges} "\r\n          data-dojo-attach-point\x3d"outLineTransparencyOption"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esriPBI/widgets/SymbolStyle/templates/ColorPicker.html":'\x3cdiv \x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"title" class\x3d"title"\x3e  ${title} \x3c/span\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"select" data-dojo-attach-event\x3d"click: _select" class\x3d"selectbutton" title\x3d"${nls.click}" \x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"previewBlock" class\x3d"previewBlock"\x3e \x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"triangle"\x3e \x3c/div\x3e\r\n\t\x3c/div\x3e\r\n    \x3cdiv id\x3d"${colorPaletteId}" data-dojo-attach-point\x3d"colorPalette" title\x3d"${nls.colorPicker}"\x3e\r\n        \x3cdiv id\x3d"${colorPicerkBoxId}" data-dojo-attach-point\x3d"colorPickerBox" class\x3d"esriPBIColorsContainer" style\x3d"display: none;"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"colorSpreads" class\x3d"esriPBIColorsSread" style\x3d"display: block;"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"spreadHolder" class\x3d"esriPBIColorsSpreadHolder"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"pbiButton esriPBIColorsSpreadsClose" title\x3d"${nls.switchToCustom}"\x3e\r\n                    \x3cbutton class\x3d"grayButton" data-dojo-attach-point\x3d"closeSpreadButton"\x3e ${nls.custom} \x3c/button\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--\x3cdiv data-dojo-attach-point\x3d"colorSpreadHexBox" class\x3d"esriPBIColorsSpreadsHex"\x3e\x3c/div\x3e--\x3e\r\n\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"colorBox" class\x3d"esriPBIColorsBox" style\x3d"display: none;"\x3e\r\n                \x3cdiv class\x3d"esriPBIColorsCanvasSamples"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"previousColor" class\x3d"esriPBIColorsPrevious"\x3e\x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriPBIColorsSampleText"\x3e${nls.previous}\x3c/div\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"newColor" class\x3d"esriPBIColorsNew"\x3e\x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriPBIColorsSampleText"\x3e${nls.current}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3ccanvas id\x3d"${canvasId}" data-dojo-attach-point\x3d"colorCanvas" width\x3d"168" height\x3d"168" class\x3d"esriPBIColorsCanvas" title\x3d"${nls.click}"\x3e\x3c/canvas\x3e\r\n                \x3cdiv class\x3d"pbiButton esriPBIColorsCanvasClose" title\x3d"${nls.switchToStandard}"\x3e\r\n                    \x3cbutton class\x3d"grayButton" data-dojo-attach-point\x3d"closeCanvasButton"\x3e ${nls.standard} \x3c/button\x3e\r\n                \x3c/div\x3e\r\n                \x3cinput type\x3d"text" id\x3d"${colorHexId}" data-dojo-attach-point\x3d"colorCanvasHexBox" class\x3d"esriPBIColorCanvasHex" dojoattachevent\x3d"onchange: _colorInputChange"\x3e\r\n\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esriPBI/widgets/SymbolStyle/images/PBI_Colors_image.txt":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAACoCAIAAAD7KTLjAAAALHRFWHRDcmVhdGlvbiBUaW1lAE1vbiAyNCBPY3QgMjAxNiAxNDoxNDo1OSAtMDgwMMhZNqUAAAAHdElNRQfgChoAKxYtIFZAAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAABGdBTUEAALGPC/xhBQAAJFVJREFUeNrNnQ1y4zoOhEkq97/SXuyJ3NgSSfw0QFB23m7K5ZIcjyfjj90NQIwnt/+kVFLK7j08gKerW03pTK/7cTv5ATwd9/pUf+uMnToPxl9K/xjw51z+M8W7sfeemkjEAbv/Se39VxX7vqGDdv+A83Q8or/yfE7Orz+R3mcZ3YrxrWSfJnIgHqc/wtZXU6eNPDiOGzrWp/Qdava36v1nxfthwRbPoafwgN2X+2+z7q2Dqn7k5b/p/QRIOu/ckste88771CFs/aA+TvZ7EF8HnLf1NhTEu8TZrxSfjAOq77LzD80v0UNlW1qPLAKKNn/G21kBDT24CxvyrpJ6/D0oCnnI7X+e+Hzc5AcK8sxcJPtd5Jp3EDZ8KaS5jUXweAVUsA6yYeO7hv+nio+LvpI3/v1IyU+QJ+PYkjt8hV2JO8vCCvWtFVDZm+Q4+a7h/53i4QpYyV2zpz5P77fWwXe9fXdZBEnDCsqgHhS9Y/j/Qsb7ihdyr/fxVd47mCP4lxL/cDVEcEaeVgNLAdn1UvQFIf+K4h3km43cQE6rPC30B3m//Hps9d9aHI7oOXWd1r7onYzf6uMzwazZt33Fq3Sfbv9b5R3eSn5W9/krI8K+qdNPbqiCg7ahzTkiekfxDvUL/OCdCWaxApqSPsTvKF7JfVT4cbnHF4GWe5C9rt0eLIIa+C6XO4zkYgC2dF+Q0LMl/Z9PA36rnh/4R9I3EPaftHkUtsXbYt/sY6eefyB6Xt9Z5hyM+WyL3jP8R8VdUO4QOVf878FV3i+pLxdBQotAHDvsIfWmjoMFXQ2zV0LPNv5nol8Wd5m8JRH2Pn5h8lzo7CCDtp5iHp7iCx0uAoF5K+M1fsE+rdjXFXvDioui6KwAGPYOdQp+/AAUNl0B4iBS2dEnaJ+n0u9VnkN91+01/iB7Qb2pg6XWHelr9pyKxgPLt3h996HVj7dKWH3E56m+KfUqT0uZhk/xL6kn93EKOyJ3QV0vAlWNh9jry1v92mt2pVkUWt/tnWNo9Vm9PdDwxZu3jHmY7vSvqPNeK35L6JbE36f5fbteOY82pbwqS7rOGwm91l+ntTdfaAC70heKR0iWvdkztwenq6reMnwHv5PuijdjXyRyK0Nc/LkDzu8//uobascseDd1f60AevBeENc6aPleBG0JWNw0fl+O4aSHa2Jd2RGr90VPtQ5NvvB/XNzqySOZX7G1RF8w+/xeObmTntTbpO7IfZJu97vVKPvr9GLfV0DTK6CuVkN/xCftW70V8GX1agJ85W+nhfxbAa+tfqyAfuVmafKEfRmwB/J8c72pk0Wg5Z673CdyrnXGXh2/zOC9AqpDXa8A15xLgP1WzGP8aHIX8fkg+6yObau/SebFG5d7LDSOvAudPsKoj+PhKMjnX1zbgv285fugvFdAvTygurdI5fXo5lC3irviuj08iLD35Z643AfSw9H64Eqply50Sj01EPNJH1SA/Pe09bewEfYT/zD892ntK+B30d6yd+qAsJS3RO8XdxZ4Knc/4LNCG6Eu5G4gH4q+Wjt+o7wH9TIKg4LVbxZ3Wu5OcacDnou+vB+pF/vrIL/VX99/kMsdFu0+xd1Vsvb5bvWUBHR7q7LzwetFAN2eW/1V5RHDH8hL/84Fu3Tepa1iXhV3tMqDPh8K+C70S/GFHvR7hr9JDA6hr6S7EyXLql5XdhG3z8b6sHw+EfBv6b/L+wH4gl2KFP12zMOmriO/S7xVcQcCvuN/Wf378XzdU/yNdamfp/hHPk+KOx/8M7ePgxeif71npeRCAGveuzE/V4DVxA+to+KO4acBT/BXcf/+7o2/vl72saCv2/F/A/56qyJWvwQ/jy98pRwCPKBep/Nvx7zh9uuAzzzgCX7J/v6XvNV/vH/I+v7hPxD9ltVHwBfX8AdgQTqe8VHwhd5+v7qap+HTe1TkB2Neu703vQkG/IX5vX38Or5+1HqkYyzQ+r79JfgFcg4+berel7u/GiD4nHWM9oAf6Q6tvjyI+eXIdifgq7D6zE2+vN/rAT5P6S/xH8bxrui/Cz6S7s6TGfhi3broYdgvWzsr5gF+LvqtgC/C6stt8vcBkTvFn5D0D4PxkvqfgqcSfyB3zTvNRCe3ox+8vrWs8kbM64xfznBKnx2Qmg5MbwIBP9jnfFf146CMf+RF+gTS9+UeoW6xX4Jv/cFETgddoXtNXVyjhloHFpIJZg3+bpR+2WeW8TDmpeeLmI/McKzizgj4SvBXel+IyR+Eer8IRcG/3oJzr+I7DNKO1umpVdWLFZAUfkG9Getg/TXoHvwtJafv95CIfmn4ZsxbMxw4so0FfBn4OfvRvv/+DEfi1Dn4lHvUvSc80O0jMQ8rO9/tNfilz1Pd+4Zv4b9CfTCuh6n47vm9tfMb+lDMc7mPyG92cbcO+FHP02jvblYq9/bL6MTpwG9Q38r4dcBz8I7b63buk4yfdA8DNmJvVHmV1E2rmF/PcPT0xg14Jvd8m/yd8b81ndD6AEypJ46fzPM/yXiL/Tz9eX34Rlm5vdPNO9dQofRN5AcDX3RrNwKehX2xPb/P8hYzHNHKK5NPyOppC9d0tOfXOyupC58fi0DgP1+nurw/Aryjck/s6lywxNuq7YXbM+rkvvBo/z2usLXLAcOPx/xw+yZEvxPwdD4/TR5S7+CTOE5kHVxvE2H/uJczyzpS3DXyLUv02vN93QOT17wPjvlw3f5q7bwJ7lbMOyPbeMDDGe0xbUmme2KeP9KdWitlvxT99sDObufEwTLpnRKPrYDCqJfB+0CRj8H3Ab7O+LIf89rtwaU5P+BH4y5mtMet6cE+QZ/PCja9v37Ub1d2fnHnG3486ROlfjCV18NATpv4Axnt1dbTjPdaOx7z28WdH/BlzulmI3fcF2SBySeZ7qKyS3oFkNHe4fL22VsZnw32juHTAyfp29B6Z1nJIhD3hffxNSL6BfXCTnFxF5je6IAHM9rrMnxC1EWik1D3FP/WTvCKTsTkhdWf/MGl1Qv2ltzvH7yn3sW1anEfs7KrYcMvznV6OMS9ijg5wyloZLsK+KqtPs91nQzqNN3NaG/9kUa++/6ZH5R1Qatv++yXJR6dyBZh747tO/09rfJGusvLtcuYX45s3YAfO+zAjDbJKzG0boeNe0rm/f3TXoVe83jvlXUo4zNHngOKb7bhT3i0PTsCto+cXyV9iU1w/ZhHI9t1wMMZLb3ojtI9iQNo70TlY0T6erwX+Y99Hlr9XAcceY65PTZ5Gu0isA+PutfjSdE7ho9iPtVp+Mzt1cgWb7sguT431vXNF8VOd9a4u9E+0p2Jvt2RlJ9Sp4Cp1Tf+XS39Rh5v/HGY9IlfbK2FO7wb9jVq+Gpv1oOYFz7vBXy/ajTr+T6jvfbYZD/dxYEh9Nyboan7xg5gGe/gxz6PrD4jxeeA3OlxFnLnc3iGdrPHG685WztxuVZcq/ViHu6yHQGvhjZ4RptNk6fpblKnmEVJr8ETw49Qh8iH4k/1rXjYD/XT48RJ14LWAe/X4z3evFxLRb/YkmXE/I1/IOeNXKrydyeqsHqys4pusEk83UUN73VuhsrZcWVct6NdKb6pNQEV7xj+7flZevvUsVgHosc7gO2zbt5p7awqD+y5dmY4qrgTAS/m87lvn3VqOrNzo6W74e00+OUi+MDkRTtHb9TzI4ZPRZ+UyukiKPzqiy76btvX09xllcdEP+a44joNL+6ckS0OeD6jvac3Rk2nG3fZvxlF3KzyEtPUBM8r/CdyJ1af9ZoIiz5z6r+307B6Jm5V9E3bL17Y6yu2cm/WmOPC63VC7pn+jrQT8FnNaEvfWQWjHXZujVCnDwqJK59n4HmFv4s8ongKO6sD6faZtXBX6ZOtvBfNfbjHa0VfsUV7s0DMD+pwhuMHPL0AT3ZWvZ4ukKvOzSroaBGnHxGNnATfx3kRnwdyNxSvk97XfdXpPg6yWeixWZ7T4/lJf51mp8pbxrwxvbHm87lXdvffrTfOOuO5tqHyTKhLA1C/grmhdVvxEd1L/H1L8fi1ocH4zBi8qf5jJ+znXmy6N6uaE1w9w9GitwKebbGiO6uSQd3p3JDKhabZZSS6DvJ8ECJfaH2leEhd8B4HqSv77A7PYj674JX6F2FPN2bNNo/uzSpoT44d82x64wS8tbMq8XT3o52rHHu7+AnhI1300TJegRe/UOG4veZ9Z3xmytbpvsh7of5i93jwiu08JnuzMmzteMzPt5JemrMCfsxoxc6q0ba5LdzEbKtclm9iGk6TnjpBpIaPVfXQ7cUjlSyLMbGuVOt5LoX5yBK8GO0tezx2zPdmRWLeKu5AwJdp8sNdkvZ5ayi7rOBUNWfZ+9Q9+eS0qMPvWL21FEa6p36N6vZ5UtBJk8+q+oO2r3s8Y5emKvd+qzx+uVZPcDeKO3oBfkzmxUX34fNWDb8av1vVnI55+pvNOTPRPwCvf6FiF/yU8kh6qnVh+8IGVuovxQz7uTeLDXSh6JHhg5EtCvjx+7BXJS+pJ5v6lrdrzMLwqdDLXAejU/hc8SkGfnRxlRj72a+KjQP6XboUQO+nwYuij9i+3ePpDZnL4m4V8GMHrZzTkXSX0W4UcQ54iTlPwLkLPemDNN0+Aj4RxSfnCW7qNw1bqJzkehXVX9z2eY9XA4Yv92aBmC9oZAsDvv+g10bKuXe2yx3YuzV+d0I9k1wX9l74sqiKfZOcypIoUXwKsK/8NVOnPmGT05M397rTO7dsPzDQHZdrvV+q1Rfo8B5L8iFmdGfVwuTh+P2ZvUN9j4ynpydDtaaurD7Ifrx4opghbI3cr/582xc9nkr66oneiPnh89dvxou5zZjONnEVLoHGfdvbdWueA/rOpCYdzbjr8ICrsvq0+iNT+oM0vVcewE5V9bew/UPt2+HtPuvxdGuHJ7gi5qsKeHE5rtwfueiM50QRNwY11PAte8/K0gXjDNkLZ69eKQegdsVb7J1CL1HSha+AomCr6m+GQsT2DzTac3q8UeXRz87QMa+LO/3rMnpnlTmUFYO5If2iwCuh57Lw9nGaM3gw+ahQcaczPg5eKl54PoRdyNOc6o8/knmVB3o80vSDK7Z+zDsBf1Ev2Ux3VsTBEc1y8kosPVveDmELtpvg9YfL+uDvNMnI56HnrzxAVn/UBlDvl/XIFu7YAaLX++/QHsvb6q9oL710V+M5TN2fvFJ7D+g7C+TZvbUFM614jXy5CJJPPewBoAPUAz445xeXdG3DL8WOeVnc5Un9bt9VTSeEnqm3o8mrHsR+Qd+ZrAkCfhnY84BnfHAF5DT/9jV7wTvSAYrqjy8Fkf2LHm9u09C/QV3tgC9gZ5XZuSVUuluT12VvVmP6hoZuCP0r4FPqlyc61O0VgDyAdYBu9eepX/d4M+mLNHyqORHw94y213RJ7asxVW4M2L3azTbzvMu+hSmqjE+BddBGzHGc3/IAUf2xWs+5vGv1eGJDpoh5sQWDTuvYgHa8C+74XVw+0QN20Js907eWdgD5vCcZvwQ/ThuFne63Ra+AvXVAPMDqAE/f9p2BrtiBL365Ym7BIAHPNlLq92V5OXVH39vK1kxUzKePwetXOOjlCQr7cycoErYY99al7aMe7+0EpLWTMa/m8/n6iDqe7iPa8TwONWlf1jeETb41a44lS5LxcfypvydnIqIXsD93AqcDjNg+6fHeV9WF6MUMR7TvNN1d6tLeI7OXr8JmnOP8VuCx6HlDi0+1E+SPnUB0gHz+k/WVPXkVp+/NYjFfGfVXjP28LntIk29mqMuras5s9QFycsvLEI6D7MWdfoLp9lDr/unSHoLrQHeAuum3bP91T/ZmzZjneyzvOV0yqcNQF/rO3zXzJWxWgHlCnwc94x3w4s+WpdYjTmDYw4YTwA7Qtv1e8L8+G5dtu068kZv//dmIdng51a/dnsLOz2DT0waYfQh+vnAXbqJvkT7Nq9PPnQB2gMj2e49HRS+KuzGn66vS2QLLLp4+G7Y8VnZanUZYuuDhg0fqkIZqLYnzp+XEtC5PP3MCUP0RuXPb73uzcrt1P9t3+h6S8Tsr3R/rm/zb1iHsnK6oO/A0+Gz8EfDHhwVCoVuPZ/545j6BTpdOgFeA2uU9r+tP27+2aRC93ls2s3pj6eT1QTNmAfuKxJ3HVzqOgBenY2yXLN3vPv64UHCzgFV/WfR4NOZHwJM3/PUX8f0wQdKhwvtbdG3qa5C8nQuyBz+C1r31+L5P0NMtJ8hqu9+8pHv0vVl3xh/k59Yb376l7Md00+rxTYSJtHPLPyi+l62DDtJ6Qjae8AWfMJxgVADkok6v8i7Fz5+7LeZr68L7L+juPmHJkhR30T8iNK0P8uqZmR183z+UH7AVkOc85/61m1vuvr7TJt20evyLT0jeE/AfCoA3XyqH/9HLZ2bvmf4TsH8YfsCc4HVR51f0V5sCL5nIv+R/T/HTZ46vffAPfnBgBpvP/PylDD8oPz8VYd59Q/+3FB98/fTGPP519D81Dn7QwQEO2vHomZ+/1DEPxv27g6v/zLFM6i1LH37Ng+XX8plffKmvfEXAiyXY39N2eG83PV0+s/nPdJ7AoY4nNI1Z3N5V3m/P9iv79v4tpJzENbe5FNSpg+fzJzxYAd4zDQPxwaM/1Cx+Sott+YQjpFHn8bbWNINNPx8xlXptr2yvuHv9z2+I/dIPNEiB4f9irSiSP2nOKf3njlNDgkKL5hMMjQpsy8expgsWdxsfVHYj/7219pJ7vZC/2Z/9tK0WQdAPrDXxYK3sPsED2MEf62ex0z/QqKNdLWKgaa1soe9DUL/kXt/N3S/1F/j2Op7sySKI3BLxg395TXhfNsYIeFHkHg81uqVd/9RUNqdeyQci1oH8VcL/2nu7qHfFU/YnUfzEH/AAn/ofrQm8FGBngsAvn9sPnmv3Z4fulrL5xx/Sj8wrFHkZ12AvuV/sX4uAgk/3/aX+1uN/HAfxY8z5X1oTS54+eHhQotqVTyveaSu2sgO8B3LxnxWeHbYw+dJ9viv+xb5O6td3zzTrPur8E3/YBnzMaefUf1qQ5Bb46754tfSeYweV7eibfP61/EhkentPaN6/NNFqflHvAd+I1b/K+9qTPjPe80BVALseABfBlh8sl4gk9hQ8v399zNUOXSji58om/3HJCO+CP+P2vs3ffn+n++XtFG0j7Cup8ob0BfgMpM/w79iAuQgeFQrN5qbBF5c0Aq9lGonnT5Qt9F147WYhzyzXhdxpcTdivl6iT130kD1ZBI14QPvMA9aLYNUyNAe8evBSvCtxwH6z8P5E2VPfx9Q3q90cey98K2V5UW893Tmq2tn/iv6fRiqA0eNZts8rAOwBHzjBbssQZCjaueU96eh8Ed/feqRspu+DWDqp3caDntBzt6iXS12Cnu27auco+1HfXc85qfSV88vGj3SAf+QBVssw9fsN8Op0IIfKTh8rm+lbTWBykf/ThWXv/FejLj9vmQX8LO5IifdaHHW6Pe3xrMintj9fFnnAJ04QWQSLK8qPwA+rL99UNtU37M1m7bYK9ZR1y36bPJc7m96QmG+E/dmYN5zd9kWDJyPfaPzEFOgTD/D7AoebAF/WpOVB+VTZWN+oN2NCD9j7vYuCUX+N5S/qhQc8Ke6E4m/2tPgnYX8aoqdVHrOBXQ946gRxhrS4C/6hKzI/4C31bfRmtHT37V2rfEZ7Hib/woMCfro9T3op+sR6PHpRBzZ7eimYHWB28W/ZgN4s5oKP8Wbsv6fvAZjVbvr/q7KQZzGYs+Q+Ppt4gKR4BPsp+oQMPxlFn458VQFM6qgDjBaDxu4ByGoJfgVbxvxuZe72ZsLSl9QTmcXSzk19ns00eR3wtKpHMT9meTDsxytY6m/6NOD841Y3ncAnJo5/ZtsTBT/cPtZ5L3uzmdyHtHexIGSco85NU299PJdBwE8AIubfTV2FVZ7R42H2qulvTvVnT4Ei+CEoB/zhwrZf74m+Ye12mMrWjwzMsHNLKN0vk1fCBSVYAw09EL0K+0qKPu38LFB0BbDlAWQ24Pl8GLxD2gGPknut72Xthv4/0iS83ejcHJNXAS/aOdrKV6L4mz1q7awe70SX9fym36v+sucBdSl3Aym1+mU+0Fv/T5nM2eqo3WgZX0Dt5jRpJ+WdldXzzk3XdBd1Xs/r4q4R9jTm6TDn2pslDZ+HvR7tnYmsCTTrbagCoAHfVh4wHrzfiQh43s7FqZOXhw4vejNWux0Ss3+JZatzm5OlLvecdPsuOvh5dQ7FfK1T+sLwT8P2QdIbHb8OgoFcrANgBrzuu0FVG78iqa0+TD3lUG8majf6CXTQ3j3qdud2H6hov2a0MODV5A7H/FXe175Fh+zgEFfwaI8XAq9tX4V9i3kAQ1RD7H/Qs5zE4E+WIxfVm1m1mz+Do1fYpNCzTZ3IfZh8l7sV8MztIftKpvdNLiAc9rrKWy0CqnVQ/a08QDJs67z3rd4HXwh71KA3gr8RcW/ZO63prM7Np07kLgOe9/E05jX7VtE8x63z/cH+lu2b1d/FTai8rUn+2CVBGLzeE1FszPKj5pfUUec2VkCjc4X7VvuO6bumswJeVfWNGH4jMT8P6v1rN3H21WGPCv7mLgXtAbOeb9vgj0/By2jfnMFBe2dCz4i6Kfc72seM1g54XdXDmB9N3WT/Lm9mVY/C/kys4D+Xokednrb9pjzgZvIUfKCUY4+QA2rp9OJp47Wbt1vGmsVye4f9Om3hrp1VvH2HAS8G6ZfcnZhn03td3id5fGrp7zi/nvU2tBRuuTdV07U1yYjVlxX4TCq78AzOv7S68HZCfRzXvrOKzmiNgMcVtfZ5NcFt9d6b1ZDbD/a4x+vNfSTyxaxXPDIDnmJuCHzBSyFo9Zo9XwGtqFA/dqhnJXS3c2u0d7+R3g5/ESog3afJW3PTfp1G42+kob8M/5802Wu393u8dbuvAh7+zBJq60AagWPYvqP4YpwWsAJY0gutHwvq2Nu5vVud2wiaQvbYlDmfb9lgbxR3fszTsD/JVt2T/xWa/bCB5WDfJK0v7QzSgrdFvewp3vF5WnZl3Jd7WhcqJ/aetb3jfv11K4S6MHkn4P3izoj5eTCqPGoqpNqHhs+k76tfh5Ea996fz1QM/EL3yu2h4ne0Pu6bqt28zXFc5XRLBb5RY5fs760WqqZbBvx93MAMB8b8bOhHW68chZX6RtjLKm+lfjBnvECW7gBZyX2le1/xMeQDmPhfQmocOe/cvKFsoS073Vk17T0Y8PDq3CrmKw97PcuLD3TPuPrVqYnc0r0q+JeKX7LnSrX+0xD6TO32unNrhDfq1/FGym71V/seCXgxsl3EPGnqmrE3S7d5J+EtfzMLDfYv9TsGcPOj4Iu6922fgI+17I7cddKfXLVY+nbnRucEyQTPop3OaCMBj0a2Vsy3Ktnfv3oxAqXgpF/2eNZg/0SLoGUid8ftLdETxR87inflfh0vO7fMl4IX7QUOZcFu+SJrOhHwDbGXjTKnLmKeUe/1XXVEHwt70N9DoWdu8hHRF/KtLD3/Byn7kclbhk83UOCLLnbnZpo8uvxKZ7QFYNB7LGVV36lbMU+pV2L4ekOm1dpp6mfwok7mJg9FvzR8lfFlpfgSFj3prc2yzu7ctLf7Jq8vxF0OX7nJi3ZL90ht4r8xGzE/6jsR9maVR5HbYU9rutPetyl5p5jhG4o/NoW+og5FL4u4SOcWqOmy2b7DLs6c3sDiTse8En2rcx14VR6t8/0eTxR92uTFzZG7lj5xfsvqn1HPgL0o7kTnBkLdT/dp8pbcxa/LWAHfoNsb1K25PQ37kxSVOOndod6QuyjubpO/9D2+dtmrsIdVfYR6NnlThOdADp9Dor0J6iu5i2inM9pYwOORLY/5Ng6MmKdhrzdkarefyJHtWxd1WkFCT9zq0w77gNU/8nkR9rpzA9GeGX4/3YfW4YwWBjx5K/VFTz3D0YoH12z45hxvniNau2XYk3XQMnJ4J+lj7H/kWw+oW7CXoj9uw3/WuTk1XSZ1ljD5nYAHF+jcmNdzezG9r3aVd5IfJt7j1VGgwS/H7elvxSH2MON90e8o/sLPPmnOsHdt8la6c5N/HvDGyDYY81VNcJvYm1W40yD22PZJurNob67hF3QwYCdu9Q1k/DfKuiF3yj7euNvprk1+fIrVvQ6QwzvTG1Hc0RmOGfNoijd24oKrdjDpAwNdGeS+4lMg7JXVa7d3TD5Q1sEVcOpvDW/Xckc13dhZJUyeyL1lHPCmz2cS7by4W8S8oj534jrzHGEA9kAXf6j4bomXkNwTAP9A7nmNfBwL9lPZvG1LGcid7qzSM1rVSsnrsHZxBy/QTeqRmCcNPdyb5SU96vEkdSvjhc8nxds2fFHVFxf/broL/J29DnUh8aSuvfKdVSzj83bAw5FtsLjTl+d1U6f3ZgHwEPnl8IeB3C/sYdJnfk9WgFPcfamy0+qvdk0Hfb6iPTZd6GM+vxXwemQrdR+Leb0lSxi+/qnwR2z0H5J96uDWVyTpyQqIg4cZ7+A/PPyVdG4Cs0+dX3cXco8HvDey3Yx5OsAXhj8accvtKfJaCBvI1UFOdZ85/ozu0cg2UtZp2NlArqn3+2q0bfT0TV3urLJmtDrgE5O+CHhvZKupJzvmjQku3ZvVLLfv7O/ZXETWDnIr45Hb/9i8H41pN27HPdNthuJf1NXOKjWjnbz9gNdat0e2U/fLmFfURdiPeQ7ci31/a1DX6kzIAxpCnpDu7RJvC/wHvZy0AZLlmn3pN7qRMvOM7yZ/D2h3A94e2bbHMc8zHvyeJdqSyz48PBukI19ObY/u/xT8YTyiHq94XAP22Fgz2ljAm8iNC3TxmNcTXLY3C63L6/PfPd5bKyCj478B77M/3BWgpX9lHd4+C6gb83kY8LiRQyNbr7iDWzMqP+D7r6fhn5L6/ZZkBf6Z6IXt74B/1sV9nvSe9Afs+fnDfEYL23cd8M70JlTcxWJeb86Be7NasT9oTIOHOvblvuzmvwH+D9j31JfRjuQ+Ar6FA16ObAMX6EIxb09wK/mPL/DHiH4I3pf7vws+4O3ui7zG8la069+JrFzlq4Bfjmy3Yx5RF5drG9kEMW91B3xE7jvgIy2cZe85CHJzEWQqr9HIyaEN2uoUCXg4sg3NcCIxrxv6dsNtrf9lWYk+qPiKwBf+eFaP24q36rtPijvnaYtO4feNYiocb+to3zMf1O8HvOnzH8c8a+vb/W+7G+/340zo9LgStBmRDmY8XQcU9vV4uf8ieHXuKwGfYw9m9QMUbMKNy320cJGAX05vVjMcEfOVxzz9YLQRBAx5v50Dc1PINe+I3CNur6VfZDv33ZI+/uT5XWd72dzx/knAO5fm7OJOm7z14VjjDbduTcvdcGMmXIe64/Z2zDt9/NqTn0a4V0AAIXJDvlfAeV/YiAc8qOn41bnQDMeKecK7OGs3vcp7YPXiXst9+UXZj2OhdeL2y6p+Wd89Fr0+zYyufZvPqQShEfCh6U1khoNiXvCurtbHmqi0yktkBTyTu8/ecPtgVe/EPE3ojL6r2eNH2lXMa31b1HkK3JBUwAenN8vijsW84ecWe+oBV9PStNATf8Sinvl74bC3Ar6Dj/B2qGvYegVY7NmLN8Xbc3u7Dmi0OjOKu+XIlhZ39PUhb4txE7zpd3Ux71PPCHZB+AM+HyzuHITLki2762PeUykHDV/fEj9IxAyoW+guTtwLzPQ+B9j7C2IeN8Q7E8xVHVsOL56QybeqWgG9uPujkj5i9fO0KuRB/Ml9PPFFEPyisJMLO7IIAPL3wQmpL63ewV/RMZL7KO62SnrH262kz+hlaboztQm33xV9UmtCLwIfuSXxRI63hC6OxwFL+qYWgdYxLHmg9FeG/0kf77u9k/RyEWjkOumDsDXyOHXIXuMPLgIqdEi90NaOKl4IHaY7hC3kLg74CvjE6oNuD5M+C+o++4j0k70aNHW9AjI6thgvdU+FblG/DL82pfh4ulv4ffbE6reoZ7QCnHfAcvurpptl3ZJ90OeT8YhD3WGfOO+l0J1FoKm391vQGlJ8Q6KHN8rbsXq3qocBD5kFRZ/VH2ev6RfV+h+4uwKSuwKW7LP67m6uW9+l981X/FL0jtwbquq74n2rz4ZkI/VdNlbApL5k/KyvcxbB8usZ7Ljc4Q2wjyjeqeyaafLXCz4o7jKCvVQ8ED2U+2N7d762nkxhbz05vg6A6B25O4ov6jmO2yurf1DcxRVvxvyS9CdN/IPF8Rhq5GmW3AH7xPE7cvcV/1lxl+0Dq2dbiv4+hkX7lujTVxl/shqCS0QLnX7rpO9FRO5U8bq+gwdfUnyOKR487VmEJ5v6+PqK9JcS109L++tAFwFVw87uv0fw/rcUH8l48Ex6Fe5ZBZcUyyBd+FIOWn9NiEe2eOO6r5EqL17Pw4xfKf6/A4HS538D/uEAAAAASUVORK5CYII\x3d",
"url:dijit/templates/ColorPalette.html":'\x3cdiv class\x3d"dijitInline dijitColorPalette" role\x3d"grid"\x3e\r\n\t\x3ctable data-dojo-attach-point\x3d"paletteTableNode" class\x3d"dijitPaletteTable" cellSpacing\x3d"0" cellPadding\x3d"0" role\x3d"presentation"\x3e\r\n\t\t\x3ctbody data-dojo-attach-point\x3d"gridNode"\x3e\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e\r\n',"url:esriPBI/widgets/SymbolStyle/templates/ValuePicker.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"title"\x3e  ${title} \x3c/div\x3e\r\n\t\x3cinput type\x3d"text" class\x3d"textbox" data-dojo-attach-point\x3d"valueTextbox"\x3e\r\n\t\x3cdiv data-dojo-type\x3d"dijit/form/HorizontalSlider" data-dojo-attach-point\x3d"valueSlider" class\x3d"slider" data-dojo-props\x3d"value:${value},\r\n    minimum: ${minimum},\r\n    maximum: ${maximum},\r\n    discreteValues:99,\r\n    intermediateChanges:${intermediateChanges},\r\n    showButtons:false"\x3e \x3c/div\x3e\r\n\t\r\n\x3c/div\x3e',
"url:esriPBI/widgets/SymbolStyle/templates/Size.html":'\t\x3cdiv\x3e \r\n  \t\x3cdiv class\x3d"styleTitle" data-dojo-attach-event\x3d"click: _toggleContent" \x3e\r\n  \t\t\x3cdiv class\x3d"titleArrow" data-dojo-attach-point\x3d"stylerFliperArrow"\x3e\x3c/div\x3e\r\n  \t\t\x3cdiv class\x3d"titleContent"\x3e${nls.sizeTitle}\x3c/div\x3e\r\n  \t\x3c/div\x3e\r\n        \x3cdiv class\x3d"revertToDefaultHolder"\x3e\r\n            \x3cdiv id\x3d"revertDefaultSize" data-dojo-attach-point\x3d"revertDefault" class\x3d"revertToDefaultLink revertDisabled" data-dojo-attach-event\x3d"click: _revertToDefault"\x3e${nls.revert}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"content" data-dojo-attach-point\x3d"stylerContent"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/Classification"\r\n\t\t\t\t\t\tdata-dojo-props\x3d"numClasses: ${numClasses}, classificationMethod: \'${classificationMethod}\'"\r\n\t\t\t\t\t\t\tdata-dojo-attach-point\x3d"classificationOption"\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"minmaxContainer"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"minmaxTitle"\x3e${nls.minmax}\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv discreteValues\x3d"100" value\x3d"${minSize},${maxSize}" data-dojo-attach-point\x3d"minmaxSlider" class\x3d"minmaxSlider"\r\n\t\t\t\t\t\t\t\tintermediateChanges\x3d"${intermediateChanges}" data-dojo-attach-event\x3d"change: _minmaxSizeChange" showButtons\x3d"false" dojoType\x3d"dojox/form/HorizontalRangeSlider"\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n  \x3c/div\x3e',
"url:esriPBI/widgets/SymbolStyle/templates/Classification.html":'\x3cdiv\x3e\r\n\t\x3cdiv style\x3d"padding-bottom:10px; padding-top: 10px;"\x3e\r\n    \x3cdiv style\x3d"padding-bottom: 7px;"\x3e${nls.classificationType}\x3c/div\x3e\r\n        \x3cdiv class\x3d"styled-select"\x3e\r\n            \x3cselect data-dojo-attach-event\x3d"change: _classificationChange" data-dojo-attach-point\x3d"classificationMethodOption"\x3e\r\n                \x3coption value\x3d"equal-interval" title\x3d"${nls.equalinterval_description}"\x3e${nls.equalinterval}\x3c/option\x3e\r\n                \x3coption value\x3d"natural-breaks" title\x3d"${nls.naturalbreaks_description}"\x3e${nls.naturalbreaks}\x3c/option\x3e\r\n                \x3coption value\x3d"quantile" title\x3d"${nls.quantile_description}"\x3e${nls.quantile}\x3c/option\x3e\r\n                \x3coption value\x3d"standard-deviation" title\x3d"${nls.standarddeviation_description}"\x3e${nls.standarddeviation}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv style\x3d"padding-bottom:10px;; padding-top: 10px;"\x3e\r\n      \x3cdiv \x3e${nls.numberOfClass}\x3c/div\x3e\r\n\t   \x3cdiv style\x3d"padding-top:7px; padding-bottom: 10px;"\x3e\r\n    \t\x3cinput data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d"intermediateChanges:true, smallDelta:1, constraints:{min:1, max:10, places:0}" value\x3d"${numClasses}" data-dojo-attach-point\x3d"numClassOption" data-dojo-attach-event\x3d"change: _numberOfClasesChange"\x3e\r\n\t   \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/form/templates/Spinner.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitButtonNode dijitSpinnerButtonContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitSpinnerButtonInner" type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\r\n\t\t\tdata-dojo-attach-point\x3d"upArrowNode"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9650; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\r\n\t\t\tdata-dojo-attach-point\x3d"downArrowNode"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\r\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t\t\t\t\t${_buttonInputDisabled}\r\n\t\t\t/\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' data-dojo-attach-point\x3d"textbox,focusNode" type\x3d"${type}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown"\r\n\t\t\trole\x3d"spinbutton" autocomplete\x3d"off" ${!nameAttrSetting}\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:esriPBI/widgets/SymbolStyle/templates/Unique.html":'  \x3cdiv\x3e\r\n  \t\x3cdiv class\x3d"styleTitle" data-dojo-attach-event\x3d"click: _toggleContent" \x3e\r\n  \t\t\x3cdiv class\x3d"titleArrow" data-dojo-attach-point\x3d"stylerFliperArrow"\x3e\x3c/div\x3e\r\n  \t\t\x3cdiv class\x3d"titleContent"\x3e${nls.uniqueTitle}\x3c/div\x3e\r\n  \t\x3c/div\x3e\r\n      \x3cdiv class\x3d"revertToDefaultHolder"\x3e\r\n          \x3cdiv id\x3d"revertDefaultUnique" data-dojo-attach-point\x3d"revertDefault" class\x3d"revertToDefaultLink revertDisabled" data-dojo-attach-event\x3d"click: _revertToDefault"\x3e${nls.revert}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n  \t\x3cdiv data-dojo-attach-point\x3d"stylerContent" class\x3d"valueContainer"\x3e\r\n  \t\t      \x3cdiv class\x3d"crTitle"\x3e${nls.colorRamp}\x3c/div\x3e\r\n          \x3cdiv class\x3d"colorRampPickerBox" data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/ColorRampPicker" data-dojo-attach-point\x3d"colorRamp"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"colorTable" class\x3d"colorTable"\x3e \x3c/div\x3e\r\n  \t\x3c/div\x3e\r\n  \x3c/div\x3e',
"url:esriPBI/widgets/SymbolStyle/templates/ColorRampPicker.html":'\x3cdiv class\x3d"${css.rampbase}"\x3e\r\n    \x3cdiv class\x3d"${css.container}"\x3e\r\n        \x3cdiv id\x3d"previewHolder" class\x3d"${css.previewholder}" data-dojo-attach-point\x3d"previewHolder"\x3e\r\n            \x3cdiv class\x3d"${css.preview} ${css.item}"\r\n                 data-dojo-attach-point\x3d"dap_previewRamp"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"${css.button} showRampList" data-dojo-attach-point\x3d"previewHolderButton"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"dap_colorFlipper" tabindex\x3d"0"\r\n             class\x3d"${css.flipper}" \x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv id\x3d"rampListBox" class\x3d"${css.container2} rampListHidden" data-dojo-attach-point\x3d"rampListContainer"\x3e\r\n        \x3cdiv class\x3d"${css.viewport}"\x3e\r\n            \x3cdiv id\x3d"rampPickerList" data-dojo-attach-point\x3d"dap_colorRampPicker"\r\n                 class\x3d"${css.list}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:esriPBI/widgets/SymbolStyle/templates/HeatMap.html":'  \x3cdiv\x3e\r\n  \t\x3cdiv class\x3d"styleTitle" data-dojo-attach-event\x3d"click: _toggleContent" \x3e\r\n      \x3cdiv class\x3d"titleArrow" data-dojo-attach-point\x3d"stylerFliperArrow"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"titleContent"\x3e${nls.heatmapTitle}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n      \x3cdiv class\x3d"revertToDefaultHolder"\x3e\r\n          \x3cdiv id\x3d"revertDefaultHeatMap" data-dojo-attach-point\x3d"revertDefault" class\x3d"revertToDefaultLink revertDisabled" data-dojo-attach-event\x3d"click: _revertToDefault"\x3e${nls.revert}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n\x3cdiv class\x3d"content" data-dojo-attach-point\x3d"stylerContent"\x3e\r\n    \x3cdiv class\x3d"aoiTitle"\x3e${nls.blurRadius}\x3c/div\x3e\r\n  \t\t\x3cdiv data-dojo-type\x3d"dijit/form/HorizontalSlider" data-dojo-attach-point\x3d"blurRadiusSlider" class\x3d"slider" style\x3d"width: 230px" data-dojo-props\x3d"\tvalue:${blurRadius},\r\n    minimum: 1,\r\n    maximum: 30,\r\n    discreteValues:30,\r\n    intermediateChanges:${intermediateChanges},\r\n    showButtons:false"\x3e \x3c/div\x3e  \t\r\n    \x3cdiv class\x3d"crTitle"\x3e${nls.colorRamp}\x3c/div\x3e\r\n    \x3cdiv class\x3d"coloramp" data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/ColorRampPicker" data-dojo-attach-point\x3d"colorRamp"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e \r\n\r\n  \x3c/div\x3e',
"url:esriPBI/widgets/SymbolStyle/templates/Cluster.html":'  \x3cdiv\x3e \r\n    \x3cdiv class\x3d"styleTitle" data-dojo-attach-event\x3d"click: _toggleContent" \x3e\r\n      \x3cdiv class\x3d"titleArrow" data-dojo-attach-point\x3d"stylerFliperArrow"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"titleContent"\x3e${nls.clusterTitle}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n      \x3cdiv class\x3d"revertToDefaultHolder"\x3e\r\n          \x3cdiv id\x3d"revertDefaultCluster" data-dojo-attach-point\x3d"revertDefault" class\x3d"revertToDefaultLink revertDisabled" data-dojo-attach-event\x3d"click: _revertToDefault"\x3e${nls.revert}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3cdiv class\x3d"content" data-dojo-attach-point\x3d"stylerContent"\x3e\r\n        \x3cdiv class\x3d"clusterTitlePadding"\x3e${nls.clusterRadius}\x3c/div\x3e\r\n        \x3cinput class\x3d"clusterBoxSpacing" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d"intermediateChanges:true, smallDelta:1, constraints:{min:5, max:100, places:0}" value\x3d"${clustering.radius}" data-dojo-attach-event\x3d"change: _radiusChange" data-dojo-attach-point\x3d"radiusOption"\x3e\r\n  \r\n    \x3cdiv data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/ColorPicker"\r\n\t\t \tdata-dojo-props\x3d"title: \'${nls.bkColor}\', color: \'${bkColor}\', canvasId: \'fillPicker\' "\r\n          data-dojo-attach-point\x3d"bkColorOption"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/ColorPicker"\r\n\t\t \tdata-dojo-props\x3d"title: \'${nls.textColor}\', color: \'${textColor}\', colorPickerId: \'textPicker\' "\r\n          data-dojo-attach-point\x3d"textColorOption"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c/div\x3e',
"url:esriPBI/widgets/SymbolStyle/templates/Color.html":'  \x3cdiv\x3e\r\n  \t\x3cdiv class\x3d"styleTitle" data-dojo-attach-event\x3d"click: _toggleContent" \x3e\r\n  \t\t\x3cdiv class\x3d"titleArrow" data-dojo-attach-point\x3d"stylerFliperArrow"\x3e\x3c/div\x3e\r\n  \t\t\x3cdiv class\x3d"titleContent"\x3e${nls.colorTitle}\x3c/div\x3e\r\n  \t\x3c/div\x3e\r\n      \x3cdiv class\x3d"revertToDefaultHolder"\x3e\r\n          \x3cdiv id\x3d"revertDefaultColor" data-dojo-attach-point\x3d"revertDefault" class\x3d"revertToDefaultLink revertDisabled" data-dojo-attach-event\x3d"click: _revertToDefault"\x3e${nls.revert}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n  \t\x3cdiv class\x3d"content" data-dojo-attach-point\x3d"stylerContent"\x3e\r\n   \t\t\x3cdiv data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/Classification"\r\n\t  \t\tdata-dojo-props\x3d"numClasses: ${numClasses}, classificationMethod: \'${classificationMethod}\'"  \r\n          \tdata-dojo-attach-point\x3d"classificationOption"\x3e\r\n      \t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/ColorTheme" \r\n\t\t\t\t\t\tdata-dojo-props\x3d"colorTheme: \'${theme}\'" data-dojo-attach-point\x3d"colorThemeOption"\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n         \x3cdiv class\x3d"crTitle"\x3e${nls.colorRamp}\x3c/div\x3e\r\n          \x3cdiv class\x3d"colorRampPickerBox" data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/ColorRampPicker" data-dojo-attach-point\x3d"colorRamp"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e',
"url:esriPBI/widgets/SymbolStyle/templates/ColorTheme.html":'\x3cdiv\x3e\r\n    \x3cdiv\x3e${nls.colorScheme}\x3c/div\x3e\r\n    \x3cdiv  style\x3d"padding-bottom:10px; padding-top: 7px;"\x3e\r\n     \x3cdiv data-dojo-attach-point\x3d"_rendererColorTheme" data-dojo-type\x3d"dijit/form/FilteringSelect" \r\n\t\t\tdata-dojo-attach-event\x3d"onChange:_onColorThemeChange" sortbylabel\x3d"false" style\x3d"width: calc(100% - 12px); height: 23px;"\x3e\r\n    \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/form/templates/DropDownBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}"\r\n\trole\x3d"combobox"\r\n\taria-haspopup\x3d"true"\r\n\tdata-dojo-attach-point\x3d"_popupStateNode"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\r\n\t\tdata-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true"\r\n\t\t\t${_buttonInputDisabled}\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' ${!nameAttrSetting} type\x3d"${type}" autocomplete\x3d"off"\r\n\t\t\tdata-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:esriPBI/widgets/SymbolStyle/templates/Opacity.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"styleTitle" data-dojo-attach-event\x3d"click: _toggleContent" \x3e\r\n    \x3cdiv class\x3d"titleArrow" data-dojo-attach-point\x3d"stylerFliperArrow"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"titleContent"\x3e${nls.opacityTitle}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"revertToDefaultHolder"\x3e\r\n    \x3cdiv id\x3d"revertDefaultOpacity" data-dojo-attach-point\x3d"revertDefault" class\x3d"revertToDefaultLink revertDisabled" data-dojo-attach-event\x3d"click: _revertToDefault"\x3e${nls.revert}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"content" data-dojo-attach-point\x3d"stylerContent"\x3e\r\n    \x3cdiv data-dojo-type\x3d"esriPBI/widgets/SymbolStyle/ValuePicker"\r\n      data-dojo-props\x3d"title: \'${nls.layerOpacity}\', value: \'${layerOpacity}\', minimum:0, maximum: 100, formatter:\'%\', intermediateChanges: ${intermediateChanges} "\r\n          data-dojo-attach-point\x3d"layerTransparencyOption"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esriPBI/widgets/LocationType/templates/LocationType.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"gtContainer"\x3e\r\n        \x3cdiv class\x3d"locationTitle"\x3e${nls.geometryType}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"gtSelectContainer" class\x3d"styled-select"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"scContainer" data-dojo-attach-point\x3d"scTypeSelectContainer"\x3e\r\n            \x3cdiv class\x3d"locationTitle"\x3e${nls.scType}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"scTypeSelectDiv" class\x3d"styled-select"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"scSelectDiv" class\x3d"styled-select" style\x3d"margin-top: 10px;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\t\r\n\t\x3cdiv data-dojo-attach-point\x3d"polygonOptions" class\x3d"polygonOptions dijitHidden"\x3e\t\t\r\n\t\t\x3cdiv class\x3d"ltContainer" data-dojo-attach-point\x3d"ltSelectContainer"\x3e\r\n            \x3cdiv class\x3d"locationTitle"\x3e${nls.locationType}\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"ltSelectDiv" class\x3d"styled-select"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\t\t\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"actionBar"\x3e\r\n        \x3cdiv class\x3d"pbiButton"\x3e\r\n            \x3cbutton class\x3d"primaryButton"  data-dojo-attach-event\x3d"click: _ok"\x3e ${nls.ok} \x3c/button\x3e\r\n        \x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:esriPBI/widgets/SearchBox/templates/SearchBox.html":'\x3cdiv class\x3d"addLocation"\x3e\r\n    \x3cdiv class\x3d"esriMapsSearchBox"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"searchIcon" class\x3d"esriMapsSearchIcon" data-dojo-attach-event\x3d"onclick:_searchToolClicked"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"searchBox"\x3e\x3c/div\x3e\r\n        \x3cul class\x3d"suggestionsList" data-dojo-attach-point\x3d"suggestions"\x3e\x3c/ul\x3e\r\n\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Add the list here --\x3e\r\n    \x3cdiv class\x3d"resultList" data-dojo-attach-point\x3d"resultList"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:esriPBI/widgets/SearchBox/templates/ColorPallete.html":'\x3cdiv class\x3d"colorPallete"\x3e\r\n    \x3cdiv class\x3d"markerSymbol"\x3e\r\n        \x3cimg data-dojo-attach-point\x3d"markerIcon" /\x3e \r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"dropDownDiv" data-dojo-attach-point\x3d"dropdown" data-dojo-attach-event\x3d"onclick: displayPallete"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',"url:esriPBI/layout/templates/SidePanelLayout.html":'\x3cdiv data-dojo-attach-point\x3d"container" style\x3d"position: relative; width: 100%; height: 100%;"\x3e\r\n    \x3c!--\x3cdiv data-dojo-attach-point\x3d"loadingNode" style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3c/div\x3e--\x3e\r\n\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" data-dojo-attach-point\x3d"bc" data-dojo-props\x3d"gutters: false" style\x3d"visibility: hidden; width: 100%; height: 100%;"\x3e\r\n        \x3c!--\x3cdiv class\x3d"splHeader" data-dojo-attach-point\x3d"header" data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"region: \'top\'"\x3e\r\n                \x3cspan class\x3d"title"\x3e${headerTitle}\x3c/span\x3e\r\n                \x3cdiv class\x3d"signInStatus" style\x3d"visibility: hidden;" data-dojo-attach-point\x3d"signInStatus"\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"signedInGreeting"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"signOutBtn" data-dojo-attach-point\x3d"signOutButton" data-dojo-attach-event\x3d"onclick:_signOutClick"\x3e${nls.signOutButton}\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e--\x3e\r\n        \x3cdiv class\x3d"esriMapsToolbarContainer" data-dojo-attach-point\x3d"mainToolBarContainer" data-dojo-type\x3d"dijit/layout/ContentPane"\r\n            data-dojo-props\x3d"region: \'top\'"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"mainToolBar" class\x3d"mainToolbar"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"seperator"\x3e \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"secondaryToolBar" class\x3d"mainToolbar"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"seperator"\x3e \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"thirdToolBar" class\x3d"mainToolbar"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n\r\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" class\x3d"esriMapsMapAndSidePanelContainer" data-dojo-attach-point\x3d"mapAndSidePanelContainer"\r\n            style\x3d"padding: 0; overflow: hidden; height: 100%; width: 100%;" data-dojo-props\x3d"region: \'center\'"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"mapWrapperContainer" style\x3d"height: 100%; width: 100%;"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"maxPopupContainer" class\x3d"esriMapsMaxPopupContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- \x3cdiv class\x3d"esriMapsSidePanelButtonExpandPad" data-dojo-attach-point\x3d"expandPad"\x3e\x3c/div\x3e\r\n                \x3cdiv class\x3d"esriMapsSidePanelButton esriMapsSidePanelButtonExpand esriMapsSidePanelButtonHidden" data-dojo-attach-point\x3d"expandButton" title\x3d"${nls.expandSidePanelTooltip}"\x3e\x3c/div\x3e --\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"minWidgetContainer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"esriMapsSidePanel" data-dojo-attach-point\x3d"sidePanel"\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/layout/BorderContainer" class\x3d"esriMapsSidePanelElement" data-dojo-props\x3d"gutters: false" style\x3d"width: 100%; height: 100%;"\r\n                    data-dojo-attach-point\x3d"esriMapsSidePanelElement"\x3e\r\n                    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-props\x3d"region: \'center\'" style\x3d"padding: 0;"\x3e\r\n                        \x3cdiv class\x3d"esriMapsSidePanelPadding"\x3e\r\n                            \x3cdiv class\x3d"esriMapsSidePanelTitle esriMapsHeadlineStyle TrimWithEllipses"\x3e${nls.mapContentsTitle}\x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriMapsContentLyrDropDown" data-dojo-attach-point\x3d"lyrDropDown"\x3e\x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriMapsSidePanelContents" data-dojo-attach-point\x3d"sidePanelContents"\x3e\r\n                                \x3cdiv data-dojo-attach-point\x3d"mapContents"\x3e\x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriMapsSidePanelButton esriMapsSidePanelButtonCollapse" data-dojo-attach-point\x3d"collapseButton" title\x3d"${nls.collapseSidePanelTooltip}"\x3e\x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriMapsInfographicsContainer" data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"infographicsContainer"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"timeSliderContainer" data-dojo-attach-point\x3d"timeSliderContainer"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/MenuBar.html":'\x3cdiv class\x3d"dijitMenuBar dijitMenuPassive" data-dojo-attach-point\x3d"containerNode" role\x3d"menubar" tabIndex\x3d"${tabIndex}"\r\n\t \x3e\x3c/div\x3e\r\n',"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\r\n\t\trole\x3d"presentation"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\r\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\r\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"url:dijit/templates/MenuBarItem.html":'\x3cdiv class\x3d"dijitReset dijitInline dijitMenuItem dijitMenuItemLabel" data-dojo-attach-point\x3d"focusNode"\r\n\t \trole\x3d"menuitem" tabIndex\x3d"-1"\x3e\r\n\t\x3cspan data-dojo-attach-point\x3d"containerNode,textDirNode"\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\r\n\t   cellspacing\x3d"0"\x3e\r\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\r\n\x3c/table\x3e\r\n',
"url:esriPBI/widgets/Infographics/templates/OneVariable.html":'\x3cdiv class\x3d"cardContainer"\x3e\r\n    \x3cdiv class\x3d"dragHandle dojoDndHandle" data-dojo-attach-point\x3d"_dragHandle"\x3e\r\n        \x3cdiv class\x3d"dragHandleIcon"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"infographicsVariableGroup"\x3e\r\n        \x3cdiv class\x3d"styled-select infographicsVariableList" data-dojo-attach-point\x3d"_variablesListDiv"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"selectedVariableLabel" data-dojo-attach-point\x3d"_selectedVariableLabel"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"infographicsVariableDisplay"\x3e\r\n        \x3cdiv class\x3d"oneVarDistanceLabel" data-dojo-attach-point\x3d"_distanceLabel"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"oneVarSelectedVariableValue" data-dojo-attach-point\x3d"_selectedVariableValue"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"infographicsComparisonDisplay" data-dojo-attach-point\x3d"_infographicsComparisonDisplay"\x3e\r\n        \x3ctable\x3e\r\n            \x3ctr\x3e\x3ctd\x3e\r\n                    \x3cspan class\x3d"oneVarGeographyName" data-dojo-attach-point\x3d"_geographyName"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"infoIcon displayNone" data-dojo-attach-point\x3d"_infoIcon" data-dojo-attach-event\x3d"onClick: _showPopup"\x3e\x3c/span\x3e\r\n            \x3c/td\x3e\x3c/tr\x3e\r\n        \x3c/table\x3e\r\n        \x3cdiv class\x3d"oneVarComparisonValue" data-dojo-attach-point\x3d"_comparisonValue"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e  ',
"url:dijit/form/templates/CheckBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cinput\r\n\t \t${!nameAttrSetting} type\x3d"${type}" role\x3d"${type}" aria-checked\x3d"false" ${checkedAttrSetting}\r\n\t\tclass\x3d"dijitReset dijitCheckBoxInput"\r\n\t\tdata-dojo-attach-point\x3d"focusNode"\r\n\t \tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\r\n/\x3e\x3c/div\x3e\r\n',"url:esriPBI/widgets/Infographics/templates/RelatedVariable.html":'\x3cdiv class\x3d"cardContainer"\x3e\r\n    \x3cdiv class\x3d"dragHandle dojoDndHandle" data-dojo-attach-point\x3d"_dragHandle"\x3e\r\n        \x3cdiv class\x3d"dragHandleIcon"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"dataCollectionGroup"\x3e\r\n        \x3cdiv class\x3d"dataCollectionName" data-dojo-attach-point\x3d"_dataCollectionName"\x3e${label}\x3c/div\x3e\r\n        \x3cdiv class\x3d"distanceLabel" data-dojo-attach-point\x3d"_distanceLabel"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"legendDiv" data-dojo-attach-point\x3d"_legend"\x3e\r\n        \x3ctable\x3e\r\n            \x3ctr\x3e\r\n                \x3ctd\x3e\x3cdiv class\x3d"selection legendIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n                \x3ctd\x3e\x3cspan data-dojo-attach-point\x3d"_selectionLegendLabel" style\x3d"margin-left: 2px;"\x3e${nls.legendLabel}\x3c/span\x3e\x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\r\n                \x3ctd\x3e\x3cdiv class\x3d"comparison legendIcon"\x3e\x3c/div\x3e\x3c/td\x3e\r\n                \x3ctd\x3e\r\n                    \x3cspan data-dojo-attach-point\x3d"_comparisonLegendLabel" style\x3d"margin-left: 2px;"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"infoIcon displayNone" data-dojo-attach-point\x3d"_infoIcon" data-dojo-attach-event\x3d"onClick: _showPopup"\x3e\x3c/span\x3e\r\n                \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"selectAllOption" data-dojo-attach-point\x3d"_selectAllChecboxDiv"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"rvTableContainer" data-dojo-attach-point\x3d"_tableContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:esriPBI/widgets/SignInDialog/templates/SignInDialog.html":'\x3cdiv data-dojo-attach-point\x3d"signInDialogContainer" class\x3d"esriMapsSignInContainerStyle"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"signInContainerDiv" class\x3d"esriMapsSignInContainerDivStyle"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"signInUserPasswordDiv"\x3e\r\n            \x3cdiv class\x3d"esriMapsSignInLoginTable"\x3e\r\n                \x3ctable class\x3d"esriMapsSignInTableStyle"\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd class\x3d"esriMapsSignInHeadText" data-dojo-attach-point\x3d"signInHeaderText"\x3e\r\n                            \x3cbr /\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd class\x3d"esriMapsSignInLoginLabel"\x3e${nls.userName}\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd class\x3d"esriMapsSignInLoginInput"\x3e\r\n                            \x3cinput type\x3d"text" name\x3d"signInUsername" data-dojo-attach-point\x3d"signInUsernameTextInput"\r\n                                tabindex\x3d"1" /\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd class\x3d"esriMapsSignInLoginLabel"\x3e\r\n                            ${nls.password}\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd class\x3d"esriMapsSignInLoginInput"\x3e\r\n                            \x3cinput type\x3d"password" name\x3d"signInPassword" data-dojo-attach-point\x3d"signInPasswordTextInput"\r\n                                tabindex\x3d"2" /\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n                    \x3ctr\x3e\r\n                        \x3ctd\x3e\r\n                            \x3cdiv data-dojo-attach-point\x3d"signInCheckRememberDiv"\x3e\r\n                                \x3cinput data-dojo-attach-point\x3d"checkRemember" data-dojo-type\x3d"dijit/form/CheckBox" name\x3d"checkRememberMe" value\x3d"Remember me"\r\n                                    tabindex\x3d"3" /\x3e\r\n                                \x3clabel for\x3d"checkRemember" style\x3d"font-size: 10pt; vertical-align: baseline;"\x3e\r\n                                    ${nls.keepMeSignedIn}\r\n                                \x3c/label\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n\r\n                    \x3ctr\x3e\r\n                        \x3ctd\x3e\r\n                            \x3cdiv class\x3d"esriMapsSignInHelpText"\x3e\r\n                                \x3ca target\x3d"_search" tabindex\x3d"4" data-dojo-attach-point\x3d"signInLinkDiv" class\x3d"esriMapsSignInHelp"\x3e${nls.needHelpSigningIn}\x3c/a\x3e\r\n                            \x3c/div\x3e\r\n\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n\r\n                    \x3ctr\x3e\r\n                        \x3ctd\x3e\r\n                            \x3cdiv style\x3d"margin: 0px 0px 5px 0px;"\x3e\r\n                                \x3cinput class\x3d"esriMapsSignInButton esriMapsCommonButton" data-dojo-attach-point\x3d"signInButton" type\x3d"button" tabindex\x3d"5" value\x3d"${nls.signIn}" /\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n\r\n                    \x3ctr\x3e\r\n                        \x3ctd\x3e\r\n                            \x3cdiv class\x3d"esriMapsSignUpContainer"\x3e\r\n                                \x3cdiv class\x3d"esriMapsSignAccount"\x3e\r\n                                    ${nls.dontHaveAccount}\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriMapsSignUp"\x3e\r\n                                    \x3ca target\x3d"_blank" data-dojo-attach-point\x3d"freeTrialLinkDiv" tabindex\x3d"6"\x3e${nls.signUpForFreeTrial} \x3c/a\x3e\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n\r\n                        \x3c/td\x3e\r\n                    \x3c/tr\x3e\r\n\r\n                \x3c/table\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"oAuthLinkDiv" class\x3d"esriMapsOAuthLinkDiv hidden"\x3e\r\n    \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esriPBI/layout/templates/ClosablePanel.html":'\x3cdiv class\x3d"esriMapsSidePanelElement esriMapsTopmostPanelElement" data-dojo-attach-point\x3d"mainContents"\x3e\r\n    \x3cdiv class\x3d"esriMapsSidePanelPadding"\x3e\r\n    \x3cdiv class\x3d"esriMapsSidePanelPaddingHeader"\x3e\r\n        \x3cdiv class\x3d"esriMapsSidePanelButton esriMapsClose" data-dojo-attach-point\x3d"closeButton" title\x3d"${nls.closeSidePanelOverlayTooltip}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriMapsSidePanelTitle esriMapsHeadlineStyle TrimWithEllipses"\x3e${panelTitle}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriMapsSidePanelSubTitle"\x3e${panelSubtitle}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriMapsSidePanelContents esriMapsSidePanelOverlayContents" data-dojo-attach-point\x3d"contents"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"contentContainer" class\x3d"esriMapsContentContainer"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esriPBI/layout/templates/SlidingPanel.html":'\x3cdiv class\x3d"esriMapsSidePanelElement" data-dojo-attach-point\x3d"mainContents"\x3e\r\n    \x3cdiv class\x3d"esriMapsSidePanelPadding"\x3e\r\n        \x3ctable data-dojo-attach-point\x3d"backButton" class\x3d"esriMapsSidePanelTitle esriMapsSlidingPanelBackTable" cellpadding\x3d"0"\x3e\r\n            \x3ctr\x3e\r\n                \x3ctd\x3e\x3cdiv class\x3d"esriMapsHeadlineStyle esriMapsSidePanelBackButton"\x3e\x3c/div\x3e\x3c/td\x3e\r\n                \x3ctd\x3e\x3cdiv class\x3d"esriMapsSidePanelBackToContents" \x3e${nls.mapContentsTitle}\x3c/div\x3e\x3c/td\x3e\r\n            \x3c/tr\x3e\r\n        \x3c/table\x3e\r\n               \r\n        \x3cdiv class\x3d"esriMapsSidePanelButton esriMapsSidePanelButtonCollapse" data-dojo-attach-point\x3d"collapseButton" title\x3d"${nls.collapseSidePanelTooltip}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriMapsSidePanelSubTitle"\x3e${panelTitle}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriMapsSidePanelContents esriMapsSidePanelOverlayContents esriMapsSidePanelContentsWithSubTitle" data-dojo-attach-point\x3d"contentContainer"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esriPBI/themes/theme_template.css.txt":"    .esriMapsDarkBackground {\r\n\t\tbackground-color: ${titleColor}; \r\n    }\r\n    \r\n    .esriMapsLightBackground {\r\n\t\tbackground-color: ${headerColor}; \r\n    }\t\r\n\r\n    .esriMaps {\r\n\t\tfont-family: ${fontFamily}; \r\n    }\r\n    \r\n\t.esriMapsAppHeader {\r\n\t\tcolor: ${titleTextColor};\r\n\t\tbackground-color: ${titleColor}; \r\n    }\r\n\r\n\t.esriMapsMenuBar.dijitMenuBar .dijitMenuItem {\r\n\t\tcolor: ${accentTextColor}; \r\n\t}\r\n\r\n\t.header {\r\n\t\tcolor: ${titleTextColor}; \r\n\t\tbackground-color: ${titleColor};\r\n\t}\r\n\r\n\t.splHeader {\r\n\t\tcolor: ${titleTextColor}; \r\n\t\tbackground-color: ${titleColor};\r\n\t}\r\n\r\n\t.esriMaps .esriPopup .titlePane {\r\n\t\tbackground-color: ${headerColor};\r\n\t\tcolor: ${accentTextColor};\r\n\t\tborder-top-color: ${headerColor};\r\n\t\tborder-left-color: ${headerColor};\r\n\t\tborder-right-color: ${headerColor};\r\n\t}\r\n\r\n\t.esriMapsHeadlineStyle {\r\n\t\tcolor: ${accentColor};\r\n\t}\r\n\r\n\t.esriMapsSidePanelSubTitle {\r\n\t\tcolor: ${accentColor};\r\n\t}\r\n\t\r\n\t.esriMapsSidePanelTitle {\r\n  \t\tcolor: ${accentColor};\r\n\t}\r\n\r\n\t.esriMapsCommonButton:hover {\r\n\t\tbackground-color: ${accentColor};\r\n\t\tcolor: ${accentTextColor};\r\n\t\tborder-color: ${accentColor};\r\n\t\tborder-radius: 0;\r\n\t}\r\n\r\n\t.esriMapsExpectedButton,\r\n\t.dijitButton.primary .dijitButtonNode {\r\n\t\tbackground: ${accentColor};\r\n\t\tcolor: ${accentTextColor};\r\n\t\tborder-color: ${accentColor};\r\n\t}\r\n\r\n    .dijitButtonDisabled.primary .dijitButtonNode {\r\n        opacity: 0.5;\r\n    }\r\n\r\n    .Wizard_Button.primary{\r\n\t    background: ${accentColor} !important;\r\n\t    color: ${accentTextColor};\r\n\t    border-color: ${accentColor};\r\n\t}\r\n\r\n\t.esriMapsCommonButton:active {\r\n\t\tbackground-color: ${titleColor};\r\n\t\tcolor: ${titleTextColor};\r\n\t\tborder-color: ${titleTextColor};\r\n\t\tborder-radius: 0;\r\n\t}\r\n\r\n    .Wizard_Button:active {\r\n        background-color: ${titleColor};\r\n        color: ${titleTextColor};\r\n        border-color: ${titleTextColor};\r\n        border-radius: 0;\r\n    }\r\n\r\n\t.esriMapsRunAnalysisButton .dijitButton .dijitButtonNode:hover {\r\n\t\tbackground-color: ${accentColor};\r\n\t\tcolor: ${accentTextColor};\r\n\t\tborder-radius: 0;\r\n\t}\r\n\r\n    .Wizard_Button:hover{\r\n        background-color: ${accentColor};\r\n        color: ${accentTextColor};\r\n        border-radius: 0;\r\n    }\r\n\r\n\t.esriMapsRunAnalysisButton .dijitButtonHover .dijitButtonNode {\r\n\t\tbackground-color: ${accentColor};\r\n\t\t-webkit-transition-duration: 0.2s;\r\n\t\t-moz-transition-duration: 0.2s;\r\n\t\ttransition-duration: 0.2s;\r\n\t}\r\n\r\n\t.esriMapsRunAnalysisButton .dijitButton .dijitButtonNode:active {\r\n\t\tbackground-color: ${titleColor};\r\n\t\tborder-color: ${titleTextColor};\r\n\t\tcolor: ${accentTextColor};\r\n\t}\r\n\r\n\t.esriMapsHighlightedButton {\r\n\t\tbackground-color: ${accentColor};\r\n\t\tcolor: ${accentTextColor};\r\n\t}\r\n\r\n\t.esriMapsMenuBar.dijitMenuBar .dijitMenuItemHover,\r\n\t.esriMapsMenuBar.dijitMenuBar .dijitMenuItemSelected {\r\n\t\tbackground: ${headerHoverColor};\r\n\t\tcolor: ${accentTextColor}!important ;\r\n\t\tborder-color: ${titleColor};\r\n\t}\r\n\r\n\t.esriMapsMapContentsMenuBar.dijitMenuBar .dijitMenuItemHover,\r\n\t.esriMapsMapContentsMenuBar.dijitMenuBar .dijitMenuItemSelected {\r\n\t\tbackground-color: transparent;\r\n\t\tcolor: ${accentTextColor};\r\n\t\tborder-color: transparent;\r\n\t}   \r\n\r\n\t.esriMapsMenuContainer {\r\n  \t\tbackground-color: ${headerColor};\r\n\t}\r\n\r\n\t.esriMapsMenuContainer .esriMapsSecondaryMenuBar .dijitMenuItemHover,\r\n\t.esriMapsMenuContainer .esriMapsSecondaryMenuBar .dijitMenuItemSelected {\r\n\t\tbackground-color: transparent;\r\n\t\tcolor: ${accentTextColor};\r\n\t\tborder-color: transparent;\r\n\t}\r\n\r\n    .esriMapsAppHeader .esriMapsConfigMenuBar .esriMapsDesignTime.dijitMenuItem {\r\n        color: ${titleTextColor};\r\n    }\r\n\r\n\t.esriMapsLocationTypeFieldsDescription {\r\n\t\tfont-family: ${fontFamily};\r\n\t}\r\n    \r\n\t.esriMapsConfigurePopup {\r\n\t\tfont-family: ${fontFamily};\r\n\t}\r\n\r\n\t.esriMapsConfigurePopupField {\r\n\t\tfont-family: ${fontFamily};\r\n\t}\r\n\r\n\t.esriMaps text {\r\n\t\tfont-family: ${fontFamily};\r\n\t}\r\n\r\n\t.esriMapsFindHotSpots {\r\n\t\tfont-family: ${fontFamily};\r\n\t}\r\n\r\n\t.esriMapsFindNearbyOuterContainer {\r\n\t\tfont-family: ${fontFamily};\r\n\t}\r\n\r\n\t.esriMapsLayerAttribute {\r\n\t\tfont-family: ${fontFamily};\r\n\t}\r\n\r\n\t.esriMapsLayerAttributeGrid {\r\n\t\tfont-family: ${fontFamily};\r\n\t}\r\n\r\n\t.esriMapsMenuContainer {\r\n\t\tfont-family: ${fontFamily};\r\n\t}\r\n\r\n\t.esriMapsSignInContainerDivStyle {\r\n\t\tfont-family: ${fontFamily};\r\n\t}\r\n\r\n\t.esriMapsSignInTitleHeaderStyle {\r\n\t\tfont-family: ${fontFamily};\r\n\t}\r\n\r\n\t.esriMapsSignInTableStyle {\r\n\t\tfont-family: ${fontFamily};\r\n\t}\r\n\t\r\n\t.esriMapsAppHeader {\r\n    \tcolor: ${titleTextColor};\r\n\t}\r\n\r\n\t.esriMapsAppHeader .esriMapsConfigMenuBar .esriMapsDesignTime.dijitMenuItem {\r\n    \tcolor: ${titleTextColor};\r\n\t}\r\n\t\r\n\t.esriMapsToggleOn {\r\n\t\tbackground-color: ${accentColor};\r\n\t} \r\n\r\n\t.esriMapsRunAnalysisButton .dijitButton .dijitButtonNode {\r\n\t\tbackground-color: ${accentColor};\r\n\t\tcolor: ${accentTextColor};\r\n\t\tborder-color: ${accentTextColor};\r\n\t}\r\n\r\n\t.esriMapsSelectDialog .esriMapsSelectMenuOptions {\r\n\t\tbackground-color: ${headerHoverColor};\r\n\t}\r\n\r\n\t.esriMapsContentsTabLabel {\r\n\t\tcolor: ${accentTextColor};\r\n\t}\r\n\r\n\t.esriMapsContentsTabLabel:hover {\r\n\t\tbackground-color: ${headerHoverColor};\r\n\t\tcolor: ${accentTextColor};\r\n\t}\r\n\r\n\t.highlightTab {\r\n\t\tbackground-color: ${headerHoverColor};\r\n\t\tcolor: ${accentTextColor};\r\n\t}",
"url:esriPBI/widgets/Modal/templates/Modal.html":'\x3cdiv class\x3d"esriMapsXModal"\x3e\r\n    \x3cdiv class\x3d"dijitDialogUnderlay"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"esriMapsXModalScroller"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"*now":function(g){g(['dojo/i18n!*preload*esriPBI/nls/main*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});
define("esriPBI/main",[],function(){});