
window.parseTimeMarkers = window.parseTimeMarkers || {};
window.parseTimeMarkers['powerbireportembed.common.bundle.min.js'] = {
    nominalStart: Date.now(),
    start: Date.now()
};
var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},powerbi;!(function(e){var t;!(function(t){var n;!(function(t){function n(t,n){void 0===n&&(n=[]);var i=t[0].toLowerCase()+t.slice(1);n.push((function(n,i,r,o){return new e.explore.infonav.directives[t](n,i,r,o)})),angular.module("powerbi.infonav").directive(i,n)}function i(t){var n=t[0].toLowerCase()+t.slice(1),i=e.explore.infonav.components[t];angular.module("powerbi.infonav").component(n,i)}angular.module("powerbi.infonav",["powerbi.explore","powerbi.common"]).factory("answeredQuestionEventLoggerFactory",["promiseFactory","telemetryService","$timeout",function(e,n,i){return t.createAnsweredQuestionEventLoggerFactory(e,n,i)}]).factory("interpretHttpService",["$timeout","promiseFactory",function(e,n){return t.services.createInterpretHttpService(e,n)}]).factory("interpretService",["interpretHttpService","promiseFactory","$timeout","telemetryService","contentProviderHttpService","featureSwitchService",function(e,n,i,r,o,s){return t.services.createInterpretService(e,n,i,r,o,s)}]).factory("interpretUsageListener",["usageHttpService",function(t){return e.explore.infonav.usage.createInterpretUsageListener(t)}]).factory("sampleQuestionsService",["interpretService","featureSwitchService","promiseFactory",function(t,n,i){return e.explore.infonav.services.createSampleQuestionsService(t,n,i)}]).factory("usageHttpService",[function(){return e.explore.infonav.services.createUsageService()}]).factory("bindingElementFactory",["localizationService",function(t){return e.explore.infonav.services.createBindingElementFactory(t)}]).factory("termConverterService",["bindingElementFactory","rtl",function(t,n){return e.explore.infonav.services.createTermConverterService(t,n)}]).factory("qnaInputInterpreterService",["interpretService","interpretUsageListener","promiseFactory","contentProviderHttpService","answeredQuestionEventLoggerFactory","featureSwitchService",function(t,n,i,r,o,s){return e.explore.infonav.services.createQnaInputInterpreterService(t,n,i,r,o,s)}]).run(["scopedProvider",function(n){n.register("visualPlugin",{services:["featureSwitchService"],fn:function(t){return e.explore.infonav.services.createVisualPlugins(t.featureSwitches)}},t.constants.ScopedInstanceProviderName).register("eventBridge",{fn:function(){return e.common.createEventBridge()}}).register("infoNavCanvasDefinitionFactory",{services:["conceptualSchemaProxy","explorationProxy","explorationSerializer","featureSwitchService","geoTaggingAnalyzerService","aggrOps","promiseFactory"],scopedServices:["eventBridge"],fn:function(e,n,i,r,o,s,a,u){return t.services.createInfoNavCanvasDefinitionFactory(e,n,i,r,o,s,a,u)}})}]),t.registerInfonavDirective=n,t.registerInfonavComponent=i})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.QnAQnaHowToAskClicked=function(t,n,i,r,o,s,a,u,l){void 0===n&&(n=!1),void 0===i&&(i=void 0),void 0===r&&(r=void 0),void 0===o&&(o=void 0),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===u&&(u=void 0),void 0===l&&(l=void 0);var c={parentId:t,isError:n,errorSource:i,errorCode:r,errorMessage:o,activityName:s,activityId:a,isDebug:u,isCancelled:l},p={name:"PBI.QnA.QnaHowToAskClicked",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:c.parentId,isError:c.isError};return"undefined"!=typeof c.errorSource&&(t.errorSource=e.telemetry.ErrorSource[c.errorSource]),"undefined"!=typeof c.errorCode&&(t.errorCode=c.errorCode),"undefined"!=typeof c.errorMessage&&(t.errorMessage=c.errorMessage),"undefined"!=typeof c.activityName&&(t.activityName=c.activityName),"undefined"!=typeof c.activityId&&(t.activityId=c.activityId),"undefined"!=typeof c.isDebug&&(t.isDebug=c.isDebug),"undefined"!=typeof c.isCancelled&&(t.isCancelled=c.isCancelled),t},info:c,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QnAQnaHowToAskClickedLoggers&&(p.loggers=e.telemetry.QnAQnaHowToAskClickedLoggers),p},(function(e){e[e.Generated=0]="Generated",e[e.Tile=1]="Tile",e[e.FeaturedQuestion=2]="FeaturedQuestion"})(t.QnaStartSuggestionType||(t.QnaStartSuggestionType={}));t.QnaStartSuggestionType;!(function(e){e[e.HowToAsk=0]="HowToAsk",e[e.ErrorPage=1]="ErrorPage"})(t.QnaStartPageType||(t.QnaStartPageType={}));t.QnaStartPageType;t.QnAQnaStartSuggestionClicked=function(t,n,i,r,o,s,a,u,l,c,p){void 0===r&&(r=!1),void 0===o&&(o=void 0),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===u&&(u=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0);var d={suggestionType:t,pageType:n,parentId:i,isError:r,errorSource:o,errorCode:s,errorMessage:a,activityName:u,activityId:l,isDebug:c,isCancelled:p},h={name:"PBI.QnA.QnaStartSuggestionClicked",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={suggestionType:e.telemetry.QnaStartSuggestionType[d.suggestionType],pageType:e.telemetry.QnaStartPageType[d.pageType],parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QnAQnaStartSuggestionClickedLoggers&&(h.loggers=e.telemetry.QnAQnaStartSuggestionClickedLoggers),h},(function(e){e[e.Unknown=0]="Unknown",e[e.Owner=1]="Owner",e[e.Shared=2]="Shared"})(t.OwnerType||(t.OwnerType={}));t.OwnerType;t.QnAINAQ=function(t,n,i,r,o,s,a,u,l,c,p,d,h,v,f,g,m,y,S){void 0===d&&(d=!1),void 0===h&&(h=void 0),void 0===v&&(v=void 0),void 0===f&&(f=void 0),void 0===g&&(g=void 0),void 0===m&&(m=void 0),void 0===y&&(y=void 0),void 0===S&&(S=void 0);var C={EventsKitEventName:t,howEnded:n,isResponseEmpty:i,fromCache:r,contentProviderType:o,ownerType:s,duration:a,probeDuration:u,wasCancelled:l,interpretRequestId:c,parentId:p,isError:d,errorSource:h,errorCode:v,errorMessage:f,activityName:g,activityId:m,isDebug:y,isCancelled:S},T={name:"PBI.QnA.INAQ",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={EventsKitEventName:C.EventsKitEventName,howEnded:C.howEnded,isResponseEmpty:C.isResponseEmpty,fromCache:C.fromCache,contentProviderType:C.contentProviderType,ownerType:e.telemetry.OwnerType[C.ownerType],duration:C.duration,probeDuration:C.probeDuration,wasCancelled:C.wasCancelled,interpretRequestId:C.interpretRequestId,parentId:C.parentId,isError:C.isError};return"undefined"!=typeof C.errorSource&&(t.errorSource=e.telemetry.ErrorSource[C.errorSource]),"undefined"!=typeof C.errorCode&&(t.errorCode=C.errorCode),"undefined"!=typeof C.errorMessage&&(t.errorMessage=C.errorMessage),"undefined"!=typeof C.activityName&&(t.activityName=C.activityName),"undefined"!=typeof C.activityId&&(t.activityId=C.activityId),"undefined"!=typeof C.isDebug&&(t.isDebug=C.isDebug),"undefined"!=typeof C.isCancelled&&(t.isCancelled=C.isCancelled),t},info:C,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QnAINAQLoggers&&(T.loggers=e.telemetry.QnAINAQLoggers),T},t.QnAQuestionBoxLoadingMessage=function(t,n,i,r,o,s,a,u,l){void 0===n&&(n=!1),void 0===i&&(i=void 0),void 0===r&&(r=void 0),void 0===o&&(o=void 0),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===u&&(u=void 0),void 0===l&&(l=void 0);var c={parentId:t,isError:n,errorSource:i,errorCode:r,errorMessage:o,activityName:s,activityId:a,isDebug:u,isCancelled:l},p={name:"PBI.QnA.QuestionBoxLoadingMessage",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:c.parentId,isError:c.isError};return"undefined"!=typeof c.errorSource&&(t.errorSource=e.telemetry.ErrorSource[c.errorSource]),"undefined"!=typeof c.errorCode&&(t.errorCode=c.errorCode),"undefined"!=typeof c.errorMessage&&(t.errorMessage=c.errorMessage),"undefined"!=typeof c.activityName&&(t.activityName=c.activityName),"undefined"!=typeof c.activityId&&(t.activityId=c.activityId),"undefined"!=typeof c.isDebug&&(t.isDebug=c.isDebug),"undefined"!=typeof c.isCancelled&&(t.isCancelled=c.isCancelled),t},info:c,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QnAQuestionBoxLoadingMessageLoggers&&(p.loggers=e.telemetry.QnAQuestionBoxLoadingMessageLoggers),p},t.QnADropdownItemSelected=function(t,n,i,r,o,s,a,u,l,c){void 0===i&&(i=!1),void 0===r&&(r=void 0),void 0===o&&(o=void 0),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===u&&(u=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0);var p={isUtteranceEmpty:t,parentId:n,isError:i,errorSource:r,errorCode:o,errorMessage:s,activityName:a,activityId:u,isDebug:l,isCancelled:c},d={name:"PBI.QnA.DropdownItemSelected",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={isUtteranceEmpty:p.isUtteranceEmpty,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QnADropdownItemSelectedLoggers&&(d.loggers=e.telemetry.QnADropdownItemSelectedLoggers),d},t.QnAQuestionBoxAutoComplete=function(t,n,i,r,o,s,a,u,l){void 0===n&&(n=!1),void 0===i&&(i=void 0),void 0===r&&(r=void 0),void 0===o&&(o=void 0),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===u&&(u=void 0),void 0===l&&(l=void 0);var c={parentId:t,isError:n,errorSource:i,errorCode:r,errorMessage:o,activityName:s,activityId:a,isDebug:u,isCancelled:l},p={name:"PBI.QnA.QuestionBoxAutoComplete",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:c.parentId,isError:c.isError};return"undefined"!=typeof c.errorSource&&(t.errorSource=e.telemetry.ErrorSource[c.errorSource]),"undefined"!=typeof c.errorCode&&(t.errorCode=c.errorCode),"undefined"!=typeof c.errorMessage&&(t.errorMessage=c.errorMessage),"undefined"!=typeof c.activityName&&(t.activityName=c.activityName),"undefined"!=typeof c.activityId&&(t.activityId=c.activityId),"undefined"!=typeof c.isDebug&&(t.isDebug=c.isDebug),"undefined"!=typeof c.isCancelled&&(t.isCancelled=c.isCancelled),t},info:c,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QnAQuestionBoxAutoCompleteLoggers&&(p.loggers=e.telemetry.QnAQuestionBoxAutoCompleteLoggers),p}})(t=e.telemetry||(e.telemetry={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(t){function n(e){return new r(e)}var i=e.explore.services.ExplorationVisualPluginService;t.createVisualPlugins=n;var r=(function(t){function n(e){t.call(this,e,null,null),this.initializeVisualPluginOverride()}return __extends(n,t),n.prototype.getPlugin=function(e){return this.initializeVisualPluginOverride(),this.visualPluginOverride[e]?this.visualPluginOverride[e]:t.prototype.getPlugin.call(this,e)},n.prototype.initializeVisualPluginOverride=function(){this.visualPluginOverride||(this.visualPluginOverride={},this.visualPluginOverride[e.visuals.plugins.card.name]=e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.card,(function(){return new e.visuals.Card({isScrollable:!0,displayUnitSystemType:e.DisplayUnitSystemType.Verbose})})))},n})(i)})(n=t.services||(t.services={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){!(function(e){e[e.Server=0]="Server",e[e.User=1]="User"})(e.SpanSource||(e.SpanSource={}));e.SpanSource;!(function(e){e[e.None=0]="None",e[e.LinguisticSchemaAutoGenerated=1]="LinguisticSchemaAutoGenerated",e[e.LinguisticSchemaNotAvailable=2]="LinguisticSchemaNotAvailable",e[e.LinguisticSchemaIsStillLoading=4]="LinguisticSchemaIsStillLoading",e[e.InvalidDataModel=8]="InvalidDataModel",e[e.DataRetrievalFailed=16]="DataRetrievalFailed",e[e.DataRetrievalSkipped=32]="DataRetrievalSkipped",e[e.DuplicateExecuteSemanticQuery=64]="DuplicateExecuteSemanticQuery"})(e.InterpretWarnings||(e.InterpretWarnings={}));e.InterpretWarnings})(t=e.contracts||(e.contracts={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(n){var i;!(function(n){var i=t.ScopeUtils,r=(function(){function t(t,n){var r=this;if(this.scope=t,this.services=n,this.infoNavContainerOptions=this.services.explorationCapabilities.getCapabilities(),t.viewModel={exploreCanvas:null},t.respectPaneUpdates){var o=this.services.eventBridge.setBubblingScope(this.services.rootScope).subscribe(e.explore.services.events.visualConversion,(function(e,t){return r.onVisualConversion(t)}));t.$on("$destroy",(function(){o.unsubscribeAll()}))}i.defineDataSourcesOnScopeLegacy(this.scope,this.services.dataSources),this.handleNewCanvasDefinition(t.canvasDefinition,null),t.$watch("canvasDefinition",(function(e,t){return r.handleNewCanvasDefinition(e,t)}))}return t.createOptions=function(){return{scopedDependencies:["dataSources","eventBridge","explorationCapabilities","explorationNavigation","selection"]}},t.prototype.handleNewCanvasDefinition=function(e,t){var n=this,i=this.services,r=this.scope;if(this.services.dataSources.set(null),r.packageId=null,!e)return r.sourceLabel=null,void(r.viewModel.exploreCanvas=null);var o=e.dataSources;this.services.dataSources.set(o),r.packageId=e.model.packageId,e.initialize(t,i.eventBridge,this.scope.respectPaneUpdates,i.selection).then((function(){e===n.scope.canvasDefinition&&(i.explorationNavigation.goto(e.section),r.viewModel.exploreCanvas=e.exploreCanvas,n.updateExplorationMaxSize(e))}))},t.prototype.onVisualConversion=function(e){var t=this.scope.canvasDefinition;t&&(t.onVisualConversion(e.newVisualType),this.updateExplorationMaxSize(t))},t.prototype.updateExplorationMaxSize=function(e){if(!this.infoNavContainerOptions.cortana){var t={};e.maxWidth>0&&(t["max-width"]=e.maxWidth+"px"),e.maxHeight>0&&(t["max-height"]=e.maxHeight+"px"),this.scope.explorationStyle=t}},t})();n.InfoNavCanvasController=r})(i=n.controllers||(n.controllers={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(n){var i;!(function(i){var r=jsCommon.EnumExtensions,o=e.explore.constants,s=e.explore.viewModels,a=e.common.helpers.ModelConverterHelper,u=e.common.contracts.Permissions,l=t.ScopeUtils,c=110,p=50,d=(function(){function t(e,t){this.scope=e,this.services=t,this.initialize()}return t.createOptions=function(){return{scopedServiceRoot:!0,scopedProviderInstanceName:n.constants.ScopedInstanceProviderName,additionalServices:["featureSwitchService","resourcePackagesService","localizationService","rtl"],scopedDependencies:["dataSources","infoNavCanvasDefinitionFactory","explorationCapabilities","explorationNavigation","filterGenerator","pinVisual","selection","undoRedo","viewModeState","visualPlugin"]}},t.prototype.onInterpretSuccess=function(e,t,n,i){var r=_.find(this.scope.models,(function(e){return e.vsName===t.virtualServerName&&e.dbName===t.databaseName}));this.scope.sourceLabel=this.getSourceLabelForModel(r),t.restatement&&this.scope.newQnaEnabled&&(this.scope.restatement=t.restatement.replace(/^Show /,"Showing ")),i&&this.handleNewInterpretResponse(e,t,n)},t.prototype.getSourceLabelForModel=function(e){return e&&!_.isEmpty(e.displayName)?this.services.localizationService.format("InfoNav_SourceLabel",[e.displayName]):null},t.prototype.handleNewInterpretResponse=function(e,t,i){this.utterance=e.utterance,this.utteranceData=t;var r=this.scope.infoNavContainerOptions.cortana?n.services.SingleVisualizationType.Cortana:n.services.SingleVisualizationType.PrimaryVisual,o=this.services.infoNavCanvasDefinitionFactory.createGivenUtteranceData(t,this.scope.models,i,r,this.services.visualPlugin);this.setNewCanvasDefinition(o)},t.prototype.onInterpretError=function(e){this.utterance=e,this.scope.sourceLabel=this.scope.restatement=null,this.showDefaultError(e),this.scope.hostService.updatePinIconState&&this.scope.hostService.updatePinIconState({visible:!1,enabled:!1})},t.prototype.onInterpretResultCleared=function(){this.utterance="",this.scope.sourceLabel=this.scope.restatement=null,this.scope.hasResult=!1,this.scope.infoNavCanvasDefinition=null,this.updateState(n.services.VisualState.Empty),this.scope.hostService.updatePinIconState&&this.scope.hostService.updatePinIconState({visible:!1,enabled:!1})},t.prototype.onInterpretIssued=function(){this.scope.state!==n.services.VisualState.DisplayingIntepretResult&&this.scope.state!==n.services.VisualState.Error&&this.updateState(n.services.VisualState.InProgress)},t.prototype.initialize=function(){var e=this;l.defineDataSourcesOnScopeLegacy(this.scope,this.services.dataSources),this.scope.infoNavContainerOptions?this.services.explorationCapabilities.setCapabilities(this.scope.infoNavContainerOptions):this.scope.infoNavContainerOptions=this.services.explorationCapabilities.getCapabilities(),this.scope.infoNavContainerOptions.shouldShowPageFilters=function(t){return e.shouldShowPageFilters(t)},this.services.explorationCapabilities.setCapabilities(this.scope.infoNavContainerOptions),this.services.viewModeState.setMode(0),this.explorationLoadedEventRaised=!1,this.scope.viewModel=n.viewModels.ViewModelFactory.createInfoNavContainer(this.services.filterGenerator),this.scope.hasResult=!1;var i=s.createFieldListViewModelFactory(s.createFieldListMenuItemFactory(this.services.localizationService,this.services.featureSwitchService),s.createFieldListPropertyTemplateGenerator(),this.services.localizationService,this.services.featureSwitchService);this.scope.fieldListConfig={viewModelFactory:i,alwaysHasActiveItem:!0},this.scope.newQnaEnabled=!this.services.rtl.isRtlLayout&&!this.scope.infoNavContainerOptions.cortana;var r=this.scope.hostService.getInitialVisualState;this.scope.state=r?r():n.services.VisualState.Empty,this.services.undoRedo.setHandler({rollback:function(){},takeSnapshot:function(){return null}}),this.scope.hasExplorePermission=function(e){return t.hasExplorePermission(e)},this.services.pinVisual.setHandler({pinVisual:function(t){e.pinVisual(t)}}),this.interpretListener=new m(this.services.timeout,new v(this.services.timeout,new f(this))),this.scope.hostService.setInterpretListener(this.interpretListener),this.scope.$watchGroup(["infoNavCanvasDefinition","infoNavCanvasDefinition.maxHeight"],(function(){e.scope.infoNavContentMaxHeight=null;var t=e.scope.infoNavCanvasDefinition;if(t&&t.maxHeight&&t.maxHeight>0){var n=c+p;e.scope.infoNavContentMaxHeight=t.maxHeight+n+"px"}}));var o=this.services.rootScope.$on(n.constants.openTileEventName,(function(t,n){return e.onOpenTile(t,n)})),a=this.services.rootScope.$on(n.constants.pinSelectedVisual,(function(t){return e.pinSelectedVisual(t)})),u=this.services.rootScope.$on(n.constants.showQnaStart,(function(){e.scope.hasResult=!1,e.scope.state=n.services.VisualState.QnaStart}));this.scope.$on("$destroy",(function(){e.interpretListener=null,e.scope.hostService.setInterpretListener(null),o(),a(),u()}))},t.prototype.shouldShowPageFilters=function(e){var t=this.scope.infoNavCanvasDefinition;return t.section!==e||t.showPageFilters},t.prototype.setNewCanvasDefinition=function(e){var t=this;this.scope.infoNavCanvasDefinition=e,this.raiseExplorationLoadedEventIfNeeded();var i=e.dataSources;this.services.dataSources.set(i),this.scope.packageId=e.model.packageId,e.initializePromise.then((function(){e===t.scope.infoNavCanvasDefinition&&(e.resetSelection&&t.services.selection.clearSelection(),t.scope.hostService.updatePinIconState&&t.scope.hostService.updatePinIconState({visible:!0,enabled:e.pinEnabled}),t.services.viewModeState.updateConfig((function(n){n.alwaysPopulatePanes=!t.scope.infoNavContainerOptions.cortana&&!e.pod})),t.scope.infoNavContainerOptions.showTaskPane=!t.scope.infoNavContainerOptions.cortana&&!e.pod,t.services.explorationCapabilities.setCapabilities(t.scope.infoNavContainerOptions),t.updateState(n.services.VisualState.DisplayingIntepretResult),t.scope.hasResult=!0)}))},t.prototype.pinVisual=function(e){var t=this.scope.infoNavCanvasDefinition.model;t&&(this.scope.infoNavCanvasDefinition.pod||(e.action={action:n.constants.openTileAction},e.utterance=this.utterance,e.modelId=t.id,e.packageId=t.packageId,this.services.rootScope.$emit(o.pinVisualContainerEventName,e)))},t.prototype.showDefaultError=function(t){var i=this;this.scope.hasResult=!1,this.scope.infoNavCanvasDefinition=null,this.updateState(n.services.VisualState.Error);var r=this.services.featureSwitchService.featureSwitches,o=_.any(this.scope.models,(function(e){return a.getIsQnaSupported(e,r)}));e.common.localize.ensureLocalization((function(){o?i.scope.errorMessage=e.common.localize.get("QnaStart_ErrorPrompt"):i.scope.errorMessage=e.common.localize.get(1===i.scope.models.length?"QnAVisualization_UnsupportedModelTitleText":"QnAVisualization_UnsupportedModelsTitleText")}))},t.prototype.updateState=function(e){var t=this,i=this.scope;this.services.visualPlugin.removeAllCustomVisuals(),i.state!==e&&(!this.openTileEvent||e!==n.services.VisualState.DisplayingIntepretResult&&e!==n.services.VisualState.Error||(e!==n.services.VisualState.Error?this.openTileEvent.resolve():this.openTileEvent.reject(),this.openTileEvent=null),i.state=e,this.raiseStateChanged(),window.setTimeout((function(){return t.scope.$apply()})))},t.prototype.onOpenTile=function(e,t){e.stopPropagation(),this.interpretListener.onInterpretResultCleared(),this.openTileEvent=t.openTileTelemetryEvent,this.utterance=t.utterance,this.utteranceData=null;var n=this.services.infoNavCanvasDefinitionFactory.createGivenTileData(t,this.scope.models,this.services.visualPlugin);this.setNewCanvasDefinition(n),this.scope.hostService.setUtteranceText&&t.utterance&&this.scope.hostService.setUtteranceText(t.utterance)},t.prototype.pinSelectedVisual=function(t){if(t.stopPropagation(),this.scope.state===n.services.VisualState.DisplayingIntepretResult)if(this.scope.infoNavCanvasDefinition.pod){var i=this.scope.infoNavCanvasDefinition,r={exploration:i.exploration,section:i.section,reportId:i.exploration.contract.reportId,modelId:i.model.id,packageId:i.model.packageId,action:{action:e.common.constants.openQnAActionName},utterance:this.utterance,pod:i.pod.name,filters:i.extractParameterFilters()};this.services.rootScope.$emit(e.common.constants.pinReportPageToDashboard,r)}else{var o=this.services.selection.getSelectedElements(),s=o[0].visualContainer,a=[],u=s.filters||[],l=this.services.explorationNavigation.getCurrentSection();l&&l.filters&&l.filters.length&&(u=u.concat(l.filters));for(var c=[],p=0,d=u.length;p<d;p++){var h=u[p].filter;h&&(a.push(h),c.push(u[p]))}var v={dataFilter:e.data.SemanticFilter.merge(a),highlightFilter:null,filterMetadata:this.services.filterGenerator.generateFilterMetadata(c)};this.services.pinVisual.pinVisualContainer(this.scope.infoNavCanvasDefinition.dataSources,s,s.config.singleVisual.visualType,v)}},t.prototype.raiseStateChanged=function(){var e=this.scope.hostService.onStateChanged;e&&e(this.utteranceData,this.scope.state)},t.prototype.raiseExplorationLoadedEventIfNeeded=function(){this.explorationLoadedEventRaised||(this.scope.$broadcast(e.explore.constants.explorationLoadedEventName),this.explorationLoadedEventRaised=!0)},t.hasExplorePermission=function(e){return r.hasFlag(e.permissions,u.Explore)||r.hasFlag(e.permissions,u.ReadWrite)},t})();i.InfoNavContainerController=d;var h=500,v=(function(){function e(e,t,n){this.timeout=e,this.interpretListener=t,this.throttleTimeoutMilliseconds=n||h}return e.prototype.onInterpretIssued=function(){this.interpretListener.onInterpretIssued()},e.prototype.onInterpretSuccess=function(e,t,n,i){var r=this;this.doThrottledVisualUpdate((function(){return r.interpretListener.onInterpretSuccess(e,t,n,i)}))},e.prototype.onInterpretError=function(e,t){var n=this;this.doThrottledVisualUpdate((function(){return n.interpretListener.onInterpretError(e,t)}))},e.prototype.onInterpretResultCleared=function(){this.cancelThrottledVisualUpdate(),this.interpretListener.onInterpretResultCleared()},e.prototype.cancelThrottledVisualUpdate=function(){this.throttledVisualUpdatePromise&&this.timeout.cancel(this.throttledVisualUpdatePromise),this.throttledVisualUpdatePromise=null,this.doWaitingVisualUpdate=null},e.prototype.doThrottledVisualUpdate=function(e){var t=this;this.throttledVisualUpdatePromise?this.doWaitingVisualUpdate=e:(e(),this.throttledVisualUpdatePromise=this.timeout((function(){if(t.throttledVisualUpdatePromise=null,t.doWaitingVisualUpdate){var e=t.doWaitingVisualUpdate;t.doWaitingVisualUpdate=null,t.doThrottledVisualUpdate(e)}}),this.throttleTimeoutMilliseconds))},e})();i.ThrottledInterpretListener=v;var f=(function(){function e(e){this.innerListener=e}return e.prototype.onInterpretIssued=function(){this.innerListener.onInterpretIssued()},e.prototype.onInterpretSuccess=function(e,t,n,i){this.currentUtteranceData&&t.interpretResult.completedUtterance===this.currentUtteranceData.interpretResult.completedUtterance||(this.currentUtteranceData=t,this.innerListener.onInterpretSuccess(e,t,n,i))},e.prototype.onInterpretError=function(e,t){this.innerListener.onInterpretError(e,t)},e.prototype.onInterpretResultCleared=function(){this.innerListener.onInterpretResultCleared()},e})();i.CompletedUtteranceInterpretListener=f;var g=1e3,m=(function(){function e(e,t,n){this.timeout=e,this.interpretListener=t,this.errorDelayTimeoutMilliseconds=n||g}return e.prototype.onInterpretIssued=function(){this.cancelWaitingError(),this.interpretListener.onInterpretIssued()},e.prototype.onInterpretSuccess=function(e,t,n,i){this.cancelWaitingError(),this.interpretListener.onInterpretSuccess(e,t,n,i)},e.prototype.onInterpretError=function(e,t){var n=this;this.cancelWaitingError(),t||(this.onErrorPromise=this.timeout((function(){n.interpretListener.onInterpretError(e,t)}),this.errorDelayTimeoutMilliseconds))},e.prototype.onInterpretResultCleared=function(){this.cancelWaitingError(),this.interpretListener.onInterpretResultCleared()},e.prototype.cancelWaitingError=function(){this.onErrorPromise&&this.timeout.cancel(this.onErrorPromise),this.onErrorPromise=null},e})();i.DelayedErrorInterpretListener=m})(i=n.controllers||(n.controllers={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){var i=e.common.helpers.ModelConverterHelper,r=10,o=(function(){function n(e,t){var i=this;this.scope=e,this.services=t,e.showUtterance=function(e){return i.showUtterance(e)},e.toggleLimit=function(e){return n.toggleLimit(e)},e.viewModel={modelSuggestionSets:[]},this.loadSuggestions(),e.$watch("models",(function(){return i.loadSuggestions()}))}return n.createOptions=function(){return{additionalServices:["localizationService","promiseFactory","sampleQuestionsService","telemetryService","featureSwitchService"]}},n.prototype.loadSuggestions=function(){var e=this.services,t=this.scope,i=t.models;return _.isEmpty(i)?void(t.viewModel.modelSuggestionSets=[]):(t.isLoading=!0,void n.loadSuggestionsForModels(i,e).then((function(e){i===t.models&&(t.viewModel.modelSuggestionSets=e,t.isLoading=!1)})))},n.loadSuggestionsForModels=function(e,t){for(var i=t.promiseFactory.defer(),r=[],o=t.sampleQuestionsService.getSampleQuestions(e),s=0,a=0,u=o;a<u.length;a++){var l=u[a];l.then((function(o){if(!_.isEmpty(o)){var s=n.getSuggestionsForSampleQuestions(e,o,t.featureSwitchService.featureSwitches);n.mergeSuggestionSets(r,s),r.length>0&&i.resolve(r)}})),l.finally((function(){s++,s===o.length&&i.resolve(r)}))}return i.promise},n.getSuggestionsForSampleQuestions=function(e,t,o){return _.isEmpty(t)?[]:_(e||[]).filter((function(e){return i.getIsQnaSupported(e,o)})).map((function(e){return{modelName:e.displayName,dbName:e.dbName,vsName:e.vsName,initialSuggestionLimit:r,currentSuggestionLimit:r,suggestions:_(t).filter((function(t){return t.modelId===e.id})).map((function(e){return{suggestion:e.question.trim(),source:n.convertSampleQuestionSource(e.source)}})).uniq((function(e){return e.suggestion.toUpperCase()})).value()}})).filter((function(e){return e.suggestions.length>0})).value()},n.mergeSuggestionSets=function(e,t){for(var n=0,i=t;n<i.length;n++){var r=i[n],o=r.dbName,s=r.vsName,a=_.find(e,(function(e){return e.dbName===o&&e.vsName===s}));a?a.suggestions=_(a.suggestions.concat(r.suggestions)).uniq((function(e){return e.suggestion.trim().toUpperCase()})).value():e.push(r)}},n.prototype.showUtterance=function(t){var n=_.isEmpty(this.scope.errorMessage)?e.telemetry.QnaStartPageType.HowToAsk:e.telemetry.QnaStartPageType.ErrorPage;this.services.telemetryService.logEvent(e.telemetry.QnAQnaStartSuggestionClicked,t.source,n);var i=t.suggestion;_.endsWith(i," ")||(i+=" "),this.scope.interpretUtterance(i)},n.toggleLimit=function(e){e.currentSuggestionLimit?e.currentSuggestionLimit=void 0:e.currentSuggestionLimit=e.initialSuggestionLimit},n.convertSampleQuestionSource=function(n){switch(n){case t.services.SampleQuestionSource.Generated:return e.telemetry.QnaStartSuggestionType.Generated;case t.services.SampleQuestionSource.Tile:return e.telemetry.QnaStartSuggestionType.Tile;case t.services.SampleQuestionSource.FeaturedQuestion:return e.telemetry.QnaStartSuggestionType.FeaturedQuestion;default:return e.telemetry.QnaStartSuggestionType.Generated}},n})();n.InfoNavQnaStartController=o})(n=t.controllers||(t.controllers={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){var i;!(function(n){var i=e.common.helpers.ModelConverterHelper,r=jsCommon.DOMConstants,o=(function(){function e(e,r,o,s,a,u,l,c,p){var d=this;this.interpretService=l,this.qnaInputInterpreterService=p,this.utteranceElement=e.find("#utteranceContent")[0],this.captureElement=e.find("#cap")[0],this.contentElement=e.find("#content")[0],this.stateMachine=t.stateMachine.createStateMachine(n.QnaInputStateMachine.definition,n.QnaInputState.Inactive),this.registerStateMachineActions(),this.placeholder=o.get("Qna_Input_Placeholder");var h={stateMachine:this.stateMachine,contentElement:this.contentElement,utteranceElement:this.utteranceElement,captureElement:this.captureElement,utterance:function(e,t){return d.processUtterance(e,t)},selectCharacters:function(e,t){return d.selectCharacters(e,t)}};this.termManager=new n.TermManager(c,h);var v=this.output;v.showQnaFeedback=!1,v.updateUtteranceWithoutInterpret=function(e){d.processUtterance(e,!0,!0),d.sendInterpretForCurrentInput(!1),d.selectCharacters(e.length),d.contentElement.focus()},v.interpretUtterance=function(e){var t=d.processUtterance(e);return d.selectCharacters(t.length),d.contentElement.focus(),t};var f=s.featureSwitches;this.sharedViewModel={additionalODataFilterGetter:function(){return d.getAdditionalODataFilter},interpretListener:function(){return d.interpretListener},interpretResponse:null,
models:function(){return _.filter(d.models,(function(e){return e&&i.getIsQnaSupported(e,f)}))},showLoadingPlaceholder:!1,showLoadingSpinner:!1,showPinButton:!1,showQnaFeedback:function(e){return d.output.showQnaFeedback=e},stateMachine:this.stateMachine,storedUserInput:null,usageReportingEnabled:function(){return d.usageReportingEnabled},userInput:function(e){return d.processUtterance(e)}},this.addEventListeners()}return e.createOptions=function(){return{additionalServices:["$element","interpretUsageListener","localizationService","featureSwitchService","modalDialogService","promiseFactory","interpretService","termConverterService","qnaInputInterpreterService"]}},e.prototype.handleResize=function(){this.termManager&&this.termManager.handleResize()},e.prototype.selectUtterance=function(){this.contentElement.focus(),this.selectCharacters(0,this.utterance.length)},e.prototype.processUtterance=function(e,t,i){if(void 0!==e){e=e.replace(/\s/g," ");var r=this.contentElement.selectionStart,o=this.contentElement.selectionEnd;this.termManager.updateUtterance(this.output.utterance,e,t),this.contentElement.value=this.output.utterance=e,this.selectCharacters(r,o),_.isEmpty(e)?this.interpretListener&&this.interpretListener.onInterpretResultCleared():i||this.stateMachine.enqueueTransition(n.QnaInputTransitionId.TextChanged)}return this.utterance},Object.defineProperty(e.prototype,"utterance",{get:function(){return this.output.utterance},set:function(e){this.processUtterance(e)},enumerable:!0,configurable:!0}),e.prototype.addEventListeners=function(){var e=this;this.contentElement.addEventListener("input",(function(t){return e.utterance=e.contentElement.value})),this.contentElement.addEventListener("focus",(function(){return e.utteranceFocus()})),this.contentElement.addEventListener("blur",(function(){return e.utteranceBlur()})),this.contentElement.addEventListener("keyup",(function(t){switch(t.keyCode){case r.rightArrowKeyCode:case r.leftArrowKeyCode:case r.endKeyCode:case r.homeKeyCode:e.stateMachine.enqueueTransition(n.QnaInputTransitionId.NavigateLeftRight)}})),this.contentElement.addEventListener("keydown",(function(t){switch(t.keyCode){case r.tabKeyCode:e.termManager.hasCurrentTerm()&&(e.stateMachine.enqueueTransition(n.QnaInputTransitionId.TextSuggestionConfirmed),t.preventDefault());break;case r.enterKeyCode:e.termManager.hasCurrentTerm()?e.stateMachine.enqueueTransition(n.QnaInputTransitionId.TextSuggestionConfirmed):e.stateMachine.enqueueTransition(n.QnaInputTransitionId.ConfirmQuery),t.preventDefault();break;case r.downArrowKeyCode:e.stateMachine.enqueueTransition(n.QnaInputTransitionId.NavigateDown),t.preventDefault();break;case r.upArrowKeyCode:e.stateMachine.enqueueTransition(n.QnaInputTransitionId.NavigateUp),t.preventDefault();break;case r.escKeyCode:e.termManager.hasOpenMenu?e.termManager.hideMenus():e.clear(),t.preventDefault()}}))},e.prototype.hideAllMenus=function(){this.stateMachine.enqueueTransition(n.QnaInputTransitionId.NavigateOutOfBounds)},e.prototype.utteranceBlur=function(){this.stateMachine.enqueueTransition(n.QnaInputTransitionId.EndSession)},e.prototype.utteranceFocus=function(){this.contentElement.value===this.placeholder&&(this.contentElement.value=""),_.isEmpty(this.contentElement.value)&&this.stateMachine.enqueueTransition(n.QnaInputTransitionId.BeginSession)},e.prototype.clear=function(){this.contentElement.value=this.utterance="",this.termManager.clearTerms(),this.interpretListener&&this.interpretListener.onInterpretResultCleared(),this.contentElement.focus()},e.prototype.selectCharacters=function(e,t){void 0===t&&(t=e),this.contentElement.setSelectionRange(e,t)},e.prototype.registerStateMachineActions=function(){var e=this;this.stateMachine.addTransitionActionHandler(n.QnaInputTransitionAction.interpret,(function(){return e.sendInterpretForCurrentInput()})),this.stateMachine.addTransitionActionHandler(n.QnaInputTransitionAction.sendInterpretProbe,(function(){return e.interpretService.probe(e.models)})),this.stateMachine.addTransitionActionHandler(n.QnaInputTransitionAction.displayQueryResult,(function(){return e.interpretLoaded(!1)})),this.stateMachine.addTransitionActionHandler(n.QnaInputTransitionAction.updateResult,(function(){return e.interpretLoaded(!0)})),this.stateMachine.addTransitionActionHandler(n.QnaInputTransitionAction.storeUserInput,(function(){})),this.stateMachine.addTransitionActionHandler(n.QnaInputTransitionAction.restoreUserInput,(function(){})),this.stateMachine.addTransitionActionHandler(n.QnaInputTransitionAction.clearUserInputBuffer,(function(){})),this.stateMachine.addTransitionActionHandler(n.QnaInputTransitionAction.displaySuggestionsForEmptyQuery,(function(){})),this.stateMachine.addTransitionActionHandler(n.QnaInputTransitionAction.textInput_UpdateTermSelection,(function(){}))},e.prototype.sendInterpretForCurrentInput=function(e){void 0===e&&(e=!0),this.interpretListener&&this.interpretListener.onInterpretIssued(),this.qnaInputInterpreterService.sendInterpret(this.utterance,this.sharedViewModel,this.termManager.getUserSpanBindings(),e)},e.prototype.interpretLoaded=function(e){var t=this.sharedViewModel.interpretResponse,n=this.contentElement.selectionEnd>=this.contentElement.value.trim().length&&!e;this.termManager.processInterpret(t,n)},e})();n.QnaInputController=o,o.$inject=o.createOptions().additionalServices})(i=n.qna||(n.qna={}))})(n=t.controllers||(t.controllers={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(t){var n;!(function(t){var n=e.common.helpers.ModelConverterHelper,i=3,r=(function(){function t(e,t,n,i,r,o){this.$timeout=e,this.featureSwitchService=t,this.promiseFactory=n,this.interpretService=i,this.qnaInputInterpreterService=r,this.conceptualSchemaProxy=o,this.sendInterpretProbe()}return t.createOptions=function(){return{additionalServices:["$timeout","featureSwitchService","promiseFactory","interpretService","qnaInputInterpreterService","conceptualSchemaProxy"]}},t.prototype.launchQna=function(){this.showQna(),this.$timeout((function(){return $(".qnaInputContainer #content").focus()}))},t.prototype.sendInterpretProbe=function(e){var i=this,r=_.filter(this.models,(function(e){return e&&n.getIsQnaSupported(e,i.featureSwitchService.featureSwitches)})),o=this.interpretService.probe(r||[],e),s=this.promiseFactory.defer();return o.then((function(){t.preloadConceptualSchemas(i.models||[],i.conceptualSchemaProxy),s.resolve({})}),(function(){s.reject()})),s.promise},t.preloadConceptualSchemas=function(e,n){for(var r=Math.min(e.length,i),o=0,s=_.take(e,r);o<s.length;o++){var a=s[o];n.get(t.createDataSourceArray(a))}},t.createDataSourceArray=function(t){return e.explore.contracts.createDataSourceArray([{type:"dsr",id:t.id,packageId:t.packageId,name:void 0,dsr:{schemaName:void 0,vsName:t.vsName,dbName:t.dbName,modelId:t.id}}])},t})();t.QnaInputLauncherController=r,r.$inject=r.createOptions().additionalServices})(n=t.qna||(t.qna={}))})(n=t.controllers||(t.controllers={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(t){var n;!(function(t){!(function(e){e[e.clearInterpretResult=0]="clearInterpretResult",e[e.clearUserInputBuffer=1]="clearUserInputBuffer",e[e.displayQueryResult=2]="displayQueryResult",e[e.displaySuggestionsForEmptyQuery=3]="displaySuggestionsForEmptyQuery",e[e.interpret=4]="interpret",e[e.restoreUserInput=5]="restoreUserInput",e[e.selectTerm=6]="selectTerm",e[e.sendInterpretProbe=7]="sendInterpretProbe",e[e.setInputTextToSelectedSuggestion=8]="setInputTextToSelectedSuggestion",e[e.storeUserInput=9]="storeUserInput",e[e.suggestionList_Clear=10]="suggestionList_Clear",e[e.suggestionList_ClearPreserveRestatement=11]="suggestionList_ClearPreserveRestatement",e[e.suggestionList_ClearSelection=12]="suggestionList_ClearSelection",e[e.suggestionList_SelectNext=13]="suggestionList_SelectNext",e[e.suggestionList_SelectPrevious=14]="suggestionList_SelectPrevious",e[e.textInput_Blur=15]="textInput_Blur",e[e.textInput_Clear=16]="textInput_Clear",e[e.textInput_ClearTermHighlights=17]="textInput_ClearTermHighlights",e[e.textInput_CompleteInput=18]="textInput_CompleteInput",e[e.textInput_ShowAutoCompletion=19]="textInput_ShowAutoCompletion",e[e.textInput_UpdateTermSelection=20]="textInput_UpdateTermSelection",e[e.updateResult=21]="updateResult",e[e.hideMenus=22]="hideMenus",e[e.startNavigate=23]="startNavigate",e[e.findTerm=24]="findTerm"})(t.QnaInputTransitionAction||(t.QnaInputTransitionAction={}));var n=t.QnaInputTransitionAction;!(function(e){e[e.BeginSession=0]="BeginSession",e[e.EndSession=1]="EndSession",e[e.ClearInterpretResult=2]="ClearInterpretResult",e[e.ClearQueryWithBlur=3]="ClearQueryWithBlur",e[e.ClearQueryWithoutBlur=4]="ClearQueryWithoutBlur",e[e.ConfirmQuery=5]="ConfirmQuery",e[e.TextChanged=6]="TextChanged",e[e.CompleteQuery=7]="CompleteQuery",e[e.NavigateUp=8]="NavigateUp",e[e.NavigateDown=9]="NavigateDown",e[e.NavigateOutOfBounds=10]="NavigateOutOfBounds",e[e.TextSuggestionSelected=11]="TextSuggestionSelected",e[e.TextSuggestionConfirmed=12]="TextSuggestionConfirmed",e[e.TermSelected=13]="TermSelected",e[e.ResultReady=14]="ResultReady",e[e.NavigateLeftRight=15]="NavigateLeftRight"})(t.QnaInputTransitionId||(t.QnaInputTransitionId={}));var i=t.QnaInputTransitionId;!(function(e){e[e.Inactive=0]="Inactive",e[e.Typing=1]="Typing",e[e.BrowseSuggestions=2]="BrowseSuggestions",e[e.TermSelection=3]="TermSelection"})(t.QnaInputState||(t.QnaInputState={}));var r=t.QnaInputState,o=(function(){function t(){}return Object.defineProperty(t,"definition",{get:function(){return t.storedDefinition||t.initializeDefinition(),t.storedDefinition},enumerable:!0,configurable:!0}),t.initializeDefinition=function(){t.storedDefinition=new e.stateMachine.StateMachineDefinition,t.storedDefinition.addTransition(r.Inactive,i.BeginSession,r.Typing,t.beginSessionActions),t.storedDefinition.addTransition(r.Inactive,i.ClearInterpretResult,r.Inactive,t.clearInterpretResultActions),t.storedDefinition.addTransition(r.Inactive,i.ClearQueryWithBlur,r.Inactive,t.clearQueryWithBlurEventActions),t.storedDefinition.addTransition(r.Inactive,i.ClearQueryWithoutBlur,r.Inactive,t.clearQueryWithoutBlurEventActions),t.storedDefinition.addTransition(r.Inactive,i.ResultReady,r.Typing,t.inactiveStateResultReadyActions),t.storedDefinition.addTransition(r.Inactive,i.TextChanged,r.Typing,t.textChangedEventActions),t.storedDefinition.addTransition(r.Inactive,i.TextSuggestionConfirmed,r.Typing,t.textSuggestionConfirmedActions),t.storedDefinition.addTransition(r.Inactive,i.TextSuggestionSelected,r.Typing,[n.setInputTextToSelectedSuggestion]),t.storedDefinition.addTransition(r.Inactive,i.TermSelected,r.BrowseSuggestions,t.termSelectedActions),t.storedDefinition.addTransition(r.Inactive,i.NavigateOutOfBounds,r.Inactive,t.navigateOutOfBoundsEventActions),t.storedDefinition.addTransition(r.Typing,i.ClearInterpretResult,r.Typing,t.clearInterpretResultActions),t.storedDefinition.addTransition(r.Typing,i.ClearQueryWithBlur,r.Typing,t.clearQueryWithBlurEventActions),t.storedDefinition.addTransition(r.Typing,i.ClearQueryWithoutBlur,r.Typing,t.clearQueryWithoutBlurEventActions),t.storedDefinition.addTransition(r.Typing,i.CompleteQuery,r.Typing,t.completeQueryEventActions),t.storedDefinition.addTransition(r.Typing,i.EndSession,r.Inactive,t.endSessionEventTypingActions),t.storedDefinition.addTransition(r.Typing,i.NavigateDown,r.BrowseSuggestions,t.navigateDownEventActions),t.storedDefinition.addTransition(r.Typing,i.NavigateUp,r.BrowseSuggestions,t.navigateUpEventActions),t.storedDefinition.addTransition(r.Typing,i.NavigateOutOfBounds,r.Typing,t.navigateOutOfBoundsEventActions),t.storedDefinition.addTransition(r.Typing,i.NavigateLeftRight,r.Typing,t.navigateLeftRightEventActions),t.storedDefinition.addTransition(r.Typing,i.ResultReady,r.Typing,t.queryResultReadyEventActions),t.storedDefinition.addTransition(r.Typing,i.TermSelected,r.BrowseSuggestions,t.termSelectedActions),t.storedDefinition.addTransition(r.Typing,i.TextChanged,r.Typing,t.textChangedEventActions),t.storedDefinition.addTransition(r.Typing,i.TextSuggestionConfirmed,r.TermSelection,t.textSuggestionConfirmedActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.ClearInterpretResult,r.Typing,t.clearInterpretResultActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.ClearQueryWithBlur,r.Typing,t.clearQueryWithBlurEventActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.ClearQueryWithoutBlur,r.Typing,t.clearQueryWithoutBlurEventActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.ConfirmQuery,r.TermSelection,t.confirmQueryEventActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.EndSession,r.Inactive,t.endSessionBrowseSuggestionsEventActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.NavigateDown,r.BrowseSuggestions,t.selectNextActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.NavigateOutOfBounds,r.Typing,t.navigateOutOfBoundsEventActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.NavigateUp,r.BrowseSuggestions,t.selectPreviousActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.NavigateLeftRight,r.Typing,t.navigateLeftRightEventActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.TermSelected,r.BrowseSuggestions,t.termSelectedActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.TextChanged,r.Typing,t.textChangedEventActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.TextSuggestionConfirmed,r.TermSelection,t.textSuggestionConfirmedActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.TextSuggestionSelected,r.BrowseSuggestions,[n.setInputTextToSelectedSuggestion]),t.storedDefinition.addTransition(r.TermSelection,i.ClearInterpretResult,r.Typing,t.clearInterpretResultActions),t.storedDefinition.addTransition(r.TermSelection,i.ClearQueryWithBlur,r.Typing,t.clearQueryWithBlurEventActions),t.storedDefinition.addTransition(r.TermSelection,i.ClearQueryWithoutBlur,r.Typing,t.clearQueryWithoutBlurEventActions),t.storedDefinition.addTransition(r.TermSelection,i.EndSession,r.Inactive,t.endSessionBrowseSuggestionsEventActions),t.storedDefinition.addTransition(r.TermSelection,i.NavigateDown,r.BrowseSuggestions,t.navigateDownEventActions),t.storedDefinition.addTransition(r.TermSelection,i.NavigateUp,r.BrowseSuggestions,t.navigateUpEventActions),t.storedDefinition.addTransition(r.TermSelection,i.NavigateOutOfBounds,r.Typing,t.navigateOutOfBoundsEventActions),t.storedDefinition.addTransition(r.TermSelection,i.ResultReady,r.Typing,t.termSelectionQueryResultReadyEventActions),t.storedDefinition.addTransition(r.TermSelection,i.TermSelected,r.BrowseSuggestions,t.termSelectedActions),t.storedDefinition.addTransition(r.TermSelection,i.TextChanged,r.Typing,t.textChangedEventActions),t.storedDefinition.addTransition(r.TermSelection,i.TextSuggestionSelected,r.Typing,[n.setInputTextToSelectedSuggestion]),t.storedDefinition.addTransition(r.TermSelection,i.TextSuggestionConfirmed,r.Typing,t.textSuggestionConfirmedActions)},t.storedDefinition=null,t.beginSessionActions=[n.displaySuggestionsForEmptyQuery,n.sendInterpretProbe],t.clearInterpretResultActions=[n.clearInterpretResult],t.clearQueryWithoutBlurEventActions=[n.textInput_Clear,n.suggestionList_Clear,n.clearInterpretResult],t.clearQueryWithBlurEventActions=[n.textInput_Blur].concat(t.clearQueryWithoutBlurEventActions),t.completeQueryEventActions=[n.textInput_CompleteInput,n.interpret],t.inactiveStateResultReadyActions=[n.updateResult],t.textChangedEventActions=[n.clearUserInputBuffer,n.interpret],t.selectPreviousActions=[n.suggestionList_SelectPrevious],t.selectNextActions=[n.suggestionList_SelectNext],t.navigateLeftRightEventActions=[n.findTerm],t.navigateUpEventActions=[n.storeUserInput].concat(t.selectPreviousActions),t.navigateDownEventActions=[n.findTerm,n.startNavigate],t.textSuggestionConfirmedActions=[n.setInputTextToSelectedSuggestion].concat(t.textChangedEventActions),t.endSessionEventActions=[],t.endSessionBrowseSuggestionsEventActions=[n.restoreUserInput].concat(t.endSessionEventActions),t.endSessionEventTypingActions=[n.hideMenus].concat(t.endSessionEventActions),t.queryResultReadyEventActions=[n.displayQueryResult],t.termSelectionQueryResultReadyEventActions=t.queryResultReadyEventActions.concat(n.textInput_UpdateTermSelection),t.confirmQueryEventActions=t.textChangedEventActions,t.navigateOutOfBoundsEventActions=[n.suggestionList_ClearSelection,n.restoreUserInput,n.hideMenus],t.termSelectedActions=[],t})();t.QnaInputStateMachine=o})(n=t.qna||(t.qna={}))})(t=e.controllers||(e.controllers={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){var i;!(function(n){function i(e){return new s(e)}var r=e.common.helpers.ModelConverterHelper,o=(function(){function e(e,r){var o=this;this.scope=e,this.services=r,e.infoNavControlContainer=i(r.promiseFactory),e.sharedViewModel={getAdditionalODataFilter:e.getAdditionalODataFilter,interpretListener:e.interpretListener,interpretResponse:null,models:this.filterModelsFromScope(e.models),showLoadingPlaceholder:!1,showLoadingSpinner:!1,showPinButton:!1,showQnaFeedback:!1,stateMachine:t.stateMachine.createStateMachine(n.QuestionBoxStateMachine.definition,n.QuestionBoxControlState.Inactive),storedUserInput:null,usageReportingEnabled:e.usageReportingEnabled,userInput:""};var s=e.output;s.utterance="",s.showQnaFeedback=!1,s.interpretUtterance=function(e){return o.updateUtterance(e,!0)},s.updateUtteranceWithoutInterpret=function(e){return o.updateUtterance(e,!1)},s.clearQuestionBox=function(){return o.clearQuestionBox()},s.showUserFeedbackDialog=function(){return o.showUserFeedbackDialog()};var a=[e.$watch("getAdditionalODataFilter",(function(t){return e.sharedViewModel.getAdditionalODataFilter=t})),e.$watch("interpretListener",(function(t){return e.sharedViewModel.interpretListener=t})),e.$watch("models",(function(t){return e.sharedViewModel.models=o.filterModelsFromScope(t)})),e.$watch("usageReportingEnabled",(function(t){return e.sharedViewModel.usageReportingEnabled=t})),e.$watch("sharedViewModel.showQnaFeedback",(function(t){return e.output.showQnaFeedback=t})),e.$watch("sharedViewModel.storedUserInput",(function(){return o.setOutputUtterance()})),e.$watch("sharedViewModel.userInput",(function(){return o.setOutputUtterance()}))];this.scope.$on("$destroy",(function(){for(var e=0,t=a;e<t.length;e++){var n=t[e];n()}}))}return e.createOptions=function(){return{additionalServices:["interpretUsageListener","localizationService","modalDialogService","promiseFactory","featureSwitchService"]}},e.prototype.filterModelsFromScope=function(e){var t=this.services.featureSwitchService.featureSwitches;return _.filter(e,(function(e){return e&&r.getIsQnaSupported(e,t)}))},e.prototype.setOutputUtterance=function(){var e=this.scope.sharedViewModel,t=this.scope.output;null!=e.storedUserInput?t.utterance=e.storedUserInput:t.utterance=e.userInput},e.prototype.updateUtterance=function(e,t){var i=this;this.scope.infoNavControlContainer.getTextInputControl().then((function(r){r.setInputText(e,!0),r.focus(),t&&i.scope.sharedViewModel.stateMachine.enqueueTransition(n.QuestionBoxControlTransitionId.TextChanged)}))},e.prototype.clearQuestionBox=function(){this.scope.sharedViewModel.stateMachine.enqueueTransition(n.QuestionBoxControlTransitionId.ClearQueryWithBlur)},e.prototype.showUserFeedbackDialog=function(){var e=this,t=this.services.localizationService,n=this.services.rootScope.$new(),i=[new InJs.ModalDialogAction(t.get("ModalDialog_Send"),function(t,i){n.closeDialog(),e.scope.sharedViewModel.usageReportingEnabled&&null!=n.feedback.selected&&e.services.interpretUsageListener.setFeedbackForLastUtterance(n.feedback.selected)},null,null,(!0)),new InJs.ModalDialogAction(t.get("ModalDialog_Cancel"),function(e,t){n.closeDialog()})],r={dialogName:t.get("UtteranceFeedbackDialogTitle"),isDismissable:!0,scope:n,template:"<user-feedback-dialog></user-feedback-dialog>",dialogActions:i};this.services.modalDialogService.showLegacyWebModalDialog(r)},e})();n.QuestionBoxContainerController=o,n.createInfoNavControlContainer=i;var s=(function(){function e(e){this._promiseFactory=e}return e.prototype.getTextInputControl=function(){return this._textInputControlDeferred||(this._textInputControlDeferred=this._promiseFactory.defer(),this._textInputControl&&this._textInputControlDeferred.resolve(this._textInputControl)),this._textInputControlDeferred.promise},e.prototype.setTextInputControl=function(e){this._textInputControl=e,this._textInputControlDeferred&&this._textInputControlDeferred.resolve(e)},e.prototype.getSuggestionListControl=function(){return this._suggestionListControlDeferred||(this._suggestionListControlDeferred=this._promiseFactory.defer(),this._suggestionListControl&&this._suggestionListControlDeferred.resolve(this._suggestionListControl)),this._suggestionListControlDeferred.promise},e.prototype.setSuggestionListControl=function(e){this._suggestionListControl=e,this._suggestionListControlDeferred&&this._suggestionListControlDeferred.resolve(e)},e})()})(i=n.qna||(n.qna={}))})(n=t.controllers||(t.controllers={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){var i;!(function(n){var i=3,r=4,o=2,s=3e3,a=(function(){function a(e,t){var n=this;this.latestProbeRequestId=0,this.outstandingInterpretRequests=[],this.scope=e,this.services=t,this.answeredQuestionEventLogger=t.answeredQuestionEventLoggerFactory.createAnsweredQuestionEventLogger(s),e.sharedViewModel.showLoadingPlaceholder=!1,e.infoNavControlContainer.getSuggestionListControl().then((function(t){e.infoNavControlContainer.getTextInputControl().then((function(e){n.suggestionListControl=t,n.textInputControl=e,n.registerStateMachineActions()}))})),this.contentProviders=t.contentProviderHttpService.getBuiltInContentProviders(),this.sendInterpretProbeWithLoadingMessage(),e.$watch("sharedViewModel.models",(function(e,t){var i=_.map(e,(function(e){return e.id})),r=_.map(t,(function(e){return e.id})),o=_.difference(i,r);_.isEmpty(o)||n.sendInterpretProbeWithLoadingMessage()})),e.$watch("sharedViewModel.interpretResponse",(function(e){e&&e!==n.interpretResponse&&n.handleNewInterpretResponse(e,null)}))}return a.createOptions=function(){return{additionalServices:["answeredQuestionEventLoggerFactory","conceptualSchemaProxy","contentProviderHttpService","interpretService","interpretUsageListener","promiseFactory","telemetryService"]}},a.prototype.sendInterpretProbeWithLoadingMessage=function(){var t=this,n=this.scope.sharedViewModel;if(!_.isEmpty(n.models)){this.latestProbeRequestId++;var i=this.latestProbeRequestId;n.showLoadingPlaceholder=!0;var r=this.services.telemetryService.startEvent(e.telemetry.QnAQuestionBoxLoadingMessage),o=this.sendInterpretProbe(r.event).then((function(){return r.resolve()}),(function(){return r.reject()}));o.finally((function(){i===t.latestProbeRequestId&&(n.showLoadingPlaceholder=!1)}))}},a.prototype.sendInterpretProbe=function(e){var t=this,n=this.scope.sharedViewModel,i=this.services.interpretService.probe(n.models||[],e),r=this.services.promiseFactory.defer();return i.then((function(){a.preloadConceptualSchemas(n.models||[],t.services.conceptualSchemaProxy),r.resolve({})}),(function(){r.reject()})),r.promise},a.prototype.sendInterpretForCurrentInput=function(){var e=this,n=this.scope,i=n.sharedViewModel;i.showLoadingSpinner=!0,i.interpretListener&&i.interpretListener.onInterpretIssued();var r=this.answeredQuestionEventLogger.startAnsweredQuestionEvent(),s={},a=i.userInput,u=null;i.getAdditionalODataFilter&&(u=i.getAdditionalODataFilter());var l=this.services.promiseFactory.defer();this.outstandingInterpretRequests.push(l),this.enforceMaxConcurrentRequests();var c;if(!a||a.trim().length<o){var p=this.services.promiseFactory.defer();this.services.interpretService.probe(i.models).then((function(){return p.reject()}),(function(){return p.reject()})),c=p.promise}else c=this.services.interpretService.interpret(a,t.contracts.InterpretRequestOptions.QueryMetadata|t.contracts.InterpretRequestOptions.VisualConfiguration|t.contracts.InterpretRequestOptions.Data|t.contracts.InterpretRequestOptions.SupportPodQueries,i.models,u,s,l.promise),c.finally((function(){return r.resolve(s)}));c.then((function(n){if(!e.shouldIgnoreResponse(n,l,a)){if(e.handleNewInterpretResponse(n,l),i.interpretListener)if(!n||n.isEmpty(!0)||n.result.isEmpty(!0))i.interpretListener.onInterpretError(n?n.utterance:null,e.hasOutstandingRequests());else{var r=t.util.InterpretResultUtility.parseInterpret(n.result);r?i.interpretListener.onInterpretSuccess(n,r,u,!0):i.interpretListener.onInterpretError(n?n.utterance:null,e.hasOutstandingRequests())}i.usageReportingEnabled&&e.services.interpretUsageListener.onInterpretSuccess(n,e.getModelContentProviderType(n))}}),(function(){e.shouldIgnoreResponse(null,l,a)||(e.updateStateGivenResponse(null,l),i.interpretListener&&i.interpretListener.onInterpretError(a,e.hasOutstandingRequests()))})),i.usageReportingEnabled&&this.services.interpretUsageListener.onInterpretIssued()},a.prototype.handleNewInterpretResponse=function(e,t){this.updateStateGivenResponse(e,t),this.scope.sharedViewModel.stateMachine.enqueueTransition(n.QuestionBoxControlTransitionId.ResultReady)},a.prototype.shouldIgnoreResponse=function(e,t,n){if(!_.contains(this.outstandingInterpretRequests,t))return!0;var i=this.scope.sharedViewModel.userInput,r=n;e&&e.result&&e.result.completedUtterance&&!_.isEmpty(e.result.completedUtterance.Text)&&(r=e.result.completedUtterance.Text);var o=Math.min(i.length,r.length);return i.substr(0,o)!==r.substr(0,o)},a.prototype.updateStateGivenResponse=function(e,t){this.updateOutstandingRequestsGivenCompletedRequest(t);var n=this.scope.sharedViewModel;n.interpretResponse=this.interpretResponse=e,n.showLoadingSpinner=this.hasOutstandingRequests(),n.showQnaFeedback=n.usageReportingEnabled},a.prototype.hasOutstandingRequests=function(){return!_.isEmpty(this.outstandingInterpretRequests)},a.prototype.enforceMaxConcurrentRequests=function(){if(this.outstandingInterpretRequests.length>r)for(var e=this.outstandingInterpretRequests.splice(0,this.outstandingInterpretRequests.length-r),t=0,n=e;t<n.length;t++){var i=n[t];i.resolve({})}},a.prototype.updateOutstandingRequestsGivenCompletedRequest=function(e){var t;t=e?_.findIndex(this.outstandingInterpretRequests,(function(t){return t===e})):this.outstandingInterpretRequests.length;for(var n=0;n<t;n++)this.outstandingInterpretRequests[n].resolve({});this.outstandingInterpretRequests.splice(0,t+1)},a.prototype.storeInput=function(){this.scope.sharedViewModel.storedUserInput=this.scope.sharedViewModel.userInput||"",this.textInputControl.hideAutoCompletion()},a.prototype.restoreInput=function(){null!=this.scope.sharedViewModel.storedUserInput&&(this.textInputControl.setInputText(this.scope.sharedViewModel.storedUserInput,!1),this.textInputControl.showAutoCompletion(),this.scope.sharedViewModel.storedUserInput=null),this.interpretResponse&&this.textInputControl.applyNLResult(this.interpretResponse.result)},a.prototype.clearStoredInput=function(){this.scope.sharedViewModel.storedUserInput=null},a.prototype.setInputTextToSelectedSuggestion=function(){this.services.telemetryService.logEvent(e.telemetry.QnADropdownItemSelected,_.isEmpty(this.scope.sharedViewModel.userInput)),this.textInputControl.setInputText(this.suggestionListControl.currentSelectionText,!1)},a.prototype.clearInterpret=function(){var e=this.scope.sharedViewModel;e.interpretResponse=this.interpretResponse=null,e.showQnaFeedback=!1,e.showLoadingSpinner=!1;var t=this.outstandingInterpretRequests;this.outstandingInterpretRequests=[];for(var n=0,i=t;n<i.length;n++){var r=i[n];r.resolve({})}var o=e.interpretListener;o&&o.onInterpretResultCleared()},a.prototype.selectTermInternal=function(){var e=this.textInputControl.getSelection(),t=this.interpretResponse;t&&!e.isUserRangeSelection&&t.result.hasSuggestionsForTermSelection(e)?(this.textInputControl.highlightSelectedTerm(),this.displayQueryResultInternal(!0,!0,e)):this.displayQueryResultInternal(!0,!0)},a.prototype.displayQueryResultInternal=function(e,t,n){var i=this.interpretResponse;i?(this.suggestionListControl.displaySuggestions(this.scope.sharedViewModel.userInput,i,n,!t),this.textInputControl.applyNLResult(i.result,e)):this.suggestionListControl.displaySuggestions(this.scope.sharedViewModel.userInput)},a.prototype.displaySuggestionsForEmptyQuery=function(){jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(this.scope.sharedViewModel.userInput)&&this.suggestionListControl.displaySuggestions(null)},a.prototype.getModelContentProviderType=function(t){if(t){var n=t.result;if(n){var i=_.find(this.scope.sharedViewModel.models,(function(e){return e.vsName===n.virtualServerName&&e.dbName===n.databaseName}));if(i&&null!=i.contentProviderId)return e.common.findContentProviderName(this.contentProviders,i.contentProviderId)}}return"Unknown"},a.prototype.registerStateMachineActions=function(){var e=this,t=this.scope.sharedViewModel.stateMachine;t.addTransitionActionHandler(n.QuestionBoxControlTransitionAction.interpret,(function(){return e.sendInterpretForCurrentInput()})),t.addTransitionActionHandler(n.QuestionBoxControlTransitionAction.storeUserInput,(function(){return e.storeInput()})),t.addTransitionActionHandler(n.QuestionBoxControlTransitionAction.restoreUserInput,(function(){return e.restoreInput()})),t.addTransitionActionHandler(n.QuestionBoxControlTransitionAction.clearUserInputBuffer,(function(){return e.clearStoredInput()})),t.addTransitionActionHandler(n.QuestionBoxControlTransitionAction.setInputTextToSelectedSuggestion,(function(){return e.setInputTextToSelectedSuggestion()})),t.addTransitionActionHandler(n.QuestionBoxControlTransitionAction.clearInterpretResult,(function(){return e.clearInterpret()})),t.addTransitionActionHandler(n.QuestionBoxControlTransitionAction.displayQueryResult,(function(){return e.displayQueryResultInternal(!0,!0)})),t.addTransitionActionHandler(n.QuestionBoxControlTransitionAction.updateResult,(function(){return e.displayQueryResultInternal(!1,!1)})),t.addTransitionActionHandler(n.QuestionBoxControlTransitionAction.displaySuggestionsForEmptyQuery,(function(){return e.displaySuggestionsForEmptyQuery()})),t.addTransitionActionHandler(n.QuestionBoxControlTransitionAction.selectTerm,(function(){return e.selectTermInternal()})),t.addTransitionActionHandler(n.QuestionBoxControlTransitionAction.sendInterpretProbe,(function(){return e.sendInterpretProbe(null)}))},a.preloadConceptualSchemas=function(e,t){for(var n=Math.min(e.length,i),r=0,o=_.take(e,n);r<o.length;r++){var s=o[r];t.get(a.createDataSourceArray(s))}},a.createDataSourceArray=function(t){return e.explore.contracts.createDataSourceArray([{type:"dsr",id:t.id,packageId:t.packageId,name:void 0,dsr:{schemaName:void 0,vsName:t.vsName,dbName:t.dbName,modelId:t.id}}])},a})();n.QuestionBoxController=a})(i=n.qna||(n.qna={}))})(n=t.controllers||(t.controllers={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(t){var n;!(function(t){!(function(e){e[e.clearInterpretResult=0]="clearInterpretResult",e[e.clearUserInputBuffer=1]="clearUserInputBuffer",e[e.displayQueryResult=2]="displayQueryResult",e[e.displaySuggestionsForEmptyQuery=3]="displaySuggestionsForEmptyQuery",e[e.interpret=4]="interpret",e[e.restoreUserInput=5]="restoreUserInput",e[e.selectTerm=6]="selectTerm",e[e.sendInterpretProbe=7]="sendInterpretProbe",e[e.setInputTextToSelectedSuggestion=8]="setInputTextToSelectedSuggestion",e[e.storeUserInput=9]="storeUserInput",e[e.suggestionList_Clear=10]="suggestionList_Clear",e[e.suggestionList_ClearPreserveRestatement=11]="suggestionList_ClearPreserveRestatement",
e[e.suggestionList_ClearSelection=12]="suggestionList_ClearSelection",e[e.suggestionList_SelectNext=13]="suggestionList_SelectNext",e[e.suggestionList_SelectPrevious=14]="suggestionList_SelectPrevious",e[e.textInput_Blur=15]="textInput_Blur",e[e.textInput_Clear=16]="textInput_Clear",e[e.textInput_ClearTermHighlights=17]="textInput_ClearTermHighlights",e[e.textInput_CompleteInput=18]="textInput_CompleteInput",e[e.textInput_ShowAutoCompletion=19]="textInput_ShowAutoCompletion",e[e.textInput_UpdateTermSelection=20]="textInput_UpdateTermSelection",e[e.updateResult=21]="updateResult"})(t.QuestionBoxControlTransitionAction||(t.QuestionBoxControlTransitionAction={}));var n=t.QuestionBoxControlTransitionAction;!(function(e){e[e.BeginSession=0]="BeginSession",e[e.EndSession=1]="EndSession",e[e.ClearInterpretResult=2]="ClearInterpretResult",e[e.ClearQueryWithBlur=3]="ClearQueryWithBlur",e[e.ClearQueryWithoutBlur=4]="ClearQueryWithoutBlur",e[e.ConfirmQuery=5]="ConfirmQuery",e[e.TextChanged=6]="TextChanged",e[e.CompleteQuery=7]="CompleteQuery",e[e.NavigateUp=8]="NavigateUp",e[e.NavigateDown=9]="NavigateDown",e[e.NavigateOutOfBounds=10]="NavigateOutOfBounds",e[e.TextSuggestionSelected=11]="TextSuggestionSelected",e[e.TextSuggestionConfirmed=12]="TextSuggestionConfirmed",e[e.TermSelected=13]="TermSelected",e[e.ResultReady=14]="ResultReady"})(t.QuestionBoxControlTransitionId||(t.QuestionBoxControlTransitionId={}));var i=t.QuestionBoxControlTransitionId;!(function(e){e[e.Inactive=0]="Inactive",e[e.Typing=1]="Typing",e[e.BrowseSuggestions=2]="BrowseSuggestions",e[e.TermSelection=3]="TermSelection"})(t.QuestionBoxControlState||(t.QuestionBoxControlState={}));var r=t.QuestionBoxControlState,o=(function(){function t(){}return Object.defineProperty(t,"definition",{get:function(){return t.storedDefinition||t.initializeDefinition(),t.storedDefinition},enumerable:!0,configurable:!0}),t.initializeDefinition=function(){t.storedDefinition=new e.stateMachine.StateMachineDefinition,t.storedDefinition.addTransition(r.Inactive,i.BeginSession,r.Typing,t.beginSessionActions),t.storedDefinition.addTransition(r.Inactive,i.ClearInterpretResult,r.Inactive,t.clearInterpretResultActions),t.storedDefinition.addTransition(r.Inactive,i.ClearQueryWithBlur,r.Inactive,t.clearQueryWithBlurEventActions),t.storedDefinition.addTransition(r.Inactive,i.ClearQueryWithoutBlur,r.Inactive,t.clearQueryWithoutBlurEventActions),t.storedDefinition.addTransition(r.Inactive,i.ResultReady,r.Inactive,t.inactiveStateResultReadyActions),t.storedDefinition.addTransition(r.Inactive,i.TextChanged,r.Inactive,t.textChangedEventActions),t.storedDefinition.addTransition(r.Inactive,i.TextSuggestionConfirmed,r.Typing,t.textSuggestionConfirmedActions),t.storedDefinition.addTransition(r.Inactive,i.TextSuggestionSelected,r.Typing,[n.setInputTextToSelectedSuggestion]),t.storedDefinition.addTransition(r.Typing,i.ClearInterpretResult,r.Typing,t.clearInterpretResultActions),t.storedDefinition.addTransition(r.Typing,i.ClearQueryWithBlur,r.Typing,t.clearQueryWithBlurEventActions),t.storedDefinition.addTransition(r.Typing,i.ClearQueryWithoutBlur,r.Typing,t.clearQueryWithoutBlurEventActions),t.storedDefinition.addTransition(r.Typing,i.CompleteQuery,r.Typing,t.completeQueryEventActions),t.storedDefinition.addTransition(r.Typing,i.EndSession,r.Inactive,t.endSessionEventTypingActions),t.storedDefinition.addTransition(r.Typing,i.NavigateDown,r.BrowseSuggestions,t.navigateDownEventActions),t.storedDefinition.addTransition(r.Typing,i.NavigateUp,r.BrowseSuggestions,t.navigateUpEventActions),t.storedDefinition.addTransition(r.Typing,i.ResultReady,r.Typing,t.queryResultReadyEventActions),t.storedDefinition.addTransition(r.Typing,i.TermSelected,r.TermSelection,t.termSelectedActions),t.storedDefinition.addTransition(r.Typing,i.TextChanged,r.Typing,t.textChangedEventActions),t.storedDefinition.addTransition(r.Typing,i.TextSuggestionConfirmed,r.TermSelection,t.textSuggestionConfirmedActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.ClearInterpretResult,r.Typing,t.clearInterpretResultActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.ClearQueryWithBlur,r.Typing,t.clearQueryWithBlurEventActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.ClearQueryWithoutBlur,r.Typing,t.clearQueryWithoutBlurEventActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.ConfirmQuery,r.TermSelection,t.confirmQueryEventActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.EndSession,r.Inactive,t.endSessionBrowseSuggestionsEventActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.NavigateDown,r.BrowseSuggestions,t.selectNextActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.NavigateOutOfBounds,r.Typing,t.navigateOutOfBoundsEventActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.NavigateUp,r.BrowseSuggestions,t.selectPreviousActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.TermSelected,r.Typing,t.termSelectedActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.TextChanged,r.Typing,t.textChangedEventActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.TextSuggestionConfirmed,r.TermSelection,t.textSuggestionConfirmedActions),t.storedDefinition.addTransition(r.BrowseSuggestions,i.TextSuggestionSelected,r.BrowseSuggestions,[n.setInputTextToSelectedSuggestion]),t.storedDefinition.addTransition(r.TermSelection,i.ClearInterpretResult,r.Typing,t.clearInterpretResultActions),t.storedDefinition.addTransition(r.TermSelection,i.ClearQueryWithBlur,r.Typing,t.clearQueryWithBlurEventActions),t.storedDefinition.addTransition(r.TermSelection,i.ClearQueryWithoutBlur,r.Typing,t.clearQueryWithoutBlurEventActions),t.storedDefinition.addTransition(r.TermSelection,i.EndSession,r.Inactive,t.endSessionBrowseSuggestionsEventActions),t.storedDefinition.addTransition(r.TermSelection,i.NavigateDown,r.BrowseSuggestions,t.navigateDownEventActions),t.storedDefinition.addTransition(r.TermSelection,i.NavigateUp,r.BrowseSuggestions,t.navigateUpEventActions),t.storedDefinition.addTransition(r.TermSelection,i.ResultReady,r.Typing,t.termSelectionQueryResultReadyEventActions),t.storedDefinition.addTransition(r.TermSelection,i.TermSelected,r.Typing,t.termSelectedActions),t.storedDefinition.addTransition(r.TermSelection,i.TextChanged,r.Typing,t.textChangedEventActions),t.storedDefinition.addTransition(r.TermSelection,i.TextSuggestionSelected,r.Typing,[n.setInputTextToSelectedSuggestion]),t.storedDefinition.addTransition(r.TermSelection,i.TextSuggestionConfirmed,r.Typing,t.textSuggestionConfirmedActions)},t.storedDefinition=null,t.beginSessionActions=[n.displaySuggestionsForEmptyQuery,n.sendInterpretProbe],t.clearInterpretResultActions=[n.clearInterpretResult],t.clearQueryWithoutBlurEventActions=[n.textInput_Clear,n.suggestionList_Clear,n.clearInterpretResult],t.clearQueryWithBlurEventActions=[n.textInput_Blur].concat(t.clearQueryWithoutBlurEventActions),t.completeQueryEventActions=[n.textInput_CompleteInput,n.interpret],t.inactiveStateResultReadyActions=[n.updateResult],t.textChangedEventActions=[n.clearUserInputBuffer,n.interpret,n.textInput_ClearTermHighlights],t.selectPreviousActions=[n.textInput_ClearTermHighlights,n.suggestionList_SelectPrevious],t.selectNextActions=[n.textInput_ClearTermHighlights,n.suggestionList_SelectNext],t.navigateUpEventActions=[n.storeUserInput].concat(t.selectPreviousActions),t.navigateDownEventActions=[n.storeUserInput].concat(t.selectNextActions),t.textSuggestionConfirmedActions=[n.setInputTextToSelectedSuggestion].concat(t.textChangedEventActions),t.endSessionEventActions=[n.textInput_ClearTermHighlights,n.suggestionList_ClearPreserveRestatement,n.textInput_ShowAutoCompletion],t.endSessionBrowseSuggestionsEventActions=[n.restoreUserInput].concat(t.endSessionEventActions),t.endSessionEventTypingActions=t.endSessionEventActions,t.queryResultReadyEventActions=[n.displayQueryResult],t.termSelectionQueryResultReadyEventActions=t.queryResultReadyEventActions.concat(n.textInput_UpdateTermSelection),t.confirmQueryEventActions=t.textChangedEventActions,t.navigateOutOfBoundsEventActions=[n.suggestionList_ClearSelection,n.restoreUserInput],t.termSelectedActions=[n.textInput_ClearTermHighlights,n.selectTerm],t})();t.QuestionBoxStateMachine=o})(n=t.qna||(t.qna={}))})(t=e.controllers||(e.controllers={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(t){var n;!(function(t){var n=50,i=7,r=(function(){function r(e,t){var i=this;this.scope=e,this.services=t;var r=e.viewModel={restatement:null,uiSuggestionItems:[],maxSuggestions:n,showSuggestionsHost:!1,selectedSuggestionIndex:-1};e.handleSuggestionMouseDown=function(e,t){return i.handleSuggestionMouseDown(e,t)},e.handleSuggestionMouseEnter=function(e){r.selectedSuggestionIndex=e},e.infoNavControlContainer.setSuggestionListControl(this),this.registerStateMachineActions()}return r.createOptions=function(){return{additionalServices:["sampleQuestionsService"]}},r.prototype.clear=function(e){var t=this.scope,n=t.viewModel;n.selectedSuggestionIndex=-1,n.uiSuggestionItems=[],e?n.showSuggestionsHost=!!n.restatement:(n.restatement=null,n.showSuggestionsHost=!1)},r.prototype.clearSelection=function(){this.scope.viewModel.selectedSuggestionIndex=-1},r.prototype.selectPrevious=function(){var e=this.scope,t=e.viewModel;t.selectedSuggestionIndex===-1?this.attemptSelection(t.uiSuggestionItems.length-1):this.attemptSelection(t.selectedSuggestionIndex-1)},r.prototype.selectNext=function(){var e=this.scope;this.attemptSelection(e.viewModel.selectedSuggestionIndex+1)},Object.defineProperty(r.prototype,"currentSelectionText",{get:function(){var e=this.scope.viewModel,t=e.selectedSuggestionIndex,n=e.uiSuggestionItems;return t>=0&&t<n.length?n[t].text:null},enumerable:!0,configurable:!0}),r.prototype.displaySuggestions=function(e,t,n,i){var o=this.scope,s=o.viewModel,a=t?t.result:null;if(a&&a.restatement&&!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(a.restatement)?s.restatement=a.restatement:s.restatement=null,s.selectedSuggestionIndex=-1,i)return s.uiSuggestionItems=[],void(s.showSuggestionsHost=!!s.restatement);if(_.isEmpty(e)){s.showSuggestionsHost=!1;for(var u=s.uiSuggestionItems=[],l=this.services.sampleQuestionsService.getSampleQuestions(o.sharedViewModel.models),c=0,p=l;c<p.length;c++){var d=p[c];d.then((function(e){s.uiSuggestionItems===u&&(r.addSampleQuestionsToSuggestions(e,u),s.showSuggestionsHost=!_.isEmpty(s.uiSuggestionItems))}))}}else s.uiSuggestionItems=this.generateSuggestionsForUtterance(e,a,n),s.showSuggestionsHost=!_.isEmpty(s.uiSuggestionItems)||!_.isEmpty(s.restatement);o.scrollToTop&&this.services.timeout((function(){return o.scrollToTop()}),0,!1)},r.prototype.handleSuggestionMouseDown=function(e,n){n.preventDefault(),this.attemptSelection(e),this.doStateMachineTransition(t.QuestionBoxControlTransitionId.TextSuggestionConfirmed)},r.prototype.attemptSelection=function(e){var n=this.scope,i=n.viewModel;e>=0&&e<i.uiSuggestionItems.length?(i.selectedSuggestionIndex=e,this.doStateMachineTransition(t.QuestionBoxControlTransitionId.TextSuggestionSelected),n.scrollSelectionIntoView&&this.services.timeout((function(){return n.scrollSelectionIntoView()}),0,!1)):(i.selectedSuggestionIndex=-1,this.doStateMachineTransition(t.QuestionBoxControlTransitionId.NavigateOutOfBounds),n.scrollToTop&&this.services.timeout((function(){return n.scrollToTop()}),0,!1))},r.prototype.doStateMachineTransition=function(e){this.scope.sharedViewModel.stateMachine.enqueueTransition(e)},r.prototype.generateSuggestionsForUtterance=function(e,t,n){return t?n?t.getTermSuggestions(n):t.getCompletionSuggestions():[]},r.addSampleQuestionsToSuggestions=function(t,n){for(var r=function(t){var i=t.question.trim().toUpperCase(),r=_.any(n,(function(e){return e.text.trim().toUpperCase()===i}));r||n.push(new e.models.UISuggestionItem([{text:t.question,emphasize:!1}]))},o=0;n.length<i&&o<t.length;)r(t[o]),o++},r.prototype.registerStateMachineActions=function(){var e=this,n=this.scope.sharedViewModel.stateMachine;n.addTransitionActionHandler(t.QuestionBoxControlTransitionAction.suggestionList_Clear,(function(){return e.clear(!1)})),n.addTransitionActionHandler(t.QuestionBoxControlTransitionAction.suggestionList_ClearPreserveRestatement,(function(){return e.clear(!0)})),n.addTransitionActionHandler(t.QuestionBoxControlTransitionAction.suggestionList_ClearSelection,(function(){return e.clearSelection()})),n.addTransitionActionHandler(t.QuestionBoxControlTransitionAction.suggestionList_SelectNext,(function(){return e.selectNext()})),n.addTransitionActionHandler(t.QuestionBoxControlTransitionAction.suggestionList_SelectPrevious,(function(){return e.selectPrevious()}))},r})();t.SuggestionListController=r})(n=t.qna||(t.qna={}))})(t=e.controllers||(e.controllers={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(t){var n;!(function(t){var n=120,i=(function(){function i(e,i){var r=this;this.termConverterService=e,this.inputController=i,this.terms=[],this.handleResize=_.throttle(this.handleLayout,n),this.stateMachine=i.stateMachine,this.utteranceElem=i.utteranceElement,this.currentTerm=null,this.userSpanBindings=[],this.stateMachine.addTransitionActionHandler(t.QnaInputTransitionAction.setInputTextToSelectedSuggestion,(function(){return r.setInputTextToSelectedSuggestion()})),this.stateMachine.addTransitionActionHandler(t.QnaInputTransitionAction.suggestionList_SelectNext,(function(){return r.navigateDown()})),this.stateMachine.addTransitionActionHandler(t.QnaInputTransitionAction.suggestionList_SelectPrevious,(function(){return r.navigateUp()})),this.stateMachine.addTransitionActionHandler(t.QnaInputTransitionAction.suggestionList_ClearSelection,(function(){return r.hideMenus()})),this.stateMachine.addTransitionActionHandler(t.QnaInputTransitionAction.textInput_ClearTermHighlights,(function(){return r.hideMenus()})),this.stateMachine.addTransitionActionHandler(t.QnaInputTransitionAction.hideMenus,(function(){r.hideMenus()})),this.stateMachine.addTransitionActionHandler(t.QnaInputTransitionAction.startNavigate,(function(){r.startNavigate()})),this.stateMachine.addTransitionActionHandler(t.QnaInputTransitionAction.findTerm,(function(){r.findCurrentTerm(r.inputController.contentElement.selectionStart,r.inputController.contentElement.selectionEnd)}))}return i.prototype.hasCurrentTerm=function(){return null!=this.currentTerm},Object.defineProperty(i.prototype,"hasOpenMenu",{get:function(){return this.currentTerm&&this.currentTerm.menuOpened},enumerable:!0,configurable:!0}),i.prototype.getUserSpanBindings=function(){return this.userSpanBindings},Object.defineProperty(i.prototype,"utteranceElement",{get:function(){return this.utteranceElem},enumerable:!0,configurable:!0}),i.prototype.hideMenus=function(){this.currentTerm&&this.currentTerm.closeMenu()},i.prototype.menuClosed=function(){this.currentTerm=null,this.inputController.captureElement.style.display="none"},i.prototype.updateUtterance=function(e,t,n){if(void 0===n&&(n=!1),!_.isEmpty(e)){if(_.isEmpty(t))return void(this.utteranceElem.innerHTML="");if(this.terms){for(var i=0,r=Math.min(e.length,t.length);i<r&&e.charAt(i)===t.charAt(i);)i++;i--;for(var o=e.length,s=t.length;o>i&&s>i&&e.charAt(o)===t.charAt(s);)o--,s--;o++,s++,n||this.updateUserBindings(i,o,s);for(var a=0,u=this.terms;a<u.length;a++){var l=u[a];l.span.StartIndex+l.text.length>=i&&(l.span.StartIndex<i-1?l.header.textContent=l.header.textContent.substr(0,i-l.span.StartIndex+1):l.element.parentElement===this.utteranceElem&&this.utteranceElem.removeChild(l.element))}}}},i.prototype.updateUserBindings=function(e,t,n){var i=t-n;_.remove(this.userSpanBindings,(function(n){var r=n.StartIndex,o=n.StartIndex+n.Length-1;return n.StartIndex>=t&&(n.StartIndex-=i),r>e&&o<t||r<e&&o>e||r<t&&o>t}))},i.prototype.processInterpret=function(t,n){void 0===n&&(n=!0),this.userSpanBindings=[];var i=this.termConverterService.convert(t),r=i.terms,o=this.inputController.utterance();if(o===t.utterance){var s=this.inputController.contentElement,a=s.selectionStart,u=s.selectionEnd;if(s.value=i.utterance,this.inputController.selectCharacters(a,u),r.length>0){for(var l=this.utteranceElem,c=_.indexBy(this.terms,(function(e){return e.span.StartIndex})),p=[],d=null,h=r.length-1;h>=0;h--){var v=r[h];v.manager=this,v.span.Source===e.contracts.SpanSource.User&&this.userSpanBindings.push(v.span);var f=c[v.span.StartIndex];f&&v.reuseElement(f)?p.push(f):l.insertBefore(v.element,d),d=v.element}for(var g=0,m=this.terms;g<m.length;g++){var v=m[g];_.contains(p,v)||v.element.parentElement!==this.utteranceElem||l.removeChild(v.element)}this.handleLayout(),i.hasCompletions&&n&&this.selectTerm(r[r.length-1],!0)}return this.terms=r,!0}return!1},i.prototype.handleLayout=function(){if(this.terms)for(var e=Number.MIN_VALUE,t=0,n=this.terms;t<n.length;t++){var i=n[t],r=$(i.element),o=r.offset().top;o>e?(e=o,r.addClass("row")):r.removeClass("row")}},i.prototype.selectReplacement=function(e,t){var n=this.inputController.utterance(),i=e.span.StartIndex+e.span.Length,r=e.span.StartIndex+t.length,o=n.substring(0,e.span.StartIndex)+t+n.substring(i);i===n.length&&(o+=" ",r++);var s=this.userSpanBindings.indexOf(e.span);if(s>-1&&this.userSpanBindings.splice(s,1),!e.currentReplacement.container.Core){this.userSpanBindings.push({StartIndex:e.span.StartIndex,Length:t.length,Binding:e.currentReplacement.container});for(var a=e.span.Length-t.length,u=0,l=this.userSpanBindings;u<l.length;u++){var c=l[u];c.StartIndex>e.span.StartIndex&&(c.StartIndex-=a)}}this.inputController.utterance(o,!0),this.inputController.selectCharacters(r),this.inputController.contentElement.focus(),this.currentTerm=null},i.prototype.selectTerm=function(e,n){void 0===n&&(n=!1),this.stateMachine.enqueueTransition(t.QnaInputTransitionId.TermSelected),this.currentTerm&&this.currentTerm!==e&&this.currentTerm.closeMenu(),this.currentTerm=e,e.openMenu()?(n||this.inputController.selectCharacters(e.span.StartIndex,e.span.StartIndex+e.span.Length),this.inputController.captureElement.style.display="block"):this.currentTerm=null},i.prototype.clearTerms=function(){this.utteranceElem.innerHTML="",this.terms=[]},i.prototype.navigateUp=function(){var e=!1;this.currentTerm&&(e=this.currentTerm.selectPreviousReplacement()),e||this.stateMachine.enqueueTransition(t.QnaInputTransitionId.NavigateOutOfBounds)},i.prototype.navigateDown=function(){this.currentTerm&&this.currentTerm.selectNextReplacement()},i.prototype.startNavigate=function(){this.currentTerm?this.selectTerm(this.currentTerm):this.stateMachine.enqueueTransition(t.QnaInputTransitionId.NavigateOutOfBounds)},i.prototype.findCurrentTerm=function(e,t){var n=this.findTerm(e,t);n&&n===this.currentTerm||!this.currentTerm||this.currentTerm.closeMenu(),this.currentTerm=n},i.prototype.setInputTextToSelectedSuggestion=function(){var e=this.currentTerm;e&&e.chooseCurrentReplacement()},i.prototype.findTerm=function(e,t){for(var n=this.terms.length-1;n>=0;n--){var i=this.terms[n];if(i.hasBindings&&i.span.StartIndex<=e&&i.span.StartIndex+i.span.Length>=e)return i}},i})();t.TermManager=i})(n=t.qna||(t.qna={}))})(t=e.controllers||(e.controllers={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(t){var n;!(function(t){var n=20,i=250,r=(function(){function r(e,t){var n=this;this.terms=[],this.selection={},this.hasUncommittedText=!0,this.lastTextValue="",this.scope=e,this.services=t,e.onUserInputFocus=function(){return n.onUserInputFocus()},e.onUserInputBlur=function(){return n.onUserInputBlur()},e.onUserInputChange=function(){return n.onUserInputChange()},e.onUserInputKeyDown=function(e){return n.onUserInputKeyDown(e)},e.onUserInputKeyUp=function(e){return n.onUserInputKeyUp(e)},e.onUserInputClick=function(){return n.onUserInputClick()},e.onUserInputSelect=function(){return n.onUserInputSelect()},e.viewModel={hasFocus:!1,showAutoComplete:!0,userInput:"",placeholder:null,autoComplete:null,inputRendererTerms:[],inputRendererRemainder:null,inputRendererShowUnrecognized:!1,showInputTermSelection:!1,inputTermSelectionPosition:{}},e.infoNavControlContainer.setTextInputControl(this),this.registerStateMachineActions()}return r.createOptions=function(){return{additionalServices:["telemetryService"]}},r.prototype.getInputText=function(){return this.scope.sharedViewModel.userInput},r.prototype.setInputText=function(e,t){var n=this.scope;this.hasUncommittedText=!0,this.lastTextValue=n.sharedViewModel.userInput=e,this.renderInputText(),this.clearAutoCompletion(),t&&!_.isEmpty(e)&&this.services.timeout((function(){return n.setCursorPositionAtEnd()}),0,!1)},r.prototype.focus=function(){this.hasFocus()||this.scope.setFocusToInput()},r.prototype.blur=function(){this.hasFocus()&&this.scope.blurInput()},r.prototype.completeInput=function(){this.services.telemetryService.logEvent(e.telemetry.QnAQuestionBoxAutoComplete);var t=this.scope;this.setInputText(t.sharedViewModel.userInput+t.viewModel.autoComplete,!0)},r.prototype.clearAutoCompletion=function(){this.scope.viewModel.autoComplete=null,this.scrollLeftIfEmpty()},r.prototype.showAutoCompletion=function(){this.scope.viewModel.showAutoComplete=!0},r.prototype.hideAutoCompletion=function(){this.scope.viewModel.showAutoComplete=!1},r.prototype.clear=function(){var e=this.scope;this.lastTextValue=e.sharedViewModel.userInput="";var t=e.viewModel;t.inputRendererTerms=[],t.inputRendererRemainder=null,t.showInputTermSelection=!1,this.currentResult=null,this.terms=[],this.clearAutoCompletion()},r.prototype.updateTermSelection=function(){this.trackSelectionInternal(!0)},r.prototype.hasFocus=function(){return this.scope.viewModel.hasFocus},r.prototype.applyNLResult=function(e,t){this.currentResult!==e&&(this.currentResult=e,this.terms=e.getCompletedUtteranceAsTerms(),t&&(this.setCompletionText(),this.showAutoCompletion()),this.renderInputText(e),this.trackSelectionInternal(!1))},r.prototype.clearTermHighlights=function(){this.scope.viewModel.showInputTermSelection=!1},r.prototype.highlightSelectedTerm=function(){this.clearTermHighlights();var e=this.scope,t=e.viewModel;InJs.BrowserUtility.getInternetExplorerVersion()>0&&this.scope.sharedViewModel.userInput.indexOf("\t")>=0||(t.showInputTermSelection=!0,t.inputTermSelectionPosition=e.getSelectedTermPosition(this.selection.start,this.selection.end))},r.prototype.getSelection=function(){return this.selection},r.prototype.doStateMachineTransition=function(e){this.scope.sharedViewModel.stateMachine.enqueueTransition(e)},r.prototype.onUserInputFocus=function(){this.doStateMachineTransition(t.QuestionBoxControlTransitionId.BeginSession),this.scope.viewModel.hasFocus=!0},r.prototype.onUserInputBlur=function(){this.doStateMachineTransition(t.QuestionBoxControlTransitionId.EndSession),this.scope.viewModel.hasFocus=!1,this.scrollLeftIfEmpty()},r.prototype.onUserInputChange=function(){this.renderInputText(),this.setCompletionText();var e=this.scope.sharedViewModel.userInput,n=(this.lastTextValue||"").length,i=(e||"").length;if(this.lastTextValue=e,i>0){var r=Math.abs(n-i);r>1&&this.doStateMachineTransition(t.QuestionBoxControlTransitionId.ClearInterpretResult),this.doStateMachineTransition(t.QuestionBoxControlTransitionId.TextChanged)}else this.doStateMachineTransition(t.QuestionBoxControlTransitionId.ClearQueryWithoutBlur);this.hasUncommittedText=!1},r.prototype.onUserInputKeyDown=function(e){var n=e.keyCode;if(n!==jsCommon.DOMConstants.altKeyCode&&n!==jsCommon.DOMConstants.ctrlKeyCode&&n!==jsCommon.DOMConstants.shiftKeyCode){var i=this.scope,r=i.sharedViewModel,o=i.getSelectionEnd();switch(o!==(r.userInput?r.userInput.length:0)&&this.clearAutoCompletion(),n){case jsCommon.DOMConstants.enterKeyCode:e.preventDefault(),this.hasUncommittedText?(this.doStateMachineTransition(t.QuestionBoxControlTransitionId.ConfirmQuery),this.hasUncommittedText=!1):this.doStateMachineTransition(t.QuestionBoxControlTransitionId.EndSession);break;case jsCommon.DOMConstants.escKeyCode:this.doStateMachineTransition(t.QuestionBoxControlTransitionId.ClearQueryWithoutBlur);break;case jsCommon.DOMConstants.tabKeyCode:case jsCommon.DOMConstants.rightArrowKeyCode:_.isEmpty(i.viewModel.autoComplete)?this.hasUncommittedText&&(this.doStateMachineTransition(t.QuestionBoxControlTransitionId.ConfirmQuery),this.hasUncommittedText=!1):(e.preventDefault(),this.doStateMachineTransition(t.QuestionBoxControlTransitionId.CompleteQuery));break;case jsCommon.DOMConstants.upArrowKeyCode:e.preventDefault(),this.doStateMachineTransition(t.QuestionBoxControlTransitionId.NavigateUp);break;case jsCommon.DOMConstants.downArrowKeyCode:e.preventDefault(),this.doStateMachineTransition(t.QuestionBoxControlTransitionId.NavigateDown)}}},r.prototype.onUserInputKeyUp=function(e){var t=e.keyCode;t!==jsCommon.DOMConstants.leftArrowKeyCode&&t!==jsCommon.DOMConstants.rightArrowKeyCode&&t!==jsCommon.DOMConstants.endKeyCode&&t!==jsCommon.DOMConstants.homeKeyCode||this.trackSelection()},r.prototype.onUserInputClick=function(){this.trackSelection();var e=this.scope;_.isEmpty(e.sharedViewModel.userInput)&&e.selectInput()},r.prototype.onUserInputSelect=function(){this.trackSelection()},r.prototype.trackSelection=function(){var e=this;this.trackSelectionPromise&&(this.services.timeout.cancel(this.trackSelectionPromise),this.trackSelectionPromise=null),this.trackSelectionPromise=this.services.timeout((function(){return e.trackSelectionInternal(!0)}),n,!0)},r.prototype.trackSelectionInternal=function(e){var n=this,i=0,r=this.scope,o=r.getSelectionStart(),s=r.getSelectionEnd();if(null!==s&&null!==o){for(var a=o===s,u=[],l=0,c=this.terms.length;l<c;l++){var p=this.terms[l];p.trim().length>0&&(a&&i<=s&&o<=i+p.length?u.push(l):!a&&i<s&&o<i+p.length&&u.push(l)),i+=p.length}if(!_.isEmpty(u)){if(this.selection={start:u[0],end:u[u.length-1]},this.currentResult.suggestionItems){var d=_.filter(this.currentResult.suggestionItems,(function(e){return e.TermStartIndex<=n.selection.end&&n.selection.start<=e.TermEndIndex}));if(!_.isEmpty(d)){var h=_.filter(d,(function(e){return d[0].TermStartIndex===e.TermStartIndex&&d[0].TermEndIndex===e.TermEndIndex}));h.length===d.length&&(this.selection.start=d[0].TermStartIndex,this.selection.end=d[0].TermEndIndex)}}this.selection.text=this.terms.slice(this.selection.start,this.selection.end+1).join(""),this.selection.isUserRangeSelection=!a,this.selection.userRangeText=this.scope.sharedViewModel.userInput.substring(o,s),this.selection.isSingleTermSelection=this.selection.start===this.selection.end,e&&this.doStateMachineTransition(t.QuestionBoxControlTransitionId.TermSelected)}}},r.prototype.setCompletionText=function(){var e=this.currentResult,t=this.scope,n=t.viewModel;n.autoComplete=null;var i=t.sharedViewModel.userInput;if(e&&e.completedUtterance&&e.completedUtterance.Text.length>=i.length&&0===e.completedUtterance.Text.indexOf(i)){var r=e.completedUtterance.Text.substring(i.length);n.autoComplete=r}},r.prototype.renderInputText=function(e){var t=this.scope.viewModel;if(t.inputRendererTerms=[],t.inputRendererRemainder=null,t.inputRendererShowUnrecognized=!1,e&&e.completedUtterance){for(var n=e.getCompletedUtteranceAsTerms(),r=this.scope.sharedViewModel.userInput,o=0,s=n.length;o<s&&!_.isEmpty(r);o++){var a=n[o];0===r.indexOf(a)&&(t.inputRendererTerms.push({term:a,index:o,unrecognized:e.unrecognizedTerms&&e.unrecognizedTerms.indexOf(o)!==-1}),r=r.replace(a,""))}_.isEmpty(r)||(t.inputRendererRemainder=r),this.inputRendererShowUnrecognizedPromise&&(this.services.timeout.cancel(this.inputRendererShowUnrecognizedPromise),this.inputRendererShowUnrecognizedPromise=null),this.inputRendererShowUnrecognizedPromise=this.services.timeout((function(){return t.inputRendererShowUnrecognized=!0}),i,!0)}else t.inputRendererRemainder=this.scope.sharedViewModel.userInput},r.prototype.scrollLeftIfEmpty=function(){var e=this.scope;_.isEmpty(e.sharedViewModel.userInput)&&this.services.timeout((function(){return e.scrollInputBoxToLeft()}),0,!1)},r.prototype.registerStateMachineActions=function(){var e=this,n=this.scope.sharedViewModel.stateMachine;n.addTransitionActionHandler(t.QuestionBoxControlTransitionAction.textInput_Blur,(function(){return e.blur()})),n.addTransitionActionHandler(t.QuestionBoxControlTransitionAction.textInput_Clear,(function(){return e.clear()})),n.addTransitionActionHandler(t.QuestionBoxControlTransitionAction.textInput_ClearTermHighlights,(function(){return e.clearTermHighlights()})),n.addTransitionActionHandler(t.QuestionBoxControlTransitionAction.textInput_CompleteInput,(function(){return e.completeInput()})),n.addTransitionActionHandler(t.QuestionBoxControlTransitionAction.textInput_ShowAutoCompletion,(function(){return e.showAutoCompletion()})),n.addTransitionActionHandler(t.QuestionBoxControlTransitionAction.textInput_UpdateTermSelection,(function(){return e.updateTermSelection()}))},r})();t.TextInputController=r})(n=t.qna||(t.qna={}))})(n=t.controllers||(t.controllers={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){var i=(function(){function n(){this.restrict="E",this.templateUrl="views/infoNavCanvas.html",this.scope={canvasDefinition:"=",respectPaneUpdates:"="},this.replace=!0,this.controller=e.common.Services.createController(t.controllers.InfoNavCanvasController)}return n})();n.InfoNavCanvas=i})(n=t.directives||(t.directives={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={})),powerbi.explore.infonav.registerInfonavDirective("InfoNavCanvas",[]);var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){var i=(function(){function n(){this.restrict="E",this.templateUrl="views/infoNavContainer.html",this.scope={hostService:"=",interpretUtterance:"=?",infoNavContainerOptions:"=?",models:"=",getAdditionalODataFilter:"=",interpretListener:"=",questionBoxOutput:"=",usageReportingEnabled:"="},this.replace=!0,this.controller=e.common.Services.createController(t.controllers.InfoNavContainerController)}return n})();n.InfoNavContainer=i})(n=t.directives||(t.directives={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={})),powerbi.explore.infonav.registerInfonavDirective("InfoNavContainer",[]);var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){var i=(function(){function n(){this.restrict="E",this.templateUrl="views/infoNavQnaStart.html",this.scope={errorMessage:"@",interpretUtterance:"=",models:"="},this.replace=!0,this.controller=e.common.Services.createController(t.controllers.InfoNavQnaStartController)}return n})();n.InfoNavQnaStart=i})(n=t.directives||(t.directives={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={})),powerbi.explore.infonav.registerInfonavDirective("InfoNavQnaStart",[]);var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){var i="data-suggestionIndex",r=".infonav-suggestionsHostInnerLayout",o=(function(){function n(){this.restrict="E",this.templateUrl="views/qna/suggestionList.html",this.scope={infoNavControlContainer:"=",sharedViewModel:"="},this.replace=!0,this.controller=e.common.Services.createController(t.controllers.qna.SuggestionListController),this.link=function(e,t,n){e.scrollSelectionIntoView=function(){var n=t.find("["+i+'="'+e.viewModel.selectedSuggestionIndex+'"]');if(n.length>0){var o=n.offset(),s=n.outerHeight(),a=n.closest(r),u=a.height(),l=a.offset(),c=o.top>=l.top,p=o.top+s<=u+l.top;if(c&&p)return;var d=0;n.prevAll().each((function(e,t){d+=$(t).outerHeight()})),c?p||a.scrollTop(d-u+s):a.scrollTop(d)}},e.scrollToTop=function(){t.find(r).scrollTop(0)}}}return n})();n.QnaSuggestionList=o})(n=t.directives||(t.directives={}))})(n=t.infonav||(t.infonav={}));
})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={})),powerbi.explore.infonav.registerInfonavDirective("QnaSuggestionList",[]);var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){var i=".infonav-textInputBox",r=".infonav-userInput",o="data-termindex",s=(function(){function n(){this.restrict="E",this.templateUrl="views/qna/textInput.html",this.scope={infoNavControlContainer:"=",sharedViewModel:"="},this.replace=!0,this.controller=e.common.Services.createController(t.controllers.qna.TextInputController),this.link=function(e,t,n){var s=t.find(r),a=s.get(0),u=t.find(i);e.setFocusToInput=function(){return s.focus()},e.blurInput=function(){return s.blur()},e.selectInput=function(){return s.select()},e.scrollInputBoxToLeft=function(){return u.scrollLeft(0)},e.setCursorPositionAtEnd=function(){return a.selectionStart=a.selectionEnd=e.sharedViewModel.userInput.length},e.getSelectionStart=function(){try{return a.selectionStart}catch(e){return null}},e.getSelectionEnd=function(){try{return a.selectionEnd}catch(e){return null}},e.getSelectedTermPosition=function(e,n){for(var i={top:0,left:0,height:0,width:0},r=e;r<=n;r++){var s=t.find("["+o+'="'+r+'"]');i.width+=s.width(),s.length>0&&r===e&&(i.top=s.position().top,i.left=s.position().left,i.height=s.height())}return i}}}return n})();n.QnaTextInput=s})(n=t.directives||(t.directives={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={})),powerbi.explore.infonav.registerInfonavDirective("QnaTextInput",[]);var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){var i=(function(){function n(){this.restrict="E",this.templateUrl="views/qna/questionBox.html",this.scope={infoNavControlContainer:"=",sharedViewModel:"="},this.replace=!0,this.controller=e.common.Services.createController(t.controllers.qna.QuestionBoxController)}return n})();n.QuestionBox=i})(n=t.directives||(t.directives={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={})),powerbi.explore.infonav.registerInfonavDirective("QuestionBox",[]);var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){var i=(function(){function n(){this.restrict="E",this.templateUrl="views/qna/questionBoxContainer.html",this.scope={getAdditionalODataFilter:"=",interpretListener:"=",models:"=",output:"=",usageReportingEnabled:"="},this.replace=!0,this.controller=e.common.Services.createController(t.controllers.qna.QuestionBoxContainerController)}return n})();n.QuestionBoxContainer=i})(n=t.directives||(t.directives={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={})),powerbi.explore.infonav.registerInfonavDirective("QuestionBoxContainer",[]);var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){var t=jsCommon.StringExtensions,n=(function(){function n(t,n,i){void 0===i&&(i=0),this._utterance=t,this._results=n.map((function(n){return new e.InterpretResult(n,t)})),this._resultIndex=i}return Object.defineProperty(n.prototype,"utterance",{get:function(){return this._utterance},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"result",{get:function(){return _.isEmpty(this._results)?null:this._resultIndex<0||this._resultIndex>=this._results.length?null:this._results[this._resultIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"results",{get:function(){return this._results},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"resultIndex",{get:function(){return this._resultIndex},enumerable:!0,configurable:!0}),n.prototype.containsPhrasingTemplates=function(){for(var e=0;e<this._results.length;e++)if(this._results[e].suggestedPhrasingTemplates&&this._results[e].suggestedPhrasingTemplates.length>0)return!0;return!1},n.prototype.isEmpty=function(e){return this._results.length<1||this._results[this._resultIndex].isEmpty(e)},n.prototype.hasErrors=function(){for(var e=0;e<this._results.length;e++)if(!t.isNullOrUndefinedOrWhiteSpaceString(this._results[e].error))return!0;return!1},n.prototype.isUtteranceLinguisticallyEquivalent=function(e){return e&&(e._utterance||"").trim()===(this._utterance||"").trim()},n})();e.InterpretResponse=n})(t=e.models||(e.models={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(e){this._parts=e}return Object.defineProperty(e.prototype,"parts",{get:function(){return this._parts},set:function(e){this._parts=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){var e="";return this._parts.forEach((function(t,n,i){e+=t.text})),e},enumerable:!0,configurable:!0}),e})();e.UISuggestionItem=t;var n=(function(){function e(e,t){this._source=e,this._utterance=t}return Object.defineProperty(e.prototype,"alternateCompletions",{get:function(){return this._source.AlternateCompletions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suggestionItems",{get:function(){return this._source.SuggestionItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suggestedPhrasingTemplates",{get:function(){return this._source.SuggestedPhrasingTemplates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"completedUtterance",{get:function(){return this._source.CompletedUtterance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"warnings",{get:function(){return this._source.Warnings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._source.Error},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"databaseName",{get:function(){return this._source.DatabaseName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"virtualServerName",{get:function(){return this._source.VirtualServerName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"restatement",{get:function(){return this._source.Restatement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spans",{get:function(){return this._source.Spans},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"utterance",{get:function(){return this._utterance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unrecognizedTerms",{get:function(){return this._source.UnrecognizedTerms?this._source.UnrecognizedTerms.map((function(e){return e.TermIndex})):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(e){return!(this._source.Command||e&&(this.restatement||this.completedUtterance||this.alternateCompletions&&this.alternateCompletions.length||this.suggestionItems&&this.suggestionItems.length))},e.prototype.hasCompletionSuggestions=function(){return!!this._source&&!!this.alternateCompletions&&this.alternateCompletions.length>0},e.prototype.hasTermSuggestions=function(){return!!this._source&&!!this.suggestionItems&&this.suggestionItems.length>0},e.prototype.getPhrasingTemplateIndexForTerm=function(e){if(this._source&&this.suggestedPhrasingTemplates&&this.suggestedPhrasingTemplates.length>0)for(var t=this.suggestedPhrasingTemplates,n=0;n<t.length;n++)if(t[n].TermIndices.indexOf(e)>=0)return n;return-1},e.prototype.getCompletedUtteranceAsTerms=function(){var t=new Array,n=this.completedUtterance;if(n)for(var i=n.Terms,r=0,o=i.length;r<o;r++)t.push(e.getTermText(n,r));return t},e.getTermText=function(e,t){var n=e.Text,i=e.Terms,r=i[t].StartCharIndex,o=t===i.length-1,s=o?n.length:i[t+1].StartCharIndex;return n.substring(r,s)},e.prototype.getTermSuggestionsForSelection=function(e){for(var t=[],n=0;n<this.suggestionItems.length;n++){var i=this.suggestionItems[n];i.TermStartIndex<=e.end&&e.start<=i.TermEndIndex&&t.push(i)}return t},e.prototype.hasSuggestionsForTermSelection=function(e){if(this._source&&this.suggestionItems)for(var t=this.suggestionItems,n=0;n<t.length;n++)if(t[n].TermStartIndex<=e.end&&e.start<=t[n].TermEndIndex)return!0;return!1},e.prototype.getCompletionSuggestions=function(){var e=new Array;if(this._source&&this.completedUtterance&&this.hasCompletionSuggestions())for(var n=this.getCompletedUtteranceAsTerms(),i=0;i<this.alternateCompletions.length;i++){var r=this.alternateCompletions[i],o=new t;o.parts=new Array;for(var s=0;s<r.Items.length;s++){var a=r.Items[s];if(a.TermIndices)for(var u=0;u<a.TermIndices.length;u++){var l={};if(l.text=a.Text?a.Text:n[a.TermIndices[u]],l.emphasize=!!a.Text,o.parts.push(l),a.Text&&0===u)break}else{var c={};c.text=a.Text,c.emphasize=!0,o.parts.push(c)}}e.push(o)}return e},e.prototype.getTermSuggestions=function(e){var n=new Array;if(e&&this.completedUtterance&&this.hasTermSuggestions())for(var i=this.getCompletedUtteranceAsTerms(),r=this.getTermSuggestionsForSelection(e),o=0;o<r.length;o++){var s=r[o];if(s.TermStartIndex<=e.end&&e.start<=s.TermEndIndex){var a=new t;a.parts=i.map((function(e){var t={};return t.text=e,t.emphasize=!1,t}));var u=s.TermEndIndex-s.TermStartIndex+1;a.parts.splice(s.TermStartIndex,u,{text:s.SuggestedReplacement,emphasize:!0}),n.push(a)}}return n},e})();e.InterpretResult=n})(t=e.models||(e.models={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){function i(e,t){return new s(e,t)}n.createInterpretHttpService=i;var r=25e3,o=6e4,s=(function(){function n(e,t){this.timeoutService=e,this.promiseFactory=t}return n.prototype.probe=function(n,i){var r=e.common.httpService.powerbiRequestOptions(i,"InterpretProbe");r.timeout=o;var s={Scope:n,Options:t.contracts.InterpretRequestOptions.SupportPodQueries};return e.common.httpService.post("/explore/interpretation/interpretprobe/",s,r)},n.prototype.interpret=function(t,n,i){var o=e.common.httpService.powerbiRequestOptions(n,"Interpret"),s=this.promiseFactory.defer();return o.timeout=s.promise,this.timeoutService((function(){return s.resolve({})}),r),i&&i.then((function(){return s.resolve({})})),e.common.httpService.post("/explore/interpretation/interpret/",t,o)},n})()})(n=t.services||(t.services={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(t){function n(){return new i}t.createUsageService=n;var i=(function(){function t(){this.firstUsage=!0}return t.prototype.update=function(t){var n={UtteranceData:t};this.firstUsage&&(n.FirstUsage=!0,this.firstUsage=!1);var i=e.common.httpService.powerbiRequestOptions(null,"UsageUpdate");e.common.httpService.post("infonav/usage/update/",{request:n},i)},t})()})(n=t.services||(t.services={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){!(function(e){e[e.Empty=0]="Empty",e[e.InProgress=1]="InProgress",e[e.Error=2]="Error",e[e.DisplayingIntepretResult=3]="DisplayingIntepretResult",e[e.QnaStart=4]="QnaStart"})(e.VisualState||(e.VisualState={}));e.VisualState})(t=e.services||(e.services={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){!(function(e){e[e.Data=1]="Data",e[e.QueryMetadata=2]="QueryMetadata",e[e.VisualConfiguration=4]="VisualConfiguration",e[e.SupportPodQueries=64]="SupportPodQueries",e[e.Cortana=128]="Cortana",e[e.Personality=256]="Personality",e[e.TermBindings=512]="TermBindings",e[e.Diagnostics=1024]="Diagnostics"})(e.InterpretRequestOptions||(e.InterpretRequestOptions={}));e.InterpretRequestOptions})(t=e.contracts||(e.contracts={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){return new n(e)}e.createBindingElementFactory=t;var n=(function(){function e(e){this.localizationService=e}return e.prototype.buildBindingElement=function(e,t,n){var i=document.createElement("div");if(i.textContent=t,e.appendChild(i),n){var r=document.createElement("div");r.className="replacementDetail",r.textContent="("+n+")",e.appendChild(r)}},e.prototype.buildPropertyBaseElement=function(e,t){t.ConceptualProperty?this.buildBindingElement(e,t.Text,this.localizationService.format("Qna_BindingType_Property",[t.ConceptualEntity,t.ConceptualProperty])):t.ConceptualHierarchy&&(t.ConceptualHierarchyLevel?this.buildBindingElement(e,t.Text,this.localizationService.format("Qna_BindingType_Hierarchy",[t.ConceptualEntity,t.ConceptualHierarchy,t.ConceptualHierarchyLevel])):this.buildBindingElement(e,t.Text,this.localizationService.format("Qna_BindingType_Property",[t.ConceptualEntity,t.ConceptualHierarchy])))},e.prototype.buildTable=function(e,t){this.buildBindingElement(e,t.Text,t.ConceptualEntity)},e.prototype.buildPod=function(e,t){this.buildBindingElement(e,t.Text,this.localizationService.get("Qna_BindingType_ReportPage"))},e.prototype.buildProperty=function(e,t){return this.buildPropertyBaseElement(e,t)},e.prototype.buildValue=function(e,t){return this.buildPropertyBaseElement(e,t)},e.prototype.buildRange=function(e,t){return this.buildPropertyBaseElement(e,t)},e.prototype.buildVisType=function(e,t){this.buildBindingElement(e,t.Text,this.localizationService.get("Qna_BindingType_VisualizationType"))},e.prototype.buildComposite=function(e,t){this.buildBindingElement(e,t.Text,this.localizationService.get("Qna_BindingType_Composite"))},e.prototype.buildCoreTerm=function(e,t){this.buildBindingElement(e,t.Text)},e.prototype.buildAnyEntityTerm=function(e,t){this.buildBindingElement(e,t.Text)},e.prototype.build=function(e){var t,n=document.createElement("li");e.Composite?(t=e.Composite,this.buildComposite(n,e.Composite)):e.Pod?(t=e.Pod,this.buildPod(n,e.Pod)):e.Property?(t=e.Property,this.buildProperty(n,e.Property)):e.Range?(t=e.Range,this.buildRange(n,e.Range)):e.Table?(t=e.Table,this.buildTable(n,e.Table)):e.Value?(t=e.Value,this.buildValue(n,e.Value)):e.VisType?(t=e.VisType,this.buildVisType(n,e.VisType)):e.Core?(t=e.Core,this.buildCoreTerm(n,e.Core)):e.AnyEntity&&(t=e.AnyEntity,this.buildAnyEntityTerm(n,e.AnyEntity));var i=t.Text;return{element:n,text:i,binding:t,container:e}},e})();e.BindingElementFactory=n})(t=e.services||(e.services={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(n){var i;!(function(i){function r(e,t,n,i,r,s,a,u){return new o(e,t,n,i,r,s,a,u)}i.createInfoNavCanvasDefinitionFactory=r;var o=(function(){function r(e,t,n,i,r,o,s,a){this.conceptualSchemaProxy=e,this.explorationProxy=t,this.explorationSerializer=n,this.featureSwitchService=i,this.geoTaggingAnalyzerService=r,this.aggrOps=o,this.promiseFactory=s,this.eventBridge=a}return r.prototype.createGivenUtteranceData=function(o,s,a,u,l){var c;o&&o.queryDefn&&(c=_.filter(o.queryDefn.From,(function(t){return t.Type===e.data.EntitySourceType.Pod})));var p=_.find(s,(function(e){return e.vsName===o.virtualServerName&&e.dbName===o.databaseName})),d=r.createDataSourceArray(p);if(_.isEmpty(c)){var h=n.util.visualUtil.interpretResultToConfig(o,s),v=t.services.createVisualAuthoringCore(l,this.geoTaggingAnalyzerService,this.aggrOps,this.featureSwitchService.featureSwitches),f=n.viewModels.ViewModelFactory.createVisualDataFromInterpretResult(h,this.conceptualSchemaProxy,d,v).then((function(e){return _.isEmpty(e)?null:e[0]}));return new i.SingleVisualizationCanvasDefinition(f,a,u,p,d,this.promiseFactory)}var g=c[0],m=r.unwrapReportIdFromSchema(g.Schema),y=g.Entity,S=n.util.FilterUtil.extractParameterFilters(o.queryDefn,o.queryMetadata);return new i.PodExploreCanvasDefinition(m,y,S,p,d,this.explorationProxy,this.explorationSerializer,this.promiseFactory,this.eventBridge)},r.prototype.createGivenTileData=function(e,o,s){var a=_.find(o,(function(t){return t.id===e.modelId})),u=r.createDataSourceArray(a);if(e.reportPageTile){var l=e.reportPageTile.reportId,c=e.reportPageTile.pod,p=[],d=e.reportPageTile.filters&&this.explorationSerializer.deserializeFilterCollection(e.reportPageTile.filters,p,!1);if(!_.isEmpty(p))return;return new i.PodExploreCanvasDefinition(l,c,d,a,u,this.explorationProxy,this.explorationSerializer,this.promiseFactory,this.eventBridge)}if(e.visualTile){var h=t.services.createVisualAuthoringCore(s,this.geoTaggingAnalyzerService,this.aggrOps,this.featureSwitchService.featureSwitches),v=n.viewModels.ViewModelFactory.createVisualDataFromTileData(e.visualTile,this.conceptualSchemaProxy,u,a,h);return new i.SingleVisualizationCanvasDefinition(v,null,i.SingleVisualizationType.PrimaryVisual,a,u,this.promiseFactory)}},r.createDataSourceArray=function(t){return e.explore.contracts.createDataSourceArray([{type:"dsr",id:t.id,packageId:t.packageId,name:void 0,dsr:{schemaName:void 0,vsName:t.vsName,dbName:t.dbName,modelId:t.id}}])},r.unwrapReportIdFromSchema=function(e){var t="Report_";return e&&_.startsWith(e,t)&&(e=e.substring(t.length)),parseInt(e,10)},r})()})(i=n.services||(n.services={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(n){var i;!(function(i){var r=e.explore.constants.ExploreCanvasConstants,o=e.explore.viewModels,s=(function(){function e(e,t,n,i,r,o,s,a,u){this.reportId=e,this.podName=t,this.parameterFilters=n,this.model=i,this.dataSources=r,this.explorationProxy=o,this.explorationSerializer=s,this.promiseFactory=a,this.eventBridge=u,this.pinEnabled=!0,this.resetSelection=!0,this.showPageFilters=!0,this.initializeDeferred=a.defer()}return Object.defineProperty(e.prototype,"initializePromise",{get:function(){return this.initializeDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e){var t=this;return e&&e.infoNavPodExplorationCreator?this.infoNavPodExplorationCreator=e.infoNavPodExplorationCreator:this.infoNavPodExplorationCreator=new a(this.explorationProxy,this.explorationSerializer,this.promiseFactory,this.eventBridge),this.infoNavPodExplorationCreator.createExploration(this.reportId,this.podName,this.parameterFilters,this.model).then((function(e){t.exploration=e.exploration,t.exploreCanvas=e.exploration.exploreCanvas,t.section=e.section,t.pod=e.pod,t.originalFilters=e.originalFilters,t.section.size.displayOption=4,t.maxWidth=e.section.size.width+2*r.AutoLayoutVisualPadding+2*r.ExploreCanvasPadding,t.maxHeight=e.section.size.height+2*r.AutoLayoutVisualPadding+2*r.ExploreCanvasPadding+r.AutoLayoutVisualVCHeader+r.ScrollbarOffset,t.initializeDeferred.resolve(null)})),this.initializePromise},e.prototype.onVisualConversion=function(e){},e.prototype.extractParameterFilters=function(){var e=[],t=this.explorationSerializer.deserializeFilterCollection(this.originalFilters,e,!1);if(_.isEmpty(e))return n.util.FilterUtil.extractParameterFiltersFromSection(this.section.filters,t)},e})();i.PodExploreCanvasDefinition=s,i.ExplorationExpirationMilliseconds=6e4;var a=(function(){function r(e,t,n,i){this.explorationProxy=e,this.explorationSerializer=t,this.promiseFactory=n,this.eventBridge=i,this.lastExplorationData=null,this.lastExplorationTime=0,this.lastReportId=null,this.lastPodName=null,this.lastParameterFilters=null}return r.prototype.createExploration=function(t,r,s,a){var u=this,l=null,c=JSON.stringify(s);if(this.lastExplorationData&&this.lastExplorationTime+i.ExplorationExpirationMilliseconds>Date.now()&&this.lastReportId===t&&this.lastPodName===r){var p=this.lastExplorationData;if(this.lastParameterFilters===c)l=this.promiseFactory.resolve(p);else{this.lastExplorationTime=Date.now(),this.lastParameterFilters=c;var d=[],h=this.explorationSerializer.deserializeFilterCollection(p.originalFilters,d,!1);p.section.filters=h,n.util.FilterUtil.applySectionParameterFilters(p.section,p.pod,s,!0),this.eventBridge.publishToChannel(e.explore.services.events.visualContainerChanged,{affectContainer:function(){return!0},allowCache:!0}),l=this.promiseFactory.resolve(p)}}else l=this.explorationProxy.get({id:t}).then((function(e){var i=u.findPodSectionIndices(e,r);if(i){var a=e.sections[i.sectionIndex],l=e.pods[i.podIndex];n.util.FilterUtil.mergeExplorationSectionFilters(e,a);var p=u.explorationSerializer.serializeFilterCollection(a.filters);n.util.FilterUtil.applySectionParameterFilters(a,l,s);var d={exploration:o.ViewModelFactory.convertExploration(e,0,i.sectionIndex),section:a,pod:l,originalFilters:p};return u.lastExplorationData=d,u.lastExplorationTime=Date.now(),u.lastReportId=t,u.lastPodName=r,u.lastParameterFilters=c,d}}));return l},r.prototype.findPodSectionIndices=function(e,n){var i=t.PodUtils.findPodIndexForPodName(e,n);if(i>=0){var r=e.pods[i].boundSection,o=t.SectionUtils.findSectionIndexForSectionName(e,r);if(o>=0)return{podIndex:i,sectionIndex:o}}},r})();i.InfoNavPodExplorationCreator=a})(i=n.services||(n.services={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(n){var i;!(function(i){var r=e.explore.constants.ExploreCanvasConstants,o=e.explore.contracts,s=e.data.SemanticFilter,a=e.explore.util.VisualContainerUtils,u=t.viewModels.ViewModelFactory;!(function(e){e[e.PrimaryVisual=0]="PrimaryVisual",e[e.Cortana=1]="Cortana"})(i.SingleVisualizationType||(i.SingleVisualizationType={}));var l=i.SingleVisualizationType,c=(function(){function i(e,t,n,i,r,o){this.visualDataPromise=e,this.additionalODataFilter=t,this.singleVisualizationType=n,this.model=i,this.dataSources=r,this.pinEnabled=!0,this.resetSelection=!1,this.showPageFilters=!1,this.maxSizeProvider=new p,this.initializeDeferred=o.defer()}return Object.defineProperty(i.prototype,"initializePromise",{get:function(){return this.initializeDeferred.promise},enumerable:!0,configurable:!0}),i.prototype.initialize=function(e,r,o,s){var a=this;return e&&e.singleVisualExploration?this.singleVisualExploration=e.singleVisualExploration:this.singleVisualExploration=new g(r,this.singleVisualizationType),this.visualDataPromise.then((function(e){var r=i.createViewContext(a.additionalODataFilter);a.singleVisualExploration.updateForVisual(e,r),o&&t.services.selectionUtils.selectVisualContainer(a.singleVisualExploration.visualContainerContract,s),a.exploreCanvas=a.singleVisualExploration.exploreCanvas,a.section=a.singleVisualExploration.section;var u=n.util.visualUtil.getType(a.singleVisualExploration.visualContainerContract.config.singleVisual.visualType),l=a.maxSizeProvider.calculate(u);a.maxWidth=l.width,a.maxHeight=l.height,a.model=e.model,a.initializeDeferred.resolve(null)})),this.initializePromise},i.prototype.onVisualConversion=function(e){var t=n.util.visualUtil.getType(e),i=this.maxSizeProvider.calculate(t);this.maxWidth=i.width,this.maxHeight=i.height},i.createViewContext=function(t){if(t){var n=e.explore.odata.createODataFilterParser().tryGetFilters(t);if(!_.isEmpty(n))return{filters:n}}return null},i})();i.SingleVisualizationCanvasDefinition=c;var p=(function(){function e(){}return e.prototype.calculate=function(e){var t=.75,i=650;switch(e){case VisualizationType.Card:return{width:i,height:175};case VisualizationType.PieChart:case VisualizationType.DonutChart:case VisualizationType.Gauge:case VisualizationType.Treemap:case VisualizationType.FunnelChart:return{width:i,height:t*i};default:return{width:n.constants.DefaultVisualMaxWidth,height:n.constants.DefaultVisualMaxHeight}}},e})(),d=960,h=720,v=20,f=-250,g=(function(){function e(e,t){this.eventBridge=e,this.singleVisualizationType=t,this.initialize()}return Object.defineProperty(e.prototype,"section",{get:function(){return this.sectionInternal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exploreCanvas",{get:function(){return this.exploreCanvasInternal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visualContainerContract",{get:function(){return this.visualContainer.contract},enumerable:!0,configurable:!0}),e.prototype.updateForVisual=function(e,n){n&&!_.isEmpty(n.filters)?this.sectionInternal.filters=n.filters:this.sectionInternal.filters=[],this.visualContainer.contract.filters=e.visualContainer.filters,this.visualContainer.contract.config=e.visualContainer.config,this.visualContainer.dataViewSource=e.dataViewSource,this.visualContainer.updateViewState(),this.eventBridge.publishToChannel(t.services.events.visualContainerChanged,{affectContainer:a.contractEqualityComparator(this.visualContainer.contract)})},e.prototype.initialize=function(){var e,t,n,i=this;switch(this.singleVisualizationType){case l.Cortana:e=r.DefaultCortanaWidth+v,t=r.DefaultCortanaHeight+f,n=3;break;case l.PrimaryVisual:e=d,t=h,n=0;break;default:e=d,t=h,n=0}this.initialVisualContainerPosition={x:0,y:0,width:e,height:t};var a={id:0,config:{},layouts:jsCommon.ArrayExtensions.extendWithId([{id:0,position:this.initialVisualContainerPosition}])},c=u.convertVisualContainerStandalone(a);c.allowDeferredRendering=!0,c.hostServices={deleteVisualRelationships:_.noop,getFilters:function(){var e=[],t=c.contract.filters||[];t=t.concat(i.sectionInternal.filters||[]);for(var n=0,r=t;n<r.length;n++){var o=r[n],a=o.filter;a&&e.push(a)}return{dataFilter:s.merge(e),highlightFilter:null}},getVisualRelationshipFilterAction:function(){return 0},selectDataPoint:_.noop,setVisualRelationshipFilterAction:_.noop,clearHighlight:_.noop},this.sectionInternal={name:"InfoNavSection",displayName:"InfoNavSection",size:{displayOption:n,width:e,height:t},visualContainers:[c.contract],filters:[]},this.explorationContract={width:this.sectionInternal.size.width,height:this.sectionInternal.size.height,dataSources:o.createDataSourceArray(),sections:[this.sectionInternal]},this.exploreCanvasInternal=u.convertSectionToExploreCanvas(this.explorationContract,this.sectionInternal,0),this.visualContainer=this.exploreCanvasInternal.visualContainers[0]},e})()})(i=n.services||(n.services={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){function i(e,t,n,i,r,o,s,c){return new l(e,t,n,i,r,o,s||a,c||u)}var r=jsCommon.EnumExtensions,o=e.common.helpers.ModelConverterHelper,s=2,a=6e5,u=6e4;n.createInterpretService=i;var l=(function(){function n(e,t,n,i,r,o,s,a){this.interpretHttpService=e,this.promiseFactory=t,this.telemetryService=i,this.contentProviderHttpService=r,this.featureSwitchService=o,this.probePromiseCache=new c(s),this.interpretCache=new p(a,n),this.contentProviders=this.contentProviderHttpService.getBuiltInContentProviders()}return n.prototype.probe=function(e,t){var i=n.createInterpretRequestScope(e,this.featureSwitchService.featureSwitches);return _.isEmpty(i.DbMonikers)?this.promiseFactory.reject():this.probeInternal(i,t).promise},n.prototype.probeInternal=function(e,n){var i=this,r=this.probePromiseCache.getPromise(e);if(!r){var o=this.promiseFactory.defer();r={promise:o.promise,waitingInterprets:[],isComplete:!1},this.probePromiseCache.setPromise(e,r),this.interpretHttpService.probe(e,n).then((function(e){o.resolve(new t.models.InterpretResponse(null,e.data))}),(function(){o.reject(),i.probePromiseCache.clearPromise(e)})),o.promise.finally((function(){r.isComplete=!0;var e=r.waitingInterprets,t=e.length;if(t>0){var n=e[t-1].runToCompletion();n.finally((function(){for(var n=0;n<t-1;n++)e[n].reject()}))}r.waitingInterprets=null}))}return r},n.prototype.interpret=function(e,t,i,r,o,s,a,u){var l=this,c=_.first(i);o.isError=null,o.isResponseEmpty=null,o.fromCache=null,o.wasCancelled=null,o.probeCompletedTimestamp=null,o.contentProviderType=this.getModelContentProviderType(c),o.ownerType=n.getModelOwnerType(c);var p=this.interpretInternal(e,t,i,r,o,s,a,u);return p.then((function(e){if(o.isError=!1,o.isResponseEmpty=!e||e.isEmpty(!1),e){var t=n.getFirstModelFromInterpretResponse(e,i);t&&(o.contentProviderType=l.getModelContentProviderType(t),o.ownerType=n.getModelOwnerType(t))}}),(function(){o.isError=!0,o.isResponseEmpty=!0})),p},n.prototype.interpretInternal=function(e,i,r,o,s,a,u,l){var c=this,p=n.createInterpretRequestScope(r,this.featureSwitchService.featureSwitches);if(_.isEmpty(p.DbMonikers))return this.promiseFactory.reject();var d=n.constructInterpretRequest(e,i,p,o,null,l);s.fromCache=!1;var h=this.interpretCache.getInterpretResponse(d);if(h)return s.fromCache=!0,this.promiseFactory.resolve(h);var v=this.promiseFactory.defer();s.wasCancelled=!1,a&&a.then((function(){return s.wasCancelled=!0})),s.probeCompletedTimestamp=null;var f=function(){s.probeCompletedTimestamp=Date.now(),c.interpretHttpService.interpret(d,null,a).then((function(n){s.interpretRequestId=n.requestId;var i=new t.models.InterpretResponse(e,n.data);c.interpretCache.setInterpretResponse(d,i),v.resolve(i)}),(function(e){s.interpretRequestId=e.requestId,v.reject()}))};if(u)f();else{var g=this.probeInternal(p,null);g.isComplete?f():g.waitingInterprets.push({runToCompletion:function(){return f(),v.promise},reject:function(){v.reject()}})}return v.promise},n.getFirstModelFromInterpretResponse=function(e,t){if(e){var n=e.result;if(n)return _.find(t,(function(e){return e.vsName===n.virtualServerName&&e.dbName===n.databaseName}))}return null},n.prototype.getModelContentProviderType=function(t){return t&&null!=t.contentProviderId?e.common.findContentProviderName(this.contentProviders,t.contentProviderId):"Unknown"},n.getModelOwnerType=function(t){return t&&null!=t.permissions?jsCommon.EnumExtensions.hasFlag(t.permissions,e.common.contracts.Permissions.All)?e.telemetry.OwnerType.Owner:e.telemetry.OwnerType.Shared:e.telemetry.OwnerType.Unknown},n.constructInterpretRequest=function(e,n,i,o,a,u){var l={Version:s,Utterance:e,Scope:i,AdditionalODataFilter:o,Spans:u};if(n&&(l.Options=n,a&&r.hasFlag(l.Options,t.contracts.InterpretRequestOptions.Data))){var c=a.result;if(c&&!c.isEmpty(!1)&&!r.hasFlag(c.source.Warnings,t.contracts.InterpretWarnings.DataRetrievalFailed)){var p=c.source.Command,d=p.VisualConfigurations;l.LastQuery={Query:p.Query,Binding:_.isEmpty(d)?null:d[0].DataShapeBinding}}}return l},n.createInterpretRequestScope=function(e,t){return{DbMonikers:_(e).filter((function(e){return e&&o.getIsQnaSupported(e,t)&&!_.isEmpty(e.vsName)&&!_.isEmpty(e.dbName)})).map((function(e){return{VirtualServerName:e.vsName,DatabaseName:e.dbName}})).value()}},n})(),c=(function(){function e(e){this.cache={},this.expirationInMilliseconds=e}return e.prototype.getPromise=function(t){var n=e.getCacheKey(t),i=this.cache[n];return i&&i.expiration<Date.now()&&(delete this.cache[n],i=void 0),i},e.prototype.setPromise=function(t,n){n.expiration=Date.now()+this.expirationInMilliseconds,this.cache[e.getCacheKey(t)]=n},e.prototype.clearPromise=function(t){delete this.cache[e.getCacheKey(t)]},e.getCacheKey=function(e){return _(e.DbMonikers).sortBy((function(e){return e.VirtualServerName})).sortBy((function(e){return e.DatabaseName})).map((function(e){return e.DatabaseName+":"+e.VirtualServerName})).value().join("::")},e})(),p=(function(){function e(e,t){this.cache={},this.expirationInMilliseconds=e,this.timeoutService=t}return e.prototype.getInterpretResponse=function(t){if(!e.shouldRequestUseCache(t))return null;var n=e.getCacheKey(t),i=this.cache[n];if(i){if(!(i.expiration<Date.now()))return i.response;delete this.cache[n]}return null},e.prototype.setInterpretResponse=function(t,n){if(e.shouldRequestUseCache(t)&&e.shouldResponseUseCache(t,n)){var i=e.getCacheKey(t);this.cache[i]={response:n,expiration:Date.now()+this.expirationInMilliseconds},this.removeExpiredEntriesAfterTimeout()}},e.prototype.removeExpiredEntriesAfterTimeout=function(){var e=this;this.removeExpiredEntriesPromise||(this.removeExpiredEntriesPromise=this.timeoutService((function(){e.removeExpiredEntriesPromise=null;var t=Date.now(),n=!1;for(var i in e.cache){var r=e.cache[i];r.expiration<t?delete e.cache[i]:n=!0}n&&e.removeExpiredEntriesAfterTimeout();
}),this.expirationInMilliseconds))},e.shouldRequestUseCache=function(e){return!(!_.isEmpty(e.AdditionalODataFilter)||!_.isEmpty(e.Spans))},e.shouldResponseUseCache=function(e,n){return(!r.hasFlag(e.Options,t.contracts.InterpretRequestOptions.Data)||!_.any(n.results,(function(e){return r.hasFlag(e.warnings,t.contracts.InterpretWarnings.DataRetrievalFailed)||r.hasFlag(e.warnings,t.contracts.InterpretWarnings.DataRetrievalSkipped)})))&&!_.any(n.results,(function(e){return r.hasFlag(e.warnings,t.contracts.InterpretWarnings.LinguisticSchemaIsStillLoading)}))},e.getCacheKey=function(e){return[e.Utterance||"",e.Options?e.Options.toString(10):"-",e.DesiredInterpretationsCount?e.DesiredInterpretationsCount.toString(10):"-",e.Scope?JSON.stringify(e.Scope.DbMonikers):"-",e.Version?e.Version.toString(10):"-"].join("::")},e})()})(n=t.services||(t.services={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){function i(e,t,n,i,r,o){return new a(e,t,n,i,r,o)}n.createQnaInputInterpreterService=i;var r=3e3,o=4,s=1,a=(function(){function n(e,t,n,i,o,s){this.interpretService=e,this.interpretUsageListener=t,this.promiseFactory=n,this.outstandingInterpretRequests=[],this.contentProviders=i.getBuiltInContentProviders(),this.answeredQuestionEventLogger=o.createAnsweredQuestionEventLogger(r),this.diagnosticsEnabled=s.featureSwitches.diagnostics}return n.prototype.sendInterpret=function(e,n,i,r){var o=this;void 0===r&&(r=!1);var a=null,u=n.additionalODataFilterGetter();u&&(a=u());var l=this.answeredQuestionEventLogger.startAnsweredQuestionEvent(),c={},p=this.promiseFactory.defer();this.outstandingInterpretRequests.push(p),this.enforceMaxConcurrentRequests();var d;if(!e||e.trim().length<s){var h=this.promiseFactory.defer();this.interpretService.probe(n.models()).then((function(){return h.reject()}),(function(){return h.reject()})),d=h.promise}else{var v=t.contracts.InterpretRequestOptions.QueryMetadata|t.contracts.InterpretRequestOptions.VisualConfiguration|t.contracts.InterpretRequestOptions.SupportPodQueries|t.contracts.InterpretRequestOptions.TermBindings;this.diagnosticsEnabled&&(v|=t.contracts.InterpretRequestOptions.Diagnostics),d=this.interpretService.interpret(e,v,n.models(),a,c,p.promise,null,i),d.finally((function(){return l.resolve(c)}))}d.then((function(i){if(!o.shouldIgnoreResponse(i,n,p,e)){o.handleNewInterpretResponse(i,n,p);var s=n.interpretListener();if(s)if(!i||i.isEmpty(!0)||i.result.isEmpty(!0))s.onInterpretError(i?i.utterance:null,o.hasOutstandingRequests());else{var u=t.util.InterpretResultUtility.parseInterpret(i.result);u?s.onInterpretSuccess(i,u,a,r):s.onInterpretError(i?i.utterance:null,o.hasOutstandingRequests())}n.usageReportingEnabled()&&o.interpretUsageListener.onInterpretSuccess(i,o.getModelContentProviderType(i,n))}}),(function(){if(!o.shouldIgnoreResponse(null,n,p,e)){o.updateStateGivenResponse(null,n,p);var t=n.interpretListener();t&&t.onInterpretError(e,o.hasOutstandingRequests())}})),n.usageReportingEnabled()&&this.interpretUsageListener.onInterpretIssued()},n.prototype.enforceMaxConcurrentRequests=function(){if(this.outstandingInterpretRequests.length>o)for(var e=this.outstandingInterpretRequests.splice(0,this.outstandingInterpretRequests.length-o),t=0,n=e;t<n.length;t++){var i=n[t];i.resolve({})}},n.prototype.handleNewInterpretResponse=function(t,n,i){this.updateStateGivenResponse(t,n,i),n.stateMachine.enqueueTransition(e.explore.infonav.controllers.qna.QnaInputTransitionId.ResultReady)},n.prototype.shouldIgnoreResponse=function(e,t,n,i){if(!_.contains(this.outstandingInterpretRequests,n))return!0;if(!e&&""===i)return!0;var r=t.userInput(),o=i;e&&e.result&&e.result.completedUtterance&&!_.isEmpty(e.result.completedUtterance.Text)&&(o=e.result.completedUtterance.Text);var s=Math.min(r.length,o.length);return r.substr(0,s)!==o.substr(0,s)},n.prototype.updateStateGivenResponse=function(e,t,n){this.updateOutstandingRequestsGivenCompletedRequest(n),t.interpretResponse=this.interpretResponse=e,t.showLoadingSpinner=this.hasOutstandingRequests(),t.showQnaFeedback(t.usageReportingEnabled)},n.prototype.hasOutstandingRequests=function(){return!_.isEmpty(this.outstandingInterpretRequests)},n.prototype.updateOutstandingRequestsGivenCompletedRequest=function(e){var t;t=e?_.findIndex(this.outstandingInterpretRequests,(function(t){return t===e})):this.outstandingInterpretRequests.length;for(var n=0;n<t;n++)this.outstandingInterpretRequests[n].resolve({});this.outstandingInterpretRequests.splice(0,t+1)},n.prototype.getModelContentProviderType=function(t,n){if(t){var i=t.result;if(i){var r=_.find(n.models(),(function(e){return e.vsName===i.virtualServerName&&e.dbName===i.databaseName}));if(r&&null!=r.contentProviderId)return e.common.findContentProviderName(this.contentProviders,r.contentProviderId)}}return"Unknown"},n})()})(n=t.services||(t.services={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(t){function n(e,t,n){return new o(e,t,n)}var i=e.common.helpers.ModelConverterHelper;!(function(e){e[e.Generated=0]="Generated",e[e.Tile=1]="Tile",e[e.FeaturedQuestion=2]="FeaturedQuestion"})(t.SampleQuestionSource||(t.SampleQuestionSource={}));var r=t.SampleQuestionSource;t.createSampleQuestionsService=n;var o=(function(){function e(e,t,n){this.interpretService=e,this.featureSwitchService=t,this.promiseFactory=n,this.tileUtterancesByModel={}}return e.prototype.getSampleQuestions=function(t){if(_.isEmpty(t))return[];for(var n=[],r=this.featureSwitchService.featureSwitches,o=_(t).filter((function(e){return i.getIsQnaSupported(e,r)})).sortBy((function(e){return e.id})).value(),s=e.createFeaturedQuestions(o),a=0,u=o;a<u.length;a++){var l=u[a],c=l.id;c in this.tileUtterancesByModel&&Array.prototype.push.apply(s,this.tileUtterancesByModel[c])}return s=_.uniq(s,(function(e){return e.question.trim().toUpperCase()})),n.push(this.promiseFactory.resolve(s)),n.push(this.interpretService.probe(o).then((function(t){return e.createSampleQuestionsFromResponse(t,o)}),(function(){return[]}))),n},e.prototype.addTileUtterance=function(e,t){this.tileUtterancesByModel[t]||(this.tileUtterancesByModel[t]=[]),this.tileUtterancesByModel[t].push({question:e,source:r.Tile,modelId:t})},e.prototype.deleteTileUtterance=function(t,n){if(n in this.tileUtterancesByModel){var i={question:t,source:r.Tile,modelId:n},o=_.findIndex(this.tileUtterancesByModel[n],(function(t){return e.areEqual(i,t)}));o!==-1&&this.tileUtterancesByModel[n].splice(o,1)}},e.createFeaturedQuestions=function(e){return _(e).map((function(e){return _(e.featuredQuestions).sortBy((function(e){return e.order})).map((function(t){return{question:t.utterance,source:r.FeaturedQuestion,modelId:e.id}})).value()})).flatten().value()},e.createSampleQuestionsFromResponse=function(t,n){if(!t||t.isEmpty(!0))return[];var i=_(t.results).map((function(t){return t.alternateCompletions.map((function(i){if(i.Items.length>1)return null;var o=e.findModelId(t.databaseName,t.virtualServerName,n);return o===-1?null:{question:i.Items[0].Text,source:r.Generated,modelId:o}}))})).flatten().filter((function(e){return!!e})).uniq((function(e){return e.question.trim().toUpperCase()})).value();return i||[]},e.findModelId=function(e,t,n){var i=_.find(n,(function(n){return n.dbName===e&&n.vsName===t}));return i?i.id:-1},e.areEqual=function(e,t){return e===t||jsCommon.StringExtensions.equalIgnoreCase(e.question,t.question)&&e.source===t.source&&e.modelId===t.modelId},e})()})(n=t.services||(t.services={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){return new i(e,t)}e.createTermConverterService=t;var n=(function(){function e(e,t,n){this.span=t,this.bindingElementFactory=n,this.menuOpened=!1,this.currentReplacementIndex=0,this.hasBuiltReplacements=!1,this.span=t,this.text=e.substr(t.StartIndex,t.Length),jsCommon.StringExtensions.isWhitespace(this.text)||(this.text=this.text.replace(/ /g,""));var i=[];t.Binding&&i.push(t.Binding),t.AlternateBindings&&(i=i.concat(t.AlternateBindings)),t.SuggestedReplacements&&(i=i.concat(t.SuggestedReplacements)),t.PhraseCompletions&&(i=i.concat(t.PhraseCompletions)),this.bindings=i}return Object.defineProperty(e.prototype,"element",{get:function(){return this.elem||(this.elem=this.buildElement()),this.elem},enumerable:!0,configurable:!0}),e.prototype.reuseElement=function(e){return!!(e.element.parentElement&&(this.text.indexOf(e.text)>-1||e.text.indexOf(this.text)>-1)&&e.hasBindings&&this.hasBindings)&&(this.elem=this.buildElement(e),!0)},Object.defineProperty(e.prototype,"hasElement",{get:function(){return!!this.elem},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasBindings",{get:function(){return this.bindings.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentReplacement",{get:function(){return this.replacements[this.currentReplacementIndex]},enumerable:!0,configurable:!0}),e.prototype.chooseCurrentReplacement=function(){this.chooseReplacement(this.currentReplacement)},e.prototype.chooseReplacement=function(e){this.header.innerText=e.text,this.manager&&this.manager.selectReplacement(this,e.text),this.closeMenu()},e.prototype.selectNextReplacement=function(){var e=this.currentReplacementIndex;this.currentReplacement.element.className="",e=Math.min(e+1,this.replacements.length-1),this.currentReplacementIndex=e,this.currentReplacement.element.className="selected";var t=this.replacementElement.offsetHeight,n=this.replacementElement.scrollTop,i=this.currentReplacement.element.offsetHeight,r=this.currentReplacement.element.offsetTop;r+i>n+t&&(this.replacementElement.scrollTop=r-t+i)},e.prototype.selectPreviousReplacement=function(){var e=this.currentReplacementIndex;return this.currentReplacement.element.className="",e--,e>=0?(this.currentReplacementIndex=e,this.currentReplacement.element.className="selected",this.currentReplacement.element.offsetTop<this.replacementElement.scrollTop&&(this.replacementElement.scrollTop=this.currentReplacement.element.offsetTop),!0):(e=0,!1)},e.prototype.closeMenu=function(){this.menuOpened&&this.replacementElement&&(this.currentReplacement.element.className="",this.replacementElement.style.display="none"),this.menuOpened=!1,this.header.className="term-main",this.manager&&this.manager.menuClosed()},e.prototype.openMenu=function(){return this.hasBindings&&(this.menuOpened||(this.hasBuiltReplacements||this.buildReplacements(),this.replacementElement.style.display="block",this.replacementElement.offsetWidth+this.elem.offsetLeft>this.manager.utteranceElement.parentElement.offsetWidth?this.replacementElement.style.left=this.elem.offsetLeft+this.elem.offsetWidth-this.replacementElement.offsetWidth+"px":this.replacementElement.style.left="",this.currentReplacementIndex=0,this.replacementElement.scrollTop=0,this.currentReplacement.element&&(this.currentReplacement.element.className="selected")),this.menuOpened=!0,this.header.className="term-main selected"),this.menuOpened},e.prototype.buildElement=function(e){var t,n,i=this;e&&e.hasElement?(t=e.element,this.replacementElement=e.replacementElement,e.menuOpened&&this.buildReplacements()):t=document.createElement("span"),n=this.header=document.createElement("span"),n.className="term-main";var r=this.span;n.appendChild(document.createTextNode(this.text.replace(/ /g,"")));var o=""===this.text.trim(),s=["term"];return r.Unrecognized||s.push("recognized"),this.hasBindings?(s.push("bindings"),o||s.push("replacements")):o&&s.push("space"),t.className=s.join(" "),e&&e.header&&e.header.parentElement===t?t.replaceChild(n,e.header):t.appendChild(n),this.hasBindings&&n.addEventListener("click",(function(e){i.menuOpened?i.closeMenu():i.manager&&i.manager.selectTerm(i)})),t},e.prototype.buildReplacements=function(){var e=this;if(this.bindingElementFactory){var t=!this.replacementElement;t?this.replacementElement=document.createElement("ul"):this.replacementElement.innerHTML="",this.replacements=this.bindings.map((function(t,n){var i=e.bindingElementFactory.build(t);return i.element.addEventListener("mousedown",(function(t){e.currentReplacementIndex=n,e.chooseCurrentReplacement(),t.preventDefault()})),e.replacementElement.appendChild(i.element),i})),t&&this.elem.appendChild(this.replacementElement)}this.hasBuiltReplacements=!0},e})();e.Term=n;var i=(function(){function e(e,t){this.bindingElementFactory=e,this.rtl=t}return e.prototype.convertIntermediateTerms=function(e,t,i,r){for(var o=i;o<r;)if(/\s/.test(t.charAt(o)))e.push(new n(t,{StartIndex:o,Length:1})),o++;else{var s=t.indexOf(" ",o);s=s>-1?Math.min(s,r):r,e.push(new n(t,{StartIndex:o,Length:s-o})),o=s}},e.prototype.isTextRTL=function(t){return e.rtlDirCheck.test(t)},e.prototype.swapTerms=function(e,t,n){var i=e.splice(t,n-t),r=i.reverse();e.splice.apply(e,[t,0].concat(r))},e.prototype.reorderLtrRuns=function(e){for(var t=null,n=0;n<e.length;n++){var i=e[n].text,r=this.isTextRTL(i);r?null!==t&&(this.swapTerms(e,t,n),t=null):null===t&&(t=n)}return null!==t&&this.swapTerms(e,t,e.length-1),e},e.prototype.convert=function(e){var t,i=e.utterance.replace(/\u00A0/g," "),r=e.result,o=[];if(r){var s=r.spans,a=0;if(!_.isEmpty(s)){for(var u=0,l=s;u<l.length;u++){var c=l[u];a<c.StartIndex&&(this.convertIntermediateTerms(o,i,a,c.StartIndex),a=c.StartIndex);var p=new n(i,c,this.bindingElementFactory);o.push(p),a+=c.Length,i=i.substring(0,c.StartIndex)+p.text+i.substring(a)}t=_.last(o).hasBindings}a<i.length&&(this.convertIntermediateTerms(o,i,a,i.length),t=!1)}return this.rtl.isRtlLayout&&(o=this.reorderLtrRuns(o)),{utterance:i,hasCompletions:t,terms:o}},e.ltrCharacters="A-Za-z--------",e.rtlCharacters="---",e.rtlDirCheck=new RegExp("^[^"+e.ltrCharacters+"]*["+e.rtlCharacters+"]"),e})()})(t=e.services||(e.services={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){return new n(e,t)}e.createStateMachine=t;var n=(function(){function e(e,t){this.stateMachineDefinition=e,this.current=t,this.isBusy=!1,this.transitionQueue=[],this.transitionActionHandlers={}}return e.prototype.addTransitionActionHandler=function(e,t){this.transitionActionHandlers[e.toString()]=t},e.prototype.enqueueTransition=function(e){this.transitionQueue.push(e),this.performTransitionInternal()},e.prototype.performTransitionInternal=function(){if(!this.isBusy){for(this.isBusy=!0;this.transitionQueue.length>0;){var e=this.transitionQueue.shift(),t=this.stateMachineDefinition.getTransition(this.current,e);if(void 0!==t){this.current=t.toState;for(var n=t.actions,i=0,r=n;i<r.length;i++){var o=r[i],s=this.transitionActionHandlers[o.toString()];s&&s()}}}this.isBusy=!1}},e})()})(t=e.stateMachine||(e.stateMachine={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function t(){this.states={}}return t.prototype.getTransition=function(e,t){return this.states[e.toString()][t.toString()]},t.prototype.containsState=function(e){return e.toString()in this.states},t.prototype.addTransition=function(t,n,i,r){var o=this.states[t.toString()];void 0===o&&(this.states[t.toString()]=o={}),o[n.toString()]=new e.Transition(r,i),this.containsState(i)||(this.states[i.toString()]={})},t})();e.StateMachineDefinition=t})(t=e.stateMachine||(e.stateMachine={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){this._actions=e,this._toState=t}return Object.defineProperty(e.prototype,"toState",{get:function(){return this._toState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actions",{get:function(){return this._actions},enumerable:!0,configurable:!0}),e})();e.Transition=t})(t=e.stateMachine||(e.stateMachine={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){function t(t){return new r(new e.InterpretUsageQueue(t))}var n=jsCommon.TimerPromiseFactory;e.createInterpretUsageListener=t;var i=5e3,r=(function(){function e(e,t){this.interpretUsageQueue=e,this.timerFactory=t||n.instance}return e.prototype.setFeedbackForLastUtterance=function(e){this.sendPendingResponse(),this.interpretUsageQueue.setFeedbackForLastUtterance(e),this.interpretUsageQueue.flushPending()},e.prototype.onInterpretIssued=function(){var e=this;this.userCompletionPromise&&this.userCompletionPromise.reject(),this.userCompletionPromise=this.timerFactory.create(i),this.userCompletionPromise.done((function(){return e.sendPendingResponse()}))},e.prototype.onInterpretSuccess=function(e,t){return this.userCompletionPromise?(this.pendingInterpretResponse=e,void(this.pendingContentProviderType=t)):void this.registerResponse(e,t)},e.prototype.sendPendingResponse=function(){this.userCompletionPromise&&(this.userCompletionPromise.reject(),this.userCompletionPromise=null);var e=this.pendingInterpretResponse;e&&this.registerResponse(e,this.pendingContentProviderType)},e.prototype.registerResponse=function(e,t,n,i){e.isUtteranceLinguisticallyEquivalent(this.lastInterpretResponse)||(this.interpretUsageQueue.register(e,t,n,i),this.lastInterpretResponse=e)},e})();e.InterpretUsageListener=r})(t=e.usage||(e.usage={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){var t=jsCommon.TimerPromiseFactory,n=100,i=12e4,r=(function(){function r(n,i,r){this.pendingInterpretations=[],this.usageService=n,this.usageUpdateUtteranceFactory=i||new e.UsageUpdateUtteranceFactory,this.timerFactory=r||t.instance}return r.prototype.register=function(t,r,o,s,a){var u=this;this.mostRecentInterpretation={interpretation:t,flags:o||e.UtteranceFlags.None,feedback:s||e.UtteranceFeedback.None,timeStamp:a||new Date,contentProviderType:r},this.pendingInterpretations.push(this.mostRecentInterpretation),this.pendingInterpretations.length>n?this.flushPending():this.sendPendingUsagesPromise||(this.sendPendingUsagesPromise=this.timerFactory.create(i),this.sendPendingUsagesPromise.done((function(){return u.sendAllUsages()})))},r.prototype.flushPending=function(){this.sendPendingUsagesPromise&&this.sendPendingUsagesPromise.reject(),this.sendAllUsages()},r.prototype.sendAllUsages=function(){var e=[];this.sendPendingUsagesPromise=null;for(var t=0,n=this.pendingInterpretations.length;t<n;++t){var i=this.pendingInterpretations[t];e=e.concat(this.usageUpdateUtteranceFactory.create(i.interpretation,i.flags,i.feedback,i.timeStamp,i.contentProviderType))}this.pendingInterpretations=[],e.length>0&&this.usageService.update(e)},r.prototype.setFeedbackForLastUtterance=function(t){this.updateMostRecentUtterance((function(n){n.feedback=t,t===e.UtteranceFeedback.Bad&&(n.flags|=e.UtteranceFlags.User)}))},r.prototype.updateMostRecentUtterance=function(e){var t=this.pendingInterpretations.length;t>0?e(this.pendingInterpretations[t-1]):this.mostRecentInterpretation&&(e(this.mostRecentInterpretation),this.pendingInterpretations.push(this.mostRecentInterpretation))},r})();e.InterpretUsageQueue=r})(t=e.usage||(e.usage={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){!(function(e){e[e.None=0]="None",e[e.ResultIsEmpty=1]="ResultIsEmpty",e[e.User=2]="User"})(e.UtteranceFlags||(e.UtteranceFlags={}));e.UtteranceFlags;!(function(e){e[e.None=0]="None",e[e.Bad=1]="Bad",e[e.Medium=2]="Medium",e[e.Good=3]="Good"})(e.UtteranceFeedback||(e.UtteranceFeedback={}));e.UtteranceFeedback})(t=e.usage||(e.usage={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(t){var n=jsCommon.StringExtensions,i=(function(){function i(){}return i.prototype.create=function(e,t,n,r,o){for(var s=[],a=e.results,u=0,l=a.length;u<l;++u)s.push(i.createUsageData(a[u],t,n,u,r,o));return s},i.createUsageData=function(e,t,n,r,o,s){var a=e.source,u={Text:e.utterance,ResultRank:r,Flags:t|i.determineFlags(e),DatabaseName:a.DatabaseName,VirtualServerName:a.VirtualServerName,ClientDateTime:jsCommon.DateExtensions.serializeDate(o),UserFeedback:n,ContentProviderType:s},l=e.completedUtterance;if(l){u.Text=l.Text;var c=e.unrecognizedTerms;c&&c.length>0&&(u.UnrecognizedTerms=i.convertUnrecognizedTerms(c,l))}return a.Score&&(u.Score=a.Score),u},i.determineFlags=function(e){var n=t.UtteranceFlags.None;return e.completedUtterance||(n|=t.UtteranceFlags.ResultIsEmpty),n},i.convertUnrecognizedTerms=function(t,i){for(var r=[],o=i.Terms,s=0,a=t.length;s<a;++s){var u=t[s],l=o[u].StartCharIndex,c=e.models.InterpretResult.getTermText(i,u);r.push({StartIndex:l,Length:n.trimTrailingWhitespace(c).length})}return r},i})();t.UsageUpdateUtteranceFactory=i})(t=e.usage||(e.usage={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){e.openTileAction="/openQnA",e.openTileEventName="openQnaTile",e.pinSelectedVisual="pinSelectedVisual",e.showQnaStart="showQnaStart",e.ScopedInstanceProviderName="infonav",e.DefaultVisualMaxWidth=1024,e.DefaultVisualMaxHeight=768})(t=e.constants||(e.constants={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(n){var i;!(function(n){var i,r=(e.explore.contracts,e.data.services.SemanticQuerySerializer),o=e.data.SQExpr;!(function(n){function i(n,i,o){var s=[],a=o&&o.Filters&&0!==o.Filters.length?o.Filters:null;a&&a.length!==i.length&&(a=null);for(var u=0,l=i.length;u<l;u++){var c=i[u],p=a&&a[u],d=p&&p.expression&&r.deserializeExpr(p.expression);s.push({name:t.FilterUtils.getNextFilterName(s),filter:new e.data.SemanticFilter(n,[c]),restatement:p?p.Restatement:null,expression:d,howCreated:0,type:p?p.type:null})}return s}function s(t,n){var o=_.filter(t.From,(function(t){return t.Type!==e.data.EntitySourceType.Pod})),s={Version:t.Version,From:o,Where:t.Where},a={RemovedIndexes:[]},u=r.deserializeFilter(s,a);if(n&&!_.isEmpty(a.RemovedIndexes)&&(n.Filters=_.filter(n.Filters,(function(e,t){return!_.contains(a.RemovedIndexes,t)}))),u)return i(u.from(),u.where(),n)}function a(e,t){_.isEmpty(e.filters)||(t.filters=c(t.filters,e.filters,"explore"),e.filters=[])}function u(e,t,n,i){var r=i;if(!_.isEmpty(n)){t&&!_.isEmpty(t.parameters)&&_.remove(e.filters,(function(e){return _.any(t.parameters,(function(t){return t.boundFilter===e.name}))}));var s=p(n);_.remove(e.filters,(function(e){return _.any(d(e),(function(e){return _.any(s,(function(t){return o.equals(e,t)}))}))})),e.filters=c(e.filters,n,"param"),r=!0}if(r)for(var a=0,u=e.visualContainers;a<u.length;a++){var l=u[a];l.cachedData=null}}function l(e,t){e=e||[],t=t||[];for(var n={},i=[],r=0,o=t;r<o.length;r++){var s=o[r];n[s.name]=s}for(var a=0,u=e;a<u.length;a++){var s=u[a],l=n[s.name];l&&_.isEqual(l,s)||i.push(s)}return i}function c(e,t,n){for(var i={},r=0,o=e;r<o.length;r++){var s=o[r];i[s.name]=!0}for(var a=0,u=t;a<u.length;a++){var s=u[a];s.name=n+"_"+s.name,i[s.name]||(i[s.name]=!0)}return e.concat(t)}function p(e){return _.flatten(_.map(e,(function(e){return d(e)})))}function d(e){var t=[];if(e.expression&&t.push(e.expression),e.filter)for(var n=0,i=e.filter.conditions();n<i.length;n++){var r=i[n],o=new h;r.accept(o),t=t.concat(o.fields)}return t}n.deriveFromSQFilters=i,n.extractParameterFilters=s,n.mergeExplorationSectionFilters=a,n.applySectionParameterFilters=u,n.extractParameterFiltersFromSection=l;var h=(function(e){function t(){e.apply(this,arguments),this.fields=[]}return __extends(t,e),t.prototype.visitColumnRef=function(e){this.fields.push(e)},t.prototype.visitHierarchyLevel=function(e){this.fields.push(e)},t.prototype.visitMeasureRef=function(e){this.fields.push(e)},t.prototype.visitEntity=function(e){this.fields.push(e)},t.prototype.visitAggr=function(e){},t})(e.data.DefaultSQExprVisitorWithTraversal)})(i=n.FilterUtil||(n.FilterUtil={}))})(i=n.util||(n.util={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){if(!e)return null;var t=e.utterance;return e.completedUtterance&&(t=e.completedUtterance.Text),n(t,e)}function n(e,t){var n=t.source,i=n.Command;if(!i)return null;var r=i.Binding,o=i.Data,s=null,a=null,u=null;if(o){if(!r)return null;if(a=JSON.parse(r),u=JSON.parse(o),!u)return null;s={data:{descriptor:a,dsr:u}}}return{utterance:e,interpretResult:t,restatement:n.Restatement,queryDefn:i.Query,queryDescriptor:a,queryMetadata:i.QueryMetadata,configs:i.VisualConfigurations,dataViewSource:s,virtualServerName:n.VirtualServerName,databaseName:n.DatabaseName}}e.parseInterpret=t})(t=e.InterpretResultUtility||(e.InterpretResultUtility={}))})(t=e.util||(e.util={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(t){var n,i=e.visuals.plugins,r=e.explore.QueryProjectionBuilderCoreUtils.QueryProjectionBuilder;!(function(e){function n(e,n,i){var r=t.visualUtil.getPlugin(e);if(null!=r){var v;switch(e){case VisualizationType.Card:case VisualizationType.MultiRowCard:case VisualizationType.Table:v=new o(r,n,i);break;case VisualizationType.Matrix:v=new h(r,n,i);break;case VisualizationType.DonutChart:case VisualizationType.FunnelChart:case VisualizationType.LineChart:case VisualizationType.StackedArea:case VisualizationType.AreaChart:case VisualizationType.PieChart:case VisualizationType.WaterfallChart:v=new s(r,n,i);break;case VisualizationType.ClusteredBarChart:case VisualizationType.ClusteredColumnChart:case VisualizationType.HundredPercentStackedBarChart:case VisualizationType.HundredPercentStackedColumnChart:case VisualizationType.StackedBarChart:case VisualizationType.StackedColumnChart:v=new a(r,n,i);break;case VisualizationType.Map:case VisualizationType.HeatMap:v=new c(r,n,i);break;case VisualizationType.ColorFilledMap:v=new p(r,n,i);break;case VisualizationType.Treemap:v=new d(r,n,i);break;case VisualizationType.ScatterChart:v=new l(r,n,i);break;case VisualizationType.Gauge:v=new u(r,n,i);break;default:return}return v}}e.createProjectionBuilder=n})(n=t.QueryProjectionBuilderUtils||(t.QueryProjectionBuilderUtils={}));var o=(function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 1===e.length&&e[0].name===r.ValuesRole},t.prototype.build=function(e){var t={};if(1===this.projectionsInfo.length)return r.addValuesRole(t,this.projectionsInfo[0]),t;for(var n=e.Primary.Groupings,i=n[0].Projections,o=0,s=i.length;o<s;o++)r.addValuesRole(t,this.projectionsInfo[i[o]]);return t},t})(r),s=(function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return this.plugin.name===i.funnel.name?4===e.length&&e[0].name===r.CategoryRole&&e[1].name===r.YRole&&e[2].name===r.GradientRole&&e[3].name===r.TooltipRole:4===e.length&&e[0].name===r.CategoryRole&&e[1].name===r.SeriesRole&&e[2].name===r.YRole&&e[3].name===r.TooltipRole},t.prototype.build=function(e){var t=e.Primary.Groupings,n={};if(this.processPrimaryGroup(t[0],n),e.Secondary){var i=e.Secondary.Groupings;1===i.length&&this.processSecondaryGroup(i[0],n)}return n},t.prototype.processPrimaryGroup=function(e,t){for(var n=e.Projections,i=0,o=n.length;i<o;i++){var s=n[i],a=this.projectionsInfo[s];0===a.metadata.kind?r.addCategoryRole(t,a):1===a.metadata.kind&&r.addYRole(t,a)}},t.prototype.processSecondaryGroup=function(e,t){for(var n=e.Projections,i=0,o=n.length;i<o;i++){var s=n[i];r.addSeriesRole(t,this.projectionsInfo[s])}},t})(r),a=(function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 5===e.length&&e[0].name===r.CategoryRole&&e[1].name===r.SeriesRole&&e[2].name===r.YRole&&e[3].name===r.GradientRole&&e[4].name===r.TooltipRole},t})(s),u=(function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 5===e.length&&e[0].name===r.YRole&&e[1].name===r.MinValueRole&&e[2].name===r.MaxValueRole&&e[3].name===r.TargetValueRole&&e[4].name===r.TooltipRole},t.prototype.processPrimaryGroup=function(e,t){for(var n=e.Projections,i=0,o=0,s=n;o<s.length;o++){var a=s[o],u=this.projectionsInfo[a];if(1===u.metadata.kind){switch(i){case 0:r.addYRole(t,u);break;case 1:r.addTargetValueRole(t,u);break;case 2:r.addMaxValueRole(t,u);break;case 3:r.addMinValueRole(t,u);break;case 4:r.addTooltipRole(t,u)}i++}}},t})(s),l=(function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 8===e.length&&e[0].name===r.CategoryRole&&e[1].name===r.SeriesRole&&e[2].name===r.XRole&&e[3].name===r.YRole&&e[4].name===r.SizeRole&&e[5].name===r.GradientRole&&e[6].name===r.PlayRole&&e[7].name===r.TooltipRole},t.prototype.processPrimaryGroup=function(e,t){for(var n=e.Projections,i=0,o=0,s=n.length;o<s;o++){var a=n[o],u=this.projectionsInfo[a];if(0===u.metadata.kind)r.addCategoryRole(t,u);else if(1===u.metadata.kind){switch(i){case 0:r.addXRole(t,u);break;case 1:r.addYRole(t,u);break;case 2:r.addSizeRole(t,u);break;case 3:r.addGradientRole(t,u);break;case 4:r.addTooltipRole(t,u)}i++}}},t})(s),c=(function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 7===e.length&&e[0].name===r.CategoryRole&&e[1].name===r.SeriesRole&&e[2].name===r.YRole&&e[3].name===r.XRole&&e[4].name===r.SizeRole&&e[5].name===r.GradientRole&&e[6].name===r.TooltipRole},t.prototype.processPrimaryGroup=function(e,t){for(var n=e.Projections,i=0,o=0,s=n;o<s.length;o++){var a=s[o],u=this.projectionsInfo[a];if(0===u.metadata.kind)r.addCategoryRole(t,u);else if(1===u.metadata.kind){switch(i){case 0:r.addSizeRole(t,u);break;case 1:r.addXRole(t,u);break;case 2:r.addYRole(t,u);break;case 3:r.addGradientRole(t,u);break;case 4:r.addTooltipRole(t,u)}i++}}},t})(s),p=(function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 6===e.length&&e[0].name===r.CategoryRole&&e[1].name===r.SeriesRole&&e[2].name===r.YRole&&e[3].name===r.XRole&&e[4].name===r.SizeRole&&e[5].name===r.TooltipRole},t.prototype.processPrimaryGroup=function(e,t){for(var n=e.Projections,i=0,o=0,s=n;o<s.length;o++){var a=s[o],u=this.projectionsInfo[a];if(0===u.metadata.kind)r.addCategoryRole(t,u);else if(1===u.metadata.kind){switch(i){case 0:r.addSizeRole(t,u);break;case 1:r.addXRole(t,u);break;case 2:r.addYRole(t,u);break;case 3:r.addTooltipRole(t,u)}i++}}},t})(s),d=(function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 5===e.length&&e[0].name===r.GroupRole&&e[1].name===r.DetailsRole&&e[2].name===r.ValuesRole&&e[3].name===r.GradientRole&&e[4].name===r.TooltipRole},t.prototype.processPrimaryGroup=function(e,t){for(var n=e.Projections,i=0,o=n.length;i<o;i++){var s=n[i],a=this.projectionsInfo[s];0===a.metadata.kind?r.addGroupRole(t,a):1===a.metadata.kind&&r.addValuesRole(t,a)}},t.prototype.processSecondaryGroup=function(e,t){
for(var n=e.Projections,i=0,o=n.length;i<o;i++){var s=n[i];r.addDetailsRole(t,this.projectionsInfo[s])}},t})(s),h=(function(e){function t(t,n,i){e.call(this,t,n,i)}return __extends(t,e),t.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 3===e.length&&e[0].name===r.RowsRole&&e[1].name===r.ColumnsRole&&e[2].name===r.ValuesRole},t.prototype.build=function(e){var t=e.Primary.Groupings,n={};if(this.processPrimaryGroups(t,n),e.Secondary){var i=e.Secondary.Groupings;this.processSecondaryGroups(i,n)}return n},t.prototype.processPrimaryGroups=function(e,t){if(e)for(var n=0,i=e.length;n<i;n++)this.processPrimaryGroup(e[n],t)},t.prototype.processSecondaryGroups=function(e,t){if(e)for(var n=0,i=e.length;n<i;n++)this.processSecondaryGroup(e[n],t)},t.prototype.processPrimaryGroup=function(e,t){for(var n=e.Projections,i=0,o=n.length;i<o;i++){var s=(n[i],this.projectionsInfo[n[i]]);0===s.metadata.kind?r.addRowsRole(t,s):1===s.metadata.kind&&r.addValuesRole(t,s)}},t.prototype.processSecondaryGroup=function(e,t){for(var n=e.Projections,i=0,o=n.length;i<o;i++)r.addColumnsRole(t,this.projectionsInfo[n[i]])},t})(r)})(n=t.util||(t.util={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(t){function n(t,n){return!(t.Where&&t.Where.length>0&&!n.Filters)&&(t.Version&&t.Version>=e.data.SemanticQueryVersions.Version2)}t.canVisualizeQuery=n})(n=t.VersionUtil||(t.VersionUtil={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(n){var i;!(function(n){var i;!(function(i){function r(i,r,o,s,a,u){var l=n.FilterUtil.deriveFromSQFilters(i.from(),i.where(),r),c=[],p=i.where(c,new e.data.SQFrom),d={expr:[],visualType:s.plugin.name,schema:a,query:new t.contracts.VisualQuery(p,s.build(o))},h={config:u.create(d),filters:l,layouts:jsCommon.ArrayExtensions.extendWithId([{id:0,position:null}])};return h}i.create=r})(i=n.VisualContainerFactory||(n.VisualContainerFactory={}))})(i=n.util||(n.util={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(t){var n,i=jsCommon.Lazy,r=e.visuals.plugins;!(function(e){function t(e){var t=s.getValue();return t[e]}function n(e){var t=a.getValue();return t[e]}function o(e,t){for(var n=[],i={},r=0,o=t.length;r<o;r++){var s=t[r];i[s.vsName+s.dbName]=s}for(var a=e.configs,u=0,l=a.length;u<l;u++){var c=a[u],p=c.Query||e.queryDefn,d=c.DataShapeBinding||e.dataShapeBinding,h=c.QueryMetadata||e.queryMetadata,s=i[e.virtualServerName+e.databaseName];null!=s&&n.push({config:{Query:p,QueryMetadata:h,DataShapeBinding:d,VisualizationType:c.VisualizationType,VisualElements:c.VisualElements},model:s,dataViewSource:e.dataViewSource})}return n}var s=new i(function(){var e={};return e[VisualizationType.Card]=r.card,e[VisualizationType.ComboChart]=r.lineClusteredColumnComboChart,e[VisualizationType.MultiRowCard]=r.multiRowCard,e[VisualizationType.ClusteredBarChart]=r.clusteredBarChart,e[VisualizationType.ClusteredColumnChart]=r.clusteredColumnChart,e[VisualizationType.DonutChart]=r.donutChart,e[VisualizationType.FunnelChart]=r.funnel,e[VisualizationType.Gauge]=r.gauge,e[VisualizationType.HeatMap]=r.heatMap,e[VisualizationType.HundredPercentStackedBarChart]=r.hundredPercentStackedBarChart,e[VisualizationType.HundredPercentStackedColumnChart]=r.hundredPercentStackedColumnChart,e[VisualizationType.LineChart]=r.lineChart,e[VisualizationType.Map]=r.map,e[VisualizationType.ColorFilledMap]=r.filledMap,e[VisualizationType.Matrix]=r.matrix,e[VisualizationType.PieChart]=r.pieChart,e[VisualizationType.ScatterChart]=r.scatterChart,e[VisualizationType.StackedBarChart]=r.barChart,e[VisualizationType.StackedColumnChart]=r.columnChart,e[VisualizationType.Table]=r.table,e[VisualizationType.Treemap]=r.treemap,e[VisualizationType.WaterfallChart]=r.waterfallChart,e[VisualizationType.StackedArea]=r.stackedAreaChart,e[VisualizationType.AreaChart]=r.areaChart,e}),a=new i(function(){var e={};return e[r.card.name]=VisualizationType.Card,e[r.lineClusteredColumnComboChart.name]=VisualizationType.ComboChart,e[r.multiRowCard.name]=VisualizationType.MultiRowCard,e[r.clusteredBarChart.name]=VisualizationType.ClusteredBarChart,e[r.clusteredColumnChart.name]=VisualizationType.ClusteredColumnChart,e[r.donutChart.name]=VisualizationType.DonutChart,e[r.funnel.name]=VisualizationType.FunnelChart,e[r.gauge.name]=VisualizationType.Gauge,e[r.heatMap.name]=VisualizationType.HeatMap,e[r.hundredPercentStackedBarChart.name]=VisualizationType.HundredPercentStackedBarChart,e[r.hundredPercentStackedColumnChart.name]=VisualizationType.HundredPercentStackedColumnChart,e[r.lineChart.name]=VisualizationType.LineChart,e[r.map.name]=VisualizationType.Map,e[r.filledMap.name]=VisualizationType.ColorFilledMap,e[r.matrix.name]=VisualizationType.Matrix,e[r.pieChart.name]=VisualizationType.PieChart,e[r.scatterChart.name]=VisualizationType.ScatterChart,e[r.barChart.name]=VisualizationType.StackedBarChart,e[r.columnChart.name]=VisualizationType.StackedColumnChart,e[r.table.name]=VisualizationType.Table,e[r.treemap.name]=VisualizationType.Treemap,e[r.waterfallChart.name]=VisualizationType.WaterfallChart,e[r.stackedAreaChart.name]=VisualizationType.StackedArea,e[r.areaChart.name]=VisualizationType.AreaChart,e});e.getPlugin=t,e.getType=n,e.interpretResultToConfig=o})(n=t.visualUtil||(t.visualUtil={}))})(n=t.util||(t.util={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){var i,r=(e.explore.viewModels,e.explore.infonav.util.QueryProjectionBuilderUtils),o=e.data.services.SemanticQuerySerializer,s=e.explore.QueryProjectionBuilderCoreUtils;!(function(e){function n(e){return{taskPane:u(),visualizationPane:l(e)}}function i(e,n,i,s){return n.get(i).then((function(n){for(var i=[],a=0,u=e.length;a<u;a++){var l=e[a],c=l.config,p=o.deserializeQuery(c.Query),d=r.createProjectionBuilder(c.VisualizationType,p,n),h=t.util.VisualContainerFactory.create(p,c.QueryMetadata,c.DataShapeBinding,d,n,s);h.config.singleVisual.objects=l.dataViewObjectDefinitions||h.config.singleVisual.objects,i.push({visualContainer:h,model:l.model,dataViewSource:l.dataViewSource})}return i}))}function a(e,n,i,r,a){return n.get(i).then((function(n){var i=o.deserializeQuery(e.query),u=s.createProjectionBuilderFromDataRoles(e.visual,e.dataRoles,i,n),l=t.util.VisualContainerFactory.create(i,e.metadata,e.binding,u,n,a);return l.config.singleVisual.objects=e.dataViewObjectDefinitions,{visualContainer:l,model:r}}))}function u(){return{isPaneExpanded:!1}}function l(e){return{sections:[],activeSection:0,pagePaneSections:[],activePageSection:0,isPaneExpanded:!1,visualPluginFilter:function(t){var n=e.tryGetFilterPropertyIdentifier(t.capabilities);return!n}}}e.createInfoNavContainer=n,e.createVisualDataFromInterpretResult=i,e.createVisualDataFromTileData=a,e.createTaskPane=u,e.createVisualizationPane=l})(i=n.ViewModelFactory||(n.ViewModelFactory={}))})(n=t.viewModels||(t.viewModels={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={})),angular.module("powerbi.infonav").run(["$templateCache",function(e){e.put("views/infoNavCanvas.html",'<div class="infoNavCanvas"><section class="exploration" ng-if="viewModel.exploreCanvas" ng-style="explorationStyle"><explore-canvas view-model="viewModel.exploreCanvas"></explore-canvas></section></div>'),e.put("views/infoNavContainer.html",'<section class="explorationContainer infoNavContainer"><exploration-host class="explorationHost" view-model="viewModel" id="athenaExplorationHost"><task-pane class="qnaTaskPane" view-model="viewModel.taskPane" field-list-config="::fieldListConfig" ng-if="hasResult" ng-show="infoNavContainerOptions.showTaskPane" resizable resizable-containerid="athenaExplorationHost" resizable-sibling="qnaVizPane" ng-attr-resizable-expanded="{{viewModel.taskPane.isPaneExpanded}}" resizable-default-width="180" resizable-min-width="180" resizable-max-width="420" resizable-collapsed-width="32"></task-pane><visualization-pane class="qnaVizPane" ng-if="hasResult" ng-show="infoNavContainerOptions.showVisualizationPane" view-model="viewModel.visualizationPane" resizable resizable-containerid="athenaExplorationHost" resizable-sibling="qnaTaskPane" resizable-expanded="{{viewModel.visualizationPane.isPaneExpanded}}" resizable-default-width="180" resizable-min-width="180" resizable-max-width="420" resizable-collapsed-width="32"></visualization-pane><div class="infonavContentWrapper"><section class="infonavContent" ng-style="{\'max-height\':infoNavContentMaxHeight}"><div class="infonavHeader"><qna-input models="models" get-additional-o-data-filter="getAdditionalODataFilter" output="questionBoxOutput" interpret-listener="interpretListener" usage-reporting-enabled="allowQnaDataCollection" ng-if="newQnaEnabled"></qna-input></div><div class="infonavMainContent"><info-nav-canvas ng-show="hasResult" canvas-definition="infoNavCanvasDefinition" respect-pane-updates="true"></info-nav-canvas><div ng-if="state === 1" class="qnaLoading"><spinner class="large qnaLoadingSpinner"></spinner><span localize="Qna_LoadingMessage"></span></div><div class="qnaStartFrame" ng-if="(state === 0 || state === 2 || state === 4) && !infoNavContainerOptions.cortana"><info-nav-qna-start models="models" error-message="{{state === 2 ? errorMessage : \'\'}}" interpret-utterance="interpretUtterance || questionBoxOutput.interpretUtterance"></info-nav-qna-start></div></div><div class="infonavFooter"><h3 ng-if="restatement && !infoNavContainerOptions.cortana" class="restatement">{{restatement}}</h3><h3 ng-if="sourceLabel" class="dataSource">{{sourceLabel}}</h3></div></section></div></exploration-host></section>'),e.put("views/infoNavQnaStart.html",'<div ng-switch="isLoading" class="qnaStart"><div ng-switch-when="true" class="qnaLoading"><spinner modern class="large qnaLoadingSpinner"></spinner><span localize="Qna_LoadingMessage"></span></div><div ng-switch-when="false" class="qnaStartContent"><div ng-switch="viewModel.modelSuggestionSets.length> 0"><div ng-switch-when="true"><div ng-if="!!errorMessage" class="prompt">{{errorMessage}}</div><div class="suggestionSet" ng-repeat="set in viewModel.modelSuggestionSets"><div class="modelName" title="{{::set.modelName}}">{{::set.modelName}}</div><div class="suggestions"><ul><li ng-repeat="s in set.suggestions | limitTo : set.currentSuggestionLimit"> <a ng-click="showUtterance(s)" class="utterance">{{::s.suggestion}}</a></li><li ng-if="set.suggestions.length> set.initialSuggestionLimit"><a ng-click="toggleLimit(set)" ng-switch="!!set.currentSuggestionLimit" class="seeMore"><span ng-switch-when="true" localize="QnaStart_SeeMore"></span><span ng-switch-when="false" localize="QnaStart_SeeLess"></span></a></li></ul></div></div></div><div ng-switch-when="false"><span ng-if="errorMessage" class="prompt" localize="QnAVisualization_EmptyResultTitleText"></span><span ng-if="!errorMessage" class="prompt" localize="QnaStart_ErrorLoadingSuggestions"></span></div></div></div></div>'),e.put("views/userFeedbackDialog.html",'<div><div localize="UtteranceFeedbackDialogPrompt"></div><div class="utteranceFeedbackOptions"> <label ng-repeat="o in feedback.options"><input type="radio" name="utteranceFeedback" ng-value="{{o.value}}" ng-model="feedback.selected"/> <span>{{o.text}}</span></label></div></div>'),e.put("views/qna/questionBox.html",'<div class="infonav-questionBoxContainer"><div class="infonav-questionBoxControl"><qna-text-input info-nav-control-container="infoNavControlContainer" shared-view-model="sharedViewModel"></qna-text-input></div></div>'),e.put("views/qna/questionBoxContainer.html",'<div class="qnaQuestionBoxContainer"><spinner class="qnaSpinner" ng-show="sharedViewModel.showLoadingSpinner"></spinner><question-box info-nav-control-container="infoNavControlContainer" shared-view-model="sharedViewModel"></question-box><qna-suggestion-list info-nav-control-container="infoNavControlContainer" shared-view-model="sharedViewModel"></qna-suggestion-list></div>'),e.put("views/qna/suggestionList.html",'<div class="infonav-suggestionsHost" ng-show="viewModel.showSuggestionsHost"><div class="infonav-suggestionsHostInnerBorder"><div class="infonav-suggestionsHostInnerLayout" ng-class="{\'no-restatement\': !viewModel.restatement}"><ul class="infonav-suggestionsList"><li class="infonav-restatement" ng-if="!!viewModel.restatement">{{viewModel.restatement}}</li><div class="infonav-hr" ng-if="!!viewModel.restatement && viewModel.uiSuggestionItems.length> 0"></div><li ng-repeat="item in viewModel.uiSuggestionItems | limitTo : viewModel.maxSuggestions" ng-class="{\'infonav-listItemSelected\': $index === viewModel.selectedSuggestionIndex}" ng-mouseenter="handleSuggestionMouseEnter($index)" ng-mousedown="handleSuggestionMouseDown($index, $event)" data-suggestionIndex="{{$index}}"> <span ng-repeat="part in item.parts" ng-class="{\'infonav-suggestedTermReplacement\': part.emphasize}">{{part.text}}</span></li></ul></div></div></div>'),e.put("views/qna/textInput.html",'<div class="infonav-textInputControl"><div class="infonav-textInputBox"><div class="infonav-inputAutoComplete" ng-show="viewModel.showAutoComplete" ng-switch="viewModel.hasFocus"> <span ng-switch-when="true" ng-if="viewModel.autoComplete" class="autoCompleteUserInput">{{sharedViewModel.userInput}}</span><span ng-switch-when="true" ng-if="viewModel.autoComplete" class="autoCompleteCompletion">{{viewModel.autoComplete}}</span><span ng-switch-when="false" ng-show="!sharedViewModel.userInput" ng-switch="sharedViewModel.showLoadingPlaceholder"><span ng-switch-when="true" localize="QnaTextBoxLoadingPlaceholder"></span><span ng-switch-when="false" localize="QnaTextBoxPlaceholder"></span></span></div><div class="infonav-inputTermSelection" ng-show="viewModel.showInputTermSelection" ng-style="{                \'top\':viewModel.inputTermSelectionPosition.top,                \'left\':viewModel.inputTermSelectionPosition.left,                \'width\':viewModel.inputTermSelectionPosition.width,                \'height\':viewModel.inputTermSelectionPosition.height}"></div><div class="infonav-inputRenderer"> <span ng-repeat="t in viewModel.inputRendererTerms" ng-class="{\'infonav-unrecognizedTerm\': t.unrecognized && viewModel.inputRendererShowUnrecognized}" data-termindex="{{t.index}}">{{t.term}}</span><span ng-if="!!viewModel.inputRendererRemainder">{{viewModel.inputRendererRemainder}}</span></div> <input class="infonav-userInput" type="text" spellcheck="false" autocomplete="off" maxlength="500" ng-model="sharedViewModel.userInput" ng-focus="onUserInputFocus()" ng-blur="onUserInputBlur()" ng-change="onUserInputChange()" ng-keydown="onUserInputKeyDown($event)" ng-keyup="onUserInputKeyUp($event)" ng-click="onUserInputClick()" ng-on-select="onUserInputSelect()" ng-trim="false"/></div></div>'),e.put("components/qnaInput/qnaInput.html",'<div class="qnaInputContainer" on-resize="$ctrl.handleResize()"><span class="glyphicon pbi-glyph-qna icon" ng-click="$ctrl.selectUtterance()"></span><div id="box"><textarea id="content" type="text" placeholder="{{::$ctrl.placeholder}}" spellcheck="false" autofocus></textarea><div id="utterance"><div id="utteranceContent"></div></div></div></div><div id="cap" ng-click="$ctrl.hideAllMenus()"></div>'),e.put("components/qnaInputLauncher/qnaInputLauncher.html",'<span class="qnaInputLauncher" ng-click="$ctrl.launchQna()"><span class="glyphicon pbi-glyph-qna icon"></span><span class="qnaInputLauncherText" localize="Qna_Input_Placeholder"></span></span>')}]);var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(t){var n=(function(){function t(t,n){this.scope=t,this.services=n,t.feedback={options:[this.createFeedbackOption("UtteranceFeedbackResultGood",e.usage.UtteranceFeedback.Good),this.createFeedbackOption("UtteranceFeedbackResultMedium",e.usage.UtteranceFeedback.Medium),this.createFeedbackOption("UtteranceFeedbackResultBad",e.usage.UtteranceFeedback.Bad)],selected:null},t.$watch("feedback.selected",(function(e){t.getPrimaryButton().prop("disabled",null==e)}))}return t.createOptions=function(){return{additionalServices:["localizationService"]}},t.prototype.createFeedbackOption=function(e,t){return{value:t,text:this.services.localizationService.get(e)}},t})();t.UserFeedbackDialogController=n})(t=e.controllers||(e.controllers={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){var n;!(function(n){var i=(function(){function n(){this.restrict="E",this.templateUrl="views/userFeedbackDialog.html",this.replace=!0,this.controller=e.common.Services.createController(t.controllers.UserFeedbackDialogController),this.link=function(e,t,n){e.getPrimaryButton=function(){return t.parent().parent().find(".infonav-dialogActions > input").filter(":first")}}}return n})();n.UserFeedbackDialog=i})(n=t.directives||(t.directives={}))})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={})),powerbi.explore.infonav.registerInfonavDirective("UserFeedbackDialog",[]);var powerbi;!(function(e){var t;!(function(t){var n;!(function(t){function n(e,t,n){return new i(e,t,n)}t.createAnsweredQuestionEventLoggerFactory=n;var i=(function(){function e(e,t,n){this.promiseFactory=e,this.telemetryService=t,this.timeoutService=n}return e.prototype.createAnsweredQuestionEventLogger=function(e){return new s(e,this.promiseFactory,this.telemetryService,this.timeoutService)},e})(),r="1",o="3",s=(function(){function t(e,t,n,i){this.delayMilliseconds=e,this.promiseFactory=t,this.telemetryService=n,this.timeoutService=i}return t.prototype.startAnsweredQuestionEvent=function(){var e=this,t=Date.now(),n=-1,i=this.promiseFactory.defer();return i.promise.then((function(){return n=Date.now()})),this.lastTimeout&&this.timeoutService.cancel(this.lastTimeout),this.lastTimeout=this.timeoutService((function(){e.lastTimeout=null,i.promise.then((function(i){return e.endAnsweredQuestionEvent(t,n,i)}))}),this.delayMilliseconds,!1),i},t.prototype.endAnsweredQuestionEvent=function(t,n,i){var s=-1;i.probeCompletedTimestamp&&i.probeCompletedTimestamp>=t&&(s=i.probeCompletedTimestamp-t),i.wasCancelled&&(i.isError=!1);var a=function(a,u,l,c){return void 0===u&&(u=!1),void 0===l&&(l=void 0),void 0===c&&(c=void 0),e.telemetry.QnAINAQ("FireActivityCompletionSummaryEvent",i.isError?o:r,i.isResponseEmpty,i.fromCache,i.contentProviderType,i.ownerType,n-t,s,i.wasCancelled,i.interpretRequestId,a,i.isError,l,c)};this.telemetryService.logEvent(a)},t})()})(n=t.infonav||(t.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(t){t.QnaInput={templateUrl:"components/qnaInput/qnaInput.html",bindings:{getAdditionalODataFilter:"=",interpretListener:"=",models:"=",output:"=",usageReportingEnabled:"="},controller:e.controllers.qna.QnaInputController}})(t=e.components||(e.components={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={})),powerbi.explore.infonav.registerInfonavComponent("QnaInput");var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(t){t.QnaInputLauncher={templateUrl:"components/qnaInputLauncher/qnaInputLauncher.html",bindings:{models:"=",showQna:"="},controller:e.controllers.qna.QnaInputLauncherController}})(t=e.components||(e.components={}))})(t=e.infonav||(e.infonav={}))})(t=e.explore||(e.explore={}))})(powerbi||(powerbi={})),powerbi.explore.infonav.registerInfonavComponent("QnaInputLauncher");;var powerbi;!(function(e){var t;!(function(t){t.SettingsAdminAuditing=function(t,i,a,n,o,s,r,c,l){void 0===i&&(i=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===o&&(o=void 0),void 0===s&&(s=void 0),void 0===r&&(r=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:a,errorCode:n,errorMessage:o,activityName:s,activityId:r,isDebug:c,isCancelled:l},u={name:"PBI.Settings.AdminAuditing",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsAdminAuditingLoggers&&(u.loggers=e.telemetry.SettingsAdminAuditingLoggers),u},t.SettingsOpenGatewaySettings=function(t,i,a,n,o,s,r,c,l){void 0===i&&(i=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===o&&(o=void 0),void 0===s&&(s=void 0),void 0===r&&(r=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:a,errorCode:n,errorMessage:o,activityName:s,activityId:r,isDebug:c,isCancelled:l},u={name:"PBI.Settings.OpenGatewaySettings",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsOpenGatewaySettingsLoggers&&(u.loggers=e.telemetry.SettingsOpenGatewaySettingsLoggers),u},t.SettingsGetUsageMetricsDashboardId=function(t,i,a,n,o,s,r,c,l){void 0===i&&(i=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===o&&(o=void 0),void 0===s&&(s=void 0),void 0===r&&(r=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:a,errorCode:n,errorMessage:o,activityName:s,activityId:r,isDebug:c,isCancelled:l},u={name:"PBI.Settings.GetUsageMetricsDashboardId",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsGetUsageMetricsDashboardIdLoggers&&(u.loggers=e.telemetry.SettingsGetUsageMetricsDashboardIdLoggers),u},t.SettingsGetTenantSettings=function(t,i,a,n,o,s,r,c,l){void 0===i&&(i=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===o&&(o=void 0),void 0===s&&(s=void 0),void 0===r&&(r=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:a,errorCode:n,errorMessage:o,activityName:s,activityId:r,isDebug:c,isCancelled:l},u={name:"PBI.Settings.GetTenantSettings",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsGetTenantSettingsLoggers&&(u.loggers=e.telemetry.SettingsGetTenantSettingsLoggers),u},t.SettingsUpdateTenantSettings=function(t,i,a,n,o,s,r,c,l){void 0===i&&(i=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===o&&(o=void 0),void 0===s&&(s=void 0),void 0===r&&(r=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:a,errorCode:n,errorMessage:o,activityName:s,activityId:r,isDebug:c,isCancelled:l},u={name:"PBI.Settings.UpdateTenantSettings",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsUpdateTenantSettingsLoggers&&(u.loggers=e.telemetry.SettingsUpdateTenantSettingsLoggers),u},t.SettingsUpdateTenantSetting=function(t,i,a,n,o,s,r,c,l,d,u){void 0===n&&(n=!1),void 0===o&&(o=void 0),void 0===s&&(s=void 0),void 0===r&&(r=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===u&&(u=void 0);var p={name:t,isEnabled:i,parentId:a,isError:n,errorSource:o,errorCode:s,errorMessage:r,activityName:c,activityId:l,isDebug:d,isCancelled:u},g={name:"PBI.Settings.UpdateTenantSetting",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={name:p.name,isEnabled:p.isEnabled,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsUpdateTenantSettingLoggers&&(g.loggers=e.telemetry.SettingsUpdateTenantSettingLoggers),g}})(t=e.telemetry||(e.telemetry={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(t){e.common.registerBuildingBlocksForHost(t,n,{directivesTarget:"powerbi.settings.directives",directivesMap:e.settings.directives,componentsTarget:"powerbi.settings.components",componentsMap:e.settings.components})}var a=e.common.HostEnv,n=[{name:"AdminPortal",dependencies:[],blockType:1,consumerHostFlags:a.Web},{name:"AdminPortalUsageMetrics",dependencies:[],blockType:1,consumerHostFlags:a.Web},{name:"AdminPortalManageUsers",dependencies:[],blockType:1,consumerHostFlags:a.Web},{name:"AdminPortalAuditing",dependencies:[],blockType:1,consumerHostFlags:a.Web},{name:"AdminPortalTenantSettings",dependencies:[],blockType:1,consumerHostFlags:a.Web},{name:"Gateways",dependencies:[],blockType:1,consumerHostFlags:a.Web},{name:"Gateway",dependencies:[],blockType:1,consumerHostFlags:a.Web},{name:"GatewaySettings",dependencies:[],blockType:1,consumerHostFlags:a.Web},{name:"GatewayAdministrators",dependencies:[],blockType:1,consumerHostFlags:a.Web},{name:"Datasource",dependencies:[],blockType:1,consumerHostFlags:a.Web},{name:"DatasourceSettings",dependencies:[],blockType:1,consumerHostFlags:a.Web},{name:"DatasourceUsers",dependencies:[],blockType:1,consumerHostFlags:a.Web},{name:"SelectGateway",dependencies:[],blockType:1,consumerHostFlags:a.Web},{name:"UpnMappingPane",dependencies:[],blockType:2,consumerHostFlags:a.Web}];angular.module("powerbi.settings",[]),angular.module("powerbi.settings.directives",[]),angular.module("powerbi.settings.components",[]),angular.module("powerbi.settings.controllers",[]),angular.module("powerbi.settings",["powerbi.common","powerbi.connectivity","powerbi.settings.directives","powerbi.settings.controllers"]).factory("selectGatewayService",["$rootScope","$compile","gatewaysMetadataService","modalDialogService","localizationService",function(t,i,a,n,o){return e.settings.createSelectGatewayService(t,i,a,n,o)}]).factory("gatewaysMetadataService",["promiseFactory","gatewaysMetadataHttpService","telemetryService","featureSwitchService",function(t,i,a,n){return e.connectivity.createGatewaysMetadataService(t,i,a,n)}]).factory("gatewaysMetadataHttpService",[function(){return e.connectivity.createGatewaysMetadataHttpService()}]).factory("gatewayDataService",[function(){return e.settings.createGatewayDataService()}]).factory("adminPortalHttp",[function(){return e.settings.createAdminPortalHttpService()}]).factory("adminPortal",["promiseFactory","adminPortalHttp","localizationService","telemetryService","$interval",function(t,i,a,n,o){return e.settings.createAdminPortalService(t,i,a,n,o)}]),t.registerBuildingBlocksForHost=i})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(){this.restrict="E",this.templateUrl="views/gatewaySettingsView.html",this.replace=!0,this.scope={viewModel:"="},this.controller=e.common.Services.createController(t.controllers.GatewaySettingsController)}return i})();i.GatewaySettings=a})(i=t.directives||(t.directives={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e})();e.DataSourceSettingsModel=t})(t=e.models||(e.models={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){var i=e.common.models.EmailsListModel,a=(function(){function e(){this.pendingUsers=new i,this.editableUsers=[],this.isAdding=!1,this.isReloadingList=!1}return e})();t.DataSourceUserModel=a})(i=t.models||(t.models={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=e.common.contracts.gateway.CredentialType,n=e.common.contracts.gateway.DataSourceType,o=e.connectivity.models.GatewayTabSelectionType,s=e.common.contracts.gateway.GatewayStatus,r=(function(){function i(){}return i.convertSettingsGateways=function(e){var t=this;return _.map(e,(function(e){return t.convertGateway(e)}))},i.convertGateway=function(e){var t=this.getGatewayAnnotation(e);return{displayName:e.gatewayName,id:e.gatewayId,isLoadingDataSources:!1,isLoadingStatus:!1,status:this.convertGatewayStatus(e.gatewayStatus),dataSources:[],isExpanded:!1,description:e.gatewayDescription,enableAutoUpdate:!1,joinImprovmentProgram:!1,administrators:null,tabSelectionType:o.Settings,publicKey:e.gatewayPublicKey,isWaitingForGatewayUpdate:!1,isDirty:!1,contactInformationString:null,connectionError:null,originalValues:null,traceDetails:null,contextMenuItem:null,gatewayAnnotation:t}},i.convertDataSources=function(e){var t=this;return _.map(e,(function(e){return t.convertDataSource(e)}))},i.convertDataSource=function(e){var t={id:e.dataSourceId,displayName:e.dataSourceName,onPremGatewayRequired:e.onPremGatewayRequired,dataSourceType:e.dataSourceType,connectionInfo:this.convertConnectionDetails(e.connectionDetails,e.credentialDetails),users:null,tabSelectionType:o.Settings};return t.dataSourceAnnotation=this.convertDataSourceAnnotation(e.dataSourceAnnotation),t},i.convertDataSourceAnnotation=function(t){var i={dataSourceAnnotationUPNMapping:{connectionStringPropertyName:e.common.contracts.gateway.ConnectionStringPropertyName.EffectiveUserName,mappingRules:[]}};if(!t)return i;try{return JSON.parse(t)}catch(e){return i}},i.convertUsers=function(e,t){var i=[{accessRight:t,principalList:e}];return i},i.convertToPrincipalAccessEntry=function(e,t){var i=[{accessRight:t,principalList:e}];return i},i.convertDiscoverDataSourceFeaturesToDataSourceTypeOptions=function(e){for(var i=this,o=[],s=0,r=e.dataSourceTypes;s<r.length;s++){var c=r[s];if(!_.isEmpty(n[c.dataSourceType])){var l=_.map(c.dataSourceCredentialTypes,(function(e){return{id:e,name:i.getLocalizedString(t.constants.AuthenticationMethodPrefix,a[e])}})),d=_.map(c.dataSourceLabels,(function(e){return{name:e.name,displayName:i.getLocalizedString(t.constants.LabelPrefix,e.name),type:i.getLabelType(e.name)}}));o[c.dataSourceType]={id:c.dataSourceType,name:this.getLocalizedString(t.constants.DataSourceTypePrefix,n[c.dataSourceType]),labels:d,authenticationMethodOptions:l}}}return o},i.convertAuthenticationParametersToCredentialData=function(e){return _.map(e,(function(e){return{name:e.name,value:e.value}}))},i.convertConnectionDetails=function(e,t){return{connetionDetails:e,credentialDetails:t}},i.getGatewayAnnotation=function(e){if(e.gatewayAnnotation)try{return JSON.parse(e.gatewayAnnotation)}catch(e){return null}return null},i.convertGatewayStatus=function(t){return t===s.Live?e.connectivity.models.GatewayStatus.Live:e.connectivity.models.GatewayStatus.NotReachable},i.getLocalizedString=function(t,i){var a=i.length>0?i.charAt(0).toUpperCase()+i.slice(1):"",n=e.common.localize.get("SettingsDataSource_"+t+a);return n||(n=a),n},i.getLabelType=function(e){switch(e.toLocaleLowerCase()){case"url":case"sharepointsiteurl":return"url";default:return"text"}},i})();i.GatewayModelConverter=r})(i=t.models||(t.models={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(e,t,i,a){this.modelId=e,this.selectedGatewayId=-1,this.title=null,this.showStatus=!0,this.showHeader=t,this.allowPersonalGateway=i,this.egwStatusLoaded=!1,this.isCloudScheduleRefresh=a}return e})();e.SelectGatewayModel=t})(t=e.models||(e.models={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(e,i){this.scope=e,this.services=i;var a=i.gatewayDataService.selectedGatewayDatasource;a.dataSourceAnnotation&&a.dataSourceAnnotation.dataSourceAnnotationUPNMapping||(a.dataSourceAnnotation=t.models.GatewayModelConverter.convertDataSourceAnnotation("")),this.viewModel=_.cloneDeep(i.gatewayDataService.selectedGatewayDatasource.dataSourceAnnotation.dataSourceAnnotationUPNMapping),this.localizedOriginalName=i.localizationService.get("UpnMappingPane_OriginalName"),this.localizedNewName=i.localizationService.get("UpnMappingPane_NewName"),this.localizedResultOfApplyingMappingRule=i.localizationService.get("UpnMappingPane_AfterRuleAppliedPlaceHolder"),this.resetNewRule()}return i.createOptions=function(){return{additionalServices:["gatewayDataService","gatewaysMetadataService","localizationService","errorService","telemetryService","notificationToast"]}},i.prototype.addNewRule=function(){var e=this.newRule;this.viewModel.mappingRules.push({algorithm:e.algorithm,searchString:e.searchString,replacementString:e.replacementString}),this.resetNewRule()},i.prototype.deleteRule=function(){if(this.selectedRule){var e=this.viewModel.mappingRules.indexOf(this.selectedRule);this.viewModel.mappingRules.splice(e,1)}},i.prototype.testRule=function(){var e=this;this.testRuleOriginalName&&(this.isTestRuleRequestPending=!0,this.services.gatewaysMetadataService.getUPNMappingResult([this.testRuleOriginalName],this.viewModel).then((function(t){if(!_.isEmpty(t.upns)){var i=t.upns[0];e.testRuleNewName=i.result}}),(function(){e.services.errorService.error(e.services.localizationService.get("UpnMappingPane_FailToTestUPNRuleMessage"),"FailToTestUPNRuleMessage")})).finally((function(){e.isTestRuleRequestPending=!1})))},i.prototype.saveChangesAndExit=function(){var t=this;this.isUpdateDataSourceRequestPending=!0;var i=JSON.stringify({dataSourceAnnotationUPNMapping:{connectionStringPropertyName:this.viewModel.connectionStringPropertyName,mappingRules:this.viewModel.mappingRules}}),a=this.services.gatewayDataService.selectedGatewayDatasource,n=this.services.telemetryService.startEvent(e.telemetry.SettingsUpdateGatewayDatasourceUPNMapping);this.services.gatewaysMetadataService.updateDataSource(a.gateway.id,a.id,{dataSourceType:null,onPremGatewayRequired:null,connectionDetails:null,credentialDetails:null,dataSourceAnnotation:i,supportedAuthenticationTypes:null}).then((function(){a.dataSourceAnnotation.dataSourceAnnotationUPNMapping=_.cloneDeep(t.viewModel),t.closeUpnMappingPane(),t.services.notificationToast.notify({title:t.services.localizationService.get("UpnMappingPane_SuccessfulMessage"),notificationType:e.common.NotificationToastType.Info}),n.resolve()}),(function(){t.services.errorService.error(t.services.localizationService.get("UpnMappingPane_FailToUpdateMessage"),"FailToUpdateGatewayUPNMapping"),n.reject()})).finally((function(){t.isUpdateDataSourceRequestPending=!1}))},i.prototype.closeUpnMappingPane=function(){this.scope.$emit(t.constants.hideGatewayUserMappingPaneEventName)},i.prototype.selectPre=function(){var e=this.viewModel.mappingRules,t=e.indexOf(this.selectedRule);e.length>1&&t>0&&(this.selectedRule=e[t-1])},i.prototype.selectNext=function(){var e=this.viewModel.mappingRules,t=e.indexOf(this.selectedRule);e.length>1&&t<e.length-1&&(this.selectedRule=e[t+1])},i.prototype.resetNewRule=function(){this.newRule={algorithm:e.common.contracts.gateway.DataSourceAnnotationUPNMappingAlgorithm.SubstringReplacement,searchString:"",replacementString:""}},i})();i.UpnMappingPaneController=a})(i=t.controllers||(t.controllers={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){i.UpnMappingPane={templateUrl:"components/gateway/upnMappingPane/upnMappingPaneView.html",controller:e.common.Services.createController(t.controllers.UpnMappingPaneController)}})(i=t.components||(t.components={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(e,i){var a=this;this.scope=e,this.services=i,this.scope.onTabSelected=function(e){return a.onTabSelected(e)},this.scope.$on(t.constants.switchToUserTabEventName,(function(e){return a.switchToUserTabListener(e)}))}return i.prototype.switchToUserTabListener=function(t){t.stopPropagation(),this.onTabSelected(e.connectivity.models.GatewayTabSelectionType.Users)},i.prototype.onTabSelected=function(e){this.scope.viewModel.tabSelectionType=e},i})();i.DataSourceController=a})(i=t.controllers||(t.controllers={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=e.common.contracts.gateway.CredentialType,n=e.common.contracts.gateway.PrivacyLevel,o=(function(){function i(e,i){var a=this;this.scope=e,this.services=i,this.viewModel=this.scope.viewModel=new t.models.DataSourceSettingsModel,this.viewModel.isLoadingForm=!0,this.viewModel.advancedSettingsExpanded=!1,this.initEntropy(),this.initializePlaceholder(),this.initViewModelOptions().then((function(){a.loadViewModelData(),a.startWatchFormControl(),a.startWatchDataSourceModel()})),this.scope.tryDiscardChanges=function(){return a.tryDiscardChanges()},this.scope.tryAddDataSource=function(){return a.tryAddDataSource()},this.scope.tryApplyChanges=function(){return a.tryApplyChanges()},this.scope.switchToUserTab=function(){return a.switchToUserTab()},this.scope.onAuthenticationParameter1Change=function(){return a.onAuthenticationParameter1Change()},this.scope.onAuthenticationParameter1Focus=function(){return a.onAuthenticationParameter1Focus()},this.scope.onAuthenticationParameter1Blur=function(){return a.onAuthenticationParameter1Blur()},this.scope.onAuthenticationParameter2Change=function(){return a.onAuthenticationParameter2Change()},this.scope.onAuthenticationParameter2Focus=function(){return a.onAuthenticationParameter2Focus()},this.scope.onAuthenticationParameter2Blur=function(){return a.onAuthenticationParameter2Blur()},this.scope.onDataSourceTypeChange=function(){return a.onDataSourceTypeChange()},this.scope.onAuthenticationMethodChange=function(){return a.onAuthenticationMethodChange()},this.scope.enterpriseGatewayETLEnabled=this.services.featureSwitchService.featureSwitches.enterpriseGatewayETLEnabled}return i.createOptions=function(){return{additionalServices:["errorService","featureSwitchService","localizationService","gatewaysMetadataService","telemetryService","promiseFactory"]}},i.prototype.initializePlaceholder=function(){i.Placeholder||("Google Inc."===navigator.vendor?i.Placeholder="":i.Placeholder="")},i.prototype.initEntropy=function(){var e=this;this.services.gatewaysMetadataService.getEntropy().then((function(t){if(e.entropy=[],t)for(var i=atob(t),a=i.length,n=0;n<a;n++)e.entropy.push(i.charCodeAt(n));else e.entropy=jsCommon.EncryptionContext.generateEntropy()}),(function(e){}))},i.prototype.initViewModelOptions=function(){var e=this,i=this.services.promiseFactory.defer();return this.services.gatewaysMetadataService.discoverDataSourceFeatures().then((function(i){e.viewModel.dataSourceTypeOptions=t.models.GatewayModelConverter.convertDiscoverDataSourceFeaturesToDataSourceTypeOptions(i)}),(function(e){})).finally((function(){i.resolve(null)})),i.promise},i.prototype.startWatchFormControl=function(){var e=this,t=this.scope.$watch("settingsForm",(function(i){i&&(e.scope.dataSourceModel.isDirty=function(){return i.$dirty},e.viewModel.isAddingDataSource&&e.scope.settingsForm.$setDirty(),t())}))},i.prototype.startWatchDataSourceModel=function(){var e=this;this.scope.$watch("dataSourceModel",(function(t,i){i!==t&&(e.loadViewModelData(),e.scope.dataSourceModel.isDirty=function(){return e.scope.settingsForm.$dirty})}))},i.prototype.loadViewModelData=function(){var e=this.scope.dataSourceModel,t=this.viewModel,a=t.isAddingDataSource=e.id<0,o=a?void 0:e.connectionInfo.credentialDetails.credentialType,s=a?void 0:JSON.parse(e.connectionInfo.connetionDetails);if(t.editableSettings={dataSourceName:e.displayName,dataSourceType:e.dataSourceType,authenticationMethod:o,authenticationParameters:a?this.initAuthenticationParameters(e.dataSourceType,o):this.initAuthenticationParameters(e.dataSourceType,o,[i.Placeholder,i.Placeholder]),authenticationParameter1Edited:!1,authenticationParameter2Edited:!1,privacyLevel:a?n.Organizational:e.connectionInfo.credentialDetails.privacyLevel},!a)for(var r=0,c=this.viewModel.dataSourceTypeOptions[e.dataSourceType].labels;r<c.length;r++){var l=c[r];t.editableSettings[l.name]=s[l.name]}t.waitingForDataSourceStatus=!1,t.hasTestConnectionFailure=!1,t.isLoadingForm=!1,t.messageState=0,e.compositeErrorMessage="",this.scope.settingsForm&&(a?this.scope.settingsForm.$setDirty():this.scope.settingsForm.$setPristine())},i.prototype.getUserNameLabel=function(t){return t===e.common.contracts.gateway.DataSourceType.File||t===e.common.contracts.gateway.DataSourceType.Folder?this.services.localizationService.get("SettingsDataSource_SettingsWindowsUsername"):this.services.localizationService.get("SettingsDataSource_SettingsUsername")},i.prototype.getPasswordLabel=function(t){return t===e.common.contracts.gateway.DataSourceType.File||t===e.common.contracts.gateway.DataSourceType.Folder?this.services.localizationService.get("SettingsDataSource_SettingsWindowsPassword"):this.services.localizationService.get("SettingsDataSource_SettingsPassword")},i.prototype.initAuthenticationParameters=function(e,t,i){var n=[];if(null!=t)switch(t){case a.NotSpecified:case a.Anonymous:break;case a.Basic:case a.Windows:i||(i=["",""]),n.push({name:"username",value:i[0],displayName:this.getUserNameLabel(e),shouldDisplay:!0}),n.push({name:"password",value:i[1],displayName:this.getPasswordLabel(e),shouldDisplay:!0})}return n},i.prototype.getDefaultAuthenticationMethod=function(){var e=this.viewModel.editableSettings,t=this.viewModel.dataSourceTypeOptions[e.dataSourceType].authenticationMethodOptions;if(1===t.length)return t[0].id},i.prototype.onDataSourceTypeChange=function(){for(var e=this.viewModel.editableSettings,t=this.getDefaultAuthenticationMethod(),i=0,a=this.viewModel.dataSourceTypeOptions[e.dataSourceType].labels;i<a.length;i++){var n=a[i];e[n.name]=""}e.authenticationMethod=t,e.authenticationParameters=this.initAuthenticationParameters(this.viewModel.dataSourceTypeOptions[e.dataSourceType].id,t),e.authenticationParameter1Edited=!1,e.authenticationParameter2Edited=!1},i.prototype.onAuthenticationMethodChange=function(){this.scope.viewModel.editableSettings.authenticationParameters=this.initAuthenticationParameters(this.scope.viewModel.dataSourceTypeOptions[this.scope.viewModel.editableSettings.dataSourceType].id,this.scope.viewModel.editableSettings.authenticationMethod,["",""]),this.scope.viewModel.editableSettings.authenticationParameter1Edited=!0,this.scope.viewModel.editableSettings.authenticationParameter2Edited=!0},i.prototype.tryDiscardChanges=function(){var e=this;this.showDiscardPopup().then((function(){e.viewModel.isAddingDataSource?e.scope.$emit(t.constants.discardAddingDataSourceEventName):e.loadViewModelData()}))},i.prototype.showDiscardPopup=function(){var e=this.services.promiseFactory.defer(),t=this.services.errorService,i=t.control(),a=this.services.localizationService.get("SettingsDataSource_DiscardChangesWarning_YesOption"),n=this.services.localizationService.get("SettingsDataSource_DiscardChangesWarning_CancelOption"),o=[new InJs.ModalDialogAction(a,function(t,a){i.hideDialog(),e.resolve(null)}),new InJs.ModalDialogAction(n,function(t,a){i.hideDialog(),e.reject()})],s=this.services.localizationService.get("SettingsDataSource_DiscardChangesWarning_Title"),r=this.services.localizationService.get("SettingsDataSource_DiscardChangesWarning_DataSourceMessage");return i.showCustomDialog(s,$("<div/>").text(r),o,(function(e){e.parent().find('input[value="'+n+'"]').focus()}),!0,!0),e.promise},i.prototype.onAuthenticationParameter1Change=function(){this.viewModel.editableSettings.authenticationParameters.length>1&&!this.viewModel.editableSettings.authenticationParameter2Edited&&(this.viewModel.editableSettings.authenticationParameters[1].value="",this.viewModel.editableSettings.authenticationParameter2Edited=!0),this.viewModel.editableSettings.authenticationParameter1Edited=!0},i.prototype.onAuthenticationParameter1Focus=function(){this.viewModel.isAddingDataSource||this.viewModel.editableSettings.authenticationParameter1Edited||(this.viewModel.editableSettings.authenticationParameters[0].value="")},i.prototype.onAuthenticationParameter1Blur=function(){this.viewModel.isAddingDataSource||this.viewModel.editableSettings.authenticationParameter1Edited||(this.viewModel.editableSettings.authenticationParameters[0].value=i.Placeholder)},i.prototype.onAuthenticationParameter2Change=function(){this.viewModel.editableSettings.authenticationParameter1Edited||(this.viewModel.editableSettings.authenticationParameters[0].value="",this.viewModel.editableSettings.authenticationParameter1Edited=!0),this.viewModel.editableSettings.authenticationParameter2Edited=!0},i.prototype.onAuthenticationParameter2Focus=function(){this.viewModel.isAddingDataSource||this.viewModel.editableSettings.authenticationParameter2Edited||(this.viewModel.editableSettings.authenticationParameters[1].value="")},i.prototype.onAuthenticationParameter2Blur=function(){this.viewModel.isAddingDataSource||this.viewModel.editableSettings.authenticationParameter2Edited||(this.viewModel.editableSettings.authenticationParameters[1].value=i.Placeholder)},i.prototype.isDataSourceNameUnique=function(e,t){return!_.find(this.scope.dataSourceModel.gateway.dataSources,(function(i){return i.displayName===e&&i!==t}))},i.prototype.tryAddDataSource=function(){var e=this;if(this.isFormValid()){var i=this.scope.dataSourceModel,a=this.viewModel.editableSettings,n=i.gateway.id,o=atob(i.gateway.publicKey).split(/<\/Modulus>|<Modulus>/)[1],s={credentialData:t.models.GatewayModelConverter.convertAuthenticationParametersToCredentialData(this.viewModel.editableSettings.authenticationParameters)};this.encryptCredentials(s,o,a.authenticationMethod,this.entropy).then((function(t){t.privacyLevel=a.privacyLevel;var i={dataSourceName:a.dataSourceName,dataSourceType:a.dataSourceType,onPremGatewayRequired:!0,connectionDetails:e.getConnectionDetailsString(),credentialDetails:t,supportedAuthenticationTypes:null};e.createDataSource(n,i)}))}},i.prototype.tryApplyChanges=function(){var e=this;if(this.isFormValid()){var i=this.scope.dataSourceModel,a=this.viewModel.editableSettings,n=i.gateway.id,o=i.id,s=atob(i.gateway.publicKey).split(/<\/Modulus>|<Modulus>/)[1],r={credentialData:t.models.GatewayModelConverter.convertAuthenticationParametersToCredentialData(this.viewModel.editableSettings.authenticationParameters)};this.encryptCredentials(r,s,a.authenticationMethod,this.entropy).then((function(t){t.privacyLevel=a.privacyLevel,e.editCredentials(n,o,t)}))}},i.prototype.isFormValid=function(){return!this.scope.settingsForm.$error.required&&!this.scope.settingsForm.$error.url&&(!(this.viewModel.isAddingDataSource&&!this.isDataSourceNameUnique(this.viewModel.editableSettings.dataSourceName,this.scope.dataSourceModel))||(this.scope.dataSourceModel.errorTitle="",this.scope.dataSourceModel.compositeErrorMessage=this.services.localizationService.get("SettingsDatasources_DuplicateDataSourceName"),this.viewModel.messageState=2,!1))},i.prototype.createDataSource=function(e,i){var a=this;this.viewModel.waitingForDataSourceStatus=!0,this.services.gatewaysMetadataService.createDataSource(e,i).then((function(e){a.scope.dataSourceModel.id=e.dataSourceId,a.scope.dataSourceModel.displayName=e.dataSourceName,a.scope.dataSourceModel.dataSourceType=e.dataSourceType,a.scope.dataSourceModel.connectionInfo.connetionDetails=e.connectionDetails,a.scope.dataSourceModel.connectionInfo.credentialDetails=e.credentialDetails,a.scope.dataSourceModel.dataSourceAnnotation=t.models.GatewayModelConverter.convertDataSourceAnnotation(""),a.loadViewModelData(),a.scope.dataSourceModel.connected=!0,a.scope.dataSourceModel.connectionError=null,a.viewModel.messageState=1,a.scope.$emit(t.constants.dataSourceCreatedEventName,[e.dataSourceId])}),(function(e){a.showDataSourceError(e),a.scope.dataSourceModel.connected=!1}))},i.prototype.editCredentials=function(e,t,i){var a=this;this.viewModel.waitingForDataSourceStatus=!0,this.services.gatewaysMetadataService.updateCredentials(e,t,i).then((function(){a.viewModel.waitingForDataSourceStatus=!1,a.scope.dataSourceModel.connectionInfo.credentialDetails.credentialType=a.viewModel.editableSettings.authenticationMethod,a.scope.dataSourceModel.connectionInfo.credentialDetails.privacyLevel=a.viewModel.editableSettings.privacyLevel,a.loadViewModelData(),a.scope.dataSourceModel.connected=!0,a.scope.dataSourceModel.connectionError=null}),(function(e){a.showDataSourceError(e),a.viewModel.hasTestConnectionFailure=!0}))},i.prototype.switchToUserTab=function(){
this.scope.$emit(t.constants.switchToUserTabEventName)},i.prototype.getConnectionDetailsString=function(){for(var e={},t=this.viewModel.dataSourceTypeOptions[this.viewModel.editableSettings.dataSourceType].labels,i=0,a=t;i<a.length;i++){var n=a[i];e[n.name]=this.viewModel.editableSettings[n.name]}return JSON.stringify(e)},i.prototype.encryptCredentials=function(t,i,a,o){var s=this,r=this.services.promiseFactory.defer(),c=new jsCommon.EncryptionContext(JSON.stringify(t),i,this.entropy,function(t){var i={credentials:t,credentialType:a,encryptedConnection:s.services.featureSwitchService.featureSwitches.enterpriseGatewayETLEnabled?e.common.contracts.gateway.EncryptedConnection.NotEncrypted:e.common.contracts.gateway.EncryptedConnection.Encrypted,privacyLevel:n.Public,encryptionAlgorithm:"RSA-OAEP"};r.resolve(i)});return c.RSAEncrypt(),r.promise},i.prototype.getDataSourceName=function(e){var t=this.viewModel.dataSourceTypeOptions[e.dataSourceType].labels;return t.length>0?e[t[0].name]:""},i.prototype.showDataSourceError=function(t){var i=this,a=e.helpers.PowerBIServiceExceptionErrorHelper.GenerateErrorMessage(t.error);a.always((function(a){var n=e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+t.error.code,o=i.services.localizationService.get(n);"ServerError_DMTS_DuplicateDatasourceError"===n?(i.scope.dataSourceModel.errorTitle="",i.scope.dataSourceModel.compositeErrorMessage=o):(i.scope.dataSourceModel.errorTitle=i.services.localizationService.get("SettingsDataSource_SettingsConnectionErrorTitle"),i.scope.dataSourceModel.compositeErrorMessage=i.services.localizationService.format("SettingsDataSource_SettingsConnectionErrorMessage",[i.getDataSourceName(i.viewModel.editableSettings),o]));var s=[];if(a&&a.displayableErrorInfo)for(var r=0;r<a.displayableErrorInfo.length;r++){var c=a.displayableErrorInfo[r];s.push({key:c.errorInfoKey,value:c.errorInfoValue})}i.scope.dataSourceModel.traceDetails={requestId:t.requestId,activityId:t.activityId,clusterUri:clusterUri,errorCode:t.status.toString(),error:t.error.code,details:s,time:(new Date).toString(),version:e.build,linkText:i.services.localizationService.get("SettingsGateways_TroubleshootMessage"),link:"https://go.microsoft.com/fwlink/?LinkId=627095"},i.viewModel.waitingForDataSourceStatus=!1,i.viewModel.messageState=2}))},i})();i.DataSourceSettingsController=o})(i=t.controllers||(t.controllers={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=e.common.contracts.gateway.AccessRight,n=e.common.contracts.gateway.DataSourceType,o=(function(){function i(e,i){var a=this;this.scope=e,this.services=i,this.dataSourceModel=e.dataSourceModel,this.viewModel=this.scope.viewModel=new t.models.DataSourceUserModel,this.scope.tryAddUsers=function(){return a.tryAddUsers()},this.scope.tryRemoveSelectedUsers=function(){return a.tryRemoveSelectedUsers()},this.scope.shouldDisableRemoveButton=function(){return a.shouldDisableRemoveButton()},this.scope.mapUserNames=function(){return a.mapUserNames()},this.getDataSourceUsers(),this.setupUpnMappingButton(),this.startWatchDataSourceModel(),this.scope.dataSourceModel.isDirty=function(){return!1}}return i.createOptions=function(){return{additionalServices:["errorService","localizationService","gatewaysMetadataService","telemetryService"]}},i.prototype.startWatchDataSourceModel=function(){var e=this;this.scope.$watch("dataSourceModel",(function(t,i){i!==t&&(e.dataSourceModel=e.scope.dataSourceModel,e.getDataSourceUsers(),e.setupUpnMappingButton())}))},i.prototype.setupUpnMappingButton=function(){this.scope.upnMappingEnabled=this.dataSourceModel&&this.dataSourceModel.dataSourceType===n.AnalysisServices},i.prototype.tryAddUsers=function(){var i=this;this.viewModel.pendingUsers.validationTrigger()&&(this.viewModel.isAdding=!0,this.validateEmailAddresses(),this.viewModel.pendingUsers.validEmailsList.length>0?this.services.gatewaysMetadataService.addDataSourcePrincipals(this.dataSourceModel.gateway.id,this.dataSourceModel.id,t.models.GatewayModelConverter.convertUsers(this.viewModel.pendingUsers.validEmailsList,a.read)).then((function(){i.viewModel.isAdding=!1,i.viewModel.pendingUsers.inputUserList=[],i.getDataSourceUsers()}),(function(t){i.viewModel.isAdding=!1,i.services.errorService.error(i.services.localizationService.get(e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+t.error.code),"AddDataSourceUser_Error",{requestId:t.requestId,ecsCorrelationId:t.activityId,statusCode:t.status.toString()})})):(this.viewModel.isAdding=!1,this.viewModel.pendingUsers.inputUserList=[]))},i.prototype.validateEmailAddresses=function(){this.viewModel.pendingUsers.validEmailsList=_.unique(this.arrayStringsToLowerCase(this.viewModel.pendingUsers.validEmailsList));var e=this.arrayStringsToLowerCase(_.map(this.viewModel.editableUsers,(function(e){return e.emailAddress})));this.viewModel.pendingUsers.validEmailsList=_.difference(this.viewModel.pendingUsers.validEmailsList,e)},i.prototype.arrayStringsToLowerCase=function(e){var t=_.map(e,(function(e){return e.toLowerCase()}));return t},i.prototype.tryRemoveSelectedUsers=function(){var i=this,n=_.filter(this.viewModel.editableUsers,(function(e){return e.shouldBeRemoved})),o=_.map(n,(function(e){return{objectId:e.objectId,principalType:e.principalType}}));this.viewModel.isReloadingList=!0,this.services.gatewaysMetadataService.deleteDataSourcePrincipals(this.dataSourceModel.gateway.id,this.dataSourceModel.id,t.models.GatewayModelConverter.convertToPrincipalAccessEntry(o,a.none)).then((function(){i.getDataSourceUsers()}),(function(t){i.viewModel.isReloadingList=!1,i.services.errorService.error(i.services.localizationService.get(e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+t.error.code),"AddDataSourceUser_Error",{requestId:t.requestId,ecsCorrelationId:t.activityId,statusCode:t.status.toString()})}))},i.prototype.getDataSourceUsers=function(){var t=this;this.viewModel.isReloadingList=!0,this.services.gatewaysMetadataService.getDataSourcePrincipals(this.dataSourceModel.gateway.id,this.dataSourceModel.id).then((function(e){var i=_.filter(e,(function(e){return e.accessRight===a.read||e.accessRight===a.write})),n=_.flatten(_.map(i,(function(e){return e.principalList})));t.viewModel.editableUsers=_.map(n,(function(e){var t=e.givenName?e.givenName:e.displayName,i=e.familyName?e.familyName:"";return{objectId:e.objectId,name:t+" "+i,emailAddress:e.emailAddress,principalType:e.principalType,shouldBeRemoved:!1}})),t.viewModel.isReloadingList=!1}),(function(i){t.services.errorService.error(t.services.localizationService.get(e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+i.error.code),"GetDataSourceUsers_Error",{requestId:i.requestId,ecsCorrelationId:i.activityId,statusCode:i.status.toString()}),t.viewModel.isReloadingList=!1}))},i.prototype.shouldDisableRemoveButton=function(){return _.all(this.viewModel.editableUsers,(function(e){return!e.shouldBeRemoved}))},i.prototype.mapUserNames=function(){this.services.telemetryService.logEvent(e.telemetry.SettingsOpenGatewayDatasourceUPNMappingPane),this.scope.$emit(t.constants.showGatewayUserMappingPaneEventName)},i})();i.DataSourceUsersController=o})(i=t.controllers||(t.controllers={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=e.common.contracts.gateway.AccessRight,n=(function(){function i(e,i){var a=this;this.scope=e,this.services=i,this.gatewayModel=e.gatewayModel,this.viewModel=this.scope.viewModel=new t.models.DataSourceUserModel,this.scope.tryAddAdministrators=function(){return a.tryAddAdministrators()},this.scope.tryRemoveSelectedAdminstrators=function(){return a.tryRemoveSelectedAdministrators()},this.scope.shouldDisableRemoveButton=function(){return a.shouldDisableRemoveButton()},this.getGatewayAdministrators(),this.startWatchGatewayModel()}return i.createOptions=function(){return{additionalServices:["errorService","localizationService","gatewaysMetadataService"]}},i.prototype.startWatchGatewayModel=function(){var e=this;this.scope.$watch("gatewayModel",(function(t,i){i!==t&&(e.gatewayModel=e.scope.gatewayModel,e.getGatewayAdministrators())}))},i.prototype.tryAddAdministrators=function(){var i=this;this.viewModel.pendingUsers.validationTrigger()&&(this.viewModel.isAdding=!0,this.validateEmailAddresses(),this.viewModel.pendingUsers.validEmailsList.length>0?this.services.gatewaysMetadataService.addGatewayPrincipals(this.gatewayModel.id,t.models.GatewayModelConverter.convertUsers(this.viewModel.pendingUsers.validEmailsList,a.read|a.write)).then((function(){i.viewModel.isAdding=!1,i.viewModel.pendingUsers.inputUserList=[],i.getGatewayAdministrators()}),(function(t){i.viewModel.isAdding=!1,i.services.errorService.error(i.services.localizationService.get(e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+t.error.code),"AddGatewayAdmin_Error",{requestId:t.requestId,ecsCorrelationId:t.activityId,statusCode:t.status.toString()})})):(this.viewModel.isAdding=!1,this.viewModel.pendingUsers.inputUserList=[]))},i.prototype.validateEmailAddresses=function(){this.viewModel.pendingUsers.validEmailsList=_.unique(this.arrayStringsToLowerCase(this.viewModel.pendingUsers.validEmailsList));var e=this.arrayStringsToLowerCase(_.map(this.viewModel.editableUsers,(function(e){return e.emailAddress})));this.viewModel.pendingUsers.validEmailsList=_.difference(this.viewModel.pendingUsers.validEmailsList,e)},i.prototype.arrayStringsToLowerCase=function(e){var t=_.map(e,(function(e){return e.toLowerCase()}));return t},i.prototype.tryRemoveSelectedAdministrators=function(){var i=this,n=_.filter(this.viewModel.editableUsers,(function(e){return e.shouldBeRemoved})),o=_.map(n,(function(e){return{objectId:e.objectId,principalType:e.principalType}}));this.viewModel.isReloadingList=!0,this.services.gatewaysMetadataService.deleteGatewayPrincipals(this.gatewayModel.id,t.models.GatewayModelConverter.convertToPrincipalAccessEntry(o,a.none)).then((function(){i.getGatewayAdministrators()}),(function(t){i.viewModel.isReloadingList=!1,i.services.errorService.error(i.services.localizationService.get(e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+t.error.code),"AddGatewayAdmin_Error",{requestId:t.requestId,ecsCorrelationId:t.activityId,statusCode:t.status.toString()})}))},i.prototype.getGatewayAdministrators=function(){var t=this;this.viewModel.isReloadingList=!0,this.services.gatewaysMetadataService.getGatewayPrincipals(this.gatewayModel.id).then((function(e){var i=_.filter(e,(function(e){return e.accessRight&(a.read|a.write)})),n=_.flatten(_.map(i,(function(e){return e.principalList})));t.viewModel.editableUsers=_.map(n,(function(e){var t=e.givenName?e.givenName:e.displayName,i=e.familyName?e.familyName:"";return{objectId:e.objectId,name:t+" "+i,emailAddress:e.emailAddress,principalType:e.principalType,shouldBeRemoved:!1}})),t.viewModel.isReloadingList=!1}),(function(i){t.services.errorService.error(t.services.localizationService.get(e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+i.error.code),"GetGatewaysAdmins_Error",{requestId:i.requestId,ecsCorrelationId:i.activityId,statusCode:i.status.toString()}),t.viewModel.isReloadingList=!1}))},i.prototype.shouldDisableRemoveButton=function(){return _.all(this.viewModel.editableUsers,(function(e){return!e.shouldBeRemoved}))},i})();i.GatewayAdministratorsController=n})(i=t.controllers||(t.controllers={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){var i=this;this.scope=e,this.services=t,this.scope.onTabSelected=function(e){return i.onTabSelected(e)}}return e.prototype.onTabSelected=function(e){this.scope.viewModel.tabSelectionType=e},e})();e.GatewayController=t})(t=e.controllers||(e.controllers={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=e.connectivity.models.DataSourceContextMenuItemModel,n=e.connectivity.models.GatewayContextMenuItemModel,o=e.connectivity.models.GatewayStatus,s=e.connectivity.models.GatewayTabSelectionType,r=(function(){function i(e,i){var a=this;this.scope=e,this.services=i,this.scope.onItemSelected=function(e,t){return a.onItemSelected(e,t)},this.scope.getSelectionType=function(){return a.getSelectionType()},this.scope.tryAddDataSource=function(){return a.tryAddDataSource(a.scope.viewModel.currentGateway)},this.scope.testConnections=function(){return a.testConnections()},this.scope.isLoading=!1,this.loadGateways(),this.scope.$on(t.constants.dataSourceCreatedEventName,(function(e,t){return a.updateCurrentDataSource(e,t[0])})),this.scope.$on(t.constants.discardAddingDataSourceEventName,(function(e){return a.discardAddingDataSource(e)})),this.scope.$on(t.constants.addDataSourceEventName,(function(e){return a.tryAddDataSource(a.scope.viewModel.currentGateway)}))}return i.createOptions=function(){return{additionalServices:["errorService","gatewayDataService","gatewaysMetadataService","localizationService","navigation","promiseFactory"]}},i.prototype.updateCurrentDataSource=function(e,t){e.stopPropagation(),this.scope.viewModel.currentDataSourceId=t,this.loadDataSourceContextMenu(this.scope.viewModel.currentDataSource)},i.prototype.discardAddingDataSource=function(e){e.stopPropagation(),this.scope.viewModel.currentGateway.dataSources.pop(),this.openItem(this.scope.viewModel.currentGatewayId,null)},i.prototype.gatewayExists=function(e){var t=_.find(this.scope.viewModel.gateways,(function(t){return t.id===e}));return null!==t&&void 0!==t},i.prototype.dataSourceExists=function(e,t){var i=_.find(e.dataSources,(function(e){return e.id===t}));return null!==i&&void 0!==i},i.prototype.tryInitializeGatewaySelection=function(){if(this.scope.viewModel.gateways.length>0){var e=this.services.navigation,t=e?e.gatewayId:null,i=e?e.dataSourceId:null;null!==t&&this.gatewayExists(t)?i||this.onItemSelected(t,null):(t=this.scope.viewModel.gateways[0].id,this.onItemSelected(t,null))}},i.prototype.tryInitializeDataSourceSelection=function(e){var t=this.services.navigation,i=t?t.gatewayId:null,a=t?t.dataSourceId:null;e.id===i&&a&&(a===-1?(this.onItemSelected(i,null),this.tryAddDataSource(e)):this.dataSourceExists(e,a)?this.onItemSelected(i,a):this.onItemSelected(i,null))},i.prototype.loadGateways=function(){var e=this;this.scope.isLoading=!0,this.services.gatewaysMetadataService.getGateways().then((function(i){e.scope.viewModel={gateways:t.models.GatewayModelConverter.convertSettingsGateways(i),currentGatewayId:0,currentDataSourceId:0,currentGateway:null,currentDataSource:null},e.scope.isLoading=!1,e.tryInitializeGatewaySelection(),e.loadGatewaysState()}),(function(t){e.services.errorService.error(e.services.localizationService.get("SettingsGateways_Error_FailedToLoad"),"SettingsGateways_Error_FailedToLoad")}))},i.prototype.loadGatewaysState=function(){for(var e=0;e<this.scope.viewModel.gateways.length;e++){var t=this.scope.viewModel.gateways[e];this.loadGatewayContextMenu(t),this.loadGatewayStatus(t),this.loadDataSources(t)}},i.prototype.loadGatewayContextMenu=function(t){var i=this,a=new n(t);a.actions=[],a.actions.push({text:this.services.localizationService.get("AddDataSourceText"),action:function(){i.tryAddDataSource(t)}}),a.actions.push({text:this.services.localizationService.get("DashboardContextMenu_Delete"),action:function(){i.tryDeleteGateway(t)}}),a.metadata=[],a.metadata.push({type:e.common.models.ContextMenuItemMetadataType.Status,status:e.common.models.ContextMenuItemMetadataStatus.Unknown,value:""}),t.contextMenuItem=a},i.prototype.tryDeleteGateway=function(e){var t=this,i=this.services.errorService,a=i.control(),n=this.services.localizationService.get("SettingsGateway_DeleteWarning_YesOption"),o=this.services.localizationService.get("SettingsDataSource_DiscardChangesWarning_CancelOption"),s=[new InJs.ModalDialogAction(n,function(i,n){a.hideDialog(),t.deleteGateway(e)}),new InJs.ModalDialogAction(o,function(e,t){a.hideDialog()})],r=this.services.localizationService.get("SettingsGateway_DeleteWarning_Title"),c=this.services.localizationService.get("SettingsGateway_DeleteWarning_Message");a.showCustomDialog(r,$("<div/>").text(c),s,(function(e){e.parent().find('input[value="'+o+'"]').focus()}),!0,!0)},i.prototype.deleteGateway=function(t){var i=this;t&&this.services.gatewaysMetadataService.deleteGateway(t.id).then((function(){var e=i.scope.viewModel.gateways.indexOf(t);e>-1&&(i.scope.viewModel.gateways.splice(e,1),i.scope.viewModel.gateways.length>0?i.onItemSelected(i.scope.viewModel.gateways[0].id,null):i.onItemSelected(null,null))}),(function(t){i.services.errorService.error(i.services.localizationService.get(e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+t.error.code),"Gateways_Error_FailedToDelete",{requestId:t.requestId,ecsCorrelationId:t.activityId,statusCode:t.status.toString()})}))},i.prototype.getCurrentGateway=function(){return this.scope.viewModel.currentGateway},i.prototype.getCurrentDataSource=function(){return this.scope.viewModel.currentDataSource},i.prototype.loadGatewayStatus=function(t){var i=this;t.isLoadingStatus=!0,this.services.gatewaysMetadataService.getGatewayStatus(t.id).then((function(a){if(t.status=o.Live,t.isLoadingStatus=!1,t.contextMenuItem){var n=t.contextMenuItem.metadata[0];n.status=e.common.models.ContextMenuItemMetadataStatus.Success,n.value=i.services.localizationService.get("SettingsGateway_OnlineMessage")}}),(function(a){t.isLoadingStatus=!1,t.status=o.NotReachable,e.helpers.PowerBIServiceExceptionErrorHelper.GenerateErrorMessage(a.error).done((function(n){if(t.connectionError=i.services.localizationService.get(e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+a.error.code),t.contextMenuItem){var o=t.contextMenuItem.metadata[0];o.status=e.common.models.ContextMenuItemMetadataStatus.Error,o.value=i.services.localizationService.get("SettingsGateway_NotConnectedMessage")}var s=[];if(n&&n.displayableErrorInfo)for(var r=0,c=n.displayableErrorInfo;r<c.length;r++){var l=c[r];s.push({key:l.errorInfoKey,value:l.errorInfoValue})}t.traceDetails={requestId:a.requestId,activityId:a.activityId,clusterUri:clusterUri,errorCode:a.status.toString(),error:a.error.code,details:s,time:(new Date).toString(),version:e.build,linkText:i.services.localizationService.get("SettingsGateways_TroubleshootMessage"),link:"https://go.microsoft.com/fwlink/?LinkId=627095"}}))}))},i.prototype.loadDataSources=function(i){var a=this;i.isLoadingDataSources=!0,this.services.gatewaysMetadataService.getDataSources(i.id).then((function(e){i.dataSources=t.models.GatewayModelConverter.convertDataSources(e),i.isLoadingDataSources=!1,a.tryInitializeDataSourceSelection(i),a.loadDataSourcesState(i)}),(function(t){a.services.errorService.error(a.services.localizationService.get(e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+t.error.code),"SettingsDataSources_Error_FailedToLoad",{requestId:t.requestId,ecsCorrelationId:t.activityId,statusCode:t.status.toString()})}))},i.prototype.loadDataSourcesState=function(e){for(var t=0;t<e.dataSources.length;t++){var i=e.dataSources[t];i.gateway=e,this.loadDataSourceContextMenu(i),this.loadDataSourceStatus(e,i)}},i.prototype.loadDataSourceContextMenu=function(t){var i=this,n=new a(t);n.actions=[],n.actions.push({text:this.services.localizationService.get("DashboardContextMenu_Delete"),action:function(){i.tryDeleteDataSource(t)}}),n.metadata=[],n.metadata.push({type:e.common.models.ContextMenuItemMetadataType.Status,status:e.common.models.ContextMenuItemMetadataStatus.Unknown,value:""}),t.contextMenuItem=n},i.prototype.tryDeleteDataSource=function(e){var t=this,i=this.services.errorService,a=i.control(),n=this.services.localizationService.get("SettingsDataSource_DeleteWarning_YesOption"),o=this.services.localizationService.get("SettingsDataSource_DiscardChangesWarning_CancelOption"),s=[new InJs.ModalDialogAction(n,function(i,n){a.hideDialog(),t.deleteDataSource(e)}),new InJs.ModalDialogAction(o,function(e,t){a.hideDialog()})],r=this.services.localizationService.get("SettingsDataSource_DeleteWarning_Title"),c=this.services.localizationService.get("SettingsDataSource_DeleteWarning_Message");a.showCustomDialog(r,$("<div/>").text(c),s,(function(e){e.parent().find('input[value="'+o+'"]').focus()}),!0,!0)},i.prototype.deleteDataSource=function(t){var i=this,a=t.gateway;if(a&&t)if(t.id<0){var n=a.dataSources.indexOf(t);n>-1&&(a.dataSources.splice(n,1),this.openItem(a.id,null))}else this.services.gatewaysMetadataService.deleteDataSource(a.id,t.id).then((function(){var e=a.dataSources.indexOf(t);e>-1&&(a.dataSources.splice(e,1),i.onItemSelected(a.id,null))}),(function(t){i.services.errorService.error(i.services.localizationService.get(e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+t.error.code),"DataSources_Error_FailedToDelete",{requestId:t.requestId,ecsCorrelationId:t.activityId,statusCode:t.status.toString()})}))},i.prototype.loadDataSourceStatus=function(t,i){var a=this;i.id!==-1&&this.services.gatewaysMetadataService.getDataSourceStatus(t.id,i.id).then((function(){if(i.connected=!0,i.connectionError=null,i.contextMenuItem){var t=i.contextMenuItem.metadata[0];t.status=e.common.models.ContextMenuItemMetadataStatus.Success,t.value=a.services.localizationService.get("SettingsGateway_OnlineMessage")}}),(function(t){i.connected=!1,i.gateway.isExpanded=!0,e.helpers.PowerBIServiceExceptionErrorHelper.GenerateErrorMessage(t.error).done((function(n){if(i.connectionError=a.services.localizationService.get(e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+t.error.code),i.contextMenuItem){var o=i.contextMenuItem.metadata[0];o.status=e.common.models.ContextMenuItemMetadataStatus.Error,o.value=a.services.localizationService.get("SettingsGateway_NotConnectedMessage")}var s=[];if(n&&n.displayableErrorInfo)for(var r=0,c=n.displayableErrorInfo;r<c.length;r++){var l=c[r];s.push({key:l.errorInfoKey,value:l.errorInfoValue})}i.traceDetails={requestId:t.requestId,activityId:t.activityId,clusterUri:clusterUri,errorCode:t.status.toString(),error:t.error.code,details:s,time:(new Date).toString(),version:e.build,linkText:a.services.localizationService.get("SettingsGateways_TroubleshootMessage"),link:"https://go.microsoft.com/fwlink/?LinkId=627095"}}))}))},i.prototype.generateUniqueDataSourceName=function(){if(!this.scope.viewModel.currentGateway)return null;for(var e=this.services.localizationService.get("NewDataSourceName"),t=e,i=0;;){var a=_.find(this.scope.viewModel.currentGateway.dataSources,(function(e){return e.displayName===t}));if(!a)break;i++,t=e+" "+i}return t},i.prototype.tryAddDataSource=function(e){var i=this;this.scope.viewModel.currentDataSourceId<0||(this.scope.viewModel.currentDataSource&&this.scope.viewModel.currentDataSource.isDirty&&this.scope.viewModel.currentDataSource.isDirty()?this.showDiscardPopup().then((function(){i.addDataSource(e)})):this.scope.viewModel.currentGateway&&this.scope.viewModel.currentGateway.isDirty?this.scope.$broadcast(t.constants.onDirtyGatewaySelectionChanging,"SettingsGateway_DiscardChangesWarning_GatewayMessage",(function(){i.addDataSource(e),i.scope.$apply()})):this.addDataSource(e))},i.prototype.addDataSource=function(e){var t={id:-1,displayName:this.generateUniqueDataSourceName(),dataSourceType:void 0,gateway:e,connectionInfo:{},users:null,tabSelectionType:s.Settings};e.dataSources.push(t),this.loadDataSourceContextMenu(t),this.openItem(e.id,t.id)},i.prototype.onItemSelected=function(e,i){var a=this;e===this.scope.viewModel.currentGatewayId&&i===this.scope.viewModel.currentDataSourceId||(this.scope.viewModel.currentDataSource&&this.scope.viewModel.currentDataSource.isDirty&&this.scope.viewModel.currentDataSource.isDirty()?this.showDiscardPopup().then((function(){a.scope.viewModel.currentDataSourceId<0&&a.scope.viewModel.currentGateway.dataSources.pop(),a.openItem(e,i)})):this.scope.viewModel.currentGateway&&this.scope.viewModel.currentGateway.isDirty?this.scope.$broadcast(t.constants.onDirtyGatewaySelectionChanging,"SettingsGateway_DiscardChangesWarning_GatewayMessage",(function(){a.openItem(e,i),a.scope.$apply()})):(this.scope.viewModel.currentDataSource&&this.scope.viewModel.currentDataSourceId<0&&this.scope.viewModel.currentGateway.dataSources.pop(),this.openItem(e,i)))},i.prototype.openItem=function(e,i){var a=this,n=this.scope.viewModel;n.currentGatewayId=e,n.currentDataSourceId=i,n.currentGateway=this.getCurrentGatewayModel(),this.services.gatewayDataService.selectedGatewayDatasource=n.currentDataSource=this.getCurrentDataSourceModel(),i?this.scope.viewModel.currentGateway.isExpanded=!0:requestAnimationFrame((function(){return a.scope.$broadcast(t.constants.onGatewaySelectionChanged)})),this.services.navigation&&this.services.navigation.navigateToGatewayItem(e,i)},i.prototype.getSelectionType=function(){return this.scope.viewModel.currentGatewayId?this.scope.viewModel.currentDataSourceId?e.connectivity.models.GatewaysSelectionType.DataSource:e.connectivity.models.GatewaysSelectionType.Gateway:e.connectivity.models.GatewaysSelectionType.None},i.prototype.getCurrentGatewayModel=function(){var e=this;return _.find(this.scope.viewModel.gateways,(function(t){return t.id===e.scope.viewModel.currentGatewayId}))},i.prototype.getCurrentDataSourceModel=function(){var e=this.scope.viewModel.currentDataSourceId;if(e){var t=this.getCurrentGatewayModel();if(t)return _.find(t.dataSources,(function(t){return t.id===e}))}return null},i.prototype.showDiscardPopup=function(){var e=this.services.promiseFactory.defer(),t=this.services.errorService,i=t.control(),a=this.services.localizationService.get("SettingsDataSource_DiscardChangesWarning_YesOption"),n=this.services.localizationService.get("SettingsDataSource_DiscardChangesWarning_CancelOption"),o=[new InJs.ModalDialogAction(a,function(t,a){i.hideDialog(),e.resolve(null)}),new InJs.ModalDialogAction(n,function(t,a){i.hideDialog(),e.reject()})],s=this.services.localizationService.get("SettingsDataSource_DiscardChangesWarning_Title"),r=this.services.localizationService.get("SettingsDataSource_DiscardChangesWarning_DataSourceMessage");return i.showCustomDialog(s,$("<div/>").text(r),o,(function(e){e.parent().find('input[value="'+n+'"]').focus()}),!0,!0),e.promise},i.prototype.testConnections=function(){if(this.scope.viewModel.gateways)for(var e=0,t=this.scope.viewModel.gateways;e<t.length;e++){var i=t[e];if(this.loadGatewayStatus(i),i.dataSources)for(var a=0,n=i.dataSources;a<n.length;a++){var o=n[a];this.loadDataSourceStatus(i,o)}}},i})();i.GatewaysController=r})(i=t.controllers||(t.controllers={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(e,i){var a=this;this.scope=e,this.services=i,this.scope.updateDirtyFlag=function(){return a.updateDirtyFlag()},this.scope.applyChanges=function(){return a.applyChanges()},this.scope.discardChanges=function(){return a.discardChanges()},this.scope.addDataSource=function(){return a.addDataSource()};var n=this.scope.$on(t.constants.onDirtyGatewaySelectionChanging,(function(e,t,i){return a.discardOrCancel(t,i)})),o=this.scope.$on(t.constants.onGatewaySelectionChanged,(function(){return a.initializeGateway()}));this.initializeGateway(),this.scope.$on("$destroy",(function(){n(),o()}))}return i.createOptions=function(){return{additionalServices:["errorService","localizationService","gatewaysMetadataService","telemetryService"]}},i.prototype.initializeGateway=function(){var e=this.scope.viewModel;e.contactInformationString=this.getContactInformationString(e.gatewayAnnotation.gatewayContactInformation),this.initializeOriginalValues()},i.prototype.updateDirtyFlag=function(){var e=this.scope.viewModel;e.isDirty=e.displayName!==e.originalValues.name||e.description!==e.originalValues.description||e.gatewayAnnotation.gatewayDepartment!==e.originalValues.department||e.contactInformationString!==e.originalValues.contactInformationString},i.prototype.discardOrCancel=function(e,t){var i=this,a=this.services.errorService.control(),n=this.services.localizationService.get("SettingsDataSource_DiscardChangesWarning_YesOption"),o=this.services.localizationService.get("SettingsDataSource_DiscardChangesWarning_CancelOption"),s=[new InJs.ModalDialogAction(n,function(e,n){i.restoreOriginalValues(),i.scope.$apply(),a.hideDialog(),t&&t()}),new InJs.ModalDialogAction(o,function(e,t){a.hideDialog()})],r=this.services.localizationService.get("SettingsDataSource_DiscardChangesWarning_Title"),c=this.services.localizationService.get(e);a.showCustomDialog(r,$("<div/>").text(c),s,(function(e){e.parent().find('input[value="'+o+'"]').focus()}),!0,!0)},i.prototype.restoreOriginalValues=function(){var e=this.scope.viewModel;e.displayName=e.originalValues.name,e.description=e.originalValues.description,e.gatewayAnnotation.gatewayDepartment=e.originalValues.department,e.contactInformationString=e.originalValues.contactInformationString,e.isDirty=!1},i.prototype.initializeOriginalValues=function(){var e=this.scope.viewModel;e.originalValues={name:e.displayName,description:e.description,department:e.gatewayAnnotation.gatewayDepartment,contactInformationString:e.contactInformationString},e.isDirty=!1},i.prototype.getContactInformationString=function(e){var t="";return e&&(t=e.join(";")),t},i.prototype.parseContactInformation=function(e){return e.split(";")},i.prototype.applyChanges=function(){var t=this;this.scope.viewModel.gatewayAnnotation.gatewayContactInformation=this.parseContactInformation(this.scope.viewModel.contactInformationString);var i={gatewayName:this.scope.viewModel.displayName,gatewayDescription:this.scope.viewModel.description,gatewayAnnotation:JSON.stringify(this.scope.viewModel.gatewayAnnotation)};this.scope.viewModel.isWaitingForGatewayUpdate=!0,this.services.gatewaysMetadataService.updateGateway(this.scope.viewModel.id,i).then((function(){t.scope.viewModel.isWaitingForGatewayUpdate=!1,t.initializeOriginalValues()}),(function(i){t.scope.viewModel.isWaitingForGatewayUpdate=!1,t.services.errorService.error(t.services.localizationService.get(e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+i.error.code),"UpdateGateway_Error",{requestId:i.requestId,ecsCorrelationId:i.activityId,statusCode:i.status.toString()})}))},i.prototype.discardChanges=function(){this.discardOrCancel("SettingsGateway_DiscardChangesWarning_GatewaySettingsMessage",null)},i.prototype.addDataSource=function(){this.scope.$emit(t.constants.addDataSourceEventName)},i})();i.GatewaySettingsController=a})(i=t.controllers||(t.controllers={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(e,i){var a=this;this.scope=e,this.services=i,this.scope.viewModel.title=this.services.localizationService.format("SettingsGateways_ConnectToServer",[this.scope.viewModel.serverName]),this.scope.viewModel.gatewayOnlineStatusLabel=this.services.localizationService.format("Gateways_Status_Bracketed",[this.services.localizationService.get("Gateways_Status_Online")]),this.scope.viewModel.gatewayOfflineStatusLabel=this.services.localizationService.format("Gateways_Status_Bracketed",[this.services.localizationService.get("Gateways_Status_Offline")]),this.scope.gatewayTypeSelected=function(){return a.gatewayTypeSelected()},this.scope.enterpriseGatewaySelected=function(e){return a.enterpriseGatewaySelected(e)},this.scope.navigateToManageGateways=function(){return a.navigateToManageGateways()},this.scope.$on(t.constants.gatewaySelectionAppliedEventName,(function(){return a.onGatewaySelectionApplied()})),this.scope.$on(t.constants.gatewaySelectionDiscardedEventName,(function(){return a.onGatewaySelectionDiscarded()})),this.scope.isSovereignCloud=this.services.featureSwitchService.featureSwitches.isSovereignCloud,this.populateGatewayTable()}return i.createOptions=function(){return{additionalServices:["telemetryService","errorService","localizationService","selectGatewayService","gatewaysMetadataService","featureSwitchService","navigation"]
}},i.prototype.populateGatewayTable=function(){var e=this;this.services.gatewaysMetadataService.getModelDataSources(this.scope.viewModel.modelId).then((function(i){if(e.scope.cachedDiscoverDatasourceResponse=i,0===i.gateways.length&&0===i.datasources.length)return e.scope.viewModel.isCloudScheduleRefresh||e.loadPersonalGateway(),e.scope.viewModel.enterpriseGateways=[],e.scope.viewModel.egwStatusLoaded=!0,void(e.scope.viewModel.useEnterpriseGateway=!1);var a=e.services.selectGatewayService.getAvailableGateways(i);e.scope.viewModel.serverName=e.services.selectGatewayService.getServerName(i),e.scope.viewModel.enterpriseGateways=t.models.GatewayModelConverter.convertSettingsGateways(a),e.loadSelectedGateway(i),e.loadDataSourcesStatus(i.datasources),e.loadDmtsPlaceHolderPersonalGatewayId(i),e.loadPersonalGateway(),e.scope.viewModel.egwStatusLoaded=!0}),(function(i){i.error&&i.error.code===t.constants.ServerError_ModelHasNoPowerBIDMMoniker&&(e.scope.viewModel.isCloudScheduleRefresh||e.loadPersonalGateway(),e.scope.viewModel.enterpriseGateways=[],e.scope.viewModel.egwStatusLoaded=!0,e.scope.viewModel.useEnterpriseGateway=!1)}))},i.prototype.loadDmtsPlaceHolderPersonalGatewayId=function(e){var t=_.find(e.gateways,(function(e){return null===e.gatewayName}));t&&(this.scope.viewModel.dmtsPlaceHolderGatewayId=t.gatewayId)},i.prototype.loadPersonalGateway=function(){var e=this;this.services.gatewaysMetadataService.getPersonalGateway().then((function(i){e.scope.viewModel.pgw=i,e.scope.viewModel.pgwAnnotation=t.models.GatewayModelConverter.getGatewayAnnotation(e.scope.viewModel.pgw),e.services.gatewaysMetadataService.getGatewayStatus(e.scope.viewModel.pgw.gatewayId).then((function(t){e.scope.viewModel.pgw.gatewayStatus=t.gatewayStatus}),(function(e){})),e.updateStatus()}),(function(e){}))},i.prototype.loadDataSourcesStatus=function(e){if(this.scope.viewModel.showStatus)for(var t=0,i=this.scope.viewModel.enterpriseGateways;t<i.length;t++){var a=i[t];this.getDataSourcesStatus(a,e,this.services.gatewaysMetadataService)}},i.prototype.getDataSourcesStatus=function(t,i,a){var n,o,s=this,r=this.getDataSourceIds(t.id,i);if(n=r.length,0===n)return void(t.status=e.connectivity.models.GatewayStatus.NotReachable);o=!0,t.status=e.connectivity.models.GatewayStatus.Unknown;for(var c=0,l=r;c<l.length;c++){var d=l[c];a.getDataSourceStatus(t.id,d).then((function(){o&&(n--,0===n&&(t.status=e.connectivity.models.GatewayStatus.Live,s.updateStatus()))}),(function(i){o=!1,t.status=e.connectivity.models.GatewayStatus.NotReachable,s.updateStatus()}))}},i.prototype.getDataSourceIds=function(e,t){for(var i=[],a=0,n=t;a<n.length;a++){var o=n[a];o.gatewayId===e&&i.push(o.dataSourceId)}return i},i.prototype.loadSelectedGateway=function(e){var t=this.services.selectGatewayService.getSelectedGateway(e),i=this.services.selectGatewayService.getSelectedGatewayType(t);switch(i){case 0:this.scope.viewModel.selectedGatewayId=-1,this.scope.viewModel.useEnterpriseGateway=void 0,this.scope.viewModel.egwAccessLost=this.services.selectGatewayService.isEGWAccessLost(e);break;case 1:this.scope.viewModel.selectedGatewayId=t.gatewayId,this.scope.viewModel.useEnterpriseGateway=!1;break;case 2:this.scope.viewModel.selectedGatewayId=t.gatewayId,this.scope.viewModel.useEnterpriseGateway=!0}},i.prototype.gatewayTypeSelected=function(){this.scope.viewModel.selectedGatewayId=this.scope.viewModel.useEnterpriseGateway?this.scope.viewModel.enterpriseGateways[0].id:this.scope.viewModel.dmtsPlaceHolderGatewayId,this.scope.viewModel.isDirty=!0},i.prototype.enterpriseGatewaySelected=function(e){this.scope.viewModel.useEnterpriseGateway=!0,this.scope.viewModel.selectedGatewayId=e,this.scope.viewModel.isDirty=!0},i.prototype.onGatewaySelectionApplied=function(){var e=this;this.services.gatewaysMetadataService.getModelDataSources(this.scope.viewModel.modelId).then((function(i){e.scope.cachedDiscoverDatasourceResponse=i,e.scope.$emit(t.constants.selectGatewayStatusReadyEventName)}),(function(e){})),this.scope.viewModel.isDirty=!1},i.prototype.onGatewaySelectionDiscarded=function(){this.loadSelectedGateway(this.scope.cachedDiscoverDatasourceResponse),this.scope.viewModel.isDirty=!1},i.prototype.updateStatus=function(){if(this.scope.viewModel.pgw&&this.scope.viewModel.pgw.gatewayStatus!==e.common.contracts.gateway.GatewayStatus.NotInstalled){for(var i=0,a=this.scope.viewModel.enterpriseGateways;i<a.length;i++){var n=a[i];if(n.status===e.connectivity.models.GatewayStatus.Unknown)return}this.scope.$emit(t.constants.selectGatewayStatusReadyEventName)}},i.prototype.navigateToManageGateways=function(){this.services.navigation&&this.services.navigation.navigateToGateways()},i})();i.SelectGatewayController=a})(i=t.controllers||(t.controllers={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(){this.restrict="E",this.templateUrl="views/datasourceView.html",this.replace=!0,this.scope={viewModel:"="},this.controller=e.common.Services.createController(t.controllers.DataSourceController)}return i})();i.Datasource=a})(i=t.directives||(t.directives={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(){this.restrict="E",this.templateUrl="views/datasourceSettingsView.html",this.replace=!0,this.scope={dataSourceModel:"=datasourceModel"},this.controller=e.common.Services.createController(t.controllers.DataSourceSettingsController)}return i})();i.DatasourceSettings=a})(i=t.directives||(t.directives={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(){this.restrict="E",this.templateUrl="views/datasourceUsersView.html",this.replace=!0,this.scope={dataSourceModel:"=datasourceModel"},this.controller=e.common.Services.createController(t.controllers.DataSourceUsersController)}return i})();i.DatasourceUsers=a})(i=t.directives||(t.directives={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(){this.restrict="E",this.templateUrl="views/gatewayView.html",this.replace=!0,this.scope={viewModel:"="},this.controller=e.common.Services.createController(t.controllers.GatewayController)}return i})();i.Gateway=a})(i=t.directives||(t.directives={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(){this.restrict="E",this.templateUrl="views/gatewayAdministratorsView.html",this.replace=!0,this.scope={gatewayModel:"= gatewayModel"},this.controller=e.common.Services.createController(t.controllers.GatewayAdministratorsController)}return i})();i.GatewayAdministrators=a})(i=t.directives||(t.directives={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(){this.restrict="E",this.templateUrl="views/gatewaysView.html",this.replace=!0,this.controller=e.common.Services.createController(t.controllers.GatewaysController)}return i})();i.Gateways=a})(i=t.directives||(t.directives={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(){this.restrict="E",this.replace=!0,this.templateUrl="views/selectGatewayView.html",this.scope={viewModel:"="},this.controller=e.common.Services.createController(t.controllers.SelectGatewayController)}return i})();i.SelectGateway=a})(i=t.directives||(t.directives={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(){return new i}e.createGatewayDataService=t;var i=(function(){function e(){}return e})()})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t,a,n,o){return new i(e,t,a,n,o)}e.createSelectGatewayService=t;var i=(function(){function t(e,t,i,a,n){this.rootScope=e,this.compile=t,this.gatewaysMetadataService=i,this.modalDialogService=a,this.localizationService=n}return t.prototype.bindModelToGateway=function(e,t,i,a){var n=this;this.showDialog(e,(function(a){return n.bindModel(e,a,t,i)}),a)},t.prototype.bindModel=function(e,t,i,a){this.gatewaysMetadataService.bindModelToGateway(e,t).then((function(){i()}),(function(e){a()}))},t.prototype.getAvailableGateways=function(e){if(0===e.monikers.length)return[];var t=_.filter(e.monikers,(function(e){return e.monikerGateways.length>0})),i=_.map(t,(function(e){return _.map(e.monikerGateways,(function(e){return e.gatewayId}))})),a=_.intersection.apply(_,i),n=_.filter(e.gateways,(function(e){return a.indexOf(e.gatewayId)!==-1&&e.gatewayPublicKey}));return n},t.prototype.getServerName=function(e){if(0===e.monikers.length)return null;if(0===e.monikers[0].monikerDataSources.length)return null;try{var t=JSON.parse(e.monikers[0].monikerDataSources[0].connectionDetails);return t.server}catch(e){return null}},t.prototype.getSelectedGateway=function(e){for(var t=[],i=_.some(e.monikers,(function(e){return 0===e.monikerDataSources.length})),a=0,n=e.monikers;a<n.length;a++){var o=n[a],s=_.map(o.monikerDataSources,(function(e){return e.dataSourceId}));if(!_.every(s))return i?_.find(e.gateways,(function(e){return _.isEmpty(e.gatewayName)})):void 0;t=t.concat(s)}var r=_.filter(e.datasources,(function(e){return t.indexOf(e.dataSourceId)>-1})),c=_.map(r,(function(e){return e.gatewayId})),l=_.uniq(c);if(1===l.length)return _.find(e.gateways,(function(e){return l[0]===e.gatewayId}))},t.prototype.isEGWAccessLost=function(e){for(var t=[],i=0,a=e.monikers;i<a.length;i++){var n=a[i],o=_.map(n.monikerDataSources,(function(e){return e.dataSourceId}));if(!_.every(o))return!1;t=t.concat(o)}if(t.length>0)for(var s=0,r=t;s<r.length;s++){var c=r[s];if(!_.find(e.datasources,(function(e){return e.dataSourceId===c})))return!0}return!1},t.prototype.getSelectedGatewayType=function(e){return e?_.isEmpty(e.gatewayName)?1:2:0},t.prototype.showDialog=function(i,a,n){var o=new e.models.SelectGatewayModel(i,(!0),(!1),(!1)),s=this.rootScope.$new();s.viewModel=o;var r,c={dialogName:null,isDismissable:!0,scope:s,template:t.htmlTemplate,focusOnFirstButton:!0,dialogCssClass:"gatewaysDialog",dialogActions:[new InJs.ModalDialogAction(this.localizationService.get("SettingsGateways_Connect"),function(e,t){a(o.selectedGatewayId),r.closeDialog()}),new InJs.ModalDialogAction(this.localizationService.get("SettingsGateways_Cancel"),function(e,t){n(),r.closeDialog()})]};r=this.modalDialogService.showLegacyWebModalDialog(c)},t.htmlTemplate="<select-gateway view-model='viewModel'> </select-gateway>",t})();e.SelectGatewayService=i})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){e.switchToUserTabEventName="gatewaySettingsSwitchToUserTab",e.dataSourceCreatedEventName="gatewaySettingsDataSourceCreated",e.onDirtyGatewaySelectionChanging="gatewayOnDirtyGatewaySelectionChanging",e.onGatewaySelectionChanged="gatewayOnGatewaySelectionChanged",e.discardAddingDataSourceEventName="gatewaySettingsDiscardAddingDataSource",e.addDataSourceEventName="gatewayAddDataSource",e.gatewaySelectionAppliedEventName="gatewaySettingsGatewaySelectionApplied",e.gatewaySelectionDiscardedEventName="gatewaySettingsGatewaySelectionDiscarded",e.selectGatewayStatusReadyEventName="gatewaySettingsSelectGatewayStatusReady",e.showGatewayUserMappingPaneEventName="showGatewayUserMappingPaneEvent",e.hideGatewayUserMappingPaneEventName="hideGatewayUserMappingPaneEvent",e.DataSourceTypePrefix="SettingsDataSourceType_",e.AuthenticationMethodPrefix="SettingsAuthenticationMethod_",e.LabelPrefix="SettingsLabel_",e.ServerError_ModelHasNoPowerBIDMMoniker="ModelHasNoPowerBIDMMoniker",e.scriptVisualTenantSwitchId=15,e.exportPowerPointTenantSwitchId=17,e.templatePublishTenantSwitchId=19,e.auditingTenantSwitchId=21})(t=e.constants||(e.constants={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={})),angular.module("powerbi.settings").run(["$templateCache",function(e){e.put("views/datasourceSettingsView.html",'<div class="formContainer" ng-cloak><header ng-switch on="viewModel.waitingForDataSourceStatus || viewModel.isLoadingForm"><div ng-switch-when="true"><spinner></spinner></div><div ng-switch-when="false"><div class="successContainer" ng-if="!viewModel.hasTestConnectionFailure && dataSourceModel.connected"><span class="glyphicon glyph-small pbi-glyph-success glyph-success-color"></span><span localize="SettingsDataSource_SettingsConnectionSuccessfulText"></span></div><div ng-if="dataSourceModel.connectionError"><inline-message use-error-icon trace-details="dataSourceModel.traceDetails"><span localize="SettingsDataSource_SettingsConnectionErrorTitle"></span><span ng-bind="dataSourceModel.connectionError"></span></inline-message></div><div class="messageContainer" ng-switch on="viewModel.messageState"><div ng-switch-when="1"><inline-message class="inlineInfo"><span class="glyphicon glyph-small pbi-glyph-info"></span><span localize="SettingsDataSource_SettingsAddUserText1" localize-fragments><a fragment-index="0" href=\'\' localize="SettingsDataSource_SettingsAddUserText2" ng-click="switchToUserTab()"></a></span></inline-message></div><div ng-switch-when="2"><inline-message use-error-icon trace-details="dataSourceModel.traceDetails"><span ng-bind="dataSourceModel.errorTitle"></span><span ng-bind="dataSourceModel.compositeErrorMessage"></span></inline-message></div></div></div></header><form name="settingsForm" autocomplete="off" ng-hide="viewModel.isLoadingForm"><section><label for="dataSourceName" class="input-field-label" localize="SettingsDataSource_SettingsName"></label> <input id="dataSourceName" select-pristine-on-focus type="text" ng-disabled="!viewModel.isAddingDataSource || viewModel.waitingForDataSourceStatus" ng-model="viewModel.editableSettings.dataSourceName" required/></section><section><label for="dataSourceType" class="input-field-label" localize="SettingsDataSource_SettingsType"></label> <select id="dataSourceType" ng-disabled="!viewModel.isAddingDataSource || viewModel.waitingForDataSourceStatus" ng-model="viewModel.editableSettings.dataSourceType" ng-change="onDataSourceTypeChange()" ng-options="option.id as option.name for option in viewModel.dataSourceTypeOptions | filter: {name: \'\'}" required><option value="" disabled localize="SettingsGateway_SelectDataSourceType">Select a data source type</option></select></section><div class="connectionSettings" ng-show="viewModel.editableSettings.dataSourceType !== undefined"><section ng-repeat="label in viewModel.dataSourceTypeOptions[viewModel.editableSettings.dataSourceType].labels"> <label for="{{label.name}}" class="input-field-label">{{label.displayName}}</label> <input id="{{label.name}}" type="{{label.type}}" ng-disabled="!viewModel.isAddingDataSource || viewModel.waitingForDataSourceStatus" ng-model="viewModel.editableSettings[label.name]" required/></section><section ng-show="viewModel.dataSourceTypeOptions[viewModel.editableSettings.dataSourceType].authenticationMethodOptions.length> 1"><label for="dataSourceAuthenticationMethod" class="input-field-label" localize="SettingsDataSource_SettingsAuthenticationMethod"></label> <select id="dataSourceAuthenticationMethod" ng-disabled="viewModel.waitingForDataSourceStatus" ng-model="viewModel.editableSettings.authenticationMethod" ng-change="onAuthenticationMethodChange()" ng-options="option.id as option.name for option in viewModel.dataSourceTypeOptions[viewModel.editableSettings.dataSourceType].authenticationMethodOptions" required><option value="" disabled localize="SettingsGateway_SelectAnAuthenticationMethod">Select an authentication method</option></select></section><div ng-show="viewModel.editableSettings.authenticationMethod !== undefined && viewModel.editableSettings.authenticationMethod !== 0 && viewModel.editableSettings.authenticationMethod !== 2"><section><span localize="SettingsDataSource_SettingsCredentialEncryptionText"></span> &#32;<a target="_blank" href="https://go.microsoft.com/fwlink/?LinkId=627092" localize="SettingsDataSource_SettingsCredentialEncryptionLearnMoreText"></a></section><section ng-show="viewModel.editableSettings.authenticationParameters[0].shouldDisplay"> <label for="authenticationParameter1" class="input-field-label">{{viewModel.editableSettings.authenticationParameters[0].displayName}}</label> <input id="authenticationParameter1" type="text" ng-disabled="viewModel.waitingForDataSourceStatus" ng-model="viewModel.editableSettings.authenticationParameters[0].value" ng-change="onAuthenticationParameter1Change()" ng-focus="onAuthenticationParameter1Focus()" ng-blur="onAuthenticationParameter1Blur()" ng-required="viewModel.editableSettings.authenticationParameters[0].shouldDisplay"/></section><section ng-show="viewModel.editableSettings.authenticationParameters[1].shouldDisplay"> <label for="authenticationParameter2" class="input-field-label">{{viewModel.editableSettings.authenticationParameters[1].displayName}}</label> <input id="authenticationParameter2" type="password" ng-disabled="viewModel.waitingForDataSourceStatus" ng-model="viewModel.editableSettings.authenticationParameters[1].value" ng-change="onAuthenticationParameter2Change()" ng-focus="onAuthenticationParameter2Focus()" ng-blur="onAuthenticationParameter2Blur()" ng-required="viewModel.editableSettings.authenticationParameters[1].shouldDisplay"/></section></div><section ng-if="enterpriseGatewayETLEnabled"><div class="advancedSettingsContainer" ng-class="{expanded: viewModel.advancedSettingsExpanded}"><i class="glyphicon pbi-glyph-chevronrightmedium expandIcon" ng-click="viewModel.advancedSettingsExpanded = !viewModel.advancedSettingsExpanded; $event.stopPropagation();"></i><span localize="SettingsDataSource_AdvancedSettings"></span><div ng-show="viewModel.advancedSettingsExpanded"><section><label for="dataSourcePrivacyLevel" class="input-field-label" localize="SettingsDataSource_SettingsPrivacyLevelLabel"></label> <select id="dataSourcePrivacyLevel" ng-disabled="viewModel.waitingForDataSourceStatus" ng-model="viewModel.editableSettings.privacyLevel"><option value="0" localize="SettingsDataSource_SettingsPrivacyLevel_None" ng-selected="viewModel.editableSettings.privacyLevel === 0"></option><option value="1" localize="SettingsDataSource_SettingsPrivacyLevel_Private" ng-selected="viewModel.editableSettings.privacyLevel === 1"></option><option value="2" localize="SettingsDataSource_SettingsPrivacyLevel_Organizational" ng-selected="viewModel.editableSettings.privacyLevel === 2"></option><option value="3" localize="SettingsDataSource_SettingsPrivacyLevel_Public" ng-selected="viewModel.editableSettings.privacyLevel === 3"></option></select></section></div></div></section></div><div class="buttonsContainer" ng-if="viewModel.editableSettings.dataSourceType !== undefined"><div ng-switch on="viewModel.isAddingDataSource"> <button class="primary" localize="SettingsDataSource_SettingsApply" ng-switch-when="false" ng-disabled="viewModel.waitingForDataSourceStatus || !settingsForm.$dirty" ng-click="tryApplyChanges()"></button> <button class="primary" localize="SettingsDataSource_SettingsAdd" ng-switch-when="true" ng-disabled="viewModel.waitingForDataSourceStatus" ng-click="tryAddDataSource()"></button> <button localize="SettingsDataSource_SettingsDiscard" ng-disabled="!settingsForm.$dirty || viewModel.waitingForDataSourceStatus" ng-click="tryDiscardChanges()" formnovalidate></button></div></div></form></div>'),e.put("views/datasourceUsersView.html",'<div class="formContainer verticalPaneContainer" ng-cloak><div class="leftVerticalPane"><section class="pendingUsersContainer"><label class="input-field-label" localize="SettingsDataSource_UsersAllowed"></label><emails-list view-model="viewModel.pendingUsers" allow-security-groups allow-unified-groups></emails-list></section><section class="editableUsersContainer"><div class="editableUsersTable"><div class="tableContentContainer" ng-switch on="viewModel.isReloadingList || viewModel.isAdding"><div ng-switch-when="true"><spinner></spinner></div><div ng-switch-when="false" ng-repeat="editableUser in viewModel.editableUsers" class="pbi-input"> <input type="checkbox" ng-model="editableUser.shouldBeRemoved"> <label class="form-label">{{editableUser.name}}</label></div></div></div> <button localize="SettingsDataSource_SettingsRemove" ng-disabled="viewModel.isReloadingList || shouldDisableRemoveButton()" ng-click="tryRemoveSelectedUsers()"></button> <button class="rightSideButton" ng-if="upnMappingEnabled" localize="UpnMappingPane_Title" ng-disabled="!viewModel.editableUsers || viewModel.editableUsers.length === 0" ng-click="mapUserNames()"></button></section></div><div class="rightVerticalPane"> <button class="primary" localize="SettingsDataSource_SettingsAdd" ng-disabled="viewModel.isAdding || !viewModel.pendingUsers.inputUserList" ng-click="tryAddUsers()"></button></div></div>'),e.put("views/datasourceView.html",'<div class="settingsContainer" ng-cloak><div class="tabHeader"><ul><li ng-click="onTabSelected(1)" ng-class="{selected: viewModel.tabSelectionType === 1}" localize="SettingsDataSource_SettingsTitle"></li><li ng-click="onTabSelected(2)" ng-class="{selected: viewModel.tabSelectionType === 2}" ng-if="viewModel.id !== -1" localize="SettingsDataSource_UsersTitle"></li></ul></div><div ng-switch on="viewModel.tabSelectionType"><datasource-settings ng-switch-when="1" datasource-model="viewModel"></datasource-settings><datasource-users ng-switch-when="2" datasource-model="viewModel"></datasource-users></div></div>'),e.put("views/gatewayAdministratorsView.html",'<div class="formContainer verticalPaneContainer" ng-cloak><div class="leftVerticalPane"><section class="pendingUsersContainer"><label class="input-field-label" localize="SettingsDataSource_AdminsAllowed"></label><emails-list view-model="viewModel.pendingUsers" allow-security-groups allow-unified-groups></emails-list></section><section class="editableUsersContainer"><div class="editableUsersTable"><div class="tableContentContainer" ng-switch on="viewModel.isReloadingList || viewModel.isAdding"><div ng-switch-when="true"><spinner></spinner></div><div ng-switch-when="false" ng-repeat="editableUser in viewModel.editableUsers" class="pbi-input"> <input type="checkbox" ng-model="editableUser.shouldBeRemoved"> <label class="form-label">{{editableUser.name}}</label></div></div></div> <button class="rightSideButton" localize="SettingsDataSource_SettingsRemove" ng-disabled="viewModel.isReloadingList || shouldDisableRemoveButton()" ng-click="tryRemoveSelectedAdminstrators()"></button></section></div><div class="rightVerticalPane"> <button class="primary" localize="SettingsDataSource_SettingsAdd" ng-disabled="viewModel.isAdding || !viewModel.pendingUsers.inputUserList" ng-click="tryAddAdministrators()"></button></div></div>'),e.put("views/gatewaySettingsView.html",'<div class="formContainer" ng-cloak><header ng-switch="viewModel.isLoadingStatus"><div ng-switch-when="false" ng-switch="viewModel.status"><div ng-switch-when="1"><inline-message use-error-icon trace-details="viewModel.traceDetails"><span ng-bind="viewModel.connectionError"></span></inline-message></div><div ng-switch-when="2"><span class="glyphicon glyph-small pbi-glyph-success glyph-success-color"></span><span localize="SettingsGateway_ConnectedText"></span></div></div><div ng-switch-when="true"><div class="statusContainer"><spinner class="settingsLoadingSpinner"></spinner><span localize="SettingsGateway_WaitingForConnectinonText"></span></div></div><div class="warning" ng-if="viewModel.status === 2 && viewModel.dataSources.length === 0"><inline-message class="inlineInfo"><span class="glyphicon glyph-small pbi-glyph-info"></span><a href=\'\' localize="AddDataSourceToGatewayText" ng-click="addDataSource()"></a></inline-message></div></header><form name="settingsForm" autocomplete="off"><section><label for="gatewayName" class="input-field-label" localize="SettingsGateway_Name"></label> <input id="gatewayName" type="text" ng-disabled="viewModel.isWaitingForGatewayUpdate" ng-model=viewModel.displayName ng-change="updateDirtyFlag()"/></section><section><label for="gatewayDepartment" class="input-field-label" localize="SettingsGateways_Department"></label> <input id="gatewayDepartment" type="text" ng-disabled="viewModel.isWaitingForGatewayUpdate" ng-model=viewModel.gatewayAnnotation.gatewayDepartment ng-change="updateDirtyFlag()"/></section><section><label for="gatewayDescription" class="input-field-label" localize="SettingsGateway_Description"></label><textarea id="gatewayDescription" ng-disabled="viewModel.isWaitingForGatewayUpdate" ng-model="viewModel.description" ng-change="updateDirtyFlag()" ng-trim="false" maxlength="4000"/></section><section><label for="gatewayContactInfo" class="input-field-label" localize="SettingsGateway_ContactInformation"></label><textarea id="gatewayContactInfo" ng-disabled="viewModel.isWaitingForGatewayUpdate" ng-model="viewModel.contactInformationString" ng-change="updateDirtyFlag()" ng-trim="false" maxlength="4000"/></section><div class="buttonsContainer"> <button class="biButton primary" localize="SettingsDataset_ApplyButtonText" ng-disabled="!viewModel.isDirty" ng-click="applyChanges()"></button> <button class="biButton" localize="SettingsDataSource_SettingsDiscard" ng-disabled="!viewModel.isDirty" ng-click="discardChanges()"></button></div></form></div>'),e.put("views/gatewaysView.html",'<div class="gatewaysSliderContentView" ng-switch="isLoading"><div class="gatewaysLayoutTop"><div class="sliderContentHeader"><div localize="EnterpriseGateway_Title" feature-switch-not="breadcrumbNavigationEnabled"></div><spinner class="large settingsLoadingSpinner" ng-switch-when="true"></spinner></div></div><div class="gatewaysLayoutBody" ng-switch-when="false" ng-switch="viewModel.gateways.length> 0" feature-switch-class="breadcrumbNavigationEnabled"><div ng-switch-when="true"><div class="settingsAddDataSource" ng-click="tryAddDataSource()"><span class="glyphicon glyph-mini pbi-glyph-add" feature-switch-not="breadcrumbNavigationEnabled"></span><span class="settingsAddDataSourceLabel" localize="AddDataSourceText"></span></div><div class="settingsGateways"><div class="settingsGatewaysLeftColumn"><div class="gatewayTree"><ul><li class="navTreeItem" ng-repeat="gateway in viewModel.gateways" ng-class="{expanded: gateway.isExpanded}"><div ng-click="onItemSelected(gateway.id, null)" ng-class="{selected: gateway.isExpanded ? viewModel.currentGatewayId === gateway.id && viewModel.currentDataSourceId === null : viewModel.currentGatewayId === gateway.id}"><div class="gatewayTreeItem"> <span class="expanderContainer"><i ng-show="gateway.dataSources.length>0" class="glyphicon refreshSectionExpander pbi-glyph-chevronrightmedium expandIcon" ng-click="gateway.isExpanded = !gateway.isExpanded; $event.stopPropagation();"></i></span><span class="gatewayLabel trimmedTextWithEllipsis" ng-bind="gateway.displayName"></span><span class="glyphicon pbi-glyph-warning glyph-small glyph-warning-color warningIcon" ng-if="gateway.status != 2"></span> <button class="contextMenuButton" context-menu localize-tooltip="NavigationPane_OpenMenu" context="gateway.contextMenuItem" ng-click="$event.stopPropagation()"><i class="glyphicon pbi-glyph-more gatewayMoreIcon"></i></button></div></div><div class="expandableInnerContainer" ng-show="gateway.isExpanded"><ul><li ng-repeat="dataSource in gateway.dataSources" ng-click="onItemSelected(gateway.id, dataSource.id)" class="gatewayTreeItem" ng-class="{selected: viewModel.currentGatewayId === gateway.id && viewModel.currentDataSourceId === dataSource.id}"><span class="gatewayLabel trimmedTextWithEllipsis" ng-bind="dataSource.displayName"></span><span class="glyphicon pbi-glyph-warning glyph-small glyph-warning-color warningIcon" ng-if="dataSource.connectionError || dataSource.compositeErrorMessage"></span> <button class="contextMenuButton" context-menu localize-tooltip="NavigationPane_OpenMenu" context="dataSource.contextMenuItem" ng-click="$event.stopPropagation()"><i class="glyphicon pbi-glyph-more gatewayMoreIcon"></i></button></li></ul></div></li></ul></div><div class="testConnectionContainer"> <button localize="SettingsGateway_TestConnections" ng-click="testConnections()"></button></div></div><div class="settingsGatewaysRightColumn"><div ng-switch on="getSelectionType()"><gateway ng-switch-when="1" view-model="viewModel.currentGateway"></gateway><datasource ng-switch-when="2" view-model="viewModel.currentDataSource"></datasource></div></div></div></div><div class="gatewaysEmpty unselectable" ng-switch-when="false"><i class="glyphicon pbi-glyph-warning glyph-med warningIcon"></i><h2 localize="Gateways_NoGatewaysWarningTitle"></h2><p localize="Gateways_NoGatewaysWarningText"></p><a href="https://go.microsoft.com/fwlink/?LinkId=627094" target="_blank" localize="GetData_LearnMore"></a></div></div></div>'),e.put("views/gatewayView.html",'<div class="settingsContainer" ng-cloak><div class="tabHeader"><ul><li ng-click="onTabSelected(1)" ng-class="{selected: viewModel.tabSelectionType === 1}"><span localize="SettingsGateway_SettingsTitle"></span></li><li ng-click="onTabSelected(2)" ng-class="{selected: viewModel.tabSelectionType === 2}"><span localize="GatewayDataSource_SettingsAdministrators"></span></li></ul></div><div ng-switch on="viewModel.tabSelectionType"><gateway-settings ng-switch-when="1" view-model="viewModel"></gateway-settings><gateway-administrators ng-switch-when="2" gateway-model="viewModel"></gateway-administrators></div></div>'),e.put("views/selectGatewayView.html",'<div class="selectGateway" ng-class="{\'noEGW\': viewModel.enterpriseGateways.length===0, \'singleEGW\': viewModel.enterpriseGateways.length===1, \'multipleEGW\': viewModel.enterpriseGateways.length> 1}"><div localize="SettingsDataset_Gateway_StaticInfo" localize-fragments><a fragment-index="0" localize="SettingsDataset_Gateway_StaticInfo_ManageGateways" href="" ng-click="navigateToManageGateways()"></a><a fragment-index="1" localize="SettingsDataset_Gateway_StaticInfo_LearnMore" target="_blank" href="//go.microsoft.com/fwlink/?LinkID=799429&clcid=0x409"></a></div><div ng-show="::viewModel.showHeader"><div class="title"><span ng-bind="viewModel.title"></span></div></div><div class="gatewayTypeSelectionContainer" ng-show="viewModel.allowPersonalGateway"><div class="gwOption" ng-switch on="viewModel.isCloudScheduleRefresh"> <span class="pbi-input"><input ng-switch-when="false" type="radio" name="pgwRadioOption" ng-model="viewModel.useEnterpriseGateway" ng-value="false" ng-change="gatewayTypeSelected()" ng-disabled="viewModel.pgw.gatewayStatus === 1"><label ng-switch-when="false" class="form-label" localize="SettingsDataset_GatewaySelectLabel_PGW"></label> <input ng-switch-when="true" type="radio" name="pgwRadioOption" ng-model="viewModel.useEnterpriseGateway" ng-value="false" ng-change="gatewayTypeSelected()" ng-disabled="isSovereignCloud"><label ng-switch-when="true" class="form-label" localize="SettingsDataset_GatewaySelectLabel_Cloud"></label></span><span class="additionalInfo" ng-switch-when="false"><span ng-show="viewModel.pgw.gatewayStatus === 0" localize="Gateways_StatusWithMachineName" localize-fragments><span fragment-index="0" class="gatewayStatusLabelOnline" localize="Gateways_Status_Online"></span><span fragment-index="1" ng-bind="viewModel.pgwAnnotation.gatewayMachine"></span></span><span ng-show="viewModel.pgw.gatewayStatus === 1"><a localize="SettingsDataset_OnPrem_Gateway_InstallNow" target="_blank" href="//go.microsoft.com/fwlink/?LinkID=534231" class="pgwLink"></a><a localize="SettingsDataset_OnPrem_Gateway_LearnMore" target="_blank" href="//go.microsoft.com/fwlink/?LinkId=627094" class="pgwLink"></a></span><span ng-show="viewModel.pgw.gatewayStatus === 2 || viewModel.pgw.gatewayStatus === 3" localize="Gateways_StatusWithMachineName" localize-fragments><span fragment-index="0" class="gatewayStatusLabelOffline" localize="Gateways_Status_Offline"></span><span fragment-index="1" ng-bind="viewModel.pgwAnnotation.gatewayMachine"></span></span></span></div><div class="gwOption"> <span class="pbi-input"><input type="radio" name="egwRadioOption" ng-model="viewModel.useEnterpriseGateway" ng-value="true" ng-change="gatewayTypeSelected()" ng-disabled="!viewModel.egwStatusLoaded || viewModel.enterpriseGateways.length === 0"><label class="form-label" localize="SettingsDataset_GatewaySelectLabel_EGW"></label></span><spinner ng-show="!viewModel.egwStatusLoaded"></spinner></div></div><div ng-show="viewModel.egwStatusLoaded"><div class="gatewaysIntroText hideIfNoEGW hideIfSingleEGW" localize="Gateways_MultipleEnterpriseGatewaysText"></div><div class="gatewaysIntroText hideIfNoEGW hideIfMultipleEGW" localize="Gateways_SingleEnterpriseGatewaysText" ng-show="!viewModel.allowPersonalGateway"></div><div class="gatewaysIntroText hideIfSingleEGW hideIfMultipleEGW" localize="Gateways_NoEnterpriseGatewaysText" ng-show="!viewModel.allowPersonalGateway"></div></div><div class="gatewaysTableOuterContainer hideIfNoEGW" ng-switch on="viewModel.egwStatusLoaded"><spinner ng-switch-when="false"></spinner><div class="gatewaysTableInnerContainer" ng-switch-when="true"><table class="gatewaysTable"><thead class="gatewaysTableHeader"><tr><th class="gatewaysTableSelection hideIfNoEGW hideIfSingleEGW"></th><th class="gatewaysTableStatus" ng-show="viewModel.showStatus"><div class="gatewaysTableHeaderContent" localize="SettingsGateways_Status"></div></th><th class="gatewaysTableDepartmentName"><div class="gatewaysTableHeaderContent" localize="SettingsGateways_Department"></div></th><th class="gatewaysTableGatewayName"><div class="gatewaysTableHeaderContent" localize="SettingsGateways_Gateway"></div></th><th class="gatewaysTableCreatedBy"><div class="gatewaysTableHeaderContent" localize="SettingsGateways_ContactInformation"></div></th><th class="gatewaysTableGatewayDescription"><div class="gatewaysTableHeaderContent" localize="SettingsGateway_Description"></div></th></tr></thead><tbody class="gatewaysTableBody"><tr ng-repeat="gateway in viewModel.enterpriseGateways" ng-click="enterpriseGatewaySelected(gateway.id)"><td class="egwRadioButton hideIfNoEGW hideIfSingleEGW"><div class="pbi-input"> <input type="radio" name="gwRadioOption" ng-model="viewModel.selectedGatewayId" ng-value="gateway.id" ng-click="enterpriseGatewaySelected(gateway.id)"><label class="dummyRadioButtonLabel"></label></div></td><td ng-show="viewModel.showStatus"><span ng-show="gateway.status === 1" class="gatewayStatusLabelOffline" localize="Gateways_Status_Offline"></span><span ng-show="gateway.status === 2" class="gatewayStatusLabelOnline" localize="Gateways_Status_Online"></span><spinner ng-show="gateway.status === 3" class="gatewayStatusSpinner glyph-mini"></spinner></td><td class="trimmedTextWithEllipsis"><span ng-bind="gateway.gatewayAnnotation.gatewayDepartment" title="{{gateway.gatewayAnnotation.gatewayDepartment}}"></span></td><td class="trimmedTextWithEllipsis"><span ng-if="gateway.displayName" ng-bind="gateway.displayName" title="{{gateway.displayName}}"></span><span ng-if="!gateway.displayName" localize="SettingsGateways_ConnectToCloudDatasource"></span></td><td class="trimmedTextWithEllipsis"><span ng-bind="gateway.gatewayAnnotation.gatewayContactInformation.join(\';\')" title="{{gateway.gatewayAnnotation.gatewayContactInformation.join(\';\')}}"></span></td><td><span ng-bind="gateway.description" title="{{gateway.description}}"></span></td></tr></tbody></table></div></div></div>'),
e.put("views/adminPortal/adminPortalAuditingView.html",'<div class="auditing"><div class="title label-xl trimmedTextWithEllipsis" localize="AdminPortal_Auditing_Title" localize-tooltip="AdminPortal_Auditing_Title"></div><div class="subtitle label-med trimmedTextWithEllipsis"><span localize="AdminPortal_Auditing_SubtitleV2" localize-fragments><pbi-link fragment-index="0" guid="823102" label="AdminPortal_Auditing_LearnMore"></pbi-link></span></div><div class="goToButton"><a class="btn primary" localize="AdminPortal_Auditing_ButtonText" ng-click="auditingPageLanding()"></a></div></div>'),e.put("views/adminPortal/adminPortalManageUsersView.html",'<div class="manageUsers"><div class="title label-xl trimmedTextWithEllipsis" localize="AdminPortal_ManageUsers_Title" localize-tooltip="AdminPortal_ManageUsers_Title"></div><div class="subtitle label-med trimmedTextWithEllipsis" localize="AdminPortal_ManageUsers_Subtitle" localize-tooltip="AdminPortal_ManageUsers_Subtitle"></div><div class="goToButton"><a class="btn primary" localize="AdminPortal_ManageUsers_ButtonText" ng-href="{{::o365AdminUserPageUrl}}" target="_blank"></a></div></div>'),e.put("views/adminPortal/adminPortalTenantSettingsView.html",'<div class="tenantSettings"><spinner class="centered" ng-show="isLoading"></spinner><div class="title label-xl" localize="AdminPortal_TenantSettings_Title" localize-tooltip="AdminPortal_TenantSettings_Title"></div><div class="settingsContent" ng-if="!isLoading"><div class="settingsContainer" ng-repeat="featureSwitch in tenantSettings.featureSwitches"><div class="radioButton"><div class="radioButtonTitle label-med" ng-bind="::featureSwitch.displayName"></div><div class="radioButtonContainer"><div class="pbi-input"> <input type="radio" ng-model="featureSwitch.isEnabled" ng-value="true" ng-change="updateFormState()"><label class="form-label label-med" localize="ToggleSwitchOn"></label></div><div class="pbi-input"> <input type="radio" ng-model="featureSwitch.isEnabled" ng-value="false" ng-change="updateFormState()"><label class="form-label label-med" localize="ToggleSwitchOff"></label></div></div></div></div><div class="settingsContainer dataClassificationSwitchContainer" ng-if="isDataClassificationFeatureEnabled"><div class="radioButton"><div class="radioButtonTitle label-med"><span localize="AdminPortal_TenantSettings_DataClassification_Title"></span><i class="glyphicon pbi-glyph-info glyph-small" localize-tooltip="AdminPortal_TenantSettings_DataClassification_RadioButtonTooltip"></i></div><div class="radioButtonContainer"><div class="pbi-input"> <input type="radio" ng-model="dataClassificationToggle.enabled" ng-value="true" ng-change="onDataClassificationToggled()"><label class="form-label label-med" localize="ToggleSwitchOn"></label></div><div class="pbi-input"> <input type="radio" ng-model="dataClassificationToggle.enabled" ng-value="false" ng-change="onDataClassificationToggled()"><label class="form-label label-med" localize="ToggleSwitchOff"></label></div></div></div></div><div class="dataClassificationContainer settingsContainer" ng-if="isDataClassificationFeatureEnabled && dataClassificationToggle.enabled"><table pbi-table pbi-table-config="$ctrl.tableConfig"><tr ng-repeat="item in tenantSettings.dataClassifications"><td localized-header="AdminPortal_TenantSettings_DataClassificationTable_Column_Default" class="default"><div class="pbi-input"> <input type="radio" name="dataClassification" ng-model="item.default" ng-value="true" ng-change="setDefaultDataClassification($index)"> <label class="form-label label-med">&nbsp;</label></div></td><td localized-header="AdminPortal_TenantSettings_DataClassificationTable_Column_Classification" class="name"> <input type="text" ng-model="item.name" ng-change="updateFormState()"/></td><td localized-header="AdminPortal_TenantSettings_DataClassificationTable_Column_Shorthand" class="shortHand"> <input type="text" maxlength="4" ng-model="item.shortHand" ng-change="updateFormState()"/></td><td localized-header="AdminPortal_TenantSettings_DataClassificationTable_Column_ShowTag" class="showTag"><pbi-checkbox label="test" ng-model="item.showTag" localize-tooltip="AdminPortal_TenantSettings_DataClassification_ShowTagTooltip" ng-change="updateFormState()"></pbi-checkbox></td><td localized-header="AdminPortal_TenantSettings_DataClassificationTable_Column_URL"> <input type="text" ng-model="item.url" ng-change="updateFormState()"/></td><td class="remove"> <button ng-click="removeDataClassification($index)"><i class="glyphicon pbi-glyph-delete glyph-small"></i></button></td></tr></table> <button class="add" ng-click="addDataClassification()"><i class="glyphicon pbi-glyph-add glyph-small"></i><span localize="AdminPortal_TenantSettings_DataClassification_AddItem"></span></button></div><div class="settingsButtonContainer"><pbi-button id="applyChanges" label="AdminPortal_TenantSettings_ButtonText_Apply" primary="true" ng-disabled="!hasChanges" ng-click="applyChanges()"></pbi-button><pbi-button id="cancelChanges" label="PBI_Button_Label_Cancel" ng-disabled="!hasChanges" ng-click="cancelChanges()"></pbi-button></div></div></div>'),e.put("views/adminPortal/adminPortalUsageMetricsView.html",'<div class="usageMetrics"><iframe ng-src="/adminPortalDashboard" frameborder="0" scrolling="no"></iframe></div>'),e.put("views/adminPortal/adminPortalView.html",'<div class="sliderContentView adminPortal"><div class="header label-xl"><span localize="AdminPortal_Title"></span></div><div class="content"><div class="adminPortalLeftColumn"><ul class="contentOption"><li class="option label-med" ng-repeat="option in options track by option.type" ng-click="config.activeOptionType = option.type" ng-class="{selected: config.activeOptionType === option.type}"><span ng-bind="::option.displayName"></span></li></ul></div><div class="adminPortalRightColumn" ng-switch="config.activeOptionType"><admin-portal-usage-metrics class="contentPane" ng-switch-when="1"></admin-portal-usage-metrics><admin-portal-manage-users class="contentPane" ng-switch-when="2"></admin-portal-manage-users><admin-portal-auditing class="contentPane" ng-switch-when="3" ng-if="::adminAuditingEnabled"></admin-portal-auditing><admin-portal-tenant-settings class="contentPane" ng-switch-when="4"></admin-portal-tenant-settings></div></div></div>'),e.put("components/gateway/upnMappingPane/upnMappingPaneView.html",'<div class="upnMappingPane"><header><h3 class="primaryHeading" localize="UpnMappingPane_Title"></h3><h6 class="secondaryHeading" localize="UpnMappingPane_Subtitle" localize-fragments><a fragment-index="0" href="//go.microsoft.com/fwlink/?LinkID=786855" target="_blank" localize="UpnMappingPane_LearnMore"></a></h6></header><section class="contentContainer"><section class="dataSource"><h6 localize="UpnMappingPane_SelectDataSource"></h6><div class="pbi-input inline"> <input type="radio" ng-model="$ctrl.viewModel.connectionStringPropertyName" ng-value="0"/><label class="form-label" localize="UpnMappingPane_EffectiveUserName"></label></div><div class="pbi-input inline"> <input type="radio" ng-model="$ctrl.viewModel.connectionStringPropertyName" ng-value="1"/><label class="form-label" localize="UpnMappingPane_CustomData"></label></div></section><section class="mappingTable"><div class="mappingTableContainer"><div class="caption"><div localize="UpnMappingPane_Replace"></div><div localize="UpnMappingPane_With"></div></div><div class="tableContainer"><table><tr ng-repeat="rule in $ctrl.viewModel.mappingRules track by $index" ng-click="$ctrl.selectedRule = rule" ng-class="{selected: rule === $ctrl.selectedRule}"><td ng-bind="$index + 1"></td><td ng-bind="rule.searchString"></td><td ng-bind="rule.replacementString"></td></tr><tr><td ng-bind="$ctrl.viewModel.mappingRules.length + 1"></td><td> <input name="newSearchString" ng-model="$ctrl.newRule.searchString" placeholder="{{::$ctrl.localizedOriginalName}}"/></td><td> <input name="newReplacementString" ng-model="$ctrl.newRule.replacementString" placeholder="{{::$ctrl.localizedNewName}}"/></td></tr></table></div></div><div class="tableSelectionControl"><i class="glyphicon pbi-glyph-chevronupmedium glyph-small" ng-class="{disabled: !$ctrl.selectedRule}" ng-click="$ctrl.selectPre()"></i><i class="glyphicon pbi-glyph-chevrondownmedium glyph-small" ng-class="{disabled: !$ctrl.selectedRule}" ng-click="$ctrl.selectNext()"></i></div><div> <button localize="UpnMappingPane_Add" ng-disabled="!$ctrl.newRule.searchString || !$ctrl.newRule.replacementString" ng-click="$ctrl.addNewRule()"></button> <button localize="UpnMappingPane_Delete" ng-disabled="!$ctrl.selectedRule" ng-click="$ctrl.deleteRule()"></button></div></section><section class="testRule"><div localize="UpnMappingPane_TestRuleTitle"></div><div class="originalValue"><div localize="UpnMappingPane_OriginalName"></div><div> <input ng-model="$ctrl.testRuleOriginalName" placeholder="{{::$ctrl.localizedOriginalName}}"/> <button localize="UpnMappingPane_TestRuleButtonText" ng-disabled="!$ctrl.testRuleOriginalName" ng-click="$ctrl.testRule()"></button></div></div><div class="replacementValue"><div localize="UpnMappingPane_AfterRuleApplied"></div><div> <input ng-model="$ctrl.testRuleNewName" placeholder="{{::$ctrl.localizedResultOfApplyingMappingRule}}" readonly/><spinner ng-show="$ctrl.isTestRuleRequestPending"></spinner></div></div></section></section><footer><div class="buttons"><spinner ng-show="$ctrl.isUpdateDataSourceRequestPending"></spinner> <button class="biButton primary" type="button" localize="OK_ButtonText" ng-disabled="false" ng-click="$ctrl.saveChangesAndExit()"/> <button class="biButton" type="button" localize="Cancel_ButtonText" ng-click="$ctrl.closeUpnMappingPane()"/></div></footer></div>')}]);var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){var i=(function(){function t(t,i){var a=this;this.scope=t,this.services=i;var n=this.services.featureSwitchService.featureSwitches.adminAuditingEnabled;this.scope.config={activeOptionType:1},this.services.appMetadataService.getAppMetadata().then((function(t){a.scope.adminAuditingEnabled=n&&t.clusterFeatureSwitches.clusterAuditingEnabled,a.services.localizationService.ensureLocalization((function(){a.scope.options=e.models.AdminPortalModelFactory.createAdminPortalOptions(a.services.localizationService,a.services.featureSwitchService,t.clusterFeatureSwitches.clusterAuditingEnabled)}))}))}return t.createOptions=function(){return{additionalServices:["errorService","localizationService","featureSwitchService","appMetadataService"]}},t})();t.AdminPortalController=i})(t=e.controllers||(e.controllers={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){this.scope=e,this.services=t,this.scope.o365AdminUserPageUrl=window.o365AdminUserPageUrl}return e.createOptions=function(){return{additionalServices:["errorService","localizationService","adminPortal"]}},e})();e.AdminPortalManageUsersController=t})(t=e.controllers||(e.controllers={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){var i=(function(){function t(t,i){var a=this;this.scope=t,this.services=i;var n=this.services.$window;this.scope.auditingPageLanding=function(){n.open(window.o365AdminAuditingPageUrl,"_blank"),a.services.telemetryService.logEvent(e.telemetry.SettingsAdminAuditing)}}return t.createOptions=function(){return{additionalServices:["$window","telemetryService"]}},t})();t.AdminPortalAuditingController=i})(i=t.controllers||(t.controllers={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(i,a){var n=this;this.scope=i,this.services=a,this.scope.tenantSettings=new t.models.TenantSettings,this.scope.isLoading=!0,this.scope.hasChanges=!1,this.prepareUnsupportedSettings(),this.scope.dataClassificationToggle={enabled:!1},this.scope.isDataClassificationFeatureEnabled=this.services.featureSwitchService.featureSwitches.dataClassificationEnabled;var o=this.services.telemetryService.startEvent(e.telemetry.SettingsGetTenantSettings);this.services.featureSwitchService.featureSwitches.dataClassificationEnabled?this.services.adminPortal.getTenantSettingsV2(o.event).then((function(e){n.scope.tenantSettings.featureSwitches=n.filterOutUnsupportedFeaturesSettings(e.featureSwitches),n.scope.tenantSettings.dataClassifications=e.dataClassifications,n.originalSettings=_.cloneDeep(n.scope.tenantSettings),n.scope.dataClassificationToggle.enabled=e.dataClassifications.length>0,n.scope.isLoading=!1})):this.services.adminPortal.getTenantSettings(o.event).then((function(e){n.scope.tenantSettings.featureSwitches=n.filterOutUnsupportedFeaturesSettings(e),n.originalSettings=_.cloneDeep(n.scope.tenantSettings),n.scope.isLoading=!1})),this.scope.updateFormState=function(){return n.updateFormState()},this.scope.applyChanges=function(){return n.applyChanges()},this.scope.cancelChanges=function(){return n.cancelChanges()},this.scope.addDataClassification=function(){return n.addDataClassification()},this.scope.removeDataClassification=function(e){return n.removeDataClassification(e)},this.scope.onDataClassificationToggled=function(){return n.onDataClassificationToggled()},this.scope.setDefaultDataClassification=function(e){return n.setDefaultDataClassification(e)}}return i.createOptions=function(){return{additionalServices:["errorService","telemetryService","localizationService","adminPortal","notificationToast","featureSwitchService","appMetadataService"]}},i.prototype.setDefaultDataClassification=function(e){for(var t=0,i=this.scope.tenantSettings.dataClassifications.length;t<i;t++)this.scope.tenantSettings.dataClassifications[t].default=t===e;this.updateFormState()},i.prototype.onDataClassificationToggled=function(){this.scope.dataClassificationToggle.enabled?this.addDataClassification():this.scope.tenantSettings.dataClassifications=[],this.updateFormState()},i.prototype.addDataClassification=function(){var t=this.scope.tenantSettings.dataClassifications;t.push(new e.common.models.DataClassification),1===t.length&&(t[0].default=!0),this.updateFormState()},i.prototype.removeDataClassification=function(e){var t=this.scope.tenantSettings.dataClassifications,i=t[e].default;t.splice(e,1),i&&t.length>0&&(t[0].default=!0),0===t.length&&(this.scope.dataClassificationToggle.enabled=!1),this.updateFormState()},i.prototype.prepareUnsupportedSettings=function(){var e=this;this.unsupportedSettings=[];var i=!1;this.services.appMetadataService.getAppMetadata().then((function(a){i=a.clusterFeatureSwitches.clusterAuditingEnabled,e.services.featureSwitchService.featureSwitches.scriptVisualEnabled||e.unsupportedSettings.push(t.constants.scriptVisualTenantSwitchId),e.services.featureSwitchService.featureSwitches.exportReportToPowerPointEnabled||e.unsupportedSettings.push(t.constants.exportPowerPointTenantSwitchId),e.services.featureSwitchService.featureSwitches.adminAuditingEnabled&&i||e.unsupportedSettings.push(t.constants.auditingTenantSwitchId)}))},i.prototype.filterOutUnsupportedFeaturesSettings=function(e){for(var t=[],i=0,a=e;i<a.length;i++){var n=a[i];this.unsupportedSettings.indexOf(n.id)===-1&&t.push(n)}return t},i.prototype.updateFormState=function(){this.checkChanges()},i.prototype.applyChanges=function(){var t=this;if(this.scope.hasChanges){for(var i=this.services.notificationToast.notify({title:this.services.localizationService.get("AdminPortal_TenantSettings_Saving_Title"),message:this.services.localizationService.get("AdminPortal_TenantSettings_Saving_Message"),notificationType:e.common.NotificationToastType.Loading}),a=0,n=this.scope.tenantSettings.featureSwitches.length;a<n;a++)this.scope.tenantSettings.featureSwitches[a].contract.isEnabled=this.scope.tenantSettings.featureSwitches[a].isEnabled;var o=this.isDataClassificationSettingChanged();if(!_.isEmpty(this.scope.tenantSettings)){var s=this.services.telemetryService.startEvent(e.telemetry.SettingsUpdateTenantSettings);this.services.featureSwitchService.featureSwitches.dataClassificationEnabled?this.services.adminPortal.updateTenantSettingsConfigV2(this.scope.tenantSettings,s.event).then((function(){t.services.notificationToast.hide(i);for(var a=function(i,a){var n=t.scope.tenantSettings.featureSwitches[i],o=_.find(t.originalSettings.featureSwitches,(function(e){return e.id===n.id}));n.isEnabled!==o.isEnabled&&(o.isEnabled=n.isEnabled,t.services.telemetryService.logEvent(e.telemetry.SettingsUpdateTenantSetting,n.name,n.isEnabled),t.services.notificationToast.notify({title:t.getSaveSuccessTitle(n),message:t.services.localizationService.get("AdminPortal_TenantSettings_Success_Message"),notificationType:e.common.NotificationToastType.Success}))},n=0,r=t.scope.tenantSettings.featureSwitches.length;n<r;n++)a(n,r);o&&(t.services.telemetryService.logEvent(e.telemetry.SettingsUpdateTenantSetting,"dataClassification",t.scope.tenantSettings.dataClassifications.length>0),t.services.notificationToast.notify({title:t.services.localizationService.get("AdminPortal_TenantSettings_DataClassification_Changed"),message:t.services.localizationService.get("AdminPortal_TenantSettings_Success_Message"),notificationType:e.common.NotificationToastType.Success})),t.originalSettings.dataClassifications=_.cloneDeep(t.scope.tenantSettings.dataClassifications),s.resolve()}),(function(){t.services.notificationToast.hide(i),t.services.notificationToast.notify({title:t.services.localizationService.get("AdminPortal_TenantSettings_Failure_Title"),message:t.services.localizationService.get("AdminPortal_TenantSettings_Failure_Message"),notificationType:e.common.NotificationToastType.Error}),s.reject()})).finally((function(){t.checkChanges()})):this.services.adminPortal.updateTenantSettingsConfig(this.scope.tenantSettings.featureSwitches,s.event).then((function(){t.services.notificationToast.hide(i);for(var a=function(i,a){var n=t.scope.tenantSettings.featureSwitches[i],o=_.find(t.originalSettings.featureSwitches,(function(e){return e.id===n.id}));n.isEnabled!==o.isEnabled&&(o.isEnabled=n.isEnabled,t.services.telemetryService.logEvent(e.telemetry.SettingsUpdateTenantSetting,n.name,n.isEnabled),t.services.notificationToast.notify({title:t.getSaveSuccessTitle(n),message:t.services.localizationService.get("AdminPortal_TenantSettings_Success_Message"),notificationType:e.common.NotificationToastType.Success}))},n=0,o=t.scope.tenantSettings.featureSwitches.length;n<o;n++)a(n,o);t.originalSettings.dataClassifications=_.cloneDeep(t.scope.tenantSettings.dataClassifications),s.resolve()}),(function(){t.services.notificationToast.hide(i),t.services.notificationToast.notify({title:t.services.localizationService.get("AdminPortal_TenantSettings_Failure_Title"),message:t.services.localizationService.get("AdminPortal_TenantSettings_Failure_Message"),notificationType:e.common.NotificationToastType.Error}),s.reject()})).finally((function(){t.checkChanges()}))}}},i.prototype.cancelChanges=function(){_.isEmpty(this.scope.tenantSettings)||(this.scope.tenantSettings=_.cloneDeep(this.originalSettings),this.scope.dataClassificationToggle.enabled=this.scope.tenantSettings.dataClassifications.length>0),this.scope.hasChanges=!1},i.prototype.checkChanges=function(){this.scope.hasChanges=!1;for(var e=function(e,i){var a=t.scope.tenantSettings.featureSwitches[e],n=_.find(t.originalSettings.featureSwitches,(function(e){return e.id===a.id}));if(a.isEnabled!==n.isEnabled)return t.scope.hasChanges=!0,{value:void 0}},t=this,i=0,a=this.scope.tenantSettings.featureSwitches.length;i<a;i++){var n=e(i,a);if("object"==typeof n)return n.value}if(this.isDataClassificationSettingChanged()){this.scope.hasChanges=!0;for(var o={},s=0,i=0,a=this.scope.tenantSettings.dataClassifications.length;i<a;i++){var r=this.scope.tenantSettings.dataClassifications[i];if(!r.name||!r.shortHand||r.shortHand.length>4)return void(this.scope.hasChanges=!1);if(r.url&&0!==r.url.indexOf("http://")&&r.url.indexOf("https://"))return void(this.scope.hasChanges=!1);r.default&&s++,o[r.shortHand]=o[r.shortHand]?o[r.shortHand]+1:1}if(this.scope.tenantSettings.dataClassifications.length>0&&1!==s)return void(this.scope.hasChanges=!1);for(var c in o)if(o[c]>1)return void(this.scope.hasChanges=!1)}},i.prototype.isDataClassificationSettingChanged=function(){if(this.scope.tenantSettings.dataClassifications.length!==this.originalSettings.dataClassifications.length)return!0;for(var e=function(e,i){var a=t.scope.tenantSettings.dataClassifications[e],n=_.find(t.originalSettings.dataClassifications,(function(e){return e.id===a.id}));for(var o in a)if("$$hashKey"!==o&&void 0!==n[o]&&a[o]!==n[o])return{value:!0}},t=this,i=0,a=this.scope.tenantSettings.dataClassifications.length;i<a;i++){var n=e(i,a);if("object"==typeof n)return n.value}return!1},i.prototype.getSaveSuccessTitle=function(e){if(e)return this.services.localizationService.format("AdminPortal_TenantSettings_Success_RadioButton_Title",[e.name,e.isEnabled?this.services.localizationService.get("AdminPortal_TenantSettings_ButtonText_Enabled"):this.services.localizationService.get("AdminPortal_TenantSettings_RadioButton_Disabled")])},i})();i.AdminPortalTenantSettingsController=a})(i=t.controllers||(t.controllers={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(){this.restrict="E",this.templateUrl="views/adminPortal/adminPortalView.html",this.replace=!0,this.controller=e.common.Services.createController(t.controllers.AdminPortalController)}return i})();i.AdminPortal=a})(i=t.directives||(t.directives={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(){this.restrict="E",this.templateUrl="views/adminPortal/adminPortalManageUsersView.html",this.scope={},this.replace=!0,this.controller=e.common.Services.createController(t.controllers.AdminPortalManageUsersController)}return i})();i.AdminPortalManageUsers=a})(i=t.directives||(t.directives={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(){this.restrict="E",this.templateUrl="views/adminPortal/adminPortalAuditingView.html",this.scope={},this.replace=!0,this.controller=e.common.Services.createController(t.controllers.AdminPortalAuditingController)}return i})();i.AdminPortalAuditing=a})(i=t.directives||(t.directives={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var a=(function(){function i(){this.restrict="E",this.templateUrl="views/adminPortal/adminPortalTenantSettingsView.html",this.scope={},this.replace=!0,this.controller=e.common.Services.createController(t.controllers.AdminPortalTenantSettingsController)}return i})();i.AdminPortalTenantSettings=a})(i=t.directives||(t.directives={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/adminPortal/adminPortalUsageMetricsView.html",this.replace=!0}return e})();e.AdminPortalUsageMetrics=t})(t=e.directives||(e.directives={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(){this.featureSwitches=[],this.dataClassifications=[]}return e})();e.TenantSettings=t;var i=(function(){function e(e){this.contract=e}return e.prototype.equals=function(e){return!(!e||e.id!==this.id)&&this.isEnabled===e.isEnabled},e})();e.TenantSetting=i;var a=(function(){function e(e){this.contract=e}return e})();e.UsageMetricsDashboard=a})(t=e.models||(e.models={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(t){function i(e,t){for(var i=[],a=0,n=e;a<n.length;a++){var s=n[a],r=o(s,t);r&&i.push(r)}return i}function a(t,i){for(var a=new e.TenantSettings,n=0,s=t.featureSwitches;n<s.length;n++){var r=s[n],c=o(r,i);c&&a.featureSwitches.push(c)}return a.dataClassifications=t.dataClassifications,a}function n(e,t,i){var a=[{displayName:e.get("AdminPortal_UsageMetrics"),type:1},{displayName:e.get("AdminPortal_ManageUsers"),type:2},{displayName:e.get("AdminPortal_TenantSettings"),type:4}];return t.featureSwitches.adminAuditingEnabled&&i&&"undefined"!=typeof window.o365AdminAuditingPageUrl&&a.splice(2,0,{displayName:e.get("AdminPortal_Auditing"),type:3}),a}function o(t,i){var a=new e.TenantSetting(t);a.id=t.switchId,a.name=t.switchName;var n=jsCommon.StringExtensions.format("Flight_{0}_Label",a.id.toString());if(a.displayName=i.get(n),a.isEnabled=t.isEnabled,a.displayName)return a}t.convertTenantSettings=i,t.convertTenantSettingsV2=a,t.createAdminPortalOptions=n})(t=e.AdminPortalModelFactory||(e.AdminPortalModelFactory={}))})(t=e.models||(e.models={}))})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i,n,o){return new a(e,t,i,n,o)}t.createAdminPortalService=i;var a=(function(){function i(e,t,i,a,n){this.promiseFactory=e,this.adminPortalHttpService=t,this.localizationService=i,this.telemetryService=a}return i.prototype.getTenantSettings=function(e){var i=this,a=this.promiseFactory.defer();return this.adminPortalHttpService.getTenantSettings(e).then((function(e){a.resolve(t.models.AdminPortalModelFactory.convertTenantSettings(e.data,i.localizationService))}),(function(e){a.reject(e)})),a.promise},i.prototype.updateTenantSettingsConfig=function(e,t){var i=this.promiseFactory.defer();return this.adminPortalHttpService.updateTenantSettingsConfig(e.map((function(e){return e.contract})),t).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise},i.prototype.getTenantSettingsV2=function(e){var i=this,a=this.promiseFactory.defer();return this.adminPortalHttpService.getTenantSettingsV2(e).then((function(e){a.resolve(t.models.AdminPortalModelFactory.convertTenantSettingsV2(e.data,i.localizationService))}),(function(e){a.reject(e)})),a.promise},i.prototype.updateTenantSettingsConfigV2=function(e,t){var i={featureSwitches:e.featureSwitches.map((function(e){return e.contract})),dataClassifications:e.dataClassifications};return this.adminPortalHttpService.updateTenantSettingsConfigV2(i,t)},i.prototype.refreshAndGetAdminUserMetadata=function(){if(!this._userMetadataPromise){var t=this.promiseFactory.defer(),i=this.telemetryService.startEvent(e.telemetry.DashboardRefreshAndGetUserMetadata);this.adminPortalHttpService.refreshAndGetAdminUserMetadata(i.event).then((function(e){t.resolve(e.data),i.resolve()}),(function(){t.reject(),i.reject()})),this._userMetadataPromise=t.promise}return this._userMetadataPromise},i})()})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(){return new a}t.createAdminPortalHttpService=i;var a=(function(){function t(){}return t.prototype.getAdminUsageGroupMetadata=function(t,i){var a=e.common.httpService.powerbiRequestOptions(i,"GetAdminGroupContainer",{isAdminRequest:!0,groupObjectIdOverride:t});return e.common.httpService.get("powerbi/metadata/admingroupmetadata/",a)},t.prototype.getAdminUsageDashboardMetadata=function(t,i,a){var n=e.common.httpService.powerbiRequestOptions(a,"GetAdminUsageDashboardMetadata",{isAdminRequest:!0,groupObjectIdOverride:i});return e.common.httpService.get("powerbi/metadata/dashboards/"+t,n)},t.prototype.batchGetAdminUsageTiles=function(t,i,a,n){var o=e.common.httpService.powerbiRequestOptions(n,"BatchGetAdminUsageTiles",{isAdminRequest:!0,groupObjectIdOverride:a});return o.enableTelemetry=!0,e.common.httpService.post("powerbi/metadata/dashboard/"+t+"/tiles",JSON.stringify(i),o)},t.prototype.createAdminUsageDashboard=function(t,i){var a=e.common.httpService.powerbiRequestOptions(i,"createAdminUsageDashboard",{isAdminRequest:!0,groupObjectIdOverride:t});return e.common.httpService.get("powerbi/content/providers/adminportal/usage/",a)},t.prototype.getTenantSettings=function(t){var i=e.common.httpService.powerbiRequestOptions(t,"GetTenantSettings",{isAdminRequest:!0});return i.enableTelemetry=!0,e.common.httpService.get("/powerbi/flight/tenantswitches",i)},t.prototype.updateTenantSettingsConfig=function(t,i){var a=e.common.httpService.powerbiRequestOptions(i,"UpdateTenantSettings",{isAdminRequest:!0});return a.enableTelemetry=!0,e.common.httpService.post("/powerbi/flight/tenantswitches",{switches:t},a)},t.prototype.getTenantSettingsV2=function(t){var i=e.common.httpService.powerbiRequestOptions(t,"GetTenantSettings",{isAdminRequest:!0});return i.enableTelemetry=!0,e.common.httpService.get("/metadata/tenantsettings",i)},t.prototype.updateTenantSettingsConfigV2=function(t,i){var a=e.common.httpService.powerbiRequestOptions(i,"UpdateTenantSettings",{isAdminRequest:!0});return a.enableTelemetry=!0,e.common.httpService.put("/metadata/tenantsettings",t,a)},t.prototype.refreshAndGetAdminUserMetadata=function(t){var i=e.common.httpService.powerbiRequestOptions(t,"RefreshAndGetAdminUserMetadata",{isAdminRequest:!0,dismissGroupObjectId:!0});return e.common.httpService.put("powerbi/metadata/refreshusermetadata",null,i)},t})()})(t=e.settings||(e.settings={}))})(powerbi||(powerbi={}));;var powerbi;!(function(i){var t;!(function(i){var t;!(function(i){i.userNotificationsInfoService="userNotificationsInfoService"})(t=i.constants||(i.constants={}))})(t=i.userNotifications||(i.userNotifications={}))})(powerbi||(powerbi={}));var powerbi;!(function(i){var t;!(function(t){angular.module("powerbi.userNotifications",[]).factory("userNotificationHttp",[function(){return i.userNotifications.createUserNotificationHttpService()}]).factory("userNotificationInfo",["userNotificationHttp","promiseFactory","telemetryService","$window","$interval","featureSwitchService","syncService","userInfo","$timeout",function(t,e,o,n,s,r,a,c,f){return i.userNotifications.createUserNotificationInfoService({userNotificationHttpService:t,promiseFactory:e,telemetryService:o,intervalService:s,featureSwitchService:r,syncService:a,userInfo:c,timeout:f},!0)}]).factory("userNotificationTileFilterService",["userNotificationInfo",function(t){return i.userNotifications.createUserNotificationTileFilterService(t)}])})(t=i.userNotifications||(i.userNotifications={}))})(powerbi||(powerbi={}));var powerbi;!(function(i){var t;!(function(i){var t;!(function(i){!(function(i){i[i.DashboardSharing=2]="DashboardSharing",i[i.DashboardAddedToGroup=3]="DashboardAddedToGroup",i[i.Trial=5]="Trial",i[i.DataDrivenAlert=6]="DataDrivenAlert",i[i.DynamicMessage=999]="DynamicMessage"})(i.NotificationCategory||(i.NotificationCategory={}));i.NotificationCategory;!(function(i){i[i.DashboardContentPackNewVersion=0]="DashboardContentPackNewVersion",i[i.UsersNotifications_SharedDashboard=1]="UsersNotifications_SharedDashboard",i[i.ExtendTrial_TrialExpired=2]="ExtendTrial_TrialExpired",i[i.UsersNotifications_TrialRunsOutInLessThanADay=3]="UsersNotifications_TrialRunsOutInLessThanADay",i[i.UsersNotifications_TrialRunningOut=4]="UsersNotifications_TrialRunningOut",i[i.UsersNotifications_TitleTrialExpired=5]="UsersNotifications_TitleTrialExpired",i[i.UsersNotifications_UserName=6]="UsersNotifications_UserName",i[i.UsersNotifications_GoToApp=7]="UsersNotifications_GoToApp",i[i.UsersNotifications_GoToDashboard=8]="UsersNotifications_GoToDashboard",i[i.UsersNotifications_TrialRunsOutInOneDay=9]="UsersNotifications_TrialRunsOutInOneDay",i[i.UsersNotifications_TitleTrialRunsOutInOneDay=10]="UsersNotifications_TitleTrialRunsOutInOneDay",i[i.UsersNotifications_TitleTrialRunsOutInLessThanADay=11]="UsersNotifications_TitleTrialRunsOutInLessThanADay",i[i.UsersNotifications_TitleTrialRunningOut=12]="UsersNotifications_TitleTrialRunningOut",i[i.UsersNotifications_RequestExtensionLinkText=13]="UsersNotifications_RequestExtensionLinkText",i[i.UsersNotifications_DataDrivenAlert=14]="UsersNotifications_DataDrivenAlert",i[i.UsersNotifications_GroupName=15]="UsersNotifications_GroupName",i[i.UsersNotifications_NewDashboard=16]="UsersNotifications_NewDashboard",i[i.UsersNotifications_TileName=17]="UsersNotifications_TileName",i[i.UsersNotifications_DataDrivenDown=18]="UsersNotifications_DataDrivenDown",i[i.UsersNotifications_DataDrivenUp=19]="UsersNotifications_DataDrivenUp",i[i.UsersNotifications_GoToTile=20]="UsersNotifications_GoToTile",i[i.UsersNotifications_AlertTitle=1e3]="UsersNotifications_AlertTitle",i[i.UsersNotifications_AlertExceeded=1001]="UsersNotifications_AlertExceeded",i[i.UsersNotifications_AlertWentBelow=1002]="UsersNotifications_AlertWentBelow",i[i.UsersNotifications_AlertAction=1003]="UsersNotifications_AlertAction",i[i.UsersNotifications_AlertExceededNoTileName=1004]="UsersNotifications_AlertExceededNoTileName",i[i.UsersNotifications_AlertWentBelowNoTileName=1005]="UsersNotifications_AlertWentBelowNoTileName"})(i.NotificationResource||(i.NotificationResource={}));i.NotificationResource;!(function(i){i[i.Text=0]="Text",i[i.Number=1]="Number",i[i.Date=2]="Date"})(i.NotificationValueType||(i.NotificationValueType={}));i.NotificationValueType;!(function(i){i[i.Dashboard=0]="Dashboard",i[i.Trial=1]="Trial",i[i.InFocus=2]="InFocus",i[i.InFocusGroup=3]="InFocusGroup",i[i.DashboardGroup=4]="DashboardGroup",i[i.DynamicMessage=999]="DynamicMessage"})(i.NotificationActionType||(i.NotificationActionType={}));i.NotificationActionType;!(function(i){i[i.User=0]="User",i[i.Group=1]="Group",i[i.Dashboard=2]="Dashboard",i[i.Report=3]="Report",i[i.AutoInsights=4]="AutoInsights",i[i.Comment=5]="Comment",i[i.PowerBI=6]="PowerBI",i[i.Dataset=7]="Dataset",i[i.Settings=8]="Settings",i[i.DataDrivenDown=9]="DataDrivenDown",i[i.DataDrivenUp=10]="DataDrivenUp"})(i.NotificationImageType||(i.NotificationImageType={}));i.NotificationImageType;!(function(i){i[i.DismissAll=0]="DismissAll",i[i.Dismiss=1]="Dismiss",i[i.SeenAll=2]="SeenAll",i[i.Seen=3]="Seen"})(i.UserNotificationsStatus||(i.UserNotificationsStatus={}));i.UserNotificationsStatus})(t=i.contracts||(i.contracts={}))})(t=i.userNotifications||(i.userNotifications={}))})(powerbi||(powerbi={}));var powerbi;!(function(i){var t;!(function(t){var e;!(function(t){var e=(function(){function t(i){this.contract=i,i.message&&(i.message.title&&(this.title=i.message.title.text?i.message.title.text:this.getLocalizeValue(i.message.title)),i.message.message&&(this.description=i.message.message.text?i.message.message.text:this.getLocalizeValue(i.message.message)),this.image=i.message.image),this.formattedDate=i.createdTime?jsCommon.DateExtensions.formatPretty(jsCommon.DateExtensions.parseUtcDate(i.createdTime)):"",this.seen=i.seen,i.action&&(this.actionText=i.action.resource.text?i.action.resource.text:this.getLocalizeValue(i.action.resource),this.actionPath=i.action.path,this.actionType=i.action.actionType)}return t.prototype.getLocalizeValue=function(t){var e=i.userNotifications.contracts.NotificationResource[t.displayTextResource];if(e&&t.values&&t.values.length>0){var o=[];return t.values.forEach((function(t){switch(t.NotificationValueType){case i.userNotifications.contracts.NotificationValueType.Date:o.push(i.common.localize.formatValue(jsCommon.DateExtensions.parseUtcDate(t.value)));break;case i.userNotifications.contracts.NotificationValueType.Number:var e=parseFloat(t.value);if(t.Format){var n=i.formattingService.formatValue(e,t.Format);o.push(i.common.localize.formatValue(n))}else o.push(i.common.localize.formatValue(t.value));break;default:o.push(i.common.localize.formatValue(t.value))}})),i.common.localize.format(e,o)}return i.common.localize.get(e)},t})();t.UserNotificationModel=e})(e=t.models||(t.models={}))})(t=i.userNotifications||(i.userNotifications={}))})(powerbi||(powerbi={}));var powerbi;!(function(i){var t;!(function(t){function e(){return new o}t.createUserNotificationHttpService=e;var o=(function(){function t(){}return t.prototype.getActiveNotification=function(t,e,o){var n=i.common.httpService.powerbiRequestOptions(t,"LoadMoreNotifications"),s="metadata/notifications?take="+e;return o&&(s=s+"&skip="+o),i.common.httpService.get(s,n)},t.prototype.getActiveNotificationSummary=function(t,e){var o=i.common.httpService.powerbiRequestOptions(t,"GetUserNotificationsSummary");return i.common.httpService.get("metadata/notifications/summary?take="+e,o)},t.prototype.updateNotificationStatus=function(t,e,o){var n;return n=o?i.common.httpService.powerbiRequestOptions(o,"UpdateUserNotificationsStatus"):i.common.httpService.powerbiRequestOptions(),i.common.httpService.put("metadata/notifications/"+t+"/action/"+e,null,n)},t.prototype.markNotificationsSeen=function(t,e){var o;o=e?i.common.httpService.powerbiRequestOptions(e,"UpdateUserNotificationsStatus"):i.common.httpService.powerbiRequestOptions();var n={ids:t};return i.common.httpService.put("metadata/notifications/action/"+i.userNotifications.contracts.UserNotificationsStatus.Seen+"/collections",n,o)},t})()})(t=i.userNotifications||(i.userNotifications={}))})(powerbi||(powerbi={}));var powerbi;!(function(i){var t;!(function(t){function e(i,t,e){return o||(o=new a(i,t,e)),o}var o;t.createUserNotificationInfoService=e;var n=100,s=6e5,r=6e3,a=(function(){function e(i,t,e){var o=this;this.unseenCountListners=[],this.notificationsUpdatedListners=[],this.clientNotificationId=0,this.services=i,t&&this.services.featureSwitchService.featureSwitches.userNotificationsEnabled&&!e&&(this.userNotifications={totalCount:0,unseenCount:0,notifications:[]},i.timeout((function(){o.initialize()}),r))}return e.prototype.getNextPageData=function(t){var e=this;t||(t=n);var o=this.services.telemetryService.startEvent(i.telemetry.UserNotificationsLoadMoreNotifications),s=this.userNotifications.notifications[this.userNotifications.notifications.length-1].id;this.services.userNotificationHttpService.getActiveNotification(o.event,t,s).then((function(i){e.userNotifications.notifications=e.userNotifications.notifications.concat(e.filterNotSupportedNotifications(i.data)),e.notifyNotificationsUpdated(),o.resolve()}),(function(i){o.reject()}))},e.prototype.registerUnseenCountListner=function(i){this.unseenCountListners.push(i)},e.prototype.registerNotificationsUpdatedListner=function(i){this.notificationsUpdatedListners.push(i)},e.prototype.updateLastSeenDate=function(){if(this.userNotifications){this.userNotifications.unseenCount=0;var i=this.getLatestNotificationForServer(),e=i&&!i.seen;this.userNotifications.notifications.forEach((function(i){i.seen=!0})),this.notifyUnseenCount(),this.notifyNotificationsUpdated(),e&&this.services.userNotificationHttpService.updateNotificationStatus(i.id,t.contracts.UserNotificationsStatus.SeenAll).then((function(i){}),(function(i){}))}},e.prototype.updateSeenNotifications=function(i){this.userNotifications&&(this.userNotifications.unseenCount-=i.length,this.userNotifications.notifications.forEach((function(t){_.contains(i,t.id)&&(t.seen=!0)})),this.notifyUnseenCount(),this.notifyNotificationsUpdated(),this.services.userNotificationHttpService.markNotificationsSeen(i))},e.prototype.dismissNotification=function(e,o){if(this.userNotifications.totalCount=this.userNotifications.totalCount-1,this.userNotifications.notifications=_.filter(this.userNotifications.notifications,(function(i){return i.id!==e.id})),e.seen||(this.userNotifications.unseenCount=this.userNotifications.unseenCount-1,this.notifyUnseenCount()),this.notifyNotificationsUpdated(),!o&&e.id>0){var n=this.services.telemetryService.startEvent(i.telemetry.UserNotificationsDismissNotification);this.services.userNotificationHttpService.updateNotificationStatus(e.id,t.contracts.UserNotificationsStatus.Dismiss,n.event).then((function(i){n.resolve()}),(function(i){n.reject()}))}},e.prototype.dismissAll=function(){if(this.userNotifications&&this.userNotifications.notifications.length>0){var e=this.getLatestNotificationForServer();if(this.userNotifications.totalCount=0,this.userNotifications.unseenCount=0,this.userNotifications.notifications=[],this.notifyNotificationsUpdated(),this.notifyUnseenCount(),e){var o=this.services.telemetryService.startEvent(i.telemetry.UserNotificationsDismissAllNotifications);this.services.userNotificationHttpService.updateNotificationStatus(e.id,t.contracts.UserNotificationsStatus.DismissAll,o.event).then((function(i){o.resolve()}),(function(i){o.reject()}))}}},e.prototype.onNotificationAdded=function(){this.getActiveNotification(n)},e.prototype.onNotificationDismiss=function(i){var t=_.find(this.userNotifications.notifications,(function(t){return t.id===i}));t&&this.dismissNotification(t,!0)},e.prototype.onNotificationSeen=function(i){var t=this,e=!1;this.userNotifications.notifications.forEach((function(o){o.id<=i&&o.id>0&&!o.seen&&(o.seen=!0,t.userNotifications.unseenCount=t.userNotifications.unseenCount-1,e=!0)})),e&&(this.notifyUnseenCount(),this.notifyNotificationsUpdated())},e.prototype.onNotificationDismissAll=function(){this.userNotifications.totalCount>0&&this.getActiveNotification(n)},e.prototype.loadIcon=function(i){if(!i.iconUrl&&i.message.image&&i.message.image.imagePath)switch(i.message.image.imageType){case t.contracts.NotificationImageType.User:this.services.userInfo.findOrGetUserPhoto(i.message.image.imagePath).then((function(t){i.iconUrl=t}));break;case t.contracts.NotificationImageType.Group:this.services.userInfo.findOrGetGroupPhoto(i.message.image.imagePath).then((function(t){i.iconUrl=t}))}},e.prototype.addClientNotification=function(i){i&&(i.id=this.clientNotificationId--,i.seen=!1,this.userNotifications&&(this.userNotifications.totalCount++,this.userNotifications.unseenCount++,this.userNotifications.notifications=[i].concat(this.userNotifications.notifications),this.notifyUnseenCount(),this.notifyNotificationsUpdated()))},e.prototype.initialize=function(){var i=this;this.getActiveNotification(n),this.services.syncService.addNotificationsRefreshListener(this),this.services.intervalService((function(){i.getActiveNotification(n)}),s)},e.prototype.getLatestNotificationForServer=function(){var i=_.find(this.userNotifications.notifications,(function(i){return i.id>0&&!i.seen}));return i},e.prototype.mergeNotifications=function(i){this.userNotifications.totalCount=i.totalCount,this.userNotifications.unseenCount=i.unseenCount;var t=_.filter(this.userNotifications.notifications,(function(i){return i.id<=0}));if(t&&t.length>0){this.userNotifications.totalCount=i.totalCount+t.length;var e=_.filter(t,(function(i){return!i.seen}));e&&e.length>0&&(this.userNotifications.unseenCount=i.unseenCount+e.length)}var o=[],n=_.map(this.userNotifications.notifications,(function(i){return i.id}));o=_.filter(i.notifications,(function(i){return n.indexOf(i.id)<0})),o.length>0&&(t&&t.length>0?this.userNotifications.notifications=t.concat(o).concat(_.filter(this.userNotifications.notifications,(function(i){return i.id>0}))):this.userNotifications.notifications=o.concat(this.userNotifications.notifications))},e.prototype.notifyUnseenCount=function(){this.unseenCountListners.forEach((function(i){i()}))},e.prototype.notifyNotificationsUpdated=function(){this.notificationsUpdatedListners.forEach((function(i){i()}))},e.prototype.getActiveNotification=function(t){var e=this;void 0===t&&(t=n);var o=this.services.telemetryService.startEvent(i.telemetry.UserNotificationsGetNotificationsSummary);this.services.userNotificationHttpService.getActiveNotificationSummary(o.event,t).then((function(i){var t=e.filterNotSupportedUserNotifications(i.data);e.userNotifications&&e.userNotifications.notifications?e.mergeNotifications(t):e.userNotifications=t,e.notifyUnseenCount(),e.notifyNotificationsUpdated(),o.resolve()}),(function(i){o.reject()}))},e.prototype.filterNotSupportedUserNotifications=function(i){if(i&&i.totalCount>0){i.notifications=this.filterNotSupportedNotifications(i.notifications);var t=_.filter(i.notifications,(function(i){return!i.seen}));i.unseenCount=t?t.length:0}return i},e.prototype.filterNotSupportedNotifications=function(i){return _.filter(i,(function(i){return t.contracts.NotificationCategory[i.notificationCategory]}))},e})()})(t=i.userNotifications||(i.userNotifications={}))})(powerbi||(powerbi={}));var powerbi;!(function(i){var t;!(function(t){function e(i){return new n(i)}var o=i.userNotifications.contracts.NotificationActionType;t.createUserNotificationTileFilterService=e;var n=(function(){function i(i){this.userNotificationInfoService=i}return i.prototype.filterNotifications=function(i,t){if(_.isEmpty(i))return[];var e=t?t:this.tileId;return e?_.filter(i,(function(i){var t=i.message.filterProperties?i.message.filterProperties.TileId:null;if(!t)return!1;var n=parseInt(t,10);return(i.action.actionType===o.InFocus||i.action.actionType===o.InFocusGroup)&&n===e})):i},i})()})(t=i.userNotifications||(i.userNotifications={}))})(powerbi||(powerbi={}));var powerbi;!(function(i){var t;!(function(t){t.UserNotificationsGetNotificationsSummary=function(t,e,o,n,s,r,a,c,f){void 0===e&&(e=!1),void 0===o&&(o=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===c&&(c=void 0),void 0===f&&(f=void 0);var u={parentId:t,isError:e,errorSource:o,errorCode:n,errorMessage:s,activityName:r,activityId:a,isDebug:c,isCancelled:f},d={name:"PBI.UserNotifications.GetNotificationsSummary",category:i.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=i.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof i.telemetry.UserNotificationsGetNotificationsSummaryLoggers&&(d.loggers=i.telemetry.UserNotificationsGetNotificationsSummaryLoggers),d},t.UserNotificationsLoadMoreNotifications=function(t,e,o,n,s,r,a,c,f){void 0===e&&(e=!1),void 0===o&&(o=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===c&&(c=void 0),void 0===f&&(f=void 0);var u={parentId:t,isError:e,errorSource:o,errorCode:n,errorMessage:s,activityName:r,activityId:a,isDebug:c,isCancelled:f},d={name:"PBI.UserNotifications.LoadMoreNotifications",category:i.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=i.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof i.telemetry.UserNotificationsLoadMoreNotificationsLoggers&&(d.loggers=i.telemetry.UserNotificationsLoadMoreNotificationsLoggers),d},t.UserNotificationsDismissNotification=function(t,e,o,n,s,r,a,c,f){void 0===e&&(e=!1),void 0===o&&(o=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===c&&(c=void 0),void 0===f&&(f=void 0);var u={parentId:t,isError:e,errorSource:o,errorCode:n,errorMessage:s,activityName:r,activityId:a,isDebug:c,isCancelled:f},d={name:"PBI.UserNotifications.DismissNotification",category:i.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=i.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof i.telemetry.UserNotificationsDismissNotificationLoggers&&(d.loggers=i.telemetry.UserNotificationsDismissNotificationLoggers),d},t.UserNotificationsDismissAllNotifications=function(t,e,o,n,s,r,a,c,f){void 0===e&&(e=!1),void 0===o&&(o=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===c&&(c=void 0),void 0===f&&(f=void 0);var u={parentId:t,isError:e,errorSource:o,errorCode:n,errorMessage:s,activityName:r,activityId:a,isDebug:c,isCancelled:f},d={name:"PBI.UserNotifications.DismissAllNotifications",category:i.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=i.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof i.telemetry.UserNotificationsDismissAllNotificationsLoggers&&(d.loggers=i.telemetry.UserNotificationsDismissAllNotificationsLoggers),d}})(t=i.telemetry||(i.telemetry={}))})(powerbi||(powerbi={}));;var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},powerbi;!(function(e){var t;!(function(t){var o;!(function(t){t.contentPackDirtyShowNotification="contentPackDirty",t.reportDeletedEventName="reportDeleted",t.onDatasetAddedEventName="onDatasetAdded",t.deleteModelFailedEventName="deleteModelFailed",t.deleteModelStartedEventName="deleteModelStarted",t.onDashboardShallowEditEventName="onDashboardShallowEdit",t.mergeDashboardContainerModelsReportsAndPackagesEventName="mergeDashboardContainerModelsReportsAndPackages",t.updateDashboardContainerEventName="updateDashboardContainer",t.addOrUpdateDashboardEventName="addOrUpdateDashboard",t.samplesContentProviderId=-1,t.initialDashboardContainerLoadingState="#loading#",t.initialDashboardContainerErrorState="#error#",t.initialDashboardContainerReadyEventName="initialDashboardContainerReady",t.CannotDeleteModelPublishedToOrganizationalAppHeader="CannotDeleteModelPublishedToOrganizationalApp",t.shouldShowEnableCustomVisualsDialog="shouldShowEnableCustomVisualsDialog",t.seenDashboardsStorageKey="seenSharedDashboards",t.ScopedInstanceProviderName="dataServices",t.dashboardElementName=".dashboard";var o;!(function(e){e.reloadExcelWorkbookEventName="reloadExcelWorkbook",e.pinClickedEventName="pinClicked",e.editInExcelOnlineClickedEventName="editInExcelOnlineClicked",e.editInExcelClickedEventName="editInExcelClicked",e.calculateWorkbookClickedEventName="calculateWorkbookClicked",e.bindToExcelWorkbookEventName="bindToExcelWorkbook",e.openWorkbookContextMenuEventName="openWorkbookContextMenu",e.viewWorkbookEventName="viewWorkbook",e.renameWorkbookEventName="renameWorkbook",e.editWorkbookEventName="editWorkbook",e.scheduleRefreshWorkbookEventName="scheduleRefreshWorkbook",e.refreshNowWorkbookEventName="refreshNowWorkbook",e.removeWorkbookEventName="removeWorkbook",e.excelWebAppScriptsLoaded="excelWebAppScriptsLoaded",e.defaultKeepOriginalContentSize=!1,e.workbookAddedEventName="workbookAdded"})(o=t.workbook||(t.workbook={})),t.SingleValueRealTimeWindow=250,t.MultipleValueRealTimeWindow=6e4,t.RealTimeIntervals=[1,5,10,15,20,25,30,45,60],t.RealTimeDataSourceName="_RealTimeSchema_",t.modelPlaceholderImageUrl="/"+e.build+"/images/modelPlaceholder.png",t.packagePublishedSuccessfullyEventName="packagePublishedSuccessfully",t.packageVersionChange="packageVersionChange"})(o=t.constants||(t.constants={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.DashboardRenameReport=function(t,o,r,i,a,n,s,d,c){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===i&&(i=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0);var l={parentId:t,isError:o,errorSource:r,errorCode:i,errorMessage:a,activityName:n,activityId:s,isDebug:d,isCancelled:c},p={name:"PBI.Dashboard.RenameReport",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:l.parentId,isError:l.isError};return"undefined"!=typeof l.errorSource&&(t.errorSource=e.telemetry.ErrorSource[l.errorSource]),"undefined"!=typeof l.errorCode&&(t.errorCode=l.errorCode),"undefined"!=typeof l.errorMessage&&(t.errorMessage=l.errorMessage),"undefined"!=typeof l.activityName&&(t.activityName=l.activityName),"undefined"!=typeof l.activityId&&(t.activityId=l.activityId),"undefined"!=typeof l.isDebug&&(t.isDebug=l.isDebug),"undefined"!=typeof l.isCancelled&&(t.isCancelled=l.isCancelled),t},info:l,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRenameReportLoggers&&(p.loggers=e.telemetry.DashboardRenameReportLoggers),p},t.DashboardDeleteReport=function(t,o,r,i,a,n,s,d,c){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===i&&(i=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0);var l={parentId:t,isError:o,errorSource:r,errorCode:i,errorMessage:a,activityName:n,activityId:s,isDebug:d,isCancelled:c},p={name:"PBI.Dashboard.DeleteReport",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:l.parentId,isError:l.isError};return"undefined"!=typeof l.errorSource&&(t.errorSource=e.telemetry.ErrorSource[l.errorSource]),"undefined"!=typeof l.errorCode&&(t.errorCode=l.errorCode),"undefined"!=typeof l.errorMessage&&(t.errorMessage=l.errorMessage),"undefined"!=typeof l.activityName&&(t.activityName=l.activityName),"undefined"!=typeof l.activityId&&(t.activityId=l.activityId),"undefined"!=typeof l.isDebug&&(t.isDebug=l.isDebug),"undefined"!=typeof l.isCancelled&&(t.isCancelled=l.isCancelled),t},info:l,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDeleteReportLoggers&&(p.loggers=e.telemetry.DashboardDeleteReportLoggers),p},t.DashboardInitializeNavigationPaneReports=function(t,o,r,i,a,n,s,d,c){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===i&&(i=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0);var l={parentId:t,isError:o,errorSource:r,errorCode:i,errorMessage:a,activityName:n,activityId:s,isDebug:d,isCancelled:c},p={name:"PBI.Dashboard.InitializeNavigationPaneReports",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:l.parentId,isError:l.isError};return"undefined"!=typeof l.errorSource&&(t.errorSource=e.telemetry.ErrorSource[l.errorSource]),"undefined"!=typeof l.errorCode&&(t.errorCode=l.errorCode),"undefined"!=typeof l.errorMessage&&(t.errorMessage=l.errorMessage),"undefined"!=typeof l.activityName&&(t.activityName=l.activityName),"undefined"!=typeof l.activityId&&(t.activityId=l.activityId),"undefined"!=typeof l.isDebug&&(t.isDebug=l.isDebug),"undefined"!=typeof l.isCancelled&&(t.isCancelled=l.isCancelled),t},info:l,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardInitializeNavigationPaneReportsLoggers&&(p.loggers=e.telemetry.DashboardInitializeNavigationPaneReportsLoggers),p},t.DashboardInitializeNavigationPaneModels=function(t,o,r,i,a,n,s,d,c){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===i&&(i=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0);var l={parentId:t,isError:o,errorSource:r,errorCode:i,errorMessage:a,activityName:n,activityId:s,isDebug:d,isCancelled:c},p={name:"PBI.Dashboard.InitializeNavigationPaneModels",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:l.parentId,isError:l.isError};return"undefined"!=typeof l.errorSource&&(t.errorSource=e.telemetry.ErrorSource[l.errorSource]),"undefined"!=typeof l.errorCode&&(t.errorCode=l.errorCode),"undefined"!=typeof l.errorMessage&&(t.errorMessage=l.errorMessage),"undefined"!=typeof l.activityName&&(t.activityName=l.activityName),"undefined"!=typeof l.activityId&&(t.activityId=l.activityId),"undefined"!=typeof l.isDebug&&(t.isDebug=l.isDebug),"undefined"!=typeof l.isCancelled&&(t.isCancelled=l.isCancelled),t},info:l,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardInitializeNavigationPaneModelsLoggers&&(p.loggers=e.telemetry.DashboardInitializeNavigationPaneModelsLoggers),p},t.DashboardRenameDataset=function(t,o,r,i,a,n,s,d,c){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===i&&(i=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0);var l={parentId:t,isError:o,errorSource:r,errorCode:i,errorMessage:a,activityName:n,activityId:s,isDebug:d,isCancelled:c},p={name:"PBI.Dashboard.RenameDataset",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:l.parentId,isError:l.isError};return"undefined"!=typeof l.errorSource&&(t.errorSource=e.telemetry.ErrorSource[l.errorSource]),"undefined"!=typeof l.errorCode&&(t.errorCode=l.errorCode),"undefined"!=typeof l.errorMessage&&(t.errorMessage=l.errorMessage),"undefined"!=typeof l.activityName&&(t.activityName=l.activityName),"undefined"!=typeof l.activityId&&(t.activityId=l.activityId),"undefined"!=typeof l.isDebug&&(t.isDebug=l.isDebug),"undefined"!=typeof l.isCancelled&&(t.isCancelled=l.isCancelled),t},info:l,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRenameDatasetLoggers&&(p.loggers=e.telemetry.DashboardRenameDatasetLoggers),p},t.DashboardUpdateModelQnaFeatures=function(t,o,r,i,a,n,s,d,c,l,p){void 0===i&&(i=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===p&&(p=void 0);var u={cortanaValue:t,qnaValue:o,parentId:r,isError:i,errorSource:a,errorCode:n,errorMessage:s,activityName:d,activityId:c,isDebug:l,isCancelled:p},h={name:"PBI.Dashboard.UpdateModelQnaFeatures",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={cortanaValue:u.cortanaValue,qnaValue:u.qnaValue,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardUpdateModelQnaFeaturesLoggers&&(h.loggers=e.telemetry.DashboardUpdateModelQnaFeaturesLoggers),h},t.DashboardUpdateFeaturedQuestions=function(t,o,r,i,a,n,s,d,c,l){void 0===r&&(r=!1),void 0===i&&(i=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var p={count:t,parentId:o,isError:r,errorSource:i,errorCode:a,errorMessage:n,activityName:s,activityId:d,isDebug:c,isCancelled:l},u={name:"PBI.Dashboard.UpdateFeaturedQuestions",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={count:p.count,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardUpdateFeaturedQuestionsLoggers&&(u.loggers=e.telemetry.DashboardUpdateFeaturedQuestionsLoggers),u},t.DashboardDeleteDataset=function(t,o,r,i,a,n,s,d,c){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===i&&(i=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0);var l={parentId:t,isError:o,errorSource:r,errorCode:i,errorMessage:a,activityName:n,activityId:s,isDebug:d,isCancelled:c},p={name:"PBI.Dashboard.DeleteDataset",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:l.parentId,isError:l.isError};return"undefined"!=typeof l.errorSource&&(t.errorSource=e.telemetry.ErrorSource[l.errorSource]),"undefined"!=typeof l.errorCode&&(t.errorCode=l.errorCode),"undefined"!=typeof l.errorMessage&&(t.errorMessage=l.errorMessage),"undefined"!=typeof l.activityName&&(t.activityName=l.activityName),"undefined"!=typeof l.activityId&&(t.activityId=l.activityId),"undefined"!=typeof l.isDebug&&(t.isDebug=l.isDebug),"undefined"!=typeof l.isCancelled&&(t.isCancelled=l.isCancelled),t},info:l,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDeleteDatasetLoggers&&(p.loggers=e.telemetry.DashboardDeleteDatasetLoggers),p},t.DashboardTileError=function(t,o){var r={tileType:t,message:o},i={name:"PBI.Dashboard.TileError",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={tileType:r.tileType,message:r.message};return e},info:r,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardTileErrorLoggers&&(i.loggers=e.telemetry.DashboardTileErrorLoggers),i},t.DashboardAddUpdateDashboard=function(t,o,r,i,a,n,s,d,c){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===i&&(i=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0);var l={parentId:t,isError:o,errorSource:r,errorCode:i,errorMessage:a,activityName:n,activityId:s,isDebug:d,isCancelled:c},p={name:"PBI.Dashboard.AddUpdateDashboard",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:l.parentId,isError:l.isError};return"undefined"!=typeof l.errorSource&&(t.errorSource=e.telemetry.ErrorSource[l.errorSource]),"undefined"!=typeof l.errorCode&&(t.errorCode=l.errorCode),"undefined"!=typeof l.errorMessage&&(t.errorMessage=l.errorMessage),"undefined"!=typeof l.activityName&&(t.activityName=l.activityName),"undefined"!=typeof l.activityId&&(t.activityId=l.activityId),"undefined"!=typeof l.isDebug&&(t.isDebug=l.isDebug),"undefined"!=typeof l.isCancelled&&(t.isCancelled=l.isCancelled),t},info:l,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardAddUpdateDashboardLoggers&&(p.loggers=e.telemetry.DashboardAddUpdateDashboardLoggers),p},t.DashboardSharingNewUnseenDashboards=function(t,o,r,i,a,n,s,d,c,l,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var h={numNewUnseenSharedDashboards:t,numSharedDashboards:o,numAllDashboards:r,parentId:i,isError:a,errorSource:n,errorCode:s,errorMessage:d,activityName:c,activityId:l,isDebug:p,isCancelled:u},m={name:"PBI.Dashboard.SharingNewUnseenDashboards",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={numNewUnseenSharedDashboards:h.numNewUnseenSharedDashboards,numSharedDashboards:h.numSharedDashboards,numAllDashboards:h.numAllDashboards,parentId:h.parentId,isError:h.isError};return"undefined"!=typeof h.errorSource&&(t.errorSource=e.telemetry.ErrorSource[h.errorSource]),"undefined"!=typeof h.errorCode&&(t.errorCode=h.errorCode),"undefined"!=typeof h.errorMessage&&(t.errorMessage=h.errorMessage),"undefined"!=typeof h.activityName&&(t.activityName=h.activityName),"undefined"!=typeof h.activityId&&(t.activityId=h.activityId),"undefined"!=typeof h.isDebug&&(t.isDebug=h.isDebug),"undefined"!=typeof h.isCancelled&&(t.isCancelled=h.isCancelled),t},info:h,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardSharingNewUnseenDashboardsLoggers&&(m.loggers=e.telemetry.DashboardSharingNewUnseenDashboardsLoggers),m},t.DashboardInitializeNavigationPaneWorkbooks=function(t,o,r,i,a,n,s,d,c){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===i&&(i=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0);var l={parentId:t,isError:o,errorSource:r,errorCode:i,errorMessage:a,activityName:n,activityId:s,isDebug:d,isCancelled:c},p={name:"PBI.Dashboard.InitializeNavigationPaneWorkbooks",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:l.parentId,isError:l.isError};return"undefined"!=typeof l.errorSource&&(t.errorSource=e.telemetry.ErrorSource[l.errorSource]),"undefined"!=typeof l.errorCode&&(t.errorCode=l.errorCode),"undefined"!=typeof l.errorMessage&&(t.errorMessage=l.errorMessage),"undefined"!=typeof l.activityName&&(t.activityName=l.activityName),"undefined"!=typeof l.activityId&&(t.activityId=l.activityId),"undefined"!=typeof l.isDebug&&(t.isDebug=l.isDebug),"undefined"!=typeof l.isCancelled&&(t.isCancelled=l.isCancelled),t},info:l,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardInitializeNavigationPaneWorkbooksLoggers&&(p.loggers=e.telemetry.DashboardInitializeNavigationPaneWorkbooksLoggers),p},t.DashboardUpdateLocalWorkbookNeverShowExplanation=function(t,o,r,i,a,n,s,d,c){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===i&&(i=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0);var l={parentId:t,isError:o,errorSource:r,errorCode:i,errorMessage:a,activityName:n,activityId:s,isDebug:d,isCancelled:c},p={name:"PBI.Dashboard.UpdateLocalWorkbookNeverShowExplanation",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:l.parentId,isError:l.isError};return"undefined"!=typeof l.errorSource&&(t.errorSource=e.telemetry.ErrorSource[l.errorSource]),"undefined"!=typeof l.errorCode&&(t.errorCode=l.errorCode),"undefined"!=typeof l.errorMessage&&(t.errorMessage=l.errorMessage),"undefined"!=typeof l.activityName&&(t.activityName=l.activityName),"undefined"!=typeof l.activityId&&(t.activityId=l.activityId),"undefined"!=typeof l.isDebug&&(t.isDebug=l.isDebug),"undefined"!=typeof l.isCancelled&&(t.isCancelled=l.isCancelled),t},info:l,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardUpdateLocalWorkbookNeverShowExplanationLoggers&&(p.loggers=e.telemetry.DashboardUpdateLocalWorkbookNeverShowExplanationLoggers),p},t.DashboardRenameWorkbook=function(t,o,r,i,a,n,s,d,c){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===i&&(i=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0);var l={parentId:t,isError:o,errorSource:r,errorCode:i,errorMessage:a,activityName:n,activityId:s,isDebug:d,isCancelled:c},p={name:"PBI.Dashboard.RenameWorkbook",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:l.parentId,isError:l.isError};return"undefined"!=typeof l.errorSource&&(t.errorSource=e.telemetry.ErrorSource[l.errorSource]),"undefined"!=typeof l.errorCode&&(t.errorCode=l.errorCode),"undefined"!=typeof l.errorMessage&&(t.errorMessage=l.errorMessage),"undefined"!=typeof l.activityName&&(t.activityName=l.activityName),"undefined"!=typeof l.activityId&&(t.activityId=l.activityId),"undefined"!=typeof l.isDebug&&(t.isDebug=l.isDebug),"undefined"!=typeof l.isCancelled&&(t.isCancelled=l.isCancelled),t},info:l,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRenameWorkbookLoggers&&(p.loggers=e.telemetry.DashboardRenameWorkbookLoggers),p},t.DashboardRemoveWorkbook=function(t,o,r,i,a,n,s,d,c,l,p){void 0===i&&(i=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===p&&(p=void 0);var u={storageProvider:t,contentProvider:o,parentId:r,isError:i,errorSource:a,errorCode:n,errorMessage:s,activityName:d,activityId:c,isDebug:l,isCancelled:p},h={name:"PBI.Dashboard.RemoveWorkbook",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={storageProvider:u.storageProvider,contentProvider:u.contentProvider,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRemoveWorkbookLoggers&&(h.loggers=e.telemetry.DashboardRemoveWorkbookLoggers),h},t.DashboardGetWorkbookWopiAccessInformation=function(t,o,r,i,a,n,s,d,c){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===i&&(i=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0);var l={parentId:t,isError:o,errorSource:r,errorCode:i,errorMessage:a,activityName:n,activityId:s,isDebug:d,isCancelled:c},p={name:"PBI.Dashboard.GetWorkbookWopiAccessInformation",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:l.parentId,isError:l.isError};return"undefined"!=typeof l.errorSource&&(t.errorSource=e.telemetry.ErrorSource[l.errorSource]),"undefined"!=typeof l.errorCode&&(t.errorCode=l.errorCode),"undefined"!=typeof l.errorMessage&&(t.errorMessage=l.errorMessage),"undefined"!=typeof l.activityName&&(t.activityName=l.activityName),"undefined"!=typeof l.activityId&&(t.activityId=l.activityId),"undefined"!=typeof l.isDebug&&(t.isDebug=l.isDebug),"undefined"!=typeof l.isCancelled&&(t.isCancelled=l.isCancelled),t},info:l,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardGetWorkbookWopiAccessInformationLoggers&&(p.loggers=e.telemetry.DashboardGetWorkbookWopiAccessInformationLoggers),p},t.DashboardWorkbookEmbeddingExternalSuccess=function(t,o,r,i,a,n,s,d,c,l,p,u,h,m){void 0===s&&(s=!1),void 0===d&&(d=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===h&&(h=void 0),void 0===m&&(m=void 0);var f={etagHash:t,correlationId:o,storageProvider:r,permissions:i,contentProvider:a,parentId:n,isError:s,errorSource:d,errorCode:c,errorMessage:l,activityName:p,activityId:u,isDebug:h,isCancelled:m},v={name:"PBI.Dashboard.WorkbookEmbeddingExternalSuccess",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={etagHash:f.etagHash,correlationId:f.correlationId,storageProvider:f.storageProvider,permissions:f.permissions,contentProvider:f.contentProvider,parentId:f.parentId,isError:f.isError};return"undefined"!=typeof f.errorSource&&(t.errorSource=e.telemetry.ErrorSource[f.errorSource]),"undefined"!=typeof f.errorCode&&(t.errorCode=f.errorCode),"undefined"!=typeof f.errorMessage&&(t.errorMessage=f.errorMessage),"undefined"!=typeof f.activityName&&(t.activityName=f.activityName),"undefined"!=typeof f.activityId&&(t.activityId=f.activityId),"undefined"!=typeof f.isDebug&&(t.isDebug=f.isDebug),"undefined"!=typeof f.isCancelled&&(t.isCancelled=f.isCancelled),t},info:f,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardWorkbookEmbeddingExternalSuccessLoggers&&(v.loggers=e.telemetry.DashboardWorkbookEmbeddingExternalSuccessLoggers),v},t.DashboardWorkbookEmbeddingExternalFailure=function(t,o,r,i,a,n,s,d){var c={etagHash:t,errorCode:o,errorDescription:r,correlationId:i,storageProvider:a,permissions:n,contentProvider:s,message:d},l={name:"PBI.Dashboard.WorkbookEmbeddingExternalFailure",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={etagHash:c.etagHash,errorCode:c.errorCode,errorDescription:c.errorDescription,correlationId:c.correlationId,storageProvider:c.storageProvider,permissions:c.permissions,contentProvider:c.contentProvider,message:c.message};return e},info:c,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardWorkbookEmbeddingExternalFailureLoggers&&(l.loggers=e.telemetry.DashboardWorkbookEmbeddingExternalFailureLoggers),l},t.DashboardImportResourcePackagesOnLoad=function(t,o,r,i,a,n,s,d,c,l,p){void 0===i&&(i=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===p&&(p=void 0);var u={dashboardId:t,resourcePackagesCount:o,parentId:r,isError:i,errorSource:a,errorCode:n,errorMessage:s,activityName:d,activityId:c,isDebug:l,isCancelled:p},h={name:"PBI.Dashboard.ImportResourcePackagesOnLoad",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardId:u.dashboardId,resourcePackagesCount:u.resourcePackagesCount,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardImportResourcePackagesOnLoadLoggers&&(h.loggers=e.telemetry.DashboardImportResourcePackagesOnLoadLoggers),h},t.DashboardGetNavigationPanePackage=function(t,o,r,i,a,n,s,d,c){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===i&&(i=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===d&&(d=void 0),void 0===c&&(c=void 0);var l={parentId:t,isError:o,errorSource:r,errorCode:i,errorMessage:a,activityName:n,activityId:s,isDebug:d,isCancelled:c},p={name:"PBI.Dashboard.GetNavigationPanePackage",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:l.parentId,isError:l.isError};return"undefined"!=typeof l.errorSource&&(t.errorSource=e.telemetry.ErrorSource[l.errorSource]),"undefined"!=typeof l.errorCode&&(t.errorCode=l.errorCode),"undefined"!=typeof l.errorMessage&&(t.errorMessage=l.errorMessage),"undefined"!=typeof l.activityName&&(t.activityName=l.activityName),"undefined"!=typeof l.activityId&&(t.activityId=l.activityId),"undefined"!=typeof l.isDebug&&(t.isDebug=l.isDebug),"undefined"!=typeof l.isCancelled&&(t.isCancelled=l.isCancelled),t},info:l,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardGetNavigationPanePackageLoggers&&(p.loggers=e.telemetry.DashboardGetNavigationPanePackageLoggers),p},t.PermissionsObjectNotFound=function(t,o,r,i){var a={Id:t,packageId:o,objectType:r,message:i},n={name:"PBI.Permissions.ObjectNotFound",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={Id:a.Id,packageId:a.packageId,objectType:a.objectType,message:a.message};return e},info:a,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.PermissionsObjectNotFoundLoggers&&(n.loggers=e.telemetry.PermissionsObjectNotFoundLoggers),n}})(t=e.telemetry||(e.telemetry={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){!(function(e){e[e.none=0]="none",e[e.workbookTileGeneralError=10]="workbookTileGeneralError",e[e.workbookTileFileNotFound=11]="workbookTileFileNotFound",e[e.workbookTileObjectNotFound=12]="workbookTileObjectNotFound",e[e.workbookTileUnauthorized=13]="workbookTileUnauthorized"})(e.TileErrorCode||(e.TileErrorCode={}));e.TileErrorCode;!(function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed"})(e.TilePublishState||(e.TilePublishState={}));e.TilePublishState;!(function(e){e[e.composite=0]="composite",e[e.iframe=1]="iframe",e[e.image=2]="image",e[e.model=3]="model",e[e.ssrs=4]="ssrs",e[e.workbook=5]="workbook",e[e.report=6]="report",e[e.realTime=8]="realTime"})(e.TileType||(e.TileType={}));e.TileType;!(function(e){e[e.PowerBIServiceException=0]="PowerBIServiceException",e[e.DSRException=1]="DSRException"})(e.QueryResultErrorType||(e.QueryResultErrorType={}));e.QueryResultErrorType;!(function(e){e[e.SingleVisual=0]="SingleVisual"})(e.CompositeTileType||(e.CompositeTileType={}));e.CompositeTileType;!(function(e){e[e.Dashboard=1]="Dashboard",e[e.Report=2]="Report"})(e.FavoriteType||(e.FavoriteType={}));e.FavoriteType})(t=e.contracts||(e.contracts={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){var o=jsCommon.JsonExtensions;!(function(e){e[e.Dashboard=0]="Dashboard",e[e.Report=1]="Report",e[e.Model=2]="Model",e[e.Workbook=3]="Workbook"})(t.ContentPackItems||(t.ContentPackItems={}));var r=(t.ContentPackItems,(function(){function t(t){if(t){var r=o.tryParseJSON(t.providerConfig);this.contract=t,this.displayText=t.displayText,this.description=r&&r.description,this.author=r&&r.author,this.providerId=t.providerId,this.dashboardIds=t.dashboardIds,this.reportIds=t.reportIds,this.modelIds=t.modelIds,this.workbookIds=t.workbookIds,this.providerKey=t.providerKey,this.iconUrl=null==t.iconUrl?"":t.iconUrl,this.category=t.category,this.publishTime=e.AppUtils.getAppPublishDate(t)}}return t})());t.ContentPackBase=r;var i=(function(e){function t(o){e.call(this,o),o&&(this.publishedTo=t.findPublishedTo(o.accessPermissions),this.listOfGroupPrincipals=o.accessPermissions.listOfGroupsOrPrincipals,this.isSharedToEntireOrg=o.accessPermissions.isSharedToEntireOrganization,this.isDirty=o.isDirty)}return __extends(t,e),t.findPublishedTo=function(e){if(e.isSharedToEntireOrganization)return"My Organization";var t=e.listOfGroupsOrPrincipals;return t.join("; ")},t})(r);t.ContentPack=i})(t=e.models||(e.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(t){var o=e.common.contracts.ContentTileType,r=e.common.models.Model,i=(function(e){function t(t){e.call(this,t),this.contentTileType=o.AppDataset}return __extends(t,e),t})(r);t.AppDataset=i})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(t){var o=e.common.contracts.Permissions;t.AppModelIconColors=["#000","#FFF"],t.AppModelIconBackgroundColors=["#01B8AA","#374649","#FD625E","#F2C80F","#5F6B6D","#8AD4EB","#FE9666","#A66999","#3599B8","#DFBFBF"],t.AppModelIcons=["financial","emi","group","realtime","image","pc1","paintbrush","world","streaming-data","user","barchart","gauge","globe","piedouble","areachart","comment","visualinteraction","code","shapes","piechart","stackedcolumn","scatter","database","home","insight"];var r=(function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.getPermissions=function(){return o.Read|o.CopyOnWrite},t})(t.ContentPack);t.AppPublishModel=r;var i=(function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.getPermissions=function(){return this.allowCopyContent?o.CopyOnWrite|o.Read:o.Read},t})(t.ContentPackBase);t.InstalledAppModel=i})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(o){var r=e.common.contracts.ContentTileType,i=jsCommon.Lazy;o.DashboardAsyncLayoutDelayMs=100;var a=(function(){function e(e){this.contract=e,this.resetSampleFields(),this.hasOnPremiseModel=!1,this.isEnabled=!0,this.isUsedByContentPack=!1,
this.isLoaded=e&&null!=e.tiles,this.hitCount=0,this.lazyTiles=null}return e.prototype.getPermissions=function(){var e;return this.getPermissionsCallback&&null!=(e=this.getPermissionsCallback())?e:this.contract&&this.contract.permissions},e.prototype.resetSampleFields=function(){this.isSharedSample=!1,this.isSample=!1,this.isNotified=!1,this.sampleProviderName=""},e.prototype.increaseHitCount=function(){this.hitCount++},Object.defineProperty(e.prototype,"tiles",{get:function(){return this.lazyTiles||(this.lazyTiles=new i(function(){return[]})),this.lazyTiles.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.contract.id},set:function(e){this.contract.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectId",{get:function(){return this.contract.objectId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canEdit",{get:function(){return t.DashboardUtils.isWriteable(this.contract)&&!(this.gridLayoutService&&this.gridLayoutService.strategy.isLayoutLocked)&&!this.contract.cached},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentTileType",{get:function(){return r.Dashboard},enumerable:!0,configurable:!0}),e.prototype.isFilled=function(){return this.contract.tiles&&this.tiles.length===this.contract.tiles.length},e.prototype.calculateLayout=function(){this.layoutRequired=!1;var e=this.tiles;if(!_.isEmpty(e))for(var t=0,o=e;t<o.length;t++){var r=o[t];r.calculateLayout()}},e.prototype.applyLayout=function(){var e=this.tiles;if(!_.isEmpty(e))for(var t=0,o=e;t<o.length;t++){var r=o[t];r.applyLayout()}},e.prototype.runLayoutIfRequired=function(){this.layoutRequired&&(this.calculateLayout(),this.applyLayout())},e.prototype.scheduleDelayedLayout=function(e){var t=this;void 0===e&&(e=!1),this.layoutRequired||(this.layoutRequired=!0,e||setTimeout((function(){t.layoutRequired&&(t.calculateLayout(),t.applyLayout())}),o.DashboardAsyncLayoutDelayMs))},e.prototype.findTile=function(e){return _.find(this.tiles,(function(t){return t.id===e}))},e.prototype.findTileByObjectIdOrOriginalObjectId=function(e,t){if(e||t)return _.find(this.tiles,(function(o){return!_.isEmpty(e)&&o.contract.objectId===e||!_.isEmpty(t)&&o.contract.originalTileObjectId===t}))},e.prototype.getTileIndex=function(e){return _.findIndex(this.tiles,(function(t){return t.id===e}))},e.prototype.getTileContractIndex=function(e){return _.findIndex(this.contract.tiles,(function(t){return t.id===e}))},e.prototype.hasModel=function(e){return _.some(this.tiles,(function(t){return t.contract.modelId===e}))},e.prototype.hasOwnerInfo=function(){return!_.isEmpty(this.ownerFullname)||!_.isEmpty(this.ownerMail)},e})();o.Dashboard=a})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(o){function r(e,t,o,r,i){return new v(e,t,o,r,i)}var i=jsCommon.ArrayExtensions,a=e.common.contracts.ContentTileType,n=e.dataServices.models,s=jsCommon.GzipUtility,d=jsCommon.JsonExtensions,c=jsCommon.Lazy,l=e.common.helpers.ModelConverterHelper,p=jsCommon.PerfTimer,u=e.common.contracts.PublishOrRefreshStatus,h=e.common.models.Report,m=e.common.models.ReportSlide,f=t.contracts.TileType;o.createDataServiceModelConverter=r;var v=(function(){function r(e,t,o,r,i){this.geolocationService=e,this.telemetryService=t,this.visualPlugins=o,this.geocoder=r,this.permissionService=i}return r.prototype.setModelMerger=function(e){this.modelMerger=e},r.prototype.convertCompositeTile=function(r){if(!r||r.type!==f.composite)return null;var i=this.convertTileConfig(r);this.convertTileLayoutConfig(r);var a;if(!i.visual)return null;a=new o.SingleVisualCompositeTileModel(r,this.visualPlugins,this.geolocationService,this.geocoder),a.config=i.visual,a.displayText=r.displayText,a.subDisplayText=r.subDisplayText;var n=t.ContractUtils.getMasterLayoutPosition(r);if(a.size={rowSpan:n.height,colSpan:n.width},a.isLoading=o.TileFactory.isTileLoading(r),r.queryResultError){a.isError=!0;var s=r.queryResultError;this.telemetryService.logEvent(e.telemetry.DashboardTileError,f[f.composite],jsCommon.StringExtensions.format("{0}:{1} with rootActivityId:{2}, modelId:{3} and tileId:{4}",jsCommon.EnumExtensions.toString(t.contracts.QueryResultErrorType,s.type),s.errorDetail,s.rootActivityId,r.modelId.toString(),r.id.toString()));var d=t.TileUtils.getTileErrorDetailsFromQueryResultError(s);d?(a.errorDetails=d,a.errorText=d.message):a.errorText=e.common.localize.get("Tile_ErrorText")}return a},r.prototype.convertTileData=function(t){if(t.tileDataSet)return t.tileDataSet;var o=this.convertTileConfig(t);try{t.tileDataSet=this.parseTileData(t,o.tileDataType)}catch(o){throw this.telemetryService.logEvent(e.telemetry.DashboardTileError,f[f.composite],jsCommon.StringExtensions.format("DsrParseError:{0} with modelId:{1} and tileId:{2}",o.message,t.modelId.toString(),t.id.toString())),o}return t.tileDataSet},r.prototype.convertDashboard=function(e,t,o,r){var i=this,a=this.convertDashboardShallow(e);return e.tiles&&(a.lazyTiles=new c(function(){return _.map(e.tiles,(function(e){return i.convertTile(e,t,o,r)}))})),a},r.prototype.convertDashboardShallow=function(e){var t=this,r=new o.Dashboard(e);return r.getPermissionsCallback=function(){return t.permissionService.getDashboardEffectivePermissions(e.id)},r.dataClassificationId=e.dataClassificationId,this.modelMerger.mergeDashboardShallow(r,e),r},r.prototype.convertIframeTile=function(e){if(!e||e.type!==f.iframe)return null;var t=new o.IframeTileModel(e),r=this.convertTileConfig(e);return this.convertTileLayoutConfig(e),r&&r.iframe&&(t.srcUrl=r.iframe.srcUrl,t.embedCode=r.iframe.embedCode),t.isLoading=o.TileFactory.isTileLoading(e),t},r.prototype.convertImageTile=function(e){if(!e||e.type!==f.image)return null;var r=new o.ImageTileModel(e);return this.convertTileLayoutConfig(e),r.displayText=e.displayText,r.subDisplayText=e.subDisplayText,"number"!=typeof r.contract.reportId||e.config?(r.isStatic=!1,r.imageUrl=this.getImageUrl(e)):(r.isStatic=!0,r.imageUrl=t.constants.modelPlaceholderImageUrl),r.isLoading=o.TileFactory.isTileLoading(e),r},r.prototype.convertInstalledAppModel=function(e,r){var i=new o.InstalledAppModel(e);i.packageId=r,i.displayName=e.displayText,i.objectId=e.providerKey,i.contentTileType=a.OrgApp,i.publishTime=t.AppUtils.getAppPublishDate(e),i.dashboardIds=i.dashboardIds||[],i.reportIds=i.reportIds||[],i.workbookIds=i.workbookIds||[],i.modelIds=i.modelIds||[];var n=d.tryParseJSON(e.providerConfig);if(n&&n.appSettings){var s=n.appSettings;i.defaultContentOption=s.defaultAppArtifact?1:0,i.defaultContent=s.defaultAppArtifact,i.icon=s.iconName,i.iconColor=s.iconColor,i.iconBackgroundColor=s.iconBackgroundColor,i.allowCopyContent=!!s.allowCopyContent}return i},r.prototype.convertModel=function(e){var t=this.convertModelShallow(e);return this.updateModelProperties(t,e),t},r.prototype.convertAppDataset=function(e){var t=new o.AppDataset(e);return this.updateModelProperties(t,e),t},r.prototype.convertModelTile=function(e){if(!e||e.type!==f.model)return null;var t=new o.ModelTileModel(e);return this.convertTileLayoutConfig(e),t.displayText=e.displayText,t.isLoading=o.TileFactory.isTileLoading(e),t.subDisplayText=e.subDisplayText,t},r.prototype.convertModelShallow=function(t){return new e.common.models.Model(t)},r.prototype.convertPackage=function(e){var t=this,o=this.convertPackageShallow(e);return e&&(o.contract=e,o.id=e.id,o.contentProviderId=e.contentProviderId,o.lastRefreshTime=e.lastRefreshTime,o.latestVersion=e.latestVersion,o.version=e.version,o.name=e.name,o.publishOrRefreshStatus=e.publishOrRefreshStatus||u.FinishedSuccessfully,o.getPermissionsCallback=function(){return t.permissionService.getPackageEffectivePermissions(e.id)}),o},r.prototype.convertPackageShallow=function(e){return new n.Package(e)},r.prototype.convertRealTimeTile=function(e){if(!e||e.type!==f.realTime)return null;var r=this.convertTileConfig(e);this.convertTileLayoutConfig(e);var i=new o.RealTimeTileModel(e,this.visualPlugins,this.geolocationService,this.geocoder);r&&r.realTimeVisual&&(i.config=r.realTimeVisual),i.displayText=e.displayText,i.subDisplayText=e.subDisplayText;var a=t.ContractUtils.getMasterLayoutPosition(e);return i.size={rowSpan:a.height,colSpan:a.width},i},r.prototype.convertReport=function(e){var t=this,o=this.convertReportShallow(e);return e&&(o.id=e.id,o.modelId=e.modelId,o.reportUrl=e.reportUrl,o.packagePublishStatus=e.packagePublishStatus||u.FinishedSuccessfully,o.name=e.name,o.displayName=e.displayName,o.description=e.description,o.fileName=e.fileName,o.packageId=e.packageId,o.packageVersion=e.packageVersion,o.contentProviderId=e.contentProviderId,o.objectId=e.objectId,o.reportSlides=i.createWithId(),o.getPermissionsCallback=function(){return t.permissionService.getReportEffectivePermissions(e.id)},this.fillReport(o,e)),o},r.prototype.convertReportShallow=function(e){return new h(e)},r.prototype.convertReportSlide=function(e){var t=new m(e);return t.ordinalPosition=e.ordinalPosition,t.name=e.name,t.displayText=e.displayText,t.thumbnailUrl=e.thumbnailUrl,t.highResolutionThumbnailUrl=e.highResolutionThumbnailUrl,t},r.prototype.convertReportTile=function(e){return e&&e.type===f.report?(this.convertTileLayoutConfig(e),new o.ReportTileModel(e)):null},r.prototype.convertSpecificTileShallow=function(e,r){switch(this.convertTileLayoutConfig(e),e.type){case f.composite:var i=this.convertTileConfig(e);if(i.visual&&(r.composite=new o.SingleVisualCompositeTileModel(e,this.visualPlugins,this.geolocationService,this.geocoder)),r.composite){var a=t.ContractUtils.getMasterLayoutPosition(e);r.composite.size={rowSpan:a.height,colSpan:a.width},r.composite.isLoading=o.TileFactory.isTileLoading(e)}break;case f.iframe:r.iframe=new o.IframeTileModel(e),r.iframe.isLoading=o.TileFactory.isTileLoading(e);break;case f.image:r.image=new o.ImageTileModel(e),r.image.isLoading=o.TileFactory.isTileLoading(e);break;case f.model:r.model=new o.ModelTileModel(e),r.model.isLoading=o.TileFactory.isTileLoading(e);break;case f.ssrs:r.model=new o.SsrsTileModel(e),r.model.isLoading=o.TileFactory.isTileLoading(e);break;case f.workbook:r.workbook=new o.WorkbookTileModel(e,r),r.workbook.isLoading=o.TileFactory.isTileLoading(e);break;case f.report:r.model=new o.ReportTileModel(e),r.model.isLoading=o.TileFactory.isTileLoading(e);break;case f.realTime:this.convertTileConfig(e),r.realTime=new o.RealTimeTileModel(e,this.visualPlugins,this.geolocationService,this.geocoder)}},r.prototype.convertSsrsTile=function(e){if(!e||e.type!==f.ssrs)return null;this.convertTileLayoutConfig(e);var t=new o.SsrsTileModel(e);return e.config&&(t.imageUrl=this.getSsrsImageUrl(e)),t.isLoading=o.TileFactory.isTileLoading(e),t},r.prototype.convertTile=function(e,t,o,r){this.convertTileLayoutConfig(e);var i=this.convertTileShallow(e,t,o);if(this.modelMerger.mergeTile(i,e,t,o,r),null!=e.reportId){var a=this.getTileReport(e.reportId,o);a&&(i.report=i.report||new h(a),this.fillReport(i.report,a))}return i},r.prototype.convertTileLayoutConfig=function(e){if(!e.$layoutConfig){var t={x:e.col,y:e.row,width:e.colSpan,height:e.rowSpan},o=void 0;if(e.layoutConfig)try{o=JSON.parse(e.layoutConfig);var r=i.extendWithId(o.layouts),a=r.withId(0);a.position=t}catch(e){}else o={layouts:[{id:0,position:t}]};e.$layoutConfig=o,e.layoutConfig=JSON.stringify(o)}return e.$layoutConfig},r.prototype.convertTileAction=function(e){var t=e.$action;if(!t){var o;if(e.action&&0===e.action.indexOf("{"))try{o=JSON.parse(e.action)}catch(e){}else o={action:e.action};t=e.$action=o}return t},r.prototype.convertTileConfig=function(e){var o=e.$config;if(!o&&e.config){var r=p.start("Parse tile config");try{o=e.$config=JSON.parse(e.config),t.TileUtils.upgradeTileConfig(o,e.query)}catch(e){}finally{r()}}return o},r.prototype.convertTileShallow=function(e,t,r){this.convertTileLayoutConfig(e);var i=new o.Tile(e);return this.modelMerger.mergeTileShallow(i,e,t,r),i},r.prototype.convertWorkbook=function(e){var t=this,o=this.convertWorkbookShallow(e);return e&&(o.id=e.id,o.modelId=e.modelId,o.viewUrl=this.getWorkbookViewUrl(e),o.editUrl=this.getWorkbookEditUrl(e),o.embedUrl=this.getWorkbookEmbedView(e),o.name=e.name,o.displayName=e.displayName,o.description=e.description,o.fileName=e.fileName,o.packageId=e.packageId,o.getPermissionsCallback=function(){return t.permissionService.getWorkbookEffectivePermissions(e.id)}),o},r.prototype.convertWorkbookShallow=function(e){return new o.Workbook(e)},r.prototype.convertWorkbookTile=function(e,r,i){if(!e||e.type!==f.workbook)return null;this.convertTileLayoutConfig(e);var a=new o.WorkbookTileModel(e,i);a.displayText=e.displayText,a.subDisplayText=e.subDisplayText,a.isLoading=o.TileFactory.isTileLoading(e),a.image=e.tileDataBinaryBase64Encoded,e.$config.workbookTile&&e.$config.workbookTile.keepOriginalContentSize?a.keepOriginalContentSize=e.$config.workbookTile.keepOriginalContentSize:a.keepOriginalContentSize=t.constants.workbook.defaultKeepOriginalContentSize;var n=e.$config.workbookTile;return r&&(n&&(a.embedUrl=r.embedUrl+"&item="+n.item),r.contract&&(a.webUri=r.contract.webUri)),a},r.prototype.fillDashboardChildren=function(e,t,o,r){var i=this,a=e.contract;e.displayName!==a.displayName&&(e.displayName=a.displayName),a.tiles&&(e.lazyTiles=new c(function(){return a.tiles.map((function(e){return i.convertTile(e,t,o,r)}))}))},r.prototype.fillModel=function(e,t){e.id=t.id,e.contract=t},r.prototype.fillReport=function(e,t){e.id=t.id,e.contract=t,e.reportUrl=t.reportUrl,t.reportSlides&&(e.reportSlides=i.extendWithId(t.reportSlides.map(this.convertReportSlide)))},r.prototype.getImageUrl=function(e){var t=this.convertTileConfig(e);if(t&&t.imageTile)return t.imageTile.imageUrl},r.prototype.getSsrsImageUrl=function(e){var t=this.convertTileConfig(e);if(t&&t.ssrsTile)return t.ssrsTile.imageUrl},r.prototype.getTileModel=function(e,t){var o=void 0;if(t){var r=i.indexOf(t,(function(t){return t&&t.id===e}));r!==-1&&(o=t[r])}return o},r.prototype.getTileReport=function(e,t){var o=void 0;if(t){var r=i.indexOf(t,(function(t){return t&&t.id===e}));r!==-1&&(o=t[r])}return o},r.prototype.getTileWorkbook=function(e,t,o){var r=void 0;if(o){var a=i.indexOf(o,(function(o){return o.id===e&&o.packageId===t}));a!==-1&&(r=o[a])}return r},r.prototype.resolveTilePackage=function(e,t){if(e.packageId){var o=i.indexOf(t,(function(t){return t.id===e.packageId}));o!==-1&&(e.tilePackage=t[o])}},r.prototype.getWorkbookViewUrl=function(e){return this.getWorkbookActionUrl(e,"view")},r.prototype.getWorkbookEditUrl=function(e){return this.getWorkbookActionUrl(e,"edit")},r.prototype.getWorkbookEmbedView=function(e){return this.getWorkbookActionUrl(e,"embedview")},r.prototype.getWorkbookActionUrl=function(e,t){return e.webUri&&e.etagHash?e.webUri+"/_layouts/WopiFrame.aspx?sourcedoc={"+e.etagHash+"}&action="+t:""},r.prototype.updateModelProperties=function(e,t){var o=this;t&&(e.id=t.id,e.isNew=t.isNew,e.cloudRlsEnabled=t.cloudRlsEnabled,e.name=t.name,e.displayName=t.displayName,e.description=t.description,e.fileName=t.fileName,e.packageId=t.packageId,e.packageVersion=t.packageVersion,e.contentProviderId=t.contentProviderId,e.isHidden=t.isHidden||!1,e.isRefreshInProgress=t.currentRefreshStartingTime&&l.convertRefreshTimeToJsDateTime(t.currentRefreshStartingTime).getTime()+18e5>Date.now(),e.dbName=t.dbName,e.vsName=t.vsName,e.realTimeMode=t.realTimeMode,e.getPermissionsCallback=function(){return o.permissionService.getModelEffectivePermissions(t.id,t.packageId)},this.fillModel(e,t))},r.prototype.parseTileData=function(e,t){var o,r=p.start("Parse tile data");try{if(e.tileDataBinaryBase64Encoded){var i=s.uncompress(e.tileDataBinaryBase64Encoded);o=JSON.parse(i)}else e.tileData&&(o=JSON.parse(e.tileData));return{type:t,data:o}}finally{r()}},r})()})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(o){function r(e,t){return new s(e,t)}var i=jsCommon.ArrayExtensions,a=jsCommon.Lazy,n=e.common.helpers.ModelConverterHelper;o.createDataServiceModelMerger=r;var s=(function(){function e(e,t){this.modelConverter=e,this.permissionService=t}return e.prototype.mergeDashboard=function(e,t,o,r,i){var n=this,s=this.modelConverter.convertDashboard(t,o,r,i);e.contract=t,e.displayName=s.displayName,e.getPermissionsCallback=function(){return n.permissionService.getDashboardEffectivePermissions(t.id)},e.contract.modelIds=t.modelIds,e.contract.reportIds=t.reportIds,e.contract.packageIds=t.packageIds,e.contract.workbookIds=t.workbookIds,e.qnaEnabled=t.qnaEnabled,e.gravityEnabled=t.gravityEnabled,e.isSharedFromSecurityGroup=t.isSharedFromSecurityGroup,e.isHidden=t.isHidden;var d=e.tiles;e.lazyTiles=new a(function(){var e=[];if(_.isEmpty(s.tiles))return e;for(var t=function(t){var a=_.find(d,(function(e){return e.id===t.id}));a?(e.push(a),n.mergeTile(a,t.contract,o,r,i)):e.push(t)},a=0,c=s.tiles;a<c.length;a++){var l=c[a];t(l)}return e})},e.prototype.mergeDashboardOwnerInfo=function(e,t){e.ownerFullname=t.givenName,t.familyName&&(e.ownerFullname=e.ownerFullname+" "+t.familyName),e.ownerMail=t.emailAddress,t.userObjectId&&(e.ownerUserObjectId=t.userObjectId),t.groupObjectId&&(e.ownerGroupObjectId=t.groupObjectId),e.contract.ownerInfo||(e.contract.ownerInfo=t)},e.prototype.mergeDashboardShallow=function(e,t){var o=this;if(t.displayName&&(e.displayName=t.displayName),void 0!==t.permissions&&(e.getPermissionsCallback=function(){return o.permissionService.getDashboardEffectivePermissions(t.id)}),t.modelIds&&(e.contract.modelIds=t.modelIds),t.reportIds&&(e.contract.reportIds=t.reportIds),t.workbookIds&&(e.contract.workbookIds=t.workbookIds),t.packageIds&&(e.contract.packageIds=t.packageIds),void 0!==t.qnaEnabled&&(e.qnaEnabled=t.qnaEnabled),void 0!==t.gravityEnabled&&(e.gravityEnabled=t.gravityEnabled),void 0!==t.isSharedFromSecurityGroup&&(e.isSharedFromSecurityGroup=t.isSharedFromSecurityGroup),void 0!==t.isHidden&&(e.isHidden=t.isHidden),void 0!==t.ownerInfo){var r=t.ownerInfo;this.mergeDashboardOwnerInfo(e,r)}e.sharedTime=t.sharedTime||"/Date(0)/"},e.prototype.mergeDashboardTiles=function(e,t){var o=t.models||[],r=t.reports||[],i=t.workbooks||[],a=t.packages||[],n=e.contract.tiles;if(n)for(var s=0,d=n.length;s<d;++s){var c=n[s];this.modelConverter.resolveTilePackage(c,a)}var l=e.tiles;if(l)for(var s=0,d=l.length;s<d;++s){var p=l[s];this.mergeTile(p,p.contract,o,r,i)}},e.prototype.mergeModel=function(e,t){var o=this;e&&t&&(e.contract=t,e.id=t.id||e.id,e.isNew=t.isNew||e.isNew,e.getPermissionsCallback=function(){return o.permissionService.getModelEffectivePermissions(t.id,t.packageId)},e.name=t.name||e.name,e.displayName=t.displayName||e.displayName,e.description=t.description||e.description,e.fileName=t.fileName||e.fileName,e.packageId=t.packageId||e.packageId,e.packageVersion=t.packageVersion||e.packageVersion,e.contentProviderId=t.contentProviderId||e.contentProviderId,e.packagePublishStatus=null!=t.packagePublishStatus?t.packagePublishStatus:e.packagePublishStatus,e.isRefreshInProgress=t.currentRefreshStartingTime&&n.convertRefreshTimeToJsDateTime(t.currentRefreshStartingTime).getTime()+18e5>Date.now(),e.cloudRlsEnabled=t.cloudRlsEnabled,e.realTimeMode=t.realTimeMode)},e.prototype.mergeModelContentProviderId=function(e,o){if(e)for(var r=0;r<e.length;r++){var i=e[r];i.contentProviderId=i.contentProviderId||t.ContractUtils.findContentProviderId(o,i.packageId)}},e.prototype.mergeReport=function(e,t){var o=this;if(e&&t&&(e.contract=t,e.id=t.id||e.id,e.objectId=t.objectId||e.objectId,e.modelId=t.modelId||e.modelId,e.reportUrl=t.reportUrl||e.reportUrl,e.getPermissionsCallback=function(){return o.permissionService.getReportEffectivePermissions(t.id)},e.packagePublishStatus=t.packagePublishStatus||e.packagePublishStatus,e.name=t.name||e.name,e.displayName=t.displayName||e.displayName,e.description=t.description||e.description,e.fileName=t.fileName||e.fileName,e.packageId=t.packageId||e.packageId,e.packageVersion=t.packageVersion||e.packageVersion,e.contentProviderId=t.contentProviderId||e.contentProviderId,i.clear(e.reportSlides),t.reportSlides))for(var r=0,a=t.reportSlides.length;r<a;r++)e.reportSlides.push(this.modelConverter.convertReportSlide(t.reportSlides))},e.prototype.mergeTileShallow=function(e,t,r,i){this.modelConverter.convertTileLayoutConfig(t),e.contract=t,e.type=t.type,this.mergeTileLayoutConfig(e,t),e.displayText=t.displayText,e.subDisplayText=t.subDisplayText,e.backgroundImageUrl=this.modelConverter.getImageUrl(t),e.errorCode=t.errorCode;var a=this.modelConverter.getTileReport(t.reportId,i);if(a&&a.reportSlides&&a.reportSlides.length>0&&(e.thumbnailUrl=a.reportSlides[0].thumbnailUrl),t.query&&t.query.modelQuery&&(e.utterance=t.query.modelQuery.utterance),e.action=this.modelConverter.convertTileAction(t),e.config=this.modelConverter.convertTileConfig(t),e.isLoading=o.TileFactory.isTileLoading(t),t.modelId){var n=this.modelConverter.getTileModel(t.modelId,r);n&&(e.vsName=n.vsName,e.dbName=n.dbName)}t.reportId&&(e.report=e.report||this.modelConverter.convertReport(a),e.report.id=t.reportId),a&&(this.modelConverter.fillReport(e.report,a),e.action||(e.action={action:"/openReport"})),this.modelConverter.convertSpecificTileShallow(t,e)},e.prototype.mergeTileLayoutConfig=function(e,t){if(!(e.layoutPosition.x&&e.layoutPosition.y&&e.layoutPosition.width&&e.layoutPosition.height)){var o=i.extendWithId(t.$layoutConfig.layouts),r=e.gridLayoutContext,a=r?r.getActiveLayout():0,n=o.withId(a);n&&this.mergeLayoutPosition(e.layoutPosition,n.position)}},e.prototype.mergeLayoutPosition=function(e,t){t&&(e.x=e.x||t.x,e.y=e.y||t.y,e.width=e.width||t.width,e.height=e.height||t.height)},e.prototype.mergeTile=function(e,t,r,i,a,n){var s=e.composite,d=e.realTime;if(this.mergeTileShallow(e,t,r,i),e.composite=this.modelConverter.convertCompositeTile(t),s&&e.composite&&(e.composite.setDataLoadEventDelegate(s.dataLoadEventDelegate),e.composite.copyDependencies(s),s instanceof o.SingleVisualCompositeTileModel&&e.composite instanceof o.SingleVisualCompositeTileModel)){var c=s,l=e.composite;this.mergeVisual(l.visual,c.visual)}e.iframe=this.modelConverter.convertIframeTile(t),e.image=this.modelConverter.convertImageTile(t),e.model=this.modelConverter.convertModelTile(t),e.ssrs=this.modelConverter.convertSsrsTile(t);var p=this.modelConverter.convertRealTimeTile(t);if(this.updateTileRealTimeModel(e,d,p),e&&e.reportTile){var u=e.reportTile.exploration;e.reportTile=this.modelConverter.convertReportTile(t),e.reportTile.exploration=u}else e.reportTile=this.modelConverter.convertReportTile(t);if(a){var h=this.modelConverter.getTileWorkbook(t.workbookId,t.packageId,a),m=null;h&&(m=this.modelConverter.convertWorkbook(h)),e.workbook=this.modelConverter.convertWorkbookTile(t,m,e)}if(i){var f=this.modelConverter.getTileReport(t.reportId,i);f?(e.report=e.report||this.modelConverter.convertReport(f),this.modelConverter.fillReport(e.report,f)):e.report=null,e.contractsReport=this.modelConverter.getTileReport(t.reportId,i)}else if(n){for(var v,g=0,y=n.length;g<y;g++)if(t.reportId===n[g].id){v=n[g];break}v&&(e.report=e.report||v,this.modelConverter.fillReport(e.report,v.contract),e.contractsReport=v.contract)}t.modelId&&(e.contractsModel=this.modelConverter.getTileModel(t.modelId,r))},e.prototype.mergeWorkbook=function(e,t){var o=this;e&&t&&(e.contract=t,e.id=t.id||e.id,e.getPermissionsCallback=function(){return o.permissionService.getWorkbookEffectivePermissions(t.id)},e.name=t.name||e.name,e.displayName=t.displayName||e.displayName,e.description=t.description||e.description,e.packageId=t.packageId||e.packageId)},e.prototype.mergePackage=function(e,t){var o=this;e&&t&&(e.contract=t,e.contentProviderId=t.contentProviderId,e.id=t.id,e.lastRefreshTime=t.lastRefreshTime,e.latestVersion=t.latestVersion,e.name=t.name,e.publishOrRefreshStatus=t.publishOrRefreshStatus,e.version=t.version,e.getPermissionsCallback=function(){return o.permissionService.getPackageEffectivePermissions(t.id)})},e.prototype.updateTileRealTimeModel=function(e,t,o){e.realTime=o,t&&e.realTime&&e.realTime.copyRealTimeModelDependencies(t)},e.prototype.mergeVisual=function(e,t){t.visual&&e.type===t.type&&(e.visual=t.visual),e.viewport=t.viewport},e})();o.DataServiceModelMerger=s})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(e){this.contract=e}return e.prototype.getPermissions=function(){var e;return this.getPermissionsCallback&&(e=this.getPermissionsCallback()),e?e:this.contract&&this.contract.permissions},e.prototype.hasUpdate=function(){return this.version&&this.latestVersion&&this.version!==this.latestVersion},e})();e.Package=t})(t=e.models||(e.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(t){var o=e.common.models.DefaultGridLayoutStrategy,r=(function(t){function o(e,o){t.call(this),this.displayWidth=e,this.displayHeight=o,this.minNumOfColumns=2,this.isLayoutLocked=!0}return __extends(o,t),o.prototype.calculateDisplayPositions=function(e){t.prototype.calculateDisplayPositions.call(this,e),this.scaleDashboard(e)},o.prototype.scaleDashboard=function(t){var r=this.getDashboardSize(t),i=o.calculateDashboardScaleFactor(r.width,r.height,this.displayWidth,this.displayHeight);if(!(i<=0)){var a={transform:"scale("+i+")",width:r.width+"px",height:this.displayHeight/i+"px",left:0};$(e.dataServices.constants.dashboardElementName).css(a)}},o.prototype.getDashboardSize=function(t){var o=this.getMaxColumnInLayout(t),r=this.getMaxRowInLayout(t);o<this.minNumOfColumns&&(o=this.minNumOfColumns);var i=e.common.GridLayoutConstants.defaultGridItemSpacing;return{width:o*this.gridWidth+i,height:r*this.gridHeight+i}},o.calculateDashboardScaleFactor=function(e,t,o,r){return o/e},o.prototype.getMaxRowInLayout=function(e){return _.max(_.map(e,(function(e){return e.displayRow-1+e.displaySize.rowSpan})))},o.prototype.getMaxColumnInLayout=function(e){return _.max(_.map(e,(function(e){return e.displayCol-1+e.displaySize.colSpan})))},o})(o);t.PhoneLandscapeTileLayoutStrategy=r})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(t){var o,r=e.dataServices.contracts.TileType;!(function(e){e.tileSpacing=12,e.smallTileRowSpan=4,e.defaultTileRowSpan=6,e.mediumTileRowSpan=7,e.largeTileRowSpan=9,e.resizeBuffer=10,e.aspectRatio=.1111})(o=t.PhoneTileLayoutConstants||(t.PhoneTileLayoutConstants={}));var i=(function(){function t(t,i){this.isLayoutLocked=!0,this.willOverrideDisplayPosition=!0,this.gridItemSpacing=o.tileSpacing,this.tileTypeRowSpanMap={},this.visualTypeRowSpanMap={},this.gridWidth=t-this.gridItemSpacing,this.gridHeight=Math.round(this.gridWidth*o.aspectRatio),this.gridMinWidthOnResize=this.gridWidth-o.resizeBuffer,this.gridMinHeightOnResize=this.gridHeight-o.resizeBuffer,this.gridMaxWidthOnResize=this.gridWidth*e.common.models.gridLayoutConstants.gridMaxColSpan,this.gridMaxHeightOnResize=this.gridHeight*e.common.models.gridLayoutConstants.gridMaxColSpan,this.tileTypeRowSpanMap[r.report]=o.mediumTileRowSpan,this.visualTypeRowSpanMap[e.visuals.plugins.card.name]=o.smallTileRowSpan,this.visualTypeRowSpanMap[e.visuals.plugins.animatedNumber.name]=o.smallTileRowSpan,this.visualTypeRowSpanMap[e.visuals.plugins.textbox.name]=o.smallTileRowSpan}return t.prototype.calculateDisplayPositions=function(t){for(var o=e.dataServices.DashboardUtils.orderItems(_.map(t,(function(e){return{getActiveLayoutPosition:function(){return e.getLayoutPosition()},getItem:function(){return e}}}))),r=1,i=0,a=o;i<a.length;i++){var n=a[i];n.displayCol=1,n.displayRow=r,this.calculateDisplaySize(n),r+=n.displaySize.rowSpan}this.removeScale()},t.prototype.calculateDisplaySize=function(e){var t=this.getRowSpan(e);e.displaySize={colSpan:1,rowSpan:t}},t.prototype.getRowSpan=function(e){var t=e.gridItem,r=this.tileTypeRowSpanMap[t.type];if(!r&&t.composite){var i=t.composite;null!==i&&(r=this.visualTypeRowSpanMap[i.visual.type])}return r||o.defaultTileRowSpan},t.prototype.removeScale=function(){$(e.dataServices.constants.dashboardElementName).removeAttr("style")},t.prototype.isDynamic=function(){return!1},t})();t.PhonePortraitTileLayoutStrategy=i})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){var o=(function(){function t(e,t){this.datasetInfo=e,this.definition=t}return Object.defineProperty(t.prototype,"databaseName",{get:function(){return this.datasetInfo.databaseName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"primaryKey",{get:function(){return this.datasetInfo.resourceKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"secondaryKey",{get:function(){return this.datasetInfo.resourceKeySecondary},enumerable:!0,configurable:!0}),t.prototype.getPushUrl=function(){var e=window.tenantId,t=window.apiUri,o=window.clusterUri;"https://wabi-staging-us-east-redirect.analysis.windows.net"===o&&(t="https://powerbistagingapi.analysis.windows.net");var r="/beta/"+e+"/datasets/"+this.databaseName+"/rows",i=jsCommon.Utility.urlCombine(t,r),a={};return a.key=this.primaryKey,jsCommon.QueryStringUtil.addOrUpdateQueryStringToUrl(i,a)},t.createRealTimeDatasetDefinition=function(o,r,i){var a=i.schema(e.constants.RealTimeDataSourceName).entities,n=_.first(a),s=[];return _.map(n.properties,(function(e){s.push({name:e.displayName,dataType:t.convertToRealTimeDataType(e.type)})})),{name:o,columns:s,mode:r,tableName:n.name}},t.convertToRealTimeDataType=function(e){switch(e.primitiveType){case 3:case 4:return 1;case 7:return 2;case 1:return 0;case 5:return 3}},t})();t.RealTimeModel=o})(t=e.models||(e.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(t){var o=e.common.GridLayoutConstants,r=(function(e){function t(t,o){e.call(this,t,o),this.maxColumnsToDisaply=7,this.minColumnsToDisplay=3,this.portionOfNextColumn=.2}return __extends(t,e),t.prototype.getDashboardSize=function(e){var t=this.getMaxColumnInLayout(e),r=this.getMaxRowInLayout(e);t>this.maxColumnsToDisaply?t=this.maxColumnsToDisaply+this.portionOfNextColumn:t<this.minColumnsToDisplay&&(t=this.minColumnsToDisplay);var i=o.defaultGridItemSpacing;return{width:t*this.gridWidth+i,height:r*this.gridHeight+i}},t})(t.PhoneLandscapeTileLayoutStrategy);t.TabletTileLayoutStrategy=r})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(r){var i,a=e.common.GridLayoutConstants,n=e.data.services.DataViewObjectSerializer,s=e.data.services.DataViewTransformActionsSerializer,d=e.common.models.gridLayoutConstants,c=t.contracts.TileType;!(function(r){function i(e,t,o){for(var r=0,i=o.length;r<i;r++){var a=o[r];if(a.vsName===e&&a.dbName===t)return a}}function l(e,t,o,r,i){return T(e,t,c.composite,o,r,i)}function p(e,t,o,r,i,a,n,s,d,c,l,p,u){var h=C(e,t,o,r,i,a,n,s,d,c,l,p);if(null!=u){var m=h;return m.dataWindow=u,{realTimeVisual:m}}return{visual:h}}function u(e,r,i,a){var n,s,d=r.visualType,l=r.dataViewSource;r.query?(n=o.TileFactory.createTileConfig(e,d,r.queryMetadata,l&&l.data&&l.data.descriptor,r.elements,r.objects,r.tileHeading,r.tileSubDisplay,r.themeName,r.stylePresetName,r.tileLayoutType,r.dataTransforms,r.realTimeDataWindow),s=r.query):(n={visual:{visual:d,elements:r.elements,layoutType:r.tileLayoutType}},r.tileHeading&&(n.visual.heading1=r.tileHeading),r.tileSubDisplay&&(n.visual.heading3=r.tileSubDisplay),y(e,n.visual,d,r.objects)),r.tileDataType&&(n.tileDataType=r.tileDataType);var p=T(d,n,null!=r.realTimeDataWindow?c.realTime:c.composite,s,r.dataViewSource,i);return p.publishState=t.contracts.TilePublishState.Completed,r.action&&(p.action=JSON.stringify(r.action)),
null!=r.utterance&&(p.query.modelQuery.utterance=r.utterance),r.name&&(p.name=r.name),p.reportId=r.reportId,r.modelId&&(p.modelId=r.modelId),r.packageId&&(p.packageId=r.packageId),p.resourcePackageIds=r.resourcePackageIds,p}function h(e){var o=_.omit({id:++I,type:e.type,query:e.query,action:e.action,config:e.config,$config:e.$config,tileData:e.tileData,tileDataSet:e.tileDataSet,publishState:e.publishState,displayText:e.displayText,subDisplayText:e.subDisplayText,modelId:e.modelId,reportId:e.reportId,workbookId:e.workbookId,packageId:e.packageId,name:e.name},(function(e){return void 0===e})),r=t.ContractUtils.getMasterLayoutPosition(e),i=t.ContractUtils.createMasterLayoutConfig({height:r.height,width:r.width});return o.$layoutConfig=i,o.layoutConfig=JSON.stringify(i),o}function m(e,o,r,i,n,s,l,p,u,h,m){var f;(l||p)&&(f={reportTile:{pod:l,filters:p}});var v;u&&(v={modelQuery:{utterance:u}});var g=2*a.defaultGridWidth,y=2*a.defaultGridHeight,b=h?h/g:2,S=m?m/y:2;0===Math.round(b)&&(b=2),0===Math.round(S)&&(b=2);var k=Math.round(a.gridItemMediumLandscapeColSpan*b),D=Math.round(a.gridItemMediumLandscapeRowSpan*S);k=k>d.gridMaxColSpan?d.gridMaxColSpan:k,D=D>d.gridMaxRowSpan?d.gridMaxRowSpan:D;var C=t.ContractUtils.createMasterLayoutConfig({width:k,height:D}),T={id:++I,type:c.report,displayText:i,subDisplayText:n,action:JSON.stringify(s),reportId:e,sectionId:r,modelId:o,publishState:t.contracts.TilePublishState.Completed,query:v,config:f?JSON.stringify(f):void 0,$config:f,layoutConfig:JSON.stringify(C),$layoutConfig:C};return T}function f(e){return e.publishState===t.contracts.TilePublishState.InProgress}function v(){var e=[],t=k();t&&!_.isEmpty(t.tiles)&&e.push(t);var o=D();return o&&!_.isEmpty(o.tiles)&&e.push(o),_.cloneDeep(e)}function g(e){for(var t=v(),o=0,r=t;o<r.length;o++){var i=r[o],a=_.find(i.tiles,(function(t){return t.id===e}));if(null!=a)return a.template}return null}function y(e,t,o,r){if(r){var i=e.capabilities(o);i&&i.objects&&(t.objects=n.serializeObjects(r,i.objects))}}function b(e){if(void 0!==e)return JSON.stringify(e,(function(e,t){return e&&e.charAt&&"$"===e.charAt(0)?void 0:t}))}function S(t){return t.join(e.common.localize.get("ListJoin_Separator"))}function k(){var o=[{id:1,title:e.common.localize.get("AddWidgetModal_IframeOption_Title"),description:e.common.localize.get("AddWidgetModal_IframeOption_Description"),iconClass:"pbi-glyph-iframe",template:"<edit-iframe-widget></edit-iframe-widget>",defaultTileContract:{type:c.iframe,$action:{action:null,targetUrl:"",openInSameTab:!1},$config:{iframe:{srcUrl:"",embedCode:""},widget:{id:1,name:"webContent"}},$layoutConfig:t.ContractUtils.createMasterLayoutConfig()}},{id:2,title:e.common.localize.get("AddWidgetModal_ImageOption_Title"),description:e.common.localize.get("AddWidgetModal_ImageOption_Description"),iconClass:"pbi-glyph-image",template:"<edit-image-widget></edit-image-widget>",defaultTileContract:{type:c.image,$action:{action:null,targetUrl:"",openInSameTab:!1},$config:{imageTile:{imageUrl:""},widget:{id:2,name:"image"}},$layoutConfig:t.ContractUtils.createMasterLayoutConfig()}},{id:3,title:e.common.localize.get("AddWidgetModal_TextOption_Title"),description:e.common.localize.get("AddWidgetModal_TextOption_Description"),iconClass:"pbi-glyph-font",template:"<edit-text-widget></edit-text-widget>",defaultTileContract:{type:c.composite,$action:{action:null,targetUrl:"",openInSameTab:!1},$config:{visual:{layoutType:e.common.contracts.TileLayoutType.Default,objects:{},visual:"textbox"},widget:{id:3,name:"textbox"}},$layoutConfig:t.ContractUtils.createMasterLayoutConfig()}},{id:4,title:e.common.localize.get("AddWidgetModal_VideoOption_Title"),description:e.common.localize.get("AddWidgetModal_VideoOption_Description"),iconClass:"pbi-glyph-slideshow",template:"<edit-video-widget></edit-video-widget>",defaultTileContract:{type:c.iframe,$action:{action:null,targetUrl:"",openInSameTab:!1},$config:{iframe:{srcUrl:"",embedCode:""},widget:{id:4,name:"video"}},$layoutConfig:t.ContractUtils.createMasterLayoutConfig()}}];return{title:e.common.localize.get("Add_Widgets_Section_Title"),tiles:o}}function D(){var o=[];return o.push({id:6,title:e.common.localize.get("Realtime_TileTitle"),iconClass:"pbi-glyph-streaming-data",defaultTileContract:{type:c.realTime,$action:{action:null,targetUrl:"",openInSameTab:!1},$config:{realTimeVisual:{layoutType:e.common.contracts.TileLayoutType.Default,visual:null}},$layoutConfig:t.ContractUtils.createMasterLayoutConfig({width:a.gridItemSmallLandscapeColSpan,height:a.gridItemSmallLandscapeRowSpan})}}),{title:e.common.localize.get("Add_Realtime_Section_Title"),tiles:o}}function C(t,o,r,i,a,n,d,c,l,p,u,h){var m={visual:o,queryMetadata:r,themeName:l,stylePresetName:p,layoutType:u};if(null!=d)m.heading1=d;else{var f=null,v=null,g=null;if(i){var b=new e.data.dsr.QueryDescription(r,i);f=b.getMeasureRestatements(),v=b.getFilterRestatements(),g=b.getGroupRestatements()}else{for(var k=[],D=[],C=0,T=r.Select;C<T.length;C++){var I=T[C];3===I.Type||1===I.Type?k.push(I.Restatement):4!==I.Type&&2048!==I.Type||D.push(I.Restatement)}D.length>0&&(g=D),k.length>0&&(f=k)}f?m.heading1=S(f):g&&(m.heading1=S(g)),v&&(m.heading2=S(v)),f&&g&&(m.heading3=e.common.localize.format("TileHeadings_By",[S(g)]))}var w=t.capabilities(o);if(h&&w&&w.objects){var P=w.objects;m.transform=s.serializeTransformActions(s.serializeDataViewTransformActions(h,P))}return null!=c&&(m.heading3=c),a&&(m.elements=a),y(t,m,o,n),m}function T(o,r,i,n,s,d){var c=a.gridItemMediumLandscapeColSpan,l=a.gridItemMediumLandscapeRowSpan;o===e.visuals.plugins.card.name&&(c=a.gridItemSmallLandscapeColSpan,l=a.gridItemSmallLandscapeRowSpan);var p=n?{modelQuery:{sq:JSON.stringify(n)}}:null,u=t.ContractUtils.createMasterLayoutConfig({width:c,height:l}),h={id:++I,type:i,query:p,config:JSON.stringify(r),tileData:s?b(s.data):null,tileDataSet:s,layoutConfig:JSON.stringify(u),$layoutConfig:u},m=r.visual;return m&&(h.displayText=m.heading1,h.subDisplayText=m.heading3),d&&(h.modelId=d.id),h}var I=100;r.findModel=i,r.createCompositeTile=l,r.createTileConfig=p,r.createTileForPinData=u,r.createNonVisualTileFromExisting=h,r.createReportTileForExploreData=m,r.isTileLoading=f,r.getTileGalleryGroups=v,r.getTileTemplate=g})(i=r.TileFactory||(r.TileFactory={}))})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(t){var o=e.common.contracts.ContentTileType,r=jsCommon.EnumExtensions,i=e.common.contracts.Permissions,a=e.common.models.ReportResource,n=e.common.models.ResourceType,s=(function(e){function t(t){e.call(this,"undefined"==typeof t?0:t.id,n.Workbook,"undefined"==typeof t?0:t.packageId),this.contract=t}return __extends(t,e),t.prototype.getPermissions=function(){var e;return this.getPermissionsCallback&&(e=this.getPermissionsCallback()),e?e:this.contract&&this.contract.permissions},Object.defineProperty(t.prototype,"contentTileType",{get:function(){return o.Workbook},enumerable:!0,configurable:!0}),t.prototype.isOwner=function(){return r.hasFlag(this.getPermissions(),i.All)},t.prototype.isPersonalized=function(){var e=this.getPermissions();return r.hasFlag(e,i.ReadWrite|i.Explore)&&!r.hasFlag(e,i.All)},t.prototype.isEditable=function(){var e=this.editUrl;return this.isOwner()&&null!==e&&void 0!==e&&""!==e},Object.defineProperty(t.prototype,"displayNameWithExtension",{get:function(){var e=jsCommon.Utility.getFileExtension(this.contract.sourceFilePath);return this.displayName.concat(".").concat(e)},enumerable:!0,configurable:!0}),t})(a);t.Workbook=s})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(o){var r=e.explore.services.createVisualHostServices,i=e.data.services.DataViewObjectSerializer,a=e.data.services.DataViewTransformActionsSerializer,n=e.common.models.gridLayoutConstants,s=e.common.helpers.ModelConverterHelper,d=(function(){function e(e,t){this.contract=e,this.visualPluginService=t}return Object.defineProperty(e.prototype,"type",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tileData",{get:function(){return null},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isError",{get:function(){return this._isError},set:function(e){this._isError=e,this.onErrorDelegate&&this.onErrorDelegate()},enumerable:!0,configurable:!0}),e.prototype.isDataStale=function(e){return!1},e.prototype.setDependencies=function(e){this.dataProxy=e},e.prototype.setDataLoadEventDelegate=function(e){this.dataLoadEventDelegate=e},e.prototype.copyDependencies=function(e){e.dataProxy&&this.setDependencies(e.dataProxy)},e})();o.CompositeTileModel=d,o.staleDataDeltaInMs=36e5;var c=(function(d){function c(e,t,o,i){d.call(this,e,t),this.requiresResize=!1,this.geoLocationService=o,this.geocoder=i,this._visual={hostServices:r(o,i)}}return __extends(c,d),Object.defineProperty(c.prototype,"type",{get:function(){return t.contracts.CompositeTileType.SingleVisual},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"visual",{get:function(){return this._visual},enumerable:!0,configurable:!0}),c.prototype.isDataStale=function(e){if(!e)return!1;var t=this.contract,r=s.convertRefreshTimeToJsDateTime(t.tileDataUpdatedTime),i=r&&r.getTime();return!!i&&e-i>o.staleDataDeltaInMs},c.prototype.setData=function(e,t,o){this.ensureVisual(),this._visual.data=e,this._visual.dataTransforms=t,this._visual.type=o},c.prototype.ensureVisual=function(){this._visual||(this._visual={hostServices:r(this.geoLocationService,this.geocoder)},this.calculateLayout())},Object.defineProperty(c.prototype,"config",{get:function(){return this._config},set:function(e){if(this._config=e,this._visual){var t=e.visual;this._visual.type=t,this._visual.themeName=e.themeName,this._visual.stylePresetName=e.stylePresetName;var o,r,n=this.visualPluginService.capabilities(t);n&&(r=n.objects,e.objects&&(o=i.deserializeObjects(e.objects,r)));try{var s=JSON.parse(e.transform);this._visual.dataTransforms=a.deserializeDataViewTransformActions(s,r)}catch(e){}this._visual.dataTransforms||(this._visual.dataTransforms=a.createTransformActions(e.queryMetadata,e.elements,r,o))}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"tileData",{get:function(){return this._tileData},set:function(e){this._tileData=e,this.readDataView(!0)},enumerable:!0,configurable:!0}),c.prototype.refreshData=function(){this.readDataView(!1)},c.prototype.setDependencies=function(e){var t=!this.dataProxy&&this._tileData&&!this.isLoading;d.prototype.setDependencies.call(this,e),t&&this.refreshData()},c.prototype.readDataView=function(o){var r=this,i=e.visualHost.utils.shouldDisableVisual(this._visual.type,e.common.localize.shouldDisableMap());if(!this.visual||this.requiresData()||i){var a=this.dataProxy;if(a){if(this.contract.queryResultError){var n=t.TileUtils.getTileErrorDetailsFromQueryResultError(this.contract.queryResultError);n?(this.isError=!0,this.errorDetails=n,this.errorText=n.message):this.errorText=e.common.localize.get("Tile_ErrorText")}if(!this._tileData||!this._tileData.data)return void(this.isLoading=!0);var s=this._tileData,d={type:s.type,query:{dataSources:null,command:s.data},allowCache:o,perfId:this._visual.type},c=null;this.dataLoadEventDelegate&&(c=this.dataLoadEventDelegate(),this.dataLoadEventDelegate=null),a.execute(d).then((function(t){var o={dataView:t&&t.dataReaderResult?t.dataReaderResult.dataView:null,dataViewSource:t&&t.dataViewSource?t.dataViewSource:null},a=t.dataReaderResult.error;i&&(a={code:"NotSupportedForLocale",debugInfo:"",getDetails:function(e){return{displayableErrorInfo:[{errorInfoKey:e.get("VisualContainer_NotSupportedForLocaleKey"),errorInfoValue:e.get("VisualContainer_NotSupportedForLocaleValue")}],message:e.get("VisualContainer_NotSupportedForLocaleMessage")}},ignorable:!1,requestId:""},r.errorDetails=a.getDetails(e.common.localize),r.errorText=r.errorDetails.message),r._visual.data=o,r.isError=r.isError||null!=a,c&&(r.isError?c.reject():c.resolve())}),(function(e){r.isError=!0,c&&c.reject()}))}}},c.prototype.applyLayout=function(t){if(this.requiresResize){var o=this.visual;if(o&&o.visual){var r=o.visual,i=t===n.changeType.resized?2:t===n.changeType.resizing?1:void 0;r.update({viewport:o.viewport,dataViews:o.dataViews,suppressAnimations:!0,type:e.VisualUpdateType.Resize,resizeMode:i})}this.requiresResize=!1}},c.prototype.calculateLayout=function(t){if(t&&(this.viewport&&this.viewport.height===t.height&&this.viewport.width===t.width||(this.requiresResize=!0),this.viewport=t),this.viewport){var r=this.viewport.height,i=this.viewport.width;switch(this._config&&this._config.layoutType){case e.common.contracts.TileLayoutType.Full:break;default:r-=this.useSmallPlotArea?o.TileConstants.VisualSmallVerticalMargin:o.TileConstants.VisualVerticalMargin,i-=o.TileConstants.VisualHorizontalMargin}this._visual&&(this._visual.viewport={height:r,width:i})}},c.prototype.canResizeTo=function(t){var o=this._visual&&this._visual.visual;return!!o&&(!o.canResizeTo||o.canResizeTo(e.common.GridLayoutConstants.getDefaultGridItemViewport(t)))},c.prototype.getErrorLocId=function(e,t){return""},c.prototype.requiresData=function(){var t=this.visual,o=this.visualPluginService;if(t){if(t&&t.type){if(!o)return!0;if(!e.explore.util.VisualContainerUtils.isQueryVisual(t.type,o))return!1}return!0}},c.prototype.updateVisualInteractivityOptions=function(e){var t=this.visualPluginService.getInteractivityOptions(this._visual.type);"undefined"!=typeof t.isInteractiveLegend&&(t.isInteractiveLegend=t.isInteractiveLegend&&e),this._visual.interactivityOptions=t},c.prototype.setUseSmallPlotArea=function(e){this.useSmallPlotArea!==e&&(this.useSmallPlotArea=e,this.requiresResize=!0)},c})(d);o.SingleVisualCompositeTileModel=c})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(e){this.tileModel=e}return Object.defineProperty(e.prototype,"isSelected",{get:function(){return this.tileModel.isSelected},set:function(e){this.tileModel.isSelected=e},enumerable:!0,configurable:!0}),e})();e.DashboardTileModel=t})(t=e.models||(e.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(t){var o=(function(){function t(e){this.contract=e}return t.prototype.canResizeTo=function(t){return t.rowSpan===e.common.GridLayoutConstants.gridItemMediumLandscapeRowSpan||t.colSpan===e.common.GridLayoutConstants.gridItemSmallLandscapeColSpan},t.prototype.getErrorLocId=function(e,t){return""},t})();t.IframeTileModel=o})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(t){var o=(function(){function t(e){this.contract=e}return Object.defineProperty(t.prototype,"imageUrl",{get:function(){return this._imageUrl},set:function(e){this._imageUrl=e,e&&!this.isStatic&&0!==e.indexOf("data:")&&(this._imageUrl=jsCommon.Utility.getAbsoluteUri(e))},enumerable:!0,configurable:!0}),t.prototype.canResizeTo=function(t){return t.rowSpan===e.common.GridLayoutConstants.gridItemMediumLandscapeRowSpan||t.colSpan===e.common.GridLayoutConstants.gridItemSmallLandscapeColSpan},t.prototype.getErrorLocId=function(e,t){return""},t})();t.ImageTileModel=o})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(t){var o=(function(){function t(e){this.contract=e}return t.prototype.canResizeTo=function(t){return t.rowSpan===e.common.GridLayoutConstants.gridItemSmallLandscapeRowSpan},t.prototype.getErrorLocId=function(e,t){return""},t})();t.ModelTileModel=o})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(o){var r=e.data.services.DataViewObjectSerializer,i=t.constants.SingleValueRealTimeWindow,a=e.data.EmptyDataClientError,n=e.data.FailedRealTimeUpdateClientError,s=e.explore.QueryProjectionBuilderCoreUtils,d=e.data.services.SemanticQuerySerializer,c=(function(c){function l(e,t,o,r){c.call(this,e,t,o,r),this._visual=null}return __extends(l,c),l.prototype.setModelId=function(e){this.contract.modelId=e,this.initialize()},Object.defineProperty(l.prototype,"realTimeModelId",{get:function(){var e=this.contract,t=this.modelService.findModel(e.modelId,e.packageId);return t&&t.contract?{id:t.id,originalModelId:t.contract.originalModelId,tableName:this.getSchemaTableName(),schema:this.getRealTimeConceptualSchema(),packageId:e.packageId}:null},enumerable:!0,configurable:!0}),l.prototype.setRealTimeModelDependencies=function(e,t,o,r,i){c.prototype.setDependencies.call(this,e),this.visualQueryGenerator=t,this.conceptualSchemaProxy=o,this.realTimeDataService=r,this.modelService=i},l.prototype.copyRealTimeModelDependencies=function(e){e.schema&&(this.schema=e.schema),e.dataProxy&&e.realTimeDataService&&e.visualQueryGenerator&&e.conceptualSchemaProxy&&(this.setRealTimeModelDependencies(e.dataProxy,e.visualQueryGenerator,e.conceptualSchemaProxy,e.realTimeDataService,e.modelService),e.onErrorDelegate&&!this.onErrorDelegate&&(this.onErrorDelegate=e.onErrorDelegate),this.realTimeDataService.replaceListener(e.realTimeModelId,e,this))},l.prototype.onDataChanged=function(){var t=this;if(this.singleVisualConfig){var o=i,r=this.config;r&&r.dataWindow&&(o=r.dataWindow);var n=this.visualQueryGenerator.execute({dataSources:this.datasources,schema:this.schema,config:this.singleVisualConfig,additionalFilters:null,dataWindow:o});if(!n||n.error){var s=void 0;n&&n.error&&(s=n.error.getDetails(e.common.localize)),this.onError(s)}else this.dataProxy.execute(n.options).then((function(e){t.isError=!1;var o={dataView:e&&e.dataReaderResult?e.dataReaderResult.dataView:null},r=t.lastCategoryValue;try{var i=t.getLastDateOrNumericCategoryValue(o.dataView);if(null!=r&&null!=i&&r.valueOf()>=i.valueOf())return;t.lastCategoryValue=i}catch(e){}t.setData(o,n.transforms,t.visualConfig.visualType),t.isLoading=!1}),(function(o){if(!(o instanceof a)){var r=o&&o.getDetails(e.common.localize);t.onError(r)}}))}},l.prototype.onError=function(t){t||(t=(new n).getDetails(e.common.localize)),this.setErrorDetails(t)},Object.defineProperty(l.prototype,"datasources",{get:function(){var e=this.realTimeModelId;if(e)return o.RealTimeModelUtility.getRealTimeDataSource(e.id,e.originalModelId)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"singleVisualConfig",{get:function(){if(this.visualConfig)return this.visualConfig;if(this.schema){var o=this.contract,i=this.config,a=i&&i.visual;if(a){var n=t.ContractUtils.convertToSemanticQueryWithDataShapeBinding(o.query);if(n){var c=d.deserializeQuery(n.defn);this.fixUpSemanticQuery(c);var l=i.elements,p=l&&l.length>0?l[0].DataRoles:null,u=this.getPlugin(a),h=s.createProjectionBuilderFromDataRoles(u,p,c,this.schema),m=this.visualPluginService.capabilities(u.name);if(m){var f=r.deserializeObjects(i.objects,m.objects);return this.visualConfig={objects:f,visualType:u.name,query:new e.explore.contracts.VisualQuery(c,h.build(n.shape))},this.visualConfig}}}}},set:function(e){this.visualConfig=e,this.onDataChanged()},enumerable:!0,configurable:!0}),l.prototype.isDataStale=function(e){return!1},l.prototype.initialize=function(){var e=this,o=t.ContractUtils.getMasterLayoutPosition(this.contract);this.size={rowSpan:o.height,colSpan:o.width};var r=this.datasources;r&&this.conceptualSchemaProxy.get(r).then((function(t){e.fixUpSchema(t),e.schema=t,e.realTimeDataService.subscribe(e.realTimeModelId,e)}))},l.prototype.unsubscribe=function(){this.realTimeModelId&&this.realTimeDataService.unsubscribe(this.realTimeModelId,this)},l.prototype.fixUpSchema=function(o){for(var r=o.schema(t.constants.RealTimeDataSourceName).entities,i=r[0].properties,a=0,n=i;a<n.length;a++){var s=n[a];s.type!==e.ValueType.fromDescriptor({numeric:!0})&&s.type!==e.ValueType.fromDescriptor({integer:!0})||(s.kind=1)}},l.prototype.getPlugin=function(t){var o=this.visualPluginService.getPlugin(t);return o||"realTimeLineChart"!==t||(o=this.visualPluginService.getPlugin(e.visuals.plugins.lineChart.name)),o},l.prototype.getSchemaTableName=function(){var e=this.getRealTimeConceptualSchema();if(e){var t=e.entities;return _.first(t).name}},l.prototype.getRealTimeConceptualSchema=function(){if(this.schema)return this.schema.schema(t.constants.RealTimeDataSourceName)},l.prototype.setErrorDetails=function(e){this.errorDetails=e,this.errorText=e.message,this.isError=!0},l.prototype.fixUpSemanticQuery=function(o){var r=o.from(),i=r.keys();if(!_.isEmpty(i)){var a=r.source(i[0]);if(!e.data.isSQFromEntitySource(a)||a.schema!==t.constants.RealTimeDataSourceName){var n=a;n.schema=t.constants.RealTimeDataSourceName;for(var s=o.select(),d=0,c=s;d<c.length;d++){var l=c[d],p=l.expr,u=l.expr;if(u&&u.arg&&(p=u.arg),p){var h=p.source;if(!h)continue;h.schema=t.constants.RealTimeDataSourceName}}}}},l.prototype.getLastDateOrNumericCategoryValue=function(e){var t=e&&e.categorical;if(t){var o=_.first(t.categories),r=o&&o.values;if(!_.isEmpty(r)){var i=_.last(r);return i&&!_.isBoolean(i)&&(_.isDate(i)||_.isNumber(i))?i:void 0}}},l})(o.SingleVisualCompositeTileModel);o.RealTimeTileModel=c})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(o){var r,i=o.RealTimeModel;!(function(o){function r(o,r){if(o&&!(o<0))return e.explore.contracts.createDataSourceArray([{id:o,type:e.data.tabular.type,name:t.constants.RealTimeDataSourceName,tabular:{modelId:null!=r?r:o}}])}function a(t){var o=e.data.tabular.getColumnsMetadata(t);if(o){for(var r=[],a=0,n=o;a<n.length;a++){var s=n[a];r.push({name:s.name,dataType:i.convertToRealTimeDataType(e.ValueType.fromDescriptor(s.type))})}return r}}o.getRealTimeDataSource=r,o.convertToColumnsDefinition=a})(r=o.RealTimeModelUtility||(o.RealTimeModelUtility={}))})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(t){var o=(function(){function t(e){this.contract=e,this.exploration={contract:void 0,exploreCanvas:void 0,sections:[]},this.isError=!1,this.tilesUpdated=!1}return t.prototype.canResizeTo=function(t){return t.rowSpan===e.common.GridLayoutConstants.gridItemMediumLandscapeRowSpan||t.colSpan===e.common.GridLayoutConstants.gridItemSmallLandscapeColSpan},t.prototype.getErrorLocId=function(e,t){return""},t})();t.ReportTileModel=o})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(t){var o=(function(){function t(e){this.contract=e}return Object.defineProperty(t.prototype,"imageUrl",{get:function(){return this._imageUrl},set:function(e){e&&(0!==e.indexOf("data:")?this._imageUrl=jsCommon.Utility.getAbsoluteUri(e):this._imageUrl=e)},enumerable:!0,configurable:!0}),t.prototype.canResizeTo=function(t){return t.rowSpan===e.common.GridLayoutConstants.gridItemLargeLandscapeRowSpan||t.colSpan===e.common.GridLayoutConstants.gridItemLargeLandscapeColSpan},t.prototype.getErrorLocId=function(e,t){return""},t})();t.SsrsTileModel=o})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(o){function r(e){if(!(_.isEmpty(e)||e.length<o.DashboardIntraDomainNavigationPrefix.length)&&i(e))return e.substr(o.DashboardIntraDomainNavigationPrefix.length)}function i(e){return!_.isEmpty(e)&&0===e.toLowerCase().indexOf(o.DashboardIntraDomainNavigationPrefix)}function a(e){return!_.isEmpty(e)&&0===e.toLowerCase().indexOf(o.ReportIntraDomainNavigationPrefix)}function n(e){return!_.isEmpty(e)&&0===e.toLowerCase().indexOf(o.WorkbookIntraDomainNavigationPrefix)}function s(e){return i(e)||a(e)||n(e)}var d=jsCommon.ArrayExtensions,c=e.common.helpers.ModelConverterHelper,l=jsCommon.UrlUtils;!(function(e){e[e.Dashboard=0]="Dashboard",e[e.Report=1]="Report"})(o.IntraDomainNavigationType||(o.IntraDomainNavigationType={}));o.IntraDomainNavigationType;o.getDashboardGuidFromUrl=r,o.IsDashboardIntraDomainPrefix=i,o.IsReportIntraDomainPrefix=a,o.IsWorkbookIntraDomainPrefix=n,o.IsValidIntraDomainPrefix=s,o.DashboardIntraDomainNavigationPrefix="/dashboards/",o.ReportIntraDomainNavigationPrefix="/reports/",o.WorkbookIntraDomainNavigationPrefix="/workbooks/";var p;!(function(e){e.SubtitleHeight=10,e.TileDefaultPadding=10,e.RegularHeaderHeight=50,e.SmallHeaderHeight=42,e.LargeHeaderHeight=65,e.VisualVerticalMargin=20,e.VisualHorizontalMargin=20,e.VisualSmallVerticalMargin=8})(p=o.TileConstants||(o.TileConstants={}));var u=(function(){function o(e){this.isSelected=!1,this.contract=e,this.tileHeaderSize=1,this.layoutPosition={}}return Object.defineProperty(o.prototype,"gridLayouts",{get:function(){return this.contract.$layoutConfig.layouts},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"id",{get:function(){return this.contract.id},set:function(e){this.contract.id=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"objectId",{get:function(){return this.contract.objectId},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"details",{get:function(){switch(this.type){case t.contracts.TileType.composite:return this.composite;case t.contracts.TileType.iframe:return this.iframe;case t.contracts.TileType.image:return this.image;case t.contracts.TileType.model:return this.model;case t.contracts.TileType.ssrs:return this.ssrs;case t.contracts.TileType.workbook:return this.workbook;case t.contracts.TileType.report:return this.reportTile;case t.contracts.TileType.realTime:return this.realTime;default:return null}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"shouldBeIncludedInTelemetryMeasurement",{get:function(){return!!this.details.shouldBeIncludedInTelemetryMeasurement},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isTemporary",{get:function(){return this.id<=0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isTileLoading",{get:function(){return this.composite?this.composite.isLoading&&!this.composite.isError:this.isLoading},enumerable:!0,configurable:!0}),o.prototype.calculateLayout=function(e){var t=this.getHeaderSizeByType(this.tileHeaderSize);if(this.compositeTile&&e){var o=e;this.compositeTile.useSmallPlotArea?this.hasTitle()?o.height-=t:o.height-=p.TileDefaultPadding:this.hasTitle()&&(this.hasSubtitle()?o.height-=t:o.height-=t-p.SubtitleHeight),this.compositeTile.calculateLayout(o)}},o.prototype.applyLayout=function(e){this.compositeTile&&this.compositeTile.applyLayout(e)},o.prototype.invalidateLayout=function(){this.tryPopulateLayoutPositionValues()&&this.gridLayoutContext.onLayoutInvalidated()},o.prototype.tryPopulateLayoutPositionValues=function(){if(!this.gridLayoutContext||this.gridLayoutContext.isLayoutUpdateLocked)return!1;var e=this.gridLayoutContext.getActiveLayout(),t=d.extendWithId(this.contract.$layoutConfig.layouts),o=t.withId(e);return o&&o.position&&(this.layoutPosition=_.cloneDeep(o.position)),!0},o.prototype.applyChanges=function(){if(this.contract&&this.gridLayoutContext){var e=_.cloneDeep(this.layoutPosition),t=this.contract.$layoutConfig;this.addOrUpdateLayoutPosition(t,e),this.contract.layoutConfig=JSON.stringify(this.contract.$layoutConfig)}},o.isValidUrl=function(e){return!_.isEmpty(e)&&(l.isValidUrl(e)||s(e))},o.prototype.getDisplayText=function(){if(this.displayText)return this.displayText;if(this.compositeTile){var e=this.compositeTile.config;if(e&&!_.isEmpty(e.heading1))return e.heading1}return""},o.prototype.getSubDisplayText=function(){if(this.displayText&&this.subDisplayText)return this.subDisplayText;if(this.compositeTile){var e=this.compositeTile.config;if(!this.displayText&&e&&!_.isEmpty(e.heading3))return e.heading3}return""},o.prototype.shouldPlaceBulletSeperator=function(){var e=this.displayText&&this.displayText.length>0;return e&&this.subDisplayText&&this.subDisplayText.length>0&&this.config&&this.config.lastRefreshTimeEnabled},Object.defineProperty(o.prototype,"hrefTarget",{get:function(){return this.action.openInSameTab?"_self":"_blank"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lastRefreshTimeInLocaleString",{get:function(){var e=c.convertRefreshTimeToJsDateTime(this.contract.tileDataUpdatedTime);return e?e.toLocaleString():this.datasetModel?this.datasetModel.lastRefreshTimeInLocaleString:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"formatedTime",{get:function(){var t;if(this.workbook){var o=this.contract.tilePackage;t=o?c.convertRefreshTimeToJsDateTime(o.lastRefreshTime):null}else t=c.convertRefreshTimeToJsDateTime(this.contract.tileDataUpdatedTime);var r="minute",i="day",a=15,n=0,s=1,d=6;return t?jsCommon.DateExtensions.isMomentPresent()&&jsCommon.DateExtensions.isContainedInTimeFrame(t,r,a,!1)?jsCommon.DateExtensions.formatPretty(t):jsCommon.DateExtensions.isMomentPresent()&&jsCommon.DateExtensions.isContainedInTimeFrame(t,i,n,!0)?jsCommon.DateExtensions.GetTime(e.common.localize.currentLanguageLocale,t):jsCommon.DateExtensions.isMomentPresent()&&jsCommon.DateExtensions.isContainedInTimeFrame(t,i,s,!0)?e.common.localize.format("DashboardTile_YesterdayTemplate",[jsCommon.DateExtensions.GetTime(e.common.localize.currentLanguageLocale,t)]):jsCommon.DateExtensions.isMomentPresent()&&jsCommon.DateExtensions.isContainedInTimeFrame(t,i,d,!0)?jsCommon.DateExtensions.GetDayWithTime(e.common.localize.currentLanguageLocale,t):jsCommon.DateExtensions.GetFullDateWithTime(e.common.localize.currentLanguageLocale,t):this.datasetModel?this.datasetModel.lastRefreshTimeInLocaleString:void 0},enumerable:!0,configurable:!0}),o.prototype.setDatasetModelAndPackageInfo=function(e,t){e&&(this.datasetModel=e,t&&(this.datasetModel.packagePublishStatus=t.publishOrRefreshStatus))},o.prototype.hasTitle=function(){if(this.config&&this.config.hideTitle)return!1;var e=this.compositeTile?this.compositeTile.config:null;return!_.isEmpty(this.displayText)||e&&!_.isEmpty(e.heading1)},o.prototype.hasSubtitle=function(){var e=this.config;return(!e||!e.hideTitle)&&(!_.isEmpty(this.subDisplayText)||e&&e.lastRefreshTimeEnabled)},o.prototype.lastRefreshTimeInLocaleWithLabel=function(){if(this.config&&this.config.lastRefreshTimeEnabled)return e.common.localize.format("DashboardTile_LastRefreshTimeTemplate",[this.formatedTime])},o.prototype.setTileHeaderSize=function(e){this.tileHeaderSize=e,this.compositeTile&&this.compositeTile.setUseSmallPlotArea(2===e)},Object.defineProperty(o.prototype,"compositeTile",{get:function(){return this.composite?this.composite:this.realTime?this.realTime:void 0},enumerable:!0,configurable:!0}),o.prototype.hasLayoutDefinition=function(e){var t=d.extendWithId(this.contract.$layoutConfig.layouts);return!!t.withId(e)},o.prototype.hasLayoutPosition=function(e){return!!t.ContractUtils.getLayoutPosition(this.contract,e)},o.prototype.removeLayoutPosition=function(e){return void 0===e&&(e=1),this.hasLayoutDefinition(e)&&(this.addLayout({id:e,position:null},e),this.resetTileLayoutSizeAndPosition()),this.getCurrentTileLayoutDescriptor()},o.prototype.resetTileLayoutSizeAndPosition=function(){this.layoutPosition.x=null,this.layoutPosition.y=null,this.layoutPosition.height=null,this.layoutPosition.width=null,this.gridLayoutContext=null},o.prototype.removeLayoutDefinition=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.hasLayoutDefinition(e)&&(_.remove(this.contract.$layoutConfig.layouts,(function(t){return t.id===e})),t&&this.resetTileLayoutSizeAndPosition()),this.getCurrentTileLayoutDescriptor()},o.prototype.applyLayoutSize=function(e,t){this.compositeTile&&(this.compositeTile.size={colSpan:e.colSpan,rowSpan:e.rowSpan}),this.applyLayout(t);
},o.prototype.getCurrentTileLayoutDescriptor=function(e,t){var o=e?e:this.contract.$layoutConfig;return{id:this.id,row:null,col:null,rowSpan:null,colSpan:null,layoutConfig:JSON.stringify(o),query:t?t[0]:null,updatedQuery:t?t[1]:null,modelId:this.contract.modelId}},o.prototype.buildLayoutDescriptor=function(){var e=_.cloneDeep(this.layoutPosition),t=_.cloneDeep(this.contract.$layoutConfig);this.addOrUpdateLayoutPosition(t,e);var o=this.updateTileQueryAfterResize(e);return this.getCurrentTileLayoutDescriptor(t,o)},o.prototype.updateTileQueryAfterResize=function(o){var r=this.composite&&this.composite.contract&&this.composite.contract.query;if(r){var i=t.ContractUtils.convertToTileDataQuery(r);if(!i)return;for(var a=_.cloneDeep(r),n=o.width*e.common.GridLayoutConstants.defaultGridWidth,s=o.height*e.common.GridLayoutConstants.defaultGridHeight,d=!1,c=0;c<i.Commands.length;++c){var l=i.Commands[c].ScriptVisualCommand;if(l){var p=l.ViewportWidthPx,u=l.ViewportHeightPx;p===n&&u===s||(l.ViewportWidthPx=n,l.ViewportHeightPx=s,i.Commands[c].ScriptVisualCommand=l,d=!0)}}if(d){this.composite.contract.query.modelQuery.sq=JSON.stringify(i);var h=JSON.stringify(this.composite.contract.query);return[a,h]}}},o.prototype.addOrUpdateLayoutPosition=function(e,t){var o=this.gridLayoutContext.getActiveLayout(),r=d.extendWithId(e.layouts),i=r.withId(o);i||(i={id:o,position:{}},r.push(i)),i.position=t},o.prototype.addLayout=function(e,t){return this.removeLayoutDefinition(t),this.contract.$layoutConfig.layouts.push(e),this.getCurrentTileLayoutDescriptor()},o.prototype.getHeaderSizeByType=function(e){switch(e){case 0:return p.LargeHeaderHeight;case 2:return p.SmallHeaderHeight;case 1:default:return p.RegularHeaderHeight}},o})();o.Tile=u})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(o){var r=(function(){function o(e,t){this.contract=e,this.tileModel=t}return o.prototype.canResizeTo=function(t){return t.rowSpan===e.common.GridLayoutConstants.gridItemMediumLandscapeRowSpan||t.colSpan===e.common.GridLayoutConstants.gridItemSmallLandscapeColSpan},o.prototype.getErrorLocId=function(e,o){var r,i=[];switch(e){case t.contracts.TileErrorCode.workbookTileGeneralError:r="WorkbookTile_GeneralError";break;case t.contracts.TileErrorCode.workbookTileFileNotFound:r="WorkbookTile_FileNotFound";break;case t.contracts.TileErrorCode.workbookTileObjectNotFound:r="WorkbookTile_ObjectNotFound",i=this.contract.$config.workbookTile?[this.contract.$config.workbookTile.item]:["pinned object"];break;case t.contracts.TileErrorCode.workbookTileUnauthorized:r="WorkbookTile_Unauthorized";break;default:return""}return o.format(r,i)},o.prototype.hasImages=function(){return this.hasWorkbookTileConfig&&this.tileModel.config.workbookTile.images&&this.tileModel.config.workbookTile.images.length>0},Object.defineProperty(o.prototype,"images",{get:function(){return this.hasWorkbookTileConfig?this.tileModel.config.workbookTile.images:null},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hasWorkbookTileConfig",{get:function(){return!!this.tileModel&&!!this.tileModel.config&&!!this.tileModel.config.workbookTile},enumerable:!0,configurable:!0}),o})();o.WorkbookTileModel=r})(o=t.models||(t.models={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){var t=i.tryParseJSON(e.layoutConfig),o=r.extendWithId(t.layouts).withId(0);e.col=o.position.x,e.row=o.position.y,e.colSpan=o.position.width,e.rowSpan=o.position.height}function o(e){for(var t=0,o=e;t<o.length;t++){var a=o[t],n=i.tryParseJSON(a.layoutConfig),s=r.extendWithId(n.layouts).withId(0);a.col=s.position.x,a.row=s.position.y,a.colSpan=s.position.width,a.rowSpan=s.position.height}}var r=jsCommon.ArrayExtensions,i=jsCommon.JsonExtensions;e.conformOutgoingTile=t,e.conformOutgoingTileLayoutDescriptors=o})(t=e.compatibility||(e.compatibility={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e,o,r){return t.dashboardHttpService||(t.dashboardHttpService=new a(e,o,r)),t.dashboardHttpService}var r=jsCommon.GzipUtility;t.createDashboardHttpService=o;var i=1048576,a=(function(){function o(e,t,o){this.syncService=e,this.promiseFactory=t,this.notificationToastService=o,this.batchedDashboardRequests=[]}return o.prototype.getDashboardContainer=function(t){var o=e.common.httpService.powerbiRequestOptions(t,"GetDashboardContainer");return e.common.httpService.get("powerbi/metadata/dashboards",o)},o.prototype.getDashboards=function(e,t,o){return this.getDashboardsInternal(e,t,o)},o.prototype.getDashboardContainerByObjectId=function(t,o){var r=e.common.httpService.powerbiRequestOptions(o,"GetDashboardByObjectId"),i=this.getDashboardContainerByObjectIdUrl(t);return e.common.httpService.get(i,r)},o.prototype.batchGetDashboards=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"GetDashboardsByIds");return i.enableTelemetry=!0,e.common.httpService.post("powerbi/metadata/getDashboardsByIds",JSON.stringify(o),i)},o.prototype.getDashboardMetadata=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"GetDashboardMetadata");return i.enableTelemetry=!0,e.common.httpService.get("powerbi/metadata/dashboards/"+o+"/metadata",i)},o.prototype.getDashboardUrl=function(e){return"powerbi/metadata/dashboards/"+e},o.prototype.getDashboardContainerByObjectIdUrl=function(e){return"metadata/embed/dashboard/"+e},o.prototype.addDashboard=function(t,o){var r=e.common.httpService.powerbiRequestOptions(o,"AddDashboard");this.syncService.addMetadataEditRequestId(r.headers[e.telemetryConstants.httpRequestIdHeader]);var i={displayName:t.displayName};return r.enableTelemetry=!0,e.common.httpService.put("powerbi/metadata/dashboards",i,r)},o.prototype.renameDashboard=function(o,r,i){t.DashboardUtils.isWriteable(o)||this.notifyReadOnly(o.id);var a=e.common.httpService.powerbiRequestOptions(i,"RenameDashboard");return this.syncService.addMetadataEditRequestId(a.headers[e.telemetryConstants.httpRequestIdHeader]),a.enableTelemetry=!0,e.common.httpService.post("powerbi/metadata/dashboards/"+o.id+"/name",JSON.stringify(r),a)},o.prototype.duplicateDashboard=function(o,r,i){t.DashboardUtils.isWriteable(o)||this.notifyReadOnly(o.id);var a=e.common.httpService.powerbiRequestOptions(i,"DuplicateDashboard");return this.syncService.addMetadataEditRequestId(a.headers[e.telemetryConstants.httpRequestIdHeader]),a.enableTelemetry=!0,e.common.httpService.post("powerbi/metadata/dashboards/"+o.id+"/copy",JSON.stringify(r),a)},o.prototype.setQnaEnabledForDashboard=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"SetQnaEnabled");return this.syncService.addMetadataEditRequestId(i.headers[e.telemetryConstants.httpRequestIdHeader]),i.enableTelemetry=!0,e.common.httpService.post("powerbi/metadata/dashboards/"+t+"/qnaEnabled",JSON.stringify(o),i)},o.prototype.deleteDashboard=function(o,r){t.DashboardUtils.isWriteable(o)||this.notifyReadOnly(o.id);var i=e.common.httpService.powerbiRequestOptions(r,"DeleteDashboard");this.syncService.addMetadataEditRequestId(i.headers[e.telemetryConstants.httpRequestIdHeader]),i.enableTelemetry=!0;var a="powerbi/metadata/dashboards/"+o.id;return e.common.httpService.delete(a,i)},o.prototype.exportDashboard=function(o,r,i){if(!t.DashboardUtils.isWriteable(o))return this.notificationToastService.notify({title:e.common.localize.get("DashboardReadOnlyWarning_Title"),message:e.common.localize.get("DashboardReadOnlyExportWarning_Message"),notificationType:e.common.NotificationToastType.Alert}),null;var a=e.common.httpService.powerbiRequestOptions(i,"ExportDashboard");return a.responseType="blob",a.enableTelemetry=!0,e.common.httpService.get("powerbi/resource/packages/"+o.id+"/?packageType="+r,a)},o.prototype.addTile=function(o,a,n,s,d){if(!t.DashboardUtils.isWriteable(o))return e.common.httpService.getResolvedHttpChain();var c=e.common.httpService.powerbiRequestOptions(d);this.syncService.addMetadataEditRequestId(c.headers[e.telemetryConstants.httpRequestIdHeader]);var l={id:0,type:a.type,config:a.config,displayText:a.displayText,subDisplayText:a.subDisplayText,name:a.name,action:a.action,image:a.image,query:a.query,tileDataBinaryBase64Encoded:r.compress(a.tileData),layoutConfig:a.layoutConfig,publishState:a.publishState,resourcePackageIds:a.resourcePackageIds};l.modelId=a.modelId,l.reportId=a.reportId,l.workbookId=a.workbookId,l.sectionId=a.sectionId,"number"==typeof a.packageId&&(l.packageId=a.packageId),t.compatibility.conformOutgoingTile(l);var p=JSON.stringify(l).length;return p>i?this.promiseFactory.reject({data:l,headers:function(){return null},status:e.HttpStatusCode.RequestEntityTooLarge,error:{code:"AddTileRequestTooLarge","pbi.error":{code:"AddTileRequestTooLarge",parameters:[],details:[],exceptionCulprit:e.ExceptionCulprit.User}}}):(c.telemetryDescription="AddTile",c.enableTelemetry=!0,e.common.httpService.put("powerbi/metadata/tiles/"+o.id,l,c))},o.prototype.updateTile=function(t,o,r){var i,a={};return _.isEqual(t.displayText,o.displayText)||(a.displayText=o.displayText),_.isEqual(t.subDisplayText,o.subDisplayText)||(a.subDisplayText=o.subDisplayText),_.isEqual(t.action,o.action)||(a.action=o.action),_.isEqual(t.config,o.config)||(a.config=o.config),_.isEqual(t.query,o.query)||(a.query=o.query),_.isEqual(t.tileData,o.tileData)||(a.tileDataBinaryBase64Encoded=jsCommon.GzipUtility.compress(o.tileData)),i=e.common.httpService.powerbiRequestOptions(r,"UpdateTile"),i.enableTelemetry=!0,this.syncService.addMetadataEditRequestId(i.headers[e.telemetryConstants.httpRequestIdHeader]),e.common.httpService.patch("powerbi/metadata/tiles/"+t.id,JSON.stringify(a),i)},o.prototype.deleteTile=function(o,r,i){t.DashboardUtils.isWriteable(o)||this.notifyReadOnly(o.id);var a=e.common.httpService.powerbiRequestOptions(i,"DeleteTile");return this.syncService.addMetadataEditRequestId(a.headers[e.telemetryConstants.httpRequestIdHeader]),a.enableTelemetry=!0,e.common.httpService.delete("powerbi/metadata/tiles/"+r,a)},o.prototype.getTile=function(t,o){var r=e.common.httpService.powerbiRequestOptions(o,"GetTile");return r.enableTelemetry=!0,e.common.httpService.get("powerbi/metadata/tiles/"+t,r)},o.prototype.batchGetTiles=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"BatchGetTiles");return i.enableTelemetry=!0,e.common.httpService.post("powerbi/metadata/dashboard/"+t+"/tiles",JSON.stringify(o),i)},o.prototype.renameTile=function(t,o,r,i){var a=e.common.httpService.powerbiRequestOptions(i,"RenameTile");this.syncService.addMetadataEditRequestId(a.headers[e.telemetryConstants.httpRequestIdHeader]);var n={id:t,displayText:o,subDisplayText:r};return a.enableTelemetry=!0,e.common.httpService.post("powerbi/metadata/tiles/"+t+"/displayText",JSON.stringify(n),a)},o.prototype.getTileShortUrl=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"GetTileShortUrl");return i.enableTelemetry=!0,e.common.httpService.get("metadata/dashboards/"+t+"/tiles/"+o+"/shortUrl",i)},o.prototype.batchUpdateTileSizePosition=function(e,o,r,i){if(t.compatibility.conformOutgoingTileLayoutDescriptors(r),!t.DashboardUtils.isWriteable(o))return this.isDashboardBatchTilePositionUpgrade(o,r)||this.notifyReadOnly(o.id),null;var a=r.filter((function(e){return!!e.updatedQuery})),n=r.filter((function(e){return!e.updatedQuery})),s=this.batchUpdateTileSizePositionInternal(o,n,i,!0),d=this.batchUpdateTileSizePositionInternal(o,a,i,!1),c=[];return s&&c.push(s),d&&c.push(d),e.allSettled(c)},o.prototype.batchUpdateTileSizePositionInternal=function(t,o,r,i){if(void 0===i&&(i=!0),o&&0!==o.length){var a=e.common.httpService.powerbiRequestOptions(r,"SetTileSizePosition"),n=a.headers[e.telemetryConstants.httpRequestIdHeader];return i?this.syncService.addMetadataEditRequestId(n):this.syncService.addDashboardTransactionFilter(n,(function(t){return t.changeType!==e.common.contracts.MetadataChangeType.TileDataChange})),a.enableTelemetry=!0,e.common.httpService.post("/powerbi/metadata/dashboard/"+t.id+"/tiles/sizeandposition",o,a)}},o.prototype.isDashboardBatchTilePositionUpgrade=function(t,o){for(var r={},i=t.tiles,a=0,n=i.length;a<n;++a){var s=i[a];r[s.id]=s}for(var a=0,n=o.length;a<n;++a){var d=o[a],s=r[d.id];if(s&&s.row>e.common.constants.contractRowProtocolThreshold)return!0}return!1},o.prototype.setActiveDashboardId=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"SetActiveDashboard");i.enableTelemetry=!0;var a=null;return o&&o.length>0&&(a=JSON.stringify(o)),e.common.httpService.post("/powerbi/metadata/user/activedashboard/"+t,a,i)},o.prototype.refreshTileData=function(t,o,r,i){var a=e.common.httpService.powerbiRequestOptions(r,"SetActiveDashboard",i);a.enableTelemetry=!0;var n=null;return o&&o.length>0&&(n=JSON.stringify(o)),e.common.httpService.post("/powerbi/metadata/user/activedashboard/"+t+"/refresh",n,a)},o.prototype.notifyReadOnly=function(t,o){var r="NotifiedReadOnlyDashboard"+t,i=o||!e.common.sessionStorageService.getData(r);i&&(this.notificationToastService.notify({title:e.common.localize.get("DashboardReadOnlyWarning_Title"),message:e.common.localize.get("DashboardReadOnlyWarning_Message"),notificationType:e.common.NotificationToastType.Alert}),e.common.sessionStorageService.setData(r,!0))},o.prototype.addDashboardRequestToBatch=function(t,o,r){for(var i=this.batchedDashboardRequests,a=0,n=i.length;a<n;++a){var s=i[a];if(s.dashboardId===o&&s.requestType===r)return s.deferred.promise()}var d=$.Deferred(),c={dashboardId:o,deferred:d,requestType:r};return i.push(c),void 0===c.requestType||null===c.requestType||c.requestType===e.common.DashboardRequestType.Default?this.getDashboards(t,[o],void 0).then((function(e){return e&&e.length>0?d.resolve(e[0].data):d.reject()}),(function(){d.reject()})):c.requestType===e.common.DashboardRequestType.Metadata&&this.getDashboardMetadata(t,o,void 0).then((function(e){return e?d.resolve(e.data):d.reject()}),(function(){d.reject()})),d.promise()},o.prototype.getDashboardsInternal=function(t,o,r,i){var a=this;return _.isEmpty(o)?null:(i=i||t.defer(),e.common.httpService.getAll(o.map((function(e){return a.getDashboardUrl(e)})),o.map((function(t){var o=e.common.httpService.powerbiRequestOptions(r,"GetDashboard");return o.enableTelemetry=!0,o}))).then((function(e){i.resolve(e)}),(function(o){for(var n=[],s=[],d=0,c=o.length;d<c;d++){var l=o[d];l.status===e.HttpStatusCode.OK?n.push(l):s.push(l)}var p=!!s.length;n.length?(i.resolve(n),p&&a.getDashboardsInternal(t,s.map((function(e){return e.data.dashboards[0].id})),r,i)):i.reject(s)})),i.promise)},o.prototype.updateDashboardSetting=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"UpdateDashboardSetting");return this.syncService.addMetadataEditRequestId(i.headers[e.telemetryConstants.httpRequestIdHeader]),i.enableTelemetry=!0,e.common.httpService.post("powerbi/metadata/dashboards/"+t+"/settings",JSON.stringify(o),i)},o})()})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e){return t.modelHttpService||(t.modelHttpService=new r(e)),t.modelHttpService}t.createModelHttpService=o;var r=(function(){function t(e){this.syncService=e}return t.prototype.getModels=function(t){var o=e.common.httpService.powerbiRequestOptions(t,"GetModels");return e.common.httpService.get("powerbi/metadata/models",o)},t.prototype.getModel=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"GetModel");return o?e.common.httpService.get("powerbi/metadata/models/"+t+"/?modelOptions=Default&packageId="+o,i):e.common.httpService.get("powerbi/metadata/models/"+t+"/?modelOptions=Default",i)},t.prototype.getModelForRefresh=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"GetModelForRefresh");return e.common.httpService.get("powerbi/metadata/models/"+t+"/?modelOption=Refresh&packageId="+o,i)},t.prototype.getModelAndPackageForRefresh=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"GetModelAndPackageForRefresh");return this.syncService.addMetadataEditRequestId(i.headers[e.telemetryConstants.httpRequestIdHeader]),e.common.httpService.get("powerbi/metadata/models/"+t+"/?modelOption=PackageModelRefresh&packageId="+o,i)},t.prototype.renameModel=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"RenameModel");return this.syncService.addMetadataEditRequestId(i.headers[e.telemetryConstants.httpRequestIdHeader]),e.common.httpService.post("powerbi/metadata/models/"+t.id+"/name",JSON.stringify(o),i)},t.prototype.deleteModel=function(t,o){var r=e.common.httpService.powerbiRequestOptions(o,"DeleteModel");return e.common.httpService.delete("powerbi/content/models/"+t.id+"/?packageId="+t.packageId,r)},t.prototype.getPackageModels=function(t,o){var r=e.common.httpService.powerbiRequestOptions(o,"GetPackageModels");return e.common.httpService.get("powerbi/metadata/packages/"+t+"/models",r)},t.prototype.getModelRefreshHistories=function(t,o){var r=e.common.httpService.powerbiRequestOptions(o,"GetModelRefreshHistories");return e.common.httpService.get("powerbi/metadata/models/"+t+"/refreshhistories",r)},t.prototype.getPackageRefreshHistories=function(t,o){var r=e.common.httpService.powerbiRequestOptions(o,"GetPackageRefreshHistories");return e.common.httpService.get("powerbi/metadata/packages/"+t+"/refreshhistories",r)},t.prototype.updateFeaturedQuestions=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"UpdateFeaturedQuestions");return e.common.httpService.put("powerbi/metadata/models/"+t+"/featuredQuestions",JSON.stringify(o),i)},t.prototype.disableRlsModel=function(t,o){var r=e.common.httpService.powerbiRequestOptions(o,"DisableRlsModel");return e.common.httpService.post("metadata/model/"+t+"/rlsdisabled",JSON.stringify(!1),r)},t.prototype.updateModelQnaFeatures=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"UpdateModelQnaFeatures");return e.common.httpService.post("powerbi/metadata/models/"+t+"/qnafeatures",JSON.stringify(o),i)},t})()})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o;!(function(t){function o(t,o){var r=e.common.httpService.powerbiRequestOptions(o,"GetPackage");return e.common.httpService.get("powerbi/metadata/packages/"+t,r)}t.getPackage=o})(o=t.packageHttpService||(t.packageHttpService={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e){return new r(e)}t.createReportHttpService=o;var r=(function(){function t(e){this.syncService=e}return t.prototype.getReports=function(t){var o=e.common.httpService.powerbiRequestOptions(t,"GetReports");return e.common.httpService.get("powerbi/metadata/reports",o)},t.prototype.getReport=function(t,o){var r=e.common.httpService.powerbiRequestOptions(o,"GetReport");return e.common.httpService.get("powerbi/metadata/reports/"+t,r)},t.prototype.renameReport=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"RenameReport");return this.syncService.addMetadataEditRequestId(i.headers[e.telemetryConstants.httpRequestIdHeader]),e.common.httpService.post("powerbi/metadata/reports/"+t.id+"/name",JSON.stringify(o),i)},t.prototype.deleteReport=function(t,o){var r=e.common.httpService.powerbiRequestOptions(o,"DeleteReport");return e.common.httpService.delete("powerbi/content/reports/"+t.id+"/",r)},t.prototype.getReportShortUrl=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"GetReportShortUrl");i.enableTelemetry=!0;var a="metadata/reports/"+t+"/shortUrl";return null!=o&&o.trim().length>0&&(a=a+"?reportPage="+o),e.common.httpService.get(a,i)},t})()})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(){return new i}var r=jsCommon.QueryStringUtil;t.createTutorialDataStoreService=o;var i=(function(){function t(t){this.promiseFactory=t||e.createJQueryPromiseFactory(),this.loadedDeferred=this.promiseFactory.defer()}return t.prototype.setJsonData=function(e){if(this.jsonData=e,!r.getQueryStringValue(t.IgnoreQueryParam)){if(this.store={},!r.getQueryStringValue(t.ShowAllQueryParam))try{_.extend(this.store,JSON.parse(e))}catch(e){}this.loadedDeferred.resolve({})}},t.prototype.onReady=function(e){this.store?e():this.loadedDeferred.promise.then((function(){return e()}))},t.prototype.hasKey=function(e){return!!this.store&&(this.store.hasOwnProperty(e)&&this.store[e])},t.prototype.getKey=function(e){return this.store?this.store[e]:null},t.prototype.setKey=function(o,i,a){var n=this;if(this.store){this.store[o]=i;var s=JSON.stringify(this.store);if(this.jsonData!==s&&!r.getQueryStringValue(t.ShowAllQueryParam)){var d=e.common.httpService.powerbiRequestOptions(a.event,"SetGettingStartedStatus"),c=JSON.stringify(s);e.common.httpService.post(t.ServerURL,c,d).then((function(){n.jsonData=s,a.resolve()}),(function(){a.reject()}))}}},t.ServerURL="powerbi/metadata/user/gettingStartedStatus",t.IgnoreQueryParam="ignoreGettingStartedPopups",t.ShowAllQueryParam="showGettingStartedPopups",t})();t.TutorialDataStoreService=i})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e){return new r(e)}t.createWorkbookHttpService=o;var r=(function(){function t(e){this.syncService=e}return t.prototype.getWorkbooks=function(t){var o=e.common.httpService.powerbiRequestOptions(t,"GetWorkbooks");return e.common.httpService.get("powerbi/metadata/workbooks",o)},t.prototype.getWorkbook=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"GetWorkbook");return e.common.httpService.get("powerbi/metadata/workbooks/"+t+"/?packageId="+o,i)},t.prototype.renameWorkbook=function(t,o,r){var i=e.common.httpService.powerbiRequestOptions(r,"RenameWorkbook");return e.common.httpService.post("powerbi/metadata/workbooks/"+t.id+"/name",JSON.stringify(o),i)},t.prototype.deleteWorkbook=function(t,o){var r=e.common.httpService.powerbiRequestOptions(o,"DeleteWorkbook");return e.common.httpService.delete("powerbi/content/workbooks/"+t.id+"/?packageId="+t.packageId,r)},t.prototype.getWorkbookWopiData=function(t,o){var r=e.common.httpService.powerbiRequestOptions(o,"WopiWorkbook");return e.common.httpService.post("powerbi/metadata/workbooks/wopiaccessinfo",JSON.stringify(t),r)},t})()})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e,t,o,i,a,n,s){return new r(e,t,o,i,a,n,s)}t.createAppMetadataService=o;var r=(function(){function o(e,t,o,r,i,a,n){this.rootScope=e,this.promiseFactory=t,this.resourcePackagesService=o,this.resourcePackageGateService=r,this.visualPluginService=i,this.telemetryService=a,this.editableFeatureSwitchService=n,this.gettingAppMetadata=!1,this.getAppMetadataDeferred=this.promiseFactory.defer()}return o.prototype.getAppMetadata=function(){var e=this;if(!this.gettingAppMetadata)if(window.initialDashboardContainer)if(window.initialDashboardContainer===t.constants.initialDashboardContainerLoadingState){this.gettingAppMetadata=!0;var o=this.rootScope.$on(t.constants.initialDashboardContainerReadyEventName,(function(){e.editableFeatureSwitchService.registerFeatureSwitches(window.initialDashboardContainer.featureSwitches),e.importResourcePackages(window.initialDashboardContainer.resourcePackages).finally((function(){e.getAppMetadataDeferred.resolve(window.initialDashboardContainer),e.gettingAppMetadata=!1,o()}))}))}else window.initialDashboardContainer!==t.constants.initialDashboardContainerErrorState?(this.editableFeatureSwitchService.registerFeatureSwitches(window.initialDashboardContainer.featureSwitches),this.importResourcePackages(window.initialDashboardContainer.resourcePackages).finally((function(){e.getAppMetadataDeferred.resolve(window.initialDashboardContainer)}))):this.getAppMetadataDeferred.reject();else this.getAppMetadataDeferred.reject();return this.getAppMetadataDeferred.promise},o.prototype.importResourcePackages=function(t){var o=this;if(this.importResourcePackagesDeferred)return this.importResourcePackagesDeferred.promise;this.importResourcePackagesDeferred=this.promiseFactory.defer();var r=window.initialDashboardContainer.activeDashboardId;if(_.isEmpty(t))this.importResourcePackagesDeferred.resolve(null),window.initialDashboardContainer&&r&&this.telemetryService.logEvent(e.telemetry.DashboardImportResourcePackagesOnLoad,r.toString(),0);else{var i;window.initialDashboardContainer&&r&&(i=this.telemetryService.startEvent(e.telemetry.DashboardImportResourcePackagesOnLoad,window.initialDashboardContainer.activeDashboardId.toString(),t.length));var a=_.map(t,(function(e){return e.id.toString()}));this.resourcePackageGateService.shouldShowWarning(a,r.toString())?(this.importResourcePackagesDeferred.resolve(null),i&&i.resolve()):(this.resourcePackagesService.registerPackages(t),this.visualPluginService.ensurePlugins(t,!1).catch((function(){i&&i.reject()})).finally((function(){i&&i.resolve(),o.importResourcePackagesDeferred.resolve(null)})))}return this.importResourcePackagesDeferred.promise},o})()})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(){return new i}var r=e.common.contracts.ContentProviderCategory;t.createAppCollectionService=o;var i=(function(){function e(){this.apps=[]}return e.prototype.findServiceContentProvider=function(e){return _.find(this.apps,(function(t){return t.providerId===e&&(t.category===r.ServiceApp||t.category===r.Services)}))},e.prototype.findOrganizationalContentProvider=function(e){return _.find(this.apps,(function(t){return t.providerId===e&&(t.category===r.Organizational||t.category===r.OrganizationalApp||t.category===r.OrganizationalTemplate||t.category===r.OrganizationalTemplateApp)}))},e.prototype.findContentProviderByKey=function(e){if(null!=e)return _.find(this.apps,(function(t){return t.providerKey===e}))},e})()})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e,t,o,r,a,n,s,d,c){return new i(e,t,o,r,a,n,s,d,c)}var r=e.common.contracts.ContentProviderCategory;t.createAppService=o;var i=(function(){function t(e,t,o,r,i,a,n,s,d){var c=this;this.appMetadataService=e,this.dashboardDataService=t,this.appCollectionService=o,this.modelService=r,this.reportService=i,this.workbookService=a,this.promiseFactory=n,this.dataServiceModelConverter=s,this.inFlightAppRequests={},this.appsInitializationDeferred=n.defer(),this.apps=[],this.dashboardDataService.addOrphanDashboardHandler(this),this.promiseFactory.all([this.appMetadataService.getAppMetadata(),d.getFeatureSwitches()]).then((function(e){c.initializeAppCategories(d);var t=e[0];t&&t.apps&&c.updateAppsCollection(t.apps),c.appsInitializationDeferred.resolve(c)}),(function(){return c.appsInitializationDeferred.reject()}))}return Object.defineProperty(t.prototype,"apps",{get:function(){return this.appCollectionService.apps},set:function(e){this.appCollectionService.apps=e},enumerable:!0,configurable:!0}),t.prototype.getInstalledAppModel=function(e,t){var o=this.dashboardDataService.findDashboardsByPackageId(t)||[],r=this.modelService.findModelsByPackageId(t)||[],i=this.reportService.findReportsByPackageId(t)||[],a=this.workbookService.findWorkbooksByPackageId(t)||[],n=this.dataServiceModelConverter.convertInstalledAppModel(e,t);return n.dashboardIds=_.map(o,(function(e){return e.id})),n.reportIds=_.map(i,(function(e){return e.id})),n.workbookIds=_.map(a,(function(e){return e.id})),n.modelIds=_.map(r,(function(e){return e.id})),n},t.prototype.ensureAppsInitialization=function(){return this.appsInitializationDeferred.promise},t.prototype.getAppByCategory=function(e){return _.filter(this.apps,(function(t){return t.category===e}))},t.prototype.getAppByGUID=function(e){return _.find(this.apps,(function(t){return t.providerKey===e}))},t.prototype.getAppById=function(e){return _.find(this.apps,(function(t){return t.providerId===e}))},t.prototype.updateAppsCollection=function(e){var t=this;this.apps=_.filter(e,(function(e){return t.isAppContentProvider(e)}))||[]},t.prototype.appInstalled=function(e){var t=this,o=this.getAppById(e);if(o)return this.promiseFactory.resolve(o);var r=this.inFlightAppRequests[e];return r?r.promise:(r=this.inFlightAppRequests[e]=this.promiseFactory.defer(),this.getApp(e).then((function(i){var a=i&&i.data;if(a&&t.isAppContentProvider(a)){if(o=t.getAppById(e),!o&&(t.apps.push(a),!_.isEmpty(t.appsCollectionChangedHandlers)))for(var n=0,s=t.appsCollectionChangedHandlers;n<s.length;n++){var d=s[n];d.onAppInstalled(a)}r.resolve(o||a)}else r.reject()}),(function(e){return r.reject()})).finally((function(){delete t.inFlightAppRequests[e]})),r.promise)},t.prototype.appUninstalled=function(e){if(!_.isEmpty(this.apps)){var t=_.find(this.apps,(function(t){return t.providerId===e}));if(t&&(_.remove(this.apps,(function(t){return t.providerId===e})),!_.isEmpty(this.appsCollectionChangedHandlers)))for(var o=0,r=this.appsCollectionChangedHandlers;o<r.length;o++){var i=r[o];i.onAppUninstalled(t)}}},t.prototype.addAppsCollectionChangedHandler=function(e){this.appsCollectionChangedHandlers||(this.appsCollectionChangedHandlers=[]),this.appsCollectionChangedHandlers.push(e)},t.prototype.removeAppsCollectionChangedHandler=function(e){this.appsCollectionChangedHandlers&&_.remove(this.appsCollectionChangedHandlers,(function(t){return t===e}))},t.prototype.isInstalledApp=function(e){return null!=e&&!!this.getAppById(e)},t.prototype.isAppCategory=function(e){return _.contains(this.validAppCategories,e)},t.prototype.onOrphanDashboardAdded=function(e){var t=e.contentProviderId;this.isInstalledApp(t)||this.appInstalled(t)},t.prototype.isAppContentProvider=function(e){return!!e&&this.isAppCategory(e.category)},t.prototype.initializeAppCategories=function(e){this.validAppCategories=[],e.featureSwitches.appsEnabled&&this.validAppCategories.push(r.OrganizationalApp),e.featureSwitches.appTemplatesEnabled&&this.validAppCategories.push(r.OrganizationalTemplateApp)},t.prototype.getApp=function(t){var o=e.common.httpService.powerbiRequestOptions(null,"GetContentProvider");return e.common.httpService.get("/metadata/appmodel/contentprovider?id="+t,o)},t.prototype.deleteOrgApp=function(t,o){var r=e.common.httpService.powerbiRequestOptions(null,"DeleteContentPack");return r.enableTelemetry=!0,e.common.httpService.delete("/powerbi/content/providers/organization/"+t+"/?packageid="+o+"&uninstall=true",r)},t})()})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(){return new o}e.createDashboardCollectionService=t;var o=(function(){function e(){this.dashboards=[]}return e.prototype.getDashboardContracts=function(){return _.map(this.dashboards,(function(e){return e.contract}))},e.prototype.findDashboardContract=function(e){var t=this.getDashboardContracts();return _.find(t,(function(t){return t.id===e}))},e})()})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e,t,o,r,i,n,s){return new a(e,t,o,r,i,n,s)}var r=e.common.contracts.Permissions;t.createDashboardDataService=o;var i=3e3,a=(function(){function e(e,t,o,r,i,a,n){this.refreshStateListeners=[],this.InEditMobileLayoutMode=!1,this.dashboardCollectionService=a,this.isDashboardLoaded=!1,this.dashboardHttpService=e,this.promiseFactory=t,this.featureSwitchService=o,this.modelMerger=r,this.modelService=i,this.dashboardsDeferred=t.defer(),this.isQnaEnabled=!1,this.modelService.addModelUpdateListener(this),this.timeout=n,this.refreshState=0}return e.prototype.registerRefreshStateListener=function(e){_.contains(this.refreshStateListeners,e)||this.refreshStateListeners.push(e)},e.prototype.unregisterRefreshStateListener=function(e){_.remove(this.refreshStateListeners,e)},e.prototype.onDashboardTileRefreshStarted=function(e){this.activeDashboardId===e&&0===this.refreshState&&this.notify(1,e);
},e.prototype.onDashboardTileRefreshFinished=function(e){var t=this;this.activeDashboardId===e&&1===this.refreshState&&(this.notify(2,e),this.timeout((function(){return t.notify(0,e)}),i))},e.prototype.notify=function(e,t){this.refreshState=e;for(var o=0,r=this.refreshStateListeners;o<r.length;o++){var i=r[o];i.onStateChange(this.refreshState,t)}},Object.defineProperty(e.prototype,"dashboards",{get:function(){return this.dashboardCollectionService.dashboards},set:function(e){this.dashboardCollectionService.dashboards=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editableAndReshareableDashboards",{get:function(){var e=this.dashboards;return _.filter(e,(function(e){return(e.getPermissions()&r.Write)===r.Write&&(e.getPermissions()&r.ReShare)===r.ReShare}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeDashboard",{get:function(){return this.activeDashboardId===-1?null:this.findDashboard(this.activeDashboardId)},set:function(e){e?this.activeDashboardId=e.id:this.activeDashboardId=-1,this.refreshState=0,this.updateActiveDashboardModels()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeDashboardContainsQnaSupportedModel",{get:function(){return t.DashboardUtils.containsQnaSupportedModel(this.activeDashboardModels,this.modelService,this.featureSwitchService)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeDashboardIndex",{get:function(){return this.dashboards.indexOf(this.activeDashboard)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayName",{get:function(){return this.activeDashboard?this.activeDashboard.displayName:""},enumerable:!0,configurable:!0}),e.prototype.addDashboard=function(e){if(e){var t=this.getDashboardIndex(e.id);t<0&&(this.dashboards.push(e),this.notifyHandlerOnOrphanDashboardAdded(e.contract))}},e.prototype.addOrReplaceDashboard=function(e){var t=this.getDashboardIndex(e.id);t<0?(this.dashboards.push(e),this.notifyHandlerOnOrphanDashboardAdded(e.contract)):this.dashboards.splice(t,1,e)},e.prototype.deleteDashboardAtServerSide=function(e,t){var o=this.promiseFactory.defer(),r=this.dashboards.filter((function(t){return t.id===e}))[0];return r?this.dashboardHttpService.deleteDashboard(r.contract,t.event).then((function(){t.resolve(),o.resolve(null)}),(function(e){t.reject(),o.reject(e)})):o.reject(),o.promise},e.prototype.deleteDashboard=function(e){var t=this.getDashboardIndex(e);t>=0&&this.dashboards.splice(t,1)},e.prototype.deleteTile=function(e,t){var o=this,r=this.promiseFactory.defer(),i=this.findDashboard(e);return i?this.tryUpdateTile(i,t,(function(e,t){if(e>=0&&t>=0){var a=i.contract.tiles[e];i.contract.tiles.splice(e,1),i.tiles.splice(t,1),i.hasModel(a.modelId)||o.dashboardHttpService.addDashboardRequestToBatch(o.promiseFactory,i.id).done((function(e){o.modelMerger.mergeDashboardShallow(i,e.dashboards[0]),o.updateActiveDashboardModels(),r.resolve(null)})).fail((function(){r.reject()}))}else r.resolve(null)})):r.resolve(null),r.promise},e.prototype.dropDashboardfromMemoryIfNotActive=function(e){var t=this.activeDashboard;if(!t||t.id!==e){var o=this.findDashboard(e);return o&&(o.contract.tiles=null,o.isLoaded=!1),!0}return!1},e.prototype.findDashboard=function(e){return _.find(this.dashboards,(function(t){return t.id===e}))},e.prototype.findDashboardByGUID=function(e){for(var t=0,o=this.dashboards;t<o.length;t++){var r=o[t];if(r.objectId===e)return r}},e.prototype.findDashboardsByPackageId=function(e){var t=this.dashboards;if(t)return _.filter(t,(function(t){return!(!t.contract||!t.contract.originalPackageId)&&t.contract.originalPackageId===e}))},e.prototype.getDashboardIndex=function(e){for(var t=this.dashboards,o=0,r=t.length;o<r;o++)if(t[o].id===e)return o;return-1},e.prototype.registerDashboards=function(e){this.dashboards=e,this.isDashboardLoaded=!0},e.prototype.tryUpdateTile=function(e,t,o){if(e){var r=e.getTileContractIndex(t),i=e.getTileIndex(t);o(r,i),e.scheduleDelayedLayout(this.activeDashboard!==e)}},e.prototype.updateActiveDashboardModels=function(){this.activeDashboardModels=t.DashboardUtils.getDashboardModels(this.activeDashboard,this.modelService.getModelContracts()),this.updateIsQnaEnabled()},e.prototype.updateIsQnaEnabled=function(){this.activeDashboard?"undefined"!=typeof this.activeDashboard.qnaEnabled?this.isQnaEnabled=this.activeDashboard.qnaEnabled:this.isQnaEnabled=this.activeDashboardContainsQnaSupportedModel:this.isQnaEnabled=!1},e.prototype.onModelUpdated=function(e,t){var o=this.modelService.findModel(e,t);o&&this.updateActiveDashboardModels()},e.prototype.getDashboards=function(){var e=this;return this.dashboardsDeferred.promise.then((function(){return e.dashboards}))},e.prototype.resolveDashboardDeferred=function(){this.dashboardsDeferred.resolve(this)},e.prototype.rejectDashboardDeferred=function(){this.dashboardsDeferred.reject()},e.prototype.addOrphanDashboardHandler=function(e){this.orphanDashboardHandlers||(this.orphanDashboardHandlers=[]),this.orphanDashboardHandlers.push(e)},e.prototype.notifyHandlerOnOrphanDashboardAdded=function(e){if(e&&null!=e.contentProviderId&&_.isEmpty(e.reportIds)&&_.isEmpty(e.modelIds)){if(_.isEmpty(this.orphanDashboardHandlers))return;for(var t=0,o=this.orphanDashboardHandlers;t<o.length;t++){var r=o[t];r.onOrphanDashboardAdded(e)}}},e})();t.DashboardDataService=a})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e,t,o,r,a,n,s,d,c,l,p,u,h,m,f,v,g){return new i(e,t,o,r,a,n,s,d,c,l,p,u,h,m,f,v,g)}var r=e.common.contracts.Permissions;t.createDashboarSyncService=o;var i=(function(){function o(e,t,o,r,i,a,n,s,d,c,l,p,u,h,m,f,v){this.rootScope=e,this.dashboardDataService=t,this.dashboardHttpService=o,this.modelConverter=r,this.modelMerger=i,this.modelService=a,this.reportService=s,this.promiseFactory=n,this.resourcePackageGateService=d,this.resourcePackageListenerService=c,this.resourcePackagesService=l,this.syncService=p,this.telemetryService=u,this.tutorialDataStore=h,this.userInfo=m,this.workbookService=f,this.permissionService=v,this.syncService.addDashboardRefreshListener(this)}return o.prototype.onTilesAddedOrUpdated=function(e,t){var o=this;if(!this.dashboardDataService.dropDashboardfromMemoryIfNotActive(e)){if(this.dashboardDataService.selectedDashboardTile){0===t.length&&(t=this.dashboardDataService.activeDashboard.tiles.map((function(e){return e.id})));var r=t.indexOf(this.dashboardDataService.selectedDashboardTile.tileModel.id);if(r>=0&&(t.splice(r,1),0===t.length))return}this.dashboardHttpService.batchGetTiles(e,t,void 0).then((function(t){var r=t.data;if(!_.isEmpty(r))for(var i=0,a=r.length;i<a;++i){var n=r[i];o.registerAndUpdateTile(e,n)}}))}},o.prototype.onTileDeleted=function(e,t){this.dashboardDataService.dropDashboardfromMemoryIfNotActive(e)||this.dashboardDataService.deleteTile(e,t)},o.prototype.onDashboardAdded=function(e){this.addOrDeepEditDashboard(e)},o.prototype.onDashboardDeleted=function(e){this.beforeDashboardDeleting&&this.beforeDashboardDeleting(e),this.dashboardDataService.deleteDashboard(e),this.afterDashboardDeleting&&this.afterDashboardDeleting(e)},o.prototype.onDashboardShallowEdit=function(o){var r=this,i=this.dashboardDataService.findDashboard(o);i&&this.dashboardHttpService.addDashboardRequestToBatch(this.promiseFactory,o,e.common.DashboardRequestType.Metadata).done((function(e){var o=e.dashboards[0],a=o.isHidden&&!i.isHidden;r.modelMerger.mergeDashboardShallow(i,o),a&&r.dashboardDataService.deleteDashboard(i.id),r.rootScope.$emit(t.constants.onDashboardShallowEditEventName,i,o)}))},o.prototype.onDashboardDeepEdit=function(e){this.dashboardDataService.dropDashboardfromMemoryIfNotActive(e)||this.addOrDeepEditDashboard(e)},o.prototype.onDashboardTileDataChange=function(e){this.onTilesAddedOrUpdated(e,[]),this.dashboardDataService.onDashboardTileRefreshFinished(e)},o.prototype.onClearBatchedDashboardRequests=function(){this.dashboardHttpService.batchedDashboardRequests=[]},o.prototype.addOrDeepEditDashboard=function(o){var r=this,i=this.telemetryService.startEvent(e.telemetry.DashboardAddUpdateDashboard);this.dashboardHttpService.addDashboardRequestToBatch(this.promiseFactory,o).done((function(e){r.addOrUpdateDashboard(e),r.rootScope.$emit(t.constants.updateDashboardContainerEventName,[e]),r.dashboardDataService.onDashboardTileRefreshFinished(o),i.resolve()})).fail((function(){i.reject()}))},o.prototype.addOrUpdateCustomVisualTile=function(e,o,r,i){var a=this;this.isResourcePackageInCache(e)?this.addOrUpdateTile(o,r,this.modelService.getModelContracts()):this.resourcePackageListenerService.getAndLoadVisualPlugin(e).then((function(){a.addOrUpdateTile(o,r,a.modelService.getModelContracts()),i&&(a.resourcePackageGateService.resetResourceFlag(),a.rootScope.$emit(t.constants.shouldShowEnableCustomVisualsDialog))}))},o.prototype.addOrUpdateDashboard=function(e){var o=e.dashboards[0],r=this.modelConverter.convertDashboard(o,e.models,e.reports),i=this.dashboardDataService.getDashboardIndex(o.id),a=!1;if(this.modelConverter.fillDashboardChildren(r,e.models,e.reports,this.workbookService.getWorkbookContracts()),i>=0){var n=this.dashboardDataService.dashboards[i];this.modelMerger.mergeDashboard(n,o,e.models,e.reports);for(var s=n.tiles.length,d=0;d<s;d++){var c=n.tiles[d];c.invalidateLayout()}}else this.dashboardDataService.addDashboard(r),r.isNew=!0,r.isNotified=!1,r.isLoaded=!0,a=!0,this.markUnseenSharedDashboardsAsNew();this.rootScope.$emit(t.constants.addOrUpdateDashboardEventName,e,a),this.dashboardDataService.onDashboardTileRefreshFinished(r.id)},o.prototype.addOrUpdateTile=function(e,t,o){var r=this;e&&(o=o||[],this.updateModelsIfRequired(e,t),this.dashboardDataService.tryUpdateTile(e,t.id,(function(i,a){var n=r.reportService.findReport(t.reportId),s=null;i>=0?(e.contract.tiles[i]=t,a>=0&&(s=e.tiles[a],r.modelMerger.mergeTile(s,t,o,null,r.workbookService.getWorkbookContracts(),r.reportService.reports))):(!n&&t.reportId&&(n=r.modelConverter.convertReport({id:t.reportId}),r.reportService.addReport(n)),s=r.modelConverter.convertTile(t,o,null,r.workbookService.getWorkbookContracts()),e.contract.tiles.push(t),e.tiles.push(s)),s&&(s.invalidateLayout(),n&&(s.report=n))})))},o.prototype.markUnseenSharedDashboardsAsNew=function(){var o,i=this.userInfo.uoid,a=this.dashboardDataService.dashboards,n={},s=[],d=0;o=this.tutorialDataStore.getKey(t.constants.seenDashboardsStorageKey),o=o||{};for(var c=o[i],l=n[i]={},p=0,u=a;p<u.length;p++){var h=u[p],m=this.permissionService.getDashboardEffectivePermissions(h.id);if((m===r.Read||m===r.ReadReshare)&&(l[h.objectId]=!0,d++,c&&!c[h.objectId])){s.push(h);var f=this.dashboardDataService.activeDashboard;f&&f.objectId!==h.objectId&&(h.isNew=!0)}}n=_.merge(o,n);var v=this.telemetryService.startEvent(e.telemetry.DashboardSharingNewUnseenDashboards,s.length,d,a.length);this.tutorialDataStore.setKey(t.constants.seenDashboardsStorageKey,n,v)},o.prototype.registerAndUpdateTile=function(e,t){var o=this.dashboardDataService.findDashboard(e),r=$.map(t.resourcePackageIds,(function(e){return e.toString()})),i=this.resourcePackageGateService.shouldShowWarning(r,this.dashboardDataService.activeDashboard.objectId);if(t.resourcePackageIds&&t.resourcePackageIds.length>0)for(var a=t.resourcePackageIds.length,n=0;n<a;++n)this.addOrUpdateCustomVisualTile(t.resourcePackageIds[n],o,t,i);else this.addOrUpdateTile(o,t,this.modelService.getModelContracts())},o.prototype.updateModelsIfRequired=function(e,o){var r=this,i=e.getTileContractIndex(o.id),a=i!==-1&&o.publishState===t.contracts.TilePublishState.Completed&&e.contract.tiles[i].publishState===t.contracts.TilePublishState.InProgress;!a&&e.hasModel(o.modelId)||this.dashboardHttpService.addDashboardRequestToBatch(this.promiseFactory,e.id).done((function(o){a&&(r.modelMerger.mergeDashboardTiles(e,o),r.rootScope.$emit(t.constants.mergeDashboardContainerModelsReportsAndPackagesEventName,o),r.modelMerger.mergeModelContentProviderId(o.models,o.packages)),r.modelMerger.mergeDashboardShallow(e,o.dashboards[0]),r.dashboardDataService.updateActiveDashboardModels()}))},o.prototype.isResourcePackageInCache=function(e){var t=this.resourcePackagesService.getAllPackages();return _.some(t,(function(t){return t.id===e}))},o})();t.DashboardSyncService=i})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e,t,o,i,a){return new r(e,t,o,i,a)}t.createHostAppMetadataService=o;var r=(function(){function t(e,t,o,r,i){this.promiseFactory=e,this.telemetryService=t,this.eventFactory=o,this.errorCallback=r,this.getAppMetadataDeferred=this.promiseFactory.defer(),this.requestAppMetadata(i)}return t.prototype.getAppMetadata=function(){return this.getAppMetadataDeferred.promise},t.prototype.requestAppMetadata=function(o){var r=this,i=this.telemetryService.startEvent(this.eventFactory),a=e.common.httpService.powerbiRequestOptions(i.event,"DashboardHostGetAppMetadata",{isAdminRequest:o});e.common.httpService.get("powerbi/metadata/app",a).then((function(e){var t=e.data;window.initialDashboardContainer=t,r.getAppMetadataDeferred.resolve(t),i.resolve()}),(function(o){r.getAppMetadataDeferred.reject(null),i.reject(e.errorDetailsHelper.getTelemetryErrorDetails(o.error,o.status)),r.errorCallback&&r.errorCallback(t.pageRefreshErrorMessage)}))},t.pageRefreshErrorMessage="GetAppMetadataRequestFailed",t})()})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(){return new o}e.createPackageCollectionService=t;var o=(function(){function e(){this.packages=[]}return e.prototype.getPackageContracts=function(){return _.map(this.packages,(function(e){return e.contract}))},e.prototype.findPackageContract=function(e){var t=this.getPackageContracts();return _.find(t,(function(t){return t.id===e}))},e})()})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e,t,o,r,i,a,n,d,c,l,p,u,h,m,f){return new s(e,t,o,r,i,a,n,d,c,l,p,u,h,m,f)}var r=t.models.ContentPackItems,i=e.common.contracts.ContentProviderCategory,a=e.common.contracts.PublishOrRefreshStatus,n=e.common.contracts.StorageProviderType;t.createPackageService=o;var s=(function(){function o(e,t,o,r,i,a,n,s,d,c,l,p,u,h,m){this.rootScope=e,this.telemetryService=t,this.errorService=o,this.modelMerger=r,this.modelConverter=i,this.reportService=a,this.modelService=n,this.syncService=s,this.localizationService=d,this.appMetadataService=c,this.workbookService=l,this.appService=p,this.packageCollectionService=u,this.permissionService=h,this.promiseFactory=m,this.initPackages(),this.syncService.addPackageRefreshListener(this)}return o.prototype.ensurePackagesInitialization=function(){return this.packagesInitializationDeferred.promise},Object.defineProperty(o.prototype,"packages",{get:function(){return this.packageCollectionService.packages},set:function(e){this.packageCollectionService.packages=e},enumerable:!0,configurable:!0}),o.prototype.findPackage=function(e){return _.find(this.packages,(function(t){return t.id===e}))},o.prototype.getWorkbookStorageProvider=function(e){var t=this.findPackage(e);return t&&t.contract?t.contract.storageProviderType:null},o.prototype.getWorkbookContentProvider=function(e){var t=this.findPackage(e);return t?t.contentProviderId:null},o.prototype.getOrgAppPackage=function(e){return _.find(this.packages,(function(t){return t.contract&&t.contract.contentProviderRefId===e}))},o.prototype.isLocalWorkbook=function(e){var t=this.findPackage(e);return t&&t.contract&&t.contract.storageProviderType===n.Local},o.prototype.getPackagesByProviderId=function(e,t){switch(t){case i.BuiltIn:return _.filter(this.packages,(function(t){return t.contract.contentProviderId===e}));case i.OrganizationalApp:case i.OrganizationalTemplate:case i.OrganizationalTemplateApp:return _.filter(this.packages,(function(t){return t.contract.contentProviderRefId===e}));case i.ServiceApp:case i.Services:return _.filter(this.packages,(function(t){return t.contract.serviceContentProviderId===e}))}},o.prototype.isRefreshNowEnabledForWorkbook=function(e){if(!e)return!1;if(!e.isOwner())return!1;var t=this.findPackage(e.packageId);return!(!t||!t.contract)},o.prototype.isScheduleRefreshEnabledForWorkbook=function(e){return!(!e||!e.contract)&&(!!this.isRefreshNowEnabledForWorkbook(e)&&(void 0!==e.modelId&&!!e.contract.isPowerPivotVersionSupportsRefresh))},o.prototype.initPackages=function(){var e=this;this.packagesInitializationDeferred=this.promiseFactory.defer(),this.appMetadataService.getAppMetadata().then((function(t){e.loadPackages(t),e.packagesInitializationDeferred.resolve(e)}),(function(){return e.packagesInitializationDeferred.reject()}))},o.prototype.loadPackages=function(e){e&&e.packages&&this.updatePackageCollection(e.packages)},o.prototype.updatePackageCollection=function(e){if(this.packages=[],!_.isEmpty(e))for(var t=0,o=e.length;t<o;++t)this.packages.push(this.modelConverter.convertPackage(e[t]))},o.prototype.mergePackageCollection=function(e){if(!_.isEmpty(e)){for(var t=0,o=e.length;t<o;++t)this.packages.push(this.modelConverter.convertPackage(e[t]));this.packages=_.unique(this.packages,!1,(function(e){return e.id}))}},o.prototype.deletePackage=function(e){var t=this.getPackageIndex(e);if(t>=0){var o=this.findPackage(e);o.contract.reports&&this.reportService.deleteReportForPackage(e),null!=o.contract.contentProviderRefId&&this.appService.appUninstalled(o.contract.contentProviderRefId),this.modelService.deleteModelForPackage(e),this.workbookService.deleteWorkbookForPackage(e),this.packages.splice(t,1)}},o.prototype.getPackageIndex=function(e){if(this.packages.length>0)for(var t=0,o=this.packages.length;t<o;t++){var r=this.packages[t];if(r.id===e)return t}return-1},o.prototype.updatePackage=function(e){if(e&&e.id){var o=this.findPackage(e.id);o?this.modelMerger.mergePackage(o,e):(o=this.modelConverter.convertPackage(e),this.packages.push(o)),o.hasUpdate()&&this.rootScope.$emit(t.constants.packageVersionChange,e.id)}},o.prototype.onPackagePublishRefreshCompleted=function(o){var r=this,i=this.telemetryService.startEvent(e.telemetry.DashboardGetNavigationPanePackage);t.packageHttpService.getPackage(o,i.event).then((function(t){var n=t.data;if(n.models)for(var s=0,d=n.models.length;s<d;s++){var c=n.models[s],l=r.modelService.findModel(c.id,o);l?r.updateExistingModel(l,c,n.publishOrRefreshStatus):r.modelService.onModelAdded(c.id,o)}if(n.reports)for(var s=0,p=n.reports.length;s<p;s++){var u=n.reports[s],h=r.reportService.updateReport(u);h?h.packagePublishStatus=n.publishOrRefreshStatus:r.reportService.addContractReport(u)}if(n.workbooks)for(var s=0,m=n.workbooks.length;s<m;s++){var f=n.workbooks[s],v=r.workbookService.updateWorkbook(f.id);v||r.workbookService.onWorkbookAdded(f.id,o)}null!=n.contentProviderRefId&&r.appService.appInstalled(n.contentProviderRefId),r.updatePackage(n),n.publishOrRefreshStatus===a.FinishedSuccessfully&&r.rootScope.$emit(e.dataServices.constants.packagePublishedSuccessfullyEventName,n.id),i.resolve()}),(function(){i.reject()}))},o.prototype.onPackagePublishEdit=function(o){var i=this,n=this.telemetryService,s=n.startEvent(e.telemetry.DashboardGetNavigationPanePackage);t.packageHttpService.getPackage(o,s.event).then((function(n){var d=n.data,c=!1,l=0;if(d.models)for(var p=0,u=d.models.length;p<u;p++){var h=d.models[p],m=i.modelService.findModel(h.id,o);m&&i.updateExistingModel(m,h,d.publishOrRefreshStatus)}if(d.reports)for(var p=0,f=d.reports.length;p<f;p++){var v=d.reports[p],g=i.reportService.findReport(v.id);g&&g.packageVersion!==v.packageVersion&&g.isUsedByContentPack&&(c=!0,l=v.id);var y=i.reportService.updateReport(v);y&&(y.modelId=v.modelId,y.model=i.modelService.findModel(v.modelId,o),y.packagePublishStatus=d.publishOrRefreshStatus)}if(d.workbooks)for(var p=0,b=d.workbooks.length;p<b;p++){var S=d.workbooks[p];i.workbookService.updateWorkbook(S.id)}var k=i.findPackage(d.id),D=k?k.publishOrRefreshStatus:null;i.updatePackage(d),D!==a.FinishedSuccessfully&&d.publishOrRefreshStatus===a.FinishedSuccessfully&&i.rootScope.$emit(e.dataServices.constants.packagePublishedSuccessfullyEventName,d.id),d.publishOrRefreshStatus===a.PublishError&&i.deletePackageOnPublishFailure(n),c&&(i.rootScope.$emit(t.constants.contentPackDirtyShowNotification,l,r.Report),c=!1),s.resolve()}),(function(){s.reject()}))},o.prototype.updateExistingModel=function(e,t,o){e.dbName=t.dbName,e.vsName=t.vsName,e.contract.packagePublishStatus=o,e.packagePublishStatus=o},o.prototype.onPackageDeleted=function(e){this.deletePackage(e)},o.prototype.deletePackageOnPublishFailure=function(e){var t=this,o=this.localizationService.get("NavigationPane_PackagePublishErrorTitle"),r=this.localizationService.get("NavigationPane_PackagePublishErrorContent"),i={label:this.localizationService.get("ModalDialogButtonText_Delete"),resultValue:"delete",cssClass:"primary"},a={label:this.localizationService.get("ModalDialogButtonText_Cancel"),resultValue:"cancel"},n=[i,a],s=function(o){if("delete"===o)for(var r=e.data.models.length,i=0;i<r;i++)t.modelService.deleteModel(e.data.models[i].id)};this.errorService.error(r,"deletePackageOnPublishFailure",{title:o,dialogOptions:n,dismissCallback:s,isDismissable:!0,showAdditionalErrorInfo:!0,requestId:e?e.requestId:"",statusCode:e?e.status.toString():""})},o})();t.PackageService=s})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e,t,o,r,i,n,s,d,c){return new a(e,t,o,r,i,n,s,d,c)}var r=jsCommon.EnumExtensions,i=e.common.contracts.Permissions;t.createPermissionService=o;var a=(function(){function o(e,t,o,r,i,a,n,s,d){this.activeGroupIdService=e,this.impersonationService=t,this.appCollectionService=o,this.packageCollectionService=r,this.modelCollectionService=i,this.reportCollectionService=a,this.workbookCollectionService=n,this.dashboardCollectionService=s,this.telemetryService=d,this.errorsLogged={}}return Object.defineProperty(o.prototype,"activeWorkSpacePermission",{get:function(){return this.activeGroupIdService.isReadOnly?i.Read:i.All},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isActiveWorkspaceIsReadOnly",{get:function(){return this.impersonationService.impersonating||!r.hasFlag(this.activeWorkSpacePermission,i.Write)},enumerable:!0,configurable:!0}),o.prototype.isGroupWorkspaceReadOnly=function(e,t){var o=e&&!t?i.Read:i.All;return!r.hasFlag(o,i.Write)},o.prototype.getReportEffectivePermissions=function(e){var o=this.reportCollectionService.findReportContract(e),r=o&&o.permissions;return null==r?this.logErrorIfItemNotFoundForType("report",e):o&&o.packageId&&(t.PermissionsUtils.markArtifactsAsCopyableIfPartOfTemplatePackage(null,[e],null,o.packageId,this.modelCollectionService,this.reportCollectionService,this.dashboardCollectionService,this.packageCollectionService,this.appCollectionService),r=o&&o.permissions),r},o.prototype.getModelEffectivePermissions=function(e,t){var o=this.modelCollectionService.findModelContract(e,t),r=o&&o.permissions;return null==r&&this.logErrorIfItemNotFoundForType("model",e,t),r},o.prototype.getDashboardEffectivePermissions=function(e){var o=this.dashboardCollectionService.findDashboardContract(e),r=o&&o.permissions;return null==r?this.logErrorIfItemNotFoundForType("dashboard",e):o&&o.packageIds&&1===o.packageIds.length&&(t.PermissionsUtils.markArtifactsAsCopyableIfPartOfTemplatePackage([e],null,null,o.packageIds[0],this.modelCollectionService,this.reportCollectionService,this.dashboardCollectionService,this.packageCollectionService,this.appCollectionService),r=o&&o.permissions),r},o.prototype.getWorkbookEffectivePermissions=function(e){var t=this.workbookCollectionService.findWorkbookContract(e),o=t&&t.permissions;return null==o&&this.logErrorIfItemNotFoundForType("workbook",e),o},o.prototype.getPackageEffectivePermissions=function(e){var t=this.packageCollectionService.findPackageContract(e),o=t&&t.permissions;return null==o&&this.logErrorIfItemNotFoundForType("package",e,e),o},o.prototype.logErrorIfItemNotFoundForType=function(t,o,r){this.errorsLogged[t]||(this.errorsLogged[t]=!0,this.telemetryService.logEvent(e.telemetry.PermissionsObjectNotFound,o,r,t))},o})()})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e,t,o){return new r(e,t,o)}t.createResourcePackageListenerService=o;var r=(function(){function t(e,t,o){this.resourcePackageService=e,this.promiseFactory=t,this.visualPluginService=o}return t.prototype.onResourcePackageAdded=function(e){return this.getAndLoadVisualPlugin(e)},t.prototype.getResourcePackageByResourceId=function(t){var o=e.common.httpService.powerbiRequestOptions(null,"GetResourcePackageByResourceId");return e.common.httpService.post("/powerbi/metadata/resourcePackage",[t],o)},t.prototype.getAndLoadVisualPlugin=function(e){var t=this,o=this.promiseFactory.defer(),r=this.resourcePackageService.getPackageById(e);return r?o.resolve([r]):this.getResourcePackageByResourceId(e).then((function(r){var i=t.resourcePackageService.getPackageById(e);i?o.resolve([i]):(t.resourcePackageService.registerPackages(r.data),t.visualPluginService.ensurePlugins(r.data).then((function(){o.resolve(r.data)}),(function(){o.reject()})))}),(function(e){o.reject()})),o.promise},t.prototype.getAndLoadVisualPluginsForDashboard=function(e){var t=this.getAllRequiredResourcePackageIds(e);return this.loadRequiredResourcePackagesAndVisualPlugins(t)},t.prototype.getAllRequiredResourcePackageIds=function(e){var t=[];if(e&&e.tiles)for(var o=0,r=e.tiles;o<r.length;o++){var i=r[o],a=i.contract.resourcePackageIds;if(a)for(var n=0,s=a;n<s.length;n++){var d=s[n];t.push(d)}}return _(t).unique().value()},t.prototype.getAllRequiredResourcePackageIdStrings=function(e){var t=this.getAllRequiredResourcePackageIds(e);return $.map(t,(function(e){return e.toString()}))},t.prototype.loadRequiredResourcePackagesAndVisualPlugins=function(e){for(var t=this.promiseFactory.defer(),o=[],r=0,i=e;r<i.length;r++){var a=i[r];o.push(this.getAndLoadVisualPlugin(a))}return this.promiseFactory.all(o).then((function(){t.resolve(null)}),(function(){t.reject()})),t.promise},t})();t.ResourcePackageListenerService=r})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e,t,o,r,i,n,s,d,c,l,p,u){return new a(e,t,o,r,i,n,s,d,c,l,p,u)}var r=jsCommon.EnumExtensions,i=e.common.contracts.Permissions;t.createReportService=o;var a=(function(){function o(e,t,o,r,i,a,n,s,d,c,l,p){this.rootScope=e,this.telemetryService=t,this.errorService=o,this.modelMerger=r,this.modelConverter=i,this.syncService=a,this.reportHttpService=n,this.localizationService=s,this.appMetadataService=d,this.promiseFactory=c,this.reportCollectionService=l,this.permissionService=p,this.reportsDeferred=c.defer(),this.syncService.addReportRefreshListener(this),this.initReports()}return o.prototype.ensureReportsInitialization=function(){return this.reportsDeferred.promise},Object.defineProperty(o.prototype,"reports",{get:function(){return this.reportCollectionService.reports},set:function(e){this.reportCollectionService.reports=e},enumerable:!0,configurable:!0}),o.prototype.getReports=function(){return this.reportsDeferred.promise.then((function(e){return e.reports}))},o.prototype.onReportAdded=function(e){var t=this,o=this.findReport(e);o&&!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(o.displayName)||this.reportHttpService.getReport(e,this.telemetryService.root).then((function(r){var a=r.data;if((a.permissions&i.Write)===i.Write||(a.permissions&i.CopyOnWrite)===i.CopyOnWrite)if(o=t.findReport(e))t.modelMerger.mergeReport(o,a);else{var n=t.modelConverter.convertReport(a);n.isNew=!0,t.reports.push(n)}}),(function(){}))},o.prototype.onReportDeleted=function(e){if(0!==this.reports.length){var t=this.getReportIndex(e);t>=0&&this.reports.splice(t,1)}},o.prototype.onReportSlideThumbnailEdit=function(e){},o.prototype.onReportUpdated=function(t){var o=this;if(!(this.reports.length<0)){var r=this.findReport(t);r&&this.reportHttpService.getReport(t,this.telemetryService.root).then((function(i){o.modelMerger.mergeReport(r,i.data),o.rootScope.$emit(e.common.constants.currentActiveReportInfoChangedEventName,{id:t,displayName:r.displayName,guid:r.objectId})}),_.noop)}},o.prototype.retrieveReportForApp=function(e,t){if(null!=e&&!_.isEmpty(t))return _.find(this.reports,(function(o){return o.packageId===e&&o.contract.originalReportObjectId===t}))},o.prototype.updateReportCollection=function(e){if(this.reports=[],!_.isEmpty(e))for(var t=0,o=e.length;t<o;++t)this.reports.push(this.modelConverter.convertReport(e[t]))},o.prototype.mergeReportCollection=function(e){if(!_.isEmpty(e))for(var t=_.indexBy(this.reports,"id"),o=0,r=e;o<r.length;o++){var i=r[o];t[i.id]||this.reports.push(this.modelConverter.convertReport(i))}},o.prototype.updateReport=function(e){var t=this.findReport(e.id);return t&&this.modelMerger.mergeReport(t,e),t},o.prototype.getReportContracts=function(){return this.reportCollectionService.getReportContracts()},Object.defineProperty(o.prototype,"editableReports",{get:function(){var e=this.permissionService;return _.filter(this.reports,(function(t){var o=e.getReportEffectivePermissions(t.id);return r.hasFlag(o,i.Write|i.ReShare)}))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"copyAndEditReports",{get:function(){var e=this.permissionService;return _.filter(this.reports,(function(t){var o=e.getReportEffectivePermissions(t.id);return r.hasFlag(o,i.Write)||r.hasFlag(o,i.CopyOnWrite)}))},enumerable:!0,configurable:!0}),o.prototype.deleteReportsForModel=function(e,t){for(var o=_.filter(this.reports,(function(o){return o.modelId===e&&o.packageId===t})),r=0,i=o.length;r<i;++r)this.onReportDeleted(o[r].id);return o},o.prototype.deleteReportForPackage=function(e){for(var t=_.filter(this.reports,(function(t){return t.packageId===e})),o=0,r=t.length;o<r;++o)this.onReportDeleted(t[o].id)},o.prototype.addContractReport=function(e){if(e&&null!=e.id){var t=this.modelConverter.convertReport(e),o=this.getReportIndex(e.id);o<0&&(t.isNew=!0,this.addReport(t))}},o.prototype.addReport=function(e){if(e&&null!=e.id){var t=this.getReportIndex(e.id);t<0&&this.reports.push(e)}},o.prototype.deleteReport=function(e){this.deleteReportInternal(e)},o.prototype.getReportIndex=function(e){if(null!=e&&this.reports.length>0)for(var t=0,o=this.reports.length;t<o;t++){var r=this.reports[t];if(r.id===e)return t}return-1},o.prototype.findReport=function(e){return null!=e?_.find(this.reports,(function(t){return t.id===e})):null},o.prototype.findReportByGUID=function(e){return null!=e?_.find(this.reports,(function(t){return t.objectId===e})):null},o.prototype.findReportByOriginalReportId=function(e){return null!=e?_.find(this.reports,(function(t){return t.contract.originalReportId===e})):null},o.prototype.findReportsByPackageId=function(e){return _.filter(this.reports,(function(t){return t.packageId===e}))},o.prototype.renameReport=function(o,r){var i=this;if(this.isReportNameValid(o)){var a=this.findReport(r);if(!a)return;var n=a.contract.displayName;if(n!==o){var s=this.telemetryService.startEvent(e.telemetry.DashboardRenameReport);a.displayName=o,this.reportHttpService.renameReport(a,o,s.event).then((function(){s.resolve(),a&&a.isUsedByContentPack&&i.rootScope.$emit(t.constants.contentPackDirtyShowNotification,a.id,t.models.ContentPackItems.Report),i.rootScope.$emit(e.common.constants.currentActiveReportInfoChangedEventName,{id:r,displayName:a.displayName,guid:a.objectId})}),(function(t){t.status===e.HttpStatusCode.Unauthorized?i.errorService.error(i.localizationService.get("Report_NoPermissionToRenameMessage"),"Report_NoPermissionToRename",{requestId:t.requestId,statusCode:t.status.toString()}):i.errorService.error(i.localizationService.get("Report_FailToRenameReportMessage"),"Report_FailToRenameReport",{requestId:t.requestId,statusCode:t.status.toString()}),a.displayName=n,s.reject()}))}}},o.prototype.isReportNameValid=function(e){
return!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(e)},o.prototype.initReports=function(){var e=this;this.appMetadataService.getAppMetadata().then((function(t){e.loadReports(t)}),(function(){e.loadReports()}))},o.prototype.deleteReportInternal=function(o){var r,i=this,a=this.getReportIndex(o),n=this.telemetryService.startEvent(e.telemetry.DashboardDeleteReport);return a>=0?(r=this.reports[a],this.reports.splice(a,1),void this.reportHttpService.deleteReport(r.contract,n.event).then((function(){i.rootScope.$emit(t.constants.reportDeletedEventName,o),n.resolve(),r&&r.isUsedByContentPack&&i.rootScope.$emit(t.constants.contentPackDirtyShowNotification,r.id,t.models.ContentPackItems.Report)}),(function(t){t.status===e.HttpStatusCode.Unauthorized?i.errorService.error(i.localizationService.get("Report_NoPermissionToDeleteMessage"),"Report_NoPermissionToDelete",{requestId:t.requestId,statusCode:t.status.toString()}):i.errorService.error(i.localizationService.get("Report_FailToDeleteReportMessage"),"Report_FailToDeleteReport",{requestId:t.requestId,statusCode:t.status.toString()}),i.reports.push(r),n.reject()}))):void n.resolve()},o.prototype.loadReports=function(t){var o=this;if("undefined"==typeof t){var r=this.telemetryService.startEvent(e.telemetry.DashboardInitializeNavigationPaneReports);this.reportHttpService.getReports(r.event).then((function(e){var t=e.data;o.updateReportCollection(t),r.resolve(),o.reportsDeferred.resolve(o)}),(function(){r.reject(),o.reportsDeferred.reject()}))}else t.reports&&(this.updateReportCollection(t.reports),this.reportsDeferred.resolve(this))},o})();t.ReportService=a})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(){return new o}e.createReportCollectionService=t;var o=(function(){function e(){this.reports=[]}return e.prototype.getReportContracts=function(){return _.map(this.reports,(function(e){return e.contract}))},e.prototype.findReportContract=function(e){var t=this.getReportContracts();return _.find(t,(function(t){return t.id===e}))},e})()})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o=e.common.contracts.Permissions,r=e.common.models.ReportPermissions,i=(function(){function t(e){this.userInfo=e}return t.prototype.mapReportOwnerFullnames=function(e,t,o,r){this.mapResourceOwnerFullnames(e,t,o,r,"reportIds")},t.prototype.mapWorkbookOwnerFullnames=function(e,t,o,r){this.mapResourceOwnerFullnames(e,t,o,r,"workbookIds")},t.prototype.mapResourceOwnerFullnames=function(e,t,o,r,i){for(var a={},n=0,s=e;n<s.length;n++){var d=s[n];a[i]=[d.id],d.ownerFullname=this.getOwnerFullname(d.contract.permissions,d.packageId,a,t,o,r)}},t.prototype.getOwnerFullnameFromUserInfo=function(){if(!this.userInfo)return"";var e=_.trim(this.userInfo.givenName),t=_.trim(this.userInfo.surname);return _.isEmpty(e)?"":(_.isEmpty(t)||(e+=" "+t),e)},t.prototype.hasPermission=function(e,t){return(e&t)===t},t.prototype.getOwnerFromGroupOrUser=function(t,o){return t===e.common.constants.myWorkspaceGroupId?this.getOwnerFullnameFromUserInfo():o},t.prototype.getOwnerFromUserInfo=function(e,t,i){return this.hasPermission(e,o.CopyOnWrite)||this.hasPermission(e,r.Personalized)?this.getOwnerFromGroupOrUser(t,i):""},t.prototype.getOwnerFromDashboard=function(e){return null!=e?e.ownerFullname:""},t.prototype.getOwnerFullname=function(e,t,o,r,i,a){var n=_.where(r,{contract:{originalPackageId:t}}).concat(_.where(r,{contract:{packageIds:[t]}})).concat(_.where(r,{contract:o}));return _.isEmpty(n)?this.getOwnerFromUserInfo(e,i,a):this.getOwnerFromDashboard(_.first(n))},t})();t.ResourceOwnershipService=i})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(){return new a}var r=jsCommon.EnumExtensions,i=e.common.contracts.Permissions;t.createModelCollectionService=o;var a=(function(){function e(){this.models=[]}return e.prototype.getModelContracts=function(){return _.map(this.models,(function(e){return e.contract}))},e.prototype.findModelContract=function(e,t){var o=this.getModelContracts();if(t)return _.find(o,(function(o){return o.id===e&&o.packageId===t}));var a=_.find(o,(function(t){return t.id===e&&r.hasFlag(t.permissions,i.Write)}));return a||_.find(o,(function(t){return t.id===e}))},e})()})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e,t,o,r,i,a,s,d,c,l,p,u,h,m){return new n(e,t,o,r,i,a,s,d,c,l,p,u,h,m)}var r=jsCommon.EnumExtensions,i=e.common.contracts.Permissions,a=jsCommon.StringExtensions;t.createModelService=o;var n=(function(){function o(e,t,o,r,i,a,n,s,d,c,l,p,u,h){this.rootScope=e,this.telemetryService=t,this.errorService=o,this.modelMerger=r,this.modelConverter=i,this.syncService=a,this.modelHttpService=n,this.localizationService=s,this.reportService=d,this.appMetadataService=c,this.promiseFactory=l,this.dataProxy=p,this.modelCollectionService=u,this.permissionService=h,this.modelUpdateListeners=[],this.syncService.addModelRefreshListener(this),this._modelsDeferred=this.promiseFactory.defer(),this.initModels()}return Object.defineProperty(o.prototype,"models",{get:function(){return this.modelCollectionService.models},set:function(e){this.modelCollectionService.models=e},enumerable:!0,configurable:!0}),o.prototype.applyModelUpdated=function(e,t){for(var o=0;o<this.modelUpdateListeners.length;++o)this.modelUpdateListeners[o].onModelUpdated(e,t)},o.prototype.onModelAdded=function(e,t){var o=this.findModels(e,t);0===o.length&&this.addOrUpdateModel(e,t);for(var r=0,i=o.length;r<i;r++){var n=o[r];a.isNullOrUndefinedOrWhiteSpaceString(n.displayName)&&this.addOrUpdateModel(n.id,n.packageId,n)}},o.prototype.addOrUpdateModel=function(o,r,i){var a=this,n=this.telemetryService.startEvent(e.telemetry.DashboardInitializeNavigationPaneModels);this.modelHttpService.getModel(o,r,this.telemetryService.root).then((function(e){var r=e.data,s=a.modelConverter.convertModel(r);a.isContractExplorableNonLegacySampleModel(s.contract)&&(i=a.findModel(o,r.packageId),i?(a.modelMerger.mergeModel(i,r),a.applyModelUpdated(i.id,i.packageId)):(s.isNew=!0,a.models.push(s),a.rootScope.$emit(t.constants.onDatasetAddedEventName,r))),n.resolve(),a.updateTimestamp()}),(function(){n.reject()}))},o.prototype.onModelDeleted=function(e,t){if(this.models)if(t){var o=this.getModelIndex(e,t);o>=0&&(this.models.splice(o,1),this.updateTimestamp())}else for(var r=this.getModelIndices(e),i=0,a=r.length;i<a;i++)this.models.splice(r[i],1),this.updateTimestamp()},o.prototype.onModelUpdated=function(t,o){var r=this;if(this.models)for(var i=this.findModels(t,o),a=0,n=i.length;a<n;a++){var s=this.telemetryService,d=s.startEvent(e.telemetry.DashboardInitializeNavigationPaneModels),c=i[a];this.modelHttpService.getModel(t,c.packageId,this.telemetryService.root).then((function(e){r.modelMerger.mergeModel(c,e.data),r.applyModelUpdated(c.id,c.packageId),d.resolve(),r.updateTimestamp();var t=e.data;r.dataProxy.clearCache("dsr",[{dbName:t.dbName,modelId:t.id,vsName:t.vsName,schemaName:void 0}])}),(function(){d.reject()}))}},o.prototype.addModelUpdateListener=function(e){this.modelUpdateListeners.push(e)},o.prototype.removeModelUpdateListener=function(e){_.remove(this.modelUpdateListeners,e)},Object.defineProperty(o.prototype,"modelsPromise",{get:function(){return this._modelsDeferred.promise},enumerable:!0,configurable:!0}),o.prototype.updateDatasetCollection=function(e){if(this.models=[],!_.isEmpty(e))for(var t=0,o=e.length;t<o;++t)this.models.push(this.modelConverter.convertModel(e[t]));this.updateTimestamp()},o.prototype.mergeDatasetCollection=function(e){if(!_.isEmpty(e))for(var t=_.indexBy(this.models,"id"),o=0,r=e;o<r.length;o++){var i=r[o];t[i.id]?this.updateContractModel(i):this.models.push(this.modelConverter.convertModel(i))}},o.prototype.getModelContracts=function(){return this.modelCollectionService.getModelContracts()},o.prototype.deleteModelForPackage=function(e){for(var t=_.filter(this.models,(function(t){return t.packageId===e})),o=0,r=t.length;o<r;++o)this.onModelDeleted(t[o].id,e)},o.prototype.updateContractModel=function(e){if(e){var t=this.findModel(e.id,e.packageId);t&&(this.modelMerger.mergeModel(t,e),this.applyModelUpdated(t.id,t.packageId))}},o.prototype.addContractModel=function(e){if(e){var t=this.modelConverter.convertModel(e),o=this.getModelIndex(t.id,t.packageId);o<0&&(t.isNew=!0,this.addModel(t))}},o.prototype.addModel=function(e){if(e){var t=this.getModelIndex(e.id,e.packageId);t<0&&(this.models.push(e),this.updateTimestamp())}},o.prototype.deleteModel=function(e,t){this.deleteModelInternal(e,t)},o.prototype.getModelIndex=function(e,t){if(this.models.length>0)for(var o=0,r=this.models.length;o<r;o++){var i=this.models[o];if(i.id===e&&i.packageId===t)return o}return-1},o.prototype.getModelIndices=function(e){var t=[];if(this.models.length>0)for(var o=0,r=this.models.length;o<r;o++){var i=this.models[o];i.id===e&&t.push(o)}return t},o.prototype.getModelRefreshSchedule=function(e,t){return this.findModel(e,t).contract.refreshSchedule},o.prototype.findModel=function(e,t){if(t)return _.find(this.models,(function(o){return o.id===e&&o.packageId===t}));var o=_.find(this.models,(function(t){return t.id===e&&r.hasFlag(t.getPermissions(),i.Write)}));return o||_.find(this.models,(function(t){return t.id===e}))},o.prototype.findModels=function(e,t){return t?_.filter(this.models,(function(o){return o.id===e&&o.packageId===t})):_.filter(this.models,(function(t){return t.id===e}))},o.prototype.findModelByDBName=function(e,t){var o;return o=t?_.find(this.models,(function(o){return o.dbName===e&&o.packageId===t})):_.find(this.models,(function(t){return t.dbName===e&&r.hasFlag(t.getPermissions(),i.Write)})),o||t||(o=_.find(this.models,(function(t){return t.dbName===e}))),o},o.prototype.findModelsByDBName=function(e){return _.filter(this.models,(function(t){return t.dbName===e}))},o.prototype.findModelByPackageId=function(e){return _.find(this.models,(function(t){return t.packageId===e}))},o.prototype.findModelsByPackageId=function(e){return _.filter(this.models,(function(t){return t.packageId===e}))},Object.defineProperty(o.prototype,"editableModels",{get:function(){var e=this;return _.filter(this.models,(function(t){var o=e.permissionService.getModelEffectivePermissions(t.id,t.packageId);return r.hasFlag(o,i.Write)&&r.hasFlag(o,i.ReShare)&&!t.isHidden}))},enumerable:!0,configurable:!0}),o.prototype.isContractExplorableNonLegacySampleModel=function(e){var o=e.permissions;return e.contentProviderId!==t.constants.samplesContentProviderId&&(r.hasFlag(o,i.Write)||r.hasFlag(o,i.CopyOnWrite)||r.hasFlag(o,i.Explore))},o.prototype.isExplorableNonLegacySampleModel=function(e){var o=e.getPermissions();return e.contentProviderId!==t.constants.samplesContentProviderId&&(r.hasFlag(o,i.Write)||r.hasFlag(o,i.CopyOnWrite)||r.hasFlag(o,i.Explore))},Object.defineProperty(o.prototype,"copyAndEditModels",{get:function(){var e=this;return _.filter(this.models,(function(t){return e.isExplorableNonLegacySampleModel(t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sanitizedCopyAndEditModels",{get:function(){var e=this;return _.filter(this.models,(function(t){return e.isExplorableNonLegacySampleModel(t)&&!a.isNullOrUndefinedOrWhiteSpaceString(t.displayName)&&!t.realTimeMode}))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"streamingModels",{get:function(){var e=this;return _.filter(this.models,(function(t){return e.isExplorableNonLegacySampleModel(t)&&!!t.realTimeMode}))},enumerable:!0,configurable:!0}),o.prototype.renameModel=function(o,r,i){var a=this;if(this.isModelNameValid(o)){var n=this.findModel(r,i);if(!n)return;var s=n.contract.displayName;if(s!==o){var d=this.telemetryService.startEvent(e.telemetry.DashboardRenameDataset);n.displayName=o,this.modelHttpService.renameModel(n,o,d.event).then((function(){d.resolve();var e=a.findModel(n.id,n.packageId);e&&e.isUsedByContentPack&&a.rootScope.$emit(t.constants.contentPackDirtyShowNotification,e.id,t.models.ContentPackItems.Model)}),(function(t){t.status===e.HttpStatusCode.Unauthorized?a.errorService.error(a.localizationService.get("Model_NoPermissionToRenameMessage"),"Model_NoPermissionToRename",{requestId:t.requestId,statusCode:t.status.toString()}):a.errorService.error(a.localizationService.get("Model_FailToRenameModelMessage"),"Model_FailToRenameModel",{requestId:t.requestId,statusCode:t.status.toString()}),n.displayName=s,d.reject()}))}}},o.prototype.updateModelQnaFeatures=function(t,o){var r=this.promiseFactory.defer(),i=this.telemetryService.startEvent(e.telemetry.DashboardUpdateModelQnaFeatures,o.cortanaEnabled,o.powerBIQnaEnabled);return this.modelHttpService.updateModelQnaFeatures(t,o,i.event).then((function(){i.resolve(),r.resolve({})}),(function(){i.reject(),r.reject()})),r.promise},o.prototype.updateFeaturedQuestions=function(t,o){var r=this.promiseFactory.defer(),i=this.telemetryService.startEvent(e.telemetry.DashboardUpdateFeaturedQuestions,o.length);return this.modelHttpService.updateFeaturedQuestions(t,o,i.event).then((function(){i.resolve(),r.resolve({})}),(function(){i.reject(),r.reject()})),r.promise},o.prototype.isModelNameValid=function(e){return!a.isNullOrUndefinedOrWhiteSpaceString(e)},o.prototype.removeModels=function(e){for(var t=!1,o=0,r=e.length;o<r;o++)for(var i=this.getModelIndices(e[o]),a=0,n=i.length;a<n;a++)this.models.splice(i[a],1),t=!0;t&&this.updateTimestamp()},Object.defineProperty(o.prototype,"lastUpdatedTimestamp",{get:function(){return this._lastUpdatedTimestamp},enumerable:!0,configurable:!0}),o.prototype.updateTimestamp=function(){this._lastUpdatedTimestamp=(new Date).getTime()},o.prototype.initModels=function(){var e=this;this.appMetadataService.getAppMetadata().then((function(t){e.loadModels(t)}),(function(){e.loadModels()}))},o.prototype.deleteModelInternal=function(o,r){for(var i=this,a=this.findModels(o,r),n=0,s=a.length;n<s;n++){var d,c=this.telemetryService.startEvent(e.telemetry.DashboardDeleteDataset),l=a[n],p=this.getModelIndex(o,l.packageId);p>=0?(this.models.splice(p,1),d=this.reportService.deleteReportsForModel(o,l.packageId),this.rootScope.$emit(t.constants.deleteModelStartedEventName,o),this.modelHttpService.deleteModel(l.contract,c.event).then((function(){c.resolve(),i.updateTimestamp()}),(function(r){r.status===e.HttpStatusCode.Unauthorized?i.errorService.error(i.localizationService.get("Model_NoPermissionToDeleteMessage"),"Model_NoPermissionToDelete",{requestId:r.requestId,statusCode:r.status.toString()}):r.status===e.HttpStatusCode.BadRequest&&r.headers(e.common.PowerBIErrorHeader)===t.constants.CannotDeleteModelPublishedToOrganizationalAppHeader?i.errorService.error(i.localizationService.get("Model_DeleteWaitMessage"),"Model_DeleteWaitMessage",{requestId:r.requestId,statusCode:r.status.toString()}):i.errorService.error(i.localizationService.get("Model_FailToDeleteModelMessage"),"Model_FailToDeleteModel",{requestId:r.requestId,statusCode:r.status.toString()}),i.models.push(l);for(var a=0,n=d.length;a<n;++a)i.reportService.addReport(d[a]);i.rootScope.$emit(t.constants.deleteModelFailedEventName,o),c.reject()}))):c.resolve()}},o.prototype.loadModels=function(t){var o=this;if(t)t.models&&(this.updateDatasetCollection(t.models),this._modelsDeferred.resolve(this.models));else{var r=this.telemetryService.startEvent(e.telemetry.DashboardInitializeNavigationPaneModels);this.modelHttpService.getModels(r.event).then((function(e){o.updateDatasetCollection(e.data),o._modelsDeferred.resolve(o.models),r.resolve()}),(function(){o._modelsDeferred.reject(),r.reject()}))}},o})();t.ModelService=n;var s=(function(){function e(){}return e.prototype.getModelContracts=function(){return[]},e.prototype.updateContractModel=function(e){},e.prototype.addContractModel=function(e){},e.prototype.addModel=function(e){},e.prototype.deleteModel=function(e,t){},e.prototype.deleteModelForPackage=function(e){},e.prototype.getModelIndex=function(e,t){return 0},e.prototype.getModelIndices=function(e){return[]},e.prototype.getModelRefreshSchedule=function(e,t){},e.prototype.findModel=function(e,t){},e.prototype.findModels=function(e,t){return[]},e.prototype.findModelByDBName=function(e,t){},e.prototype.findModelsByDBName=function(e){return[]},e.prototype.findModelByPackageId=function(e){},e.prototype.findModelsByPackageId=function(e){return[]},e.prototype.renameModel=function(e,t,o){},e.prototype.isModelNameValid=function(e){},e.prototype.removeModels=function(e){},e.prototype.updateDatasetCollection=function(e){},e.prototype.mergeDatasetCollection=function(e){},e.prototype.onModelAdded=function(e,t){},e.prototype.onModelDeleted=function(e,t){},e.prototype.onModelUpdated=function(e,t){},e.prototype.updateModelQnaFeatures=function(e,t){},e.prototype.updateFeaturedQuestions=function(e,t){},e.prototype.addModelUpdateListener=function(e){},e.prototype.removeModelUpdateListener=function(e){},e})();t.MockModelService=s})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function o(e,t,o,r,i,a,n,d,c,l,p,u,h,m,f,v,g){return new s(e,t,o,r,i,a,n,d,c,l,p,u,h,m,f,v,g)}var r=e.common.contracts.Permissions,i=e.common.constants;!(function(e){e[e.NamedRange=0]="NamedRange",e[e.Parameter=1]="Parameter",e[e.Table=2]="Table",e[e.PivotTable=3]="PivotTable",e[e.Chart=4]="Chart",e[e.WebExtension=5]="WebExtension"})(t.EwaNamedItemType||(t.EwaNamedItemType={}));var a=t.EwaNamedItemType;t.createWorkbookService=o;var n=".xlsx,.xlsm",s=(function(){function o(e,t,o,r,i,a,n,s,d,c,l,p,u,h,m,f,v){this.workbookCollectionService=f,this.telemetryService=t,this.rootScope=e,this.errorService=o,this.modelMerger=r,this.modelConverter=i,this.syncService=a,this.workbookHttpService=n,this.localizationService=s,this.featureSwitchService=d,this.appMetadataService=c,this.windowService=l,this.promiseFactory=p,this.tutorialDataStore=u,this.compile=h,this.localFileService=m,this.permissionService=v,this.spoAuthenticationTelemetryCollected=!1,this.wopiDataTTL=new Array,this.deferredWopiData=Array(),this.workbooksDeferred=p.defer(),this.syncService.addWorkbookRefreshListener(this),this.replaceWorkbookScope=this.rootScope.$new(),this.replaceWorkbookScope.shouldReplaceLocalWorkbook=!1,this.initWorkbooks()}return Object.defineProperty(o.prototype,"workbooks",{get:function(){return this.workbookCollectionService.workbooks},set:function(e){this.workbookCollectionService.workbooks=e},enumerable:!0,configurable:!0}),o.prototype.addContractWorkbook=function(e){if(e&&null!=e.id){var t=this.modelConverter.convertWorkbook(e),o=this.getWorkbookIndex(t.id,t.packageId);o<0&&this.addWorkbook(t)}},o.prototype.addWorkbook=function(e){if(e&&null!=e.id){var t=this.getWorkbookIndex(e.id,e.packageId);t<0&&(this.workbooks.push(e),this.updateTimestamp())}},o.prototype.deleteWorkbookForPackage=function(e){for(var t=_.filter(this.workbooks,(function(t){return t.packageId===e})),o=0,r=t.length;o<r;++o)this.onWorkbookDeleted(t[o].id,e)},o.prototype.postUploadWorkbookErrorMessage=function(e){this.postErrorForWorkbook(e,"UploadExcel_FailedToUploadWorkbook_Title","UploadExcel_FailedToUploadWorkbook_Message")},o.prototype.postReplaceWorkbookErrorMessage=function(e){this.postErrorForWorkbook(e,"UploadExcel_FailedToReplaceWorkbook_Title","UploadExcel_FailedToReplaceWorkbook_Message")},o.prototype.postErrorForWorkbook=function(t,o,r){var a=t.headers(e.common.PowerBIErrorHeader),n=r;if(a){var s=e.common.KnownContentProviderErrors[i.excelContentProviderId],d=s&&s[a];d&&d.messageId&&(n=d.messageId)}this.errorService.error(e.common.localize.get(n),n,{requestId:t.requestId,statusCode:t.status.toString(),title:e.common.localize.get(o)})},o.prototype.replaceLocalWorkbook=function(e){var t=this,o=this.findWorkbookByUniqueId(e);this.replaceWorkbookScope.workbookToUpdate=o;var r,i=this.promiseFactory.defer();r=function(){t.localFileService.chooseLocalFile(i,n)},i.promise.then((function(e){t.getUserConsentToReplace(r,e)})),r=function(){t.replaceWorkbook()},this.localFileService.chooseLocalFile(i,n)},o.prototype.showReplaceWorkbookTutorialIfNeeded=function(e){var t=this;return this.neverShowUpdateExplanation=this.tutorialDataStore.hasKey(o.UpdateLocalWorkbookExplanation),this.neverShowUpdateExplanation?void e():void this.showInputDialog("ReplaceLocalWorkbook_Title","ReplaceLocalWorkbook_Message","ReplaceLocalWorkbook_ReplaceFile","UploadReplace_CancelButton",e,"ToastNotification_DontShowThisAgain",(function(){t.neverShowUpdateExplanation=!t.neverShowUpdateExplanation}))},o.prototype.getUserConsentToReplace=function(e,t){if(t){this.replaceWorkbookScope.localWorkbookToUpload=t;var o=t.name;this.replaceWorkbookScope.workbookToUpdate&&this.replaceWorkbookScope.workbookToUpdate.displayNameWithExtension.toLowerCase()!==o.toLowerCase()?this.showInputDialog("ReplaceLocalWorkbook_DifferentName_Title","ReplaceLocalWorkbook_DifferentName_Message","ReplaceLocalWorkbook_ReplaceFile","UploadReplace_CancelButton",e):this.showReplaceWorkbookTutorialIfNeeded(e)}},o.prototype.showInputDialog=function(e,t,o,r,i,a,n){var s,d=this,c=this.errorService.control(),l=[new InJs.ModalDialogAction(this.localizationService.get(o),function(e,t){c.hideDialog(),d.dismissExplanationPermanentlyIfNeeded(),i()}),new InJs.ModalDialogAction(this.localizationService.get(r),function(e,t){c.hideDialog()})];a&&(s=new InJs.ModalDialogAction(this.localizationService.get(a),function(e,t){n()}));var p=this.localizationService.get(e),u=this.localizationService.get(t);c.showCustomDialog(p,angular.element("<div/>").text(u),l,(function(e){e.parent().find('input[value="'+d.localizationService.get(o)+'"]').focus()}),!1,null,null,null,null,null,null,null,null,null,s)},o.prototype.dismissExplanationPermanentlyIfNeeded=function(){if(this.neverShowUpdateExplanation){var t=this.telemetryService.startEvent(e.telemetry.DashboardUpdateLocalWorkbookNeverShowExplanation);this.tutorialDataStore.setKey(o.UpdateLocalWorkbookExplanation,!0,t)}},o.prototype.replaceWorkbook=function(){this.replaceWorkbookScope.shouldReplaceLocalWorkbook=!0,this.updateLocalWorkbookElement||(this.updateLocalWorkbookTemplate=angular.element(o.HtmlTemplateUpdate),this.updateLocalWorkbookElement=this.compile(this.updateLocalWorkbookTemplate)(this.replaceWorkbookScope),$("body").append(this.updateLocalWorkbookElement)),this.replaceWorkbookScope.$applyAsync()},o.prototype.finishReplacingLocalWorkbook=function(){this.replaceWorkbookScope.shouldReplaceLocalWorkbook=!1},o.prototype.onWorkbookAdded=function(e,o){var r=this,i=this.findWorkbook(e,o);i||this.workbookHttpService.getWorkbook(e,o,this.telemetryService.root).then((function(a){if(i=r.findWorkbook(e,o),!i){var n=a.data;i=r.modelConverter.convertWorkbook(n),i.isNew=!0,r.workbooks.push(i),r.updateTimestamp(),r.rootScope.$emit(t.constants.workbook.workbookAddedEventName,i.uniqueId)}}),(function(){}))},o.prototype.onWorkbookDeleted=function(e,t){if(0!==this.workbooks.length){var o=this.getWorkbookIndex(e,t);o>=0&&(this.workbooks.splice(o,1),this.updateTimestamp())}},o.prototype.onWorkbookUpdated=function(e){var t=this;if(0!==this.workbooks.length){var o=this.findWorkbooks(e);if(o)for(var r=0,i=o.length;r<i;r++)this.workbookHttpService.getWorkbook(e,o[r].packageId,this.telemetryService.root).then((function(e){var o=e.data,r=t.findWorkbook(o.id,o.packageId);t.modelMerger.mergeWorkbook(r,o)}),(function(){}))}},o.prototype.updateWorkbookCollection=function(e){this.workbooks=[],this.updateWorkbooks(e),this.updateTimestamp()},o.prototype.mergeWorkbookCollection=function(t){if(!_.isEmpty(t))for(var o=_.indexBy(this.workbooks,"uniqueId"),r=0,i=t;r<i.length;r++){var a=i[r];o[e.common.models.ReportResource.getUniqueId(e.common.models.ResourceType.Workbook,a.id,a.packageId)]||this.workbooks.push(this.modelConverter.convertWorkbook(a))}this.updateTimestamp()},o.prototype.updateWorkbook=function(e){var t=this.findWorkbook(e.id,e.packageId);return t&&this.modelMerger.mergeWorkbook(t,e),t},o.prototype.getWorkbookContracts=function(){return this.workbookCollectionService.getWorkbookContracts()},Object.defineProperty(o.prototype,"copyAndEditWorkbooks",{get:function(){var e=this.permissionService;return _.filter(this.workbooks,(function(t){var o=e.getWorkbookEffectivePermissions(t.id);return(o&r.Write)===r.Write||(o&r.CopyOnWrite)===r.CopyOnWrite}))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"editAndReShareWorkbooks",{get:function(){var e=this.permissionService;return _.filter(this.workbooks,(function(t){var o=e.getWorkbookEffectivePermissions(t.id);return(o&r.Write)===r.Write&&(o&r.ReShare)===r.ReShare}))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lastUpdatedTimestamp",{get:function(){return this._lastUpdatedTimestamp},enumerable:!0,configurable:!0}),o.prototype.ensureWorkbookInitialization=function(){return this.workbooksDeferred.promise},o.prototype.findWorkbooks=function(e){return _.filter(this.workbooks,(function(t){return t.id===e}))},o.prototype.updateTimestamp=function(){this._lastUpdatedTimestamp=(new Date).getTime()},o.prototype.getWorkbookIndex=function(e,t){for(var o=0,r=this.workbooks.length;o<r;o++){var i=this.workbooks[o];if(i.id===e&&i.packageId===t)return o}return-1},o.prototype.findWorkbook=function(e,t){return t?_.find(this.workbooks,(function(o){return o.id===e&&o.packageId===t})):_.find(this.workbooks,(function(t){return t.id===e&&t.isOwner()}))},o.prototype.findWorkbooksByPackageId=function(e){if(null!=e)return _.filter(this.workbooks,(function(t){return t.packageId===e}))},o.prototype.findWorkbookByEtagHash=function(e){return _.find(this.workbooks,(function(t){return t.contract.etagHash===e}))},o.prototype.findWorkbookByUniqueId=function(e){return _.find(this.workbooks,(function(t){return t.uniqueId===e}))},o.prototype.getWorkbookUniqueId=function(e){return e.uniqueId},o.prototype.initWorkbooks=function(){var e=this;this.appMetadataService.getAppMetadata().then((function(t){e.loadWorkbooks(t)}),(function(){e.loadWorkbooks()}))},o.prototype.loadWorkbooks=function(t){var o=this;if(t)t.workbooks&&(t.workbooks.forEach((function(e){var t=o.modelConverter.convertWorkbook(e);o.workbooks.push(t)})),this.workbooksDeferred.resolve(this),this.updateTimestamp());else{var r=this.telemetryService.startEvent(e.telemetry.DashboardInitializeNavigationPaneWorkbooks);this.workbookHttpService.getWorkbooks(r.event).then((function(e){o.updateWorkbooks(e.data),r.resolve(),o.workbooksDeferred.resolve(o),o.updateTimestamp()}),(function(){r.reject(),o.workbooksDeferred.reject()}))}},o.prototype.updateWorkbooks=function(e){var t=this;_.isEmpty(e)||e.forEach((function(e){var o=t.modelConverter.convertWorkbook(e);t.workbooks.push(o)}))},Object.defineProperty(o.prototype,"originalWorkbooks",{get:function(){var e=this.permissionService;return _.filter(this.workbooks,(function(t){var o=e.getWorkbookEffectivePermissions(t.id);return(o&r.ReShare)===r.ReShare}))},enumerable:!0,configurable:!0}),o.prototype.renameWorkbook=function(t,o,r){var i=this;if(this.isWorkbookNameValid(t)){var a=this.findWorkbook(o,r);if(a){var n=a.contract.displayName;if(n!==t){var s=this.telemetryService.startEvent(e.telemetry.DashboardRenameWorkbook);a.displayName=t,this.workbookHttpService.renameWorkbook(a,t,s.event).then((function(){s.resolve()}),(function(t){t.status===e.HttpStatusCode.Unauthorized?i.errorService.error(i.localizationService.get("Workbook_NoPermissionToRenameMessage"),"Workbook_NoPermissionToRename",{requestId:t.requestId,statusCode:t.status.toString()}):i.errorService.error(i.localizationService.get("Workbook_FailToRenameWorkbookMessage"),"Workbook_FailToRenameWorkbook",{requestId:t.requestId,statusCode:t.status.toString()}),a.displayName=n,s.reject()}))}}}},o.prototype.isWorkbookNameValid=function(e){return!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(e)},o.prototype.removeWorkbook=function(t,o,r,i){var a,n=this,s=this.getWorkbookIndex(t,o),d=this.telemetryService.startEvent(e.telemetry.DashboardRemoveWorkbook,r,i);return s>=0?(a=this.workbooks[s],this.workbooks.splice(s,1),void this.workbookHttpService.deleteWorkbook(a.contract,d.event).then((function(){d.resolve(),n.updateTimestamp()}),(function(t){t.status===e.HttpStatusCode.Unauthorized?n.errorService.error(n.localizationService.get("Workbook_NoPermissionToRemoveMessage"),"Workbook_NoPermissionToRemove",{requestId:t.requestId,statusCode:t.status.toString()}):n.errorService.error(n.localizationService.get("Workbook_FailToRemoveWorkbookMessage"),"Workbook_FailToRemoveWorkbook",{requestId:t.requestId,statusCode:t.status.toString()}),n.workbooks.push(a),d.reject()}))):void d.resolve()},o.prototype.haveWorkbookEmbedAccessData=function(e){var t=this.deferredWopiData[e],o=this.wopiDataTTL[e];return!(!t||o&&!(o>(new Date).getTime()))},o.prototype.getWorkbookEmbedAccessData=function(t,o,r){var i=this;if(r)var a=this.telemetryService.startChildEvent(r,e.telemetry.DashboardGetWorkbookWopiAccessInformation);else var a=this.telemetryService.startEvent(e.telemetry.DashboardGetWorkbookWopiAccessInformation);if(this.haveWorkbookEmbedAccessData(t))return a.resolve(),this.deferredWopiData[t].promise;var n=this.promiseFactory.defer();this.deferredWopiData[t]=n,this.wopiDataTTL[t]=null;var s=!1;return this.workbookHttpService.getWorkbookWopiData(t,a.event).then((function(e){if(!e.data||!e.data.accessToken||!e.data.url)return void(s=!0);var o=e.data;i.wopiDataTTL[t]=o.accessTokenTtl,i.deferredWopiData[t].resolve(o),a.resolve()}),(function(e){s=!0})).finally((function(){s&&(i.deferredWopiData[t].reject(),i.deferredWopiData[t]=null,a.reject())})),n.promise},o.prototype.createExcelWebAppEmbedUrlParams=function(e,t){var o=[{key:"dsdiv",value:e},{key:"dswp",value:"1"},{key:"dsts",value:"None"},{key:"dsat",value:"1"},{key:"dspti",value:"1"},{key:"dsfl",value:"1"},{key:"dsacs",value:this.featureSwitchService.featureSwitches.ffxlChartSelectionEnabled?"1":"0"},{key:"dsrc",value:"pplr"}];t&&o.push({key:"dssc",value:t});var r=o.map((function(e){return"&"+e.key+"="+e.value})).join("");return r},o.prototype.embedWorkbook=function(t,o,r,i,a,n,s,d,c,l){var p=this;if(null!==o&&null!==r){var u=this.promiseFactory.defer(),h=this.promiseFactory.defer(),m=c?"&wdPublishedInPbiHint=true":"";return h.promise.then((function(){var c=p.createExcelWebAppEmbedUrlParams(o.targetDiv,l),h=r+"&access_token="+i+"&access_token_ttl="+a+c+m,f=p.promiseFactory.defer();f.promise.then((function(r){r.getSucceeded()?(p.telemetryService.logEvent(e.telemetry.DashboardWorkbookEmbeddingExternalSuccess,t,r.getCorrelationId(),n,d,s),u.resolve({ewaControl:r.getReturnValue(),window:o})):(p.telemetryService.logEvent(e.telemetry.DashboardWorkbookEmbeddingExternalFailure,t,r.getCode(),r.getDescription(),r.getCorrelationId(),n,d,s),u.reject())}),(function(){p.telemetryService.logEvent(e.telemetry.DashboardWorkbookEmbeddingExternalFailure,t,-1,null,null,n,d,s),u.reject()})),o.loadEwaScripts(h,f)})),o.loadEvent=h,o.loaded&&h.resolve(null),u.promise}},o.prototype.getDefaultTileTitle=function(e,t){var o=t,r=e.sheetName;if(r)o+=", "+r.replace(/\''/g,"'");else{var i=e.item.split("!");i.length>1&&(o+=", "+i[0].substr(1,i[0].length-2))}return o},o.prototype.getDefaultTileSubtitle=function(e){var t=e.split("!");return t.length>1?t[1]:e},o.prototype.getTileSelectionQuery=function(e,t,o,r){var i="";return o===a.Chart&&r&&(i="Sheets('"+r+"')/"),i+=this.getNamedItemTypeAsString(o)+"('",e?i+=e:t&&(i+=t),encodeURIComponent(i+"')")},o.prototype.encodeImageTileQueryString=function(e){var t=encodeURI(e);return t=t.replace(/\'/g,"%27"),t=t.replace(/\(/g,"%28"),t=t.replace(/\)/g,"%29")},o.prototype.getNamedItemTypeAsString=function(e){switch(e){case a.NamedRange:return"Ranges";case a.Parameter:return"Parameters";case a.Table:return"Tables";case a.PivotTable:return"PivotTables";case a.Chart:return"Charts"}return"Ranges"},o.prototype.getWorkbookTilePreviewImageUrl=function(e){var t=this,o=this.promiseFactory.defer();return this.getWorkbookEmbedAccessData(e.workbookId,e.packageId).then((function(r){if(e.$config.workbookTile){
var i=r.url.replace(/ExcelJs.ashx/i,"/XlRestInternal.aspx"),a=t.encodeImageTileQueryString(t.getTileSelectionQuery(e.$config.workbookTile.item,e.$config.workbookTile.activeSelection,e.$config.workbookTile.itemType,e.$config.workbookTile.sheetName));i+="&framemode=proxy&wdRestQuery=$format=image&wdRestPart=Model/"+a+"&access_token="+r.accessToken+"&access_token_ttl="+r.accessTokenTtl,o.resolve(i)}else o.reject()}),(function(){o.reject()})),o.promise},o.prototype.getWorkbookTileBestImageUrl=function(t){if(t.hasImages()){var o=t.images,r=-1,i=-1,a=t.tileModel.layoutPosition,n=e.common.GridLayoutConstants.getDefaultGridItemViewport({colSpan:a.width,rowSpan:a.height}),s=Number.MAX_VALUE,d=Number.MIN_VALUE,c=window.devicePixelRatio;if(n.width=n.width*c,n.height=n.height*c,t.keepOriginalContentSize)return jsCommon.Utility.getAbsoluteUri(o[0].imageUrl);for(var l=0;l<o.length;l++){o[l].width>d&&(d=o[l].width,i=l);var p=o[l].width-n.width,u=o[l].height-n.height,h=Math.max(p,u);h>=0&&h<s&&(s=h,r=l)}return r===-1&&(r=i),jsCommon.Utility.getAbsoluteUri(o[r].imageUrl)}return t.image?"data:image/png;base64,"+t.image:""},o.prototype.setModelDynamicImageUrl=function(e){e.dynamicImageUrl=this.getWorkbookTileBestImageUrl(e),e.dynamicImageUrl||(e.dynamicImageUrl=e.previewImageUrl)},o.prototype.getWorkbooks=function(){return this.workbooksDeferred.promise.then((function(e){return e.workbooks}))},o.HtmlTemplateUpdate="<content-provider-local-file selected-file='localWorkbookToUpload' is-update-from-element-flow='true' ng-if='shouldReplaceLocalWorkbook' element-to-update='workbookToUpdate'></content-provider-local-file>",o.UpdateLocalWorkbookExplanation="updateLocalWorkbookExplanation",o})();t.WorkbookService=s})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(){return new o}e.createWorkbookCollectionService=t;var o=(function(){function e(){this.workbooks=[]}return e.prototype.getWorkbookContracts=function(){return _.map(this.workbooks,(function(e){return e.contract}))},e.prototype.findWorkbookContract=function(e){var t=this.getWorkbookContracts();return _.find(t,(function(t){return t.id===e}))},e})()})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,o=jsCommon.DateExtensions,r=jsCommon.StringExtensions,i=jsCommon.Utility;!(function(e){function t(e,t){if(e&&null!=e.contentProviderId){var o=t.getAppById(e.contentProviderId);return o&&o.providerKey}}function a(e,t,o){if(e){var r;if(e.contentProviderId)r=e.contentProviderId;else if(e.packageId){var i=o.findPackage(e.packageId);if(!i||!i.contract)return;r=i.contract.contentProviderRefId}if(null!=r){var a=t.getAppById(r);return a&&a.providerKey}}}function n(e,t,o){var r=s(e,o);if(null!=r){var i=t.getOrgAppPackage(r);return i&&i.id}}function s(e,t){var o=e.getAppByGUID(t);return o&&o.providerId}function d(e){var t=i.getDateFromWcfJsonString(e.publishTime,!0);return t||(t=o.parseIsoDate(e.publishTime)),t}function c(e){return!_.isEmpty(e.iconUrl)||!_.isEmpty(e.localAppLogoImageData)}function l(e){return e.localAppLogoImageData?r.format("url({0})",e.localAppLogoImageData):e.iconUrl?r.format("url({0})",i.urlCombine(clusterUri,e.iconUrl)):void 0}e.getDashboardAppGUID=t,e.getResourceAppGUID=a,e.getPackageIDByOrgAppGUID=n,e.getOrgAppIDByGUID=s,e.getAppPublishDate=d,e.hasAppLogoImage=c,e.getAppLogoImageUrlStyle=l})(t=e.AppUtils||(e.AppUtils={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o,r=e.common.helpers.ModelConverterHelper,i=e.common.contracts.Permissions,a=3;!(function(e){function t(e){return(e.permissions&i.Write)===i.Write}function o(e,t,o){var i=o.featureSwitches;return _.some(e,(function(e){if(t){var o=t.findModel(e.id,e.packageId);return!!o&&r.getIsQnaSupported(o.contract,i)}return r.getIsQnaSupported(e,i)}))}function n(e,t){var o=[];if(!e)return o;var r=e.contract,i=[],a=r.modelIds;_.isEmpty(a)||(i=a.slice(0));var n=r.tiles;if(_.map(n,(function(e){null!=e.modelId&&i.push(e.modelId)})),_.isEmpty(i))return o;i=_.uniq(i);for(var s=0,d=i.length;s<d;s++){var c=_.filter(t,(function(e){return e.id===i[s]}));_.isEmpty(c)||o.push(c[0])}return o}function s(e){for(var t=[],o=1e3,r=_.sortBy(e,(function(e){var t=e.getActiveLayoutPosition();return t.y*o+t.x})),i=0,a=r;i<a.length;i++){var n=a[i],s=n.getActiveLayoutPosition();d(t,s.y,s.height)}for(var l=[],p=1e3,u=_.sortBy(e,(function(e){var t=e.getActiveLayoutPosition();return t.x*p+t.y})),h=0,m=u;h<m.length;h++){var n=m[h],s=n.getActiveLayoutPosition();d(l,s.x,s.width)}for(var f=c(t,l,r,u),v=0===f?t:l,g=0===f?u:r,y=[],b=0,S=0,k=v;S<k.length;S++){for(var D=k[S],C=b+1;C<D.startPosition;C++)y.push(void 0);for(var T=D.startPosition;T<D.startPosition+D.size;T++)y.push(D.startPosition),b=T}for(var I=_.groupBy(g,(function(e){var t=0===f?e.getActiveLayoutPosition().y:e.getActiveLayoutPosition().x;return y[t-1]})),w=[],P=0,R=v;P<R.length;P++){var D=R[P];w=w.concat(I[D.startPosition])}return _.map(w,(function(e){return e.getItem()}))}function d(e,t,o){var r=e.length,i=e[r-1];!_.isEmpty(e)&&t>=i.startPosition&&t<i.startPosition+i.size?t+o>i.startPosition+i.size&&(i.size=t+o-i.startPosition):e.push({startPosition:t,size:o})}function c(e,t,o,r){var i,a=_.max(e,(function(e){return e.size})).size,n=_.max(t,(function(e){return e.size})).size,s=_.all(e,(function(t){return t.size===e[0].size})),d=_.all(t,(function(e){return e.size===t[0].size}));return i=l(e,a,s)?0:l(t,n,d)?1:a<=n?0:1}function l(e,t,o){return e.length>1&&o&&t<=a}function p(e,t,o){if(!o||!o.tiles)return!1;switch(e){case 0:return _.any(o.tiles,(function(e){return e.hasLayoutDefinition(t)}));case 1:return _.any(o.tiles,(function(e){return e.hasLayoutPosition(t)}))}}e.isWriteable=t,e.containsQnaSupportedModel=o,e.getDashboardModels=n,e.orderItems=s,e.containsLayout=p})(o=t.DashboardUtils||(t.DashboardUtils={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,o=jsCommon.ArrayExtensions;!(function(e){function t(e,t){if(e)for(var o=e.length,r=0;r<o;r++)if(e[r].id===t)return e[r].contentProviderId;return null}function r(e){var t=i(e);if(t&&t.Commands&&t.Commands.length>0){var o=t.Commands[0].SemanticQueryDataShapeCommand;return{defn:o.Query,shape:o.Binding}}return null}function i(e){if(e&&e.modelQuery&&e.modelQuery.sq){var t;try{t=JSON.parse(e.modelQuery.sq)}catch(e){}if(t){var o=null;return d(t)?o=t.dataQuery:c(t)?o=t:l(t)&&(o={Commands:[{SemanticQueryDataShapeCommand:{Query:t.defn,Binding:t.shape}}]}),o}}}function a(e){return void 0===e&&(e={}),{layouts:[{id:0,position:e}]}}function n(e){var t=s(e,0);return t}function s(e,t){var r=o.extendWithId(e.$layoutConfig.layouts),i=r.withId(t);return i?i.position:null}function d(e){return e.dataQuery&&e.dataQuery.Commands&&e.dataQuery.Commands.length>0}function c(e){return e.Commands&&e.Commands.length>0}function l(e){return e.defn}e.findContentProviderId=t,e.convertToSemanticQueryWithDataShapeBinding=r,e.convertToTileDataQuery=i,e.createMasterLayoutConfig=a,e.getMasterLayoutPosition=n,e.getLayoutPosition=s})(t=e.ContractUtils||(e.ContractUtils={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o,r=t.contracts,i=e.visuals.plugins,a="__default__",n=1;!(function(e){function t(e,t){void 0===t&&(t=1);var i=o[t];if(!i)return n;var s=r.TileType[e.type],d=i[s];if(!d&&e.composite){var c=e.composite;c&&(s=c.visual.type)}return i[s]||i[a]}var o={},s={};s[r.TileType[r.TileType.report]]=6,s[i.card.name]=2,s[i.animatedNumber.name]=2,s[i.textbox.name]=2,s[a]=3,o[1]=s,e.getRowSpan=t})(o=t.TileDefaultSizesUtils||(t.TileDefaultSizesUtils={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o,r=jsCommon.JsonExtensions,i=t.contracts.TileType;!(function(o){function a(o,r,a,n,s,d,c,l,p){var u=o.realTime,h=l.execute({dataSources:u.datasources,schema:s,config:r,additionalFilters:null,dataWindow:a}),v=d.getPinData(r.visualType,r,e.common.contracts.TileLayoutType.Default,null,null,h,null,s);v.realTimeDataWindow=a;var g=t.models.TileFactory.createTileForPinData(c,v,n,null),y=jsCommon.JsonExtensions.tryParseJSON(g.config);if(!y){var b=_.isEmpty(g.config)?m:f;return void p.logEvent(e.telemetry.DashboardTileError,i[i.realTime],b)}y.hideTitle=o.config.hideTitle,o.config=y,o.realTime.config=y.realTimeVisual;var S=o.contract;if(S.query=g.query,S.modelId=g.modelId,o.isTemporary){var k=t.ContractUtils.getMasterLayoutPosition(S),D=t.ContractUtils.getMasterLayoutPosition(g);k.width=D.width,k.height=D.height;var C={colSpan:k.width,rowSpan:k.height};o.calculateLayout(e.common.GridLayoutConstants.getDefaultGridItemViewport(C)),o.invalidateLayout()}u.singleVisualConfig=r}function n(e){if(e&&e.contract&&e.contract.$config&&e.contract.$config.visual&&e.contract.$config.visual.visual)return e.contract.$config.visual.visual}function s(e,t){return o.isScriptVisualTile(e,t)||o.reportTileContainsScriptVisuals(e,t)}function d(e,t){return e&&e.type===i.composite&&t.isScriptVisual(o.getVisualType(e))}function c(t,o){var r=t&&t.reportTile&&t.reportTile.exploration&&t.reportTile.exploration.sections;if(!r||t.type!==i.report)return!1;for(var a=0,n=r;a<n.length;a++)for(var s=n[a],d=0,c=s.contract.visualContainers;d<c.length;d++){var l=c[d],p=e.explore.util.VisualContainerUtils.getVisualType(l);if(p&&o&&o.isScriptVisual(p))return!0}return!1}function l(o,r){if(!o||!r)return o;if(r.modelQuery&&r.modelQuery.sq&&r.modelQuery.sq.length>0){var i=JSON.parse(r.modelQuery.sq);if(i){var a=t.ContractUtils.convertToSemanticQueryWithDataShapeBinding(r),n=a.defn;if(n&&!n.Version&&o.visual&&o.visual.elements&&o.visual.visual&&o.visual.visual===e.visuals.plugins.scatterChart.name){var s=o.visual.elements;if(s.length>0&&s[0].DataRoles){for(var d,c=s[0].DataRoles,l=!1,p=!1,u=!1,h=0,m=c.length;h<m;h++){var f=c[h];"Category"===f.Name&&(l=!0,d=f.Projection),p=p||"Series"===f.Name,u=u||"Size"===f.Name}u&&l&&!p&&c.push({Name:"Series",Projection:d})}}}}return o}function p(e,t){return"tile_"+e.id+"_dash_"+t}function u(e,o,r){var i,a=1,n=6,s=t.TileDefaultSizesUtils.getRowSpan(r,a),d={id:a,position:{y:e,x:o,width:n,height:s}};return i=r.addLayout(d,a),r.layoutPosition.y=e,r.layoutPosition.x=o,r.layoutPosition.height=s,r.layoutPosition.width=n,i}function h(t){var o=r.tryParseJSON(t.errorDetail);if(o&&!_.isEmpty(o.DataShapes)){var i=o.DataShapes[0]["odata.error"];if(i){var a=new e.DsrClientError(i);return a.getDetails(e.common.localize)}}}var m="Empty tile config object",f="Invalid tile config object";o.UpdateRealTimeTile=a,o.getVisualType=n,o.tileContainsScriptVisuals=s,o.isScriptVisualTile=d,o.reportTileContainsScriptVisuals=c,o.upgradeTileConfig=l,o.tileTrackerFn=p,o.createDefaultPhoneByTile=u,o.getTileErrorDetailsFromQueryResultError=h})(o=t.TileUtils||(t.TileUtils={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var o,r=e.common.contracts.ContentProviderCategory,i=jsCommon.EnumExtensions,a=e.common.contracts.Permissions;!(function(e){function t(e,t,r,i,a,n,s,d,c){if(t=t||[],o(e,t,r,i,a,n,s,d,c)){var p=void 0;if(!_.isEmpty(e))for(var u=0,h=e;u<h.length;u++){var m=h[u];p=s.findDashboardContract(m),p.permissions=l,t=_.union(t,p.reportIds)}for(var f=void 0,v=0,g=t;v<g.length;v++){var y=g[v];f=n.findReportContract(y),f.permissions=l}}}function o(e,t,o,r,i,a,d,c,l){var p=c.findPackageContract(r);return!!n(p,l)&&s(e,t,o,r,i,a,d)}function n(e,t){if(!e)return!1;var o=null;return e.contentProviderRefId>0?o=t.findOrganizationalContentProvider(e.contentProviderRefId):e.serviceContentProviderId>0&&(o=t.findServiceContentProvider(e.serviceContentProviderId)),!!o&&(o.category===r.OrganizationalTemplateApp||o.category===r.ServiceApp)}function s(e,t,o,r,n,s,c){if(_.isEmpty(e)&&_.isEmpty(t)&&_.isEmpty(o)||!r)return!1;o=o||[],t=t||[];var l;if(!_.isEmpty(e))for(var p=0,u=e;p<u.length;p++){var h=u[p];if(l=c.findDashboardContract(h),!(l&&i.hasFlag(l.permissions,a.Write)&&_.isEqual(l.packageIds,[r])))return!1;_.isEmpty(l.modelIds)||(o=_.union(o,l.modelIds)),_.isEmpty(l.reportIds)||(t=_.union(t,l.reportIds))}return d(t,o,r,n,s)}function d(e,t,o,r,n){if(t=t||[],!_.isEmpty(e))for(var s=void 0,d=0,l=e;d<l.length;d++){var p=l[d];if(s=n.findReportContract(p),!s||!i.hasFlag(s.permissions,a.CopyOnWrite)&&!i.hasFlag(s.permissions,a.Write)||s.packageId!==o)return!1;s.modelId&&!_.contains(t,s.modelId)&&t.push(s.modelId)}return c(t,o,r)}function c(e,t,o){if(_.isEmpty(e))return!1;for(var r,n=0,s=e;n<s.length;n++){var d=s[n];if(r=o.findModelContract(d,t),!r||!i.hasFlag(r.permissions,a.Write))return!1}return!0}var l=a.Read|a.CopyOnWrite;e.markArtifactsAsCopyableIfPartOfTemplatePackage=t,e.areArtifactsFromTemplateApp=o,e.isAppPackageFromTemplateApp=n,e.areReportsModelsInAppPackage=d,e.areAllModelsPartOfAppPackage=c})(o=t.PermissionsUtils||(t.PermissionsUtils={}))})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){angular.module("powerbi.dataServices",[]);var o=["powerbi.common","powerbi.visualHost"];angular.module("powerbi.dataServices",o).factory("appCollection",[function(){return e.dataServices.createAppCollectionService()}]).factory("dashboardCollection",[function(){return e.dataServices.createDashboardCollectionService()}]).factory("modelCollection",[function(){return e.dataServices.createModelCollectionService()}]).factory("packageCollection",[function(){return e.dataServices.createPackageCollectionService()}]).factory("reportCollection",[function(){return e.dataServices.createReportCollectionService()}]).factory("workbookCollection",[function(){return e.dataServices.createWorkbookCollectionService()}]).factory("permissionService",["activeGroupId","impersonationService","appCollection","packageCollection","modelCollection","reportCollection","workbookCollection","dashboardCollection","telemetryService",function(t,o,r,i,a,n,s,d,c){return e.dataServices.createPermissionService(t,o,r,i,a,n,s,d,c)}]).factory("appMetadataService",["$rootScope","promiseFactory","resourcePackagesService","resourceGateService","visualPlugin","telemetryService","editableFeatureSwitchService",function(t,o,r,i,a,n,s){return e.dataServices.createAppMetadataService(t,o,r,i,a,n,s)}]).factory("modelHttpService",["syncService",function(t){return e.dataServices.createModelHttpService(t)}]).factory("reportHttpService",["syncService",function(t){return e.dataServices.createReportHttpService(t)}]).factory("workbookHttpService",["syncService",function(t){return e.dataServices.createWorkbookHttpService(t)}]).factory("dashboardHttpService",["syncService","promiseFactory","notificationToast",function(t,o,r){return e.dataServices.createDashboardHttpService(t,o,r)}]).factory("reportService",["$rootScope","telemetryService","errorService","dataServiceModelMerger","dataServiceModelConverter","syncService","reportHttpService","localizationService","appMetadataService","promiseFactory","reportCollection","permissionService",function(t,o,r,i,a,n,s,d,c,l,p,u){return e.dataServices.createReportService(t,o,r,i,a,n,s,d,c,l,p,u)}]).factory("workbookService",["$rootScope","telemetryService","errorService","dataServiceModelMerger","dataServiceModelConverter","syncService","workbookHttpService","localizationService","featureSwitchService","appMetadataService","$window","promiseFactory","tutorialDataStore","$compile","localFileService","workbookCollection","permissionService",function(t,o,r,i,a,n,s,d,c,l,p,u,h,m,f,v,g){return e.dataServices.createWorkbookService(t,o,r,i,a,n,s,d,c,l,p,u,h,m,f,v,g)}]).factory("modelService",["$rootScope","telemetryService","errorService","dataServiceModelMerger","dataServiceModelConverter","syncService","modelHttpService","localizationService","reportService","appMetadataService","promiseFactory","dataProxy","modelCollection","permissionService",function(t,o,r,i,a,n,s,d,c,l,p,u,h,m){return e.dataServices.createModelService(t,o,r,i,a,n,s,d,c,l,p,u,h,m)}]).factory("dashboardDataService",["dashboardHttpService","promiseFactory","featureSwitchService","dataServiceModelMerger","modelService","dashboardCollection","$timeout",function(t,o,r,i,a,n,s){return e.dataServices.createDashboardDataService(t,o,r,i,a,n,s)}]).factory("dashboardSyncService",["$rootScope","dashboardDataService","dashboardHttpService","dataServiceModelConverter","dataServiceModelMerger","modelService","promiseFactory","reportService","resourceGateService","resourcePackageListenerService","resourcePackagesService","syncService","telemetryService","tutorialDataStore","userInfo","workbookService","permissionService",function(t,o,r,i,a,n,s,d,c,l,p,u,h,m,f,v,g){return e.dataServices.createDashboarSyncService(t,o,r,i,a,n,s,d,c,l,p,u,h,m,f,v,g)}]).factory("resourcePackageListenerService",["resourcePackagesService","promiseFactory","visualPlugin",function(t,o,r){return e.dataServices.createResourcePackageListenerService(t,o,r)}]).factory("dataServiceModelConverter",["geolocationService","geocoder","telemetryService","visualPlugin","permissionService",function(t,o,r,i,a){return e.dataServices.models.createDataServiceModelConverter(t,r,i,o,a)}]).factory("dataServiceModelMerger",["dataServiceModelConverter","permissionService",function(t,o){var r=e.dataServices.models.createDataServiceModelMerger(t,o);return t.setModelMerger(r),r}]).factory("tutorialDataStore",[function(){return e.dataServices.createTutorialDataStoreService()}]).factory("packageService",["$rootScope","telemetryService","errorService","dataServiceModelMerger","dataServiceModelConverter","reportService","modelService","syncService","localizationService","appMetadataService","workbookService","appService","packageCollection","permissionService","promiseFactory",function(t,o,r,i,a,n,s,d,c,l,p,u,h,m,f){return e.dataServices.createPackageService(t,o,r,i,a,n,s,d,c,l,p,u,h,m,f)}]).factory("appService",["appMetadataService","dashboardDataService","appCollection","modelService","reportService","workbookService","promiseFactory","dataServiceModelConverter","featureSwitchService",function(e,o,r,i,a,n,s,d,c){return t.createAppService(e,o,r,i,a,n,s,d,c)}]).service("resourceOwnershipService",["userInfo",e.dataServices.ResourceOwnershipService])})(t=e.dataServices||(e.dataServices={}))})(powerbi||(powerbi={}));;var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},powerbi;!(function(e){var t;!(function(t){t.PermissionsPlaceholderAction=function(t,i,r,s,o,a,n,c,l){void 0===i&&(i=!1),void 0===r&&(r=void 0),void 0===s&&(s=void 0),void 0===o&&(o=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var m={parentId:t,isError:i,errorSource:r,errorCode:s,errorMessage:o,activityName:a,activityId:n,isDebug:c,isCancelled:l},p={name:"PBI.Permissions.PlaceholderAction",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:m.parentId,isError:m.isError};return"undefined"!=typeof m.errorSource&&(t.errorSource=e.telemetry.ErrorSource[m.errorSource]),"undefined"!=typeof m.errorCode&&(t.errorCode=m.errorCode),"undefined"!=typeof m.errorMessage&&(t.errorMessage=m.errorMessage),"undefined"!=typeof m.activityName&&(t.activityName=m.activityName),"undefined"!=typeof m.activityId&&(t.activityId=m.activityId),"undefined"!=typeof m.isDebug&&(t.isDebug=m.isDebug),"undefined"!=typeof m.isCancelled&&(t.isCancelled=m.isCancelled),t},info:m,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.PermissionsPlaceholderActionLoggers&&(p.loggers=e.telemetry.PermissionsPlaceholderActionLoggers),p}})(t=e.telemetry||(e.telemetry={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(){return new r}t.createPermissionHttpService=i;var r=(function(){function t(){}return t.prototype.getAccess=function(t){var i=e.common.httpService.powerbiRequestOptions(t,"GetAccess");return e.common.httpService.get("metadata/access",i)},t.prototype.putAccess=function(t,i){var r=e.common.httpService.powerbiRequestOptions(i,"PutAccess");return e.common.httpService.put("metadata/access",t,r)},t.prototype.getDashboardAccess=function(t,i){var r=e.common.httpService.powerbiRequestOptions(i,"GetDashboardAccess");return e.common.httpService.get("metadata/access/dashboards/"+t,r)},t.prototype.getReportAccess=function(t,i){var r=e.common.httpService.powerbiRequestOptions(i,"GetReportAccess");return e.common.httpService.get("metadata/access/reports/"+t,r)},t.prototype.getDatasetAccess=function(t,i){var r=e.common.httpService.powerbiRequestOptions(i,"GetDatasetAccess");return e.common.httpService.get("metadata/access/models/"+t,r)},t.prototype.getWorkbookAccess=function(t,i){var r=e.common.httpService.powerbiRequestOptions(i,"GetWorkbookAccess");return e.common.httpService.get("metadata/access/workbooks/"+t,r)},t})();t.PermisionHttpService=r})(t=e.permissions||(e.permissions={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.constants,r=jsCommon.EnumExtensions,s=e.common.constants.navigation.states;!(function(e){e[e.True=0]="True",e[e.False=1]="False",e[e.Replace=2]="Replace"})(t.LocationOptions||(t.LocationOptions={}));var o=t.LocationOptions,a=(function(){function e(){}return e.prototype.convertLocationOption=function(e){var t;switch(e){case o.False:t=!1;break;case o.True:t=!0;break;case o.Replace:t="replace";break;default:t=!0}return t},e})();t.NavigationBase=a;var n=(function(a){function n(e,t,i,r,s){a.call(this),this.$location=e,this.$window=t,this.$rootScope=i,this.$state=r,this.featureSwitchService=s}return __extends(n,a),Object.defineProperty(n.prototype,"stateService",{get:function(){return this.$state},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"permissionArtifact",{get:function(){var e=this.permissionArtifactType;return null!=e?r.toString(t.models.PermissionArtifactType,e).toLowerCase():null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"permissionArtifactType",{get:function(){return this.stateService.includes(s.dashboardPermission)?t.models.PermissionArtifactType.Dashboard:this.stateService.includes(s.reportPermission)?t.models.PermissionArtifactType.Report:this.stateService.includes(s.datasetPermission)?t.models.PermissionArtifactType.Dataset:this.stateService.includes(s.workbookPermission)?t.models.PermissionArtifactType.Workbook:this.stateService.includes(s.permissionCenter)?t.models.PermissionArtifactType.Home:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"permissionArtifactGUID",{get:function(){return this.stateService.params.GUID},enumerable:!0,configurable:!0}),n.prototype.navigateToManagePermissions=function(e,t){var i=this.getManagePermissionsStateFromPermissionArtifactType(e),r=n.getManagePermissionsParam(e,t),s=this.convertLocationOption(this.stateService.includes(i)?o.Replace:o.True);this.stateService.go(i,r,{location:s,inherit:!0,reload:!0})},n.prototype.inManagePermissionsView=function(){return this.stateService.includes(e.common.constants.navigation.states.permissionCenter)||this.stateService.includes(e.common.constants.navigation.states.dashboardPermission)||this.stateService.includes(e.common.constants.navigation.states.reportPermission)||this.stateService.includes(e.common.constants.navigation.states.datasetPermission)},n.prototype.getManagePermissionsStateFromPermissionArtifactType=function(r){switch(r){case t.models.PermissionArtifactType.Home:return e.common.constants.navigation.states.permissionCenter;case t.models.PermissionArtifactType.Dashboard:return e.common.constants.navigation.states.dashboardPermission;case t.models.PermissionArtifactType.Report:return i.navigation.states.reportPermission;case t.models.PermissionArtifactType.Dataset:return i.navigation.states.datasetPermission;case t.models.PermissionArtifactType.Workbook:return i.navigation.states.workbookPermission;default:return null}},n.getManagePermissionsParam=function(e,i){return e===t.models.PermissionArtifactType.Home?{}:{GUID:i,type:e}},n})(a);t.PermissionNavigationService=n})(t=e.permissions||(e.permissions={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t,r,s,o,a,n){return new i(e,t,r,s,o,a,n)}e.createPermissionDataService=t;var i=(function(){function t(e,t,i,r,s,o,a){this.dashboardDataService=e,this.reportService=t,this.modelService=i,this.workbookService=r,this.promiseFactory=s,this.permissionHttpService=o,this.telemetryService=a,this.dashboardDataService=e,this.reportService=t,this.modelService=i,this.workbookService=r,this.promiseFactory=s,this.permissionHttpService=o,this.telemetryService=a,this.permissionArtifacts=[],this.permissionsDeferred=this.promiseFactory.defer()}return t.prototype.setActivePermissionArtifact=function(t,i,r){var s=this;if(this.activePermissionArtifact=null,r||(r=this.permissionArtifacts),!t||!i)return this.promiseFactory.resolve(null);var o=i.toLowerCase();switch(t){case e.models.PermissionArtifactType.Dashboard:return this.dashboardDataService.getDashboards().then((function(e){if(_.isEmpty(e))return null;var i=_.findLast(e,(function(e){return e.contract.objectId.toLowerCase()===o}));return i?s.setActiveArtifact(t,i.contract.id):null}));case e.models.PermissionArtifactType.Dataset:return this.modelService.modelsPromise.then((function(e){if(_.isEmpty(e))return null;var i=_.findLast(e,(function(e){return e.dbName.toLowerCase()===o}));return i?s.setActiveArtifact(t,i.contract.id):null}));case e.models.PermissionArtifactType.Report:return this.reportService.getReports().then((function(e){if(_.isEmpty(e))return null;var i=_.findLast(e,(function(e){return e.contract.objectId.toLowerCase()===o}));return i?s.setActiveArtifact(t,i.contract.id):null}));case e.models.PermissionArtifactType.Workbook:return this.workbookService.getWorkbooks().then((function(e){if(_.isEmpty(e))return null;var i=_.findLast(e,(function(e){return e.contract.id.toString().toLowerCase()===o}));return i?s.setActiveArtifact(t,i.contract.id):null}))}},t.prototype.assembleRelatedForRelatedDataset=function(e){var t=this;return this.assembleArtifact(e.id,e.type).then((function(e){return t.assembleRelatedArtifactWithDataset(e)})).then((function(i){return e.related=i,t.promiseFactory.resolve(e)}))},t.prototype.getPermissionArtifacts=function(){return this.permissionsDeferred.promise.then((function(e){return e.permissionArtifacts}))},t.prototype.updateAccesses=function(t,i){for(var r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];if(!t)return this.promiseFactory.resolve(null);var o=(a=e.models.PermissionViewModelFactory).createAccessContainerRequest.apply(a,[this.activePermissionArtifact,!1].concat(r));return this.permissionHttpService.putAccess(o,this.telemetryService.root);var a},t.prototype.removeMembers=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];if(!t)return this.promiseFactory.resolve(null);var s=(o=e.models.PermissionViewModelFactory).createAccessContainerRequest.apply(o,[this.activePermissionArtifact,!0].concat(i));return this.permissionHttpService.putAccess(s,this.telemetryService.root);var o},t.prototype.removeAllMembers=function(t){if(!t)return this.promiseFactory.resolve(null);var i=e.models.PermissionViewModelFactory.createAccessRequestForRemoveAllMember(t);return this.permissionHttpService.putAccess(i,this.telemetryService.root)},t.prototype.loadPermissionArtifacts=function(){var t=this,i=[],r=this.promiseFactory.defer(),s=[];return this.permissionHttpService.getAccess(this.telemetryService.root).then((function(o){if(o&&o.data){if(o.data.dashboards)for(var a=0,n=o.data.dashboards;a<n.length;a++){var c=n[a];t.processArtifact(c,e.models.PermissionArtifactType.Dashboard,i,s)}if(o.data.reports)for(var l=0,m=o.data.reports;l<m.length;l++){var p=m[l];t.processArtifact(p,e.models.PermissionArtifactType.Report,i,s)}if(o.data.workbooks)for(var d=0,v=o.data.workbooks;d<v.length;d++){var h=v[d];t.processArtifact(h,e.models.PermissionArtifactType.Workbook,i,s)}if(o.data.models)for(var f=0,u=o.data.models;f<u.length;f++){var g=u[f];t.processArtifact(g,e.models.PermissionArtifactType.Dataset,i,s)}t.permissionsDeferred.resolve(t),t.promiseFactory.all(s).then((function(){r.resolve(i),t.permissionArtifacts=i}))}}),(function(){t.permissionsDeferred.reject(),r.reject()})),r.promise},t.prototype.processArtifact=function(t,i,r,s){t.type=i,s.push(this.retrieveRelatedItem(t).then((function(i){i&&r.push(e.models.PermissionViewModelFactory.assemblePermissionArtifact(t,i))})))},t.prototype.setActiveArtifact=function(e,t){var i=this;return this.assembleArtifact(t,e).then((function(e){return i.activePermissionArtifact=e,i.promiseFactory.resolve(i.activePermissionArtifact)}))},t.prototype.assembleArtifact=function(t,i){var r=this,s=this.getAccess(t,i),o=s.then((function(e){return r.retrieveRelatedItem(e)}));return this.promiseFactory.all([s,o]).then((function(t){var i=t[0],s=t[1],o=e.models.PermissionViewModelFactory.assemblePermissionArtifact(i,s);return r.promiseFactory.resolve(o)}))},t.prototype.getAccess=function(t,i){var r=this,s=this.promiseFactory.defer();switch(i){case e.models.PermissionArtifactType.Dashboard:this.permissionHttpService.getDashboardAccess(t,this.telemetryService.root).then((function(t){t&&t.data&&(t.data.type=e.models.PermissionArtifactType.Dashboard,s.resolve(t.data))}),(function(){r.permissionsDeferred.reject(),s.reject()}));break;case e.models.PermissionArtifactType.Dataset:this.permissionHttpService.getDatasetAccess(t,this.telemetryService.root).then((function(t){t&&t.data&&(t.data.type=e.models.PermissionArtifactType.Dataset,s.resolve(t.data))}),(function(){r.permissionsDeferred.reject(),s.reject()}));break;case e.models.PermissionArtifactType.Report:this.permissionHttpService.getReportAccess(t,this.telemetryService.root).then((function(t){t&&t.data&&(t.data.type=e.models.PermissionArtifactType.Report,s.resolve(t.data))}),(function(){r.permissionsDeferred.reject(),s.reject()}));break;case e.models.PermissionArtifactType.Workbook:this.permissionHttpService.getWorkbookAccess(t,this.telemetryService.root).then((function(t){t&&t.data&&(t.data.type=e.models.PermissionArtifactType.Workbook,s.resolve(t.data))}),(function(){r.permissionsDeferred.reject(),s.reject()}))}return s.promise},t.prototype.assembleRelatedArtifactWithDataset=function(t){for(var i=[],r=this.promiseFactory.defer(),s=[],o=0,a=t.related;o<a.length;o++){var n=a[o];n.type===e.models.PermissionArtifactType.Dataset?i.push(this.assembleArtifact(n.id,n.type).then((function(e){s.push(e)}))):s.push(n)}return this.promiseFactory.all(i).then((function(){r.resolve(s)})),r.promise},t.prototype.retrieveRelatedItem=function(t){var i=this,r=[],s=this.promiseFactory.defer(),o=[];if(t||s.resolve(null),t.relatedDashboardIds)for(var a=0,n=t.relatedDashboardIds;a<n.length;a++){var c=n[a];o.push(this.permissionHttpService.getDashboardAccess(c,this.telemetryService.root).then((function(t){t&&t.data&&(t.data.type=e.models.PermissionArtifactType.Dashboard,r.push(t.data))}),(function(){i.permissionsDeferred.reject()})))}if(t.relatedModelIds)for(var l=0,m=t.relatedModelIds;l<m.length;l++){var c=m[l];o.push(this.permissionHttpService.getDatasetAccess(c,this.telemetryService.root).then((function(t){t&&t.data&&(t.data.type=e.models.PermissionArtifactType.Dataset,r.push(t.data))}),(function(){i.permissionsDeferred.reject()})))}if(t.relatedReportIds)for(var p=0,d=t.relatedReportIds;p<d.length;p++){var c=d[p];o.push(this.permissionHttpService.getReportAccess(c,this.telemetryService.root).then((function(t){t&&t.data&&(t.data.type=e.models.PermissionArtifactType.Report,r.push(t.data))}),(function(){i.permissionsDeferred.reject()})))}if(t.relatedWorkbookIds)for(var v=0,h=t.relatedWorkbookIds;v<h.length;v++){var c=h[v];o.push(this.permissionHttpService.getWorkbookAccess(c,this.telemetryService.root).then((function(t){t&&t.data&&(t.data.type=e.models.PermissionArtifactType.Workbook,r.push(t.data))}),(function(){i.permissionsDeferred.reject()})))}return this.promiseFactory.all(o).then((function(){s.resolve(r)}),(function(){s.reject()})),s.promise},t})();e.PermissionDataService=i})(t=e.permissions||(e.permissions={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e){return new i(e)}e.createPermissionLocalizationService=t;var i=(function(){function t(e){this.localizationService=e,this.localizationService=e}return t.prototype.getModalDialogContextInfo=function(e){var t="";return e?t=e.related.length>0?this.localizationService.format("PermissionCenter_RelatedContent_RemoveDialogText",[e.displayName]):this.localizationService.get("PermissionCenter_NoRelatedContent_RemoveDialogText"):t},t.prototype.getRelatedArtifactDisplayName=function(e){if(!e||_.isEmpty(e.related))return"";for(var t="",i=0,r=e.related;i<r.length;i++){var s=r[i],o=this.getArtifactDisplayName(s);t=""===t?o:this.localizationService.format("PermissionCenter_RelatedArtifactList_PlaceHolder",[t,o])}return this.localizationService.format("PermissionCenter_RelatedContent_ModalText",[t])},t.prototype.getArtifactDisplayName=function(t){if(!t)return"";var i=null;switch(t.type){case e.models.PermissionArtifactType.Dashboard:i=this.localizationService.get("ArtifactKind_Dashboard");break;case e.models.PermissionArtifactType.Dataset:i=this.localizationService.get("ArtifactKind_Dataset");break;case e.models.PermissionArtifactType.Report:i=this.localizationService.get("ArtifactKind_Report");break;case e.models.PermissionArtifactType.Workbook:i=this.localizationService.get("ArtifactKind_Workbook")}return this.localizationService.format("PermissionCenter_DisplayName_PlaceHolder",[t.displayName,i])},t.prototype.getArtifactDisplayNameWithSpace=function(t){if(!t)return"";switch(t.type){case e.models.PermissionArtifactType.Dashboard:return this.localizationService.format("PermissionCenter_Dashboard_DisplayTitle",[t.displayName]);case e.models.PermissionArtifactType.Dataset:return this.localizationService.format("PermissionCenter_Dataset_DisplayTitle",[t.displayName]);case e.models.PermissionArtifactType.Report:return this.localizationService.format("PermissionCenter_Report_DisplayTitle",[t.displayName]);case e.models.PermissionArtifactType.Workbook:return this.localizationService.format("PermissionCenter_Workbook_DisplayTitle",[t.displayName]);default:return t.displayName}},t})();e.PermissionLocalizationService=i})(t=e.permissions||(e.permissions={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(t){e.common.registerBuildingBlocksForHost(t,s,{componentsTarget:"powerbi.permissions.components",componentsMap:e.permissions.components,directivesTarget:"powerbi.permissions.directives",directivesMap:e.permissions.directives})}var r=e.common.HostEnv;angular.module("powerbi.permissions.components",[]),angular.module("powerbi.permissions.directives",[]);var s=[{name:"PermissionDeleteModal",dependencies:[],blockType:1,consumerHostFlags:r.Web},{name:"PermissionCenterHome",dependencies:[],blockType:2,consumerHostFlags:r.Web},{name:"PermissionDetails",dependencies:[],blockType:2,consumerHostFlags:r.Web}];angular.module("powerbi.permissions",["powerbi.permissions.components","powerbi.permissions.directives","powerbi.dataServices"]).factory("permissionDataService",["dashboardDataService","reportService","modelService","workbookService","promiseFactory","permissionHttpService","telemetryService",function(t,i,r,s,o,a,n){return e.permissions.createPermissionDataService(t,i,r,s,o,a,n)}]).factory("permissionLocalizationService",["localizationService",function(t){return e.permissions.createPermissionLocalizationService(t)}]).factory("permissionHttpService",[function(){return e.permissions.createPermissionHttpService()}]).service("permissionNavigationService",["$location","$window","$rootScope","$state","featureSwitchService",e.permissions.PermissionNavigationService]),t.registerBuildingBlocksForHost=i})(t=e.permissions||(e.permissions={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){!(function(e){e[e.Dashboard=1]="Dashboard",e[e.Report=2]="Report",e[e.Dataset=3]="Dataset",e[e.Workbook=4]="Workbook",e[e.Home=5]="Home"})(e.PermissionArtifactType||(e.PermissionArtifactType={}));var t=e.PermissionArtifactType,i=(function(){function e(){this.related=[],this.members=[]}return Object.defineProperty(e.prototype,"typeToString",{get:function(){return jsCommon.EnumExtensions.toString(t,this.type)},enumerable:!0,configurable:!0}),e})();e.PermissionArtifact=i})(t=e.models||(e.models={}))})(t=e.permissions||(e.permissions={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){var r,s=e.permissions.models.PermissionArtifactType;!(function(e){function r(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var o=[],a=[],n=[],c=[],l=this.createAccessRequests.apply(this,[e,t].concat(i));if(_.isEmpty(l))return this.createAccessRequestForRemoveAllMember(e);switch(e.type){case s.Dashboard:o=l;break;case s.Dataset:c=l;break;case s.Report:a=l;break;case s.Workbook:n=l}return{dashboards:o,models:c,workbooks:n,reports:a}}function o(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];for(var s=[],o=0,a=e.members;o<a.length;o++){for(var n=a[o],c=!1,l=null,m=0,p=i;m<p.length;m++){var d=p[m];if(d.id===n.id&&d.userId===n.userId){l=d,c=!0;break}}l||(l=n),t&&c||s.push({id:l.id,userId:l.userId,groupId:l.groupId,tenantId:l.tenantId,permissions:l.permission})}return s}function a(e){var t=[],i=[],r=[],o=[],a={id:e.id};switch(e.type){case s.Dashboard:t.push(a);break;case s.Dataset:o.push(a);break;case s.Report:i.push(a);break;case s.Workbook:r.push(a)}return{dashboards:t,models:o,workbooks:r,reports:i}}function n(e,t){var r=new i.PermissionArtifact;if(r.id=e.id,r.displayName=e.displayName,r.objectId=e.objectId,r.type=e.type,r.sharedWithCount=e.sharedWithCount,r.members=[],r.related=[],e.detail)for(var s=0,o=e.detail;s<o.length;s++){var a=o[s],n={userId:a.userId,displayName:[a.givenName,a.familyName].join(" ").trim(),email:a.emailAddress,id:a.id,permission:a.permissions,groupId:a.groupId,tenantId:a.tenantId};r.members.push(n)}if(t)for(var c=0,l=t;c<l.length;c++){var m=l[c];r.related.push(this.assemblePermissionArtifact(m,null))}return r}function c(e){if(!e)return null;var i=new t.PermissionArtifact;return i.id=e.id,i.displayName=e.displayName,i.objectId=e.objectId,i.type=e.type,i.members=e.members,i.related=e.related,i.createdDate=e.createdDate,i}e.createAccessContainerRequest=r,e.createAccessRequests=o,e.createAccessRequestForRemoveAllMember=a,e.assemblePermissionArtifact=n,e.convertPermissionArtifact=c})(r=t.PermissionViewModelFactory||(t.PermissionViewModelFactory={}))})(i=t.models||(t.models={}))})(t=e.permissions||(e.permissions={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.searchBoxDelay=500})(t=e.permissions||(e.permissions={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){var r=(function(){function i(e,t){var r=this;this.services=t,this.selectType=function(e){r.typeFilter^=e},this.scope=e,this.searchInputPlaceholder=this.services.localizationService.get("PermissionCenter_SearchInputPlaceholder"),this.typeFilter=i.allTypes,this.initializeArtifacts(),this.tableConfig={data:null,hasHeader:!0,shouldHideData:function(e){return r.shouldHide(e)}}}return i.createOptions=function(){return{additionalServices:["permissionDataService","permissionLocalizationService","permissionNavigationService","localizationService","modalDialogService","promiseFactory"]}},i.prototype.initializeArtifacts=function(){var e=this;return this.artifactsLoadedDefer=this.services.promiseFactory.defer(),this.artifactsPromise=this.services.permissionDataService.loadPermissionArtifacts(),this.artifactsPromise.then((function(t){return e.assignArtifacts(t)}))},i.prototype.assignArtifacts=function(e){this.tableConfig.data=e,this.tableConfig.filteredData=e},i.prototype.openPermissionDetails=function(e){var t=this,i=e.type,r=e.objectId;return this.services.permissionDataService.setActivePermissionArtifact(i,r).then((function(e){return t.services.permissionNavigationService.navigateToManagePermissions(i,r)}))},i.prototype.toggleArtifact=function(e){if(e.id===this.activePermissionArtifact.id&&e.type===this.activePermissionArtifact.type)this.activePermissionArtifact.selected=!this.activePermissionArtifact.selected;else for(var t=0,i=this.activePermissionArtifact.related;t<i.length;t++){var r=i[t];r.id===e.id&&r.type===e.type&&(r.selected=!r.selected)}},i.prototype.getModalDialogContextInfo=function(e){return this.services.permissionLocalizationService.getModalDialogContextInfo(e)},i.prototype.getRelatedArtifactDisplayName=function(e){return this.services.permissionLocalizationService.getRelatedArtifactDisplayName(e)},i.prototype.getArtifactDisplayName=function(e){return this.services.permissionLocalizationService.getArtifactDisplayName(e)},i.prototype.shouldShowWarningForRelatedContent=function(e){return e.type===t.models.PermissionArtifactType.Dataset&&!_.isEmpty(e.related)},i.prototype.isArtifactSlected=function(e){return e.selected},i.prototype.resetSelectedArtifacts=function(e){e.selected=!0;for(var t=0,i=e.related;t<i.length;t++){var r=i[t];r.selected=!0}},i.prototype.shouldHide=function(i){switch(i.type){case t.models.PermissionArtifactType.Dashboard:return this.shouldHideType(e.common.contracts.PermissionArtifactType.Dashboard);case t.models.PermissionArtifactType.Dataset:return this.shouldHideType(e.common.contracts.PermissionArtifactType.Dataset);case t.models.PermissionArtifactType.Report:return this.shouldHideType(e.common.contracts.PermissionArtifactType.Report);case t.models.PermissionArtifactType.Workbook:return this.shouldHideType(e.common.contracts.PermissionArtifactType.Workbook)}},i.prototype.shouldHideType=function(e){return 0===(this.typeFilter&e)},i.prototype.displayRemoveMemberErrorDialog=function(){var e=this.services.localizationService.get("PermissionCenter_ErrorTitle"),t=this.services.localizationService.get("PermissionCenter_ErrorMessage_RemoveMember");this.displayErrorMessageDialog(e,t)},i.prototype.displayErrorMessageDialog=function(e,t){var i=this.services.rootScope.$new(),r=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_GotIt"),function(e,t){i.closeDialog()})];i.message=t;var s={dialogName:e,isDismissable:!0,scope:i,template:"<custom-modal-dialog></custom-modal-dialog>",dialogActions:r};this.services.modalDialogService.showLegacyWebModalDialog(s)},i.prototype.removeAllMembers=function(e){var t=this;return this.services.permissionDataService.assembleRelatedForRelatedDataset(e).then((function(i){t.resetSelectedArtifacts(e),t.activePermissionArtifact=i;var r=t.scope.$new(),s="<permission-delete-modal></permission-delete-modal>",o={dialogName:t.services.localizationService.get("PermissionCenter_RemoveAccess"),isDismissable:!0,scope:r,template:s,focusOnFirstButton:!0,dialogActions:[new InJs.ModalDialogAction(t.services.localizationService.get("PermissionCenter_RemoveAccess"),function(e,i){t.activePermissionArtifact.selected&&t.services.permissionDataService.removeAllMembers(t.activePermissionArtifact).then((function(e){t.activePermissionArtifact.sharedWithCount=1}),(function(){t.displayRemoveMemberErrorDialog()}));for(var s=0,o=t.activePermissionArtifact.related;s<o.length;s++){var a=o[s],n=function(e){e.selected&&t.services.permissionDataService.removeAllMembers(e).then((function(i){var r=_.findLast(t.tableConfig.data,(function(t){return e.id===t.id&&e.type===t.type}));r.sharedWithCount=1}),(function(){t.displayRemoveMemberErrorDialog()}))};n(a)}r.closeDialog()}),new InJs.ModalDialogAction(t.services.localizationService.get("ModalDialog_Cancel"),function(e,t){r.closeDialog()})]};t.services.modalDialogService.showLegacyWebModalDialog(o)}))},i.allTypes=e.common.contracts.PermissionArtifactType.Dashboard|e.common.contracts.PermissionArtifactType.Dataset|e.common.contracts.PermissionArtifactType.Report|e.common.contracts.PermissionArtifactType.Workbook,i})();i.PermissionCenterHomeController=r})(i=t.controllers||(t.controllers={}))})(t=e.permissions||(e.permissions={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){i.PermissionCenterHome={templateUrl:"components/permissionCenterHome/permissionCenterHomeView.html",controller:e.common.Services.createController(t.controllers.PermissionCenterHomeController)}})(i=t.components||(t.components={}))})(t=e.permissions||(e.permissions={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){!(function(e){e[e.UpdateReadOnly=0]="UpdateReadOnly",e[e.UpdateReadAndReshare=1]="UpdateReadAndReshare"})(i.MemberAccessAction||(i.MemberAccessAction={}));var r=i.MemberAccessAction;!(function(e){e[e.BatchUpdateReadOnly=0]="BatchUpdateReadOnly",e[e.BatchUpdateReadAndReshare=1]="BatchUpdateReadAndReshare"})(i.MoreDropdownAction||(i.MoreDropdownAction={}));var s=i.MoreDropdownAction,o=(function(){function i(e,t){this.services=t,this.scope=e,this.searchInputPlaceholder=this.services.localizationService.get("PermissionCenter_SearchInputPlaceholder"),this.tableConfig={data:this.services.permissionDataService&&this.services.permissionDataService.activePermissionArtifact?this.services.permissionDataService.activePermissionArtifact.members:null,hasHeader:!0},this.tableConfig.data||this.displayUnknownErrorDialog(),this.activeArtifactDisplayName=this.assembleActiveArtifactDisplayname(),this.createMemberAccessDropdown(),this.createMoreDropdown(),this.resetSlectedMembers()}return Object.defineProperty(i.prototype,"activePermissionArtifact",{get:function(){if(this.services.permissionDataService)return this.services.permissionDataService.activePermissionArtifact},set:function(e){this.services.permissionDataService&&(this.services.permissionDataService.activePermissionArtifact=e)},enumerable:!0,configurable:!0}),i.createOptions=function(){return{additionalServices:["dashboardDataService","permissionDataService","permissionLocalizationService","permissionNavigationService","localizationService","modalDialogService"]}},i.prototype.isOwner=function(e){return e.permission===t.contracts.Permissions.All},i.prototype.isLoaded=function(){return null!=this.tableConfig.data},i.prototype.navigateToPermissionCenterHome=function(){this.services.permissionNavigationService.navigateToManagePermissions(t.models.PermissionArtifactType.Home,null)},i.prototype.shouldShowWarningForRelatedContent=function(e){return e.type===t.models.PermissionArtifactType.Dataset&&!_.isEmpty(e.related)},i.prototype.isArtifactSlected=function(e){return e.selected},i.prototype.toggleArtifact=function(e){if(e.id===this.activePermissionArtifact.id&&e.type===this.activePermissionArtifact.type)this.activePermissionArtifact.selected=!this.activePermissionArtifact.selected;else for(var t=0,i=this.activePermissionArtifact.related;t<i.length;t++){var r=i[t];r.id===e.id&&r.type===e.type&&(r.selected=!r.selected)}},i.prototype.toggleSelectAll=function(){var e=this;this.services.timeout((function(){for(var i=0,r=e.tableConfig.data;i<r.length;i++){var s=r[i];s.permission!==t.contracts.Permissions.All&&(s.selected=e.allSelected)}}))},i.prototype.openRelatedArtifactDetails=function(e){var t=this,i=e.type,r=e.objectId;return this.services.permissionDataService.setActivePermissionArtifact(e.type,e.objectId,this.activePermissionArtifact?this.activePermissionArtifact.related:null).then((function(){t.services.permissionNavigationService.navigateToManagePermissions(i,r)}))},i.prototype.isSelected=function(){return!!this.activePermissionArtifact&&_.some(this.tableConfig.data,(function(e){return e.selected}))},i.prototype.onMemberAccessMenuItemSelected=function(e,t,i){var r=this,s=this.convertMenuActionToPermission(e);this.services.permissionDataService.updateAccesses(i,s,t).then((function(){for(var e=0,r=i;e<r.length;e++){var o=r[e];o.id===t.id&&o.userId===t.userId&&(o.permission=s)}}),(function(){r.displayUpdateAccessErrorDialog()}))},i.prototype.onMoreDropdownSelected=function(e,t){var i=this,r=_.filter(this.tableConfig.data,(function(e){return e.selected})),s=this.convertMoreDropdownItemToPermission(e);return(o=this.services.permissionDataService).updateAccesses.apply(o,[t,s].concat(r)).then((function(){for(var e=0,i=t;e<i.length;e++)for(var o=i[e],a=0,n=r;a<n.length;a++){var c=n[a];o.id===c.id&&o.userId===c.userId&&(o.permission=s)}}),(function(){i.displayUpdateAccessErrorDialog()}));var o},i.prototype.assembleActiveArtifactDisplayname=function(){return this.services.permissionLocalizationService.getArtifactDisplayNameWithSpace(this.activePermissionArtifact)},i.prototype.convertMenuActionToPermission=function(e){switch(e.action){case r.UpdateReadOnly:return t.contracts.Permissions.Read;case r.UpdateReadAndReshare:return t.contracts.Permissions.ReadReshare}},i.prototype.convertMoreDropdownItemToPermission=function(e){switch(e.action){case s.BatchUpdateReadOnly:return t.contracts.Permissions.Read;case s.BatchUpdateReadAndReshare:return t.contracts.Permissions.ReadReshare}},i.prototype.resetSelectedArtifacts=function(){this.activePermissionArtifact.selected=!0;for(var e=0,t=this.activePermissionArtifact.related;e<t.length;e++){var i=t[e];i.selected=!0}},i.prototype.resetSlectedMembers=function(){this.activePermissionArtifact&&this.activePermissionArtifact.members&&this.activePermissionArtifact.members.forEach((function(e){e.selected=!1}))},i.prototype.createMemberAccessDropdown=function(){var e=[];e.push({text:this.services.localizationService.get("PermissionCenter_ReadOnly"),action:r.UpdateReadOnly,type:DropDownMenuItemType.Item}),e.push({text:this.services.localizationService.get("PermissionCenter_ReadAndReshare"),action:r.UpdateReadAndReshare,type:DropDownMenuItemType.Item}),this.memberAccessMenuItem=e},i.prototype.getModalDialogContextInfo=function(e){return this.services.permissionLocalizationService.getModalDialogContextInfo(e)},i.prototype.getRelatedArtifactDisplayName=function(e){return this.services.permissionLocalizationService.getRelatedArtifactDisplayName(e)},i.prototype.getArtifactDisplayName=function(e){return this.services.permissionLocalizationService.getArtifactDisplayName(e)},i.prototype.createMoreDropdown=function(){
var e=[];e.push({text:this.services.localizationService.get("PermissionCenter_ReadOnly"),action:s.BatchUpdateReadOnly,type:DropDownMenuItemType.Item}),e.push({text:this.services.localizationService.get("PermissionCenter_ReadAndReshare"),action:s.BatchUpdateReadAndReshare,type:DropDownMenuItemType.Item}),this.moreDropdownItem=e},i.prototype.displayUnknownErrorDialog=function(){var e=this.services.localizationService.get("PermissionCenter_ErrorTitle"),t=this.services.localizationService.get("PermissionCenter_ErrorMessage_Generic");this.displayErrorMessageDialog(e,t)},i.prototype.displayUpdateAccessErrorDialog=function(){var e=this.services.localizationService.get("PermissionCenter_ErrorTitle"),t=this.services.localizationService.get("PermissionCenter_ErrorMessage_UpdateAccess");this.displayErrorMessageDialog(e,t)},i.prototype.displayRemoveMemberErrorDialog=function(){var e=this.services.localizationService.get("PermissionCenter_ErrorTitle"),t=this.services.localizationService.get("PermissionCenter_ErrorMessage_RemoveMember");this.displayErrorMessageDialog(e,t)},i.prototype.displayErrorMessageDialog=function(e,t){var i=this.services.rootScope.$new(),r=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_GotIt"),function(e,t){i.closeDialog()})];i.message=t;var s={dialogName:e,isDismissable:!0,scope:i,template:"<custom-modal-dialog></custom-modal-dialog>",dialogActions:r};this.services.modalDialogService.showLegacyWebModalDialog(s)},i.prototype.batchRemoveMember=function(){var e=this;return this.services.permissionDataService.assembleRelatedForRelatedDataset(this.activePermissionArtifact).then((function(t){e.resetSelectedArtifacts(),e.activePermissionArtifact=t;var i=e.scope.$new(),r="<permission-delete-modal></permission-delete-modal>",s={dialogName:e.services.localizationService.get("PermissionCenter_RemoveAccess"),isDismissable:!0,scope:i,template:r,focusOnFirstButton:!0,dialogActions:[new InJs.ModalDialogAction(e.services.localizationService.get("PermissionCenter_RemoveAccess"),function(t,r){var s=e.tableConfig.data.slice(0);_.remove(s,(function(e){return!e.selected})),e.activePermissionArtifact.selected&&(l=e.services.permissionDataService).removeMembers.apply(l,[e.tableConfig.data].concat(s)).then((function(){_.remove(e.tableConfig.data,(function(e){return _.indexOf(s,e)!==-1}))}),(function(){e.displayRemoveMemberErrorDialog()}));for(var o=0,a=e.activePermissionArtifact.related;o<a.length;o++){var n=a[o],c=function(t){t.selected&&(i=e.services.permissionDataService).removeMembers.apply(i,[t.members].concat(s)).then((function(){_.remove(t.members,(function(e){return _.indexOf(s,e)!==-1}))}),(function(){e.displayRemoveMemberErrorDialog()}));var i};c(n)}i.closeDialog();var l}),new InJs.ModalDialogAction(e.services.localizationService.get("ModalDialog_Cancel"),function(e,t){i.closeDialog()})]};e.services.modalDialogService.showLegacyWebModalDialog(s)}))},i.prototype.removeMember=function(e){var t=this;return this.services.permissionDataService.assembleRelatedForRelatedDataset(this.activePermissionArtifact).then((function(i){t.resetSelectedArtifacts();var r=t.scope.$new(),s="<permission-delete-modal></permission-delete-modal>",o={dialogName:t.services.localizationService.get("PermissionCenter_RemoveAccess"),isDismissable:!0,scope:r,template:s,focusOnFirstButton:!0,dialogActions:[new InJs.ModalDialogAction(t.services.localizationService.get("PermissionCenter_RemoveAccess"),function(i,s){t.activePermissionArtifact.selected&&t.services.permissionDataService.removeMembers(t.tableConfig.data,e).then((function(){_.remove(t.tableConfig.data,(function(t){return e===t}))}),(function(){t.displayRemoveMemberErrorDialog()}));for(var o=0,a=t.activePermissionArtifact.related;o<a.length;o++){var n=a[o],c=function(i){i.selected&&t.services.permissionDataService.removeMembers(i.members,e).then((function(){_.remove(i.members,(function(t){return e===t}))}),(function(){t.displayRemoveMemberErrorDialog()}))};c(n)}r.closeDialog()}),new InJs.ModalDialogAction(t.services.localizationService.get("ModalDialog_Cancel"),function(e,t){r.closeDialog()})]};t.services.modalDialogService.showLegacyWebModalDialog(o)}))},i.prototype.shareDashboard=function(){var t=this.services.dashboardDataService.findDashboard(this.activePermissionArtifact.id);t&&(this.services.dashboardDataService.sharingDashboard=t,this.scope.$emit(e.common.constants.TaskPaneSlider.ShowShareDashboardPaneEventName))},i})();i.PermissionDetailsController=o})(i=t.controllers||(t.controllers={}))})(t=e.permissions||(e.permissions={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){i.PermissionDetails={templateUrl:"components/permissionDetails/permissionDetailsView.html",controller:e.common.Services.createController(t.controllers.PermissionDetailsController)}})(i=t.components||(t.components={}))})(t=e.permissions||(e.permissions={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/permissionDeleteModal.html"}return e})();e.PermissionDeleteModal=t})(t=e.directives||(e.directives={}))})(t=e.permissions||(e.permissions={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){!(function(e){e[e.None=0]="None",e[e.Read=1]="Read",e[e.Write=2]="Write",e[e.ReShare=4]="ReShare",e[e.Explore=8]="Explore",e[e.CopyOnWrite=16]="CopyOnWrite",e[e.WriteCheckRelaxForReadOnlyGroup=32]="WriteCheckRelaxForReadOnlyGroup",e[e.ReadWrite=3]="ReadWrite",e[e.ReadWriteCheckRelaxForReadOnlyGroup=35]="ReadWriteCheckRelaxForReadOnlyGroup",e[e.ReadReshare=5]="ReadReshare",e[e.All=7]="All"})(e.Permissions||(e.Permissions={}));e.Permissions})(t=e.contracts||(e.contracts={}))})(t=e.permissions||(e.permissions={}))})(powerbi||(powerbi={})),angular.module("powerbi.permissions").run(["$templateCache",function(e){e.put("views/permissionDeleteModal.html",'<div class="removeAccessModal"><div class="removeDialogContentFrame"><div class="textContent"><span ng-bind="$ctrl.getModalDialogContextInfo($ctrl.activePermissionArtifact)"></span></div><div class="pbi-input" ng-click="$ctrl.toggleArtifact($ctrl.activePermissionArtifact)"> <input type="checkbox" ng-checked="$ctrl.isArtifactSlected($ctrl.activePermissionArtifact)"/><label class="relatedItemName trimmedTextWithEllipsis" ng-bind="$ctrl.getArtifactDisplayName($ctrl.activePermissionArtifact)"></label></div><div ng-repeat="related in $ctrl.activePermissionArtifact.related" class="floatLeft fullWidth"><div class="pbi-input" ng-click="$ctrl.toggleArtifact(related)"> <input type="checkbox" ng-checked="$ctrl.isArtifactSlected(related)"/><label class="relatedItemName trimmedTextWithEllipsis" ng-bind="$ctrl.getArtifactDisplayName(related)"></label><pbi-icon name="warning" size="small" class="ng-isolate-scope modalWarningIcon" ng-show="$ctrl.shouldShowWarningForRelatedContent(related)"><i class="glyphicon pbi-glyph-warning glyph-small floatLeft"></i></pbi-icon></div><div ng-show="$ctrl.shouldShowWarningForRelatedContent(related) && related.selected" class="warningContent floatLeft"><div class="label-xsmall fontBold"><i ng-show="$ctrl.shouldShowWarningForRelatedContent(related)" class="glyphicon pbi-glyph-warning glyph-small floatLeft"></i><span class="floatLeft warningTextLayout" ng-bind="$ctrl.getRelatedArtifactDisplayName(related)"></span></div></div></div></div></div>'),e.put("components/permissionDetails/permissionDetailsView.html",'<div class="permissionCenter permissionDetails flexbox"><span class="centeredSpinner" ng-show="!$ctrl.isLoaded()"><spinner modern></spinner></span><section class="permissionCenterHeader item-auto"><div class="dashboardAppBar appBar"><div class="appBarSection left"><ul><li class="label breadcrumbLabel"><div localize="PermissionCenter_HomeHeader" class="permissionHomeIndex" ng-click="$ctrl.navigateToPermissionCenterHome()"></div></li><li class="label breadcrumbLabel"><span localize="BreadCrumb_Separator"></span></li><li class="label textCapitalize fontWeightBold" ng-bind="$ctrl.activeArtifactDisplayName"></li><li ng-if="::$ctrl.activePermissionArtifact.type === 1" class="sharingSection" ng-click="$ctrl.shareDashboard()"><pbi-icon name="share" size="small"></pbi-icon><span localize="PermissionCenter_ShareButtonText"></span></li></ul></div></div></section><section class="permissionCenterBody item-fill" ng-show="$ctrl.isLoaded()"><section class="permissionSidePane"><div class="permissionSidePaneTitle label-xl"><span ng-switch="$ctrl.activePermissionArtifact.type" class="permissionSidePaneTitleIcon"><i ng-switch-when="1" class="glyphicon pbi-glyph-gauge glyph-regular"></i><i ng-switch-when="2" class="glyphicon pbi-glyph-barchart glyph-regular"></i><i ng-switch-when="3" class="glyphicon pbi-glyph-database glyph-regular"></i><i ng-switch-when="4" class="glyphicon pbi-glyph-excel glyph-regular"></i></span><div ng-bind="$ctrl.activePermissionArtifact.displayName" ng-bind-attr="{title: $ctrl.activePermissionArtifact.displayName}" class="permissionSidePaneTitleText label-xxl trimmedTextWithEllipsis" localize-tooltip></div></div><div class="permissionSidePaneContent" ng-show="$ctrl.activePermissionArtifact.related.length> 0"><div localize="PermissionCenter_RelatedContent" class="subContentTitle"></div><div class="permissionSidePaneRelatedList"><div ng-repeat="related in $ctrl.activePermissionArtifact.related" class="permissionSidePaneRelatedItem"><span ng-switch="related.type" class="relatedNameIcon"><i ng-switch-when="1" class="glyphicon pbi-glyph-gauge glyph-small"></i><i ng-switch-when="2" class="glyphicon pbi-glyph-barchart glyph-small"></i><i ng-switch-when="3" class="glyphicon pbi-glyph-database glyph-small"></i><i ng-switch-when="4" class="glyphicon pbi-glyph-excel glyph-small"></i></span><div class="relatedItemName trimmedTextWithEllipsis" ng-bind="related.displayName" ng-bind-attr="{title: related.displayName}" ng-click="$ctrl.openRelatedArtifactDetails(related)"></div></div></div></div></section><section class="permissionContent"><section class="permissionTableAction"><div class="searchInput" localize-tooltip="SearchBox_Text"><i class="glyphicon pbi-glyph-search glyph-small"></i> <input type="text" placeholder="{{::$ctrl.searchInputPlaceholder}}" ng-model="$ctrl.searchTerm"/></div></section><section class="permissionTableAction"><div class="selectAllCheckbox"><pbi-checkbox label="member" ng-model="$ctrl.allSelected" ng-change="$ctrl.toggleSelectAll()"></pbi-checkbox></div> <button class="removeAllButton noBackground" ng-click="$ctrl.batchRemoveMember()" ng-disabled="!$ctrl.isSelected()"><i class="glyphicon pbi-glyph-delete glyph-small"></i><span localize="PermissionCenter_Remove" class="label-med"></span></button> <button class="moreDropdown noBackground" dropdown-menu dropdown-class="moreDropdownButton" dropdown-dark-theme="false" dropdown-items="$ctrl.moreDropdownItem" dropdown-orientation="vertical" dropdown-on-item-selected="$ctrl.onMoreDropdownSelected(selected, $ctrl.tableConfig.filteredData)" ng-disabled="!$ctrl.isSelected()"><span localize="PermissionCenter_More" class="label-med"></span><i class="paddingLeft glyphicon pbi-glyph-chevrondownmedium glyph-mini"></i></button><div class="right showItemPostion"><div class="showingItemCount" localize="PermissionCenter_Table_MemberCount" localize-fragments><span fragment-index="0" ng-bind="filtered.length"></span></div></div></section><section class="permissionTable"><table pbi-table pbi-table-config="$ctrl.tableConfig"><tr ng-repeat="member in $ctrl.tableConfig.filteredData | filter: { displayName: $ctrl.searchTerm } as filtered"><td localized-header="PermissionCenter_Table_Header_Name" sort-by="displayName" class="memberName nameColumn"><pbi-checkbox ng-model="member.selected" class="memberSelector" label="member" ng-disabled="$ctrl.isOwner(member)"></pbi-checkbox><span ng-bind="member.displayName" class="memberDisplayName trimmedTextWithEllipsis"></span><i class="glyphicon pbi-glyph-delete glyph-small mouseOverShow" ng-hide="$ctrl.isOwner(member)" ng-click="$ctrl.removeMember(member)"></i></td><td localized-header="PermissionCenter_Table_Header_EmailAddress" sort-by="email" ng-bind="member.email"></td><td localized-header="PermissionCenter_Table_Header_MemberAccess" class="memberAccessColumn"><span ng-switch="member.permission"><span ng-switch-when="1" localize="PermissionCenter_ReadOnly"></span><span ng-switch-when="5" localize="PermissionCenter_ReadAndReshare"></span><span ng-switch-when="7" localize="PermissionCenter_ReadEditAndReshare"></span></span> <button class="options" ng-hide="$ctrl.isOwner(member)" dropdown-menu dropdown-class="optionDropdownButton" dropdown-dark-theme="false" dropdown-items="$ctrl.memberAccessMenuItem" dropdown-orientation="vertical" dropdown-on-item-selected="$ctrl.onMemberAccessMenuItemSelected(selected, member, $ctrl.tableConfig.filteredData)"><i class="glyphicon moreIcon pbi-glyph-more glyph-small"></i></button></td></tr></table><div ng-show="$ctrl.activePermissionArtifact.members.length === 0" class="showNoMemberText"> <span>No member yet.</span></div></section></section></section></div>'),e.put("components/permissionCenterHome/permissionCenterHomeView.html",'<div class="permissionCenter permissionCenterHome flexbox"><section class="permissionCenterHeader item-auto"><div localize="PermissionCenter_HomeHeader"></div></section><section class="permissionCenterBody item-fill"><section class="permissionTableAction"><div class="searchInput" localize-tooltip="SearchBox_Text"><i class="glyphicon pbi-glyph-search glyph-small searchIconLocation"></i> <input type="text" placeholder="{{::$ctrl.searchInputPlaceholder}}" ng-model="$ctrl.searchTerm"/></div><div class="right paddingTop"><div class="showingItemCount" localize="PermissionCenter_ShowingItemCount" localize-fragments><span fragment-index="0" ng-bind="filtered.length"></span></div><select-artifact-filter selected-type="$ctrl.typeFilter" on-select-type="$ctrl.selectType" class="textCapitalize"></select-artifact-filter></div></section><section class="permissionTable"><table pbi-table pbi-table-config="$ctrl.tableConfig"><tr ng-repeat="artifact in $ctrl.tableConfig.filteredData | filter: { displayName: $ctrl.searchTerm } as filtered" ng-hide="$ctrl.shouldHide(artifact)"><td localized-header="PermissionCenter_Table_Header_Name" sort-by="displayName" class="permissionArtifactAction nameColumn" ng-click="$ctrl.openPermissionDetails(artifact)"><span class="contentDisplayName trimmedTextWithEllipsis"><span ng-switch="artifact.type"><i ng-switch-when="1" class="glyphicon pbi-glyph-gauge glyph-small"></i><i ng-switch-when="2" class="glyphicon pbi-glyph-barchart glyph-small"></i><i ng-switch-when="3" class="glyphicon pbi-glyph-database glyph-small"></i><i ng-switch-when="4" class="glyphicon pbi-glyph-excel glyph-small"></i></span><span ng-bind="artifact.displayName"></span></span></td><td localized-header="PermissionCenter_Table_Header_Type" ng-bind="artifact.typeToString" sort-by="typeToString"></td><td localized-header="PermissionCenter_Table_Header_RelatedContent" sort-by="related.length"><div localize="PermissionCenter_Table_RelatedCount" localize-fragments><span fragment-index="0" ng-bind="artifact.related.length"></span></div></td><td localized-header="PermissionCenter_Table_Header_Members" sort-by="sharedWithCount"><div localize="PermissionCenter_Table_MemberCount" localize-fragments><span fragment-index="0" ng-bind="artifact.sharedWithCount"></span></div></td><td localized-header="PermissionCenter_Table_Header_Access" class="permissionArtifactAction"><div localize="PermissionCenter_Table_RemoveAll" ng-click="$ctrl.removeAllMembers(artifact)"></div></td></tr></table><div ng-show="$ctrl.tableConfig.data.length === 0" class="showNoContentText"><span localize="PermissionCenter_NoContent"></span></div></section></section></div>')}]);;var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)};"undefined"==typeof window.DEBUG&&(window.DEBUG=!0);var powerbi;!(function(e){var t;!(function(t){!(function(e){e[e.Report=0]="Report",e[e.QnA=1]="QnA",e[e.Url=2]="Url"})(t.ContentTypes||(t.ContentTypes={}));t.ContentTypes;!(function(e){e[e.Report=0]="Report",e[e.QnA=1]="QnA",e[e.Exploration=2]="Exploration",e[e.Dashboard=3]="Dashboard",e[e.Workbook=4]="Workbook",e[e.Insights=5]="Insights",e[e.Widget=6]="Widget"})(t.PinTileSource||(t.PinTileSource={}));t.PinTileSource;!(function(e){e[e.TitleAlpabetical=0]="TitleAlpabetical",e[e.TitleReverseAlphabetical=1]="TitleReverseAlphabetical",e[e.OwnerAlphabetical=2]="OwnerAlphabetical",e[e.OwnerReverseAlphabetical=3]="OwnerReverseAlphabetical",e[e.LastAccessDate=4]="LastAccessDate",e[e.LastAccessReverseDate=5]="LastAccessReverseDate",e[e.SharedTime=6]="SharedTime",e[e.SharedReverseTime=7]="SharedReverseTime"})(t.SelectSort||(t.SelectSort={}));t.SelectSort;!(function(e){e[e.Expand=0]="Expand",e[e.Collapse=1]="Collapse"})(t.NavPaneToggleAction||(t.NavPaneToggleAction={}));t.NavPaneToggleAction;!(function(e){e[e.NavigatorPaneGetDataButton=0]="NavigatorPaneGetDataButton",e[e.NavigatorPaneAddDatasetButton=1]="NavigatorPaneAddDatasetButton"})(t.OpenGetDataPageInteraction||(t.OpenGetDataPageInteraction={}));t.OpenGetDataPageInteraction;!(function(e){e[e.GetData=0]="GetData",e[e.Welcome=1]="Welcome",e[e.GroupWelcome=2]="GroupWelcome"})(t.GetDataSplashState||(t.GetDataSplashState={}));t.GetDataSplashState;!(function(e){e[e.NavPane=0]="NavPane",e[e.Breadcrumb=1]="Breadcrumb",e[e.SplashPage=2]="SplashPage"})(t.GetDataCategorySelectInteraction||(t.GetDataCategorySelectInteraction={}));t.GetDataCategorySelectInteraction;!(function(e){e[e.Dashboards=0]="Dashboards",e[e.Reports=1]="Reports",e[e.Datasets=2]="Datasets",e[e.Groups=3]="Groups"})(t.NavPaneSection||(t.NavPaneSection={}));t.NavPaneSection;!(function(e){e[e.NavigatorBarManageStorage=0]="NavigatorBarManageStorage",e[e.DirectUrl=1]="DirectUrl"})(t.QuotaOpenManageStorageInteraction||(t.QuotaOpenManageStorageInteraction={}));t.QuotaOpenManageStorageInteraction;!(function(e){e[e.Group=0]="Group",e[e.Personal=1]="Personal"})(t.QuotaOpenManageStorageContext||(t.QuotaOpenManageStorageContext={}));t.QuotaOpenManageStorageContext;!(function(e){e[e.NavigatorBarManageStorage=0]="NavigatorBarManageStorage"})(t.OpenUpgradeAccountInteraction||(t.OpenUpgradeAccountInteraction={}));t.OpenUpgradeAccountInteraction;!(function(e){e[e.DeleteOwnedModel=0]="DeleteOwnedModel",e[e.DeleteOwnedWorkbook=1]="DeleteOwnedWorkbook",e[e.RemoveSharedItem=2]="RemoveSharedItem"})(t.QuotaDeleteItemType||(t.QuotaDeleteItemType={}));t.QuotaDeleteItemType;!(function(e){e[e.Unknown=0]="Unknown",e[e.AddDashboard=1]="AddDashboard",e[e.ShareDashboard=2]="ShareDashboard",e[e.AcceptInvitation=3]="AcceptInvitation",e[e.AddTile=4]="AddTile",e[e.ReportSaveAs=5]="ReportSaveAs",e[e.OpenDataset=6]="OpenDataset",e[e.GetData=7]="GetData",e[e.PublishContentPack=8]="PublishContentPack",e[e.UpdateContentPack=9]="UpdateContentPack",e[e.PersonalizeContentPack=10]="PersonalizeContentPack",e[e.CreateStreamingDataset=11]="CreateStreamingDataset"})(t.QuotaCheckOperation||(t.QuotaCheckOperation={}));t.QuotaCheckOperation;!(function(e){e[e.Duplicate=0]="Duplicate",e[e.NoDuplicate=1]="NoDuplicate",e[e.MultipleDuplicates=2]="MultipleDuplicates"})(t.LocalFileUploadPossibility||(t.LocalFileUploadPossibility={}));t.LocalFileUploadPossibility;!(function(e){e[e.Dashboard=0]="Dashboard",e[e.Report=1]="Report"})(t.FavoriteType||(t.FavoriteType={}));t.FavoriteType;!(function(e){e[e.Settings=0]="Settings",e[e.IntroductionModal=1]="IntroductionModal",e[e.IntroductionModalClose=2]="IntroductionModalClose"})(t.From||(t.From={}));t.From;!(function(e){e[e.IntroductionModal=0]="IntroductionModal",e[e.HelpModal=1]="HelpModal"})(t.ModalFor||(t.ModalFor={}));t.ModalFor;!(function(e){e[e.Create=0]="Create",e[e.Delete=1]="Delete",e[e.Update=2]="Update"})(t.CreateUpdateDeleteAction||(t.CreateUpdateDeleteAction={}));t.CreateUpdateDeleteAction;!(function(e){e[e.Create=0]="Create",e[e.Update=1]="Update",e[e.Toggle=2]="Toggle",e[e.Delete=3]="Delete",e[e.Get=4]="Get"})(t.AlertRequestType||(t.AlertRequestType={}));t.AlertRequestType;!(function(e){e[e.Create=0]="Create",e[e.Update=1]="Update",e[e.Toggle=2]="Toggle",e[e.Delete=3]="Delete",e[e.Get=4]="Get"})(t.EmailSubscriptionRequestType||(t.EmailSubscriptionRequestType={}));t.EmailSubscriptionRequestType;!(function(e){e[e.UnifiedNotificationPane=0]="UnifiedNotificationPane"})(t.DataAlertNotificationSource||(t.DataAlertNotificationSource={}));t.DataAlertNotificationSource;!(function(e){e[e.OpenTile=0]="OpenTile"})(t.DataAlertNotificationAction||(t.DataAlertNotificationAction={}));t.DataAlertNotificationAction;!(function(e){e[e.DefaultMobileLayout=0]="DefaultMobileLayout",e[e.OriginalSerialLayout=1]="OriginalSerialLayout"})(t.MobileAuthoringResetType||(t.MobileAuthoringResetType={}));t.MobileAuthoringResetType;!(function(e){e[e.APIPush=0]="APIPush",e[e.PubNub=1]="PubNub"})(t.StreamingDatasetGalleryOption||(t.StreamingDatasetGalleryOption={}));t.StreamingDatasetGalleryOption;!(function(e){e[e.Dashboard=0]="Dashboard",e[e.OrgApp=1]="OrgApp",e[e.Report=2]="Report",e[e.Workbook=3]="Workbook"})(t.ContentListArtifactType||(t.ContentListArtifactType={}));t.ContentListArtifactType;!(function(e){e[e.ContentList=0]="ContentList",e[e.OrgApps=1]="OrgApps",e[e.RecentlyUsed=2]="RecentlyUsed",e[e.Favorites=3]="Favorites"})(t.ContentListArtifactSource||(t.ContentListArtifactSource={}));t.ContentListArtifactSource;t.SettingsSetShowGridlines=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={show:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Settings.SetShowGridlines",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={show:p.show,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsSetShowGridlinesLoggers&&(u.loggers=e.telemetry.SettingsSetShowGridlinesLoggers),u},t.SettingsSetSnapToGrid=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={snap:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Settings.SetSnapToGrid",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={snap:p.snap,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsSetSnapToGridLoggers&&(u.loggers=e.telemetry.SettingsSetSnapToGridLoggers),u},t.NavigationClickBreadcrumb=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={fromState:t,toState:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Navigation.ClickBreadcrumb",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={fromState:u.fromState,toState:u.toState,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.NavigationClickBreadcrumbLoggers&&(v.loggers=e.telemetry.NavigationClickBreadcrumbLoggers),v},t.NavigationToggle=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={isExpanded:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Navigation.Toggle",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={isExpanded:p.isExpanded,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.NavigationToggleLoggers&&(u.loggers=e.telemetry.NavigationToggleLoggers),u},t.NavigationClickLogo=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Navigation.ClickLogo",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.NavigationClickLogoLoggers&&(p.loggers=e.telemetry.NavigationClickLogoLoggers),p},t.ContentListSelectType=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={type:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.ContentList.SelectType",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={type:p.type,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ContentListSelectTypeLoggers&&(u.loggers=e.telemetry.ContentListSelectTypeLoggers),u},t.ContentListArtifactsCount=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={numberOfDashboards:t,numberOfReports:i,numberOfWorkbooks:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.ContentList.ArtifactsCount",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={numberOfDashboards:v.numberOfDashboards,numberOfReports:v.numberOfReports,numberOfWorkbooks:v.numberOfWorkbooks,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ContentListArtifactsCountLoggers&&(h.loggers=e.telemetry.ContentListArtifactsCountLoggers),h},t.ContentProviderInitializeContentProviders=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.ContentProvider.InitializeContentProviders",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ContentProviderInitializeContentProvidersLoggers&&(p.loggers=e.telemetry.ContentProviderInitializeContentProvidersLoggers),p},t.ContentProviderInitializeUserContentProviders=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.ContentProvider.InitializeUserContentProviders",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ContentProviderInitializeUserContentProvidersLoggers&&(p.loggers=e.telemetry.ContentProviderInitializeUserContentProvidersLoggers),p},t.DashboardAddDashboard=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={pendingRequestCount:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.AddDashboard",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.pendingRequestCount&&(t.pendingRequestCount=p.pendingRequestCount),"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardAddDashboardLoggers&&(u.loggers=e.telemetry.DashboardAddDashboardLoggers),u},t.DashboardDuplicateDashboard=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.DuplicateDashboard",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDuplicateDashboardLoggers&&(p.loggers=e.telemetry.DashboardDuplicateDashboardLoggers),p},t.BaseDashboardEvent=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={dashboardGuid:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"BaseDashboardEvent",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardGuid:p.dashboardGuid,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.BaseDashboardEventLoggers&&(u.loggers=e.telemetry.BaseDashboardEventLoggers),u},t.DashboardEvent=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={dashboardGuid:t,tileCount:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"DashboardEvent",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardGuid:u.dashboardGuid,tileCount:u.tileCount,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardEventLoggers&&(v.loggers=e.telemetry.DashboardEventLoggers),v},t.DashboardAddFavorite=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={favoriteId:t,groupId:i,favoriteType:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.AddFavorite",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={favoriteId:v.favoriteId,groupId:v.groupId,favoriteType:e.telemetry.FavoriteType[v.favoriteType],parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardAddFavoriteLoggers&&(h.loggers=e.telemetry.DashboardAddFavoriteLoggers),h},t.DashboardDeleteFavorite=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={favoriteObjectId:t,groupId:i,favoriteType:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.DeleteFavorite",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={favoriteObjectId:v.favoriteObjectId,groupId:v.groupId,favoriteType:e.telemetry.FavoriteType[v.favoriteType],parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDeleteFavoriteLoggers&&(h.loggers=e.telemetry.DashboardDeleteFavoriteLoggers),h},t.DashboardGetFavorites=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={countOfFavorites:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.GetFavorites",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={countOfFavorites:p.countOfFavorites,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardGetFavoritesLoggers&&(u.loggers=e.telemetry.DashboardGetFavoritesLoggers),u},t.DashboardClaimInvitation=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={dashboardGuid:t,invitationId:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.ClaimInvitation",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardGuid:u.dashboardGuid,invitationId:u.invitationId,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardClaimInvitationLoggers&&(v.loggers=e.telemetry.DashboardClaimInvitationLoggers),v},t.DashboardClaimInvitationRedirectToMobileLandingPage=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={userAgent:t,invitationId:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.ClaimInvitationRedirectToMobileLandingPage",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={userAgent:u.userAgent,invitationId:u.invitationId,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardClaimInvitationRedirectToMobileLandingPageLoggers&&(v.loggers=e.telemetry.DashboardClaimInvitationRedirectToMobileLandingPageLoggers),v},t.DashboardContentProviderPublish=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h){void 0===s&&(s=!1),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0);var g={contentProviderId:t,contentProviderKey:i,contentProviderDisplayText:o,contentProviderCategory:r,autoInstall:a,parentId:n,isError:s,errorSource:c,errorCode:l,errorMessage:d,activityName:p,activityId:u,isDebug:v,isCancelled:h},m={name:"PBI.Dashboard.ContentProviderPublish",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={contentProviderId:g.contentProviderId,contentProviderKey:g.contentProviderKey,contentProviderDisplayText:g.contentProviderDisplayText,contentProviderCategory:g.contentProviderCategory,autoInstall:g.autoInstall,parentId:g.parentId,isError:g.isError};return"undefined"!=typeof g.errorSource&&(t.errorSource=e.telemetry.ErrorSource[g.errorSource]),"undefined"!=typeof g.errorCode&&(t.errorCode=g.errorCode),"undefined"!=typeof g.errorMessage&&(t.errorMessage=g.errorMessage),"undefined"!=typeof g.activityName&&(t.activityName=g.activityName),"undefined"!=typeof g.activityId&&(t.activityId=g.activityId),"undefined"!=typeof g.isDebug&&(t.isDebug=g.isDebug),"undefined"!=typeof g.isCancelled&&(t.isCancelled=g.isCancelled),t},info:g,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardContentProviderPublishLoggers&&(m.loggers=e.telemetry.DashboardContentProviderPublishLoggers),m},t.DashboardContentProviderPublishDSID=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={DSID:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.ContentProviderPublishDSID",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={DSID:p.DSID,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardContentProviderPublishDSIDLoggers&&(u.loggers=e.telemetry.DashboardContentProviderPublishDSIDLoggers),u},t.CustomConfigHandlerSharePointDiscover=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={URL:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,
isDebug:l,isCancelled:d},u={name:"PBI.CustomConfigHandler.SharePointDiscover",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={URL:p.URL,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.CustomConfigHandlerSharePointDiscoverLoggers&&(u.loggers=e.telemetry.CustomConfigHandlerSharePointDiscoverLoggers),u},t.DashboardDeletePackage=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.DeletePackage",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDeletePackageLoggers&&(p.loggers=e.telemetry.DashboardDeletePackageLoggers),p},t.DashboardDeleteDashboard=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={dashboardGuid:t,tileCount:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.DeleteDashboard",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardGuid:u.dashboardGuid,tileCount:u.tileCount,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDeleteDashboardLoggers&&(v.loggers=e.telemetry.DashboardDeleteDashboardLoggers),v},t.DashboardDeleteDashboardUser=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.DeleteDashboardUser",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDeleteDashboardUserLoggers&&(p.loggers=e.telemetry.DashboardDeleteDashboardUserLoggers),p},t.DashboardDeleteTile=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.DeleteTile",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDeleteTileLoggers&&(p.loggers=e.telemetry.DashboardDeleteTileLoggers),p},t.DashboardDownloadIOSApp=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={downloadReferrer:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.DownloadIOSApp",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={downloadReferrer:p.downloadReferrer,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDownloadIOSAppLoggers&&(u.loggers=e.telemetry.DashboardDownloadIOSAppLoggers),u},t.DashboardDownloadCompanionApp=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={downloadReferrer:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.DownloadCompanionApp",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={downloadReferrer:p.downloadReferrer,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDownloadCompanionAppLoggers&&(u.loggers=e.telemetry.DashboardDownloadCompanionAppLoggers),u},t.DashboardDownloadExcelPublisher=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={downloadReferrer:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.DownloadExcelPublisher",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={downloadReferrer:p.downloadReferrer,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDownloadExcelPublisherLoggers&&(u.loggers=e.telemetry.DashboardDownloadExcelPublisherLoggers),u},t.DashboardDownloadGateways=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={downloadReferrer:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.DownloadGateways",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={downloadReferrer:p.downloadReferrer,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDownloadGatewaysLoggers&&(u.loggers=e.telemetry.DashboardDownloadGatewaysLoggers),u},t.DashboardEditDashboardPermissions=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={dashboardGuid:t,permission:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.EditDashboardPermissions",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardGuid:u.dashboardGuid,permission:u.permission,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardEditDashboardPermissionsLoggers&&(v.loggers=e.telemetry.DashboardEditDashboardPermissionsLoggers),v},t.DashboardTileLayoutChanged=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={tilesChanged:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.TileLayoutChanged",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={tilesChanged:p.tilesChanged,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardTileLayoutChangedLoggers&&(u.loggers=e.telemetry.DashboardTileLayoutChangedLoggers),u},t.DashboardRefreshPackage=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.RefreshPackage",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRefreshPackageLoggers&&(p.loggers=e.telemetry.DashboardRefreshPackageLoggers),p},t.DashboardRefreshAllPackages=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.RefreshAllPackages",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRefreshAllPackagesLoggers&&(p.loggers=e.telemetry.DashboardRefreshAllPackagesLoggers),p},t.DashboardResyncSession=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={resyncReason:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.ResyncSession",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={resyncReason:p.resyncReason,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardResyncSessionLoggers&&(u.loggers=e.telemetry.DashboardResyncSessionLoggers),u},t.DashboardInFocusWorkbook=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={tileId:t,workbookId:i,packageId:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.InFocusWorkbook",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={tileId:v.tileId,workbookId:v.workbookId,packageId:v.packageId,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardInFocusWorkbookLoggers&&(h.loggers=e.telemetry.DashboardInFocusWorkbookLoggers),h},t.DashboardReloadWorkbook=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.ReloadWorkbook",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardReloadWorkbookLoggers&&(p.loggers=e.telemetry.DashboardReloadWorkbookLoggers),p},t.DashboardCalculateWorkbook=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.CalculateWorkbook",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardCalculateWorkbookLoggers&&(p.loggers=e.telemetry.DashboardCalculateWorkbookLoggers),p},t.DashboardEditTileProperties=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h){void 0===s&&(s=!1),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0);var g={readOnlyTileEdited:t,titleEdited:i,subTitleEdited:o,actionEdited:r,configEdited:a,parentId:n,isError:s,errorSource:c,errorCode:l,errorMessage:d,activityName:p,activityId:u,isDebug:v,isCancelled:h},m={name:"PBI.Dashboard.EditTileProperties",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={readOnlyTileEdited:g.readOnlyTileEdited,titleEdited:g.titleEdited,subTitleEdited:g.subTitleEdited,actionEdited:g.actionEdited,configEdited:g.configEdited,parentId:g.parentId,isError:g.isError};return"undefined"!=typeof g.errorSource&&(t.errorSource=e.telemetry.ErrorSource[g.errorSource]),"undefined"!=typeof g.errorCode&&(t.errorCode=g.errorCode),"undefined"!=typeof g.errorMessage&&(t.errorMessage=g.errorMessage),"undefined"!=typeof g.activityName&&(t.activityName=g.activityName),"undefined"!=typeof g.activityId&&(t.activityId=g.activityId),"undefined"!=typeof g.isDebug&&(t.isDebug=g.isDebug),"undefined"!=typeof g.isCancelled&&(t.isCancelled=g.isCancelled),t},info:g,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardEditTilePropertiesLoggers&&(m.loggers=e.telemetry.DashboardEditTilePropertiesLoggers),m},t.InFocusModeSaveTileProperties=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={contentEdited:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.InFocusMode.SaveTileProperties",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={contentEdited:p.contentEdited,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.InFocusModeSaveTilePropertiesLoggers&&(u.loggers=e.telemetry.InFocusModeSaveTilePropertiesLoggers),u},t.DashboardExportDashboard=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={dashboardGuid:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.ExportDashboard",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardGuid:p.dashboardGuid,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardExportDashboardLoggers&&(u.loggers=e.telemetry.DashboardExportDashboardLoggers),u},t.DashboardLoadDevTools=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.LoadDevTools",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardLoadDevToolsLoggers&&(p.loggers=e.telemetry.DashboardLoadDevToolsLoggers),p},t.BaseAppDashboardEvent=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={originalDashboardGuid:t,appGuid:i,dashboardGuid:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"BaseAppDashboardEvent",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={originalDashboardGuid:v.originalDashboardGuid,appGuid:v.appGuid,dashboardGuid:v.dashboardGuid,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.BaseAppDashboardEventLoggers&&(h.loggers=e.telemetry.BaseAppDashboardEventLoggers),h},t.DashboardOpenDashboard=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m,f,y,b,S,w,C,D,I,T){void 0===y&&(y=!1),void 0===b&&(b=void 0),void 0===S&&(S=void 0),void 0===w&&(w=void 0),void 0===C&&(C=void 0),void 0===D&&(D=void 0),void 0===I&&(I=void 0),void 0===T&&(T=void 0);var M={isSample:t,hasResourcePackages:i,hasOnPremiseModel:o,compositeTilesCount:r,iframeTilesCount:a,imageTilesCount:n,modelTilesCount:s,ssrsTilesCount:c,workbookTilesCount:l,reportTilesCount:d,workbookTileNoImage:p,otherTileTypes:u,realTimeTilesCount:v,originalDashboardGuid:h,appGuid:g,dashboardGuid:m,parentId:f,isError:y,errorSource:b,errorCode:S,errorMessage:w,activityName:C,activityId:D,isDebug:I,isCancelled:T},E={name:"PBI.Dashboard.OpenDashboard",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={isSample:M.isSample,hasResourcePackages:M.hasResourcePackages,hasOnPremiseModel:M.hasOnPremiseModel,compositeTilesCount:M.compositeTilesCount,iframeTilesCount:M.iframeTilesCount,imageTilesCount:M.imageTilesCount,modelTilesCount:M.modelTilesCount,ssrsTilesCount:M.ssrsTilesCount,workbookTilesCount:M.workbookTilesCount,reportTilesCount:M.reportTilesCount,workbookTileNoImage:M.workbookTileNoImage,otherTileTypes:M.otherTileTypes,realTimeTilesCount:M.realTimeTilesCount,originalDashboardGuid:M.originalDashboardGuid,appGuid:M.appGuid,dashboardGuid:M.dashboardGuid,parentId:M.parentId,isError:M.isError};return"undefined"!=typeof M.errorSource&&(t.errorSource=e.telemetry.ErrorSource[M.errorSource]),"undefined"!=typeof M.errorCode&&(t.errorCode=M.errorCode),"undefined"!=typeof M.errorMessage&&(t.errorMessage=M.errorMessage),"undefined"!=typeof M.activityName&&(t.activityName=M.activityName),"undefined"!=typeof M.activityId&&(t.activityId=M.activityId),"undefined"!=typeof M.isDebug&&(t.isDebug=M.isDebug),"undefined"!=typeof M.isCancelled&&(t.isCancelled=M.isCancelled),t},info:M,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardOpenDashboardLoggers&&(E.loggers=e.telemetry.DashboardOpenDashboardLoggers),E},t.DashboardLoadDashboardTileVisual=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={tileCount:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.LoadDashboardTileVisual",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={tileCount:p.tileCount,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardLoadDashboardTileVisualLoggers&&(u.loggers=e.telemetry.DashboardLoadDashboardTileVisualLoggers),u},t.DashboardOpenReportFromNavigationPane=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={contentProviderId:t,contentProviderDisplayText:i,reason:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.OpenReportFromNavigationPane",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={contentProviderId:v.contentProviderId,contentProviderDisplayText:v.contentProviderDisplayText,reason:v.reason,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),
"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardOpenReportFromNavigationPaneLoggers&&(h.loggers=e.telemetry.DashboardOpenReportFromNavigationPaneLoggers),h},t.DashboardOpenReportFromUrl=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={contentProviderId:t,contentProviderDisplayText:i,reason:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.OpenReportFromUrl",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={contentProviderId:v.contentProviderId,contentProviderDisplayText:v.contentProviderDisplayText,reason:v.reason,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardOpenReportFromUrlLoggers&&(h.loggers=e.telemetry.DashboardOpenReportFromUrlLoggers),h},t.DashboardNavigatingReportUrl=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={contentProviderId:t,contentProviderDisplayText:i,reason:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.NavigatingReportUrl",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={contentProviderId:v.contentProviderId,contentProviderDisplayText:v.contentProviderDisplayText,reason:v.reason,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardNavigatingReportUrlLoggers&&(h.loggers=e.telemetry.DashboardNavigatingReportUrlLoggers),h},t.DashboardOpenDataSet=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={contentProviderId:t,contentProviderDisplayText:i,reason:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.OpenDataSet",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={contentProviderId:v.contentProviderId,contentProviderDisplayText:v.contentProviderDisplayText,reason:v.reason,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardOpenDataSetLoggers&&(h.loggers=e.telemetry.DashboardOpenDataSetLoggers),h},t.DashboardOpenDataSetFromUrl=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={contentProviderId:t,contentProviderDisplayText:i,reason:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.OpenDataSetFromUrl",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={contentProviderId:v.contentProviderId,contentProviderDisplayText:v.contentProviderDisplayText,reason:v.reason,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardOpenDataSetFromUrlLoggers&&(h.loggers=e.telemetry.DashboardOpenDataSetFromUrlLoggers),h},t.DashboardNavigatingDatasetUrl=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={contentProviderId:t,contentProviderDisplayText:i,reason:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.NavigatingDatasetUrl",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={contentProviderId:v.contentProviderId,contentProviderDisplayText:v.contentProviderDisplayText,reason:v.reason,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardNavigatingDatasetUrlLoggers&&(h.loggers=e.telemetry.DashboardNavigatingDatasetUrlLoggers),h},t.DashboardPinTile=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m,f){void 0===d&&(d=!1),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0),void 0===g&&(g=void 0),void 0===m&&(m=void 0),void 0===f&&(f=void 0);var y={visualType:t,source:i,reason:o,unsupportedVisualPinned:r,contentProviderType:a,isCustomVisual:n,widgetType:s,reportPageContainsScriptVisuals:c,parentId:l,isError:d,errorSource:p,errorCode:u,errorMessage:v,activityName:h,activityId:g,isDebug:m,isCancelled:f},b={name:"PBI.Dashboard.PinTile",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={visualType:y.visualType,source:e.telemetry.PinTileSource[y.source],reason:y.reason,unsupportedVisualPinned:y.unsupportedVisualPinned,contentProviderType:y.contentProviderType,isCustomVisual:y.isCustomVisual,widgetType:y.widgetType,reportPageContainsScriptVisuals:y.reportPageContainsScriptVisuals,parentId:y.parentId,isError:y.isError};return"undefined"!=typeof y.errorSource&&(t.errorSource=e.telemetry.ErrorSource[y.errorSource]),"undefined"!=typeof y.errorCode&&(t.errorCode=y.errorCode),"undefined"!=typeof y.errorMessage&&(t.errorMessage=y.errorMessage),"undefined"!=typeof y.activityName&&(t.activityName=y.activityName),"undefined"!=typeof y.activityId&&(t.activityId=y.activityId),"undefined"!=typeof y.isDebug&&(t.isDebug=y.isDebug),"undefined"!=typeof y.isCancelled&&(t.isCancelled=y.isCancelled),t},info:y,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardPinTileLoggers&&(b.loggers=e.telemetry.DashboardPinTileLoggers),b},t.DashboardPinWorkbookTile=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m,f){void 0===d&&(d=!1),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0),void 0===g&&(g=void 0),void 0===m&&(m=void 0),void 0===f&&(f=void 0);var y={visualType:t,source:i,reason:o,unsupportedVisualPinned:r,contentProviderType:a,smartSelection:n,namedItemType:s,storageProvider:c,parentId:l,isError:d,errorSource:p,errorCode:u,errorMessage:v,activityName:h,activityId:g,isDebug:m,isCancelled:f},b={name:"PBI.Dashboard.PinWorkbookTile",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={visualType:y.visualType,source:e.telemetry.PinTileSource[y.source],reason:y.reason,unsupportedVisualPinned:y.unsupportedVisualPinned,contentProviderType:y.contentProviderType,smartSelection:y.smartSelection,namedItemType:y.namedItemType,storageProvider:y.storageProvider,parentId:y.parentId,isError:y.isError};return"undefined"!=typeof y.errorSource&&(t.errorSource=e.telemetry.ErrorSource[y.errorSource]),"undefined"!=typeof y.errorCode&&(t.errorCode=y.errorCode),"undefined"!=typeof y.errorMessage&&(t.errorMessage=y.errorMessage),"undefined"!=typeof y.activityName&&(t.activityName=y.activityName),"undefined"!=typeof y.activityId&&(t.activityId=y.activityId),"undefined"!=typeof y.isDebug&&(t.isDebug=y.isDebug),"undefined"!=typeof y.isCancelled&&(t.isCancelled=y.isCancelled),t},info:y,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardPinWorkbookTileLoggers&&(b.loggers=e.telemetry.DashboardPinWorkbookTileLoggers),b},t.DashboardPinTileFromDashboard=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h){void 0===s&&(s=!1),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0);var g={visualType:t,source:i,reason:o,unsupportedVisualPinned:r,contentProviderType:a,parentId:n,isError:s,errorSource:c,errorCode:l,errorMessage:d,activityName:p,activityId:u,isDebug:v,isCancelled:h},m={name:"PBI.Dashboard.PinTileFromDashboard",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={visualType:g.visualType,source:e.telemetry.PinTileSource[g.source],reason:g.reason,unsupportedVisualPinned:g.unsupportedVisualPinned,contentProviderType:g.contentProviderType,parentId:g.parentId,isError:g.isError};return"undefined"!=typeof g.errorSource&&(t.errorSource=e.telemetry.ErrorSource[g.errorSource]),"undefined"!=typeof g.errorCode&&(t.errorCode=g.errorCode),"undefined"!=typeof g.errorMessage&&(t.errorMessage=g.errorMessage),"undefined"!=typeof g.activityName&&(t.activityName=g.activityName),"undefined"!=typeof g.activityId&&(t.activityId=g.activityId),"undefined"!=typeof g.isDebug&&(t.isDebug=g.isDebug),"undefined"!=typeof g.isCancelled&&(t.isCancelled=g.isCancelled),t},info:g,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardPinTileFromDashboardLoggers&&(m.loggers=e.telemetry.DashboardPinTileFromDashboardLoggers),m},t.DashboardUpdateDashboardsCache=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={characterCount:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.UpdateDashboardsCache",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={characterCount:p.characterCount,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardUpdateDashboardsCacheLoggers&&(u.loggers=e.telemetry.DashboardUpdateDashboardsCacheLoggers),u},t.DashboardCachedDashboardsFound=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.CachedDashboardsFound",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardCachedDashboardsFoundLoggers&&(p.loggers=e.telemetry.DashboardCachedDashboardsFoundLoggers),p},t.DashboardInitializeContainer=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={errorReason:t,userSwitchedGroups:i,userIsBrowsingArchivedContent:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.InitializeContainer",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={errorReason:v.errorReason,userSwitchedGroups:v.userSwitchedGroups,userIsBrowsingArchivedContent:v.userIsBrowsingArchivedContent,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardInitializeContainerLoggers&&(h.loggers=e.telemetry.DashboardInitializeContainerLoggers),h},t.DashboardInitializeContentProviderConfig=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={name:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.InitializeContentProviderConfig",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={name:p.name,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardInitializeContentProviderConfigLoggers&&(u.loggers=e.telemetry.DashboardInitializeContentProviderConfigLoggers),u},t.DashboardInitializeActivityPane=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.InitializeActivityPane",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardInitializeActivityPaneLoggers&&(p.loggers=e.telemetry.DashboardInitializeActivityPaneLoggers),p},t.DashboardActivityPaneConnectionSettingsShown=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.ActivityPaneConnectionSettingsShown",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardActivityPaneConnectionSettingsShownLoggers&&(p.loggers=e.telemetry.DashboardActivityPaneConnectionSettingsShownLoggers),p},t.DashboardInviteDashboardUsers=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m,f,y){void 0===p&&(p=!1),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0),void 0===g&&(g=void 0),void 0===m&&(m=void 0),void 0===f&&(f=void 0),void 0===y&&(y=void 0);var b={numberOfEmailAddresses:t,numberOfObjectIds:i,lengthOfMessage:o,isDefaultMessage:r,isReshared:a,reshareEnabled:n,dashboardGuid:s,notifyViaEmail:c,numberOfExternalEmails:l,parentId:d,isError:p,errorSource:u,errorCode:v,errorMessage:h,activityName:g,activityId:m,isDebug:f,isCancelled:y},S={name:"PBI.Dashboard.InviteDashboardUsers",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={numberOfEmailAddresses:b.numberOfEmailAddresses,numberOfObjectIds:b.numberOfObjectIds,lengthOfMessage:b.lengthOfMessage,isDefaultMessage:b.isDefaultMessage,isReshared:b.isReshared,reshareEnabled:b.reshareEnabled,dashboardGuid:b.dashboardGuid,notifyViaEmail:b.notifyViaEmail,numberOfExternalEmails:b.numberOfExternalEmails,parentId:b.parentId,isError:b.isError};return"undefined"!=typeof b.errorSource&&(t.errorSource=e.telemetry.ErrorSource[b.errorSource]),"undefined"!=typeof b.errorCode&&(t.errorCode=b.errorCode),"undefined"!=typeof b.errorMessage&&(t.errorMessage=b.errorMessage),"undefined"!=typeof b.activityName&&(t.activityName=b.activityName),"undefined"!=typeof b.activityId&&(t.activityId=b.activityId),"undefined"!=typeof b.isDebug&&(t.isDebug=b.isDebug),"undefined"!=typeof b.isCancelled&&(t.isCancelled=b.isCancelled),t},info:b,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardInviteDashboardUsersLoggers&&(S.loggers=e.telemetry.DashboardInviteDashboardUsersLoggers),S},t.DashboardSharingEmailAddressExceededLimit=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={numberOfEmailAddresses:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.SharingEmailAddressExceededLimit",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={numberOfEmailAddresses:p.numberOfEmailAddresses,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardSharingEmailAddressExceededLimitLoggers&&(u.loggers=e.telemetry.DashboardSharingEmailAddressExceededLimitLoggers),u},t.DashboardSharingEmailAddressUnsupportedGroup=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.SharingEmailAddressUnsupportedGroup",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardSharingEmailAddressUnsupportedGroupLoggers&&(p.loggers=e.telemetry.DashboardSharingEmailAddressUnsupportedGroupLoggers),p},t.DashboardSharingWithInvalidDomain=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.SharingWithInvalidDomain",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardSharingWithInvalidDomainLoggers&&(p.loggers=e.telemetry.DashboardSharingWithInvalidDomainLoggers),p},t.DashboardSharingWithBlockedDomain=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.SharingWithBlockedDomain",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardSharingWithBlockedDomainLoggers&&(p.loggers=e.telemetry.DashboardSharingWithBlockedDomainLoggers),p},t.DashboardOpenShareDialog=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.OpenShareDialog",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardOpenShareDialogLoggers&&(p.loggers=e.telemetry.DashboardOpenShareDialogLoggers),p},t.DashboardSendShareInvitation=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.SendShareInvitation",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardSendShareInvitationLoggers&&(p.loggers=e.telemetry.DashboardSendShareInvitationLoggers),p},t.DashboardRequestDashboardAccess=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={dashboardObjectId:t,messageLength:i,isDefaultMessage:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.RequestDashboardAccess",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardObjectId:v.dashboardObjectId,messageLength:v.messageLength,isDefaultMessage:v.isDefaultMessage,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRequestDashboardAccessLoggers&&(h.loggers=e.telemetry.DashboardRequestDashboardAccessLoggers),h},t.DashboardDeleteDashboardAccessRequest=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={dashboardObjectId:t,kind:i,id:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.DeleteDashboardAccessRequest",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardObjectId:v.dashboardObjectId,kind:v.kind,id:v.id,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]
};return"undefined"!=typeof e.telemetry.DashboardDeleteDashboardAccessRequestLoggers&&(h.loggers=e.telemetry.DashboardDeleteDashboardAccessRequestLoggers),h},t.DashboardLoadDashboardUsers=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.LoadDashboardUsers",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardLoadDashboardUsersLoggers&&(p.loggers=e.telemetry.DashboardLoadDashboardUsersLoggers),p},t.DashboardOpenConnectionsDialog=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.OpenConnectionsDialog",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardOpenConnectionsDialogLoggers&&(p.loggers=e.telemetry.DashboardOpenConnectionsDialogLoggers),p},t.DashboardOpenTile=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h){void 0===s&&(s=!1),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0);var g={tileType:t,tileId:i,reason:o,contentProviderId:r,contentProviderDisplayText:a,parentId:n,isError:s,errorSource:c,errorCode:l,errorMessage:d,activityName:p,activityId:u,isDebug:v,isCancelled:h},m={name:"PBI.Dashboard.OpenTile",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={tileType:e.telemetry.ContentTypes[g.tileType],tileId:g.tileId,reason:g.reason,contentProviderId:g.contentProviderId,contentProviderDisplayText:g.contentProviderDisplayText,parentId:g.parentId,isError:g.isError};return"undefined"!=typeof g.errorSource&&(t.errorSource=e.telemetry.ErrorSource[g.errorSource]),"undefined"!=typeof g.errorCode&&(t.errorCode=g.errorCode),"undefined"!=typeof g.errorMessage&&(t.errorMessage=g.errorMessage),"undefined"!=typeof g.activityName&&(t.activityName=g.activityName),"undefined"!=typeof g.activityId&&(t.activityId=g.activityId),"undefined"!=typeof g.isDebug&&(t.isDebug=g.isDebug),"undefined"!=typeof g.isCancelled&&(t.isCancelled=g.isCancelled),t},info:g,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardOpenTileLoggers&&(m.loggers=e.telemetry.DashboardOpenTileLoggers),m},t.DashboardOpenRefreshConnectionDialog=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.OpenRefreshConnectionDialog",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardOpenRefreshConnectionDialogLoggers&&(p.loggers=e.telemetry.DashboardOpenRefreshConnectionDialogLoggers),p},t.DashboardSettingGroupChanged=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={settingGroupTypeChangedFrom:t,settingGroupTypeChangedTo:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.SettingGroupChanged",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={settingGroupTypeChangedFrom:u.settingGroupTypeChangedFrom,settingGroupTypeChangedTo:u.settingGroupTypeChangedTo,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardSettingGroupChangedLoggers&&(v.loggers=e.telemetry.DashboardSettingGroupChangedLoggers),v},t.DashboardForceScheduleRefreshUseITGW=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={isForceScheduleRefreshUseITGW_Status:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.ForceScheduleRefreshUseITGW",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={isForceScheduleRefreshUseITGW_Status:p.isForceScheduleRefreshUseITGW_Status,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardForceScheduleRefreshUseITGWLoggers&&(u.loggers=e.telemetry.DashboardForceScheduleRefreshUseITGWLoggers),u},t.DashboardRenameDashboard=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={tileCount:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.RenameDashboard",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={tileCount:p.tileCount,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRenameDashboardLoggers&&(u.loggers=e.telemetry.DashboardRenameDashboardLoggers),u},t.DashboardViewWorkbook=function(t,i,o,r,a,n,s,c,l,d,p,u,v){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0);var h={etagHash:t,permissions:i,storageProvider:o,contentProvider:r,parentId:a,isError:n,errorSource:s,errorCode:c,errorMessage:l,activityName:d,activityId:p,isDebug:u,isCancelled:v},g={name:"PBI.Dashboard.ViewWorkbook",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={etagHash:h.etagHash,permissions:h.permissions,storageProvider:h.storageProvider,contentProvider:h.contentProvider,parentId:h.parentId,isError:h.isError};return"undefined"!=typeof h.errorSource&&(t.errorSource=e.telemetry.ErrorSource[h.errorSource]),"undefined"!=typeof h.errorCode&&(t.errorCode=h.errorCode),"undefined"!=typeof h.errorMessage&&(t.errorMessage=h.errorMessage),"undefined"!=typeof h.activityName&&(t.activityName=h.activityName),"undefined"!=typeof h.activityId&&(t.activityId=h.activityId),"undefined"!=typeof h.isDebug&&(t.isDebug=h.isDebug),"undefined"!=typeof h.isCancelled&&(t.isCancelled=h.isCancelled),t},info:h,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardViewWorkbookLoggers&&(g.loggers=e.telemetry.DashboardViewWorkbookLoggers),g},t.DashboardWorkbookEditedInPowerBICausedPinBlock=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.WorkbookEditedInPowerBICausedPinBlock",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardWorkbookEditedInPowerBICausedPinBlockLoggers&&(p.loggers=e.telemetry.DashboardWorkbookEditedInPowerBICausedPinBlockLoggers),p},t.DashboardEditWorkbook=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={etagHash:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.EditWorkbook",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={etagHash:p.etagHash,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardEditWorkbookLoggers&&(u.loggers=e.telemetry.DashboardEditWorkbookLoggers),u},t.DashboardWorkbookViewedExternallyDueToAnError=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={etagHash:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.WorkbookViewedExternallyDueToAnError",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={etagHash:p.etagHash,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardWorkbookViewedExternallyDueToAnErrorLoggers&&(u.loggers=e.telemetry.DashboardWorkbookViewedExternallyDueToAnErrorLoggers),u},t.DashboardSwitchView=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={from:t,to:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.SwitchView",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={from:u.from,to:u.to,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardSwitchViewLoggers&&(v.loggers=e.telemetry.DashboardSwitchViewLoggers),v},t.DashboardUpdateActiveDashboard=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={dashboardGuid:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.UpdateActiveDashboard",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardGuid:p.dashboardGuid,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardUpdateActiveDashboardLoggers&&(u.loggers=e.telemetry.DashboardUpdateActiveDashboardLoggers),u},t.DashboardRefreshTileData=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={dashboardGuid:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.RefreshTileData",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardGuid:p.dashboardGuid,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRefreshTileDataLoggers&&(u.loggers=e.telemetry.DashboardRefreshTileDataLoggers),u},t.DashboardSetHomeDashboard=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={homeDashboardId:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.SetHomeDashboard",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={homeDashboardId:p.homeDashboardId,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardSetHomeDashboardLoggers&&(u.loggers=e.telemetry.DashboardSetHomeDashboardLoggers),u},t.DashboardDisableHomeDashboard=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={homeDashboardId:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.DisableHomeDashboard",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={homeDashboardId:p.homeDashboardId,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDisableHomeDashboardLoggers&&(u.loggers=e.telemetry.DashboardDisableHomeDashboardLoggers),u},t.DashboardRefreshDashboardTiles=function(t,i,o,r,a,n,s,c,l,d,p,u,v){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0);var h={dashboardGuid:t,totalTiles:i,numberOfScriptTiles:o,numberOfliveReportsWithR:r,parentId:a,isError:n,errorSource:s,errorCode:c,errorMessage:l,activityName:d,activityId:p,isDebug:u,isCancelled:v},g={name:"PBI.Dashboard.RefreshDashboardTiles",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardGuid:h.dashboardGuid,totalTiles:h.totalTiles,numberOfScriptTiles:h.numberOfScriptTiles,numberOfliveReportsWithR:h.numberOfliveReportsWithR,parentId:h.parentId,isError:h.isError};return"undefined"!=typeof h.errorSource&&(t.errorSource=e.telemetry.ErrorSource[h.errorSource]),"undefined"!=typeof h.errorCode&&(t.errorCode=h.errorCode),"undefined"!=typeof h.errorMessage&&(t.errorMessage=h.errorMessage),"undefined"!=typeof h.activityName&&(t.activityName=h.activityName),"undefined"!=typeof h.activityId&&(t.activityId=h.activityId),"undefined"!=typeof h.isDebug&&(t.isDebug=h.isDebug),"undefined"!=typeof h.isCancelled&&(t.isCancelled=h.isCancelled),t},info:h,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRefreshDashboardTilesLoggers&&(g.loggers=e.telemetry.DashboardRefreshDashboardTilesLoggers),g},t.GroupsSwitchGroup=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={groupObjectId:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Groups.SwitchGroup",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={groupObjectId:p.groupObjectId,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.GroupsSwitchGroupLoggers&&(u.loggers=e.telemetry.GroupsSwitchGroupLoggers),u},t.DashboardShowGettingStartedPopup=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={key:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.ShowGettingStartedPopup",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={key:p.key,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardShowGettingStartedPopupLoggers&&(u.loggers=e.telemetry.DashboardShowGettingStartedPopupLoggers),u},t.BaseDataSetTopLevelCustomerAction=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={providerId:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"BaseDataSetTopLevelCustomerAction",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={providerId:p.providerId,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.BaseDataSetTopLevelCustomerActionLoggers&&(u.loggers=e.telemetry.BaseDataSetTopLevelCustomerActionLoggers),u},t.DashboardManageDatasetsLanding=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.ManageDatasetsLanding",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardManageDatasetsLandingLoggers&&(p.loggers=e.telemetry.DashboardManageDatasetsLandingLoggers),p},t.DashboardDatasetClickScheduleRefresh=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={providerId:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.DatasetClickScheduleRefresh",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={providerId:p.providerId,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDatasetClickScheduleRefreshLoggers&&(u.loggers=e.telemetry.DashboardDatasetClickScheduleRefreshLoggers),u},t.DashboardWorkbookClickScheduleRefresh=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={providerId:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.WorkbookClickScheduleRefresh",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={providerId:p.providerId,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardWorkbookClickScheduleRefreshLoggers&&(u.loggers=e.telemetry.DashboardWorkbookClickScheduleRefreshLoggers),u},t.DashboardDatasetClickRefreshNow=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={providerId:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.DatasetClickRefreshNow",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={providerId:p.providerId,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDatasetClickRefreshNowLoggers&&(u.loggers=e.telemetry.DashboardDatasetClickRefreshNowLoggers),u},t.DashboardWorkbookClickRefreshNow=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={providerId:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.WorkbookClickRefreshNow",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={providerId:p.providerId,parentId:p.parentId,
isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardWorkbookClickRefreshNowLoggers&&(u.loggers=e.telemetry.DashboardWorkbookClickRefreshNowLoggers),u},t.DashboardDatasetClickDelete=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={providerId:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.DatasetClickDelete",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={providerId:p.providerId,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDatasetClickDeleteLoggers&&(u.loggers=e.telemetry.DashboardDatasetClickDeleteLoggers),u},t.DashboardDatasetClickExplore=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={providerId:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.DatasetClickExplore",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={providerId:p.providerId,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDatasetClickExploreLoggers&&(u.loggers=e.telemetry.DashboardDatasetClickExploreLoggers),u},t.DashboardDatasetClickInsights=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={providerId:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.DatasetClickInsights",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={providerId:p.providerId,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDatasetClickInsightsLoggers&&(u.loggers=e.telemetry.DashboardDatasetClickInsightsLoggers),u},t.DashboardDatasetClickRename=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={providerId:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.DatasetClickRename",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={providerId:p.providerId,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDatasetClickRenameLoggers&&(u.loggers=e.telemetry.DashboardDatasetClickRenameLoggers),u},t.DashboardClickPersonalize=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={providerId:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.ClickPersonalize",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={providerId:p.providerId,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardClickPersonalizeLoggers&&(u.loggers=e.telemetry.DashboardClickPersonalizeLoggers),u},t.DashboardGetGatewayStatus=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.GetGatewayStatus",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardGetGatewayStatusLoggers&&(p.loggers=e.telemetry.DashboardGetGatewayStatusLoggers),p},t.DashboardGetRefreshInfoForFlyout=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.GetRefreshInfoForFlyout",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardGetRefreshInfoForFlyoutLoggers&&(p.loggers=e.telemetry.DashboardGetRefreshInfoForFlyoutLoggers),p},t.DashboardDataModelSelected=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={type:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.DataModelSelected",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={type:p.type,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDataModelSelectedLoggers&&(u.loggers=e.telemetry.DashboardDataModelSelectedLoggers),u},t.DashboardExpandCollapseNavigatorPane=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={action:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.ExpandCollapseNavigatorPane",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={action:e.telemetry.NavPaneToggleAction[p.action],parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardExpandCollapseNavigatorPaneLoggers&&(u.loggers=e.telemetry.DashboardExpandCollapseNavigatorPaneLoggers),u},t.DashboardOpenGetDataPage=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={interaction:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.OpenGetDataPage",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={interaction:e.telemetry.OpenGetDataPageInteraction[p.interaction],parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardOpenGetDataPageLoggers&&(u.loggers=e.telemetry.DashboardOpenGetDataPageLoggers),u},t.DashboardExpandCollapseNavigatorPaneSection=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h){void 0===s&&(s=!1),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0);var g={action:t,section:i,numDashboards:o,numReports:r,numDatasets:a,parentId:n,isError:s,errorSource:c,errorCode:l,errorMessage:d,activityName:p,activityId:u,isDebug:v,isCancelled:h},m={name:"PBI.Dashboard.ExpandCollapseNavigatorPaneSection",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={action:e.telemetry.NavPaneToggleAction[g.action],section:e.telemetry.NavPaneSection[g.section],numDashboards:g.numDashboards,numReports:g.numReports,numDatasets:g.numDatasets,parentId:g.parentId,isError:g.isError};return"undefined"!=typeof g.errorSource&&(t.errorSource=e.telemetry.ErrorSource[g.errorSource]),"undefined"!=typeof g.errorCode&&(t.errorCode=g.errorCode),"undefined"!=typeof g.errorMessage&&(t.errorMessage=g.errorMessage),"undefined"!=typeof g.activityName&&(t.activityName=g.activityName),"undefined"!=typeof g.activityId&&(t.activityId=g.activityId),"undefined"!=typeof g.isDebug&&(t.isDebug=g.isDebug),"undefined"!=typeof g.isCancelled&&(t.isCancelled=g.isCancelled),t},info:g,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardExpandCollapseNavigatorPaneSectionLoggers&&(m.loggers=e.telemetry.DashboardExpandCollapseNavigatorPaneSectionLoggers),m},t.DashboardFilterNavigatorPaneItems=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={numDashboards:t,numReports:i,numDatasets:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.FilterNavigatorPaneItems",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={numDashboards:v.numDashboards,numReports:v.numReports,numDatasets:v.numDatasets,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardFilterNavigatorPaneItemsLoggers&&(h.loggers=e.telemetry.DashboardFilterNavigatorPaneItemsLoggers),h},t.DashboardRefreshAndGetUserMetadata=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.RefreshAndGetUserMetadata",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRefreshAndGetUserMetadataLoggers&&(p.loggers=e.telemetry.DashboardRefreshAndGetUserMetadataLoggers),p},t.DashboardGetGroups=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.GetGroups",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardGetGroupsLoggers&&(p.loggers=e.telemetry.DashboardGetGroupsLoggers),p},t.DashboardContentPackPublish=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m,f){void 0===d&&(d=!1),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0),void 0===g&&(g=void 0),void 0===m&&(m=void 0),void 0===f&&(f=void 0);var y={isUpdateContentPack:t,numberOfDashboards:i,numberOfReports:o,numberOfModels:r,numberOfWorkbooks:a,isMyWorkspace:n,numberOfGroupsSharedTo:s,isUserError:c,parentId:l,isError:d,errorSource:p,errorCode:u,errorMessage:v,activityName:h,activityId:g,isDebug:m,isCancelled:f},b={name:"PBI.Dashboard.ContentPackPublish",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={isUpdateContentPack:y.isUpdateContentPack,numberOfDashboards:y.numberOfDashboards,numberOfReports:y.numberOfReports,numberOfModels:y.numberOfModels,numberOfWorkbooks:y.numberOfWorkbooks,isMyWorkspace:y.isMyWorkspace,numberOfGroupsSharedTo:y.numberOfGroupsSharedTo,isUserError:y.isUserError,parentId:y.parentId,isError:y.isError};return"undefined"!=typeof y.errorSource&&(t.errorSource=e.telemetry.ErrorSource[y.errorSource]),"undefined"!=typeof y.errorCode&&(t.errorCode=y.errorCode),"undefined"!=typeof y.errorMessage&&(t.errorMessage=y.errorMessage),"undefined"!=typeof y.activityName&&(t.activityName=y.activityName),"undefined"!=typeof y.activityId&&(t.activityId=y.activityId),"undefined"!=typeof y.isDebug&&(t.isDebug=y.isDebug),"undefined"!=typeof y.isCancelled&&(t.isCancelled=y.isCancelled),t},info:y,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardContentPackPublishLoggers&&(b.loggers=e.telemetry.DashboardContentPackPublishLoggers),b},t.DashboardContentPackDirty=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={numberOfContentPacksDirty:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.ContentPackDirty",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={numberOfContentPacksDirty:p.numberOfContentPacksDirty,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardContentPackDirtyLoggers&&(u.loggers=e.telemetry.DashboardContentPackDirtyLoggers),u},t.DashboardDeleteContentPack=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g){void 0===c&&(c=!1),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0),void 0===g&&(g=void 0);var m={isSharedWithEntireOrganization:t,numberOfDashboards:i,numberOfReports:o,numberOfModels:r,numberOfWorkbooks:a,numberOfGroupsSharedTo:n,parentId:s,isError:c,errorSource:l,errorCode:d,errorMessage:p,activityName:u,activityId:v,isDebug:h,isCancelled:g},f={name:"PBI.Dashboard.DeleteContentPack",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={isSharedWithEntireOrganization:m.isSharedWithEntireOrganization,numberOfDashboards:m.numberOfDashboards,numberOfReports:m.numberOfReports,numberOfModels:m.numberOfModels,numberOfWorkbooks:m.numberOfWorkbooks,numberOfGroupsSharedTo:m.numberOfGroupsSharedTo,parentId:m.parentId,isError:m.isError};return"undefined"!=typeof m.errorSource&&(t.errorSource=e.telemetry.ErrorSource[m.errorSource]),"undefined"!=typeof m.errorCode&&(t.errorCode=m.errorCode),"undefined"!=typeof m.errorMessage&&(t.errorMessage=m.errorMessage),"undefined"!=typeof m.activityName&&(t.activityName=m.activityName),"undefined"!=typeof m.activityId&&(t.activityId=m.activityId),"undefined"!=typeof m.isDebug&&(t.isDebug=m.isDebug),"undefined"!=typeof m.isCancelled&&(t.isCancelled=m.isCancelled),t},info:m,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDeleteContentPackLoggers&&(f.loggers=e.telemetry.DashboardDeleteContentPackLoggers),f},t.DashboardDeleteTemplateOrganizationApp=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.DeleteTemplateOrganizationApp",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardDeleteTemplateOrganizationAppLoggers&&(p.loggers=e.telemetry.DashboardDeleteTemplateOrganizationAppLoggers),p},t.DashboardViewContentPacks=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.ViewContentPacks",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardViewContentPacksLoggers&&(p.loggers=e.telemetry.DashboardViewContentPacksLoggers),p},t.DashboardContentPackPublishingGroupAddressExceededLimit=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={numberOfGroupAddresses:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.ContentPackPublishingGroupAddressExceededLimit",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={numberOfGroupAddresses:p.numberOfGroupAddresses,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardContentPackPublishingGroupAddressExceededLimitLoggers&&(u.loggers=e.telemetry.DashboardContentPackPublishingGroupAddressExceededLimitLoggers),u},t.DashboardContentPackPersonalize=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.ContentPackPersonalize",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardContentPackPersonalizeLoggers&&(p.loggers=e.telemetry.DashboardContentPackPersonalizeLoggers),p},t.DashboardFirstUse=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.FirstUse",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardFirstUseLoggers&&(p.loggers=e.telemetry.DashboardFirstUseLoggers),p},t.DashboardPresentNewVisualizationTheme=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.PresentNewVisualizationTheme",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardPresentNewVisualizationThemeLoggers&&(p.loggers=e.telemetry.DashboardPresentNewVisualizationThemeLoggers),p},t.DashboardWorkbookPinabilityShown=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.WorkbookPinabilityShown",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),
t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardWorkbookPinabilityShownLoggers&&(p.loggers=e.telemetry.DashboardWorkbookPinabilityShownLoggers),p},t.DashboardGetDataSplash=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={state:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.GetDataSplash",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={state:e.telemetry.GetDataSplashState[p.state],parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardGetDataSplashLoggers&&(u.loggers=e.telemetry.DashboardGetDataSplashLoggers),u},t.DashboardGetDataSplashIntroVideo=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.GetDataSplashIntroVideo",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardGetDataSplashIntroVideoLoggers&&(p.loggers=e.telemetry.DashboardGetDataSplashIntroVideoLoggers),p},t.DashboardGetDataCategorySelect=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={categoryName:t,interaction:i,prevCategoryName:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.GetDataCategorySelect",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={categoryName:v.categoryName,interaction:e.telemetry.GetDataCategorySelectInteraction[v.interaction],prevCategoryName:v.prevCategoryName,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardGetDataCategorySelectLoggers&&(h.loggers=e.telemetry.DashboardGetDataCategorySelectLoggers),h},t.DashboardGetDataProviderSelect=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={categoryName:t,providerName:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.GetDataProviderSelect",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={categoryName:u.categoryName,providerName:u.providerName,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardGetDataProviderSelectLoggers&&(v.loggers=e.telemetry.DashboardGetDataProviderSelectLoggers),v},t.DashboardGetDataProviderAccordionConnect=function(t,i,o,r,a,n,s,c,l,d,p,u,v){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0);var h={categoryName:t,providerName:i,userLicenseCheckFailed:o,userStorageQuotaCheckFailed:r,parentId:a,isError:n,errorSource:s,errorCode:c,errorMessage:l,activityName:d,activityId:p,isDebug:u,isCancelled:v},g={name:"PBI.Dashboard.GetDataProviderAccordionConnect",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={categoryName:h.categoryName,providerName:h.providerName,userLicenseCheckFailed:h.userLicenseCheckFailed,userStorageQuotaCheckFailed:h.userStorageQuotaCheckFailed,parentId:h.parentId,isError:h.isError};return"undefined"!=typeof h.errorSource&&(t.errorSource=e.telemetry.ErrorSource[h.errorSource]),"undefined"!=typeof h.errorCode&&(t.errorCode=h.errorCode),"undefined"!=typeof h.errorMessage&&(t.errorMessage=h.errorMessage),"undefined"!=typeof h.activityName&&(t.activityName=h.activityName),"undefined"!=typeof h.activityId&&(t.activityId=h.activityId),"undefined"!=typeof h.isDebug&&(t.isDebug=h.isDebug),"undefined"!=typeof h.isCancelled&&(t.isCancelled=h.isCancelled),t},info:h,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardGetDataProviderAccordionConnectLoggers&&(g.loggers=e.telemetry.DashboardGetDataProviderAccordionConnectLoggers),g},t.DashboardInFocusModeSelected=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={tileType:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.InFocusModeSelected",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={tileType:p.tileType,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardInFocusModeSelectedLoggers&&(u.loggers=e.telemetry.DashboardInFocusModeSelectedLoggers),u},t.DashboardCloseUserAccount=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={reason:t,comment:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.CloseUserAccount",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={reason:u.reason,comment:u.comment,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardCloseUserAccountLoggers&&(v.loggers=e.telemetry.DashboardCloseUserAccountLoggers),v},t.DashboardSaveDashboardSettings=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={dataClassificationUpdated:t,qnaEnabledUpdated:i,gravityEnabledUpdated:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.SaveDashboardSettings",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dataClassificationUpdated:v.dataClassificationUpdated,qnaEnabledUpdated:v.qnaEnabledUpdated,gravityEnabledUpdated:v.gravityEnabledUpdated,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardSaveDashboardSettingsLoggers&&(h.loggers=e.telemetry.DashboardSaveDashboardSettingsLoggers),h},t.DashboardInitializeSettingsDashboardsModel=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.InitializeSettingsDashboardsModel",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardInitializeSettingsDashboardsModelLoggers&&(p.loggers=e.telemetry.DashboardInitializeSettingsDashboardsModelLoggers),p},t.DashboardInitializeSettingsDatasetModel=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.InitializeSettingsDatasetModel",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardInitializeSettingsDatasetModelLoggers&&(p.loggers=e.telemetry.DashboardInitializeSettingsDatasetModelLoggers),p},t.DashboardTestDataSourceConnection=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.TestDataSourceConnection",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardTestDataSourceConnectionLoggers&&(p.loggers=e.telemetry.DashboardTestDataSourceConnectionLoggers),p},t.DashboardGetRefreshHistoriesOnRefreshFailures=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.GetRefreshHistoriesOnRefreshFailures",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardGetRefreshHistoriesOnRefreshFailuresLoggers&&(p.loggers=e.telemetry.DashboardGetRefreshHistoriesOnRefreshFailuresLoggers),p},t.DashboardLoadTileData=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={tileId:t,modelId:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.LoadTileData",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={tileId:u.tileId,modelId:u.modelId,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardLoadTileDataLoggers&&(v.loggers=e.telemetry.DashboardLoadTileDataLoggers),v},t.DashboardOwnershipFilterSelected=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={selectedFilter:t,isMyWorkspace:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.OwnershipFilterSelected",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={selectedFilter:u.selectedFilter,isMyWorkspace:u.isMyWorkspace,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardOwnershipFilterSelectedLoggers&&(v.loggers=e.telemetry.DashboardOwnershipFilterSelectedLoggers),v},t.AppInitialAppLoad=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={initialState:t,finalState:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.App.InitialAppLoad",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={initialState:u.initialState,finalState:u.finalState,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.AppInitialAppLoadLoggers&&(v.loggers=e.telemetry.AppInitialAppLoadLoggers),v},t.GroupEditorCreateGroup=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g){void 0===c&&(c=!1),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0),void 0===g&&(g=void 0);var m={groupCreated:t,groupId:i,isReadOnly:o,adminCount:r,memberCount:a,invitedMemberCount:n,parentId:s,isError:c,errorSource:l,errorCode:d,errorMessage:p,activityName:u,activityId:v,isDebug:h,isCancelled:g},f={name:"PBI.GroupEditor.CreateGroup",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={groupCreated:m.groupCreated,groupId:m.groupId,isReadOnly:m.isReadOnly,adminCount:m.adminCount,memberCount:m.memberCount,invitedMemberCount:m.invitedMemberCount,parentId:m.parentId,isError:m.isError};return"undefined"!=typeof m.errorSource&&(t.errorSource=e.telemetry.ErrorSource[m.errorSource]),"undefined"!=typeof m.errorCode&&(t.errorCode=m.errorCode),"undefined"!=typeof m.errorMessage&&(t.errorMessage=m.errorMessage),"undefined"!=typeof m.activityName&&(t.activityName=m.activityName),"undefined"!=typeof m.activityId&&(t.activityId=m.activityId),"undefined"!=typeof m.isDebug&&(t.isDebug=m.isDebug),"undefined"!=typeof m.isCancelled&&(t.isCancelled=m.isCancelled),t},info:m,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.GroupEditorCreateGroupLoggers&&(f.loggers=e.telemetry.GroupEditorCreateGroupLoggers),f},t.GroupEditorValidateGroupMembers=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.GroupEditor.ValidateGroupMembers",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.GroupEditorValidateGroupMembersLoggers&&(p.loggers=e.telemetry.GroupEditorValidateGroupMembersLoggers),p},t.GroupEditorGetGroupMembers=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.GroupEditor.GetGroupMembers",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.GroupEditorGetGroupMembersLoggers&&(p.loggers=e.telemetry.GroupEditorGetGroupMembersLoggers),p},t.GroupEditorUpdateGroup=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g){void 0===c&&(c=!1),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0),void 0===g&&(g=void 0);var m={groupUpdated:t,groupId:i,isGroupReadOnly:o,adminCount:r,memberCount:a,invitedMemberCount:n,parentId:s,isError:c,errorSource:l,errorCode:d,errorMessage:p,activityName:u,activityId:v,isDebug:h,isCancelled:g},f={name:"PBI.GroupEditor.UpdateGroup",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={groupUpdated:m.groupUpdated,groupId:m.groupId,isGroupReadOnly:m.isGroupReadOnly,adminCount:m.adminCount,memberCount:m.memberCount,invitedMemberCount:m.invitedMemberCount,parentId:m.parentId,isError:m.isError};return"undefined"!=typeof m.errorSource&&(t.errorSource=e.telemetry.ErrorSource[m.errorSource]),"undefined"!=typeof m.errorCode&&(t.errorCode=m.errorCode),"undefined"!=typeof m.errorMessage&&(t.errorMessage=m.errorMessage),"undefined"!=typeof m.activityName&&(t.activityName=m.activityName),"undefined"!=typeof m.activityId&&(t.activityId=m.activityId),"undefined"!=typeof m.isDebug&&(t.isDebug=m.isDebug),"undefined"!=typeof m.isCancelled&&(t.isCancelled=m.isCancelled),t},info:m,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.GroupEditorUpdateGroupLoggers&&(f.loggers=e.telemetry.GroupEditorUpdateGroupLoggers),f},t.GroupEditorUserLeaveGroup=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h){void 0===s&&(s=!1),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0);var g={groupUpdated:t,groupId:i,isGroupReadOnly:o,adminCount:r,memberCount:a,parentId:n,isError:s,errorSource:c,errorCode:l,errorMessage:d,activityName:p,activityId:u,isDebug:v,isCancelled:h},m={name:"PBI.GroupEditor.UserLeaveGroup",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={groupUpdated:g.groupUpdated,groupId:g.groupId,isGroupReadOnly:g.isGroupReadOnly,adminCount:g.adminCount,memberCount:g.memberCount,parentId:g.parentId,isError:g.isError};return"undefined"!=typeof g.errorSource&&(t.errorSource=e.telemetry.ErrorSource[g.errorSource]),"undefined"!=typeof g.errorCode&&(t.errorCode=g.errorCode),"undefined"!=typeof g.errorMessage&&(t.errorMessage=g.errorMessage),"undefined"!=typeof g.activityName&&(t.activityName=g.activityName),"undefined"!=typeof g.activityId&&(t.activityId=g.activityId),"undefined"!=typeof g.isDebug&&(t.isDebug=g.isDebug),"undefined"!=typeof g.isCancelled&&(t.isCancelled=g.isCancelled),t},info:g,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.GroupEditorUserLeaveGroupLoggers&&(m.loggers=e.telemetry.GroupEditorUserLeaveGroupLoggers),m},t.GroupEditorDeleteGroup=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.GroupEditor.DeleteGroup",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.GroupEditorDeleteGroupLoggers&&(p.loggers=e.telemetry.GroupEditorDeleteGroupLoggers),p},t.GroupEditorValidateGroupId=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.GroupEditor.ValidateGroupId",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.GroupEditorValidateGroupIdLoggers&&(p.loggers=e.telemetry.GroupEditorValidateGroupIdLoggers),p},t.QuotaOpenManageStoragePage=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={interaction:t,context:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Quota.OpenManageStoragePage",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={interaction:e.telemetry.QuotaOpenManageStorageInteraction[u.interaction],context:e.telemetry.QuotaOpenManageStorageContext[u.context],parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QuotaOpenManageStoragePageLoggers&&(v.loggers=e.telemetry.QuotaOpenManageStoragePageLoggers),v},t.QuotaStorageUsage=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h){void 0===s&&(s=!1),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0);var g={isPremiumUser:t,context:i,ownedUsageInMB:o,sharedUsageInMB:r,quotaLimitInMB:a,parentId:n,isError:s,errorSource:c,errorCode:l,errorMessage:d,activityName:p,activityId:u,isDebug:v,isCancelled:h},m={name:"PBI.Quota.StorageUsage",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={isPremiumUser:g.isPremiumUser,context:e.telemetry.QuotaOpenManageStorageContext[g.context],ownedUsageInMB:g.ownedUsageInMB,sharedUsageInMB:g.sharedUsageInMB,quotaLimitInMB:g.quotaLimitInMB,parentId:g.parentId,isError:g.isError};return"undefined"!=typeof g.errorSource&&(t.errorSource=e.telemetry.ErrorSource[g.errorSource]),"undefined"!=typeof g.errorCode&&(t.errorCode=g.errorCode),"undefined"!=typeof g.errorMessage&&(t.errorMessage=g.errorMessage),"undefined"!=typeof g.activityName&&(t.activityName=g.activityName),"undefined"!=typeof g.activityId&&(t.activityId=g.activityId),"undefined"!=typeof g.isDebug&&(t.isDebug=g.isDebug),"undefined"!=typeof g.isCancelled&&(t.isCancelled=g.isCancelled),t},info:g,privateFields:[],
orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QuotaStorageUsageLoggers&&(m.loggers=e.telemetry.QuotaStorageUsageLoggers),m},t.QuotaManageStorageDelete=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m){void 0===l&&(l=!1),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0),void 0===g&&(g=void 0),void 0===m&&(m=void 0);var f={isPremiumUser:t,context:i,itemType:o,sizeInMBToDelete:r,ownedUsageInMB:a,sharedUsageInMB:n,quotaLimitInMB:s,parentId:c,isError:l,errorSource:d,errorCode:p,errorMessage:u,activityName:v,activityId:h,isDebug:g,isCancelled:m},y={name:"PBI.Quota.ManageStorageDelete",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={isPremiumUser:f.isPremiumUser,context:e.telemetry.QuotaOpenManageStorageContext[f.context],itemType:e.telemetry.QuotaDeleteItemType[f.itemType],sizeInMBToDelete:f.sizeInMBToDelete,ownedUsageInMB:f.ownedUsageInMB,sharedUsageInMB:f.sharedUsageInMB,quotaLimitInMB:f.quotaLimitInMB,parentId:f.parentId,isError:f.isError};return"undefined"!=typeof f.errorSource&&(t.errorSource=e.telemetry.ErrorSource[f.errorSource]),"undefined"!=typeof f.errorCode&&(t.errorCode=f.errorCode),"undefined"!=typeof f.errorMessage&&(t.errorMessage=f.errorMessage),"undefined"!=typeof f.activityName&&(t.activityName=f.activityName),"undefined"!=typeof f.activityId&&(t.activityId=f.activityId),"undefined"!=typeof f.isDebug&&(t.isDebug=f.isDebug),"undefined"!=typeof f.isCancelled&&(t.isCancelled=f.isCancelled),t},info:f,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QuotaManageStorageDeleteLoggers&&(y.loggers=e.telemetry.QuotaManageStorageDeleteLoggers),y},t.QuotaExceeded=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g){void 0===c&&(c=!1),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0),void 0===g&&(g=void 0);var m={isPremiumUser:t,context:i,operation:o,ownedUsageInMB:r,sharedUsageInMB:a,quotaLimitInMB:n,parentId:s,isError:c,errorSource:l,errorCode:d,errorMessage:p,activityName:u,activityId:v,isDebug:h,isCancelled:g},f={name:"PBI.Quota.Exceeded",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={isPremiumUser:m.isPremiumUser,context:e.telemetry.QuotaOpenManageStorageContext[m.context],operation:e.telemetry.QuotaCheckOperation[m.operation],ownedUsageInMB:m.ownedUsageInMB,sharedUsageInMB:m.sharedUsageInMB,quotaLimitInMB:m.quotaLimitInMB,parentId:m.parentId,isError:m.isError};return"undefined"!=typeof m.errorSource&&(t.errorSource=e.telemetry.ErrorSource[m.errorSource]),"undefined"!=typeof m.errorCode&&(t.errorCode=m.errorCode),"undefined"!=typeof m.errorMessage&&(t.errorMessage=m.errorMessage),"undefined"!=typeof m.activityName&&(t.activityName=m.activityName),"undefined"!=typeof m.activityId&&(t.activityId=m.activityId),"undefined"!=typeof m.isDebug&&(t.isDebug=m.isDebug),"undefined"!=typeof m.isCancelled&&(t.isCancelled=m.isCancelled),t},info:m,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QuotaExceededLoggers&&(f.loggers=e.telemetry.QuotaExceededLoggers),f},t.OpenUpgradeAccountPage=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={interaction:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.OpenUpgradeAccountPage",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={interaction:e.telemetry.OpenUpgradeAccountInteraction[p.interaction],parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.OpenUpgradeAccountPageLoggers&&(u.loggers=e.telemetry.OpenUpgradeAccountPageLoggers),u},t.PrivacyInitializeSettingsModel=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Privacy.InitializeSettingsModel",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.PrivacyInitializeSettingsModelLoggers&&(p.loggers=e.telemetry.PrivacyInitializeSettingsModelLoggers),p},t.PrivacySaveSettingsModel=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Privacy.SaveSettingsModel",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.PrivacySaveSettingsModelLoggers&&(p.loggers=e.telemetry.PrivacySaveSettingsModelLoggers),p},t.SettingsEsriSaveModel=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={esriEnabled:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Settings.EsriSaveModel",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={esriEnabled:p.esriEnabled,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsEsriSaveModelLoggers&&(u.loggers=e.telemetry.SettingsEsriSaveModelLoggers),u},t.SettingsDeleteAllDatasources=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Settings.DeleteAllDatasources",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsDeleteAllDatasourcesLoggers&&(p.loggers=e.telemetry.SettingsDeleteAllDatasourcesLoggers),p},t.SettingsDeveloperModeEnabled=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Settings.DeveloperModeEnabled",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsDeveloperModeEnabledLoggers&&(p.loggers=e.telemetry.SettingsDeveloperModeEnabledLoggers),p},t.SettingsTakeoverDatasources=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Settings.TakeoverDatasources",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsTakeoverDatasourcesLoggers&&(p.loggers=e.telemetry.SettingsTakeoverDatasourcesLoggers),p},t.PrivacySendPowerBIEmail=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Privacy.SendPowerBIEmail",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.PrivacySendPowerBIEmailLoggers&&(p.loggers=e.telemetry.PrivacySendPowerBIEmailLoggers),p},t.LocaleSaveLocaleSetting=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={locale:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Locale.SaveLocaleSetting",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={locale:p.locale,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.LocaleSaveLocaleSettingLoggers&&(u.loggers=e.telemetry.LocaleSaveLocaleSettingLoggers),u},t.SettingsLoadSettingsData=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Settings.LoadSettingsData",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsLoadSettingsDataLoggers&&(p.loggers=e.telemetry.SettingsLoadSettingsDataLoggers),p},t.SettingsEnterFullScreen=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={startingState:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Settings.EnterFullScreen",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={startingState:p.startingState,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsEnterFullScreenLoggers&&(u.loggers=e.telemetry.SettingsEnterFullScreenLoggers),u},t.SettingsScaleContent=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Settings.ScaleContent",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.SettingsScaleContentLoggers&&(p.loggers=e.telemetry.SettingsScaleContentLoggers),p},t.LocalFileContentProviderLocalFileUpload=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={fileExtension:t,possibility:i,DSID:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.LocalFile.ContentProviderLocalFileUpload",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={fileExtension:v.fileExtension,possibility:e.telemetry.LocalFileUploadPossibility[v.possibility],DSID:v.DSID,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.LocalFileContentProviderLocalFileUploadLoggers&&(h.loggers=e.telemetry.LocalFileContentProviderLocalFileUploadLoggers),h},t.LocalFileContentProviderLocalFileUploadReplace=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={isReplaced:t,isUpdateFromWorkbookFlow:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.LocalFile.ContentProviderLocalFileUploadReplace",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={isReplaced:u.isReplaced,isUpdateFromWorkbookFlow:u.isUpdateFromWorkbookFlow,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.LocalFileContentProviderLocalFileUploadReplaceLoggers&&(v.loggers=e.telemetry.LocalFileContentProviderLocalFileUploadReplaceLoggers),v},t.PreviewConceptualModel=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={enabled:t,from:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Preview.ConceptualModel",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={enabled:u.enabled,from:e.telemetry.From[u.from],parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.PreviewConceptualModelLoggers&&(v.loggers=e.telemetry.PreviewConceptualModelLoggers),v},t.PreviewFeaturesIntroductionModalLogged=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Preview.FeaturesIntroductionModalLogged",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.PreviewFeaturesIntroductionModalLoggedLoggers&&(p.loggers=e.telemetry.PreviewFeaturesIntroductionModalLoggedLoggers),p},t.PreviewFeaturesModalShown=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={modalFor:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Preview.FeaturesModalShown",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={modalFor:e.telemetry.ModalFor[p.modalFor],parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.PreviewFeaturesModalShownLoggers&&(u.loggers=e.telemetry.PreviewFeaturesModalShownLoggers),u},t.QRCodeQRCodeDialogShown=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g){void 0===c&&(c=!1),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0),void 0===g&&(g=void 0);var m={groupObjectId:t,dashboardObjectId:i,tileObjectId:o,appId:r,originalDashboardObjectId:a,originalTileObjectId:n,parentId:s,isError:c,errorSource:l,errorCode:d,errorMessage:p,activityName:u,activityId:v,isDebug:h,isCancelled:g},f={name:"PBI.QRCode.QRCodeDialogShown",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={groupObjectId:m.groupObjectId,dashboardObjectId:m.dashboardObjectId,tileObjectId:m.tileObjectId,appId:m.appId,originalDashboardObjectId:m.originalDashboardObjectId,originalTileObjectId:m.originalTileObjectId,parentId:m.parentId,isError:m.isError};return"undefined"!=typeof m.errorSource&&(t.errorSource=e.telemetry.ErrorSource[m.errorSource]),"undefined"!=typeof m.errorCode&&(t.errorCode=m.errorCode),"undefined"!=typeof m.errorMessage&&(t.errorMessage=m.errorMessage),"undefined"!=typeof m.activityName&&(t.activityName=m.activityName),"undefined"!=typeof m.activityId&&(t.activityId=m.activityId),"undefined"!=typeof m.isDebug&&(t.isDebug=m.isDebug),"undefined"!=typeof m.isCancelled&&(t.isCancelled=m.isCancelled),t},info:m,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QRCodeQRCodeDialogShownLoggers&&(f.loggers=e.telemetry.QRCodeQRCodeDialogShownLoggers),f},t.QRCodeShortUrlCreated=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g){void 0===c&&(c=!1),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0),void 0===g&&(g=void 0);var m={groupObjectId:t,dashboardObjectId:i,tileObjectId:o,appId:r,originalDashboardObjectId:a,originalTileObjectId:n,parentId:s,isError:c,errorSource:l,errorCode:d,errorMessage:p,activityName:u,activityId:v,isDebug:h,isCancelled:g},f={name:"PBI.QRCode.ShortUrlCreated",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={groupObjectId:m.groupObjectId,dashboardObjectId:m.dashboardObjectId,tileObjectId:m.tileObjectId,appId:m.appId,originalDashboardObjectId:m.originalDashboardObjectId,originalTileObjectId:m.originalTileObjectId,parentId:m.parentId,isError:m.isError};return"undefined"!=typeof m.errorSource&&(t.errorSource=e.telemetry.ErrorSource[m.errorSource]),"undefined"!=typeof m.errorCode&&(t.errorCode=m.errorCode),"undefined"!=typeof m.errorMessage&&(t.errorMessage=m.errorMessage),"undefined"!=typeof m.activityName&&(t.activityName=m.activityName),"undefined"!=typeof m.activityId&&(t.activityId=m.activityId),"undefined"!=typeof m.isDebug&&(t.isDebug=m.isDebug),"undefined"!=typeof m.isCancelled&&(t.isCancelled=m.isCancelled),t},info:m,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QRCodeShortUrlCreatedLoggers&&(f.loggers=e.telemetry.QRCodeShortUrlCreatedLoggers),f},t.QRCodeShortUrlFailed=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m){void 0===l&&(l=!1),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0),void 0===g&&(g=void 0),void 0===m&&(m=void 0);var f={groupObjectId:t,dashboardObjectId:i,tileObjectId:o,errorStatus:r,appId:a,originalDashboardObjectId:n,originalTileObjectId:s,parentId:c,isError:l,errorSource:d,errorCode:p,errorMessage:u,activityName:v,activityId:h,isDebug:g,isCancelled:m},y={name:"PBI.QRCode.ShortUrlFailed",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={groupObjectId:f.groupObjectId,dashboardObjectId:f.dashboardObjectId,tileObjectId:f.tileObjectId,errorStatus:f.errorStatus,appId:f.appId,originalDashboardObjectId:f.originalDashboardObjectId,originalTileObjectId:f.originalTileObjectId,parentId:f.parentId,isError:f.isError};return"undefined"!=typeof f.errorSource&&(t.errorSource=e.telemetry.ErrorSource[f.errorSource]),"undefined"!=typeof f.errorCode&&(t.errorCode=f.errorCode),"undefined"!=typeof f.errorMessage&&(t.errorMessage=f.errorMessage),"undefined"!=typeof f.activityName&&(t.activityName=f.activityName),"undefined"!=typeof f.activityId&&(t.activityId=f.activityId),"undefined"!=typeof f.isDebug&&(t.isDebug=f.isDebug),"undefined"!=typeof f.isCancelled&&(t.isCancelled=f.isCancelled),t},info:f,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QRCodeShortUrlFailedLoggers&&(y.loggers=e.telemetry.QRCodeShortUrlFailedLoggers),y},t.QRCodeQRCodeReportDialogShown=function(t,i,o,r,a,n,s,c,l,d,p,u,v){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0);var h={groupObjectId:t,reportObjectId:i,appId:o,originalReportObjectId:r,parentId:a,isError:n,errorSource:s,errorCode:c,errorMessage:l,activityName:d,activityId:p,isDebug:u,isCancelled:v},g={name:"PBI.QRCode.QRCodeReportDialogShown",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={groupObjectId:h.groupObjectId,reportObjectId:h.reportObjectId,appId:h.appId,originalReportObjectId:h.originalReportObjectId,parentId:h.parentId,isError:h.isError};return"undefined"!=typeof h.errorSource&&(t.errorSource=e.telemetry.ErrorSource[h.errorSource]),"undefined"!=typeof h.errorCode&&(t.errorCode=h.errorCode),"undefined"!=typeof h.errorMessage&&(t.errorMessage=h.errorMessage),"undefined"!=typeof h.activityName&&(t.activityName=h.activityName),"undefined"!=typeof h.activityId&&(t.activityId=h.activityId),"undefined"!=typeof h.isDebug&&(t.isDebug=h.isDebug),"undefined"!=typeof h.isCancelled&&(t.isCancelled=h.isCancelled),t},info:h,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QRCodeQRCodeReportDialogShownLoggers&&(g.loggers=e.telemetry.QRCodeQRCodeReportDialogShownLoggers),g},t.QRCodeReportShortUrlCreated=function(t,i,o,r,a,n,s,c,l,d,p,u,v){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0);var h={groupObjectId:t,reportObjectId:i,appId:o,originalReportObjectId:r,parentId:a,isError:n,errorSource:s,errorCode:c,errorMessage:l,activityName:d,activityId:p,isDebug:u,isCancelled:v},g={name:"PBI.QRCode.ReportShortUrlCreated",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={groupObjectId:h.groupObjectId,reportObjectId:h.reportObjectId,appId:h.appId,originalReportObjectId:h.originalReportObjectId,parentId:h.parentId,isError:h.isError};return"undefined"!=typeof h.errorSource&&(t.errorSource=e.telemetry.ErrorSource[h.errorSource]),"undefined"!=typeof h.errorCode&&(t.errorCode=h.errorCode),"undefined"!=typeof h.errorMessage&&(t.errorMessage=h.errorMessage),"undefined"!=typeof h.activityName&&(t.activityName=h.activityName),"undefined"!=typeof h.activityId&&(t.activityId=h.activityId),"undefined"!=typeof h.isDebug&&(t.isDebug=h.isDebug),
"undefined"!=typeof h.isCancelled&&(t.isCancelled=h.isCancelled),t},info:h,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QRCodeReportShortUrlCreatedLoggers&&(g.loggers=e.telemetry.QRCodeReportShortUrlCreatedLoggers),g},t.QRCodeReportShortUrlFailed=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h){void 0===s&&(s=!1),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0);var g={groupObjectId:t,reportObjectId:i,errorStatus:o,appId:r,originalReportObjectId:a,parentId:n,isError:s,errorSource:c,errorCode:l,errorMessage:d,activityName:p,activityId:u,isDebug:v,isCancelled:h},m={name:"PBI.QRCode.ReportShortUrlFailed",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={groupObjectId:g.groupObjectId,reportObjectId:g.reportObjectId,errorStatus:g.errorStatus,appId:g.appId,originalReportObjectId:g.originalReportObjectId,parentId:g.parentId,isError:g.isError};return"undefined"!=typeof g.errorSource&&(t.errorSource=e.telemetry.ErrorSource[g.errorSource]),"undefined"!=typeof g.errorCode&&(t.errorCode=g.errorCode),"undefined"!=typeof g.errorMessage&&(t.errorMessage=g.errorMessage),"undefined"!=typeof g.activityName&&(t.activityName=g.activityName),"undefined"!=typeof g.activityId&&(t.activityId=g.activityId),"undefined"!=typeof g.isDebug&&(t.isDebug=g.isDebug),"undefined"!=typeof g.isCancelled&&(t.isCancelled=g.isCancelled),t},info:g,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.QRCodeReportShortUrlFailedLoggers&&(m.loggers=e.telemetry.QRCodeReportShortUrlFailedLoggers),m},t.ManageEmbedDeleteEmbedCode=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={snapshotId:t,embedType:i,disabled:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.ManageEmbed.DeleteEmbedCode",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={snapshotId:v.snapshotId,embedType:v.embedType,disabled:v.disabled,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ManageEmbedDeleteEmbedCodeLoggers&&(h.loggers=e.telemetry.ManageEmbedDeleteEmbedCodeLoggers),h},t.ManageEmbedToggleEmbedCode=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={snapshotId:t,embedType:i,disabled:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.ManageEmbed.ToggleEmbedCode",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={snapshotId:v.snapshotId,embedType:v.embedType,disabled:v.disabled,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ManageEmbedToggleEmbedCodeLoggers&&(h.loggers=e.telemetry.ManageEmbedToggleEmbedCodeLoggers),h},t.ManageEmbedLoadEmbeddedResources=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={reportId:t,embedType:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.ManageEmbed.LoadEmbeddedResources",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={reportId:u.reportId,embedType:u.embedType,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ManageEmbedLoadEmbeddedResourcesLoggers&&(v.loggers=e.telemetry.ManageEmbedLoadEmbeddedResourcesLoggers),v},t.ManageEmbedLoadAllLiveEmbeddedResources=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.ManageEmbed.LoadAllLiveEmbeddedResources",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ManageEmbedLoadAllLiveEmbeddedResourcesLoggers&&(p.loggers=e.telemetry.ManageEmbedLoadAllLiveEmbeddedResourcesLoggers),p},t.DashboardAddWidget=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.AddWidget",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardAddWidgetLoggers&&(p.loggers=e.telemetry.DashboardAddWidgetLoggers),p},t.DashboardWidgetSelected=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={widgetType:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.WidgetSelected",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={widgetType:p.widgetType,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardWidgetSelectedLoggers&&(u.loggers=e.telemetry.DashboardWidgetSelectedLoggers),u},t.DashboardLoadTenantContentPacks=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Dashboard.LoadTenantContentPacks",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardLoadTenantContentPacksLoggers&&(p.loggers=e.telemetry.DashboardLoadTenantContentPacksLoggers),p},t.DashboardTenantContentPackPublish=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m){void 0===l&&(l=!1),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0),void 0===g&&(g=void 0),void 0===m&&(m=void 0);var f={isUpdateContentPack:t,numberOfDashboards:i,numberOfReports:o,numberOfModels:r,numberOfWorkbooks:a,isMyWorkspace:n,isUserError:s,parentId:c,isError:l,errorSource:d,errorCode:p,errorMessage:u,activityName:v,activityId:h,isDebug:g,isCancelled:m},y={name:"PBI.Dashboard.TenantContentPackPublish",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={isUpdateContentPack:f.isUpdateContentPack,numberOfDashboards:f.numberOfDashboards,numberOfReports:f.numberOfReports,numberOfModels:f.numberOfModels,numberOfWorkbooks:f.numberOfWorkbooks,isMyWorkspace:f.isMyWorkspace,isUserError:f.isUserError,parentId:f.parentId,isError:f.isError};return"undefined"!=typeof f.errorSource&&(t.errorSource=e.telemetry.ErrorSource[f.errorSource]),"undefined"!=typeof f.errorCode&&(t.errorCode=f.errorCode),"undefined"!=typeof f.errorMessage&&(t.errorMessage=f.errorMessage),"undefined"!=typeof f.activityName&&(t.activityName=f.activityName),"undefined"!=typeof f.activityId&&(t.activityId=f.activityId),"undefined"!=typeof f.isDebug&&(t.isDebug=f.isDebug),"undefined"!=typeof f.isCancelled&&(t.isCancelled=f.isCancelled),t},info:f,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardTenantContentPackPublishLoggers&&(y.loggers=e.telemetry.DashboardTenantContentPackPublishLoggers),y},t.ContentListLoaded=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.ContentList.Loaded",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ContentListLoadedLoggers&&(p.loggers=e.telemetry.ContentListLoadedLoggers),p},t.ContentListSelectSort=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={predicate:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.ContentList.SelectSort",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={predicate:e.telemetry.SelectSort[p.predicate],parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ContentListSelectSortLoggers&&(u.loggers=e.telemetry.ContentListSelectSortLoggers),u},t.ContentListSelectOwnership=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={ownership:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.ContentList.SelectOwnership",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={ownership:p.ownership,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ContentListSelectOwnershipLoggers&&(u.loggers=e.telemetry.ContentListSelectOwnershipLoggers),u},t.ContentListPersistFilter=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.ContentList.PersistFilter",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ContentListPersistFilterLoggers&&(p.loggers=e.telemetry.ContentListPersistFilterLoggers),p},t.MostRecentlyUsedServiceUpdateMRUData=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.MostRecentlyUsedService.UpdateMRUData",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.MostRecentlyUsedServiceUpdateMRUDataLoggers&&(p.loggers=e.telemetry.MostRecentlyUsedServiceUpdateMRUDataLoggers),p},t.ContentListSearch=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.ContentList.Search",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ContentListSearchLoggers&&(p.loggers=e.telemetry.ContentListSearchLoggers),p},t.ContentListOpenArtifact=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={source:t,type:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.ContentList.OpenArtifact",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={source:e.telemetry.ContentListArtifactSource[u.source],type:e.telemetry.ContentListArtifactType[u.type],parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ContentListOpenArtifactLoggers&&(v.loggers=e.telemetry.ContentListOpenArtifactLoggers),v},t.MarketplaceEmbeddedOpened=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Marketplace.EmbeddedOpened",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.MarketplaceEmbeddedOpenedLoggers&&(p.loggers=e.telemetry.MarketplaceEmbeddedOpenedLoggers),p},t.MarketplaceEmbeddedClosedWithAppAcquired=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Marketplace.EmbeddedClosedWithAppAcquired",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.MarketplaceEmbeddedClosedWithAppAcquiredLoggers&&(p.loggers=e.telemetry.MarketplaceEmbeddedClosedWithAppAcquiredLoggers),p},t.MarketplaceEmbeddedClosedWithoutAppAcquired=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.Marketplace.EmbeddedClosedWithoutAppAcquired",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.MarketplaceEmbeddedClosedWithoutAppAcquiredLoggers&&(p.loggers=e.telemetry.MarketplaceEmbeddedClosedWithoutAppAcquiredLoggers),p},t.RealTimeEditStreamingDatasetPaneOpened=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={isNew:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.RealTime.EditStreamingDatasetPaneOpened",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={isNew:p.isNew,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.RealTimeEditStreamingDatasetPaneOpenedLoggers&&(u.loggers=e.telemetry.RealTimeEditStreamingDatasetPaneOpenedLoggers),u},t.RealTimeStreamingDatasetGalleryPaneOpened=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.RealTime.StreamingDatasetGalleryPaneOpened",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.RealTimeStreamingDatasetGalleryPaneOpenedLoggers&&(p.loggers=e.telemetry.RealTimeStreamingDatasetGalleryPaneOpenedLoggers),p},t.RealTimeStreamingDatasetGalleryOptionSelected=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={selectedOption:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.RealTime.StreamingDatasetGalleryOptionSelected",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={selectedOption:e.telemetry.StreamingDatasetGalleryOption[p.selectedOption],parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.RealTimeStreamingDatasetGalleryOptionSelectedLoggers&&(u.loggers=e.telemetry.RealTimeStreamingDatasetGalleryOptionSelectedLoggers),u},t.RealTimeStreamingDatasetPushInfoPaneOpened=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.RealTime.StreamingDatasetPushInfoPaneOpened",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.RealTimeStreamingDatasetPushInfoPaneOpenedLoggers&&(p.loggers=e.telemetry.RealTimeStreamingDatasetPushInfoPaneOpenedLoggers),p},t.RealTimeAddUpdateRemoveStreamingDataset=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h){void 0===s&&(s=!1),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0);var g={action:t,dateTimeColumnCount:i,numericColumnCount:o,stringColumnCount:r,realTimeType:a,parentId:n,isError:s,errorSource:c,errorCode:l,errorMessage:d,activityName:p,activityId:u,isDebug:v,isCancelled:h},m={name:"PBI.RealTime.AddUpdateRemoveStreamingDataset",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={action:e.telemetry.CreateUpdateDeleteAction[g.action],dateTimeColumnCount:g.dateTimeColumnCount,numericColumnCount:g.numericColumnCount,stringColumnCount:g.stringColumnCount,realTimeType:g.realTimeType,parentId:g.parentId,isError:g.isError};return"undefined"!=typeof g.errorSource&&(t.errorSource=e.telemetry.ErrorSource[g.errorSource]),"undefined"!=typeof g.errorCode&&(t.errorCode=g.errorCode),"undefined"!=typeof g.errorMessage&&(t.errorMessage=g.errorMessage),"undefined"!=typeof g.activityName&&(t.activityName=g.activityName),"undefined"!=typeof g.activityId&&(t.activityId=g.activityId),"undefined"!=typeof g.isDebug&&(t.isDebug=g.isDebug),"undefined"!=typeof g.isCancelled&&(t.isCancelled=g.isCancelled),t},info:g,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.RealTimeAddUpdateRemoveStreamingDatasetLoggers&&(m.loggers=e.telemetry.RealTimeAddUpdateRemoveStreamingDatasetLoggers),m},t.RealTimeGetStreamingDataset=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,
isDebug:c,isCancelled:l},p={name:"PBI.RealTime.GetStreamingDataset",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.RealTimeGetStreamingDatasetLoggers&&(p.loggers=e.telemetry.RealTimeGetStreamingDatasetLoggers),p},t.RealTimeGetPubNubCredentials=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.RealTime.GetPubNubCredentials",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.RealTimeGetPubNubCredentialsLoggers&&(p.loggers=e.telemetry.RealTimeGetPubNubCredentialsLoggers),p},t.RealTimeLongPollError=function(t){var i={message:t},o={name:"PBI.RealTime.LongPollError",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={message:i.message};return e},info:i,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.RealTimeLongPollErrorLoggers&&(o.loggers=e.telemetry.RealTimeLongPollErrorLoggers),o},t.DataAlertsOpenAlertsEditor=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.DataAlerts.OpenAlertsEditor",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DataAlertsOpenAlertsEditorLoggers&&(p.loggers=e.telemetry.DataAlertsOpenAlertsEditorLoggers),p},t.DataAlertsSaveAlerts=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g){void 0===c&&(c=!1),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===h&&(h=void 0),void 0===g&&(g=void 0);var m={createCount:t,editCount:i,toggleCount:o,createFailCount:r,editFailCount:a,toggleFailCount:n,parentId:s,isError:c,errorSource:l,errorCode:d,errorMessage:p,activityName:u,activityId:v,isDebug:h,isCancelled:g},f={name:"PBI.DataAlerts.SaveAlerts",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={createCount:m.createCount,editCount:m.editCount,toggleCount:m.toggleCount,createFailCount:m.createFailCount,editFailCount:m.editFailCount,toggleFailCount:m.toggleFailCount,parentId:m.parentId,isError:m.isError};return"undefined"!=typeof m.errorSource&&(t.errorSource=e.telemetry.ErrorSource[m.errorSource]),"undefined"!=typeof m.errorCode&&(t.errorCode=m.errorCode),"undefined"!=typeof m.errorMessage&&(t.errorMessage=m.errorMessage),"undefined"!=typeof m.activityName&&(t.activityName=m.activityName),"undefined"!=typeof m.activityId&&(t.activityId=m.activityId),"undefined"!=typeof m.isDebug&&(t.isDebug=m.isDebug),"undefined"!=typeof m.isCancelled&&(t.isCancelled=m.isCancelled),t},info:m,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DataAlertsSaveAlertsLoggers&&(f.loggers=e.telemetry.DataAlertsSaveAlertsLoggers),f},t.DataAlertsDeleteAlertAccept=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.DataAlerts.DeleteAlertAccept",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DataAlertsDeleteAlertAcceptLoggers&&(p.loggers=e.telemetry.DataAlertsDeleteAlertAcceptLoggers),p},t.DataAlertsDeleteAlertCancel=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.DataAlerts.DeleteAlertCancel",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DataAlertsDeleteAlertCancelLoggers&&(p.loggers=e.telemetry.DataAlertsDeleteAlertCancelLoggers),p},t.DataAlertsTileBadgeClicked=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={alertId:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.DataAlerts.TileBadgeClicked",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={alertId:p.alertId,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DataAlertsTileBadgeClickedLoggers&&(u.loggers=e.telemetry.DataAlertsTileBadgeClickedLoggers),u},t.DataAlertsNotificationAction=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={source:t,action:i,alertId:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.DataAlerts.NotificationAction",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={source:e.telemetry.DataAlertNotificationSource[v.source],action:e.telemetry.DataAlertNotificationAction[v.action],alertId:v.alertId,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DataAlertsNotificationActionLoggers&&(h.loggers=e.telemetry.DataAlertsNotificationActionLoggers),h},t.DataAlertsRequest=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={requestType:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.DataAlerts.Request",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={requestType:e.telemetry.AlertRequestType[p.requestType],parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DataAlertsRequestLoggers&&(u.loggers=e.telemetry.DataAlertsRequestLoggers),u},t.DataAlertsOpenAlertsSettings=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.DataAlerts.OpenAlertsSettings",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DataAlertsOpenAlertsSettingsLoggers&&(p.loggers=e.telemetry.DataAlertsOpenAlertsSettingsLoggers),p};t.DataAlertsAlertsSettingsToggle=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.DataAlerts.AlertsSettingsToggle",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DataAlertsAlertsSettingsToggleLoggers&&(p.loggers=e.telemetry.DataAlertsAlertsSettingsToggleLoggers),p};t.DataAlertsAlertsSettingsEdit=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.DataAlerts.AlertsSettingsEdit",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DataAlertsAlertsSettingsEditLoggers&&(p.loggers=e.telemetry.DataAlertsAlertsSettingsEditLoggers),p},t.DataAlertsAlertsSettingsDelete=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.DataAlerts.AlertsSettingsDelete",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DataAlertsAlertsSettingsDeleteLoggers&&(p.loggers=e.telemetry.DataAlertsAlertsSettingsDeleteLoggers),p},t.EmailSubscriptionsSaveSubscription=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.EmailSubscriptions.SaveSubscription",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.EmailSubscriptionsSaveSubscriptionLoggers&&(p.loggers=e.telemetry.EmailSubscriptionsSaveSubscriptionLoggers),p},t.EmailSubscriptionsUpdateSubscription=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.EmailSubscriptions.UpdateSubscription",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.EmailSubscriptionsUpdateSubscriptionLoggers&&(p.loggers=e.telemetry.EmailSubscriptionsUpdateSubscriptionLoggers),p},t.EmailSubscriptionsAddSubscription=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.EmailSubscriptions.AddSubscription",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.EmailSubscriptionsAddSubscriptionLoggers&&(p.loggers=e.telemetry.EmailSubscriptionsAddSubscriptionLoggers),p},t.EmailSubscriptionsDeleteSubscription=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.EmailSubscriptions.DeleteSubscription",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.EmailSubscriptionsDeleteSubscriptionLoggers&&(p.loggers=e.telemetry.EmailSubscriptionsDeleteSubscriptionLoggers),p},t.EmailSubscriptionsOpenEmailSettings=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.EmailSubscriptions.OpenEmailSettings",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.EmailSubscriptionsOpenEmailSettingsLoggers&&(p.loggers=e.telemetry.EmailSubscriptionsOpenEmailSettingsLoggers),p},t.EmailSubscriptionsEditEmailSettings=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.EmailSubscriptions.EditEmailSettings",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.EmailSubscriptionsEditEmailSettingsLoggers&&(p.loggers=e.telemetry.EmailSubscriptionsEditEmailSettingsLoggers),p},t.EmailSubscriptionsRequest=function(t){var i={requestType:t},o={name:"PBI.EmailSubscriptions.Request",time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={requestType:e.telemetry.EmailSubscriptionRequestType[i.requestType]};return t},info:i,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.EmailSubscriptionsRequestLoggers&&(o.loggers=e.telemetry.EmailSubscriptionsRequestLoggers),o},t.EmailSubscriptionsOpenPane=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.EmailSubscriptions.OpenPane",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.EmailSubscriptionsOpenPaneLoggers&&(p.loggers=e.telemetry.EmailSubscriptionsOpenPaneLoggers),p},t.EmailSubscriptionsInertOrUpdateSubscriptions=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.EmailSubscriptions.InertOrUpdateSubscriptions",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.EmailSubscriptionsInertOrUpdateSubscriptionsLoggers&&(p.loggers=e.telemetry.EmailSubscriptionsInertOrUpdateSubscriptionsLoggers),p},t.DashboardLoadDashboardWithScriptVisuals=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={numScriptTiles:t,numTotalTiles:i,numReportTilesWithScriptVisuals:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.LoadDashboardWithScriptVisuals",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={numScriptTiles:v.numScriptTiles,numTotalTiles:v.numTotalTiles,numReportTilesWithScriptVisuals:v.numReportTilesWithScriptVisuals,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardLoadDashboardWithScriptVisualsLoggers&&(h.loggers=e.telemetry.DashboardLoadDashboardWithScriptVisualsLoggers),h},t.UserNotificationsLoadNotificationPane=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={unseenCount:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.UserNotifications.LoadNotificationPane",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={unseenCount:p.unseenCount,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.UserNotificationsLoadNotificationPaneLoggers&&(u.loggers=e.telemetry.UserNotificationsLoadNotificationPaneLoggers),u},t.UserNotificationsLinkClicked=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={notificationCategory:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.UserNotifications.LinkClicked",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={notificationCategory:p.notificationCategory,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.UserNotificationsLinkClickedLoggers&&(u.loggers=e.telemetry.UserNotificationsLinkClickedLoggers),u},t.DashboardUserEnteredPhoneMobileAuthoringMode=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={dashboardGuid:t,isFirstTime:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.UserEnteredPhoneMobileAuthoringMode",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardGuid:u.dashboardGuid,isFirstTime:u.isFirstTime,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),
"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardUserEnteredPhoneMobileAuthoringModeLoggers&&(v.loggers=e.telemetry.DashboardUserEnteredPhoneMobileAuthoringModeLoggers),v},t.DashboardUserDeletedMobileLayout=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={dashboardGuid:t,resetType:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.UserDeletedMobileLayout",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardGuid:u.dashboardGuid,resetType:e.telemetry.MobileAuthoringResetType[u.resetType],parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardUserDeletedMobileLayoutLoggers&&(v.loggers=e.telemetry.DashboardUserDeletedMobileLayoutLoggers),v},t.DashboardUserExitsAuthoringModeWithEmptyMobileLayout=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={dashboardGuid:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.Dashboard.UserExitsAuthoringModeWithEmptyMobileLayout",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardGuid:p.dashboardGuid,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardUserExitsAuthoringModeWithEmptyMobileLayoutLoggers&&(u.loggers=e.telemetry.DashboardUserExitsAuthoringModeWithEmptyMobileLayoutLoggers),u},t.DynamicMessageGetMessage=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={parsedMessage:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.DynamicMessage.GetMessage",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parsedMessage:p.parsedMessage,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DynamicMessageGetMessageLoggers&&(u.loggers=e.telemetry.DynamicMessageGetMessageLoggers),u},t.DynamicMessageUserAction=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={userAction:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.DynamicMessage.UserAction",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={userAction:p.userAction,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DynamicMessageUserActionLoggers&&(u.loggers=e.telemetry.DynamicMessageUserActionLoggers),u},t.DashboardRetryDashboard=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={retryCount:t,dashboardGuid:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.RetryDashboard",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={retryCount:u.retryCount,dashboardGuid:u.dashboardGuid,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRetryDashboardLoggers&&(v.loggers=e.telemetry.DashboardRetryDashboardLoggers),v},t.DashboardPreloadLinkedDashboard=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={dashboardCount:t,dashboardGuid:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.PreloadLinkedDashboard",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardCount:u.dashboardCount,dashboardGuid:u.dashboardGuid,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardPreloadLinkedDashboardLoggers&&(v.loggers=e.telemetry.DashboardPreloadLinkedDashboardLoggers),v},t.DashboardRegisterAndLoadResourcePackages=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={resourcePackageLength:t,compositeTileHasCustomVisual:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.RegisterAndLoadResourcePackages",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={resourcePackageLength:u.resourcePackageLength,compositeTileHasCustomVisual:u.compositeTileHasCustomVisual,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRegisterAndLoadResourcePackagesLoggers&&(v.loggers=e.telemetry.DashboardRegisterAndLoadResourcePackagesLoggers),v},t.DashboardLoadDashboard=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={pendingRequestCount:t,dashboardGuid:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.LoadDashboard",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={dashboardGuid:u.dashboardGuid,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.pendingRequestCount&&(t.pendingRequestCount=u.pendingRequestCount),"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardLoadDashboardLoggers&&(v.loggers=e.telemetry.DashboardLoadDashboardLoggers),v},t.DashboardRecordDashboardTiles=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={tileIds:t,dashboardGuid:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.Dashboard.RecordDashboardTiles",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={tileIds:u.tileIds,dashboardGuid:u.dashboardGuid,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRecordDashboardTilesLoggers&&(v.loggers=e.telemetry.DashboardRecordDashboardTilesLoggers),v},t.DashboardRegisterAndLoadResourcePackagesForReportTiles=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={resourcePackageLength:t,tileId:i,reportTileHasCustomVisual:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.Dashboard.RegisterAndLoadResourcePackagesForReportTiles",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={resourcePackageLength:v.resourcePackageLength,tileId:v.tileId,reportTileHasCustomVisual:v.reportTileHasCustomVisual,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.DashboardRegisterAndLoadResourcePackagesForReportTilesLoggers&&(h.loggers=e.telemetry.DashboardRegisterAndLoadResourcePackagesForReportTilesLoggers),h},t.AppLoadPerformanceTiming=function(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m,f,y,b,S,w,C,D,I,T,M,E,P,k){void 0===C&&(C=!1),void 0===D&&(D=void 0),void 0===I&&(I=void 0),void 0===T&&(T=void 0),void 0===M&&(M=void 0),void 0===E&&(E=void 0),void 0===P&&(P=void 0),void 0===k&&(k=void 0);var N={navigationStart:t,unloadEventStart:i,unloadEventEnd:o,redirectStart:r,redirectEnd:a,fetchStart:n,domainLookupStart:s,domainLookupEnd:c,connectStart:l,connectEnd:d,requestStart:p,responseStart:u,responseEnd:v,domLoading:h,domInteractive:g,domContentLoadedEventStart:m,domContentLoadedEventEnd:f,domComplete:y,loadEventStart:b,loadEventEnd:S,parentId:w,isError:C,errorSource:D,errorCode:I,errorMessage:T,activityName:M,activityId:E,isDebug:P,isCancelled:k},A={name:"PBI.App.LoadPerformanceTiming",time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={navigationStart:N.navigationStart,unloadEventStart:N.unloadEventStart,unloadEventEnd:N.unloadEventEnd,redirectStart:N.redirectStart,redirectEnd:N.redirectEnd,fetchStart:N.fetchStart,domainLookupStart:N.domainLookupStart,domainLookupEnd:N.domainLookupEnd,connectStart:N.connectStart,connectEnd:N.connectEnd,requestStart:N.requestStart,responseStart:N.responseStart,responseEnd:N.responseEnd,domLoading:N.domLoading,domInteractive:N.domInteractive,domContentLoadedEventStart:N.domContentLoadedEventStart,domContentLoadedEventEnd:N.domContentLoadedEventEnd,domComplete:N.domComplete,loadEventStart:N.loadEventStart,loadEventEnd:N.loadEventEnd,parentId:N.parentId,isError:N.isError};return"undefined"!=typeof N.errorSource&&(t.errorSource=e.telemetry.ErrorSource[N.errorSource]),"undefined"!=typeof N.errorCode&&(t.errorCode=N.errorCode),"undefined"!=typeof N.errorMessage&&(t.errorMessage=N.errorMessage),"undefined"!=typeof N.activityName&&(t.activityName=N.activityName),"undefined"!=typeof N.activityId&&(t.activityId=N.activityId),"undefined"!=typeof N.isDebug&&(t.isDebug=N.isDebug),"undefined"!=typeof N.isCancelled&&(t.isCancelled=N.isCancelled),t},info:N,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.AppLoadPerformanceTimingLoggers&&(A.loggers=e.telemetry.AppLoadPerformanceTimingLoggers),A},t.AppGetAppMetadata=function(t,i,o,r,a,n,s,c,l,d,p,u,v){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0);var h={url:t,groupGUID:i,start:o,end:r,parentId:a,isError:n,errorSource:s,errorCode:c,errorMessage:l,activityName:d,activityId:p,isDebug:u,isCancelled:v},g={name:"PBI.App.GetAppMetadata",time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={url:h.url,groupGUID:h.groupGUID,start:h.start,end:h.end,parentId:h.parentId,isError:h.isError};return"undefined"!=typeof h.errorSource&&(t.errorSource=e.telemetry.ErrorSource[h.errorSource]),"undefined"!=typeof h.errorCode&&(t.errorCode=h.errorCode),"undefined"!=typeof h.errorMessage&&(t.errorMessage=h.errorMessage),"undefined"!=typeof h.activityName&&(t.activityName=h.activityName),"undefined"!=typeof h.activityId&&(t.activityId=h.activityId),"undefined"!=typeof h.isDebug&&(t.isDebug=h.isDebug),"undefined"!=typeof h.isCancelled&&(t.isCancelled=h.isCancelled),t},info:h,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.AppGetAppMetadataLoggers&&(g.loggers=e.telemetry.AppGetAppMetadataLoggers),g},t.AppParseAppMetadata=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={start:t,end:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.App.ParseAppMetadata",time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={start:u.start,end:u.end,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.AppParseAppMetadataLoggers&&(v.loggers=e.telemetry.AppParseAppMetadataLoggers),v},t.AppAngularBootstrap=function(t,i,o,r,a,n,s,c,l,d,p){void 0===r&&(r=!1),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0);var u={start:t,end:i,parentId:o,isError:r,errorSource:a,errorCode:n,errorMessage:s,activityName:c,activityId:l,isDebug:d,isCancelled:p},v={name:"PBI.App.AngularBootstrap",time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={start:u.start,end:u.end,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.errorSource&&(t.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(t.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(t.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(t.activityName=u.activityName),"undefined"!=typeof u.activityId&&(t.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(t.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(t.isCancelled=u.isCancelled),t},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.AppAngularBootstrapLoggers&&(v.loggers=e.telemetry.AppAngularBootstrapLoggers),v},t.AppJavaScriptParse=function(t,i,o,r,a,n,s,c,l,d,p,u){void 0===a&&(a=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={fileName:t,start:i,end:o,parentId:r,isError:a,errorSource:n,errorCode:s,errorMessage:c,activityName:l,activityId:d,isDebug:p,isCancelled:u},h={name:"PBI.App.JavaScriptParse",time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={fileName:v.fileName,start:v.start,end:v.end,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(t.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(t.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(t.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(t.activityName=v.activityName),"undefined"!=typeof v.activityId&&(t.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(t.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(t.isCancelled=v.isCancelled),t},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.AppJavaScriptParseLoggers&&(h.loggers=e.telemetry.AppJavaScriptParseLoggers),h},t.ArtifactNotFound=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={artifactKind:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.ArtifactNotFound",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={artifactKind:p.artifactKind,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ArtifactNotFoundLoggers&&(u.loggers=e.telemetry.ArtifactNotFoundLoggers),u},t.CreateReportDialogCanceled=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.CreateReportDialog.Canceled",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.CreateReportDialogCanceledLoggers&&(p.loggers=e.telemetry.CreateReportDialogCanceledLoggers),p},t.CreateReportDialogCreate=function(t,i,o,r,a,n,s,c,l,d){void 0===o&&(o=!1),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0),void 0===d&&(d=void 0);var p={datasetGuid:t,parentId:i,isError:o,errorSource:r,errorCode:a,errorMessage:n,activityName:s,activityId:c,isDebug:l,isCancelled:d},u={name:"PBI.CreateReportDialog.Create",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={datasetGuid:p.datasetGuid,parentId:p.parentId,isError:p.isError};return"undefined"!=typeof p.errorSource&&(t.errorSource=e.telemetry.ErrorSource[p.errorSource]),"undefined"!=typeof p.errorCode&&(t.errorCode=p.errorCode),"undefined"!=typeof p.errorMessage&&(t.errorMessage=p.errorMessage),"undefined"!=typeof p.activityName&&(t.activityName=p.activityName),"undefined"!=typeof p.activityId&&(t.activityId=p.activityId),"undefined"!=typeof p.isDebug&&(t.isDebug=p.isDebug),"undefined"!=typeof p.isCancelled&&(t.isCancelled=p.isCancelled),t},info:p,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.CreateReportDialogCreateLoggers&&(u.loggers=e.telemetry.CreateReportDialogCreateLoggers),u},t.CreateReportDialogImport=function(t,i,o,r,a,n,s,c,l){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===r&&(r=void 0),void 0===a&&(a=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===c&&(c=void 0),void 0===l&&(l=void 0);var d={parentId:t,isError:i,errorSource:o,errorCode:r,errorMessage:a,activityName:n,activityId:s,isDebug:c,isCancelled:l},p={name:"PBI.CreateReportDialog.Import",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={parentId:d.parentId,isError:d.isError};return"undefined"!=typeof d.errorSource&&(t.errorSource=e.telemetry.ErrorSource[d.errorSource]),"undefined"!=typeof d.errorCode&&(t.errorCode=d.errorCode),"undefined"!=typeof d.errorMessage&&(t.errorMessage=d.errorMessage),"undefined"!=typeof d.activityName&&(t.activityName=d.activityName),"undefined"!=typeof d.activityId&&(t.activityId=d.activityId),"undefined"!=typeof d.isDebug&&(t.isDebug=d.isDebug),"undefined"!=typeof d.isCancelled&&(t.isCancelled=d.isCancelled),t},info:d,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.CreateReportDialogImportLoggers&&(p.loggers=e.telemetry.CreateReportDialogImportLoggers),p}})(t=e.telemetry||(e.telemetry={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.actualOpenTileEventName="actualOpenTile",e.ambientAnimationTickIntervalMs=5e3,e.analyzeInExcelEventName="analyzeInExcel",e.cancelEditWidgetEventName="cancelEditWidget",e.cancelQrGenerationEventName="cancelQrGeneration",e.configPageErrorLoadingEventName="configPageErrorLoading",e.configPageLoadedEventName="configPageLoaded",e.contentListDashboardsLoadedEvent="contentListDashboardsLoaded",e.contentListDatasetsLoadedEvent="contentListDatasetssLoaded",e.contentListRecentlyUsedLoadedEvent="contentListRecentlyUsedLoaded",e.contentListReportsLoadedEvent="contentListReportsLoaded",e.contentListWorkbooksLoadedEvent="contentListWorkbooksLoaded",e.contentListPublishedAppsLoadedEvent="contentListPublishedAppsLoaded",e.dashboardContainerLoaded="dashboardContainerLoaded",e.dataSourceAccessInfoGeneratedEventName="dataSourceAccessInfoGenerated",e.datasetShowHistoryDialog="datasetShowHistoryDialog",e.deleteModelEventName="deleteModel",e.deleteReportEventName="deleteReport",e.deregisterTileFromDashboardEventName="deregisterTileFromDashboard",e.enablePowerBIASConnectorApp="asConnectorEnabled",e.enablePowerBICompanionApp="companionEnabled",e.initializeContainerWithActiveDashboardOverride="initializeContainerWithActiveDashboardOverride",e.localFileControllerInitializedEventName="localFileControllerInitialized",e.myWorkSpaceGroupId="me",e.navPaneScrollEventName="navPaneScroll",e.navigateToActiveDashboard="navigateToActiveDashboard",e.notifyDashboardOwnerInfoLoaded="dashboardOwnerInfoLoaded",e.notifyUpdateAllowQnaDataCollectionEventName="notifyUpdateAllowQnaDataCollection",e.openCreateContentPackEventName="openCreateContentPack",e.openModelEventName="openModel",e.openProviderTileEventName="openProviderTile",e.openReportEventName="openReport",e.openTileEventName="openTile",e.personalizeEventName="personalize",e.previewfeaturesModalKey="previewfeaturesModal",e.registerTileToDashboardEventName="registerTileToDashboard",e.reloadEmptyVisuals="reloadEmptyVisuals",e.removeTileEventName="removeTileFromGroup",e.renameDashboardEventName="renameDashboard",e.renameModelEventName="renameModel",e.reportDeletedEventName="reportDeleted",e.resizeCompletedEventName="resizeCompleted",e.scrollNavPaneToActiveDashboardEventName="scrollNavPaneToActiveDashboard",e.scrollToNavPaneListItemEventName="scrollToNavPaneListItem",e.setDashboardTileOptionsMenuVisibility="setDashboardTileOptionsMenuVisibility",e.shouldShowProviderTilesEventName="shouldShowProviderTiles",e.showConnectionSettingsDialogEventName="showConnectionSettingsDialog",e.showInsightsEventName="showInsights",e.temporaryTilePinned="temporaryTilePinned",e.upadateCarouselEventName="upadateCarousel",e.updateTileHrefEventName="updateTileHref",e.uploadFormatChosenEventName="uploadFormatChosen",e.replaceLocalWorkbookEventName="replaceLocalFile",e.dashboardTileErrorEventName="dashboardTileError",e.tileRefreshStateChangedEventName="tileRefreshStateChanged",e.removeDashboardTileErrorEventName="removeDashboardTileError",e.rowLevelSecurityAccessDeniedEventName="rowLevelSecurityAccessDenied",e.defaultPortraitPrintWidth=673,e.defaultPortraitPrintHeight=860,e.defaultLandscapePrintWidth=940,e.defaultLandscapePrintHeight=578,e.inFocusEnterEvent="inFocusEnter",e.inFocusExitEvent="inFocusExit",e.dashboardTileRepeatFinishedEvent="dashboardTileRepeatFinished",e.dashboardTileLayoutChangeEvent="dashboardTileLayoutChangeEvent",e.notifyDashboardUpdate="notifyDashboardUpdate",e.hideDashboardConnectionsDialogEventName="hideDashboardConnectionsDialog",e.mobileApplication="winApp",e.pvScriptsLoaded="exploreHostLoaded",e.openReportStarting="openReportStarting",e.openReportSucceeded="openReportSucceded",e.openReportFailed="openReportFailed",e.modelFailedGenericServiceError="modelFailedGenericServiceError",e.modelFailedGenericClientError="modelFailedGenericClientError",e.modelFailednoErrorInfo="modelFailednoErrorInfo",e.openDashboardStarting="openDashboardStarting",e.openDashboardSucceeded="openDashboardSucceeded",e.openDashboardFailed="openDashboardFailed",e.openUrlActionName="/openUrl",e.openInFocusTileActionName="/openInFocus",e.openInFocusWorkbookTileActionName="/openInFocusWorkbook",e.openInFocusRealTimeTileActionName="/openInFocusRealTime",e.hideEditorEventName="hideEditor",e.showTileEditorEventName="showTileEditor",e.hideTileEditorEventName="hideTileEditor",e.showAlertsEditorEventName="showAlertsEditor",e.alertTitleMaxLength=250,e.showTaskPaneSlider="showTaskPaneSlider",e.hideTaskPaneSlider="hideTaskPaneSlider",e.hideTaskPaneSliderOnClickEventName="hideTaskPaneSliderOnClick",e.refreshTileData="refreshTileData",e.maxDashboardNameLength=30,e.deferredRenderingTileRowThreshold=5,e.deferredRenderingTileColumnThreshold=5,e.openReportFinished="OpenReportFinished",e.samplesContentProviderName="Sample Dashboard",e.tokenRefreshIntervalOffset=27e5,e.biTokenRefreshInterval=23760027e5,e.biTokenRefreshIntervalAfterFailureToGetBIToken=6e4,e.windowParentScope="windowParentScope",e.oauthResponseName="oAuthResponse",e.appLoadErrorGroupNotAccessible="#groupNotAccessible#",e.checkWelcomeStatusInterval=200,e.saveReportFromPinDialog="saveReportFromPinDialog",e.populateDashboardWithReportTiles="populateDashboardWithReportTiles",e.dashboardUnfavorited="dashboardUnfavorited",e.updateFavorites="updateFavorites",e.showSettingsBlade="showSettingsBlade",e.saveDashboardSettings="saveDashboardSettings",e.insightsDescriptor="insights",e.groupSwitchedEventName="GroupSwitched",e.groupAddedUpdateContextMenuEventName="GroupAddedUpdateContextMenu",e.contentPackDirtyShowNotification="contentPackDirty",e.loadDashboardFailed="loadDashboardFailed";var t;!(function(e){var t;!(function(e){e.landing="landing",e.adminPortal="landing.adminPortal",e.devTools="landing.devTools",e.home="landing.featureddashboard",
e.groups="landing.groups",e.group="landing.groups.group",e.apps="landing.groups.group.apps",e.app="landing.groups.group.apps.app",e.appDashboards="landing.groups.group.apps.app.dashboards",e.appDashboard="landing.groups.group.apps.app.dashboards.dashboard",e.appAlertsEditor="landing.groups.group.apps.app.dashboards.dashboard.alerts",e.appInFocusMode="landing.groups.group.apps.app.dashboards.dashboard.infocus",e.appInFocusInsights="landing.groups.group.apps.app.dashboards.dashboard.insights",e.appInstance="landing.groups.group.apps.app.instance",e.appDashboardsInstance="landing.groups.group.apps.app.instance.dashboards",e.appDashboardInstance="landing.groups.group.apps.app.instance.dashboards.dashboard",e.appAlertsEditorInstance="landing.groups.group.apps.app.instance.dashboards.dashboard.alerts",e.appInFocusModeInstance="landing.groups.group.apps.app.instance.dashboards.dashboard.infocus",e.appInFocusInsightsInstance="landing.groups.group.apps.app.instance.dashboards.dashboard.insights",e.contentList="landing.groups.group.contentList",e.modelQna="landing.groups.group.datasets.dataset.qna",e.dashboards="landing.groups.group.dashboards",e.dashboard="landing.groups.group.dashboards.dashboard",e.alertsEditor="landing.groups.group.dashboards.dashboard.alerts",e.inFocusMode="landing.groups.group.dashboards.dashboard.infocus",e.inFocusInsights="landing.groups.group.dashboards.dashboard.insights",e.dashboardQna="landing.groups.group.dashboards.dashboard.qna",e.dashboardQnaStart="landing.groups.group.dashboards.dashboard.qnastart",e.dashboardRequestAccess="landing.groups.group.dashboards.dashboard.requestaccess",e.dashboardShare="landing.groups.group.dashboards.dashboard.share",e.extendTrial="landing.groups.group.extendTrial",e.favorites="landing.groups.group.favorites",e.insights="landing.groups.group.insights",e.gateways="landing.groups.group.gateways",e.gateway="landing.groups.group.gateways.gateway",e.dataSource="landing.groups.group.gateways.gateway.dataSource",e.getData="landing.groups.group.getData",e.getDataCategory="landing.groups.group.getData.category",e.getDataCategoryProviderName="landing.groups.group.getData.category.providerName",e.groupWelcome="landing.groups.group.groupWelcome",e.manageEmbed="landing.groups.group.manageEmbed",e.manageStorage="landing.groups.group.manageStorage",e.publishApp="landing.groups.group.publishApp",e.publishContent="landing.groups.group.publishContent",e.recentlyViewed="landing.groups.group.recentlyViewed",e.rowLevelSecurity="landing.groups.group.rowLevelSecurity",e.settings="landing.groups.group.settings",e.settingsGroup="landing.groups.group.settings.settingsGroup",e.settingsId="landing.groups.group.settings.settingsGroup.settingsId",e.viewContent="landing.groups.group.viewContent"})(t=e.states||(e.states={})),e.getDataWelcome="welcome"})(t=e.navigation||(e.navigation={})),e.loadDashboardEventName="loadDashboard",e.maximumDashboardBatchSize=5,e.emailsListSeparator="; ",e.streamingDatasetModelPubNub="PubNub";var i;!(function(e){e.PowerBIUserQuotaExceeded="PowerBIUserQuotaExceeded",e.PowerBIGroupQuotaExceeded="PowerBIGroupQuotaExceeded"})(i=e.quotaErrorCodes||(e.quotaErrorCodes={}));var o;!(function(e){e.initSaasMarketplaceEventName="initSaasMarketplace",e.acquireAppEventName="acquireSaasMarketplaceApp",e.updateHostUrl="updateUrlForSaasMarketplaceApp";var t;!(function(e){e.acquireApp="acquireApp",e.externalRedirect="externalRedirect",e.updateUrl="updateUrl",e.closeSaasMarketplace="closeSaasMarketplace",e.finishedLoadingContentProviderList="contentProvidersLoaded"})(t=e.actionTypes||(e.actionTypes={}))})(o=e.saasMarketplace||(e.saasMarketplace={}));var r;!(function(e){e.closeNpsDialog="closeNpsDialog",e.resizeNpsDialog="thankyouNpsDialog",e.renderPath="/render/powerbi/",e.displayPath="/display/powerbi/",e.puidParam="puid",e.languageParam="culture"})(r=e.nps||(e.nps={})),e.DashboardSharingSecurityGroupRequirePro="DashboardInvitationSGRequirePro",e.DashboardInvitationUnsupportedGroup="DashboardInvitationUnsupportedGroup";var a;!(function(e){e.invitationCodeQueryParam="invitationCode",e.invitationCodeQueryParamV2="i",e.invitationClaimed="invitationClaimed"})(a=e.invitation||(e.invitation={}));var n;!(function(e){e.userDismissedAction="dismissed",e.userClickedAction="clicked"})(n=e.dynamicMessaging||(e.dynamicMessaging={})),e.targetValueBlank="_blank",e.downloadPBIDesktopLink="http://go.microsoft.com/fwlink/?LinkID=521920",e.refreshHistoryDialogTimeoutValue=9e6})(t=e.constants||(e.constants={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.models.CollapsiblePaneExpandedWidth,o=e.common.constants,r=e.common.models,a=e.dataServices.ContractUtils.convertToSemanticQueryWithDataShapeBinding,n=e.dataServices.models.DashboardTileModel,s=e.dataServices.DashboardUtils,c=e.dataServices.constants,l=e.dataServices.EwaNamedItemType,d=e.dataServices.contracts.FavoriteType,p=e.dataServices.models.IntraDomainNavigationType,u=e.dataServices.models.IsDashboardIntraDomainPrefix,v=e.dataServices.models.IsReportIntraDomainPrefix,h=e.telemetry.MobileAuthoringResetType,g=e.common.contracts.Permissions,m=jsCommon.StringExtensions,f=e.common.constants.TaskPaneCollapsiblePaneMode,y=e.dataServices.contracts.TilePublishState,b=e.dataServices.contracts.TileType,S=e.explore.infonav.services.VisualState,w='\n    <div class="tileErrors">\n        <div class="errorText" ng-bind="::title"></div>\n        <div ng-repeat="tileError in ::tileErrors" class="tileError">\n            <div class="tileErrorCount">\n                <pbi-icon name="error" size="small"></pbi-icon>\n                <span localize="DashboardAppBar_TileError_ErrorDialogErrorTitle" localize-fragments>\n                    <span fragment-index="0" ng-bind="::tileError.count"></span>\n                </span>\n            </div>\n            <error-details-info error-details="tileError.errorDetails"></error-details-info>\n        </div>\n        <a class="modalErrorHelpLink" target="_blank" href="https://go.microsoft.com/fwlink/?LinkId=690865" localize="TopNav_HelpMenu_GetHelp"></a>\n    </div>\n    ';!(function(e){e[e.Normal=0]="Normal",e[e.NoDashboardsWatermark=1]="NoDashboardsWatermark",e[e.RequestAccess=2]="RequestAccess",e[e.Uninitialized=3]="Uninitialized"})(t.DashboardContainerControllerViewState||(t.DashboardContainerControllerViewState={}));var C=t.DashboardContainerControllerViewState,D=(function(){function D(t,i){var r=this;this.scope=t,this.services=i,this.scope.rootScope=i.rootScope,this.scope.refreshState=0,this.initialize(this.services.dashboardService.dashboardContainerModel),this.initialized||(this.unregisterViewModelWatch=this.services.rootScope.$on(e.constants.dashboardContainerLoaded,(function(){r.initialize(r.services.dashboardService.dashboardContainerModel)}))),this.scope.conceptualModelEnabled=function(){return r.services.featureSwitchService.featureSwitches.conceptualModelEnabled||r.services.featureSwitchService.featureSwitches.previewConceptualModel&&r.services.tutorialDataStore.hasKey(o.previewConceptualModelNewKey)},this.scope.groupService=this.services.groupService,this.services.dashboardDataService.registerRefreshStateListener(this)}return D.createOptions=function(){return{additionalServices:["$window","contentProviderHttpService","dashboardHttpService","dashboardService","dashboardStateChangeService","dashboardWarningsService","home","errorService","featureSwitchService","modelConverter","modelMerger","navigation","promiseFactory","reportService","modelService","workbookService","settingsMetadataService","syncService","telemetryService","localizationService","visualPlugin","groupService","notificationBar","notificationToast","viralTenantMergeHelperService","modelService","licenseHelperService","licenseEnforcementService","tutorialDataStore","userInfo","dashboardDataService","packageService","fullScreen","inFocusService","permissionService","sampleQuestionsService","userSettingsService","favorites","rtl","embedModeService","gridLayout","dashboardConfigurationService","modalDialogService","auditing","mostRecentlyUsedService","quota"],scopedDependencies:["explorationCapabilities"],scopedServiceRoot:!0}},D.prototype.initialize=function(t){var r=this;if(!this.initialized&&t){this.viewModel=t;var a=this.services,n=this.scope,l=n.dashboardDataService=a.dashboardDataService;n.showBreadcrumb=0===n.refreshState&&(!a.featureSwitchService.featureSwitches.breadcrumbNavigationEnabled||_.include(a.$window.location.pathname,"invite")),n.mobileDashboardsAuthoringEnabled=a.featureSwitchService.featureSwitches.mobileDashboardsAuthoringEnabled,a.navigation.inDashboardView()&&a.dashboardWarningsService.showWarningsIfNeeded();var d=n.permissionService=a.permissionService,p=n.navigation=a.navigation,u=n.fullScreen=a.fullScreen;n.maxDashboardNameLength=e.constants.maxDashboardNameLength,n.sharingEnabled=function(){return!d.isActiveWorkspaceIsReadOnly&&l.activeDashboard&&(l.activeDashboard.canEdit&&!d.isActiveWorkspaceIsReadOnly&&!u.fullScreenMode||(l.activeDashboard.getPermissions()&g.ReShare)===g.ReShare)&&!u.fullScreenMode&&e.common.containsDirective("ShareView")},n.showAddTileButton=function(){return!d.isActiveWorkspaceIsReadOnly&&l.activeDashboard&&l.activeDashboard.canEdit&&!u.fullScreenMode},n.showTileGalleryPane=function(){return r.showTileGalleryPane()},n.navigateToContentList=function(){return r.navigateToContentList()},n.shareDashboard=function(e){return a.dashboardService.navigateToShareDashboard(e)},n.personalize=function(){return r.personalize()},this.scope.shouldShowUnpinTiles=function(){return s.containsLayout(1,1,l.activeDashboard)},n.questionBoxOutput={utterance:"",showQnaFeedback:!1,showPinButton:!1,interpretUtterance:null,updateUtteranceWithoutInterpret:null,clearQuestionBox:null,showUserFeedbackDialog:null},n.getAdditionalODataFilter=function(){return a.navigation.additionalODataFilter},n.favoriteEnabled=!a.dashboardConfigurationService.disableDashboardFavoriteButton,n.newQnaEnabled=!a.rtl.isRtlLayout,n.addDashboardFavorite=function(){return r.addDashboardFavorite()},n.deleteDashboardFavorite=function(){return r.deleteDashboardFavorite()},n.unpinAllTiles=function(){return r.unpinAll()},n.resetTiles=function(){return r.resetTilesClicked()},n.resetPhoneView=function(){return r.resetPhoneViewClicked()},n.exploreContainerOptions=a.explorationCapabilities.getCapabilities(),n.pinQnAVisual=function(e){return r.pinQnAVisual(e)},n.showQnaStart=function(){return r.showQnaStart()},n.showQna=function(){return r.showQna()},n.canWrite=function(){return!d.isActiveWorkspaceIsReadOnly},this.tileErrorDetails={},n.showDashboardTileErrors=!1,n.dashboardTileErrorCount=0,n.toggleTileError=function(){return r.toggleTileError()},n.showTileErrorDetails=function(){return r.showTileErrorDetails()},n.$watch("dashboardDataService.activeDashboard",(function(t){t&&(a.dashboardService.updateDashboardMenuItems(n),r.services.dashboardDataService.updateIsQnaEnabled(),r.updateShouldDisplayQuestionBox(),r.resetDashboardToWebView(t),r.toggleFullScreenByViewState(),r.resetDashboardTileErrors(),t.id>=0&&a.mostRecentlyUsedService.updateMRU(e.models.MRUArtifactType.Dashboards,t.objectId,t.displayName,t.getPermissions()))})),n.moreOptionsMenuSelected=function(e){return r.onDashboardMenuItemSelected(e)},n.showMoreOptionsMenu=function(){return!_.isEmpty(n.moreOptionsMenu)};var v={getInitialVisualState:function(){return p.inQnaStartView()?S.QnaStart:S.Empty},setInterpretListener:function(e){n.infoNavContainerInterpretListener=e},updatePinIconState:function(e){n.pinIconState=e}};n.infoNavHostService=v,n.allowQnaDataCollection=!1,a.userSettingsService.getUserSettings().then((function(e){e&&(n.allowQnaDataCollection=e.allowQnaDataCollection)})),n.$watchGroup(["fullScreen.fullScreenMode","dashboardDataService.isQnaEnabled || navigation.inQnaView() || navigation.inQnaStartView()","isActive"],(function(e){a.dashboardDataService.activeDashboard&&r.updateShouldDisplayQuestionBox()})),a.featureSwitchService.featureSwitches.userNotificationsEnabled?a.licenseEnforcementService.createNotificationForTrial():a.licenseHelperService.displayNotificationIfTrialIsRunningOutSoon(),a.localizationService.ensureLocalization((function(){var t=a.localizationService;n.newDashboardPlaceholder=t.get("NewDashboard_Placeholder"),n.dashboardReadOnlyText=t.get("DashboardReadOnly_Tooltip"),a.viralTenantMergeHelperService.viewingDataFromMergedViralTenant()&&a.notificationBar.notify({message:a.localizationService.get("ArchivedContent_HeaderMessage"),notificationType:e.common.NotificationBarType.Warning,actions:[{displayText:a.localizationService.get("ArchivedContent_BackToPowerBI"),linkId:1,action:function(){return n.navigation.toggleArchivedContent()}}],secondaryLink:{displayText:a.localizationService.get("ArchivedContent_HeaderLinkText"),urlString:"https://go.microsoft.com/fwlink/p/?LinkId=522081"}}),n.errorMessageConfig={canEdit:n.canWrite(),mode:!1,titleShared:t.get("Dashboard_NoDashboardsWarningTitle_ReadOnlyMode"),titleNonShared:t.get("Dashboard_NoDashboardsWarningTitle"),contentShared:t.get("Dashboard_NoDashboardsWarningText_ReadOnlyMode"),contentNonShared:t.get("Dashboard_NoDashboardsWarningText")}})),n.getViewState=function(){return a.navigation.inRequestDashboardAccessView()?C.RequestAccess:t.dashboards.length>0?C.Normal:this.initialized?a.featureSwitchService.featureSwitches.conceptualModelEnabled||a.featureSwitchService.featureSwitches.previewConceptualModel&&a.tutorialDataStore.hasKey(o.previewConceptualModelNewKey)?void 0:C.NoDashboardsWatermark:C.Uninitialized},a.home.onHomeSettingChanged.push((function(){a.dashboardService.updateDashboardMenuItems(n)})),a.dashboardStateChangeService.registerDashboardContainerScope(n);var h=a.rootScope.$on(e.constants.notifyUpdateAllowQnaDataCollectionEventName,(function(e,t){e.stopPropagation(),e.preventDefault(),n.allowQnaDataCollection=t}));n.$on(e.constants.actualOpenTileEventName,(function(e,t,i){return r.onActualOpenTile(e,t,i)})),n.$on(e.constants.updateTileHrefEventName,(function(e,t,i){return r.onUpdateTileHref(e,t,i)})),n.$watch("dashboardDataService.activeDashboard.isLoaded",(function(e){e&&a.navigation.inDashboardView()?a.dashboardWarningsService.showWarningsIfNeeded():a.dashboardWarningsService.hideDashboardWarnings()})),this.scope.$watchCollection("dashboardDataService.activeDashboard.tiles",(function(){r.setQnASuggestedQuestionsPromise&&r.services.timeout.cancel(r.setQnASuggestedQuestionsPromise),r.setQnASuggestedQuestionsPromise=r.services.timeout((function(){r.setQnASuggestedQuestions(),r.setQnASuggestedQuestionsPromise=null}))}));var m=a.rootScope,y=m.$on(c.shouldShowEnableCustomVisualsDialog,(function(e){return a.dashboardWarningsService.showWarningsIfNeeded()})),b=m.$on(e.constants.dashboardTileErrorEventName,(function(e,t,i){return r.onDashboardTileError(e,t,i)})),w=m.$on(e.constants.removeDashboardTileErrorEventName,(function(e,t,i){return r.onRemoveDashboardTileError(e,t,i)}));if(p.qnaQuery)var D=n.$watch("questionBoxOutput.interpretUtterance",(function(){var e=n.questionBoxOutput.interpretUtterance;e&&(e(p.qnaQuery),r.watchUtteranceForNavigation(),D())}));else this.watchUtteranceForNavigation();if(n.$on(e.constants.removeTileEventName,(function(e,t){return r.onRemoveTile(e,t)})),this.contentProviders=a.contentProviderHttpService.getBuiltInContentProviders(),n.$on("$destroy",(function(){r.viewModel.viewMode=0,r.toggleFullScreenByViewState(),h(),y(),b(),w(),r.unregisterViewModelWatch&&r.unregisterViewModelWatch(),a.dashboardStateChangeService.unregisterDashboardContainerScope(),a.dashboardDataService.unregisterRefreshStateListener(r)})),this.initialized=!0,n.viewModel.dashboards&&0===n.viewModel.dashboards.length&&n.viewModel.contract.reports&&n.viewModel.contract.reports.length>0&&a.permissionService.isActiveWorkspaceIsReadOnly){var I=n.viewModel.contract.reports[0];a.navigation.navigateToReportByGUID(I.objectId,this.services.groupService.activeGroupObjectId,I.originalReportObjectId)}p.inSharingView()&&a.timeout((function(){a.dashboardService.navigateToShareDashboard(p.currentDashboardGUID)})),p.inAlertsEditorView()&&a.timeout((function(){var t=n.$watch("dashboardDataService.activeDashboard.isLoaded",(function(o){if(p.inAlertsEditorView()){if(!o)return;var a=r.setAndGetActiveTile();a&&n.$emit(e.constants.showTaskPaneSlider,f.AlertsEditor,i.Small)}t()}))})),(p.inInFocusView()||p.inInFocusInsightsView())&&a.timeout((function(){var e=n.$watch("dashboardDataService.activeDashboard.isLoaded",(function(t){if(p.inInFocusView()||p.inInFocusInsightsView()){if(!t)return;var i=r.setAndGetActiveTile();i&&a.inFocusService.view(i,void 0,p.inInFocusInsightsView())}e()}))}))}},D.prototype.onStateChange=function(e,t){this.scope.refreshState=e},D.prototype.setAndGetActiveTile=function(){var e=this.services.dashboardDataService.activeDashboard,i=this.getValidTileNavState(e);return i?(this.services.dashboardService.selectDashboardTile(new n(i)),i):void t.DashboardContainerController.showTileDoesNotExistDialog(this.services.errorService,this.services.localizationService,this.services.telemetryService)},D.prototype.getValidTileNavState=function(e){var t=this.services.navigation.currentTileGUID,i=this.services.navigation.currentTileOriginalGUID;return e.findTileByObjectIdOrOriginalObjectId(t,i)},D.prototype.updateShouldDisplayQuestionBox=function(){this.scope.shouldDisplayQuestionBox=!this.scope.fullScreen.fullScreenMode&&(this.scope.dashboardDataService.isQnaEnabled||this.scope.navigation.inQnaView()||this.scope.navigation.inQnaStartView())&&this.scope.isActive},D.prototype.addDashboardFavorite=function(){var e=this.services.dashboardService.getActiveDashboard();e&&(e.isFavorite=!0,e.isFavoriteDisabled=!0,this.services.favorites.addFavorite(d.Dashboard,e.id).then((function(t){e.favoriteInfo=t})).finally((function(){e.isFavoriteDisabled=!1})))},D.prototype.deleteDashboardFavorite=function(){var e=this.services.dashboardService.getActiveDashboard();e&&this.services.favorites.deleteFavorite(e.objectId)},D.prototype.watchUtteranceForNavigation=function(){var t=this,i=this.services.navigation;this.scope.$watch("questionBoxOutput.utterance",(function(o){i.inQnaView()?i.showQnaView(o,e.services.LocationOptions.Replace,!1):_.isEmpty(o)||(i.qnaQuery||"")===(o||"")||(i.showQnaView(o,e.services.LocationOptions.True,!1),t.scope.$applyAsync((function(){return t.scope.questionBoxOutput.interpretUtterance(i.qnaQuery)})))}))},D.prototype.resetDashboardToWebView=function(e){e&&(e.gridLayoutService||(e.gridLayoutService=this.services.gridLayout),this.switchLayoutStrategy(e,new r.DefaultGridLayoutStrategy,0),this.viewModel.viewMode=0)},D.showDashboardDoesNotExistDialog=function(t,i,o,r){e.helpers.ArtifactNotFoundHelper.showArtifactDoesNotExistDialog("ArtifactKind_Dashboard",t,i,o),r.navigateToContentListOrActiveDashboard()},D.showTileDoesNotExistDialog=function(t,i,o){e.helpers.ArtifactNotFoundHelper.showArtifactDoesNotExistDialog("ArtifactKind_Tile",t,i,o)},D.prototype.setQnASuggestedQuestions=function(){if(this.services.dashboardDataService.updateIsQnaEnabled(),this.services.dashboardDataService.activeDashboard&&!_.isEmpty(this.services.dashboardDataService.activeDashboard.tiles))for(var e=0,t=this.services.dashboardDataService.activeDashboard.tiles;e<t.length;e++){var i=t[e];m.isNullOrUndefinedOrWhiteSpaceString(i.utterance)||this.services.sampleQuestionsService.addTileUtterance(i.utterance,i.contract.modelId)}},D.prototype.pinQnAVisual=function(t){t.stopPropagation(),this.services.rootScope.$emit(e.explore.infonav.constants.pinSelectedVisual)},D.prototype.showQnaStart=function(){this.services.telemetryService.logEvent(e.telemetry.QnAQnaHowToAskClicked);var t=this.services.navigation;t.showQnaStart(t.inQnaStartView()?e.services.LocationOptions.Replace:e.services.LocationOptions.True)},D.prototype.showQna=function(){this.services.navigation.showQnaView()},D.prototype.personalize=function(){this.services.dashboardDataService.activeDashboard.getPermissions()===g.CopyOnWrite&&this.scope.$emit(e.constants.personalizeEventName,this.services.dashboardDataService.activeDashboard.contract.originalPackageId)},D.prototype.onActualOpenTile=function(t,i,r){t.stopPropagation();var a,n=this.services.telemetryService;i.contractsModel&&(a=i.contractsModel.contentProviderId);var s=e.common.findContentProviderName(this.contentProviders,a),c=n.startEvent(e.telemetry.DashboardOpenTile,null,i.report?i.report.id:i.id,"No error",a,s);switch(i.action.action){case o.openReportActionName:this.openReportTile(i,r,c);break;case e.constants.openUrlActionName:this.openUrlTile(i,c);break;case o.openInsightsActionName:case o.openInFocusActionName:this.services.inFocusService.view(i);break;case o.openWorkbookActionName:this.openWorkbookTile(i,r,c);break;case o.openQnAActionName:this.openQnaTile(i,c)}},D.prototype.onUpdateTileHref=function(e,t,i){if(u(i))return void this.processDashboardLink(t,i);if(v(i))return void this.processReportLink(t,i);var o=t.action,r=o&&o.openInSameTab;this.processFullUrl(t,i,r)},D.prototype.onDashboardTileError=function(e,t,i){e&&e.stopPropagation();var o=i.message,r=this.tileErrorDetails[o]?this.tileErrorDetails[o].tileIds:null;r?r.indexOf(t.id)<0&&(r.push(t.id),this.scope.dashboardTileErrorCount++):(this.tileErrorDetails[o]={tileIds:[t.id],errorDetails:i},this.scope.dashboardTileErrorCount++)},D.prototype.onRemoveDashboardTileError=function(e,t,i){e&&e.stopPropagation();var o=i.message,r=this.tileErrorDetails[o]?this.tileErrorDetails[o].tileIds:null;if(!_.isEmpty(r)){var a=r.indexOf(t.id);a>=0&&(r.splice(a,1),this.scope.dashboardTileErrorCount--,_.isEmpty(r)&&delete this.tileErrorDetails[o])}},D.prototype.processFullUrl=function(e,t,i){if(i){var o=this.tryGetFullUrlIntraDomainNavigationParamers(t);if(o)return e.intraDomainNavigationParameters=o,void(e.href=void 0)}e.intraDomainNavigationParameters=void 0,e.href=t},D.prototype.tryGetFullUrlIntraDomainNavigationParamers=function(e){var t=document.createElement("a");t.href=e;var i=window.location;if(t.hostname!==i.hostname)return null;var o=t.pathname;o&&"/"!==o.charAt(0)&&(o="/"+o);var r=o.split("/");if(r.length<5)return null;var a=r[3].toLowerCase(),n=r[4].toLowerCase();if("dashboards"===a){var s=_.filter(this.services.dashboardService.dashboardContainerModel.visibleDashboards,(function(e){return e.objectId.toLowerCase()===n}));if(s.length>0)return{navigationTargetGuid:s[0].objectId,navigationTargetOriginalGuid:s[0].contract.originalDashboardObjectId,navigationType:p.Dashboard,navigationSubPage:null}}else if("reports"===a){var c=_.filter(this.services.reportService.reports,(function(e){return e.objectId.toLowerCase()===n}));if(c.length>0)return{navigationTargetGuid:c[0].objectId,navigationTargetOriginalGuid:c[0].contract.originalReportObjectId,navigationType:p.Report,navigationSubPage:r.length>5?r[5]:null}}return null},D.prototype.processDashboardLink=function(e,t){e.href=void 0;var i=this.getIntraDomainNavigationTargetName(t);if(i){var o=_.filter(this.services.dashboardService.dashboardContainerModel.visibleDashboards,(function(e){return e.displayName.toLowerCase()===i||e.objectId.toLowerCase()===i}));o.length>0&&(e.intraDomainNavigationParameters={navigationTargetGuid:o[0].objectId,navigationTargetOriginalGuid:o[0].contract.originalDashboardObjectId,navigationType:p.Dashboard,navigationSubPage:null})}},D.prototype.processReportLink=function(e,t){e.href=void 0;var i=this.getIntraDomainNavigationTargetName(t);if(i){var o=_.filter(this.services.reportService.reports,(function(e){return e.displayName.toLowerCase()===i||e.objectId.toLowerCase()===i}));o.length>0&&(e.intraDomainNavigationParameters={navigationTargetGuid:o[0].objectId,navigationTargetOriginalGuid:o[0].contract.originalReportObjectId,navigationType:p.Report,navigationSubPage:null})}},D.prototype.getIntraDomainNavigationTargetName=function(e){var t=e.split("/");return t.length<3?null:decodeURIComponent(t[2]).toLowerCase()},D.prototype.openReportTile=function(t,i,o){if(this.canOpenReport(t))if(o.event.info.tileType=e.telemetry.ContentTypes.Report,t.report&&t.report.id){var r=void 0;t.action&&(r=t.action.targetSlideId),t.report.model=t.contractsModel,t.report.packageId=t.contract.packageId,this.services.reportService.addReport(t.report),this.services.modelService.addModel(this.services.modelConverter.convertModel(t.report.model));var a=t.report.contract&&t.report.contract.originalReportObjectId;this.services.navigation.navigateToReportByGUID(t.report.objectId,this.services.groupService.activeGroupObjectId,a,r)}else{var n=this.services.dashboardService.dashboardContainerModel.visibleDashboards[this.services.dashboardService.dashboardContainerModel.getDashboardIndex(i)],s=n.getPermissions();if((s&g.Write)!==g.Write)return;this.services.quota.checkQuotaExceeded()||this.services.permissionService.isActiveWorkspaceIsReadOnly||this.services.navigation.navigateToDatasetByDBName(t.contractsModel.dbName,e.common.contracts.reportServer.ReportInstantiationMode.NonTemplateForExistingTile)}o.resolve()},D.prototype.canOpenReport=function(e){if(!e.contractsModel){var t=e.contract.modelId,i=this.services.dashboardService.dashboardContainerModel.contract.models;if(!i)return!1;for(var o=i.length,r=0;r<o;r++)i[r].id===t&&(e.contractsModel=i[r])}var a=null!=e.contractsModel&&null!=e.contractsModel.vsName&&null!=e.contractsModel.dbName,n=e.contract.publishState===y.Completed;return a&&n},D.prototype.openUrlTile=function(t,i){if(!t.href&&t.intraDomainNavigationParameters){var o=t.intraDomainNavigationParameters;switch(o.navigationType){case p.Dashboard:this.services.navigation.navigateToDashboardByGUID(o.navigationTargetGuid);break;case p.Report:this.services.navigation.navigateToReportByGUID(o.navigationTargetGuid,this.services.groupService.activeGroupObjectId,o.navigationTargetOriginalGuid,o.navigationSubPage)}}i.event.info.tileType=e.telemetry.ContentTypes.Url,i.resolve()},D.prototype.openWorkbookTile=function(e,t,i){var o,r=this.services.workbookService.findWorkbook(e.contract.workbookId,e.contract.packageId),a=this.services.workbookService.getWorkbookUniqueId(r);o=e.contract.$config.workbookTile.itemType===l.NamedRange||e.contract.$config.workbookTile.itemType===l.Table?e.contract.$config.workbookTile.item:e.contract.$config.workbookTile.activeSelection,this.services.navigation.navigateToWorkbookByUrlId(a,o)},D.prototype.openQnaTile=function(t,i){var o=this;i.event.info.tileType=e.telemetry.ContentTypes.QnA;var r=t.contract,n=r.query.modelQuery,s=JSON.parse(r.config);if(r.type===b.report){var c=s&&s.reportTile,l={modelId:r.modelId,utterance:n.utterance,openTileTelemetryEvent:i,reportPageTile:{reportId:r.reportId,sectionId:r.sectionId,pod:c&&c.pod,filters:c&&c.filters}};this.services.timeout((function(){o.services.rootScope.$emit(e.explore.infonav.constants.openTileEventName,l),o.scope.questionBoxOutput.updateUtteranceWithoutInterpret&&o.scope.questionBoxOutput.updateUtteranceWithoutInterpret(n.utterance)}),D.runningQueryDelayMs)}else{var d=a(r.query),p=s.visual,u=p.queryMetadata;if(!e.explore.infonav.VersionUtil.canVisualizeQuery(d.defn,u))return void this.services.navigation.showQnaView(t.utterance,e.services.LocationOptions.True,!1);for(var v=p.elements,h=[],g=0,m=v;g<m.length;g++)for(var f=m[g],y=0,S=f.DataRoles;y<S.length;y++){var w=S[y];h.push(w)}this.services.timeout((function(){var a=o.services.visualPlugin.getPlugin(t.composite.visual.type),c=e.data.services.DataViewObjectSerializer.deserializeObjects(s.visual.objects,a.capabilities.objects);o.services.rootScope.$emit(e.explore.infonav.constants.openTileEventName,{modelId:r.modelId,utterance:n.utterance,openTileTelemetryEvent:i,visualTile:{binding:d.shape,query:d.defn,metadata:u,visual:a,dataRoles:h,dataViewObjectDefinitions:c}}),o.scope.questionBoxOutput.updateUtteranceWithoutInterpret&&o.scope.questionBoxOutput.updateUtteranceWithoutInterpret(n.utterance)}),D.runningQueryDelayMs)}this.services.navigation.inQnaView()||this.services.navigation.showQnaView()},D.prototype.onRemoveTile=function(e,t){e&&e.stopPropagation(),this.services.dashboardWarningsService.showWarningsIfNeeded(),m.isNullOrUndefinedOrWhiteSpaceString(t.utterance)||this.services.sampleQuestionsService.deleteTileUtterance(t.utterance,t.contract.modelId),this.removeTileAndUpdateTileErrorCount(t)},D.prototype.onDashboardMenuItemSelected=function(t){var r=this;if(null!=t.action)switch(t.action){case 0:this.duplicateDashboard();break;case 2:this.refreshDashboard();break;case 1:this.printDashboard();break;case 3:this.setHomeDashboard();break;case 4:this.selectMenuItem(t);break;case 5:var a=this.services.dashboardDataService.activeDashboard;_.any(a.tiles,(function(e){return e.gridLayouts&&e.hasLayoutDefinition(1)}))?this.selectMenuItem(t):this.getPromiseMessage(o.PhoneVersionMessage).then((function(){r.selectMenuItem(t)}));break;case 6:var n=this.services.dashboardDataService.activeDashboard.objectId;this.services.settingsMetadataService.setSettings(1,n),this.scope.$emit(e.constants.showTaskPaneSlider,f.SettingsBlade,i.Medium)}},D.prototype.selectMenuItem=function(e){this.uncheckMenuItems(),this.updateCurrentViewMode(e),e.checked=!0},D.prototype.uncheckMenuItems=function(){for(var e=0,t=this.scope.moreOptionsMenu;e<t.length;e++){var i=t[e];i.checked=!1}},D.prototype.updateCurrentViewMode=function(t){var i=this.services.dashboardDataService.activeDashboard;switch(t.action){case 4:var o=angular.isDefined(_.find(this.scope.moreOptionsMenu,(function(e){return 1===e.action})));o||this.services.dashboardService.updateDashboardMenuItems(this.scope),this.switchLayoutStrategy(i,new r.DefaultGridLayoutStrategy,0),this.viewModel.viewMode=0;break;case 5:_.remove(this.scope.moreOptionsMenu,(function(e){return 1===e.action})),this.raiseEnteredAuthoringModeEvent(i),this.viewModel.dashboardEditMobileDisplay=e.models.modelFactory.createDashboardEditMobileDisplay(i),this.createMobilePositionsIfNeeded(1),this.switchLayoutStrategy(i,new r.DynamicLayoutStrategy,1),this.viewModel.viewMode=1}this.toggleFullScreenByViewState()},D.prototype.toggleFullScreenByViewState=function(){var e=$(".enterFullScreenBtn");e.length>0&&(0===this.viewModel.viewMode?e.show():e.hide())},D.prototype.raiseEnteredAuthoringModeEvent=function(t){var i=!_.any(t.tiles,(function(e){return e.hasLayoutDefinition(1)}));this.services.telemetryService.logEvent(e.telemetry.DashboardUserEnteredPhoneMobileAuthoringMode,t.objectId,i)},D.prototype.createMobilePositionsIfNeeded=function(t){var i=this.services.dashboardDataService.activeDashboard,o=_.filter(i.tiles,(function(e){return e.gridLayouts&&e.hasLayoutDefinition(t)}));if(_.isEmpty(o)&&!_.isEmpty(i.tiles)){var r=this.getOrderedDashboardTiles(i),a=e.models.modelFactory.createDefaultPhonePositions(r);this.applyTileLayoutChanges(i,a)}},D.prototype.getOrderedDashboardTiles=function(e){var t=s.orderItems(_.map(e.tiles,(function(e){return{getActiveLayoutPosition:function(){return e.gridLayouts[0].position},getItem:function(){return e}}})));return t},D.prototype.applyTileLayoutChanges=function(t,i){this.scope.$emit(e.common.constants.domLayoutChangedEvent),this.services.dashboardService.batchUpdateTileSizePosition(t,i)},D.prototype.switchLayoutStrategy=function(e,t,i){e.gridLayoutService.strategy=t,e.gridLayoutService.displayLayout=i,this.updateDashboardTilesWithDisplayLayout(e,i)},D.prototype.updateDashboardTilesWithDisplayLayout=function(e,t){if(e&&e.tiles)for(var i=0,o=e.tiles;i<o.length;i++){var r=o[i];r.gridLayoutContext&&r.gridLayoutContext.setActiveLayout(t),r.invalidateLayout()}},D.prototype.unpinAll=function(){var e=this;this.getPromiseMessage(o.UnpinAllTilesMessages).then((function(){e.unpinAllTiles()}))},D.prototype.resetTilesClicked=function(){var e=this;this.getPromiseMessage(o.ResetTilesMessages).then((function(){e.resetTiles()}))},D.prototype.resetPhoneViewClicked=function(){var e=this;this.getPromiseMessage(o.ResetPhoneViewMessages).then((function(){e.resetPhoneView()}))},D.prototype.duplicateDashboard=function(){var t=this.services.dashboardDataService.activeDashboard,i=this.services,o=i.localizationService;
i.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.AddDashboard)||D.showDuplicateDashboardDialog(t.displayName,i.errorService,o,i.promiseFactory).then((function(r){i.dashboardService.duplicateDashboard(t.contract,r).then((function(r){var a=o.get("DuplicateDashboard_Success"),n=o.format("DuplicateDashboard_Success_Details",[t.displayName]);i.notificationToast.notify({title:a,message:n,notificationType:e.common.NotificationToastType.Success})}),(function(){var r=o.get("DuplicateDashboard_Error"),a=o.format("DuplicateDashboard_Error_Details",[t.displayName]);i.notificationToast.notify({title:r,message:a,notificationType:e.common.NotificationToastType.Error})}))}))},D.prototype.setHomeDashboard=function(){this.services.home.setHomeDashboard(this.services.dashboardDataService.activeDashboard,this.services.groupService.activeGroupObjectId)},D.prototype.printDashboard=function(){this.services.$window.print(),this.services.telemetryService.logEvent(e.telemetry.DashboardAndReportsPrint,e.telemetry.PrintType.Dashboard);var t=this.services.dashboardDataService.activeDashboard;this.services.auditing.auditEvent(t.id,e.common.contracts.AuditEntityType.Dashboard,e.common.contracts.AuditActivityType.printDashboard)},D.prototype.refreshDashboard=function(){var t=this,i=this.services.dashboardDataService.activeDashboard;if(0!==i.tiles.length){var o=this.services.notificationToast.notify({message:this.services.localizationService.get("Dashboard_RefreshStart"),notificationType:e.common.NotificationToastType.Loading}),r=this.createRefreshEvent();this.services.dashboardHttpService.refreshTileData(i.id,null,r.event).then((function(i){t.services.notificationToast.hide(o),t.services.notificationToast.notify({message:t.services.localizationService.get("Dashboard_RefreshCompletedSuccess"),notificationType:e.common.NotificationToastType.Success}),t.services.dashboardService.checkRefreshTileResponse(i.data),r.resolve()}),(function(e){t.services.notificationToast.hide(o),t.services.errorService.error(t.services.localizationService.get("Dashboard_RefreshCompletedFailure"),"Dashboard_RefreshCompletedFailure",{requestId:e.requestId,statusCode:e.status.toString()}),r.reject()}))}},D.prototype.createRefreshEvent=function(){var t=this.services.dashboardDataService.activeDashboard,i=this.services.dashboardService.getVisualCountData(),o=i.scriptVisualsCount,r=i.reportTilesWithR,a=i.totalVisualsCount;return this.services.telemetryService.startEvent(e.telemetry.DashboardRefreshDashboardTiles,t.objectId,a,o,r)},D.prototype.showTileGalleryPane=function(){this.services.telemetryService.logEvent(e.telemetry.DashboardAddWidget),this.scope.$emit(e.constants.showTaskPaneSlider,f.TileGallery,i.Large)},D.prototype.navigateToContentList=function(){this.services.navigation.navigateToContentList(this.services.groupService.activeGroupObjectId)},D.showDuplicateDashboardDialog=function(t,i,o,r){var a=r.defer();return o.ensureLocalization((function(){var r=i.control(),n=o.get("ModalDialog_Duplicate"),s=o.get("Duplicate_Dashboard"),c=o.get("Dashboard_DuplicateDialogMessage"),l='<section class="duplicateDialog"><div class="message"></div><input type="text" class="dashboardSaveAsName" /></section>',d=$(l);d.find(".message").text(c);var p=d.find(".dashboardSaveAsName");p.val(o.format("Dashboard_DuplicateDialogNameTemplate",[t]));var u=[new InJs.ModalDialogAction(n,function(e,t){var i=m.trimWhitespace(p.val());r.hideDialog(),a.resolve(i)}),new InJs.ModalDialogAction(e.common.localize.get("ModalDialog_Cancel"),function(e,t){r.hideDialog(),a.reject()})];r.showCustomDialog(s,d,u,(function(e){var t=e.parent().find('input[value = "'+n+'"]');p.focus().on("change keyup paste mouseup",(function(e){var i=m.isNullOrUndefinedOrWhiteSpaceString($(e.target).val());t.prop("disabled",i)})).on("keyup",(function(e){e.which!==jsCommon.DOMConstants.enterKeyCode||m.isNullOrUndefinedOrWhiteSpaceString($(e.target).val())?e.which===jsCommon.DOMConstants.escKeyCode&&u[1].actionCallback(null,null,null):u[0].actionCallback(null,null,null)}))}),!0)})),a.promise},D.prototype.unpinAllTiles=function(){var e=this.services.dashboardDataService.activeDashboard,t=[];this.viewModel.dashboardEditMobileDisplay.dashboardPane.isPaneExpanded=!0;for(var i=this.viewModel.dashboardEditMobileDisplay.mobileDashboard.tiles,o=0,r=i;o<r.length;o++){var a=r[o];t.push(a.removeLayoutPosition(1))}this.applyTileLayoutChanges(e,t)},D.prototype.resetPhoneView=function(){var e=this.removeTilesLayoutDefinition(h.OriginalSerialLayout);this.applyTileLayoutChanges(this.services.dashboardDataService.activeDashboard,e);var t=this.viewModel.dashboardEditMobileDisplay.mobileDashboard.tiles;t.forEach((function(e){return e.invalidateLayout()}));var i=_.find(this.scope.moreOptionsMenu,(function(e){return 4===e.action}));this.selectMenuItem(i)},D.prototype.resetTiles=function(){this.removeTilesLayoutDefinition(h.DefaultMobileLayout),this.createMobilePositionsIfNeeded(1);var e=this.viewModel.dashboardEditMobileDisplay.mobileDashboard.tiles;e.forEach((function(e){return e.invalidateLayout()}))},D.prototype.removeTilesLayoutDefinition=function(t){for(var i=[],o=this.viewModel.dashboardEditMobileDisplay.mobileDashboard.tiles,r=0,a=o;r<a.length;r++){var n=a[r];n.hasLayoutDefinition(1)&&i.push(n.removeLayoutDefinition(1,!1))}return this.services.telemetryService.logEvent(e.telemetry.DashboardUserDeletedMobileLayout,this.viewModel.dashboardEditMobileDisplay.mobileDashboard.objectId,t),i},D.prototype.getPromiseMessage=function(e){var t=this.services,i=t.localizationService;return D.showDialogMessage(t.errorService,i,t.promiseFactory,e)},D.showDialogMessage=function(t,i,o,r){var a=o.defer();return i.ensureLocalization((function(){var o=t.control(),n=i.get(r.confirmButtonMessage),s=i.get(r.titleMessage),c=i.get(r.contentMessage),l=i.get(r.hrefLabel),d=r.hrefLink,p=d&&d.length>0?"inline":"none",u='<section class="duplicateDialog"></section>',v=$('<div class="message" style="display: inline"></div>').text(c),h=$('<a target="_blank"></a>').text(l).attr("href",r.hrefLink).css("display",p),g=$(u).append(v).append(h),m=[new InJs.ModalDialogAction(n,function(e,t){o.hideDialog(),a.resolve("")}),new InJs.ModalDialogAction(e.common.localize.get("ModalDialog_Cancel"),function(e,t){o.hideDialog(),a.reject()})];o.showCustomDialog(s,g,m,null,!0)})),a.promise},D.prototype.toggleTileError=function(){this.scope.showDashboardTileErrors=!this.scope.showDashboardTileErrors;var e=this.services.dashboardDataService.activeDashboard.tiles;if(this.scope.showDashboardTileErrors)_.forOwn(this.tileErrorDetails,(function(t){for(var i=t.tileIds,o=function(t){var i=_.find(e,(function(e){return e.id===t}));i&&(i.isSelected=!0)},r=0,a=i;r<a.length;r++){var n=a[r];o(n)}}));else for(var t=0,i=this.services.dashboardDataService.activeDashboard.tiles;t<i.length;t++){var o=i[t];o.isSelected=!1}},D.prototype.showTileErrorDetails=function(){var t=this.services.localizationService,i=this.scope.$new(),o=[],r=0;for(var a in this.tileErrorDetails){var n={errorDetails:this.tileErrorDetails[a].errorDetails,count:this.tileErrorDetails[a].tileIds.length};r+=n.count,o.push(n)}i.tileErrors=o,i.title=t.format("DashboardAppBar_TileError_ErrorDialogSubTitle",[e.formattingService.formatValue(r)]),this.services.modalDialogService.showLegacyWebModalDialog({dialogName:t.get("DashboardAppBar_TileError_ErrorDialogTitle"),template:w,scope:i,isDismissable:!0,dialogActions:[new InJs.ModalDialogAction(t.get("ModalDialogButtonText_Close"),function(e,t){i.closeDialog()},null,"")]})},D.prototype.updateTileErrorCount=function(){var e=this;this.scope.dashboardTileErrorCount=0,this.tileErrorDetails&&_.forOwn(this.tileErrorDetails,(function(t){var i=t.tileIds;e.scope.dashboardTileErrorCount+=i.length}))},D.prototype.removeTileAndUpdateTileErrorCount=function(e){var t=this;this.tileErrorDetails&&_.forOwn(this.tileErrorDetails,(function(i,o){var r=i.tileIds,a=r.indexOf(e.id);a>=0&&r.splice(a,1),0===r.length&&delete t.tileErrorDetails[o]})),this.updateTileErrorCount()},D.prototype.resetDashboardTileErrors=function(){this.tileErrorDetails={},this.scope.showDashboardTileErrors=!1,this.scope.dashboardTileErrorCount=0},D.runningQueryDelayMs=100,D})();t.DashboardContainerController=D})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.ArrowPosition,o=e.common.models.TooltipTheme,r=(function(){function e(e,t,i,o,r,a,n,s,c){this.uiSref=e,this.tooltipTemplate=t,this.entity=i,this.stateOptions=o,this.customClass=r,this.beforeIcon=a,this.beforeIconSize=n,this.afterIcon=s,this.afterIconSize=c}return Object.defineProperty(e.prototype,"label",{get:function(){return this.entity.displayName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipConfig",{get:function(){return{tooltipTitle:this.entity.displayName,tooltipArrowPosition:i.arrowTopMiddle,tooltipTheme:o.Dark}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipTemplateConfig",{get:function(){return{tooltipTitle:this.createTemplateTooltipTitle(this.entity.displayName),tooltipArrowPosition:i.arrowTopMiddle,tooltipTheme:o.Dark}},enumerable:!0,configurable:!0}),e.prototype.createTemplateTooltipTitle=function(e){return this.tooltipTemplate.replace("{0}",e)},e})();t.BreadcrumbEntity=r})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.constants.navigation.states,o=e.common.constants.navigation.states;t.SimpleBreadcrumbs={firstSegment:[{state:i.adminPortal,labelResourceKey:"AdminPortal_Title"},{state:i.apps,labelResourceKey:"Apps_AppsTitle",terminal:!1},{state:i.favorites,labelResourceKey:"Favorites_FavoritesTitle",icon:"favoritestar"},{state:i.recentlyViewed,labelResourceKey:"RecentlyViewed_NavPaneTitle",icon:"mru"},{state:i.settings,labelResourceKey:"TopNav_Settings"}],secondSegment:[{state:o.datasets,labelResourceKey:"NavigationPane_DatasetsTitle",strictState:!0},{state:o.streamingDatasets,labelResourceKey:"NavigationPane_DatasetsTitle",strictState:!0},{state:i.getData,labelResourceKey:"NavigationPane_GetData",terminal:!1},{state:i.gateways,labelResourceKey:"EnterpriseGateway_Title"},{state:i.manageStorage,labelResourceKey:"QuotaManagement_ManageStorage"},{state:i.manageEmbed,labelResourceKey:"TopNav_SettingsMenu_ManageEmbedCodes"},{state:i.publishApp,labelResourceKey:"PublishApp_Title"},{state:i.insights,labelResourceKey:"InsightsPane_InsightsTitle"},{state:i.viewContent,labelResourceKey:"TopNav_SettingsMenu_ViewContentPack"}],thirdSegment:[{state:i.appInFocusMode,labelResourceKey:"InFocus_Title"},{state:i.appInFocusInsights,labelResourceKey:"InsightsPane_InsightsTitle"},{state:i.dashboardQna,labelResourceKey:"SettingsDashboard_QnA_Title"},{state:i.inFocusMode,labelResourceKey:"InFocus_Title"},{state:i.inFocusInsights,labelResourceKey:"InsightsPane_InsightsTitle"}]}})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(i){function o(e,t,i,o,r,a,n,s,c,l,p,u,v,h,g,m,f){return new d(e,t,i,o,r,a,n,s,c,l,p,u,v,h,g,m,f)}var r=e.common.ArrowPosition,a=t.BreadcrumbEntity,n=e.common.constants.navigation.states,s=t.SimpleBreadcrumbs,c=e.constants.navigation.states,l=e.common.models.TooltipTheme;i.createBreadcrumbFactory=o;var d=(function(){function t(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m){this.localizationService=e,this.navigationService=t,this.groupService=i,this.dashboardDataService=o,this.homeService=r,this.reportService=a,this.workbookService=n,this.modelService=s,this.permissionService=c,this.userService=l,this.featureSwitchService=d,this.tutorialDataStoreService=p,this.promiseFactory=u,this.ownershipService=v,this.appService=h,this.conceptualModelSetting=g,this.dataServiceModelConverter=m,this.tooltipTemplate=this.localizationService.get("Breadcrumb_Tooltip")}return t.prototype.createCurrentBreadcrumbs=function(t){var i=this;t=t||{};var o=[];if(this.addSimpleBreadcrumbs(o,s.firstSegment))return o;if(this.navigationService.inHomeDashboardView())return this.dashboardDataService.getDashboards().then((function(){var e=i.homeService.homeDashboard,t=e?i.dashboardDataService.findDashboardByGUID(e.dashboardObjectId):null;t&&o.push(i.createDashboardBreadcrumb(c.home,t))})),o;if(this.navigationService.inContentListView(!0))return o.push(this.createSharedWithMeBreadcrumb()),o;if(this.navigationService.inGroupView()&&!this.navigationService.inAppsView()&&!this.navigationService.inContentListView(!0)){var r=this.promiseFactory.all([this.groupService.ensureGroupsInitialization(),this.dashboardDataService.getDashboards(),this.featureSwitchService.getFeatureSwitches()]).then((function(){var e,t=i.dashboardDataService.activeDashboard,o=i.groupService.activeGroup;if(t&&i.navigationService.inDashboardView()&&i.ownershipService.isResourceSharedWithMe(t)&&i.isConceptualModelEnabled()&&i.conceptualModelSetting.isListViewEnabled())e=i.createSharedWithMeBreadcrumb();else if(o){var r=i.isConceptualModelEnabled()?c.contentList:null;e=new a(r,i.tooltipTemplate,o)}return e}));this.insertBreadcrumbAsync(o,r)}if(this.addSimpleBreadcrumbs(o,s.secondSegment))return o;if(this.navigationService.inAppView()){var l=this.navigationService.currentAppGUID,d=this.navigationService.currentAppInstanceId,p=this.appService.ensureAppsInitialization().then((function(){var e=i.appService.getAppByGUID(l);if(e){var t=i.dataServiceModelConverter.convertInstalledAppModel(e,d);return p=new a(c.app,i.tooltipTemplate,t)}}));this.insertBreadcrumbAsync(o,p)}if(this.navigationService.inDashboardView()){var r=this.dashboardDataService.getDashboards().then((function(){var e=i.dashboardDataService.activeDashboard;if(e){var t=i.navigationService.inAppView()?c.appDashboard:c.dashboard;return i.createDashboardBreadcrumb(t,e)}}));this.insertBreadcrumbAsync(o,r)}var u=this.navigationService.inReportView();if(u||t.subsituteReportForDataset){var v=this.reportService.getReports().then((function(){var e=t.reportGUID||i.navigationService.currentReportGUID,o=i.reportService.findReport(t.reportId)||i.reportService.findReportByGUID(e)||{id:t.reportId,displayName:t.reportName,objectId:t.reportGUID};if(o){var r=u&&i.navigationService.inAppView()?n.appReport:n.report;return v=new a(r,i.tooltipTemplate,o)}}));this.insertBreadcrumbAsync(o,v)}if(this.navigationService.inWorkbookView()){var r=this.workbookService.getWorkbooks().then((function(){var e=i.navigationService.currentWorkbookURLIdentifier,t=i.workbookService.findWorkbookByUniqueId(e),o=i.navigationService.inAppView()?n.appWorkbook:n.workbook;if(t)return new a(o,i.tooltipTemplate,t)}));this.insertBreadcrumbAsync(o,r)}if(this.navigationService.inDatasetView()&&!t.subsituteReportForDataset){var r=this.modelService.modelsPromise.then((function(){var e=i.navigationService.currentDatasetDBName,t=i.modelService.findModelByDBName(e);if(t)return new a(n.dataset,i.tooltipTemplate,t)}));this.insertBreadcrumbAsync(o,r)}if(this.navigationService.inPublishContentPackView()){var h=this.navigationService.contentPack,g=_.isNaN(h)?this.localizationService.get("TopNav_SettingsMenu_CreateContentPack"):this.localizationService.get("Publish_UpdateContentPack");return o.push({uiSref:c.publishContent,label:g,tooltipConfig:this.createCommonTooltipConfig(g),tooltipTemplateConfig:this.createCommonTemplateTooltipConfig(g)}),o}if(this.addSimpleBreadcrumbs(o,s.thirdSegment))return o;if(this.navigationService.inGetDataCategoryView()){var m=e.controllers.contentProviderStore.contentProviderConstants,f=m.categoryNameToEnumMap,y=m.categoryEnumToDisplayNameMap,b=y[f[this.navigationService.categoryName]],g=this.localizationService.get(b);o.push({uiSref:c.getDataCategory,label:g,tooltipConfig:this.createCommonTooltipConfig(g),tooltipTemplateConfig:this.createCommonTemplateTooltipConfig(g)})}if(this.navigationService.inGetDataCategoryProviderView()){var S=e.common.contracts.contentProviderManifest,w=_.find(S,{providerName:this.navigationService.providerName});if(w){var g=w.displayText;w.displayTextLocalizationKey&&(g=this.localizationService.get(w.displayTextLocalizationKey)),o.push({uiSref:c.getDataCategoryProviderName,label:g,tooltipConfig:this.createCommonTooltipConfig(g),tooltipTemplateConfig:this.createCommonTemplateTooltipConfig(g)})}}return o},t.prototype.createUiSrefWithParams=function(e,t){return e+"("+JSON.stringify(t)+")"},t.prototype.createDashboardBreadcrumb=function(e,t){var i=!t.canEdit||this.permissionService.isActiveWorkspaceIsReadOnly?"lock":void 0;return new a(e,this.tooltipTemplate,t,(void 0),"dashboard",(void 0),(void 0),i,"mini")},t.prototype.createSharedWithMeBreadcrumb=function(){return this.createSimpleBreadcrumb(this.createUiSrefWithParams(c.contentList,{onlySharedWithMe:!0}),"NavigationPane_SharedWithMeTitle",null,"shared")},t.prototype.insertBreadcrumbAsync=function(e,t){var i=e.length;e.push({label:null}),t.then((function(t){t&&(e[i]=t)}))},t.prototype.addSimpleBreadcrumbs=function(e,t){for(var i=0,o=t;i<o.length;i++){var r=o[i],a=r.strictState?this.navigationService.stateService.is(r.state):this.navigationService.stateService.includes(r.state);if(a){e.push(this.createSimpleBreadcrumb(r.state,r.labelResourceKey,r.customClass,r.icon));var n=angular.isUndefined(r.terminal)||r.terminal;if(n)return!0}}return!1},t.prototype.createSimpleBreadcrumb=function(e,t,i,o){var r=this.localizationService.get(t);return{uiSref:e,label:r,customClass:i,beforeIcon:o,beforeIconSize:"small",tooltipConfig:this.createCommonTooltipConfig(r),tooltipTemplateConfig:this.createCommonTemplateTooltipConfig(r)}},t.prototype.createCommonTooltipConfig=function(e){return{tooltipTitle:e,tooltipArrowPosition:r.arrowTopMiddle,tooltipTheme:l.Dark}},t.prototype.createCommonTemplateTooltipConfig=function(e){return{tooltipTitle:this.createTemplateTooltipTitle(e),tooltipArrowPosition:r.arrowTopMiddle,tooltipTheme:l.Dark}},t.prototype.createTemplateTooltipTitle=function(e){return this.tooltipTemplate.replace("{0}",e)},t.prototype.isConceptualModelEnabled=function(){return this.featureSwitchService.featureSwitches.conceptualModelEnabled||this.featureSwitchService.featureSwitches.previewConceptualModel&&this.tutorialDataStoreService.hasKey(e.common.constants.previewConceptualModelNewKey)},t})()})(i=t.factory||(t.factory={}))})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){switch(e){case 0:return i(t)}}function i(e){var t={items:[{type:2,text:e.get("FeedbackContextMenu_Title")},{type:0,text:e.get("FeedbackContextMenu_SubmitIdea"),href:"https://go.microsoft.com/fwlink/?linkid=833533"},{type:0,text:e.get("FeedbackContextMenu_SubmitIssue"),href:"https://go.microsoft.com/fwlink/?linkid=833535"}]};return t}e.createMenuItems=t})(t=e.NavigationBarMenuFactory||(e.NavigationBarMenuFactory={}))})(t=e.factory||(e.factory={}))})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i,o=e.common.constants.myWorkspaceGroupId;e.dataServices.models.Workbook;!(function(e){function i(e){return t.RedirectUrlHelper.WebRedirectUrlHelper.getAppRedirectUrl(o,e.objectId)}function r(e,i){return t.RedirectUrlHelper.WebRedirectUrlHelper.getDashboardRedirectUrl(o,e.objectId,i.contract.originalDashboardObjectId||i.objectId)}function a(e,i){return t.RedirectUrlHelper.WebRedirectUrlHelper.getReportRedirectUrl(o,e.objectId,i.contract.originalReportObjectId||i.objectId)}function n(e,i){return t.RedirectUrlHelper.WebRedirectUrlHelper.getWorkbookRedirectUrl(o,e.objectId,i.uniqueId)}e.getAppUrl=i,e.getAppDashboardUrl=r,e.getAppReportUrl=a,e.getAppWorkbookUrl=n})(i=t.UrlHelper||(t.UrlHelper={}))})(t=e.helpers||(e.helpers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.constants.myWorkspaceGroupId,o=jsCommon.StringExtensions,r=(function(){function t(e){this.redirectPath=e}return t.prototype.getGroupRedirectUrl=function(e,t){var i={action:"OpenGroup",context:t,groupObjectId:e};return this.getRedirectUrl(i)},t.prototype.getAppRedirectUrl=function(e,t,i){var o={action:"OpenApp",groupObjectId:e,context:i,appId:t};return this.getRedirectUrl(o)},t.prototype.getDashboardRedirectUrl=function(e,t,i,o){var r={action:"OpenDashboard",context:o,groupObjectId:e,appId:t,dashboardObjectId:i};return this.getRedirectUrl(r)},t.prototype.getReportRedirectUrl=function(e,t,i,o,r){var a={action:"OpenReport",context:r,groupObjectId:e,appId:t,reportObjectId:i};return _.isEmpty(o)||(a.reportPage=o),this.getRedirectUrl(a)},t.prototype.getWorkbookRedirectUrl=function(e,t,i,o){var r={action:"OpenWorkbook",context:o,groupObjectId:e,appId:t,workbookUniqueId:i};return this.getRedirectUrl(r)},t.prototype.getTileRedirectUrl=function(e,t,i,o,r){var a={action:"OpenTile",context:r,groupObjectId:e,appId:t,dashboardObjectId:i,tileObjectId:o};return this.getRedirectUrl(a)},t.prototype.getRedirectUrl=function(t){var r=[];return(_.isEmpty(t.groupObjectId)||t.groupObjectId===i)&&r.push("groupObjectId"),_.isEmpty(t.appId)&&r.push("appId"),_.isEmpty(t.context)&&r.push("context"),r.length>0&&(t=_.omit(t,r)),o.format("{0}/{1}?{2}",e.common.httpService.frontendUri,this.redirectPath,$.param(t))},t.WebRedirectUrlHelper=new t("Redirect"),t.MobileRedirectUrlHelper=new t("MobileRedirect.html"),t})();t.RedirectUrlHelper=r})(t=e.helpers||(e.helpers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){function i(t,i,o){if(t){var r=e.common.KnownContentProviderErrors[i],n=r&&r[t];if(n)return a(n,o)}}function o(e,t,i){return e.isImportOperation!==!1?t&&i.isAppCategory(t.category)?2:0:1}function r(t,i,o,r,l,d,p){var u,v=n(t,i);l.ensureLocalization((function(){if(v){var n=a(v,d),h=v.titleId||"ErrorMessage_DefaultTitle";u={message:l.get(n),title:l.get(h),errorType:n,helpLink:v.helpLink||c(i),helperText:v.helperTextId?l.get(v.helperTextId):null},s(t,u,p)}else{var g,m,f=void 0,y=e.models.contentProviderHelpLink[i]||c(i);switch(r){case 2:g="ErrorMessage_FailedToInstallApp",m=l.format("ErrorTitle_FailedToInstallApp",[o]);break;case 0:g="ErrorMessage_FailedToStorePackage",m=l.format("ErrorTitle_FailedToStorePackage",[o]);break;case 1:g="ErrorMessage_FailedToConnectWorkbook",m=l.format("ErrorTitle_FailedToConnectWorkbook",[o])}if(t.error)f=e.helpers.PowerBIServiceExceptionErrorHelper.GenerateErrorMessage(t.error);else{var b=$.Deferred();b.resolve(null),f=b.promise()}f.then((function(i){u={message:i&&i.message?i.message:l.get(g),title:m,errorType:e.common.contentProviderDefaultErrorType,displayableErrorInfo:i?i.displayableErrorInfo:null,helpLink:y},s(t,u,p)}))}}))}function a(e,t){var i=e.messageId;return e.messageIdOverride&&t.featureSwitches[e.messageIdOverride.featureSwitch]&&(i=e.messageIdOverride.messageId),i}function n(t,i){if(t){var o=e.common.KnownContentProviderErrors[i];if(o){var r=t.headers(e.common.PowerBIErrorDetailsHeader);if(r){var a=d.tryParseJSON(r),n=a&&a.error&&a.error.code;return n?o[n]:void 0}}}}function s(t,i,o){o.error(i.message,i.errorType,{requestId:t?t.requestId:void 0,statusCode:t?t.status.toString():void 0,title:i.title,displayLearnMoreHelpLink:null!=i.helpLink,helpLink:i.helpLink,customErrorDialogHelperText:i.helperText,displayableErrorInfo:i.displayableErrorInfo,showAdditionalErrorInfo:null!=i.displayableErrorInfo},null,e.telemetry.ErrorSource.PowerBI)}function c(t){return t===l.excelContentProviderId?e.models.excelWorkbookUploadFailedDefaultHelpLink:e.models.contentProviderFallbackLink}var l=e.common.constants,d=jsCommon.JsonExtensions;t.getErrorMessageId=i,t.getStoreOperationType=o,t.handleStoreConfigurationError=r})(i=t.ContentProviderStoreHelper||(t.ContentProviderStoreHelper={}))})(t=e.helpers||(e.helpers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i,o=e.common.contracts.ContentTileType,r=e.common.contracts.PublishOrRefreshStatus;!(function(e){function t(e,t,r){if(e.contentTileType!==o.AppDataset){var n=t.currentGroupGUID,s=i(e),c=a(e);r.openContent(e.contentTileType,n,s,c)}}function i(e){var t=e.contentTileType;if(t!==o.AppDataset){if(t===o.Workbook){var i=e;return i.uniqueId||e.objectId}return e.objectId}}function a(e){var t=e.contract;if(null!=t)switch(e.contentTileType){case o.Dashboard:return t.originalDashboardObjectId;case o.Report:return t.originalReportObjectId;default:return i(e)}}function n(e){if(e.contentTileType===o.OrgApp)return e.packageId}function s(e,t){return e.contract?e.isNew&&e.contract.packagePublishStatus!==r.PublishError&&e.contract.packagePublishStatus!==r.RefreshError&&!p(e,t):e.isNew}function c(t,i){return!!t&&(t.contentTileType===o.Dashboard&&i.isFavoriteDisabled(e.getObjectID(t)))}function l(t,i){return t.contentTileType===o.Dashboard&&!i.isFavoriteDashboard(e.getObjectID(t))}function d(t,i){return!!t&&(t.contentTileType===o.Dashboard&&i.isFavoriteDashboard(e.getObjectID(t)))}function p(e,t){var i;return e.contentTileType===o.AppDataset?i=e:e.contract&&(i=t.findModel(e.contract.id,e.contract.packageId)),!!i&&(!!i&&i.isRefreshInProgress)}e.openContentTile=t,e.getObjectID=i,e.getOriginalObjectID=a,e.getInstanceId=n,e.isNew=s,e.isFavoriteDisabled=c,e.canFavorite=l,e.canUnFavorite=d})(i=t.ContentTileHelper||(t.ContentTileHelper={}))})(t=e.helpers||(e.helpers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(){return new i}e.createAlertRuleService=t;var i=(function(){function t(){this.cardMeasureRoleName="Values",this.gaugeMeasureRoleName="Y",this.kpiMeasureRoleName="Indicator",this.kpiGoalRoleName="Goal",this.kpiTrendRoleName="TrendLine",this.gaugeGoalRoleName="TargetValue"}return t.prototype.createAlertRule=function(t,i,o){var r=this,a=this.getQuery(t);if(a){var n=t.config.visual;if(n){var s=n.elements[0].DataRoles;if(s){var c=this.getProjectionIndex(n.visual,s);if(null!=c){if(n.visual===e.visuals.plugins.kpi.name){var l=_.find(s,(function(e){return e.Name===r.kpiTrendRoleName}));l&&this.updateQuerySortOrder(a,l.Projection)}return{condition:{compareToAValue:{operator:i,columnIndex:{columnIndex:c,queryIndex:0},value:o}},queries:[a]}}}}}},t.prototype.getMeasureName=function(e){var t=e.config.visual;if(t&&!_.isEmpty(t.elements)){var i=t.elements[0].DataRoles,o=t.queryMetadata,r=void 0;if(i&&o){var a=this.getProjectionIndex(t.visual,i);null!=a&&(r=o.Select[a].Restatement)}return r}},t.prototype.getThresholdValue=function(t){var i=0,o=t.composite,r=o&&o.visual&&o.visual.dataViews;if(!_.isEmpty(r)){var a=r[0],n=o.visual.type;if(a)if(a.categorical&&n===e.visuals.plugins.card.name)i=a.categorical.values[0].values[0];else if(n===e.visuals.plugins.gauge.name){var s=e.data.DataRoleHelper.getMeasureIndexOfRole(a.categorical.values.grouped(),this.gaugeGoalRoleName);if(s>=0){var c=a.categorical.values[s].values;i=_.last(c)}else if(a.metadata){var l=a.metadata.objects;l&&l.axis&&l.axis.target&&(i=l.axis.target)}}else if(a.categorical&&n===e.visuals.plugins.kpi.name){var s=e.data.DataRoleHelper.getMeasureIndexOfRole(a.categorical.values.grouped(),this.kpiGoalRoleName);if(s>=0){var c=a.categorical.values[s].values;i=_.last(c)}}}return i},t.prototype.getProjectionIndex=function(t,i){var o;switch(t){case e.visuals.plugins.card.name:o=this.cardMeasureRoleName;break;case e.visuals.plugins.gauge.name:o=this.gaugeMeasureRoleName;break;case e.visuals.plugins.kpi.name:o=this.kpiMeasureRoleName}if(o){var r=_.find(i,(function(e){return e.Name===o}));if(r)return r.Projection}},t.prototype.getQuery=function(e){var t=e.contract.query.modelQuery;if(t&&t.sq){var i=jsCommon.JsonExtensions.tryParseJSON(t.sq);if(i){if(i.defn){var o=i;return{Commands:[{SemanticQueryDataShapeCommand:{Query:o.defn,Binding:o.shape}}]}}var r=void 0;return i.dataQuery?r=i.dataQuery:i.Commands&&(r=i),r}}},t.prototype.updateQuerySortOrder=function(e,t){if(e.Commands&&!_.isEmpty(e.Commands)&&e.Commands[0].SemanticQueryDataShapeCommand){var i=e.Commands[0].SemanticQueryDataShapeCommand,o=i.Query;o.OrderBy=[{Direction:2,Expression:o.Select[t]}];var r=i.Binding;r&&r.DataReduction&&r.DataReduction.Primary&&(r.DataReduction.Primary={Top:{Count:1}})}},t})();e.AlertRuleService=i})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=jsCommon.EnumExtensions,o=e.common.contracts.Permissions,r=e.common.contracts.PublishOrRefreshStatus,a=e.dataServices.constants,n=e.common.constants,s=(function(){function t(t,o,a,n,s,c,l,d,p,u,v,h,g,m,f,y,b,S,w,C){var D=this;this.rootScope=t,this.dashboardService=o,this.dashboardDataService=a,this.modelService=n,this.modelHttpService=s,this.telemetryService=c,this.tutorialDataStore=l,this.localizationService=d,this.navigation=p,this.notificationToastService=u,this.quota=v,this.errorService=h,this.featureSwitchService=g,this.insightsService=m,this.favoritesService=f,this.mostRecentlyUsedService=y,this.homeService=b,this.groupService=S,this.promiseFactory=w,this.workbookService=C,this.pendingDatasetReadyNotification=[],this.openModel=function(t){return null!=t.contract.packagePublishStatus&&t.contract.packagePublishStatus!==r.FinishedSuccessfully&&t.contract.packagePublishStatus!==r.RefreshInProgress&&t.contract.packagePublishStatus!==r.RefreshError?void(t.contract.packagePublishStatus===r.PublishError&&D.deleteModelOnPublishFailure(t.id)):(t.isNew=t.contract.isNew=!1,void(D.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.OpenDataset)||i.hasFlag(t.getPermissions(),e.common.models.ReportPermissions.CopyOnWrite)||D.navigation.navigateToDatasetByDBName(t.dbName)))}}return t.prototype.bootstrap=function(){var t=this;this.isConceptualModelEnabled()&&(this.rootScope.$on(e.dataServices.constants.packagePublishedSuccessfullyEventName,(function(e,i){t.showPackagedReadyToast(i)})),this.rootScope.$on(a.onDatasetAddedEventName,(function(e,i){t.handleDatasetAddedEvent(i)}))),this.rootScope.$on(a.workbook.workbookAddedEventName,(function(e,i){t.showWorkbookReadyToast(i)})),this.dashboardService.readyForConceptualModelInitializationPromise.then((function(){t.bootstrapNavigation(!0,!1).then((function(i){t.rootScope.$emit(e.constants.dashboardContainerLoaded,i)}))}))},t.prototype.bootstrapNavigation=function(t,i){var o=this,r=t&&(this.navigation.inLandingContainerView()||this.navigation.inHomeDashboardView()),a=this.promiseFactory.defer();return!this.homeService.isHomeDashboardSet||!r&&t?this.favoritesService.getFavorites(i).then((function(e){e.length>0?(o.navigation.navigateToFavorites(o.groupService.activeGroupObjectId),a.resolve(null)):o.featureSwitchService.featureSwitches.listViewEnabled?o.mostRecentlyUsedService.getMRUModels().then((function(e){e.length>0?(o.navigation.navigateToRecentlyViewed(),a.resolve(null)):(o.navigation.navigateToContentList(o.groupService.activeGroupObjectId),a.resolve(null))})):(o.navigation.navigateToContentList(o.groupService.activeGroupObjectId),a.resolve(null))})):(this.navigation.navigateToHomeDashboard(t),a.resolve(e.constants.navigation.states.home)),a.promise},t.prototype.handleDatasetAddedEvent=function(e){var t=this.dashboardService.dashboardContainerModel.contract.models,i=!1;if(t){for(var o=t.length,r=0;r<o;r++)if(t[r].id===e.id&&t[r].packageId===e.packageId){t[r]=e,i=!0;break}i||t.push(e)}},t.prototype.showPackagedReadyToast=function(e){var t=this;this.dashboardService.getDashboards().then((function(i){var o=_.filter(i,(function(t){return t.contract.packageIds&&t.contract.packageIds.indexOf(e)>=0}));if(1===o.length&&o[0].isNew&&1===o[0].contract.packageIds.length&&!o[0].isNotified)t.notifyNewDashboardIsReady(o[0]);else{var r=t.modelService.findModelByPackageId(e);r?t.notifyNewDatasetIsReady(r,e):(t.pendingDatasetReadyNotification.push(e),t.unregisterModelWatch||(t.unregisterModelWatch=t.rootScope.$watch((function(){return t.modelService.lastUpdatedTimestamp}),(function(){t.pendingDatasetReadyNotification=_.filter(t.pendingDatasetReadyNotification,(function(e){var i=t.modelService.findModelByPackageId(e);return!i||(t.notifyNewDatasetIsReady(i,e),!1)})),_.isEmpty(t.pendingDatasetReadyNotification)&&(t.unregisterModelWatch(),t.unregisterModelWatch=null)}))))}}))},t.prototype.notifyNewDatasetIsReady=function(t,r){var a=this,n=this.dashboardDataService.activeDashboard;if(t&&t.isNew&&!t.isHidden&&i.hasFlag(t.getPermissions(),o.All)&&t.contract.insightsSupported&&n&&!n.isUsedByContentPack){
var s,c={displayText:this.localizationService.get("DatasetUploadedToast_ExploreInsights"),action:function(){a.showInsightsContainer(t.dbName,t.vsName,r,e.insights.constants.insightsSourceToast)}},l={displayText:this.localizationService.get("DatasetUploadedToast_ViewDataset"),action:function(){var e=a.modelService.findModel(t.id,r);a.openModel(e)}};s=this.notificationToastService.notify({title:this.localizationService.get("DatasetUploadedToast_ReadyToExploreTitle"),message:this.localizationService.get("DatasetUploadedToast_ReadyToExploreSubtitle"),notificationType:e.common.NotificationToastType.Success,actionButtons:[l],actionLinks:[c],sticky:!0});var d=this.rootScope.$on(e.constants.groupSwitchedEventName,(function(e,t,i){a.notificationToastService.hide(s),d()}))}},t.prototype.showInsightsContainer=function(t,i,o,r){var a=this,n=this.modelService.findModelByDBName(t,o),s=this.insightsService.getInsightsStatus(n.contract);if(2===s)this.navigation.showInsightsPanel(t,r);else if(0===s){var c=e.telemetry.InsightEntryPoint.NavigationPane;r===e.insights.constants.insightsSourceToast&&(c=e.telemetry.InsightEntryPoint.Notification);var l=this.telemetryService.startEvent(e.telemetry.InsightsShowInsights,0,c,n.contract.contentProviderId,e.getHashCode(n.contract.dbName),!1);this.insightsService.getInsights(!0,e.insights.services.RequestType.Initial,n.contract,c,e.insights.proxies.wireContracts.RequestOptions.ThoroughMode,l.event,null,null,null,null,!1).then((function(t){var i=t.insightsContainers,o=i?i.length:0;l.event.info.insightCount=o,t.isError&&o<=0?l.reject():l.resolve(),a.rootScope.$emit(e.insights.constants.insightsLoadedEventName,n,o>0)}))}},t.prototype.deleteModelOnPublishFailure=function(e){var t=this;this.deleteItemOnPublishFailure(this.localizationService.get("NavigationPane_ModelPublishErrorTitle"),this.localizationService.get("NavigationPane_ModelPublishErrorContent"),(function(){t.modelService.deleteModel(e)}))},t.prototype.deleteItemOnPublishFailure=function(e,t,i){var o=this,r=this.errorService.control(),a=[new InJs.ModalDialogAction(this.localizationService.get("ModalDialogButtonText_Delete"),function(e,t){r.hideDialog(),i()}),new InJs.ModalDialogAction(this.localizationService.get("ModalDialogButtonText_Cancel"),function(e,t){r.hideDialog()})];r.showCustomDialog(e,$("<div/>").text(t),a,(function(e){e.parent().find('input[value="'+o.localizationService.get("ModalDialogButtonText_Cancel")+'"]').focus()}),!0)},t.prototype.notifyNewDashboardIsReady=function(t){var i=this,o={description:t.displayName,displayText:this.localizationService.get("ToastNotification_GoToDashboard"),action:function(){i.navigation.navigateToDashboardByGUID(t.objectId)}};this.notificationToastService.notify({title:this.localizationService.get("Publish_Success"),message:this.localizationService.get("NotificationMessage_NewDashboardCreatedTitle"),notificationType:e.common.NotificationToastType.Success,actionButtons:[o]}),t.isNotified=!0},t.prototype.showWorkbookReadyToast=function(t){var i=this,o=this.workbookService.findWorkbookByUniqueId(t);if(o&&o.isOwner()){var r=this.groupService.activeGroupObjectId,a={displayText:this.localizationService.get("ToastNotification_GoToWorkbook"),action:function(){i.navigation.insertGroupAndNavigateToWorkbookByUniqueId(o.uniqueId,r)}},n=this.isConceptualModelEnabled()?"WorkbookReadyNotificationMessageV2":"WorkbookReadyNotificationMessage";this.notificationToastService.notify({title:this.localizationService.get("WorkbookReadyNotificationTitle"),message:this.localizationService.format(n,[o.displayName]),notificationType:e.common.NotificationToastType.Success,actionButtons:[a]})}},t.prototype.isConceptualModelEnabled=function(){var e=this.featureSwitchService.featureSwitches;return e.conceptualModelEnabled||e.previewConceptualModel&&this.tutorialDataStore.hasKey(n.previewConceptualModelNewKey)},t})();t.BootstrapService=s})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i,o,r,a,n,s,c,d){return new l(e,t,i,o,r,a,n,s,c,d)}var o=e.common.constants,r=e.common.contracts.ContentProviderCategory,a=e.common.contracts.ContentProviderClientCategory,n=e.helpers.ContentProviderStoreHelper,s=e.common.constants.featureSwitches,c=e.common.helpers.ModelConverterHelper;t.createContentProviderService=i;var l=(function(){function t(e,t,i,o,r,a,n,s,c,l){this.featureSwitchService=e,this.userInfo=t,this.localizationService=i,this.contentProviderHttpService=o,this.telemetryService=r,this.errorService=a,this.notificationToast=n,this.licenseHelper=s,this.appService=c,this.promiseFactory=l}return t.prototype.getDataAccessInfo=function(e){if(e){var t=c.getContentProviderClientCategory(e);if(t===a.Organizational&&e.featureSwitch!==s.microsoftOrgAppEnabled)return{SID:"",DSID:""};var i=JSON.parse(e.providerConfig);return i.dataAccessInfo}},t.prototype.upgradeRequiredToConnect=function(e){if(!e)return!1;var t=c.getContentProviderClientCategory(e),i=t===a.Organizational;return!this.userInfo.isPremiumUser&&(this.featureSwitchService.featureSwitches.saasMarketplace&&i||e.requiresPremiumLicense===!0)},t.prototype.displayFeatureDisabledDialog=function(t){var i=c.getContentProviderClientCategory(t)===a.Organizational,o=this.appService.isAppCategory(t.category),r="UpgradeAccount_ConnectContentGenericMessage",n="UpgradeAccount_ConnectContentGenericTitle";i&&!o?(r="UpgradeAccount_ConnectContentMessage",n="UpgradeAccount_ConnectContentTitle"):o&&(r="UpgradeAccount_InstallAppMessage",n="UpgradeAccount_InstallAppTitle");var s=this.localizationService,l=this.licenseHelper;s.ensureLocalization((function(){l.displayFeatureDisabledErrorMessage(e.telemetry.LicenseEnforcementOperation.ConnectContentProvider,s.format(r,[l.freeTrialPeriod.toString(10)]),s.get(n))}))},t.prototype.storeDataAccessInfo=function(t,i,s,l,d){var p=this,u=this.localizationService,v=this.notificationToast,h=this.promiseFactory.defer();return u.ensureLocalization((function(){var g,m=n.getStoreOperationType(t,i,p.appService);switch(m){case 2:g="AppModel_InstallApp";break;case 0:g="NotificationMessage_ImportingPackage";break;case 1:g="NotificationMessage_ConnectingPackage"}var f,y=v.notify({title:u.get(g),message:u.get("NotificationMessage_TakeAWhile"),notificationType:e.common.NotificationToastType.Loading}),b=t.ContentProviderIdOverride||i&&i.id||o.orgAppsContentProviderId,S=l,w=null;if(i){S=i.displayText||S;var C=c.getContentProviderClientCategory(i);C===a.Organizational?(w="OrgContent",i.featureSwitch!==o.featureSwitches.microsoftOrgAppEnabled&&(f=i.providerKey)):C===a.Service&&i.category!==r.BuiltIn?f=i.providerKey:i.id===o.groupOneDriveContentProviderId&&(w="OneDrive - Group")}w=w||S;var D=p.telemetryService,I=D.startEvent(e.telemetry.DashboardContentProviderPublish,b,i?i.providerKey:null,w,i?i.category:-1,s);t.DSID&&D.logChildEvent(I.event,e.telemetry.DashboardContentProviderPublishDSID,t.DSID),p.contentProviderHttpService.storeConfiguration(d||0,b.toString(10),t,I.event,f).then((function(e){v.hide(y),I.resolve(),h.resolve(null)}),(function(e){v.hide(y),n.handleStoreConfigurationError(e,b,S,m,u,p.featureSwitchService,p.errorService);var t=e.data&&e.data.error&&e.data.error.code||"FailedToStoreConfiguration",i=(e.requestId,e.data&&e.data.error&&e.data.error.message||""),o=jsCommon.StringExtensions.format("Status:{0} RequestId:{1} Details:{2}",e.status.toString(),i);I.reject({errorCode:t,errorMessage:o}),h.reject()}))})),h.promise},t})()})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.AppUtils,o=e.common.models.CollapsiblePaneExpandedWidth,r=e.common.constants,a=e.controllers.DashboardContainerController,n=e.dataServices.models.DashboardTileModel,s=e.common.constants.TaskPaneCollapsiblePaneMode,c=(function(){function t(e,t,i,o,a,n,s,c,l,d,p,u,v,h,g,m,f,y,b){var S=this;this.$rootScope=e,this.dashboardDataService=t,this.dashboardService=i,this.dashboardWarningsService=o,this.errorService=a,this.featureSwitchService=n,this.groupService=s,this.inFocusService=c,this.licenseEnforcementService=l,this.licenseHelperService=d,this.localizationService=p,this.modelConverter=u,this.mostRecentlyUsedService=v,this.navigation=h,this.permissionService=g,this.timeout=m,this.telemetryService=f,this.userInfo=y,this.appService=b,this.$rootScope.$on(r.navigation.stateChangeSuccess,(function(e,t,i,o,r){S.handleStateChange(t,i,o,r)}))}return t.prototype.registerDashboardContainerScope=function(e){this.dashboardContainerScope=e},t.prototype.unregisterDashboardContainerScope=function(){this.dashboardContainerScope=void 0},t.prototype.handleStateChange=function(t,r,n,c){var l=this;return r.dashboardGUID&&!r.hasOwnProperty("q")?this.dashboardWarningsService.showWarningsIfNeeded():this.dashboardWarningsService.hideDashboardWarnings(),this.dashboardContainerScope&&this.dashboardService.updateDashboardMenuItems(this.dashboardContainerScope),t&&t.name===e.constants.navigation.states.dashboardRequestAccess?void this.dashboardService.setAndUpdateActiveDashboard(null):void this.localizationService.ensureLocalization((function(){var d=l.dashboardService.dashboardContainerModel,p=l.dashboardDataService,u=l.navigation,v=c?c.dashboardGUID:null;if(r.groupGUID&&c.groupGUID&&r.groupGUID!==c.groupGUID)return void(p.activeDashboard=null);var h=l.dashboardService.dashboardContainerModel.findDashboardByGUID(u.currentDashboardGUID),g=l.dashboardService.dashboardContainerModel.findDashboardByGUID(v);if(l.dashboardService.checkUserNeedsProLicenseAndShowError(h,l.userInfo,l.licenseHelperService,l.licenseEnforcementService,l.localizationService,u,e.telemetry.LicenseEnforcementOperation.SwitchDashboards,v,g),l.dashboardContainerScope&&n.name!==e.constants.navigation.states.dashboard&&h&&h.tiles&&p.activeDashboard&&u.currentDashboardGUID===p.activeDashboard.objectId&&l.dashboardContainerScope.$broadcast(e.constants.populateDashboardWithReportTiles),h&&u&&h.objectId!==u.currentDashboardGUID&&l.navigation.navigateToDashboardByGUID(h.objectId,e.services.LocationOptions.True,!1),t&&t.name===e.constants.navigation.states.dashboards)return void(p.activeDashboard?u.navigateToDashboardByGUID(p.activeDashboard.objectId):l.permissionService.isActiveWorkspaceIsReadOnly||!_.isEmpty(l.dashboardService.dashboardContainerModel.visibleDashboards)||l.groupService.isDataInCurrentGroup()?u.navigateToContentListOrActiveDashboard():u.navigateToGroupWelcome());if(u.currentDashboardGUID&&(!p.activeDashboard||u.currentDashboardGUID!==p.activeDashboard.objectId))if(h){h.increaseHitCount();var m=d.contract;h.isLoaded&&!h.contract.cached||l.dashboardService.loadDashboard(h.id),m.activeViewMode=e.contracts.DashboardContainerViewMode.DashboardViewer,m.activeDashboardId=h.id,h.isNew=!1,h.isFilled()?h.runLayoutIfRequired():(l.modelConverter.fillDashboardChildren(h,d.contract.models,d.contract.reports,d.contract.workbooks),h.calculateLayout(),h.applyLayout()),p.activeDashboard=h,h.id>0&&(l.dashboardWarningsService.showWarningsIfNeeded(),l.dashboardService.updateActiveDashboard(h.id,!1),l.dashboardService.logRTelemetryDashboardEvent(e.telemetry.DashboardLoadDashboardWithScriptVisuals))}else l.dashboardService.shouldNavigateToRequestAccess()?(l.mostRecentlyUsedService.removeMRU(u.currentDashboardGUID),l.navigation.navigateToRequestDashboardAccessByGUID(u.currentDashboardGUID)):(l.mostRecentlyUsedService.removeMRU(u.currentDashboardGUID),a.showDashboardDoesNotExistDialog(l.errorService,l.localizationService,l.telemetryService,l.navigation),u.navigateToActiveDashboard());u.currentDashboardGUID&&p.activeDashboard&&l.dashboardService.notifyDashboardUpdate(),l.dashboardContainerScope&&(u.inDashboardDetailView()&&l.dashboardContainerScope.questionBoxOutput.clearQuestionBox&&l.dashboardContainerScope.questionBoxOutput.clearQuestionBox(),l.navigation.inQnaView()&&u.qnaQuery&&(u.qnaQuery||"")!==(l.dashboardContainerScope.questionBoxOutput.utterance||"")&&n.name!==e.constants.navigation.states.dashboardQna&&l.dashboardContainerScope.$applyAsync((function(){return l.dashboardContainerScope.questionBoxOutput.interpretUtterance(u.qnaQuery)})),l.navigation.inQnaStartView()&&(l.dashboardContainerScope.questionBoxOutput.clearQuestionBox(),l.$rootScope.$emit(e.explore.infonav.constants.showQnaStart)),l.dashboardContainerScope.$emit(e.constants.hideTaskPaneSlider));var f=p.selectedDashboardTile;if(f){var y=f.tileModel;y&&y.isTemporary&&l.dashboardService.removeTemporaryTile(y),l.dashboardService.clearSelectedDashboardTile()}if(l.navigation.inSharingView()&&l.timeout((function(){l.dashboardService.navigateToShareDashboard(l.navigation.currentDashboardGUID)})),l.dashboardContainerScope&&l.navigation.inAlertsEditorView()){if(!p.activeDashboard||!p.activeDashboard.isLoaded)return;var b=l.setAndGetActiveTile();b&&l.dashboardContainerScope.$emit(e.constants.showTaskPaneSlider,s.AlertsEditor,o.Small)}if(l.navigation.inInFocusView()||l.navigation.inInFocusInsightsView()){if(!p.activeDashboard||!p.activeDashboard.isLoaded)return;var b=l.setAndGetActiveTile();b&&l.inFocusService.view(b,void 0,l.navigation.inInFocusInsightsView())}if(l.featureSwitchService.featureSwitches.appsEnabled&&l.navigation.inDashboardDetailView()&&!l.navigation.inAppsView()&&h){var S=i.getDashboardAppGUID(h.contract,l.appService);S&&l.navigation.navigateToAppDashboardByGUID(h.objectId,h.contract.originalDashboardObjectId,S,l.groupService.activeGroupObjectId)}r.dashboardGUID&&!r.hasOwnProperty("q")&&l.dashboardDataService.activeDashboard&&l.dashboardWarningsService.prepareCustomVisualsForLoading(l.dashboardDataService.activeDashboard)}))},t.prototype.setAndGetActiveTile=function(){var e=this.findTileToEdit();return e?(this.dashboardService.selectDashboardTile(new n(e)),e):void a.showTileDoesNotExistDialog(this.errorService,this.localizationService,this.telemetryService)},t.prototype.findTileToEdit=function(){var e=this.navigation.currentTileGUID,t=this.navigation.currentTileOriginalGUID;return this.dashboardDataService.activeDashboard.findTileByObjectIdOrOriginalObjectId(e,t)},t})();t.DashboardStateChangeService=c})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(){return new i}e.createDashboardConfigurationService=t;var i=(function(){function e(){}return e})()})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.contracts.TileType,o=(function(){function t(e,t,i,o,r,a,n,s,c,l,d){this.$rootScope=e,this.telemetryService=t,this.dashboardDataService=i,this.resourceGateService=o,this.featureSwitchService=r,this.tutorialDataStore=a,this.notificationBar=n,this.resourcePackageListenerService=s,this.embedModeService=c,this.localizationService=l,this.visualPlugin=d,this.dashboardNotificationIds=[],this.embedModeService.getEmbedTypeDescription()}return t.prototype.showWarningsIfNeeded=function(){this.hideDashboardWarnings();var t=this.dashboardDataService.activeDashboard;t&&(this.telemetryService.logEvent(e.telemetry.EXLoadReportWithCustomViz,this.embedTypeDescription),this.resourceGateService.shouldShowWarning(this.getResourceIds(),t.objectId)?(this.resourceGateService.resetResourceFlag(),this.displayCustomVisualWarning()):(this.resourceGateService.setResourceFlag(),this.prepareCustomVisualsForLoading(t)))},t.prototype.hideDashboardWarnings=function(){for(var e=this.dashboardNotificationIds;e.length>0;)this.notificationBar.hide(e.pop())},t.prototype.getResourceIds=function(){var e=this.dashboardDataService.activeDashboard;return e?this.resourcePackageListenerService.getAllRequiredResourcePackageIdStrings(e):[]},t.prototype.displayCustomVisualWarning=function(){var e=this.dashboardDataService.activeDashboard;if(e)for(var t=e.tiles,o=0,r=t;o<r.length;o++){var a=r[o];if(a.type===i.composite||a.type===i.report){var n=a.contract;if(n&&n.resourcePackageIds&&n.resourcePackageIds.length>0){this.createCustomVisualWarning();break}}}},t.prototype.createCustomVisualWarning=function(){var t=this;this.telemetryService.logEvent(e.telemetry.EXLoadReportWithCustomViz,this.embedTypeDescription);var i=this.notificationBar.notify({message:this.localizationService.get("OpenDashboard_EnableCustomVisualWarningMessage"),notificationType:e.common.NotificationBarType.Warning,actions:[{displayText:this.localizationService.get("OpenDashboard_EnableCustomVisualButton"),linkId:1,action:function(){t.resourceGateService.setResourceFlag(),t.resourceGateService.addResourcePackageIdToDashboard(t.dashboardDataService.activeDashboard.objectId,t.getResourceIds()),t.notificationBar.hide(i),t.dashboardNotificationIds.splice(t.dashboardNotificationIds.indexOf(i),1),t.prepareCustomVisualsForLoading(t.dashboardDataService.activeDashboard)}}],secondaryLink:{displayText:this.localizationService.get("OpenDashboard_EnableCustomVisualWarningLinkText"),urlString:"https://go.microsoft.com/fwlink/?LinkID=627490 "}});this.dashboardNotificationIds.push(i)},t.prototype.prepareCustomVisualsForLoading=function(t){var i=this,o=this.resourcePackageListenerService.getAllRequiredResourcePackageIdStrings(t);this.resourcePackageListenerService.getAndLoadVisualPluginsForDashboard(t).then((function(){i.resourceGateService.shouldShowWarning(o,t.objectId)||i.$rootScope.$emit(e.constants.reloadEmptyVisuals)}))},t})();t.DashboardWarningsService=o})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.AppUtils,o=e.common.events,r=e.explore.services.events,a=(function(){function t(e,t,i,o,r,a,n,s,c,l,d,p,u,v){this.rootScope=e,this.timeout=t,this.modelConverter=i,this.dashboardService=o,this.explorationProxy=r,this.localizationService=a,this.telemetryService=n,this.navigation=s,this.modelService=c,this.packageService=l,this.notificationBar=d,this.errorService=p,this.userActivityContextService=u,this.appService=v,this.initialize()}return t.prototype.initialize=function(){var t=this;this.rootScope.$on(e.dataServices.constants.packageVersionChange,(function(e,i){return t.updateReportsWithPackageInfo(t.currentLoadReportContainerArgs,e,i)})),this.dashboardService.explorationLoaderInitialized&&this.dashboardService.explorationLoaderInitialized()},t.prototype.load=function(e){this.currentLoadReportContainerArgs=e,this.verifyCompatiblityAndLoadExploration(e)},t.prototype.verifyCompatiblityAndLoadExploration=function(t){var o=this,a=t.report,n=a.contract&&i.getResourceAppGUID(a.contract,this.appService,this.packageService),s=this.telemetryService.startPerfEventDeprecated(null,e.telemetry.EXOpenExploration,a.objectId,a.contract&&a.contract.originalReportObjectId,n,a.model&&a.model.directQueryMode===!0,!1,a.model&&!_.isEmpty(a.model.onPremModelConnectionString));this.userActivityContextService.pushParentContext(s.event),t.openExplorationTelemetryEvent=s,t.instantiationMode!==e.common.contracts.reportServer.ReportInstantiationMode.Exploration&&t.instantiationMode!==e.common.contracts.reportServer.ReportInstantiationMode.NonTemplateForExistingTile?this.explorationProxy.get({id:a.id,model:a.model}).then((function(e){t.exploration=e,o.setCompatibilityModeAndLoadExploration(t)}),(function(i){if(i.error&&e.helpers.ReportUtility.shouldDisplayErrorAsNotificationBar(i.error.code)){var a=t.report,n=o.modelService.findModel(a.modelId,a.packageId);o.rootScope.$emit(r.showErrorNotification.name,n,i.error,(function(){o.verifyCompatiblityAndLoadExploration(t)}))}else o.errorService.error(o.localizationService.get("ExplorationContainer_FailedToLoadReport"),"ExplorationContainer_FailedToLoadReport_DefaultDetails",{requestId:i?i.requestId:void 0},!1,e.telemetry.ErrorSource.PowerBI);o.rootScope.$emit(e.constants.openReportFinished,i&&i.error?i.error.message:"",!0),s&&(s.reject({errorCode:i.error&&i.error.code?i.error.code:"FailToGetExploration",errorMessage:i.error&&i.error.message?i.error.message:null}),o.userActivityContextService.popParentContext(s.event))})):this.setCompatibilityModeAndLoadExploration(t)},t.prototype.setCompatibilityModeAndLoadExploration=function(e){var t=this;this.timeout((function(){t.loadReportContainer(e)}),0),this.notifyReportUpdate(e.report.contract.packageId)},t.prototype.loadReportContainer=function(t){var i=null;this.navigation&&(i=this.navigation.additionalODataFilter);var r=t.report,a=this.modelService.findModel(r.modelId,r.packageId);a||(a=this.modelConverter.convertModel(r.model),this.modelService.addModel(a)),this.telemetryService.logEvent(e.telemetry.EXLoadReportContainer,r?r.objectId:null);var n={report:r,model:a,dashboardId:t.dashboardId,instantiationMode:t.instantiationMode,tileId:t.tileId,reportPage:t.reportPage,additionalODataFilter:i,exploration:t.exploration,openExplorationTelemetryEvent:t.openExplorationTelemetryEvent};this.rootScope.$emit(o.loadPowerViewReportEventName,n)},t.prototype.updateReportsWithPackageInfo=function(e,t,i){(this.navigation.inReportView()||this.navigation.inDatasetView())&&e&&e.report&&e.report.contract.packageId===i&&this.notifyReportUpdate(i)},t.prototype.notifyReportUpdate=function(e){if(e){var t=this.packageService.findPackage(e);if(t&&t.hasUpdate()){var i=jsCommon.StringExtensions.format(this.localizationService.get("DashboardContentPackNewVersion"),t.name);this.notificationBar.notify({message:i,hideOnStateChange:!0})}}},t})();t.ExplorationLoader=a})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.constants,o=e.constants;!(function(e){e[e.True=0]="True",e[e.False=1]="False",e[e.Replace=2]="Replace"})(t.LocationOptions||(t.LocationOptions={}));var r=t.LocationOptions,a=(function(){function a(e,t,o,r,a,n,s,c,l,d,p,u){var v=this;this.$location=e,this.$window=t,this.$rootScope=o,this.$state=r,this.stateParams=a,this.featureSwitchService=n,this.activeGroupIdService=s,this.home=c,this.navigationStateValidator=l,this.tutorialDataStore=d,this.permissionNavigationService=p,this.conceptualModelSetting=u,this.navigationStateValidator.setDefaultStateCallback((function(){return v.navigateToActiveDashboard()})),o.$on(i.showSettingsViewerEventName,(function(e,t,i){return v.showSettingsSlider(t,i)})),o.$on(i.navigation.stateChangeStart,(function(e,t,i,o,r){v.navigationStateValidator.validateStateChange(e,t.name,i,o.name,r)})),this.activeGroupIdService&&this.activeGroupIdService.initialGroupIdReadyPromise&&this.activeGroupIdService.initialGroupIdReadyPromise.then((function(){v.navigationStateValidator.validateState(v.stateService.current.name)}))}return a.prototype.convertLocationOption=function(e){var t;switch(e){case r.False:t=!1;break;case r.True:t=!0;break;case r.Replace:t="replace";break;default:t=!0}return t},a.prototype.replaceHistoryWithDashboardAndNavigate=function(e,t,i){var a={location:this.convertLocationOption(r.Replace),inherit:!0},n=this.stateService.params;n.dashboardGUID=e,!n.groupGUID&&i.groupGUID&&(n.groupGUID=i.groupGUID),this.$window.history.replaceState({},"",this.stateService.href(o.navigation.states.dashboard,n)),this.$window.history.pushState({},"",this.stateService.href(t,i,a)),this.stateService.go(t,i,a)},a.prototype.replaceHistoryWithDatasetAndNavigate=function(e,t,o){var a={location:this.convertLocationOption(r.Replace),inherit:!0},n=this.stateService.params;n.datasetDBName=e,!n.groupGUID&&o.groupGUID&&(n.groupGUID=o.groupGUID),this.$window.history.replaceState({},"",this.stateService.href(i.navigation.states.dataset,n)),this.$window.history.pushState({},"",this.stateService.href(t,o,a)),this.stateService.go(t,o,a)},a.prototype.replaceHistoryWithGroupWelcomeAndNavigate=function(e,t,i){var a={location:this.convertLocationOption(r.Replace),inherit:!0},n=this.stateService.params;n.groupGUID=e,this.$window.history.replaceState({},"",this.stateService.href(o.navigation.states.groupWelcome,n)),this.$window.history.pushState({},"",this.stateService.href(t,i,a)),this.stateService.go(t,i,a)},a.prototype.replaceAndLoadCurrentState=function(e,t){var i={location:this.convertLocationOption(r.Replace),inherit:!0},o=this.stateService.params;_.extend(o,t),this.$window.history.replaceState({},"",this.stateService.href(e,o,i)),this.stateService.go(e,o,i)},a.prototype.navigateToContentListOrActiveDashboard=function(){if(this.conceptualModelSetting.isConceptualModelEnabled()){var e=this.activeGroupIdService.activeGroupObjectId;this.navigateToContentList(e)}else this.navigateToActiveDashboard()},a.prototype.navigateToActiveDashboard=function(){this.stateService.go(o.navigation.states.dashboards,{groupGUID:this.activeGroupIdService.activeGroupObjectId},{inherit:!0})},a.prototype.navigateToApps=function(){this.stateService.go(o.navigation.states.apps,{groupGUID:o.myWorkSpaceGroupId},{inherit:!0})},a.prototype.navigateToApp=function(e){this.stateService.go(o.navigation.states.app,{appGUID:e},{inherit:!0})},a.prototype.navigateToAppInstance=function(e,t){this.stateService.go(o.navigation.states.appInstance,{appGUID:e,appInstanceId:t},{inherit:!0})},a.prototype.toggleArchivedContent=function(e){void 0===e&&(e=null),window.initialDashboardContainer&&(window.location.href=window.location.protocol+"//"+window.location.host+"?tenantId="+window.initialDashboardContainer.previousTenantId)},a.prototype.insertGroupAndNavigateToDashboardByGUID=function(e,t,i){this.stateService.go(o.navigation.states.dashboard,{dashboardGUID:e,groupGUID:t},{location:this.convertLocationOption(i),inherit:!0})},a.prototype.insertGroupAndNavigateToReportByGUID=function(e,t,i,o){var r={location:this.convertLocationOption(o),inherit:!0};this.gotoReportByGUID(e,t,r,1,void 0,i,void 0)},a.prototype.insertGroupAndNavigateToWorkbookByUniqueId=function(e,t){var o=this.inAppView()?i.navigation.states.appWorkbook:i.navigation.states.workbook,r=this.stateService.href(o,{workbookURLIdentifier:e,groupGUID:t},{inherit:!0});this.locationService.url(r)},a.prototype.navigateToGroupByGUID=function(e,t){this.stateService.go(o.navigation.states.group,{groupGUID:e},{location:this.convertLocationOption(t),inherit:!0})},a.prototype.resetToMyWorkspace=function(){this.navigateToGroupByGUID(o.myWorkSpaceGroupId)},a.prototype.navigateToDashboardByGUID=function(e,t,i){void 0===i&&(i=!0),this.stateService.go(o.navigation.states.dashboard,{dashboardGUID:e},{location:this.convertLocationOption(t),inherit:!0,notify:i})},a.prototype.navigateToAppDashboardByGUID=function(e,t,i,r,a,n){void 0===n&&(n=!0);var c={dashboardGUID:e,dashboardOriginalGUID:t,appGUID:i};s.optionalAdd(c,"groupGUID",r),this.stateService.go(o.navigation.states.appDashboard,c,{location:this.convertLocationOption(a),inherit:!0,notify:!0})},a.prototype.navigateToAppReportByGUID=function(e,t,o,r,a,n){void 0===n&&(n=!0);var c={reportGUID:e,reportOriginalGUID:t,appGUID:o};s.optionalAdd(c,"groupGUID",r),this.stateService.go(i.navigation.states.appReportPage,c,{location:this.convertLocationOption(a),inherit:!0,notify:!0})},a.prototype.navigateToAppWorkbookByUniqueId=function(e,t,o,r){var a={workbookURLIdentifier:e,appGUID:t};s.optionalAdd(a,"groupGUID",o),this.stateService.go(i.navigation.states.appWorkbook,a,{location:this.convertLocationOption(r),inherit:!0,notify:!0})},a.prototype.navigateToHomeDashboard=function(e){var i=this;e?(this.stateService.go(o.navigation.states.home,{inherit:!0,notify:!1,replace:!0}),this.$rootScope.$applyAsync((function(){return i.insertGroupAndNavigateToDashboardByGUID(i.home.homeDashboard.dashboardObjectId,i.home.homeDashboard.groupId,t.LocationOptions.False)}))):this.stateService.go(o.navigation.states.home,{inherit:!0})},a.prototype.navigateToRequestDashboardAccessByGUID=function(e,t){this.stateService.go(o.navigation.states.dashboardRequestAccess,{dashboardGUID:e},{location:this.convertLocationOption(t),inherit:!0})},a.prototype.navigateToGroupWelcome=function(){this.stateService.go(o.navigation.states.groupWelcome,{},{inherit:!0})},a.prototype.initialLoadReportByGUID=function(e,t,i,o){var r={location:this.convertLocationOption(o),inherit:!0};this.gotoReportByGUID(e,this.currentGroupGUID,r,void 0,1,t,i)},a.prototype.initialLoadDatasetByDBName=function(t,o){void 0===o&&(o=e.common.contracts.reportServer.ReportInstantiationMode.Exploration),this.stateService.go(i.navigation.states.dataset,{datasetDBName:t,instantiationMode:o,initialLoad:1},{inherit:!0})},a.prototype.navigateToFavorites=function(e){e?this.stateService.go(o.navigation.states.favorites,{groupGUID:e},{inherit:!0}):this.stateService.go(o.navigation.states.favorites,{},{inherit:!0})},a.prototype.navigateToContentList=function(e,t,i,r,a,n){var c={groupGUID:e};s.optionalAdd(c,"skipWelcome",t),s.optionalAdd(c,"contentListTab",i),s.optionalAdd(c,"instantiationMode",r),s.optionalAdd(c,"onlySharedWithMe",a),this.stateService.go(o.navigation.states.contentList,c,{location:this.convertLocationOption(n),inherit:!0})},a.prototype.navigateToRecentlyViewed=function(){this.stateService.go(o.navigation.states.recentlyViewed,{},{inherit:!0})},a.prototype.navigateToReportByGUID=function(e,t,i,o,r){var a={location:this.convertLocationOption(r),inherit:!0};this.gotoReportByGUID(e,t,a,1,void 0,i,o)},a.prototype.navigateToReportSubscriptionsPane=function(e,t,i){this.gotoReportByGUID(e,t,void 0,1,void 0,void 0,i,!0)},a.prototype.gotoReportByGUID=function(e,t,o,r,a,n,c,l){var d,p={reportGUID:e,groupGUID:t};s.optionalAdd(p,"reloadCount",r),s.optionalAdd(p,"initialLoad",a),s.optionalAdd(p,"reportPage",c),this.inAppView()?(d=i.navigation.states.appReportPage,s.optionalAdd(p,"appGUID",this.currentAppGUID),s.optionalAdd(p,"reportOriginalGUID",n),s.optionalAdd(p,"appInstanceId",this.currentAppInstanceId)):d=this.inReportSubscriptionView()||l?i.navigation.states.reportSubscription:i.navigation.states.reportPage,this.stateService.go(d,p,o)},a.prototype.navigateToDatasetByDBName=function(t,o){void 0===o&&(o=e.common.contracts.reportServer.ReportInstantiationMode.Exploration),this.stateService.go(i.navigation.states.dataset,{datasetDBName:t,instantiationMode:o,reloadCount:1},{inherit:!0})},a.prototype.navigateToDatasets=function(){this.conceptualModelSetting.isListViewEnabled()?this.navigateToContentList(this.currentGroupGUID,!0,8):this.stateService.go(i.navigation.states.datasets)},a.prototype.navigateToStreamingDatasets=function(e){this.conceptualModelSetting.isListViewEnabled()?this.navigateToContentList(this.currentGroupGUID,!0,8,e):this.stateService.go(i.navigation.states.streamingDatasets,{instantiationMode:e},{inherit:!0})},a.prototype.updateReportStateNoReload=function(e,t,i,o,r){if(void 0===i&&(i=void 0),o||this.inReportView()){var a={location:this.convertLocationOption(r),inherit:!0,notify:!1};this.gotoReportByGUID(e,this.currentGroupGUID,a,void 0,void 0,t,i)}},a.prototype.navigateToGateways=function(){this.stateService.go(o.navigation.states.gateways)},a.prototype.navigateToGatewayItem=function(e,t,i){if(void 0===i&&(i=!0),e&&t){var a=this.convertLocationOption(r.Replace);this.stateService.go(o.navigation.states.dataSource,{gatewayId:e,dataSourceId:t,isNavigatingFromUi:i},{location:a,inherit:!0})}else e&&!t?this.stateService.go(o.navigation.states.gateway,{gatewayId:e},{inherit:!0,notify:!1}):this.navigateToGateways()},a.prototype.navigateToAdminPortal=function(){this.stateService.go(o.navigation.states.adminPortal,{},{inherit:!0})},a.prototype.navigateToManagePermissions=function(e,t){this.permissionNavigationService.navigateToManagePermissions(e,t)},a.prototype.navigateToWorkbookByUrlId=function(e,t){var o=this.inAppView()?i.navigation.states.appWorkbook:i.navigation.states.workbook,r=this.stateService.href(o,{workbookURLIdentifier:e,activeSelection:t},{inherit:!0});this.locationService.url(r)},a.prototype.showQnaView=function(e,t,i){var r={q:e};"filter"in jsCommon.QueryStringUtil.parseQueryString()&&(r.filter=null);var a=this.stateService.includes(o.navigation.states.modelQna)?o.navigation.states.modelQna:o.navigation.states.dashboardQna;this.stateService.go(a,r,{location:this.convertLocationOption(t),inherit:!0,notify:!i})},a.prototype.showQnaStart=function(e){this.stateService.go(o.navigation.states.dashboardQnaStart,{},{location:this.convertLocationOption(e),
inherit:!0})},a.prototype.showInsightsPanel=function(e,t,i){this.stateService.go(o.navigation.states.insights,{dataGUID:e,insightsSource:t},{location:this.convertLocationOption(i),inherit:!0})},a.prototype.showShareSlider=function(e,t){var i={dashboardGUID:e,groupGUID:t};this.stateService.go(o.navigation.states.dashboardShare,i,{inherit:!0})},a.prototype.showAlertsEditor=function(e,t,i,r,a){var n={tileGUID:e,alertId:i,dashboardGUID:r};s.optionalAdd(n,"groupGUID",a),s.optionalAdd(n,"tileOriginalGUID",t),this.inAppView()?this.stateService.go(o.navigation.states.appAlertsEditor,n,{inherit:!0}):this.stateService.go(o.navigation.states.alertsEditor,n,{inherit:!0})},a.prototype.showInFocusMode=function(e,t,i,r,a){var n={tileGUID:e,dashboardGUID:i};s.optionalAdd(n,"groupGUID",a),s.optionalAdd(n,"tileOriginalGUID",t),s.optionalAdd(n,"dashboardOriginalGUID",r),this.inAppView()?this.stateService.go(o.navigation.states.appInFocusMode,n,{inherit:!0}):this.stateService.go(o.navigation.states.inFocusMode,n,{inherit:!0})},a.prototype.showInsightsInFocusMode=function(e,t,i,r){var a={tileGUID:e,dashboardGUID:i};s.optionalAdd(a,"groupGUID",r),s.optionalAdd(a,"tileOriginalGUID",t),this.inAppView()?this.stateService.go(o.navigation.states.appInFocusInsights,a,{inherit:!0}):this.stateService.go(o.navigation.states.inFocusInsights,a,{inherit:!0})},a.prototype.showSettingsSlider=function(t,i){var a=this.convertLocationOption(this.stateService.includes(o.navigation.states.settings)?r.Replace:r.True);this.stateService.go(i?o.navigation.states.settingsId:o.navigation.states.settingsGroup,{settingsGroup:e.models.SettingsGroupsType[t].toLowerCase(),settingsId:i},{location:a,inherit:!0})},a.prototype.showPublishAppSlicer=function(e){this.stateService.go(o.navigation.states.publishApp,{appGUID:e},{inherit:!0})},a.prototype.showPublishContentPackSlider=function(e){this.stateService.go(o.navigation.states.publishContent,{contentPackId:e},{inherit:!0})},a.prototype.showViewContentPackSlider=function(){this.stateService.go(o.navigation.states.viewContent,{},{inherit:!0})},a.prototype.showRowLevelSecuritySlider=function(e){this.stateService.go(o.navigation.states.rowLevelSecurity,{modelId:e},{inherit:!0})},a.prototype.showGetDataSlider=function(e,t,i,o){void 0===o&&(o=!0);var r={};r.categoryName=e,r.providerName=t,this.stateService.go(this.getGetDataStateNameFromParams(e,t),r,{location:this.convertLocationOption(i),inherit:!0,notify:o})},a.prototype.showDevToolsSlider=function(){this.stateService.go(o.navigation.states.devTools,{},{inherit:!0})},a.prototype.getGetDataStateNameFromParams=function(e,t){var i;return e||t||(e=this.categoryName,t=this.providerName),i=o.navigation.states.getData,e&&(i=t?o.navigation.states.getDataCategoryProviderName:o.navigation.states.getDataCategory),i},a.prototype.showManageStorageSlider=function(){this.stateService.go(o.navigation.states.manageStorage)},a.prototype.showManageEmbedSlider=function(){this.stateService.go(o.navigation.states.manageEmbed)},a.prototype.navigateBack=function(e){void 0===e&&(e=-1),this.$window.history.go(e)},a.prototype.navigateForward=function(){this.$window.history.forward()},a.prototype.inAdminPortalView=function(){return this.stateService.includes(o.navigation.states.adminPortal)},a.prototype.inAppsDetailView=function(){return this.stateService.is(o.navigation.states.apps)},a.prototype.inAppsView=function(){return this.stateService.includes(o.navigation.states.apps)},a.prototype.inAppView=function(){return this.stateService.includes(o.navigation.states.app)},a.prototype.inAppInstanceView=function(){return this.stateService.is(o.navigation.states.appInstance)},a.prototype.inAppDetailView=function(){return this.stateService.is(o.navigation.states.app)||this.inAppInstanceView()},a.prototype.inGroupView=function(){return this.stateService.includes(o.navigation.states.groups)},a.prototype.inLandingContainerView=function(){return this.stateService.is(o.navigation.states.landing)},a.prototype.inDashboardView=function(){return this.featureSwitchService.featureSwitches.conceptualModelEnabled||this.featureSwitchService.featureSwitches.previewConceptualModel&&this.tutorialDataStore.hasKey(i.previewConceptualModelNewKey)?this.stateService.includes(o.navigation.states.dashboards)||this.stateService.includes(o.navigation.states.appDashboards):this.stateService.includes(o.navigation.states.dashboards)||this.stateService.is(o.navigation.states.landing)},a.prototype.inHomeDashboardView=function(){return this.stateService.includes(o.navigation.states.home)},a.prototype.inFavoritesView=function(){return this.stateService.includes(o.navigation.states.favorites)},a.prototype.inContentListView=function(e){return!!this.stateService.includes(o.navigation.states.contentList)&&(!e||"true"===this.stateService.params.onlySharedWithMe)},a.prototype.inPublishContentPackView=function(){return this.stateService.includes(o.navigation.states.publishContent)},a.prototype.inViewContentPackView=function(){return this.stateService.includes(o.navigation.states.viewContent)},a.prototype.inRowLevelSecurityView=function(){return this.stateService.includes(o.navigation.states.rowLevelSecurity)},a.prototype.inDashboardDetailView=function(){return this.stateService.is(o.navigation.states.dashboard)||this.stateService.is(o.navigation.states.appDashboard)},a.prototype.inGroupWelcomeView=function(){return this.stateService.is(o.navigation.states.groupWelcome)},a.prototype.inQnaView=function(){return this.stateService.includes(o.navigation.states.dashboardQna)},a.prototype.inQnaModelView=function(){return this.stateService.includes(o.navigation.states.modelQna)},a.prototype.inQnaStartView=function(){return this.stateService.includes(o.navigation.states.dashboardQnaStart)},a.prototype.inExtendTrial=function(){return this.stateService.includes(o.navigation.states.extendTrial)},a.prototype.inInsightsView=function(){return this.stateService.includes(o.navigation.states.insights)},a.prototype.inRecentlyViewedView=function(){return this.stateService.includes(o.navigation.states.recentlyViewed)},a.prototype.inReportView=function(){return this.stateService.includes(i.navigation.states.reports)||this.stateService.includes(i.navigation.states.appReports)},a.prototype.inReportDetailView=function(){return this.stateService.includes(i.navigation.states.report)||this.stateService.includes(i.navigation.states.appReport)},a.prototype.inReportSubscriptionView=function(){return this.stateService.includes(i.navigation.states.reportSubscription)},a.prototype.inDatasetView=function(){return this.stateService.includes(i.navigation.states.dataset)},a.prototype.inManageDatasetView=function(){return this.stateService.is(i.navigation.states.datasets)},a.prototype.inManageStreamingDatasetView=function(){return this.stateService.is(i.navigation.states.streamingDatasets)},a.prototype.inGatewaysView=function(){return this.stateService.includes(o.navigation.states.gateways)},a.prototype.inDatasetDetailView=function(){return this.stateService.includes(i.navigation.states.dataset)},a.prototype.inWorkbookView=function(){return this.stateService.includes(i.navigation.states.workbook)||this.stateService.includes(i.navigation.states.appWorkbook)},a.prototype.inGetDataView=function(){return this.stateService.includes(o.navigation.states.getData)},a.prototype.inGetDataCategoryView=function(){return this.stateService.includes(o.navigation.states.getDataCategory)},a.prototype.inGetDataCategoryProviderView=function(){return this.stateService.includes(o.navigation.states.getDataCategoryProviderName)},a.prototype.inSharingView=function(){return this.stateService.includes(o.navigation.states.dashboardShare)},a.prototype.inAlertsEditorView=function(){return this.stateService.includes(o.navigation.states.alertsEditor)||this.stateService.includes(o.navigation.states.appAlertsEditor)},a.prototype.inInFocusView=function(){return this.stateService.includes(o.navigation.states.inFocusMode)||this.stateService.includes(o.navigation.states.appInFocusMode)},a.prototype.inInFocusInsightsView=function(){return this.stateService.includes(o.navigation.states.inFocusInsights)||this.stateService.includes(o.navigation.states.appInFocusInsights)},a.prototype.inFullPageSliderView=function(){return this.stateService.current.data&&this.stateService.current.data.fullPageSlider},a.prototype.inContentSliderView=function(){return this.stateService.current.data&&this.stateService.current.data.contentSlider},a.prototype.inManageStorageView=function(){return this.stateService.includes(o.navigation.states.manageStorage)},a.prototype.inSettingsView=function(){return this.stateService.includes(o.navigation.states.settings)},a.prototype.inManageEmbedView=function(){return this.stateService.includes(o.navigation.states.manageEmbed)},a.prototype.inRequestDashboardAccessView=function(){return this.stateService.includes(o.navigation.states.dashboardRequestAccess)},a.prototype.inReportEmbedView=function(){return!1},a.prototype.inManagePermissionsView=function(){return this.permissionNavigationService.inManagePermissionsView()},Object.defineProperty(a.prototype,"currentDatasetDBName",{get:function(){return this.stateService.params.datasetDBName},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentGroupGUID",{get:function(){return this.stateService.params.groupGUID},set:function(e){this.stateService.params.groupGUID=e,this.stateParams.groupGUID=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentDashboardGUID",{get:function(){return this.stateService.params.dashboardGUID},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentDashboardOriginalGUID",{get:function(){return this.stateService.params.dashboardOriginalGUID},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentAppGUID",{get:function(){return this.stateService.params.appGUID},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentAppInstanceId",{get:function(){return parseInt(this.stateService.params.appInstanceId)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentTileGUID",{get:function(){return this.stateService.params.tileGUID},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentTileOriginalGUID",{get:function(){return this.stateService.params.tileOriginalGUID},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentAlertId",{get:function(){return parseInt(this.stateService.params.alertId)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentReportGUID",{get:function(){return this.stateService.params.reportGUID},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentReportOriginalGUID",{get:function(){return this.stateService.params.reportOriginalGUID},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentWorkbookURLIdentifier",{get:function(){return this.stateService.params.workbookURLIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentWorkbookActiveSelection",{get:function(){return this.stateService.params.activeSelection},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentReportPage",{get:function(){return this.stateService.params.reportPage},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentReportSubscriptionGUID",{get:function(){return this.stateService.params.subscriptionGUID},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentInviteId",{get:function(){return this.stateService.params.inviteid},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentInviteObjectId",{get:function(){return this.stateService.params.inviteoid},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"instantiationMode",{get:function(){return this.stateService.params.instantiationMode},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"categoryName",{get:function(){return this.stateService.params.categoryName},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"providerName",{get:function(){return this.stateService.params.providerName},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"settingsGroup",{get:function(){return this.stateService.params.settingsGroup},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"settingsGroupType",{get:function(){return e.models.SettingsGroupUrlMap[this.settingsGroup]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"settingsId",{get:function(){return this.stateService.params.settingsId},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"permissionArtifact",{get:function(){return this.permissionNavigationService.permissionArtifact},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"permissionArtifactType",{get:function(){return this.permissionNavigationService.permissionArtifactType},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"permissionArtifactGUID",{get:function(){return this.permissionNavigationService.permissionArtifactGUID},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"gatewayId",{get:function(){return parseInt(this.stateService.params.gatewayId)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dataSourceId",{get:function(){return parseInt(this.stateService.params.dataSourceId)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"qnaQuery",{get:function(){return this.stateService.params.q},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"insightsDataGUID",{get:function(){return this.stateService.params.dataGUID},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"insightsSource",{get:function(){return this.stateService.params.insightsSource},enumerable:!0,configurable:!0}),a.prototype.resetInsightsSource=function(){this.stateService.go(o.navigation.states.insights,{insightsSource:null},{location:this.convertLocationOption(r.Replace),inherit:!0,notify:!1})},Object.defineProperty(a.prototype,"contentPack",{get:function(){var e=parseInt(this.stateService.params.contentPackId);return e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"contentPackProviderKey",{get:function(){var e=this.stateService.params.contentPackProviderKey;return e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rowLevelSecurityModelId",{get:function(){var e=parseInt(this.stateService.params.modelId);return isNaN(e)?void 0:e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"additionalODataFilter",{get:function(){return this.stateService.params.filter},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"collapseNavigation",{get:function(){return this.stateService.params.collapseNavigation},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"stateService",{get:function(){return this.$state},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"locationService",{get:function(){return this.$location},enumerable:!0,configurable:!0}),a})();t.Navigation=a;var n=(function(){function e(e){this.locationService=e}return e.prototype.replaceHistoryWithDashboardAndNavigate=function(e,t,i){this.currentDashboardGUID=e},e.prototype.replaceHistoryWithDatasetAndNavigate=function(e,t,i){},e.prototype.replaceHistoryWithGroupWelcomeAndNavigate=function(e,t,i){},e.prototype.replaceAndLoadCurrentState=function(e,t){},e.prototype.navigateToContentListOrActiveDashboard=function(){},e.prototype.navigateToActiveDashboard=function(){},e.prototype.navigateToGroupByGUID=function(e,t){},e.prototype.navigateToDatasets=function(){},e.prototype.navigateToStreamingDatasets=function(e){},e.prototype.navigateToDashboardByGUID=function(e,t,i){this.currentDashboardGUID=e},e.prototype.navigateToAppDashboardByGUID=function(e,t,i,o,r,a){void 0===a&&(a=!0),this.currentDashboardGUID=e,this.currentDashboardOriginalGUID=t,this.currentAppGUID=i,_.isEmpty(o)||(this.currentGroupGUID=o)},e.prototype.navigateToAppReportByGUID=function(e,t,i,o,r,a){void 0===a&&(a=!0),this.currentReportGUID=e,this.currentReportOriginalGUID=t,this.currentAppGUID=i,_.isEmpty(o)||(this.currentGroupGUID=o)},e.prototype.navigateToAppWorkbookByUniqueId=function(e,t,i,o){this.currentWorkbookURLIdentifier=e,this.currentAppGUID=t,_.isEmpty(i)||(this.currentGroupGUID=i)},e.prototype.navigateToHomeDashboard=function(){},e.prototype.insertGroupAndNavigateToDashboardByGUID=function(e,t,i){this.currentDashboardGUID=e},e.prototype.insertGroupAndNavigateToReportByGUID=function(e,t,i,o){},e.prototype.insertGroupAndNavigateToWorkbookByUniqueId=function(e,t,i){},e.prototype.navigateToApps=function(){},e.prototype.navigateToApp=function(e){this.currentAppGUID=e},e.prototype.navigateToAppInstance=function(e,t){this.currentAppGUID=e,this.currentAppInstanceId=t},e.prototype.navigateToFavorites=function(){},e.prototype.navigateToContentList=function(e){},e.prototype.navigateToRecentlyViewed=function(){},e.prototype.navigateToRequestDashboardAccessByGUID=function(e,t){},e.prototype.navigateToReportByGUID=function(e,t,i,o,r,a){},e.prototype.navigateToReportSubscriptionsPane=function(e,t,i){},e.prototype.resetToMyWorkspace=function(){},e.prototype.updateReportStateNoReload=function(e,t,i,o,r){},e.prototype.initialLoadDatasetByDBName=function(e,t){},e.prototype.initialLoadReportByGUID=function(e,t,i,o){},e.prototype.navigateToDatasetByDBName=function(e,t){},e.prototype.navigateToGroupWelcome=function(){},e.prototype.navigateToReport=function(){},e.prototype.navigateToWorkbookByUrlId=function(e,t){},e.prototype.toggleArchivedContent=function(e){},e.prototype.navigateToGateways=function(){},e.prototype.navigateToAdminPortal=function(){},e.prototype.navigateToManagePermissions=function(e,t){},e.prototype.showQnaView=function(e,t,i){},e.prototype.showQnaStart=function(e){},e.prototype.showInsightsPanel=function(e,t,i){},e.prototype.showShareSlider=function(e){},e.prototype.showAlertsEditor=function(e,t,i,o,r){},e.prototype.showInFocusMode=function(e,t,i,o,r){},e.prototype.showInsightsInFocusMode=function(e,t,i,o){},e.prototype.showSettingsSlider=function(e,t){},e.prototype.showPublishAppSlicer=function(e){},e.prototype.showPublishContentPackSlider=function(e){},e.prototype.showViewContentPackSlider=function(){},e.prototype.showGetDataSlider=function(e,t,i){},e.prototype.showDevToolsSlider=function(){},e.prototype.showAuthorCustomTileSlider=function(){},e.prototype.showRowLevelSecuritySlider=function(e){},e.prototype.getGetDataStateNameFromParams=function(e,t){return""},e.prototype.showManageStorageSlider=function(e){},e.prototype.showManageEmbedSlider=function(){},e.prototype.inContentSliderView=function(){return!1},e.prototype.inFullPageSliderView=function(){return!1},e.prototype.navigateBack=function(e){},e.prototype.navigateForward=function(){},e.prototype.resetInsightsSource=function(){},e.prototype.inAdminPortalView=function(){return!1},e.prototype.inAppView=function(){return!1},e.prototype.inAppInstanceView=function(){return!1},e.prototype.inAppDetailView=function(){return!1},e.prototype.inAppsDetailView=function(){return!1},e.prototype.inAppsView=function(){return!1},e.prototype.inDatasetView=function(){return!1},e.prototype.inManageDatasetView=function(){return!1},e.prototype.inManageStreamingDatasetView=function(){return!1},e.prototype.inDatasetDetailView=function(){return!1},e.prototype.inGroupView=function(){return!1},e.prototype.inLandingContainerView=function(){return!1},e.prototype.inDashboardView=function(){return!1},e.prototype.inDashboardDetailView=function(){return!1},e.prototype.inGroupWelcomeView=function(){return!1},e.prototype.inRecentlyViewedView=function(){return!1},e.prototype.inReportView=function(){return!1},e.prototype.inReportSubscriptionView=function(){return!1},e.prototype.inFavoritesView=function(){return!1},e.prototype.inContentListView=function(){return!1},e.prototype.inHomeDashboardView=function(){return!1},e.prototype.inReportDetailView=function(){return!1},e.prototype.inWorkbookView=function(){return!1},e.prototype.inQnaView=function(){return!1},e.prototype.inQnaModelView=function(){return!1},e.prototype.inQnaStartView=function(){return!1},e.prototype.inExtendTrial=function(){return!1},e.prototype.inInsightsView=function(){return!1},e.prototype.inGetDataView=function(){return!1},e.prototype.inGetDataCategoryView=function(){return!1},e.prototype.inGetDataCategoryProviderView=function(){return!1},e.prototype.inPublishContentPackView=function(){return!1},e.prototype.inViewContentPackView=function(){return!1},e.prototype.inSharingView=function(){return!1},e.prototype.inInFocusView=function(){return!1},e.prototype.inInFocusInsightsView=function(){return!1},e.prototype.inManageStorageView=function(){return!1},e.prototype.inSettingsView=function(){return!1},e.prototype.inGatewaysView=function(){return!1},e.prototype.inManageEmbedView=function(){return!1},e.prototype.inRequestDashboardAccessView=function(){return!1},e.prototype.inReportEmbedView=function(){return!1},e.prototype.inManagePermissionsView=function(){return!1},e.prototype.inRowLevelSecurityView=function(){return!1},e.prototype.inAlertsEditorView=function(){return!1},e.prototype.navigateToGatewayItem=function(e,t){},e})();t.MockNavigation=n;var s;!(function(e){function t(e,t,i){angular.isDefined(i)&&(e[t]=i)}e.optionalAdd=t})(s=t.NavigationHelper||(t.NavigationHelper={}))})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.constants,o=(function(){function t(e,t,i,o,r,a){this.$rootScope=e,this.$document=t,this.telemetryService=i,this.localizationService=o,this.modalDialogService=r,this.tutorialDataStore=a}return t.prototype.showModal=function(t){var i=this,o=null,r=null;if(t){r=e.telemetry.ModalFor.IntroductionModal;var a=this.telemetryService.startEvent(e.telemetry.PreviewFeaturesIntroductionModalLogged);this.tutorialDataStore.setKey(e.constants.previewfeaturesModalKey,!0,a),o=[new InJs.ModalDialogAction(this.localizationService.get("PreviewFeaturesModal_TryItNow"),function(){i.setUserPreference(!0),s.closeDialog()}),new InJs.ModalDialogAction(this.localizationService.get("PreviewFeaturesModal_MaybeLater"),function(){i.setUserPreference(!1),s.closeDialog()})]}else r=e.telemetry.ModalFor.HelpModal,o=[new InJs.ModalDialogAction(this.localizationService.get("ModalDialogButtonText_Close"),function(){s.closeDialog()})];var n=this.telemetryService.startEvent(e.telemetry.PreviewFeaturesModalShown,r),s=this.modalDialogService.showLegacyWebModalDialog({dialogName:"",template:"<preview-features-modal></preview-features-modeal>",dialogActions:o,scope:this.$rootScope.$new(!0),dialogCssClass:"previewFeaturesModal",isDismissable:!1,onCloseDialog:function(){n.resolve()}})},t.prototype.showFeedbackModal=function(){var t=null;t=[new InJs.ModalDialogAction(this.localizationService.get("ModalDialogButtonText_Close"),function(){o.closeDialog()})];var o=this.modalDialogService.showLegacyWebModalDialog({dialogName:"",template:"<preview-feedback-modal></preview-feedback-modal>",dialogActions:t,scope:this.$rootScope.$new(!0),dialogCssClass:"previewFeedbackModal",isDismissable:!1}),r=this.telemetryService.startEvent(e.telemetry.PreviewConceptualModel,!1,e.telemetry.From.IntroductionModal);this.tutorialDataStore.setKey(i.previewConceptualModelKey,!1,r)},t.prototype.setUserPreference=function(t){var o=this.telemetryService.startEvent(e.telemetry.PreviewConceptualModel,t,e.telemetry.From.IntroductionModal);this.tutorialDataStore.setKey(i.previewConceptualModelNewKey,t,o)},t})();t.PreviewFeaturesModalService=o})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=e.dataServices.AppUtils,i=e.common.constants,o=e.common.models.CollapsiblePaneExpandedWidth,r=e.common.helpers,a=e.errorDetailsHelper,n=e.common.contracts.Permissions,s=e.dataServices.models.DashboardTileModel,c=e.dataServices.constants,l=e.dataServices.models.getDashboardGuidFromUrl,d=e.common.models.Report,p=e.dataServices.TileUtils,u=e.common.constants.TaskPaneCollapsiblePaneMode,v=e.services.LocationOptions,h=10,g=2e3,m=3,f=(function(){function f(t,i,o,r,a,n,s,l,d,p,u,v,h,g,m,f,y,b,S,w,C,D,I,T,M,E,P,k,N,A,_,F,x,R,L,G,O,U,z,B,$,W,V,H,j,q,Q,K){var J=this;this.$location=t,this.rootScope=i,this.navigation=o,this.timeout=r,this.telemetryService=a,this.errorService=n,this.modelMerger=s,this.modelConverter=l,this.syncService=d,this.dashboardConfigurationService=p,this.dashboardDataService=u,this.dashboardHttpService=v,this.dashboardSyncService=h,this.dashboardWarningsService=g,this.fullScreen=m,this.localizationService=f,this.promiseFactory=y,this.reportService=b,this.modelHttpService=S,this.viralTenantMergeHelperService=w,this.groupService=C,this.featureSwitchService=D,this.modelService=I,this.licenseEnforcementService=T,this.userInfo=M,this.licenseHelperService=E,this.contentProviderHttpService=P,this.storageUsageService=k,this.appMetadataService=N,this.permissionService=A,this.tutorialDataStore=_,this.workbookService=F,this.notificationBar=x,this.notificationToastService=R,this.resourcePackagesService=L,this.userSettingsService=G,this.visualPluginService=O,this.invitationService=U,this.resourcePackageGateService=z,this.sampleQuestionsService=B,this.home=$,this.packageService=W,this.permissionDataService=V,this.inFocusService=H,this.userActivityContextService=j,this.mostRecentlyUsedService=q,this.appService=Q,this.editableFeatureSwitchService=K,this.temporayObjectID=function(e){return"TEMP_ID"+e},this.temporaryDashboardId=-100,this.temporaryTileId=-100,this.dashboardCacheLimit=5,this.modelIdsForTileRefresh=[],this.readyForConceptualModelInitializationDeferred=this.promiseFactory.defer(),this.readyForConceptualModelInitializationPromise=this.readyForConceptualModelInitializationDeferred.promise,this.dashboardsOwnersMergedDeferred=this.promiseFactory.defer(),this.dashboardsDeferred=this.promiseFactory.defer(),this.loadAndInitializeDashboardsOnInvitation(),this.mergeDashboardOwnerInfoOnPageLoad(),this.updateActiveDashboardPromise=void 0,this.dashboardSyncService.beforeDashboardDeleting=function(e){J.beforeDashboardDeletingHandler(e)},this.dashboardSyncService.afterDashboardDeleting=function(e){J.afterDashboardDeletingHandler(e)};var Y=this.rootScope.$on(e.constants.renameDashboardEventName,(function(e,t,i){return J.renameDashboard(t,i)})),X=this.rootScope.$on(e.constants.groupSwitchedEventName,(function(e,t,i){return J.onGroupSwitched(t,i)})),Z=this.rootScope.$on(e.constants.notifyDashboardUpdate,(function(e){return J.notifyDashboardUpdate()})),ee=this.rootScope.$on(c.onDashboardShallowEditEventName,(function(e,t,i){return J.onDashboardShallowEdit(t,i)})),te=this.rootScope.$on(c.addOrUpdateDashboardEventName,(function(e,t,i){return J.addOrUpdateDashboard(t,i)})),ie=this.rootScope.$on(c.mergeDashboardContainerModelsReportsAndPackagesEventName,(function(t,i){return e.contracts.mergeDashboardContainerModelsReportsAndPackages(i,J.dashboardContainerModel.contract)})),oe=this.rootScope.$on(c.updateDashboardContainerEventName,(function(e,t){return J.updateDashboardContainer(t)})),re=this.rootScope.$on(e.dataServices.constants.packageVersionChange,(function(e,t){return J.updateDashboardWithPackageInfo(e,t)}));this.rootScope.$on("$destroy",(function(){Z(),X(),Y(),re(),ee(),te(),ie(),oe(),re()}))}return f.prototype.getDashboards=function(){return this.dashboardsDeferred.promise.then((function(e){return e.dashboards}))},f.prototype.dashboardsOwnersMergedPromise=function(){return this.dashboardsOwnersMergedDeferred.promise},f.prototype.updateCachedContainer=function(){var e=null,t=this.dashboardDataService.dashboards;e=_.map(t,(function(e){var t=_.clone(e.contract);return t.tiles=_.map(t.tiles,(function(e){var t=_.clone(e);return t.config&&t.config.indexOf("imageTile")>0&&(e.config=null),e.$config&&!e.$config.workbookTile&&(e.$config=null),e.$action=null,t.tileDataSet=null,t})),t.cached=!0,t.hitCount=e.hitCount,t}));var i=_.sortBy(_.filter(e,(function(e){return e.tiles&&e.tiles.length>0&&e.hitCount>0})),(function(e){return 0-e.hitCount}));return i&&i.length>this.dashboardCacheLimit&&i.splice(this.dashboardCacheLimit),i},f.prototype.explorationLoaderInitialized=function(){this.exploreCompatibilityContainerLoaded=!0,this.deferredReportUrlLoad?this.navigateToReportPage():this.deferredDatasetUrlLoad&&this.navigateToDatasetPage()},f.prototype.mergeDashboardOwnerInfoOnPageLoad=function(){var e=this;this.userInfo.userMetadataPromise.then((function(t){if(t)return e.appMetadataService.getAppMetadata().finally((function(){e.mergeDashboardOwnerInfo(t),e.dashboardsOwnersMergedDeferred.resolve(null)}))}))},f.prototype.mergeDashboardOwnerInfo=function(t){if(t&&t.dashboardOwnerInfo){for(var i=0,o=t.dashboardOwnerInfo;i<o.length;i++){var r=o[i],a=this.findDashboard(r.dashboardId);a&&this.modelMerger.mergeDashboardOwnerInfo(a,r)}this.rootScope.$emit(e.constants.notifyDashboardOwnerInfoLoaded)}},f.prototype.setQnaEnabled=function(e,t){var i=this.dashboardContainerModel,o=i.findDashboard(e);o&&(o.qnaEnabled=t,this.dashboardDataService.updateIsQnaEnabled())},f.prototype.getActiveDashboard=function(){return this.dashboardDataService.activeDashboard},f.prototype.renameDashboard=function(t,i){var o=this;if(this.isDashboardNameValid(t,i)){var r=this.dashboardContainerModel,a=r.findDashboard(i),n=a.contract.displayName;if(n!==t){var s=this.telemetryService,c=s.startEvent(e.telemetry.DashboardRenameDashboard,angular.isUndefined(a.tiles)||!a.tiles?0:a.tiles.length);a.displayName=a.contract.displayName=t,this.dashboardHttpService.renameDashboard(a.contract,t,c.event).then((function(){a&&a.isUsedByContentPack&&o.rootScope.$emit(e.constants.contentPackDirtyShowNotification,i,e.dataServices.models.ContentPackItems.Dashboard),c.resolve()}),(function(t){t.status!==e.HttpStatusCode.Unauthorized&&(o.errorService.error(o.localizationService.get("Dashboard_FailToRenameDashboardMessage"),"Dashboard_FailToRenameDashboard",{requestId:t.requestId,statusCode:t.status.toString()}),a.displayName=n,a.contract.displayName=n),c.reject()}))}}},f.prototype.addDashboard=function(t,i){var o=this,r=void 0!==i;if(!this.storageUsageService.checkQuotaExceeded(this.dashboards,e.telemetry.QuotaCheckOperation.AddDashboard)&&this.isDashboardNameValid(t,null)){var s=this.telemetryService,c=s.startEvent(e.telemetry.DashboardAddDashboard,null),l={objectId:this.temporayObjectID(this.temporaryDashboardId),id:this.temporaryDashboardId--,displayName:t,version:"",tiles:[],permissions:n.All,isHidden:!1},d=this.modelConverter.convertDashboard(l);d.displayName=t,d.id=l.id,d.isLoaded=!0,r&&(d.isNew=!0,d.isNotified=!1),this.dashboards.push(d),r||(this.navigation.navigateToDashboardByGUID(l.objectId,e.services.LocationOptions.False),this.rootScope.$emit(e.constants.scrollNavPaneToActiveDashboardEventName)),this.dashboardHttpService.addDashboard(l,c.event).then((function(t){var a,n,s,p=t.data;o.dashboardContainerModel.cacheTemporaryDashBoardMapping(l.objectId,p.objectId),l.id=p.id,d.id=p.id,l.objectId=p.objectId,o.groupService.activeGroup.aadGroupId===e.constants.myWorkSpaceGroupId?(a=o.userInfo.name,n=o.userInfo.givenName,s=o.userInfo.surname):(n=o.groupService.activeGroup.displayName,a=o.groupService.activeGroup.contract.mailNickname);var u={dashboardId:l.id,emailAddress:a,givenName:n,familyName:s};o.modelMerger.mergeDashboardOwnerInfo(d,u),o.rootScope.$emit(e.constants.notifyDashboardOwnerInfoLoaded),o.dashboardWarningsService.showWarningsIfNeeded(),o.updateActiveDashboard(p.id,void 0,null,i),c.event.info.pendingRequestCount=t.pendingRequestCount,c.resolve(),r||o.navigation.inContentListView()||(o.mostRecentlyUsedService.updateMRU(e.models.MRUArtifactType.Dashboards,l.objectId,l.displayName,l.permissions),o.navigation.navigateToDashboardByGUID(l.objectId,e.services.LocationOptions.True))}),(function(e){o.errorService.error(o.localizationService.get("Dashboard_FailToCreateDashboardMessage"),"Dashboard_FailToCreateDashboard",{
requestId:e.requestId,statusCode:e.status.toString()}),c.event.info.pendingRequestCount=e.pendingRequestCount,c.reject(a.getTelemetryErrorDetails(e.error))}))}},f.prototype.addOrUpdateDashboard=function(e,t){var i=e.dashboards[0];this.modelConverter.fillDashboardContainerDashboard(this.dashboardContainerModel,e),t&&1===this.dashboardContainerModel.visibleDashboards.length&&this.inContentListViews()&&this.navigation.navigateToDashboardByGUID(i.objectId),this.dashboardContainerModel.calculateLayout(),this.dashboardContainerModel.applyLayout()},f.prototype.preloadLinkedDashboards=function(t){var i=this,o=this.promiseFactory.defer(),r=this.dashboardDataService,n=this.featureSwitchService.featureSwitches.preloadLinkedDashboardEnabled;if(!n)return o.reject(),o.promise;var s=r.findDashboard(t);if(!s||!s.isLoaded||_.isEmpty(s.tiles))return o.reject(),o.promise;for(var c=_.indexBy(r.dashboards,(function(e){return e.objectId.toLowerCase()})),d=[],p=0,u=s.tiles;p<u.length;p++){var v=u[p],g=v&&v.action;if(g&&g.action===e.constants.openUrlActionName){var m=l(g.targetUrl);if(m){var f=c[m.toLowerCase()];if(f&&!f.isLoaded&&(d.push(f.id),d.length>=h))break}}}if(0===d.length)return o.resolve(null),o.promise;d=_.uniq(d);var y=this.telemetryService.startEvent(e.telemetry.DashboardPreloadLinkedDashboard,d.length,s.objectId);return this.dashboardHttpService.batchGetDashboards(this.promiseFactory,d,y.event).then((function(e){i.updateDashboardContainer(e.data),o.resolve(null),y.resolve()}),(function(e){o.reject(),y.reject(a.getTelemetryErrorDetails(e?e.error:null,e?e.status:null))})),o.promise},f.prototype.addOrUpdateTile=function(e,t,i){this.dashboardSyncService.addOrUpdateTile(e,t,i)},f.prototype.selectDashboardTile=function(e){e.tileModel.isSelected=!0,this.dashboardDataService.selectedDashboardTile=e},f.prototype.clearSelectedDashboardTile=function(){var e=this.dashboardDataService.selectedDashboardTile;null!=e&&(e.isSelected=!1,this.dashboardDataService.selectedDashboardTile=null)},f.prototype.batchUpdateTileSizePosition=function(t,i){var o=this,r=this.telemetryService.startEvent(e.telemetry.DashboardTileLayoutChanged,i.length),a=this.dashboardHttpService.batchUpdateTileSizePosition(this.promiseFactory,t.contract,i,r.event);return a&&a.then((function(){r.resolve(),t&&t.isUsedByContentPack&&o.rootScope.$emit(e.constants.contentPackDirtyShowNotification,t.id,e.dataServices.models.ContentPackItems.Dashboard)}),(function(){r.reject()})),a},f.prototype.promptForDeleteDashboard=function(e,t){var i=this,o=this.errorService.control(),r=[new InJs.ModalDialogAction(t?this.localizationService.get("ModalDialogButtonText_Delete"):this.localizationService.get("ModalDialogButtonText_Remove"),function(r,a){o.hideDialog(),i.deleteDashboardInternal(e,t)}),new InJs.ModalDialogAction(this.localizationService.get("ModalDialogButtonText_Cancel"),function(e,t){o.hideDialog()})],a=this.findDashboard(e),n=t?this.localizationService.get("Dashboard_DeleteConfirmationTitle"):this.localizationService.get("Dashboard_RemoveConfirmationTitle"),s=this.localizationService.format(t?"Dashboard_DeleteConfirmationMessage":"Dashboard_RemoveConfirmationMessage",[a.displayName]);o.showCustomDialog(n,$("<div/>").text(s),r,(function(e){e.parent().find('input[value="'+i.localizationService.get("ModalDialogButtonText_Cancel")+'"]').focus()}),!0)},f.prototype.exportDashboard=function(t,i){var o,r=this,a=this.dashboardContainerModel,n=_.filter(a.dashboards,(function(e){return e.id===t}))[0];if(n){o=n.contract;var s="dashboardpackage.zip",c=this.telemetryService,l=c.startEvent(e.telemetry.DashboardExportDashboard,o.objectId),d=this.dashboardHttpService.exportDashboard(o,i,l.event);if(d){var p=this.notificationToastService.notify({title:this.localizationService.get("NotificationMessage_ExportingPackage"),notificationType:e.common.NotificationToastType.Loading});d.then((function(e){l.resolve(),r.notificationToastService.hide(p),jsCommon.Utility.saveAsFile(e.data,s)}),(function(t){t.status!==e.HttpStatusCode.Unauthorized&&r.errorService.error(r.localizationService.get("Dashboard_FailToExportDashboardMessage"),"Dashboard_FailToExportDashboard",{requestId:t.requestId,statusCode:t.status.toString()}),l.reject()}))}}else this.errorService.error(this.localizationService.get("Dashboard_FailToExportDashboardMessage"),"Dashboard_FailToExportDashboard")},f.prototype.hideDashboard=function(e,t){var i=e.getDashboardIndex(t),o=this.getDashboardContractIndex(e.contract,t);if(!(i<0||o<0)){var r=e.dashboards,a=r[i];a.isSharedFromSecurityGroup&&(a.getPermissions()===n.Read||a.getPermissions()===n.ReadReshare);a.contract.isHidden=!0,a.isHidden=!0,this.dashboardDataService.dropDashboardfromMemoryIfNotActive(t),this.afterDashboardDeletingHandler(t),this.navigateAfterDashboardDelete(e,t),this.mostRecentlyUsedService.removeMRU(a.contract.objectId)}},f.prototype.navigateAfterDashboardDelete=function(e,t){var i=this,o=this.dashboardDataService.activeDashboard;if(o&&t===o.id&&this.inArtefactView()){var r=_.isEmpty(e.visibleDashboards);this.rootScope.$applyAsync((function(){if(i.shouldShowConceptualModel()||r)i.dashboardDataService.activeDashboard=null,e.contract.activeDashboardId=null,i.navigation.navigateToContentListOrActiveDashboard();else{var o=i.findNextDashboard(t,i.dashboardContainerModel);o&&i.navigation.navigateToDashboardByGUID(o.objectId)}}))}},f.prototype.deleteDashboardInternal=function(t,i){var o=this,r=this.dashboardContainerModel,a=r.findDashboard(t),s=this.telemetryService,c=s.startEvent(e.telemetry.DashboardDeleteDashboard,a.objectId,angular.isUndefined(a.tiles)||!a.tiles?0:a.tiles.length);this.beforeDashboardDeletingHandler(t);var l=this.dashboards.filter((function(e){return e.id===t}));if(0===l.length)return void c.resolve();var d=a.isSharedFromSecurityGroup&&(a.getPermissions()===n.Read||a.getPermissions()===n.ReadReshare),p=l[0].contract;i?this.dashboardDataService.deleteDashboardAtServerSide(t,c).then((function(){a&&(a.isUsedByContentPack&&o.rootScope.$emit(e.constants.contentPackDirtyShowNotification,a.id,e.dataServices.models.ContentPackItems.Dashboard),o.afterDashboardDeletingHandler(t))}),(function(t){t&&t.status!==e.HttpStatusCode.Unauthorized&&o.errorService.error(o.localizationService.get("Dashboard_FailToDeleteDashboardMessage"),"Dashboard_FailToDeleteDashboard",{requestId:t.requestId,statusCode:t.status.toString()})})):this.invitationService.deleteUser(r.userId,t,c.event).then((function(e){c.resolve(),p&&o.modelService.removeModels(p.modelIds),o.tryResetHome(t)}),(function(e){o.errorService.error(o.localizationService.get("Dashboard_FailToRemoveDashboardMessage"),"Dashboard_FailToRemoveDashboard",{requestId:e.requestId,statusCode:e.status.toString()}),c.reject()})),d?this.hideDashboard(r,t):(this.dashboardDataService.deleteDashboard(t),this.syncService.stopMonitoringDashboard(t),this.navigateAfterDashboardDelete(r,t),this.mostRecentlyUsedService.removeMRU(p.objectId))},f.prototype.inArtefactView=function(){var e=this.navigation;return e.inDashboardView()||e.inReportView()||e.inWorkbookView()||e.inDatasetView()},f.prototype.inContentListViews=function(){var e=this.navigation;return e.inContentListView()||e.inFavoritesView()||e.inRecentlyViewedView()||e.inGroupWelcomeView()||e.inLandingContainerView()},f.prototype.tryResetHome=function(t){var i=this.home;i.getHomeDashboard(null).then((function(t){t.data?(i.homeDashboard.dashboardId=t.data.dashboardId,i.homeDashboard.groupId=t.data.groupId||e.constants.myWorkSpaceGroupId,i.homeDashboard.dashboardObjectId=t.data.dashboardObjectId):i.resetHomeAtClientSide()}),(function(e){}))},f.prototype.deleteTile=function(e,t){this.dashboardDataService.deleteTile(e,t)},f.prototype.duplicateDashboard=function(t,i){var o=this,r=this.promiseFactory.defer(),a=this.telemetryService.startEvent(e.telemetry.DashboardDuplicateDashboard);return this.dashboardHttpService.duplicateDashboard(t,i,a.event).then((function(t){var i=t.data;o.dashboardHttpService.addDashboardRequestToBatch(o.promiseFactory,t.data.id).done((function(n){o.dashboardSyncService.addOrUpdateDashboard(n),o.dashboardWarningsService.showWarningsIfNeeded(),o.updateActiveDashboard(i.id,!0),o.navigation.navigateToDashboardByGUID(i.objectId,e.services.LocationOptions.True),a.resolve(),r.resolve(t.data)}),(function(){a.reject(),r.reject()}))}),(function(){a.reject(),r.reject()})),r.promise},f.prototype.findDashboard=function(e){return this.dashboardDataService.findDashboard(e)},f.prototype.findDashboardByGUID=function(e){return this.dashboardDataService.findDashboardByGUID(e)},f.prototype.findDashboardsByPackageId=function(e){var t=this.dashboardDataService.dashboards;return t?_.filter(t,(function(t){return!(!t.contract||!t.contract.originalPackageId)&&t.contract.originalPackageId===e})):null},Object.defineProperty(f.prototype,"dashboards",{get:function(){return this.dashboardDataService.dashboards},enumerable:!0,configurable:!0}),f.prototype.hasTileForReportandSection=function(e,t){var i,o=this.dashboardContainerModel.dashboards;return void 0!==e?i=_.filter(o,(function(t){return _.find(t.tiles,(function(t){return t.reportTile&&t.contract&&t.contract.sectionId===e}))})):void 0!==t&&(i=_.filter(o,(function(e){return _.find(e.tiles,(function(e){return e.reportTile&&e.contract&&e.contract.reportId===t}))}))),!!(i&&i.length>0)},f.prototype.initializeDashboardContainerModel=function(e,t){var i=this.dashboardContainerModel,o=i.contract;this.modelConverter.updateDashboardContainerContract(o,e),this.modelConverter.fillDashboardContainerDashboards(i,o),this.dashboardDataService.registerDashboards(this.dashboardContainerModel.dashboards),this.dashboardDataService.activeDashboard=i.findDashboard(o.activeDashboardId);var r=this.dashboardDataService.activeDashboard;if(r&&(r.isLoaded=!0),this.navigation.currentDashboardGUID){var a=this.findDashboardByGUID(this.navigation.currentDashboardGUID);a&&(a.isHidden=!1,a.contract.isHidden=!1)}return _.isEmpty(i.visibleDashboards)&&!this.permissionService.isActiveWorkspaceIsReadOnly?void this.setupNavigationWhenNoDashboardExists():void this.dashboardSyncService.markUnseenSharedDashboardsAsNew()},f.prototype.notifyDashboardUpdate=function(){var e=this.dashboardDataService,t=e.activeDashboard;if(t.hasUpdate){var i=_.find(this.dashboardContainerModel.contract.packages,(function(e){return e.id===t.contract.originalPackageId}));if(!i){var o=this.packageService.findPackage(t.contract.originalPackageId);o&&(i=o.contract)}if(i){var r=i.name,a=jsCommon.StringExtensions.format(this.localizationService.get("DashboardContentPackNewVersion"),r);this.notificationBar.notify({message:a,hideOnStateChange:!0})}}},f.prototype.loadDashboard=function(t){var i=this,o=this.promiseFactory.defer(),r=[],a=0,n=0;for(a=0;a<m;a++)r.push(this.timeout((function(){i.loadDashboardInternal(t).then((function(e){o.resolve(e);for(var t=r.length,a=0;a<t;a++)a!==n&&i.timeout.cancel(r[a])}),(function(){n++>=m-1&&(o.reject(),i.rootScope.$emit(e.constants.loadDashboardFailed))}))}),a*f.loadDashboardTimeout));return o.promise},f.prototype.loadDashboardInternal=function(t){var i=this,o=this.promiseFactory.defer(),r=this.telemetryService.startEvent(e.telemetry.DashboardLoadDashboard,null,null);return this.userActivityContextService.pushParentContext(r.event),this.dashboardHttpService.getDashboards(this.promiseFactory,[t],null).then((function(e){if(e.length>0&&e[0].data){var n=e[0],s=n.data;i.registerAndLoadResourcePackages(s).finally((function(){i.updateDashboardContainer([s]);var e=i.findDashboard(t);o.resolve(e),e&&(r.event.info.dashboardGuid=e.objectId),r.event.info.pendingRequestCount=n.pendingRequestCount,r.resolve(),i.userActivityContextService.popParentContext(r.event)}))}else{if(o.reject(),_.isEmpty(e))r.reject();else{var c=e[0];r.event.info.pendingRequestCount=c.pendingRequestCount,r.reject(a.getTelemetryErrorDetails(c.error))}i.userActivityContextService.popParentContext(r.event)}})).catch((function(){o.reject(),r.reject(),i.userActivityContextService.popParentContext(r.event)})),o.promise},f.prototype.notifyReadOnly=function(e,t){t?this.dashboardHttpService.notifyReadOnly(e,t):this.dashboardHttpService.notifyReadOnly(e)},f.prototype.onDashboardShallowEdit=function(e,t){if(e){var i=t.isHidden&&!e.isHidden,o=!t.isHidden&&e.isHidden;this.dashboardDataService.updateIsQnaEnabled(),i?this.hideDashboard(this.dashboardContainerModel,e.id):o&&1===this.dashboardContainerModel.visibleDashboards.length&&!this.inArtefactView()&&this.navigation.navigateToDashboardByGUID(e.objectId)}},f.prototype.registerAndUpdateTile=function(e,t,i){var o=i.findDashboard(e),r=$.map(t.resourcePackageIds,(function(e){return e.toString()})),a=this.resourcePackageGateService.shouldShowWarning(r,this.dashboardDataService.activeDashboard.objectId);if(this.modelConverter.resolveTilePackage(t,this.packageService.packages),t.resourcePackageIds&&t.resourcePackageIds.length>0)for(var n=t.resourcePackageIds.length,s=0;s<n;++s)this.dashboardSyncService.addOrUpdateCustomVisualTile(t.resourcePackageIds[s],o,t,a);else this.addOrUpdateTile(o,t,i.contract.models)},f.prototype.getSelectedDashboardTile=function(){var e=this.dashboardDataService.selectedDashboardTile;if(e&&e.isSelected)return e},f.prototype.updateDashboardWithPackageInfo=function(t,i){var o,r=this.dashboardContainerModel.dashboards;r&&(o=_.filter(r,(function(e){if(e.contract&&e.contract.originalPackageId)return e.contract.originalPackageId===i}))),_.isEmpty(o)||this.modelConverter.setDashboardsHasUpdate(o),this.navigation.inDashboardView()&&this.rootScope.$emit(e.constants.notifyDashboardUpdate)},f.prototype.setActiveDashboardId=function(t,i,o){var r=this;void 0===i&&(i=!1),void 0===o&&(o=null);var a=this.findDashboard(t),n=this.telemetryService.startEvent(e.telemetry.DashboardUpdateActiveDashboard,a.objectId);this.dashboardHttpService.setActiveDashboardId(t,o,n.event).then((function(e){i?r.dashboardHttpService.refreshTileData(t,r.modelIdsForTileRefresh,n.event).then((function(e){r.checkRefreshTileResponse(e.data),n.resolve()}),(function(e){n.reject()})):n.resolve(),r.preloadLinkedDashboardPromise&&r.timeout.cancel(r.preloadLinkedDashboardPromise),r.preloadLinkedDashboardPromise=r.timeout((function(){r.preloadLinkedDashboards(t)}),g)}),(function(e){n.reject()}))},f.prototype.refreshTileData=function(t,i){var o=this;t>0&&(this.refreshTileDataPromise&&this.timeout.cancel(this.refreshTileDataPromise),i&&!_.find(this.modelIdsForTileRefresh,(function(e){return e===i}))&&this.modelIdsForTileRefresh.push(i),this.refreshTileDataPromise=this.timeout((function(){var i=o.findDashboard(t),r=o.telemetryService.startEvent(e.telemetry.DashboardRefreshTileData,i.objectId);o.dashboardHttpService.refreshTileData(t,o.modelIdsForTileRefresh,r.event).then((function(e){o.checkRefreshTileResponse(e.data),o.dashboardDataService.onDashboardTileRefreshStarted(t),r.resolve()}),(function(e){r.reject(a.getTelemetryErrorDetails(e.error))})),o.modelIdsForTileRefresh=[]}),f.refreshTileDataDelayMs))},f.prototype.updateActiveDashboard=function(e,t,i,o){var r=this;if(void 0===t&&(t=!1),e>0){this.updateActiveDashboardPromise&&this.timeout.cancel(this.updateActiveDashboardPromise),this.groupService.activeGroup.lastViewedDashboard=e;var a=this.groupService.activeGroupObjectId;i&&!_.find(this.modelIdsForTileRefresh,(function(e){return e===i}))&&this.modelIdsForTileRefresh.push(i);var n=this.findDashboard(e);this.syncService.monitorDashboards(n?[n.contract]:[],null),this.updateActiveDashboardPromise=this.timeout((function(){return r.groupService.activeGroupObjectId!==a?void(r.updateActiveDashboardPromise=void 0):(r.setActiveDashboardId(e,t,r.modelIdsForTileRefresh),r.modelIdsForTileRefresh=[],o&&(o.dashboardId=e,r.pinTileWithoutNotification(o)),void(r.updateActiveDashboardPromise=void 0))}),f.updateActiveDashboardDelayMs)}},f.prototype.setAndUpdateActiveDashboard=function(e){if(this.dashboardDataService.activeDashboard=e,e){e.isLoaded&&!e.contract.cached||this.loadDashboard(e.id);var t=e.id;this.setActiveDashboardId(t)}},f.prototype.updateGroupsAppMetadata=function(t){var i=this.dashboardContainerModel,o=i.contract;this.modelConverter.updateDashboardContainerContractFromBasicDashboardContainer(o,t),this.modelConverter.fillDashboardContainerDashboardsFromBasicDashboardContainer(i,o),this.dashboardDataService.registerDashboards(i.dashboards),this.dashboardDataService.activeDashboard=i.findDashboard(t.activeDashboardId);var r=this.dashboardDataService.activeDashboard;r&&(r.isLoaded=!0),i.calculateLayout(),i.applyLayout(),this.syncService.monitorWorkspace(r?[r.contract]:[],t.userDashboardListVersion),this.telemetryService.logEvent(e.telemetry.DashboardInitializeContainer,"",!0,this.viralTenantMergeHelperService.viewingDataFromMergedViralTenant())},f.prototype.updateDashboardMenuItems=function(t){t.moreOptionsMenu=e.models.modelFactory.createDashboardMenuItems(this.localizationService,this.featureSwitchService,this.home,this.permissionService,this.fullScreen,this.dashboardConfigurationService,this.dashboardDataService.activeDashboard,this.navigation)},f.prototype.logRTelemetryDashboardEvent=function(e){var t=this.getVisualCountData(),i=t.scriptVisualsCount,o=t.reportTilesWithR;if(0!==i||0!==o){var r=this.dashboardDataService.activeDashboard.tiles.length;this.telemetryService.logEvent(e,i,r,o)}},f.prototype.getVisualCountData=function(){var e={totalVisualsCount:0,scriptVisualsCount:0,reportTilesWithR:0},t=this.dashboardDataService.activeDashboard,i=this.visualPluginService,o=t&&t.tiles;if(o){for(var r=0,a=o;r<a.length;r++){var n=a[r];p.isScriptVisualTile(n,i)?e.scriptVisualsCount++:p.reportTileContainsScriptVisuals(n,i)&&e.reportTilesWithR++}e.totalVisualsCount=o.length}return e},f.prototype.checkRefreshTileResponse=function(t){if(t&&!_.isEmpty(t.tileErrors))for(var i=0,o=t.tileErrors;i<o.length;i++){var r=o[i];r.errorResponse.error.code===e.common.constants.cloudRLSAccessDeniedErrorCode&&this.rootScope.$emit(e.constants.rowLevelSecurityAccessDeniedEventName,r.modelIds)}},f.prototype.registerAndLoadResourcePackages=function(t){var i=this.promiseFactory.defer(),o=t.dashboards;if(o)for(var r=0,a=o;r<a.length;r++){var n=a[r],s=this.getAllRequiredResourcePackages(n);if(s&&0!==s.length&&this.resourcePackageGateService.shouldShowWarning(s,n.objectId))return i.reject(null),i.promise}var c=t.resourcePackages;if(c&&c.length>0){for(var l=[],d=!1,p=0,u=c;p<u.length;p++){var v=u[p];this.resourcePackagesService.getPackageById(v.id)||(0===v.type&&(d=!0),0===v.type&&(this.resourcePackagesService.registerPackages([v]),l.push(this.visualPluginService.ensurePlugin(v,!1))))}return this.telemetryService.logEvent(e.telemetry.DashboardRegisterAndLoadResourcePackages,c?c.length:0,d),this.promiseFactory.allSettled(l)}return i.resolve(null),i.promise},f.prototype.getAllRequiredResourcePackages=function(t){var i=[],o="";if(t&&t.tiles){for(var r=0,a=t.tiles;r<a.length;r++){var n=a[r];o=o.concat(n.id.toString(),",");var s=n.resourcePackageIds;if(s&&0!==s.length)for(var c=0,l=s;c<l.length;c++){var d=l[c];i.push(d.toString())}}this.telemetryService.logEvent(e.telemetry.DashboardRecordDashboardTiles,o.length>0?o.substr(0,o.length-1):o,t.objectId)}return i},f.prototype.loadDashboardContainer=function(e,t,i){var o=this,r=this.promiseFactory.defer();return this.appMetadataService.getAppMetadata().then((function(a){var n=o.initializeDashboardContainer(a,e,t,i);o.registerAndLoadResourcePackages(a).finally((function(){return r.resolve(n)}))}),(function(){o.dashboardHttpService.getDashboardContainer(e).then((function(a){a.data.models&&(o.modelService.mergeDatasetCollection(a.data.models),o.dashboardDataService.updateActiveDashboardModels()),a.data.featureSwitches&&o.editableFeatureSwitchService.registerFeatureSwitches(a.data.featureSwitches),o.userSettingsService.getUserSettings().then((function(e){a.data.userSettings=e.contract}));var n=o.initializeDashboardContainer(a.data,e,t,i);o.registerAndLoadResourcePackages(a.data).finally((function(){return r.resolve(n)}))}),(function(e){r.reject()}))})),r.promise},f.prototype.getDashboardContractIndex=function(e,t){for(var i=e.dashboards,o=0,r=i.length;o<r;o++)if(i[o].id===t)return o;return-1},f.prototype.findNextDashboard=function(e,t){for(var i=t.dashboards.length,o=t.getDashboardIndex(e),r=0;r<i;r++){var a=(o+1+r)%i;if(a===o)return null;var n=t.dashboards[a];if(!n.isHidden)return n}},f.prototype.initializeContainer=function(t,i){var o=this,r=this.telemetryService.startEvent(e.telemetry.DashboardInitializeContainer,"",!1,this.viralTenantMergeHelperService.viewingDataFromMergedViralTenant());initializeContainerStartTime&&(r.event.time=initializeContainerStartTime.getTime());var a={dashboards:[],activeViewMode:e.contracts.DashboardContainerViewMode.DashboardViewer,activityPane:e.staticContract.getActivityPaneContract()},n=this.dashboardContainerModel=this.modelConverter.convertDashboardContainer(a);n.calculateLayout(),n.applyLayout(),this.loadDashboardContainer(r.event,t,i).then((function(t){o.dashboardsDeferred.resolve(o),o.dashboardDataService.resolveDashboardDeferred(),t.deferEmitDashboardContainerLoadedEvent||o.rootScope.$emit(e.constants.dashboardContainerLoaded),r.resolve()}),(function(){r.reject(),o.dashboardsDeferred.reject(),o.dashboardDataService.rejectDashboardDeferred()}))},f.prototype.initializeDashboardContainer=function(t,i,o,a){var n={deferEmitDashboardContainerLoadedEvent:!1};if(window.initialDashboardContainer||(window.initialDashboardContainer=t),t.downloadCenterLinkEnabled?(e.models.PowerBICompanionModel.enabled=!0,e.models.PowerBICompanionModel.downloadLink=r.powerBICompanionHelper.getDownloadCenterLink(t.downloadCenterX64Link,t.downloadCenterX86Link),this.rootScope.$emit(e.constants.enablePowerBICompanionApp)):t.companionAppEnabled&&(e.models.PowerBICompanionModel.enabled=!0,e.models.PowerBICompanionModel.downloadLink=r.powerBICompanionHelper.getDownloadLink(),this.rootScope.$emit(e.constants.enablePowerBICompanionApp)),jsCommon.Utility.is64BitOperatingSystem()&&(e.models.PowerBIConnectorModel.downloadLink=t.downloadCenterX64ConnectorLink,this.rootScope.$emit(e.constants.enablePowerBIASConnectorApp)),e.models.PowerBIOnPremGatewayModel.downloadLink=t.downloadOnpremGatewayLink,this.featureSwitchService.featureSwitches.homeDashboardEnabled&&t.homeDashboardId!==-1){var s=!this.navigation.currentGroupGUID||this.navigation.currentGroupGUID===e.constants.myWorkSpaceGroupId,c=this.navigation.inLandingContainerView()||this.navigation.inHomeDashboardView(),l=o||!_.isEmpty(a);s&&c&&!l&&(t.homeGroupId?this.groupService.activeGroupObjectId=t.homeGroupId:this.groupService.isMyWorkspace()&&(this.groupService.activeGroupObjectId=e.constants.myWorkSpaceGroupId),o||(o=t.homeDashboardId)),this.home.homeDashboard.dashboardId=t.homeDashboardId,this.home.homeDashboard.groupId=t.homeGroupId||e.constants.myWorkSpaceGroupId}this.initializeDashboardContainerModel(t,i);var d=t.dashboards,p=_.find(d,(function(e){return e.id===t.activeDashboardId}));p||!d||_.isEmpty(this.dashboardContainerModel.visibleDashboards)||(p=d[0],t.activeDashboardId=p.id),this.syncService.monitorDashboards(p?[p]:[],t.userDashboardListVersion);var u=this.findDashboard(this.home.homeDashboard.dashboardId);u&&(this.home.homeDashboard.dashboardObjectId=u.objectId);var v=!1;if(window.appLoadError&&window.appLoadError.error===e.constants.appLoadErrorGroupNotAccessible){if(this.navigation.resetToMyWorkspace(),this.shouldNavigateToRequestAccess())return this.navigation.navigateToRequestDashboardAccessByGUID(this.navigation.currentDashboardGUID),n;v=!0}return this.navigateToActiveDashboard(t,i,o,a,v)},f.prototype.isAllowedMobileUserAgent=function(){for(var e=["iphone","ipad","android"],t=["windows phone"],i=navigator.userAgent.toLowerCase(),o=0;o<t.length;o++)if(i.indexOf(t[o])!==-1)return!1;for(var o=0;o<e.length;o++)if(i.indexOf(e[o])!==-1)return!0;return!1},f.prototype.loadAndInitializeDashboardsOnInvitation=function(){var t=this,i=this.$location.search();if(jQuery.isEmptyObject(i))return void this.initializeContainer();var o,r,a,n,s,c,l=i[e.constants.invitation.invitationCodeQueryParam],d=i[e.constants.invitation.invitationCodeQueryParamV2];if(_.isEmpty(l)){if(_.isEmpty(d))return void this.initializeContainer();try{var p=decodeURIComponent(d),u=JSON.parse(atob(p));o=u.tenantId,r=u.code,a=u.redirectedFromSignup,n=u.extShare,s=u.dashboardId,c=jsCommon.QueryStringUtil.addOrUpdateQueryString(e.constants.invitation.invitationCodeQueryParamV2,d)}catch(e){return void this.initializeContainer()}}else{var v=decodeURIComponent(l),h=v.split("|");if(h.length<2)return void this.initializeContainer();o=h[0],r=h[1],a=_.any(h,(function(e){return"redirectedFromSignup"===e})),n=_.any(h,(function(e){return"extshare"===e}));var g=_.without(h,"extshare").join("|");c=jsCommon.QueryStringUtil.addOrUpdateQueryString(e.constants.invitation.invitationCodeQueryParam,g)}if(n&&"/invite"!==this.$location.path()&&(location.href="/invite"+c),_.isEmpty(r))_.isEmpty(s)?this.initializeContainer():this.initializeContainer(void 0,s);else{var m=this.telemetryService,f=m.startEvent(e.telemetry.DashboardClaimInvitation,"",r);this.invitationService.claimInvite(o,r,a,f.event).then((function(i){var o=parseInt(i.data,10),a=window.location;t.isAllowedMobileUserAgent()&&!n&&(m.logEvent(e.telemetry.DashboardClaimInvitationRedirectToMobileLandingPage,navigator.userAgent,r),window.location.href=a.protocol+"//"+a.host+"/mobilelandingpage"+a.search),t.initializeContainer(o);var s=t.dashboardContainerModel.findDashboard(o);f.event.info.dashboardGuid=s?s.objectId:"",f.resolve()}),(function(i){var o=i.headers(e.common.PowerBIErrorHeader);if(o===e.constants.quotaErrorCodes.PowerBIUserQuotaExceeded||o===e.constants.quotaErrorCodes.PowerBIGroupQuotaExceeded){var r=o===e.constants.quotaErrorCodes.PowerBIUserQuotaExceeded,a=t.storageUsageService;a.showQuotaExceedDialog();var n=a.getUsage(t.dashboards);m.logEvent(e.telemetry.QuotaExceeded,t.userInfo.isPremiumUser,r?e.telemetry.QuotaOpenManageStorageContext.Personal:e.telemetry.QuotaOpenManageStorageContext.Group,e.telemetry.QuotaCheckOperation.AcceptInvitation,n.ownedUsage,n.sharedUsage,a.quotaLimitInMB)}else{var s=o||"DashboardInvitationInvalidRequest";t.localizationService.ensureLocalization((function(){var i=t.localizationService.get(s);t.errorService.error(i,"DashboardInvitationInvalidRequest",{title:t.localizationService.get("DashboardInvitationErrorTitle")},!1,e.telemetry.ErrorSource.PowerBI),f.reject({errorCode:s,errorSource:"DashboardInvitationInvalidRequest"!==s?e.telemetry.ErrorSource.User:e.telemetry.ErrorSource.PowerBI})}))}t.initializeContainer()})).finally((function(){t.rootScope.$emit(e.constants.invitation.invitationClaimed)}))}},f.prototype.navigateToActiveDashboard=function(t,i,o,r,a){var n=this,c={deferEmitDashboardContainerLoadedEvent:!1},l=this.dashboardContainerModel;if(_.isEmpty(l.visibleDashboards)&&!this.permissionService.isActiveWorkspaceIsReadOnly)return this.setupNavigationWhenNoDashboardExists(),c;var d=l.findDashboard(t.activeDashboardId),p=this.featureSwitchService.featureSwitches.appsEnabled,u=d,h=void 0!==o?l.findDashboard(o):l.findDashboardByGUID(r),g=this.navigation,m=g.currentDashboardGUID,f=g.currentReportGUID,y=g.currentWorkbookURLIdentifier,b=g.currentDatasetDBName,S=p&&g.currentAppGUID,w=p&&g.currentAppInstanceId,C=p&&g.currentDashboardOriginalGUID,D=!0;if(this.featureSwitchService.featureSwitches.permissionCenterEnabled&&g.inManagePermissionsView())return this.permissionDataService.setActivePermissionArtifact(g.permissionArtifactType,g.permissionArtifactGUID).then((function(e){g.navigateToManagePermissions(g.permissionArtifactType,g.permissionArtifactGUID)})),c;if(h)u=h;else if(m||S&&C){_.isEmpty(m)&&p&&(m=this.retriveDashboardGUIDForAppDashboard(S,C)),D=!1;var I=l.findDashboardByGUID(m);if(I){u=I;var T=g.currentTileGUID,M=g.currentTileOriginalGUID;if(g.inInFocusView()||g.inInFocusInsightsView()||g.inAlertsEditorView()){var E=u.findTileByObjectIdOrOriginalObjectId(T,M);E&&this.selectDashboardTile(new s(E))}}else{if(this.shouldNavigateToRequestAccess())return g.navigateToRequestDashboardAccessByGUID(m,v.Replace),this.updateActiveDashboard(null),c;a||e.controllers.DashboardContainerController.showDashboardDoesNotExistDialog(this.errorService,this.localizationService,this.telemetryService,g)}}else f?(D=!1,this.licenseEnforcementService.checkUserLicenseSupportsReportAndDisplayError(f).then((function(e){e&&n.navigateToReportPage()}))):!y||g.inAppView()&&!p?S&&g.inAppDetailView()?D=!!g.inAppInstanceView()&&!!w:b&&(D=!1,this.licenseEnforcementService.checkUserLicenseSupportsDatasetAndDisplayError(b).then((function(t){t&&(g.inQnaModelView()?g.replaceHistoryWithDatasetAndNavigate(g.currentDatasetDBName,e.constants.navigation.states.modelQna,{q:g.qnaQuery}):n.navigateToDatasetPage())}))):D=!1;if(!u)return c;if(D=a||D&&(m!==u.objectId||!g.inDashboardDetailView())){if(this.tryToNavigateToNonDashboard(u,o,p,S))return c;if(this.shouldShowConceptualModel()){if(!o||!u||u.objectId===this.home.homeDashboard.dashboardObjectId)return this.readyForConceptualModelInitializationDeferred.resolve(null),c.deferEmitDashboardContainerLoadedEvent=!0,c;this.navigationToDashboard(o,u)}else this.home.homeDashboard.dashboardId===o?g.navigateToHomeDashboard(!0):this.navigationToDashboard(o,u)}else this.checkUserNeedsProLicenseAndShowError(u,this.userInfo,this.licenseHelperService,this.licenseEnforcementService,this.localizationService,g,e.telemetry.LicenseEnforcementOperation.InitialDashboardLoad);return this.dashboardDataService.activeDashboard=u,this.groupService.activeGroup&&(this.groupService.activeGroup.lastViewedDashboard=u?u.id:-1),this.setAndUpdateActiveDashboard(u),c},f.prototype.tryToNavigateToNonDashboard=function(t,i,o,r){var a=this,n=this.navigation;if(n.inGetDataView())return!0;if(n.inQnaView())return n.replaceHistoryWithDashboardAndNavigate(t.objectId,e.constants.navigation.states.dashboardQna,{q:n.qnaQuery}),!0;if(n.inInsightsView())return n.replaceHistoryWithDashboardAndNavigate(t.objectId,e.constants.navigation.states.insights,{dataGUID:n.insightsDataGUID}),!0;if(n.inManageStorageView())return this.navigateToManageStoragePage(t.objectId),!0;if(n.inSettingsView())return n.showSettingsSlider(n.settingsGroupType,n.settingsId),!0;if(n.inGatewaysView())return!0;if(n.inFavoritesView())return n.navigateToFavorites(this.groupService.activeGroupObjectId),!0;if(n.inRecentlyViewedView())return n.navigateToRecentlyViewed(),!0;if(n.inAppsDetailView()&&o)return n.navigateToApps(),!0;if(n.inExtendTrial())return this.licenseHelperService.displayDialogToExtendTrial(e.telemetry.LicenseEnforcementOperation.EmailLink),!0;if(this.shouldShowConceptualModel()&&n.inManageDatasetView())return n.navigateToDatasets(),!0;if(this.shouldShowConceptualModel()&&n.inManageStreamingDatasetView())return n.navigateToStreamingDatasets(0),!0;if(this.shouldShowConceptualModel()&&n.inContentListView())return n.navigateToContentList(n.currentGroupGUID),!0;if(this.shouldShowConceptualModel()&&n.inReportDetailView()){var s=n.currentReportGUID,c=n.currentReportOriginalGUID;return _.isEmpty(s)&&o&&(s=this.retriveGUIDForAppReport(r,c)),n.initialLoadReportByGUID(s,c,n.currentReportPage),!0}return n.inAdminPortalView()&&this.userInfo?(this.userInfo.userMetadataPromise.then((function(o){o.isTenantAdmin?n.replaceHistoryWithGroupWelcomeAndNavigate(t.objectId,e.constants.navigation.states.adminPortal,{}):a.navigationToDashboard(i,t)}),(function(){a.navigationToDashboard(i,t)})),!0):!!n.inManageEmbedView()&&(this.navigateToManageEmbedPage(t.objectId),!0)},f.prototype.retrieveDashboardForApp=function(e,t){return _.find(this.dashboards,(function(i){return i.contract.originalPackageId===e&&i.contract.originalDashboardObjectId===t}))},f.prototype.retriveDashboardGUIDForAppDashboard=function(e,i){var o=t.getPackageIDByOrgAppGUID(this.appService,this.packageService,e),r=this.retrieveDashboardForApp(o,i);if(r)return r.contract.objectId},f.prototype.retriveGUIDForAppReport=function(e,i){var o=t.getPackageIDByOrgAppGUID(this.appService,this.packageService,e),r=this.reportService.retrieveReportForApp(o,i);
if(r)return r.contract.objectId},f.prototype.navigationToDashboard=function(t,i){var o=this;if(t){var r=this.licenseEnforcementService.dashboardHasProFeatures(i.contract);this.userInfo.userMetadataPromise.then((function(){!o.userInfo.isPremiumUser&&r&&o.licenseHelperService.displayFeatureDisabledErrorMessage(e.telemetry.LicenseEnforcementOperation.ShareDashboard,o.localizationService.format("UpgradeAccount_ShareDashboardMessage",[""+o.licenseHelperService.freeTrialPeriod]),o.localizationService.format("UpgradeAccount_ShareDashboardTitle",[i.displayName]))}))}this.navigation.insertGroupAndNavigateToDashboardByGUID(i.objectId,this.groupService.activeGroupObjectId,e.services.LocationOptions.Replace)},f.prototype.navigateToActiveDashboardAfterGroupSwitch=function(i,o,r){var a=this.dashboardContainerModel.findDashboard(o);if(a&&a.isHidden&&(a=null),a||(r&&e.controllers.DashboardContainerController.showDashboardDoesNotExistDialog(this.errorService,this.localizationService,this.telemetryService,this.navigation),_.isEmpty(this.dashboardContainerModel.visibleDashboards)||(a=this.dashboardContainerModel.visibleDashboards[0])),this.setAndUpdateActiveDashboard(a),a){var n=this.navigation.currentTileGUID,s=this.navigation.currentTileOriginalGUID,c=a.objectId,l=a.contract;if(this.navigation.inAlertsEditorView())this.navigation.showAlertsEditor(n,s,this.navigation.currentAlertId,c,this.groupService.activeGroupObjectId);else if(this.navigation.inInFocusView())this.navigation.showInFocusMode(n,s,c,l.originalDashboardObjectId,this.groupService.activeGroupObjectId);else if(this.navigation.inInFocusInsightsView())this.navigation.showInsightsInFocusMode(n,s,c,this.groupService.activeGroupObjectId);else if(this.home.isHomeDashboardSet&&a.id===this.home.homeDashboard.dashboardId)this.navigation.insertGroupAndNavigateToDashboardByGUID(this.home.homeDashboard.dashboardObjectId,this.home.homeDashboard.groupId,e.services.LocationOptions.False);else{var d=t.getDashboardAppGUID(l,this.appService);d&&this.featureSwitchService.featureSwitches.appsEnabled?this.navigation.navigateToAppDashboardByGUID(c,l.originalDashboardObjectId,d,this.groupService.activeGroupObjectId):this.navigation.replaceAndLoadCurrentState(e.constants.navigation.states.dashboard,{groupGUID:this.groupService.activeGroupObjectId,dashboardGUID:a.objectId})}}else this.dashboardContainerModel.dashboards.length>0||this.groupService.isDataInCurrentGroup()?this.navigation.replaceAndLoadCurrentState(e.constants.navigation.states.dashboards,{groupGUID:this.groupService.activeGroupObjectId}):this.navigation.replaceAndLoadCurrentState(e.constants.navigation.states.groupWelcome,{groupGUID:this.groupService.activeGroupObjectId})},f.prototype.navigateToDatasetPage=function(){this.exploreCompatibilityContainerLoaded&&!this.navigation.inQnaModelView()?this.navigation.initialLoadDatasetByDBName(this.navigation.currentDatasetDBName):this.deferredDatasetUrlLoad=!0},f.prototype.navigateToManageStoragePage=function(t){var i=!0;this.groupService.activeGroup&&(i=this.groupService.activeGroup.isMyWorkspace),this.telemetryService.logEvent(e.telemetry.QuotaOpenManageStoragePage,e.telemetry.QuotaOpenManageStorageInteraction.DirectUrl,i?e.telemetry.QuotaOpenManageStorageContext.Personal:e.telemetry.QuotaOpenManageStorageContext.Group),this.navigation.replaceHistoryWithDashboardAndNavigate(t,e.constants.navigation.states.manageStorage,{groupGUID:this.groupService.activeGroupObjectId})},f.prototype.navigateToManageEmbedPage=function(t){this.navigation.replaceHistoryWithDashboardAndNavigate(t,e.constants.navigation.states.manageEmbed,{groupGUID:this.groupService.activeGroupObjectId})},f.prototype.navigateToReportPage=function(){this.exploreCompatibilityContainerLoaded?this.navigation.initialLoadReportByGUID(this.navigation.currentReportGUID,this.navigation.currentReportPage):this.deferredReportUrlLoad=!0},f.prototype.onGroupSwitched=function(t,i){var o=this;this.updateGroupsAppMetadata(t);var r=this.navigation,a=r.currentReportGUID,n=r.currentWorkbookURLIdentifier,s=r.currentDatasetDBName,c=r.currentDashboardGUID;if(c){var l=this.findDashboardByGUID(c);l&&l.id?this.navigation.inSharingView()?this.timeout((function(){o.navigateToShareDashboard(c)})):this.navigateToActiveDashboardAfterGroupSwitch(t,l.id):a||n||s||(this.mostRecentlyUsedService.removeMRU(c),e.controllers.DashboardContainerController.showDashboardDoesNotExistDialog(this.errorService,this.localizationService,this.telemetryService,this.navigation),this.navigateToActiveDashboardAfterGroupSwitch(t,this.groupService.activeGroup.lastViewedDashboard))}else a||n||s||(this.shouldShowConceptualModel()||this.shouldStayOnCurrentState()?i?this.navigateToActiveDashboardAfterGroupSwitch(t,this.groupService.activeGroup.lastViewedDashboard,i):this.shouldStayOnCurrentState()||this.navigation.replaceAndLoadCurrentState(e.constants.navigation.states.contentList,{groupGUID:r.currentGroupGUID}):this.navigateToActiveDashboardAfterGroupSwitch(t,this.groupService.activeGroup.lastViewedDashboard,i));this.userInfo.userMetadataPromise.then((function(e){o.mergeDashboardOwnerInfo(e)}))},f.prototype.shouldStayOnCurrentState=function(){return this.navigation.inFavoritesView()||this.navigation.inRecentlyViewedView()},f.prototype.setupNavigationWhenNoDashboardExists=function(){if(!this.navigation.inGetDataView())if(this.navigation.inManageStorageView())this.navigateToManageStoragePage(null);else if(this.navigation.inManageEmbedView())this.navigateToManageEmbedPage(null);else if(this.navigation.inSettingsView())this.navigation.showSettingsSlider(this.navigation.settingsGroupType,this.navigation.settingsId);else{if(this.navigation.inGatewaysView())return;if(this.navigation.inFavoritesView())this.navigation.navigateToFavorites(this.groupService.activeGroupObjectId);else if(this.navigation.inExtendTrial())this.licenseHelperService.displayDialogToExtendTrial(e.telemetry.LicenseEnforcementOperation.EmailLink);else if(_.isEmpty(this.reportService.copyAndEditReports)&&_.isEmpty(this.modelService.copyAndEditModels)&&_.isEmpty(this.workbookService.copyAndEditWorkbooks)&&!this.viralTenantMergeHelperService.viewingDataFromMergedViralTenant()&&window.initialDashboardContainer&&jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(window.initialDashboardContainer.previousTenantId)){var t=this.featureSwitchService.featureSwitches;this.shouldNavigateToRequestAccess()?this.navigation.navigateToRequestDashboardAccessByGUID(this.navigation.currentDashboardGUID):t.ignoreGettingStartedPopups?this.navigation.navigateToContentListOrActiveDashboard():this.navigation.replaceHistoryWithGroupWelcomeAndNavigate(this.groupService.activeGroupObjectId,e.constants.navigation.states.getDataCategory,{groupGUID:this.groupService.activeGroupObjectId,categoryName:e.constants.navigation.getDataWelcome})}else if(this.navigation.inReportView())this.navigateToReportPage();else if(this.navigation.inDatasetView())this.navigateToDatasetPage();else{if(this.navigation.inWorkbookView())return;this.navigation.navigateToContentListOrActiveDashboard()}}},f.prototype.shouldNavigateToRequestAccess=function(){return(this.navigation.inDashboardDetailView()||this.navigation.inRequestDashboardAccessView())&&window.initialDashboardContainer&&window.initialDashboardContainer.accessRequestInfo&&window.initialDashboardContainer.accessRequestInfo.dashboardObjectId&&window.initialDashboardContainer.accessRequestInfo.dashboardObjectId===this.navigation.currentDashboardGUID},f.prototype.shouldShowConceptualModel=function(){return this.featureSwitchService.featureSwitches.conceptualModelEnabled||this.featureSwitchService.featureSwitches.previewConceptualModel&&this.tutorialDataStore.hasKey(i.previewConceptualModelNewKey)},f.prototype.updateDashboard=function(){var e=this.findDashboardByGUID(this.navigation.currentDashboardGUID);e&&!e.isFilled()&&(this.modelConverter.fillDashboardChildren(e,this.dashboardContainerModel.contract.models,this.reportService.getReportContracts(),this.workbookService.workbooks),e.calculateLayout(),e.applyLayout())},f.prototype.updateDashboardContainer=function(t){if(t){for(var i=this.dashboardContainerModel,o=i.contract,r=this.modelConverter,a=function(i,a){var s=t[i],c=s.dashboards[0],l=c.id,p=n.findDashboard(l);p.contract=c,n.modelMerger.mergeDashboard(p,c,s.models,s.reports,s.workbooks),p.contract.cached&&!c.cached&&(p.contract.cached=!1);var u=t[i].packages||[],v=t[i].models||[];if(r.setDashboardIsSample(p,u),r.setDashboardHasOnPremiseModel(p,v),p.contract.tiles){var h=t[i].reports||[];p.contract.tiles.map((function(e){r.resolveTilePackage(e,u)}));for(var g=0;g<p.tiles.length;g++){var m=p.tiles[g];m.invalidateLayout();var f=r.getTileReport(m.contract.reportId,h);f&&(m.report=m.report||new d(f),r.fillReport(m.report,f))}}p.isLoaded=!0,e.contracts.mergeDashboardContainerModelsReportsAndPackages(s,o),n.reportService.mergeReportCollection(s.reports),n.modelService.mergeDatasetCollection(s.models),n.packageService.mergePackageCollection(s.packages),n.workbookService.mergeWorkbookCollection(s.workbooks)},n=this,s=0,c=t.length;s<c;s++)a(s,c);var l=this.modelMerger;l.mergeModelContentProviderId(o.models,o.packages),this.updateDashboard(),this.dashboardDataService.updateActiveDashboardModels()}var p=t.map((function(e){return e.dashboards[0]})),u=_.find(p,(function(e){return t[0].activeDashboardId}));this.syncService.monitorDashboards(u?[u]:[],t[0].userDashboardListVersion)},f.prototype.notifyForAddTile=function(t,i){var o=void 0===t?this.dashboardDataService.activeDashboard:this.dashboardDataService.findDashboard(t),r=o.contract,a=this.dashboardHttpService;if(o.getPermissions()===n.CopyOnWrite)return void this.rootScope.$emit(e.constants.personalizeEventName,o.contract.originalPackageId);if(e.dataServices.DashboardUtils.isWriteable(r)){if(!this.storageUsageService.checkQuotaExceeded(this.dashboards,e.telemetry.QuotaCheckOperation.AddTile,!0))return this.notificationToastService.notify({title:i?this.localizationService.get("PinLiveReport_NotificationMessage"):this.localizationService.get("PinTile_Success"),message:this.localizationService.get("PinTile_Success_DefaultDetails")})}else a.notifyReadOnly(r.id,!0)},f.prototype.pinTileWithoutNotification=function(t){if(!this.storageUsageService.checkQuotaExceeded(this.dashboards,e.telemetry.QuotaCheckOperation.AddTile)){var i=this.dashboardContainerModel,o=t.report;if(o){var r=this.reportService.findReport(o.id);r||(r=this.modelConverter.convertReport(o),this.reportService.addReport(r))}var a,n=this.modelConverter.convertTile(t.tile,i.contract.models,this.reportService.getReportContracts(),this.workbookService.getWorkbookContracts());t.showNotification&&(a=this.notifyForAddTile(t.dashboardId,t.isLiveReport));var c=null!=t.dashboardId?this.findDashboard(t.dashboardId):this.dashboardDataService.activeDashboard;if(c)if(n.contract.resourcePackageIds&&this.resourcePackageGateService.addResourcePackageIdToDashboard(c.objectId,n.contract.resourcePackageIds),this.addTileToDashboard(n,c),t.isTemporaryTile){var l=new s(n);this.selectDashboardTile(l),this.rootScope.$emit(e.constants.temporaryTilePinned)}else this.saveTile(n,c,t.parentEvent,a)}},f.prototype.addTileToDashboard=function(e,t){var i=t.contract;i.tiles||(i.tiles=[]);var o=t.tiles;if(e.contract.id=this.temporaryTileId--,i.tiles.push(e.contract),e.report&&e.report.id&&i.reportIds){var r=i.reportIds.indexOf(e.report.id);r===-1&&i.reportIds.push(e.report.id)}if(e.contract&&e.contract.workbookId&&i.workbookIds){var a=e.contract.workbookId,n=i.workbookIds.indexOf(a);n===-1&&i.workbookIds.push(a)}o.push(e),t.calculateLayout(),t.applyLayout()},f.prototype.saveTemporaryTile=function(e,t){this.saveTile(e,this.dashboardDataService.activeDashboard,t)},f.prototype.saveTile=function(t,i,o,r){var n=this;this.dashboardHttpService.addTile(i.contract,t.contract,this.dashboardContainerModel.contract.models,this.reportService.getReportContracts(),o.event).then((function(r){t.id=t.contract.id=r.data.id,t.contract.objectId=r.data.objectId,t&&t.contractsModel&&r&&r.data&&r.data.model&&(t.contractsModel.vsName=t.contractsModel.vsName||r.data.model.vsName,t.contractsModel.dbName=t.contractsModel.dbName||r.data.model.dbName),t.contract.workbookId&&n.dashboardSyncService.onTilesAddedOrUpdated(i.contract.id,[t.id]),t.invalidateLayout();var a=!!t.contract.modelId&&!_.any(i.tiles,(function(e){return e.contract.modelId===t.contract.modelId&&e!==t}));a&&n.updateDashboardToken(i),i&&(i.isUsedByContentPack&&n.rootScope.$emit(e.constants.contentPackDirtyShowNotification,i.id,e.dataServices.models.ContentPackItems.Dashboard),jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(t.utterance)||n.sampleQuestionsService.addTileUtterance(t.utterance,t.contract.modelId)),o.resolve()}),(function(s){var c,l;s.status===e.HttpStatusCode.RequestEntityTooLarge?(c=n.localizationService.get("PinTile_Error_TooLarge"),l=n.localizationService.get("PinTile_Error_TooLargeDetails")):(c=n.localizationService.get("PinTile_Error"),l=n.localizationService.get("PinTile_Error_DefaultDetails")),r&&n.notificationToastService.hide(r),n.notificationToastService.notify({title:c,message:l,notificationType:e.common.NotificationToastType.Error}),n.removeTileFromDashboard(t,i),o.reject(a.getTelemetryErrorDetails(s.error))}))},f.prototype.updateDashboardToken=function(e){var t=this,i=this.promiseFactory.defer();return this.dashboardHttpService.getDashboards(this.promiseFactory,[e.id]).then((function(o){var r=o[0].data;r&&(t.modelMerger.mergeDashboardShallow(e,r.dashboards[0]),t.dashboardDataService.updateActiveDashboardModels(),i.resolve(null))}),(function(){return i.reject()})),i.promise},f.prototype.removeTemporaryTile=function(e){this.removeTileFromDashboard(e,this.dashboardDataService.activeDashboard)},f.prototype.navigateToShareDashboard=function(t){var i=this;if(this.viralTenantMergeHelperService.viewingDataFromMergedViralTenant())this.viralTenantMergeHelperService.displayFeatureDisabledErrorMessage("ArchivedContent_ErrorMessageSharing");else if(this.storageUsageService.checkQuotaExceeded(this.dashboards,e.telemetry.QuotaCheckOperation.ShareDashboard))return;this.checkUserNeedsProLicenseAndShowError(this.dashboardContainerModel.findDashboardByGUID(t),this.userInfo,this.licenseHelperService,this.licenseEnforcementService,this.localizationService,this.navigation,e.telemetry.LicenseEnforcementOperation.ShareDashboard).then((function(t){t||i.rootScope.$emit(e.constants.showTaskPaneSlider,u.SharingPane,o.Large)}))},f.prototype.checkUserNeedsProLicenseAndShowError=function(e,t,i,o,r,a,n,s,c){void 0===s&&(s=null),void 0===c&&(c=null);var l=this.promiseFactory.defer();return t.userMetadataPromise.then((function(){!t.isPremiumUser&&e&&o.dashboardHasProFeatures(e.contract)&&(i.displayFeatureDisabledErrorMessage(n,r.format("UpgradeAccount_ShareDashboardMessage",[""+i.freeTrialPeriod]),r.format("UpgradeAccount_ShareDashboardTitle",[e.displayName])),jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(s)||c&&!o.dashboardHasProFeatures(c.contract)&&a.navigateToDashboardByGUID(s),l.resolve(!0)),l.resolve(!1)})),l.promise},f.prototype.removeTileFromDashboard=function(e,t){var i=t.contract.tiles,o=_.findIndex(i,{id:e.id});o!==-1&&i.splice(o,1);var r=t.tiles,a=r.indexOf(e);a!==-1&&r.splice(a,1)},f.prototype.isDashboardNameValid=function(e,t){return!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(e)},f.prototype.beforeDashboardDeletingHandler=function(e){this.navigateAfterDashboardDelete(this.dashboardContainerModel,e)},f.prototype.afterDashboardDeletingHandler=function(t){this.tryResetHome(t),this.navigation.inFavoritesView()&&this.rootScope.$emit(e.constants.updateFavorites)},f.prototype.isAlertingEnabled=function(){return!0},f.prototype.isInFocusModeEnabled=function(){return!0},f.updateActiveDashboardDelayMs=500,f.refreshTileDataDelayMs=500,f.loadDashboardTimeout=3e4,f})();e.DashboardService=f})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,o,r,a,n,s,c){return new i(e,t,o,r,a,n,s,c)}e.createPublishedAppService=t;var i=(function(){function t(e,t,i,o,r,a,n,s){this.promiseFactory=e,this.contentPackService=t,this.errorService=i,this.localizationService=o,this.modelConverter=r,this.notificationToast=a,this.publishAppHttpService=n,this.appService=s,this.publishedApps=[],this.publishedAppsDeferred=e.defer(),this.loadPublishedApps()}return t.prototype.addPublishedApp=function(e){this.findPublishedApp(e.objectId)||this.publishedApps.push(e)},t.prototype.findPublishedApp=function(e){return _.find(this.publishedApps,(function(t){return t.objectId===e}))},t.prototype.getPublishedAppsPromise=function(){var e=this;return this.publishedAppsDeferred.promise.then((function(){return e.publishedApps}))},t.prototype.deletePublishedApps=function(t){var i=this,o=this.promiseFactory.defer(),r=this.errorService.control(),a=[new InJs.ModalDialogAction(this.localizationService.get("ModalDialogButtonText_Remove"),function(a,n){r.hideDialog();var s=i.notificationToast.notify({message:i.localizationService.get("ContentList_Apps_Remove_App_Notification"),notificationType:e.common.NotificationToastType.Loading});i.contentPackService.deleteContentPackRequest(t).then((function(){var e=_.find(i.publishedApps,(function(e){return e.contract.providerKey===t}));e&&_.pull(i.publishedApps,e),o.resolve(null)}),(function(){o.reject()})).finally((function(){i.notificationToast.hide(s)}))}),new InJs.ModalDialogAction(this.localizationService.get("PBI_Button_Label_Cancel"),function(e,t){r.hideDialog()})],n=this.localizationService.get("ContentList_Apps_Remove_App_Title"),s=this.localizationService.get("ContentList_Apps_Remove_App_Description");return r.showCustomDialog(n,angular.element("<div/>").text(s),a,(function(e){e.parent().find('input[value="'+i.localizationService.get("PBI_Button_Label_Cancel")+'"]').focus()}),!0),o.promise},t.prototype.publishOrUpdateApp=function(e,t){return t.objectId?this.publishAppHttpService.updateApp(e,t):this.publishAppHttpService.publishApp(e,t)},t.prototype.loadPublishedApps=function(){var e=this,t=this.appService;this.contentPackService.contentPackPromise.then((function(i){var o=_.filter(i,(function(e){return t.isAppCategory(e.contract.category)}));e.publishedApps=o.map((function(t){return e.modelConverter.convertAppPublishModel(t.contract)})),e.publishedAppsDeferred.resolve(e.publishedApps)}),(function(){e.publishedAppsDeferred.reject()}))},t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,i,r,a,n,s){return new o(e,t,i,r,a,n,s)}var i=e.dataServices.contracts.TileType;e.createEsriService=t;var o=(function(){function t(e,t,i,o,r,a,n){this.featureSwitchService=e,this.userSettingsService=t,this.esriExplorationService=i,this.telemetryService=o,this.dashboardService=r,this.navigation=a,this.promiseFactory=n}return t.prototype.dashboardContainsEsriVisual=function(t){for(var o=0,r=t.tiles;o<r.length;o++){var a=r[o];if(a.type===i.composite&&a.config&&a.config.visual&&a.config.visual.visual===e.visualHost.EsriVisual)return!0}return!1},t.prototype.reloadEsriDashboardContext=function(e,t,i){var o=this;if(!this.esriExplorationService.esriVisualAllowed())return this.promiseFactory.resolve(!1);var r=this.promiseFactory.defer();return!this.navigation.inGetDataView()&&this.dashboardContainsEsriVisual(t.viewModel)?this.addRemovePlugin(e,i?t:void 0).then((function(e){o.dashboardService.loadDashboard(t.viewModel.id),r.resolve(e)})):r.resolve(!1),r.promise},t.prototype.reloadEsriExplorationContext=function(e,t,i){if(!this.esriExplorationService.esriVisualAllowed())return this.promiseFactory.resolve(!1);var o=this.promiseFactory.defer();return this.addRemovePlugin(e,i?t:void 0).then((function(e){o.resolve(e)})),o.promise},t.prototype.addRemovePlugin=function(e,t){var i=this;return this.deleteEsriPlugin(e),this.userSettingsService.getUserSettings().then((function(o){return o.esriVisualEnabled?e.ensureThirdPartyPlugins().then((function(){return i.promiseFactory.resolve(!0)})):t?i.esriExplorationService.showEsriConsentDialog(t).then((function(t){return t?e.ensureThirdPartyPlugins().then((function(){return i.updateEsriSetting(t).then((function(){return i.promiseFactory.resolve(!0)}))})):i.promiseFactory.resolve(!1)})):i.promiseFactory.resolve(!1)}))},t.prototype.getEsriVisualEnabled=function(){var e=this.promiseFactory.defer();return this.userSettingsService.getUserSettings().then((function(t){t?e.resolve(t.esriVisualEnabled):e.reject()})),e.promise},t.prototype.updateEsriSetting=function(t){var i=this,o=this.promiseFactory.defer(),r=this.telemetryService.startEvent(e.telemetry.SettingsEsriSaveModel,t);return this.userSettingsService.updateEsriSetting(t,r).then((function(){i.userSettingsService.refreshUserSettings(),r.resolve(),o.resolve(t)})),o.promise},t.prototype.deleteEsriPlugin=function(t){var i=t.getStorage();i.hasPlugin(e.visualHost.EsriVisual)&&i.getLoadedPlugin(e.visualHost.EsriVisual)&&(i.unloadPlugin(e.visualHost.EsriVisual),e.visuals.plugins[e.visualHost.EsriVisual]=null)},t})(),r=(function(){function e(e){this.promiseFactory=e}return e.prototype.dashboardContainsEsriVisual=function(e){return!1},e.prototype.getEsriVisualEnabled=function(){return this.promiseFactory.resolve(!1)},e.prototype.updateEsriSetting=function(e){return this.promiseFactory.resolve(!1)},e.prototype.reloadEsriDashboardContext=function(e,t,i){return this.promiseFactory.resolve(!1)},e.prototype.reloadEsriExplorationContext=function(e,t,i){return this.promiseFactory.resolve(!1)},e.prototype.deleteEsriPlugin=function(e){},e})();e.MockEsriService=r})(powerbi||(powerbi={}));var common=powerbi.common,HostEnv=powerbi.common.HostEnv,services=powerbi.services;angular.module("powerbi.components",[]),angular.module("powerbi.controllers",[]),angular.module("powerbi.directives",[]),angular.module("powerbi.filters",[]);var modules=["angularFileUpload","powerbi.common","powerbi.common.directives","powerbi.connectivity","powerbi.components","powerbi.controllers","powerbi.directives","powerbi.filters","powerbi.visualHost","powerbi.dataServices","ui.router","ngSanitize"];powerbi.explore&&(modules.push("powerbi.explore"),modules.push("powerbi.infonav")),powerbi.insights&&modules.push("powerbi.insights"),powerbi.settings&&(modules.push("powerbi.settings"),modules.push("powerbi.settings.components")),powerbi.rowLevelSecurity&&modules.push("powerbi.rowLevelSecurity"),powerbi.userNotifications&&modules.push("powerbi.userNotifications"),powerbi.permissions&&modules.push("powerbi.permissions");var powerbiDirectivesDefinition=[{name:"AlertsEditor",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"AppArtifactsList",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"AppChannelHeader",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"AppContainer",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"AppLogo",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"AppsContainer",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"BackgroundImage",dependencies:["localizationService"],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"Breadcrumbs",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"CollapsiblePane",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"CompositeTile",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"ContentListContainer",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"ContentListContainerV2",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"ContentListGallery",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"ContentProvider",dependencies:["$timeout"],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ContentProviderChildTile",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ContentProviderConfiguration",dependencies:["$timeout","$window","$rootScope","localizationService","navigation","contentProviderService"],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ContentProviderEventTile",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ContentProviderLinkTile",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ContentProviderLocalFile",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ContentProviderLocalFileTile",dependencies:["localFileService","quota","promiseFactory"],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ContentProviderNormalTile",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ContentProviderSplash",dependencies:["telemetryService","navigation"],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ContentProviderStore",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ContentProviderTileBody",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ContentProviderTileBrowser",dependencies:["$timeout","$window","navigation","telemetryService","localizationService","viralTenantMergeHelperService","userInfo","licenseHelperService","quota","contentProviderService","rtl","windowMetrics"],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ContentDatasetActions",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"ContentTile",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"ContentRow",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"ContentHeader",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"ContentRowContainer",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"ContentTileContainer",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"ContentTileOptionsMenu",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"ContextMenu",dependencies:["rtl","windowMetrics"],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"CreateAppChannel",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"CreateAppChannelAccess",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"CreateAppChannelContent",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"CreateAppChannelDetails",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"CreateGroupBlade",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"EditGroupBlade",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"ViewGroupBlade",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"CustomValidator",dependencies:["$timeout"],blockType:1,consumerHostFlags:HostEnv.Web},{name:"CustomValidatorSynchronizer",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"Dashboard",dependencies:["telemetryService","gridLayout","userActivityContextService","appService"],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"DashboardContainer",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"DashboardEditMobileDisplay",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"DashboardNavigationPaneListItem",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"DashboardPane",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"DashboardPrinter",dependencies:["$rootScope","$compile","featureSwitchService","localizationService"],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"DashboardTile",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"DashboardTileList",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"DashboardTileOpenOptions",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"DashboardTileOptionsMenu",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"ClassificationLabel",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"DatasetIconContainer",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"DatasetNavigationPaneListItem",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"DevToolsView",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"EditIframeWidget",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"EditImageWidget",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"EditTextWidget",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"EditVideoWidget",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ErrorPlaceholder",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"ExcelUploadFormat",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ExplorationContainer",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.ExploreHost|HostEnv.StandaloneReportHost},{name:"ExploreCanvasPrinter",dependencies:["$rootScope","$compile","featureSwitchService","localizationService"],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ExploreCompatibilityContainer",dependencies:["$window"],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.ExploreHost|HostEnv.StandaloneReportHost},{name:"ExportDataDialog",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web|HostEnv.ExploreHost|HostEnv.StandaloneReportHost},{name:"FavoritesContainer",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"FullScreenControls",dependencies:["fullScreen","navigation"],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"GroupActions",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"GroupIcon",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"GroupList",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"GroupNavigationPaneListItem",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"GroupSwitcher",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"GroupSwitcherV2",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"HistoryDialog",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"IframeTile",dependencies:["$window","networkAvailability","localizationService"],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"ImageTile",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"InFocus",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"Insights",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"LandingContainer",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"LoadNotificationDialog",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"LocalFileBrowser",dependencies:["localizationService","errorService","featureSwitchService","$timeout"],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ManageDatasets",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ManageEmbedView",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ManageStorageView",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"MarketplaceHost",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"MetadataContainer",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"ModelTile",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost
},{name:"NavigationBar",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"NavigationPane",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"NavigationPaneV2",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"NpsHost",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"O365ApplicationLauncher",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"OnLoad",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"PbiDataLoaderSpinner",dependencies:["localizationService","$timeout"],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"PinTileDialog",dependencies:["$timeout"],blockType:1,consumerHostFlags:HostEnv.Web},{name:"PreviewFeaturesModal",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"PreviewFeedbackModal",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"PrintableImage",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"ProviderTile",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"PublishContentPackView",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"PublishTenantContentPackView",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"PubNubEditor",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"QnaContainer",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"QrCodeDialog",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"QrCodeProgressDialog",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"RealTimeBlade",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"RealTimeTile",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"RealTimeTileVisualizationDesign",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"RecentlyViewedContainer",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"RefreshStatus",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"RefreshWelcome",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ReportNavigationPaneListItem",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ReportTile",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"RequestDashboardAccess",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"RequestDashboardAccessModal",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"RowLevelSecurity",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SelectButton",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"SelectTileFilter",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"SelectArtifactFilter",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"SelectDatasetDialog",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"SelectTileSort",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"SettingsCommunications",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"SettingsCloseAccount",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SettingsAlerts",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"SettingsBlade",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"SettingsDashboard",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SettingsDashboardBlade",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"SettingsDashboards",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SettingsDataset",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SettingsDatasetFeaturedQuestions",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SettingsDatasets",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SettingsEsri",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SettingsGeneral",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SettingsLanguage",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SettingsPlugins",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SettingsPreviewFeatures",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"SettingsPrivacy",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SettingsPublishedContent",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SettingsSubscriptions",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"SettingsViewer",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SettingsWorkbookBlade",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"SettingsWorkbooks",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SharePointUrlInput",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SharePointUrlModal",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ShareView",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"SharedByColumn",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"SsrsTile",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"StreamingDataSample",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"StreamingDatasetEditor",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"StreamingDatasetGallery",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"StreamingDatasetPushInfo",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"SubscriptionPane",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"TaskPaneSlider",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"Then",dependencies:[],blockType:4,consumerHostFlags:HostEnv.Web},{name:"Tile",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"TileEditor",dependencies:["$compile"],blockType:1,consumerHostFlags:HostEnv.Web},{name:"TileGallery",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"UsageBar",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"UsageBarMenuItem",dependencies:["quota","modelService","workbookService","groupService","featureSwitchService"],blockType:1,consumerHostFlags:HostEnv.Web},{name:"UserGroupHeader",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"UserInfoContainer",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"UserNotifications",dependencies:[],blockType:2,consumerHostFlags:HostEnv.Web},{name:"ViewContentPack",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"ViewTenantContentPackView",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"WarningBar",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost},{name:"WaterMarkMessage",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"WorkbookAppBar",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"WorkbookContainer",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"WorkbookContainer",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"WorkbookDiscoverabilityToast",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost},{name:"WorkbookNavigationPaneListItem",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"WorkbookNavigationPaneListItem",dependencies:[],blockType:1,consumerHostFlags:HostEnv.Web},{name:"WorkbookTile",dependencies:["networkAvailability","localizationService"],blockType:1,consumerHostFlags:HostEnv.Web|HostEnv.InvitationHost|HostEnv.DashboardHost|HostEnv.StandaloneDashboardHost}];angular.module("powerbi",modules).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(new RegExp(e.aHrefSanitizationWhitelist().source+"|^s*(data):"))}]).factory("syncService",["$timeout","promiseFactory","delayedQueryResultHandler",function(e,t,i){var o=common.createSyncService(e,t),r=powerbi.createDelayedQueryResultResolver(o);return i.setQueryResolver(r),o}]).factory("userSettingsHttpService",[function(){return powerbi.createUserSettingsHttpService()}]).factory("favoritesHttp",["syncService","notificationToast",function(e,t){return powerbi.createFavoritesHttpService(e,t)}]).factory("settingsMetadataHttpService",[function(){return powerbi.createSettingsMetadataHttpService()}]).factory("o365ApplicationLauncherService",(function(){return powerbi.createO365ApplicationLauncherService()})).factory("refreshService",["modelHttpService","datasetsService","$rootScope","notificationToast","gatewaysMetadataService","featureSwitchService","promiseFactory","selectGatewayService","localizationService","modalDialogService",function(e,t,i,o,r,a,n,s,c,l){return powerbi.createRefreshService(e,t,i,o,r,a,n,s,c,l)}]).factory("geolocationService",powerbi.visuals.services.createGeolocation).factory("modelConverter",["telemetryService","errorService","visualPlugin","promiseFactory","geolocationService","dataServiceModelConverter","localizationService",function(e,t,i,o,r,a,n){return powerbi.models.createModelConverter(e,t,i,o,r,a,n)}]).factory("contentProviderHttpService",["featureSwitchService","activeGroupId",function(e,t){return powerbi.common.createContentProviderHttpService(e,t)}]).factory("contentProviderService",["featureSwitchService","userInfo","localizationService","contentProviderHttpService","telemetryService","errorService","notificationToast","licenseHelperService","appService","promiseFactory",function(e,t,i,o,r,a,n,s,c,l){return powerbi.services.createContentProviderService(e,t,i,o,r,a,n,s,c,l)}]).factory("alertHttpService",["promiseFactory","telemetryService","errorService","localizationService",function(e,t,i,o){return powerbi.createAlertHttpService(e,t,i,o)}]).factory("subscriptionsHttp",["promiseFactory","telemetryService",function(e,t){return powerbi.createSubscriptionsHttpService(e,t)}]).factory("alertRuleService",powerbi.createAlertRuleService).factory("realTimeDataHttp",[function(){return powerbi.createRealTimeDataHttpService()}]).factory("powerBIDesktopLauncher",[function(){return common.powerBIDesktopLauncher}]).factory("realTimeLongPollData",["$timeout","tabularDataCache","realTimeDataHttp","telemetryService","promiseFactory",function(e,t,i,o,r){return services.createRealTimeLongPollDataService(e,t,i,o,r,{enableDataRefresh:!0})}]).factory("realTimePubNubData",["promiseFactory","realTimeDataHttp","tabularDataCache","telemetryService",function(e,t,i,o){return services.createRealTimePubNubDataService(e,t,i,o)}]).factory("realTimeData",["$rootScope","modelService","realTimeLongPollData","realTimePubNubData","tabularDataCache",function(e,t,i,o,r){return services.createRealTimeDataService(e,t,i,o,r)}]).factory("realTimeModel",["conceptualSchemaProxy","errorService","localizationService","modelService","promiseFactory","realTimeDataHttp","telemetryService","$timeout",function(e,t,i,o,r,a,n,s){return services.createRealTimeModelService(e,t,i,o,r,a,n,s)}]).factory("modelMerger",["modelConverter","dataServiceModelMerger",function(e,t){var i=powerbi.models.createModelMerger(e,t);return e.setModelMerger(i),i}]).factory("navigationStateValidator",["$timeout","impersonationService","permissionService","reportService",function(e,t,i,o){return services.createNavigationStateValidator(e,t,i,o)}]).factory("conceptualModelSetting",["featureSwitchService","tutorialDataStore",function(e,t){return powerbi.createConceptualModelSetting(e,t)}]).service("navigation",["$location","$window","$rootScope","$state","$stateParams","featureSwitchService","activeGroupId","home","navigationStateValidator","tutorialDataStore","permissionNavigationService","conceptualModelSetting",services.Navigation]).factory("fullScreen",["$rootScope","navigation","$document",function(e,t,i){return services.createFullScreenService(e,t,i)}]).factory("historyDialogService",["$rootScope","$compile",function(e,t){return powerbi.createHistoryDialogService(e,t)}]).factory("groupService",["$location","$rootScope","$timeout","telemetryService","errorService","localizationService","groupHttp","activeGroupId","featureSwitchService","userInfo","reportService","modelService","promiseFactory","navigation","workbookService","packageService","licenseHelperService","appMetadataService","home","appService",function(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m,f,y,b){var S={location:e,rootScope:t,timeout:i,telemetryService:o,errorService:r,localizationService:a,groupHttpService:n,activeGroupIdService:s,featureSwitchService:c,userInfo:l,appService:b,reportService:d,modelService:p,promiseFactory:u,navigation:v,workbookService:h,packageService:g,licenseHelperService:m,appMetadataService:f,home:y};return powerbi.createGroupService(S)}]).factory("scriptVisuals",["featureSwitchService","localizationService","userInfo","visualPlugin","embedModeService",function(e,t,i,o,r){return powerbi.explore.services.createScriptVisualsService(o,e,t,i,r)}]).factory("embed",["$location","promiseFactory","featureSwitchService","dataReaderProvider","explorationSerializer","conceptualSchemaProxy","dataProxy","displayNameService","visualPlugin","aggrOps","telemetryService","scriptVisuals","activeGroupId",function(e,t,i,o,r,a,n,s,c,l,d,p,u){var v=powerbi.explore.services.createVisualRelationshipService(c),h=powerbi.explore.services.createSortService(s,i,c),g=powerbi.explore.services.createFilterGenerator(common.createEventBridge(),c,l,v,{getSelectedHostFilters:function(){return null}},d,p),m=powerbi.data.transforms.createTransformPluginService(),f=powerbi.explore.services.createVisualQueryGenerator({dataReaders:o,displayNameService:s,featureSwitchService:i,plugin:c,sortService:h,aggrOps:l,filterGenerator:g,transformPluginService:m,telemetryService:d});return powerbi.explore.services.createEmbedService(e,t,r,a,f,n,c,s,g,u)}]).factory("dynamicMessagingDataHttp",[function(){return powerbi.createDynamicMessagingDataHttpService()}]).service("dynamicMessagingData",["dynamicMessagingDataHttp","userNotificationInfo","userInfo","telemetryService","localizationService","featureSwitchService",function(e,t,i,o,r,a){return powerbi.createDynamicMessagingDataService(e,t,i,o,r,a)}]).service("dashboardStateChangeService",["$rootScope","dashboardDataService","dashboardService","dashboardWarningsService","errorService","featureSwitchService","groupService","inFocusService","licenseEnforcementService","licenseHelperService","localizationService","modelConverter","mostRecentlyUsedService","navigation","permissionService","$timeout","telemetryService","userInfo","appService",services.DashboardStateChangeService]).service("dashboardConfigurationService",(function(){return services.createDashboardConfigurationService()})).service("dashboardWarningsService",["$rootScope","telemetryService","dashboardDataService","resourceGateService","featureSwitchService","tutorialDataStore","notificationBar","resourcePackageListenerService","embedModeService","localizationService","visualPlugin",services.DashboardWarningsService]).service("dashboardService",["$location","$rootScope","navigation","$timeout","telemetryService","errorService","modelMerger","modelConverter","syncService","dashboardConfigurationService","dashboardDataService","dashboardHttpService","dashboardSyncService","dashboardWarningsService","fullScreen","localizationService","promiseFactory","reportService","modelHttpService","viralTenantMergeHelperService","groupService","featureSwitchService","modelService","licenseEnforcementService","userInfo","licenseHelperService","contentProviderHttpService","storageUsageService","appMetadataService","permissionService","tutorialDataStore","workbookService","notificationBar","notificationToast","resourcePackagesService","userSettingsService","visualPlugin","invitationService","resourceGateService","sampleQuestionsService","home","packageService","permissionDataService","inFocusService","userActivityContextService","mostRecentlyUsedService","appService","editableFeatureSwitchService",powerbi.DashboardService]).service("explorationLoader",["$rootScope","$timeout","modelConverter","dashboardService","explorationProxy","localizationService","telemetryService","navigation","modelService","packageService","notificationBar","errorService","userActivityContextService","appService",services.ExplorationLoader]).factory("contentPackService",["$rootScope","errorService","telemetryService","modelConverter","syncService","contentProviderHttpService","localizationService","navigation","dashboardService","featureSwitchService","userInfo","licenseHelperService","notificationToast","reportService","modelService","permissionService","workbookService","promiseFactory","quota","modalDialogService",function(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m,f,y,b){return powerbi.createContentPackService(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m,f,y,b)}]).factory("tenantContentPackService",["telemetryService","featureSwitchService","contentProviderHttpService","promiseFactory","modelConverter",function(e,t,i,o,r){return powerbi.createTenantContentPackSerivce(e,t,i,o,r)}]).factory("storageUsageService",["$rootScope","telemetryService","errorService","dashboardHttpService","localizationService","featureSwitchService","reportService","modelService","promiseFactory","navigation","userInfo","groupService","workbookService","licenseHelperService","permissionService",function(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h){return powerbi.createStorageUsageService(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h)}]).factory("quota",["storageUsageService","dashboardService",function(e,t){return services.createQuota(e,t)}]).factory("groupHttp",["telemetryService","activeGroupId",function(e,t){return powerbi.createGroupHttpService(e,t)}]).factory("tutorialPopup",["telemetryService","userInfo","tutorialDataStore","featureSwitchService","localizationService","navigation","conceptualModelSetting",function(e,t,i,o,r,a,n){return powerbi.createTutorialPopupService(e,t,i,o,r,a,n)}]).factory("userSettingsService",["telemetryService","modelConverter","promiseFactory","userSettingsHttpService","errorService","localizationService","appMetadataService","$rootScope",function(e,t,i,o,r,a,n,s){return powerbi.createUserSettingsService(e,t,i,o,r,a,n,s)}]).factory("settingsMetadataService",["promiseFactory","settingsMetadataHttpService","telemetryService",function(e,t,i){return powerbi.createSettingsMetadataService(e,t,i)}]).factory("licenseEnforcementService",["$rootScope","localizationService","userInfo","licenseHelperService","modelService","reportService","checkUnsavedService","promiseFactory","userNotificationInfo",function(e,t,i,o,r,a,n,s,c){return new powerbi.LicenseEnforcementService(e,t,i,o,r,a,n,s,c)}]).factory("pinTileService",["$rootScope","errorService","telemetryService","localizationService","modalDialogService","modelConverter","visualPlugin","themeService","visualStylePresetService","userSettingsService","reportService","modelService","workbookService","dashboardService","packageService","explorationSerializer",function(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h,g){return powerbi.createPinTileService(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h,g)}]).service("previewFeaturesModalService",["$rootScope","$document","telemetryService","localizationService","modalDialogService","tutorialDataStore",services.PreviewFeaturesModalService]).factory("inFocusService",["$rootScope","telemetryService","modelConverter","modelService","reportService","visualPlugin",function(e,t,i,o,r,a){return services.createInFocusService(e,t,i,o,r,a)}]).factory("home",["$rootScope","errorService","localizationService","notificationToast","telemetryService","promiseFactory",function(e,t,i,o,r,a){return services.createHome(e,t,i,o,r,a)}]).service("bootstrapService",["$rootScope","dashboardService","dashboardDataService","modelService","modelHttpService","telemetryService","tutorialDataStore","localizationService","navigation","notificationToast","storageUsageService","errorService","featureSwitchService","insightsService","favorites","mostRecentlyUsedService","home","groupService","promiseFactory","workbookService",services.BootstrapService]).factory("checkSigninService",[function(){return new common.DefaultCheckSigninService}]).factory("qrCodeService",["$rootScope","$compile","promiseFactory","localizationService","dashboardHttpService","reportHttpService","errorService","modalDialogService","telemetryService",function(e,t,i,o,r,a,n,s,c){return powerbi.createQRCodeService(e,t,i,o,r,a,n,s,c)}]).factory("ownership",["packageService",function(e){return powerbi.createOwnershipService(e)}]).factory("filterPersistenceService",["promiseFactory","userSettingsService","telemetryService",function(e,t,i){return services.createFilterPersistenceService(e,t,i)}]).factory("mostRecentlyUsedService",["promiseFactory",function(e){return services.createMostRecentlyUsedServicePlaceholder(e)}]).factory("printService",["$rootScope",function(e){return powerbi.createPrintService(e)}]).factory("pageVisibilityService",["$rootScope","$document",function(e,t){return powerbi.createPageVisibilityService(e,t)}]).factory("invitationService",["promiseFactory","telemetryService",function(e,t){return powerbi.createInvitationService(e,t)}]).factory("pageTitle",["localizationService","navigation","dashboardService","reportService","workbookService","$window","$rootScope",function(e,t,i,o,r,a,n){return services.createPageTitleService(e,t,i,o,r,a,n)}]).factory("shareSliderService",["navigation","$rootScope",function(e,t){return services.createShareSliderService(e,t)}]).factory("favorites",["telemetryService","favoritesHttp","activeGroupId","promiseFactory","dashboardService","$rootScope","featureSwitchService","notificationToast","localizationService","errorService","permissionService","appMetadataService","navigation","tutorialDataStore","dataClassificationService",function(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h){return powerbi.createFavoritesService(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h)}]).factory("contentList",["telemetryService","dashboardService","reportService","navigation","modelService","analyzeInExcel","workbookService","contentPackService","localizationService","packageService","errorService","$rootScope","modalDialogService","insightsService","exportToPowerPoint","featureSwitchService","refreshService","permissionService","settingsMetadataService","$location","$window","favorites","shareSliderService","groupService","appService","promiseFactory","publishedAppService","mostRecentlyUsedService","dataServiceModelConverter",function(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m,f,y,b,S,w,C,D,I,T,M,E,P){return powerbi.createContentListService(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m,f,y,b,S,w,C,D,I,T,M,E,P)}]).factory("visualPlugin",["featureSwitchService","promiseFactory","resourceLoader","telemetryService",function(e,t,i,o){return powerbi.createDashboardVisualPluginService(e.featureSwitches,t,i,o,{tooltipsEnabled:!0})}]).factory("visualStylePresetService",(function(){return powerbi.visualHost.services.createVisualStylePresetService()})).factory("exportStaticReportProxy",["promiseFactory","errorService","localizationService",function(e,t,i){return powerbi.proxies.createExportStaticReportProxy(e,t,i)}]).factory("exportStaticExplorationService",["exportStaticReportProxy","notificationToast","localizationService",function(e,t,i){return services.createExportStaticExplorationService(e,t,i)}]).factory("breadcrumbFactory",["localizationService","navigation","groupService","dashboardDataService","home","reportService","workbookService","modelService","permissionService","userInfo","featureSwitchService","tutorialDataStore","promiseFactory","ownership","appService","conceptualModelSetting","dataServiceModelConverter",powerbi.models.factory.createBreadcrumbFactory]).factory("publishedAppService",["promiseFactory","contentPackService","errorService","localizationService","modelConverter","notificationToast","publishAppHttpService","appService",function(e,t,i,o,r,a,n,s){return powerbi.createPublishedAppService(e,t,i,o,r,a,n,s)}]).factory("publishAppHttpService",[function(){return powerbi.createPublishAppHttpService()}]).factory("httpRequestWorker",["promiseFactory","telemetryService","localizationService","errorService","$timeout","$window","embedModeService","checkSigninService","clusterUriRetriever","httpUriRedirector","urlInterceptor","userActivityContextService","logger",function(e,t,i,o,r,a,n,s,c,l,d,p,u){return powerbi.common.createHttpRequestWorker(e,t,i,o,r,a,n,null,s,c,l,d,p,u)}]).factory("esri",["featureSwitchService","userSettingsService","esriExploration","telemetryService","dashboardService","navigation","promiseFactory",function(e,t,i,o,r,a,n){return powerbi.createEsriService(e,t,i,o,r,a,n)}]).run(["$http","$rootScope","promiseFactory","telemetryService","errorService","activeGroupId","featureSwitchService","checkSigninService","clusterUriRetriever","httpUriRedirector","urlInterceptor","expiredTokenSink","$window","$timeout","logger","embedModeService","httpRequestWorker",function(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m){powerbi.common.localize=common.createLocalizationService(o,i),powerbi.common.httpService=new common.HttpService(e,i,o,a,m),powerbi.common.featureSwitchService=n,powerbi.notifyDashboardContainerReady=function(e){t.$emit(powerbi.dataServices.constants.initialDashboardContainerReadyEventName,e)},powerbi.logBootstrapInfo=function(e){o.logEvent(powerbi.telemetry.AppAngularBootstrap,e.start,e.end)},powerbi.visuals&&powerbi.explore.services.VisualHostServices.initialize(powerbi.common.localize)}]).run(["groupService",function(e){}]).run(["licenseEnforcementService",function(e){}]).run(["printService",function(e){}]).run(["pageVisibilityService",function(e){}]).run(["dynamicMessagingData",function(e){}]).run(["scopedProvider",function(e){e.register("exportData",{services:["promiseFactory","notificationToast","localizationService","conceptualSchemaProxy","featureSwitchService","visualPlugin","displayNameService","aggrOps"],scopedServices:["exportVisualData","filterRestatement","drillToDetails"],fn:function(e,t,i,o,r,a,n,s,c,l,d){return powerbi.createExportDataService(e,t,i,o,a,c,r,n,s,l,d)}})}]);var powerbi;!(function(e){function t(t,i){void 0===i&&(i=[]);var o="powerbi.controllers."+t;i.push(e.controllers[t]),angular.module("powerbi.controllers").controller(o,i)}function i(e,t){var i=_.camelCase(t);return e.get(i)}function o(t){e.common.registerBuildingBlocksForHost(t,powerbiDirectivesDefinition,{componentsTarget:"powerbi.components",componentsMap:e.components,directivesTarget:"powerbi.directives",directivesMap:e.directives,filtersTarget:"powerbi.filters",filtersMap:e.filters})}e.registerController=t,e.getService=i,e.registerBuildingBlocksForHost=o})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){!(function(e){e[e.APIPush=1]="APIPush",e[e.PubNub=2]="PubNub",e[e.Link=3]="Link"})(t.StreamingDatasetOptionType||(t.StreamingDatasetOptionType={}));var i,o=t.StreamingDatasetOptionType;!(function(t){function i(e){return[{text:e.get("DatasetContextMenu_Rename"),action:4},{text:e.get("DatasetContextMenu_Personalize"),action:9},{text:e.get("DatasetContextMenu_Delete"),action:7},{text:e.get("DatasetContextMenu_ManageRefresh"),action:6},{text:e.get("DatasetContextMenu_RefreshNow"),action:5},{text:e.get("DashboardContextMenu_RefreshInfo"),action:13},{text:e.get("DatasetContextMenu_AnalyzeInExcel"),action:8},{text:e.get("DashboardContextMenu_CreateReport"),action:1,iconClass:"pbi-glyph-create-report"},{text:e.get("DatasetContextMenu_GetInsights"),action:2},{text:e.get("DatasetContextMenu_GettingInsights"),action:11},{text:e.get("DatasetContextMenu_ViewInsights"),action:12},{text:e.get("DatasetContextMenu_GranularSecurity"),action:3},{text:e.get("DatasetContextMenu_DatasetSettings"),action:10},{text:e.get("StreamingDatasetModel_APIInfo"),action:14,iconClass:"pbi-glyph-info"},{text:e.get("StreamingDatasetModel_Edit"),action:15,iconClass:"pbi-glyph-edit"},{text:e.get("StreamingDatasetModel_Delete"),action:16,iconClass:"pbi-glyph-delete"}]}function r(e,i){var o=_.filter(t.rowMenuActions(i),(function(t){return _.any(e,(function(e){return e===t.action}))}));return o}function a(t,i){var r=[{displayName:i.get("StreamingDataset_API"),type:o.APIPush,cssClass:"real-time-push-api"},{displayName:e.constants.streamingDatasetModelPubNub,type:o.PubNub,cssClass:"real-time-pubnub"}];return t.featureSwitches.realTimeASAEnabled&&r.push({displayName:i.get("StreamingDataset_ASA"),type:o.Link,cssClass:"real-time-asa",link:"https://go.microsoft.com/fwlink/?LinkID=808648"}),r}t.rowMenuActions=i,t.customizeRowMenuActions=r,t.getStreamingDatasetOptions=a})(i=t.DatasetsMenuFactory||(t.DatasetsMenuFactory={}))})(i=t.factory||(t.factory={}))})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){var i;!(function(t){function i(t,i,o,r){return{enabled:!0,isExpanded:!0,emailNotificationEnabled:!0,frequency:0,isNew:!0,measureName:i,operator:0,tileName:t,title:o,thresholdValue:r.toString(),alertFailureState:e.AlertFailureState.None}}t.createEmptyAlert=i})(i=t.AlertsModelFactory||(t.AlertsModelFactory={}))})(t=e.factory||(e.factory={}))})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){!(function(e){e[e.DashboardFormat=0]="DashboardFormat",e[e.ReportFormat=1]="ReportFormat"})(e.TileDialogPreviewFormats||(e.TileDialogPreviewFormats={}));e.TileDialogPreviewFormats;!(function(e){e[e.User=0]="User",e[e.Group=1]="Group"})(e.DashboardAccessInfoKind||(e.DashboardAccessInfoKind={}));e.DashboardAccessInfoKind;!(function(e){e[e.Report=0]="Report"})(e.ExternalConnectionContainerType||(e.ExternalConnectionContainerType={}));e.ExternalConnectionContainerType;!(function(e){e[e.Model=0]="Model"})(e.ExternalConnectionType||(e.ExternalConnectionType={}));e.ExternalConnectionType;!(function(e){e[e.Dashboard=1]="Dashboard",e[e.Report=2]="Report",e[e.Workbook=3]="Workbook"})(e.LandingView||(e.LandingView={}));e.LandingView;!(function(e){e[e.DashboardViewer=0]="DashboardViewer",e[e.QnaVisualization=1]="QnaVisualization"})(e.DashboardContainerViewMode||(e.DashboardContainerViewMode={}));e.DashboardContainerViewMode;!(function(e){e[e.Unknown=0]="Unknown",e[e.OneTimeOnly=1]="OneTimeOnly",e[e.Daily=2]="Daily",e[e.Weekly=4]="Weekly",e[e.Monthly=8]="Monthly",e[e.MonthlyDays=16]="MonthlyDays",e[e.AfterDataRefresh=32]="AfterDataRefresh"})(e.FrequencyType||(e.FrequencyType={}));e.FrequencyType;!(function(e){e[e.Unused=0]="Unused",e[e.First=1]="First",e[e.Second=2]="Second",e[e.Third=4]="Third",e[e.Fourth=8]="Fourth",e[e.Last=16]="Last"})(e.FrequencyRelativeInterval||(e.FrequencyRelativeInterval={}));e.FrequencyRelativeInterval;!(function(e){e[e.Unknown=0]="Unknown",e[e.AtSpecifiedTime=1]="AtSpecifiedTime",e[e.Seconds=2]="Seconds",e[e.Minutes=4]="Minutes",e[e.Hours=8]="Hours"})(e.FrequencySubdayType||(e.FrequencySubdayType={}));e.FrequencySubdayType;!(function(e){e[e.TargetedContent=0]="TargetedContent",e[e.DefaultContent=1]="DefaultContent",e[e.AssignedContent=2]="AssignedContent",e[e.ErrorOccurred=99]="ErrorOccurred"})(e.DynamicMessageContentType||(e.DynamicMessageContentType={}));e.DynamicMessageContentType})(t=e.contracts||(e.contracts={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t;!(function(e){function t(){return[{id:0,iconClass:"pbi-glyph-barchart"
},{id:1,iconClass:"pbi-glyph-paintbrush"}]}function i(e){return[{type:0,text:e.get("Realtime_VisualizationDesign")},{type:1,text:e.get("TileEditorPane_TileDetailsTabHeader")}]}function o(e){var t=e.localizationService;return[{iconClass:"pbi-glyph-securityalert",show:e.showWebContent,itemClass:"webContentIcon",tooltip:function(){return t.get("WebContentWarning_Widget")},action:2,hasBadge:!1},{iconClass:"pbi-glyph-warning",show:e.showWarning,itemClass:"warningIcon",tooltip:e.warningToolTipSetter,action:1,hasBadge:!1},{iconClass:"pbi-glyph-bell",show:e.showNotifications,itemClass:"notifications",tooltip:function(){return t.get("Alerts_NotificationTooltip")},action:0,badgeValueSetter:e.badgeTextSetter,hasBadge:!0},{iconClass:"pbi-glyph-realtime",show:e.showRealTime,itemClass:"",tooltip:function(){return t.get("Realtime_IconHoverText")},hasBadge:!1}]}e.realTimeConfigTabs=t,e.getRealTimeTileEditHeaderTabs=i,e.getDashboardTileIcons=o})(t=e.TileOptionsFactory||(e.TileOptionsFactory={}))})(t=e.factory||(e.factory={}))})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){!(function(e){e[e.AllContent=0]="AllContent",e[e.MyContent=1]="MyContent",e[e.SharedWithMe=2]="SharedWithMe"})(e.OwnershipFilterMenuFilter||(e.OwnershipFilterMenuFilter={}));var t=(e.OwnershipFilterMenuFilter,(function(){function e(){}return e})());e.NavigationPaneModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.Then=function(){return function(e,t){if("function"==typeof t){var i=_.drop(arguments,2);return i.unshift(e),t.apply(null,i)}return e}}})(t=e.filters||(e.filters={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/tiles/providerTile.html",this.replace=!0,this.scope={viewModel:"="},this.controller=e.common.Services.createController(e.controllers.ProviderTileController)}return t})();t.ProviderTile=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i){return new r(e,t,i)}!(function(e){e[e.None=0]="None",e[e.FitToContent=1]="FitToContent",e[e.FitToWidth=2]="FitToWidth"})(t.FullScreenFitStyle||(t.FullScreenFitStyle={}));var o=t.FullScreenFitStyle;t.createFullScreenService=i;var r=(function(){function t(t,i,r){var a=this;this._rootScope=t,this._navigation=i,this._document=r.get(0),this._document.addEventListener("fullscreenchange",(function(e){a.updateFullScreenFromBrowser()})),this._document.addEventListener("webkitfullscreenchange",(function(e){a.updateFullScreenFromBrowser()})),this._document.addEventListener("MSFullscreenChange",(function(e){a.updateFullScreenFromBrowser()})),this._document.addEventListener("mozfullscreenchange",(function(e){a.updateFullScreenFromBrowser()})),this._fullScreenModeEnabled=!1,this._fullScreenModeSupported=this.fullScreenSupportedViews()||this._navigation.inReportEmbedView(),this.fitStyle=o.None,this._rootScope.$on(e.common.constants.navigation.stateChangeStart,(function(t,i,o,r,n){a._fullScreenModeEnabled&&i&&!a.forceFullScreen()&&i.name!==e.constants.navigation.states.dashboard&&i.name!==e.common.constants.navigation.states.reportPage&&i.name!==e.common.constants.navigation.states.report&&i.name!==e.common.constants.navigation.states.dataset&&i.name!==e.constants.navigation.states.inFocusMode&&i.name!==e.constants.navigation.states.inFocusInsights&&t.preventDefault()})),this._rootScope.$on(e.common.constants.navigation.stateChangeSuccess,(function(){a._fullScreenModeSupported=a.fullScreenSupportedViews()})),this.forceFullScreen()&&(this.fullScreenMode=!0)}return t.prototype.fullScreenPreviousPage=function(){this._rootScope.$emit(e.explore.constants.explorationPreviousPageEvent)},t.prototype.fullScreenNextPage=function(){this._rootScope.$emit(e.explore.constants.explorationNextPageEvent)},t.prototype.fullScreenSupportedViews=function(){return this._navigation.inDashboardDetailView()||this._navigation.inReportDetailView()||this._navigation.inDatasetDetailView()||this._navigation.inInFocusView()||this._navigation.inInFocusInsightsView()},t.prototype.forceFullScreen=function(){return null!=this._navigation.locationService&&null!=this._navigation.locationService.search().chromeless},t.prototype.updateFullScreenFromBrowser=function(){var e=this,t=this._document,i=null!=(t.fullScreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement);i!==this.fullScreenMode&&this._rootScope.$applyAsync((function(){e.fullScreenMode=i}))},Object.defineProperty(t.prototype,"fullScreenModeSupported",{get:function(){return this._fullScreenModeSupported},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullScreenMode",{get:function(){return this._fullScreenModeEnabled},set:function(e){if(this._fullScreenModeSupported||this.forceFullScreen()){var i=$("html"),r=$("body");if(i.length<=0||r.length<=0)return;if(e){r.addClass(t.fullScreenCSSClass);var a=i.get(0);if(a){var n=a.requestFullscreen||a.msRequestFullscreen||a.webkitRequestFullscreen||a.mozRequestFullScreen;n&&n.call(a)}}else{r.removeClass(t.fullScreenCSSClass);var s=$(".enterFullScreenBtn");s.length>0&&s.blur(),this.fitStyle=o.None;var c=this._document,l=c.exitFullscreen||c.msExitFullscreen||c.webkitExitFullscreen||c.mozCancelFullScreen;l&&l.call(c)}this._fullScreenModeEnabled=e}},enumerable:!0,configurable:!0}),t.fullScreenCSSClass="fullScreen",t})()})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.constants,o=e.dataServices.contracts.TileType,r=(function(){function t(t,o,r){var a=this;this.telemetryService=t,this.userActivityContextService=o,this.scope=r,this.tileIdsToWait=[],this.tileIdsAlreadyLoaded=[],r.$on(e.constants.dashboardTileRepeatFinishedEvent,(function(){return a.onDashboardTileRepeatFinishedEvent()})),r.$on(i.tileVisualLoadedEventName,(function(e,t){return a.onDashbardTileVisualLoadedEvent(e,t)}))}return t.prototype.recordOpenDashboardEvent=function(t,i){t&&!this.openDashboardTelemetryEvent&&(this.dashboardModel=t,this.openDashboardTelemetryEvent=this.telemetryService.startPerfEventDeprecated(this.scope,e.telemetry.DashboardOpenDashboard,t.isSample,!1,t.hasOnPremiseModel,0,0,0,0,0,0,0,0,0,0,t.contract&&t.contract.originalDashboardObjectId,i,t.objectId),this.userActivityContextService.pushParentContext(this.openDashboardTelemetryEvent.event),t.isLoaded&&_.isEmpty(t.tiles)&&this.resolveOpenDashboardTelemetry(t,!0))},t.prototype.forceResolve=function(){this.resolveOpenDashboardTelemetry(this.dashboardModel,!0)},t.prototype.onDashboardTileRepeatFinishedEvent=function(){var t=this.dashboardModel;if(this.openDashboardTelemetryEvent){for(var i=0,o=0,r=t.tiles;o<r.length;o++){var a=r[o];a.shouldBeIncludedInTelemetryMeasurement&&(i++,_.contains(this.tileIdsAlreadyLoaded,a.id)||this.tileIdsToWait.push(a.id))}this.loadDashboardTileTelemetryEvent=this.telemetryService.startChildEvent(this.openDashboardTelemetryEvent.event,e.telemetry.DashboardLoadDashboardTileVisual,i),this.tileRepeatFinishedEventRaised=!0,_.isEmpty(this.tileIdsToWait)&&this.resolveOpenDashboardTelemetry(this.dashboardModel,!1)}},t.prototype.onDashbardTileVisualLoadedEvent=function(e,t){e.stopPropagation(),this.tileRepeatFinishedEventRaised?_.remove(this.tileIdsToWait,(function(e){return e===t})):this.tileIdsAlreadyLoaded.push(t),this.tileRepeatFinishedEventRaised&&_.isEmpty(this.tileIdsToWait)&&this.resolveOpenDashboardTelemetry(this.dashboardModel,!1)},t.prototype.resolveOpenDashboardTelemetry=function(e,i){if(this.openDashboardTelemetryEvent){var o=t.countTileTypes(e);if(this.openDashboardTelemetryEvent.event){var r=this.openDashboardTelemetryEvent.event.info;r&&(r.hasResourcePackages=o.hasResourcePackages,r.compositeTilesCount=o.composite,r.iframeTilesCount=o.iframe,r.imageTilesCount=o.image,r.modelTilesCount=o.model,r.ssrsTilesCount=o.ssrs,r.workbookTilesCount=o.workbook,r.reportTilesCount=o.report,r.workbookTileNoImage=o.workbookNoImage,r.otherTileTypes=o.unknown,r.realTimeTilesCount=o.realTime,i&&(r.isCancelled="true"))}this.openDashboardTelemetryEvent.resolve(),this.loadDashboardTileTelemetryEvent&&this.loadDashboardTileTelemetryEvent.resolve(),this.openDashboardTelemetryEvent=null,this.loadDashboardTileTelemetryEvent=null}},t.countTileTypes=function(e){var i={composite:0,iframe:0,image:0,model:0,realTime:0,ssrs:0,workbook:0,workbookNoImage:0,report:0,unknown:0,hasResourcePackages:!1};if(_.isEmpty(e.tiles))return i;for(var o=0,r=e.tiles;o<r.length;o++){var a=r[o];t.incTileTypeCount(a,i),!i.hasResourcePackages&&a&&a.contract&&!_.isEmpty(a.contract.resourcePackageIds)&&(i.hasResourcePackages=!0)}return i},t.incTileTypeCount=function(e,t){switch(e.type){case o.composite:t.composite++;break;case o.iframe:t.iframe++;break;case o.image:t.image++;break;case o.realTime:t.realTime++;break;case o.model:t.model++;break;case o.ssrs:t.ssrs++;break;case o.workbook:e.workbook?e.workbook.hasImages()&&t.workbook++:t.workbookNoImage++;break;case o.report:t.report++;break;default:t.unknown++}},t})();t.DashboardTelemetryHelper=r})(t=e.helpers||(e.helpers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=jsCommon.FreezeUtility,i=(function(){function e(e,t,i){void 0===t&&(t=!1),this.columnName=e,this.reverse=t,this.toAngularFilter=i,this.toAngularFilter=i||this.toAngularFilterDefault}return e.prototype.toAngularFilterDefault=function(){var e=_.camelCase(this.columnName);return this.reverse?"-"+e:"+"+e},e})();e.SortPredicate=i;var o;!(function(e){e.TitleAlphabeticalPredicate=new i("displayName"),e.TitleReverseAlphabeticalPredicate=new i("displayName",(!0)),e.OwnerAlphabeticalPredicate=new i("ownerFullname"),e.OwnerReverseAlphabeticalPredicate=new i("ownerFullname",(!0)),e.LastAccessDatePredicate=new i("lastAccess"),e.LastAccessReverseDatePredicate=new i("lastAccess",(!0)),e.SharedTimePredicate=new i("sharedTime"),e.SharedReverseTimePredicate=new i("sharedTime",(!0)),(function(){t.deepFreeze(e.TitleAlphabeticalPredicate),t.deepFreeze(e.TitleReverseAlphabeticalPredicate),t.deepFreeze(e.OwnerAlphabeticalPredicate),t.deepFreeze(e.OwnerReverseAlphabeticalPredicate),t.deepFreeze(e.LastAccessDatePredicate),t.deepFreeze(e.LastAccessReverseDatePredicate),t.deepFreeze(e.SharedTimePredicate),t.deepFreeze(e.SharedReverseTimePredicate)})()})(o=e.ArtifactSortPredicates||(e.ArtifactSortPredicates={}));var r;!(function(e){function i(e,t){switch(t){case 8:return a(e);case 16:return n(e);case 64:return s(e);default:return r(e)}}function r(e){return v(e),l}function a(e){return h(e),d}function n(e){return g(e),p}function s(e){return m(e),u}function c(e,t){var i;switch(e){case o.TitleAlphabeticalPredicate:i=t.get("Sort_Title_Alpabetical_Asc");break;case o.TitleReverseAlphabeticalPredicate:i=t.get("Sort_Title_Alpabetical_Desc");break;case o.OwnerAlphabeticalPredicate:i=t.get("Sort_Owner_Alpabetical_Asc");break;case o.OwnerReverseAlphabeticalPredicate:i=t.get("Sort_Owner_Alpabetical_Desc");break;case o.LastAccessDatePredicate:i=t.get("Sort_Last_Access_Date_Asc");break;case o.LastAccessReverseDatePredicate:i=t.get("Sort_Last_Access_Date_Desc");break;case o.SharedTimePredicate:i=t.get("Sort_Shared_Time_Asc");break;case o.SharedReverseTimePredicate:i=t.get("Sort_Shared_Time_Desc")}return{predicate:e,title:i}}var l,d,p,u,v=_.once((function(e){l=[c(o.TitleAlphabeticalPredicate,e),c(o.TitleReverseAlphabeticalPredicate,e),c(o.OwnerAlphabeticalPredicate,e),c(o.OwnerReverseAlphabeticalPredicate,e)],t.deepFreeze(l)})),h=_.once((function(e){d=[c(o.TitleAlphabeticalPredicate,e),c(o.TitleReverseAlphabeticalPredicate,e)],t.deepFreeze(d)})),g=_.once((function(e){p=[c(o.LastAccessReverseDatePredicate,e),c(o.TitleAlphabeticalPredicate,e),c(o.TitleReverseAlphabeticalPredicate,e)],t.deepFreeze(p)})),m=_.once((function(e){u=[c(o.SharedReverseTimePredicate,e),c(o.SharedTimePredicate,e),c(o.TitleAlphabeticalPredicate,e),c(o.TitleReverseAlphabeticalPredicate,e),c(o.OwnerAlphabeticalPredicate,e),c(o.OwnerReverseAlphabeticalPredicate,e)],t.deepFreeze(u)}));e.createPredicates=i,e.createDefaultPredicates=r})(r=e.SelectTileSortItemsFactory||(e.SelectTileSortItemsFactory={}))})(t=e.factory||(e.factory={}))})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t,i){var o=this;this.scope=t,this.services=i,this.tileModel=this.services.dashboardDataService.selectedDashboardTile.tileModel,this.openAlertsEditorEvent=this.services.telemetryService.logEvent(e.telemetry.DataAlertsOpenAlertsEditor),this.isUpdating=!1,this.isLoading=!0;var r=this.tileModel;this.services.alertHttpService.getAllAlerts(this.openAlertsEditorEvent,r.contract.id).then((function(t){var i=o.services.alertRuleService.getMeasureName(r),a=_.sortBy(t,(function(e){return e.createdDateTimeUtc})).reverse(),n=_.map(a,(function(e){return o.services.modelConverter.convertAlertsEditorPane(e,r,i)}));o.viewModel=new e.models.AlertsEditorModel(n,r,i,o.services.localizationService),o.expandAlertIfRequired(),o.isLoading=!1}))}return t.createOptions=function(){return{additionalServices:["dashboardService","alertRuleService","dashboardDataService","localizationService","alertHttpService","modelConverter","promiseFactory","navigation","errorService","telemetryService"]}},t.prototype.cancel=function(){if(!this.isLoading&&this.hasChangesToSave()){var e=this.services.errorService.control();e.showPrompt(this.services.localizationService.get("Alerts_CancelDialogTitle"),this.services.localizationService.get("Alerts_CancelDialogMessage"),this.getCancelModalActionsArray(e))}else this.closePane()},t.prototype.hasChangesToSave=function(){var e=this.viewModel.alerts;if(e)for(var t=0;t<e.length;t++){var i=e[t];if(i&&(i.isNew||i.enabled!==i.contract.enabled||this.isAlertDirty(t)))return!0}return!1},t.prototype.getCancelModalActionsArray=function(e){var t=this;return[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialog_Save"),function(i,o){e.hideDialog(),t.saveChangesAndExit(),t.scope.$root.$digest()}),new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialog_DontSave"),function(){e.hideDialog(),t.closePane(),t.scope.$root.$digest()}),new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialog_Cancel"),function(t,i){e.hideDialog()})]},t.prototype.closePane=function(){this.services.dashboardService.clearSelectedDashboardTile(),this.scope.$emit(e.constants.hideTaskPaneSlider),this.services.navigation.navigateToDashboardByGUID(this.services.dashboardService.getActiveDashboard().objectId)},t.prototype.saveChangesAndExit=function(){var t=this,i=this.services.telemetryService.startChildEvent(this.openAlertsEditorEvent,e.telemetry.DataAlertsSaveAlerts,0,0,0,0,0,0);this.isUpdating=!0;for(var o=this.viewModel.alerts,r=[],a=[],n=[],s=0;s<o.length;s++){var c=o[s];if(this.resetAlertFailureStates(c),c.isNew||this.isAlertDirty(s)){var l=parseFloat(c.thresholdValue),d=this.services.alertRuleService.createAlertRule(this.tileModel,c.operator,l);if(!d)return;var p=this.services.modelConverter.convertAlertModelToContract(c,this.tileModel,d);c.contract=p,c.isNew?r.unshift(c):a.push(c)}else c.enabled!==c.contract.enabled&&n.push(c)}i.event.info.createCount=r.length,i.event.info.editCount=a.length,i.event.info.toggleCount=n.length,this.services.promiseFactory.all([this.createAlerts(r,i.event),this.editAlerts(a,i.event),this.toggleAlerts(n,i.event)]).then((function(e){t.isUpdating=!1,i.resolve(),_.every(e,(function(e){return e}))&&t.closePane()}))},t.prototype.addNewAlert=function(){for(var e=0,t=this.viewModel.alerts;e<t.length;e++){var i=t[e];i.isExpanded=!1}this.viewModel.addNewEmptyAlert(this.services.alertRuleService.getThresholdValue(this.tileModel))},t.prototype.removeAlert=function(e,t){e&&e.stopPropagation&&e.stopPropagation();var i=this.viewModel.alerts[t];if(i){this.resetAlertFailureStates(i);var o=this.services.errorService.control();o.showPrompt(this.services.localizationService.get("Alerts_DeleteDialogTitle"),this.services.localizationService.get("Alerts_DeleteDialogMessage"),this.getDeleteModalActionsArray(o,i,t))}},t.prototype.getDeleteModalActionsArray=function(t,i,o){var r=this;return[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Delete"),function(a,n){t.hideDialog(),i.contract&&!i.isNew?(r.services.telemetryService.logChildEvent(r.openAlertsEditorEvent,e.telemetry.DataAlertsDeleteAlertAccept),r.services.alertHttpService.deleteAlert(i.contract.id,r.openAlertsEditorEvent).then((function(t){return t?void r.viewModel.alerts.splice(o,1):void(i.alertFailureState=e.models.AlertFailureState.Delete)}))):(r.viewModel.alerts.splice(o,1),r.scope.$digest())}),new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Cancel"),function(i,o){r.services.telemetryService.logChildEvent(r.openAlertsEditorEvent,e.telemetry.DataAlertsDeleteAlertCancel),t.hideDialog()})]},t.prototype.moreOptionsMenuSelected=function(e){var t=e.action;if(null!=t)switch(t){case 0:this.collapseAllAlerts()}},t.prototype.isAlertDirty=function(e){var t=this.alertForm;if(t)return t["alertForm"+e].$dirty},t.prototype.isValidTitle=function(t){var i=t.title?t.title.length:0;return i>0&&i<=e.constants.alertTitleMaxLength},t.prototype.isValidThreshold=function(e){return jQuery.isNumeric(e.thresholdValue)},t.prototype.createAlerts=function(t,i){for(var o=this,r=this.services.promiseFactory.defer(),a=[],n=0,s=t;n<s.length;n++){var c=s[n];a.push(this.services.alertHttpService.createAlert(c.contract,this.openAlertsEditorEvent))}return this.updateAlerts(t,a,r,(function(t,r){for(var a=0,n=0;n<r.length;n++)r[n]!==-1?(o.resetAlertFailureStates(t[n]),t[n].contract.id=r[n],t[n].isNew=!1,i.info.createFailCount=a):(t[n].alertFailureState=e.models.AlertFailureState.Create,a++);return 0===a})),r.promise},t.prototype.editAlerts=function(e,t){for(var i=this,o=this.services.promiseFactory.defer(),r=[],a=0,n=e;a<n.length;a++){var s=n[a];r.push(this.services.alertHttpService.updateAlert(s.contract,this.openAlertsEditorEvent))}return this.updateAlerts(e,r,o,(function(e,o){var r=i.getFailureCount(e,o);return t.info.editFailCount=r,0===r})),o.promise},t.prototype.toggleAlerts=function(e,t){for(var i=this,o=this.services.promiseFactory.defer(),r=[],a=0,n=e;a<n.length;a++){var s=n[a];r.push(this.services.alertHttpService.toggleAlert(s.contract.id,s.enabled,this.openAlertsEditorEvent))}return this.updateAlerts(e,r,o,(function(e,o){var r=i.getFailureCount(e,o);return t.info.toggleFailCount=r,0===r})),o.promise},t.prototype.updateAlerts=function(e,t,i,o){i&&(_.isEmpty(t)?i.resolve(!0):this.services.promiseFactory.all(t).then((function(t){if(o){var r=o(e,t);i.resolve(r)}})))},t.prototype.getFailureCount=function(t,i){for(var o=0,r=0;r<i.length;r++)i[r]?this.resetAlertFailureStates(t[r]):(t[r].alertFailureState=e.models.AlertFailureState.Update,o++);return o},t.prototype.collapseAllAlerts=function(){for(var e=0,t=this.viewModel.alerts;e<t.length;e++){var i=t[e];i.isExpanded=!1}},t.prototype.expandAlertIfRequired=function(){var e=this.services.navigation.currentAlertId;if(e){var t=_.find(this.viewModel.alerts,(function(t){return t.contract&&t.contract.id===e}));t&&(t.isExpanded=!0)}},t.prototype.resetAlertFailureStates=function(t){t.alertFailureState=e.models.AlertFailureState.None},t})();t.AlertsEditorController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.AlertsEditor={controller:e.common.Services.createController(e.controllers.AlertsEditorController),templateUrl:"components/alertsEditor/alertsEditor.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.helpers.ContentTileHelper,o=(function(){function t(e,t){this.services=t,this.isFavoriting=!1}return t.createOptions=function(){return{additionalServices:["contentList","navigation","modelService"]}},t.prototype.canOpenTile=function(t){return t.contentTileType!==e.common.contracts.ContentTileType.AppDataset},t.prototype.openContentTile=function(e){this.canOpenTile(e)&&i.openContentTile(e,this.services.navigation,this.services.contentList)},t.prototype.toggle=function(){this.viewModel.expanded=!this.viewModel.expanded},t.prototype.isNew=function(e){return i.isNew(e,this.services.modelService)},t.prototype.unfavoriteContentTile=function(e){this.services.contentList.removeFavorite(e.contentTileType,e.objectId)},t.prototype.favoriteContentTile=function(e){var t=this;this.isFavoriting=!0;var o=this.services.navigation.currentGroupGUID;this.services.contentList.addFavorite(e.contentTileType,i.getObjectID(e),o).finally((function(){t.isFavoriting=!1}))},t.prototype.canUnFavorite=function(e){return i.canUnFavorite(e,this.services.contentList)},t.prototype.canFavorite=function(e){return i.canFavorite(e,this.services.contentList)},t.prototype.isFavoriteDisabled=function(e){return!!this.isFavoriting||i.isFavoriteDisabled(e,this.services.contentList)},t.prototype.canShowOptionsMenu=function(e){return this.services.contentList.canShowTileOptions(e)},t})();t.AppArtifactsListController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.AppArtifactsList={templateUrl:"components/appArtifactsList/appArtifactsList.html",bindings:{viewModel:"<"},controller:e.common.Services.createController(e.controllers.AppArtifactsListController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.AppUtils,o=jsCommon.Color,r="#000",a=.8,n=.2,s=(function(){function e(e,t){this.services=t,this.emptyAppTitle=t.localizationService.get("App_Title_New")}return e.createOptions=function(){return{additionalServices:["localizationService"]}},e.prototype.getAppTitle=function(){var e=this.viewModel;return e&&e.displayName?e.displayName:this.emptyAppTitle},e.prototype.getHeaderBackgroundColor=function(){var e=this.viewModel;return o.calculateHighlightColor(o.parseColorString(e.iconBackgroundColor),a,n)},e.prototype.getHeaderFontColor=function(){var e=this.viewModel;return this.hasAppLogoImage()?r:e.iconColor},e.prototype.hasAppLogoImage=function(){return i.hasAppLogoImage(this.viewModel)},e})();t.AppChannelHeaderController=s})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.AppChannelHeader={templateUrl:"components/appChannelHeader/appChannelHeader.html",bindings:{viewModel:"<"},controller:e.common.Services.createController(e.controllers.AppChannelHeaderController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.AppUtils,o="pbi-glyph-gauge",r="pbi-glyph-barchart",a="pbi-glyph-excel",n="pbi-glyph-database",s=(function(){function e(e,t){this.services=t,this.searchText=""}return e.createOptions=function(){return{additionalServices:["appService","dashboardService","dataClassificationService","modelConverter","modelService","navigation","packageService","promiseFactory","reportService","workbookService"]}},e.prototype.$onInit=function(){var e=this,t=this.services.appService,i=this.services.packageService,o=this.services.reportService,r=this.services.workbookService;this.services.promiseFactory.all([i.ensurePackagesInitialization(),t.ensureAppsInitialization(),o.ensureReportsInitialization(),r.ensureWorkbookInitialization()]).then((function(a){_.isEqual(a,[i,t,o,r])&&e.initHelper()}))},e.prototype.initHelper=function(){var e=this,t=this.services.appService,o=this.services.navigation.currentAppGUID,r=this.services.navigation.currentAppInstanceId,a=t.getAppByGUID(o);r||(r=i.getPackageIDByOrgAppGUID(this.services.appService,this.services.packageService,o)),this.installedApp=this.services.appService.getInstalledAppModel(a,r),this.services.dataClassificationService.isEnabledAsync().then((function(t){return e.loadArtifactsLists(t)}))},e.prototype.loadArtifactsLists=function(e){var t=this.installedApp.packageId,i=[];i.push(this.createDashboardsArtifactList(t,e)),i.push(this.createReportsArtifactList(t)),i.push(this.createWorkbooksArtifactList(t)),i.push(this.createDatasetArtifactList(t)),this.artifactLists=i},e.prototype.inAppArtifactsListView=function(){return this.services.navigation.inAppDetailView()},e.prototype.isEmptyList=function(e){return 0===e.artifacts.length},e.prototype.createDashboardsArtifactList=function(e,t){var i=this.services.dashboardService.findDashboardsByPackageId(e)||[];return{title:"App_DashboardList_Title",className:o,expanded:!0,isDataClassificationEnabled:t,artifacts:i}},e.prototype.createReportsArtifactList=function(e){var t=this.services.reportService.findReportsByPackageId(e)||[];return{title:"App_ReportList_Title",className:r,expanded:!0,isDataClassificationEnabled:!1,artifacts:t}},e.prototype.createWorkbooksArtifactList=function(e){var t=this.services.workbookService.findWorkbooksByPackageId(e)||[];return{title:"App_WorkbookList_Title",className:a,expanded:!0,isDataClassificationEnabled:!1,artifacts:t}},e.prototype.createDatasetArtifactList=function(e){var t=this,i=this.services.modelService.findModelsByPackageId(e)||[],o=_.map(i,(function(e){return t.services.modelConverter.convertAppDataset(e.contract)}));return{title:"App_DatasetList_Title",className:n,expanded:!1,isDataClassificationEnabled:!1,artifacts:o}},e})();t.AppContainerController=s})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.AppContainer={templateUrl:"components/appContainer/appContainer.html",controller:e.common.Services.createController(e.controllers.AppContainerController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.AppUtils,o=(function(){function e(e,t){}return e.prototype.hasAppLogoImage=function(){return i.hasAppLogoImage(this.viewModel)},e.prototype.getAppLogoImageUrlStyle=function(){return i.getAppLogoImageUrlStyle(this.viewModel)},e})();t.AppLogoController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.AppLogo={templateUrl:"components/appLogo/appLogo.html",bindings:{viewModel:"<",size:"@"},controller:e.common.Services.createController(e.controllers.AppLogoController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){this.services=t}return e.createOptions=function(){return{additionalServices:["appService","dataServiceModelConverter","packageService","featureSwitchService","promiseFactory"]}},e.prototype.$onInit=function(){var e=this;this.providers=[],this.services.promiseFactory.all([this.services.packageService.ensurePackagesInitialization(),this.services.appService.ensureAppsInitialization()]).then((function(){return e.loadApplicationInstances()})),this.services.appService.addAppsCollectionChangedHandler(this)},e.prototype.loadApplicationInstances=function(){var e=this,t=null,i=[],o=[],r=this.services.appService.apps;if(!_.isEmpty(r))for(var a=function(r){t=n.services.packageService.getPackagesByProviderId(r.providerId,r.category),o=_.map(t,(function(t){return e.services.appService.getInstalledAppModel(r,t.id)}));for(var a=0,s=o;a<s.length;a++){var c=s[a];i.push(c)}},n=this,s=0,c=r;s<c.length;s++){var l=c[s];a(l)}this.providers=i},e.prototype.$onDestroy=function(){this.services.appService.removeAppsCollectionChangedHandler(this)},e.prototype.onAppInstalled=function(e){var t=this,i=null,o=_.map(this.providers,(function(e){return e.packageId}));i=this.services.packageService.getPackagesByProviderId(e.providerId,e.category);var r=_.map(i,(function(i){return t.services.appService.getInstalledAppModel(e,i.id)}));if(1===r.length)this.providers.push(r[0]);else for(var a=0,n=r;a<n.length;a++){var s=n[a];o.indexOf(s.packageId)<0&&this.providers.push(s)}},e.prototype.onAppUninstalled=function(e){_.remove(this.providers,(function(t){return t.contract.providerId===e.providerId}))},e})();e.AppsContainerController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.AppsContainer={templateUrl:"components/appsContainer/appsContainer.html",controller:e.common.Services.createController(e.controllers.AppsContainerController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){var i=this;this.$scope=e,this.services=t,this.breadcrumbs=[],this.breadcrumbFilter=function(e){return!_.isEmpty(_.trim(e.label))&&null!=e.tooltipConfig&&null!=e.tooltipTemplateConfig},this.setBreadcrumbs=function(){i.breadcrumbs=i.services.breadcrumbFactory.createCurrentBreadcrumbs()||[]},this.setReportBreadreadcrumb=function(e,t){i.breadcrumbs=i.services.breadcrumbFactory.createCurrentBreadcrumbs({reportId:t.id,reportGUID:t.guid,reportName:t.displayName,subsituteReportForDataset:!0})||[]}}return t.createOptions=function(){return{additionalServices:["breadcrumbFactory","telemetryService","navigation"]}},t.prototype.$onInit=function(){this.setBreadcrumbs(),this.unregisterStateChange=this.$scope.$on(e.common.constants.navigation.stateChangeSuccess,this.setBreadcrumbs),this.unregisterGroupSwitch=this.services.rootScope.$on(e.constants.groupSwitchedEventName,this.setBreadcrumbs),this.unreigsterReportChange=this.services.rootScope.$on(e.common.constants.currentActiveReportInfoChangedEventName,this.setReportBreadreadcrumb)},t.prototype.$onDestroy=function(){this.unregisterGroupSwitch(),this.unregisterStateChange(),this.unreigsterReportChange()},t.prototype.getTemplate=function(e,t){return t||_.isEmpty(_.trim(e.uiSref))?"components/breadcrumbs/breadcrumbLabel.html":"components/breadcrumbs/breadcrumbLink.html"},t.prototype.logTelemetry=function(t){var i=this.services.navigation.stateService.current.name;this.services.telemetryService.logEvent(e.telemetry.NavigationClickBreadcrumb,i,t)},t})();t.BreadcrumbsController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.Breadcrumbs={templateUrl:"components/breadcrumbs/breadcrumbs.html",controller:e.common.Services.createController(e.controllers.BreadcrumbsController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.models.CollapsiblePaneExpandedWidth,o=e.models.factory.DatasetsMenuFactory,r=e.common.contracts.Permissions,a=e.common.contracts.PublishOrRefreshStatus,n=e.common.contracts.RealTimeMode,s=e.common.constants.TaskPaneCollapsiblePaneMode,c=(function(){function c(e,t){this.scope=e,this.services=t,this.menuSelected=!1,this.initialize()}return c.createOptions=function(){return{additionalServices:["analyzeInExcel","contentPackService","dashboardService","errorService","featureSwitchService","groupService","historyDialogService","insightsService","localizationService","modalDialogService","modelService","navigation","ownership","packageService","realTimeModel","refreshService","rowLevelSecurity","quota","telemetryService","settingsMetadataService","overlayService"]}},c.prototype.initialize=function(){this.services.telemetryService.logEvent(e.telemetry.DashboardManageDatasetsLanding),this.modelDashboards={},this.streamingDatasetActions={},this.datasetMenuActions=this.createFileMenuActions(),this.isOrgApp=!1,this.rowId=_.uniqueId("datasetMenu")},c.prototype.isPackagePublishInProgress=function(e){return e===a.PublishInProgress},c.prototype.canCreateReport=function(e){return!((e.getPermissions()&r.CopyOnWrite)===r.CopyOnWrite)},c.prototype.canRefreshNow=function(e){return(e.getPermissions()&r.All)===r.All},c.prototype.canScheduleRefresh=function(e){return(e.getPermissions()&r.All)===r.All&&null!==e.contract.onPremModelConnectionString},c.prototype.datasetMenuActionSelected=function(e){switch(e.action){case 8:this.analyzeInExcel(this.activeModel);break;case 7:case 16:
this.delete(this.activeModelContract);break;case 2:case 11:case 12:this.getInsights(this.activeModelContract);break;case 3:this.granularSecurity(this.activeModelContract);break;case 4:this.rename(this.activeModelContract);break;case 10:this.navigateToSettingsPage(this.activeModelContract);break;case 9:this.personalizeDataset(this.activeModel);break;case 15:this.showStreamingDatasetEditorPane(this.activeModel.id);break;case 14:this.showStreamingDatasetPushInfoPane(this.activeModel.id);break;case 1:this.createReport(this.activeModel)}this.services.overlayService.hideAllDropdowns()},c.prototype.streamingDatasetActionSelected=function(e,t){this.setActiveModel(e),this.datasetMenuActionSelected(t)},c.prototype.getDashboardsForModel=function(e){return this.modelDashboards[e.id]||(this.modelDashboards[e.id]=_(this.services.dashboardService.dashboards).filter((function(t){return t.contract.modelIds&&t.contract.modelIds.indexOf(e.id)>=0})).map((function(e){return e.displayName})).value().join(this.services.localizationService.get("ListJoin_Separator"))),this.modelDashboards[e.id]},c.prototype.getStreamingDatasetActions=function(e){if((e.getPermissions()&r.All)===r.All){if(this.streamingDatasetActions[e.realTimeMode])return this.streamingDatasetActions[e.realTimeMode];var t=[];return t.push(15),t.push(16),e.realTimeMode===n.PersistAndCache&&t.push(1),e.realTimeMode!==n.PubNubCacheOnly&&t.push(14),this.streamingDatasetActions[e.realTimeMode]=o.customizeRowMenuActions(t,this.services.localizationService)}return[]},c.prototype.getModelType=function(t){return t.realTimeMode===n.PubNubCacheOnly?e.constants.streamingDatasetModelPubNub:this.services.localizationService.get("StreamingDataset_API")},c.prototype.showStreamingDatasetGalleryPane=function(){this.services.realTimeModel.setSelected(null),this.services.featureSwitchService.featureSwitches.realTimePubNubEnabled?this.scope.$emit(e.constants.showTaskPaneSlider,s.StreamingDatasetGallery):this.scope.$emit(e.constants.showTaskPaneSlider,s.StreamingDatasetEditor)},c.prototype.showOptions=function(e){this.menuSelected=!0,this.setActiveModel(e),this.customizeMenuActions(e,this.activeModelPackage)},c.prototype.createReport=function(t){return null!=t.contract.packagePublishStatus&&t.contract.packagePublishStatus!==a.FinishedSuccessfully&&t.contract.packagePublishStatus!==a.RefreshInProgress&&t.contract.packagePublishStatus!==a.RefreshError?void(t.contract.packagePublishStatus===a.PublishError&&this.deleteModelOnPublishFailure(t.id)):(t.isNew=t.contract.isNew=!1,void(this.services.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.OpenDataset)||((t.getPermissions()&e.common.models.ReportPermissions.CopyOnWrite)===e.common.models.ReportPermissions.CopyOnWrite?this.scope.$emit(e.constants.personalizeEventName,t.packageId):this.services.navigation.navigateToDatasetByDBName(t.dbName))))},c.prototype.refreshNow=function(t){this.services.telemetryService.logEvent(e.telemetry.DashboardDatasetClickRefreshNow,t.contentProviderId),this.services.refreshService.tryRefreshNow(this.services.telemetryService,this.services.errorService,t,e.models.SettingsGroupsType.Datasets)},c.prototype.refreshSchedule=function(t){this.services.telemetryService.logEvent(e.telemetry.DashboardDatasetClickScheduleRefresh,t.contentProviderId),this.services.navigation.showSettingsSlider(e.models.SettingsGroupsType.Datasets,t.dbName)},c.prototype.setActiveModel=function(e){this.activeModel=e,this.activeModelContract=e.contract,this.activeModelPackage=this.services.packageService.findPackage(this.activeModelContract.packageId)},c.prototype.deleteModelOnPublishFailure=function(e){var t=this;this.deleteItemOnPublishFailure(this.services.localizationService.get("NavigationPane_ModelPublishErrorTitle"),this.services.localizationService.get("NavigationPane_ModelPublishErrorContent"),(function(){t.services.modelService.deleteModel(e)}))},c.prototype.deleteItemOnPublishFailure=function(e,t,i){var o=this,r=this.services.errorService.control(),a=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Delete"),function(e,t){r.hideDialog(),i()}),new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Cancel"),function(e,t){r.hideDialog()})];r.showCustomDialog(e,$("<div/>").text(t),a,(function(e){e.parent().find('input[value="'+o.services.localizationService.get("ModalDialogButtonText_No")+'"]').focus()}),!0)},c.prototype.getInsights=function(t){this.services.telemetryService.logEvent(e.telemetry.DashboardDatasetClickInsights,t.contentProviderId),this.showInsightsContainer(t.dbName,t.vsName,t.packageId,e.insights.constants.insightsSourceNavigationPane)},c.prototype.showInsightsContainer=function(t,i,o,r){var a=this,n=this.services.modelService.findModelByDBName(t,o);if(n){var s=this.services.insightsService.getInsightsStatus(n.contract);if(2===s)this.services.navigation.showInsightsPanel(t,r);else if(0===s){var c=e.telemetry.InsightEntryPoint.NavigationPane;r===e.insights.constants.insightsSourceToast&&(c=e.telemetry.InsightEntryPoint.Notification);var l=this.services.telemetryService.startEvent(e.telemetry.InsightsShowInsights,0,c,n.contract.contentProviderId,e.getHashCode(n.contract.dbName),!1);this.services.insightsService.getInsights(!0,e.insights.services.RequestType.Initial,n.contract,c,e.insights.proxies.wireContracts.RequestOptions.ThoroughMode,l.event,null,null,null,null,!1).then((function(t){var i=t.insightsContainers,o=i?i.length:0;l.event.info.insightCount=o,t.isError&&o<=0?l.reject():l.resolve(),a.scope.$emit(e.insights.constants.insightsLoadedEventName,n,o>0)}))}}},c.prototype.showStreamingDatasetEditorPane=function(t){this.services.realTimeModel.setSelected(t),this.scope.$emit(e.constants.showTaskPaneSlider,s.StreamingDatasetEditor)},c.prototype.granularSecurity=function(t){this.services.telemetryService.logEvent(e.telemetry.RowLevelSecurityOpenRowLevelSecuritySettings,t.contentProviderId,t.cloudRlsEnabled),6===t.contentProviderId?this.cloudRlsNotSupportedDialog():this.services.navigation.showRowLevelSecuritySlider(t.id)},c.prototype.cloudRlsNotSupportedDialog=function(){var t=this.services.rootScope.$new(),i=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Close"),function(){t.closeDialog()})],o={dialogName:this.services.localizationService.get("ModalDialog_CloudRlsUnSupportedTypeTitle"),isDismissable:!0,scope:t,template:"<custom-modal-dialog></custom-modal-dialog>",dialogActions:i,containerCssClass:"cloudRlsDialog",htmlMessageText:this.services.localizationService.get("ModalDialog_CloudRlsUnSupportedTypeMessage")+"<br /> <a target='_blank' href='https://go.microsoft.com/fwlink/?LinkID=733530'>"+e.common.localize.get("ModalDialog_CloudRlsLearnMore")+"</a></div>"};this.services.modalDialogService.showLegacyWebModalDialog(o)},c.prototype.rename=function(t){this.services.telemetryService.logEvent(e.telemetry.DashboardDatasetClickRename,t.contentProviderId),this.services.settingsMetadataService.setSettings(4,t.dbName),this.scope.$emit(e.constants.showTaskPaneSlider,s.SettingsBlade,i.Medium)},c.prototype.navigateToSettingsPage=function(t){this.services.navigation.showSettingsSlider(e.models.SettingsGroupsType.Datasets,t.dbName)},c.prototype.delete=function(i){this.services.telemetryService.logEvent(e.telemetry.DashboardDatasetClickDelete,i.contentProviderId);var o=i.id,r=i.packageId,a=this.services.modelService.findModel(o,r);a&&a.isUsedByContentPack?this.services.contentPackService.showDialogOnModelDeleteInContentPack(o):this.deleteModel(o,r,this.isOrgApp?t.DeleteContentPackMessageType.Dataset:null)},c.prototype.deleteModel=function(e,i,o){var r,a,n=this,s=this.services.modelService.findModel(e,i),c=this.services.errorService.control(),l=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Delete"),function(t,o){c.hideDialog(),s&&s.realTimeMode?n.services.realTimeModel.deleteModel(e):n.services.modelService.deleteModel(e,i)}),new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Cancel"),function(e,t){c.hideDialog()})];switch(o){case t.DeleteContentPackMessageType.Dataset:r=this.services.localizationService.get("Model_DeleteConfirmationTitle"),a=this.services.localizationService.get("Model_DeleteOrgAppContentPack");break;default:s&&s.realTimeMode?(r=this.services.localizationService.get("StreamingDatasetModel_DeleteConfirmationTitle"),a=this.services.localizationService.format("StreamingDatasetModel_DeleteConfirmationMessage",[s.displayName])):(r=this.services.localizationService.get("Model_DeleteConfirmationTitle"),a=this.services.localizationService.format("Model_DeleteConfirmationMessage",s?[s.displayName]:[]))}c.showCustomDialog(r,$("<div/>").text(a),l,(function(e){e.parent().find('input[value="'+n.services.localizationService.get("ModalDialogButtonText_Cancel")+'"]').focus()}),!0)},c.prototype.customizeMenuActions=function(e,t){var i=this.services.featureSwitchService,a=this.services.localizationService,n=[],s=e.contract;if((e.getPermissions()&r.CopyOnWrite)===r.CopyOnWrite&&(n.push(9),n.push(7),this.isOrgApp=!0),this.services.ownership.permissionsArePersonalized(e.getPermissions(),t)&&(n.push(7),this.isOrgApp=!1),(e.getPermissions()&r.All)===r.All&&(this.isOrgApp=!1,n.push(10),n.push(4),n.push(7),s.onPremModelConnectionString||s.directQueryMode&&n.push(10)),i){if(this.services.analyzeInExcel.isAnalyzeInExcelSupported(i,e.getPermissions())&&n.push(8),s.insightsSupported&&((e.getPermissions()&r.Read)===r.Read||this.services.ownership.permissionsArePersonalized(e.getPermissions(),t))){var c=this.findInsightAction(s);n.push(c)}if((e.getPermissions()&r.All)===r.All&&(6===s.contentProviderId||7===s.contentProviderId)&&!s.onPremModelConnectionString){var l=this.services.groupService.activeGroup;(l.isMyWorkspace||l.contract.isOwner||!l.contract.isReadOnly)&&n.push(3)}}this.datasetMenuActions=o.customizeRowMenuActions(n,a)},c.prototype.findInsightAction=function(e){var t=this.services.insightsService.getInsightsStatus(e);switch(t){case 2:return 12;case 1:return 11;default:return 2}},c.prototype.analyzeInExcel=function(t){var i=this.services.modelService.findModel(t.id,t.packageId);i&&(this.services.telemetryService.logEvent(e.telemetry.DashboardAndReportsAnalyzeInExcel,"Dataset Navigation Pane List",i.contentProviderId,i.contract.modelFeatures,i.dbName),this.services.analyzeInExcel.startAnalyzeInExcel(i))},c.prototype.personalizeDataset=function(t){this.services.telemetryService.logEvent(e.telemetry.DashboardClickPersonalize,t.contentProviderId),this.scope.$emit(e.constants.personalizeEventName,t.packageId)},c.prototype.createFileMenuActions=function(){var e=this.services.localizationService;return o.rowMenuActions(e)},c.prototype.showStreamingDatasetPushInfoPane=function(t){this.services.telemetryService.logEvent(e.telemetry.RealTimeStreamingDatasetPushInfoPaneOpened),this.services.realTimeModel.setSelected(t),this.scope.$emit(e.constants.showTaskPaneSlider,s.StreamingDatasetPushInfo)},c})();t.ContentDatasetActionsController=c})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.ContentDatasetActions={templateUrl:"components/contentDatasetActions/contentDatasetActions.html",controller:e.common.Services.createController(e.controllers.ContentDatasetActionsController),bindings:{viewModel:"=",historicalDataset:"<"}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.helpers.ContentTileHelper,o=e.common.contracts.ContentTileType,r=e.common.helpers.ModelConverterHelper,a=e.common.contracts.PublishOrRefreshStatus,n=e.common.contracts.RealTimeMode,s=new Date(1),c=(function(){function t(t,r){var a=this;this.inViewport=!1,this.isFavoriting=!1,this.isTileActionsVisible=!1,this.getGroupId=function(){var t=a.viewModel,i=t.workspaceId;return i||(i=t.contentTileType===o.Favorite?e.constants.myWorkSpaceGroupId:a.services.groupService.activeGroupObjectId),i},this.setOwnerPhoto=function(){},this.openContentTile=function(){var e=a.viewModel.contentTileType,t=a.getGroupId(),o=i.getObjectID(a.viewModel),r=i.getOriginalObjectID(a.viewModel),n=i.getInstanceId(a.viewModel);a.services.contentList.openContent(e,t,o,r,n)},this.unfavoriteContentTile=function(){var e=a.viewModel;a.services.contentList.removeFavorite(e.contentTileType,e.objectId)},this.favoriteContentTile=function(){a.isFavoriting=!0;var e=a.viewModel&&a.viewModel.contentTileType,t=a.getGroupId();a.services.contentList.addFavorite(e,i.getObjectID(a.viewModel),t).finally((function(){a.isFavoriting=!1}))},this.scope=t,this.services=r,this.hasGroupIconSet=!1,this.hasUserIconSet=!1,this.hasOwnerPhotoSet=!1,this.hasOwnerPhoto=!1,this.historicalDataset=!0,this.apiAccessType=this.services.localizationService.get("ContentList_Datasets_Dashes"),this.dashboardTitle=this.services.localizationService.get("Favorites_Dashboard")}return t.createOptions=function(){return{additionalServices:["contentList","groupService","localizationService","modelService","navigation","ownership","storageUsageService","userInfo","dashboardService","reportService","workbookService"]}},t.prototype.$onInit=function(){8===this.tabType&&this.initializeDatasetMetadata(this.viewModel)},t.prototype.getTileTypeName=function(){if(this.viewModel&&this.viewModel.contentTileType)return o[this.viewModel.contentTileType].toLowerCase()},t.prototype.getOwnerNameOrMailForDashboard=function(){if(this.viewModel){if(this.viewModel.ownerFullname)return this.viewModel.ownerFullname;if(this.viewModel instanceof e.dataServices.models.Dashboard)return this.viewModel.ownerMail}},t.prototype.onceInViewport=function(){this.inViewport=!0},t.prototype.setUserPhoto=function(){var e=this;this.isMyWorkspace=!0,this.services.userInfo.getUserPhoto().then((function(t){e.hasUserIconSet=!0,e.userIcon=t})),this.groupName=this.getGroupName()},t.prototype.setGroupIcon=function(e){var t=this;this.isMyWorkspace=!1,this.services.userInfo.findGroupIcon(e).then((function(e){t.groupIcon=e,t.hasGroupIconSet=!0})),this.groupName=this.getGroupName(e)},t.prototype.getGroupName=function(e){var t=this.services.ownership;if(t.isResourceShareableWithMe(this.viewModel)&&t.isResourceSharedWithMe(this.viewModel))return this.services.localizationService.get("NavigationPane_SharedWithMe");if(this.isMyWorkspace)return this.services.localizationService.get("NavigationPane_Groups_MyWorkspace");var i=_.find(this.services.groupService.groups,(function(t){return t.aadGroupId===e}));return i?i.displayName:""},t.prototype.canShowOptionsMenu=function(){return this.services.contentList.canShowTileOptions(this.viewModel)},t.prototype.publishInProgress=function(){return this.services.contentList.publishInProgress(this.viewModel)},t.prototype.canUnFavorite=function(){return i.canUnFavorite(this.viewModel,this.services.contentList)},t.prototype.canFavorite=function(){return i.canFavorite(this.viewModel,this.services.contentList)},t.prototype.isFavoriteDisabled=function(){return!!this.isFavoriting||i.isFavoriteDisabled(this.viewModel,this.services.contentList)},t.prototype.convertRefreshTimeToJsDateTime=function(e){var t=r.convertRefreshTimeToJsDateTime(e);return!t||t.getFullYear()>3e3?this.services.localizationService.get("ManageDatasets_NextRefresh_NA"):t.toLocaleString()},t.prototype.getPrettyDate=function(t){return jsCommon.DateExtensions.formatPretty(t,e.common.localize.currentLanguageLocale)},t.prototype.getPrettySharedDate=function(e){var t=r.convertRefreshTimeToJsDateTime(e);return t<s?this.services.localizationService.get("SharedWithMe_SharedTime_Older"):this.getPrettyDate(t)},t.prototype.initializeDatasetMetadata=function(e){null!=e&&(e.realTimeMode&&e.realTimeMode===n.CacheOnly?(this.historicalDataset=!1,this.apiAccessType=this.services.localizationService.get("ContentList_Datasets_Streaming")):e.realTimeMode&&e.realTimeMode===n.PersistAndCache?(this.historicalDataset=!1,this.apiAccessType=this.services.localizationService.get("ContentList_Datasets_Hybrid")):e.realTimeMode&&e.realTimeMode===n.PubNubCacheOnly?(this.historicalDataset=!1,this.apiAccessType=this.services.localizationService.get("ContentList_Datasets_Streaming")):e.contract.pushDataVersion&&(this.historicalDataset=!1,this.apiAccessType=this.services.localizationService.get("ContentList_Datasets_Push")))},t.prototype.isNew=function(){return this.viewModel.contract?this.viewModel.isNew&&this.viewModel.contract.packagePublishStatus!==a.PublishError&&this.viewModel.contract.packagePublishStatus!==a.RefreshError&&!this.isRefreshInProgress():this.viewModel.isNew},t.prototype.isRefreshInProgress=function(){if(this.viewModel.contract){var e=this.services.modelService.findModel(this.viewModel.contract.id,this.viewModel.contract.packageId);return!!e&&e.isRefreshInProgress}return!1},t.prototype.toggleTileActionsVisibility=function(e){e.stopPropagation(),this.isTileActionsVisible=!this.isTileActionsVisible},t.prototype.getChannelContentDescription=function(){var e=this.viewModel;if(e&&32===this.tabType)return this.services.localizationService.format("ContentList_Apps_Description",[_.size(e.dashboardIds),_.size(e.reportIds),_.size(e.modelIds)])},t.prototype.initializeMruRow=function(){this.viewModel.workspaceId===e.constants.myWorkSpaceGroupId?this.setUserPhoto():this.setGroupIcon(this.viewModel.workspaceId),this.isItemAvailable=this.isAvailable()},t.prototype.isAvailable=function(){var e=this.getOriginalContentTile();return e===this.viewModel||!!e},t.prototype.getOriginalContentTileOrViewModel=function(){return this.getOriginalContentTile()||this.viewModel},t.prototype.navigateToGroup=function(){var t=this.services.ownership.isResourceShareableWithMe(this.viewModel)&&this.services.ownership.isResourceSharedWithMe(this.viewModel);this.services.navigation.navigateToContentList(e.constants.myWorkSpaceGroupId,!0,null,null,t)},t.prototype.getOriginalContentTile=function(){switch(this.viewModel.contentTileType){case o.Dashboard:return this.services.dashboardService.findDashboardByGUID(this.viewModel.objectId);case o.Report:return this.services.reportService.findReportByGUID(this.viewModel.objectId);case o.Workbook:return this.services.workbookService.findWorkbookByUniqueId(this.viewModel.objectId);default:return this.viewModel}},t})();t.ContentTileController=c})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.ContentTile={restrict:"E",templateUrl:"components/contentTile/contentTile.html",bindings:{viewModel:"<",inViewport:"<?disableLazyLoading"},controller:e.common.Services.createController(e.controllers.ContentTileController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.ContentRow={templateUrl:"components/contentRow/contentRow.html",bindings:{viewModel:"<",tabType:"<",inViewport:"<?disableLazyLoading",isDataClassificationEnabled:"<"},controller:e.common.Services.createController(e.controllers.ContentTileController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.ContentHeader={templateUrl:"components/contentHeader/contentHeader.html",bindings:{tabType:"<",isDataClassificationEnabled:"<"}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.models.factory.ArtifactSortPredicates,o=e.common.models.CollapsiblePaneExpandedWidth,r=jsCommon.EnumExtensions,a=e.models.OwnershipFilterMenuFilter,n=e.common.contracts.Permissions,s=e.telemetry.SelectSort,c=e.common.constants.TaskPaneCollapsiblePaneMode,l=e.common.contracts.ContentTileType,d=1e3,p=(function(){function p(t,o){var s=this;this.services=o,this.groupLinkTypeToDisplayNameMap={},this.groupLinkTypeToLabelClassMap={},this.sortPredicateMap={},this.allTypes=l.Dashboard|l.Report|l.Workbook,this.dashboards=[],this.reports=[],this.workbooks=[],this.datasets=[],this.publishedApps=[],this.dashboardsArePresent=0,this.dashboardCount=0,this.reportsArePresent=0,this.reportCount=0,this.workbooksArePresent=0,this.workbookCount=0,this.datasetsArePresent=0,this.datasetCount=0,this.publishedAppsArePresent=0,this.publishedAppsCount=0,this.searchText="",this.sortPredicate=i.TitleAlphabeticalPredicate,this.typeFilter=this.allTypes,this.ownership=a.AllContent,this.galleryViewModel={},this.filteredDashboards=[],this.filteredReports=[],this.filteredWorkbooks=[],this.filteredDatasets=[],this.filteredPublishedApps=[],this.initialFilteredDashboards=[],this.initializeArtifacts=function(){var e=s.services.contentList,t=e.getDashboards(),i=e.getReports(),o=e.getWorkbooks(),r=e.getDatasets(),a=e.getPublishedApps(),n=[t,i,o,r],c=s.services.promiseFactory.all(n);s.dashboardsLoadedDefer=s.services.promiseFactory.defer(),s.reportsLoadedDefer=s.services.promiseFactory.defer(),s.workbooksLoadedDefer=s.services.promiseFactory.defer(),s.datasetLoadedDefer=s.services.promiseFactory.defer(),s.contentListDataReadyPromise=c.then(s.navigateToGetDataPageIfEmptyContent),s.services.promiseFactory.all([t.then((function(e){s.dashboards=e})),i.then((function(e){s.reports=e})),o.then((function(e){s.workbooks=e})),r.then((function(e){s.datasets=e})),a.then((function(e){s.publishedApps=e})),s.groupService.ensureGroupsInitialization(),s.services.contentList.dashboardsOwnersMergedPromise(),s.services.appService.ensureAppsInitialization()]).then(s.mapResourceOwnerFullnames),s.groupService.ensureGroupsInitialization().then((function(){var e=s.services.groupService.activeGroup;s.bindGroupNavigationPaneMenu(e),s.groupName=e.displayName})),s.setCanManageDatasets(),s.setCanManagePublishedApps(),s.initOnAppMetadata()},this.mapResourceOwnerFullnames=function(){s.services.resourceOwnershipService.mapReportOwnerFullnames(s.reports,s.dashboards,s.groupService.activeGroupObjectId,s.groupName),s.services.resourceOwnershipService.mapWorkbookOwnerFullnames(s.workbooks,s.dashboards,s.groupService.activeGroupObjectId,s.groupName)},this.startTelemetry=function(){s.scope.$on(e.constants.contentListDashboardsLoadedEvent,(function(){s.dashboardsLoadedDefer.resolve(null)})),s.scope.$on(e.constants.contentListReportsLoadedEvent,(function(){s.reportsLoadedDefer.resolve(null)})),s.scope.$on(e.constants.contentListWorkbooksLoadedEvent,(function(){s.workbooksLoadedDefer.resolve(null)})),s.scope.$on(e.constants.contentListDatasetsLoadedEvent,(function(){s.datasetLoadedDefer.resolve(null)}));var t=s.telemetryService.startPerfEventDeprecated(s.scope,e.telemetry.ContentListLoaded);if(s.userActivityContextService.pushParentContext(t.event),s.telemetryService.logEvent(e.telemetry.ContentListArtifactsCount,s.dashboards?s.dashboards.length:-1,s.reports?s.reports.length:-1,s.workbooks?s.workbooks.length:-1),s.listViewEnabled){var i=void 0;switch(s.activeTab){case 0:case 64:i=s.dashboardsLoadedDefer.promise;break;case 2:i=s.reportsLoadedDefer.promise;break;case 4:i=s.workbooksLoadedDefer.promise;break;case 8:i=s.datasetLoadedDefer.promise}i&&i.then((function(){t.resolve(),s.groupService.resolveGroupSwitchTelemetry()}))}else s.services.promiseFactory.all([s.dashboardsLoadedDefer.promise,s.reportsLoadedDefer.promise,s.workbooksLoadedDefer.promise]).then((function(){t.resolve(),s.groupService.resolveGroupSwitchTelemetry()}))},this.navigateToGetDataPageIfEmptyContent=function(t){if(_.every(t,_.isEmpty)&&!s.navigation.stateService.params[p.skipWelcome]){var i={groupGUID:s.services.groupService.activeGroupObjectId};s.services.navigation.replaceAndLoadCurrentState(e.constants.navigation.states.groupWelcome,i)}},this.set=function(e,t){return s[t]=e.length,e},this.resolveTelemetry=function(e,t,i){return 0===s[t]&&s[i].resolve(null),e},this.searchProperties=function(e){var t=s.searchText.toLocaleLowerCase();return s.containsSubstring(e.displayName,t)||s.containsSubstring(e.ownerFullname,t)},this.setCanManageDatasets=function(){s.services.groupService.ensureGroupsInitialization().then((function(){s.canManageDatasets=!s.services.groupService.activeGroup.contract.isReadOnly||s.services.groupService.activeGroup.contract.isOwner}))},this.setCanManagePublishedApps=function(){s.services.groupService.ensureGroupsInitialization().then((function(){s.canManagePublishedApps=s.services.groupService.isMyWorkspace&&s.services.featureSwitchService.featureSwitches.appsEnabled}))},this.selectSort=function(t){s.sortPredicate=t;var i=s.sortPredicateMap[t.toAngularFilter()];s.services.telemetryService.logEvent(e.telemetry.ContentListSelectSort,i),s.persistFilter()},this.selectType=function(t){s.typeFilter^=t,s.services.telemetryService.logEvent(e.telemetry.ContentListSelectType,l[t]),s.persistFilter()},this.selectOwnership=function(t){s.ownership=t,s.services.telemetryService.logEvent(e.telemetry.ContentListSelectOwnership,a[t]),s.persistFilter()},this.ownershipPredicate=function(e){return s.ownership===a.AllContent||s.ownership===a.SharedWithMe&&s.ownershipService.isResourceSharedWithMe(e)||s.ownership===a.MyContent&&!s.ownershipService.isResourceSharedWithMe(e)},this.onSearchTextChange=function(){s.selectedSharedByOwner=e.models.sharedByColumn.AllSharedOwnerObjectId,s.ensureSearchTelemetry()},this.ensureSearchTelemetry=function(){s.searchTelemetry||_.isEmpty(s.searchText)||(s.searchTelemetry=s.telemetryService.startEvent(e.telemetry.ContentListSearch))},this.resolveSearchTelemetry=function(){s.searchTelemetry&&(s.searchTelemetry.resolve(),s.searchTelemetry=null)},this.canCopyAndEdit=function(e){var t=e.getPermissions();return r.hasFlag(t,n.Write)||r.hasFlag(t,n.CopyOnWrite)},this.isVisible=function(e){if(e.isHidden)return!1;if(!s.services.featureSwitchService.featureSwitches.appsEnabled||!e.contract)return!0;var t;switch(e.contentTileType){case l.Dashboard:t=e.contract.originalPackageId;break;case l.Report:case l.Workbook:t=e.contract.packageId}return!s.services.contentList.isOrgAppPackage(t)},this.isModelVisible=function(e){return!(!e||e.isHidden)&&(!s.services.featureSwitchService.featureSwitches.appsEnabled||!s.services.contentList.isOrgAppPackage(e.packageId))},this.refreshWaypoints=function(e){return _.debounce(s.doRefreshWaypoints,d),e},this.emptySharedDashboards={canEdit:!0,mode:!1,titleNonShared:this.services.localizationService.get("ContentList_EmptySharedWithMeTitle"),contentNonShared:this.services.localizationService.get("ContentList_EmptySharedWithMeMessage"),imgClass:"empty-shared-with-me-img"},this.emptyDashboards={canEdit:!0,mode:!1,titleNonShared:this.services.localizationService.get("ContentList_EmptyDashboardsTitle"),contentNonShared:this.services.localizationService.get("ContentList_EmptyDashboardsMessage"),imgClass:"empty-dashboards-img"},this.emptyReports={canEdit:!0,mode:!1,titleNonShared:this.services.localizationService.get("ContentList_EmptyReportsTitle"),contentNonShared:this.services.localizationService.get("ContentList_EmptyReportsMessage"),imgClass:"empty-reports-img"},this.emptyWorkbooks={canEdit:!0,mode:!1,titleNonShared:this.services.localizationService.get("ContentList_EmptyWorkbooksTitle"),contentNonShared:this.services.localizationService.get("ContentList_EmptyWorkbooksMessage"),imgClass:"empty-workbooks-img"},this.emptyDatasets={canEdit:!0,mode:!1,titleNonShared:this.services.localizationService.get("ContentList_EmptyDatasetsTitle"),contentNonShared:this.services.localizationService.get("ContentList_EmptyDatasetsMessage"),imgClass:"empty-datasets-img"},this.emptyPublishedApps={canEdit:!0,mode:!1,titleNonShared:this.services.localizationService.get("ContentList_EmptyPublishedApps")},this.emptySearch={canEdit:!0,mode:!1,linkDescription:this.services.localizationService.get("ContentList_EmptySearchResults_SearchRedirectDescription"),linkText:this.createLinkText(),linkAction:function(){return s.switchWorkspaceFromEmptySearch()},imgClass:"empty-search-img"},this.emptyContent={canEdit:!0,mode:!1,contentNonShared:this.services.localizationService.get("ContentList_EmptySearchResults")},this.save=function(e,t){return s[t]=e,e},this.getCount=function(e){return e.length},this.scope=t,this.navigation=o.navigation,this.localizationService=o.localizationService,this.errorService=o.errorService,this.groupService=o.groupService,this.telemetryService=o.telemetryService,this.groupHttp=o.groupHttp,this.errorService=o.errorService,this.ownershipService=o.ownership,this.rootScope=o.rootScope,this.modalDialogService=o.modalDialogService,this.userActivityContextService=o.userActivityContextService,this.modelService=o.modelService,this.listViewEnabled=o.featureSwitchService.featureSwitches.listViewEnabled,this.selectedSharedByOwner=e.models.sharedByColumn.AllSharedOwnerObjectId,this.userMetadataLoaded=!1,this.retainSearchTextOnNavigation=!1,this.initializeArtifacts(),this.createReportDialogBuilder=new e.dialogs.CreateReportDialogBuilder(o.telemetryService,o.navigation,o.modalDialogService,o.modelService);var c=this.rootScope.$on(e.constants.groupSwitchedEventName,this.initializeArtifacts);this.scope.$on(e.common.constants.scopeDestroyEventName,c),this.services.dataClassificationService.isEnabledAsync().then((function(e){s.dataClassificationEnabled=e}));var u=this.services.rootScope.$on(e.common.constants.navigation.stateChangeSuccess,(function(e,t,i,o,r){return s.handleStateChange(t,i,o,r)}));this.scope.$on(e.common.constants.scopeDestroyEventName,(function(){u()})),this.doRefreshWaypoints=function(){return s.services.rootScope.$applyAsync(s.services.$window.Waypoint.refreshAll)}}return p.createOptions=function(){return{additionalServices:["$window","$rootScope","appMetadataService","appService","contentList","groupService","navigation","promiseFactory","ownership","localizationService","telemetryService","errorService","groupHttp","modalDialogService","resourceOwnershipService","filterPersistenceService","featureSwitchService","userActivityContextService","modelService","realTimeModel","overlayService","dataClassificationService","userInfo","quota"]}},p.prototype.$onInit=function(){var e=this;this.activeTab=this.navigation.stateService.params[p.contentListTab]||0,this.updateSortPredicates(),this.updateGalleryViewModel(),this.sortPredicateMap[i.TitleAlphabeticalPredicate.toAngularFilter()]=s.TitleAlpabetical,this.sortPredicateMap[i.TitleReverseAlphabeticalPredicate.toAngularFilter()]=s.TitleReverseAlphabetical,this.sortPredicateMap[i.OwnerAlphabeticalPredicate.toAngularFilter()]=s.OwnerAlphabetical,this.sortPredicateMap[i.OwnerReverseAlphabeticalPredicate.toAngularFilter()]=s.OwnerReverseAlphabetical,this.sortPredicateMap[i.SharedTimePredicate.toAngularFilter()]=s.SharedTime,this.sortPredicateMap[i.SharedReverseTimePredicate.toAngularFilter()]=s.SharedReverseTime,1===this.services.navigation.instantiationMode&&this.showStreamingDatasetGalleryPane(),this.processSharedWithMeParameter(),this.services.userInfo.userMetadataPromise.finally((function(){e.userMetadataLoaded=!0})),this.initialized=!0},Object.defineProperty(p.prototype,"showSpinner",{get:function(){return this.isOnlySharedWithMe()?this.dashboardsArePresent&&(!this.userMetadataLoaded||!this.initialized):!this.initialized},enumerable:!0,configurable:!0}),p.prototype.isOnlySharedWithMe=function(){return this.services.navigation.inContentListView(!0)},p.prototype.getInitialFilteredDashboards=function(){return this.initialFilteredDashboards},p.prototype.processSharedWithMeParameter=function(){this.retainSearchTextOnNavigation?this.retainSearchTextOnNavigation=!1:this.searchText="",this.isOnlySharedWithMe()?(this.setActiveTab(64),this.ownership=a.SharedWithMe,this.sortPredicate=i.SharedReverseTimePredicate):(this.setActiveTab(0),this.selectedSharedByOwner=e.models.sharedByColumn.AllSharedOwnerObjectId,this.ownership=a.MyContent,this.sortPredicate=i.TitleAlphabeticalPredicate)},p.prototype.handleStateChange=function(e,t,i,o){this.processSharedWithMeParameter()},p.prototype.containsSubstring=function(e,t){return!!e&&_.contains(e.toLocaleLowerCase(),t)},p.prototype.$postLink=function(){this.contentListDataReadyPromise.then(this.startTelemetry)},p.prototype.initOnAppMetadata=function(){
var e=this;this.services.appMetadataService.getAppMetadata().then((function(){e.initialized=!0}))},p.prototype.getNumberOfShownItems=function(){var e=0;return this.shouldHideType(l.Dashboard)||(e+=this.dashboardCount),this.shouldHideType(l.Report)||(e+=this.reportCount),this.shouldHideType(l.Workbook)||(e+=this.workbookCount),e},p.prototype.resultsAreFiltered=function(){return this.ownership!==a.AllContent||!_.isEmpty(this.searchText)},p.prototype.hasEmptySearchResults=function(){return this.shouldHideDashboards()&&this.shouldHideReports()&&this.shouldHideWorkbooks()},p.prototype.shouldHideDashboards=function(){return this.shouldHide(l.Dashboard,this.dashboardCount)},p.prototype.shouldHideReports=function(){return this.shouldHide(l.Report,this.reportCount)},p.prototype.shouldHideWorkbooks=function(){return this.shouldHide(l.Workbook,this.workbookCount)},p.prototype.shouldHide=function(e,t){return this.shouldHideType(e)||0===t&&this.resultsAreFiltered()},p.prototype.shouldHideType=function(e){return 0===(this.typeFilter&e)},p.prototype.showManageDatasetsPane=function(){this.services.navigation.navigateToDatasets()},p.prototype.groupNavigationPaneMenuItemSelected=function(i,r){switch(i.action){case t.GroupNavigationPaneMenuAction.EditGroup:this.scope.$emit(e.constants.showTaskPaneSlider,c.GroupEditorEdit,o.Large);break;case t.GroupNavigationPaneMenuAction.ViewGroup:this.scope.$emit(e.constants.showTaskPaneSlider,c.GroupEditorView,o.Large);break;case t.GroupNavigationPaneMenuAction.LeaveGroup:this.leaveGroup()}},p.prototype.bindGroupNavigationPaneMenu=function(i){var o=this;this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.Calendar]=this.localizationService.get("GroupNavigationPaneContextMenuItem_Calendar"),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.Conversations]=this.localizationService.get("GroupNavigationPaneContextMenuItem_Conversations"),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.EditGroup]=this.localizationService.get("GroupNavigationPaneContextMenuItem_EditGroup"),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.Files]=this.localizationService.get("GroupNavigationPaneContextMenuItem_Files"),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.LeaveGroup]=this.localizationService.get("GroupNavigationPaneContextMenuItem_LeaveGroup"),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.Members]=this.localizationService.get("GroupNavigationPaneContextMenuItem_Members"),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.Notebook]=this.localizationService.get("GroupNavigationPaneContextMenuItem_Notebook"),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.ViewGroup]=this.localizationService.get("GroupNavigationPaneContextMenuItem_ViewGroup"),this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.Calendar]="calendar",this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.Conversations]="conversations",this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.EditGroup]="editGroup",this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.Files]="files",this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.LeaveGroup]="leaveGroup",this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.Members]="members",this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.Notebook]="notebook",this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.ViewGroup]="viewGroup";var r=i.metadata,a=[],n=0,s=!0;r?r.contextMenuItemList.forEach((function(i){if(0===n&&r.contextMenuSeparatorPosition===-1)s=!1;else if(n++===r.contextMenuSeparatorPosition){var c={type:DropDownMenuItemType.Separator};a.push(c),s=!1}var l;if(!s)switch(i.linkType){case e.common.contracts.GroupLinkType.EditGroup:l=t.GroupNavigationPaneMenuAction.EditGroup;break;case e.common.contracts.GroupLinkType.ViewGroup:l=t.GroupNavigationPaneMenuAction.ViewGroup;break;case e.common.contracts.GroupLinkType.LeaveGroup:l=t.GroupNavigationPaneMenuAction.LeaveGroup}var d={text:o.groupLinkTypeToDisplayNameMap[i.linkType],labelClass:o.groupLinkTypeToLabelClassMap[i.linkType],action:l,href:s?i.url:void 0,type:DropDownMenuItemType.Item};a.push(d)})):(a.push({text:this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.EditGroup],labelClass:this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.EditGroup],action:t.GroupNavigationPaneMenuAction.EditGroup,type:DropDownMenuItemType.Item}),a.push({text:this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.LeaveGroup],labelClass:this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.LeaveGroup],action:t.GroupNavigationPaneMenuAction.LeaveGroup,type:DropDownMenuItemType.Item})),this.groupContextMenu=a;var c=i.lastOwnershipFilter;this.selectedOwnershipFilter=_.find(this.ownershipFilterContextMenuItems,(function(e){return e.filter===c}))},p.prototype.leaveGroup=function(){var e=this,t=this.errorService,i=t.control(),o=[new InJs.ModalDialogAction(this.localizationService.get("ModalDialogButtonText_Leave"),function(t,o){i.hideDialog(),e.tryLeaveGroup()}),new InJs.ModalDialogAction(this.localizationService.get("ModalDialogButtonText_Cancel"),function(e,t){i.hideDialog()})],r=this.localizationService.get("GroupEditor_LeaveGroupConfirmation_Title"),a=this.localizationService.get("GroupEditor_LeaveGroupConfirmation_Message");i.showCustomDialog(r,$("<div/>").text(a),o,(function(t){t.parent().find('input[value="'+e.localizationService.get("ModalDialogButtonText_Cancel")+'"]').focus()}),!0)},p.prototype.tryLeaveGroup=function(){var t=this,i=this.errorService.control(),o=this.services.rootScope.$new(),r={dialogName:null,scope:o,template:'<spinner></spinner><span localize="GroupEditor_WaitLeaveGroup"></span>',containerCssClass:"leaveGroup",isDismissable:!1};this.services.modalDialogService.showLegacyWebModalDialog(r);var a=this.groupService.activeGroup,n=e.session.UserInfoUtils.getEmailAddressForReceivingMail();if(a.contract.isOwner){var s=this.telemetryService,c=s.startEvent(e.telemetry.GroupEditorGetGroupMembers);this.groupHttp.getGroupMembers(a.aadGroupId,c.event).then((function(e){if(t.isUserTheOnlyAdmin(n,e.data)){i.hideDialog();var o=[new InJs.ModalDialogAction(t.localizationService.get("ModalDialogButtonText_Ok"),function(e,t){i.hideDialog()})],r=t.localizationService.get("Groups_LeaveGroup_TheOnlyAdmin_Message");i.showCustomDialog("",$("<div/>").text(r),o,null,!0)}else t.leaveGroupInternal(n);c.resolve()}),(function(e){i.hideDialog(),t.errorService.error(t.localizationService.get("GroupEditor_FailedGetGroupMembers_Message"),"FailedToGetGroupMembers",{requestId:e.requestId,statusCode:e.status.toString()}),c.reject()}))}else this.leaveGroupInternal(n)},p.prototype.isUserTheOnlyAdmin=function(t,i){var o=0===_.filter(i,(function(i){return(i.membershipStatus===e.common.contracts.GroupMembershipStatus.Owner||i.membershipStatus===e.common.contracts.GroupMembershipStatus.MemberAndOwner)&&i.userPrincipalName.toLowerCase()!==t.toLowerCase()})).length;return o},p.prototype.persistFilter=function(){this.services.filterPersistenceService.setFilter(this.navigation.currentGroupGUID,{contentTileType:this.typeFilter,ownershipFilter:this.ownership,sortPredicate:this.sortPredicate.toAngularFilter()})},p.prototype.leaveGroupInternal=function(t){var i=this,o=[],r=[{userPrincipalName:t,membershipStatus:e.common.contracts.GroupMembershipStatus.Member}],a={displayName:""},n=this.telemetryService,s=n.startEvent(e.telemetry.GroupEditorUserLeaveGroup,!1,this.groupService.activeGroup.contract.objectId,this.groupService.activeGroup.contract.isReadOnly,0,0),c=this.errorService.control();this.groupHttp.updateGroup(this.groupService.activeGroup.aadGroupId,a,o,r,null,null,s.event).then((function(t){c.hideDialog(),i.groupService.removeGroup(i.groupService.activeGroupObjectId),i.navigation.navigateToGroupByGUID(e.constants.myWorkSpaceGroupId),s.event.info.groupUpdated=!0;var o=_.filter(t.data,(function(t){return t.membershipStatus!==e.common.contracts.GroupMembershipStatus.Owner})).length;s.event.info.adminCount=o,s.event.info.memberCount=t.data.length-o,s.resolve()}),(function(e){c.hideDialog(),i.errorService.error(i.localizationService.get("GroupEditor_FailedUpdateGroup_Message"),"FailedToUpdateGroup",{requestId:e.requestId,statusCode:e.status.toString()}),s.event.info.groupUpdated=!1,s.reject()}))},p.prototype.createLinkText=function(){var e=this.isOnlySharedWithMe()?this.services.localizationService.get("NavigationPane_Groups_MyWorkspace"):this.services.localizationService.get("NavigationPane_SharedWithMe");return this.services.localizationService.format("SearchIn",[e])},p.prototype.switchWorkspaceFromEmptySearch=function(){this.retainSearchTextOnNavigation=!0,this.services.navigation.navigateToContentList(e.constants.myWorkSpaceGroupId,!0,null,null,!this.isOnlySharedWithMe())},p.prototype.setActiveTab=function(e){this.activeTab=e,this.updateSortPredicates(),this.updateGalleryViewModel()},p.prototype.updateSortPredicates=function(){this.sortPredicates=e.models.factory.SelectTileSortItemsFactory.createPredicates(this.localizationService,this.activeTab)},p.prototype.updateGalleryViewModel=function(){var t=this;switch(this.galleryViewModel.tabType=this.activeTab,this.galleryViewModel.collapsiblePaneMode=this.collapsiblePaneMode,this.activeTab){case 0:case 64:this.galleryViewModel.getTiles=function(){return _.filter(t.filteredDashboards,(function(i){return t.selectedSharedByOwner===e.models.sharedByColumn.AllSharedOwnerObjectId||t.selectedSharedByOwner===e.models.sharedByColumn.OwnerInfo.getDashboardOwnerId(i)}))},this.galleryViewModel.finishLoadEvent=e.constants.contentListDashboardsLoadedEvent;break;case 2:this.galleryViewModel.getTiles=function(){return t.filteredReports},this.galleryViewModel.finishLoadEvent=e.constants.contentListReportsLoadedEvent;break;case 4:this.galleryViewModel.getTiles=function(){return t.filteredWorkbooks},this.galleryViewModel.finishLoadEvent=e.constants.contentListWorkbooksLoadedEvent;break;case 8:this.galleryViewModel.getTiles=function(){return t.filteredDatasets},this.galleryViewModel.finishLoadEvent=e.constants.contentListDatasetsLoadedEvent;break;case 32:this.galleryViewModel.getTiles=function(){return t.filteredPublishedApps},this.galleryViewModel.finishLoadEvent=e.constants.contentListPublishedAppsLoadedEvent}},p.prototype.getNumberOfShownTabItems=function(){var e=0;switch(this.activeTab){case 0:case 64:return e+=this.dashboardCount;case 2:return e+=this.reportCount;case 4:return e+=this.workbookCount;case 8:return e+=this.datasetCount;case 32:return e+=this.publishedAppsCount;default:return e}},p.prototype.addDashboard=function(){var t=this;this.services.overlayService.hideAllDropdowns();var i=this.services.localizationService;e.explore.controllers.showSaveAsDialog(this.services.errorService,i,i.get("ContentList_CreateDashboard_DialogTitle"),i.get("ContentList_CreateDashboard_DialogDetails"),i.get("ContentList_CreateDashboard_DialogButton")).then((function(e){t.services.contentList.addDashboard(e)}),(function(){}))},p.prototype.addReport=function(){this.services.overlayService.hideAllDropdowns(),this.services.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.OpenDataset)||this.createReportDialogBuilder.show()},p.prototype.showStreamingDatasetGalleryPane=function(){this.services.overlayService.hideAllDropdowns(),this.services.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.CreateStreamingDataset)||(this.services.realTimeModel.setSelected(null),this.services.featureSwitchService.featureSwitches.realTimePubNubEnabled?this.scope.$emit(e.constants.showTaskPaneSlider,c.StreamingDatasetGallery):this.scope.$emit(e.constants.showTaskPaneSlider,c.StreamingDatasetEditor))},p.prototype.addChannel=function(){this.services.navigation.showPublishAppSlicer()},p.prototype.getWatermarkConfig=function(){switch(this.activeTab){case 0:case 64:return this.internalGetWatermarkMessage("Dashboard");case 2:return this.internalGetWatermarkMessage("Report");case 4:return this.internalGetWatermarkMessage("Workbook");case 8:return this.internalGetWatermarkMessage("Dataset");case 32:return this.internalGetWatermarkMessage("PublishedApp")}},p.prototype.internalGetWatermarkMessage=function(e){var t=_.camelCase(e);return 0!==this[t+"Count"]||_.isEmpty(this.searchText)?this[t+"sArePresent"]?void 0:"dashboard"===t&&this.isOnlySharedWithMe()?this.emptySharedDashboards:this["empty"+e+"s"]:(this.emptySearch.linkText=this.createLinkText(),this.emptySearch)},p.skipWelcome="skipWelcome",p.contentListTab="contentListTab",p})();t.ContentListContainerController=p})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.ContentListContainer={templateUrl:"components/contentListContainer/contentListContainer.html",controller:e.common.Services.createController(e.controllers.ContentListContainerController),bindings:{collapsiblePaneMode:"<"}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.ContentListContainerV2={templateUrl:"components/contentListContainerV2/contentListContainerV2.html",controller:e.common.Services.createController(e.controllers.ContentListContainerController),bindings:{collapsiblePaneMode:"<"}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){var i=this;this.disableLazyLoading=!1,this.shouldShowAddDashboardBtn=function(){i.services.groupService.ensureGroupsInitialization().then((function(){i.showAddDashboardBtn=!i.services.groupService.activeGroup.contract.isReadOnly||i.services.groupService.activeGroup.contract.isOwner}))},this.scope=e,this.services=t,this.shouldShowAddDashboardBtn()}return t.createOptions=function(){return{additionalServices:["contentList","localizationService","errorService","groupService"]}},t.prototype.activeAddDashboard=function(){var t=this,i=this.services.localizationService;e.explore.controllers.showSaveAsDialog(this.services.errorService,i,i.get("ContentList_CreateDashboard_DialogTitle"),i.get("ContentList_CreateDashboard_DialogDetails"),i.get("ContentList_CreateDashboard_DialogButton")).then((function(e){t.services.contentList.addDashboard(e)}),(function(){}))},t})();t.ContentTileContainerController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e})();e.ContentListGalleryViewModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t="dashboardsGallery",i="reportsGallery",o="workbooksGallery",r="datasetsGallery",a="recentlyUsedGallery",n="channelsGallery",s="sharedWithMeGallery",c=(function(){function e(e,t){this.services=t}return Object.defineProperty(e.prototype,"galleryContainerStyle",{get:function(){switch(this.viewModel.tabType){case 0:return t;case 2:return i;case 4:return o;case 8:return r;case 16:return a;case 32:return n;case 64:return s}},enumerable:!0,configurable:!0}),e})();e.ContentListGalleryController=c})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.ContentListGallery={templateUrl:"components/contentListGallery/contentListGallery.html",bindings:{viewModel:"<",isDataClassificationEnabled:"<"},controller:e.common.Services.createController(e.controllers.ContentListGalleryController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.ContentTileContainer={templateUrl:"components/contentTileContainer/contentTileContainer.html",controller:e.common.Services.createController(e.controllers.ContentTileContainerController),transclude:{title:"?sectionTitle"},bindings:{getTiles:"&tiles",collapsiblePaneMode:"<",finishLoadEvent:"@",disableLazyLoading:"<?"}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.ContentRowContainer={templateUrl:"components/contentRowContainer/contentRowContainer.html",controller:e.common.Services.createController(e.controllers.ContentTileContainerController),bindings:{getTiles:"&tiles",tabType:"<",collapsiblePaneMode:"<",finishLoadEvent:"@",disableLazyLoading:"<?",isDataClassificationEnabled:"<"}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){function i(){var t=new s;return t.contentTileType=c.PublishedOrgApp,t.dashboardIds=[],t.reportIds=[],t.workbookIds=[],t.modelIds=[],t.icon=e.dataServices.models.AppModelIcons[0],t.iconColor=e.dataServices.models.AppModelIconColors[0],t.iconBackgroundColor=e.dataServices.models.AppModelIconBackgroundColors[0],t.defaultContentOption=0,t.isSharedToEntireOrg=!1,t.allowCopyContent=!1,t.emailsList=new p,t}function o(e){return e instanceof d?{dashboardObjectId:e.objectId}:e instanceof u?{reportObjectId:e.objectId}:e instanceof v?{workbookObjectId:e.uniqueId}:void 0}function r(e){var t={name:e.displayName,description:e.description,icon:e.localAppLogoImageData,parameterIcon:null,accessPermissions:{listOfGroupsOrPrincipals:_.map(e.emailsList.validEmailsList.concat(e.emailsList.validObjectIds),(function(e){return e.toLowerCase()})),isSharedToEntireOrganization:e.isSharedToEntireOrg},dashboardIds:e.dashboardIds,reportIds:e.reportIds,modelIds:e.modelIds,workbookIds:e.workbookIds,contentProviderCategory:e.publishAsTemplate?l.OrganizationalTemplateApp:l.OrganizationalApp,skipUpdateIcon:!n(e),appSettings:{defaultAppArtifact:0===e.defaultContentOption?null:e.defaultContent,iconName:e.icon,iconColor:e.iconColor,iconBackgroundColor:e.iconBackgroundColor,allowCopyContent:e.allowCopyContent}};return e.emailsList.inputUserList&&(t.accessPermissions.adUserMetadataList=e.emailsList.inputUserList),t}function a(e){return _.isEmpty(e.objectId)}function n(e){return!!e.localAppLogoImageData||!a(e)&&!!e.contract.iconUrl&&!!e.icon}var s=e.dataServices.models.AppPublishModel,c=e.common.contracts.ContentTileType,l=e.common.contracts.ContentProviderCategory,d=e.dataServices.models.Dashboard,p=e.common.models.EmailsListModel,u=e.common.models.Report,v=e.dataServices.models.Workbook;t.createNewAppPublishModel=i,t.createAppArtifact=o,t.createPublishOrUpdateAppModelRequest=r,t.isNewApp=a})(i=t.PublishAppHelper||(t.PublishAppHelper={}))})(t=e.helpers||(e.helpers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.AppUtils,o=e.common.dialog.MessageDialogBuilder,r=e.helpers.PublishAppHelper,a=(function(){function t(e,t){var i=this;this.services=t;var a=this.services.navigation.currentAppGUID;a?this.services.publishedAppService.getPublishedAppsPromise().then((function(e){i.originalViewModel=_.find(e,(function(e){return e.objectId===a})),i.originalViewModel?(i.viewModel=r.createNewAppPublishModel(),_.extend(i.viewModel,i.originalViewModel)):i.services.navigation.navigateBack()})):(this.originalViewModel=r.createNewAppPublishModel(),this.viewModel=r.createNewAppPublishModel()),this.activeTab=0,this.messageDialogBuilder=new o(t.modalDialogService)}return t.createOptions=function(){return{additionalServices:["errorService","localizationService","modalDialogService","modelConverter","navigation","notificationToast","publishedAppService","telemetryService"]}},t.prototype.publishApp=function(){var e=this;return this.isAppDetailsFormValid()&&this.isAppContentFormValid()&&this.isAppAccessFormValid()?this.messageDialogBuilder.show("PublishAppConfirmDialog",{titleText:"AppModel_ReadyTitle",messageText:"AppModel_ReadyContent",okButtonText:"Publish_ContentPackPublishButton",cancelButtonText:"PBI_Button_Label_Cancel"}).then((function(t){0===t&&e.publishAppInternal()})):this.messageDialogBuilder.show("AppModelNotReadyDialog",{titleText:"AppModel_NotReadyTitle",messageText:"AppModel_NotReadyContent",hideOKButton:!0,cancelButtonText:"PBI_Button_Label_Cancel"}).then((function(t){1===t&&(e.isAppDetailsFormValid()?e.isAppContentFormValid()?e.isAppAccessFormValid()||(e.activeTab=2):e.activeTab=1:e.activeTab=0)}))},t.prototype.isAppDetailsFormValid=function(){return!_.isEmpty(this.viewModel.displayName)&&!_.isEmpty(this.viewModel.description)},t.prototype.isAppContentFormValid=function(){var e=this.viewModel,t=!(_.isEmpty(e.dashboardIds)&&_.isEmpty(e.reportIds)&&_.isEmpty(e.workbookIds)&&_.isEmpty(e.modelIds)),i=0===e.defaultContentOption||1===e.defaultContentOption&&null!=e.defaultContent;return t&&i},t.prototype.isAppAccessFormValid=function(){var e=this.viewModel;return e.isSharedToEntireOrg||!_.isEmpty(e.emailsList.inputUserList)&&!e.emailsList.hasValidationError},t.prototype.publishAppInternal=function(){var t=this,o=this.services.errorService,a=this.services.notificationToast,n=this.services.localizationService,s=a.notify({message:n.get("AppModel_PublishingAppToastMessage"),notificationType:e.common.NotificationToastType.Loading});this.services.publishedAppService.publishOrUpdateApp(this.services.telemetryService.root,this.viewModel).then((function(o){var c=t.viewModel,l=t.originalViewModel;if(o&&null!=o.data){var d=o.data,p=r.isNewApp(t.viewModel);c.contract=_.extend(c.contract||{},d),c.objectId=c.objectId||d.providerKey,c.url=e.helpers.UrlHelper.getAppUrl(c),c.publishTime=i.getAppPublishDate(d)||new Date,_.extend(l,c),p&&t.services.publishedAppService.addPublishedApp(l),a.hide(s),a.notify({message:n.get("AppModel_PublishingAppSuccessToastMessage"),notificationType:e.common.NotificationToastType.Success}),t.services.navigation.showPublishAppSlicer(c.objectId)}}),(function(){a.hide(s),o.error(n.get("AppModel_PublishingAppFailMessage"),"FailToPublishOrUpdateApp")}))},t})();t.CreateAppChannelController=a})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.CreateAppChannel={templateUrl:"components/createAppChannel/createAppChannel.html",controller:e.common.Services.createController(e.controllers.CreateAppChannelController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.models.AppPublishModel,o=e.common.ArrowPosition,r=e.dataServices.models.Dashboard,a=e.helpers.UrlHelper,n=e.common.models.Report,s=e.dataServices.models.Workbook,c=5,l=(function(){function e(e,t){this.services=t,this.isDashboardUrlListExpanded=!1,this.isReportUrlListExpanded=!1,this.dashboardUrlListItemLimit=c,this.reportUrlListItemLimit=c,this.allowCopyContentTooltipConfig={tooltipLocalizeDescription:"AppModel_CreateAppModel_Access_AllowContentToBeCopiedTooltip",tooltipArrowPosition:o.arrowTopMiddle},this.dashboardUrlsTooltipConfig={tooltipLocalizeDescription:"AppModel_CreateAppModel_Access_DashboardUrlsTooltip",tooltipArrowPosition:o.arrowTopMiddle},this.reportUrlsTooltipConfig={tooltipLocalizeDescription:"AppModel_CreateAppModel_Access_ReportUrlsTooltip",tooltipArrowPosition:o.arrowTopMiddle},this.urlModelDictionary={}}return e.createOptions=function(){return{additionalServices:["dashboardDataService","localizationService","reportService","workbookService"]}},e.prototype.$onInit=function(){var e=this;this.isNewApp()?this.appAccessUrlMessage=this.services.localizationService.get("AppModel_CreateAppModel_Access_UrlMessage_NewApp"):(this.dashboardResources=_.map(this.viewModel.dashboardIds,(function(t){return e.services.dashboardDataService.findDashboard(t)})),this.reportResources=_.union(_.map(this.viewModel.reportIds,(function(t){return e.services.reportService.findReport(t)})),_.map(this.viewModel.workbookIds,(function(t){return e.services.workbookService.findWorkbook(t)}))),this.appAccessUrlMessage=this.services.localizationService.get("AppModel_CreateAppModel_Access_UrlMessage_ExistingApp"))},e.prototype.isNewApp=function(){return null==this.viewModel.objectId},e.prototype.toggleDashboardUrlList=function(){this.dashboardUrlListItemLimit=this.isDashboardUrlListExpanded?c:this.dashboardResources.length,this.isDashboardUrlListExpanded=!this.isDashboardUrlListExpanded},e.prototype.toggleReportUrlList=function(){this.reportUrlListItemLimit=this.isReportUrlListExpanded?c:this.reportResources.length,this.isReportUrlListExpanded=!this.isReportUrlListExpanded},e.prototype.shouldShowDashboardUrlToggle=function(){return this.dashboardResources.length>this.dashboardUrlListItemLimit},e.prototype.shouldShowReportUrlToggle=function(){return this.reportResources.length>this.reportUrlListItemLimit},e.prototype.hasDashboardResources=function(){return!_.isEmpty(this.dashboardResources)},e.prototype.hasReportResources=function(){return!_.isEmpty(this.reportResources)},e.prototype.getUrlLabelModel=function(e){return e instanceof i?this.getUrlLabelModelFromDictionary({displayName:e.url},this.urlModelDictionary):e instanceof r?this.getUrlLabelModelFromDictionary({displayName:this.getDashboardAppUrl(e)},this.urlModelDictionary):e instanceof n||e instanceof s?this.getUrlLabelModelFromDictionary({displayName:this.getReportAppUrl(e)},this.urlModelDictionary):void 0},e.prototype.getUrlLabelModelFromDictionary=function(e,t){var i=e.displayName,o=t[i];return o||(o=e,t[i]=o),o},e.prototype.getDashboardAppUrl=function(e){return a.getAppDashboardUrl(this.viewModel,e)},e.prototype.getReportAppUrl=function(e){return e instanceof n?a.getAppReportUrl(this.viewModel,e):e instanceof s?a.getAppWorkbookUrl(this.viewModel,e):void 0},e})();t.CreateAppChannelAccessController=l})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.CreateAppChannelAccess={templateUrl:"components/createAppChannelAccess/createAppChannelAccess.html",bindings:{viewModel:"<"},controller:e.common.Services.createController(e.controllers.CreateAppChannelAccessController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.models.Dashboard,o=e.common.models.Model,r=e.helpers.PublishAppHelper,a=e.common.models.Report,n=e.dataServices.models.Workbook,s=(function(){function t(t,i){this.services=i,this.defaultContentTooltipConfig={tooltipLocalizeDescription:"CreateApp_DefaultContentTooltip",tooltipArrowPosition:e.common.ArrowPosition.arrowTopMiddle},this.dashboardResources=this.services.dashboardDataService.editableAndReshareableDashboards,this.reportResources=_.union(this.services.reportService.editableReports,this.services.workbookService.originalWorkbooks),this.datasetResources=this.services.modelService.editableModels,this.appSpecificContentCandidates=[]}return t.createOptions=function(){return{additionalServices:["localizationService","dashboardDataService","reportService","modelService","workbookService"]}},t.prototype.$onInit=function(){this.updateDashboardsContainsInvalidContentDictionary(),this.updateAppContentItemStatus();var e=this.viewModel;1===e.defaultContentOption&&e.defaultContent&&(this.appSpecificContent=this.findAppSpecificContent(e.defaultContent))},t.prototype.$onDestroy=function(){this.resetAppContentItemsStatus()},t.prototype.getAppSpecificContentCandidateDisplayName=function(e){return e instanceof i?this.services.localizationService.format("CreateApp_DefaultContent_Dashboard",[e.displayName]):e instanceof a?this.services.localizationService.format("CreateApp_DefaultContent_Report",[e.displayName]):e instanceof n?this.services.localizationService.format("CreateApp_DefaultContent_Workbook",[e.displayName]):void 0},t.prototype.isDashboardDisabled=function(e){return!e.isEnabled||this.dashboardsContainsInvalidContentDictionary[e.objectId]},t.prototype.toggleDashboard=function(e){var t=this;this.toggleSpecificContentCandidateItem(e,this.viewModel.dashboardIds),this.toggleRelatedResources(e,_.map(e.contract.reportIds,(function(e){return t.services.reportService.findReport(e)}))),this.toggleRelatedResources(e,_.map(e.contract.workbookIds,(function(e){return t.services.workbookService.findWorkbook(e)}))),this.toggleRelatedResources(e,_.map(e.contract.modelIds,(function(e){return t.services.modelService.findModel(e)})))},t.prototype.isReportDisabled=function(t){return!t.isEnabled||t instanceof a&&!e.helpers.ReportUtility.IsReportSavedAsExploration(t.contract)},t.prototype.toggleReport=function(e){e instanceof a?this.toggleSpecificContentCandidateItem(e,this.viewModel.reportIds):e instanceof n&&this.toggleSpecificContentCandidateItem(e,this.viewModel.workbookIds),this.toggleRelatedResources(e,e.modelId?[this.services.modelService.findModel(e.modelId,e.packageId)]:null)},t.prototype.toggleDataset=function(e){this.toggleSpecificContentCandidateItem(e,this.viewModel.modelIds)},t.prototype.updateAppArtifact=function(){this.viewModel.defaultContent=this.appSpecificContent?r.createAppArtifact(this.appSpecificContent):null},t.prototype.updateAppContentItemStatus=function(){var e=this.viewModel;this.updateAppContentItem(e.dashboardIds,this.dashboardResources),this.updateAppContentItem(_.union(e.reportIds,e.workbookIds),this.reportResources),this.updateAppContentItem(e.modelIds,this.datasetResources)},t.prototype.toggleSpecificContentCandidateItem=function(e,t){(e instanceof i||e instanceof a||e instanceof n)&&(e.isSelected?this.appSpecificContentCandidates.push(e):_.pull(this.appSpecificContentCandidates,e)),e.isSelected?_.include(t,e.id)||t.push(e.id):_.pull(t,e.id)},t.prototype.updateDashboardsContainsInvalidContentDictionary=function(){this.dashboardsContainsInvalidContentDictionary={};for(var t=_.map(this.services.modelService.editableModels,(function(e){return e.id})),i=_.map(this.services.reportService.editableReports,(function(e){return e.id})),o=_.map(this.services.workbookService.originalWorkbooks,(function(e){return e.id})),r=0,a=this.services.dashboardDataService.dashboards;r<a.length;r++){var n=a[r];e.helpers.AppModelContentHelper.updateDashboardContainsInvalidContentDictionary(n,this.dashboardsContainsInvalidContentDictionary,this.services.reportService.reports,t,i,o)}},t.prototype.toggleRelatedResources=function(e,t){if(!_.isEmpty(t))for(var i=0,r=t;i<r.length;i++){var s=r[i];s.isEnabled=!e.isSelected,s.isSelected!==e.isSelected&&(s.isSelected=e.isSelected,s instanceof a?this.toggleSpecificContentCandidateItem(s,this.viewModel.reportIds):s instanceof n?this.toggleSpecificContentCandidateItem(s,this.viewModel.workbookIds):s instanceof o&&this.toggleSpecificContentCandidateItem(s,this.viewModel.modelIds))}},t.prototype.updateAppContentItem=function(e,t){if(!_.isEmpty(e))for(var o=function(e){var o=_.find(t,(function(t){return t.id===e}));o&&!o.isSelected&&(o.isSelected=!0,o instanceof i?r.toggleDashboard(o):(o instanceof a||o instanceof n)&&r.toggleReport(o))},r=this,s=0,c=e;s<c.length;s++){var l=c[s];o(l)}},t.prototype.resetAppContentItemsStatus=function(){this.resetAppContentItems(this.dashboardResources),this.resetAppContentItems(this.reportResources),this.resetAppContentItems(this.datasetResources)},t.prototype.resetAppContentItems=function(e){if(!_.isEmpty(e))for(var t=0,i=e;t<i.length;t++){var o=i[t];o.isSelected=!1,o.isEnabled=!0}},t.prototype.findAppSpecificContent=function(e){return this.services.dashboardDataService.findDashboardByGUID(e.dashboardObjectId)||this.services.reportService.findReportByGUID(e.reportObjectId)||this.services.workbookService.findWorkbookByUniqueId(e.workbookObjectId)},t})();t.CreateAppChannelContentController=s})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function i(t,i,r,a,n,s){if(!o(t,i,a,t.contract.modelIds)&&!o(t,i,n,t.contract.reportIds)&&!o(t,i,s,t.contract.workbookIds)){var c=t.contract.reportIds;if(!_.isEmpty(c))for(var l=function(o){var a=_.find(r,(function(e){return e.id===o}));if(a&&!e.ReportUtility.IsReportSavedAsExploration(a.contract))return i[t.objectId]=!0,{value:void 0}},d=0,p=c;d<p.length;d++){var u=p[d],v=l(u);if("object"==typeof v)return v.value}i[t.objectId]=!1}}function o(e,t,i,o){if(!_.isEmpty(o)){var r=_.difference(o,i);if(!_.isEmpty(r))return t[e.objectId]=!0,
!0}return!1}t.updateDashboardContainsInvalidContentDictionary=i})(t=e.AppModelContentHelper||(e.AppModelContentHelper={}))})(t=e.helpers||(e.helpers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.CreateAppChannelContent={templateUrl:"components/createAppChannelContent/createAppChannelContent.html",bindings:{viewModel:"<"},controller:e.common.Services.createController(e.controllers.CreateAppChannelContentController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.models.AppModelIconColors,o=e.dataServices.models.AppModelIconBackgroundColors,r=e.dataServices.models.AppModelIcons,a=e.dataServices.AppUtils,n=e.common.viewModels.IconSize,s=e.common.dialog.MessageDialogBuilder,c=".jpeg,.jpg,.png",l=45e3,d=(function(){function t(t,i){this.services=i,this.initIconConfigs(),this.localizationService=this.services.localizationService,this.appDescriptionPlaceholder=this.localizationService.get("AppModel_CreateAppModel_Details_DescriptionPlaceholder"),this.uploadImageTooltipConfig={tooltipLocalizeDescription:"AppModel_CreateAppModel_Details_UploadImageTooltip",tooltipArrowPosition:e.common.ArrowPosition.arrowTopMiddle},this.messageDialogBuilder=new s(i.modalDialogService)}return t.createOptions=function(){return{additionalServices:["localFileService","localizationService","promiseFactory","errorService","modalDialogService"]}},t.prototype.chooseAppLogoImage=function(){var e=this,t=this.services.promiseFactory.defer();t.promise.then((function(t){return e.readFileDataAsUrl(t)})).then((function(t){if(_.isEmpty(t)||t.length>l)e.services.errorService.error(e.localizationService.get("AppModel_CreateAppModel_Details_UploadFailureMessage"),"AppLogoImageUploadError");else{var i=e.viewModel;i.localAppLogoImageData=t,i.icon=i.iconColor=null}}),(function(){e.services.errorService.error(e.localizationService.get("AppModel_CreateAppModel_Details_UploadFailureMessage"),"AppLogoImageUploadError")})),this.services.localFileService.chooseLocalFile(t,c)},t.prototype.deleteAppLogoImage=function(){var e=this;return this.messageDialogBuilder.show("DeleteAppLogoImageDialog",{titleText:"AppModel_CreateAppModel_Details_DeleteImageWarningTitle",messageText:"AppModel_CreateAppModel_Details_DeleteImageWarningMessage",okButtonText:"ModalDialogButtonText_Remove",cancelButtonText:"PBI_Button_Label_Cancel"}).then((function(t){0===t&&e.deleteAppLogoImageInternal()}))},t.prototype.randomizeAppLogoIcon=function(){var e=this;this.updateIcon((function(){e.viewModel.iconBackgroundColor=_.sample(o),e.viewModel.iconColor=_.sample(i),e.viewModel.icon=_.sample(r)}))},t.prototype.hasAppLogoImage=function(){return a.hasAppLogoImage(this.viewModel)},t.prototype.readFileDataAsUrl=function(e){var t=this.services.promiseFactory.defer(),i=new FileReader;return i.onload=function(){return t.resolve(i.result)},i.onerror=function(){return t.reject()},i.readAsDataURL(e),t.promise},t.prototype.initIconConfigs=function(){var e=this;this.iconBackgroundColors=o.map((function(e){return{backgroundColor:e,size:n.Small}})),this.iconBackgroundColorsConfig={onIconSelected:function(t){return e.onIconBackgroundColorSelected(t)},isIconSelected:function(t){return e.viewModel.iconBackgroundColor===t.backgroundColor}},this.iconColors=i.map((function(e){return{backgroundColor:e,size:n.Small}})),this.iconColorsConfig={onIconSelected:function(t){return e.onIconColorSelected(t)},isIconSelected:function(t){return e.viewModel.iconColor===t.backgroundColor}},this.iconNames=r.map((function(e){return{iconName:e,size:n.Small,backgroundColor:"#FFF"}})),this.iconNamesConfig={onIconSelected:function(t){return e.onIconNameSelected(t)},isIconSelected:function(t){return e.viewModel.icon===t.iconName}}},t.prototype.deleteAppLogoImageInternal=function(){var e=this.viewModel;e.localAppLogoImageData=null,e.iconUrl=null,e.icon=r[0],e.iconColor=i[0]},t.prototype.onIconBackgroundColorSelected=function(e){this.viewModel.iconBackgroundColor=e.backgroundColor},t.prototype.onIconColorSelected=function(e){var t=this;this.updateIcon((function(){t.viewModel.iconColor=e.backgroundColor}))},t.prototype.onIconNameSelected=function(e){var t=this;this.updateIcon((function(){t.viewModel.icon=e.iconName}))},t.prototype.updateIcon=function(e){var t=this;this.hasAppLogoImage()?this.messageDialogBuilder.show("ReplaceAppLogoImageWithIconDialog",{messageText:"AppModel_ReplaceImageWithIconMessage",okButtonText:"ModalDialogButtonText_Yes",cancelButtonText:"PBI_Button_Label_Cancel"}).then((function(i){0===i&&(t.deleteAppLogoImageInternal(),e())})):e()},t})();t.CreateAppChannelDetailsController=d})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.CreateAppChannelDetails={templateUrl:"components/createAppChannelDetails/createAppChannelDetails.html",bindings:{viewModel:"<"},controller:e.common.Services.createController(e.controllers.CreateAppChannelDetailsController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){this.isDataClassificationFeatureEnabled=t.featureSwitchService.featureSwitches.dataClassificationEnabled,this.dataClassificationService=t.dataClassificationService}return e.createOptions=function(){return{additionalServices:["featureSwitchService","dataClassificationService"]}},e.prototype.$onInit=function(){this.updateDataClassificationById(this.classificationId)},e.prototype.$onChanges=function(e){e.classificationId&&this.updateDataClassificationById(e.classificationId.currentValue)},e.prototype.updateDataClassificationById=function(e){var t=this;this.dataClassificationService.getDataClassificationsAsync().then((function(i){t.dataClassification=_.find(i,(function(t){return void 0!==e&&t.id===e}))||_.find(i,(function(e){return e.default}))}))},e})();e.DataClassificationLabelController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.ClassificationLabel={templateUrl:"components/dataClassificationLabel/dataClassificationLabel.html",controller:e.common.Services.createController(e.controllers.DataClassificationLabelController),bindings:{classificationId:"<"}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.models.CollapsiblePaneExpandedWidth,o=e.common.contracts.GroupLinkType,r=e.common.constants.TaskPaneCollapsiblePaneMode,a=(function(){function a(e,t){this.services=t}return a.createOptions=function(){return{additionalServices:["$rootScope","errorService","groupHttp","groupService","localizationService","modalDialogService","navigation","promiseFactory","telemetryService","userInfo","viralTenantMergeHelperService"]}},a.prototype.$onInit=function(){this.items=this.buildContextMenu(this.group)},a.prototype.$onChanges=function(e){e.group&&(this.items=this.buildContextMenu(this.group))},a.prototype.onGroupNavigationPaneMenuItemSelected=function(o,a){var n={group:a};switch(o.action){case t.GroupNavigationPaneMenuAction.EditGroup:this.services.$rootScope.$emit(e.constants.showTaskPaneSlider,r.GroupEditorEdit,i.Large,n);break;case t.GroupNavigationPaneMenuAction.ViewGroup:this.services.$rootScope.$emit(e.constants.showTaskPaneSlider,r.GroupEditorView,i.Large,n);break;case t.GroupNavigationPaneMenuAction.LeaveGroup:this.leaveGroup(a)}},a.prototype.buildContextMenu=function(e){var i=this,r=e.metadata,a=[],n=0,s=!0;return r?r.contextMenuItemList.forEach((function(e){if(0===n&&r.contextMenuSeparatorPosition===-1)s=!1;else if(n++===r.contextMenuSeparatorPosition){var c={type:DropDownMenuItemType.Separator};a.push(c),s=!1}var l;if(!s)switch(e.linkType){case o.EditGroup:l=t.GroupNavigationPaneMenuAction.EditGroup;break;case o.ViewGroup:l=t.GroupNavigationPaneMenuAction.ViewGroup;break;case o.LeaveGroup:l=t.GroupNavigationPaneMenuAction.LeaveGroup}var d={text:i.getMenuItemText(e.linkType),labelClass:"groupMenuItem",action:l,href:s?e.url:void 0,type:DropDownMenuItemType.Item};a.push(d)})):(a.push({text:this.getMenuItemText(o.EditGroup),labelClass:"groupMenuItem",action:t.GroupNavigationPaneMenuAction.EditGroup,type:DropDownMenuItemType.Item}),a.push({text:this.getMenuItemText(o.LeaveGroup),labelClass:"groupMenuItem",action:t.GroupNavigationPaneMenuAction.LeaveGroup,type:DropDownMenuItemType.Item})),a},a.prototype.getMenuItemText=function(e){switch(e){case o.Calendar:return this.services.localizationService.get("GroupNavigationPaneContextMenuItem_Calendar");case o.Conversations:return this.services.localizationService.get("GroupNavigationPaneContextMenuItem_Conversations");case o.EditGroup:return this.services.localizationService.get("GroupNavigationPaneContextMenuItem_EditGroup");case o.Files:return this.services.localizationService.get("GroupNavigationPaneContextMenuItem_Files");case o.LeaveGroup:return this.services.localizationService.get("GroupNavigationPaneContextMenuItem_LeaveGroup");case o.Members:return this.services.localizationService.get("GroupNavigationPaneContextMenuItem_Members");case o.Notebook:return this.services.localizationService.get("GroupNavigationPaneContextMenuItem_Notebook");case o.ViewGroup:return this.services.localizationService.get("GroupNavigationPaneContextMenuItem_ViewGroup");default:return""}},a.prototype.leaveGroup=function(e){var t=this,i=this.services.errorService,o=i.control(),r=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Leave"),function(i,r){o.hideDialog(),t.tryLeaveGroup(e)}),new InJs.ModalDialogAction(this.services.localizationService.get("PBI_Button_Label_Cancel"),function(e,t){o.hideDialog()})],a=this.services.localizationService.get("GroupEditor_LeaveGroupConfirmation_Title"),n=this.services.localizationService.get("GroupEditor_LeaveGroupConfirmation_Message");o.showCustomDialog(a,$("<div/>").text(n),r,(function(e){e.parent().find('input[value="'+t.services.localizationService.get("PBI_Button_Label_Cancel")+'"]').focus()}),!0)},a.prototype.tryLeaveGroup=function(t){var i=this,o=this.services.errorService.control(),r=this.services.promiseFactory.defer(),a=this.services.$rootScope.$new(),n={dialogName:null,scope:a,template:'<spinner></spinner><span localize="GroupEditor_WaitLeaveGroup"></span>',containerCssClass:"leaveGroup",isDismissable:!1};this.services.modalDialogService.showLegacyWebModalDialog(n);var s=e.session.UserInfoUtils.getEmailAddressForReceivingMail();if(t.contract.isOwner){var c=this.services.telemetryService,l=c.startEvent(e.telemetry.GroupEditorGetGroupMembers);this.services.groupHttp.getGroupMembers(t.aadGroupId,l.event).then((function(e){if(i.isUserTheOnlyAdmin(s,e.data)){o.hideDialog();var a=[new InJs.ModalDialogAction(i.services.localizationService.get("ModalDialogButtonText_Ok"),function(e,t){o.hideDialog()})],n=i.services.localizationService.get("Groups_LeaveGroup_TheOnlyAdmin_Message");o.showCustomDialog("",$("<div/>").text(n),a,null,!0),l.resolve(),r.resolve(!1)}else l.resolve(),i.leaveGroupInternal(t,s).then((function(e){r.resolve(e)}))}),(function(t){o.hideDialog(),i.services.errorService.error(i.services.localizationService.get("GroupEditor_FailedGetGroupMembers_Message"),"FailedToGetGroupMembers",{requestId:t.requestId,statusCode:t.status.toString()}),l.reject(e.errorDetailsHelper.getTelemetryErrorDetails(t.error,t.status)),r.resolve(!1)}))}else this.leaveGroupInternal(t,s).then((function(e){r.resolve(e)}));return r.promise},a.prototype.leaveGroupInternal=function(t,i){var o=this,r=this.services.promiseFactory.defer(),a=[],n=[{userPrincipalName:i,membershipStatus:e.common.contracts.GroupMembershipStatus.Member}],s={displayName:""},c=this.services.telemetryService,l=c.startEvent(e.telemetry.GroupEditorUserLeaveGroup,!1,t.contract.objectId,t.contract.isReadOnly,0,0),d=this.services.errorService.control();return this.services.groupHttp.updateGroup(t.aadGroupId,s,a,n,null,null,l.event).then((function(i){d.hideDialog(),o.services.groupService.removeGroup(t.aadGroupId),o.onLeaveGroup(),o.services.navigation.navigateToGroupByGUID(e.constants.myWorkSpaceGroupId),l.event.info.groupUpdated=!0;var a=_.filter(i.data,(function(t){return t.membershipStatus!==e.common.contracts.GroupMembershipStatus.Owner})).length;l.event.info.adminCount=a,l.event.info.memberCount=i.data.length-a,l.resolve(),r.resolve(!0)}),(function(t){d.hideDialog(),o.services.errorService.error(o.services.localizationService.get("GroupEditor_FailedUpdateGroup_Message"),"FailedToUpdateGroup",{requestId:t.requestId,statusCode:t.status.toString()}),l.event.info.groupUpdated=!1,l.reject(e.errorDetailsHelper.getTelemetryErrorDetails(t.error,t.status)),r.resolve(!1)})),r.promise},a.prototype.isUserTheOnlyAdmin=function(t,i){var o=0===_.filter(i,(function(i){return(i.membershipStatus===e.common.contracts.GroupMembershipStatus.Owner||i.membershipStatus===e.common.contracts.GroupMembershipStatus.MemberAndOwner)&&i.userPrincipalName.toLowerCase()!==t.toLowerCase()})).length;return o},a})();t.GroupActionsController=a})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.GroupActions={templateUrl:"components/groupActions/groupActions.html",controller:e.common.Services.createController(e.controllers.GroupActionsController),bindings:{group:"<",onLeaveGroup:"&"}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){this.scope=e,this.services=t}return t.createOptions=function(){return{additionalServices:["userInfo"]}},t.prototype.$onInit=function(){this.updatePhoto(),this.updatePlaceholder()},t.prototype.$onChanges=function(e){e.group&&(this.updatePhoto(),this.updatePlaceholder())},t.prototype.updatePlaceholder=function(){this.placeholder=this.isMyWorkspace()?"user":"group"},t.prototype.updatePhoto=function(){var e=this;this.isMyWorkspace()?this.services.userInfo.getUserPhoto().then((function(t){e.src=t.substring(4,t.length-1)})):this.group?this.src=this.group.icon:this.src=null},t.prototype.isMyWorkspace=function(){return this.group&&this.group.aadGroupId===e.common.constants.myWorkspaceGroupId},t})();t.GroupIconController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.GroupIcon={templateUrl:"components/groupIcon/groupIcon.html",bindings:{group:"<",placeholderSize:"@"},controller:e.common.Services.createController(e.controllers.GroupIconController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.models.CollapsiblePaneExpandedWidth,o=e.common.constants.TaskPaneCollapsiblePaneMode,r=(function(){function t(e,t){this.services=t,this.groupService=t.groupService}return t.createOptions=function(){return{additionalServices:["$rootScope","groupService","userInfo","navigation","viralTenantMergeHelperService"]}},t.prototype.$onChanges=function(e){(e.activeGroup||e.isExpanded&&this.isExpanded)&&this.updateGroupList()},t.prototype.isGroupSelected=function(e){return!!this.activeGroup&&this.activeGroup.aadGroupId===e.aadGroupId},t.prototype.switchGroup=function(t){this.toggleGroupListPane(!1),t.aadGroupId!==this.activeGroup.aadGroupId?t.isMyWorkspace||this.isGroupFeatureEnabled()?this.services.navigation.navigateToGroupByGUID(t.aadGroupId):this.groupService.showGroupUpsellMessage(e.telemetry.LicenseEnforcementOperation.SwitchGroups):this.services.navigation.navigateToContentList(t.aadGroupId,!1,null,null,!1)},t.prototype.toggleGroupListPane=function(e){this.onToggled&&this.onToggled({isExpanded:e})},t.prototype.addGroup=function(){this.services.viralTenantMergeHelperService.viewingDataFromMergedViralTenant()?this.services.viralTenantMergeHelperService.displayFeatureDisabledErrorMessage("ArchivedContent_ErrorMessageGroup"):this.isGroupFeatureEnabled()?this.services.$rootScope.$emit(e.constants.showTaskPaneSlider,o.GroupEditorCreate,i.Large):this.groupService.showGroupUpsellMessage(e.telemetry.LicenseEnforcementOperation.CreateGroups)},t.prototype.isActiveGroup=function(e){return e===this.activeGroup},t.prototype.updateGroupList=function(){this.myWorkspace=this.groupService.groups[0],this.groups=_(this.groupService.groups).filter((function(e){return!e.isMyWorkspace})).sortBy((function(e){return e.displayName})).value()},t.prototype.isGroupFeatureEnabled=function(){return this.services.userInfo.isPremiumUser},t})();t.GroupListController=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.GroupList={templateUrl:"components/groupList/groupList.html",controller:e.common.Services.createController(e.controllers.GroupListController),bindings:{activeGroup:"<",isExpanded:"<",onToggled:"&"}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.controllers.EmailsList,o=e.errorDetailsHelper,r=e.common.contracts.GroupMembershipStatus,a=(function(){function t(e,t){this.scope=e,this.services=t,this.readOnlyGroupEnabled=this.services.featureSwitchService.featureSwitches.readOnlyGroupEnabled}return t.prototype.isEmailListChanged=function(){var e=this.model.originalDisplayMemberList,t=this.model.displayMemberList;if(e.length!==t.length)return!0;var i=this.contractGroupMembersToArray(e),o=this.contractGroupMembersToArray(t),r=_.difference(i,o);return!_.isEmpty(r)},t.prototype.add=function(){this.model.invalidEmailAddressesErrorMessage="",this.model.notExitingEmailAddressesErrorMessage="",this.model.emailsList.validationTrigger()&&(this.isAddingMembers=!0,this.validateEmailAddresses())},t.prototype.removeMember=function(e){if(this.isMemberTheOnlyAdmin(e)){var t=this.services.errorService.control(),i=this.services.localizationService;t.showPrompt("",i.get("GroupEditor_TheOnlyAdmin_Message"),[new InJs.ModalDialogAction(i.get("ModalDialogButtonText_Ok"),function(e,i){t.hideDialog()})])}else this.model.emailsList.isDirty=!1,this.model.displayMemberList=_.filter(this.model.displayMemberList,(function(t){return t.userPrincipalName!==e.userPrincipalName}))},t.prototype.getGroupMembers=function(){var t=this;this.isLoadingGroupMembers=!0;var i=this.services.telemetryService.startEvent(e.telemetry.GroupEditorGetGroupMembers),r=this.group.aadGroupId;this.services.groupHttp.getGroupMembers(r,i.event).then((function(e){var o=_.sortBy(t.mapFromMemberContractListToMemberModelList(e.data),(function(e){return e.userPrincipalName}));t.model.originalDisplayMemberList=o,t.model.displayMemberList=_.cloneDeep(o),i.resolve()}),(function(e){i.reject(o.getTelemetryErrorDetails(e.error,e.status)),t.services.errorService.error(t.services.localizationService.get("GroupEditor_FailedGetGroupMembers_Message"),"FailedToGetGroupMembers",{requestId:e.requestId,statusCode:e.status.toString()})})).finally((function(){t.isLoadingGroupMembers=!1}))},t.prototype.validateEmailAddresses=function(){var t=this;if(this.model.emailsList.validEmailsList=_.unique(_.map(this.model.emailsList.validEmailsList,(function(e){return e.toLowerCase()}))),this.model.emailsList.validEmailsList=_.difference(this.model.emailsList.validEmailsList,_.map(this.model.displayMemberList,(function(e){return e.userPrincipalName.toLowerCase()}))),this.model.emailsList.validEmailsList.length>0){var i=_.map(this.model.emailsList.validEmailsList,(function(e){return{userPrincipalName:e,membershipStatus:r.Member}})),a=this.services.telemetryService.startEvent(e.telemetry.GroupEditorValidateGroupMembers);this.services.domainHelperService.getVerifiedDomains().then((function(e){t.services.groupHttp.validateGroupMembers(i,a.event).then((function(i){for(var o=[],r={},n=0,s=i.data;n<s.length;n++){var c=s[n],l=c.userPrincipalName.split("@");l[1].toUpperCase()in e.verifiedDomains?r[c.userPrincipalName]=1:o.push(c)}t.displayValidationErrors(o);var d=t.contractGroupMembersToArray(o),p=_.difference(t.model.emailsList.validEmailsList,d);t.model.displayMemberList=_.union(t.model.displayMemberList,_.map(p,(function(e){return{userPrincipalName:e,role:e in r?2:0,invitationSent:!1}}))),t.model.emailsList.isDirty=!1,a.resolve()}),(function(e){a.reject(o.getTelemetryErrorDetails(e.error,e.status)),t.services.errorService.error(t.services.localizationService.get("GroupEditor_FailedValidateMembers_Message"),"FailedToValidateMembers",{requestId:e.requestId,statusCode:e.status.toString()})}))}),(function(e){a.reject(o.getTelemetryErrorDetails(e.error,e.status))})).finally((function(){t.isAddingMembers=!1}))}else this.displayValidationErrors([]),this.setEmailsListContent(""),this.model.emailsList.isDirty=!1,this.isAddingMembers=!1},t.prototype.setEmailsListContent=function(t){this.model.emailsList.inputUserList=i.emailsToUsers(t.split(e.constants.emailsListSeparator))},t.prototype.resetEmailsListControl=function(e){this.model.invalidEmailAddressesErrorMessage="",this.displayValidationErrors(e)},t.prototype.mapFromMemberModelListToMemberContractList=function(e){return _.map(e,(function(e){return{userPrincipalName:e.userPrincipalName,membershipStatus:1===e.role?r.MemberAndOwner:r.Member}}))},t.prototype.mapFromMemberContractListToMemberModelList=function(e){var t=this;return _.map(e,(function(e){return{userPrincipalName:e.userPrincipalName,role:t.convertMemberRole(e),invitationSent:e.membershipStatus===r.Pending}}))},t.prototype.getAccessControlOption=function(){var e=this.model.accessControlOption;if(null!=e){var t=_.find(this.model.accessControlOptions,{key:e});return t.value}},t.prototype.getPrivacyOption=function(){var e=this.model.privacyOption;if(null!=e){var t=_.find(this.model.privacyOptions,{key:e});return t.value}},t.prototype.cancel=function(){this.scope.$emit(e.constants.hideTaskPaneSlider)},t.prototype.isMemberTheOnlyAdmin=function(e){if(1===e.role){var t=_.filter(this.model.displayMemberList,(function(e){return 1===e.role}));return 1===t.length&&t[0].userPrincipalName.toLowerCase()===e.userPrincipalName.toLowerCase()}return!1},t.prototype.displayValidationErrors=function(e){this.model.invalidEmailAddressesErrorMessage=this.model.emailsList.hasValidationError?this.model.emailsList.errorMessage:"";var t=this.arrayStringsToSeparatorTerminatedString(this.contractGroupMembersToArray(e));this.model.notExitingEmailAddressesErrorMessage=_.isEmpty(t)?"":this.services.localizationService.format("GroupEditor_Email_Address_DoNotExist",[t]),this.setEmailsListContent(t)},t.prototype.arrayStringsToSeparatorTerminatedString=function(t){var i=t.join(e.constants.emailsListSeparator).toLowerCase();return _.isEmpty(i)||_.endsWith(i,e.constants.emailsListSeparator)||(i+=e.constants.emailsListSeparator),i},t.prototype.convertMemberRole=function(e){switch(e.membershipStatus){case r.Pending:return 2;case r.Member:return 0;case r.MemberAndOwner:case r.Owner:return 1;default:return 0}},t.prototype.contractGroupMembersToArray=function(e){var t=_.map(e,(function(e){return e.userPrincipalName.toLowerCase()}));return t},t})();t.GroupEditorBaseController=a})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.errorDetailsHelper,o=/[^a-zA-Z0-9_-]/g,r=(function(t){function r(i,o){var r=this;t.call(this,i,o);var a=new e.models.Group(null);this.model=new e.models.GroupEditorModel(a),this.scope.$watch("this.model.emailsList.emailAddresses",(function(e,t){t!==e&&(e||(r.model.invalidEmailAddressesErrorMessage="",r.model.notExitingEmailAddressesErrorMessage=""))}),!0)}return __extends(r,t),r.createOptions=function(){return{additionalServices:["domainHelperService","errorService","featureSwitchService","groupHttp","groupService","localizationService","navigation","telemetryService","modalDialogService"]}},Object.defineProperty(r.prototype,"canSave",{get:function(){return this.model.groupName&&0===this.groupValidationStatus&&!this.isValidatingGroupId&&!this.isAddingMembers&&!this.isLoadingGroupMembers},enumerable:!0,configurable:!0}),r.prototype.save=function(){var t=this;this.isSaving=!0;var o=this.mapFromMemberModelListToMemberContractList(this.model.displayMemberList),r={displayName:this.model.groupName,mailNickname:this.model.groupId,isPublic:0===this.model.privacyOption,isReadOnly:1===this.model.accessControlOption,members:o},a=_.filter(r.members,(function(t){return t.membershipStatus!==e.common.contracts.GroupMembershipStatus.Member})).length,n=this.services.telemetryService,s=n.startEvent(e.telemetry.GroupEditorCreateGroup,!1,"",r.isReadOnly,a,r.members.length-a,_.filter(this.model.displayMemberList,(function(e){return 2===e.role})).length);this.services.groupHttp.addGroup(r,s.event).then((function(i){if(_.isEmpty(i.data.group.objectId))t.resetEmailsListControl(i.data.invalidMembers),s.event.info.groupCreated=!1,s.resolve();else{t.services.groupService.addGroup(i.data.group);var o=t.services.groupService.getGroup(i.data.group.objectId);t.services.groupService.switchGroup(o,!1,s),t.services.navigation.navigateToGroupWelcome(),s.event.info.groupId=i.data.group.objectId,s.event.info.groupCreated=!0,s.resolve(),t.services.rootScope.$emit(e.constants.groupAddedUpdateContextMenuEventName,i.data.group.objectId),t.scope.$emit(e.constants.hideTaskPaneSlider)}}),(function(e){s.reject(i.getTelemetryErrorDetails(e.error,e.status)),t.services.errorService.error(t.services.localizationService.get("GroupEditor_FailedCreateGroup_Message"),"FailedToCreateGroup",{requestId:e.requestId,statusCode:e.status.toString()})})).finally((function(){t.isSaving=!1}))},r.prototype.groupNameKeyUp=function(e){_.isEmpty(this.model.groupName)?(this.isEditingGroupId=!1,this.model.groupId="",this.groupValidationStatus=0):this.isEditingGroupId||(this.model.groupId=this.model.groupName.replace(o,"").toLowerCase(),this.checkGroupIdAvailability())},r.prototype.editGroupId=function(){this.isEditingGroupId=!0},r.prototype.hasGroupIdInvalidCharacters=function(){var e=this.model.groupId.match(o);null!==e&&(this.groupValidationStatus=3)},r.prototype.groupIdKeyUp=function(){this.groupValidationStatus=0,this.hasGroupIdInvalidCharacters(),3!==this.groupValidationStatus&&this.checkGroupIdAvailability()},r.prototype.checkGroupIdAvailability=function(){var e=this;if(!this.validateGroupIdPromise&&!_.isEmpty(this.model.groupId)&&this.model.groupId!==this.validatedGroupId){var t=this.model.groupId,i=function(){e.validateGroupIdPromise=null,e.validatedGroupId=t,e.checkGroupIdAvailability()};this.validateGroupIdPromise=this.validateGroupId(t),this.validateGroupIdPromise.then(i,i)}},r.prototype.validateGroupId=function(t){var o=this,r=this.services.telemetryService.startEvent(e.telemetry.GroupEditorValidateGroupId);this.isValidatingGroupId=!0;var a=this.services.groupHttp.validateGroupId(t,r.event);return a.then((function(e){o.groupValidationStatus=e.data?0:1,r.resolve()}),(function(e){o.groupValidationStatus=2,r.reject(i.getTelemetryErrorDetails(e.error))})).finally((function(){o.isValidatingGroupId=!1})),a},r})(t.GroupEditorBaseController);t.CreateGroupBladeController=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.CreateGroupBlade={controller:e.common.Services.createController(e.controllers.CreateGroupBladeController),templateUrl:"components/groupEditor/create/createGroupBlade.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.errorDetailsHelper,o=(function(t){function o(e,i){t.call(this,e,i)}return __extends(o,t),o.createOptions=function(){return{additionalServices:["domainHelperService","errorService","featureSwitchService","groupHttp","groupService","localizationService","navigation","telemetryService","modalDialogService"]}},o.prototype.$onInit=function(){var t=this;this.group=this.parameters.group||this.services.groupService.activeGroup,this.model=new e.models.GroupEditorModel(this.group),this.scope.$watch("this.model.emailsList.emailAddresses",(function(e,i){i!==e&&(e||(t.model.invalidEmailAddressesErrorMessage="",t.model.notExitingEmailAddressesErrorMessage=""))}),!0),0!==this.model.privacyOption||this.model.isAdmin||(this.editNonAdmin=!0),this.oldGroupName=this.model.groupName,this.getGroupMembers()},Object.defineProperty(o.prototype,"canSave",{get:function(){return!this.isAddingMembers&&!this.isLoadingGroupMembers},enumerable:!0,configurable:!0}),o.prototype.compareGroupMemberByUserPrincipalName=function(e,t){return e.userPrincipalName>t.userPrincipalName?1:e.userPrincipalName===t.userPrincipalName?0:-1},o.prototype.prepareMemberOperations=function(e,t,i,o){for(var r=this.model.displayMemberList.sort(this.compareGroupMemberByUserPrincipalName),a=this.model.originalDisplayMemberList.sort(this.compareGroupMemberByUserPrincipalName),n=0,s=r.length,c=0,l=a.length;n<s||c<l;){var d=r[n],p=a[c],u=void 0;switch(u=void 0===d?1:void 0===p?-1:this.compareGroupMemberByUserPrincipalName(d,p)){case-1:e.push(d),n++;break;case 0:n++,c++,1===d.role&&0===p.role?i.push(d):0===d.role&&1===p.role&&o.push(d);break;case 1:t.push(p),c++}}},o.prototype.save=function(){var t=this;if(this.isSaving=!0,0===_.filter(this.model.displayMemberList,(function(e){return 1===e.role})).length){var o=this.services.errorService,r=o.control();return r.showPrompt("",this.services.localizationService.get("GroupEditor_TheOnlyAdmin_Message"),[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Ok"),function(e,t){r.hideDialog()})]),void(this.isSaving=!1)}var a=[],n=[],s=[],c=[];this.prepareMemberOperations(a,n,s,c);var l={displayName:this.oldGroupName!==this.model.groupName?this.model.groupName:"",isReadOnly:this.model.accessControlOption===this.originalAccessControlOption?null:1===this.model.accessControlOption},d=_.filter(this.model.displayMemberList,(function(e){return 1===e.role})).length,p=this.services.telemetryService,u=p.startEvent(e.telemetry.GroupEditorUpdateGroup,!1,this.group.contract.objectId,l.isReadOnly,d,this.model.displayMemberList.length-d,_.filter(this.model.displayMemberList,(function(e){return 2===e.role})).length);this.services.groupHttp.updateGroup(this.group.aadGroupId,l,this.mapFromMemberModelListToMemberContractList(a),this.mapFromMemberModelListToMemberContractList(n),this.mapFromMemberModelListToMemberContractList(s),this.mapFromMemberModelListToMemberContractList(c),u.event).then((function(i){var o=_.filter(i.data,(function(t){return t.membershipStatus!==e.common.contracts.GroupMembershipStatus.Pending}));if(o&&0===o.length){t.group.displayName=t.model.groupName,t.group.contract.isReadOnly=1===t.model.accessControlOption;var r=e.session.UserInfoUtils.getEmailAddressForReceivingMail();_.filter(n,(function(e){return e.userPrincipalName&&r&&e.userPrincipalName.toLowerCase()===r.toLowerCase()})).length>0&&(t.services.groupService.removeGroup(t.group.aadGroupId),t.services.groupService.setDefaultActiveGroup(),t.services.navigation.navigateToGroupByGUID(t.services.groupService.activeGroupObjectId)),u.event.info.groupUpdated=!0,u.resolve(),t.scope.$emit(e.constants.hideTaskPaneSlider)}else u.event.info.groupUpdated=!1,u.resolve(),t.resetEmailsListControl(o)}),(function(e){u.reject(i.getTelemetryErrorDetails(e.error,e.status)),t.services.errorService.error(t.services.localizationService.get("GroupEditor_FailedUpdateGroup_Message"),"FailedToUpdateGroup",{requestId:e.requestId,statusCode:e.status.toString()})})).finally((function(){t.isSaving=!1}))},o.prototype.deleteGroup=function(){var e=this,t=this.services.localizationService,i=this.services.errorService.control(),o=[new InJs.ModalDialogAction(t.get("ModalDialogButtonText_Delete"),function(t,o){e.deleteGroupInternal(),i.hideDialog()}),new InJs.ModalDialogAction(t.get("ModalDialogButtonText_Cancel"),function(e,t){i.hideDialog()})],r=this.services.localizationService.get("GroupEditor_AreYouSureYouWantToDeleteGroup_Title"),a=this.services.localizationService.get("GroupEditor_AreYouSureYouWantToDeleteGroup_Message");i.showCustomDialog(r,$("<div/>").text(a),o,(function(t){t.parent().find('input[value="'+e.services.localizationService.get("ModalDialogButtonText_Cancel")+'"]').focus()}),!0);
},o.prototype.deleteGroupInternal=function(){var t=this;this.isDeletingGroup=!0;var o=this.services.telemetryService,r=o.startEvent(e.telemetry.GroupEditorDeleteGroup),a=this.services.errorService.control(),n=this.services.rootScope.$new(),s={dialogName:null,scope:n,template:'<spinner></spinner><span localize="GroupEditor_WaitDeleteGroup"></span>',containerCssClass:"deleteGroup",isDismissable:!1};this.services.modalDialogService.showLegacyWebModalDialog(s),this.services.groupHttp.deleteGroup(this.group.aadGroupId,r.event).then((function(i){a.hideDialog(),r.resolve(),t.scope.$emit(e.constants.hideTaskPaneSlider),t.services.groupService.removeGroup(t.group.aadGroupId),t.services.navigation.navigateToGroupByGUID(e.constants.myWorkSpaceGroupId)}),(function(e){r.reject(i.getTelemetryErrorDetails(e.error,e.status)),a.hideDialog(),t.services.errorService.error(t.services.localizationService.get("GroupEditor_FailedDeleteGroup_Message"),"FailedToDeleteGroup",{requestId:e.requestId,statusCode:e.status.toString()})})).finally((function(){t.isDeletingGroup=!1}))},o})(t.GroupEditorBaseController);t.EditGroupBladeController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.EditGroupBlade={controller:e.common.Services.createController(e.controllers.EditGroupBladeController),bindings:{parameters:"<"},templateUrl:"components/groupEditor/edit/editGroupBlade.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(t){function i(e,i){t.call(this,e,i)}return __extends(i,t),i.createOptions=function(){return{additionalServices:["errorService","featureSwitchService","groupHttp","groupService","localizationService","telemetryService"]}},i.prototype.$onInit=function(){this.group=this.parameters.group||this.services.groupService.activeGroup,this.model=new e.models.GroupEditorModel(this.group),this.getGroupMembers()},i})(t.GroupEditorBaseController);t.ViewGroupBladeController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.ViewGroupBlade={controller:e.common.Services.createController(e.controllers.ViewGroupBladeController),bindings:{parameters:"<"},templateUrl:"components/groupEditor/view/viewGroupBlade.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){this.services=t,this.groupService=t.groupService}return e.createOptions=function(){return{additionalServices:["groupService","navigation"]}},e.prototype.navigateToContentList=function(){this.services.navigation.navigateToContentList(this.groupService.activeGroupObjectId,!1,null,null,!1)},e})();e.GroupSwitcherController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.GroupSwitcher={templateUrl:"components/groupSwitcher/groupSwitcher.html",controller:e.common.Services.createController(e.controllers.GroupSwitcherController),bindings:{onToggled:"&"}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.models.CollapsiblePaneExpandedWidth,o=e.common.constants.TaskPaneCollapsiblePaneMode,r=(function(){function t(e,t){var i=this;this.scope=e,this.services=t,this.userInfo=t.userInfo,this.groupService=t.groupService,this.isExpanded=!1,this.userInfo.getUserPhoto().then((function(e){i.userPhoto=e}))}return t.createOptions=function(){return{additionalServices:["groupService","userInfo","navigation","viralTenantMergeHelperService"]}},t.prototype.$onChanges=function(e){e.canExpand&&e.canExpand.currentValue&&this.toggleGroupSwitcherPane(!0)},t.prototype.getGroups=function(){for(var e,t=[],i=this.groupService.groups,o=0,r=i.length;o<r;o++)i[o].isMyWorkspace?e=i[o]:t.push(i[o]);var a=[];a.push(e),t=_.sortBy(t,(function(e){return e.displayName}));for(var o=0,r=t.length;o<r;o++)a.push(t[o]);return a},t.prototype.isGroupSelected=function(e){return this.groupService.activeGroup&&this.groupService.activeGroup.aadGroupId===e.aadGroupId},t.prototype.switchGroup=function(t){t.aadGroupId!==this.services.groupService.activeGroupObjectId?t.isMyWorkspace||this.isGroupFeatureEnabled()?(this.services.navigation.navigateToGroupByGUID(t.aadGroupId),this.onGroupSelected&&this.onGroupSelected()):this.services.groupService.showGroupUpsellMessage(e.telemetry.LicenseEnforcementOperation.SwitchGroups):this.services.navigation.navigateToContentList(t.aadGroupId,!1,null,null,!1)},t.prototype.toggleGroupSwitcherPane=function(e){this.isExpanded=void 0===e?!(this.isExpanded&&this.canExpand):e,this.onToggled&&this.onToggled({isExpanded:this.isExpanded})},t.prototype.addGroup=function(){this.services.viralTenantMergeHelperService.viewingDataFromMergedViralTenant()?this.services.viralTenantMergeHelperService.displayFeatureDisabledErrorMessage("ArchivedContent_ErrorMessageGroup"):this.isGroupFeatureEnabled()?this.scope.$emit(e.constants.showTaskPaneSlider,o.GroupEditorCreate,i.Large):this.services.groupService.showGroupUpsellMessage(e.telemetry.LicenseEnforcementOperation.CreateGroups)},t.prototype.isGroupFeatureEnabled=function(){return this.services.userInfo.isPremiumUser},t})();t.GroupSwitcherV2Controller=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.GroupSwitcherV2={templateUrl:"components/groupSwitcherV2/groupSwitcherV2.html",controller:e.common.Services.createController(e.controllers.GroupSwitcherV2Controller),bindings:{onGroupSelected:"&",onToggled:"&",canExpand:"<"}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.contracts.ContentProviderCategory;t.NavigationPaneExpandSettingKey="NavExpanded";var o=(function(){function o(e,t){var i=this;this.shouldShowGetDataBtn=function(){i.groupService.ensureGroupsInitialization().then((function(){i.showGetDataBtn=!i.groupService.activeGroup.contract.isReadOnly||i.services.groupService.activeGroup.contract.isOwner}))},this.getExpandButtonTitle=function(){return i.isExpanded?i.services.localizationService.get("NavigationPane_Minimize"):i.services.localizationService.get("NavigationPane_Expand")},this.services=t,this.navigation=t.navigation,this.home=t.home,this.groupService=t.groupService,this.rootScope=t.rootScope,this.hasInstalledApps=!1,this.createHomeContextMenu(),this.shouldShowGetDataBtn()}return o.createOptions=function(){return{additionalServices:["appService","navigation","home","groupService","telemetryService","localizationService","$rootScope","userSettingsService","featureSwitchService"]}},o.prototype.$onInit=function(){var t=this;this.rootScope.$on(e.constants.groupSwitchedEventName,(function(){return t.shouldShowGetDataBtn()})),this.initializeIsExpanded(),this.services.appService.ensureAppsInitialization().then((function(){return t.updateAppsVisibility()})),this.isListViewEnabled=this.services.featureSwitchService.featureSwitches.listViewEnabled,this.services.appService.addAppsCollectionChangedHandler(this)},o.prototype.$onDestroy=function(){this.services.appService.removeAppsCollectionChangedHandler(this)},o.prototype.onAppInstalled=function(e){this.updateAppsVisibility()},o.prototype.onAppUninstalled=function(e){this.updateAppsVisibility()},o.prototype.navigateToApps=function(){this.onGroupSwitcherToggled(!1),this.services.navigation.navigateToApps()},o.prototype.navigateToFavorites=function(){this.onGroupSwitcherToggled(!1),this.services.navigation.navigateToFavorites()},o.prototype.navigateToRecentlyViewed=function(){this.onGroupSwitcherToggled(!1),this.services.navigation.navigateToRecentlyViewed()},o.prototype.navigateToOnlySharedWithMe=function(){this.onGroupSwitcherToggled(!1),this.services.navigation.navigateToContentList(e.constants.myWorkSpaceGroupId,!0,null,null,!0)},o.prototype.isOnFeaturedDashboard=function(){return this.services.home.isHomeDashboardSet&&this.services.home.isOnHomeDashboard(this.services.navigation.currentDashboardGUID)},o.prototype.appsVisible=function(){return this.hasInstalledApps||this.isOnApps()},o.prototype.isOnApps=function(){return this.services.navigation.inAppsView()},o.prototype.isOnFavorites=function(){return this.services.navigation.inFavoritesView()},o.prototype.isOnRecentlyViewed=function(){return this.services.navigation.inRecentlyViewedView()},o.prototype.isOnSharedWithMe=function(){return this.services.navigation.inContentListView(!0)},o.prototype.isOnWorkspace=function(){return!(this.isOnSharedWithMe()||this.isOnRecentlyViewed()||this.isOnFeaturedDashboard()||this.isOnFavorites()||this.isOnApps())},o.prototype.navigateToFeaturedDashboard=function(){this.home.isHomeDashboardSet&&(this.onGroupSwitcherToggled(!1),this.services.navigation.navigateToHomeDashboard(!1))},o.prototype.navigateToGetData=function(){this.onGroupSwitcherToggled(!1),this.services.telemetryService.logEvent(e.telemetry.DashboardOpenGetDataPage,e.telemetry.OpenGetDataPageInteraction.NavigatorPaneAddDatasetButton),this.services.navigation.showGetDataSlider()},o.prototype.onToggleClicked=function(){this.toggleNavigationPane();var i=this.services.telemetryService.startEvent(e.telemetry.NavigationToggle,this.isExpanded);this.services.userSettingsService.updateExtendedSettings(t.NavigationPaneExpandSettingKey,this.isExpanded,i)},o.prototype.onHomeDashboardMenuItemSelected=function(e){switch(e.action){case t.HomeDashboardMenuAction.DisableHomeDashboard:this.services.home.disableHomeDashboard()}},o.prototype.onGroupSwitcherToggled=function(e){void 0===e&&(e=!this.isGroupSwitcherExpanded),this.isGroupSwitcherExpanded=e,e&&!this.isExpanded&&this.toggleNavigationPane(!0)},o.prototype.updateAppsVisibility=function(){var e=this.services.appService.getAppByCategory(i.OrganizationalApp);this.hasInstalledApps=!_.isEmpty(e)},o.prototype.createHomeContextMenu=function(){var e=[];e.push({text:this.services.localizationService.get("NavigationPane_DisableFeaturedDashboard"),action:t.HomeDashboardMenuAction.DisableHomeDashboard,type:DropDownMenuItemType.Item}),this.homeDashboardMenuItems=e},o.prototype.toggleNavigationPane=function(e){this.isExpanded=void 0===e?!this.isExpanded:e;var t={isExpanded:this.isExpanded};this.onToggled&&this.onToggled(t)},o.prototype.initializeIsExpanded=function(){var e=this,i=this.services.navigation.collapseNavigation;void 0!==i?(this.isExpanded="true"!==i.toLowerCase(),this.toggleNavigationPane(this.isExpanded)):this.services.userSettingsService.getExtendedSettingByKey(t.NavigationPaneExpandSettingKey).then((function(t){null!=t&&_.isBoolean(t)&&(e.isExpanded=t),e.toggleNavigationPane(e.isExpanded)}))},o})();t.NavigationPaneV2Controller=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.NavigationPaneV2={templateUrl:"components/navigationPaneV2/navigationPaneV2.html",controller:e.common.Services.createController(e.controllers.NavigationPaneV2Controller),bindings:{onToggled:"&",isExpanded:"<"}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){var i=this;this.scope=e,this.services=t,this.imageLoaded=!1,this.scope.$watch((function(){return i.source}),(function(e){e&&!i.disableAnimation&&(i.imageLoaded=!1)}))}return t.createOptions=function(){return{additionalServices:["localizationService"]}},t.prototype.onLoad=function(){this.imageLoaded=!0},t.prototype.onError=function(){this.scope.$emit(e.common.constants.tileErrorEventName,this.services.localizationService.get("Tile_ErrorText"))},t})();t.PrintableImageController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.PrintableImage={controller:e.common.Services.createController(e.controllers.PrintableImageController),bindings:{source:"@",disableAnimation:"<?"},templateUrl:"components/printableImage/printableImage.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){this.localizationService=t.localizationService}return e.createOptions=function(){return{additionalServices:["localizationService"]}},e.prototype.$onInit=function(){this.tabs=[{icon:"favoritestar",title:this.localizationService.get("Favorites_NavPaneTitle"),text:this.localizationService.get("PreviewFeaturesModal_Favorites_Description"),learnMoreUrl:"http://go.microsoft.com/fwlink/?LinkId=798640"},{icon:"collections",title:this.localizationService.get("PreviewFeaturesModal_ContentView"),text:this.localizationService.get("PreviewFeaturesModal_ContentView_Description"),learnMoreUrl:"http://go.microsoft.com/fwlink/?LinkId=798641"},{icon:"database",title:this.localizationService.get("NavigationPane_ManageDatasets"),text:this.localizationService.get("PreviewFeaturesModal_ManageDatasets_Description"),learnMoreUrl:"http://go.microsoft.com/fwlink/?LinkId=798642"}],this.activeTab=_.first(this.tabs)},e.prototype.selectTab=function(e){this.activeTab=e},e.prototype.isTabSelected=function(e){return this.activeTab.icon===e.icon},e})();e.PreviewFeaturesModalController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.PreviewFeaturesModal={templateUrl:"components/previewFeaturesModal/previewFeaturesModal.html",controller:e.common.Services.createController(e.controllers.PreviewFeaturesModalController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.PreviewFeedbackModal={templateUrl:"components/previewFeedbackModal/previewFeedbackModal.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.models.CollapsiblePaneExpandedWidth,o=e.common.constants.TaskPaneCollapsiblePaneMode;!(function(e){e[e.SelectDataset=0]="SelectDataset",e[e.VisualizationDesign=1]="VisualizationDesign"})(t.ConfigLevel||(t.ConfigLevel={}));var r=t.ConfigLevel,a=(function(){function t(e,t){var i=this;this.scope=e,this.services=t;var o=this.services.modelService,a=this.services.dashboardService.getSelectedDashboardTile();if(a){this.selectedTile=a.tileModel,o.modelsPromise.then((function(){i.models=o.streamingModels}));var n=this.selectedTile.realTime.config.visual;this.stage=n?r.VisualizationDesign:r.SelectDataset}}return t.createOptions=function(){return{additionalServices:["dashboardService","localizationService","modelConverter","modelService","navigation"]}},t.prototype.navigateToManageDatasets=function(e){var t=e?1:0;this.services.navigation.navigateToStreamingDatasets(t)},t.prototype.next=function(){this.stage===r.VisualizationDesign?this.scope.$emit(e.constants.showTaskPaneSlider,o.TileEditor,i.Large):this.stage++},t.prototype.prev=function(){this.stage===r.SelectDataset?this.scope.$emit(e.constants.showTaskPaneSlider,o.TileGallery,i.Large):(this.clearSelectedTileModel(),this.stage--)},t.prototype.nextValid=function(){return this.stage===r.SelectDataset?null!=this.selectedModel:this.stage===r.VisualizationDesign?!this.hasVisualConfigError&&null!=this.selectedTile.realTime.singleVisualConfig:void 0},t.prototype.cancel=function(){this.services.dashboardService.removeTemporaryTile(this.selectedTile),this.scope.$emit(e.constants.hideTaskPaneSlider)},t.prototype.selectModel=function(e){this.selectedModel&&this.selectedTile&&this.selectedTile.realTime.unsubscribe(),this.selectedModel=e,this.selectedTile.realTime.setModelId(e.id)},t.prototype.getBreadCrumb=function(){var e=this.services.localizationService,t=jsCommon.StringExtensions.format,i=e.get("Realtime_AddStreamingDataSubTitle"),o=e.get("BreadCrumb_Separator");if(this.stage===r.VisualizationDesign){var a=e.get("Realtime_VisualizationDesign");i=t("{0} {1} {2}",i,o,a)}return i},t.prototype.clearSelectedTileModel=function(){var e=this.selectedTile,t=e&&e.realTime;t&&(e.realTime=this.services.modelConverter.convertRealTimeTile(e.contract),e.realTime.copyRealTimeModelDependencies(t),e.realTime.hideVisual=!0)},t})();t.RealTimeBladeController=a})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.RealTimeBlade={controller:e.common.Services.createController(e.controllers.RealTimeBladeController),templateUrl:"components/realTimeBlade/realTimeBlade.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.contracts.TileType,o=(function(){function t(e,t){this.services=t,this.scope=e}return t.createOptions=function(){return{additionalServices:["dataProxy","realTimeData","conceptualSchemaProxy","telemetryService","modelService"],scopedDependencies:["visualQueryGenerator"]}},t.prototype.$onInit=function(){var e=this,t=this.services;this.viewModel.setRealTimeModelDependencies(t.dataProxy,t.visualQueryGenerator,t.conceptualSchemaProxy,t.realTimeData,t.modelService),this.viewModel.onErrorDelegate=function(){return e.onErrorChanged()},this.viewModel.initialize()},t.prototype.$onDestroy=function(){var e=this.services,t=e.realTimeData,i=this.viewModel;i&&i.realTimeModelId&&t.unsubscribe(i.realTimeModelId,i)},t.prototype.onErrorChanged=function(){var t=this.viewModel;t&&(t.isError?(this.services.telemetryService.logEvent(e.telemetry.DashboardTileError,i[i.realTime],t.errorText),this.scope.$emit(e.common.constants.tileErrorEventName,t.errorText,t.errorDetails)):this.scope.$emit(e.common.constants.clearTileErrorEventName))},t})();t.RealTimeTileController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.RealTimeTile={bindings:{viewModel:"="},controller:e.common.Services.createController(e.controllers.RealTimeTileController),templateUrl:"components/realTimeTile/realTimeTile.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.data.DataViewObjectDefinitions,o=e.dataServices.constants.SingleValueRealTimeWindow,r=e.dataServices.constants.MultipleValueRealTimeWindow,a=e.dataServices.constants.RealTimeIntervals,n=e.explore.viewModels.FieldWellViewModelFactory,s=e.visuals.plugins,c=e.explore.viewModels.PropertyPaneViewModelFactory,l=e.visuals.StandardObjectProperties,d=e.data.SQExprBuilder,p=e.models.factory.TileOptionsFactory,u=e.dataServices.TileUtils,v=e.explore.viewModels.ViewModelFactory,h=e.explore.util.VisualContainerUtils,g="labelDisplayUnits",m="labelPrecision",f="labels",y=10,b=[s.card,s.realTimeLineChart,s.clusteredBarChart,s.clusteredColumnChart,s.gauge],S=[s.realTimeLineChart,s.clusteredBarChart,s.clusteredColumnChart];!(function(e){e[e.Seconds=0]="Seconds",e[e.Minutes=1]="Minutes",e[e.Hours=2]="Hours"})(t.RealTimeWindowTimeGroups||(t.RealTimeWindowTimeGroups={}));var w=t.RealTimeWindowTimeGroups,C=(function(){function t(e,t){var i=this;this.scope=e,this.services=t,this.supportedVisualTypes=v.getAvailableVisualTypes(b),this.times=a,this.timeLabels=this.getTimeLabels(),this.maxPrecisionValue=y,this.onRoleBucketEntryChanged=function(e){i.updateRoleBucketEntries(e)}}return t.createOptions=function(){return{additionalServices:["aggrOps","featureSwitchService","geoTaggingAnalyzerService","localizationService","modelMerger","promiseFactory","visualPlugin","telemetryService"],scopedDependencies:["pinVisual","visualQueryGenerator"],scopedServiceRoot:!0}},t.prototype.$onInit=function(){var t=this,i=this.tile.realTime.singleVisualConfig,o=i&&i.visualType;this.activeVisual=this.getActiveVisualType(o);var r=this.services;this.visualAuthoringService=e.explore.services.createVisualAuthoringCore(r.visualPlugin,r.geoTaggingAnalyzerService,r.aggrOps,r.featureSwitchService.featureSwitches);var a=this.scope.$watch("$ctrl.tile.realTime.schema",(function(e,i,o){e&&(t.setUpVisualOptions(),a())}))},t.prototype.onVisualChanged=function(){this.clearRealTimeTile();var e=!1;!this.originalSourceContext&&this.tile.realTime.singleVisualConfig&&this.saveVisualConfig(),this.originalSourceContext&&(this.activeVisual.plugin.name===this.originalSourceContext.visualType?(this.restoreVisualConfig(),this.tile.realTime.hideVisual=!1):(this.releaseAllBoundProperties(),this.shouldCreateNewVisual=!0,e=!0)),this.setUpVisualOptions(e)},t.prototype.activateTab=function(e){this.activeTab=e},t.prototype.setUpVisualOptions=function(e){void 0===e&&(e=!1),this.showCardFormattingOptions?this.setUpCardFormattingOptions():this.setUpChartOptions(e),this.setUpRoleBuckets(e)},t.prototype.properties=function(){if(this.conceptualProperties)return this.conceptualProperties;var t=this.tile&&this.tile.realTime.schema;if(t){var i=t.schema(e.dataServices.constants.RealTimeDataSourceName).entities,o=i[0].properties;return this.conceptualProperties=_.map(o,(function(e){return _.extend(e,{value:e.name,isHidden:!1})})),this.conceptualProperties}},t.prototype.updateRoleBucketEntries=function(e){if(e){var t=this.selectedRoleEntry.selectedProperty,i=this.tryAuthorVisualConfig(e,t);if(!i)return this.selectedRoleEntry.hasError=!0,void(this.hasErrors=!0);var o=this.tile.realTime.singleVisualConfig;this.originalSourceContext&&(o.conversionSourceContext=this.originalSourceContext),this.tile.realTime.hideVisual=!1,this.updateRealTimeTile();var r=this.selectedRoleBucket;this.releaseBoundProperty(t,r),this.bindAvailableProperty(e,r),this.disableDeleteRolePropertyButton=this.disableDeletePropertyButton(),this.selectedRoleEntry.hasError=!1,this.hasErrors=this.hasRoleEntryErrors()}},t.prototype.addNewRoleProperty=function(e){var t=this.getAvailableRoleProperties(e);_.isEmpty(t)||e.roleEntries.push({selectedProperty:null})},t.prototype.deleteRoleProperty=function(e,t){_.remove(t.roleEntries,e);var i=e.selectedProperty;if(!i)return e.hasError=!0,!1;this.releaseBoundProperty(i,t);var o=this.tile.realTime.singleVisualConfig,r=this.removeProjection(o,i,t.role);return r?(e.hasError=!1,this.updateRealTimeTile(),this.originalSourceContext&&(o.conversionSourceContext=this.originalSourceContext)):e.hasError=!0,this.disableDeleteRolePropertyButton=this.disableDeletePropertyButton(),this.hasErrors=this.hasRoleEntryErrors(),r},t.prototype.clickedEntry=function(e,t){this.selectedRoleEntry=e,this.selectedRoleBucket=t},t.prototype.enableAddMoreButton=function(e){var t=this;if(_.isEmpty(this.getAvailableRoleProperties(e)))return!1;var i=e.roleEntries.length,o=e.roleProperties.length;if(i===o)return!1;if(_.any(e.roleEntries,(function(e){return!e.selectedProperty})))return!1;var r=this.getValidMappingConditions();if(_.isEmpty(r))return!1;var a=e.role,n=_.find(this.getRoleEntryCounts(),{roleName:a}).roleCount,s=n+1;return _.some(r,(function(e){return t.satisfiesCondition(s,e[a])}))},t.prototype.updateRealTimeTile=function(){var e=this.tile.realTime.singleVisualConfig;if(e){var t=this.services;u.UpdateRealTimeTile(this.tile,e,this.getTimeWindow(),this.model,this.tile.realTime.schema,t.pinVisual,t.visualPlugin,t.visualQueryGenerator,t.telemetryService)}},t.prototype.updateCardFormatting=function(e){void 0===e&&(e=!0);var t=this.tile.realTime.singleVisualConfig;if(t){t.objects||(t.objects={});var o=i.ensure(t.objects,f,null),r=this.config.displayUnit;o.properties[g]=i.encodePropertyValue(r.value,r.type);var a=this.config.precision||0;o.properties[m]=i.encodePropertyValue(a,l.labelPrecision.type),e&&this.updateRealTimeTile()}},Object.defineProperty(t.prototype,"showCardFormattingOptions",{get:function(){return this.activeVisual&&this.activeVisual.plugin===s.card},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showTimeWindow",{get:function(){return this.activeVisual&&_.contains(S,this.activeVisual.plugin)},enumerable:!0,configurable:!0}),t.prototype.disableDeletePropertyButton=function(){for(var e=[],t=0,i=this.roleBuckets;t<i.length;t++){var o=i[t];e.push.apply(e,this.getBoundRoleProperties(o))}return 1===e.length},t.prototype.getBoundRoleProperties=function(e){return _.filter(e.roleProperties,{isHidden:!0})},t.prototype.getAvailableRoleProperties=function(e){return _.filter(e.roleProperties,{isHidden:!1})},t.prototype.setUpRoleBuckets=function(e){var t=this;void 0===e&&(e=!1);var i=this.activeVisual,o=h.getDataRolesForVisualPlugin(i.plugin),r=n.createEmptyBuckets(o);this.roleBuckets=[];for(var a=this.tile.realTime.singleVisualConfig,s=a&&a.query&&a.query.projections,c=function(i,a){var n=o[i],c=_.filter(l.properties(),(function(e){return t.isPropertyCompatible(e,n)})),d=_.assign({},r[i],{roleProperties:_.cloneDeep(c),roleEntries:[]});if(null!=s&&!e){var p=s[n.name]&&s[n.name].all();if(null!=p)for(var u=0,v=p;u<v.length;u++){var h=v[u],g=l.getProjectionName(h);l.bindAvailableProperty(g,d),d.roleEntries.push({selectedProperty:g})}}l.roleBuckets.push(d)},l=this,d=0,p=o.length;d<p;d++)c(d,p);this.disableDeleteRolePropertyButton=this.disableDeletePropertyButton()},t.prototype.isPropertyCompatible=function(t,i){var o=t.kind;if(i.kind===e.VisualDataRoleKind.Grouping&&1===o)return!1;if(i.kind===e.VisualDataRoleKind.Measure&&0===o)return!1;var r=i.requiredTypes;return!(!_.isEmpty(r)&&!e.ValueType.isCompatibleTo(t.type,r))},t.prototype.tryAuthorVisualConfig=function(t,i){var o=this.activeVisual;if(o){var r=this.tile.realTime.schema,a=_.first(r.schema(e.dataServices.constants.RealTimeDataSourceName).entities),n=this.selectedRoleBucket,s=n.role,c=this.buildExpr(t,a.name,n),l=this.tile.realTime.singleVisualConfig;return this.shouldCreateNewVisual||!l?this.createNewVisualConfig({addExpr:c,schema:r,targetRole:s,visualType:this.activeVisual.plugin.name}):this.updateVisualConfig({addExpr:c,removePropName:i,schema:r,targetRole:s,singleVisual:l})}},t.prototype.hasRoleEntryErrors=function(){for(var e=0,t=this.roleBuckets;e<t.length;e++){var i=t[e];if(_.any(i.roleEntries,{hasError:!0}))return!0}return!1},t.prototype.createNewVisualConfig=function(e){var t=this.visualAuthoringService.create({visualType:e.visualType,schema:e.schema,expr:e.addExpr,targetRole:e.targetRole});return!(!t||!t.singleVisual)&&(this.tile.realTime.singleVisualConfig=t.singleVisual,this.shouldCreateNewVisual=!1,this.showCardFormattingOptions&&this.updateCardFormatting(!1),!0)},t.prototype.updateVisualConfig=function(e){if(e.removePropName){var t=this.removeProjection(e.singleVisual,e.removePropName,e.targetRole);if(!t)return!1}return this.visualAuthoringService.add({schema:e.schema,expr:e.addExpr,targetRole:e.targetRole},{singleVisual:e.singleVisual})},t.prototype.buildExpr=function(t,i,o){var r=null,a=this.getProperty(t,o.roleProperties);if(!a)return r;var n=a.kind,s=0===n?d.columnRef:d.measureRef,c=d.entity(e.dataServices.constants.RealTimeDataSourceName,i);return r=s(c,t)},t.prototype.getProperty=function(e,t){return _.find(t,{value:e})},t.prototype.releaseAllBoundProperties=function(){for(var e=0,t=this.conceptualProperties;e<t.length;e++){var i=t[e];i.isHidden=!1}},t.prototype.releaseBoundProperty=function(e,t){var i=this.getProperty(e,t.roleProperties);null!=i&&(i.isHidden=!1)},t.prototype.bindAvailableProperty=function(e,t){var i=this.getProperty(e,t.roleProperties);i&&(i.isHidden=!0)},t.prototype.satisfiesCondition=function(e,t){var i=1/0,o=t&&t.max;return _.isNumber(o)&&(i=o),e<=i},t.prototype.getValidMappingConditions=function(){for(var e=this.activeVisual.plugin.name,t=this.getDataViewMappingConditions(e),i=this.getRoleEntryCounts(),o=[],r=0,a=t;r<a.length;r++){for(var n=a[r],s=!0,c=0,l=i;c<l.length;c++){var d=l[c],p=n[d.roleName];if(!this.satisfiesCondition(d.roleCount,p)){s=!1;break}}s&&o.push(n)}return o},t.prototype.getDataViewMappingConditions=function(e){var t=this.services.visualPlugin.capabilities(e),i=t.dataViewMappings[0];return i.conditions},t.prototype.getRoleEntryCounts=function(){for(var e=[],t=0,i=this.roleBuckets;t<i.length;t++){var o=i[t];e.push({roleName:o.role,roleCount:o.roleEntries.length})}return e},t.prototype.getTimeWindow=function(){var e=this.config,t=e&&e.timeWindow,i=e&&e.timeWindowGranularity,r=this.getActiveVisualDataWindow();if(!t||!i)return r;switch(i){case w[w.Hours]:r=60*t*60*1e3;break;case w[w.Minutes]:r=60*t*1e3;break;case w[w.Seconds]:r=1e3*t;break;default:r=o}return r},t.prototype.getActiveVisualDataWindow=function(){var e=_.contains(S,this.activeVisual.plugin)?r:o;return e},t.prototype.getActiveVisualType=function(e){var t=_.find(this.supportedVisualTypes,(function(t){return t.plugin.name===e}));return t||(t=this.supportedVisualTypes[0]),t},t.prototype.setUpChartOptions=function(e){var t=this.tile.realTime.config,i=t&&t.dataWindow;!e&&i||(i=this.getActiveVisualDataWindow());var o,r=i/1e3;o=r<60?{timeWindow:r,timeWindowGranularity:w[w.Seconds]}:r<3600?{timeWindow:r/60,timeWindowGranularity:w[w.Minutes]}:{timeWindow:r/3600,timeWindowGranularity:w[w.Hours]},this.config=o},t.prototype.setUpCardFormattingOptions=function(){if(_.isEmpty(this.tabs)&&(this.tabs=p.realTimeConfigTabs(),this.activeTab=this.tabs[0]),!this.config||!this.config.displayUnit){var e=c.getDisplayUnits(),t=c.getDisplayNames(e);this.displayUnits=_.map(t,(function(e){return _.extend(e,{type:l.labelDisplayUnits.type})}));var i=this.displayUnits[0],o=0;this.config={displayUnit:i,precision:o}}var r=this.tile.realTime.singleVisualConfig,a=r&&r.objects,n=a&&a[f]&&a[f][0].properties;if(n){var s=n[g],d=s&&s.value,i=_.find(this.displayUnits,{value:""+d});i&&(this.config.displayUnit=i),s=n[m],this.config.precision=s&&s.value}},t.prototype.getTimeLabels=function(){var e=this.services.localizationService;return[e.get("Realtime_SecondsInterval"),e.get("Realtime_MinutesInterval"),e.get("Realtime_HoursInterval")]},t.prototype.saveVisualConfig=function(){var e=this.tile.realTime.singleVisualConfig;e&&(this.originalSourceContext={objects:e.objects,query:e.query,visualType:e.visualType})},t.prototype.restoreVisualConfig=function(){var e=this.tile.realTime.singleVisualConfig,t=this.originalSourceContext;e&&t&&(e.visualType=t.visualType,e.query=t.query,e.objects=t.objects,this.updateRealTimeTile())},t.prototype.removeProjection=function(e,t,i){var o=this,r=e&&e.query&&e.query.projections&&e.query.projections[i].all();if(_.isEmpty(r))return!1;var a=_.findIndex(r,(function(e){return o.getProjectionName(e)===t}));return a!==-1&&this.visualAuthoringService.remove({index:a,role:i},{singleVisual:e})},t.prototype.getProjectionName=function(t){var i=t&&t.queryRef;if(i)return e.data.tabular.normalizedName(i)},t.prototype.clearRealTimeTile=function(){this.tile.realTime.hideVisual=!0;var e=this.tile.config.realTimeVisual;e.heading1=null,e.heading2=null,e.heading3=null},t})();t.RealTimeTileVisualizationDesignController=C})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.RealTimeTileVisualizationDesign={bindings:{tile:"<",model:"<",hasErrors:"="},controller:e.common.Services.createController(e.controllers.RealTimeTileVisualizationDesignController),templateUrl:"components/realTimeTileVisualizationDesign/realTimeTileVisualizationDesign.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.models.factory.ArtifactSortPredicates,o=e.models.ContentListGalleryViewModel,r=e.telemetry.SelectSort,a=20,n=(function(){function t(t,r){var n=this;this.services=r,this.filteredRecentlyUsedArtifacts=[],this.recentlyUsedArtifacts=[],this.searchText="",this.showWatermarkConfig=!1,this.sortPredicate=i.LastAccessReverseDatePredicate,this.sortPredicateMap={},this.selectSort=function(t){n.sortPredicate=t;var i=n.sortPredicateMap[t.toAngularFilter()];n.services.telemetryService.logEvent(e.telemetry.ContentListSelectSort,i),n.updateRecentlyUsedArtifacts()},this.services.mostRecentlyUsedService.getMRUModels().then((function(t){for(var i=Math.min(t.length,a),o=function(i){var o=t[i];o.displayDoNotExistDialogAndRemove=function(){var t=n.getArtifactLocStringValue(o.type);e.helpers.ArtifactNotFoundHelper.showArtifactDoesNotExistDialog(t,n.services.errorService,n.services.localizationService,n.services.telemetryService),n.services.mostRecentlyUsedService.removeMRU(o.objectId,o.workspaceId),
_.remove(n.recentlyUsedArtifacts,(function(e){return e.objectId===o.objectId&&e.workspaceId===o.workspaceId})),n.updateRecentlyUsedArtifacts()},n.recentlyUsedArtifacts.push(o)},r=0;r<i;r++)o(r);n.filteredRecentlyUsedArtifacts=n.recentlyUsedArtifacts})),this.galleryViewModel=new o,this.galleryViewModel.getTiles=function(){return n.filteredRecentlyUsedArtifacts},this.galleryViewModel.tabType=16,this.galleryViewModel.finishLoadEvent=e.constants.contentListRecentlyUsedLoadedEvent,this.dataClassificationEnabled=!1,this.sortPredicates=e.models.factory.SelectTileSortItemsFactory.createPredicates(this.services.localizationService,16)}return t.createOptions=function(){return{additionalServices:["dataClassificationService","errorService","localizationService","mostRecentlyUsedService","telemetryService"]}},t.prototype.$onInit=function(){this.sortPredicateMap=(e={},e[i.TitleAlphabeticalPredicate.toAngularFilter()]=r.TitleAlpabetical,e[i.TitleReverseAlphabeticalPredicate.toAngularFilter()]=r.TitleReverseAlphabetical,e[i.LastAccessReverseDatePredicate.toAngularFilter()]=r.LastAccessReverseDate,e),this.emptySearchWatermarkConfig={canEdit:!0,mode:!1,contentNonShared:this.services.localizationService.get("ContentList_EmptySearchResults"),imgClass:"empty-search-img"},this.emptyRecentWatermarkConfig={canEdit:!0,mode:!1,titleNonShared:this.services.localizationService.get("ContentList_EmptyRecentTitle"),contentNonShared:this.services.localizationService.get("ContentList_EmptyRecentMessage"),imgClass:"empty-recent-img"},this.updateRecentlyUsedArtifacts();var e},t.prototype.ensureSearchTelemetry=function(){this.searchTelemetry||_.isEmpty(this.searchText)||(this.searchTelemetry=this.services.telemetryService.startEvent(e.telemetry.ContentListSearch)),this.updateRecentlyUsedArtifacts()},t.prototype.resolveSearchTelemetry=function(){this.searchTelemetry&&(this.searchTelemetry.resolve(),this.searchTelemetry=null)},t.prototype.searchProperties=function(e,t){return this.containsSubstring(e.displayName,t.toLocaleLowerCase())},t.prototype.compareDates=function(e,t){return e>t?-1:e<t?1:0},t.prototype.containsSubstring=function(e,t){return!!e&&_.contains(e.toLocaleLowerCase(),t)},t.prototype.updateRecentlyUsedArtifacts=function(){var e=this,t=_.filter(this.recentlyUsedArtifacts,(function(t){return e.searchProperties(t,e.searchText)}));switch(this.sortPredicate){case i.TitleAlphabeticalPredicate:t.sort((function(e,t){return e.displayName.localeCompare(t.displayName)}));break;case i.TitleReverseAlphabeticalPredicate:t.sort((function(e,t){return t.displayName.localeCompare(e.displayName)}));break;case i.LastAccessReverseDatePredicate:default:t.sort((function(t,i){return e.compareDates(t.lastAccess,i.lastAccess)}))}this.filteredRecentlyUsedArtifacts=t,this.showWatermarkConfig=_.isEmpty(this.filteredRecentlyUsedArtifacts),this.showWatermarkConfig&&(this.watermarkConfig=_.isEmpty(this.searchText)?this.emptyRecentWatermarkConfig:this.emptySearchWatermarkConfig)},t.prototype.getArtifactLocStringValue=function(t){switch(t){case e.models.MRUArtifactType.Dashboards:return"ArtifactKind_Dashboard";case e.models.MRUArtifactType.Reports:return"ArtifactKind_Report";case e.models.MRUArtifactType.Workbooks:return"ArtifactKind_Workbook";default:return""}},t})();t.RecentlyViewedContainerController=n})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.RecentlyViewedContainer={templateUrl:"components/recentlyViewedContainer/recentlyViewedContainer.html",controller:e.common.Services.createController(e.controllers.RecentlyViewedContainerController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){this.$scope=e,this.services=t,this.dropdownOpen=!1}return t.createOptions=function(){return{additionalServices:["overlayService"]}},t.prototype.toggleDropdown=function(t){var i=this,o=this.services.document.find(t.delegateTarget),r=o.find(".js-anchor"),a=this.services.overlayService.getOverlayElement(this.overlayName);this.services.overlayService.toggleDropdown(a,r,t,!0,!1),this.dropdownOpen=!this.dropdownOpen,this.dropdownOpen&&a.on(e.common.constants.OverlayCloseEventName,(function(){i.$scope.$applyAsync((function(){a.off(e.common.constants.OverlayCloseEventName),i.dropdownOpen=!1}))}))},t})();t.SelectButtonController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.SelectButton={transclude:!0,bindings:{overlayName:"@"},templateUrl:"components/selectButton/selectButton.html",controller:e.common.Services.createController(e.controllers.SelectButtonController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.contracts.PermissionArtifactType,o=(function(){function e(e,t){this.Dashboard=i.Dashboard,this.Report=i.Report,this.Workbook=i.Workbook,this.Dataset=i.Dataset,this.overlayService=t.overlayService}return e.createOptions=function(){return{additionalServices:["overlayService"]}},e.prototype.isSelectedType=function(e){return(this.selectedType&e)===e},Object.defineProperty(e.prototype,"showContentFilter",{get:function(){return this._showContentFilter},enumerable:!0,configurable:!0}),e})();t.SelectArtifactFilterController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.SelectArtifactFilter={bindings:{selectedType:"<",selectType:"&onSelectType"},templateUrl:"components/selectArtifactFilter/selectArtifactFilter.html",controller:e.common.Services.createController(e.controllers.SelectArtifactFilterController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=jsCommon.DOMConstants,o=(function(){function t(e,t){this.services=t,this.hasModels=!1}return t.createOptions=function(){return{additionalServices:["modelService","navigation","modalDialogService"]}},t.prototype.$onInit=function(){this.searchString="",this.tableConfig={data:null,hideHeader:!1},this.tableConfig.data=this.tableConfig.filteredData=this.models,this.hasModels=this.models.length>0},t.prototype.getLastRefreshDate=function(t){return jsCommon.DateExtensions.formatPretty(new Date(t.lastRefreshEpochTime),e.common.localize.currentLanguageLocale)},t.prototype.selectModel=function(e){this.selectedDataset=this.selectedDataset!==e?e:null},t.prototype.itemKeydown=function(e,t){e.keyCode!==i.enterKeyCode&&e.keyCode!==i.spaceKeyCode||(this.selectModel(t),e.preventDefault())},t.prototype.onSearchStringChanged=function(){var e=this;this.tableConfig.filteredData=_.filter(this.tableConfig.data,(function(t){return t.displayName.toLocaleLowerCase().indexOf(e.searchString.toLocaleLowerCase())>-1})),_.contains(this.tableConfig.filteredData,this.selectedDataset)||(this.selectedDataset=null)},t.prototype.confirm=function(){this.selectedDataset&&this.services.modalDialogService.close({selectedDataset:this.selectedDataset,openGetData:!1})},t.prototype.cancel=function(){this.services.modalDialogService.close({openGetData:!1})},t.prototype.importDataset=function(){this.services.modalDialogService.close({openGetData:!0})},t})();t.SelectDatasetDialogController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.SelectDatasetDialog={templateUrl:"components/selectDatasetDialog/selectDatasetDialog.html",bindings:{titleLabel:"<",descriptionLabel:"<",confirmLabel:"<",cancelLabel:"<",models:"<"},controller:e.common.Services.createController(e.controllers.SelectDatasetDialogController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){this.modalDialogService=e,this.modelService=t}return e.prototype.show=function(e,t,i,o,r,a){var n={titleLabel:t,descriptionLabel:i,confirmLabel:o,cancelLabel:r,models:_.filter(this.modelService.copyAndEditModels,a)},s={dialogName:e,definitionTemplateCachePath:"components/selectDatasetDialog/selectDatasetDialogDefinition.html",bindings:n};return this.modalDialogService.showWebModalDialog(s)},e})();e.SelectDatasetDialogBuilder=t})(t=e.dialogs||(e.dialogs={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.contracts.ContentTileType,o=e.models.OwnershipFilterMenuFilter,r=(function(){function e(e,t){this.OwnerAll=o.AllContent,this.OwnerMine=o.MyContent,this.OwnerShared=o.SharedWithMe,this.Dashboard=i.Dashboard,this.Report=i.Report,this.Workbook=i.Workbook,this.overlayService=t.overlayService}return e.createOptions=function(){return{additionalServices:["overlayService"]}},e.prototype.isSelectedType=function(e){return(this.selectedType&e)===e},e.prototype.isSelectedOwner=function(e){return this.selectedOwnership===e},e})();t.SelectTileFilterController=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.SelectTileFilter={bindings:{selectedType:"<",selectedOwnership:"<",selectType:"&onSelectType",selectOwner:"&onSelectOwnership"},templateUrl:"components/selectTileFilter/selectTileFilter.html",controller:e.common.Services.createController(e.controllers.SelectTileFilterController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){this.$scope=e,this.overlayService=t.overlayService,this.loc=t.localizationService}return t.createOptions=function(){return{additionalServices:["overlayService","localizationService"]}},t.prototype.$onInit=function(){this.updateDropdownItems(),this.updateTitle()},t.prototype.$onChanges=function(e){e.predicates&&this.updateDropdownItems(),e.selectedPredicate&&this.updateTitle()},t.prototype.updateDropdownItems=function(){this.dropdownItems=_.isEmpty(this.predicates)?e.models.factory.SelectTileSortItemsFactory.createDefaultPredicates(this.loc):this.predicates,_.find(this.dropdownItems,{predicate:this.selectedPredicate})||this.onSelect()(this.dropdownItems[0].predicate)},t.prototype.updateTitle=function(){var e=_.find(this.dropdownItems,{predicate:this.selectedPredicate});e&&(this.title=e.title)},t.prototype.select=function(e){this.onSelect()(e),this.overlayService.hideAllDropdowns()},t.prototype.isSelected=function(e){return this.selectedPredicate===e},t})();t.SelectTileSortController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.SelectTileSort={bindings:{selectedPredicate:"<",onSelect:"&",predicates:"<?"},templateUrl:"components/selectTileSort/selectTileSort.html",controller:e.common.Services.createController(e.controllers.SelectTileSortController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){e.AllSharedOwnerObjectId="";var t=(function(){function t(i,o,r){i?(this.userObjectId=i.ownerUserObjectId,this.groupObjectId=i.ownerGroupObjectId,this.fullname=i.ownerFullname,this.mail=i.ownerMail,this.objectId=t.getDashboardOwnerId(i),this.name=this.fullname||this.mail,o&&this.getIcon(o)):(this.objectId=e.AllSharedOwnerObjectId,this.name=r?r.get("SharedBy_AllShared"):"All Shared")}return t.getDashboardOwnerId=function(e){return e.ownerUserObjectId||e.ownerGroupObjectId},t.prototype.isUser=function(){return null!=this.userObjectId},t.prototype.getIcon=function(e){var t,i=this;t=this.isUser()?e.findOrGetUserPhoto(this.userObjectId):e.getGroupIcon(this.groupObjectId),t.then((function(e){i.icon=e}),(function(e){}))},t})();e.OwnerInfo=t})(t=e.sharedByColumn||(e.sharedByColumn={}))})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.models.sharedByColumn.OwnerInfo,o=(function(){function e(e,t){this.dashboardToOwnerInfo={},this.services=t,this.defaultOwnerInfos=[new i((void 0),(void 0),this.services.localizationService)]}return e.createOptions=function(){return{additionalServices:["userInfo","localizationService"]}},e.prototype.getOrCreateOwnerInfo=function(e){var t=i.getDashboardOwnerId(e);if(t)return this.dashboardToOwnerInfo[t]||(this.dashboardToOwnerInfo[t]=new i(e,this.services.userInfo)),this.dashboardToOwnerInfo[t]},e.prototype.getOwnerInfos=function(){var e=this;this.sharedDashboards=this.getSharedDashboards();var t=_.map(this.sharedDashboards,(function(t){return e.getOrCreateOwnerInfo(t)}));return t=_(t).compact().uniq("objectId").sortBy((function(e){return e.name.toLocaleLowerCase()})).value(),t=this.defaultOwnerInfos.concat(t)},e})();t.SharedByColumnController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.SharedByColumn={templateUrl:"components/sharedByColumn/sharedByColumn.html",controller:e.common.Services.createController(e.controllers.SharedByColumnController),bindings:{getSharedDashboards:"&",selectedOwner:"="}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=jsCommon.JsonExtensions,o=e.common.contracts.RealTimeMode,r=e.common.constants.TaskPaneCollapsiblePaneMode,a=(function(){function t(e,t){this.scope=e,this.services=t,this.initialize()}return t.createOptions=function(){return{additionalServices:["realTimeModel"]}},t.prototype.back=function(){this.scope.$emit(e.constants.showTaskPaneSlider,r.StreamingDatasetGallery)},t.prototype.cancel=function(){this.scope.$emit(e.constants.hideTileEditorEventName)},t.prototype.next=function(){var t=this.realTimeModel,i=t.definition;i.dataSourceType=1,i.mode=o.PubNubCacheOnly,i.externalCredentials=JSON.stringify(this.viewModel),this.scope.$emit(e.constants.showTaskPaneSlider,r.StreamingDatasetEditor)},t.prototype.initialize=function(){var e=this,t=this.services.realTimeModel;t.getSelected().then((function(o){o&&o.definition?(e.realTimeModel=o,e.viewModel=i.tryParseJSON(o.definition.externalCredentials)):e.realTimeModel=t.getAndSelectEmptyModel()}))},t})();t.PubNubEditorController=a})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.PubNubEditor={controller:e.common.Services.createController(e.controllers.PubNubEditorController),templateUrl:"components/streamingDataset/pubNubEditor/pubNubEditor.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=/\\/gi,i=/"/gi,o=(function(){function e(e,t){this.scope=e,this.services=t,this.apiExamples=[{id:1,title:"Raw"},{id:2,title:"cURL"},{id:3,title:"PowerShell"}],this.activeExample=this.apiExamples[0],this.mockValues={},this.mockValues[2]='"'+(new Date).toISOString()+'"',this.mockValues[1]=98.6,this.mockValues[0]='"AAAAA555555"'}return e.prototype.escapeCharacters=function(e){return e+="",e.replace(t,"\\\\").replace(i,'\\"')},e.prototype.hasColumns=function(){var e=this.viewModel&&this.viewModel.columns;return e&&e.length>0&&!_.isEmpty(e[0].name)},e.prototype.showExample=function(e){this.activeExample=e},e})();e.StreamingDataSampleController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.StreamingDataSample={bindings:{viewModel:"<",showHeader:"<",url:"&"},controller:e.common.Services.createController(e.controllers.StreamingDataSampleController),templateUrl:"components/streamingDataset/streamingDataSample/streamingDataSample.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=jsCommon.JsonExtensions,o=e.common.contracts.RealTimeMode,r=e.common.constants.TaskPaneCollapsiblePaneMode,a=(function(){function t(e,t){var i=this;this.scope=e,this.services=t,this.realTimeMode=o,this.validateColumnName=function(e){var t=e?e.trim():"";return _.filter(i.viewModel.definition.columns,(function(e){return e.name&&e.name.trim()===t})).length<=1},this.isLoadingColumnTypes=!1,this.warningText=null,this.initialize()}return t.createOptions=function(){return{additionalServices:["featureSwitchService","localizationService","realTimeModel","telemetryService"]}},Object.defineProperty(t.prototype,"canSave",{get:function(){return!this.isSaving&&1!==this.viewModel.definition.columns.length&&!this.isLoading},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return!this.viewModel||this.isLoadingColumnTypes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toggleStateText",{get:function(){var e=this.viewModel&&this.viewModel.definition.mode!==o.CacheOnly?"ToggleSwitchOn":"ToggleSwitchOff";return this.services.localizationService.get(e)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(){this.scope.$emit(e.constants.hideTileEditorEventName)},t.prototype.columnUpdated=function(e){e&&this.addNewColumn()},t.prototype.removeColumn=function(e){_.remove(this.viewModel.definition.columns,e)},t.prototype.save=function(){var t,i=this,a=this.viewModel.definition,n=this.services.realTimeModel;this.isSaving=!0,a.columns.pop(),t=this.viewModel.isNew?n.createModel(a).then((function(){a.mode===o.PubNubCacheOnly?i.scope.$emit(e.constants.hideTileEditorEventName):i.scope.$emit(e.constants.showTaskPaneSlider,r.StreamingDatasetPushInfo)})):n.updateModel(a).then((function(){i.scope.$emit(e.constants.hideTileEditorEventName)})),t.catch((function(){i.addNewColumn()})).finally((function(){i.isSaving=!1}))},t.prototype.back=function(){this.scope.$emit(e.constants.showTaskPaneSlider,this.from)},t.prototype.initialize=function(){var t=this,i=this.services,r=i.realTimeModel;r.getSelected().then((function(a){a=a?a:r.getAndSelectEmptyModel();var n=a.definition,s=n&&n.columns;s&&s.length>0&&_.isEmpty(s[s.length-1].name)&&n.columns.pop(),i.telemetryService.logEvent(e.telemetry.RealTimeEditStreamingDatasetPaneOpened,!a),t.viewModel=a,t.localizeValues(),t.historicalAnalysisEnabled=t.viewModel.definition.mode!==o.PubNubCacheOnly,t.detectPubNubColumnsIfNeeded(),t.addNewColumn()}),(function(){t.scope.$emit(e.constants.hideTileEditorEventName)}))},t.prototype.detectPubNubColumnsIfNeeded=function(){var e=this,t=this.viewModel.definition,r=this.services,a=r.realTimeModel,n=r.localizationService;if(this.warningText=null,t.mode===o.PubNubCacheOnly&&(this.viewModel.isNew||_.isEmpty(t.columns))){var s=i.tryParseJSON(t.externalCredentials);if(!s)return;this.isLoadingColumnTypes=!0;var c=this.scope.streamingDatasetForm;a.detectPubNubColumnsDefinition(s).then((function(i){t.columns=i,e.addNewColumn(),c.$setDirty()}),(function(){e.warningText=n.get("StreamingDataSetEditor_PubNubDataDetectionTimedOut")})).finally((function(){e.isLoadingColumnTypes=!1}))}},t.prototype.addNewColumn=function(){this.viewModel.definition.columns.push({name:null,dataType:0})},t.prototype.localizeValues=function(){var e=this.services.localizationService;this.viewModel.isNew?(this.header=e.get("StreamingDatasetEditor_NewDataset"),this.buttonText="Create_ButtonText"):(this.header=e.get("StreamingDatasetEditor_EditDataset"),this.buttonText="Done_ButtonText"),this.columnPlaceholder=e.get("StreamingDatasetEditor_ColumnPlaceholder"),this.namePlaceholder=e.get("StreamingDatasetEditor_DatasetPlaceholder"),this.dataTypes=[{displayName:e.get("StreamingDatasetEditor_Text"),value:0},{displayName:e.get("StreamingDatasetEditor_Number"),value:1},{displayName:e.get("StreamingDatasetEditor_DateTime"),value:2}]},t})();t.StreamingDatasetEditorController=a})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.StreamingDatasetEditor={bindings:{from:"="},controller:e.common.Services.createController(e.controllers.StreamingDatasetEditorController),templateUrl:"components/streamingDataset/streamingDatasetEditor/streamingDatasetEditor.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.models.factory.DatasetsMenuFactory,o=e.models.factory.StreamingDatasetOptionType,r=e.common.constants.TaskPaneCollapsiblePaneMode,a=(function(){function t(t,o){this.scope=t,this.services=o,o.telemetryService.logEvent(e.telemetry.RealTimeStreamingDatasetGalleryPaneOpened),this.streamingDatasetOptions=i.getStreamingDatasetOptions(this.services.featureSwitchService,this.services.localizationService),this.selectedOption=this.streamingDatasetOptions[0]}return t.createOptions=function(){return{additionalServices:["localizationService","realTimeModel","telemetryService","featureSwitchService"]}},t.prototype.cancel=function(){this.scope.$emit(e.constants.hideTileEditorEventName)},t.prototype.isLinkTypeSelected=function(){return this.selectedOption&&this.selectedOption.type===o.Link},t.prototype.next=function(){var t,i;switch(this.services.realTimeModel.setSelected(null),this.selectedOption.type){case o.APIPush:t=e.telemetry.StreamingDatasetGalleryOption.APIPush,i=r.StreamingDatasetEditor;break;case o.PubNub:t=e.telemetry.StreamingDatasetGalleryOption.PubNub,i=r.PubNubEditor}this.services.telemetryService.logEvent(e.telemetry.RealTimeStreamingDatasetGalleryOptionSelected,t),this.scope.$emit(e.constants.showTaskPaneSlider,i)},t.prototype.selectOption=function(e){this.selectedOption=e},t})();t.StreamingDatasetGalleryController=a})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.StreamingDatasetGallery={controller:e.common.Services.createController(e.controllers.StreamingDatasetGalleryController),templateUrl:"components/streamingDataset/streamingDatasetGallery/streamingDatasetGallery.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t,i){var o=this;this.scope=t,this.services=i,this.services.realTimeModel.getSelected().then((function(e){o.viewModel=e}),(function(){o.scope.$emit(e.constants.hideTileEditorEventName)}))}return t.createOptions=function(){return{additionalServices:["realTimeModel"]}},t.prototype.close=function(){this.scope.$emit(e.constants.hideTileEditorEventName)},t})();t.StreamingDatasetPushInfoController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.StreamingDatasetPushInfo={controller:e.common.Services.createController(e.controllers.StreamingDatasetPushInfoController),templateUrl:"components/streamingDataset/streamingDatasetPushInfo/streamingDatasetPushInfo.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t,i){var o=this;this.scope=t,this.services=i,this.openAlertsSettingsEvent=this.services.telemetryService.logEvent(e.telemetry.DataAlertsOpenAlertsSettings);var r=this.services.localizationService;this.columns=[{displayName:r.get("AlertsSettings_AlertTitle"),predicateName:"alertTitle"},{displayName:r.get("AlertsSettings_DashboardName"),predicateName:"dashboardName"},{displayName:r.get("AlertsSettings_CreatedDate"),predicateName:"alertCreatedDate"}],this.services.alertHttpService.getAllAlerts(this.openAlertsSettingsEvent).then((function(e){for(var t=[],i=_.groupBy(e,(function(e){return e.group?e.group.id:-1})),r=Object.keys(i),a=0,n=r;a<n.length;a++){var s=n[a];t.push({alerts:_.map(i[s],(function(e){return o.services.modelConverter.convertSettingsAlerts(e)})),title:i[s][0].group?i[s][0].group.displayName:o.services.localizationService.get("AlertsSettings_MyWorkspace")})}o.viewModel=t}))}return t.createOptions=function(){return{additionalServices:["alertHttpService","localizationService","modelConverter","navigation","telemetryService","errorService"]}},t.prototype.order=function(e,t){e.reverse=e.sortPredicate===t&&!e.reverse,e.sortPredicate=t},t.prototype.toggleAlert=function(t){this.services.telemetryService.logChildEvent(this.openAlertsSettingsEvent,e.telemetry.DataAlertsAlertsSettingsToggle),this.services.alertHttpService.toggleAlert(t.contract.id,t.enabled,this.openAlertsSettingsEvent)},t.prototype.editAlert=function(t){this.services.telemetryService.logChildEvent(this.openAlertsSettingsEvent,e.telemetry.DataAlertsAlertsSettingsEdit);var i=t.contract,o=i.tile.objectId,r=i.tile.originalTileObjectId,a=i.id,n=i.dashboard.objectId,s=i.group?i.group.objectId:e.constants.myWorkSpaceGroupId;this.services.navigation.showAlertsEditor(o,r,a,n,s)},t.prototype.deleteAlert=function(t){this.services.telemetryService.logChildEvent(this.openAlertsSettingsEvent,e.telemetry.DataAlertsAlertsSettingsDelete);var i=this.services.errorService.control();i.showPrompt(this.services.localizationService.get("Alerts_DeleteDialogTitle"),this.services.localizationService.get("Alerts_DeleteDialogMessage"),this.getModalActionsArray(i,t))},t.prototype.getModalActionsArray=function(t,i){var o=this;return[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Delete"),function(r,a){t.hideDialog(),o.services.telemetryService.logChildEvent(o.openAlertsSettingsEvent,e.telemetry.DataAlertsDeleteAlertAccept),o.services.alertHttpService.deleteAlert(i.contract.id,o.openAlertsSettingsEvent).then((function(e){if(e)for(var t=0,r=o.viewModel;t<r.length;t++){var a=r[t];_.remove(a.alerts,(function(e){return e.contract.id===i.contract.id}))}}))}),new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Cancel"),function(i,r){o.services.telemetryService.logChildEvent(o.openAlertsSettingsEvent,e.telemetry.DataAlertsDeleteAlertCancel),t.hideDialog()})]},t})();t.SettingsAlertsController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.SettingsAlerts={controller:e.common.Services.createController(e.controllers.SettingsAlertsController),templateUrl:"components/settingsAlerts/settingsAlertsView.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.constants,o=(function(){function t(e,t){this.tutorialDataStore=t.tutorialDataStore,this.telemetryService=t.telemetryService,this.previewFeaturesModalService=t.previewFeaturesModalService}return t.createOptions=function(){return{additionalServices:["telemetryService","tutorialDataStore","previewFeaturesModalService"]}},t.prototype.$onInit=function(){var e=this;this.tutorialDataStore.onReady((function(){e.previewModel=e.startingPreviewModel=e.tutorialDataStore.hasKey(i.previewConceptualModelNewKey)}))},t.prototype.applyChanges=function(){if(!this.isClean()){this.startingPreviewModel=this.previewModel;var t=this.telemetryService.startEvent(e.telemetry.PreviewConceptualModel,this.previewModel,e.telemetry.From.Settings);this.tutorialDataStore.setKey(i.previewConceptualModelNewKey,this.previewModel,t)}},t.prototype.isClean=function(){return this.previewModel===this.startingPreviewModel},t.prototype.discardChanges=function(){this.previewModel=this.startingPreviewModel},t.prototype.showTourModal=function(e){e.preventDefault(),this.previewFeaturesModalService.showModal(!1)},t})();t.SettingsPreviewFeaturesController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.SettingsPreviewFeatures={templateUrl:"components/settingsPreviewFeatures/settingsPreviewFeatures.html",controller:e.common.Services.createController(e.controllers.SettingsPreviewFeaturesController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){var i=(function(){function t(t,i){var o=this;this.services=i,this.userNotifications={featureSwitchUserNotificationEnabled:!1,notifications:[],dismissNotification:function(t){o.services.userNotificationInfo.dismissNotification(t.contract),t.contract.notificationCategory===e.userNotifications.contracts.NotificationCategory.DynamicMessage&&o.services.dynamicMessagingData.postData(e.constants.dynamicMessaging.userDismissedAction)},showDismissAllDialog:function(){o.confirmDismissAll()},showLoadMore:!1,disableLoadMore:!1,loadingData:!0,loadMoreNotification:function(){o.userNotifications.disableLoadMore=!0,o.userNotifications.loadingData=!0,o.services.userNotificationInfo.getNextPageData()},performAction:function(e){o.navigateToState(e)},loadIcon:function(e){o.services.userNotificationInfo.loadIcon(e.contract)},moreOptionsMenu:[{text:this.services.localizationService.get("UsersNotifications_Options"),type:DropDownMenuItemType.Title},{action:0,text:this.services.localizationService.get("UsersNotifications_DismissAll"),type:DropDownMenuItemType.Item}],menuEnabled:!1},this.services.featureSwitchService.getFeatureSwitches().then((function(){o.userNotifications.featureSwitchUserNotificationEnabled=o.services.featureSwitchService.featureSwitches.userNotificationsEnabled})),this.mapUserNotifications(),this.services.userNotificationInfo.registerNotificationsUpdatedListner((function(){o.mapUserNotifications()})),t.$watch((function(){return o.services.userNotificationInfo.hidePaneOnClick}),(function(e){t.$applyAsync((function(){e&&o.hideNotifications()}))}))}return t.createOptions=function(){return{additionalServices:["$window","errorService","featureSwitchService","promiseFactory","telemetryService","localizationService","userNotificationInfo","navigation","licenseHelperService","userNotificationTileFilterService","dynamicMessagingData"]}},t.prototype.moreOptionsMenuSelected=function(e){var t=e.action;if(null!=t)switch(t){case 0:this.userNotifications.showDismissAllDialog()}},t.prototype.hideNotifications=function(){if(this.services.userNotificationInfo.userNotifications)if(this.services.userNotificationTileFilterService.tileId){var e=_.filter(this.userNotifications.notifications,(function(e){return!e.seen}));if(!_.isEmpty(e)){var t=_.map(e,(function(e){return e.contract.id}));this.services.userNotificationInfo.updateSeenNotifications(t)}}else this.services.userNotificationInfo.userNotifications.unseenCount>0&&this.services.userNotificationInfo.updateLastSeenDate();this.services.userNotificationTileFilterService.tileId=null,this.services.userNotificationInfo.showPane=!1},t.prototype.navigateToState=function(t){var i,o;switch(t.actionType){case e.userNotifications.contracts.NotificationActionType.Dashboard:this.services.navigation.insertGroupAndNavigateToDashboardByGUID(t.actionPath[0],e.constants.myWorkSpaceGroupId);break;case e.userNotifications.contracts.NotificationActionType.Trial:this.services.licenseHelperService.displayDialogToExtendTrial(e.telemetry.LicenseEnforcementOperation.NotificationBar);break;case e.userNotifications.contracts.NotificationActionType.InFocus:var r=t.actionPath;o=r[2],i=r[3],this.services.navigation.showInFocusMode(r[1],i,r[0],o,e.constants.myWorkSpaceGroupId),t.contract.message.filterProperties&&t.contract.message.filterProperties.UserDataAlertRuleId&&this.services.telemetryService.logEvent(e.telemetry.DataAlertsNotificationAction,e.telemetry.DataAlertNotificationSource.UnifiedNotificationPane,e.telemetry.DataAlertNotificationAction.OpenTile,parseInt(t.contract.message.filterProperties.UserDataAlertRuleId,10));break;case e.userNotifications.contracts.NotificationActionType.InFocusGroup:var a=t.actionPath;o=r[3],i=r[4],this.services.navigation.showInFocusMode(a[2],i,a[1],o,a[0]),t.contract.message.filterProperties&&t.contract.message.filterProperties.UserDataAlertRuleId&&this.services.telemetryService.logEvent(e.telemetry.DataAlertsNotificationAction,e.telemetry.DataAlertNotificationSource.UnifiedNotificationPane,e.telemetry.DataAlertNotificationAction.OpenTile,parseInt(t.contract.message.filterProperties.UserDataAlertRuleId,10));break;case e.userNotifications.contracts.NotificationActionType.DashboardGroup:this.services.navigation.insertGroupAndNavigateToDashboardByGUID(t.actionPath[0],t.actionPath[1]);break;case e.userNotifications.contracts.NotificationActionType.DynamicMessage:this.services.dynamicMessagingData.postData(e.constants.dynamicMessaging.userClickedAction),this.services.$window.open(t.actionPath[0],"_blank")}this.services.telemetryService.logEvent(e.telemetry.UserNotificationsLinkClicked,e.userNotifications.contracts.NotificationCategory[t.contract.notificationCategory]),
this.services.userNotificationInfo.hidePaneOnClick=!0},t.prototype.mapUserNotifications=function(){var t=this;if(this.userNotifications.notifications=[],this.services.userNotificationInfo.userNotifications){var i=this.services.userNotificationInfo.userNotifications.notifications;this.services.userNotificationTileFilterService.tileId&&(i=this.services.userNotificationTileFilterService.filterNotifications(i)),_.isEmpty(i)||i.forEach((function(i){var o=new e.userNotifications.models.UserNotificationModel(i);t.userNotifications.notifications.push(o)})),this.userNotifications.showLoadMore=this.userNotifications.notifications.length<this.services.userNotificationInfo.userNotifications.totalCount,this.userNotifications.disableLoadMore=!1,this.userNotifications.loadingData=!1}},t.prototype.confirmDismissAll=function(){var e=this,t=this.services.errorService,i=t.control(),o=[new InJs.ModalDialogAction(this.services.localizationService.get("UsersNotifications_DismissAll"),function(t,o){e.services.userNotificationInfo.dismissAll(),i.hideDialog()}),new InJs.ModalDialogAction(this.services.localizationService.get("UsersNotifications_Cancel"),function(e,t){i.hideDialog()})],r=this.services.localizationService.get("UsersNotifications_DismissAllConfirmation"),a=this.services.localizationService.get("UsersNotifications_ConfirmDismissAll");i.showCustomDialog(r,$("<div/>").text(a),o,(function(t){t.parent().find('input[value="'+e.services.localizationService.get("UsersNotifications_Cancel")+'"]').focus()}),!0)},t})();t.UserNotificationController=i})(i=t.userNotifications||(t.userNotifications={}))})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.UserNotifications={templateUrl:"components/userNotifications/userNotificationsView.html",controller:e.common.Services.createController(e.controllers.userNotifications.UserNotificationController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.contracts.Permissions,o=(function(){function o(e,i,o,r){this.telemetryService=e,this.navigation=i,this.selectDatasetDialogBuilder=new t.SelectDatasetDialogBuilder(o,r)}return o.prototype.canCreateReport=function(e){return!e.isHidden&&(e.contract.permissions&i.CopyOnWrite)!==i.CopyOnWrite},o.prototype.show=function(){var t=this,i=this.selectDatasetDialogBuilder.show("CreateReportDialog","DashboardContextMenu_CreateReport","CreateReport_Description","CreateReport_Create","ModalDialogButtonText_Close",this.canCreateReport);return i.then((function(i){return i?void(i.openGetData?(t.telemetryService.logEvent(e.telemetry.CreateReportDialogImport),t.navigation.showGetDataSlider()):i.selectedDataset?(t.telemetryService.logEvent(e.telemetry.CreateReportDialogCreate,i.selectedDataset.dbName),t.navigation.navigateToDatasetByDBName(i.selectedDataset.dbName)):t.telemetryService.logEvent(e.telemetry.CreateReportDialogCanceled)):void t.telemetryService.logEvent(e.telemetry.CreateReportDialogCanceled)})),i},o})();t.CreateReportDialogBuilder=o})(t=e.dialogs||(e.dialogs={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.constants,o=(function(){function t(e,t){this.services=t,this.scope=e,this.scope.$on(i.tileAddedToMobileSimulatorEventName,(function(){$(i.dashboardSelector).animate({scrollTop:$(i.tileContainerSelector).height()},"slow")}))}return t.createOptions=function(){return{additionalServices:["telemetryService"]}},t.prototype.$onDestroy=function(){for(var e=this.viewModel.mobileDashboard.tiles,t=0,i=e;t<i.length;t++){var o=i[t];o.gridLayoutContext&&o.gridLayoutContext.setActiveLayout(0),o.invalidateLayout()}this.raiseExitMobileAuthoringEmptyIfNeeded()},t.prototype.pinnedTiles=function(){return _.filter(this.viewModel.mobileDashboard.tiles,(function(e){return e.hasLayoutPosition(1)}))},t.prototype.raiseExitMobileAuthoringEmptyIfNeeded=function(){var t=this.viewModel.mobileDashboard.tiles,i=_.any(t,(function(e){return e.hasLayoutPosition(1)})),o=_.any(t,(function(e){return e.hasLayoutDefinition(1)}));!i&&o&&this.services.telemetryService.logEvent(e.telemetry.DashboardUserExitsAuthoringModeWithEmptyMobileLayout,this.viewModel.mobileDashboard.objectId)},t})();t.DashboardEditMobileDisplayController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.DashboardEditMobileDisplay={templateUrl:"components/dashboardEditMobileDisplay/dashboardEditMobileDisplay.html",bindings:{viewModel:"="},controller:e.common.Services.createController(e.controllers.DashboardEditMobileDisplayController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e.prototype.toggle=function(){this.viewModel.isPaneExpanded=!this.viewModel.isPaneExpanded},e})();e.DashboardPaneController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.DashboardPane={templateUrl:"components/dashboardPane/dashboardPane.html",bindings:{viewModel:"="},controller:e.common.Services.createController(e.controllers.DashboardPaneController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.constants,o=e.common.GridLayoutConstants,r=e.dataServices.TileUtils,a=(function(){function e(e,t){this.scope=e,this.services=t,this.currentUnpinedTileList=this.getLastUnpinnedTiles()}return e.createOptions=function(){return{additionalServices:["dashboardService"]}},e.prototype.shouldShowUnpinnedTileList=function(){return!_.isEmpty(this.unpinnedTiles())},e.prototype.unpinnedTiles=function(){return this.prepareCurrentUnpinedTileList(),this.currentUnpinedTileList},e.prototype.getLastUnpinnedTiles=function(){return this.viewModel?_.filter(this.viewModel.tiles,(function(e){return!e.hasLayoutPosition(1)})):[]},e.prototype.prepareCurrentUnpinedTileList=function(){var e=this.getLastUnpinnedTiles(),t=_.map(e,(function(e){return e.id})),i=_.map(this.currentUnpinedTileList,(function(e){return e.id})),r=this.findTileListDiff(t,i,e),a=this.findTileListDiff(i,t,this.currentUnpinedTileList);_.remove(this.currentUnpinedTileList,(function(e){return _.contains(a,e)}));for(var n=0,s=r;n<s.length;n++){var c=s[n];this.currentUnpinedTileList.push(c),c.calculateLayout({height:o.defaultGridHeight,width:o.defaultGridWidth})}},e.prototype.findTileListDiff=function(e,t,i){var o=_.difference(e,t);return _.filter(i,(function(e){return _.contains(o,e.id)}))},e.prototype.tileTrackerFn=function(e){return r.tileTrackerFn(e,this.viewModel.objectId)},e.prototype.addTileToMobile=function(e){var t=this.findVacantRow(),o=1,a=[];a.push(r.createDefaultPhoneByTile(t,o,e)),this.scope.$emit(i.domLayoutChangedEvent),this.services.dashboardService.batchUpdateTileSizePosition(this.viewModel,a),this.scope.$emit(i.tileAddedToMobileSimulatorEventName)},e.prototype.findVacantRow=function(){var e;e=1;for(var t=_.filter(this.viewModel.tiles,(function(e){return e.hasLayoutPosition(1)})),i=0,o=t;i<o.length;i++){var r=o[i],a=r.gridLayouts[1].position;e<a.y+a.height&&(e=a.y+a.height)}return e},e})();t.DashboardTileListController=a})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.DashboardTileList={templateUrl:"components/dashboardTileList/dashboardTileList.html",bindings:{viewModel:"<"},controller:e.common.Services.createController(e.controllers.DashboardTileListController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.helpers.ModelConverterHelper,o=e.common.contracts.PublishOrRefreshStatus,r=(function(){function t(e,t){var i=this;this.services=t,this.refreshDatasetModel={},e.$watch((function(){return i.viewModel.currentRefreshStartingTime}),(function(){i.updateDatasetMetadata()}))}return t.createOptions=function(){return{additionalServices:["refreshService","modelConverter","localizationService","historyDialogService","modelService","packageService"]}},t.prototype.$onInit=function(){this.datasetMetadata=this.getDatasetMetadata(this.viewModel)},t.prototype.showHistoryDialog=function(){this.services.historyDialogService.showHistoryDialog(this.refreshDatasetModel)},t.prototype.getDatasetMetadata=function(o,r){var a=this,n=this.services.refreshService,s=this.services.modelConverter,c=this.services.localizationService,l=this.services.historyDialogService,d=[],p=function(i){o.contentProviderId=i.contentProviderId,o.onPremModelConnectionString=i.onPremModelConnectionString,o.directQueryMode=i.directQueryMode,o.currentRefreshStartingTime=i.currentRefreshStartingTime,o.refreshSchedule=i.refreshSchedule,o.refreshHistories=i.refreshHistories,o.insightsSupported=i.insightsSupported,o.storageProviderType=i.storageProviderType,d=o.onPremModelConnectionString?t.addRefreshInfoForOnPremAnalysisServicesToMetadata(r):o.directQueryMode?t.addRefreshInfoForDirectQueryModel(r):t.addRefreshStatusToMetadata(s,i,c,l,a.refreshDatasetModel,r),n.isModelRefreshInProgress(i)?t.updateMetadataValue(r,"refreshInProgress",e.common.models.ContextMenuItemMetadataType.Text,(function(){return c.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_RefreshInProgress")})):t.deleteMetadataItem(r,"refreshInProgress",e.common.models.ContextMenuItemMetadataType.Text)},u=this.services.modelService.findModel(o.id,o.packageId);return u&&(this.setMissingPropertiesOnContractModelFromPackage(u),p(u.contract),this.refreshDatasetModel.dataset=i.convertModelToDataset(u.contract)),d},t.addRefreshInfoForOnPremAnalysisServicesToMetadata=function(i){var o=[],r=e.common.localize.get("SettingsDataset_DisableEntireRefreshPageErrorMessage_OnPremAnalysisServicesScheduleInfo");return o.push({name:"OnPremASRefreshInfo",type:e.common.models.ContextMenuItemMetadataType.Text,value:function(){return r}}),t.updateMetadataValue(i,"OnPremASRefreshInfo",e.common.models.ContextMenuItemMetadataType.Text,(function(){return r})),o},t.addRefreshInfoForDirectQueryModel=function(i){var o=[],r=e.common.localize.get("SettingsDataset_DisableEntireRefreshPageErrorMessage_DirectQueryScheduleInfo");return o.push({name:"DirectQueryRefreshInfo",type:e.common.models.ContextMenuItemMetadataType.Text,value:function(){return r}}),t.updateMetadataValue(i,"DirectQueryRefreshInfo",e.common.models.ContextMenuItemMetadataType.Text,(function(){return r})),o},t.addRefreshStatusToMetadata=function(r,a,n,s,c,l){var d,p,u=[],v=i.convertRefreshTimeToJsDateTime(a.lastRefreshTime),h=!1;a.lastRefreshStatus===o.RefreshError?(d=e.common.models.ContextMenuItemMetadataType.Action,p=n.format("SettingsDataset_ScheduleRefresh_FlyoutMessage_LastRefreshFailed",[""+v]),h=!0):a.lastRefreshStatus===o.PublishError?(d=e.common.models.ContextMenuItemMetadataType.Action,p=n.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_LastPackagePublishFailed")):(d=e.common.models.ContextMenuItemMetadataType.Text,p=n.format("SettingsDataset_ScheduleRefresh_FlyoutMessage_LastRefreshSucceeded",[""+v])),u.push({name:"lastRefreshStatus",type:d,isWarning:h,value:function(){return p},actionOnClick:function(){s.showHistoryDialog(c)},actionText:function(){return p}}),t.updateMetadataValue(l,"lastRefreshStatus",d,(function(){return p}),h,void 0,void 0,void 0,(function(){s.showHistoryDialog(c)}));var g=t.isModelScheduledRefreshEnabled(a),m=t.doesStorageSourceAllowRefresh(a),f=t.isStorageSourceRefreshEnabled(a);if(m)if(f&&g){var y=n.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_NextRefresh")+i.convertRefreshTimeToJsDateTime(a.nextRefreshTime);t.showNextRefresh(y,u,l)}else if(!f&&g){var y=n.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_NotOneDriveNextScheduled")+i.convertRefreshTimeToJsDateTime(a.nextRefreshTime);t.showNextRefresh(y,u,l)}else if(f&&!g){var y=n.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_OneDriveEnabledRefreshNotEnabled");t.showRefreshDisabled(y,u,l)}else{var y=n.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_NotOneDriveAndScheduleRefreshNotEnabled");t.showRefreshDisabled(y,u,l)}else if(g){var y=n.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_NextRefresh")+i.convertRefreshTimeToJsDateTime(a.nextRefreshTime);t.showNextRefresh(y,u,l)}else{var y=n.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_RefreshNotEnabled");t.showRefreshDisabled(y,u,l)}return u},t.isModelScheduledRefreshEnabled=function(t){return t.refreshSchedule.refreshEnabled!==!1&&(t.contentProviderId===e.controllers.ContentProviderIds.salesforce||t.isAllDataSourcesSupportedForRefresh!==!1)},t.updateMetadataValue=function(e,t,i,o,r,a,n,s,c,l){if(void 0===r&&(r=!1),e){for(var d=void 0,p=0,u=e.length;p<u;p++){var v=e[p];if(v.name===t){d=v;break}}d?(d.value=o,d.isWarning=r,d.linkText=a,d.linkUrl=n,d.linkTitle=s,d.actionOnClick=c,d.type=i,d.infoTooltipConfig=l):e.push({name:t,type:i,value:o,linkText:a,linkUrl:n,linkTitle:s,linkTarget:"_blank",actionOnClick:c,isWarning:r,infoTooltipConfig:l})}},t.deleteMetadataItem=function(e,t,i){if(e){for(var o=void 0,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name===t&&n.type===i){o=r;break}}o&&e.splice(o,1)}},t.getNextRefreshTimeName=function(){var e="nextRefreshTime";return e},t.getRefreshScheduleNotSetupName=function(){var e="refreshScheduleNotSetUp";return e},t.showNextRefresh=function(i,o,r){var a=t.getNextRefreshTimeName();t.deleteMetadataItem(r,"refreshScheduleNotSetUp",e.common.models.ContextMenuItemMetadataType.Text),o.push({name:a,type:e.common.models.ContextMenuItemMetadataType.Text,value:function(){return i}}),t.updateMetadataValue(r,a,e.common.models.ContextMenuItemMetadataType.Text,(function(){return i})),t.deleteMetadataItem(r,t.getRefreshScheduleNotSetupName(),e.common.models.ContextMenuItemMetadataType.Text)},t.doesStorageSourceAllowRefresh=function(t){return t.storageProviderType===e.common.contracts.StorageProviderType.OneDrive||t.storageProviderType===e.common.contracts.StorageProviderType.SharePoint},t.isStorageSourceRefreshEnabled=function(e){return e.isPackageRefreshEnabled},t.prototype.updateDatasetMetadata=function(){this.getDatasetMetadata(this.viewModel,this.datasetMetadata)},t.showRefreshDisabled=function(i,o,r){var a=t.getRefreshScheduleNotSetupName();t.deleteMetadataItem(r,t.getNextRefreshTimeName(),e.common.models.ContextMenuItemMetadataType.Text),o.push({name:a,type:e.common.models.ContextMenuItemMetadataType.Text,value:function(){return i}}),t.updateMetadataValue(r,a,e.common.models.ContextMenuItemMetadataType.Text,(function(){return i}))},t.prototype.setMissingPropertiesOnContractModelFromPackage=function(e){var t=this.services.packageService.findPackage(e.packageId);t&&(void 0===e.contract.storageProviderType&&(e.contract.storageProviderType=t.contract.storageProviderType),e.contract.isPackageRefreshEnabled=t.contract.IsRefreshEnabled)},t})();t.MetadataContainerController=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.MetadataContainer={templateUrl:"components/metadataContainer/metadataContainer.html",controller:e.common.Services.createController(e.controllers.MetadataContainerController),bindings:{viewModel:"="}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.helpers.ModelConverterHelper,o=e.common.contracts.PublishOrRefreshStatus,r=e.common.contracts.ContentTileType,a=e.common.contracts.Permissions,n=(function(){function n(e,t){this.services=t,this.canShowNew=!0}return n.createOptions=function(){return{additionalServices:["localizationService","modelService","telemetryService","errorService","ownership","modelHttpService","dashboardService","reportService","workbookService","conceptualModelSetting"]}},n.prototype.$onInit=function(){this.initViewModelContract(),this.icon=this.isViewModelShared()?e.models.NavigationPaneListItemIcon.Shared:e.models.NavigationPaneListItemIcon.None,this.tooltipConfig={tooltipLocalizeDescription:"NavigationPane_RefreshError",tooltipArrowPosition:e.common.ArrowPosition.arrowTopLeft}},n.prototype.isShared=function(){return(!this.services.conceptualModelSetting.isListViewEnabled()||!this.viewModel.contentTileType||this.viewModel.contentTileType===r.Favorite)&&(this.viewModelContract?this.icon===e.models.NavigationPaneListItemIcon.Shared&&this.viewModelContract.packagePublishStatus!==o.PublishError&&this.viewModelContract.lastRefreshStatus!==o.RefreshError:this.icon===e.models.NavigationPaneListItemIcon.Shared)},n.prototype.isNew=function(){return this.viewModelContract?this.canShowNew&&this.viewModel.isNew&&this.viewModelContract.packagePublishStatus!==o.PublishError&&this.viewModelContract.packagePublishStatus!==o.RefreshError&&!this.isRefreshInProgress():this.canShowNew&&this.viewModel.isNew},n.prototype.isPublishError=function(){return!!this.viewModelContract&&this.getPackagePublishStatus()===o.PublishError},n.prototype.showIcon=function(){if(this.viewModelContract){var t=this.services.modelService.findModel(this.viewModelContract.id,this.viewModelContract.packageId);if(t)return t.packagePublishStatus!==e.common.contracts.PublishOrRefreshStatus.PublishError&&t.contract.lastRefreshStatus!==e.common.contracts.PublishOrRefreshStatus.RefreshError}return!1},n.prototype.showRefreshError=function(){if(this.viewModelContract){var t=this.services.modelService.findModel(this.viewModelContract.id,this.viewModelContract.packageId);if(t)return t.packagePublishStatus===e.common.contracts.PublishOrRefreshStatus.RefreshError||t.contract.lastRefreshStatus===e.common.contracts.PublishOrRefreshStatus.RefreshError}return!1},n.prototype.isRefreshInProgress=function(){if(this.viewModelContract){var e=this.services.modelService.findModel(this.viewModelContract.id,this.viewModelContract.packageId);return!!e&&e.isRefreshInProgress}return!1},n.prototype.getPackagePublishStatus=function(){var t=this.services.modelService.findModel(this.viewModelContract.id,this.viewModelContract.packageId);return t?t.packagePublishStatus:e.common.contracts.PublishOrRefreshStatus.FinishedSuccessfully},n.prototype.showRefreshErrorDialog=function(){var t=this,i=this.services.telemetryService,r=i.startEvent(e.telemetry.DashboardGetRefreshHistoriesOnRefreshFailures);this.viewModelContract.lastRefreshStatus===o.RefreshError&&this.viewModelContract.packagePublishStatus===o.RefreshError?this.services.modelHttpService.getModelRefreshHistories(this.viewModelContract.id.toString(),r.event).then((function(e){t.processModelAndPackageRefreshHistories(r,e)}),(function(e){t.processModelAndPackageRefreshHistories(r)})):this.viewModelContract.lastRefreshStatus===o.RefreshError?this.services.modelHttpService.getModelRefreshHistories(this.viewModelContract.id.toString(),r.event).then((function(e){t.displaySuccessHistoryResult(e.data),r.resolve()}),(function(e){t.displayErrorHistoryResult(),r.reject()})):this.viewModelContract.packagePublishStatus===o.RefreshError&&this.services.modelHttpService.getPackageRefreshHistories(this.viewModelContract.packageId.toString(),r.event).then((function(e){t.displaySuccessHistoryResult(e.data),r.resolve()}),(function(e){t.displayErrorHistoryResult(),r.reject()}))},n.prototype.isViewModelShared=function(){return this.viewModel.contentTileType===r.Favorite?this.viewModel.permissions===a.Read||this.viewModel.permissions===a.ReadReshare:this.services.ownership.isResourceSharedWithMe(this.viewModel)},n.prototype.displaySuccessHistoryResult=function(e){if(_.isEmpty(e));else{var i=t.SettingsDatasetController.getFriendlyErrorMessage(e[0].serviceExceptionJson),o=this.parseAdditionalErrorInfo(e[0].serviceExceptionJson);this.services.errorService.errorNoDefaultAdditionalErrorInfo(i,"RefreshFailure",{displayableErrorInfo:o})}},n.prototype.displayErrorHistoryResult=function(){this.services.errorService.error(this.services.localizationService.get("RefreshError_Unknown"),"RefreshFailure_FailedToGetHistories")},n.prototype.parseAdditionalErrorInfo=function(e){var i=t.SettingsDatasetController.convertErrorDetailsJson(e),o=[];return i.forEach((function(e){o.push({errorInfoKey:e.Name,errorInfoValue:e.Value})})),o},n.prototype.processModelAndPackageRefreshHistories=function(e,t){var o=this;this.services.modelHttpService.getPackageRefreshHistories(this.viewModelContract.packageId.toString(),e.event).then((function(r){var a;if(!t||_.isEmpty(t.data)||t.data[0].isSuccessful)a=!1;else if(_.isEmpty(r.data)||r.data[0].isSuccessful)a=!0;else{var n=i.convertRefreshTimeToJsDateTime(t.data[0].endTime).getTime(),s=i.convertRefreshTimeToJsDateTime(r.data[0].endTime).getTime();a=n>s}a?o.displaySuccessHistoryResult(t.data):o.displaySuccessHistoryResult(r.data),e.resolve()}),(function(){t?(o.displaySuccessHistoryResult(t.data),e.resolve()):(o.displayErrorHistoryResult(),e.reject())}))},n.prototype.initViewModelContract=function(){var e=this.viewModel;switch(e.contentTileType){case r.Dashboard:case r.Report:e.modelIds&&e.packageIds&&e.modelIds.length>0&&e.packageIds.length>0&&(this.viewModelContract=this.services.modelService.findModel(this.viewModel.modelIds[0],this.viewModel.packageIds[0]));break;case r.Workbook:var t=this.viewModel,i=this.services.workbookService.findWorkbookByUniqueId(t.uniqueId);this.viewModelContract=this.services.modelService.findModel(i.modelId,i.packageId);break;default:this.viewModelContract=this.viewModel.contract}},n})();t.DatasetIconContainerController=n})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.DatasetIconContainer={templateUrl:"components/datasetIconContainer/datasetIconContainer.html",controller:e.common.Services.createController(e.controllers.DatasetIconContainerController),bindings:{viewModel:"=",refreshRelated:"=",canShowNew:"<?"}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){this.scope=e,this.services=t}return t.createOptions=function(){return{additionalServices:["localizationService","settingsMetadataService","modelService","dashboardService","reportService","workbookService","contentList"]}},t.prototype.$onInit=function(){var t=this;this.settingsType=this.services.settingsMetadataService.getSettingsType(),this.artifactObjectId=this.services.settingsMetadataService.getArtifactObjectId(),this.saveButtonText=this.services.localizationService.get("SettingsBlade_Save"),this.isSaving=!1,this.isWorkbook=!1,this.scope.$on(e.constants.hideTaskPaneSliderOnClickEventName,(function(e){return t.cancel()})),this.prepareToPopulateSettings()},t.prototype.$postLink=function(){window.setTimeout((function(){var e=angular.element(document.getElementsByClassName("nameInput"));e.focus()}),100)},t.prototype.prepareToPopulateSettings=function(){switch(this.settingsType){case 1:var e=this.services.dashboardService.findDashboardByGUID(this.artifactObjectId);this.artifactLabel=this.services.localizationService.get("SettingsBlade_DashboardName"),this.artifact=e,this.isSettingsPane=!0,this.ownerInfo=e.ownerFullname,this.ownerMail=e.ownerMail,this.populateDisplayName(e.displayName);break;case 2:var t=this.services.reportService.findReportByGUID(this.artifactObjectId);this.artifactLabel=this.services.localizationService.get("SettingsBlade_ReportName"),this.artifact=t,this.isSettingsPane=!1,this.populateDisplayName(t.displayName);break;case 3:var i=this.services.workbookService.findWorkbookByUniqueId(this.artifactObjectId);this.artifactLabel=this.services.localizationService.get("SettingsBlade_WorkbookName"),this.artifact=i,this.isSettingsPane=!1,this.isWorkbook=!0,this.populateDisplayName(i.displayName);break;case 4:var o=this.services.modelService.findModelByDBName(this.artifactObjectId);this.artifactLabel=this.services.localizationService.get("SettingsBlade_ModelName"),this.artifact=o,this.isSettingsPane=!1,this.populateDisplayName(o.displayName)}},t.prototype.saveModelName=function(t){switch(this.isSaving=!0,this.saveButtonText=this.services.localizationService.get("GroupEditor_WaitForSave"),this.settingsType){case 1:var i=this.services.dashboardService.findDashboardByGUID(this.artifactObjectId);this.services.dashboardService.renameDashboard(t,i.id),this.scope.$broadcast(e.constants.saveDashboardSettings);break;case 2:var o=this.services.reportService.findReportByGUID(this.artifactObjectId);this.services.reportService.renameReport(t,o.id);break;case 3:var r=this.services.workbookService.findWorkbookByUniqueId(this.artifactObjectId);this.services.workbookService.renameWorkbook(t,r.id,r.packageId);break;case 4:var a=this.services.modelService.findModelByDBName(this.artifactObjectId);this.services.modelService.renameModel(t,a.id,a.packageId)}this.unselectTileAndHideTaskPane()},t.prototype.cancel=function(){this.artifact.displayName=this.oldDisplayName,this.unselectTileAndHideTaskPane()},t.prototype.unselectTileAndHideTaskPane=function(){this.artifact.isContentTileSelected=!1,this.scope.$emit(e.constants.hideTaskPaneSlider)},t.prototype.isDisabled=function(){return this.scope.settingsForm&&!this.scope.settingsForm.$dirty&&this.scope.dashboardSettingsForm&&!this.scope.dashboardSettingsForm.$dirty||this.isSaving||this.artifact&&""===this.artifact.displayName},t.prototype.constructArtifactName=function(e){return this.isSettingsPane||this.isWorkbook?this.services.localizationService.format("SettingsBlade_SettingsFor",[e]):this.services.localizationService.format("SettingsBlade_SettingRename",[e])},t.prototype.populateDisplayName=function(e){this.oldDisplayName=e,this.artifactName=this.constructArtifactName(e),this.displayName=e},t})();t.SettingsBladeController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.SettingsBlade={controller:e.common.Services.createController(e.controllers.SettingsBladeController),templateUrl:"components/settingsBlade/settingsBlade.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){!(function(e){e[e.Subscriptions=0]="Subscriptions"})(e.SettingsCommunicationsSubgroupType||(e.SettingsCommunicationsSubgroupType={}));e.SettingsCommunicationsSubgroupType})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e.createOptions=function(){return{additionalServices:[]}},e})();e.SettingsCommunicationsController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.SettingsCommunications={bindings:{viewModel:"<"},controller:e.common.Services.createController(e.controllers.SettingsCommunicationsController),templateUrl:"components/settingsCommunications/settingsCommunications.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.helpers.ContentTileHelper,o=e.common.contracts.ContentTileType,r=jsCommon.EnumExtensions,a=e.common.contracts.Permissions,n=(function(){function t(i,n){var s=this;this.canRewrite=function(e){return r.hasFlag(e,a.All)||r.hasFlag(e,a.ReadWrite)},this.canExportPowerPoint=function(e){return!1},this.canRefreshNow=function(e){s.viewModel;return e===o.Workbook&&s.services.contentList.canRefreshNow(e,s.getObjectId(e))},this.canScheduleRefresh=function(e){return e===o.Workbook&&s.services.contentList.canScheduleRefresh(e,s.getObjectId(e))},this.isExportAllowed=function(e){if(e===o.Dashboard){var i=s.services.location.search()[t.isDasboardExportAllowedQueryString];return i&&"1"===i}return!1},this.canEditWorkbook=function(t){return t===o.Workbook&&s.viewModel instanceof e.dataServices.models.Workbook&&s.viewModel.isEditable()},this.canReplaceWorkbook=function(e){return e===o.Workbook&&s.services.contentList.canReplaceWorkbook(e,s.getObjectId(e))},this.unfavoriteContentTile=function(e){s.services.contentList.removeFavorite(e,s.viewModel.objectId)},this.getObjectId=function(t){return t===o.Workbook&&s.viewModel instanceof e.dataServices.models.Workbook?s.viewModel.uniqueId:s.viewModel.objectId},this.deleteContentTile=function(t){var i=s.viewModel;switch(t){case o.Dashboard:r.hasFlag(i.getPermissions(),a.All)||r.hasFlag(i.getPermissions(),a.ReadWrite)?s.services.contentList.deleteContent(t,s.getObjectId(t),!0):r.hasFlag(i.getPermissions(),a.CopyOnWrite)?s.services.contentList.identifyAndDeleteContent(s.getObjectId(t),t):s.services.contentList.deleteContent(t,s.getObjectId(t),!1);break;case o.Report:(i.getPermissions()&e.common.models.ReportPermissions.CopyOnWrite)===e.common.models.ReportPermissions.CopyOnWrite?s.services.contentList.identifyAndDeleteContent(s.getObjectId(t),t):s.services.contentList.deleteContent(t,s.getObjectId(t));break;case o.Workbook:case o.OrgApp:case o.PublishedOrgApp:s.services.contentList.identifyAndDeleteContent(s.getObjectId(t),t)}},this.contentTileRename=function(e){s.services.overlayService.hideAllDropdowns(),s.services.contentList.showRename(e,s.getObjectId(e))},this.refreshNow=function(e){s.services.contentList.refreshNow(e,s.getObjectId(e))},this.scheduleRefresh=function(e){s.services.contentList.scheduleRefresh(e,s.getObjectId(e))},this.exportToPowerPoint=function(e){s.services.contentList.exportToPowerPoint(e,s.getObjectId(e))},this.exportDashboard=function(e){s.services.contentList.exportDashboard(e,s.getObjectId(e))},this.editWorkbook=function(e){s.services.contentList.editWorkbook(e,s.getObjectId(e))},this.replaceWorkbook=function(e){s.services.contentList.replaceWorkbook(e,s.getObjectId(e))},this.favoriteContentTile=function(e){var t=s.viewModel.workspaceId||s.services.groupService.activeGroupObjectId;s.services.contentList.addFavorite(e,s.getObjectId(e),t)},this.scope=i,this.services=n}return t.createOptions=function(){return{additionalServices:["activeGroupId","analyzeInExcel","conceptualModelSetting","contentList","favorites","featureSwitchService","groupService","impersonationService","localizationService","navigation","overlayService","permissionService","publishedAppService","quota","userInfo"]}},t.prototype.$onInit=function(){this.tileType=this.viewModel.contentTileType,this.deleteEnabled=!(this.services.navigation.inAppDetailView()||this.services.navigation.inRecentlyViewedView())},t.prototype.canUnFavorite=function(e){return!this.services.conceptualModelSetting.isListViewEnabled()&&i.canUnFavorite(this.viewModel,this.services.contentList)},t.prototype.canFavorite=function(){return!this.services.conceptualModelSetting.isListViewEnabled()&&i.canFavorite(this.viewModel,this.services.contentList)},t.prototype.isFavoriteDisabled=function(){return i.isFavoriteDisabled(this.viewModel,this.services.contentList)},t.prototype.canShare=function(e,t){var i,n,s=this,c=r.hasFlag(e.getPermissions(),a.ReShare);t!==o.Dashboard&&t!==o.Favorite?this.canShareTile=!1:(i=t===o.Favorite?e.workspaceId:this.services.groupService.activeGroupObjectId,i?this.services.groupService.ensureGroupsInitialization().then((function(){n=s.services.groupService.getGroup(s.viewModel.workspaceId),n?s.canShareTile=!s.services.permissionService.isGroupWorkspaceReadOnly(n.contract.isReadOnly,n.contract.isOwner)&&c:s.canShareTile=c})):this.canShareTile=c)},t.prototype.canPersonalize=function(){var e=this.viewModel;if(this.services.navigation.inAppDetailView())return!1;var t=r.hasFlag(e.getPermissions(),a.CopyOnWrite);return e.contentTileType===o.Workbook&&t&&r.hasFlag(e.getPermissions(),a.All)||t},t.prototype.canAnalyzeInExcel=function(){var e=this.viewModel;switch(e.contentTileType){case o.Report:case o.AppDataset:return this.services.analyzeInExcel.isAnalyzeInExcelSupported(this.services.featureSwitchService,e.getPermissions());default:return!1}},t.prototype.canRunInsights=function(){var e=this.viewModel;if(e.contentTileType===o.Report||e.contentTileType===o.AppDataset){var t=this.services.contentList.getModels(e),i=t&&t[0];return i&&i.contract.insightsSupported&&r.hasFlag(i.getPermissions(),a.Read)}return!1},t.prototype.runInsights=function(){var t=this,i=this.viewModel,o=function(i,o){t.scope.$emit(e.insights.constants.insightsLoadedEventName,o,i)};this.services.contentList.runInsights(i,o);
},t.prototype.shareContentTile=function(t,i){var r;r=i===o.Favorite?t.workspaceId:this.services.groupService.activeGroupObjectId,this.services.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.ShareDashboard)||(r||(r=e.constants.myWorkSpaceGroupId),this.services.contentList.shareContent(i,t,r))},t.prototype.tooltipForSettings=function(e){return e===o.Dashboard?this.services.localizationService.get("ContentTileOptions_Settings"):this.services.localizationService.get("ContentTileOptions_Rename")},t.prototype.personalize=function(){var t=this.viewModel.contentTileType;this.services.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.PersonalizeContentPack)||this.services.contentList.personalizeContent(t,this.viewModel)},t.prototype.analyzeInExcel=function(){this.services.contentList.analyzeContentInExcel(this.viewModel)},t.prototype.editChannel=function(){var e=this.viewModel,t=e&&e.contract&&e.contract.providerKey;this.services.navigation.showPublishAppSlicer(t)},t.prototype.deleteChannel=function(){this.services.publishedAppService.deletePublishedApps(this.getObjectId(this.tileType))},t.isDasboardExportAllowedQueryString="exportallowed",t})();t.ContentTileOptionsMenuController=n})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.ContentTileOptionsMenu={templateUrl:"components/contentTileOptionsMenu/contentTileOptionsMenu.html",controller:e.common.Services.createController(e.controllers.ContentTileOptionsMenuController),bindings:{deleteEnabled:"<?",viewModel:"="}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.models.ContentPackItems,o=(function(){function t(t,i){var o=this;this.scope=t,this.services=i,this.isLoading=!0,this.scope.$on(e.constants.saveDashboardSettings,(function(){return o.applyChanges()}))}return t.createOptions=function(){return{additionalServices:["localizationService","settingsMetadataService","modelService","dashboardService","reportService","workbookService","modelConverter","errorService","dashboardHttpService","telemetryService","dataClassificationService","featureSwitchService"]}},t.prototype.$onInit=function(){var e=this,t=this.services.localizationService;this.scope.qnaEnabled=this.viewModel.qnaEnabled,this.scope.gravityEnabled=this.viewModel.gravityEnabled,this.scope.onDataClassificationIdChanged=function(){return e.onDataClassificationIdChanged()},this.services.featureSwitchService.featureSwitches.dataClassificationEnabled&&this.services.dataClassificationService.getDataClassificationsAsync().then((function(t){e.scope.dataClassifications=t,t.length&&(e.scope.defaultDataClassification=_.find(t,(function(e){return e.default})),e.scope.dataClassificationId=e.viewModel.dataClassificationId?e.viewModel.dataClassificationId:e.scope.defaultDataClassification.id)})),this.services.settingsMetadataService.getSettings().then((function(t){e.settingsModel=e.services.modelConverter.convertSettingsMetadata(t),e.isLoading=!1,e.settingsModel&&e.settingsModel.dashboards&&e.settingsModel.dashboards.dashboards&&(e.settingsDashboardModel=_.find(e.settingsModel.dashboards.dashboards,(function(t){return t.dashboardId===e.viewModel.id})),null==e.scope.qnaEnabled&&(e.scope.qnaEnabled=e.settingsDashboardModel.hasQnaSupportedModel))}),(function(){e.services.errorService.error(t.get("SettingsGeneral_Error_FailedToLoad"),"SettingsGeneral_Error_FailedToLoad")}))},t.prototype.qnaTooltip=function(e){return e?this.services.localizationService.get("SettingsBlade_QnAEnabled_Tooltip"):this.services.localizationService.get("SettingsBlade_QnADisabled_Tooltip")},t.prototype.gravityTooltip=function(e){return e?this.services.localizationService.get("SettingsBlade_GravityEnabled_Tooltip"):this.services.localizationService.get("SettingsBlade_GravityDisabled_Tooltip")},t.prototype.setQnADirty=function(){this.isQnaDirty=!0},t.prototype.applyChanges=function(){var t=this,o=this.scope,r=this.dashboardSettingsForm;if(r.$dirty){var a=this.settingsDashboardModel,n=a.dashboardId,s=o.qnaEnabled,c=o.gravityEnabled,l=o.dataClassificationId,d=this.services.telemetryService.startEvent(e.telemetry.DashboardSaveDashboardSettings,!1,!1,!1),p=this.getUpdatedDashboardSetting();this.services.dashboardHttpService.updateDashboardSetting(n,p,d.event).then((function(){var o=t.services.dashboardService.findDashboard(n);if(o&&o.isUsedByContentPack&&t.services.rootScope.$emit(e.constants.contentPackDirtyShowNotification,o.id,i.Dashboard),t.scope.qnaEnabled!==a.qnaEnabled&&(a.qnaEnabled=s,t.services.dashboardService.setQnaEnabled(a.dashboardId,s),d.event.info.qnaEnabledUpdated=!0),t.scope.gravityEnabled!==a.gravityEnabled){a.gravityEnabled=c,d.event.info.gravityEnabledUpdated=!0;var r=t.services.dashboardService.dashboardContainerModel.findDashboard(a.dashboardId);r&&(r.contract.gravityEnabled=r.gravityEnabled=c)}if(t.scope.dataClassificationId!==a.dataClassificationId){a.dataClassificationId=l,d.event.info.dataClassificationUpdated=!0;var p=t.services.dashboardService.dashboardContainerModel.findDashboard(a.dashboardId);p&&(p.contract.dataClassificationId=l,p.dataClassificationId=l)}d.resolve()}),(function(e){d.reject(),t.services.errorService.error(t.services.localizationService.get("SettingsDashboards_Error_FailedToSaveDashboards"),"SettingsDashboards_Error_FailedToSaveDashboards",{requestId:e.requestId,statusCode:e.status.toString()})}))}},t.prototype.getUpdatedDashboardSetting=function(){var e=this.settingsDashboardModel;return _.omit({qnaEnabled:this.scope.qnaEnabled!==e.qnaEnabled?this.scope.qnaEnabled:null,gravityEnabled:this.scope.gravityEnabled!==e.gravityEnabled?this.scope.gravityEnabled:null,dataClassificationId:this.scope.dataClassificationId!==e.dataClassificationId?this.scope.dataClassificationId:null},(function(e){return null===e}))},t.prototype.onDataClassificationIdChanged=function(){this.scope.isNonDefaultDataClassificationSelected=this.scope.dataClassificationId!==this.scope.defaultDataClassification.id},t})();t.SettingsDashboardBladeController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.SettingsDashboardBlade={controller:e.common.Services.createController(e.controllers.SettingsDashboardBladeController),templateUrl:"components/settingsDashboardBlade/settingsDashboardBlade.html",bindings:{viewModel:"=",dashboardSettingsForm:"="}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){this.services=t,this.sortType="name",this.sortReverse=!1}return t.createOptions=function(){return{additionalServices:["localizationService","navigation","telemetryService","subscriptionsHttp","modelConverter","errorService","groupService","subscription","explorationProxy"]}},t.prototype.$onInit=function(){var t=this;this.openSubscriptionSettingsEvent=this.services.telemetryService.logEvent(e.telemetry.EmailSubscriptionsOpenEmailSettings),this.services.subscriptionsHttp.getAllSubscriptions(this.openSubscriptionSettingsEvent).then((function(e){var i=t.services.groupService.activeGroup.displayName;t.viewModel=t.services.modelConverter.convertSettingsCommunications(e,i)}),(function(e){t.services.errorService.error(t.services.localizationService.get("SettingsGeneral_Error_FailedToLoad"),"SettingsGeneral_Error_FailedToLoad",{requestId:e.RequestId})}))},t.prototype.editSubscription=function(e){var t=this;this.services.explorationProxy.get({id:e.reportInfo.reportId}).then((function(e){t.services.subscription.expandPaneForReportSubscription({currentSection:e.sections[0],report:e.report,sections:e.sections,modelId:e.report.modelId})}),(function(e){t.services.errorService.error(t.services.localizationService.get("SettingsGeneral_Error_FailedToLoad"),"SettingsGeneral_Error_FailedToLoad",{requestId:e.requestId})}))},t.prototype.getSubscriptionsCount=function(e){var t=e.subscriptions.length;return 1===t?this.services.localizationService.get("SettingsCommunication_CountOfSubscription"):this.services.localizationService.format("SettingsCommunication_CountOfSubscriptions",[t])},t.prototype.getTypeLabel=function(e){if(e.reportInfo)return this.services.localizationService.get("SettingsCommunication_Report")},t.prototype.getArtifactDisplayName=function(e){if(e.reportInfo)return e.reportInfo.displayName},t.prototype.sort=function(e){var t=this;this.sortReverse=!this.sortReverse,this.sortType=e,this.viewModel.subscriptions.sort((function(i,o){var r=t.getProperty(i,e),a=t.getProperty(o,e),n=r>a;return t.sortReverse&&(n=r<a),n?1:0}))},t.prototype.getProperty=function(e,t){return"count"===t?e.subscriptions.length:e.reportInfo[t]},t})();t.SettingsSubscriptionsController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.SettingsSubscriptions={bindings:{viewModel:"<"},controller:e.common.Services.createController(e.controllers.SettingsSubscriptionsController),templateUrl:"components/settingsSubscriptions/settingsSubscriptions.html"}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.helpers.ModelConverterHelper,o=e.common.models.ContextMenuItemMetadataType,r=(function(){function r(e,t){this.scope=e,this.services=t}return r.createOptions=function(){return{additionalServices:["refreshService","errorService","telemetryService","localizationService","workbookService","modelService","packageService","historyDialogService","featureSwitchService","ownership","permissionService"]}},r.prototype.$onInit=function(){this.workbookModel=this.viewModel,this.model=new e.models.WorkbookNavigationPaneListItemModel(this.workbookModel),this.refreshDatasetModel={},this.workbookModel&&(this.model.metadata=this.getWorkbookMetadata(this.workbookModel.contract))},r.addLastRefreshForNonModelWorkbook=function(t,o){var a=i.convertRefreshTimeToJsDateTime(t),n=e.common.localize.format("SettingsDataset_ScheduleRefresh_FlyoutMessage_LastRefreshSucceeded",[""]);return r.addInfoForWorkbook("WorkbookIsUpToDate",""+a,o,null,n.toLocaleUpperCase())},r.addRefreshInfoForNotSupportedModelWorkbook=function(t){var i=e.common.localize.get("WorkbookContextMenu_NotSupportedModel_RefreshNotSupported");return r.addInfoForWorkbook("WorkbookIsUpToDate",i,t)},r.updateMetadataValue=function(e,t,i,o,r,a,n,s,c,l,d){if(void 0===r&&(r=!1),e){for(var p=void 0,u=0,v=e;u<v.length;u++){var h=v[u];if(h.name===t){p=h;break}}p?(p.value=o,p.isWarning=r,p.linkText=a,p.linkUrl=n,p.linkTitle=s,p.actionOnClick=c,p.type=i,p.infoTooltipConfig=l,p.label=d):e.push({name:t,type:i,value:o,linkText:a,linkUrl:n,linkTitle:s,linkTarget:"_blank",actionOnClick:c,isWarning:r,infoTooltipConfig:l,label:d})}},r.addInfoForWorkbook=function(e,t,i,a,n){var s=[];return s.push({name:e,type:o.Text,label:n,value:function(){return t},infoTooltipConfig:a}),r.updateMetadataValue(i,e,o.Text,(function(){return t}),null,null,null,null,null,a,n),s},r.addSpoFileName=function(t,i,o){var a=[],n=e.common.localize.get("WorkbookContextMenu_SpoFileName"),s=t.substring(t.lastIndexOf("/")+1);return a.push({name:"spoFileNameAndLink",type:e.common.models.ContextMenuItemMetadataType.Link,value:function(){return""},label:n.toLocaleUpperCase(),linkText:function(){return s},linkUrl:function(){return i},linkTitle:function(){return t},linkTarget:"_blank"}),r.updateMetadataValue(o,"spoFileNameAndLink",e.common.models.ContextMenuItemMetadataType.Link,(function(){return""}),!1,(function(){return s}),(function(){return i}),(function(){return t}),void 0,void 0,n.toLocaleUpperCase()),a},r.addExcelLocalFileInfo=function(t,i,o,a,n){var s;return n?(s=e.common.localize.format(t,[""]),r.addInfoForWorkbook(o,n,i,a,s.toLocaleUpperCase())):(s=e.common.localize.get(t),r.addInfoForWorkbook(o,s,i,a))},r.prototype.getWorkbookMetadata=function(e,a){var n=this,s=this.services.localizationService,c=this.services.historyDialogService,l=[],d=this.services.workbookService.findWorkbook(e.id,e.packageId);if(this.services.packageService.isLocalWorkbook(this.workbookModel.packageId)){l=l.concat(r.addExcelLocalFileInfo("WorkbookContextMenu_LocalFileName",a,"localFileName",o.Text,this.workbookModel.contract.sourceFilePath)),l=l.concat(r.addExcelLocalFileInfo("WorkbookContextMenu_Source",a,"FileSource",o.Text,this.services.localizationService.get("WorkbookContextMenu_Source_LocalFile")));var p=this.services.packageService.findPackage(this.workbookModel.packageId);if(p){var u=""+i.convertRefreshTimeToJsDateTime(p.lastRefreshTime);l=l.concat(r.addExcelLocalFileInfo("WorkbookContextMenu_LocalFile_LastUpdateTime",a,"localFileLastUpdated",o.Text,u))}return l}d.contract.sourceFilePath&&(l=l.concat(r.addSpoFileName(d.contract.sourceFilePath,d.viewUrl,a))),d.isOwner()&&(l=l.concat(r.addExcelLocalFileInfo("WorkbookContextMenu_Source",a,"FileSource",o.Text,this.services.localizationService.get("WorkbookContextMenu_Source_SharePointOneDrive"))));var v=this.services.modelService.findModel(this.workbookModel.modelId,this.workbookModel.packageId);if(!v){var p=this.services.packageService.findPackage(this.workbookModel.packageId);return p&&(l=l.concat(r.addLastRefreshForNonModelWorkbook(p.lastRefreshTime,a))),l}if(!this.workbookModel.contract.isPowerPivotVersionSupportsRefresh)return l=r.addRefreshInfoForNotSupportedModelWorkbook(a);var h=v.contract,g=function(e){h.contentProviderId=e.contentProviderId,h.onPremModelConnectionString=e.onPremModelConnectionString,h.directQueryMode=e.directQueryMode,h.refreshSchedule=e.refreshSchedule,h.refreshHistories=e.refreshHistories,h.storageProviderType=e.storageProviderType,l=l.concat(t.DatasetNavigationPaneListItemController.addRefreshStatusToMetadata(null,e,s,c,n.refreshDatasetModel,a))};return g(h),this.refreshDatasetModel.dataset=i.convertModelToDataset(h),l},r})();t.SettingsWorkbookBladeController=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.SettingsWorkbookBlade={controller:e.common.Services.createController(e.controllers.SettingsWorkbookBladeController),templateUrl:"components/settingsWorkbookBlade/settingsWorkbookBlade.html",bindings:{viewModel:"="}}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.contracts,o=i.FrequencyType,r=(function(){function t(t,i){var o=this;this.scope=t,this.services=i,this.openSubscriptionPaneEvent=this.services.telemetryService.logEvent(e.telemetry.EmailSubscriptionsOpenPane),this.reportInfo=this.services.subscription.getReportInfo(),this.isLoading=!0,this.services.subscriptionsHttp.getReportSubscription(this.reportInfo.report.id,this.openSubscriptionPaneEvent).then((function(e){o.viewModel=o.convertSubscriptionsToViewModel(e)}),(function(e){o.services.errorService.error(o.services.localizationService.get("SubscriptionPane_Error_FailedToLoadSubscriotions"),"SubscriptionPane_Error_FailedToLoadSubscriotions",{requestId:e.RequestId})})).finally((function(){o.isLoading=!1})),this.model=_.find(this.services.modelService.getModelContracts(),(function(e){return e.id===o.reportInfo.modelId})),this.refreshSchedule=this.services.modelService.getModelRefreshSchedule(this.reportInfo.modelId)}return t.createOptions=function(){return{additionalServices:["promiseFactory","subscription","subscriptionsHttp","telemetryService","modelService","userInfo","errorService","localizationService","navigation","groupService"]}},t.prototype.saveChangesAndExit=function(){var t=this,i=this.services.telemetryService.logEvent(e.telemetry.EmailSubscriptionsInertOrUpdateSubscriptions),o=this.services.telemetryService.startChildEvent(i,e.telemetry.EmailSubscriptionsSaveSubscription),r=this.viewModel.report.subscriptions,a=_.filter(r,(function(e){return 3===e.state})),n=_.filter(r,(function(e){return 1===e.state&&3!==e.previousState})),s=_.filter(r,(function(e){return 2===e.state}));if(_.isEmpty(a)&&_.isEmpty(n)&&_.isEmpty(s))return void this.closePane();var c;_.isEmpty(a)||(c=this.addSubscriptions(a)),_.isEmpty(n)||(c=this.deleteSubscriptions(c,n)),_.isEmpty(s)||(c=this.updateSubscriptions(c,s)),c?c.then((function(){o.resolve(),t.closePane()}),(function(e){t.services.errorService.error(t.services.localizationService.get("SettingsGeneral_Error_FailedToLoad"),"SettingsGeneral_Error_FailedToLoad",{requestId:e.RequestId}),o.reject()})).finally((function(){t.errorRequestId&&t.services.errorService.error(t.services.localizationService.get("SubscriptionPane_Error_FailedToInsertOrUpdateSubscriptions"),"SubscriptionPane_Error_FailedToInsertOrUpdateSubscriptions",{requestId:t.errorRequestId})})):(this.closePane(),o.resolve())},t.prototype.addNewSubscription=function(){for(var e=this.getNewSubscription(),t=this.viewModel.report.subscriptions,i=0,o=t;i<o.length;i++){var r=o[i];r.expanded=!1}t.unshift(e)},t.prototype.cancel=function(){this.closePane()},t.prototype.changeSubscriptionToUpdatedState=function(e){3!==e.state&&(e.state=2)},t.prototype.getSubscriptionName=function(e){return e.selectedSlide.displayName},t.prototype.removeSubscription=function(e){e.previousState=e.state,e.state=1},t.prototype.isSubscriptionDeleted=function(e){return 1===e.state},t.prototype.undoRemoveSubscription=function(e){e.state=e.previousState},t.prototype.navigate=function(){this.closePane(),this.services.navigation.inReportView()?this.services.navigation.showSettingsSlider(e.models.SettingsGroupsType.Communications):this.services.navigation.navigateToReportSubscriptionsPane(this.reportInfo.report.objectId,this.services.groupService.activeGroup.aadGroupId,this.reportInfo.report.originalReportObjectId)},t.prototype.canShowSchedule=function(){return this.getHighestFrequencyAllowed()!==(o.Daily|o.AfterDataRefresh)},t.prototype.convertSubscriptionsToViewModel=function(e){for(var t=[],i=this.services.subscription.getCurrentSubscriptionGUID(),r=this.getNewSubscription(),a=function(e){var o=_.filter(n.reportInfo.sections,(function(t){return t.id===e.sections[0].sectionId})),a=o&&o[0],s={id:e.id,expirationTime:e.expirationTime,objectId:e.objectId,enabled:e.enabled,expanded:!1,selectedFrequency:e.schedule.type,selectedSlide:a,subscriptionName:n.reportInfo.currentSection?n.reportInfo.currentSection.displayName:"",state:0,previousState:0,schedule:{type:e.schedule.type,interval:e.schedule.interval,subdayType:e.schedule.subdayType,subdayTimes:e.schedule.subdayTimes,relativeInterval:e.schedule.relativeInterval,recurrenceFactor:e.schedule.recurrenceFactor,localTimeZoneId:e.schedule.localTimeZoneId,startDate:e.schedule.startDate,endDate:e.schedule.endDate,scheduleId:e.schedule.id},users:e.users};i&&i.toLowerCase()===e.objectId.toLowerCase()&&(s.expanded=!0,r=s),t.push(s)},n=this,s=0,c=e;s<c.length;s++){var l=c[s];a(l)}_.isEmpty(t)&&t.unshift(r);var d=this.services.localizationService.get("EmailSnapshot_ManageAllSubscription");this.services.navigation.inReportView()||(d=this.services.localizationService.get("EmailSnapshot_EditInReport"));var p=[];return this.canShowSchedule()&&(this.refreshSchedule.isDaily&&p.push({label:this.services.localizationService.get("SettingsDataset_ScheduleRefresh_RefreshFrequency_Daily"),frequencyType:o.Daily|o.AfterDataRefresh}),p.push({label:this.services.localizationService.get("SettingsDataset_ScheduleRefresh_RefreshFrequency_Weekly"),frequencyType:o.Weekly|o.AfterDataRefresh})),{editMessage:d,report:{subscriptions:t,allowedFrequency:p,reportName:this.reportInfo.report.displayName,slides:this.reportInfo.sections,currentSubscription:r}}},t.prototype.getHighestFrequencyAllowed=function(){var e=this.model,t=o.AfterDataRefresh,i=o.Daily;return e&&(e.directQueryMode?i=o.Weekly:_.isEmpty(e.onPremModelConnectionString)?(e.isPackageRefreshEnabled||e.refreshSchedule&&e.refreshSchedule.refreshEnabled)&&(i=this.refreshSchedule.isDaily?o.Daily:o.Weekly):i=o.Daily),i|t},t.prototype.getNewSubscription=function(){var e=this.reportInfo.currentSection;return{enabled:!0,expanded:!0,selectedSlide:e,selectedFrequency:this.getHighestFrequencyAllowed(),state:3,previousState:0,subscriptionName:this.reportInfo.currentSection.displayName}},t.prototype.getSubscription=function(e){this.refreshSchedule=this.services.modelService.getModelRefreshSchedule(this.reportInfo.modelId);var t={id:e.id,objectId:e.objectId,enabled:e.enabled,expirationTime:e.expirationTime,schedule:{type:e.selectedFrequency,interval:e.schedule&&e.schedule.interval||0,subdayType:e.schedule&&e.schedule.subdayType||i.FrequencySubdayType.Unknown,recurrenceFactor:e.schedule&&e.schedule.recurrenceFactor||0,relativeInterval:i.FrequencyRelativeInterval.Unused,localTimeZoneId:e.schedule&&e.schedule.localTimeZoneId||this.refreshSchedule&&this.refreshSchedule.localTimeZoneId,startDate:e.schedule&&e.schedule.startDate,endDate:e.schedule&&e.schedule.endDate,id:e.schedule&&e.schedule.scheduleId},sections:[{sectionId:e.selectedSlide.id}],users:e.users};return t},t.prototype.addSubscriptions=function(t){for(var i,o=this,r=function(t){var r=a.services.telemetryService.startEvent(e.telemetry.EmailSubscriptionsAddSubscription);i?i.then((function(){return r.resolve(),o.services.subscriptionsHttp.createSubscription(o.getSubscription(t),r.event)}),(function(e){r.reject(),o.errorRequestId=e.RequestId})):i=a.services.subscriptionsHttp.createSubscription(a.getSubscription(t),r.event)},a=this,n=0,s=t;n<s.length;n++){var c=s[n];r(c)}return i},t.prototype.deleteSubscriptions=function(t,i){for(var o=this,r=function(i){var r=a.services.telemetryService.startEvent(e.telemetry.EmailSubscriptionsDeleteSubscription);t?t.then((function(){return r.resolve(),o.services.subscriptionsHttp.deleteSubscription(i.id,r.event)}),(function(e){r.reject(),o.errorRequestId=e.RequestId})):t=a.services.subscriptionsHttp.deleteSubscription(i.id,r.event)},a=this,n=0,s=i;n<s.length;n++){var c=s[n];r(c)}return t},t.prototype.updateSubscriptions=function(t,i){for(var o=this,r=function(i){var r=a.services.telemetryService.startEvent(e.telemetry.EmailSubscriptionsUpdateSubscription);t?t.then((function(){return r.resolve(),o.services.subscriptionsHttp.updateSubscription(o.getSubscription(i),r.event)}),(function(e){r.reject(),o.errorRequestId=e.RequestId})):t=a.services.subscriptionsHttp.updateSubscription(a.getSubscription(i),r.event)},a=this,n=0,s=i;n<s.length;n++){var c=s[n];r(c)}return t},t.prototype.closePane=function(){this.services.subscription.collapseSubscriptionPane()},t})();t.SubscriptionPaneController=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.SubscriptionPane={templateUrl:"components/subscriptionPane/subscriptionPane.html",controller:e.common.Services.createController(e.controllers.SubscriptionPaneController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.ArrowPosition,o=e.common.models.TooltipTheme,r=(function(){function e(e,t){this.services=t}return e.createOptions=function(){return{additionalServices:["modalDialogService"]}},e.prototype.close=function(){this.services.modalDialogService.close()},e.prototype.exportData=function(){this.services.modalDialogService.close({dataType:this.viewModel.dataType,format:this.convertStringToExportResultFormat(this.viewModel.dataFormat)})},e.prototype.update=function(e){this.viewModel.isCsvFormatDisabled=e===this.viewModel.options[1]},e.prototype.isDataTypeDisabled=function(e){return e===this.viewModel.options[1]&&(this.viewModel.isUnderlyingDisabled||this.viewModel.dataFormat===1..toString())},e.prototype.getTooltipConfigForDataType=function(e){if(!this.isDataTypeDisabled(e))return{tooltipDisable:!0};var t;return t=this.viewModel.isUnderlyingDisabled&&!this.viewModel.isExlFormatDisabled?"UnderlyingData_UnsupportedDataTooltipDescription":"SupportOnlyExlFormat_ToolTipDescription",{tooltipArrowPosition:i.arrowTopMiddle,tooltipDelay:100,tooltipLocalizeTitle:"UnderlyingData_Title",tooltipLocalizeDescription:t,tooltipTheme:o.Dark,isTooltipForModalDialog:!0}},e.prototype.convertStringToExportResultFormat=function(e){return e===(0).toString()?1:0},e})();t.ExportDataDialogController=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.ExportDataDialog={templateUrl:"components/exportDataDialog/exportDataDialog.html",bindings:{viewModel:"<"},controller:e.common.Services.createController(e.controllers.ExportDataDialogController)}})(t=e.components||(e.components={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){this.modalDialogService=e,this.localizationService=t}return t.prototype.show=function(t,i){var o=e.viewModels.ExportDataDialogViewModelFactory.create(this.localizationService,t,i),r={viewModel:o},a={dialogName:"ExportDataDialog",definitionTemplateCachePath:"components/exportDataDialog/exportDataDialogDefinition.html",bindings:r};return this.modalDialogService.showWebModalDialog(a)},t})();t.ExportDataDialogBuilder=i})(t=e.dialogs||(e.dialogs={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t,i){var o=0===t;return{options:[e.get("ModalDialog_ExportDataSummarized"),e.get("ModalDialog_ExportDataUnderlying")],dataType:0,dataFormat:o?(0).toString():1..toString(),isExlFormatDisabled:!o,isUnderlyingDisabled:!i,isCsvFormatDisabled:!1,exportXlsxUnsupportedType:t}}e.create=t})(t=e.ExportDataDialogViewModelFactory||(e.ExportDataDialogViewModelFactory={}))})(t=e.viewModels||(e.viewModels={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e){var t=this;this.scope=e,e.togglePane=function(){return t.togglePane()}}return e.prototype.togglePane=function(){var e=this.scope.viewModel;this.setCollapsePane(e.isExpanded!==!0)},e.prototype.setCollapsePane=function(e){var t=this.scope.viewModel;t.isExpanded=e},e})();e.CollapsiblePaneController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.constants,o=e.common.helpers,r=e.common.contracts.ConfigurationPageType,a=e.helpers.ContentProviderStoreHelper,n=jsCommon.DOMConstants,s=(function(){function t(t,r,s){var c=this;void 0===s&&(s=navigator.userAgent),this.scope=t,this.scope.showIFrame=!0,this.services=r;var l=r.errorService;this.modalDialog=l.control(),this.lastContentProviderContract=null,this.userAgent=s,this.scope.showLoadNotification=function(){return c.showLoadNotification()},this.scope.hideLoadNotification=function(){return c.hideLoadNotification()};var d=this.scope.$watch("viewModel",(function(e){c.scope.initConfigurationPage(e)}));this.scope.initConfigurationPage=function(t,i){t&&e.common.localize.ensureLocalization((function(){return c.initConfigurationPage(t,i)}))},this.scope.$on(i.scopeDestroyEventName,(function(){return d()}));var p=this.services.$window,u=function(t){var r;try{r=JSON.parse(t.data)}catch(e){}if(r&&t.origin===i.hostOrigin){var n=r;if(n)switch(n.message){case i.contentProviderStoreCloseModalDialogMessage:c.scope.unloadContentProviderFrame();break;case i.contentProviderStoreMashupContentProviderLoadedMessage:c.scope.hideLoadingUI();break;case i.contentProviderStoreShowLoadNotificationMessage:c.showLoadNotification();break;case i.contentProviderStoreHideLoadNotificationMessage:c.hideLoadNotification()}var s=r;if(s&&(s.ImportCancelled||s.IsBlockingOperation||s.BlockingOperationAborted)){if(s.ImportCancelled)return c.hideModalDialog(),c.services.navigation.navigateBack(),void c.scope.$apply();if(s.IsBlockingOperation)return void c.services.timeout((function(){var e=c,t=new Array,o='<span class="pbi-spinner"></span><span>{{upload}}</span>';o=o.replace("{{upload}}",c.services.localizationService.get("ExternalContentViewer_Upload"));var r=$(o);t[0]=new InJs.ModalDialogAction(c.services.localizationService.get("ExternalContentViewer_Cancel"),function(t){e.hideModalDialog();var o=e.contentProviderFrame[0].contentWindow;o.postMessage(JSON.stringify({ImportCancelled:!0}),i.hostOrigin)}),c.isModalDialogShown=!0,c.modalDialog.showCustomDialog(c.services.localizationService.get("ExternalContentViewer_UploadInProgress"),r,t,(function(){}),!1)}),0);if(s.BlockingOperationAborted)return void c.services.timeout((function(){c.hideModalDialog()}),0)}var d=r;if(d&&(d.ErrorMessage||d.ErrorType||d.RequestId||d.StatusCode||d.ErrorCode)){var u=d.ErrorCode,v=d.ErrorMessage,h=d.ErrorType;if(u){var g=a.getErrorMessageId(u,i.excelContentProviderId,c.services.featureSwitchService);g&&(v=c.services.localizationService.get(g),h=g)}return c.hideModalDialog(),void l.error(v,h,{requestId:d.RequestId,statusCode:d.StatusCode})}var m=r;m&&(m.DSID||m.SID)&&(c.hideModalDialog(),c.scope.$emit(e.constants.dataSourceAccessInfoGeneratedEventName,m,c.lastContentProviderContract));var f=r;f&&f.CompanionAppDownloadLinkClicked&&c.services.dashboardHttpService.getDashboardContainer(void 0).then((function(e){e.data.companionAppEnabled&&(p.location.href=o.powerBICompanionHelper.getDownloadLink()),e.data.downloadCenterLinkEnabled&&(p.location.href=o.powerBICompanionHelper.getDownloadCenterLink(e.data.downloadCenterX64Link,e.data.downloadCenterX86Link))}),(function(e){}));var y=r;y&&y.SampleWorkbookDownloadLinkClicked&&(p.location.href=o.powerBIExcelHelper.getDownloadLink())}};p.addEventListener(n.messageEventName,u,!1),this.scope.$on(i.scopeDestroyEventName,(function(){p.removeEventListener(n.messageEventName,u,!1)}))}return t.createOptions=function(){return{additionalServices:["$window","dashboardHttpService","errorService","contentProviderHttpService","featureSwitchService","navigation","telemetryService","localizationService","modalDialogService"]}},t.prototype.showLoadNotification=function(){if(!this.isLoadNotificationShown){var e=this.scope.$new(!0),t={containerCssClass:"notificationDialog",dialogCssClass:"notificationDialog",dialogName:null,template:"<load-notification-dialog></load-notification-dialog>",scope:e,isDismissable:!1};this.scope.showIFrame=!1,this.services.modalDialogService.showLegacyWebModalDialog(t),this.isLoadNotificationShown=!0,this.scope.$applyAsync()}},t.prototype.hideLoadNotification=function(){if(this.isLoadNotificationShown){this.scope.showIFrame=!0;var e=this.services.errorService.control();e.hideDialog(),this.isLoadNotificationShown=!1,this.scope.$applyAsync(),this.executeWorkaroundForEdgeBrowser()}},t.prototype.executeWorkaroundForEdgeBrowser=function(){var e=this;this.isEdgeBrowser()&&this.services.timeout((function(){e.changeIFrameHeight(!0),e.services.timeout((function(){e.changeIFrameHeight(!1)}),0)}),0)},t.prototype.isEdgeBrowser=function(){var e=this.userAgent.toLowerCase();return e.indexOf(" edge/")>-1},t.prototype.changeIFrameHeight=function(e){var t=$("iframe.contentProviderDialogFrame"),i=t.height(),o=e?i+1:i-1;t.css("height",o)},t.prototype.initConfigurationPage=function(o,a){var n=this;this.scope.viewModel=null,this.lastContentProviderContract=o;var s=this.services.telemetryService,c=s.startEvent(e.telemetry.DashboardInitializeContentProviderConfig,o.displayText);if(o.id in t.ContentProviderFramesCache){var l=t.ContentProviderFramesCache[o.id];return void this.scope.loadContentProviderFrame(l,a)}if(o.id<0&&o.id===this.lastContentProviderContract.id){var d="/providers/comingsoon",p=$(t.ContentProviderFrameTemplate.replace("{{configPageUrl}}",t.addLanguageToUrl(d)));return t.ContentProviderFramesCache[o.id]=p,void this.scope.loadContentProviderFrame(p,a)}if(o.configurationPageUrl){if(o.id===this.lastContentProviderContract.id){var u=o.configurationPageUrl,v="";v=a?i.contentProviderStoreRenderAsModalDialogMode:i.contentProviderStoreRenderAsFullScreenMode;var h=jsCommon.QueryStringUtil.parseQueryString();h[v]="1",u=jsCommon.QueryStringUtil.addOrUpdateQueryStringToUrl(u,h),h.unmin&&(u+="&unmin=true"),o.isService&&o.providerKey&&(u+="&providerKey="+o.providerKey),u=this.addQueryParameters(u);var p=$(t.ContentProviderFrameTemplate.replace("{{configPageUrl}}",u));this.scope.loadContentProviderFrame(p,a)}}else this.services.contentProviderHttpService.getConfiguration(o.id,r.FullConfigurationFlow,c.event).then((function(e){
if(e.data&&null!=e.data.ConfigurationPageUrl){if(o.id===n.lastContentProviderContract.id){var i=jsCommon.QueryStringUtil.parseQueryString(),r=jsCommon.QueryStringUtil.addOrUpdateQueryStringToUrl(e.data.ConfigurationPageUrl,i);r=n.addQueryParameters(r);var a=$(t.ContentProviderFrameTemplate.replace("{{configPageUrl}}",r));t.ContentProviderFramesCache[o.id]=a,n.scope.loadContentProviderFrame(a)}c.resolve()}else n.errorInitializingConfigPage(e,c)}),(function(e){n.errorInitializingConfigPage(e,c)}))},t.prototype.addQueryParameters=function(t){var o=jsCommon.QueryStringUtil.parseQueryString();if(o[e.common.constants.navigation.getDataForceConnect]){var r=btoa(JSON.stringify(o));t+="&"+i.navigation.getDataMashupUrlParams+"="+r}return t},t.prototype.errorInitializingConfigPage=function(t,i){this.scope.$emit(e.constants.configPageErrorLoadingEventName),this.services.errorService.error(this.services.localizationService.get("ContentProvider_GetConfigurationFailed"),"ContentProvider_GetConfigurationFailed",{requestId:t.requestId,statusCode:t.status.toString()}),i.reject()},t.prototype.hideModalDialog=function(){this.isModalDialogShown&&(this.modalDialog.hideDialog(),this.isModalDialogShown=!1)},t.addLanguageToUrl=function(e){var t=jsCommon.QueryStringUtil.getQueryStringValue("language");if(!_.isEmpty(t)){var i=e.indexOf("?")===-1?"?":"&";return e+i+"language="+encodeURIComponent(t)}return e},t.ContentProviderFramesCache={},t.ContentProviderFrameTemplate='<iframe name="contentProviderDialogFrame" class="contentProviderDialogFrame contentProviderIFrame" sandbox="allow-scripts allow-popups allow-same-origin allow-forms" src="{{configPageUrl}}"></iframe>',t})();t.ContentProviderController=s})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){var i=e.common.constants;!(function(e){e[e.Welcome=0]="Welcome",e[e.GetData=1]="GetData",e[e.GroupWelcome=2]="GroupWelcome"})(t.ContentProviderSplashState||(t.ContentProviderSplashState={}));var o=(t.ContentProviderSplashState,(function(){function o(e,t){var o=this;this.scope=e,this.services=t,this.scope.featureSwitchOrgAppsEnabled=this.services.featureSwitchService.featureSwitches.orgAppsEnabled||this.services.featureSwitchService.featureSwitches.microsoftOrgAppEnabled,this.scope.showServicesTile=!this.services.featureSwitchService.featureSwitches.serviceAppsDisabled,this.scope.getCurrentGroupName=function(){return o.getCurrentGroupName()},this.scope.getSplashTitleForCurrentGroup=function(){return o.getSplashTitleForCurrentGroup()},this.scope.showIntroductionVideoModal=function(){return o.showIntroductionVideoModal()},this.scope.conceptualModelEnabled=function(){return o.services.featureSwitchService.featureSwitches.conceptualModelEnabled||o.services.featureSwitchService.featureSwitches.previewConceptualModel&&o.services.tutorialDataStore.hasKey(i.previewConceptualModelNewKey)},this.scope.navigateToContentList=function(){return o.navigateToContentList()},this.scope.inGroupWelcomeView=function(){return o.services.navigation.inGroupWelcomeView()},this.scope.navigateToCategory&&this.scope.navigateToCategoryAndProvider||(this.scope.navigateToCategory=function(e,t){return o.navigateToCategoryAndProvider(e,"",t)},this.scope.navigateToCategoryAndProvider=function(e,t,i){return o.navigateToCategoryAndProvider(e,t,i)},this.scope.isMyWorkspace=function(){return o.isMyWorkspace()})}return o.createOptions=function(){return{additionalServices:["featureSwitchService","groupService","localizationService","navigation","telemetryService","tutorialDataStore","modalDialogService"]}},o.prototype.navigateToContentList=function(){this.services.navigation.navigateToContentList(this.services.groupService.activeGroupObjectId,!0)},o.prototype.getCurrentGroupName=function(){return this.services.groupService.activeGroup?this.services.groupService.activeGroup.displayName:""},o.prototype.getSplashTitleForCurrentGroup=function(){return this.services.groupService.activeGroup.isMyWorkspace?this.services.localizationService.get("GetData_GetData"):this.services.localizationService.format("Groups_Splash_Title",[this.getCurrentGroupName()])},o.prototype.isMyWorkspace=function(){return this.services.groupService.activeGroup.isMyWorkspace},o.prototype.navigateToCategoryAndProvider=function(i,o,r){var a=t.contentProviderConstants.categoryEnumToNameMap[i],n=t.contentProviderConstants.categoryInteractionTelemetryMap[r];this.services.telemetryService.logEvent(e.telemetry.DashboardGetDataCategorySelect,a,n,""),this.services.navigation.showGetDataSlider(a,o,e.services.LocationOptions.True)},o.prototype.showIntroductionVideoModal=function(){var t=this.services.telemetryService.startEvent(e.telemetry.DashboardGetDataSplashIntroVideo),i={dialogName:this.services.localizationService.get("GetData_PowerBI_In_60_Seconds"),templateUrl:"views/contentProviderStore/contentProviderSplashIntroVideoModal.html",scope:this.scope.$new(!0),dialogCssClass:"introVideo",onCloseDialog:function(){return t.resolve()}};this.services.modalDialogService.showLegacyWebModalDialog(i)},o})());t.ContentProviderSplashController=o})(i=t.contentProviderStore||(t.contentProviderStore={}))})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){var i,o=e.common.constants,r=e.common.contracts.ContentProviderCategory,a=e.common.contracts.ContentProviderClientCategory,n=e.common.contracts.ContentProviderConfigurationUIStyle,s=jsCommon.DateExtensions,c="local-file";!(function(t){t.categoryNameToEnumMap={files:a.File,services:a.Service,samples:a.Sample,bigdata:a.BigDataAndMore,myorg:a.Organizational,learn:a.Learn},t.categoryEnumToNameMap={},t.categoryEnumToNameMap[a.File]="files",t.categoryEnumToNameMap[a.Sample]="samples",t.categoryEnumToNameMap[a.Service]="services",t.categoryEnumToNameMap[a.BigDataAndMore]="bigdata",t.categoryEnumToNameMap[a.Organizational]="myorg",t.categoryEnumToNameMap[a.Learn]="learn",t.categoryEnumToDisplayNameMap={},t.categoryEnumToDisplayNameMap[a.File]="GetData_Files",t.categoryEnumToDisplayNameMap[a.Sample]="GetData_Samples",t.categoryEnumToDisplayNameMap[a.Service]="GetData_Services",t.categoryEnumToDisplayNameMap[a.BigDataAndMore]="GetData_BigDataAndMore",t.categoryEnumToDisplayNameMap[a.Organizational]="GetData_MyOrganization",t.categoryEnumToDisplayNameMap[a.Learn]="GetData_AddYourContent",t.categoryInteractionTelemetryMap={breadcrumb:e.telemetry.GetDataCategorySelectInteraction.Breadcrumb,navPane:e.telemetry.GetDataCategorySelectInteraction.NavPane,splashPage:e.telemetry.GetDataCategorySelectInteraction.SplashPage},t.saasMarketplacePublicCategory="public",t.saasMarketplacePrivateCategory="private",t.salesforceAppName="salesforce"})(i=t.contentProviderConstants||(t.contentProviderConstants={}));var l=1999,d=(function(){function t(r,a){var n=this;this.fullScreenConfig=!1,this.scope=r,this.services=a,this.scope.featureSwitchOrgAppsEnabled=this.services.featureSwitchService.featureSwitches.orgAppsEnabled||this.services.featureSwitchService.featureSwitches.microsoftOrgAppEnabled,t.TelemetryService=this.services.telemetryService,this.isOneGBUploadFileSizeEnabled=this.services.featureSwitchService.featureSwitches.oneGBUploadFileSizeEnabled,this.viewModel=new e.models.contentProviderStore.ContentProviderStoreModel,this.viewModel.searchBoxVisible=!0,this.scope.viewModel=this.viewModel,this.scope.navigateToHome=function(){return n.services.navigation.navigateToContentListOrActiveDashboard()},this.scope.navigateToGetData=function(){n.viewModel.searchKeyword="",n.services.navigation.showGetDataSlider("","",e.services.LocationOptions.True)},this.scope.navigateToCategory=function(e,t){return n.navigateToCategoryAndProvider(e,"",t)},this.scope.navigateToCategoryAndProvider=function(e,t,i){return n.navigateToCategoryAndProvider(e,t,i)},this.scope.getCategoryDisplayName=function(e){return n.getCategoryDisplayName(e)},this.previousSelectedCategoryName="",this.scope.isSplashState=function(){if(n.fullScreenConfig)return!1;var t=n.scope.viewModel;return!t.selectedCategory&&!t.selectedContentProviderTile&&!t.searchKeyword||n.useNewSaasMarketplace()||n.services.navigation.stateService.params[e.common.constants.navigation.getDataForceConnect]},this.scope.$watch((function(){return n.viewModel.searchKeyword}),(function(e,t){t||(n.previousCategory=n.viewModel.selectedCategory),e?n.viewModel.selectedCategory=null:n.previousCategory&&(n.viewModel.selectedCategory=n.previousCategory),n.refreshTileList()}));var s=this.services.rootScope.$on(e.constants.saasMarketplace.updateHostUrl,(function(e,t,i){n.updateUrlFromSaasMarketplace(t,i)})),l=this.services.rootScope.$on(e.constants.saasMarketplace.acquireAppEventName,(function(e,t,i){n.acquireAppFromSaasMarketplace(t,i)}));this.scope.$on(e.constants.dataSourceAccessInfoGeneratedEventName,(function(e,t,i,o,r){return n.storeDataAccessInfo(e,t,i,o,r)})),this.scope.$root.$on(e.constants.openCreateContentPackEventName,(function(e){return n.openCreateContentPack(e)})),this.scope.$on(o.navigation.stateChangeSuccess,(function(t,o,a,s,l){a.providerName!==c&&(r.isLocalFileSelected=!1,r.shouldShowProviderTiles=!0),n.services.navigation.stateService.is(e.constants.navigation.states.getData)&&(n.viewModel.searchKeyword=""),l.categoryName===a.categoryName&&i.categoryEnumToNameMap[n.viewModel.selectedCategory]===a.categoryName||n.scope.viewModel.searchKeyword||n.updateSelectedCategory(),n.fullScreenConfig=!1})),this.scope.$on(o.contentProviderStoreConfigurationUIVisibilityChangedEventName,(function(e,t,i){n.viewModel.searchBoxVisible=!t||i})),this.loadContentProviders(),this.updateSelectedCategory(),r.isLocalFileSelected=!1,r.shouldShowProviderTiles=!0,r.$on(o.localFileSelectedEventName,(function(e,t){return r.localFileSelected(t)})),r.$on(e.constants.shouldShowProviderTilesEventName,(function(){r.shouldShowProviderTiles=!0})),r.localFileSelected=function(e){r.selectedLocalFile=e,r.isLocalFileSelected=!0,r.shouldShowProviderTiles=!1,r.$applyAsync()},r.$on("$destroy",(function(){l(),s()}))}return t.createOptions=function(){return{additionalServices:["$window","$timeout","$sce","errorService","contentProviderService","contentProviderHttpService","modelConverter","navigation","notificationToast","localizationService","telemetryService","featureSwitchService","modalDialogService","userInfo","licenseHelperService","quota","$sanitize"]}},t.prototype.updateUrlFromSaasMarketplace=function(t,o){var r=this.findTileModelFromSaasMarktplaceData(t,o);if(r){var a=i.categoryEnumToNameMap[r.clientCategory];this.viewModel.selectedCategory=r.clientCategory,this.services.navigation.showGetDataSlider(a,r.providerName,e.services.LocationOptions.Replace,!1)}},t.prototype.acquireAppFromSaasMarketplace=function(t,o){var r=this;if(!this.services.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.GetData)){var a=this.findTileModelFromSaasMarktplaceData(t,o);if(a)if(a.authentication&&a.authentication.oAuth&&a.authenticationInitializationInProgress&&!a.authentication.oAuth.oAuthEndpoint){var s=e.common.httpService.powerbiRequestOptions();s.telemetryDescription="GetAuthorization: "+a.contract.providerName,e.common.httpService.get(a.authentication.oAuth.endpointRetrievalAPI,s).then((function(e){a.authentication.oAuth.oAuthEndpoint=e.data,a.authenticationInitializationDeferred.resolve(e.data)}),(function(e){a.authenticationInitializationDeferred.resolve("")})).finally((function(){a.authenticationInitializationInProgress=!1,r.fullScreenConfig=a.contract.configurationUIstyle===n.FullScreen,a.providerName===i.salesforceAppName&&r.promptToConnectFromSaasMarketplaceForSalesforce(a.title,(function(){return r.services.rootScope.$emit(e.common.constants.contentProviderStoreConnectEventName,a)}))}))}else a.providerName===i.salesforceAppName?(a.authenticationInitializationInProgress=!1,this.fullScreenConfig=a.contract.configurationUIstyle===n.FullScreen,this.promptToConnectFromSaasMarketplaceForSalesforce(a.title,(function(){return r.services.rootScope.$emit(e.common.constants.contentProviderStoreConnectEventName,a)}))):(a.authenticationInitializationInProgress=!1,this.services.rootScope.$emit(e.common.constants.contentProviderStoreConnectEventName,a))}},t.prototype.promptToConnectFromSaasMarketplaceForSalesforce=function(e,t){var i='<div class="header"><div class="icon content-provider-salesforce-small"></div><div class="title"><span localize="GetData_ConnectTo"></span>'+e+'</div></div><div class="message"><span localize= "SPZA_SalesforceAuthDialog_Message" > </span></div>',o=this.scope.$new(),r=[new InJs.ModalDialogAction(this.services.localizationService.get("SignInButton"),function(){o.closeDialog(),t()}),new InJs.ModalDialogAction(this.services.localizationService.get("AuthDialog_CancelButtonText"),function(){o.closeDialog()})],a={dialogName:null,isDismissable:!0,template:i,dialogCssClass:"salesforceConnectDialog",scope:o,dialogActions:r};this.services.modalDialogService.showLegacyWebModalDialog(a)},t.prototype.findTileModelFromSaasMarktplaceData=function(e,t){for(var o=0,r=this.viewModel.contentProviderTiles;o<r.length;o++){var n=r[o];if(n.contract.providerKey&&jsCommon.StringExtensions.equalIgnoreCase(e,n.contract.providerKey)&&(t===i.saasMarketplacePrivateCategory&&n.clientCategory===a.Organizational||t===i.saasMarketplacePublicCategory&&n.clientCategory!==a.Organizational))return n}},t.prototype.useNewSaasMarketplace=function(){return this.services.featureSwitchService.featureSwitches.saasMarketplace&&!this.services.navigation.stateService.params[e.common.constants.navigation.getDataForceConnect]&&(this.scope.viewModel.selectedCategory===a.Organizational||this.scope.viewModel.selectedCategory===a.Service)},t.prototype.refreshTileList=function(){this.scope.configPageLoaded=!1,this.scope.$root.$emit(o.contentProviderStoreTileListRefreshEventName,this.viewModel.selectedCategory,this.viewModel.searchKeyword)},t.prototype.navigateToCategoryAndProvider=function(t,o,r){if(this.viewModel.selectedCategory===t){if(!this.viewModel.selectedContentProviderTile&&!this.services.featureSwitchService.featureSwitches.saasMarketplace)return;if(t===a.Service||t===a.Organizational){var n={};n.category=t===a.Organizational?i.saasMarketplacePrivateCategory:i.saasMarketplacePublicCategory,n.applicationId=o,this.services.rootScope.$emit(e.constants.saasMarketplace.initSaasMarketplaceEventName,n)}}this.viewModel.searchKeyword="";var s=i.categoryEnumToNameMap[t],c=i.categoryInteractionTelemetryMap[r];this.services.telemetryService.logEvent(e.telemetry.DashboardGetDataCategorySelect,s,c,this.previousSelectedCategoryName);var l=this.scope.isSplashState()&&this.services.featureSwitchService.featureSwitches.saasMarketplace?e.services.LocationOptions.Replace:e.services.LocationOptions.True;this.services.navigation.showGetDataSlider(s,o,l),this.previousSelectedCategoryName=s},t.prototype.openCreateContentPack=function(e){null!=e&&e.stopPropagation(),this.services.navigation.showPublishContentPackSlider()},t.prototype.storeDataAccessInfo=function(e,t,i,o,r){e.stopPropagation();var a=this.services.contentProviderService;if(a.upgradeRequiredToConnect(i))return void a.displayFeatureDisabledDialog(i);var n=this.scope.activeDashboard;this.services.contentProviderService.storeDataAccessInfo(t,i,!1,r,n?n.contract.id:0),this.navigateAfterConnect(i),o||this.scope.$apply()},t.prototype.navigateAfterConnect=function(e){e&&e.category===r.OrganizationalApp&&this.services.featureSwitchService.featureSwitches.appsEnabled?this.services.navigation.navigateToApps():this.services.navigation.navigateToContentListOrActiveDashboard()},t.prototype.loadContentProviders=function(){var t=this,i=this.services;i.timeout((function(){var o=i.telemetryService,a=o.startEvent(e.telemetry.ContentProviderInitializeContentProviders);t.viewModel.hasContentProviderLoaded=!1;var n=i.contentProviderHttpService;n.getContentProviders(a.event).then((function(e){var o=e.data;t.viewModel.contentProviderTiles=[];var a=i.featureSwitchService.featureSwitches,s=n.getNonBuiltInContentProviders(o,a.currentContentProviderFlightCode),c=n.getFilteredBuiltinContentProviders(s.filter((function(e){return null!==e.providerKey}))),l=o.filter((function(e){return e.category===r.Organizational||a.appsEnabled&&e.category===r.OrganizationalApp}));t.loadServiceContentProviders(s),c=t.filterBuiltInsBasedOnServiceContentProviderOverrides(c),t.loadBuiltInContentProviders(c),(a.templatePublishEnabled||a.templatePublishFlightingWorkAroundEnabled)&&t.loadOrganizationalTemplateContentProviders(o),t.loadOrganizationalProviders(l),t.moveContentPacksIntoGroupings(),i.timeout((function(){t.refreshTileList()})),t.viewModel.hasContentProviderLoaded=!0}),(function(e){t.viewModel.hasContentProviderLoaded=!0,i.errorService.error(i.localizationService.get("ErrorMessage_FailedLoadContentProviders"),"FailedLoadContentProviders",{requestId:e.requestId,statusCode:e.status.toString()}),a.reject()}))}),l)},t.prototype.loadOrganizationalTemplateContentProviders=function(e){var t=this.services.featureSwitchService.featureSwitches;this.loadServiceContentProviders(e.filter((function(e){return e.category===r.OrganizationalTemplate||t.appsEnabled&&e.category===r.OrganizationalTemplateApp})),"/providers/organizationaltemplate/")},t.prototype.loadBuiltInContentProviders=function(e){for(var t=this.services.modelConverter,i=0,o=e.length;i<o;i++){var r=e[i],a=t.convertContentProviderContractToContentProviderTileModel(r),n="";r.displayTextLocalizationKey&&(a.title=this.services.localizationService.get(r.displayTextLocalizationKey)),a.usePBIDesktop&&a.learnMoreUrl&&(n='<a href="'+a.learnMoreUrl+'" target="_blank">'+this.services.localizationService.get("GetData_LearnMore")+"</a>"),a.descriptionTrustedHtml=this.decodeContentProviderHTML(a.descriptionLocalizationKey,a.finePrint,n),this.viewModel.contentProviderTiles.push(a)}},t.prototype.loadServiceContentProviders=function(e,t){void 0===t&&(t="/providers/mashUp/");for(var i=this.services.modelConverter,o=0,r=e.length;o<r;o++){var a=e[o];a.configurationUIstyle=n.ModalDialog,a.isService=!0,a.providerName||(a.providerName=a.providerKey),!a.id&&a.providerId&&(a.id=a.providerId),a.configurationPageUrl||(a.configurationPageUrl=t+a.providerName+"/?contentProviderId="+a.providerId),(null==a.iconUrl||_.isEmpty(a.iconUrl))&&(a.iconCSSClass="content-provider-placeholder");var c=i.convertContentProviderContractToContentProviderTileModel(a);a.displayTextLocalizationKey&&(c.title=this.services.localizationService.get(a.displayTextLocalizationKey));try{var l=JSON.parse(a.providerConfig)}catch(e){continue}if(l){var d=this.services.$sanitize(l.description);c.descriptionTrustedHtml=this.services.$sce.trustAsHtml(d),c.publisher=l.author,c.publishDate=s.deserializeDate(l.creationTime),c.learnMoreUrl=l.learnMoreUrl,l.displayText&&(c.title=l.displayText),l.urlPath&&(c.providerName=l.urlPath,c.contract.configurationPageUrl=t+l.urlPath+"/?contentProviderId="+a.providerId),l.providerKeyToOverride&&(c.providerKeyToOverride=l.providerKeyToOverride)}this.viewModel.contentProviderTiles.push(c)}},t.prototype.loadOrganizationalProviders=function(e){for(var t=this.services.modelConverter,i=0,o=e.length;i<o;i++){var r=e[i];null==r.iconUrl&&(r.iconCSSClass="content-provider-placeholder"),r.configurationUIstyle=n.DirectConnect,r.disableDetailPane=!1,r.providerName=e[i].providerKey;var a=t.convertContentProviderContractToContentProviderTileModel(r),c=JSON.parse(e[i].providerConfig);if(c){var l=this.services.$sanitize(c.description);a.descriptionTrustedHtml=this.services.$sce.trustAsHtml(l),a.publisher=c.author,a.emailAddress=c.emailAddress,a.emailAddressAsLink="mailto:"+c.emailAddress,a.publishDate=s.deserializeDate(c.creationTime)}this.viewModel.contentProviderTiles.push(a)}},t.prototype.filterBuiltInsBasedOnServiceContentProviderOverrides=function(e){for(var t=[],i=0,o=this.viewModel.contentProviderTiles;i<o.length;i++){var r=o[i];r.providerKeyToOverride&&t.push(r.providerKeyToOverride)}if(0===t.length)return e;for(var a=[],n=0,s=e;n<s.length;n++){for(var c=s[n],l=!1,d=0,p=t;d<p.length;d++){var u=p[d];c.providerKey&&jsCommon.StringExtensions.equalIgnoreCase(u,c.providerKey)&&(l=!0)}l||a.push(c)}return a},t.prototype.moveContentPacksIntoGroupings=function(){var e=this.services.modelConverter,t=e.groupContentProviderTileModels(this.viewModel.contentProviderTiles);this.viewModel.contentProviderTiles=t},t.prototype.decodeContentProviderHTML=function(e,t,i){var o=[["apos","'"],["amp","&"],["lt","<"],["gt",">"]],r=i?this.services.localizationService.format(e,[i]):this.services.localizationService.get(e),a=this.services.localizationService.get(t)||"",n=null;if(r){for(var s=0,c=o.length;s<c;++s)r=r.replace(new RegExp("&"+o[s][0]+";","g"),o[s][1]),a=a.replace(new RegExp("&"+o[s][0]+";","g"),o[s][1]);n=this.services.$sce.trustAsHtml(r+(a?"<br/><br/><i>"+a+"</i>":""))}return n},t.prototype.updateSelectedCategory=function(){var t=this,o=this.services.navigation.categoryName,r=i.categoryNameToEnumMap,n=r[o];if(this.viewModel.selectedCategory=n,this.viewModel.searchKeyword="",this.previousCategory=null,this.useNewSaasMarketplace()){var s={};s.category=n===a.Organizational?i.saasMarketplacePrivateCategory:i.saasMarketplacePublicCategory,s.applicationId=this.services.navigation.providerName,this.services.rootScope.$emit(e.constants.saasMarketplace.initSaasMarketplaceEventName,s)}else this.services.$timeout((function(){t.refreshTileList(),t.services.navigation.providerName||(t.viewModel.selectedContentProviderTile=null)}))},t.prototype.getCategoryDisplayName=function(e){return this.services.localizationService?this.services.localizationService.get(i.categoryEnumToDisplayNameMap[e]):""},t})();t.ContentProviderStoreController=d})(i=t.contentProviderStore||(t.contentProviderStore={}))})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.contracts.ContentProviderClientCategory,o=e.controllers.contentProviderStore.contentProviderConstants,r=(function(){function t(i,o){var r=this;this.scope=i,this.services=o,this.scope.loadingElement=this.services.$element.find("#loadingId"),this.isOneGBUploadFileSizeEnabled=this.services.featureSwitchService.featureSwitches.oneGBUploadFileSizeEnabled,i.closeLoadingDialog=function(){r.fileUploadingDeferred&&r.fileUploadingDeferred.reject(),r.scope.loadingElement.hide(),r.completeUploading()},this.scope.$on(e.constants.uploadFormatChosenEventName,(function(i,o){r.scope.$emit(e.constants.shouldShowProviderTilesEventName),r.scope.shouldChooseFormat=!1;var a=t.ExcelContentProviderFileUploadingReplaceEndPointTemplate;r.uploadFormat=o,a+=r.uploadFormat===e.models.UploadFormat.ImportData?t.ScenarioImport:t.ScenarioView,r.processUploadingFile(t.ExcelContentProviderId,a,"UploadExcelFile",r.fileExtension,"UploadReplace_WorkbookExistsDetailedMessage")})),this.init()}return t.createOptions=function(){return{additionalServices:["promiseFactory","$window","telemetryService","localizationService","storageUsageService","featureSwitchService","modelService","workbookService","errorService","refreshService","navigation","packageService","$element","modelHttpService","datasetsService","localFileService","upload"]}},t.prototype.init=function(){this.scope.shouldChooseFormat=!1;var i=this.scope.selectedFile;this.fullFilename=i.name;var o=i.name.split(".");if(this.fileExtension=o.pop().toLowerCase(),this.filename=this.fileExtension?o.join("."):i.name,this.scope.isUpdateFromElementFlow)return this.fileExtension!==t.xlsmFileExtension&&this.fileExtension!==t.xlsxFileExtension?void this.showDialog("UnsupportedFileType_Title","UnsupportedFileType_Message","UnsupportedFileType_OK"):(this.uploadFormat=e.models.UploadFormat.ViewExcel,this.elementIdToUpdate=this.scope.elementToUpdate.packageId,void this.processUpdatingWorkbook());var r=this.services.featureSwitchService.featureSwitches;this.scope.isFullFidelityLocalFileEnabled=r.fullFidelityExcelEnabled&&(r.ffxlLocalFilesEnabled||r.isE2ERun),this.scope.isFullFidelityLocalFileEnabled&&this.isExcelFile()?this.scope.shouldChooseFormat=!0:(this.scope.$emit(e.constants.shouldShowProviderTilesEventName),this.uploadFormat=e.models.UploadFormat.ImportData,this.fileExtension===t.xlsxFileExtension||this.fileExtension===t.xlsmFileExtension?this.processUploadingFile(t.ExcelContentProviderId,t.ExcelContentProviderFileUploadingReplaceEndPointTemplate,"UploadExcelFile",this.fileExtension,"UploadReplace_DatasetExistsDetailedMessage"):this.fileExtension===t.pbiFileExtension?this.processUploadingFile(t.PowerBIDesignerContentProviderId,t.PowerBIDesignerContentProviderFileUploadingReplaceEndPointTemplate,"PBI.Providers.PBIFileUpload",this.fileExtension,"UploadReplace_DatasetExistsDetailedMessage"):this.fileExtension===t.csvFileExtension?this.processUploadingFile(t.CsvDesignerContentProviderId,t.CsvContentProviderFileUploadingEndPointTemplate,"PBI.Providers.CSVFileUpload",this.fileExtension,"UploadReplace_DatasetExists"):this.showDialog("UnsupportedFileType_Title","UnsupportedFileType_Message","UnsupportedFileType_OK"))},t.prototype.isExcelFile=function(){return this.fileExtension===t.xlsxFileExtension||this.fileExtension===t.xlsmFileExtension},t.prototype.completeUploading=function(){return this.scope.isUpdateFromElementFlow?void this.services.workbookService.finishReplacingLocalWorkbook():void this.navigateToFiles()},t.prototype.navigateToFiles=function(){this.scope.$emit(e.constants.shouldShowProviderTilesEventName);var t=e.services.LocationOptions.True,r=o.categoryEnumToNameMap[i.File];this.services.navigation.showGetDataSlider(r,void 0,t)},t.prototype.showErrorMessageWhenUploadLimitExceeds=function(e,i){var o,r;e===t.ExcelContentProviderId?(r="https://go.microsoft.com/fwlink/?LinkId=626823",o=this.isOneGBUploadFileSizeEnabled?"UploadExcel_UploadLimit_LocalFile_OneGB":"UploadExcel_UploadLimit_LocalFile"):o=e===t.PowerBIDesignerContentProviderId?this.isOneGBUploadFileSizeEnabled?"UploadPowerBICompanion_UploadLimit_LocalFile_OneGB":"UploadPowerBICompanion_UploadLimit_LocalFile":this.isOneGBUploadFileSizeEnabled?"UploadCSV_UploadLimit_LocalFile_OneGB":"UploadCSV_UploadLimit_LocalFile",i&&(i.event.info.uploadCompleted=!1,i.reject({errorCode:"SizeLimitExceeded"})),this.showDialog("GetData_FileSizeTooLarge_Title",o,null,r)},t.prototype.replaceFile=function(t,i,o,r){var a,n,s=JSON.parse(t),c=s.PackageId,l=void 0,d=void 0,p=void 0,u=void 0,v=void 0;this.uploadFormat===e.models.UploadFormat.ViewExcel?(a=_.find(this.services.workbookService.editAndReShareWorkbooks,(function(e){return e&&e.packageId.toString()===c})),n=a,l="UpdatingYourFile",d="NotificationMessage_TakeAWhile",p="WorkbookUpdatedNotificationTitle",u="WorkbookUpdatedNotificationMessage",v=n?n.displayName:null):l="RefreshingData",o.resolve(),r&&(r.event.info.uploadCompleted=!0,r.resolve()),this.services.refreshService.refreshNow(this.services.telemetryService,this.services.errorService,c,i,l,d,p,u,v),this.services.navigation.navigateToContentListOrActiveDashboard()},t.prototype.uploadFileWithoutReplacing=function(i,o,r,a,n){n&&(n.event.info.uploadCompleted=!0,n.resolve());var s=JSON.parse(i);s.ContentProviderIdOverride=o;var c;switch(o){case t.ExcelContentProviderId:c=t.ExcelContentProviderDisplayName;break;case t.PowerBIDesignerContentProviderId:c=t.PowerBIDesignerContentProviderDisplayName;break;case t.CsvDesignerContentProviderId:c=t.CsvDesignerContentProviderDisplayName}s&&(s.DSID||s.SID)&&(a.event.info.DSID=s.DSID,a.resolve(),s.isImportOperation=this.uploadFormat===e.models.UploadFormat.ImportData,r.$emit(e.constants.dataSourceAccessInfoGeneratedEventName,s,null,!0,c))},t.prototype.showErrorWhenUploadFileFails=function(i,o){var r=i.headers(e.common.PowerBIErrorHeader);this.fileUploadingDeferred&&this.fileUploadingDeferred.reject(r),o===t.ExcelContentProviderId?this.uploadFormat===e.models.UploadFormat.ViewExcel?this.isReplace?this.services.workbookService.postReplaceWorkbookErrorMessage(i):this.services.workbookService.postUploadWorkbookErrorMessage(i):this.postErrorMessage("UploadExcel_PublishWorkbookFailed",r,"UploadExcel_PublishWorkbookFailed",i.requestId,i.status.toString()):o===t.PowerBIDesignerContentProviderId?this.postErrorMessage("UploadPowerBICompanion_PublishDesignerFailed",r,"UploadPowerBICompanion_PublishDesignerFailed",i.requestId,i.status.toString(),!0):this.postErrorMessage("UploadCSV_PublishFileFailed",r,"UploadCSV_PublishFileFailed",i.requestId,i.status.toString(),!0),this.completeUploading()},t.prototype.uploadFile=function(t,i,o,r,a,n,s,c){var l=this,d=this.isOneGBUploadFileSizeEnabled?e.common.constants.oneGBFileUploadLimitInByte:e.common.constants.fileUploadLimitInByte;if(r.size>d)return this.showErrorMessageWhenUploadLimitExceeds(o,c),a.reject(),void this.completeUploading();this.fileUploadingDeferred=this.services.promiseFactory.defer(),this.scope.loadingElement.show(),this.fileUploadingDeferred.promise.then((function(e){l.scope.loadingElement.hide(),l.completeUploading(),s?l.replaceFile(e,o,a,c):l.uploadFileWithoutReplacing(e,o,i,a,c)}),(function(e){e?(a.reject(),c&&(c.event.info.uploadCompleted=!1,c.reject({errorCode:e}))):(a.resolve(),c&&(c.event.info.uploadCompleted=!1,c.resolve())),l.scope.loadingElement.hide(),l.completeUploading()}));var p=e.common.httpService.powerbiRequestOptions(a.event,n);p.retryCount=0,p.headers[e.common.constants.uploadFileSizeHeaderName]=r.size.toString(),this.services.upload.post(jsCommon.StringExtensions.format(t,encodeURIComponent(r.name)),[r],p).then((function(e){l.fileUploadingDeferred.resolve(e.data)}),(function(e){l.showErrorWhenUploadFileFails(e,o)}))},t.prototype.postErrorMessage=function(t,i,o,r,a,n){var s=JSON.stringify({ErrorCode:i,ErrorMessage:this.services.localizationService.get(t),ErrorType:o,RequestId:r,StatusCode:a,HasError:n});this.services.$window.postMessage(s,e.common.constants.hostOrigin)},t.prototype.processUpdatingWorkbook=function(){this.scope.uploadingMessage=this.services.localizationService.format("GetData_UploadingFile",[this.fullFilename]);var i,o=this.services.telemetryService.startEvent(e.telemetry.LocalFileContentProviderLocalFileUpload,this.fileExtension,e.telemetry.LocalFileUploadPossibility.Duplicate,null);i=this.services.telemetryService.startChildEvent(o.event,e.telemetry.ProvidersExcelWorkbookUpload,e.models.HostType[e.models.HostType.Local],jsCommon.Utility.getFileExtension(this.fullFilename),this.scope.selectedFile.size,!1,this.uploadFormat,1);var r=t.ExcelContentProviderFileUploadingReplaceEndPointTemplate+t.ScenarioView;this.beginUploadReplace(r,this.scope,t.ExcelContentProviderId,this.scope.selectedFile,o,"UploadExcelFile",i)},t.prototype.processUploadingFile=function(t,i,o,r,a){var n,s=this,c=this.services.telemetryService.startEvent(e.telemetry.LocalFileContentProviderLocalFileUpload,r,null,null);this.isExcelFile()&&(n=this.services.telemetryService.startChildEvent(c.event,e.telemetry.ProvidersExcelWorkbookUpload,e.models.HostType[e.models.HostType.Local],jsCommon.Utility.getFileExtension(this.fullFilename),this.scope.selectedFile.size,!1,this.uploadFormat,null));var l,d;if(this.uploadFormat===e.models.UploadFormat.ViewExcel){this.scope.uploadingMessage=this.services.localizationService.format("GetData_UploadingFile",[this.fullFilename]);var p=_.filter(this.services.workbookService.editAndReShareWorkbooks,(function(e){return!!(e&&e.displayName&&s.services.packageService.isLocalWorkbook(e.packageId))&&s.fullFilename.toLowerCase()===e.displayNameWithExtension.toLowerCase()}));l=p?p.length:0,this.elementIdToUpdate=l>0?p[0].packageId:null}else this.scope.uploadingMessage=this.services.localizationService.format("GetData_ImportingFile",[this.fullFilename]),d=_.filter(this.services.modelService.editableModels,(function(e){return e.contract.contentProviderId===t&&e.displayName.toLowerCase()===s.filename.toLowerCase()})),l=d?d.length:0;var u=this.services.errorService.control(),v=[];if(n&&(n.event.info.existingWorkbooks=l),l>0)if(1===l)if(c.event.info.possibility=e.telemetry.LocalFileUploadPossibility.Duplicate,
this.uploadFormat===e.models.UploadFormat.ImportData&&d[0].cloudRlsEnabled&&!this.services.featureSwitchService.featureSwitches.cloudRlsRoleMembershipEnabled){var h="UploadReplace_CloudRlsTitle",g="UploadReplace_CloudRlsEnabledDatasetExistsMessage";this.generateModalDialogPromptAction(v,u,"UploadReplace_ReplaceButton",c,n,i,this.scope,t,this.scope.selectedFile,o,!0,d[0]),this.generateModalDialogPromptAction(v,u,"UploadReplace_CancelButton",c,n,null,null,null,null,null,null,d[0]),this.requestInputForHandlingDuplicates(u,h,g,v,"UploadReplace_CancelButton")}else{var h=this.uploadFormat===e.models.UploadFormat.ViewExcel?"UploadReplace_WorkbookExistsTitle":"UploadReplace_DatasetExistsTitle";this.generateModalDialogPromptAction(v,u,"UploadReplace_ReplaceButton",c,n,i,this.scope,t,this.scope.selectedFile,o,!0),this.generateModalDialogPromptAction(v,u,"UploadReplace_CancelButton",c,n),this.requestInputForHandlingDuplicates(u,h,a,v,"UploadReplace_CancelButton")}else{n&&(n.event.info.uploadCompleted=!1,n.resolve());var h=this.uploadFormat===e.models.UploadFormat.ViewExcel?"UploadReplace_MultipleWorkbookExistsTitle":"UploadReplace_MultipleDatasetExistsTitle",m=this.uploadFormat===e.models.UploadFormat.ViewExcel?"UploadReplace_MultipleWorkbookExists":"UploadReplace_MultipleDatasetExists";c.event.info.possibility=e.telemetry.LocalFileUploadPossibility.MultipleDuplicates,c.resolve(),this.generateModalDialogPromptAction(v,u,"UploadReplace_GotIt"),this.requestInputForHandlingDuplicates(u,h,m,v,"UploadReplace_GotIt")}else{c.event.info.possibility=e.telemetry.LocalFileUploadPossibility.NoDuplicate,this.isReplace=!1;var f=i+"&duplicateDatasetBehavior=FailOnDuplicate";this.uploadFile(f,this.scope,t,this.scope.selectedFile,c,o,!1,n)}},t.prototype.requestInputForHandlingDuplicates=function(e,t,i,o,r){var a=this,n=this.services.localizationService.get(t),s=this.services.localizationService.get(i).replace("{0}",'"'+this.fullFilename+'"'),c='<a href="https://go.microsoft.com/fwlink/?LinkID=616803" target="_blank">'+this.services.localizationService.get("LocalFileUploadLearnMore")+"</a>";e.showCustomDialog(n,angular.element("<div/>").text(s).append("&nbsp;"+c),o,(function(e){e.parent().find('input[value="'+a.services.localizationService.get(r)+'"]').focus()}),!1)},t.prototype.generateModalDialogPromptAction=function(t,i,o,r,a,n,s,c,l,d,p,u){var v=this;t.push(new InJs.ModalDialogAction(this.services.localizationService.get(o),function(t,p){return i.hideDialog(),n?u&&!v.services.featureSwitchService.featureSwitches.cloudRlsRoleMembershipEnabled?(v.services.telemetryService.logEvent(e.telemetry.RowLevelSecurityDisableRLS,e.telemetry.DisableRLSSource.UploadOverride,!0,u.id),void v.services.modelHttpService.disableRlsModel(u.id,r.event).then((function(e){v.updatePackageRefreshEnabled(u,n,s,c,l,d,a,r)}),(function(e){v.showErrorWhenUploadFileFails(e,c)}))):void v.beginUploadReplace(n,s,c,l,r,d,a):("UploadReplace_CancelButton"===o&&(r.resolve(),a&&(a.event.info.uploadCompleted=!1,a.resolve()),u&&v.services.telemetryService.logEvent(e.telemetry.RowLevelSecurityDisableRLS,e.telemetry.DisableRLSSource.UploadOverride,!1,u.id),v.services.telemetryService.logEvent(e.telemetry.LocalFileContentProviderLocalFileUploadReplace,!1,!1)),void v.completeUploading())}))},t.prototype.updatePackageRefreshEnabled=function(e,t,i,o,r,a,n,s){var c=this;this.services.datasetsService.updatePackageRefreshEnabled(e.packageId,!0,s.event).then((function(e){c.beginUploadReplace(t,i,o,r,s,a,n)}),(function(e){c.showErrorWhenUploadFileFails(e,o)}))},t.prototype.beginUploadReplace=function(t,i,o,r,a,n,s){s&&(s.event.info.uploadCompleted=!0),this.services.telemetryService.logEvent(e.telemetry.LocalFileContentProviderLocalFileUploadReplace,!0,this.scope.isUpdateFromElementFlow),this.uploadFormat===e.models.UploadFormat.ViewExcel&&(t+="&packageId="+this.elementIdToUpdate.toString()),this.isReplace=!0;var c=t+"&duplicateDatasetBehavior=ReplaceExistingDuplicate";this.uploadFile(c,i,o,r,a,n,!0,s)},t.prototype.showDialog=function(e,t,i,o){var r=this.services.errorService.control(),a=this.services.localizationService.get(e),n=this.services.localizationService.get(t),s=i?this.services.localizationService.get(i):null,c={label:this.services.localizationService.get("LocalFileUploadLearnMore"),url:o||"https://go.microsoft.com/fwlink/?LinkId=624514"};r.showMessage(a,n,s,c)},t.ExcelContentProviderId=6,t.ExcelContentProviderDisplayName="Excel Workbook",t.PowerBIDesignerContentProviderId=7,t.CsvDesignerContentProviderId=60,t.PowerBIDesignerContentProviderDisplayName="Power BI Desktop File",t.CsvDesignerContentProviderDisplayName="CSV File",t.CsvContentProviderFileUploadingEndPointTemplate="/powerbi/providers/csv/uploadAndConfigure?documentName={0}",t.PowerBIDesignerContentProviderFileUploadingReplaceEndPointTemplate="/powerbi/providers/pbi/uploadReplaceAndConfigure?documentName={0}",t.ExcelContentProviderFileUploadingReplaceEndPointTemplate="/powerbi/providers/excel/uploadReplaceAndConfigure?documentName={0}",t.ScenarioImport="&scenario=Import",t.ScenarioView="&scenario=View",t.xlsxFileExtension="xlsx",t.xlsmFileExtension="xlsm",t.csvFileExtension="csv",t.pbiFileExtension="pbix",t})();t.ContentProviderLocalFileController=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){var i=this;this.registerValidator=function(e){return i.validators.push(e),function(){_.remove(i.validators,(function(t){return t===e}))}},this.synchronizeValidation=function(){i.validators.forEach((function(e){return e()}))},this.validators=[]}return e})();e.CustomValidatorSynchronizerController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.models.CollapsiblePaneExpandedWidth,o=e.common.constants,r=e.dataServices.models.ContentPackItems,a=e.services.FullScreenFitStyle,n=e.common.constants.TaskPaneCollapsiblePaneMode,s=(function(){function t(t,i){var o=this;this.scope=t,this.services=i,this.scope.scrollbarsConfig={ignoreOverlay:!1,ignoreMobile:!1},this.scope.tileTrackerFn=function(t){return e.dataServices.TileUtils.tileTrackerFn(t,o.scope.viewModel.objectId)},this.scope.useCustomScrollbar=function(){return 0!==o.scope.displayLayout&&1===o.scope.mobileLayout},this.scope.fullScreen=this.services.fullScreen,this.scope.permissionServices=this.services.permissionService,this.scope.showReloadDashboard=!1,this.scope.filteredTiles=function(){return o.filteredTiles()},this.scope.removeTileFromMobileView=function(e){return o.removeTileFromMobile(e)},this.scope.gridLayoutChangeHandler=function(e){return o.onGridLayoutChanged(e)};var r=this.services.rootScope.$on(e.constants.openTileEventName,(function(e,t){return o.onOpenTile(e,t)})),n=this.services.rootScope.$on(e.constants.temporaryTilePinned,(function(e){return o.beginTemporaryTileFlow(e)})),s=this.scope.$on(e.constants.removeTileEventName,(function(e,t){return o.onRemoveTile(e,t)})),c=this.services.rootScope.$on(e.constants.loadDashboardFailed,(function(){o.scope.showReloadDashboard=!0})),l=this.scope.$on(e.constants.refreshTileData,(function(e,t){var i=o.services.dashboardDataService.activeDashboard;i&&o.services.dashboardService.refreshTileData(i.id,t)})),d=function(){switch(o.scope.fullScreen.fitStyle){case a.FitToContent:o.scope.scaleDashboard();break;case a.FitToWidth:o.scope.scaleDashboard(!0)}};$(this.services.$window).on("resize",d),this.scope.$on("$destroy",(function(){o.scope.onDestroy&&o.scope.onDestroy(),r(),s(),n(),l(),c(),$(o.services.$window).off("resize",d)})),this.scope.reloadActiveDashboard=function(){return o.reloadActiveDashboard()},this.services.dashboardDataService.InEditMobileLayoutMode=this.scope.inEditMobileLayoutMode,this.services.esriExploration.esriVisualAllowed()&&this.scope.$watch("viewModel.isLoaded",(function(e){e&&o.services.esri.reloadEsriDashboardContext(o.services.visualPlugin,o.scope,!0)}))}return t.createOptions=function(){return{additionalServices:["dashboardDataService","dashboardHttpService","dashboardService","errorService","modalDialogService","modelConverter","navigation","telemetryService","userSettingsService","visualPlugin","$element","localizationService","fullScreen","permissionService","$window","featureSwitchService","promiseFactory","esriExploration","esri"]}},t.prototype.onOpenTile=function(t,i){t.stopPropagation();var o=this.scope.viewModel;this.scope.$emit(e.constants.actualOpenTileEventName,i,o.id)},t.prototype.beginTemporaryTileFlow=function(t){t.stopPropagation();var o=n.TileEditor,r=this.services,a=r.dashboardDataService.selectedDashboardTile;a&&a.tileModel.realTime&&(o=n.RealTimeBlade),this.scope.$emit(e.constants.showTaskPaneSlider,o,i.Large)},t.prototype.onRemoveTile=function(t,i){var o=this,a=this.scope.viewModel,n=a.contract,s=this.services.telemetryService.startEvent(e.telemetry.DashboardDeleteTile);this.deleteTile(i.id),this.services.dashboardHttpService.deleteTile(n,i.id,s.event).then((function(){a&&(o.updateDashboardContract(i,a),a.isUsedByContentPack&&o.services.rootScope.$emit(e.constants.contentPackDirtyShowNotification,a.id,r.Dashboard),a.hasModel(i.contract.modelId)||o.services.dashboardService.updateDashboardToken(a),s.resolve())}),(function(){s.reject()}))},t.prototype.updateDashboardContract=function(e,t){if(t&&e.report){var i=e.report.id,o=_.filter(t.tiles,(function(e){if(e.report)return e.report.id===i}));if(o&&0===o.length&&t.contract.reportIds){var r=t.contract.reportIds.indexOf(i);r!==-1&&this.services.modelConverter.updateDashboardsReportContract(r,t.contract)}}if(t&&e.contract&&e.contract.workbookId){var a=e.contract.workbookId,o=_.filter(t.tiles,(function(e){return!!e.contract&&e.contract.workbookId===a}));if(o&&0===o.length&&t.contract.workbookIds){var n=t.contract.workbookIds.indexOf(a);n!==-1&&this.services.modelConverter.removeDashboardsWorkbookContract(n,t.contract)}}},t.prototype.deleteTile=function(e){var t=this.scope.viewModel;this.services.dashboardDataService.deleteTile(t.id,e)},t.prototype.canEditDashboard=function(e){return e.canEdit&&!this.services.permissionService.isActiveWorkspaceIsReadOnly&&!this.services.fullScreen.fullScreenMode},t.prototype.onGridLayoutChanged=function(t){return this.scope.$emit(e.common.constants.domLayoutChangedEvent),this.services.dashboardService.batchUpdateTileSizePosition(this.scope.viewModel,t)},t.prototype.filteredTiles=function(){var e=this.scope.viewModel&&this.scope.viewModel.tiles;if(_.isEmpty(e))return[];this.scope.enableStrategySwap&&this.swapLayoutIfNeeded();var t=this.scope.displayLayout||0;return 0===t?e:_.filter(e,(function(e){return e.hasLayoutPosition(t)}))},t.prototype.swapLayoutIfNeeded=function(){var t=this.scope.viewModel.gridLayoutService;if(t){var i=this.scope.viewModel,r=_.any(i.tiles,(function(e){return e.hasLayoutDefinition(1)}));(t.strategy instanceof e.dataServices.models.PhonePortraitTileLayoutStrategy&&r||t.strategy.isDynamic()&&!r)&&this.scope.$emit(o.needStrategySwapEventName)}},t.prototype.removeTileFromMobile=function(e){if(1===this.scope.displayLayout&&e.gridLayoutContext){var t=[];t.push(e.removeLayoutPosition()),this.services.dashboardService.batchUpdateTileSizePosition(this.scope.viewModel,t)}},t.prototype.reloadActiveDashboard=function(){this.scope.showReloadDashboard=!1,this.services.dashboardService.loadDashboard(this.scope.viewModel.id)},t})();t.DashboardController=s})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){this.scope=e,this.services=t,this.initialize()}return e.createOptions=function(){return{additionalServices:["errorService","navigation","telemetryService","localizationService"]}},e.prototype.initialize=function(){var e=this;this.scope.switchToDashboardView=function(){return e.switchToDashboardView()}},e.prototype.switchToDashboardView=function(){this.services.navigation.navigateBack()},e})();e.DevToolsViewController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){var i=this;this.scope=e,this.services=t,this.scope.seeErrorDetails=function(){return i.seeErrorDetails()}}return e.createOptions=function(){return{additionalServices:["errorService"]}},e.prototype.seeErrorDetails=function(){var e=this.scope.errorText,t=this.scope.errorText,i=this.scope.errorDetails.displayableErrorInfo;if(this.scope.errorDetails&&i)for(var o=0,r=i.length;o<r;o++){var a=i[o];if(a.errorInfoValue){e=a.errorInfoKey,t=a.errorInfoValue;break}}this.services.errorService.error(t,"Tile_FailedToDisplay",{title:e,helpLink:this.scope.errorDetails.helpLink})},e})();e.ErrorPlaceholderController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){var i=this;this.scope=e,this.services=t,this.scope.chooseFormat=function(e){return i.chooseFormat(e)},this.scope.inProgress=!1}return t.prototype.chooseFormat=function(t){this.scope.inProgress=!0,this.scope.$emit(e.constants.uploadFormatChosenEventName,t)},t})();t.ExcelUploadFormatController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){var i=e.common.constants,o=(function(){function e(e,t){var i=this;this.scope=e,this.services=t,this.scope.$on("$destroy",(function(){i.unRegisterDirtyStateNavigationHandler()}))}return e.prototype.unRegisterDirtyStateNavigationHandler=function(){this.reportChangedEventHandler&&(this.resetRouteChangeListeners(),this.reportChangedEventHandler())},e.prototype.registerDirtyStateNavigationHandler=function(){var e=this;this.unRegisterDirtyStateNavigationHandler(),this.reportChangedEventHandler=this.services.rootScope.$on(i.onReportChangedEventName,(function(t,o){e.resetRouteChangeListeners(),e.reportChanged=o&&(e.scope.viewModel.isEditing||e.scope.viewModel.sectionStatus&&e.scope.viewModel.sectionStatus.isEditing),e.services.checkUnsavedService.setReportSavedState(o),e.reportChanged&&(e.routeStateChangeEvent=e.services.rootScope.$on(i.navigation.stateChangeStart,(function(t,o,r,a,n){a.name!==i.navigation.states.report&&a.name!==i.navigation.states.reports&&a.name!==i.navigation.states.reportPage&&a.name!==i.navigation.states.dataset&&a.name!==i.navigation.states.datasets||(e.showSavePrompt(o,r),t.preventDefault())})))}))},e.prototype.resetRouteChangeListeners=function(){this.routeStateChangeEvent&&(this.routeStateChangeEvent(),this.routeStateChangeEvent=null)},e.prototype.navigateAway=function(e,t){var i=this;this.services.rootScope.$applyAsync((function(){e&&e.name&&i.services.navigation.stateService.go(e.name,t)}))},e.prototype.showSavePrompt=function(e,t,i,o){},e.prototype.getSaveDialogTemplate=function(){var e=this,t="";return this.services.localizationService.ensureLocalization((function(){t='<div class="explorationSaveDialog"><div class="title">'+e.services.localizationService.get("ReportContainer_UnsavedChangeWarningTitle")+'</div><div class="message">'+e.services.localizationService.get("ReportContainer_UnsavedChangeWarningMessage")+"</div></div>"})),$(t)},e})();t.ExplorationContainerBaseController=o})(i=t.controllers||(t.controllers={}))})(t=e.common||(e.common={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=jsCommon.ArrayExtensions,o=e.common.constants,r=e.common.events,a=e.dataServices.models.ContentPackItems,n=e.explore.contracts.DataSource,s=e.errorDetailsHelper,c=e.explore.services.events,l=e.explore.constants.explorationClearedEventName,d=e.explore.constants.explorationLoadedEventName,p=e.common.constants.onReportChangedEventName,u=e.common.contracts.Permissions,v=e.explore.constants.pinVisualContainerEventName,h=e.explore.ScopeUtils,g=e.explore.util.ScriptVisualsUtil,m=e.explore.SectionUtils,f=e.explore.viewModels.ViewModelFactory,y=e.explore.viewModels,b=e.explore.util.VisualContainerUtils,S=e.dialogs.ExportDataDialogBuilder,w=(function(t){function w(i,a){var n=this;t.call(this,i,a),this.changeToEditMode=function(t){var i=n.scope.viewModel;i.sectionStatus.isEditing=t,n.services.viewModeState.setMode(t?1:0),t&&(i.taskPane.isPaneExpanded=!0,i.visualizationPane.isPaneExpanded=!0),n.displayCustomVisualWarning(t);var r=g.getVisualStasInExploration(n.exploration,n.services.scriptVisuals);t||n.logRTelemetry(e.telemetry.EXLoadReportWithScriptVis,r),n.services.rootScope.$emit(e.common.constants.navigation.stateChangeStart,{},{},{name:o.navigation.states.reportPage},{}),i.isNavPaneCollapsed=!t},this.scope.viewModeState=this.services.viewModeState,this.isSaveDialogOpened=!1,this.warningBarNotified=!1,h.defineDataSourcesOnScopeLegacy(this.scope,this.services.dataSources);var s=y.createFieldListViewModelFactory(y.createFieldListMenuItemFactory(this.services.localizationService,this.services.featureSwitchService),y.createFieldListPropertyTemplateGenerator(),this.services.localizationService,this.services.featureSwitchService);this.scope.fieldListConfig={viewModelFactory:s,alwaysHasActiveItem:!0},this.initialize(this.scope.viewModel),this.unregisterViewModelWatch=this.scope.$watch("viewModel",(function(e){n.initialize(e)}));var l=this.services.rootScope.$on(r.loadPowerViewReportEventName,(function(e,t){e.stopPropagation(),n.onLoadPowerViewReport(t)})),d=this.services.rootScope.$on(r.refreshReportData,(function(e){e.stopPropagation(),n.onRefreshReportData()})),p=this.services.eventBridge.setBubblingScope(i).subscribe(c.saveExploration,(function(e){return n.save(e)})).subscribe(c.saveAsExploration,(function(e){return n.saveAs(e)})).subscribe(c.generateReportQR,(function(e){return n.generateQR(e)})).subscribe(c.refreshExploration,(function(e){return n.refresh(e)})).subscribe(c.deleteVisual,(function(e,t){return n.deleteVisual(e,t)})).subscribe(c.deleteCustomVisuals,(function(e){return n.deleteCustomVisuals(e)})).subscribe(c.pauseQueriesChanged,(function(e){return n.pauseQueriesChanged(e)})).subscribe(c.showErrorNotification,(function(e,t){return n.showErrorNotification(e,t)})).subscribe(c.exportToPowerPoint,(function(e){return n.exportToPowerPoint(e)})).subscribe(c.exportAsImage,(function(e){return n.exportAsImage(e)})),u=this.services.eventBridge.createChannelSubscriptionManager().subscribe(c.sectionChanged,(function(e,t){return n.onSectionChange(t)})).subscribe(c.changeViewMode,(function(e,t){return n.onChangeViewMode(t)})).subscribe(c.addCustomVisual,(function(e,t){return n.onAddCustomVisual(e,t)})).subscribe(c.saveKeyPressedEvent,(function(e){return n.saveOnKeypress(e)})).subscribe(c.deleteSectionInitiated,(function(e,t){return n.onDeleteSection(t)})).subscribe(c.addVisualContainer,(function(e,t){return n.onAddVisualContainer(e,t)})).subscribe(c.importVisual,(function(e){return n.importVisual(e)})).subscribe(c.visualRelationshipsModeChanged,(function(e){n.services.viewModeState.updateConfig((function(e){e.showRelationships=!e.showRelationships}))})).subscribe(c.exportVisualData,(function(e,t){return n.exportVisualData(e,t)})).subscribe(c.popOutModeChanged,(function(){var e=!!n.services.popOut.getPoppedOutVisualContainer();!!n.isPopOutMode===e||n.isActiveSectionTransient?n.isPopOutMode=e:(n.isPopOutMode=e,n.updateNavigationPaneVisibility())})).subscribe(c.createBasicShape,(function(e,t){return n.onCreateBasicShape(e,t)})).subscribe(c.createTextbox,(function(e){return n.onCreateTextbox(e)})).subscribe(c.refreshExploration,(function(e){return n.refresh(e)})).subscribe(c.deleteCustomVisual,(function(e,t){return n.onDeleteCustomVisual(t)})).subscribe(c.newQueryCacheResultAvailable,(function(e,t){return n.onNewQueryCacheResultAvailable(e,t)}));this.services.pinVisual.setHandler({pinVisual:function(e){n.pinVisual(e)}}),this.services.connectionSetupService=e.explore.services.createConnectionSetupService(this.services.conceptualSchemaProxy,this.services.dataProxy,this.services.visualAuthoring,this.services.visualQueryGenerator),$(window).on(jsCommon.DOMConstants.beforeUnload,(function(){return n.onWindowUnload()}));var v=this.services.rootScope.$on(e.constants.saveReportFromPinDialog,(function(t,i){n.saveAsInternalWithName(i).then((function(){var t=n.services.reportService.findReport(n.reportId);t||n.services.reportService.addReport(n.services.modelConverter.convertReport({id:n.reportId,permissions:e.common.contracts.Permissions.All|e.common.contracts.Permissions.Explore})),t=n.services.reportService.findReport(n.reportId),t.isNew=!0,n.services.pinTileService.setSavedReport(t)}))})),m=this.services.rootScope.$on(c.showErrorNotification.name,(function(e,t,i,o){n.showErrorNotificationWithModel(i,t,o)}));this.scope.fullScreen=this.services.fullScreen,this.scope.featureSwitchService=this.services.featureSwitchService,this.scope.isFooterVisible=function(){return n.isFooterVisible()},this.scope.isVisualizationPaneVisible=function(){return n.isVisualizationPaneVisible()},this.scope.$watch("fullScreen.fullScreenMode",(function(e){n.onFullScreenChange(e)}));var f=this.scope.$on(o.navigation.stateChangeSuccess,(function(e,t,i,o,r){return n.handleStateChange(e,t,i,o,r)}));this.scope.$on("$destroy",(function(){n.removeKeyHandler(),l(),f(),v(),m(),n.unregisterViewModelWatch&&n.unregisterViewModelWatch(),d(),p.unsubscribeAll(),u.unsubscribeAll()})),this.embedTypeDescription=this.services.embedModeService.getEmbedTypeDescription()}return __extends(w,t),w.createOptions=function(){return{additionalServices:["checkUnsavedService","conceptualSchemaProxy","dashboardService","dataProxy","embedModeService","errorService","explorationProxy","explorationSerializer","exportStaticExplorationService","exportToPowerPoint","featureSwitchService","fullScreen","gatewaysMetadataService","groupService","linguisticSchemaProxy","localizationService","modalDialogService","modelConverter","modelHttpService","navigation","notificationBar","notificationToast","overlayService","packageService","permissionService","pinTileService","promiseFactory","qrCodeService","reportService","resourceGateService","resourcePackagesService","selectGatewayService","quota","telemetryService","themeService","userInfo","visualStylePresetService","auditing","mostRecentlyUsedService","userActivityContextService","userSettingsService","esriExploration","esri","subscription"],scopedServiceRoot:!0,scopedDependencies:["canvasKeyHandler","clipboard","colorPicker","dataSources","deleteVisual","drillToDetails","eventBridge","explorationCapabilities","explorationNavigation","exportData","filterGenerator","formFactor","importVisual","layoutAuthoring","modelChangeHandler","pinVisual","popOut","scriptVisuals","selection","sort","undoRedo","viewModeState","visualAuthoring","visualPlugin","visualQueryGenerator"]}},w.prototype.isFooterVisible=function(){var e=this.scope.viewModel;return!!e&&(e.options.showNavContentPane&&!this.services.viewModeState.getConfig().displayOptions.hideNavigationPane)},w.prototype.isVisualizationPaneVisible=function(){var e=this.scope.viewModel;return!!e&&(e.options.showVisualizationPane&&!this.services.viewModeState.getConfig().displayOptions.hideVisualizationPane)},w.prototype.showOptionsDialog=function(t){var i=this,o="exportDataDialog",r=[{name:this.services.localizationService.get("ModalDialog_ExportDataFormatXL"),action:function(){return 1===i.services.exportData.getExportDataToExcelUnsupportedType(t.visualConfig,i.scope.viewModel.datasetModel)?void i.services.modalDialogService.showFeatureNotSupportedDialog(i.services.localizationService.get("ExlFormat_UnsupportedDatasetDialogTitle"),i.services.localizationService.get("ExlFormat_ToolTipDescription_AsOnPrem"),"https://go.microsoft.com/fwlink/?linkid=834313","exportDataDialogCssClass"):void i.exportVisualDataToFile(t,1,0)}},{name:this.services.localizationService.get("ModalDialog_ExportDataFormatCsv"),action:function(){i.exportVisualDataToFile(t,0,0)}}];this.services.modalDialogService.showActionSelectionDialog(this.services.localizationService.get("ModalDialog_ExportDataTitle"),this.services.localizationService.get("ModalDialog_ExportDataText"),o,r,this.services.localizationService.get("ModalDialogButtonText_Export"),this.services.localizationService.get("PBI_Button_Label_Cancel")),this.services.telemetryService.logEvent(e.telemetry.EXExportVisualDataDialogShown)},w.prototype.showExportDataDialogFromVisual=function(t,i){var o,r=this,a=new S(this.services.modalDialogService,this.services.localizationService),n=this.services.exportData.getExportDataToExcelUnsupportedType(t.visualConfig,this.scope.viewModel.datasetModel);0===n&&(o=this.services.drillToDetails.getDetailsTableTargetMeasure(t.visualConfig));var s=!!o;a.show(n,s).then((function(e){e&&r.exportVisualDataToFile(t,e.format,e.dataType,o)})),i&&this.services.telemetryService.logEvent(e.telemetry.EXExportVisualDataDialogFromVisualIsShown)},w.prototype.isVisualInSeeRecordsMode=function(e){return b.hasGroupByItems(e)},w.prototype.exportVisualData=function(e,t){e.stopPropagation();var i=this.services.featureSwitchService.featureSwitches;i.exportVisualToExcelEnabled&&!this.services.embedModeService.isReportEmbedScenario()?this.isVisualInSeeRecordsMode(t.visualConfig.query)?this.showOptionsDialog(t):i.enableExportDataNewDialog?this.showExportDataDialogFromVisual(t,!0):this.exportVisualDataToFile(t,0,0):this.exportVisualDataToFile(t,0,0)},w.prototype.exportVisualDataToFile=function(t,i,o,r){var a,n=this.services.dataSources.get(),s=this.services,c=s.userInfo.isPremiumUser,l=s.telemetryService.startEvent(e.telemetry.EXExportVisualData,t.visualConfig.visualType,e.telemetry.ExportVisualSource.Report,!1,i,c,this.isVisualInSeeRecordsMode(t.visualConfig.query),o),d=1===o;a=0===i?s.exportData.exportVisualDataToCsv(t.visualTitle,t.dataViewSource,n,t.visualConfig,t.transformActions,t.additionalFilters):s.exportData.exportVisualDataToExcel(t.visualTitle,n,t.visualConfig,t.additionalFilters,d,r),a.then((function(e){l.event.info.isPartialResult=e.isPartialResult,l.resolve()}),(function(e){l.reject({errorCode:e.error.toString()})})),this.services.auditing.auditEvent(this.reportId,e.common.contracts.AuditEntityType.Report,e.common.contracts.AuditActivityType.exportReportTile)},w.prototype.exportToPowerPoint=function(e){e.stopPropagation();var t=this.services.reportService.findReport(this.reportId),i={reportId:this.reportId,filename:t.displayName,reportSectionsNumber:this.exploration&&this.exploration.sections?this.exploration.sections.length:void 0};this.services.exportToPowerPoint.exportToPowerPoint(i)},w.prototype.exportAsImage=function(e){e.stopPropagation();var t=this.services.reportService.findReport(this.reportId),i=this.services.explorationNavigation.getCurrentSection().name;this.services.exportStaticExplorationService.exportToPng(t.displayName,t.objectId,i)},w.prototype.onDeleteSection=function(t){var i=this;if(t.supportMinervaDialog){var o=t.sectionIndex,r=this.services.rootScope.$new(),a=this.scope.viewModel,n=this.services.errorService.control(),s=[new InJs.ModalDialogAction(this.services.localizationService.get("ExplorationNavigationTab_Delete"),function(t,r){n.hideDialog(),i.services.rootScope.$emit(e.explore.constants.deleteSectionEvent,o)}),new InJs.ModalDialogAction(this.services.localizationService.get("PBI_Button_Label_Cancel"),function(e,t){n.hideDialog()})];r.message=this.services.localizationService.get("ExplorationNavigationTab_DeleteWarningMessage");var c=a&&a.exploration&&a.exploration.sections&&a.exploration.sections[o]&&a.exploration.sections[o].contract?a.exploration.sections[o].contract.id:void 0,l=void 0;this.services.dashboardService.hasTileForReportandSection&&(l=this.services.dashboardService.hasTileForReportandSection(c));var d=void 0,p=void 0;l&&(d=jsCommon.ModalDialogNotificationType.Warning,p=this.services.localizationService.get("PinLiveReport_DeleteSectionWarning"));var u={dialogName:this.services.localizationService.get("ExplorationNavigationTab_DeleteWarningTitle"),isDismissable:!0,scope:r,template:"<custom-modal-dialog></custom-modal-dialog>",dialogCssClass:"customModalDialog",dialogActions:s,notificationType:d,notificationText:p};this.services.modalDialogService.showLegacyWebModalDialog(u)}},w.prototype.onNewQueryCacheResultAvailable=function(t,i){var o=this.scope.viewModel.exploration,r=this.services.explorationCapabilities.getCapabilities();o&&!r.disableCacheUpdates&&(this.visualContainerQueryUpdater||(this.visualContainerQueryUpdater=new e.helpers.VisualContainerQueryUpdater(o.contract.id,this.services.explorationProxy)),this.visualContainerQueryUpdater.onNewQueryCacheResultAvailable(i)),t.stopPropagation&&t.stopPropagation()},w.prototype.initialize=function(e){if(this.scope.explorationContainerOptions&&this.services.explorationCapabilities.setCapabilities(this.scope.explorationContainerOptions),e){e.showSpinner=!0,e.options||(e.options=this.services.explorationCapabilities.getCapabilities(),this.services.embedModeService.isReportEmbedScenario()||this.services.esri.getEsriVisualEnabled().then((function(t){e.visualizationPane.esriVisualEnabled=t})),e.options.esriVisualDisallowed=!this.services.featureSwitchService.featureSwitches.esriVisualEnabled,e.visualizationPane.esriVisualDisallowed=e.options.esriVisualDisallowed);var t=e.options;this.explorationNotificationIds=[];var i=this.services.featureSwitchService;this.services.viewModeState.updateConfig((function(e){e.supportsPinning=!t.visualContainerOptions.disablePin,e.supportsDeletion=!0,e.supportsExportData=!t.disableExport&&i.featureSwitches.exportDataEnabled})),e.shouldHideFilterPane&&(e.options.showVisualizationPane=!1),e.options.showAppBar=!e.shouldHideAppBar&&t.showAppBar,this.isPopOutMode&&this.services.popOut.clearPopOut(),this.updateNavigationPaneVisibility(),e.shouldHideTileMenu&&(e.options.visualContainerOptions.hideHeader=!0),e.options.overrideDisplayOption=e.overrideDisplayOption||e.options.overrideDisplayOption}},w.prototype.deleteVisual=function(e,t){var i=this.services.rootScope.$new(),o=this.scope.viewModel.exploration.contract;i.deleteVisualService=this.services.deleteVisual,i.errorService=this.services.errorService,i.explorationContract=o,i.customVisuals=[t.visual],i.deleteVisualButtonText=this.services.localizationService.get("DeleteVisual_Delete");var r=this.getCustomVisualContainerCount(t.visual);r>0?i.deleteVisualWarningText=this.services.localizationService.format("DeleteVisual_CustomVisualUsedMessage",[r]):i.deleteVisualWarningText=this.services.localizationService.format("DeleteVisual_CustomVisualNotUsedMessage",[r]);var a={dialogName:this.services.localizationService.get("DeleteVisual_DialogHeader"),isDismissable:!0,scope:i,template:"<delete-visual-warning-dialog></delete-visual-warning-dialog>",dialogCssClass:"deleteVisualWarning"};this.services.modalDialogService.showLegacyWebModalDialog(a),e.stopPropagation()},w.prototype.deleteCustomVisuals=function(e){var t=this.services.rootScope.$new(),i=this.scope.viewModel.exploration.contract;t.deleteVisualService=this.services.deleteVisual,t.errorService=this.services.errorService,t.localizationService=this.services.localizationService,t.modalDialogService=this.services.modalDialogService,t.explorationContract=i;var o={selectedVisualCount:0,customVisuals:[]};o.customVisuals=f.getCustomVisualTypes(this.services.visualPlugin.getConvertibleVisuals()),this.getCustomVisualsTileCounts(o.customVisuals),t.viewModel=o;var r={dialogName:this.services.localizationService.get("DeleteVisuals_DialogHeader"),isDismissable:!0,scope:t,template:"<delete-custom-visuals-dialog></delete-custom-visuals-dialog>",dialogCssClass:"deleteCustomVisuals"};this.services.modalDialogService.showLegacyWebModalDialog(r),e.stopPropagation()},w.prototype.importVisual=function(e){var t=this.services.rootScope.$new();t.importVisualService=this.services.importVisual,t.errorService=this.services.errorService,t.explorationContract=this.scope.viewModel.exploration.contract;var i={dialogName:this.services.localizationService.get("ImportVisual_CautionDialogHeader"),isDismissable:!0,scope:t,template:"<import-visual-warning-dialog></import-visual-warning-dialog>",dialogCssClass:"importVisualWarning"
};this.services.modalDialogService.showLegacyWebModalDialog(i),e.stopPropagation()},w.prototype.onAddCustomVisual=function(e,t){this.services.undoRedo.clear();var o=this.scope.viewModel.exploration.contract.resourcePackages;o?o.withName(t.name)||o.push(t):o=this.scope.viewModel.exploration.contract.resourcePackages=i.createWithName(),this.services.resourcePackagesService.registerPackages([t]),e.stopPropagation()},w.prototype.onDeleteCustomVisual=function(e){var t=[];this.scope.viewModel.exploration.sections.forEach((function(i){i.contract.visualContainers.forEach((function(i){i.config.singleVisual.visualType===e.visual.name&&t.push(i)}))})),this.services.visualAuthoring.deleteVisualContainers(t,this.scope.viewModel.exploration),this.services.rootScope.$emit(o.onReportChangedEventName,!0)},w.prototype.onCreateTextbox=function(e){this.onAddVisualContainer(e,{visualType:"textbox",telemetrySource:4})},w.prototype.onCreateBasicShape=function(e,t){this.services.visualAuthoring.addVisualContainerBasicShape(this.scope.viewModel.exploration.exploreCanvas,t.shapeType,null)},w.prototype.onAddVisualContainer=function(t,i){e.explore.util.CanvasVisualsUtility.addVisualContainerToCanvas(i,this.scope.viewModel.exploration.exploreCanvas,this.services.dataSources.get(),this.services.visualAuthoring,this.services.telemetryService),t.stopPropagation&&t.stopPropagation()},w.prototype.onWindowUnload=function(){if(this.reportChanged&&this.scope.viewModel.sectionStatus.isEditing)return this.services.localizationService.get("ReportContainer_WindowUnload")},w.prototype.onFullScreenChange=function(e){if(this.scope.viewModel&&this.scope.viewModel.options){var t=this.scope.viewModel.options;e?(this.services.navigation.inReportDetailView()&&1===this.services.viewModeState.getMode()&&this.onChangeViewMode(0),this.oldOptions=_.clone(this.scope.viewModel.options,!0),t.visualContainerOptions.showPin=!1,t.showAppBar=!1,t.showTaskPane=!1,t.showVisualizationPane=!this.services.navigation.inReportEmbedView(),this.isReportInEmbedView=this.services.navigation.inReportEmbedView(),this.updateNavigationPaneVisibility()):this.oldOptions&&(this.services.explorationCapabilities.setCapabilities(this.oldOptions),t=this.services.explorationCapabilities.getCapabilities(),t.visualContainerOptions.disablePin=!this.scope.viewModel.canEdit,this.oldOptions=null)}},w.prototype.showUnsupportedVisualSaveError=function(){this.services.errorService.infoCustom(this.services.localizationService.get("ExploreCompatibility_UnsupportedVisualSaveErrorTitle"),this.services.localizationService.get("ExploreCompatibility_UnsupportedVisualSaveErrorMessage"))},w.prototype.showSavePrompt=function(t,i,o,r){var a=this,n=this.services.errorService.control();_.isFunction(r)||(r=_.noop);var s=[new InJs.ModalDialogAction(this.services.localizationService.get("ReportContainer_Save"),function(o,s){if(n.hideDialog(),a.isSaveDialogOpened=!1,e.helpers.ReportUtility.HasUnsupportedExploreVisuals(a.scope.viewModel.exploration.contract,a.services.visualPlugin))a.showUnsupportedVisualSaveError();else{var c=a.services.promiseFactory.defer();a.triggerSaveOrSaveAs(c),c.promise.then((function(){r(),a.navigateAway(t,i)})).finally((function(){a.hideSaveMask()}))}}),new InJs.ModalDialogAction(this.services.localizationService.get("ReportContainer_Dontsave"),function(e,o){r(),n.hideDialog(),a.services.rootScope.$emit(p,!1),a.navigateAway(t,i),a.isSaveDialogOpened=!1}),new InJs.ModalDialogAction(this.services.localizationService.get("PBI_Button_Label_Cancel"),function(e,t){n.hideDialog(),a.isSaveDialogOpened=!1})];this.isSaveDialogOpened===!1&&(n.showCustomDialog(null,this.getSaveDialogTemplate(),s,null,!0,null,null,null,(function(){a.isSaveDialogOpened=!1})),this.isSaveDialogOpened=!0)},w.prototype.removeKeyHandler=function(){this.currentKeyHandler&&($(window).off("keydown",this.currentKeyHandler),this.currentKeyHandler=void 0)},w.prototype.addKeyHandler=function(){var e=this;this.currentKeyHandler||(this.currentKeyHandler=function(t){if(e.scope.viewModel&&e.scope.viewModel.exploration&&!$(t.target).is(jsCommon.DOMConstants.EditableTextElements)&&!$(t.target).is(jsCommon.DOMConstants.EditableNumericElements))return e.services.canvasKeyHandler.onKeyDown(t,e.scope.viewModel.exploration.exploreCanvas)},$(window).on("keydown",this.currentKeyHandler))},w.prototype.handleStateChange=function(e,t,i,o,r){this.scope.viewModel.showSpinner=!0,this.hideAllExplorationWarnings();var a=this.services.navigation.inReportView()||this.services.navigation.inDatasetView();a||(this.removeKeyHandler(),this.clearExploration()),this.services.overlayService.hideAllDropdowns()},w.prototype.pinVisual=function(t){if(t){var i=this.services.explorationNavigation.getCurrentSection().name;t.reportId=this.reportId,this.scope.dataSources.length>0&&(t.modelId=this.scope.dataSources[0].id,t.packageId=this.packageId),t.action={action:e.common.constants.openReportActionName,targetSlideId:i},this.services.rootScope.$emit(v,t)}},w.prototype.onSectionChange=function(t){this.services.navigation.updateReportStateNoReload(this.services.navigation.currentReportGUID,this.services.navigation.currentReportOriginalGUID,t.name,!1,e.services.LocationOptions.Replace);var i=this.scope.viewModel.exploration.contract;this.services.layoutAuthoring.updateExplorationActiveSectionIndex(i,t.name,this.services.navigation.currentReportGUID);var o=this.services.explorationNavigation.getCurrentSection(),r=o&&o.transient;!!this.isActiveSectionTransient==!!r||this.isPopOutMode?this.isActiveSectionTransient=r:(this.isActiveSectionTransient=r,this.updateNavigationPaneVisibility())},w.prototype.logRTelemetry=function(e,t){this.scope.viewModel.options.disableLogRTelemetry||this.services.telemetryService.logEvent(e,t.totalVisualsCount,t.scriptVisualsUniqueIds.length,JSON.stringify(t.scriptVisualsUniqueIds),this.services.userInfo.userLicense())},w.prototype.onChangeViewMode=function(e){var t=this,i=1===e||2===e;i&&!this.scope.viewModel.canEdit||(this.reportChanged?this.showSavePrompt({},o.navigation.states.reportPage,"",(function(){t.changeToEditMode(i)})):this.changeToEditMode(i))},w.prototype.hideAllExplorationWarnings=function(){for(var e=this.explorationNotificationIds;e.length>0;)this.services.notificationBar.hide(e.pop().notificationId);this.explorationNotificationIds=[]},w.prototype.hideExplorationWarning=function(e){for(var t=this.explorationNotificationIds,i=0,o=t;i<o.length;i++){var r=o[i];if(e&&r.notificationName===e){this.services.notificationBar.hide(r.notificationId),t.splice(t.indexOf(r),1);break}}this.explorationNotificationIds=t},w.prototype.isNotificationShown=function(e){for(var t=this.explorationNotificationIds,i=0,o=t;i<o.length;i++){var r=o[i];if(e&&r.notificationName===e)return r.notificationId}},w.prototype.addNotification=function(e){e&&(this.isNotificationShown(e.notificationName)&&this.hideExplorationWarning(e.notificationName),this.explorationNotificationIds.push(e))},w.prototype.createCustomVisualWarningHelper=function(t,i){var o=this;if(this.scope.viewModel.options.customVisualsAlwaysEnabled)t&&this.onEnsureCustomViz(t.resourcePackages,i);else if(!this.warningBarNotified){this.warningBarNotified=!0,this.services.telemetryService.logEvent(e.telemetry.EXLoadReportWithCustomViz,this.embedTypeDescription);var r={notificationName:"lastEnableCustomVizNotifyId",notificationId:this.services.notificationBar.notify({message:this.services.localizationService.get("OpenReport_EnableCustomVisualWarningMessage"),notificationType:e.common.NotificationBarType.Warning,actions:[{displayText:this.services.localizationService.get("OpenReport_EnableCustomVisualButton"),linkId:1,action:function(){o.services.resourceGateService.addResourcePackageIdToDashboard(t.id.toString(),t.resourcePackages.map((function(e){return e.id.toString()}))),o.onEnsureCustomViz(t.resourcePackages,i)}}],secondaryLink:{displayText:this.services.localizationService.get("OpenReport_EnableCustomVisualWarningLinkText"),urlString:"http://go.microsoft.com/fwlink/?LinkID=627490 "}})};this.addNotification(r)}},w.prototype.createCustomVisualWarning=function(e,t){this.services.resourceGateService.shouldShowWarning(e.resourcePackages.map((function(e){return e.id.toString()})),e.id.toString())?this.createCustomVisualWarningHelper(this.exploration,t):this.onEnsureCustomViz(e.resourcePackages,t)},w.prototype.updateNavigationPaneVisibility=function(){this.isPopOutMode||this.isActiveSectionTransient?this.oldOptions=_.clone(this.scope.viewModel.options,!0):this.oldOptions&&(this.services.explorationCapabilities.setCapabilities(this.oldOptions),this.oldOptions=null);var e=!this.isPopOutMode&&!this.isActiveSectionTransient&&this.services.explorationCapabilities.getCapabilities().showNavContentPane;this.scope.viewModel.options.showNavContentPane=!this.scope.viewModel.shouldHideSlideBar&&e},w.prototype.displayCustomVisualWarning=function(e){if(this.exploration&&this.exploration.resourcePackages&&this.exploration.resourcePackages.length>0)if(!e&&this.exploration.sections)for(var t=this.exploration.sections,i=0,o=t;i<o.length;i++){var r=o[i];if(r.visualContainers){var a=r.visualContainers;if(this.containsCustomVisual(a)){this.createCustomVisualWarning(this.exploration,e);break}}}else this.createCustomVisualWarning(this.exploration,e)},w.prototype.containsCustomVisual=function(e){for(var t=0,i=e;t<i.length;t++){var o=i[t];if(o.config&&o.config.singleVisual&&o.config.singleVisual.visualType){var r=o.config.singleVisual.visualType;if(this.resourcePackageContainsCustomVisual(r))return!0}}return!1},w.prototype.getCustomVisualContainerCount=function(e){var t=0;return this.scope.viewModel.exploration.contract.sections.forEach((function(i){i.visualContainers.forEach((function(i){i.config.singleVisual.visualType===e.name&&++t}))})),t},w.prototype.getCustomVisualsTileCounts=function(e){var t=this;e.forEach((function(e){e.tileCount=0,t.scope.viewModel.exploration.contract.sections.forEach((function(t){for(var i=0,o=t.visualContainers;i<o.length;i++){var r=o[i];r.config.singleVisual.visualType===e.plugin.name&&(e.tileCount+=1)}})),e.tileCountMessage=t.services.localizationService.format("DeleteVisual_AssociatedTiles",[e.tileCount]),e.selected=!1}))},w.prototype.resourcePackageContainsCustomVisual=function(e){if(this.exploration&&this.exploration.resourcePackages)for(var t=this.exploration.resourcePackages,i=0,o=t;i<o.length;i++){var r=o[i];if(r.name===e)return!0}return!1},w.prototype.notifyForSave=function(t,i,o){var r=this;this.services.localizationService.ensureLocalization((function(){r.services.notificationToast.notify({title:r.services.localizationService.get(t),message:r.services.localizationService.get(o),notificationType:e.common.NotificationToastType.Success})}))},w.prototype.triggerSaveOrSaveAs=function(t){var i=this;if(this.reportId){var o,r=this.services.telemetryService.startEvent(e.telemetry.EXSaveExploration,!1);return this.showSaveMask(),this.services.explorationProxy.save(this.originalExploration,this.scope.viewModel.exploration.contract,this.reportId).then((function(e){return e||t.reject(),o=e,i.services.linguisticSchemaProxy.save(e.reportId)})).then((function(){i.lastLoadedReport.contract.hasExploration=!0,i.onSaveSuccessCommon(o),i.notifyForSave("SaveReport_Success",0,"SaveReport_Success_DefaultDetails"),r.resolve(),t.resolve(null)}),(function(e){i.showError(e,i.services.localizationService.get("ExplorationContainer_FailedToSaveReport"),"ExplorationContainer_FailedToSaveReportDefaultDetails"),r.reject(s.getTelemetryErrorDetails(e?e.error:null,e?e.httpStatusCode:null)),t.reject()}))}return this.saveAsInternal().then((function(){i.notifyForSave("SaveReport_Success",0,"SaveReport_Success_DefaultDetails"),t.resolve(null)}),(function(){t.reject()}))},w.prototype.saveOnKeypress=function(e){if(this.scope.viewModel.canEdit){var t=this.scope.viewModel.options;0!==this.scope.viewModeState.getMode()||t.disableSaveOnKeyPress?this.save(e):this.saveAs(e)}},w.prototype.refresh=function(t){var i={changes:[],isSchemaChangeListComplete:!1};this.services.modelChangeHandler.applyChange({change:this.services.promiseFactory.resolve(i),leaveUndo:!0}),this.hideExplorationWarning("lastErrorNotifyId"),t&&t.stopPropagation&&t.stopPropagation();var o=g.getVisualStasInExploration(this.exploration,this.services.scriptVisuals);this.logRTelemetry(e.telemetry.EXExplorationRefresh,o)},w.prototype.save=function(t){var i=this;if(this.reportId)if(e.helpers.ReportUtility.HasUnsupportedExploreVisuals(this.scope.viewModel.exploration.contract,this.services.visualPlugin))this.showUnsupportedVisualSaveError();else{var o,r=this.services.telemetryService.startEvent(e.telemetry.EXSaveExploration,!1);this.showSaveMask(),this.services.explorationProxy.save(this.originalExploration,this.scope.viewModel.exploration.contract,this.reportId).then((function(e){return e||i.services.promiseFactory.reject(),o=e,i.services.linguisticSchemaProxy.save(e.reportId)})).then((function(){i.lastLoadedReport.contract.hasExploration=!0,i.onSaveSuccessCommon(o),i.notifyForSave("SaveReport_Success",0,"SaveReport_Success_DefaultDetails");var t=i.services.reportService.findReport(i.reportId);t&&t.isUsedByContentPack&&i.services.rootScope.$emit(e.constants.contentPackDirtyShowNotification,i.reportId,a.Report),r.resolve()}),(function(e){i.showError(e,i.services.localizationService.get("ExplorationContainer_FailedToSaveReport"),"ExplorationContainer_FailedToSaveReportDefaultDetails"),r.reject(s.getTelemetryErrorDetails(e?e.error:null,e?e.httpStatusCode:null))})).finally((function(){i.hideSaveMask()}))}else this.saveAsInternal().then((function(){i.notifyForSave("SaveReport_Success",0,"SaveReport_Success_DefaultDetails")}),(function(){}));this.services.overlayService.hideAllDropdowns(),t.stopPropagation&&t.stopPropagation()},w.prototype.generateQR=function(e){this.services.qrCodeService.showDialogForReport(this.scope,this.services.explorationNavigation.getCurrentExploration().report,this.scope.viewModel.displayName,this.services.groupService.activeGroupObjectId,this.services.navigation.currentReportPage,this.services.navigation.currentAppGUID)},w.prototype.saveAs=function(t){var i=this;this.services.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.ReportSaveAs)||(this.saveAsInternal().then((function(){i.notifyForSave("SaveReport_Success",0,"SaveReport_Success_DefaultDetails")}),(function(){})),this.services.overlayService.hideAllDropdowns(),t.stopPropagation&&t.stopPropagation())},w.prototype.synchronizeExplorationIds=function(e,t){t.id=e.id,t.reportId=e.reportId,m.synchronizeSectionsIds(e.sections,t.sections)},w.prototype.onSaveSuccessCommon=function(e){this.synchronizeExplorationIds(e,this.scope.viewModel.exploration.contract);var t={featureUsage:{}},i=this.services.explorationSerializer,o=i.serializeExploration(e,t);this.originalExploration=i.deserializeExploration(o,[],!0),this.sendTelemetryForCapabilities(t),this.services.rootScope.$emit(p,!1)},w.prototype.confirmSaveAs=function(t,i){var r=this;this.showSaveMask();var a,n=this.services.telemetryService.startEvent(e.telemetry.EXSaveExploration,!0),c=this.scope.viewModel.exploration.contract.reportId;this.services.explorationProxy.saveAs(this.scope.viewModel.exploration.contract,t,this.scope.dataSources[0].id,this.packageId).then((function(e){e&&e.reportId||i.reject(),a=e;var t=r.services.linguisticSchemaProxy;if(c){var o=t.getSchema(c);t.setSchema(e.reportId,o)}return t.save(e.reportId)})).then((function(){r.scope.viewModel.displayName=t,r.reportId=a.reportId,r.reportGUID=a.report.objectId,r.onSaveSuccessCommon(a),r.services.navigation.updateReportStateNoReload(r.reportGUID,void 0,r.services.navigation.currentReportPage,!0),r.services.rootScope.$emit(o.currentActiveReportInfoChangedEventName,{id:r.reportId,displayName:t,guid:r.reportGUID}),r.services.mostRecentlyUsedService.updateMRU(e.models.MRUArtifactType.Reports,r.reportGUID,t,a.report.permissions),n.resolve(),i.resolve(a)}),(function(e){r.showError(e,r.services.localizationService.get("ExplorationContainer_FailedToSaveReport"),"ExplorationContainer_FailedToSaveReportDefaultDetails"),n.reject(s.getTelemetryErrorDetails(e?e.error:null,e?e.httpStatusCode:null)),i.reject()}))},w.prototype.saveAsInternal=function(){var t=this,i=this.services.promiseFactory.defer();return e.explore.controllers.showSaveAsDialog(this.services.errorService,this.services.localizationService).then((function(e){t.confirmSaveAs(e,i)}),(function(){i.reject()})),i.promise.finally((function(){t.hideSaveMask()})),i.promise},w.prototype.saveAsInternalWithName=function(e){var t=this,i=this.services.promiseFactory.defer();return e||i.reject(),this.confirmSaveAs(e,i),i.promise.finally((function(){t.hideSaveMask()})),i.promise},w.prototype.loadModelAndNotifyIfFailed=function(){var t=this,i=this.services.promiseFactory.defer(),o=this.services.dataSources.get();return this.services.conceptualSchemaProxy.get(o).then((function(){i.resolve(null)})).catch((function(o){i.reject(o),o&&o.serviceError&&e.helpers.ReportUtility.shouldDisplayErrorAsNotificationBar(o.serviceError.errorCode)?t.services.eventBridge.publishBubbling(t.scope,c.showErrorNotification,{code:o.serviceError.errorCode,"pbi.error":{code:o.serviceError.errorCode,parameters:[],details:o.serviceError.errorDetails}}):e.explore.util.handleConceptualSchemaError(o,t.services.errorService,t.services.localizationService.get("ExplorationContainer_FailedToLoadModel"),"ExplorationContainer_FailedToLoadModel_DefaultDetails")})),i.promise},w.prototype.loadLinguisticSchemaAndNotifyIfFailed=function(e){var t=this;this.services.linguisticSchemaProxy.init(e.reportId,e.reportHasLinguisticSchema).catch((function(e){return t.showError(e,t.services.localizationService.get("ExplorationContainer_FailedToLoadReport"),"ExplorationContainer_FailedToLoadReport_DefaultDetails")}))},w.prototype.initializeExploration=function(t,i,o,r,a,n,l,p,u,v){var h=this;this.warningBarNotified=!1,this.services.visualPlugin.removeAllCustomVisuals(),this.services.resourceGateService.setResourceFlag();var g=this.scope.viewModel.options;this.services.esri.reloadEsriExplorationContext(this.services.visualPlugin,this.scope,!1).then((function(y){if(y||h.services.eventBridge.publishToChannel(c.visualPluginsChanged),r){h.scope.viewModel.showSpinner=!1;var b={width:e.explore.constants.ExploreCanvasConstants.DefaultCanvasWidth,height:e.explore.constants.ExploreCanvasConstants.DefaultCanvasHeight,dataSources:e.explore.contracts.createDataSourceArray(),sections:[{name:"ReportSection",displayName:void 0,visualContainers:[],filters:[],size:{displayOption:1,width:e.explore.constants.ExploreCanvasConstants.DefaultWidescreenWidth,height:e.explore.constants.ExploreCanvasConstants.DefaultWidescreenHeight}}]};m.fillDefaultSectionDisplayNames(b,h.services.localizationService),h.addODataFilterFromQuery(b,p),h.scope.viewModel.exploration=f.convertExploration(b,h.services.formFactor.getCurrentLayout()),h.services.telemetryService.logEvent(e.telemetry.EXInitExploration,v),h.setSectionStatus(0),h.setVisualTheme(),h.setDataSource(a),h.tryAddJsonFilters(b,u),h.services.explorationNavigation.loadExploration(b),g.disableLinguisticSchemaInitialization||h.loadLinguisticSchemaAndNotifyIfFailed(b),h.scope.$broadcast(d),h.setupConnection(a);var S=h.loadModelAndNotifyIfFailed();m.gotoSection(h.scope.viewModel,0,h.services.selection,h.services.explorationNavigation,h.services.formFactor.getCurrentLayout()),n&&S&&S.then((function(){n.resolve()}),(function(e){n.reject({errorCode:h.getErrorInfoCode(e)}),h.services.userActivityContextService.popParentContext(n.event)})),h.services.esri.reloadEsriExplorationContext(h.services.visualPlugin,h.scope,!1).then((function(e){h.gotoCurrentSection(e)}))}else{h.scope.viewModel.showSpinner=!0;var w=function(t){g.disableLinguisticSchemaInitialization||h.loadLinguisticSchemaAndNotifyIfFailed(t);for(var r=0,s=t.sections;r<s.length;r++){var l=s[r];_.isNumber(h.scope.viewModel.options.overrideDisplayOption)?l.size.displayOption=h.scope.viewModel.options.overrideDisplayOption:null!=h.scope.viewModel.options.defaultDisplayOption&&0===l.size.displayOption&&(l.size.displayOption=h.scope.viewModel.options.defaultDisplayOption)}var y;i?y=m.findSectionIndexForSectionName(t,i):o?y=m.findSectionIndexForSectionName(t,o):_.isNumber(t.activeSectionIndex)&&(y=t.activeSectionIndex),null==y&&(y=0),m.fillDefaultSectionDisplayNames(t,h.services.localizationService),h.addODataFilterFromQuery(t,p),h.setSectionStatus(y),h.setVisualTheme(t.theme);var b=h.services.explorationSerializer.serializeExploration(t);h.originalExploration=h.services.explorationSerializer.deserializeExploration(b,[],!0),h.scope.viewModel.exploration=f.convertExploration(t,h.services.formFactor.getCurrentLayout(),y),h.services.telemetryService.logEvent(e.telemetry.EXInitExploration,v),h.setDataSource(a),h.tryAddJsonFilters(t,u);var S=h.loadModelAndNotifyIfFailed();h.onChangeViewMode(0),h.scope.viewModel.showSpinner=!1,h.services.explorationNavigation.loadExploration(t),h.services.esriExploration.esriVisualAllowed()&&(h.services.esriExploration.explorationViewModelContainsEsriVisual(h.scope.viewModel.exploration)?h.services.esri.reloadEsriExplorationContext(h.services.visualPlugin,h.scope,!0).then((function(e){e?h.gotoCurrentSection(e):h.services.eventBridge.publishToChannel(c.visualPluginsChanged)})):h.services.visualPlugin.ensureThirdPartyPlugins()),h.scope.$broadcast(d),m.gotoSection(h.scope.viewModel,y,h.services.selection,h.services.explorationNavigation,h.services.formFactor.getCurrentLayout()),h.setupConnection(a),h.services.rootScope.$emit(e.constants.openReportFinished,"",!1),h.services.navigation.inReportSubscriptionView()&&h.services.subscription.expandPaneForReportSubscription({currentSection:h.services.explorationNavigation.getCurrentSection(),report:h.services.explorationNavigation.getCurrentExploration().report,modelId:h.services.explorationNavigation.getCurrentExploration().dataSources[0].id,sections:h.services.explorationNavigation.getCurrentExploration().sections},h.services.navigation.currentReportSubscriptionGUID),n&&S&&S.then((function(){n.resolve()}),(function(e){n.reject({errorCode:h.getErrorInfoCode(e)}),h.services.userActivityContextService.popParentContext(n.event)}))};if(h.exploration=l,l)w(l);else{var C=h.services.telemetryService.startEvent(e.telemetry.EXFetchExploration,v),D={id:t,model:a};h.services.explorationProxy.get(D).then((function(e){w(e),C.resolve()}),(function(t){h.showError(t,h.services.localizationService.get("ExplorationContainer_FailedToLoadReport"),"ExplorationContainer_FailedToLoadReport_DefaultDetails"),h.scope.viewModel.showSpinner=!1,h.services.rootScope.$emit(e.constants.openReportFinished,t&&t.error?t.error.message:"",!0),C.reject(),n&&(n.reject(s.getTelemetryErrorDetails(t.error)),h.services.userActivityContextService.popParentContext(n.event))}))}}}))},w.prototype.gotoCurrentSection=function(t){if(t){var i=this.scope.viewModel.sectionStatus.currentSectionNumber;i!==-1&&(this.services.eventBridge.publishToChannel(e.explore.services.events.visualPluginsChanged),m.gotoSection(this.scope.viewModel,i,this.services.selection,this.services.explorationNavigation,this.services.formFactor.getCurrentLayout()))}},w.prototype.getErrorInfoCode=function(t){if(t){if(t.serviceError)return t.serviceError.errorCode?t.serviceError.errorCode:e.constants.modelFailedGenericServiceError;if(t.clientError)return t.clientError.code?t.clientError.code:e.constants.modelFailedGenericClientError}return e.constants.modelFailednoErrorInfo},w.prototype.setupConnection=function(e){if(!_.isEmpty(e.onPremModelConnectionString)){var t=this.services.dataSources.get();this.services.connectionSetupService.setup(t)}},w.prototype.onEnsureCustomViz=function(t,i){var o=this;if(this.services.telemetryService.logEvent(e.telemetry.EXEnableCustomViz,this.embedTypeDescription),this.services.resourceGateService.setResourceFlag(),this.services.resourcePackagesService.registerPackages(t),!i){var r=this.getVisualTypeUsageTable();t=_.filter(t,(function(e){return r[e.name]}))}this.services.visualPlugin.ensurePlugins(t).finally((function(){var t=o.scope.viewModel.sectionStatus.currentSectionNumber;o.services.eventBridge.publishToChannel(e.explore.services.events.visualPluginsChanged),m.gotoSection(o.scope.viewModel,t,o.services.selection,o.services.explorationNavigation,o.services.formFactor.getCurrentLayout())})),this.hideExplorationWarning("lastEnableCustomVizNotifyId"),this.hideExplorationWarning("lastErrorNotifyId")},w.prototype.getVisualTypeUsageTable=function(){for(var e=this.scope.viewModel.exploration.contract.sections,t={},i=0,o=e;i<o.length;i++)for(var r=o[i],a=r.visualContainers,n=0,s=a;n<s.length;n++){var c=s[n],l=c.config.singleVisual.visualType;t[l]=!0}return t},w.prototype.pauseQueriesChanged=function(e){var t=!this.scope.viewModeState.getConfig().pauseQueryExecution;this.scope.viewModeState.updateConfig((function(e){e.pauseQueryExecution=t})),t?this.services.dataProxy.stopCommunication(o.dsrDataReaderType):this.services.dataProxy.resumeCommunication(o.dsrDataReaderType),e.stopPropagation()},w.prototype.tryAddJsonFilters=function(t,i){var o=this;if(i&&_.isArray(i)){var r=this.services.dataSources.get();this.services.conceptualSchemaProxy.get(r).then((function(r){for(var a=e.explore.jsonFilter.createJSONFilterParser(o.services.promiseFactory),n=[],s=0,c=i;s<c.length;s++){var l=c[s],d=a.tryCreateFilterContainer(t,r,l);if(!d)return;n.push(d)}if(n&&n.length>0){t.filters=t.filters||[];for(var p=0,u=n;p<u.length;p++){var v=u[p];t.filters.push(v)}}}))}},w.prototype.addODataFilterFromQuery=function(t,i){if(i){var o=e.explore.odata.createODataFilterParser(),r=o.tryGetFilters(i);if(_.isEmpty(r))return;t.filters||(t.filters=[]);for(var a=0,n=r;a<n.length;a++){var s=n[a];t.filters.push(s)}var c=this.services.explorationCapabilities,l=c.getCapabilities();l.visualContainerOptions.disableQueryCacheUpdates=!0,this.services.explorationCapabilities.setCapabilities(l)}},w.prototype.setSectionStatus=function(e){this.scope.viewModel.sectionStatus.currentSectionNumber=e},w.prototype.setVisualTheme=function(e){this.scope.themeName=e},w.prototype.setDataSource=function(e){this.packageId=e.packageId;var t=this.scope.viewModel.exploration.contract,i=t.dataSources.withId(e.id);i||(i={type:o.dsrDataReaderType,id:e.id,name:void 0,dsr:{schemaName:void 0,vsName:e.vsName,dbName:e.dbName,modelId:e.id}},t.dataSources.push(i));var r=t.dataSources;this.services.dataSources.set(r)},w.prototype.showError=function(t,i,o){this.services.errorService.error(i,o,{requestId:t?t.requestId:void 0},!1,e.telemetry.ErrorSource.PowerBI)},w.prototype.clearExploration=function(){this.originalExploration=null,this.scope.viewModel.exploration=null,this.setSectionStatus(-1),this.services.dataSources.set(null),this.legacyReportExists=!1,this.services.eventBridge.publishToChannel(c.explorationUnloaded),this.scope.$broadcast(l)},w.prototype.showSaveMask=function(){this.scope.viewModel.showMask=!0},w.prototype.hideSaveMask=function(){this.scope.viewModel.showMask=!1},w.prototype.canWrite=function(e){return!this.services.permissionService.isActiveWorkspaceIsReadOnly&&e&&e.canWrite},w.prototype.canExplore=function(e,t){return!this.services.permissionService.isActiveWorkspaceIsReadOnly&&e&&e.contract&&(e.canExplore||this.canWrite(e))&&(t.getPermissions()&u.Write)===u.Write},w.prototype.canCopy=function(e){return!this.services.permissionService.isActiveWorkspaceIsReadOnly&&e&&e.canCopy},w.prototype.isReportFromPbix=function(e){return e&&e.contract&&e.contract.isFromPbix},w.prototype.onLoadPowerViewReport=function(t){var i=this;this.registerDirtyStateNavigationHandler(),this.services.rootScope.$emit(p,!1),t.report.objectId&&this.services.mostRecentlyUsedService.updateMRU(e.models.MRUArtifactType.Reports,t.report.objectId,t.report.displayName,t.report.getPermissions()),this.clearExploration(),this.addKeyHandler();var o=t.instantiationMode!==e.common.contracts.reportServer.ReportInstantiationMode.None;this.reportId=o?void 0:t.report.id,this.packageId=t.model.packageId,this.lastLoadedReport=t.report,this.legacyReportExists=!e.helpers.ReportUtility.IsReportSavedAsExploration(t.report.contract),this.scope.viewModel.displayName=o?void 0:t.report.contract.displayName,this.scope.viewModel.sectionStatus.isEditing=o,this.scope.viewModel.canEdit=this.canExplore(t.report,t.model),this.scope.viewModel.canCopy=this.canCopy(t.report),this.scope.viewModel.canWrite=this.canWrite(t.report),this.services.viewModeState.setMode(o?1:0),this.scope.viewModel.taskPane.isPaneExpanded=o,this.scope.viewModel.visualizationPane.isPaneExpanded=o,this.scope.viewModel.isNavPaneCollapsed=!o,this.scope.viewModel.datasetModel=t.model,this.scope.viewModel.reportPermission=t.report.getPermissions(),this.scope.viewModel.isReportFromPbix=this.isReportFromPbix(t.report);var r=this.scope.viewModel.datasetModel,a=this.services.packageService.findPackage(this.packageId);a&&(r.packagePublishStatus=a.publishOrRefreshStatus,r.contract.isPackageRefreshEnabled=a.contract.IsRefreshEnabled);var n=this.scope.viewModel.options;n.visualContainerOptions.disablePin=!this.scope.viewModel.canEdit,this.services.viewModeState.updateConfig((function(e){e.supportsExportData=!n.disableExport&&i.services.featureSwitchService.featureSwitches.exportDataEnabled})),this.initializeExploration(t.report.id,t.reportPage,t.report.activeSlideId,o,t.report.model,t.openExplorationTelemetryEvent,t.exploration,t.additionalODataFilter,t.additionalJsonFilters,t.report.objectId),this.services.selection.clearSelection(),this.services.undoRedo.setHandler(e.explore.util.ExploreUndoRedoHandlerUtility.createUndoRedoHandler(this.scope.viewModel,this.services.timeout,this.services.selection,this.services.drillToDetails,this.services.formFactor,this.services.explorationSerializer,this.services.explorationNavigation,this.services.linguisticSchemaProxy,this.services.eventBridge,this.services.visualPlugin)),this.services.clipboard.setHandler(e.explore.util.ExploreClipboardHandlerUtility.createClipboardHandler(this.scope.viewModel,this.services.explorationSerializer,this.services.selection,this.services.visualAuthoring,this.services.visualPlugin,this.services.filterGenerator,this.services.formFactor,this.services.visualStylePresetService))},w.prototype.showErrorNotification=function(e,t){if(t.code){var i=this.scope.viewModel.datasetModel;this.showErrorNotificationWithModel(t,i)}e.stopPropagation()},w.prototype.showErrorNotificationWithModel=function(e,t,i){var o=this;t.contract.creatorUser?this.notifyError(e,t,i):this.services.modelHttpService.getModel(t.id,t.packageId,this.services.telemetryService.root).then((function(r){r.data.creatorUser&&(t.contract.creatorUser=r.data.creatorUser,o.notifyError(e,t,i))}))},w.prototype.notifyError=function(e,t,i){var o=this;i||(i=function(){o.refresh()}),this.requiresGatewayInfo(e.code)?this.services.gatewaysMetadataService.getModelDataSources(t.id).then((function(r){var a=o.services.selectGatewayService.getSelectedGateway(r);o.notify(e,t,a,i)}),(function(r){o.notify(e,t,null,i)})):this.notify(e,t,null,i)},w.prototype.notify=function(e,t,i,o){var r=this.getErrorNotificationParameter(e,t,i,o);if(r){var a={notificationName:"lastErrorNotifyId",notificationId:this.services.notificationBar.notify(r)};this.addNotification(a)}},w.prototype.requiresGatewayInfo=function(t){return t===e.DM_GWPipeline_Client_GatewayUnreachable},w.prototype.getErrorNotificationParameter=function(t,i,o,r){var a=this,n=t.code,s=i.contract.creatorUser,c=s.emailAddress;c.match(e.common.controllers.EmailsList.emailValidator)||(c=s.AlternateEmailAddress);var l,d,p=c===e.session.UserInfoUtils.getUPN();switch(n){case e.DMTS_NoGatewayWithAllDatasourcesToBindError:var u=this.getServerName(t),v=this.getDatabaseName(t);l=this.services.localizationService.format("ExplorationContainer_Notification_DMTS_NoGatewayWithAllDatasourcesToBindError_Message",[u,v]),d={displayText:this.services.localizationService.get("ExplorationContainer_Notification_DMTS_NoGatewayWithAllDatasourcesToBindError_ActionText"),
urlString:e.models.learnMoreAboutEnterpriseGatewaysHelpLink};break;case e.DMTS_MultipleGatewaysWithAllDatasourcesToBindError:l=p?this.services.localizationService.get("ExplorationContainer_Notification_DMTS_MultipleGatewaysWithAllDatasourcesToBindError_Message"):this.services.localizationService.format("ExplorationContainer_Notification_DMTS_MultipleGatewaysWithAllDatasourcesToBindError_NotOwner_Message",[s.givenName]),d=p?{displayText:this.services.localizationService.get("ExplorationContainer_Notification_DMTS_MultipleGatewaysWithAllDatasourcesToBindError_ActionText"),action:function(){a.services.selectGatewayService.bindModelToGateway(i.id,(function(){r(),a.hideExplorationWarning("lastErrorNotifyId")}),(function(){a.services.errorService.error(a.services.localizationService.get("ExplorationContainer_FailedToBindToGatewayMessage"),"ExplorationContainer_FailedToBindToGateway")}),(function(){}))}}:{displayText:this.services.localizationService.format("ExplorationContainer_Notification_DMTS_MultipleGatewaysWithAllDatasourcesToBindError_NotOwner_ActionText",[s.givenName]),urlString:jsCommon.StringExtensions.format("mailto:{0}",c)};break;case e.DMTS_DatasourceHasNoCredentialError:l=p?this.services.localizationService.get("ExplorationContainer_Notification_CredentialsRequired_Message"):this.services.localizationService.get("ExplorationContainer_Notification_CredentialsRequired_NotOwner_Message"),d=p?{displayText:this.services.localizationService.get("ExplorationContainer_Notification_CredentialsRequired_ActionText"),action:function(){a.services.navigation.showSettingsSlider(e.models.SettingsGroupsType.Datasets,i.dbName)}}:{displayText:this.services.localizationService.get("ExplorationContainer_Notification_CredentialsRequired_NotOwner_ActionText"),urlString:jsCommon.StringExtensions.format("mailto:{0}",c)};break;case e.DM_GWPipeline_Client_GatewayUnreachable:if(p){var h=this.getContactInfo(o);l=h?this.services.localizationService.format("ExplorationContainer_Notification_DM_GWPipeline_Client_GatewayUnreachable_WithContactInfo",[h]):this.services.localizationService.get("ExplorationContainer_Notification_DM_GWPipeline_Client_GatewayUnreachable")}else l=this.services.localizationService.format("ExplorationContainer_Notification_DMTS_MultipleGatewaysWithAllDatasourcesToBindError_NotOwner_Message",[s.givenName]);d=p?{displayText:this.services.localizationService.get("ExplorationContainer_Notification_DMTS_MultipleGatewaysWithAllDatasourcesToBindError_ActionText"),action:function(){a.services.selectGatewayService.bindModelToGateway(i.id,(function(){r(),a.hideExplorationWarning("lastErrorNotifyId")}),(function(){a.services.errorService.error(a.services.localizationService.get("ExplorationContainer_FailedToBindToGatewayMessage"),"ExplorationContainer_FailedToBindToGateway")}),(function(){}))}}:{displayText:this.services.localizationService.format("ExplorationContainer_Notification_DMTS_MultipleGatewaysWithAllDatasourcesToBindError_NotOwner_ActionText",[s.givenName]),urlString:jsCommon.StringExtensions.format("mailto:{0}",c)};break;case e.DM_GWPipeline_Gateway_DataSourceConnectionError:l=p?this.services.localizationService.get("ExplorationContainer_Notification_DMTS_DatasourceConnectionError_Message"):this.services.localizationService.format("ExplorationContainer_Notification_DMTS_MultipleGatewaysWithAllDatasourcesToBindError_NotOwner_Message",[s.givenName]),d=null;break;case e.RS_CannotRetrieveModel:l=this.services.localizationService.get("DsrError_CanNotRetrieveModelMessage"),d=null;break;case e.RS_AccessDeniedDueToRLSGroup:l=this.services.localizationService.get("DsrError_NoPermissionDueToRLSGroupMessage"),d=null;break;case e.RS_AccessDenied:l=this.services.localizationService.get("DsrError_NoPermissionToViewMessage"),d=null;break;case e.DMTS_UserNotFoundInADGraphError:l=this.services.localizationService.format("ExplorationContainer_Notification_DMTS_UserNotFoundInADGraphError_Message",[s.givenName]),d=null;break;case e.DMTS_UserLostPermissionToDatasourceError:case e.DM_GWPipeline_Gateway_ImpersonationError:l=p?this.services.localizationService.get("ExplorationContainer_Notification_DMTS_UserLostPermissionToDatasourceError_Message"):this.services.localizationService.format("ExplorationContainer_Notification_DMTS_MultipleGatewaysWithAllDatasourcesToBindError_NotOwner_Message",[s.givenName]),d=p?{displayText:this.services.localizationService.get("ExplorationContainer_Notification_DMTS_UserLostPermissionToDatasourceError_ActionText"),action:function(){a.services.selectGatewayService.bindModelToGateway(i.id,(function(){a.refresh(),a.hideExplorationWarning("lastErrorNotifyId")}),(function(){a.services.errorService.error(a.services.localizationService.get("ExplorationContainer_FailedToBindToGatewayMessage"),"ExplorationContainer_FailedToBindToGateway")}),(function(){}))}}:{displayText:this.services.localizationService.format("ExplorationContainer_Notification_DMTS_MultipleGatewaysWithAllDatasourcesToBindError_NotOwner_ActionText",[s.givenName]),urlString:jsCommon.StringExtensions.format("mailto:{0}",c)};break;case e.DM_GWPipeline_Gateway_DataSourceAccessError:l=p?this.services.localizationService.get("ExplorationContainer_Notification_DMTS_DatasourceAccessError_Message"):this.services.localizationService.format("ExplorationContainer_Notification_DMTS_MultipleGatewaysWithAllDatasourcesToBindError_NotOwner_Message",[s.givenName]),d=null;break;case e.DM_GWPipeline_Gateway_InvalidMashupConnectionString:case e.DM_GWPipeline_Gateway_DatabaseLoginError:case e.DM_GWPipeline_Gateway_SqlTimeoutException:case e.DM_GWPipeline_Gateway_AdomdTimeoutException:case e.DM_GWPipeline_Gateway_InvalidObjectNameException:case e.DM_GWPipeline_Gateway_ConnectionBrokenException:case e.DM_GWPipeline_Gateway_MemoryError:case e.DM_GWPipeline_Gateway_MissingStructureError:case e.DM_GWPipeline_Gateway_UnprocessedStructureError:case e.DM_GWPipeline_Gateway_ModelLoadError:case e.DM_GWPipeline_Gateway_CancellationError:case e.DM_GWPipeline_Gateway_QueryExecutionError:case e.DM_GWPipeline_Gateway_RecalculationRequiredError:case e.DM_GWPipeline_Gateway_AdomdConnectError:case e.DM_GWPipeline_Gateway_MashupDataAccessError:default:l=this.services.localizationService.get(e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+n),d=null}if(l)return{message:l,notificationType:e.common.NotificationBarType.Error,secondaryLink:d}},w.prototype.getContactInfo=function(t){if(t){var i=e.settings.models.GatewayModelConverter.getGatewayAnnotation(t);if(i){var o=i.gatewayContactInformation,r="";if(o)for(var a=0,n=0,s=o;n<s.length;n++){var c=s[n];r+=c,a<o.length-1&&(r+="; "),a++}return r}}return""},w.prototype.getServerName=function(e){if(e["pbi.error"]){var t=e["pbi.error"].details;if(t&&t.length>0)return t[0].detail.value}return""},w.prototype.getDatabaseName=function(e){if(e["pbi.error"]){var t=e["pbi.error"].details;if(t&&t.length>1)return t[1].detail.value}return""},w.prototype.sendTelemetryForCapabilities=function(t){t.featureUsage&&(t.featureUsage.hasVisualRelationships&&this.services.telemetryService.logEvent(e.telemetry.EXSavedExplorationWithVisualRelationships),t.featureUsage.hasShowAllEnabled&&this.services.telemetryService.logEvent(e.telemetry.EXSavedExplorationWithShowAllEnabled))},w.prototype.onRefreshReportData=function(){var t=n.referenced(this.services.dataSources.get(),null);t&&(this.services.dataProxy.clearCache(o.dsrDataReaderType,t),this.services.eventBridge.publishToChannel(e.explore.services.events.visualContainerChanged,{affectContainer:function(){return!0}}))},w})(e.common.controllers.ExplorationContainerBaseController);t.ExplorationContainerController=w})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){this.scope=e,this.services=t}return e})();e.FavoritesContainerController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.explore.services.createVisualQueryGenerator,o=e.explore.viewModels,r=e.common.NotificationToastType,a=e.common.contracts.Permissions,n=e.explore.ScopeUtils,s=e.dataServices.models.TileFactory,c=e.dataServices.contracts.TileType,l=(function(){function t(t,r){var a=this;this.scope=t,this.services=r;var s=this.initializeSection("InFocusSection","InFocusSection");t.viewModel=e.models.inFocusViewModelFactory.createInFocus(s,r.filterGenerator,this.services.formFactor.getCurrentLayout()),t.hide=function(){return a.exitAndHide()},t.updateTile=function(e){return a.updateTile(e)},t.openReport=function(){return a.openReport()},n.defineDataSourcesOnScopeLegacy(this.scope,this.services.dataSources);var c=e.explore.contracts.createDataSourceArray();this.services.dataSources.set(c);var l=this.services.featureSwitchService;t.pinVisual=function(){return a.pinVisual()},t.getRelatedInsights=function(){return a.getRelatedInsights(e.telemetry.InsightEntryPoint.InFocusMode)},t.logInsightFeedback=function(e){return a.logInsightFeedback(e)},t.qrCode=function(){return a.qrCode()},t.viewModeState=this.services.viewModeState,t.editVisual=function(){return a.toggleViewMode(!1)},t.saveVisual=function(){return a.updateInFocusTile()},t.showRefreshErrorDetails=function(){return a.showRefreshErrorDetails()},t.inFocusEditEnabled=l.featureSwitches.inFocusEditEnabled,t.inFocusMenuItems=e.models.inFocusViewModelFactory.createInFocusMenuItems(this.services.localizationService,this.scope.canExport),t.inFocusMenuItemSelected=function(e){return a.onInFocusMenuItemSelected(e)},t.showPreviousVisual=function(){return a.showPreviousVisual()};var d=o.createFieldListViewModelFactory(o.createFieldListMenuItemFactory(this.services.localizationService,l),o.createFieldListPropertyTemplateGenerator(),this.services.localizationService,l);this.scope.fieldListConfig={viewModelFactory:d,alwaysHasActiveItem:!0},this.sortService=e.explore.services.createSortService(this.services.displayNameService,l,this.services.visualPlugin),this.dataProxy=this.services.singleExecutableDataProxyFactory.create(),this.visualQueryGenerator=i({dataReaders:this.services.dataReaderProvider,displayNameService:this.services.displayNameService,plugin:this.services.visualPlugin,sortService:this.sortService,featureSwitchService:l,aggrOps:this.services.aggrOps,filterGenerator:this.services.filterGenerator,transformPluginService:e.data.transforms.createTransformPluginService(),telemetryService:this.services.telemetryService}),this.services.undoRedo.setHandler({rollback:function(){},takeSnapshot:function(){return null}});var p=this.scope.$on(e.common.constants.navigation.stateChangeSuccess,(function(e,t,i,o,r){return a.handleStateChangeSuccess(e,t,i,o,r)})),u=this.services.rootScope.$on(e.constants.openInFocusTileActionName,(function(e,t){return a.onOpenTile(e,t)})),v=this.services.rootScope.$on(e.constants.openInFocusWorkbookTileActionName,(function(e,t){return a.onOpenWorkbookTile(e,t)})),h=this.services.rootScope.$on(e.constants.openInFocusRealTimeTileActionName,(function(e,t){return a.onOpenRealTimeTile(e,t)})),g=this.scope.$on(e.insights.constants.insightSelectedEvent,(function(e,t){return a.onInsightSelected(e,t)})),m=this.scope.$on(e.insights.constants.insightClosePaneEvent,(function(e){return a.onInsightClosePane()})),f=this.scope.$on(e.insights.constants.insightsOnSelectionEvent,(function(t){return a.getRelatedInsights(e.telemetry.InsightEntryPoint.InFocusMode)}));this.scope.$on("$destroy",(function(){p(),u(),v(),g(),m(),f(),h()})),t.viewModeState.setMode(0),this.visualAuthoringCore=e.explore.services.createVisualAuthoringCore(this.services.visualPlugin,this.services.geoTaggingAnalyzerService,this.services.aggrOps,l.featureSwitches),this.services.pinVisual.setHandler({pinVisual:function(e){a.pinVisualHandler(e)}})}return t.createOptions=function(){return{scopedServiceRoot:!0,scopedDependencies:["dataSources","eventBridge","filterGenerator","viewModeState","undoRedo","selection","pinVisual","visualPlugin","explorationNavigation","explorationCapabilities","exportData","hostFiltersService","formFactor"],additionalServices:["aggrOps","conceptualSchemaProxy","inFocusService","dashboardHttpService","dashboardDataService","singleExecutableDataProxyFactory","dataReaderProvider","modelMerger","displayNameService","dashboardService","featureSwitchService","geoTaggingAnalyzerService","localizationService","modelService","packageService","notificationToast","reportService","explorationProxy","modelConverter","telemetryService","errorService","qrCodeService","groupService","insightsService","navigation","$timeout"]}},t.prototype.toggleViewMode=function(t){var i=this.scope.viewModel;if(t)this.scope.$emit(e.constants.inFocusExitEvent),i.editVisualText=this.services.localizationService.get("InFocus_Edit"),i.taskPane.isPaneExpanded=!1,i.visualizationPane.isPaneExpanded=!1,this.services.viewModeState.setMode(0);else{var o=this.services.viewModeState.getMode();this.services.viewModeState.setMode(0===o?1:0),1===this.services.viewModeState.getMode()?(i.taskPane.isPaneExpanded=!0,i.visualizationPane.isPaneExpanded=!0,i.editVisualText=this.services.localizationService.get("InFocus_Exit_Edit")):(i.editVisualText=this.services.localizationService.get("InFocus_Edit"),i.taskPane.isPaneExpanded=!1,i.visualizationPane.isPaneExpanded=!1)}},t.prototype.updateInFocusTile=function(){var t=this,i=this.scope.viewModel.canvas.visual.visualContainer,o=this.services.dataSources.get(),r=i.readOnlyState.visual.type,a=i.themeName;this.services.conceptualSchemaProxy.get(o).then((function(n){var s,c=r===e.visuals.plugins.image.name?e.common.contracts.TileLayoutType.Full:e.common.contracts.TileLayoutType.Default,l=i.hostServices.getFilters(t.services.filterGenerator,n),d=i.contract.config.singleVisual,p=t.visualQueryGenerator.execute({config:d,dataSources:o,schema:n,additionalFilters:l});p?t.dataProxy.execute(p.options).then((function(e){s=t.services.pinVisual.getPinData(r,d,c,l,e,p,a,n),t.updateTileInServer(s)}),(function(){})):(s=t.services.pinVisual.getPinData(r,d,c,null,null,null,a,null),t.updateTileInServer(s))}))},t.prototype.updateTileInServer=function(t){var i,o=this;this.tileContractCurrent=s.createTileForPinData(this.services.visualPlugin,t,null,i);var r=this.services.telemetryService.startEvent(e.telemetry.InFocusModeSaveTileProperties,this.tileContractCurrent.config!==this.tileContractOriginal.config||this.tileContractCurrent.query!==this.tileContractOriginal.query);this.services.dashboardHttpService.updateTile(this.services.inFocusService.inFocusTile.contract,this.tileContractCurrent,r.event).then((function(){o.updateTileInDashboard()}),(function(e){o.updateTileFailed()}))},t.prototype.updateTileFailed=function(){this.notifyForSave("InFocus_UpdateTile_Error",r.Error,"InFocus_UpdateTile_Error_DefaultDetails")},t.prototype.updateTileInDashboard=function(){var e=this.services.inFocusService.inFocusTile.contract;e.config=this.tileContractCurrent.config,e.query=this.tileContractCurrent.query,e.tileData=this.tileContractCurrent.tileData,e.tileDataSet=this.tileContractCurrent.tileDataSet,e.$config=null,this.services.modelMerger.mergeTile(this.services.inFocusService.inFocusTile,e,this.services.modelService.getModelContracts(),this.services.reportService.getReportContracts()),this.notifyForSave("InFocus_UpdateTile_Success",r.Success,"InFocus_UpdateTile_Success_DefaultDetails")},t.prototype.notifyForSave=function(e,t,i){var o=this;this.services.localizationService.ensureLocalization((function(){o.services.notificationToast.notify({title:o.services.localizationService.get(e),message:o.services.localizationService.get(i),notificationType:t})}))},t.prototype.onInsightClosePane=function(){this.scope.viewModel.showInsightsPane=!1},t.prototype.onInsightSelected=function(t,i){var o=this;i.rerunInsights||(this.scope.viewModel.showPreviousVisualButton=!0),this.services.insightsService.getPinDataForInsight(i.model,i.insightContainerModel,(function(t){var r={entryPoint:i.rerunInsights?e.telemetry.InsightEntryPoint.InsightsPaneTile:e.telemetry.InsightEntryPoint.InFocusMode,insightContainerModel:i.insightContainerModel,showInsightsEvent:i.showInsightsEvent,canPin:o.scope.viewModel.openInsightArgs?o.scope.viewModel.openInsightArgs.canPin:o.scope.canEdit};o.services.rootScope.$emit(e.insights.constants.viewInsightInFocus,t,r,i.rerunInsights)}))},t.prototype.showPreviousVisual=function(){this.services.inFocusService.inFocusTile=this.originalTile,this.generateVisual(this.originalViewTileArgs),this.scope.viewModel.showPreviousVisualButton=!1,this.scope.$broadcast(e.insights.constants.clearInsightSelectionEvent)},t.prototype.onOpenTile=function(t,i){var o=this;t.stopPropagation(),this.currentViewTileArgs=i,i.openInsightArgs&&i.openInsightArgs.entryPoint===e.telemetry.InsightEntryPoint.InFocusMode?this.scope.$applyAsync((function(){o.scope.showInFocusMode=!0,o.generateVisual(i)})):this.scope.performTransitionAnimation(this.services.inFocusService.inFocusTile.id).then((function(){o.scope.$applyAsync((function(){o.scope.showInFocusMode=!0,o.generateVisual(i)}))}))},t.prototype.onOpenWorkbookTile=function(t,i){t.stopPropagation(),this.scope.relatedInsightsEnabled=!1;var o=i.workbook,r=this.services.inFocusService.inFocusTile;this.services.telemetryService.logEvent(e.telemetry.DashboardInFocusWorkbook,r.contract.id,o.contract.workbookId,o.contract.packageId),this.setExportableState(r),this.scope.showInFocusMode=!0,this.scope.viewModel.inFocusTile=r,this.scope.viewModel.workbook=o,this.scope.viewModel.displayText=o.displayText,this.scope.viewModel.subDisplayText=o.subDisplayText;var a=this.services.dashboardDataService.activeDashboard;this.scope.viewModel.dashboardText=this.services.localizationService.format("InFocus_ToDashboard",[a.displayName])},t.prototype.onOpenRealTimeTile=function(t,i){var o=this;t.stopPropagation(),this.scope.relatedInsightsEnabled=!1;var r=this.services.modelConverter.convertTile(i.contract);this.scope.viewModel.realTime=r.realTime,this.setExportableState(r),this.scope.viewModel.inFocusTile=r,this.scope.viewModel.displayText=r.displayText,this.scope.viewModel.subDisplayText=r.subDisplayText;var a=this.services.dashboardDataService.activeDashboard;this.scope.viewModel.dashboardText=this.services.localizationService.format("InFocus_ToDashboard",[a.displayName]),this.scope.performTransitionAnimation(this.services.inFocusService.inFocusTile.id).then((function(){o.scope.showInFocusMode=!0,o.scope.$applyAsync((function(){o.scope.$emit(e.constants.inFocusEnterEvent),o.scope.clearTransitionAnimation(),o.scope.handleResize()}))}))},t.prototype.generateVisual=function(i){var o=this,r=this.scope.viewModel;r.inFocusTile=this.services.inFocusService.inFocusTile,this.setDataSource(r.inFocusTile),this.updateTile(r.inFocusTile,i.openInsightArgs),this.tileContractOriginal=r.inFocusTile.contract;var a=r.inFocusTile.config.visual.themeName,n=r.inFocusTile.config.visual.stylePresetName,s=this.services.telemetryService.startEvent(e.telemetry.DashboardInFocusModeSelected,c[this.services.inFocusService.inFocusTile.composite.visual.type]);this.scope.openInFocusEvent||(this.scope.openInFocusEvent=s.event),this.scope.clearTransitionAnimation().then((function(){o.services.visualPlugin.loadPluginByNameIfAny(o.services.inFocusService.inFocusTile.composite.visual.type),e.explore.infonav.viewModels.ViewModelFactory.createVisualDataFromTileData(i.visualTile,o.services.conceptualSchemaProxy,o.scope.dataSources,r,o.visualAuthoringCore).then((function(r){if(null==r){var c={errorCode:"visual is not correctly generated"};return s.reject(c),void(s=null)}var l=o.scope.viewModel.canvas,d=o.initializeSection("fakeSection","fakeSection"),p=l.exploration.exploreCanvas;p.contract=d,p.preventSelectionClearing=!0,r.visualContainer.config.singleVisual.stylePresetName=n,o.scope.themeName=a,r.visualContainer.layouts.withId(0).position={x:0,y:0,width:d.size.width,height:d.size.height};var u=e.explore.viewModels.ViewModelFactory.convertVisualContainer(o.scope.viewModel.canvas.exploration.contract,o.scope.viewModel.canvas.exploration.sections[0].contract,r.visualContainer,0);if(!o.validateDrillableVisual(u)){var c={errorCode:"drillable visual in inFocus mode isn't correctly generated"};s.reject(c),s=null,o.scope.inFocusDrillableError=!0,o.setErrorMessage()}u.disableResize=!0;var v=o.tileContractOriginal.tileDataSet;t.containsRestartToken(v)||(u.dataViewSource=v),u.contract.config.singleVisual.title={show:!1};var h=o.services.modelConverter.convertModel(r.model);e.explore.services.selectionUtils.selectVisualContainer(u.contract,o.services.selection),l.visual.visualContainer=u,l.visual.model=h,p.visualContainers[0]=u,p.visualContainers[0].options=o.services.explorationCapabilities.getCapabilities().visualContainerOptions;var g=l.exploration.contract.sections[0].visualContainers;g||(g=[]),g.push(u.contract);var m={showAppBar:!0,showTaskPane:!0,showVisualizationPane:!0,showNavContentPane:!0,visualContainerOptions:{showMenu:!1,showPin:!1,showContextMenu:!1,disablePin:!0,hideHeader:!0},showBackButtonOnAppBar:!1};o.services.explorationCapabilities.setCapabilities(m),o.scope.viewModel.showVisualEnabled=!0,o.scope.$emit(e.constants.inFocusEnterEvent),i.runScopedInsights&&(o.services.$timeout((function(){var t=e.telemetry.InsightEntryPoint.DashboardTile;i.openInsightArgs&&i.openInsightArgs.entryPoint&&(t=i.openInsightArgs.entryPoint),o.getRelatedInsights(t)})),i.runScopedInsights=!1),null!=s&&s.resolve()}))}))},t.prototype.setErrorMessage=function(){var e=this.services.localizationService;this.scope.errorMessageConfig={canEdit:this.scope.canEdit,mode:!0,titleShared:e.get("InFocusEMHeader"),titleNonShared:e.get("InFocusEMHeader"),contentShared:e.get("InFocusEMContentShared"),contentNonShared:e.get("InFocusEMContentNonShared"),contact:e.get("InFocusEMContentSharedContact")}},t.prototype.validateDrillableVisual=function(t){var i=this.services.visualPlugin.capabilities(t.contract.config.singleVisual.visualType),o=e.explore.util.DrillUtils.getDrillableRoles(i);if(o.length>0)for(var r=t.contract.config.singleVisual.query.projections,a=0,n=o;a<n.length;a++){var s=n[a],c=r[s];if(!_.isEmpty(c)&&c.all().length>1&&_.isEmpty(c.activeProjectionRefs))return!1}return!0},t.prototype.setDataSource=function(e){this.scope.dataSources[0]=t.createDataSource(e)},t.createDataSource=function(e){return{type:"dsr",id:e.contract.modelId,name:void 0,dsr:{schemaName:void 0,vsName:e.vsName,dbName:e.dbName,modelId:e.contract.modelId}}},t.prototype.initializeSection=function(e,i){var o={name:e,displayName:i,size:t.getDefaultSize(),visualContainers:[],filters:[]};return this.services.explorationNavigation.goto(o,!1),o},t.getDefaultSize=function(){return{displayOption:0,width:e.explore.constants.ExploreCanvasConstants.DefaultCanvasWidth,height:e.explore.constants.ExploreCanvasConstants.DefaultCanvasHeight}},t.prototype.exitAndHide=function(){var e=this.services.dashboardDataService.activeDashboard;e&&!this.services.navigation.inInsightsView()&&this.services.navigation.navigateToDashboardByGUID(e.objectId),this.hide()},t.prototype.hide=function(){this.scope.showInFocusMode=!1,this.scope.viewModel.showInsightsPane=!1,this.scope.viewModel.showPreviousVisualButton=!1,this.scope.viewModel.inFocusTile=null,this.scope.viewModel.canvas.visual.visualContainer=null,this.scope.viewModel.canvas.exploration.exploreCanvas.visualContainers=jsCommon.ArrayExtensions.createWithId(),this.toggleViewMode(!0),this.scope.inFocusDrillableError=!1,this.services.inFocusService.exit()},t.prototype.updateTile=function(t,i){this.services.filterGenerator.clearCrossHighlight(this.scope.viewModel.canvas.exploration.contract.sections[0]);var o=this.scope.viewModel;if(o.inFocusTile=t,o.openInsightArgs=i,o.inFocusTile){o.displayText=t.getDisplayText(),o.subDisplayText=t.getSubDisplayText();var r=o.inFocusTile;o.source=null!=r.report?this.services.localizationService.format("InFocus_SourceReport",[r.report.displayName]):this.services.localizationService.format("InFocus_SourceQna",[r.utterance]);var n=this.services.dashboardDataService.activeDashboard;this.setExportableState(r),i?i.entryPoint!==e.telemetry.InsightEntryPoint.InFocusMode&&(this.scope.viewModel.dashboardText=this.services.localizationService.format("InFocus_ToDashboard",[r.contractsModel.displayName])):this.scope.viewModel.dashboardText=null!=n?this.services.localizationService.format("InFocus_ToDashboard",[n.displayName]):this.services.localizationService.get("InFocus_DefaultDashboard"),o.pinVisualText=this.services.localizationService.get("PinVisual_ToolTip"),o.editVisualText=this.services.localizationService.get("InFocus_Edit"),o.saveVisualText=this.services.localizationService.get("ReportAppBar_SaveToDashboard"),o.getRelatedInsightsText=this.services.localizationService.get("Insights_GetRelatedInsights");var s=r.contract;r.setDatasetModelAndPackageInfo(this.services.modelService.findModel(s.modelId,s.packageId),this.services.packageService.findPackage(s.packageId)),this.scope.relatedInsightsEnabled=r.datasetModel.contract.insightsSupported&&!r.datasetModel.isHidden&&(r.datasetModel.getPermissions()&a.Read)===a.Read&&!r.workbook}},t.prototype.handleStateChangeSuccess=function(e,t,i,o,r){var a=this.services.navigation.inInFocusView(),n=this.services.navigation.inInFocusInsightsView(),s=!a&&!n;s&&this.hide()},t.prototype.openReport=function(){this.services.rootScope.$emit(e.constants.openTileEventName,this.services.inFocusService.inFocusTile)},t.prototype.getRelatedInsights=function(t){this.originalTile=this.scope.viewModel.inFocusTile,this.originalViewTileArgs=this.currentViewTileArgs,this.scope.viewModel.showPreviousVisualButton=!1,this.services.insightsService.setScopedInsightsSource(t),this.scope.viewModel.showInsightsPane?this.scope.$broadcast(e.insights.constants.getRelatedInsightsEvent):this.scope.viewModel.showInsightsPane=!0},t.prototype.logInsightFeedback=function(t){var i=this.scope.viewModel.openInsightArgs.showInsightsEvent,o=this.scope.viewModel.canvas.visual.visualContainer.contract;if(i&&o){var a=this.services.insightsService.getFiltersFromQuery(o),n=this.services.insightsService.getFiltersFromHighlights(o.config.singleVisual.objects),s=this.services.insightsService.getNumberOfColumns(o);this.services.telemetryService.logChildEvent(i,e.telemetry.InsightsFeedback,t?e.telemetry.InsightFeedback.Yes:e.telemetry.InsightFeedback.No,a.length,n.length,s,this.scope.viewModel.openInsightArgs.insightContainerModel.source),this.services.notificationToast.notify({notificationType:r.Success,title:this.services.localizationService.get("Insights_FeedbackToastTitle"),message:this.services.localizationService.get("Insights_FeedbackToastMessage")})}},t.prototype.pinVisual=function(){var t=this,i=this.scope.viewModel,o=this.services.dataSources.get(),r=i.canvas.visual.visualContainer,a=r.contract.config.singleVisual.visualType;if(this.services.conceptualSchemaProxy.get(o).then((function(e){var i=r.hostServices.getFilters(t.services.filterGenerator,e);t.services.pinVisual.pinVisualContainer(o,r.contract,a,i,r.themeName)})),i.openInsightArgs){var n=i.openInsightArgs.insightContainerModel,s=e.insights.contracts.InsightType[n.contract.insight.Type];this.services.telemetryService.logChildEvent(i.openInsightArgs.showInsightsEvent,e.telemetry.InsightsPinInsight,n.contract.id,a,s,e.telemetry.PinInsightEntryPoint.InFocusMode,i.openInsightArgs.insightContainerModel.source,i.openInsightArgs.entryPoint===e.telemetry.InsightEntryPoint.InFocusMode?n.contract.relevance.Score:null)}},t.prototype.pinVisualHandler=function(t){if(t){var i=this.scope.viewModel,o=i.inFocusTile.contract;t.reportId=o.reportId,this.scope.dataSources.length>0&&(t.modelId=this.scope.dataSources[0].id,t.packageId=o.packageId);var r=this.scope.viewModel.inFocusTile;t.action=r.action,r.utterance&&(t.utterance=r.utterance),this.services.rootScope.$emit(e.explore.constants.pinVisualContainerEventName,t)}},t.prototype.showRefreshErrorDetails=function(){var e=this;this.services.localizationService.ensureLocalization((function(){e.services.errorService.error(e.services.localizationService.get("TileEditor_InFocusDatasetRefreshErrorMessage"),"InFocus_DatasetRefreshError",{title:e.services.localizationService.get("TileEditor_InFocusDatasetRefreshErrorTitle")})}))},t.prototype.onInFocusMenuItemSelected=function(e){switch(e.action){case 0:this.qrCode();break;case 1:this.exportData()}},t.prototype.qrCode=function(){this.services.qrCodeService.showDialogForTile(this.scope.$parent,this.services.inFocusService.inFocusTile,this.services.dashboardDataService.activeDashboard.contract,this.services.groupService.activeGroupObjectId,this.services.navigation.currentAppGUID)},t.prototype.exportData=function(){var e=this.scope.viewModel;this.services.exportData.exportTileDataToCsv(e.inFocusTile)},t.containsRestartToken=function(t){if(!t)return!1;var i;try{i=e.data.dsr.read(31,t.data)}catch(e){return!1}var o=i&&i.restartToken;return null!=o},t.prototype.setExportableState=function(t){var i=!1,o=this.services.exportData;o&&(i=o.canExportTileData(t)),this.scope.canExport=i,this.scope.inFocusMenuItems=e.models.inFocusViewModelFactory.createInFocusMenuItems(this.services.localizationService,i)},t})();t.InFocusController=l})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){var i=(function(){function t(t,i){var o=this;this.scope=t,this.services=i;var r=t.$watch((function(){return o.services.modelService.models.length}),(function(){o.services.modelService.models.length>0&&(r(),o.updateViewModel())})),a=this.scope.$on(e.common.constants.navigation.stateChangeSuccess,(function(e){e.stopPropagation(),o.updateViewModel()}));this.scope.$on("$destroy",(function(){a()}))}return t.createOptions=function(){return{additionalServices:["modelService","navigation","telemetryService"]}},t.prototype.updateViewModel=function(){var t=e.telemetry.InsightEntryPoint.DirectNavigation;if(this.services.navigation.insightsSource){switch(this.services.navigation.insightsSource){case e.insights.constants.insightsSourceDesktop:t=e.telemetry.InsightEntryPoint.Desktop;break;case e.insights.constants.insightsSourceNavigationPane:t=e.telemetry.InsightEntryPoint.NavigationPane;break;case e.insights.constants.insightsSourceToast:t=e.telemetry.InsightEntryPoint.Notification}this.services.navigation.resetInsightsSource()}var i=this.services.modelService.findModelByDBName(this.services.navigation.insightsDataGUID).contract,o=e.insights.models.ViewModelFactory.createInsightCanvasModel({model:i});o.entryPoint=t,this.scope.viewModel=new e.models.insights.InsightsModel,this.scope.viewModel.insightsCanvasModel=o},t})();t.InsightsController=i})(i=t.insights||(t.insights={}))})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.models.CollapsiblePaneExpandedWidth,o=e.common.constants,r=e.dataServices.constants,a=e.services.FullScreenFitStyle,n=e.common.contracts.Permissions,s=e.telemetry.PinTileSource,c=e.common.constants.TaskPaneCollapsiblePaneMode,l=e.common.constants.TaskPaneSlider,d=e.dataServices.models.TileFactory,p=(function(){function t(t,n){var s=this;this.scope=t,this.services=n,this.scope.inAppsView=function(){return s.services.navigation.inAppsDetailView()},this.scope.inAppView=function(){return s.services.navigation.inAppView()},this.scope.inFavoritesView=function(){return n.navigation.inFavoritesView()},this.scope.inContentListView=function(){return n.navigation.inContentListView()},this.scope.inDashboardView=function(){return n.navigation.inDashboardView()},this.scope.inGroupWelcomeView=function(){return n.navigation.inGroupWelcomeView()},this.scope.inReportView=function(){return n.navigation.inReportView()||n.navigation.inDatasetView()},this.scope.inDatasetView=function(){return n.navigation.inManageDatasetView()||n.navigation.inManageStreamingDatasetView()},this.scope.inWorkbookView=function(){return n.navigation.inWorkbookView()},this.scope.inDashboardSliderView=function(){
return n.navigation.inFullPageSliderView()},this.scope.inQnaModelView=function(){return n.navigation.inQnaModelView()},this.scope.inQnaView=function(){return n.navigation.inQnaView()},this.scope.hideTaskPaneSliderOnClick=function(){return s.hideTaskPaneSliderOnClick()},this.scope.dashboardDataService=n.dashboardDataService,this.scope.navigation=n.navigation,this.scope.groupService=n.groupService,this.scope.fullScreen=n.fullScreen,this.scope.impersonation=n.impersonationService,this.scope.permissionService=n.permissionService,this.scope.showLoadingForDashboard=function(){return s.showLoadingForDashboard()},this.scope.quitImpersonation=function(){return s.quitImpersonation()},this.scope.exitFullScreen=function(){n.fullScreen.fullScreenMode=!1,n.fullScreen.fitStyle=a.None};var d=n.telemetryService.startPerfEventDeprecated(this.scope,e.telemetry.AppInitialAppLoad,n.navigation.stateService.current.name,void 0);d.event.id=window.initialAppLoadActivityId||d.event.id,n.userActivityContextService.pushParentContext(d.event),initializeContainerStartTime&&initializeContainerStartTime.getTime&&d&&d.event&&d.event.time&&(d.event.time=initializeContainerStartTime.getTime()),this.initializeContainer(d),this.scope.$watch("inDashboardView() || inDashboardSliderView()",(function(e){return s.scope.isDashboardLandingContainerActive=!!e})),n.rootScope.$on(e.constants.dashboardUnfavorited,(function(e,t){s.scope.favorites=t})),n.rootScope.$on(e.constants.updateFavorites,(function(){n.favorites.getFavorites(!0).then((function(e){s.scope.favorites=e}))})),this.scope.$watch("inFavoritesView()",(function(e){return s.scope.isFavoritesActive=!!e,s.scope.isFavoritesActive&&n.favorites.getFavorites(!0).then((function(e){s.scope.favorites=e})),s.scope.isFavoritesActive})),this.scope.$watch("inContentListView()",(function(e){return s.scope.isContentListActive=!!e,s.scope.isContentListActive})),this.scope.contentListEnabled=function(){return s.scope.conceptualModelEnabled()},this.scope.favoritesEnabled=n.featureSwitchService.featureSwitches.favoritesEnabled,this.scope.newQnaEnabled=!n.rtl.isRtlLayout,this.scope.conceptualModelEnabled=function(){return n.featureSwitchService.featureSwitches.conceptualModelEnabled||n.featureSwitchService.featureSwitches.previewConceptualModel&&s.services.tutorialDataStore.hasKey(o.previewConceptualModelNewKey)},n.rootScope.$on(e.constants.personalizeEventName,(function(e,t){s.onPersonalizePackage(e,t)})),this.scope.$on(o.onReportPersonalizedEventName,(function(e,t){s.onPersonalizeReport(e,t)})),n.rootScope.$on(o.pinReportPageToDashboard,(function(e,t){s.pinReportPage(t)})),this.scope.$on(r.workbook.bindToExcelWorkbookEventName,(function(e,t){return s.onBindToExcelWorkbook(e,t)}));var p,u=this.scope.$on(o.navigation.stateChangeSuccess,(function(e,t,i,o,r){return s.handleStateChange(t,i,o,r)}));e.explore&&(p=n.rootScope.$on(e.explore.constants.pinVisualContainerEventName,(function(e,t){return s.pinVisual(t)})));var v,h,g;e.insights&&(h=n.rootScope.$on(e.insights.constants.pinInsightContainer,(function(e,t){return s.pinVisual(t)})),v=n.rootScope.$on(e.insights.constants.viewInsightInFocus,(function(e,t,i,o){return s.showVisualInFocus(t,i,o)})),g=n.rootScope.$on(e.insights.constants.insightsLoadedEventName,(function(e,t,i){return s.showInsightsLoadedNotification(t,i)})));var m=n.rootScope.$on(o.currentActiveReportInfoChangedEventName,(function(e,t){return s.updateCurrentReportInfo(e,t)})),f=this.scope.$on(e.constants.showTileEditorEventName,(function(t,o){t&&t.stopPropagation(),n.dashboardService.selectDashboardTile(o),s.scope.$emit(e.constants.showTaskPaneSlider,c.TileEditor,i.Large)})),y=this.scope.$on(e.constants.hideTileEditorEventName,(function(t){t&&t.stopPropagation(),n.dashboardService.clearSelectedDashboardTile(),s.scope.$emit(e.constants.hideTaskPaneSlider)})),b=this.scope.$on(e.settings.constants.showGatewayUserMappingPaneEventName,(function(){s.scope.$emit(e.constants.showTaskPaneSlider,c.UpnMappingPane,i.Large)})),S=this.scope.$on(e.settings.constants.hideGatewayUserMappingPaneEventName,(function(){s.scope.$emit(e.constants.hideTaskPaneSlider)})),w=this.scope.$on(l.ShowShareDashboardPaneEventName,(function(t){t&&t.stopPropagation(),s.scope.$emit(e.constants.showTaskPaneSlider,c.SharingPane,i.Large)}));n.featureSwitchService.featureSwitches.userNotificationsEnabled&&(this.scope.hideNotificationPaneOnClick=function(){return s.hideNotificationPaneOnClick()},this.scope.$watch((function(){return n.userNotificationInfo.showPane}),(function(e){s.scope.$applyAsync((function(){s.handleNotificationPane(e)}))})),n.appMetadataService.getAppMetadata().then((function(e){e&&e.userMetadata&&n.syncService.monitorUserChanges(e.userMetadata.version,e.userMetadata.tenantMetadata?e.userMetadata.tenantMetadata.version:null,e.userMetadata.groups?e.userMetadata.groups:[])}))),this.contentProviders=n.contentProviderHttpService.getBuiltInContentProviders(),this.scope.$on("$destroy",(function(){p&&p(),v&&v(),h&&h(),m&&m(),u&&u(),f(),y(),b(),S(),w()})),this.isNavigationPaneExpanded=!0,n.bootstrapService&&n.bootstrapService.bootstrap(),n.tutorialDataStore.onReady((function(){if(n.featureSwitchService.featureSwitches.previewConceptualModel){var e=n.tutorialDataStore.hasKey(o.previewConceptualModelKey);e&&n.previewFeaturesModalService.showFeedbackModal()}}))}return t.createOptions=function(){return{additionalServices:["$location","$timeout","appMetadataService","bootstrapService","contentPackService","contentProviderHttpService","dashboardDataService","dashboardService","dashboardStateChangeService","errorService","explorationLoader","favorites","featureSwitchService","fullScreen","groupService","home","impersonationService","inFocusService","licenseEnforcementService","licenseHelperService","localizationService","modalDialogService","modalDialogService","modelConverter","modelHttpService","modelService","mostRecentlyUsedService","navigation","notificationToast","pageTitle","permissionService","pinTileService","previewFeaturesModalService","reportService","rtl","quota","syncService","telemetryService","tutorialDataStore","userActivityContextService","userInfo","userNotificationInfo","visualPlugin","workbookService"]}},t.prototype.toggleNavigationPane=function(e){this.isNavigationPaneExpanded=e},t.prototype.handleStateChange=function(t,i,o,r){var a=this;if(this.scope.$emit(e.constants.hideTaskPaneSlider),t.name===e.constants.navigation.states.home){var n=this.services.home;if(!r.groupGUID||r.groupGUID===n.homeDashboard.groupId)return void this.services.navigation.insertGroupAndNavigateToDashboardByGUID(n.homeDashboard.dashboardObjectId,n.homeDashboard.groupId,e.services.LocationOptions.False)}else if(t.name===e.constants.navigation.states.group)return void this.services.navigation.navigateToContentListOrActiveDashboard();if(this.services.navigation.inReportView())this.services.groupService.groupSwitchPromise().then((function(){var t=a.services.reportService.findReportByGUID(a.services.navigation.currentReportGUID);if(!t)return a.services.mostRecentlyUsedService.removeMRU(a.services.navigation.currentReportGUID),e.helpers.ArtifactNotFoundHelper.showArtifactDoesNotExistDialog("ArtifactKind_Report",a.services.errorService,a.services.localizationService,a.services.telemetryService),void a.services.navigation.navigateToContentListOrActiveDashboard();var i=a.services.modelService.findModel(t.modelId,t.packageId);t.isNew=!1;var o=a.services.modelConverter.convertReport(t.contract);a.services.modelConverter.fillReport(o,t.contract),o.model=i.contract,a.onBindToPowerViewReport(null,o,a.services.navigation.instantiationMode,null,a.services.navigation.currentReportPage)}));else if(this.services.navigation.inDatasetView()&&!this.services.navigation.inQnaModelView()){if(this.services.navigation.currentDatasetDBName){var s=this.services.modelService.findModelByDBName(this.services.navigation.currentDatasetDBName);if(!s)return e.helpers.ArtifactNotFoundHelper.showArtifactDoesNotExistDialog("ArtifactKind_Dataset",this.services.errorService,this.services.localizationService,this.services.telemetryService),void this.services.navigation.navigateToActiveDashboard();var c=this.services.modelConverter.convertReport(s.contract);this.services.modelConverter.fillReport(c,s.contract),c.model=s,this.onBindToPowerViewReport(null,c,this.services.navigation.instantiationMode)}}else if(this.services.navigation.inDashboardView()&&this.services.navigation.inQnaView()){var l=this.services.dashboardDataService;this.scope.viewModel.qnaContainer.models=l.activeDashboardModels,this.scope.viewModel.qnaContainer.title=l.activeDashboard.displayName}else this.services.navigation.inDatasetView()&&this.services.navigation.inQnaModelView()&&this.services.modelService.modelsPromise.then((function(e){var t=a.services.navigation.currentDatasetDBName,i=_(e).filter((function(e){return e.dbName===t})).map((function(e){return e.contract})).value();a.scope.viewModel.qnaContainer.models=i,a.scope.viewModel.qnaContainer.title=i[0].displayName}))},t.prototype.showInsightsLoadedNotification=function(t,i){var o=this;if(!this.services.navigation.inInsightsView()||this.services.navigation.insightsDataGUID!==t.dbName){var r={displayText:this.services.localizationService.get("Insights_FinishedLoadingButtonText"),action:function(){o.services.navigation.showInsightsPanel(t.dbName,e.insights.constants.insightsSourceToast)}},a={displayText:this.services.localizationService.get("Insights_LearnMore"),action:function(){window.open(e.insights.constants.zeroInsightsLink,"_blank")}};i?this.services.notificationToast.notify({title:this.services.localizationService.get("Insights_FinishedLoadingTitle"),message:this.services.localizationService.format("Insights_FinishedLoadingSubtitle",[t.displayName]),notificationType:e.common.NotificationToastType.Success,actionButtons:[r],sticky:!0}):this.services.notificationToast.notify({title:this.services.localizationService.get("Insights_FinishedLoadingNoInsightsTitle"),message:this.services.localizationService.format("Insights_FinishedLoadingNoInsightsSubtitle",[t.displayName]),notificationType:e.common.NotificationToastType.NoIcon,actionButtons:[a]})}},t.prototype.showVisualInFocus=function(e,t,i){if(e){var o=e.modelId,r=e.packageId,a=o?this.findModel(o,r):void 0,n=d.createTileForPinData(this.services.visualPlugin,e,a,null),s=this.services.modelConverter.convertTile(n,this.services.modelService.getModelContracts());this.services.inFocusService.view(s,t,i)}},t.prototype.isPinningSupported=function(t,i,r){var a=this.services.permissionService.getModelEffectivePermissions(i.id,i.packageId)||i.permissions;if(t&&t.getPermissions()===n.CopyOnWrite)return this.onPersonalize(t.packageId),!1;if(i&&a===n.CopyOnWrite)return this.scope.$emit(e.constants.personalizeEventName,i.packageId),!1;var s=r&&r.action,c=s===o.openQnAActionName||s===o.openInsightsActionName;return!(this.services.permissionService.isActiveWorkspaceIsReadOnly||t&&(t.getPermissions()&n.Write)!==n.Write||c&&i&&(a&n.Write)!==n.Write)||(this.services.pinTileService.showNotSupportedDialog(),!1)},t.prototype.pinVisual=function(t){if(t){var i,o=this.services.telemetryService,r=t.visualType,a=t.modelId,n=t.packageId,s=a?this.findModel(a,n):void 0,c=s?s.contentProviderId:void 0,l=e.common.findContentProviderName(this.contentProviders,c),d=!!(t.resourcePackageIds&&t.resourcePackageIds.length>0),p=o.startEvent(e.telemetry.DashboardPinTile,r,this.getSource(t),"",!1,l,d,"",!1);t.reportId&&(i=this.services.reportService.findReport(t.reportId),i||this.services.reportService.addReport(this.services.modelConverter.convertReport({id:t.reportId,permissions:e.common.contracts.Permissions.All|e.common.contracts.Permissions.Explore}))),this.isPinningSupported(i,s,t.action)&&this.services.pinTileService.showPinVisualDialog(this.scope,t,i,s,void 0,p)}},t.prototype.pinReportPage=function(e){var t=this.services.reportService.findReport(e.reportId),i=this.findModel(e.modelId,e.packageId);this.isPinningSupported(t,i,e.action)&&this.services.pinTileService.showPinReportPageDialog(e)},t.prototype.getSource=function(t){switch(t.action.action){case e.common.constants.openQnAActionName:return s.QnA;case e.common.constants.openInsightsActionName:return s.Insights;default:return s.Exploration}},t.prototype.findModel=function(e,t){return _.find(this.dashboardContainerModel.contract.models,(function(i){return i.id===e&&i.packageId===t}))},t.prototype.updateCurrentReportInfo=function(e,t){null!=e&&e.stopPropagation(),this.scope.activeReportInfo=t},t.prototype.onPersonalizePackage=function(e,t){null!=e&&e.stopPropagation(),this.onPersonalize(t)},t.prototype.onPersonalizeReport=function(e,t){null!=e&&e.stopPropagation();var i=this.services.reportService.findReport(t);null!=i&&this.onPersonalize(i.packageId)},t.prototype.onPersonalize=function(e){this.services.contentPackService.onPersonalizeContentPack(e)},t.prototype.onBindToPowerViewReport=function(t,i,o,r,a){var n=this;null!=t&&t.stopPropagation(),this.updateCurrentReportInfo(null,{id:i.id,displayName:i.displayName});var s,c=this.services.dashboardDataService.activeDashboard;c&&(s=c.id);var l=this.services.modelConverter,d=l.convertReport(i.contract);l.fillReport(d,i.contract),d.packageId=i.contract.packageId,d.reportActiveSlideId=i.reportActiveSlideId,d.isNew=i.isNew,d.model=i.model,d.modelId=i.modelId;var p={report:d,dashboardId:s,instantiationMode:o,tileId:r,reportPage:a},u=this.scope.viewModel;u.explorationContainer=e.explore.viewModels.ViewModelFactory.createExplorationContainer(),this.services.explorationLoader.load(p);var v=e.contracts.LandingView.Report,h=this.services.telemetryService,g=h.startEvent(e.telemetry.DashboardSwitchView,u.contract.activeView,v);l=this.services.modelConverter,u.contract.activeView=v;var m=l.convertLandingContainerShallow(u.contract);m.calculateLayout(),this.services.localizationService.ensureLocalization((function(){n.scope.reportName=n.getReportTitleForNavigationBar(i)})),this.scope.viewModel.reportContainer.isActiveView=!0,g.resolve()},t.prototype.getReportTitleForNavigationBar=function(t){var i=t.displayName;return i?i:e.common.localize.get("Landing_DefaultReportName")},t.prototype.onBindToExcelWorkbook=function(t,i){t.stopPropagation(),this.scope.activeWorkbookInfo={id:i.id,packageId:i.packageId,uniqueId:i.uniqueId,displayName:i.displayName};var o=this.scope.viewModel,r=e.contracts.LandingView.Workbook,a=this.services.telemetryService,n=a.startEvent(e.telemetry.DashboardSwitchView,o.contract.activeView,r);this.scope.viewModel.contract.activeView=r,n.resolve()},t.prototype.initializeContainer=function(i){var o=this,r={dashboards:[],activeViewMode:e.contracts.DashboardContainerViewMode.DashboardViewer,activityPane:e.staticContract.getActivityPaneContract()},a={activeView:e.contracts.LandingView.Dashboard,dashboardContainer:r,reportContainer:{},workbookContainer:{},qnaContainer:{}},n=this.services.modelConverter,s=this.scope.viewModel=n.convertLandingContainer(a);s.calculateLayout(),s.applyLayout(),i&&this.logBootstrapEvents(i),this.services.rootScope.$on(e.constants.dashboardContainerLoaded,(function(e,r){o.scope.viewModel.dashboardContainer=o.services.dashboardService.dashboardContainerModel,i&&(t.logGetAppMetadataTelemetry(o.services.telemetryService,i,window.getAppMetadataInfo),o.services.$timeout((function(){i.event.info.finalState=r||o.services.navigation.stateService.current.name,o.scope.$applyAsync((function(){i.resolve(),o.scope.appDataReady=!0,o.services.pageTitle.refresh()}))})))}))},t.prototype.handleNotificationPane=function(e){this.scope.viewModel.notificationPane.isExpanded=e,this.scope.viewModel.showNotificationPane=e,this.scope.viewModel.notificationPane.expandedWidth=e?i.Small:i.Default,e||(this.services.userNotificationInfo.hidePaneOnClick=!1)},t.prototype.hideTaskPaneSliderOnClick=function(){this.scope.$broadcast(e.constants.hideTaskPaneSliderOnClickEventName)},t.prototype.hideNotificationPaneOnClick=function(){this.services.userNotificationInfo.hidePaneOnClick=!0},Object.defineProperty(t.prototype,"dashboardContainerModel",{get:function(){return this.scope.viewModel.dashboardContainer=this.services.dashboardService.dashboardContainerModel,this.scope.viewModel.dashboardContainer},enumerable:!0,configurable:!0}),t.prototype.showLoadingForDashboard=function(){var e=this.services.dashboardDataService;return e.activeDashboard&&e.activeDashboard.id<0},t.prototype.quitImpersonation=function(){var e=this.services.impersonationService,t=e.getImpersonationState().modelId;e.clearImpersonation(),this.services.fullScreen.fullScreenMode&&this.scope.exitFullScreen(),this.services.navigation.showRowLevelSecuritySlider(t)},t.logGetAppMetadataTelemetry=function(t,i,o){if(!_.isEmpty(o))for(var r=0,a=o;r<a.length;r++){var n=a[r];if(n&&n.start&&n.end){var s=t.startChildEvent(i.event,e.telemetry.AppGetAppMetadata,n.url,n.groupGUID,n.start.toISOString(),n.end.toISOString());s.event.id=n.requestId,n.parseStart&&n.parseEnd&&t.logChildEvent(s.event,e.telemetry.AppParseAppMetadata,n.parseStart.toISOString(),n.parseEnd.toISOString()),n.isError?s.reject(e.errorDetailsHelper.getTelemetryErrorDetails({code:n.code,message:n.errorMessage})):s.resolve()}}},t.prototype.logBootstrapEvents=function(t){for(var i=this.services.telemetryService,o=e.common.perfMarkers.getJsParseTimes(window.parseTimeMarkers),r=0,a=o;r<a.length;r++){var n=a[r];i.logChildEvent(t.event,e.telemetry.AppJavaScriptParse,n.fileName,n.start,n.end)}var s=window.performance.timing;i.logChildEvent(t.event,e.telemetry.AppLoadPerformanceTiming,s.navigationStart,s.unloadEventStart,s.unloadEventEnd,s.redirectStart,s.redirectEnd,s.fetchStart,s.domainLookupStart,s.domainLookupEnd,s.connectStart,s.connectEnd,s.requestStart,s.responseStart,s.responseEnd,s.domLoading,s.domInteractive,s.domContentLoadedEventStart,s.domContentLoadedEventEnd,s.domComplete,s.loadEventStart,s.loadEventEnd)},t})();t.LandingContainer=p})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.constants,o=(function(){function t(t,i){var o=this;this.scope=t,this.services=i,this.scope.viewModel.ownedByMeSelected=!0,this.scope.tryItFree=this.services.userInfo.userFreeTrialExpired?function(){return o.services.licenseHelperService.displayDialogToExtendTrial(e.telemetry.LicenseEnforcementOperation.ManageStorageView)}:function(){return o.services.licenseHelperService.displayDialogToAcceptTrialTerms(e.telemetry.LicenseEnforcementOperation.ManageStorageView)},this.scope.deleteModel=function(e){return o.deleteModel(e)},this.scope.userGroupHeader=new e.models.UserGroupHeaderModel,this.scope.isInVisibleDashboard=function(e){return o.services.quota.isInVisibleDashboard(e)},this.loadUserMetadata(),this.updateView(),t.$watchGroup([function(){return o.services.workbookService.lastUpdatedTimestamp},function(){return o.services.modelService.lastUpdatedTimestamp},function(){return o.scope.dashboardContainer.dashboards}],(function(){o.updateView()})),t.$watch((function(){return o.services.groupService.activeGroup}),(function(){o.loadUserMetadata(),o.updateView()})),this.logUsageEvent()}return t.createOptions=function(){return{additionalServices:["errorService","modelConverter","navigation","promiseFactory","telemetryService","localizationService","quota","modelService","modelHttpService","groupService","featureSwitchService","userInfo","workbookService","workbookHttpService","contentPackService","licenseHelperService","invitationService","packageService"]}},t.prototype.deleteModel=function(t){if(t&&t.modelId){var i=this.services.modelService.findModel(t.modelId,t.packageId);i&&i.isUsedByContentPack?this.showDialogOnModelUsedByContentPack(t.modelId):this.scope.viewModel.ownedByMeSelected&&t.storageType===e.storageType.Dataset?this.deleteOwnedModel(t):this.scope.viewModel.ownedByMeSelected&&t.storageType===e.storageType.Report?this.deleteWorkbook(t):this.removeOthersModel(t)}},t.prototype.showDialogOnModelUsedByContentPack=function(e){this.services.contentPackService.showDialogOnModelDeleteInContentPack(e)},t.prototype.getUsageModelIndex=function(e,t){var i=this.scope.viewModel.usageDetails;if(i)for(var o=0,r=i.length;o<r;o++)if(i[o].modelId===e&&(!t||i[o].packageId===t))return o;return-1},t.prototype.deleteOwnedModel=function(t){var o=this,r=this.services.errorService.control(),a=[new InJs.ModalDialogAction(this.services.localizationService.get("QuotaManagement_DeleteButtonText"),function(a,n){o.logDeleteEvent(e.telemetry.QuotaDeleteItemType.DeleteOwnedModel,t.sizeInMBs),r.hideDialog();var s=o.getUsageModelIndex(t.modelId,t.packageId);s>=0&&o.scope.viewModel.usageDetails.splice(s,1);var c=o.services.telemetryService.startEvent(e.telemetry.DashboardDeleteDataset),l=o.services.modelService.findModel(t.modelId,t.packageId);o.services.modelHttpService.deleteModel(l.contract,c.event).then((function(){c.resolve(),o.updateUsage()}),(function(r){r.status===e.HttpStatusCode.Unauthorized?o.services.errorService.error(o.services.localizationService.get("Model_NoPermissionToDeleteMessage"),"Model_NoPermissionToDelete",{requestId:r.requestId,statusCode:r.status.toString()}):r.status===e.HttpStatusCode.BadRequest&&r.headers(e.common.PowerBIErrorHeader)===i.CannotDeleteModelPublishedToOrganizationalAppHeader?o.services.errorService.error(o.services.localizationService.get("Model_DeleteWaitMessage"),"Model_DeleteWaitMessage",{requestId:r.requestId,statusCode:r.status.toString()}):o.services.errorService.error(o.services.localizationService.get("Model_FailToDeleteModelMessage"),"Model_FailToDeleteModel",{requestId:r.requestId,statusCode:r.status.toString()}),o.scope.viewModel.usageDetails.push(t),c.reject()}))}),new InJs.ModalDialogAction(this.services.localizationService.get("QuotaManagement_CancelButtonText"),function(e,t){r.hideDialog()})],n=this.services.localizationService.get("QuotaManagement_DeleteConfirmationTitle"),s=this.services.localizationService.get("QuotaManagement_DeleteConfirmationMessage");r.showCustomDialog(n,$("<div/>").text(s),a,(function(e){e.parent().find('input[value="'+o.services.localizationService.get("QuotaManagement_CancelButtonText")+'"]').focus()}),!0)},t.prototype.removeOthersModel=function(t){var i=this,o=this.services.errorService.control(),r=[new InJs.ModalDialogAction(this.services.localizationService.get("QuotaManagement_RemoveButtonText"),function(r,a){i.logDeleteEvent(e.telemetry.QuotaDeleteItemType.RemoveSharedItem,t.sizeInMBs),o.hideDialog();var n=t.dashboardsFromModel,s=[];if(n)for(var c=0,l=n.length;c<l;c++){var d=n[c],p=d.contract.modelIds;s=s.concat(p);var u=i.services.telemetryService.startEvent(e.telemetry.DashboardDeleteDashboardUser);i.services.invitationService.deleteUser(i.scope.dashboardContainer.userId,d.id,u.event).then((function(e){u.resolve(),i.updateUsage()}),(function(e){i.services.errorService.error(i.services.localizationService.get("Dashboard_FailToRemoveDashboardMessage"),"Dashboard_FailToRemoveDashboard",{requestId:e.requestId,statusCode:e.status.toString()}),u.reject()}))}for(var c=0,l=s.length;c<l;c++){var v=i.getUsageModelIndex(s[c]);v>-1&&i.scope.viewModel.usageDetails.splice(v,1)}i.services.modelService.removeModels(s)}),new InJs.ModalDialogAction(this.services.localizationService.get("QuotaManagement_CancelButtonText"),function(e,t){o.hideDialog()})],a=this.services.localizationService.get("QuotaManagement_RemoveConfirmationTitle"),n=this.services.localizationService.get("QuotaManagement_RemoveConfirmationMessage");o.showCustomDialog(a,$("<div/>").text(n),r,(function(e){e.parent().find('input[value="'+i.services.localizationService.get("QuotaManagement_CancelButtonText")+'"]').focus()}),!0)},t.prototype.deleteWorkbook=function(t){var i=this,o=this.services.errorService.control(),r=[new InJs.ModalDialogAction(this.services.localizationService.get("QuotaManagement_DeleteButtonText"),function(r,a){i.logDeleteEvent(e.telemetry.QuotaDeleteItemType.DeleteOwnedWorkbook,t.sizeInMBs),o.hideDialog();var n=i.getUsageModelIndex(t.modelId,t.packageId);n>=0&&i.scope.viewModel.usageDetails.splice(n,1);var s=i.services.workbookService.workbooks,c=_.filter(s,(function(e){return e.modelId===t.modelId}));if(c&&c.length>0){var l=i.services.telemetryService.startEvent(e.telemetry.DashboardRemoveWorkbook,i.services.packageService.getWorkbookStorageProvider(c[0].contract.packageId),i.services.packageService.getWorkbookContentProvider(c[0].contract.packageId));i.services.workbookHttpService.deleteWorkbook(c[0].contract,l.event).then((function(){l.resolve(),i.updateUsage()}),(function(o){o.status===e.HttpStatusCode.Unauthorized?i.services.errorService.error(i.services.localizationService.get("Workbook_NoPermissionToRemoveMessage"),"Workbook_NoPermissionToRemove",{requestId:o.requestId,statusCode:o.status.toString()}):i.services.errorService.error(i.services.localizationService.get("Workbook_FailToRemoveWorkbookMessage"),"Workbook_FailToRemoveWorkbook",{requestId:o.requestId,statusCode:o.status.toString()}),i.scope.viewModel.usageDetails.push(t),l.reject()}))}}),new InJs.ModalDialogAction(this.services.localizationService.get("QuotaManagement_CancelButtonText"),function(e,t){o.hideDialog()})],a=this.services.localizationService.get("QuotaManagement_DeleteConfirmationTitle"),n=this.services.localizationService.get("QuotaManagement_DeleteConfirmationMessage");o.showCustomDialog(a,$("<div/>").text(n),r,(function(e){e.parent().find('input[value="'+i.services.localizationService.get("QuotaManagement_CancelButtonText")+'"]').focus()}),!0)},t.prototype.updateUsage=function(){var t=this.services.quota,i=t.getUsage();this.scope.viewModel.selfUsageInMB=i.ownedUsage,this.scope.viewModel.otherUsageInMB=i.sharedUsage,this.scope.viewModel.totalUsageInMB=i.totalUsage;var o={selfUsageInPercent:this.scope.viewModel.selfUsageInMB/this.scope.viewModel.quotaLimitInMB,otherUsageInPercent:this.scope.viewModel.otherUsageInMB/this.scope.viewModel.quotaLimitInMB,selfUsageInUnit:e.StorageUsageService.convertToUsageWithUnit(this.scope.viewModel.selfUsageInMB),otherUsageInUnit:e.StorageUsageService.convertToUsageWithUnit(this.scope.viewModel.otherUsageInMB),usageDescription:this.services.localizationService.format("QuotaManagement_UsageDescription",[e.StorageUsageService.convertToUsageWithUnit(i.totalUsage),e.StorageUsageService.convertToUsageWithUnit(this.scope.viewModel.quotaLimitInMB)])};this.scope.viewModel.usageBarModel=o},t.prototype.updateView=function(){this.scope.viewModel.usageDetails=this.services.quota.getUsageModels(),this.updateUsage()},t.prototype.loadUserMetadata=function(){this.services.groupService.activeGroup?this.scope.viewModel.isMyWorkspace=this.services.groupService.activeGroup.isMyWorkspace:this.scope.viewModel.isMyWorkspace=!0,this.scope.viewModel.isPremiumUser=this.services.userInfo.isPremiumUser,this.scope.viewModel.quotaLimitInMB=this.services.quota.quotaLimitInMB,this.scope.viewModel.quotaLimitInUnit=e.StorageUsageService.convertToUsageWithUnit(this.scope.viewModel.quotaLimitInMB),this.scope.viewModel.tryItFreeText=this.services.userInfo.userFreeTrialExpired?this.services.localizationService.get("ExtendTrial_RequestExtensionButtonText"):this.services.localizationService.get("UpgradeAccount_TryfreeButton")},t.prototype.logDeleteEvent=function(t,i){var o=this.scope.viewModel.isMyWorkspace?e.telemetry.QuotaOpenManageStorageContext.Personal:e.telemetry.QuotaOpenManageStorageContext.Group,r=this.services.telemetryService;r.logEvent(e.telemetry.QuotaManageStorageDelete,this.scope.viewModel.isPremiumUser,o,t,i,this.scope.viewModel.selfUsageInMB,this.scope.viewModel.otherUsageInMB,this.scope.viewModel.quotaLimitInMB)},t.prototype.logUsageEvent=function(){var t=this.scope.viewModel.isMyWorkspace?e.telemetry.QuotaOpenManageStorageContext.Personal:e.telemetry.QuotaOpenManageStorageContext.Group,i=this.services.telemetryService;i.logEvent(e.telemetry.QuotaStorageUsage,this.scope.viewModel.isPremiumUser,t,this.scope.viewModel.selfUsageInMB,this.scope.viewModel.otherUsageInMB,this.scope.viewModel.quotaLimitInMB)},t})();t.ManageStorageView=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function i(i,o){var r=this;if(this.iFrameLoadTimeoutInterval=1e4,this.iFrameLoadedOrTimeout=!1,this.services=o,this.scope=i,this.services.featureSwitchService.featureSwitches.saasMarketplace){var a=supportedSaasMarketplaceRedirects.split(";").map((function(e){return e.toLowerCase()})),n=this.services.navigation.stateService.params.saasMarketplace;if(n&&_.indexOf(a,n.toLowerCase())>=0?this.redirectRoot=n:this.redirectRoot=saasMarketplaceUrlOrigin,this.redirectRoot){this.scope.marketplaceIframe=null,this.scope.postInitialMarketplaceContext=function(){return r.postInitialMarketplaceContext()},this.listener=function(e){return r.receiveMessage(e)};var s=this.services.rootScope.$on(e.constants.saasMarketplace.initSaasMarketplaceEventName,(function(e,i){if(i){var o=r.services.localizationService.currentLanguageLocale,a="/embed/"+o;if(i.applicationId)a+="/product/power-bi/"+i.applicationId+"?product=power-bi";else if(i.category){var n=t.contentProviderStore.contentProviderConstants.saasMarketplacePrivateCategory;a+="/marketplace?product=power-bi&showPrivateApps="+(i.category===n?"true":"false")}else a+="/marketplace?product=power-bi&showPrivateApps=false";r.scope.saasMarketplaceUrl=r.redirectRoot+a,r.hostData={},r.hostData.accessToken=window.powerBIAccessToken,r.hostData.correlationId=r.services.telemetryService.root.id,r.hostData.context={groupId:r.services.activeGroupId.headerActiveGroupObjectId};var s=r.services.featureSwitchService.featureSwitches.currentContentProviderFlightCode;s&&(r.hostData.context.cpcode=s),r.hostData.backendUrlOverride=clusterUri,r.scope.connectToMarketplace()}}));this.scope.initListener=function(){return r.services.$window.addEventListener("message",r.listener)},this.scope.$on(e.common.constants.navigation.stateChangeSuccess,(function(){if(r.scope.marketplaceIframe){if(r.services.navigation.inGetDataView()){var i=t.contentProviderStore.contentProviderConstants.categoryNameToEnumMap[r.services.navigation.categoryName];if(i===e.common.contracts.ContentProviderClientCategory.Service||i===e.common.contracts.ContentProviderClientCategory.Organizational)return}r.destroyIframeListener()}})),this.scope.$on("$destroy",(function(){r.destroyIframeListener(),s()}))}}}return i.createOptions=function(){return{additionalServices:["$window","navigation","$rootScope","$timeout","activeGroupId","localizationService","featureSwitchService","telemetryService"]}},i.prototype.postInitialMarketplaceContext=function(){var t=this;this.scope.marketplaceIframe&&(this.iFrameLoadedOrTimeout=!1,this.marketplaceOpenEvent=this.services.telemetryService.startEvent(e.telemetry.MarketplaceEmbeddedOpened),this.services.$timeout((function(){!t.iFrameLoadedOrTimeout&&t.marketplaceOpenEvent&&(t.iFrameLoadedOrTimeout=!0,t.marketplaceOpenEvent.reject({errorCode:"Timeout",errorMessage:jsCommon.StringExtensions.format("Timeout after {0} ms",t.iFrameLoadTimeoutInterval.toString())}))}),this.iFrameLoadTimeoutInterval),this.scope.marketplaceIframe.postMessage({msgType:"loadMarketplace",hostData:this.hostData},"*"))},i.prototype.destroyIframeListener=function(){this.services.$window.removeEventListener("message",this.listener),this.scope.disconnectMarketplace(),this.scope.marketplaceIframe=null},i.prototype.receiveMessage=function(t){if(t&&t.origin&&!(this.services.$window.location.href.indexOf(t.origin)>=0)){!this.scope.marketplaceIframe&&t.source&&(this.scope.marketplaceIframe=t.source);var i=t.data;if(i&&i.msgType){var o=e.constants.saasMarketplace.actionTypes;switch(i.msgType){case o.acquireApp:i.data&&i.data.applicationId&&i.data.category&&(this.destroyIframeListener(),this.services.telemetryService.logEvent(e.telemetry.MarketplaceEmbeddedClosedWithAppAcquired),this.services.rootScope.$emit(e.constants.saasMarketplace.updateHostUrl,i.data.applicationId,i.data.category),this.services.rootScope.$emit(e.constants.saasMarketplace.acquireAppEventName,i.data.applicationId,i.data.category));
break;case o.externalRedirect:break;case o.updateUrl:i.data&&i.data.applicationId&&i.data.category&&this.services.rootScope.$emit(e.constants.saasMarketplace.updateHostUrl,i.data.applicationId,i.data.category);break;case o.closeSaasMarketplace:this.destroyIframeListener(),this.services.telemetryService.logEvent(e.telemetry.MarketplaceEmbeddedClosedWithoutAppAcquired);break;case o.finishedLoadingContentProviderList:!this.iFrameLoadedOrTimeout&&this.marketplaceOpenEvent&&(this.iFrameLoadedOrTimeout=!0,this.marketplaceOpenEvent.resolve())}}}},i})();t.MarketplaceHostController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.constants,o=e.models.factory.NavigationBarMenuFactory;!(function(e){e[e.ContactSupport=0]="ContactSupport",e[e.DownloadCompanionApp=1]="DownloadCompanionApp",e[e.DownloadExcelPublisher=2]="DownloadExcelPublisher",e[e.DownloadGateways=3]="DownloadGateways",e[e.DownloadIOSApp=4]="DownloadIOSApp",e[e.DownloadAnalyzeInExcelUpdates=5]="DownloadAnalyzeInExcelUpdates",e[e.MakeSuggestion=6]="MakeSuggestion",e[e.ManageEmbed=7]="ManageEmbed",e[e.ManageStorage=8]="ManageStorage",e[e.OpenGeneralSettings=9]="OpenGeneralSettings",e[e.PublishContentPack=10]="PublishContentPack",e[e.ShowAboutDialog=11]="ShowAboutDialog",e[e.SignOut=12]="SignOut",e[e.UpgradeAccount=13]="UpgradeAccount",e[e.ViewContentPack=14]="ViewContentPack"})(t.NavigationBarMenuAction||(t.NavigationBarMenuAction={}));var r=t.NavigationBarMenuAction,a=(function(){function t(o,a){var n=this;this.scope=o,this.services=a;var s=this.services.$window;this.scope.navigation=this.services.navigation,this.scope.showSatisfactionWidget=function(){return n.showSatisfactionWidget()},this.scope.userInfo=this.services.userInfo,this.scope.featureSwitchPublishToWeb=!1,this.scope.logoConfig={operator:s.powerBIOperator,operatorLocale:s.powerBIOperatorLocale},this.scope.navigateToLanding=function(){n.shouldShowConceptualModel()?n.services.bootstrapService.bootstrapNavigation(!1,!0):n.services.navigation.navigateToActiveDashboard(),n.services.telemetryService.logEvent(e.telemetry.NavigationClickLogo)},this.services.featureSwitchService.getFeatureSwitches().then((function(){n.scope.featureSwitchPublishToWeb=n.services.featureSwitchService.featureSwitches.publishToWebEnabled&&n.services.featureSwitchService.featureSwitches.anonymousEmbeddingEnabled})),this.scope.fullScreen=this.services.fullScreen,this.scope.enterFullScreen=function(){n.services.fullScreen.fullScreenMode=!0,n.services.telemetryService.logEvent(e.telemetry.SettingsEnterFullScreen,n.services.navigation.stateService.current.name)},this.bindNavigationBarMenus(),this.scope.powerBICompanionAppEnable=!1,this.scope.featureSwitchOrgAppsEnabled=this.services.featureSwitchService.featureSwitches.orgAppsEnabled,this.scope.featureSwitchPermissionCenterEnabled=this.services.featureSwitchService.featureSwitches.permissionCenterEnabled,this.scope.o365PowerBIEnabled=!1,this.scope.featureSwitchEnterpriseGatewayEnabled=!!this.services.featureSwitchService&&this.services.featureSwitchService.featureSwitches.enterpriseGatewayEnabled,this.scope.isPremiumUser=this.services.userInfo.isPremiumUser,this.services.userInfo.userMetadataPromise.then((function(e){n.scope.isTenantAdmin=e.isTenantAdmin})),this.scope.canWrite=function(){return!n.services.permissionService.isActiveWorkspaceIsReadOnly},this.services.userInfo.userMetadataPromise.then((function(){n.scope.o365PowerBIEnabled=n.services.featureSwitchService.featureSwitches.o365PowerBIEnabled&&n.services.userInfo.userHasOffice365Plan})),this.services.userInfo.getUserPhoto().then((function(e){n.scope.userPhoto=e}));var c=this.services.location.host();this.scope.isSelfhostInternal=0===c.indexOf("dxt.powerbi.com")||0===c.indexOf("portal.analysis.windows-int.net")||0===c.indexOf("powerbi-df.analysis-df.windows.net"),this.scope.$watch((function(){return n.services.userInfo.isPremiumUser}),(function(e){n.scope.$applyAsync((function(){n.scope.isPremiumUser=e}))})),this.initializeUserNotifications(),this.services.localizationService.ensureLocalization((function(){t.FeedbackMessage=n.services.localizationService.get("FeedbackTicket_Message").replace("{{startLink}}",' <a href="https://support.powerbi.com/tos" target="_blank">').replace("{{endLink}}","</a> ")+" (#EMAIL).",t.SupportTicketMessage=n.services.localizationService.get("SupportTicket_Message").replace("{{startLink}}",' <a href="https://support.powerbi.com/tos" target="_blank">').replace("{{endLink}}","</a> ")+" (#EMAIL)."}));var l=this.services.rootScope.$on(e.constants.enablePowerBICompanionApp,(function(t){n.services.timeout((function(){n.scope.$apply((function(){n.scope.powerBICompanionAppEnable=!0;var t=_.filter(n.scope.downloadMenu,(function(e){return e.action===r.DownloadCompanionApp}))[0];t&&(t.href=e.models.PowerBICompanionModel.downloadLink)}))}))})),d=this.services.rootScope.$on(i.onReportChangedEventName,(function(e,t){n.scope.reportChanged=t}));this.scope.$on("$destroy",(function(){l(),d()}))}return t.createOptions=function(){return{additionalServices:["$window","dashboardHttpService","dropdown","errorService","featureSwitchService","navigation","promiseFactory","telemetryService","localizationService","userInfo","groupService","userSettingsHttpService","notificationToast","fullScreen","gatewaysMetadataService","permissionService","$location","userNotificationInfo","bootstrapService","tutorialDataStore"]}},t.prototype.initializeUserNotifications=function(){var t=this;this.scope.featureSwitchNotificationEnabled=this.services.featureSwitchService.featureSwitches.userNotificationsEnabled,this.scope.featureSwitchNotificationEnabled&&(this.scope.userNotificationInfo=this.services.userNotificationInfo,this.scope.showUserNotifications=function(){t.services.userNotificationInfo.showPane?t.services.userNotificationInfo.hidePaneOnClick=!0:(t.services.userNotificationInfo.showPane=!0,t.services.telemetryService.logEvent(e.telemetry.UserNotificationsLoadNotificationPane,t.services.userNotificationInfo.userNotifications.unseenCount))})},t.prototype.showFeedbackContextMenu=function(e){e.stopPropagation();var t=o.createMenuItems(0,this.services.localizationService),i=e.currentTarget,r={x:i.offsetLeft+i.offsetWidth,y:i.offsetTop+i.offsetHeight};this.services.dropdown.showContextMenu(t,r,_.noop,!1,"feedbackContextMenu")},t.prototype.showSatisfactionWidget=function(){e.UserVoiceService.ensureUserVoice(this.services.telemetryService,(function(){e.UserVoicePopover.show();var i=e.session.UserInfoUtils.getEmailAddressForReceivingMail();e.UserVoicePopover.setFooterText(t.FeedbackMessage.replace(t.EmailReplaceText,i)),e.session.userInfo&&e.UserVoiceService.api.push(["embed","#popovermain",{mode:"satisfaction",forum_id:e.session.UserInfoUtils.isInternalUser()===!0?265200:262210,height:"325px",width:"325px"}])}))},t.prototype.showSupportWidget=function(){var i=this;e.UserVoiceService.ensureUserVoice(this.services.telemetryService,(function(){e.UserVoicePopover.show();var o=e.session.UserInfoUtils.getEmailAddressForReceivingMail();e.UserVoicePopover.setFooterText(t.SupportTicketMessage.replace(t.EmailReplaceText,o)),i.services.localizationService.ensureLocalization((function(){e.UserVoiceService.api.push(["embed","#popovermain",{mode:"contact",forum_id:e.session.UserInfoUtils.isInternalUser()===!0?265200:262210,contact_title:i.services.localizationService.get("TopNav_HelpMenu_ContactSupport"),height:"325px",width:"325px"}])}))}))},t.prototype.showAboutDialog=function(){var i=this,o=this.services.errorService.control(),r=e.helpers.ClusterLocationHelper.getClusterLocation(clusterUri,this.services.localizationService);if(this.services.localizationService.ensureLocalization((function(){var e=new Date;t.AboutDialogTemplate=jsCommon.StringExtensions.format(t.InnerAboutDialogTemplate,i.services.localizationService.get("TopNav_PowerBILogoTextNoPreview"),i.services.localizationService.format("PowerBI_Copyright_Text",[e.getFullYear().toString()]),i.services.localizationService.get("PowerBI_Build_Version_Text"),i.services.localizationService.get("AdditionalErrorInfo_ActivityIdText"),i.services.telemetryService.sessionId,i.services.localizationService.get("AdditionalErrorInfo_TimestampText"),e.toString(),i.services.localizationService.get("AdditionalErrorInfo_DataLocationText"),r)})),e.build){var a=[new InJs.ModalDialogAction(this.services.localizationService.get("TopNav_HelpMenu_AboutDialog_Close"),function(e,t){o.hideDialog()})],n=t.AboutDialogTemplate.replace("{{version}}",e.build);o.showCustomDialog(null,$(n),a,null,!0)}},t.prototype.downloadIOSApp=function(){var i=this,o=this.services.telemetryService,r=this.services.errorService.control();if(this.services.localizationService.ensureLocalization((function(){t.AboutDownloadPowerBIDialogTemplate='<div class="aboutPbiDownloadDialog"><div class="title">'+i.services.localizationService.get("PowerBIDownloadMobileTxt")+'</div><div class="dialoglogo mobileLogo"></div><div class="message">'+i.services.localizationService.get("PowerBIDownloadMobileMessage")+"</div></div>"})),e.build){var a=[new InJs.ModalDialogAction(this.services.localizationService.get("TopNav_DownloadMenu_AboutDialog_SendEmail"),function(e,t){r.hideDialog(),i.sendPowerBIDownloadLink()}),new InJs.ModalDialogAction(this.services.localizationService.get("TopNav_DownloadMenu_AboutDialog_DownloadApp"),function(e,t){r.hideDialog(),i.services.$window.open(downloadPageFWlink,"_blank")})],n=t.AboutDownloadPowerBIDialogTemplate;r.showCustomDialog(null,$(n),a,(function(e){e.parent().find('input[value="'+i.services.localizationService.get("TopNav_DownloadMenu_AboutDialog_DownloadApp")+'"]').focus()}),!0,null,t.DownloadDialogClass)}o.logEvent(e.telemetry.DashboardDownloadIOSApp,"Navigation Bar")},t.prototype.downloadAnalyzeInExcelUpdates=function(){var i=this,o=this.services.telemetryService,r=this.services.errorService.control();this.services.localizationService.ensureLocalization((function(){t.AboutDownloadPowerBIDialogTemplate='<div class="aboutPbiDownloadDialog"><div class="title">'+i.services.localizationService.get("TopNav_SettingsMenu_AnalyzeInExcelUpdates")+'</div><div class="dialoglogo analyzeInExcelLogo"></div><div class="message">'+i.services.localizationService.get("PowerBIDownloadAnalyzeInExcelMessage_Part1")+'</div><div class="message">'+i.services.localizationService.get("PowerBIDownloadAnalyzeInExcelMessage_Part2")+"</div></div>"}));var a=[new InJs.ModalDialogAction(this.services.localizationService.get("AnalyzeInExcelToast_DownloadUpdate"),function(t,a){o.logEvent(e.telemetry.DashboardAndReportsDownloadExcelUpdates,e.common.AnalyzeInExcelService.getOperatingSystemArch(),"Download Menu"),r.hideDialog(),i.services.$window.open(e.common.AnalyzeInExcelService.getDownloadLink(),"_blank")}),new InJs.ModalDialogAction(this.services.localizationService.get("AnalyzeInExcel_LearnMore"),function(e,t){r.hideDialog(),i.services.$window.open("https://go.microsoft.com/fwlink/?LinkID=786428","_blank")})],n=t.AboutDownloadPowerBIDialogTemplate;r.showCustomDialog(null,$(n),a,null,!0,null,t.DownloadDialogClass)},t.prototype.sendPowerBIDownloadLink=function(){var t=this,i=e.session.UserInfoUtils.getEmailAddressForReceivingMail(),o=this.services.telemetryService.startEvent(e.telemetry.PrivacySendPowerBIEmail);this.services.userSettingsHttpService.sendEmailForDownloadPowerBI(i,o.event).then((function(e){o.resolve();var r=t.services.errorService.control(),a=t.services.localizationService.get("PowerBISendDownloadEmailTxt"),n=t.services.localizationService.format("PowerBISendDownloadEmailSubmittedTo",[i]),s=[];r.showCustomDialog(a,$("<div/>").text(n),s,null,!0)}),(function(e){o.reject()}))},t.prototype.openGeneralSettings=function(){this.services.navigation.showSettingsSlider(e.models.SettingsGroupsType.General)},t.prototype.openManageGateways=function(){this.services.navigation.navigateToGateways()},t.prototype.logDownloadTelemetry=function(e){var t=this.services.telemetryService;t.logEvent(e,"Navigation Bar")},t.prototype.manageStorage=function(){var t=e.telemetry.QuotaOpenManageStorageContext.Personal;this.services.groupService.activeGroup&&!this.services.groupService.activeGroup.isMyWorkspace&&(t=e.telemetry.QuotaOpenManageStorageContext.Group),this.services.telemetryService.logEvent(e.telemetry.QuotaOpenManageStoragePage,e.telemetry.QuotaOpenManageStorageInteraction.NavigatorBarManageStorage,t),this.scope.navigation.showManageStorageSlider()},t.prototype.manageEmbed=function(){this.scope.navigation.showManageEmbedSlider()},t.prototype.upgradeAccount=function(){this.services.telemetryService.logEvent(e.telemetry.OpenUpgradeAccountPage,e.telemetry.OpenUpgradeAccountInteraction.NavigatorBarManageStorage)},t.prototype.signOut=function(){var t=this.services.$window[i.liveClientIdKey];if(null!=t){var o=jsCommon.StringExtensions.format(i.liveLogoutUrl,t,location.protocol+"//"+location.host);e.common.httpService.get(o,e.common.httpService.defaultRetryRequestOptions())}},t.prototype.goToO365PowerBISites=function(){var t=this,i=this.services.notificationToast.notify({title:this.services.localizationService.get("TopNav_SettingsMenu_PowerBIForO365_Loading"),notificationType:e.common.NotificationToastType.Loading}),o=e.common.httpService.powerbiRequestOptions();e.common.httpService.get("/powerbi/providers/excel/sharePointService",o).then((function(r){var a=r.data,n=a.resourceId,s=n.indexOf("."),c=n.substring(0,s),l=c.substring(0,c.lastIndexOf("-my"))+n.substring(s);e.common.httpService.get("powerbi/metadata/o365powerbiurl",o).then((function(o){var r=o.data+"my?";r=r+"rootsite="+encodeURIComponent(l)+"&",r=r+"mysite="+encodeURIComponent(n)+"&",r=r+"lang="+encodeURIComponent(e.common.localization.loader.currentLanguageLocale),t.services.notificationToast.hide(i),t.services.$window.open(r,"_blank")}),(function(e){t.services.notificationToast.hide(i),t.showFailedToLoadO365SitesNotification()}))}),(function(e){t.services.notificationToast.hide(i),t.showFailedToLoadO365SitesNotification()}))},t.prototype.showFailedToLoadO365SitesNotification=function(){this.services.notificationToast.notify({title:this.services.localizationService.get("TopNav_SettingsMenu_PowerBIForO365_Error"),notificationType:e.common.NotificationToastType.Error})},t.prototype.openAdminPortal=function(){this.scope.navigation.navigateToAdminPortal()},t.prototype.managePermissions=function(){this.services.navigation.navigateToManagePermissions(e.permissions.models.PermissionArtifactType.Home,null)},t.prototype.bindNavigationBarMenus=function(){var t=this;this.services.localizationService.ensureLocalization((function(){var i=[{text:e.session.userInfo.givenName+" "+e.session.userInfo.surname,description:e.session.userInfo.name,descriptionTitle:e.session.userInfo.name,containerClass:"userInfoContainer",itemClass:"userInfoContent",labelClass:"userName",descriptionClass:"userEmail",type:DropDownMenuItemType.Title},{text:t.services.localizationService.get("TopNav_UserInfoMenu_SignOut"),action:r.SignOut,href:"/SignOut",hrefTarget:jsCommon.DOMConstants.selfValue,type:DropDownMenuItemType.Item}],o=[{text:t.services.localizationService.get("TopNav_HelpMenu_GettingStarted"),href:"https://go.microsoft.com/fwlink/?LinkID=512054",type:DropDownMenuItemType.Item,dropdownItemClass:"addBorderBottom"},{text:t.services.localizationService.get("TopNav_HelpMenu_Community"),href:"https://go.microsoft.com/fwlink/?LinkId=617032",type:DropDownMenuItemType.Item,dropdownItemClass:"addBorderBottom"},{text:t.services.localizationService.get("TopNav_HelpMenu_GetHelp"),href:"https://support.powerbi.com",type:DropDownMenuItemType.Item,dropdownItemClass:"addBorderBottom"},{text:t.services.localizationService.get("TopNav_HelpMenu_Developers"),href:"https://go.microsoft.com/fwlink/?LinkId=521914",type:DropDownMenuItemType.Item,dropdownItemClass:"addBorderBottom"},{text:t.services.localizationService.get("TopNav_HelpMenu_About"),action:r.ShowAboutDialog,type:DropDownMenuItemType.Item,dropdownItemClass:"addBorderBottom"}];t.services.featureSwitchService.getFeatureSwitches().then((function(i){var o=[{text:t.services.localizationService.get("TopNav_SettingsMenu_PowerBICompanion"),action:r.DownloadCompanionApp,href:e.models.PowerBICompanionModel.downloadLink,type:DropDownMenuItemType.Item,dropdownItemClass:"addBorderBottom"},{text:t.services.localizationService.get("TopNav_SettingsMenu_PowerBIGateways"),action:r.DownloadGateways,href:"https://go.microsoft.com/fwlink/?LinkId=698861",type:DropDownMenuItemType.Item,dropdownItemClass:"addBorderBottom"},{text:t.services.localizationService.get("TopNav_SettingsMenu_MobileDownload"),action:r.DownloadIOSApp,type:DropDownMenuItemType.Item,dropdownItemClass:"addBorderBottom"},{text:t.services.localizationService.get("TopNav_SettingsMenu_PowerBIPublisher"),action:r.DownloadExcelPublisher,href:"https://powerbi.microsoft.com/en-us/excel-dashboard-publisher/",type:DropDownMenuItemType.Item,dropdownItemClass:"addBorderBottom"}];i.analyzeInExcelEnabled&&o.push({text:t.services.localizationService.get("TopNav_SettingsMenu_AnalyzeInExcelUpdates"),action:r.DownloadAnalyzeInExcelUpdates,type:DropDownMenuItemType.Item,dropdownItemClass:"addBorderBottom"}),t.scope.downloadMenu=o})),t.scope.helpMenu=o,t.scope.userInfoMenu=i,t.scope.navigationBarMenuItemSelected=function(e){return t.onNavigationBarMenuItemSelected(e)},t.scope.showFeedbackContextMenu=function(e){return t.showFeedbackContextMenu(e)},t.scope.onManageStorageSelected=function(){return t.manageStorage()},t.scope.onManagePermissionsSelected=function(){return t.managePermissions()},t.scope.onCreateContenPackSelected=function(){return t.scope.navigation.showPublishContentPackSlider()},t.scope.onViewContentPackSelected=function(){return t.scope.navigation.showViewContentPackSlider()},t.scope.onO365PowerBISelected=function(){return t.goToO365PowerBISites()},t.scope.onPowerBISettingsSelected=function(){return t.openGeneralSettings()},t.scope.onManageGatewaysSelected=function(){return t.openManageGateways()},t.scope.onAdminPortalSelected=function(){return t.openAdminPortal()},t.scope.onManageEmbedSelected=function(){return t.manageEmbed()}}))},t.prototype.onNavigationBarMenuItemSelected=function(t){switch(t.action){case r.ContactSupport:this.showSupportWidget();break;case r.DownloadIOSApp:this.downloadIOSApp();break;case r.DownloadCompanionApp:this.logDownloadTelemetry(e.telemetry.DashboardDownloadCompanionApp);break;case r.OpenGeneralSettings:this.openGeneralSettings();break;case r.DownloadGateways:this.logDownloadTelemetry(e.telemetry.DashboardDownloadGateways);break;case r.DownloadExcelPublisher:this.logDownloadTelemetry(e.telemetry.DashboardDownloadExcelPublisher);break;case r.DownloadAnalyzeInExcelUpdates:this.downloadAnalyzeInExcelUpdates();break;case r.ShowAboutDialog:this.showAboutDialog();break;case r.ManageStorage:this.manageStorage();break;case r.UpgradeAccount:this.upgradeAccount();break;case r.SignOut:this.signOut();break;case r.PublishContentPack:this.scope.navigation.showPublishContentPackSlider();break;case r.ViewContentPack:this.scope.navigation.showViewContentPackSlider();break;case r.ManageEmbed:this.manageEmbed()}},t.prototype.shouldShowConceptualModel=function(){return this.services.featureSwitchService.featureSwitches.conceptualModelEnabled||this.services.featureSwitchService.featureSwitches.previewConceptualModel&&this.services.tutorialDataStore.hasKey(e.common.constants.previewConceptualModelNewKey)},t.EmailReplaceText="#EMAIL",t.DownloadDialogClass="noChrome",t.InnerAboutDialogTemplate='<div class="aboutPbiDialog"><div class="logo"></div><div class="info"><div class="title">{0}</div><div class="copyright">&copy;{1}</div><span class="field">{2}</span><span class="value">{{version}}</span><br><span class="field">{3}</span><span class="value">{4}</span><br><span class="field">{5}</span><span class="value">{6}</span><br><span class="field">{7}</span><span class="value">{8}</span></div></div>',t})();t.NavigationBarController=a})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.models.CollapsiblePaneExpandedWidth,o=e.dataServices.constants,r=e.common.contracts.Permissions,a=e.common.contracts.PublishOrRefreshStatus,n=e.common.constants.TaskPaneCollapsiblePaneMode;t.dashboardDeleteConfirmationTitle="Dashboard_DeleteConfirmationTitle",t.dashboardDeleteContentPackMessage="Dashboard_DeleteOrgAppContentPack",(function(e){e[e.NavigatorPaneGetDataButton=1]="NavigatorPaneGetDataButton",e[e.NavigatorPaneAddDatasetButton=2]="NavigatorPaneAddDatasetButton"})(t.GetDataInteractionButton||(t.GetDataInteractionButton={}));var s=t.GetDataInteractionButton;!(function(e){e[e.Group=0]="Group",e[e.Dashboard=1]="Dashboard",e[e.Report=2]="Report",e[e.Dataset=3]="Dataset"})(t.NavigationPaneSection||(t.NavigationPaneSection={}));var c=t.NavigationPaneSection;!(function(e){e[e.Dashboard=1]="Dashboard",e[e.Report=2]="Report",e[e.Dataset=3]="Dataset"})(t.DeleteContentPackMessageType||(t.DeleteContentPackMessageType={}));var l=t.DeleteContentPackMessageType;!(function(e){e[e.DisableHomeDashboard=0]="DisableHomeDashboard"})(t.HomeDashboardMenuAction||(t.HomeDashboardMenuAction={}));var d=t.HomeDashboardMenuAction;!(function(e){e[e.EditGroup=0]="EditGroup",e[e.ViewGroup=1]="ViewGroup",e[e.LeaveGroup=2]="LeaveGroup"})(t.GroupNavigationPaneMenuAction||(t.GroupNavigationPaneMenuAction={}));var p=(t.GroupNavigationPaneMenuAction,(function(){function p(t,i){var r=this;this.searchFilterEventDelay=1e3,this.pendingDatasetReadyNotification=[],this.groupLinkTypeToDisplayNameMap={},this.groupLinkTypeToLabelClassMap={},this.scope=t,this.services=i,this.scope.isPaneExpanded=this.services.featureSwitchService.featureSwitches.isE2Environment,this.scope.isDashboardsListExpanded=this.scope.isReportsListExpanded=this.scope.isDatasetsListExpanded=!0,this.scope.isGroupsListExpanded=!1,this.scope.showAddDashboardInputBox=!1,this.scope.navigatorPaneGetDataButton=s.NavigatorPaneGetDataButton,this.scope.navigatorPaneAddDatasetButton=s.NavigatorPaneAddDatasetButton,this.scope.groupSection=c.Group,this.scope.dashboardSection=c.Dashboard,this.scope.reportSection=c.Report,this.scope.groupService=this.services.groupService,this.scope.home=this.services.home,this.scope.datasetSection=c.Dataset,this.scope.reportService=this.services.reportService,this.scope.workbookService=this.services.workbookService,this.scope.modelService=this.services.modelService,this.scope.dashboardDataService=this.services.dashboardDataService,this.scope.impersonation=this.services.impersonationService,this.contentProviders=this.services.contentProviderHttpService.getBuiltInContentProviders(),this.scope.navigation=this.services.navigation,this.scope.homeDashboardEnabled=this.services.featureSwitchService.featureSwitches.homeDashboardEnabled,this.scope.favoritesEnabled=this.services.featureSwitchService.featureSwitches.favoritesEnabled,this.createHomeContextMenu(),this.scope.isInFavoritesView=function(){return r.isInFavoritesView()},this.createOwnershipFilterContextMenu(),this.scope.homeDashboardMenuItemSelected=function(e){return r.onHomeDashboardMenuItemSelected(e)},this.scope.ownershipFilterSelected=function(e){return r.onOwnershipFilterSelected(e)},this.scope.ownershipFilterFunction=function(e){return r.ownershipFilterFunction(e)},this.services.localizationService.ensureLocalization((function(){r.scope.addDashboardPlaceholder=r.services.localizationService.get("NewDashboard_AddDashboardLabelText")})),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.Calendar]=this.services.localizationService.get("GroupNavigationPaneContextMenuItem_Calendar"),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.Conversations]=this.services.localizationService.get("GroupNavigationPaneContextMenuItem_Conversations"),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.EditGroup]=this.services.localizationService.get("GroupNavigationPaneContextMenuItem_EditGroup"),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.Files]=this.services.localizationService.get("GroupNavigationPaneContextMenuItem_Files"),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.LeaveGroup]=this.services.localizationService.get("GroupNavigationPaneContextMenuItem_LeaveGroup"),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.Members]=this.services.localizationService.get("GroupNavigationPaneContextMenuItem_Members"),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.Notebook]=this.services.localizationService.get("GroupNavigationPaneContextMenuItem_Notebook"),this.groupLinkTypeToDisplayNameMap[e.common.contracts.GroupLinkType.ViewGroup]=this.services.localizationService.get("GroupNavigationPaneContextMenuItem_ViewGroup"),this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.Calendar]="calendar",this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.Conversations]="conversations",this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.EditGroup]="editGroup",this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.Files]="files",this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.LeaveGroup]="leaveGroup",this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.Members]="members",this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.Notebook]="notebook",this.groupLinkTypeToLabelClassMap[e.common.contracts.GroupLinkType.ViewGroup]="viewGroup",this.scope.isAddDashboardInputboxFocused=!1,this.scope.switchActiveDashboard=function(e){r.services.navigation.navigateToDashboardByGUID(e)},this.services.home.onHomeSettingChanged.push((function(){r.updateHomeIconColor()})),this.scope.switchToExternalContentViewerMode=function(e){r.switchToExternalContentViewerMode(e)},this.scope.canWrite=function(){return!r.services.permissionService.isActiveWorkspaceIsReadOnly},this.scope.openModel=function(t){return null!=t.contract.packagePublishStatus&&t.contract.packagePublishStatus!==a.FinishedSuccessfully&&t.contract.packagePublishStatus!==a.RefreshInProgress&&t.contract.packagePublishStatus!==a.RefreshError?void(t.contract.packagePublishStatus===a.PublishError&&r.deleteModelOnPublishFailure(t.id)):(t.isNew=t.contract.isNew=!1,r.services.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.OpenDataset)||(t.getPermissions()&e.common.models.ReportPermissions.CopyOnWrite)!==e.common.models.ReportPermissions.CopyOnWrite&&r.services.navigation.navigateToDatasetByDBName(t.dbName),void(r.scope.isOnHome=!1))},this.scope.navigateToStreamingDatasets=function(){r.services.navigation.navigateToStreamingDatasets(0)},this.scope.openReport=function(e){if(e.isNew=!1,null!=e.packagePublishStatus&&e.packagePublishStatus!==a.FinishedSuccessfully&&e.packagePublishStatus!==a.RefreshInProgress&&e.packagePublishStatus!==a.RefreshError)return void(e.packagePublishStatus===a.PublishError&&r.deleteReportOnPublishFailure(e.id));var t=e.contract&&e.contract.originalReportObjectId;r.services.navigation.navigateToReportByGUID(e.objectId,r.services.groupService.activeGroupObjectId,t),r.scope.isOnHome=!1},this.scope.navigateToFavorites=function(){r.services.navigation.navigateToFavorites(),r.scope.isOnHome=!1},this.scope.viewWorkbook=function(e){if(e.isNew=!1,r.services.featureSwitchService.featureSwitches.embedFullFidelityWorkbooks){var t=r.services.workbookService.getWorkbookUniqueId(e);r.services.navigation.navigateToWorkbookByUrlId(t)}else r.services.rootScope.$emit(o.workbook.openWorkbookContextMenuEventName,e)},this.scope.searchFilterChanged=function(){r.searchFilterPromise&&r.services.timeout.cancel(r.searchFilterPromise),r.searchFilterPromise=r.services.timeout((function(){var t=r.scope.viewModel.dashboards?r.scope.viewModel.dashboards.length:0,i=r.services.reportService.reports?r.services.reportService.reports.length:0,o=r.scope.modelService.models?r.scope.modelService.models.length:0,a=r.services.telemetryService;a.logEvent(e.telemetry.DashboardFilterNavigatorPaneItems,t,i,o),r.searchFilterPromise=null}),r.searchFilterEventDelay)},this.scope.toggleNavigationPane=function(){return r.toggleNavigationPane()},this.scope.toggleNavigationPaneSection=function(e){return r.toggleNavigationPaneSection(e)},this.scope.navigateToHome=function(){r.services.navigation.navigateToHomeDashboard(!1),r.scope.isOnHome=!0,r.searchFilter=""},this.scope.$watch("groupService.isInGroupTransition",(function(){r.scope.isDashboardsListExpanded=r.scope.isReportsListExpanded=r.scope.isDatasetsListExpanded=!r.services.groupService.isInGroupTransition})),this.scope.$watch("impersonation.impersonating",(function(){r.searchFilter="",r.scope.selectedOwnershipFilter=r.scope.ownershipFilterContextMenuItems[0]})),this.scope.$on(e.constants.renameModelEventName,(function(e,t,i,o){e.stopPropagation(),e.preventDefault(),r.services.modelService.renameModel(t,i,o)})),this.scope.$on(e.constants.openModelEventName,(function(e,t,i){e.stopPropagation(),e.preventDefault();var o=r.services.modelService.findModel(t,i);r.scope.openModel(o)})),this.scope.$on(e.constants.showInsightsEventName,(function(t,i,o){t.stopPropagation(),t.preventDefault();var a=r.services.modelService.findModel(i,o);r.showInsightsContainer(a.dbName,a.vsName,o,e.insights.constants.insightsSourceNavigationPane)})),this.scope.$on(e.constants.openReportEventName,(function(e,t){e.stopPropagation(),e.preventDefault();var i=r.services.reportService.findReport(t);r.scope.openReport(i)})),this.scope.$on(e.constants.replaceLocalWorkbookEventName,(function(t,i){t.stopPropagation(),t.preventDefault(),r.services.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.GetData)||r.services.workbookService.replaceLocalWorkbook(i)})),this.scope.$on(o.workbook.viewWorkbookEventName,(function(e,t,i){e.stopPropagation(),e.preventDefault();var o=r.services.workbookService.findWorkbook(t,i);r.scope.viewWorkbook(o)})),this.scope.$on(e.constants.deleteReportEventName,(function(e,t){e.stopPropagation(),e.preventDefault(),r.deleteReport(t)})),this.scope.$on(o.workbook.removeWorkbookEventName,(function(e,t,i){e.stopPropagation(),e.preventDefault();var o=r.services.workbookService.findWorkbook(t.id,t.packageId);o&&o.isUsedByContentPack?r.services.contentPackService.showDialogOnWorkbookRemoveInContentPack(t.id):r.removeWorkbook(o,i)})),this.scope.$on(e.constants.deleteModelEventName,(function(e,t,i,o){e.stopPropagation(),e.preventDefault();var a=r.services.modelService.findModel(t,i);a&&a.isUsedByContentPack?r.services.contentPackService.showDialogOnModelDeleteInContentPack(t):r.deleteModel(t,i,o)})),this.services.rootScope.$on(e.constants.groupAddedUpdateContextMenuEventName,(function(e,t){e.stopPropagation();var i=r.services.groupService.getGroup(t);r.bindGroupNavigationPaneMenu(i)})),this.services.rootScope.$on(e.dataServices.constants.packagePublishedSuccessfullyEventName,(function(e,t){var i=r.findDashboardsByPackageId(t);if(1===i.length&&i[0].isNew&&1===i[0].contract.packageIds.length&&!i[0].isNotified)r.notifyNewDashboardIsReady(i[0]);else{var o=r.services.modelService.findModelByPackageId(t);o?r.notifyNewDatasetIsReady(o,t):(r.pendingDatasetReadyNotification.push(t),r.unregisterModelWatch||(r.unregisterModelWatch=r.scope.$watch((function(){return r.services.modelService.lastUpdatedTimestamp}),(function(){r.pendingDatasetReadyNotification=_.filter(r.pendingDatasetReadyNotification,(function(e){var t=r.services.modelService.findModelByPackageId(e);return!t||(r.notifyNewDatasetIsReady(t,e),!1)})),_.isEmpty(r.pendingDatasetReadyNotification)&&(r.unregisterModelWatch(),r.unregisterModelWatch=null)}))))}})),this.scope.activeAddDashboard=function(){return r.activeAddDashboard()},this.scope.addDashboard=function(e){r.scope.showAddDashboardInputBox=!1,r.services.dashboardService.addDashboard(e)},this.scope.isDashboardNameValid=function(e){return!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(e)},this.scope.$on(e.common.constants.textInputOnBlurEventName,(function(e){
r.scope.showAddDashboardInputBox=!1})),this.scope.reportsResourceList=function(){var t=[];t=t.concat(r.scope.reportService.copyAndEditReports),e.common.featureSwitchService.featureSwitches.fullFidelityExcelEnabled&&(t=t.concat(r.scope.workbookService.copyAndEditWorkbooks));var i=r.services.impersonationService;return i.impersonating&&(t=_.filter(t,(function(e){return e.modelId===i.getImpersonationState().modelId}))),t},this.services.appMetadataService.getAppMetadata().then((function(e){r.initializeArchivedContentLink(e),r.bindGroupNavigationPaneMenu(r.services.groupService.activeGroup)})),this.scope.switchGroup=function(e){r.scope.isGroupsListExpanded=!1,r.switchGroup(e)},this.scope.addGroup=function(){return r.addGroup()},this.scope.isListOfGroupsExpanded=!1,this.services.rootScope.$on(o.onDatasetAddedEventName,(function(e,t){var i=r.scope.viewModel.contract.models,o=!1;if(i){for(var a=i.length,n=0;n<a;n++)if(i[n].id===t.id&&i[n].packageId===t.packageId){i[n]=t,o=!0;break}o||i.push(t)}})),this.services.rootScope.$on(e.common.constants.navigation.stateChangeSuccess,(function(e,t,i,o,a){return r.updateHomeIconColor()}))}return p.createOptions=function(){return{additionalServices:["appMetadataService","contentPackService","contentProviderHttpService","dashboardService","dashboardDataService","errorService","featureSwitchService","groupService","home","impersonationService","insightsService","localizationService","modalDialogService","modelConverter","modelHttpService","modelService","navigation","notificationToast","overlayService","ownership","packageService","permissionService","reportService","quota","syncService","telemetryService","userInfo","viralTenantMergeHelperService","workbookService"]}},p.prototype.isInFavoritesView=function(){return this.services.navigation.inFavoritesView()},p.prototype.createHomeContextMenu=function(){var e=[];e.push({text:this.services.localizationService.get("NavigationPane_DisableFeaturedDashboard"),action:d.DisableHomeDashboard,type:DropDownMenuItemType.Item}),this.scope.homeDashboardMenuItems=e},p.prototype.createOwnershipFilterContextMenu=function(){this.scope.ownershipFilterContextMenuItems=[{text:this.services.localizationService.get("NavigationPane_OwnershipFilterAllContent"),filter:e.models.OwnershipFilterMenuFilter.AllContent},{text:this.services.localizationService.get("NavigationPane_OwnershipFilterMyContent"),filter:e.models.OwnershipFilterMenuFilter.MyContent},{text:this.services.localizationService.get("NavigationPane_OwnershipFilterSharedWithMe"),filter:e.models.OwnershipFilterMenuFilter.SharedWithMe}],this.scope.selectedOwnershipFilter=this.scope.ownershipFilterContextMenuItems[0]},p.prototype.ownershipFilterFunction=function(t){var i=this;return function(o){switch(t){case e.models.OwnershipFilterMenuFilter.AllContent:return!0;case e.models.OwnershipFilterMenuFilter.MyContent:return!i.services.ownership.isResourceSharedWithMe(o);case e.models.OwnershipFilterMenuFilter.SharedWithMe:return i.services.ownership.isResourceSharedWithMe(o)}}},p.prototype.updateHomeIconColor=function(){this.scope.isOnHome=this.services.home.isOnHomeDashboard(this.services.navigation.currentDashboardGUID)},p.prototype.onHomeDashboardMenuItemSelected=function(e){switch(e.action){case d.DisableHomeDashboard:this.services.home.disableHomeDashboard()}},p.prototype.onOwnershipFilterSelected=function(t){this.scope.selectedOwnershipFilter=t,this.services.groupService.activeGroup.lastOwnershipFilter=t.filter,this.services.telemetryService.logEvent(e.telemetry.DashboardOwnershipFilterSelected,e.models.OwnershipFilterMenuFilter[t.filter],this.services.groupService.isMyWorkspace())},p.prototype.initializeArchivedContentLink=function(e){var t=this;this.scope.showArchivedContentLink=!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(e.previousTenantId),this.scope.showArchivedContentLink&&(this.scope.viewArchivedContent=function(){t.scope.navigation.toggleArchivedContent(e.previousTenantId)})},p.prototype.notifyNewDashboardIsReady=function(t){var i=this,o={description:t.displayName,displayText:this.services.localizationService.get("ToastNotification_GoToDashboard"),action:function(){i.services.navigation.navigateToDashboardByGUID(t.objectId)}};this.services.notificationToast.notify({title:this.services.localizationService.get("Publish_Success"),message:this.services.localizationService.get("NotificationMessage_NewDashboardCreatedTitle"),notificationType:e.common.NotificationToastType.Success,actionButtons:[o]}),t.isNotified=!0},p.prototype.notifyNewDatasetIsReady=function(t,i){var o=this,a=this.services.dashboardDataService.activeDashboard;if(t&&t.isNew&&!t.isHidden&&(t.getPermissions()&r.All)===r.All&&t.contract.insightsSupported&&a&&!a.isUsedByContentPack){var n,s={displayText:this.services.localizationService.get("DatasetUploadedToast_ExploreInsights"),action:function(){o.showInsightsContainer(t.dbName,t.vsName,i,e.insights.constants.insightsSourceToast)}},c={displayText:this.services.localizationService.get("DatasetUploadedToast_ViewDataset"),action:function(){var e=o.services.modelService.findModel(t.id,i);o.scope.openModel(e)}};n=this.services.notificationToast.notify({title:this.services.localizationService.get("DatasetUploadedToast_ReadyToExploreTitle"),message:this.services.localizationService.get("DatasetUploadedToast_ReadyToExploreSubtitle"),notificationType:e.common.NotificationToastType.Success,actionButtons:[c],actionLinks:[s],sticky:!0})}},p.prototype.activeAddDashboard=function(){this.services.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.AddDashboard)||(this.scope.isDashboardsListExpanded=!0,this.scope.showAddDashboardInputBox||(this.scope.showAddDashboardInputBox=!0,this.scope.isAddDashboardInputboxFocused=!0))},p.prototype.findDashboardsByPackageId=function(e){return _.filter(this.scope.viewModel.dashboards,(function(t){return t.contract.packageIds&&t.contract.packageIds.indexOf(e)>=0}))},p.prototype.switchToExternalContentViewerMode=function(t){if(!angular.isUndefined(t)&&t){var i;switch(t){case s.NavigatorPaneGetDataButton:i=e.telemetry.OpenGetDataPageInteraction.NavigatorPaneGetDataButton;break;case s.NavigatorPaneAddDatasetButton:i=e.telemetry.OpenGetDataPageInteraction.NavigatorPaneAddDatasetButton;break;default:i=null}this.services.telemetryService.logEvent(e.telemetry.DashboardOpenGetDataPage,i)}this.services.navigation.showGetDataSlider()},p.prototype.deleteReport=function(e){var t=this,i=this.services.rootScope.$new(),o=this.services.errorService.control(),r=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Delete"),function(i,r){o.hideDialog(),t.services.reportService.deleteReport(e),t.scope.currentReport&&t.scope.currentReport.id===e&&t.services.navigation.navigateToActiveDashboard()}),new InJs.ModalDialogAction(this.services.localizationService.get("PBI_Button_Label_Cancel"),function(e,t){o.hideDialog()})],a=this.services.reportService.findReport(e);i.message=this.services.localizationService.format("Report_DeleteConfirmationMessage",[a.displayName]);var n,s,c=this.services.dashboardService.hasTileForReportandSection(void 0,e);c&&(n=jsCommon.ModalDialogNotificationType.Warning,s=this.services.localizationService.get("PinLiveReport_DeleteReportWarning"));var l={dialogName:this.services.localizationService.get("Report_DeleteConfirmationTitle"),isDismissable:!0,scope:i,template:"<custom-modal-dialog></custom-modal-dialog>",dialogCssClass:"customModalDialog",focusOnFirstButton:!0,dialogActions:r,notificationType:n,notificationText:s};this.services.modalDialogService.showLegacyWebModalDialog(l)},p.prototype.removeWorkbook=function(e,i){var o,r,a=this;switch(i){case l.Dashboard:o=t.dashboardDeleteConfirmationTitle,r=t.dashboardDeleteConfirmationTitle;break;default:o="Workbook_RemoveConfirmationTitle",r=e.isOwner()?this.services.packageService.isLocalWorkbook(e.packageId)?"Workbook_RemoveOwnedLocalConfirmationMessage":"Workbook_RemoveOwnedRemoteConfirmationMessage":e.isPersonalized()?"Workbook_RemovePersonalizedConfirmationMessage":"Workbook_RemoveInOrgPackConfirmationMessage"}var n=this.services.localizationService.get(o),s=this.services.localizationService.get(r),c=this.services.errorService.control(),d=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Remove"),function(t,i){c.hideDialog(),a.services.workbookService.removeWorkbook(e.id,e.packageId,a.services.packageService.getWorkbookStorageProvider(e.packageId),a.services.packageService.getWorkbookContentProvider(e.packageId)),a.scope.currentWorkbook&&a.scope.currentWorkbook.id===e.id&&a.scope.currentWorkbook.packageId===e.packageId&&a.services.navigation.navigateToActiveDashboard()}),new InJs.ModalDialogAction(this.services.localizationService.get("PBI_Button_Label_Cancel"),function(e,t){c.hideDialog()})];c.showCustomDialog(n,$("<div/>").text(s),d,(function(e){e.parent().find('input[value="'+a.services.localizationService.get("PBI_Button_Label_Cancel")+'"]').focus()}),!0)},p.prototype.deleteModel=function(e,i,o){var r,a,n=this,s=this.services.errorService.control(),c=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Delete"),function(t,o){s.hideDialog();var r=n.scope.currentReport&&!!n.services.reportService.findReport(n.scope.currentReport.id),a=n.services.modelService.findModel(e,i),c=a?a.dbName:null,l=n.services.navigation;n.services.modelService.deleteModel(e,i),(n.scope.currentReport&&n.scope.currentReport.id===e||r&&!n.services.reportService.findReport(n.scope.currentReport.id)||l.inInsightsView()&&l.insightsDataGUID===c||l.inRowLevelSecurityView()&&l.rowLevelSecurityModelId===a.id)&&l.navigateToActiveDashboard()}),new InJs.ModalDialogAction(this.services.localizationService.get("PBI_Button_Label_Cancel"),function(e,t){s.hideDialog()})],d=this.services.modelService.findModel(e,i);switch(o){case l.Dashboard:r=this.services.localizationService.get(t.dashboardDeleteConfirmationTitle),a=this.services.localizationService.get(t.dashboardDeleteContentPackMessage);break;case l.Report:r=this.services.localizationService.get("Report_DeleteConfirmationTitle"),a=this.services.localizationService.get("Report_DeleteOrgAppContentPack");break;case l.Dataset:r=this.services.localizationService.get("Model_DeleteConfirmationTitle"),a=this.services.localizationService.get("Model_DeleteOrgAppContentPack");break;default:r=this.services.localizationService.get("Model_DeleteConfirmationTitle"),a=this.services.localizationService.format("Model_DeleteConfirmationMessage",[d.displayName])}s.showCustomDialog(r,$("<div/>").text(a),c,(function(e){e.parent().find('input[value="'+n.services.localizationService.get("PBI_Button_Label_Cancel")+'"]').focus()}),!0)},p.prototype.showInsightsContainer=function(t,i,o,r){var a=this,n=this.services.modelService.findModelByDBName(t,o),s=this.services.insightsService.getInsightsStatus(n.contract);if(2===s)this.services.navigation.showInsightsPanel(t,r);else if(0===s){var c=e.telemetry.InsightEntryPoint.NavigationPane;r===e.insights.constants.insightsSourceToast&&(c=e.telemetry.InsightEntryPoint.Notification);var l=this.services.telemetryService.startEvent(e.telemetry.InsightsShowInsights,0,c,n.contract.contentProviderId,e.getHashCode(n.contract.dbName),!1);this.services.insightsService.getInsights(!0,e.insights.services.RequestType.Initial,n.contract,c,e.insights.proxies.wireContracts.RequestOptions.ThoroughMode,l.event,null,null,null,null,!1).then((function(t){var i=t.insightsContainers,o=i?i.length:0;l.event.info.insightCount=o,t.isError&&o<=0?l.reject():l.resolve(),a.scope.$emit(e.insights.constants.insightsLoadedEventName,n,o>0)}))}},p.prototype.toggleNavigationPane=function(){var t=this.scope.isPaneExpanded?e.telemetry.NavPaneToggleAction.Collapse:e.telemetry.NavPaneToggleAction.Expand;this.scope.isPaneExpanded=!this.scope.isPaneExpanded,localStorage.collapseNavigation=(!this.scope.isPaneExpanded).toString(),this.services.telemetryService.logEvent(e.telemetry.DashboardExpandCollapseNavigatorPane,t),this.scope.updateWindowIfNeeded&&this.scope.updateWindowIfNeeded(),this.scope.isOnHome=this.services.home.isOnHomeDashboard(this.services.navigation.currentDashboardGUID)},p.prototype.toggleNavigationPaneSection=function(t){var i=this;switch(t){case c.Dashboard:this.toggleNavigationPaneSectionWithTelemetryEvent(this.scope.isDashboardsListExpanded,e.telemetry.NavPaneSection.Dashboards,(function(){i.scope.isDashboardsListExpanded=!i.scope.isDashboardsListExpanded}));break;case c.Report:this.toggleNavigationPaneSectionWithTelemetryEvent(this.scope.isReportsListExpanded,e.telemetry.NavPaneSection.Reports,(function(){i.scope.isReportsListExpanded=!i.scope.isReportsListExpanded}));break;case c.Dataset:this.toggleNavigationPaneSectionWithTelemetryEvent(this.scope.isDatasetsListExpanded,e.telemetry.NavPaneSection.Datasets,(function(){i.scope.isDatasetsListExpanded=!i.scope.isDatasetsListExpanded}));break;case c.Group:this.toggleNavigationPaneSectionWithTelemetryEvent(this.scope.isGroupsListExpanded,e.telemetry.NavPaneSection.Datasets,(function(){i.scope.isGroupsListExpanded=!i.scope.isGroupsListExpanded,i.scope.isListOfGroupsExpanded=!1}))}},p.prototype.toggleNavigationPaneSectionWithTelemetryEvent=function(t,i,o){var r=this.scope.viewModel.dashboards?this.scope.viewModel.dashboards.length:0,a=this.services.reportService.reports?this.services.reportService.reports.length:0,n=this.scope.modelService.models?this.scope.modelService.models.length:0,s=this.services.telemetryService.startEvent(e.telemetry.DashboardExpandCollapseNavigatorPaneSection,t?e.telemetry.NavPaneToggleAction.Collapse:e.telemetry.NavPaneToggleAction.Expand,i,r,a,n);o&&o(),s.resolve()},p.prototype.deleteReportOnPublishFailure=function(e){var t=this;this.deleteItemOnPublishFailure(this.services.localizationService.get("NavigationPane_ReportPublishErrorTitle"),this.services.localizationService.get("NavigationPane_ReportPublishErrorContent"),(function(){t.services.reportService.deleteReport(e)}))},p.prototype.deleteModelOnPublishFailure=function(e){var t=this;this.deleteItemOnPublishFailure(this.services.localizationService.get("NavigationPane_ModelPublishErrorTitle"),this.services.localizationService.get("NavigationPane_ModelPublishErrorContent"),(function(){t.services.modelService.deleteModel(e)}))},p.prototype.deleteItemOnPublishFailure=function(e,t,i){var o=this,r=this.services.errorService.control(),a=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Delete"),function(e,t){r.hideDialog(),i()}),new InJs.ModalDialogAction(this.services.localizationService.get("PBI_Button_Label_Cancel"),function(e,t){r.hideDialog()})];r.showCustomDialog(e,$("<div/>").text(t),a,(function(e){e.parent().find('input[value="'+o.services.localizationService.get("PBI_Button_Label_Cancel")+'"]').focus()}),!0)},p.prototype.addGroup=function(){this.services.viralTenantMergeHelperService.viewingDataFromMergedViralTenant()?this.services.viralTenantMergeHelperService.displayFeatureDisabledErrorMessage("ArchivedContent_ErrorMessageGroup"):this.isGroupFeatureEnabled()?this.scope.$emit(e.constants.showTaskPaneSlider,n.GroupEditorCreate,i.Large):this.services.groupService.showGroupUpsellMessage(e.telemetry.LicenseEnforcementOperation.CreateGroups)},p.prototype.switchGroup=function(t){t.aadGroupId!==this.services.groupService.activeGroupObjectId&&(t.isMyWorkspace||this.isGroupFeatureEnabled()?(this.bindGroupNavigationPaneMenu(t),this.services.navigation.navigateToGroupByGUID(t.aadGroupId)):this.services.groupService.showGroupUpsellMessage(e.telemetry.LicenseEnforcementOperation.SwitchGroups))},p.prototype.isGroupFeatureEnabled=function(){return this.services.userInfo.isPremiumUser},p.prototype.bindGroupNavigationPaneMenu=function(e){var t=e.lastOwnershipFilter;this.scope.selectedOwnershipFilter=_.find(this.scope.ownershipFilterContextMenuItems,(function(e){return e.filter===t}))},p})());t.NavigationPaneController=p})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.constants,o=e.common.contracts.Permissions,r=(function(){function r(t,i){var o=this;this.scope=t,this.services=i,this.dashboardModel=t.viewModel,this.model=new e.models.DashboardNavigationPaneListItemModel(this.dashboardModel),this.updateDashboardMetadata(),this.model.actions=r.getDashboardActions(this.scope,this.services,this.model,this.dashboardModel),this.model.icon=this.services.ownership.isResourceSharedWithMe(this.dashboardModel)?e.models.NavigationPaneListItemIcon.Shared:this.model.icon=e.models.NavigationPaneListItemIcon.None,this.scope.model=this.model,this.scope.showContextMenu=!1,this.scope.tooltipConfig={tooltipLocalizeDescription:"NavigationPane_RefreshError",tooltipArrowPosition:e.common.ArrowPosition.arrowTopLeft},this.scope.rename=function(t){o.scope.$emit(e.constants.renameDashboardEventName,t,o.scope.model.source.id)},this.scope.isContextMenuEnabled=function(){return!o.services.permissionService.isActiveWorkspaceIsReadOnly},this.scope.isNameValid=function(e){return!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(e)},this.scope.$on(e.common.constants.editableLabelOnBlurEventName,(function(e){o.scope.model.isNameEditable=!1}));var a=this.services.rootScope.$on(e.constants.notifyDashboardOwnerInfoLoaded,(function(){a(),a=null,o.updateDashboardMetadata()}));this.services.rootScope.$on("$destroy",(function(){a&&a()}))}return r.createOptions=function(){return{additionalServices:["navigation","localizationService","quota","groupService","featureSwitchService","permissionService","workbookService","dashboardService","ownership"]}},r.prototype.updateDashboardMetadata=function(){var t=this,i=this.model.metadata=[];this.dashboardModel.hasOwnerInfo()&&i.push({name:"ownerInfo",type:e.common.models.ContextMenuItemMetadataType.Link,label:this.services.localizationService.get("DashboardContextMenu_OwnedBy").toLocaleUpperCase(),linkUrl:function(){return jsCommon.StringExtensions.format("mailto:{0}",t.dashboardModel.ownerMail)},linkText:function(){return t.dashboardModel.ownerMail},value:function(){return t.dashboardModel.ownerFullname?jsCommon.StringExtensions.format("{0} -",t.dashboardModel.ownerFullname):""},linkTarget:"_self"})},r.getDashboardActions=function(a,n,s,c){var l=[];return n.localizationService.ensureLocalization((function(){l.push({text:n.localizationService.get("DashboardContextMenu_Open"),action:function(){n.navigation.navigateToDashboardByGUID(c.objectId)}});var d=(c.getPermissions()&o.ReShare)===o.ReShare;d&&l.push({text:n.localizationService.get("DashboardContextMenu_Share"),action:function(){n.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.ShareDashboard)||n.navigation.showShareSlider(c.objectId,n.groupService.activeGroupObjectId)}}),(c.getPermissions()&o.All)===o.All||(c.getPermissions()&o.ReadWrite)===o.ReadWrite?(l.push({text:n.localizationService.get("DashboardContextMenu_Rename"),action:function(){s.isNameEditable=!0}}),l.push({text:n.localizationService.get("DashboardContextMenu_Delete"),action:function(){n.dashboardService.promptForDeleteDashboard(c.id,!0)}}),l.push({text:n.localizationService.get("DashboardContextMenu_Settings"),action:function(){n.navigation.showSettingsSlider(e.models.SettingsGroupsType.Dashboards,c.objectId)}})):(c.getPermissions()&o.CopyOnWrite)===o.CopyOnWrite?(l.push({text:n.localizationService.get("ContextMenu_Personalize"),action:function(){a.$emit(e.constants.personalizeEventName,c.contract.originalPackageId)}}),l.push({text:n.localizationService.get("DashboardContextMenu_Delete"),action:function(){if(c.contract.modelIds[0])a.$emit(e.constants.deleteModelEventName,c.contract.modelIds[0],c.contract.originalPackageId,t.DeleteContentPackMessageType.Dashboard);else if(c.contract.workbookIds[0]){var o=n.workbookService.findWorkbook(c.contract.workbookIds[0],c.contract.originalPackageId);a.$emit(i.workbook.removeWorkbookEventName,o,t.DeleteContentPackMessageType.Dashboard)}}})):l.push({text:n.localizationService.get("DashboardContextMenu_Remove"),action:function(){n.dashboardService.promptForDeleteDashboard(c.id,!1)}});var p=n.location.search()[r.isDasboardExportAllowedQueryString];p&&"1"===p&&l.push({text:n.localizationService.get("DashboardContextMenu_Export"),action:function(){var e=n.location.search()[r.packageTypeString];e||(e="XMLA"),n.dashboardService.exportDashboard(c.id,e)}})})),l},r.isDasboardExportAllowedQueryString="exportallowed",r.packageTypeString="packageType",r})();t.DashboardNavigationPaneListItemController=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=jsCommon.EnumExtensions,o=e.common.helpers.ModelConverterHelper,r=e.common.contracts.Permissions,a=e.common.contracts.PublishOrRefreshStatus,n=(function(){function n(t,i){var o=this;this.scope=t,this.services=i,this.datasetContractModel=t.viewModel,this.datasetModel=t.viewModel,this.model=new e.models.DatasetNavigationPaneListItemModel(this.datasetContractModel),this.refreshDatasetModel={},this.model.historyDialogParameters=this.services.historyDialogService.historyDialogParameters,this.scope.showHistoryDialog=function(){return o.showHistoryDialog(o.refreshDatasetModel)},this.model.metadata=this.getDatasetMetadata(this.datasetContractModel),this.datasetContractPackage=this.services.packageService.findPackage(this.datasetContractModel.packageId),this.scope.model=this.model,this.scope.showContextMenu=!1,this.scope.tooltipConfig={tooltipLocalizeDescription:"NavigationPane_RefreshError",tooltipArrowPosition:e.common.ArrowPosition.arrowTopLeft},this.scope.isRefreshInProgress=function(){return o.isRefreshInProgress()},this.scope.rename=function(t){o.scope.$emit(e.constants.renameModelEventName,t,o.scope.model.source.id,o.scope.model.source.packageId)},this.scope.isNameValid=function(e){return!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(e)},this.scope.isContextMenuEnabled=function(){return o.getDatasetMetadata(o.datasetContractModel,o.model.metadata),1!==o.model.source.packagePublishStatus},this.scope.$on(e.common.constants.editableLabelOnBlurEventName,(function(e){o.scope.model.isNameEditable=!1})),this.model.icon=this.services.ownership.isResourceSharedWithMe(this.datasetContractModel)?e.models.NavigationPaneListItemIcon.Shared:this.model.icon=e.models.NavigationPaneListItemIcon.None,t.$watch((function(){return o.datasetContractModel.currentRefreshStartingTime}),(function(){o.updateDatasetMetadata()})),this.scope.showRefreshErrorDialog=function(){o.showRefreshErrorDialog()},this.scope.showRefreshError=function(){return o.showRefreshError()},this.scope.showIcon=function(){return o.showIcon()},this.scope.getPackagePublishStatus=function(){return o.getPackagePublishStatus()}}return n.createOptions=function(){return{additionalServices:["refreshService","errorService","modelConverter","modelHttpService","telemetryService","localizationService","navigation","modelService","packageService","historyDialogService","featureSwitchService","insightsService","analyzeInExcel","modalDialogService","ownership","rowLevelSecurity","groupService","permissionService"]}},n.prototype.getPackagePublishStatus=function(){var t=this.services.modelService.findModel(this.model.source.id,this.model.source.packageId);return t?t.packagePublishStatus:e.common.contracts.PublishOrRefreshStatus.FinishedSuccessfully},n.prototype.showIcon=function(){var t=this.services.modelService.findModel(this.model.source.id,this.model.source.packageId);return!!t&&(t.packagePublishStatus!==e.common.contracts.PublishOrRefreshStatus.PublishError&&t.contract.lastRefreshStatus!==e.common.contracts.PublishOrRefreshStatus.RefreshError)},n.prototype.showRefreshError=function(){var t=this.services.modelService.findModel(this.model.source.id,this.model.source.packageId);return!!t&&(t.packagePublishStatus===e.common.contracts.PublishOrRefreshStatus.RefreshError||t.contract.lastRefreshStatus===e.common.contracts.PublishOrRefreshStatus.RefreshError)},n.prototype.displaySuccessHistoryResult=function(e){if(!_.isEmpty(e)){var i=t.SettingsDatasetController.getFriendlyErrorMessage(e[0].serviceExceptionJson),o=this.parseAdditionalErrorInfo(e[0].serviceExceptionJson);this.services.errorService.errorNoDefaultAdditionalErrorInfo(i,"RefreshFailure",{displayableErrorInfo:o})}},n.prototype.displayErrorHistoryResult=function(){this.services.errorService.error(this.services.localizationService.get("RefreshError_Unknown"),"RefreshFailure_FailedToGetHistories")},n.prototype.processModelAndPackageRefreshHistories=function(e,t){var i=this;this.services.modelHttpService.getPackageRefreshHistories(this.datasetContractModel.packageId.toString(),e.event).then((function(r){var a;if(!t||_.isEmpty(t.data)||t.data[0].isSuccessful)a=!1;else if(_.isEmpty(r.data)||r.data[0].isSuccessful)a=!0;else{var n=o.convertRefreshTimeToJsDateTime(t.data[0].endTime).getTime(),s=o.convertRefreshTimeToJsDateTime(r.data[0].endTime).getTime();a=n>s}a?i.displaySuccessHistoryResult(t.data):i.displaySuccessHistoryResult(r.data),e.resolve()}),(function(o){t?(i.displaySuccessHistoryResult(t.data),e.resolve()):(i.displayErrorHistoryResult(),e.reject())}))},n.prototype.showRefreshErrorDialog=function(){var t=this,i=this.services.modelHttpService,o=this.services.telemetryService,r=o.startEvent(e.telemetry.DashboardGetRefreshHistoriesOnRefreshFailures);this.datasetModel.contract.lastRefreshStatus===a.RefreshError&&this.datasetModel.contract.packagePublishStatus===a.RefreshError?i.getModelRefreshHistories(this.datasetContractModel.id.toString(),r.event).then((function(e){t.processModelAndPackageRefreshHistories(r,e)}),(function(e){t.processModelAndPackageRefreshHistories(r)})):this.datasetModel.contract.lastRefreshStatus===a.RefreshError?i.getModelRefreshHistories(this.datasetContractModel.id.toString(),r.event).then((function(e){t.displaySuccessHistoryResult(e.data),r.resolve()}),(function(e){t.displayErrorHistoryResult(),r.reject()})):this.datasetModel.contract.packagePublishStatus===a.RefreshError&&i.getPackageRefreshHistories(this.datasetContractModel.packageId.toString(),r.event).then((function(e){t.displaySuccessHistoryResult(e.data),r.resolve()}),(function(e){t.displayErrorHistoryResult(),r.reject()}))},n.prototype.parseAdditionalErrorInfo=function(e){var i=t.SettingsDatasetController.convertErrorDetailsJson(e),o=[];return i.forEach((function(e){o.push({errorInfoKey:e.Name,errorInfoValue:e.Value})})),o},n.prototype.isRefreshInProgress=function(){var e=this.services.modelService.findModel(this.datasetContractModel.id,this.datasetContractModel.packageId);return!!e&&e.isRefreshInProgress},n.prototype.updateDatasetMetadata=function(){this.getDatasetMetadata(this.datasetContractModel,this.model.metadata)},n.prototype.getDatasetMetadata=function(t,i){var r=this,a=this.services.refreshService,s=this.services.modelConverter,c=this.services.localizationService,l=this.services.historyDialogService,d=[],p=function(o){t.contentProviderId=o.contentProviderId,t.onPremModelConnectionString=o.onPremModelConnectionString,t.directQueryMode=o.directQueryMode,t.currentRefreshStartingTime=o.currentRefreshStartingTime,t.refreshSchedule=o.refreshSchedule,t.refreshHistories=o.refreshHistories,t.insightsSupported=o.insightsSupported,t.storageProviderType=o.storageProviderType,d=t.onPremModelConnectionString?n.addRefreshInfoForOnPremAnalysisServicesToMetadata(i):t.directQueryMode?n.addRefreshInfoForDirectQueryModel(i):n.addRefreshStatusToMetadata(s,o,c,l,r.refreshDatasetModel,i),a.isModelRefreshInProgress(o)?n.updateMetadataValue(i,"refreshInProgress",e.common.models.ContextMenuItemMetadataType.Text,(function(){return c.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_RefreshInProgress")})):n.deleteMetadataItem(i,"refreshInProgress",e.common.models.ContextMenuItemMetadataType.Text)},u=this.services.modelService.findModel(t.id,t.packageId);return u&&(this.setMissingPropertiesOnContractModelFromPackage(u),p(u.contract),this.refreshDatasetModel.dataset=o.convertModelToDataset(u.contract),this.model.actions=this.getDatasetActions(this.datasetContractModel,this.datasetContractPackage)),d},n.prototype.setMissingPropertiesOnContractModelFromPackage=function(e){var t=this.services.packageService.findPackage(e.packageId);t&&(void 0===e.contract.storageProviderType&&(e.contract.storageProviderType=t.contract.storageProviderType),e.contract.isPackageRefreshEnabled=t.contract.IsRefreshEnabled)},n.prototype.getDatasetActions=function(o,a){var n=this,s=[];return this.services.localizationService.ensureLocalization((function(){var c=n.services.featureSwitchService,l=n.services.localizationService,d=n.services.telemetryService,p=n.services.permissionService.getModelEffectivePermissions(o.id);if(i.hasFlag(p,r.CopyOnWrite)&&(s.push({text:l.get("ContextMenu_Personalize"),action:function(){d.logEvent(e.telemetry.DashboardClickPersonalize,o.contentProviderId),n.scope.$emit(e.constants.personalizeEventName,o.packageId)}}),s.push({text:l.get("DashboardContextMenu_Delete"),action:function(){d.logEvent(e.telemetry.DashboardDatasetClickDelete,o.contentProviderId),n.scope.$emit(e.constants.deleteModelEventName,o.id,o.packageId,t.DeleteContentPackMessageType.Dataset)}})),n.services.ownership.permissionsArePersonalized(p,a)&&s.push({text:n.services.localizationService.get("DashboardContextMenu_Delete"),action:function(){d.logEvent(e.telemetry.DashboardDatasetClickDelete,o.contentProviderId),n.scope.$emit(e.constants.deleteModelEventName,o.id,o.packageId)}}),i.hasFlag(p,r.All)&&(s.push({text:l.get("DashboardContextMenu_Rename"),action:function(){d.logEvent(e.telemetry.DashboardDatasetClickRename,o.contentProviderId),n.model.isNameEditable=!0}}),s.push({text:l.get("DashboardContextMenu_Delete"),action:function(){d.logEvent(e.telemetry.DashboardDatasetClickDelete,o.contentProviderId),n.scope.$emit(e.constants.deleteModelEventName,o.id,o.packageId)}}),n.datasetContractModel.onPremModelConnectionString||s.push({text:n.datasetContractModel.directQueryMode?l.get("DashboardContextMenu_DatasetSettings"):l.get("DashboardContextMenu_ManageRefresh"),action:function(){n.services.telemetryService.logEvent(e.telemetry.DashboardDatasetClickScheduleRefresh,o.contentProviderId),n.services.navigation.showSettingsSlider(e.models.SettingsGroupsType.Datasets,o.dbName)}}),s.push({text:l.get("DashboardContextMenu_RefreshNow"),action:function(){d.logEvent(e.telemetry.DashboardDatasetClickRefreshNow,o.contentProviderId),n.services.refreshService.tryRefreshNow(n.services.telemetryService,n.services.errorService,o,e.models.SettingsGroupsType.Datasets)}})),c&&(n.services.analyzeInExcel.isAnalyzeInExcelSupported(c,p)&&s.push({text:l.get("DashboardContextMenu_AnalyzeInExcel"),action:function(){var t=n.services.modelService.findModel(o.id,o.packageId);n.services.telemetryService.logEvent(e.telemetry.DashboardAndReportsAnalyzeInExcel,"Dataset Navigation Pane List",t.contentProviderId,t.contract.modelFeatures,t.dbName),n.services.analyzeInExcel.startAnalyzeInExcel(t)}}),o.insightsSupported&&i.hasFlag(p,r.Read)&&s.push({text:n.getInsightsText(),action:function(){d.logEvent(e.telemetry.DashboardDatasetClickInsights,o.contentProviderId),n.scope.$emit(e.constants.showInsightsEventName,o.id,o.packageId)},descriptor:e.constants.insightsDescriptor}),i.hasFlag(p,r.All)&&(6===o.contentProviderId||7===o.contentProviderId)&&!o.onPremModelConnectionString)){var u=n.services.groupService.activeGroup;(u.isMyWorkspace||u.contract.isOwner||!u.contract.isReadOnly)&&s.push({text:l.get("DashboardContextMenu_GranularSecurity"),action:function(){n.services.telemetryService.logEvent(e.telemetry.RowLevelSecurityOpenRowLevelSecuritySettings,o.contentProviderId,o.cloudRlsEnabled),6===o.contentProviderId?n.cloudRlsNotSupportedDialog():o.lastRefreshStatus===e.common.contracts.PublishOrRefreshStatus.RefreshInProgress||o.packagePublishStatus===e.common.contracts.PublishOrRefreshStatus.PublishInProgress?n.services.rowLevelSecurityService.showRefreshInProgressDialog():n.services.navigation.showRowLevelSecuritySlider(o.id);
}})}})),s},n.prototype.cloudRlsNotSupportedDialog=function(){this.services.modalDialogService.showFeatureNotSupportedDialog(this.services.localizationService.get("ModalDialog_CloudRlsUnSupportedTypeTitle"),this.services.localizationService.get("ModalDialog_CloudRlsUnSupportedTypeMessage"),"https://go.microsoft.com/fwlink/?LinkID=733530","cloudRlsDialog")},n.prototype.getInsightsText=function(){var e,t=this.services.insightsService.getInsightsStatus(this.datasetModel.contract);switch(t){case 2:e=this.services.localizationService.get("DashboardContextMenu_ViewInsights");break;case 1:e=this.services.localizationService.get("DashboardContextMenu_GettingInsights");break;default:e=this.services.localizationService.get("DashboardContextMenu_GetInsights")}return e},n.prototype.showHistoryDialog=function(e){this.services.historyDialogService.showHistoryDialog(e)},n.addRefreshStatusToMetadata=function(t,i,r,s,c,l){var d,p,u,v=[],h=o.convertRefreshTimeToJsDateTime(i.lastRefreshTime),g=!1;i.lastRefreshStatus===a.RefreshError?(d=e.common.models.ContextMenuItemMetadataType.Action,u=r.format("SettingsDataset_ScheduleRefresh_FlyoutMessage_LastRefreshFailed",[""]),p=""+h,g=!0):i.lastRefreshStatus===a.PublishError?(d=e.common.models.ContextMenuItemMetadataType.Action,u="",p=r.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_LastPackagePublishFailed")):(d=e.common.models.ContextMenuItemMetadataType.Text,u=r.format("SettingsDataset_ScheduleRefresh_FlyoutMessage_LastRefreshSucceeded",[""]),p=""+h),v.push({name:"lastRefreshStatus",type:d,label:u.toLocaleUpperCase(),isWarning:g,value:function(){return p},actionOnClick:function(){s.showHistoryDialog(c)},actionText:function(){return p}}),n.updateMetadataValue(l,"lastRefreshStatus",d,(function(){return p}),g,void 0,void 0,void 0,(function(){s.showHistoryDialog(c)}),void 0,u.toLocaleUpperCase());var m=n.isModelScheduledRefreshEnabled(i),f=n.doesStorageSourceAllowRefresh(i),y=n.isStorageSourceRefreshEnabled(i);if(f)if(y&&m){var b=r.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_NextRefresh")+o.convertRefreshTimeToJsDateTime(i.nextRefreshTime);n.showNextRefresh(b,v,l)}else if(!y&&m){var b=r.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_NotOneDriveNextScheduled")+o.convertRefreshTimeToJsDateTime(i.nextRefreshTime);n.showNextRefresh(b,v,l)}else if(y&&!m){var b=r.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_OneDriveEnabledRefreshNotEnabled");n.showRefreshDisabled(b,v,l)}else{var b=r.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_NotOneDriveAndScheduleRefreshNotEnabled");n.showRefreshDisabled(b,v,l)}else if(m){var b=r.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_NextRefresh")+o.convertRefreshTimeToJsDateTime(i.nextRefreshTime);n.showNextRefresh(b,v,l)}else{var b=r.get("SettingsDataset_ScheduleRefresh_FlyoutMessage_RefreshNotEnabled");n.showRefreshDisabled(b,v,l)}return v},n.getNextRefreshTimeName=function(){var e="nextRefreshTime";return e},n.getRefreshScheduleNotSetupName=function(){var e="refreshScheduleNotSetUp";return e},n.showNextRefresh=function(t,i,o){var r=n.getNextRefreshTimeName();n.deleteMetadataItem(o,"refreshScheduleNotSetUp",e.common.models.ContextMenuItemMetadataType.Text),i.push({name:r,type:e.common.models.ContextMenuItemMetadataType.Text,value:function(){return t}}),n.updateMetadataValue(o,r,e.common.models.ContextMenuItemMetadataType.Text,(function(){return t})),n.deleteMetadataItem(o,n.getRefreshScheduleNotSetupName(),e.common.models.ContextMenuItemMetadataType.Text)},n.showRefreshDisabled=function(t,i,o){var r=n.getRefreshScheduleNotSetupName();n.deleteMetadataItem(o,n.getNextRefreshTimeName(),e.common.models.ContextMenuItemMetadataType.Text),i.push({name:r,type:e.common.models.ContextMenuItemMetadataType.Text,value:function(){return t}}),n.updateMetadataValue(o,r,e.common.models.ContextMenuItemMetadataType.Text,(function(){return t}))},n.isModelScheduledRefreshEnabled=function(t){return t.refreshSchedule.refreshEnabled!==!1&&(t.contentProviderId===e.controllers.ContentProviderIds.salesforce||t.isAllDataSourcesSupportedForRefresh!==!1)},n.doesStorageSourceAllowRefresh=function(t){return t.storageProviderType===e.common.contracts.StorageProviderType.OneDrive||t.storageProviderType===e.common.contracts.StorageProviderType.SharePoint},n.isStorageSourceRefreshEnabled=function(e){return e.isPackageRefreshEnabled},n.addRefreshInfoForOnPremAnalysisServicesToMetadata=function(t){var i=[],o=e.common.localize.get("SettingsDataset_DisableEntireRefreshPageErrorMessage_OnPremAnalysisServicesScheduleInfo");return i.push({name:"OnPremASRefreshInfo",type:e.common.models.ContextMenuItemMetadataType.Text,value:function(){return o}}),n.updateMetadataValue(t,"OnPremASRefreshInfo",e.common.models.ContextMenuItemMetadataType.Text,(function(){return o})),i},n.addRefreshInfoForDirectQueryModel=function(t){var i=[],o=e.common.localize.get("SettingsDataset_DisableEntireRefreshPageErrorMessage_DirectQueryScheduleInfo");return i.push({name:"DirectQueryRefreshInfo",type:e.common.models.ContextMenuItemMetadataType.Text,value:function(){return o}}),n.updateMetadataValue(t,"DirectQueryRefreshInfo",e.common.models.ContextMenuItemMetadataType.Text,(function(){return o})),i},n.updateMetadataValue=function(e,t,i,o,r,a,n,s,c,l,d){if(void 0===r&&(r=!1),e){for(var p=void 0,u=0,v=e.length;u<v;u++){var h=e[u];if(h.name===t){p=h;break}}p?(p.value=o,p.isWarning=r,p.linkText=a,p.linkUrl=n,p.linkTitle=s,p.actionOnClick=c,p.type=i,p.infoTooltipConfig=l,p.label=d):e.push({name:t,type:i,value:o,linkText:a,linkUrl:n,linkTitle:s,linkTarget:"_blank",actionOnClick:c,isWarning:r,infoTooltipConfig:l,label:d})}},n.deleteMetadataItem=function(e,t,i){if(e){for(var o=void 0,r=0,a=e.length;r<a;r++){var n=e[r];if(n.name===t&&n.type===i){o=r;break}}o&&e.splice(o,1)}},n})();t.DatasetNavigationPaneListItemController=n})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t,i){this.scope=t,this.services=i,this.groupModel=t.viewModel,this.model=new e.models.GroupNavigationPaneListItemModel(this.groupModel),this.scope.model=this.model,this.scope.showContextMenu=!1,this.scope.tooltipConfig={tooltipLocalizeDescription:"NavigationPane_RefreshError",tooltipArrowPosition:e.common.ArrowPosition.arrowTopLeft},this.scope.isNameValid=function(e){return _.isEmpty(e)},this.scope.isContextMenuEnabled=function(){return!1},this.services.userInfo.getUserPhoto().then((function(e){t.userPhoto=e}))}return t.createOptions=function(){return{additionalServices:["navigation","localizationService","userInfo"]}},t})();t.GroupNavigationPaneListItemController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function i(t,i){var o=this;this.scope=t,this.services=i;var r=t.viewModel;this.reportContract=r.contract,this.model=new e.models.ReportNavigationPaneListItemModel(r),this.model.actions=this.getReportActions(this.reportContract),this.scope.model=this.model,this.scope.showContextMenu=!1,this.scope.tooltipConfig={tooltipLocalizeDescription:"NavigationPane_RefreshError",tooltipArrowPosition:e.common.ArrowPosition.arrowTopLeft},this.scope.rename=function(e){o.services.reportService.renameReport(e,o.scope.model.source.id)},this.scope.isNameValid=function(e){return!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(e)},this.scope.isContextMenuEnabled=function(){return!o.services.permissionService.isActiveWorkspaceIsReadOnly&&o.model.source.packagePublishStatus!==e.common.contracts.PublishOrRefreshStatus.PublishInProgress},this.scope.$on(e.common.constants.editableLabelOnBlurEventName,(function(e){o.scope.model.isNameEditable=!1}))}return i.createOptions=function(){return{additionalServices:["localizationService","reportService","permissionService","featureSwitchService","modelService","analyzeInExcel","telemetryService"]}},i.prototype.getReportActions=function(i){var o=this,r=[];return this.services.localizationService.ensureLocalization((function(){var a=o.services.featureSwitchService;r.push({text:o.services.localizationService.get("DashboardContextMenu_Open"),action:function(){o.scope.$emit(e.constants.openReportEventName,i.id)}}),(i.permissions&e.common.models.ReportPermissions.All)===e.common.models.ReportPermissions.All||(i.permissions&e.common.models.ReportPermissions.Personalized)===e.common.models.ReportPermissions.Personalized?(r.push({text:o.services.localizationService.get("DashboardContextMenu_Rename"),action:function(){o.model.isNameEditable=!0}}),r.push({text:o.services.localizationService.get("DashboardContextMenu_Delete"),action:function(){o.scope.$emit(e.constants.deleteReportEventName,i.id)}})):(i.permissions&e.common.models.ReportPermissions.CopyOnWrite)===e.common.models.ReportPermissions.CopyOnWrite&&(r.push({text:o.services.localizationService.get("ContextMenu_Personalize"),action:function(){o.scope.$emit(e.constants.personalizeEventName,i.packageId)}}),r.push({text:o.services.localizationService.get("DashboardContextMenu_Delete"),action:function(){o.scope.$emit(e.constants.deleteModelEventName,i.modelId,i.packageId,t.DeleteContentPackMessageType.Report)}})),a&&o.services.analyzeInExcel.isAnalyzeInExcelSupported(a,i.permissions)&&r.push({text:o.services.localizationService.get("DashboardContextMenu_AnalyzeInExcel"),action:function(){var t=o.services.modelService.findModel(i.modelId,i.packageId);o.services.telemetryService.logEvent(e.telemetry.DashboardAndReportsAnalyzeInExcel,"Report Navigation Pane List",t.contentProviderId,t.contract.modelFeatures,t.dbName),o.services.analyzeInExcel.startAnalyzeInExcel(t)}})})),r},i})();t.ReportNavigationPaneListItemController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=jsCommon.EnumExtensions,o=e.common.helpers.ModelConverterHelper,r=e.common.contracts.Permissions,a=e.common.models.ContextMenuItemMetadataType,n=e.dataServices.constants,s=(function(){function s(t,i){var o=this;this.scope=t,this.services=i,this.workbookModel=t.viewModel,this.model=new e.models.WorkbookNavigationPaneListItemModel(this.workbookModel),this.refreshDatasetModel={},this.model.historyDialogParameters=this.services.historyDialogService.historyDialogParameters,this.scope.showHistoryDialog=function(){return o.showHistoryDialog(o.refreshDatasetModel)},this.model.metadata=this.getWorkbookMetadata(this.workbookModel),this.model.actions=this.getWorkbookActions(this.workbookModel),this.scope.model=this.model,this.scope.showContextMenu=!1,this.scope.isRefreshInProgress=function(){return o.isRefreshInProgress()},this.scope.tooltipConfig={tooltipLocalizeDescription:"NavigationPane_RefreshError",tooltipArrowPosition:e.common.ArrowPosition.arrowTopLeft},this.scope.rename=function(e){o.services.workbookService.renameWorkbook(e,o.scope.model.source.id,o.scope.model.source.packageId)},this.scope.isNameValid=function(e){return!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(e)},this.scope.isContextMenuEnabled=function(){return o.getWorkbookMetadata(o.workbookModel,o.model.metadata),!o.services.permissionService.isActiveWorkspaceIsReadOnly},this.scope.$on(e.common.constants.editableLabelOnBlurEventName,(function(e){o.scope.model.isNameEditable=!1})),this.services.rootScope.$on(n.workbook.openWorkbookContextMenuEventName,(function(e,t){t.id===o.model.source.id&&t.packageId===o.model.source.packageId&&(o.getWorkbookMetadata(o.workbookModel,o.model.metadata),o.scope.showContextMenu=!0)})),this.model.icon=this.services.ownership.isResourceSharedWithMe(this.workbookModel)?e.models.NavigationPaneListItemIcon.Shared:e.models.NavigationPaneListItemIcon.Workbook,this.scope.showRefreshError=function(){return o.showRefreshError()},this.scope.showIcon=function(){return o.showIcon()},this.scope.getPackagePublishStatus=function(){return o.getPackagePublishStatus()}}return s.createOptions=function(){return{additionalServices:["refreshService","errorService","telemetryService","localizationService","workbookService","modelService","packageService","historyDialogService","featureSwitchService","ownership","permissionService"]}},s.prototype.getPackagePublishStatus=function(){if(!this.workbookModel.modelId)return e.common.contracts.PublishOrRefreshStatus.FinishedSuccessfully;var t=this.services.modelService.findModel(this.workbookModel.modelId,this.workbookModel.packageId);return t?t.packagePublishStatus:e.common.contracts.PublishOrRefreshStatus.FinishedSuccessfully},s.prototype.showRefreshError=function(){if(!this.workbookModel.modelId)return!1;var t=this.services.modelService.findModel(this.workbookModel.modelId,this.workbookModel.packageId);return!!t&&(t.packagePublishStatus===e.common.contracts.PublishOrRefreshStatus.RefreshError||t.contract.lastRefreshStatus===e.common.contracts.PublishOrRefreshStatus.RefreshError)},s.prototype.showIcon=function(){if(!this.workbookModel.modelId)return!0;var t=this.services.modelService.findModel(this.workbookModel.modelId,this.workbookModel.packageId);return!t||t.packagePublishStatus!==e.common.contracts.PublishOrRefreshStatus.PublishError&&t.contract.lastRefreshStatus!==e.common.contracts.PublishOrRefreshStatus.RefreshError},s.prototype.isRefreshInProgress=function(){if(this.workbookModel.packageId){var t=this.services.packageService.findPackage(this.workbookModel.packageId);if(t&&t.publishOrRefreshStatus===e.common.contracts.PublishOrRefreshStatus.RefreshInProgress)return!0}if(this.workbookModel.modelId){var i=this.services.modelService.findModel(this.workbookModel.modelId,this.workbookModel.packageId);if(i&&i.isRefreshInProgress)return!0}return!1},s.prototype.getWorkbookMetadata=function(e,i){var r=this,n=this.services.localizationService,c=this.services.historyDialogService,l=[],d=this.services.workbookService.findWorkbook(e.id,e.packageId);if(this.services.packageService.isLocalWorkbook(this.workbookModel.packageId)){l=l.concat(s.addExcelLocalFileInfo("WorkbookContextMenu_LocalFileName",i,"localFileName",a.Text,this.workbookModel.contract.sourceFilePath)),l=l.concat(s.addExcelLocalFileInfo("WorkbookContextMenu_Source",i,"FileSource",a.Text,this.services.localizationService.get("WorkbookContextMenu_Source_LocalFile")));var p=this.services.packageService.findPackage(this.workbookModel.packageId);if(p){var u=""+o.convertRefreshTimeToJsDateTime(p.lastRefreshTime);l=l.concat(s.addExcelLocalFileInfo("WorkbookContextMenu_LocalFile_LastUpdateTime",i,"localFileLastUpdated",a.Text,u))}return l}d.contract.sourceFilePath&&(l=l.concat(s.addSpoFileName(d.contract.sourceFilePath,d.viewUrl,i))),d.isOwner()&&(l=l.concat(s.addExcelLocalFileInfo("WorkbookContextMenu_Source",i,"FileSource",a.Text,this.services.localizationService.get("WorkbookContextMenu_Source_SharePointOneDrive"))));var v=this.services.modelService.findModel(this.workbookModel.modelId,this.workbookModel.packageId);if(!v){var p=this.services.packageService.findPackage(this.workbookModel.packageId);return p&&(l=l.concat(s.addLastRefreshForNonModelWorkbook(p.lastRefreshTime,i))),l}if(!this.workbookModel.contract.isPowerPivotVersionSupportsRefresh)return l=s.addRefreshInfoForNotSupportedModelWorkbook(i);var h=v.contract,g=function(e){h.contentProviderId=e.contentProviderId,h.onPremModelConnectionString=e.onPremModelConnectionString,h.directQueryMode=e.directQueryMode,h.refreshSchedule=e.refreshSchedule,h.refreshHistories=e.refreshHistories,h.storageProviderType=e.storageProviderType,l=l.concat(t.DatasetNavigationPaneListItemController.addRefreshStatusToMetadata(null,e,n,c,r.refreshDatasetModel,i))};return g(h),this.refreshDatasetModel.dataset=o.convertModelToDataset(h),l},s.prototype.showHistoryDialog=function(e){this.services.historyDialogService.showHistoryDialog(e)},s.prototype.getWorkbookActions=function(t){var o=this,a=[],s=this.services.localizationService.get("WorkbookContextMenu_View"),c=this.services.workbookService.findWorkbook(t.id,t.packageId);return this.services.localizationService.ensureLocalization((function(){var l=c.getPermissions();c.isOwner()?(o.services.featureSwitchService.featureSwitches.embedFullFidelityWorkbooks?a.push({text:s,action:function(){o.scope.$emit(n.workbook.viewWorkbookEventName,t.id,t.packageId)}}):a.push({text:s,link:c.viewUrl,action:function(){o.services.telemetryService.logEvent(e.telemetry.DashboardViewWorkbook,c.contract.etagHash,l,o.services.packageService.getWorkbookStorageProvider(c.packageId),o.services.packageService.getWorkbookContentProvider(c.packageId))}}),c.isEditable()&&a.push({text:o.services.localizationService.get("WorkbookContextMenu_Edit"),link:c.editUrl,action:function(){o.services.telemetryService.logEvent(e.telemetry.DashboardEditWorkbook,c.contract.etagHash)}}),a.push({text:o.services.localizationService.get("WorkbookContextMenu_Rename"),action:function(){o.model.isNameEditable=!0}}),o.services.packageService.isLocalWorkbook(c.packageId)&&a.push({text:o.services.localizationService.get("WorkbookContextMenu_Replace"),action:function(){o.scope.$emit(e.constants.replaceLocalWorkbookEventName,c.uniqueId)}}),o.services.packageService.isScheduleRefreshEnabledForWorkbook(c)&&a.push({text:o.services.localizationService.get("WorkbookContextMenu_ScheduleRefresh"),action:function(){var t=o.services.modelService.findModel(c.modelId,c.packageId);t&&(o.services.telemetryService.logEvent(e.telemetry.DashboardWorkbookClickScheduleRefresh,t.contentProviderId),o.services.rootScope.$emit(e.common.constants.showSettingsViewerEventName,e.models.SettingsGroupsType.Workbooks,t.dbName))}}),o.services.packageService.isRefreshNowEnabledForWorkbook(c)&&a.push({text:o.services.localizationService.get("WorkbookContextMenu_RefreshNow"),action:function(){var t=o.services.modelService.findModel(c.modelId,c.packageId);t&&(o.services.telemetryService.logEvent(e.telemetry.DashboardWorkbookClickRefreshNow,t.contentProviderId),o.services.refreshService.tryRefreshNow(o.services.telemetryService,o.services.errorService,t,e.models.SettingsGroupsType.Workbooks))}}),a.push({text:o.services.localizationService.get("WorkbookContextMenu_Remove"),action:function(){o.scope.$emit(n.workbook.removeWorkbookEventName,t)}})):(i.hasFlag(l,r.CopyOnWrite)&&a.push({text:o.services.localizationService.get("ContextMenu_Personalize"),action:function(){o.services.telemetryService.logEvent(e.telemetry.DashboardClickPersonalize,c.contentProviderId),o.scope.$emit(e.constants.personalizeEventName,c.packageId)}}),o.services.featureSwitchService.featureSwitches.embedFullFidelityWorkbooks?a.push({text:s,action:function(){o.scope.$emit(n.workbook.viewWorkbookEventName,t.id,t.packageId)}}):a.push({text:s,link:c.viewUrl,action:function(){o.services.telemetryService.logEvent(e.telemetry.DashboardViewWorkbook,c.contract.etagHash,l,o.services.packageService.getWorkbookStorageProvider(c.packageId),o.services.packageService.getWorkbookContentProvider(c.packageId))}}),a.push({text:o.services.localizationService.get("WorkbookContextMenu_Remove"),action:function(){o.scope.$emit(n.workbook.removeWorkbookEventName,c)}}))})),a},s.addLastRefreshForNonModelWorkbook=function(t,i){var r=o.convertRefreshTimeToJsDateTime(t),a=e.common.localize.format("SettingsDataset_ScheduleRefresh_FlyoutMessage_LastRefreshSucceeded",[""]);return s.addInfoForWorkbook("WorkbookIsUpToDate",""+r,i,null,a.toLocaleUpperCase())},s.addRefreshInfoForNotSupportedModelWorkbook=function(t){var i=e.common.localize.get("WorkbookContextMenu_NotSupportedModel_RefreshNotSupported");return s.addInfoForWorkbook("WorkbookIsUpToDate",i,t)},s.addExcelLocalFileInfo=function(t,i,o,r,a){var n;return a?(n=e.common.localize.format(t,[""]),s.addInfoForWorkbook(o,a,i,r,n.toLocaleUpperCase())):(n=e.common.localize.get(t),s.addInfoForWorkbook(o,n,i,r))},s.addInfoForWorkbook=function(e,i,o,r,n){var s=[];return s.push({name:e,type:a.Text,label:n,value:function(){return i},infoToolTipConfig:r}),t.DatasetNavigationPaneListItemController.updateMetadataValue(o,e,a.Text,(function(){return i}),null,null,null,null,null,r,n),s},s.addSpoFileName=function(i,o,r){var a=[],n=e.common.localize.get("WorkbookContextMenu_SpoFileName"),s=i.substring(i.lastIndexOf("/")+1);return a.push({name:"spoFileNameAndLink",type:e.common.models.ContextMenuItemMetadataType.Link,value:function(){return""},label:n.toLocaleUpperCase(),linkText:function(){return s},linkUrl:function(){return o},linkTitle:function(){return i},linkTarget:"_blank"}),t.DatasetNavigationPaneListItemController.updateMetadataValue(r,"spoFileNameAndLink",e.common.models.ContextMenuItemMetadataType.Link,(function(){return""}),!1,(function(){return s}),(function(){return o}),(function(){return i}),void 0,void 0,n.toLocaleUpperCase()),a},s})();t.WorkbookNavigationPaneListItemController=s})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.constants.nps,o=jsCommon.QueryStringUtil,r=(function(){function t(t,r){var a=this;if(this.appLoadedWaitInterval=3e4,this.services=r,this.scope=t,this.listener=function(e){return a.receiveMessage(e)},this.scope.initListener=function(){return a.services.$window.addEventListener("message",a.listener)},this.scope.$on("$destroy",(function(){a.destroyIframeListener()})),"undefined"!=typeof npsUrlOrigin&&(this.redirectRoot=npsUrlOrigin,this.redirectRoot)){var n=e.session.userInfo.puid,s=this.redirectRoot+i.renderPath,c={};c[i.languageParam]=this.services.localizationService.currentLanguageLocale,c[i.puidParam]=n;var l=this.redirectRoot+i.displayPath,d={};d[i.puidParam]=n,this.scope.renderUrl=o.addOrUpdateQueryStringToUrl(s,c);var p=o.addOrUpdateQueryStringToUrl(l,d);this.services.featureSwitchService.featureSwitches.isE2ERun||this.services.appMetadataService.getAppMetadata().then((function(){a.services.$timeout((function(){e.npsHttpService.showNpsDialog(p).then((function(e){if(e&&e.data){var t=e.data;if(t.display){if(a.services.fullScreen.fullScreenMode)return;a.scope.connectToNps()}}}))}),a.appLoadedWaitInterval)}))}}return t.createOptions=function(){return{additionalServices:["$window","$timeout","localizationService","appMetadataService","featureSwitchService","fullScreen"]}},t.prototype.destroyIframeListener=function(){this.services.$window.removeEventListener("message",this.listener),this.scope.closeNpsHostIframe()},t.prototype.receiveMessage=function(e){if(e&&e.origin&&!(this.redirectRoot.indexOf(e.origin)<0)){var t=e.data;t&&t.msgType&&(t.msgType===i.closeNpsDialog?this.destroyIframeListener():t.msgType===i.resizeNpsDialog&&this.scope.resizeNpsHostIframe())}},t})();t.NpsHostController=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){var i=this;this.scope=e,this.services=t,this.scope.getApplicationLauncher=function(){return i.getApplicationLauncher()},this.scope.showAppLauncherContainer=!1,this.scope.loadingAppLauncher=!1,this.scope.loadingError=!1,this.scope.oldStyleAppLauncher=!0,this.scope.o365NavigationBarData=null}return e.createOptions=function(){return{additionalServices:["o365ApplicationLauncherService"]}},e.prototype.getApplicationLauncher=function(){var e=this;null!==this.scope.o365NavigationBarData||this.scope.loadingAppLauncher||(this.scope.loadingError=!1,this.scope.loadingAppLauncher=!0,this.services.o365ApplicationLauncherService.getApplicationLauncher().then((function(t){var i=$("<link rel='stylesheet' type='text/css' href='"+t.data.cssUrl+"'>");$("head").append(i),$.getScript(t.data.jsUrl,(function(){var i=$.parseJSON(t.data.navBarDataJson);e.scope.$applyAsync((function(){e.scope.oldStyleAppLauncher=i.FlightName.indexOf("ShellNewAppLauncher")===-1})),O365Shell.SetData(i),O365Shell.RenderAsync({launcher:"o365AppLauncherContent"},_.noop,_.noop)})),e.scope.o365NavigationBarData=t,e.scope.loadingAppLauncher=!1}),(function(t){e.scope.loadingAppLauncher=!1,e.scope.loadingError=!0})))},e})();e.O365ApplicationLauncherController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.DashboardUtils,o=(function(){function t(t,i){var o=this;this.scope=t,this.services=i,this.scope.dashboardDataService=i.dashboardDataService,this.scope.pin=function(){return o.pin()},this.scope.cancel=function(){return o.cancel()},this.scope.saveAndContinue=function(){return o.saveAndContinue()},this.scope.isDashboardPinnable=function(e){return o.isDashboardPinnable(e)},this.scope.isDashboardUnpinnable=function(e){return o.isDashboardUnpinnable(e)},this.scope.noPinnableDashboard=function(){return o.noPinnableDashboard()},this.scope.getDefaultSelectedDashboardId=function(){return o.getDefaultSelectedDashboardId()},this.scope.getSortedPinnableDashboards=function(){return o.getSortedPinnableDashboards()},this.scope.getDashboards=function(){return o.getDashboards()},this.scope.updateFormatting=function(){return o.updateFormatting()},this.scope.isLiveReport=this.services.pinTileService.isLiveReport,this.scope.pinButtonText=this.scope.isLiveReport?this.services.localizationService.get("PinLiveReport_PinLive"):this.services.localizationService.get("ReportContainer_Pin"),this.scope.viewModel.isPinned=!1,this.updateView();var r=this.scope.viewModel;r.useExistingDashboard=!0,this.services.userSettingsService.getUserSettings().then((function(t){r.useDashboardFormatting=null==t.tileDialogPreviewFormat||t.tileDialogPreviewFormat===e.contracts.TileDialogPreviewFormats.DashboardFormat,o.updateFormatting()})),this.scope.$watch("dashboardDataService.dashboards.length",(function(){o.updateView()}))}return t.createOptions=function(){return{additionalServices:["dashboardDataService","pinTileService","localizationService","userSettingsService"],scopedServiceRoot:!0}},t.prototype.updateView=function(){this.sortedPinnableDashboards=this.getSortedPinnableDashboards(),this.scope.viewModel.selectedDashboardId=this.getDefaultSelectedDashboardId()},t.prototype.pin=function(){this.scope.viewModel.isPinned=!0,this.services.pinTileService.onPinButtonClickedActions()},t.prototype.saveAndContinue=function(){this.scope.viewModel.needSaveReport&&this.services.pinTileService.onSaveAndContinueButtonClickedActions()},t.prototype.cancel=function(){this.services.pinTileService.hideDialog()},t.prototype.updateFormatting=function(){this.services.pinTileService.updateTile(this.scope.viewModel.useDashboardFormatting)},t.prototype.isDashboardPinnable=function(e){if(e.contract){var t=i.isWriteable(e.contract),o=this.services.dashboardDataService.activeDashboard;return this.services.pinTileService.isPinFromDashboard&&o?t&&e.id!==o.id:t}return!1},t.prototype.isDashboardUnpinnable=function(e){return!this.isDashboardPinnable(e)},t.prototype.getDefaultSelectedDashboardId=function(){var e=this.services.dashboardDataService.activeDashboard;if(!this.services.pinTileService.isPinFromDashboard&&e&&this.isDashboardPinnable(e))return e.id.toString();var t=this.sortedPinnableDashboards;return t.length>0?t[0].id.toString():null},t.prototype.noPinnableDashboard=function(){return 0===this.sortedPinnableDashboards.length&&(this.scope.viewModel.useExistingDashboard=!1,!0)},t.prototype.getSortedPinnableDashboards=function(){var e=this.services.dashboardDataService.activeDashboard,t=this.services.dashboardDataService.dashboards,o=_.sortBy(_.filter(t,(function(e){return i.isWriteable(e.contract)})),(function(e){return e.displayName.toLowerCase()}));if(this.services.pinTileService.isPinFromDashboard&&e){var r=o.indexOf(e);o.splice(r,1)}return o},t.prototype.getDashboards=function(){return this.services.dashboardDataService.dashboards},t})();t.PinTileDialogController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.constants,o=e.common.controllers.EmailsList,r=e.common.models.EmailsListModel,a=e.common.contracts.Permissions,n=(function(){function t(t,i){var a=this;this.scope=t,this.services=i,this.element=this.services.$element,this.scope.setDefaultImage=function(){return a.setDefaultImage(!0)},this.scope.publishContentPack=function(){return a.publishContentPack()},this.scope.toggleDashboard=function(e){return a.toggleDashboard(e)},this.scope.toggleReport=function(e){return a.toggleReport(e)},this.scope.toggleWorkbook=function(e){return a.toggleWorkbook(e)},this.scope.enableUpdateButton=function(){return a.enableUpdateButton()},this.scope.onContentPackChanged=function(){return a.onContentPackChanged()},this.scope.cancelPublishContentPack=function(){return a.cancelPublishContentPack()},this.scope.validateImageUploaded=function(e){return a.validateImageUploaded(e)},this.scope.imageThumbView="",this.scope.isIconUpdated=!0,this.scope.isLegacyReport=function(e){return a.isLegacyReport(e)},this.scope.dashboardHasLegacyReport=function(e){return a.dashboardHasLegacyReport(e)},this.scope.canDashboardBeAdded=function(e){return a.canDashboardBeAdded(e)},this.scope.getWorkookPermissionsMessageType=function(){return a.getWorkookPermissionsMessageType()},this.scope.getLocalizedTemplatizeModelToolTip=function(){return a.getLocalizedTemplatizeModelToolTip()};var n=this.scope.viewModel;n.hasTitleValidationError=!1,n.hasNoItemsSelected=!1,n.hasDescriptionValidationError=!1,n.hasGroupsValidationError=!1,n.isPublishOrUpdateError=!1,n.hasImageValidationError=!1,n.hasTemplatePublishError=!1,n.providerKey="",n.emailsList=new r,n.userGroupHeader=new e.models.UserGroupHeaderModel,n.isTemplate=!1,this.getSettingsMetadata(),this.updateView(),this.clearContents();var s=this.services.navigation.contentPack;if(this.scope.updateContentPack=this.services.contentPackService.findContentPack(s),this.scope.updateContentPack){this.scope.$watch("viewModel.emailsList.isDirty",(function(e){e&&(n.isUpdateScenario=!e,n.isPublishOrUpdateError=!e)})),n.providerKey=this.scope.updateContentPack.providerKey,n.publishButtonText=this.services.localizationService.get("PublishContentPack_Update"),n.headerText=this.services.localizationService.get("Publish_UpdateContentPack"),this.scope.updateContentPack.isSharedToEntireOrg?n.contentPackCreatedFor=!0:(n.contentPackCreatedFor=!1,n.emailsList=new r,n.emailsList.inputUserList=o.emailsToUsers(this.scope.updateContentPack.listOfGroupPrincipals)),n.titleText=this.scope.updateContentPack.displayText,n.descriptionText=this.scope.updateContentPack.description,this.scope.updateContentPack.iconUrl&&(this.scope.imageThumbView=jsCommon.Utility.urlCombine(clusterUri,this.scope.updateContentPack.iconUrl),this.scope.isIconUpdated=!1);for(var c=this.scope.updateContentPack.dashboardIds.length,l=0;l<c;l++)this.toggleDashboard(null,this.scope.updateContentPack.dashboardIds[l]);c=this.scope.updateContentPack.reportIds.length;for(var l=0;l<c;l++)this.toggleReport(this.scope.updateContentPack.reportIds[l],!0);c=this.scope.updateContentPack.modelIds.length;for(var l=0;l<c;l++)this.toggleModelByIds(this.scope.updateContentPack.modelIds[l]);c=this.scope.updateContentPack.workbookIds.length;for(var l=0;l<c;l++)this.toggleWorkbook(this.scope.updateContentPack.workbookIds[l],!0);this.scope.updateContentPack.isDirty||(n.isUpdateScenario=!0)}else n.publishButtonText=this.services.localizationService.get("Publish_ContentPackPublishButton"),n.headerText=this.services.localizationService.get("Publish_CreateContentPack");this.scope.onFileSelect=function(e){var t=new FileReader;if(0!==e.length){a.scope.isIconUpdated=!0,a.scope.errorMessage="";var i=e[0];a.readAsDataUrl(i,t).then((function(e){a.scope.imageThumbView=e,a.enableUpdateButton(),n.hasImageValidationError=a.validateImageUploaded(a.scope.imageThumbView.length),n.imageValidationErrorText=a.services.localizationService.get("Publish_ImageSizeValidationError")}),(function(e){a.scope.errorMessage=e}))}},this.scope.$watchGroup([function(){return a.scope.dashboardContainer.dashboards.length},function(){return a.services.reportService.reports.length},function(){return a.services.workbookService.workbooks.length},function(){return a.services.modelService.lastUpdatedTimestamp}],(function(){a.updateView()})),this.scope.isPublishAllowed=function(){
return!0},this.services.featureSwitchService.getFeatureSwitches().then((function(e){a.scope.isPublishContentPackFeatureDisabled=!e.publishContentPackEnabled,a.scope.showTemplateUI=e.templatePublishEnabled||e.templatePublishFlightingWorkAroundEnabled,a.scope.updateContentPack&&a.scope.updateContentPack.contract&&4===a.scope.updateContentPack.contract.category&&(n.isTemplate=!0,a.scope.isPublishAllowed=function(){return!1})}),(function(){a.scope.isPublishContentPackFeatureDisabled=!0}))}return t.createOptions=function(){return{additionalServices:["$sce","errorService","modelConverter","navigation","promiseFactory","telemetryService","localizationService","$element","reportService","modelService","contentPackService","quota","groupService","workbookService","featureSwitchService","notificationToast","packageService","tutorialDataStore","settingsMetadataService"]}},t.prototype.isUpdate=function(){return!_.isEmpty(this.scope.viewModel.providerKey)},t.prototype.getSettingsMetadata=function(){var e=this;this.services.settingsMetadataService.getSettings().then((function(t){e.settingsMetadata=t}),(function(){e.settingsMetadata=null})).finally((function(){e.scope.isTemplatingAllowed=function(){return e.isTemplatingAllowed()},4===e.scope.updateContentPack.contract.category&&(e.scope.viewModel.isTemplate=!0,e.scope.updateContentPack&&(e.scope.isPublishAllowed=function(){return e.isTemplatingAllowed()}))}))},t.prototype.getLocalizedTemplatizeModelToolTip=function(){return this.isTemplatingAllowed()?null:this.services.localizationService.get("PublishContentPack_TemplatizeModel_NotAllowed")},t.prototype.updateIsRemoteWorkbookSelected=function(){var e=this,t=_.find(this.scope.workbooks,(function(t){return t&&t.isSelected&&!e.services.packageService.isLocalWorkbook(t.contract.packageId)}));this.scope.isRemoteWorkbookSelected=void 0!==t,this.scope.workbooksWebUri=t?t.contract.webUri:void 0},t.prototype.isMyWorkspace=function(){return this.services.groupService.isMyWorkspace()},t.prototype.getWorkookPermissionsMessageType=function(){return this.isMyWorkspace()?0:2},t.prototype.updateView=function(){this.scope.dashboards=this.filteredDashboards,this.scope.reports=this.filteredReports,this.scope.models=this.filteredModels,this.services.featureSwitchService.featureSwitches.excelWorkbooksInContentPackEnabled?this.scope.workbooks=this.filteredWorkbooks:this.scope.workbooks=[],this.scope.filteredReportResources=[].concat(this.scope.workbooks).concat(this.scope.reports),this.updateIsRemoteWorkbookSelected(),this.dashboardsWithExternalContent=[],this.getDashboardWithExternalSource()},Object.defineProperty(t.prototype,"filteredDashboards",{get:function(){return _.filter(this.scope.dashboardContainer.dashboards,(function(e){return(e.getPermissions()&a.Write)===a.Write&&(e.getPermissions()&a.ReShare)===a.ReShare}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filteredReports",{get:function(){return this.services.reportService.editableReports},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filteredModels",{get:function(){return this.services.modelService.editableModels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filteredWorkbooks",{get:function(){return this.services.workbookService.originalWorkbooks},enumerable:!0,configurable:!0}),t.prototype.switchToDashboardView=function(){var e=this;this.services.featureSwitchService.featureSwitches.conceptualModelEnabled||this.services.featureSwitchService.featureSwitches.previewConceptualModel&&this.services.tutorialDataStore.hasKey(i.previewConceptualModelNewKey)?this.services.groupService.ensureGroupsInitialization().then((function(){var t=e.services.groupService.activeGroupObjectId;e.services.navigation.navigateToContentList(t)})):this.services.navigation.navigateToActiveDashboard()},t.prototype.cancelPublishContentPack=function(){this.clearContents(),this.services.navigation.navigateBack()},t.prototype.validateImageUploaded=function(e){return!(e<65e3)},t.prototype.clearContents=function(){var e=this.scope.viewModel;e.contentPackCreatedFor=!1,e.isUpdateScenario=!1,e.titleText="",e.descriptionText="",this.scope.setDefaultImage(!0);for(var t=0,i=this.scope.dashboards.length;t<i;t++){var o=this.scope.dashboards[t];o.isSelected=!1,o.isEnabled=!0}for(var t=0,i=this.scope.reports.length;t<i;t++){var r=this.scope.reports[t];r.isSelected=!1,r.isEnabled=!0,r.countOfLinkedDashboardsSelected=0}for(var t=0,i=this.scope.models.length;t<i;t++){var a=this.scope.models[t];a.isSelected=!1,a.isEnabled=!0,a.countOfLinkedDashboardsSelected=0}for(var t=0,i=this.scope.workbooks.length;t<i;t++){var n=this.scope.workbooks[t];n.isSelected=!1,n.isEnabled=!0,n.countOfLinkedDashboardsSelected=0}},t.prototype.enableUpdateButton=function(){this.scope.viewModel.isUpdateScenario=!1,this.scope.viewModel.isPublishOrUpdateError=!1,this.isTemplatingAllowed()||this.isUpdate()||(this.scope.viewModel.isTemplate=!1)},t.prototype.onContentPackChanged=function(){if(this.scope.updateContentPack){var e=this.scope.updateContentPack,t=this.scope.viewModel;this.scope.viewModel.isUpdateScenario=e.isSharedToEntireOrg===(t.contentPackCreatedFor===!0)&&e.displayText===t.titleText&&e.description===t.descriptionText&&e.iconUrl===this.scope.imageThumbView&&e.dashboardIds.sort().toString()===this.returnSelectedDashboardIds().sort().toString()&&e.reportIds.sort().toString()===this.returnSelectedResourceIds(this.scope.reports).sort().toString()&&e.modelIds.sort().toString()===this.returnSelectedResourceIds(this.scope.models).sort().toString()&&e.workbookIds.sort().toString()===this.returnSelectedResourceIds(this.scope.workbooks).sort().toString(),e.listOfGroupPrincipals&&t.groupsAddressesList&&(this.scope.viewModel.isUpdateScenario=this.scope.viewModel.isUpdateScenario&&e.listOfGroupPrincipals.sort().toString()===t.groupsAddressesList.sort().toString())}return this.scope.viewModel.isUpdateScenario},t.prototype.isLegacyReport=function(t){return!e.helpers.ReportUtility.IsReportSavedAsExploration(t.contract)},t.prototype.canDashboardBeAdded=function(e){return _.indexOf(this.dashboardsWithExternalContent,e)<0},t.prototype.getDashboardWithExternalSource=function(){if(!_.isEmpty(this.scope.dashboards))for(var e=_.map(this.scope.models,(function(e){return e.id})),t=_.map(this.scope.reports,(function(e){return e.id})),i=0;i<this.scope.dashboards.length;i++){if(!_.isEmpty(this.scope.dashboards[i].contract.modelIds)){var o=_.difference(this.scope.dashboards[i].contract.modelIds,e);_.isEmpty(o)||this.dashboardsWithExternalContent.push(this.scope.dashboards[i].id)}if(!_.isEmpty(this.scope.dashboards[i].contract.reportIds)){var r=_.difference(this.scope.dashboards[i].contract.reportIds,t);_.isEmpty(r)||this.dashboardsWithExternalContent.push(this.scope.dashboards[i].id)}}},t.prototype.dashboardHasLegacyReport=function(t){if(!t||!t.contract)return!1;for(var i=t.contract.reportIds,o=i?i.length:0,r=0;r<o;r++){var a=this.services.reportService.findReport(i[r]);if(a&&!e.helpers.ReportUtility.IsReportSavedAsExploration(a.contract))return!0}return!1},t.prototype.updateRelatedResources=function(t,i,o){for(var r=0,a=i;r<a.length;r++){var n=a[r];if(n.isSelected)if(o){if(t===e.common.models.ResourceType.Report&&n.isEnabled){var s=this.services.modelService.findModel(n.modelId);s.countOfLinkedDashboardsSelected--}n.countOfLinkedDashboardsSelected++,n.isEnabled=!o}else n.countOfLinkedDashboardsSelected--;0===n.countOfLinkedDashboardsSelected&&(n.isSelected=o,n.isEnabled=!o,o&&n.countOfLinkedDashboardsSelected++)}},t.prototype.toggleDashboard=function(t,i){if(t||(t=_.find(this.scope.dashboards,(function(e){return e.id===i})),t&&(t.isSelected=!0)),t){var o=_.filter(this.scope.reports,(function(e){return t.contract.reportIds.indexOf(e.id)!==-1}));this.updateRelatedResources(e.common.models.ResourceType.Report,o,t.isSelected);var r=_.filter(this.scope.models,(function(e){return t.contract.modelIds.indexOf(e.id)!==-1}));this.updateRelatedResources(e.common.models.ResourceType.Model,r,t.isSelected);var a=_.filter(this.scope.workbooks,(function(e){return t.contract.workbookIds.indexOf(e.id)!==-1}));this.updateRelatedResources(e.common.models.ResourceType.Workbook,a,t.isSelected),this.updateIsRemoteWorkbookSelected(),this.enableUpdateButton()}},t.prototype.toggleWorkbook=function(e,t){var i;t&&(i=_.find(this.scope.workbooks,(function(t){return t.id===e})),i&&(i.isSelected=!0)),this.enableUpdateButton(),this.updateIsRemoteWorkbookSelected()},t.prototype.toggleReport=function(t,i){var o;if(i){if(o=_.find(this.scope.reports,(function(e){return e.id===t})),o&&(o.isSelected=!0,!o.isEnabled))return}else if(this.scope.filteredReportResources&&this.scope.filteredReportResources[t]){var r=this.scope.filteredReportResources[t].id;o=_.find(this.scope.reports,(function(e){return e.id===r}))}if(o){var a=_.filter(this.scope.models,(function(e){return e.id===o.modelId}));this.updateRelatedResources(e.common.models.ResourceType.Model,a,o.isSelected)}this.enableUpdateButton()},t.prototype.toggleModelByIds=function(e){var t=_.find(this.scope.models,(function(t){return t.id===e}));t&&!t.isSelected&&(t.isSelected=!0),this.enableUpdateButton()},t.prototype.setDefaultImage=function(e){this.scope.isIconUpdated=!0,this.scope.viewModel.isDefaultImageUsed=e,this.scope.viewModel.hasImageValidationError=!1,this.scope.imageThumbView="",this.enableUpdateButton()},t.prototype.readAsDataUrl=function(e,t){if(void 0!==e){var i=this.services.promiseFactory.defer();return t.onload=function(){i.resolve(t.result)},t.onerror=function(){i.reject(t.error)},t.readAsDataURL(e),i.promise}},t.prototype.validateTitleSize=function(){return!(this.scope.viewModel.titleText&&this.scope.viewModel.titleText.length>t.TitleSizeLimit)},t.prototype.isTitleEmpty=function(){return!this.scope.viewModel.titleText||0===this.scope.viewModel.titleText.length},t.prototype.isDescriptionEmpty=function(){return!this.scope.viewModel.descriptionText||0===this.scope.viewModel.descriptionText.length},t.prototype.validateDescriptionSize=function(){return!(this.scope.viewModel.descriptionText&&this.scope.viewModel.descriptionText.length>t.DescriptionSizeLimit)},t.prototype.returnSelectedResourceIds=function(e){for(var t=[],i=e.length,o=0;o<i;o++)e[o].isSelected&&t.push(e[o].id);return t},t.prototype.returnSelectedDashboardIds=function(){for(var e=[],t=this.scope.dashboards,i=t.length,o=0;o<i;o++)t[o].isSelected&&e.push(t[o].id);return e},t.prototype.readFailedPrincipals=function(e,i){var o=this.scope.viewModel;if(e.error["pbi.error"].parameters[0]&&(e.error["pbi.error"].parameters[0].Key===t.errorKey||e.error["pbi.error"].parameters[0].Key===t.servicePlanErrorKey)){o.hasGroupsValidationError=!0;var r=e.error["pbi.error"].parameters[0].Value.split("[")[1].split("]")[0];if(r){for(var a=r.split(","),n=o.groupsAddressesList.length,s="",c=0;c<n;c++)a.indexOf('"'+o.groupsAddressesList[c]+'"')>-1&&(s+=""===s?o.groupsAddressesList[c]:"; "+o.groupsAddressesList[c]);o.groupsValidationError=i===t.errorCode?this.services.localizationService.format("PublishContentPack_InvalidGroupAddresses",[s]):this.services.localizationService.format("PublishContentPack_ServicePlanInvalid",[s])}else o.groupsValidationError=this.services.localizationService.get("PublishContentPack_GroupsValidationFailed");return!0}return!1},t.prototype.handleKnownUserError=function(e){if(e){var i=this.scope.viewModel;if(e===t.imageTypeNotAllowed)return i.hasImageValidationError=!0,i.imageValidationErrorText=this.services.localizationService.get("PublishContentPack_ImageTypeNotAllowed"),!0;if(e===t.invalidImageFormat)return i.hasImageValidationError=!0,i.imageValidationErrorText=this.services.localizationService.get("PublishContentPack_InvalidImageFormat"),!0;if(e.indexOf(t.templatePublishErrorPrefix)>=0)return i.hasTemplatePublishError=!0,i.templatePublishErrorText=this.services.localizationService.get("PublishContentPack_"+e),!0}return!1},t.prototype.isTemplatingAllowed=function(){var t=this.scope.dashboards.filter((function(e){return e.isSelected===!0})),i=this.scope.reports.filter((function(e){return e.isSelected===!0})),o=this.scope.models.filter((function(e){return e.isSelected===!0})),r=this.scope.workbooks.filter((function(e){return e.isSelected===!0}));return e.helpers.ContentPackAuthoringHelper.isTemplatingAllowed(t,i,o,r,this.services.modelService,this.services.packageService,this.settingsMetadata)},t.prototype.publishContentPack=function(i){var o=this;this.scope.viewModel.hasValidationError=!1;var r=this.scope.viewModel,a=!!r.providerKey;if(!this.services.contentPackService.userHasPremiumLicense())return void this.services.contentPackService.displayLicenseErrorDialog();if(!this.services.quota.checkQuotaExceeded(a?e.telemetry.QuotaCheckOperation.UpdateContentPack:e.telemetry.QuotaCheckOperation.PublishContentPack)){if(r.isSharedWithOrg=!1,r.hasTitleValidationError=!1,r.hasNoItemsSelected=!1,r.hasDescriptionValidationError=!1,r.hasGroupsValidationError=!1,r.hasTemplatePublishError=!1,r.contentPackCreatedFor===!0)r.isSharedWithOrg=!0,r.emailsList=null;else{if(!r.emailsList.validationTrigger())return void(r.hasGroupsValidationError=r.emailsList.hasValidationError);r.groupsAddressesList=r.emailsList.validEmailsList.concat(r.emailsList.validObjectIds);for(var n=0,s=r.groupsAddressesList.length;n<s;n++)r.groupsAddressesList[n]=r.groupsAddressesList[n].toLowerCase()}if(this.isTitleEmpty())return r.hasTitleValidationError=!0,void(r.titleValidationError=this.services.localizationService.get("PublishContentPack_EmptyTitle"));if(!this.validateTitleSize())return r.hasTitleValidationError=!0,void(r.titleValidationError=this.services.localizationService.get("Publish_TitleSizeExceeded"));if(this.isDescriptionEmpty())return r.hasDescriptionValidationError=!0,void(r.descriptionTextValidationError=this.services.localizationService.get("PublishContentPack_EmptyDescription"));if(!this.validateDescriptionSize())return r.hasDescriptionValidationError=!0,void(r.descriptionTextValidationError=this.services.localizationService.get("Publish_DescriptionSizeExceeded"));if(!r.hasImageValidationError){if(r.hasImageValidationError=!1,r.selectedDashboardIds=this.returnSelectedDashboardIds(),r.selectedReportIds=this.returnSelectedResourceIds(this.scope.reports),r.selectedDatasetIds=this.returnSelectedResourceIds(this.scope.models),r.selectedWorkbookIds=this.returnSelectedResourceIds(this.scope.workbooks),0===r.selectedDashboardIds.length&&0===r.selectedReportIds.length&&0===r.selectedDatasetIds.length&&0===r.selectedWorkbookIds.length)return r.hasNoItemsSelected=!0,void(r.itemsNotSelectedError=this.services.localizationService.get("PublishContentPack_NoItemsSelected"));r.isPublishInProgress=!0,r.isPublishCancelled=!0;var c,l=!1;if(a&&(c=this.services.contentPackService.findContentPackByGUID(r.providerKey),l=c.isDirty),!l&&this.onContentPackChanged())return this.scope.viewModel.isPublishOrUpdateError=!0,this.scope.viewModel.publishOrUpdateError=this.services.localizationService.get("UpdateContentPack_NoChangesMade"),r.isPublishInProgress=!1,void(r.isPublishCancelled=!1);var d=this.services.telemetryService,p=!1,u=this.services.groupService.isMyWorkspace(),v=d.startEvent(e.telemetry.DashboardContentPackPublish,a,r.selectedDashboardIds.length,r.selectedReportIds.length,r.selectedDatasetIds.length,r.selectedWorkbookIds.length,u,r.isSharedWithOrg?0:r.groupsAddressesList?r.groupsAddressesList.length:0,p),h=e.contentPackService.publishContentPack(r,this.scope.imageThumbView,null,this.scope.isIconUpdated,!1,v.event);h.then((function(t){v.resolve(),o.services.notificationToast.notify({title:o.services.localizationService.get("Publish_Success"),message:o.services.localizationService.format("Publish_SuccessMessage",[r.titleText]),notificationType:e.common.NotificationToastType.Success}),o.scope.viewModel.isPublishInProgress=o.scope.viewModel.isPublishCancelled=!1,o.switchToDashboardView(),o.services.contentPackService.loadContentPacks(),a&&o.services.contentPackService.setContentPackCleanForSession(r.providerKey)}),(function(e){if(o.scope.viewModel.isPublishInProgress=o.scope.viewModel.isPublishCancelled=!1,p=o.handleKnownUserError(e.headers(t.errorInfoHeader)),!p){var i=JSON.parse(e.headers(t.errorHeader));i&&i.error&&(i.error.code===t.errorCode?p=o.readFailedPrincipals(i,t.errorCode):i.error.code===t.servicePlanErrorCode&&(p=o.readFailedPrincipals(i,t.servicePlanErrorCode)))}if(p){var r=v.event;r.info.isUserError=!0,v.resolve()}else v.reject(),o.services.errorService.error(o.services.localizationService.get("PublishContentPack_Failed_Desc"),"",{requestId:e.requestId,statusCode:e.status.toString(),activityId:e.activityId})}))}}},t.DescriptionSizeLimit=2e3,t.TitleSizeLimit=200,t.errorHeader="X-PowerBI-Error-Details",t.errorInfoHeader="X-PowerBI-Error-Info",t.errorCode="GroupOrPrincipalValidationFailed",t.errorKey="FailedGroupOrPrincipals",t.servicePlanErrorCode="PrincipalDoesNotHaveKnownOrValidServicePlan",t.servicePlanErrorKey="FailedPrincipals",t.imageTypeNotAllowed="ImageTypeNotAllowed",t.invalidImageFormat="InvalidImageFormat",t.templatePublishErrorPrefix="TemplatePublishError_",t})();t.PublishContentPackView=n})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=jsCommon.StringExtensions,i=(function(){function e(e,i){var o=this;this.scope=e,this.services=i,this.scope.hideDialog=function(){return o.hideDialog()},this.scope.tryIEDownloadQRCodeImage=function(){return o.tryIEDownloadQRCodeImage()},this.scope.qrCodeCanvas=this.services.qrCodeService.getQRCodeCanvas(this.scope.viewModel.url),void 0!==this.scope.viewModel.subDisplayText?this.scope.qrCodeImageFileName=t.format("{0} - {1}.jpg",this.scope.viewModel.displayText,this.scope.viewModel.subDisplayText):this.scope.qrCodeImageFileName=t.format("{0}.jpg",this.scope.viewModel.displayText),this.scope.qrCodeImageDataUrl=this.scope.qrCodeCanvas.toDataURL("image/jpeg",1)}return e.createOptions=function(){return{additionalServices:["qrCodeService"]}},e.prototype.hideDialog=function(){this.services.qrCodeService.hideQRCodeDialog()},e.prototype.tryIEDownloadQRCodeImage=function(){if(this.scope.qrCodeCanvas.msToBlob){var e=this.scope.qrCodeCanvas.msToBlob();return window.navigator.msSaveBlob(e,this.scope.qrCodeImageFileName),!1}return!0},e})();e.QrCodeDialogController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){var i=this;this.scope=e,this.services=t,this.scope.hideDialog=function(){return i.hideDialog()}}return e.createOptions=function(){return{additionalServices:["qrCodeService"]}},e.prototype.hideDialog=function(){this.services.qrCodeService.hideQRProgressDialog()},e})();e.QRCodeProgressDialogController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){var i=(function(){function t(t,i){var o=this;this.scope=t,this.services=i,this.scope.memberManagementEnabled=this.services.featureSwitchService.featureSwitches.cloudRlsRoleMembershipEnabled,this.services.modelService.modelsPromise.then((function(){o.updateViewModel()})),this.scope.impersonateRole=function(e){return o.impersonateRole(e)},this.scope.$on(e.common.constants.navigation.stateChangeSuccess,(function(e){e.stopPropagation&&e.stopPropagation(),o.updateViewModel()})),this.services.featureSwitchService.featureSwitches.cloudRlsRoleMembershipEnabled?this.rowLevelSecurity=this.services.rowLevelSecurity:this.rowLevelSecurity=this.services.rowLevelSecurityLegacy;var r=this.services.rootScope.$on(e.common.constants.navigation.stateChangeStart,(function(t,i,a,n,s){n.name===e.constants.navigation.states.rowLevelSecurity&&(t.preventDefault(),o.rowLevelSecurity.showSaveDialogIfDirty(o.scope.viewModel.manage.currentRole,(function(){r(),o.services.navigation.stateService.go(i.name,a)})))}));this.scope.$on("$destroy",(function(){r()}))}return t.createOptions=function(){return{additionalServices:["dataProxy","featureSwitchService","impersonationService","modelService","navigation","reportService","rowLevelSecurityLegacy","rowLevelSecurity","telemetryService"]}},t.prototype.impersonateRole=function(t){var i=this,o=this.services.impersonationService,r=this.model,a=_.find(this.services.reportService.reports,(function(e){return e.modelId===r.id}));if(a){var n=[t];this.services.telemetryService.logEvent(e.telemetry.RowLevelSecurityImpersonateEntities,e.telemetry.ImpersonatedEntity.Role,n.length,!0),o.setActiveModel(r.id,(function(){i.services.dataProxy.clearCache("dsr",[{dbName:r.dbName,modelId:r.id,vsName:r.vsName,schemaName:void 0}])})),o.setActiveRoles(n);var s=a.contract&&a.contract.originalReportObjectId;this.services.navigation.navigateToReportByGUID(a.objectId,this.services.navigation.currentGroupGUID,s)}else this.rowLevelSecurity.showReportRequiredDialog()},t.prototype.updateViewModel=function(){var t=this,i=this.services.navigation.rowLevelSecurityModelId;this.model=this.services.modelService.findModel(i),this.rowLevelSecurity.loadRoles(this.model),this.scope.viewModel=new e.rowLevelSecurity.models.RowLevelSecurityModel(this.model),this.rowLevelSecurity.rolesPromise.then((function(){var e=t.scope.viewModel.manage;e.roles=t.rowLevelSecurity.roles,e.roles.length>0&&(e.currentRole=e.roles[0]),e.rolesLoaded=!0}),(function(){t.services.navigation.navigateBack()}))},t})();t.RowLevelSecurityController=i})(i=t.rowLevelSecurity||(t.rowLevelSecurity={}))})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){var i=this;this.scope=e,this.services=t,this.scope.viewModel={dashboardObjectId:this.services.navigation.currentDashboardGUID,isRequestActive:!1,splashMessage:this.services.localizationService.get("RequestDashboardAccess_SplashMessage")},this.scope.requestAccess=function(){return i.requestAccess()}}return t.createOptions=function(){return{additionalServices:["navigation","localizationService","modalDialogService","telemetryService","invitationService","dashboardService","groupService","errorService"]}},t.prototype.requestAccess=function(){var e=this,t=this.scope.$new(!0);t.viewModel={accessRequestedDescription:this.services.localizationService.get("RequestDashboardAccessModal_AccessRequestedDescription"),requestAccessDescription:this.services.localizationService.get("RequestDashboardAccessModal_RequestAccessDescription"),placeholderText:this.services.localizationService.get("RequestDashboardAccessModal_Placeholder"),message:""};var i=[new InJs.ModalDialogAction(this.services.localizationService.get("RequestDashboardAccessModal_SendButton"),function(i,o){e.scope.viewModel.isRequestActive=!0,t.closeDialog(),e.sendRequest(t.viewModel.message)}),new InJs.ModalDialogAction(this.services.localizationService.get("RequestDashboardAccessModal_CancelButton"),function(e,i){t.closeDialog()})],o={dialogName:this.services.localizationService.get("RequestDashboardAccessModal_RequestAccessTitle"),template:"<request-dashboard-access-modal></request-dashboard-access-modal>",dialogActions:i,scope:t};this.services.modalDialogService.showLegacyWebModalDialog(o)},t.prototype.sendRequest=function(t){var i=this,o=!1;t||(t="",o=!0);var r=this.services.telemetryService.startEvent(e.telemetry.DashboardRequestDashboardAccess,this.scope.viewModel.dashboardObjectId,t.length,o);this.services.invitationService.requestDashboardAccess(this.scope.viewModel.dashboardObjectId,t,r.event).then((function(e){r.resolve(),i.showConfirmationDialog()}),(function(t){var o=t.headers(e.common.PowerBIErrorHeader),a="RequestDashboardAccessInvalidRequest",n=o||a;r.reject({errorCode:n,errorSource:n!==a?e.telemetry.ErrorSource.User:e.telemetry.ErrorSource.PowerBI}),i.services.errorService.error(i.services.localizationService.get("RequestDashboardAccess_FailedToRequestDashboardAccess"),"RequestDashboardAccess_FailedToRequestDashboardAccess",{requestId:t.requestId,statusCode:t.status.toString()}),i.scope.viewModel.isRequestActive=!1}))},t.prototype.showConfirmationDialog=function(){var e=this,t=this.scope.$new(!0);t.message=this.services.localizationService.get("RequestDashboardAccessModal_AccessRequested");var i=[new InJs.ModalDialogAction(this.services.localizationService.get("RequestDashboardAccessModal_CloseButton"),function(i,o){t.closeDialog(),e.onConfirmationDialogClosed()})],o={dialogName:this.services.localizationService.get("RequestDashboardAccessModal_AccessRequestedTitle"),template:"<span>{{message}}</span>",scope:t,dialogActions:i,isDismissable:!1};this.services.modalDialogService.showLegacyWebModalDialog(o)},t.prototype.onConfirmationDialogClosed=function(){var e=this.services.dashboardService.dashboardContainerModel.visibleDashboards;e&&e.length>0?this.services.navigation.navigateToDashboardByGUID(e[0].objectId):this.services.navigation.navigateToGroupWelcome()},t})();t.RequestDashboardAccessController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.models.CollapsiblePaneExpandedWidth,o=e.common.constants,r=e.models.factory.DatasetsMenuFactory,a=jsCommon.EnumExtensions,n=e.common.helpers.ModelConverterHelper,s=e.common.contracts.Permissions,c=e.common.contracts.PublishOrRefreshStatus,l=e.common.contracts.RealTimeMode,d=e.common.constants.TaskPaneCollapsiblePaneMode,p=(function(){function p(e,t){var i=this;this.mapDateObjects=function(e){return e.forEach((function(e){e.nextRefreshTime=i.convertRefreshTimeToJsDateTime(e.contract.nextRefreshTime)})),e},this.scope=e,this.services=t,e.predicate="name",e.reverse=!0,e.order=function(t){e.reverse=e.predicate===t&&!e.reverse,e.predicate=t},e.modelService=this.services.modelService,this.initialize()}return p.createOptions=function(){return{additionalServices:["analyzeInExcel","contentPackService","dashboardService","errorService","featureSwitchService","groupService","historyDialogService","insightsService","localizationService","modalDialogService","modelConverter","modelHttpService","modelService","navigation","ownership","packageService","realTimeModel","refreshService","rowLevelSecurity","quota","telemetryService","tutorialDataStore","settingsMetadataService","overlayService","permissionService"]}},p.prototype.initialize=function(){var t=this;this.services.telemetryService.logEvent(e.telemetry.DashboardManageDatasetsLanding),this.modelDashboards={},this.streamingDatasetActions={},this.datasetMenuActions=this.createFileMenuActions(),this.isOrgApp=!1;var i=1;this.services.navigation.inManageStreamingDatasetView()&&(i=2,1===this.services.navigation.instantiationMode&&this.showStreamingDatasetGalleryPane()),this.setActiveTab(i),this.services.groupService.ensureGroupsInitialization().then((function(){t.services.groupService.activeGroup&&(t.activeGroupName=t.services.groupService.activeGroup.displayName)})),this.searchFilter=""},Object.defineProperty(p.prototype,"conceptualModelEnabled",{get:function(){return this.services.featureSwitchService.featureSwitches.conceptualModelEnabled||this.services.featureSwitchService.featureSwitches.previewConceptualModel&&this.services.tutorialDataStore.hasKey(o.previewConceptualModelNewKey)},enumerable:!0,configurable:!0}),p.prototype.inDatasetsView=function(){var e=this.services.navigation;return e.inManageDatasetView()||e.inManageStreamingDatasetView()},p.prototype.isPackagePublishInProgress=function(e){return e===c.PublishInProgress},p.prototype.navigateToContentList=function(){this.services.navigation.navigateToContentList(this.services.groupService.activeGroupObjectId)},p.prototype.convertRefreshTimeToJsDateTime=function(e){var t=n.convertRefreshTimeToJsDateTime(e);return t.getFullYear()>3e3?this.services.localizationService.get("ManageDatasets_NextRefresh_NA"):t.toLocaleString()},p.prototype.datasetMenuActionSelected=function(e){switch(e.action){case 8:this.analyzeInExcel(this.activeModel);break;case 1:this.createReport(this.activeModel);break;case 7:case 16:this.delete(this.activeModelContract);break;case 2:case 11:case 12:this.getInsights(this.activeModelContract);break;case 3:this.granularSecurity(this.activeModelContract);break;case 5:this.refreshNow(this.activeModelContract);break;case 4:this.rename(this.activeModelContract);break;case 6:this.refreshSchedule(this.activeModelContract);break;case 10:this.navigateToSettingsPage(this.activeModelContract);break;case 9:this.personalizeDataset(this.activeModel);break;case 13:this.toggleRowState(this.activeModelIndex);break;case 15:this.showStreamingDatasetEditorPane(this.activeModel.id);break;case 14:this.showStreamingDatasetPushInfoPane(this.activeModel.id)}this.services.overlayService.hideAllDropdowns()},p.prototype.streamingDatasetActionSelected=function(e,t,i){this.setActiveModel(e,t),this.datasetMenuActionSelected(i)},p.prototype.getDashboardsForModel=function(e){return this.modelDashboards[e.id]||(this.modelDashboards[e.id]=_(this.services.dashboardService.dashboards).filter((function(t){return t.contract.modelIds&&t.contract.modelIds.indexOf(e.id)>=0})).map((function(e){return e.displayName})).value().join(this.services.localizationService.get("ListJoin_Separator"))),this.modelDashboards[e.id]},p.prototype.getStreamingDatasetActions=function(e){if(a.hasFlag(e.getPermissions(),s.All)){if(this.streamingDatasetActions[e.realTimeMode])return this.streamingDatasetActions[e.realTimeMode];var t=[];return t.push(15),t.push(16),e.realTimeMode===l.PersistAndCache&&t.push(1),e.realTimeMode!==l.PubNubCacheOnly&&t.push(14),this.streamingDatasetActions[e.realTimeMode]=r.customizeRowMenuActions(t,this.services.localizationService)}return[]},p.prototype.getModelType=function(t){return t.realTimeMode===l.PubNubCacheOnly?e.constants.streamingDatasetModelPubNub:this.services.localizationService.get("StreamingDataset_API")},p.prototype.navigateToGetData=function(){this.services.telemetryService.logEvent(e.telemetry.DashboardOpenGetDataPage,e.telemetry.OpenGetDataPageInteraction.NavigatorPaneAddDatasetButton),this.services.navigation.showGetDataSlider()},p.prototype.resetSearchOnEsc=function(e){e.which===jsCommon.DOMConstants.escKeyCode&&(this.searchFilter="")},p.prototype.setActiveTab=function(e){this.activeTab=e,this.placeholderText=1===this.activeTab?this.services.localizationService.get("ManageDataSets_PlaceholderSearchDatasets"):this.services.localizationService.get("ManageDataSets_PlaceholderSearchStreamingDatasets"),1===e?this.services.navigation.navigateToDatasets():this.services.navigation.navigateToStreamingDatasets(0)},p.prototype.showStreamingDatasetGalleryPane=function(){this.services.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.CreateStreamingDataset)||(this.services.realTimeModel.setSelected(null),this.services.featureSwitchService.featureSwitches.realTimePubNubEnabled?this.scope.$emit(e.constants.showTaskPaneSlider,d.StreamingDatasetGallery):this.scope.$emit(e.constants.showTaskPaneSlider,d.StreamingDatasetEditor))},p.prototype.showOptions=function(e,t){this.setActiveModel(e,t),this.customizeMenuActions(this.activeModelContract,this.activeModelPackage)},p.prototype.toggleRowState=function(e){this.activePosition=this.activePosition===e?-1:e},p.prototype.setActiveModel=function(e,t){this.activeModel=e,this.activeModelIndex=t,this.activeModelContract=e.contract,this.activeModelPackage=this.services.packageService.findPackage(this.activeModelContract.packageId)},p.prototype.createReport=function(t){return null!=t.contract.packagePublishStatus&&t.contract.packagePublishStatus!==c.FinishedSuccessfully&&t.contract.packagePublishStatus!==c.RefreshInProgress&&t.contract.packagePublishStatus!==c.RefreshError?void(t.contract.packagePublishStatus===c.PublishError&&this.deleteModelOnPublishFailure(t.id)):(t.isNew=t.contract.isNew=!1,void(this.services.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.OpenDataset)||(a.hasFlag(t.getPermissions(),s.CopyOnWrite)?this.scope.$emit(e.constants.personalizeEventName,t.packageId):this.services.navigation.navigateToDatasetByDBName(t.dbName))));
},p.prototype.deleteModelOnPublishFailure=function(e){var t=this;this.deleteItemOnPublishFailure(this.services.localizationService.get("NavigationPane_ModelPublishErrorTitle"),this.services.localizationService.get("NavigationPane_ModelPublishErrorContent"),(function(){t.services.modelService.deleteModel(e)}))},p.prototype.deleteItemOnPublishFailure=function(e,t,i){var o=this,r=this.services.errorService.control(),a=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Delete"),function(e,t){r.hideDialog(),i()}),new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Cancel"),function(e,t){r.hideDialog()})];r.showCustomDialog(e,$("<div/>").text(t),a,(function(e){e.parent().find('input[value="'+o.services.localizationService.get("ModalDialogButtonText_No")+'"]').focus()}),!0)},p.prototype.getInsights=function(t){this.services.telemetryService.logEvent(e.telemetry.DashboardDatasetClickInsights,t.contentProviderId),this.showInsightsContainer(t.dbName,t.vsName,t.packageId,e.insights.constants.insightsSourceNavigationPane)},p.prototype.showInsightsContainer=function(t,i,o,r){var a=this,n=this.services.modelService.findModelByDBName(t,o);if(n){var s=this.services.insightsService.getInsightsStatus(n.contract);if(2===s)this.services.navigation.showInsightsPanel(t,r);else if(0===s){var c=e.telemetry.InsightEntryPoint.NavigationPane;r===e.insights.constants.insightsSourceToast&&(c=e.telemetry.InsightEntryPoint.Notification);var l=this.services.telemetryService.startEvent(e.telemetry.InsightsShowInsights,0,c,n.contract.contentProviderId,e.getHashCode(n.contract.dbName),!1);this.services.insightsService.getInsights(!0,e.insights.services.RequestType.Initial,n.contract,c,e.insights.proxies.wireContracts.RequestOptions.ThoroughMode,l.event,null,null,null,null,!1).then((function(t){var i=t.insightsContainers,o=i?i.length:0;l.event.info.insightCount=o,t.isError&&o<=0?l.reject():l.resolve(),a.scope.$emit(e.insights.constants.insightsLoadedEventName,n,o>0)}))}}},p.prototype.showStreamingDatasetEditorPane=function(t){this.services.realTimeModel.setSelected(t),this.scope.$emit(e.constants.showTaskPaneSlider,d.StreamingDatasetEditor)},p.prototype.granularSecurity=function(t){this.services.telemetryService.logEvent(e.telemetry.RowLevelSecurityOpenRowLevelSecuritySettings,t.contentProviderId,t.cloudRlsEnabled),6===t.contentProviderId?this.cloudRlsNotSupportedDialog():this.services.navigation.showRowLevelSecuritySlider(t.id)},p.prototype.cloudRlsNotSupportedDialog=function(){var t=this.services.rootScope.$new(),i=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Close"),function(){t.closeDialog()})],o={dialogName:this.services.localizationService.get("ModalDialog_CloudRlsUnSupportedTypeTitle"),isDismissable:!0,scope:t,template:"<custom-modal-dialog></custom-modal-dialog>",dialogActions:i,containerCssClass:"cloudRlsDialog",htmlMessageText:this.services.localizationService.get("ModalDialog_CloudRlsUnSupportedTypeMessage")+"<br /> <a target='_blank' href='https://go.microsoft.com/fwlink/?LinkID=733530'>"+e.common.localize.get("ModalDialog_CloudRlsLearnMore")+"</a></div>"};this.services.modalDialogService.showLegacyWebModalDialog(o)},p.prototype.rename=function(t){this.services.telemetryService.logEvent(e.telemetry.DashboardDatasetClickRename,t.contentProviderId),this.services.settingsMetadataService.setSettings(4,t.dbName),this.scope.$emit(e.constants.showTaskPaneSlider,d.SettingsBlade,i.Medium)},p.prototype.refreshNow=function(t){this.services.telemetryService.logEvent(e.telemetry.DashboardDatasetClickRefreshNow,t.contentProviderId),this.services.refreshService.tryRefreshNow(this.services.telemetryService,this.services.errorService,t,e.models.SettingsGroupsType.Datasets)},p.prototype.refreshSchedule=function(t){this.services.telemetryService.logEvent(e.telemetry.DashboardDatasetClickScheduleRefresh,t.contentProviderId),this.services.navigation.showSettingsSlider(e.models.SettingsGroupsType.Datasets,t.dbName)},p.prototype.navigateToSettingsPage=function(t){this.services.navigation.showSettingsSlider(e.models.SettingsGroupsType.Datasets,t.dbName)},p.prototype.delete=function(i){this.services.telemetryService.logEvent(e.telemetry.DashboardDatasetClickDelete,i.contentProviderId);var o=i.id,r=i.packageId,a=this.services.modelService.findModel(o,r);a&&a.isUsedByContentPack?this.services.contentPackService.showDialogOnModelDeleteInContentPack(o):this.deleteModel(o,r,this.isOrgApp?t.DeleteContentPackMessageType.Dataset:null)},p.prototype.deleteModel=function(e,i,o){var r,a,n=this,s=this.services.modelService.findModel(e,i),c=this.services.errorService.control(),l=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Delete"),function(t,o){c.hideDialog(),s&&s.realTimeMode?n.services.realTimeModel.deleteModel(e):n.services.modelService.deleteModel(e,i)}),new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Cancel"),function(e,t){c.hideDialog()})];switch(o){case t.DeleteContentPackMessageType.Dataset:r=this.services.localizationService.get("Model_DeleteConfirmationTitle"),a=this.services.localizationService.get("Model_DeleteOrgAppContentPack");break;default:s&&s.realTimeMode?(r=this.services.localizationService.get("StreamingDatasetModel_DeleteConfirmationTitle"),a=this.services.localizationService.format("StreamingDatasetModel_DeleteConfirmationMessage",[s.displayName])):(r=this.services.localizationService.get("Model_DeleteConfirmationTitle"),a=this.services.localizationService.format("Model_DeleteConfirmationMessage",s?[s.displayName]:[]))}c.showCustomDialog(r,$("<div/>").text(a),l,(function(e){e.parent().find('input[value="'+n.services.localizationService.get("ModalDialogButtonText_Cancel")+'"]').focus()}),!0)},p.prototype.customizeMenuActions=function(e,t){var i=this.services.featureSwitchService,o=this.services.localizationService,n=[],c=this.services.permissionService.getModelEffectivePermissions(e.id);if((c&s.CopyOnWrite)===s.CopyOnWrite&&(n.push(9),n.push(7),this.isOrgApp=!0),this.services.ownership.permissionsArePersonalized(c,t)&&(n.push(7),this.isOrgApp=!1),a.hasFlag(c,s.All)&&(this.isOrgApp=!1,n.push(10),n.push(4),n.push(7),e.onPremModelConnectionString||(e.directQueryMode?n.push(10):n.push(6)),n.push(5)),i){if(this.services.analyzeInExcel.isAnalyzeInExcelSupported(i,c)&&n.push(8),e.insightsSupported&&(a.hasFlag(c,s.Read)||this.services.ownership.permissionsArePersonalized(c,t))){var l=this.findInsightAction(e);n.push(l)}if(a.hasFlag(c,s.All)&&(6===e.contentProviderId||7===e.contentProviderId)&&!e.onPremModelConnectionString){var d=this.services.groupService.activeGroup;(d.isMyWorkspace||d.contract.isOwner||!d.contract.isReadOnly)&&n.push(3)}}n.push(13),this.isOrgApp||n.push(1),this.datasetMenuActions=r.customizeRowMenuActions(n,o)},p.prototype.findInsightAction=function(e){var t=this.services.insightsService.getInsightsStatus(e);switch(t){case 2:return 12;case 1:return 11;default:return 2}},p.prototype.analyzeInExcel=function(t){var i=this.services.modelService.findModel(t.id,t.packageId);i&&(this.services.telemetryService.logEvent(e.telemetry.DashboardAndReportsAnalyzeInExcel,"Dataset Navigation Pane List",i.contentProviderId,i.contract.modelFeatures,i.dbName),this.services.analyzeInExcel.startAnalyzeInExcel(i))},p.prototype.personalizeDataset=function(t){this.services.telemetryService.logEvent(e.telemetry.DashboardClickPersonalize,t.contentProviderId),this.scope.$emit(e.constants.personalizeEventName,t.packageId)},p.prototype.createFileMenuActions=function(){var e=this.services.localizationService;return r.rowMenuActions(e)},p.prototype.showStreamingDatasetPushInfoPane=function(t){this.services.telemetryService.logEvent(e.telemetry.RealTimeStreamingDatasetPushInfoPaneOpened),this.services.realTimeModel.setSelected(t),this.scope.$emit(e.constants.showTaskPaneSlider,d.StreamingDatasetPushInfo)},p})();t.ManageDatasetsController=p})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.helpers.ModelConverterHelper,o=(function(){function o(e,t){var i=this;this.scope=e,this.model=this.scope.viewModel,this.services=t,this.scope.isScheduledRefresh=function(e){return i.isScheduledRefresh(e)},this.scope.isRefreshInProgress=function(e){return i.isRefreshInProgress(e)},this.scope.isRefreshTimedOut=function(e){return i.isRefreshTimedOut(e)},this.initModalDialog(),this.modelRefreshHistories=[],this.packageRefreshHistories=[],this.errorService=this.services.errorService,this.datasetsService=this.services.datasetsService,this.modelHttpService=this.services.modelHttpService,this.telemetryService=this.services.telemetryService,this.promiseFactory=this.services.promiseFactory,this.getRefreshHistories(),this.scope.getSelectedHistories=function(e){return i.selectHistories(e)}}return o.createOptions=function(){return{additionalServices:["datasetsService","modelHttpService","telemetryService","errorService","localizationService","promiseFactory"]}},o.prototype.getRefreshHistories=function(){var t=this,i=this.promiseFactory.defer(),o=this.promiseFactory.defer(),r=this.telemetryService.startEvent(e.telemetry.DashboardGetRefreshHistory,e.telemetry.RefreshType.Models),a=this.telemetryService.startEvent(e.telemetry.DashboardGetRefreshHistory,e.telemetry.RefreshType.Packages);this.services.modelHttpService.getModelRefreshHistories(this.model.datasetModel.dataset.modelId.toString(),r.event).then((function(e){i.resolve(e),r.resolve()}),(function(e){i.resolve(e),r.reject()})),this.services.modelHttpService.getPackageRefreshHistories(this.model.datasetModel.dataset.contract.packageId.toString(),a.event).then((function(e){o.resolve(e),a.resolve()}),(function(e){o.resolve(e),a.reject()})),this.promiseFactory.all([i.promise,o.promise]).then((function(e){t.model.showSpinner=!1;var i=e[0],o=e[1];i.data||o.data||t.errorModalConfig(i,"HistoryDialog_ScheduledAndOneDriveRefreshHistoryError"),i.data&&!o.data&&(t.modelRefreshHistories=t.convertRefreshHistories(i.data),t.scope.refreshTypeSelected=0,t.errorModalConfig(o,"HistoryDialog_OneDriveRefreshHistoryError")),!i.data&&o.data&&(t.packageRefreshHistories=t.convertRefreshHistories(o.data),t.scope.refreshTypeSelected=1,t.errorModalConfig(i,"HistoryDialog_ScheduledRefreshHistoryError")),i.data&&o.data&&(t.modelRefreshHistories=t.convertRefreshHistories(i.data),t.packageRefreshHistories=t.convertRefreshHistories(o.data),i.data.length<=0&&o.data.length>0?t.scope.refreshTypeSelected=1:t.scope.refreshTypeSelected=0)}))},o.prototype.errorModalConfig=function(t,i){this.errorService.error(e.common.localize.get(i),i,{requestId:t.requestId,statusCode:t.status.toString(),displayLearnMoreHelpLink:!0,helpLink:"http://go.microsoft.com/fwlink/?LinkId=799819"})},o.prototype.selectHistories=function(e){return 0===e?this.modelRefreshHistories:1===e?this.packageRefreshHistories:void 0},o.prototype.initModalDialog=function(){var t=this;this.model.showModalDialog=!0,this.scope.dialogModel=new e.common.models.ModalDialogModel((!1),this.services.localizationService.get("TopNav_HelpMenu_AboutDialog_Close"),(!0),(!1),(!1),(!0)),this.scope.closeDialog=function(){return t.closeDialog()}},o.prototype.closeDialog=function(){var e=this;this.model.showModalDialog=!1,setTimeout((function(){e.model.showHistoryDialog=!1,e.scope.$apply()}),0)},o.prototype.isScheduledRefresh=function(t){return t.refreshType===e.common.contracts.RefreshType.Scheduled},o.prototype.isRefreshInProgress=function(t){return!t.endTime&&new Date(t.startTime).getTime()+e.constants.refreshHistoryDialogTimeoutValue>=Date.now()},o.prototype.isRefreshTimedOut=function(t){return!t.endTime&&new Date(t.startTime).getTime()+e.constants.refreshHistoryDialogTimeoutValue<Date.now()},o.prototype.convertRefreshHistories=function(o){var r=[];if(o)for(var a=o.length,n=0;n<a;n++){var s=o[n];r.push({id:s.id,refreshType:s.refreshType?s.refreshType:e.common.contracts.RefreshType.Scheduled,startTime:i.convertRefreshTimeToJsDateTime(s.startTime).toLocaleString(),endTime:s.endTime?i.convertRefreshTimeToJsDateTime(s.endTime).toLocaleString():"",isSuccessful:s.isSuccessful,friendlyErrorMessage:t.SettingsDatasetController.getFriendlyErrorMessage(s.serviceExceptionJson),details:t.SettingsDatasetController.convertErrorDetailsJson(s.serviceExceptionJson)})}return r},o})();t.HistoryDialogController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){var i=this;this.scope=e,this.services=t,e.canCloseAccount=this.canCloseAccount(),e.promptCloseAccount=function(){return i.promptCloseAccount()}}return t.createOptions=function(){return{additionalServices:["errorService","localizationService","telemetryService","userInfo","userMetadataHttpService"]}},t.prototype.canCloseAccount=function(){var t=this.services.userInfo;return!t.userHasPremiumPlan&&t.userMetadata.tenantMetadata.tenantType===e.common.contracts.TenantType.ViralTenant},t.prototype.promptCloseAccount=function(){var e=this,t=this.services.errorService.control(),i=this.services.localizationService;t.showPrompt(i.get("Settings_CloseAccount"),i.get("Settings_CloseAccount_AreYouSure"),[new InJs.ModalDialogAction(i.get("ModalDialogButtonText_CloseAccount"),function(){e.closeAccount(),t.hideDialog()}),new InJs.ModalDialogAction(i.get("ModalDialogButtonText_Cancel"),function(){t.hideDialog()})])},t.prototype.closeAccount=function(){var t=this,i=this.services.telemetryService.startEvent(e.telemetry.DashboardCloseUserAccount,this.scope.reason,this.scope.userComment);this.services.userMetadataHttpService.closeUserAccount(i.event).then((function(){i.resolve(),e.LocalyticsService.afterDequeue((function(){location.href="/AccountClosed"}))}),(function(e){t.services.errorService.error(t.services.localizationService.get("GenericErrorDescription"),"GenericError",{requestId:e.requestId,statusCode:e.status.toString()}),i.reject()}))},t})();t.SettingsCloseAccountController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.models.ContentPackItems,o=(function(){function t(e,t){var i=this;this.scope=e,this.services=t,this.services.localizationService.ensureLocalization((function(){return e.sectionTitle=i.services.localizationService.format("SettingsDashboard_Title",[e.viewModel.name])}));var o=e.viewModel;e.qnaEnabled=o.qnaEnabled,e.gravityEnabled=!!o.gravityEnabled,e.applyChanges=function(){return i.applyChanges()},e.discardChanges=function(){return i.discardChanges()},this.scope.onDataClassificationIdChanged=function(){return i.onDataClassificationIdChanged()},null==e.qnaEnabled&&(e.qnaEnabled=o.hasQnaSupportedModel),this.services.featureSwitchService.featureSwitches.dataClassificationEnabled&&this.services.dataClassificationService.getDataClassificationsAsync().then((function(t){i.scope.dataClassifications=t,i.scope.defaultDataClassification=_.find(t,(function(e){return e.default})),t.length>0&&(e.dataClassificationId=o.dataClassificationId||i.scope.defaultDataClassification.id)}))}return t.createOptions=function(){return{additionalServices:["dashboardHttpService","errorService","localizationService","navigation","telemetryService","dashboardService","dataClassificationService","featureSwitchService"]}},t.prototype.applyChanges=function(){var t=this,o=this.scope,r=o.dashboardSettingsForm;if(r.$dirty){var a=o.viewModel,n=a.dashboardId,s=o.qnaEnabled,c=o.gravityEnabled,l=o.dataClassificationId,d=this.services.telemetryService.startEvent(e.telemetry.DashboardSaveDashboardSettings,!1,!1,!1),p=this.getUpdatedDashboardSetting();this.services.dashboardHttpService.updateDashboardSetting(n,p,d.event).then((function(){var o=t.services.dashboardService.dashboardContainerModel.findDashboard(n);if(o&&o.isUsedByContentPack&&t.services.rootScope.$emit(e.constants.contentPackDirtyShowNotification,o.id,i.Dashboard),t.scope.qnaEnabled!==a.qnaEnabled&&(a.qnaEnabled=s,t.services.dashboardService.setQnaEnabled(a.dashboardId,s),d.event.info.qnaEnabledUpdated=!0),t.scope.gravityEnabled!==a.gravityEnabled){a.gravityEnabled=c,d.event.info.gravityEnabledUpdated=!0;var r=t.services.dashboardService.dashboardContainerModel.findDashboard(a.dashboardId);r&&(r.contract.gravityEnabled=r.gravityEnabled=c)}if(t.scope.dataClassificationId!==a.dataClassificationId){a.dataClassificationId=l,d.event.info.dataClassificationUpdated=!0;var p=_.find(t.services.dashboardService.dashboards,(function(e){return e.id===a.dashboardId}));p.dataClassificationId=l}d.resolve(),t.services.navigation.navigateBack()}),(function(e){d.reject(),t.services.errorService.error(t.services.localizationService.get("SettingsDashboards_Error_FailedToSaveDashboards"),"SettingsDashboards_Error_FailedToSaveDashboards",{requestId:e.requestId,statusCode:e.status.toString()})}))}},t.prototype.discardChanges=function(){this.services.navigation.navigateBack()},t.prototype.getUpdatedDashboardSetting=function(){var e=this.scope.viewModel;return _.omit({qnaEnabled:this.scope.qnaEnabled!==e.qnaEnabled?this.scope.qnaEnabled:null,gravityEnabled:this.scope.gravityEnabled!==e.gravityEnabled?this.scope.gravityEnabled:null,dataClassificationId:this.scope.dataClassificationId!==e.dataClassificationId?this.scope.dataClassificationId:null},(function(e){return null===e}))},t.prototype.onDataClassificationIdChanged=function(){this.scope.isNonDefaultDataClassificationSelected=this.scope.dataClassificationId!==this.scope.defaultDataClassification.id},t})();t.SettingsDashboardController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t,i){this.scope=t,this.services=i;var o=t.viewModel;t.onDashboardSelected=function(t){return i.navigation.showSettingsSlider(e.models.SettingsGroupsType.Dashboards,t)},i.navigation.settingsId?o.currentDashboardId=i.navigation.settingsId:!o.currentDashboardId&&o.dashboards.length>0&&(o.currentDashboardId=_.sortBy(o.dashboards,(function(e){return e.name.toUpperCase()}))[0].objectId);var r=t.$on(e.common.constants.navigation.stateChangeSuccess,(function(){i.navigation.settingsGroup===e.models.SettingsGroupsType[e.models.SettingsGroupsType.Dashboards].toLowerCase()&&(o.currentDashboardId=i.navigation.settingsId)}));t.$on("$destroy",(function(){r()}))}return t.createOptions=function(){return{additionalServices:["navigation"]}},t})();t.SettingsDashboardsController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t,i,o){var r=this;this.scope=t,this.services=i,this.settingsGroupsType=o;var a=this.scope.viewModel;this.scope.onDatasetSelected=function(e){return r.onDatasetSelected(e)},i.navigation.settingsId?a.currentDatasetId=this.getIdFromDbName(this.services.navigation.settingsId):!a.currentDatasetId&&this.scope.filteredModels.length>0&&(a.currentDatasetId=_.sortBy(this.scope.filteredModels,(function(e){return e.displayName.toUpperCase()}))[0].id);var n=this.scope.$on(e.common.constants.navigation.stateChangeSuccess,(function(){i.navigation.settingsGroup===e.models.SettingsGroupsType[r.settingsGroupsType].toLowerCase()&&(r.scope.viewModel.currentDatasetId=r.getIdFromDbName(r.services.navigation.settingsId))}));this.scope.$on("$destroy",(function(){n()}))}return t.createOptions=function(){return{additionalServices:["errorService","featureSwitchService","localizationService","modelService","navigation","telemetryService"]}},t.prototype.getIdFromDbName=function(e){var t=_.find(this.scope.viewModel.datasets,(function(t){return t.contract.dbName===e}));if(t)return t.modelId},t.prototype.onDatasetSelected=function(t){var i=this,o=_.find(this.scope.viewModel.datasets,(function(e){return e.modelId===i.scope.viewModel.currentDatasetId}));o&&(o.isDirty||o.isQnaDirty)?this.displayLeaveConfirmationModal(t):(this.setCurrentDataset(t),this.services.telemetryService.logEvent(e.telemetry.DashboardDataModelSelected,this.settingsGroupsType))},t.prototype.displayLeaveConfirmationModal=function(t){var i=this,o=this.services.errorService.control(),r=this.services.localizationService.get("SettingsDataset_DiscardChangesWarning_YesOption"),a=this.services.localizationService.get("SettingsDataset_DiscardChangesWarning_CancelOption"),n=[new InJs.ModalDialogAction(r,function(e,r){o.hideDialog(),i.setCurrentDataset(t)}),new InJs.ModalDialogAction(a,function(e,t){o.hideDialog()})],s=this.services.localizationService.get("SettingsDataset_DiscardChangesWarning_Title"),c=this.services.localizationService.get(this.settingsGroupsType===e.models.SettingsGroupsType.Datasets?"SettingsDataset_DiscardChangesWarning_DatasetMessage":"SettingsDataset_DiscardChangesWarning_WorkbookMessage");o.showCustomDialog(s,$("<div/>").text(c),n,(function(e){e.parent().find('input[value="'+a+'"]').focus()}),!0)},t.prototype.setCurrentDataset=function(e){this.services.navigation.showSettingsSlider(this.settingsGroupsType,e)},t})();t.SettingsDataModelsController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.contracts.admsGateway.DatabaseType,o=e.connectivity.models.DatasetParametersDialogModel,r=e.connectivity.helpers.ErrorConverterHelper,a=e.common.helpers.ModelConverterHelper,n=e.explore.util.ScriptVisualsUtil,s=e.common.contracts.StorageProviderType,c=e.common.contracts.ConnectionType,l=e.common.contracts.gateway.GatewayStatus;!(function(e){e[e.salesforce=9]="salesforce"})(t.ContentProviderIds||(t.ContentProviderIds={}));var d=t.ContentProviderIds,p=(function(){function t(t,i){var r=this;this.scope=t,this.services=i,this.model={},this.model.dataset=t.viewModel,this.scope.datasetPageReady=!1,this.scope.isPageActive=!0,this.scope.isFreemiumUser=!this.services.userInfo.isPremiumUser,this.scope.isHidden=!1,this.scope.editDatasource=function(e){return r.editDatasource(e)},this.scope.editStorageSource=function(){return r.editStorageSource()},this.scope.applyChanges=function(){return r.applyChanges()},this.scope.enableCortana=function(){return r.enableCortana()},this.scope.enableQna=function(){return r.enableQna()},this.scope.discardChanges=function(){return r.discardChanges()},this.scope.addRefreshTime=function(){return r.addRefreshTime()},this.scope.tryProAccount=function(){return r.tryProAccount()},this.scope.removeRefreshTime=function(e){return r.removeRefreshTime(e)},this.scope.canAddRefreshTime=function(){return r.canAddRefreshTime()},this.scope.shouldRefreshSettingsDisabled=function(){return r.shouldRefreshSettingsDisabled()},this.scope.shouldDatasourceCredentialsDisabled=function(){return r.shouldDatasourceCredentialsDisabled()},this.scope.shouldRefreshSettingsToggleDisabled=function(){return r.shouldRefreshSettingsToggleDisabled()},this.scope.updateStorageSourceRefresh=function(){return r.updateStorageSourceRefresh()},this.scope.shouldSettingsDatasetButtonDisable=function(){return r.shouldSettingsDatasetButtonDisable()},this.scope.shouldScheduleRefreshContainerDisabled=function(){return r.shouldScheduleRefreshContainerDisabled()},this.scope.shouldGatewaysContainerDisabled=function(){return r.shouldGatewaysContainerDisabled()},this.scope.shouldPackageRefreshSettingsToggleDisabled=function(){return r.shouldPackageRefreshSettingsToggleDisabled()},this.scope.shouldTakeoverContainerShow=function(){return r.shouldTakeoverContainerShow()},this.scope.refreshSettingsToggleMouseUp=function(){return r.refreshSettingsToggleChanged()},this.scope.getStorageSourceDisplayName=function(){return r.getStorageSourceDisplayName()},this.scope.showTakeoverDialog=function(){return r.showTakeoverDialog()},this.scope.isTakeoverStatusReady=!1,this.scope.testConnectionProgressing=function(e){return r.testConnectionProgressing(e)},this.scope.testConnectionFailed=function(e){return r.testConnectionFailed(e)},this.scope.testPackageConnectionProgressing=function(){return r.testPackageConnectionProgressing()},this.scope.testPackageConnectionFailed=function(){return r.testPackageConnectionFailed()},this.scope.updateOnPremGatewayOverride=function(e){return r.updateOnPremGatewayOverride(e)},this.scope.datasetParametersDialogParameters=new o,this.scope.authDialogParameters=new e.common.models.AuthDialogModel,this.scope.getTrustedHtml=function(e){return r.getTrustedHtml(e)},this.scope.showHistoryDialog=function(){return r.showHistoryDialog(r.model)},this.scope.historyDialogParameters=this.services.historyDialogService.historyDialogParameters,this.scope.applyGatewaySelection=function(){return r.applyGatewaySelection()},this.scope.discardGatewaySelection=function(){return r.discardGatewaySelection()},this.scope.enterpriseGatewayETLEnabled=this.services.featureSwitchService.featureSwitches.enterpriseGatewayETLEnabled,this.scope.storageRefreshSupported=void 0===this.scope.storageRefreshSupported||this.scope.storageRefreshSupported,this.scope.tryProAccountButtonText=this.services.userInfo.userFreeTrialExpired?this.services.localizationService.get("ExtendTrial_RequestExtensionButtonText"):this.services.localizationService.get("UpgradeAccount_TryfreeButton"),this.scope.updateAccountScheduleDataRefreshMessage=this.services.localizationService.format("UpgradeAccount_ScheduleDataRefreshMessage",[this.services.licenseHelperService.freeTrialPeriod]),this.scope.$on(e.common.constants.datasetShowAuthDialog,(function(e,t){return r.showAuthDialog(t)})),this.scope.$on(e.common.constants.datasetDatasourceUpdated,(function(e,t){return r.datasetDatasourceUpdated(t)})),this.services.modelService.addModelUpdateListener(this),this.scope.$on(e.common.constants.scopeDestroyEventName,(function(){r.services.modelService.removeModelUpdateListener(r),r.scope.isPageActive=!1})),this.scope.$on(e.settings.constants.selectGatewayStatusReadyEventName,(function(e){return r.updateGatewayHeaderWarning()})),this.model.dataset.isDirty=!1,this.model.dataset.areDatasourcesDirty=!1,this.model.dataset.takenOver=this.services.groupService.activeGroup.isMyWorkspace,this.scope.firstTimeExperience=!1,this.scope.newGatewayIsAvailable=!1,this.scope.gatewayNoLongerSupported=!1,this.scope.refreshScheduleComplete=!1,this.scope.storageRefreshEnabledInitialValue=!1,this.scope.disableRefreshSection=!1,this.scope.disableDatasourcesSection=!1,this.scope.storageSourceFileNotFound=!1,this.scope.displayIcon=e.common.models.InlineMessageIcon.Info,this.scope.onPremGatewayDownloadLink=e.models.PowerBIOnPremGatewayModel.downloadLink,this.scope.hasRefreshSchedule=!0,this.scope.hasEditableDatasources=!0,this.scope.showHeaderMessage=!1,this.scope.viewModel.manageDataSourcesExpand=!1,this.scope.viewModel.gatewaysExpand=!1,this.scope.viewModel.gatewayExpand=!1,this.scope.viewModel.refreshSectionExpand=!this.model.dataset.takenOver,this.scope.viewModel.qnaSectionExpand=!1,this.scope.viewModel.manageStorageSourceExpand=!1,this.scope.viewModel.manageStorageRefreshExpand=!1;var n=this.model.dataset.contract,s=!a.onpremGatewayRequired(n)&&a.canScheduleRefresh(n);this.scope.selectGatewayModel=new e.settings.models.SelectGatewayModel(this.model.dataset.modelId,(!1),(!0),s),this.scope.$watch("viewModel.hasDatasourceWithWrongCredentials",(function(e,t){r.shrinkManageDataSourceInnerContainerFirstTimeExperience()&&(r.scope.viewModel.manageDataSourcesExpand=!1,r.scope.viewModel.refreshSectionExpand=!0)}),!0),this.initializeDataset(),this.initializeQna()}return t.createOptions=function(){return{additionalServices:["$sce","datasetsService","errorService","featureSwitchService","groupService","historyDialogService","licenseHelperService","localizationService","modelHttpService","modelService","navigation","refreshService","telemetryService","notificationToast","userInfo","promiseFactory","gatewaysMetadataService","gatewaysMetadataHttpService","conceptualSchemaProxy","dataProxy","modalDialogService","selectGatewayService"]}},t.areYouSureYouWantToLeaveThisDataset=function(e,i,o){var r=e.control(),a=i.get("SettingsDataset_DiscardChangesWarning_YesOption"),n=i.get("SettingsDataset_DiscardChangesWarning_CancelOption"),s=[new InJs.ModalDialogAction(a,function(e,i){r.hideDialog(),t.closeDataset(o)}),new InJs.ModalDialogAction(n,function(e,t){r.hideDialog()})],c=i.get("SettingsDataset_DiscardChangesWarning_Title"),l=i.get("SettingsDataset_DiscardChangesWarning_DatasetMessage");r.showCustomDialog(c,$("<div/>").text(l),s,(function(e){e.parent().find('input[value="'+n+'"]').focus()}),!0)},t.closeDataset=function(e){e.navigateBack()},t.prototype.onModelUpdated=function(e,t){var i=this.scope.viewModel&&this.scope.viewModel.contract;if(i&&i.packageId===t&&i.id===e){var o=this.services.modelService.findModel(i.id,i.packageId),r=o&&o.contract&&o.contract.nextRefreshTime;r&&r!==i.nextRefreshTime&&(i.nextRefreshTime=r,this.updateRefreshTime(i))}},t.prototype.initializeDataset=function(){var e=this.scope.viewModel.contract;e.refreshSchedule=this.services.modelService.getModelRefreshSchedule(this.model.dataset.modelId,this.model.dataset.packageId),this.contentProviderId=e.contentProviderId,this.scope.showDiscoverDatasourcesSpinner=!0,this.scope.showDiscoverStorageSourcesSpinner=!0,this.initializeStorageSource(e),this.initializeDataSources(e.directQueryMode)},t.prototype.initializeDataSources=function(e,t){var i=this.services.featureSwitchService;e&&!i.featureSwitches.directQueryScheduledRefresh?this.retrieveModelForDirectQueryAndApplyToScope(t):this.retrieveModelForRefreshAndApplyToScope(t)},t.prototype.initializeStorageSource=function(e){this.scope.showStorageRefresh=this.isStorageRefreshAllowed(e),this.scope.showStorageConnection=this.isStorageCredentialAllowed(e),this.scope.showStorageRefresh||this.scope.showStorageConnection?(this.scope.showDiscoverStorageSourcesSpinner=!0,this.scope.storageRefreshEnabledInitialValue=e.isPackageRefreshEnabled,this.getStorageSourceForModel()):this.scope.showDiscoverStorageSourcesSpinner=!1},t.prototype.isSalesforceAllowed=function(e){return this.services.featureSwitchService.featureSwitches.salesforceAndOneDriveCredentialsEnabled&&"undefined"!=typeof e&&e.contentProviderId===d.salesforce},t.prototype.isStorageCredentialAllowed=function(e){return this.services.featureSwitchService.featureSwitches.salesforceAndOneDriveCredentialsEnabled&&"undefined"!=typeof e&&e.storageProviderType===s.OneDrive},t.prototype.isStorageRefreshAllowed=function(e){return this.services.featureSwitchService.featureSwitches.salesforceAndOneDriveCredentialsEnabled&&this.scope.storageRefreshSupported&&"undefined"!=typeof e&&(e.storageProviderType===s.OneDrive||e.storageProviderType===s.SharePoint)},t.prototype.retrieveModelForRefreshAndApplyToScope=function(e){var t=this;void 0===e&&(e=!1);var i=this.scope.viewModel.contract;if(this.updateLastTakeoverEmail(i,e),this.canModelShowDatasource(i))if(this.scope.isOnPremGatewayRequired=a.onpremGatewayRequired(i),this.scope.isOnPremGatewayAllowed=a.onpremGatewayAllowed(i),this.scope.isFreemiumUser&&this.scope.isOnPremGatewayRequired&&i.refreshSchedule.executionTime)this.disableEntirePageParametered("UpgradeAccount_ScheduleOnPremDataRefreshMessage",!1,[this.services.licenseHelperService.freeTrialPeriod]);else{var o=a.convertModelToDataset(i).refreshSettings;this.model.dataset.refreshSettings=o,o.refreshEnabled||"UTC"!==o.refreshTimeZoneId||!_.isEmpty(o.refreshTimesHourly)&&1!==o.refreshTimesHourly.length||this.setDefaultTimeZone(),this.model.dataset.parameters=i.parameters,this.scope.disableEntireRefreshPage=!1,this.scope.disableRefreshSection=!1,this.scope.disableDatasourcesSection=!1,this.updateRefreshTime(i),this.scope.$watch("viewModel.refreshSettings",(function(e,i){i!==e&&(t.model.dataset.isDirty=!0)}),!0),this.services.datasetsService.migrateAdmsDatasources(this.model.dataset.modelId.toString(),null).then((function(e){if(e.data)for(var i=0,o=t.model.dataset.contract.refreshConnections;i<o.length;i++){var r=o[i];r.connectionType=c.ADMS}})).finally((function(){t.scope.isOnPremGatewayRequired?t.retrieveGateway():t.retrieveDatasourcesOnDataset();
}))}this.scope.isHidden=i.isHidden,this.scope.datasetPageReady=!0},t.prototype.canModelShowDatasource=function(e){if(!e)return this.disableEntirePage("SettingsDataset_DisableEntireRefreshPageErrorMessage_ModelNotSupported",!0),this.scope.isHidden=e.isHidden,this.scope.datasetPageReady=!0,!1;var t=this.isSalesforceAllowed(e),i=this.isStorageRefreshAllowed(e);return t?this.canModelShowDatasourceForSalesforce(e):i?this.canModelShowDatasourceForOneDrive(e):this.canModelShowDatasourceForDataMovement(e)},t.prototype.canModelShowDatasourceForSalesforce=function(e){return e.refreshSchedule.isRefreshable===!0||(this.disableEntirePage("SettingsDataset_DisableEntireRefreshPageErrorMessage_DataSourcesNotSupported",!0),!1)},t.prototype.canModelShowDatasourceForOneDrive=function(e){return e.onPremModelConnectionString?(this.disableRefreshSection("SettingsDataset_DisableEntireRefreshPageErrorMessage_OnPremAnalysisServicesScheduleInfo"),!1):e.isHidden||this.modelHasRefreshConnections(e)?!!this.modelSupportsRefresh(e)||(this.disableRefreshSection(),!1):(this.disableRefreshSection(),!1)},t.prototype.canModelShowDatasourceForDataMovement=function(e){return e.onPremModelConnectionString?(this.disableRefreshSection("SettingsDataset_DisableEntireRefreshPageErrorMessage_OnPremAnalysisServicesScheduleInfo"),this.showDataSourcesStatus(),!1):e.isHidden||this.modelHasRefreshConnections(e)?!!this.modelSupportsRefresh(e)||(this.disableRefreshSection("SettingsDataset_DisableEntireRefreshPageErrorMessage_DataSourcesNotSupported",!0),!1):(this.disableRefreshSection("SettingsDataset_DisableEntireRefreshPageErrorMessage_DataSourcesHasNoConnection"),!1)},t.prototype.modelHasRefreshConnections=function(e){return e.refreshConnections&&e.refreshConnections.length>0},t.prototype.modelSupportsRefresh=function(t){var i=!!this.services.featureSwitchService.featureSwitches.directQueryScheduledRefresh;return!(!i||!e.common.models.SettingsDatasetModel.isDirectQueryOrOnPremModel(t))||t.refreshSchedule.isRefreshable&&t.isAllDataSourcesSupportedForRefresh},t.prototype.retrieveModelForDirectQueryAndApplyToScope=function(e){var t=this;void 0===e&&(e=!1),this.scope.isFreemiumUser&&this.disableEntirePage("SettingsDataset_DisableEntireRefreshPageErrorMessage_NeedProAccount");var i=this.scope.viewModel.contract;this.scope.hasRefreshSchedule=!1,this.scope.isOnPremGatewayRequired=!1,this.scope.hasEditableDatasources=!1,this.scope.isHidden=i.isHidden,this.contentProviderId=i.contentProviderId,this.model.dataset.parameters=i.parameters,this.updateLastTakeoverEmail(i,e).then((function(){t.model.dataset.takenOver?t.getDatasourcesForDirectQuery():(t.model.dataset.contract.refreshConnections&&t.model.dataset.contract.refreshConnections.length>0?(t.scope.hasEditableDatasources=!1,t.scope.isCloudDirectQuery=!0):t.disableEntirePage("SettingsDataset_DisableEntireRefreshPageErrorMessage_DatasetSettingsNotSupported"),t.scope.datasetPageReady=!0)}))},t.prototype.updateLastTakeoverEmail=function(t,i){var o=this,r=this.services.telemetryService,a=r.startEvent(e.telemetry.DashboardInitializeSettingsDatasetModel),n=this.services.promiseFactory.defer();return i?this.services.modelHttpService.getModel(this.scope.viewModel.modelId,null,a.event).then((function(e){o.model.dataset.contract.creatorUser=e.data.creatorUser,o.updateLastTakeoverEmailInternal(t),n.resolve(null)}),(function(e){o.services.datasetsService.displayOopsErrorAndEndTelemetry(r,o.services.errorService,"SettingsDataset_Error_FailedToLoadModelForRefresh",e,a),n.resolve(null)})):(this.updateLastTakeoverEmailInternal(t),n.resolve(null)),n.promise},t.prototype.updateLastTakeoverEmailInternal=function(t){t.creatorUser?(this.model.dataset.lastTakeoverEmailAddress=this.getEmailAddressForReceivingMail(t.creatorUser),this.model.dataset.takenOver=jsCommon.StringExtensions.equalIgnoreCase(t.creatorUser.emailAddress,e.session.UserInfoUtils.getUPN()),this.scope.isTakeoverStatusReady=!0):(this.model.dataset.lastTakeoverEmailAddress=void 0,this.model.dataset.takenOver=!0,this.scope.viewModel.refreshSectionExpand=!1)},t.prototype.getEmailAddressForReceivingMail=function(e){return _.isEmpty(e.AlternateEmailAddress)?e.emailAddress:e.AlternateEmailAddress},t.prototype.retrieveGateway=function(){var t=this,i=this.services.datasetsService,o=this.services.telemetryService,r=this.services.errorService,a=o.startEvent(e.telemetry.DashboardRetrieveGateway,this.contentProviderId);this.services.gatewaysMetadataService.getPersonalGateway().then((function(i){t.scope.personalGateway=i,t.scope.personalGatewayAnnotation=e.settings.models.GatewayModelConverter.getGatewayAnnotation(t.scope.personalGateway),t.scope.authDialogParameters.personalGateway=t.scope.personalGateway,t.getGatewayStatus(t.scope.personalGateway.gatewayStatus===l.NotInstalled)}),(function(e){i.displayOopsErrorAndEndTelemetry(o,r,"SettingsDataset_Error_FailedToRetrieveGateway",e,a)}))},t.prototype.getDatasourcesForDirectQuery=function(){var t=this,i=this.services.telemetryService,o=i.startEvent(e.telemetry.DashboardInitializeSettingsDatasetModel),r=this.services.errorService,n=this.services.datasetsService;this.services.gatewaysMetadataService.discoverDatasource(this.model.dataset.modelId).then((function(i){t.scope.showDiscoverDatasourcesSpinner=!1;var o=i;t.scope.isCloudDirectQuery=!0;for(var r=0;r<o.monikers.length;r++){var n=o.monikers[r],s=_.map(n.monikerDataSources,(function(e){return e.dataSourceId}));if(!_.every(s)){t.scope.isCloudDirectQuery=!1;break}var c=_.filter(o.datasources,(function(e){return s.indexOf(e.dataSourceId)>-1}));if(0===c.length||_.some(c,(function(e){return e.onPremGatewayRequired}))){t.scope.isCloudDirectQuery=!1;break}var l=_.map(c,(function(e){return e.gatewayId})),d=_.filter(o.gateways,(function(e){return l.indexOf(e.gatewayId)>-1}));if(_.any(d,(function(e){return e.gatewayName}))){t.scope.isCloudDirectQuery=!1;break}}t.scope.isCloudDirectQuery?(t.scope.hasEditableDatasources=!0,t.scope.viewModel.datasources=_.map(o.datasources,(function(e){return a.convertCloudDirectQueryDatasourceToDatasetDatasource(t.model.dataset.modelId,e)})),_.some(t.scope.viewModel.datasources,(function(t){return t.testConnectionState===e.common.models.TestConnectionState.Failed}))&&(t.scope.viewModel.manageDataSourcesExpand=!0)):(t.disableRefreshSection("SettingsDataset_DisableEntireRefreshPageErrorMessage_DatasetSettingsNotSupported"),t.showDataSourcesStatus()),t.scope.datasetPageReady=!0}),(function(a){if(a.error&&a.error.code){var s=e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+a.error.code;"ServerError_ModelHasNoPowerBIDMMoniker"===s?t.disableEntirePage(s,!1):n.displayOopsErrorAndEndTelemetry(i,r,"SettingsDataset_Error_FailedToLoadDatasources",a,o)}else n.displayOopsErrorAndEndTelemetry(i,r,"SettingsDataset_Error_FailedToLoadDatasources",a,o);t.scope.datasetPageReady=!0}))},t.prototype.retrieveDatasourcesOnDatasetForSalesforce=function(){var t=this,i=this.services.telemetryService,o=this.services.errorService,a=this.services.datasetsService;this.shrinkManageDataSourceInnerContainerFirstTimeExperience()&&(this.scope.viewModel.manageDataSourcesExpand=!1,this.scope.viewModel.refreshSectionExpand=!0);var n=this.getSalesforceDatasource(this.model.dataset),s=[n];this.model.dataset.datasources=s,n.testConnectionState=e.common.models.TestConnectionState.Progressing;var c=i.startEvent(e.telemetry.DashboardTestDataSourceConnection);a.testPackageCredentials(n.packageId,c.event).then((function(i){c.resolve(),t.scope.showDiscoverDatasourcesSpinner=!1,i.data?(n.oAuth2URL=i.data.oAuth2Endpoint,n.oAuth2Nonce=i.data.oAuth2Nonce,i.data.testConnectionResponse&&i.data.testConnectionResponse.testPassed?n.testConnectionState=e.common.models.TestConnectionState.Passed:(n.testConnectionState=e.common.models.TestConnectionState.Failed,n.testConnectionErrorMessage=r.convertTestPackageConnectionDetailsToErrorMessage(i.data.testConnectionResponse),t.scope.lastRefreshFailureMessage=t.services.localizationService.get("SettingsDataset_ManageDataSources_Warning_YouNeedToProvideCredentials"),t.scope.viewModel.manageDataSourcesExpand=!0)):(n.testConnectionState=e.common.models.TestConnectionState.Failed,t.scope.viewModel.manageDataSourcesExpand=!0)}),(function(e){a.displayOopsErrorAndEndTelemetry(i,o,"SettingsDataset_Error_FailedToTestConnection",e,c)}))},t.prototype.getStorageSourceForModel=function(){var t=this,i=this.services.telemetryService,o=this.services.errorService,a=this.services.datasetsService;if(this.model.dataset.contract.storageProviderType===s.OneDrive){var n=i.startEvent(e.telemetry.DashboardInitializeSettingsDatasetModel);this.model.dataset.storageSource={modelId:this.model.dataset.modelId,onpremGatewayRequired:!1,packageId:this.scope.viewModel.contract.packageId,name:this.model.dataset.name,credentialTypes:[e.common.contracts.gateway.CredentialType.OAuth2],testConnectionState:e.common.models.TestConnectionState.Progressing},a.testPackageCredentials(this.model.dataset.storageSource.packageId,n.event).then((function(i){n.resolve(),t.scope.storageSourceTraceDetails={activityId:i.activityId,requestId:i.requestId,errorCode:i.status.toString(),time:(new Date).toString(),version:e.build},t.scope.showDiscoverStorageSourcesSpinner=!1,t.model.dataset.storageSource.oAuth2URL=i.data.oAuth2Endpoint,t.model.dataset.storageSource.oAuth2Nonce=i.data.oAuth2Nonce,i.data&&i.data.testConnectionResponse&&i.data.testConnectionResponse.testPassed?t.model.dataset.storageSource.testConnectionState=e.common.models.TestConnectionState.Passed:(t.model.dataset.storageSource.testConnectionState=e.common.models.TestConnectionState.Failed,t.isFileNotFoundCode(i.data.testConnectionResponse)?t.disableStorageSourceUpdates():(t.model.dataset.storageSource.testConnectionErrorMessage=r.convertTestPackageConnectionDetailsToErrorMessage(i.data.testConnectionResponse),t.scope.viewModel.manageStorageSourceExpand=!0))}),(function(e){a.displayOopsErrorAndEndTelemetry(i,o,"SettingsDataset_Error_FailedToTestConnection",e,n)}))}else this.model.dataset.contract.storageProviderType===s.SharePoint&&(this.model.dataset.storageSource={modelId:this.model.dataset.modelId,onpremGatewayRequired:!1,packageId:this.scope.viewModel.contract.packageId,name:this.model.dataset.name,credentialTypes:[e.common.contracts.gateway.CredentialType.OAuth2],testConnectionState:e.common.models.TestConnectionState.Progressing},this.model.dataset.storageSource.testConnectionState=e.common.models.TestConnectionState.Passed,this.scope.showDiscoverStorageSourcesSpinner=!1)},t.prototype.hasDmtsPersonalGateway=function(){return this.scope.personalGateway&&this.scope.personalGateway.gatewayId>0},t.prototype.retrieveDatasourcesOnDataset=function(){this.scope.viewModel.contract.contentProviderId===d.salesforce?this.retrieveDatasourcesOnDatasetForSalesforce():this.retrieveDatasourcesOnDatasetForDataMovement()},t.prototype.retrieveDatasourcesOnDatasetForDataMovement=function(){var t=this,i=this.services.telemetryService,o=i.startEvent(e.telemetry.DashboardInitializeSettingsDatasetModel),n=this.services.errorService,s=this.services.datasetsService,c=this.services.gatewaysMetadataService;this.services.featureSwitchService.featureSwitches.isSovereignCloud||this.hasDmtsPersonalGateway()||a.shouldUseDMTS(this.model.dataset.contract.refreshConnections)?c.discoverDatasource(this.model.dataset.modelId).then((function(r){if(o.resolve(),t.scope.showDiscoverDatasourcesSpinner=!1,r){t.model.dataset.datasources=a.convertDMTSDiscoverDatasourcesResponseToDatasources(t.model.dataset.modelId,r),t.shrinkManageDataSourceInnerContainerFirstTimeExperience()&&(t.scope.viewModel.manageDataSourcesExpand=!1,t.scope.viewModel.refreshSectionExpand=!0);var s=t.model.dataset.datasources;if(s){a.getDatasourceNames(s);for(var l=0,d=s;l<d.length;l++){var p=d[l];!(function(i){i.testConnectionState=e.common.models.TestConnectionState.Progressing,c.getDataSourceStatus(i.gatewayId,i.datasourceId).then((function(){i.testConnectionState=e.common.models.TestConnectionState.Passed}),(function(o){i.testConnectionState=e.common.models.TestConnectionState.Failed,t.scope.viewModel.manageDataSourcesExpand=!0,e.helpers.PowerBIServiceExceptionErrorHelper.GenerateErrorMessage(o.error).done((function(r){var a=[];if(r&&r.displayableErrorInfo)for(var n=0,s=r.displayableErrorInfo;n<s.length;n++){var c=s[n];a.push({key:c.errorInfoKey,value:c.errorInfoValue})}i.testConnectionErrorMessage=t.services.localizationService.get(e.helpers.PowerBIServiceExceptionErrorHelper.serverErrorPrefix+o.error.code),i.testConnectionErrorMessage+=JSON.stringify(a)}))}))})(p)}}}else c.displayOopsErrorAndEndTelemetry(i,n,"SettingsDataset_Error_FailedToLoadDatasources",o)}),(function(e){t.scope.showDiscoverDatasourcesSpinner=!1,c.displayOopsErrorAndEndTelemetry(i,n,"SettingsDataset_Error_FailedToLoadDatasources",o,e)})):c.getAdmsAggregatedDatasourcesForOneModel(this.model.dataset.modelId.toString(),!1).then((function(s){if(o.resolve(),t.scope.showDiscoverDatasourcesSpinner=!1,s){t.model.dataset.datasources=a.convertDiscoverAggregatedDatasourcesResponseToDatasources(t.model.dataset.modelId,s),t.shrinkManageDataSourceInnerContainerFirstTimeExperience()&&(t.scope.viewModel.manageDataSourcesExpand=!1,t.scope.viewModel.refreshSectionExpand=!0);var l=t.model.dataset.datasources;if(l){a.getDatasourceNames(l);for(var d=l.length,p=0;p<d;p++){var u=l[p];!(function(a){a.testConnectionState=e.common.models.TestConnectionState.Progressing;var s=i.startEvent(e.telemetry.DashboardTestDataSourceConnection);c.testAdmsDataSourceConnection(a.admsDatasourceId,a.modelId).then((function(i){s.resolve(),i&&i.instanceTestConnectionResults&&i.instanceTestConnectionResults.testPassed?a.testConnectionState=e.common.models.TestConnectionState.Passed:(a.testConnectionState=e.common.models.TestConnectionState.Failed,a.testConnectionErrorMessage=r.convertDMTestConnectionResultToErrorMessage(i),t.scope.viewModel.manageDataSourcesExpand=!0)}),(function(e){c.displayOopsErrorAndEndTelemetry(i,n,"SettingsDataset_Error_FailedToTestConnection",o)}))})(u)}}}else c.displayOopsErrorAndEndTelemetry(i,n,"SettingsDataset_Error_FailedToLoadDatasources",o)}),(function(e){t.scope.showDiscoverDatasourcesSpinner=!1,s.displayOopsErrorAndEndTelemetry(i,n,"SettingsDataset_Error_FailedToLoadDatasources",e,o)}))},t.prototype.updateRefreshTime=function(i){this.scope.lastRefreshFailed=!1,this.scope.nextRefreshTime=e.common.localize.get("SettingsDataset_ScheduleRefresh_NextRefresh")+a.convertRefreshTimeToJsDateTime(i.nextRefreshTime).toString();var o=this.scope.viewModel.contract.refreshHistories;if(o&&0!==o.length)if(o[0].isSuccessful){var r=a.convertRefreshTimeToJsDateTime(o[0].endTime);this.scope.lastRefreshStatus=e.common.localize.format("SettingsDataset_ScheduleRefresh_FlyoutMessage_LastRefreshSucceeded",[""+r])}else if(o[0].endTime){this.scope.lastRefreshHistoryDetails=t.convertErrorDetailsJson(o[0].serviceExceptionJson),this.scope.lastRefreshFailureMessage=t.getFriendlyErrorMessage(o[0].serviceExceptionJson);var r=a.convertRefreshTimeToJsDateTime(o[0].endTime);this.scope.lastRefreshStatus=e.common.localize.format("SettingsDataset_ScheduleRefresh_FlyoutMessage_LastRefreshFailed",[""+r]),this.scope.lastRefreshFailed=!0}else{var n=a.convertRefreshTimeToJsDateTime(o[0].startTime);n.getTime()+18e5>Date.now()?this.scope.lastRefreshStatus=e.common.localize.get("NavigationPane_RefreshInProgress"):this.scope.lastRefreshStatus=e.common.localize.format("SettingsDataset_ScheduleRefresh_FlyoutMessage_LastRefreshSucceeded",[""+r])}},t.prototype.disableRefreshSection=function(e,t){void 0===t&&(t=!1);for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];e&&(this.scope.headerMessage=i&&i.length>0?this.services.localizationService.format(e,i):this.scope.headerMessage=this.services.localizationService.get(e)),this.scope.headerMessage&&(this.scope.showHeaderMessage=!0),this.scope.disableRefreshSection=!0,this.scope.disableDatasourcesSection=!0},t.prototype.disableEntirePageParametered=function(e,t){void 0===t&&(t=!1);for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.scope.disableEntireRefreshPage=!0,this.scope.showHeaderMessage=!0,i&&i.length>0?this.scope.headerMessage=this.services.localizationService.format(e,i):this.scope.headerMessage=this.services.localizationService.get(e),this.scope.disabledEntireRefreshPageShowLearnMoreLink=t},t.prototype.disableEntirePage=function(e,t){void 0===t&&(t=!1),this.scope.disableEntireRefreshPage=!0,this.scope.showHeaderMessage=!0,this.scope.headerMessage=this.services.localizationService.get(e),this.scope.disabledEntireRefreshPageShowLearnMoreLink=t},t.prototype.disableStorageSourceUpdates=function(){this.scope.storageSourceFileNotFound=!0,this.scope.displayIcon=e.common.models.InlineMessageIcon.Error,this.scope.showHeaderMessage=!0,this.scope.headerMessage=this.services.localizationService.get("SettingsDataset_OneDrive_FileNotFound"),this.scope.viewModel.manageStorageSourceExpand=!1,this.scope.viewModel.manageStorageRefreshExpand=!1},t.prototype.initializeQna=function(){var e=this,t=this.scope,i=t.viewModel.contract,o=this.services.featureSwitchService.featureSwitches;t.viewModel.isQnaDirty=!1;var r=!i.isHidden&&i.qnaSupported,a=o.cortanaEnabled!==!1&&(!i.directQueryMode||2===i.pushDataVersion||o.qnaSupportDQEnabled)&&(!i.onPremModelConnectionString||o.qnaSupportOnPremEnabled),n=i.directQueryMode&&2!==i.pushDataVersion&&o.qnaSupportDQEnabled||i.onPremModelConnectionString&&o.qnaSupportOnPremEnabled;r&&(a||n)?t.qna={showCortanaSetting:a,showOnPremiseSetting:n,cortanaEnabled:i.cortanaEnabled,powerBIQnaEnabled:i.powerBIQnaEnabled,apply:function(){return e.applyQnaSettings()},discard:function(){return e.discardChanges()}}:t.qna=null},t.prototype.applyQnaSettings=function(){var t=this.scope,i=t.qna,o=t.viewModel.contract,r=this.services;if(i.powerBIQnaEnabled!==o.powerBIQnaEnabled||i.cortanaEnabled!==o.cortanaEnabled){var a={};i.powerBIQnaEnabled!==o.powerBIQnaEnabled&&(a.powerBIQnaEnabled=i.powerBIQnaEnabled),i.cortanaEnabled!==o.cortanaEnabled&&(a.cortanaEnabled=i.cortanaEnabled),r.modelService.updateModelQnaFeatures(this.model.dataset.modelId,a).then((function(){o.powerBIQnaEnabled=i.powerBIQnaEnabled,o.cortanaEnabled=i.cortanaEnabled,t.viewModel.isQnaDirty=!1}),(function(){r.errorService.error(e.common.localize.get("SettingsGeneral_Error_FailedToSave"),"SettingsGeneral_Error_FailedToSave")}))}else t.viewModel.isQnaDirty=!1},t.prototype.editStorageSource=function(){if(this.model.dataset&&this.model.dataset.storageSource){var e=this.scope.authDialogParameters;e.isImportScenario=!1,e.providerId=this.contentProviderId,e.datasource=this.model.dataset.storageSource,e.dialogTitle=this.services.localizationService.format("AuthDialog_Configure",[this.model.dataset.name]),e.updatePackage=!0,e.showAuthDialog=!0,e.showModalDialog=!0}},t.prototype.editDatasource=function(e){if(this.model.dataset.takenOver){var t=this.scope.viewModel.datasources.indexOf(e);if(this.model.dataset.areDatasourcesDirty=!0,this.scope.authDialogParameters.datasource=e,this.model.dataset.contract.contentProviderId===d.salesforce&&(this.scope.authDialogParameters.updatePackage=!0),void 0===this.model.dataset.parameters||void 0!==this.model.dataset.parameters&&0===this.model.dataset.parameters.length)this.showAuthDialog(t);else{var i=this.scope.datasetParametersDialogParameters;i.isImportScenario=!1,i.providerIdentification?i.providerIdentification.providerId=this.contentProviderId:i.providerIdentification={providerId:this.contentProviderId},i.datasetModel={},i.datasetModel.dataset=this.model.dataset,i.dialogTitle=this.services.localizationService.format("DatasetParametersDialog_Configure",[this.model.dataset.name]),i.dsIndex=t,i.showDatasetParametersDialog=!0}}},t.prototype.showAuthDialog=function(e){var t=this.scope.authDialogParameters;t.isImportScenario=!1,t.providerId=this.contentProviderId,t.datasource=this.model.dataset.datasources[e],t.dialogTitle=this.services.localizationService.format("AuthDialog_Configure",[this.model.dataset.name]),t.showAuthDialog=!0,t.showModalDialog=!0},t.prototype.updateOnPremGatewayOverride=function(t){var i=this;this.services.telemetryService.logEvent(e.telemetry.DashboardForceScheduleRefreshUseITGW,t),this.services.datasetsService.updateModelOnPremisesGatewayOverride(this.model.dataset.modelId.toString(),t).then((function(e){i.retrieveModelForRefreshAndApplyToScope()}),(function(e){i.retrieveModelForRefreshAndApplyToScope()}))},t.prototype.showHistoryDialog=function(e){this.services.historyDialogService.showHistoryDialog(e)},t.prototype.datasetDatasourceUpdated=function(t){var i=this;this.scope.isCloudDirectQuery&&this.clearDataCaches(),this.services.localizationService.ensureLocalization((function(){i.services.notificationToast.notify({title:i.services.localizationService.format("SettingsDataset_Notification_DatasourceUpdated_Title",[t]),message:i.services.localizationService.format("SettingsDataset_Notification_DatasourceUpdated_Message",[t]),notificationType:e.common.NotificationToastType.Success})}))},t.prototype.clearDataCaches=function(){var e={dbName:this.model.dataset.contract.dbName,modelId:this.model.dataset.modelId,vsName:this.model.dataset.contract.vsName,schemaName:void 0};this.services.conceptualSchemaProxy.clearCache(),this.services.dataProxy.clearCache("dsr",[e])},t.prototype.applyChanges=function(){var t=this,i=this.validateApplyChanges();i!==!1&&(this.model.dataset.isDirty?(this.updateRefreshScheduleData(),this.scope.refreshScheduleComplete=!0):this.services.localizationService.ensureLocalization((function(){t.services.notificationToast.notify({title:t.services.localizationService.format("SettingsDataset_Notification_RefreshScheduleUpdated_Title",[t.model.dataset.name]),message:t.services.localizationService.format("SettingsDataset_Notification_RefreshScheduleUpdated_Message",[t.model.dataset.name]),notificationType:e.common.NotificationToastType.Success})})),this.model.dataset.areDatasourcesDirty=!1)},t.prototype.tryProAccount=function(){this.services.userInfo.userFreeTrialExpired?this.services.licenseHelperService.displayDialogToExtendTrial(e.telemetry.LicenseEnforcementOperation.Dataset):this.services.licenseHelperService.displayDialogToAcceptTrialTerms(e.telemetry.LicenseEnforcementOperation.Dataset)},t.prototype.validateApplyChanges=function(){var t=this,i=!0,o=this.model.dataset.refreshSettings.refreshFrequency,r=1440===o,n=10080===o;if(!r&&!n)return i;var s=r?e.common.constants.allWeekDays:a.convertDatasetWeekdaysToModelWeekdays(this.model.dataset.refreshSettings.refreshDays);r===!1&&0===s&&(i=!1,this.services.localizationService.ensureLocalization((function(){t.services.notificationToast.notify({title:t.services.localizationService.format("SettingsDataset_Notification_RefreshScheduleCannotBeUpdated_Title",[t.model.dataset.name]),message:t.services.localizationService.get("SettingsDataset_Notification_RefreshScheduleCannotBeUpdated_Message"),notificationType:e.common.NotificationToastType.Success})})));var c=this.model.dataset.refreshSettings.refreshTimesHourly;if(i&&!this.scope.isFreemiumUser&&c&&c.length>0){for(var l=c.length,d=0;d<l;d++){var p=c[d];if(void 0===p.refreshAmPmIndex||void 0===p.refreshHourIndex||void 0===p.refreshMinuteIndex)i=!1,p.isIncomplete=!0;else{p.isIncomplete=!1;for(var u=0;u<d;u++){var v=c[u];if(p.refreshAmPmIndex===v.refreshAmPmIndex&&p.refreshHourIndex===v.refreshHourIndex&&p.refreshMinuteIndex===v.refreshMinuteIndex){i=!1,p.isDuplicate=!0;break}p.isDuplicate=!1}}}i||this.services.localizationService.ensureLocalization((function(){t.services.notificationToast.notify({title:t.services.localizationService.format("SettingsDataset_Notification_RefreshScheduleCannotBeUpdated_Title",[t.model.dataset.name]),message:t.services.localizationService.get("SettingsDataset_Notification_RefreshScheduleCannotBeUpdatedTimeFormat_Message"),notificationType:e.common.NotificationToastType.Success})}))}return i},t.prototype.updateRefreshScheduleData=function(){var t=this,i=a.convertSettingModelToRefreshScheduleContract(this.model.dataset.refreshSettings,this.scope.isFreemiumUser),o=this.services.telemetryService,r=o.startEvent(e.telemetry.DashboardSettingsDatasetsSaveRefreshSettings,i.refreshEnabled,i.isDaily,i.weekDays,i.refreshNotificationEnabled,this.contentProviderId),n=this.services.errorService,s=this.services.datasetsService,c=this.services.refreshService;c.updateRefreshSchedule(this.model.dataset.modelId.toString(),i,r.event).then((function(i){r.resolve(),t.model.dataset.isDirty=!1,t.services.localizationService.ensureLocalization((function(){t.services.notificationToast.notify({title:t.services.localizationService.format("SettingsDataset_Notification_RefreshScheduleUpdated_Title",[t.model.dataset.name]),message:t.services.localizationService.format("SettingsDataset_Notification_RefreshScheduleUpdated_Message",[t.model.dataset.name]),notificationType:e.common.NotificationToastType.Success})}))}),(function(e){s.displayOopsErrorAndEndTelemetry(o,n,"SettingsDataset_Error_FailedToSaveRefreshSettings",e,r)}))},t.prototype.discardChanges=function(){this.model.dataset.isDirty||this.scope.viewModel.isQnaDirty?t.areYouSureYouWantToLeaveThisDataset(this.services.errorService,this.services.localizationService,this.services.navigation):t.closeDataset(this.services.navigation)},t.prototype.getGatewayStatus=function(t){var i=this,o=this.services.telemetryService,r=this.services.datasetsService,a=o.startEvent(e.telemetry.DashboardInitializeSettingsDatasetModel);this.services.gatewaysMetadataService.getGatewayStatus(this.scope.personalGateway.gatewayId).then((function(e){i.scope.personalGateway.gatewayStatus=e.gatewayStatus,t&&(i.scope.viewModel.gatewayExpand=!1,i.scope.viewModel.manageDataSourcesExpand=!0),i.retrieveDatasourcesOnDataset()}),(function(e){r.displayOopsErrorAndEndTelemetry(o,i.services.errorService,"SettingsDataset_Error_FailedToRetrieveGatewayStatus",e,a)}))},t.prototype.addRefreshTime=function(){this.shouldRefreshSettingsDisabled()||(void 0===this.model.dataset.refreshSettings.refreshTimesHourly&&(this.model.dataset.refreshSettings.refreshTimesHourly=[]),this.model.dataset.refreshSettings.refreshTimesHourly.push({}))},t.prototype.removeRefreshTime=function(e){if(!this.shouldRefreshSettingsDisabled()){var t=this.model.dataset.refreshSettings.refreshTimesHourly;if(!t||t.length<e)return;t.splice(e,1)}},t.prototype.canAddRefreshTime=function(){var t=this.model.dataset.refreshSettings.refreshTimesHourly;return!t||t.length<e.common.constants.maxRefreshTimeNumber},t.prototype.shouldRefreshSettingsToggleDisabled=function(){return!this.model.dataset.takenOver||this.model.dataset.hasDatasourceWithWrongCredentials&&!this.scope.selectGatewayModel.useEnterpriseGateway||this.scope.isOnPremGatewayRequired&&!this.scope.selectGatewayModel.useEnterpriseGateway&&this.scope.personalGateway&&!this.scope.personalGateway.gatewayAnnotation},t.prototype.shouldRefreshSettingsDisabled=function(){return this.shouldRefreshSettingsToggleDisabled()||!this.model.dataset.refreshSettings.refreshEnabled},t.prototype.shouldDatasourceCredentialsDisabled=function(){return!this.scope.viewModel.takenOver||this.scope.isOnPremGatewayAllowed&&(this.scope.isOnPremGatewayRequired&&this.scope.personalGateway&&this.scope.personalGateway.gatewayStatus===l.NotReachable||this.services.featureSwitchService.featureSwitches.enterpriseGatewayETLEnabled&&(this.scope.selectGatewayModel.useEnterpriseGateway||void 0===this.scope.selectGatewayModel.useEnterpriseGateway))},t.prototype.shouldSettingsDatasetButtonDisable=function(){return!this.model.dataset.isDirty&&!this.model.dataset.areDatasourcesDirty||this.shouldRefreshSettingsToggleDisabled()},t.prototype.updateStorageSourceRefresh=function(){if(this.scope.storageRefreshEnabledInitialValue!==this.scope.viewModel.contract.isPackageRefreshEnabled){if(this.shouldPackageRefreshSettingsToggleDisabled())return;this.scope.packageRefreshScheduleUpdateInProgress=!0;var t=this.scope.viewModel.contract.packageId,i=this.services.telemetryService.startEvent(e.telemetry.DashboardInitializeSettingsDatasetModel);this.scope.viewModel.contract.cloudRlsEnabled&&this.scope.viewModel.contract.isPackageRefreshEnabled&&!this.services.featureSwitchService.featureSwitches.cloudRlsRoleMembershipEnabled?this.confirmEnableStorageRefreshAndOverwriteRls(t,i):this.updatePackageRefreshEnabled(t,i),this.scope.packageRefreshScheduleUpdateInProgress=!1}},t.prototype.confirmEnableStorageRefreshAndOverwriteRls=function(t,i){var o=this,r=this.services.rootScope.$new(),a=this.services.localizationService.get("ModalDialogButtonText_Continue"),n=this.services.localizationService.get("ModalDialogButtonText_Cancel"),s=this.services.telemetryService,c=this.scope.viewModel.contract.id,l=[new InJs.ModalDialogAction(a,function(a,n){s.logEvent(e.telemetry.RowLevelSecurityDisableRLS,e.telemetry.DisableRLSSource.OneDriveRefreshEnabled,!0,c),o.services.modelHttpService.disableRlsModel(c,i.event).then((function(e){o.scope.viewModel.contract.cloudRlsEnabled=!1,o.services.modelService.updateContractModel(o.scope.viewModel.contract),o.updatePackageRefreshEnabled(t,i)}),(function(e){o.services.datasetsService.displayOopsErrorAndEndTelemetry(s,o.services.errorService,"SettingsDataset_Error_FailedToUpdatePackageRefreshSchedule",e,i)})),r.closeDialog()}),new InJs.ModalDialogAction(n,function(t,i){s.logEvent(e.telemetry.RowLevelSecurityDisableRLS,e.telemetry.DisableRLSSource.OneDriveRefreshEnabled,!1,c),o.scope.$applyAsync((function(){o.scope.viewModel.manageStorageRefreshExpand=!0,o.scope.viewModel.contract.isPackageRefreshEnabled=o.scope.storageRefreshEnabledInitialValue})),r.closeDialog()})],d=this.services.localizationService.get("SettingsDataset_RefreshStorageSource_OverwritingRlsWarning_Title"),p=this.services.localizationService.get("SettingsDataset_RefreshStorageSource_OverwritingRlsWarning_Message"),u={dialogName:d,isDismissable:!1,scope:r,template:"<custom-modal-dialog></custom-modal-dialog>",dialogCssClass:"customModalDialog",dialogActions:l,notificationType:jsCommon.ModalDialogNotificationType.SecurityWarning,htmlMessageText:p};this.services.modalDialogService.showLegacyWebModalDialog(u)},t.prototype.updatePackageRefreshEnabled=function(e,t){var i=this;this.services.datasetsService.updatePackageRefreshEnabled(e,this.scope.viewModel.contract.isPackageRefreshEnabled,t.event).then((function(e){t.resolve(),e?i.scope.storageRefreshEnabledInitialValue=i.scope.viewModel.contract.isPackageRefreshEnabled:(i.scope.viewModel.manageStorageRefreshExpand=!0,i.scope.viewModel.contract.isPackageRefreshEnabled=i.scope.storageRefreshEnabledInitialValue)}),(function(e){i.services.datasetsService.displayOopsErrorAndEndTelemetry(i.services.telemetryService,i.services.errorService,"SettingsDataset_Error_FailedToUpdatePackageRefreshSchedule",e,t)}))},t.prototype.shrinkManageDataSourceInnerContainerFirstTimeExperience=function(){return this.scope.firstTimeExperience&&this.scope.personalGateway.gatewayStatus===l.Live&&!this.model.dataset.hasDatasourceWithWrongCredentials},t.prototype.shouldScheduleRefreshContainerDisabled=function(){return!this.model.dataset.takenOver||this.scope.firstTimeExperience&&this.scope.isOnPremGatewayRequired&&this.scope.personalGateway.gatewayStatus!==l.Live&&!this.scope.selectGatewayModel.useEnterpriseGateway||this.scope.isOnPremGatewayRequired&&this.services.featureSwitchService.featureSwitches.enterpriseGatewayETLEnabled&&void 0===this.scope.selectGatewayModel.useEnterpriseGateway},t.prototype.shouldGatewaysContainerDisabled=function(){return!this.model.dataset.takenOver||this.scope.isOnPremGatewayRequired&&this.scope.selectGatewayModel.pgw&&this.scope.selectGatewayModel.pgw.gatewayStatus===e.common.contracts.gateway.GatewayStatus.NotInstalled&&void 0===this.scope.selectGatewayModel.enterpriseGateways},t.prototype.shouldPackageRefreshSettingsToggleDisabled=function(){return!this.dataSetHasStorageSource()||this.model.dataset.storageSource.testConnectionState!==e.common.models.TestConnectionState.Passed||this.scope.packageRefreshScheduleUpdateInProgress===!0;
},t.prototype.dataSetHasStorageSource=function(){return"undefined"!=typeof this.model&&"undefined"!=typeof this.model.dataset&&"undefined"!=typeof this.model.dataset.storageSource},t.prototype.refreshSettingsToggleChanged=function(){if(this.model&&this.model.dataset&&this.model.dataset.refreshSettings){var e=this.model.dataset;if(!e.refreshSettings.refreshEnabled){var t=e.hasRDataSource;return null===t||void 0===t?void this.popUserConsentDialogIfRequired(this.model):t?void this.confirmRefreshForRDataSource():void 0}}},t.prototype.confirmRefreshForRDataSource=function(){var e=this;this.shouldRefreshSettingsToggleDisabled()||n.confirmRefreshForRDataSource(this.services.errorService,this.services.localizationService,this.services.modalDialogService,this.services.rootScope.$new(),(function(){}),(function(){e.scope.viewModel.refreshSettings.refreshEnabled=!1,e.scope.$applyAsync()}))},t.prototype.popUserConsentDialogIfRequired=function(t){var o=this;if(this.model&&this.model.dataset&&this.model.dataset.modelId){var r=this.services.telemetryService,a=r.startEvent(e.telemetry.DashboardGetAggregatedDatasourcesForOneModel,t.contentProviderId),n=this.services.errorService,s=this.services.datasetsService,c=this.model.dataset.modelId.toString();this.services.gatewaysMetadataService.getAdmsAggregatedDatasourcesForOneModel(c,!1).then((function(t){a.resolve(),o.scope.showDiscoverDatasourcesSpinner=!1;var s=t;if(!s)return void o.services.gatewaysMetadataService.displayOopsErrorAndEndTelemetry(r,n,"SettingsDataset_Error_FailedToLoadDatasources",a);var c=_.some(s,(function(t){var o=t.discoverDataSourceEntry;return!!o.databaseType&&(o.databaseType.toString()===i.Extension.toString()&&o.extensionDatabaseType===e.common.constants.RDataSourceName)}));c&&o.confirmRefreshForRDataSource()}),(function(e){o.scope.showDiscoverDatasourcesSpinner=!1,s.displayOopsErrorAndEndTelemetry(r,n,"SettingsDataset_Error_FailedToLoadDatasources",e,a)}))}},t.prototype.shouldTakeoverContainerShow=function(){return!this.services.groupService.activeGroup.isMyWorkspace&&void 0!==this.model.dataset.lastTakeoverEmailAddress},t.prototype.getTrustedHtml=function(e){return this.services.$sce.trustAsHtml(e)},t.prototype.showTakeoverDialog=function(){var e=this,t=this.services.errorService,i=t.control(),o=[new InJs.ModalDialogAction(this.services.localizationService.get("TakeOver_Confirmation_TakeOverButton_Text"),function(o,r){e.onTakeoverConfirm(t),i.hideDialog()}),new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Cancel"),function(e,t){i.hideDialog()})],r=this.services.localizationService.get("TakeOver_Confirmation_Title"),a=$("<div/>").append($("<p/>").text(this.services.localizationService.get("TakeOver_Confirmation_Message_Paragraph1"))).append($("<p/>").text(this.services.localizationService.get("TakeOver_Confirmation_Message_Paragraph2")));i.showCustomDialog(r,a,o,(function(t){t.parent().find('input[value="'+e.services.localizationService.get("ModalDialogButtonText_Cancel")+'"]').focus()}),!0)},t.prototype.onTakeoverConfirm=function(t){var i=this;this.scope.datasetPageReady=!1;var o=this.services.telemetryService,r=this.services.datasetsService;if(this.isModelETL(this.model.dataset.contract)){var a=o.startEvent(e.telemetry.SettingsDeleteAllDatasources);r.deleteAdmsAllDatasources(this.model.dataset.modelId.toString(),a.event).then((function(e){i.retrieveModelForRefreshAndApplyToScope(!0),a.resolve()}),(function(e){r.displayOopsErrorAndEndTelemetry(o,t,"SettingsDataset_Error_FailedToDeleteAllDatasources",e,a)}))}else{var n=o.startEvent(e.telemetry.SettingsTakeoverDatasources);r.takeoverDatasource(this.model.dataset.modelId,n.event).then((function(e){i.initializeDataSources(i.scope.isCloudDirectQuery,!0),n.resolve()}),(function(e){r.displayOopsErrorAndEndTelemetry(o,t,"SettingsDataset_Error_FailedToDeleteAllDatasources",e,n)}))}},t.prototype.isModelETL=function(e){return!e.directQueryMode&&!e.onPremModelConnectionString},t.prototype.getStorageSourceDisplayName=function(){return this.dataSetHasStorageSource()&&this.model.dataset.contract.storageProviderType===s.OneDrive?e.common.localize.get("GetData_OneDrivePersonal_Title"):this.dataSetHasStorageSource()&&this.model.dataset.contract.storageProviderType===s.SharePoint?e.common.localize.get("GetData_OneDriveBusiness_Title"):""},t.prototype.testConnectionProgressing=function(t){return t.testConnectionState===e.common.models.TestConnectionState.Progressing},t.prototype.testConnectionFailed=function(t){return t.testConnectionState===e.common.models.TestConnectionState.Failed},t.prototype.testPackageConnectionProgressing=function(){return!!this.dataSetHasStorageSource()&&this.model.dataset.storageSource.testConnectionState===e.common.models.TestConnectionState.Progressing},t.prototype.testPackageConnectionFailed=function(){return!!this.dataSetHasStorageSource()&&this.model.dataset.storageSource.testConnectionState===e.common.models.TestConnectionState.Failed},t.convertErrorDetailsJson=function(t){if(!t)return null;var i=JSON.parse(t),o=[];return e.helpers.PowerBIServiceExceptionErrorHelper.GenerateErrorMessage(i.error).done((function(e){e.displayableErrorInfo.forEach((function(e){o.push({Name:e.errorInfoKey,Value:e.errorInfoValue})}))})),o},t.getFriendlyErrorMessage=function(t){if(!t)return null;var i,o=JSON.parse(t);return i=e.helpers.PowerBIServiceExceptionErrorHelper.FormatWithNamedParameters(o.error.code,null)},t.prototype.setDefaultTimeZone=function(){var e=jsCommon.Utility.getLocalTimeZoneString(),t=this.model.dataset.refreshTimeZonesViewModel.filter((function(t){return t.key===e}));t.length>0?this.model.dataset.refreshSettings.refreshTimeZoneId=t[0].key:this.model.dataset.refreshSettings.refreshTimeZoneId="UTC"},t.prototype.isFileNotFoundCode=function(e){var t=["SharePointProviderUnableToGetFilesAndFolders","SharePointProviderUnableToGetFileProperties","SharePoint_ItemNotExist","SharePoint_FileNotFound","OneDriveProviderUnableToGetFileProperties"],i=t.indexOf(e.faultCode);return!(i<0)},t.prototype.getSalesforceDatasource=function(t){var i={packageId:t.contract.packageId,modelId:t.modelId,name:t.name,onpremGatewayRequired:!1,alreadyExecutedTestConnection:!1,credentialTypes:[e.common.contracts.gateway.CredentialType.OAuth2]};return i.displayName=a.getDatasourceDisplayName(i),i.fullName=a.getDatasourceDisplayName(i),i},t.prototype.applyGatewaySelection=function(){var t=this;this.services.gatewaysMetadataService.bindModelToGateway(this.model.dataset.modelId,this.scope.selectGatewayModel.selectedGatewayId).then((function(){t.scope.$broadcast(e.settings.constants.gatewaySelectionAppliedEventName),t.services.localizationService.ensureLocalization((function(){t.services.notificationToast.notify({title:t.services.localizationService.format("SettingsDataset_Notification_GatewayConnectionUpdated_Title",[t.model.dataset.name]),message:t.services.localizationService.format("SettingsDataset_Notification_GatewayConnectionUpdated_Message",[t.model.dataset.name]),notificationType:e.common.NotificationToastType.Success})}))}),(function(i){var o={requestId:i.requestId,statusCode:i.status.toString()};t.services.errorService.error(e.common.localize.get("SettingsGateways_Error_FailedToBind"),"SettingsGateways_Error_FailedToBind",o)}))},t.prototype.discardGatewaySelection=function(){this.scope.$broadcast(e.settings.constants.gatewaySelectionDiscardedEventName)},t.prototype.enableCortana=function(){this.scope.viewModel.isQnaDirty=!0,this.scope.qna.cortanaEnabled&&(this.scope.qna.powerBIQnaEnabled=!0)},t.prototype.enableQna=function(){this.scope.viewModel.isQnaDirty=!0,this.scope.qna.powerBIQnaEnabled||(this.scope.qna.cortanaEnabled=!1)},t.prototype.updateGatewayHeaderWarning=function(){if(this.services.featureSwitchService.featureSwitches.enterpriseGatewayETLEnabled){var t=this.services.localizationService,i=this.getPGWStatus(),o=e.common.contracts.gateway.GatewayStatus;if(this.isBoundToGateway()){if(this.isBoundToEnterpriseGateway())switch(this.getEGWStatus()){case e.connectivity.models.GatewayStatus.NotReachable:var r=this.getSelectedEnterpriseGateway();return void(0===this.getAvaialableEnterpriseGatewayCount()?this.scope.selectGatewayModel.isCloudScheduleRefresh?this.setGatewayWarning(t.format("EGWOffline_Cloud_Message",[this.getGatewayName(r),this.getGatewayAdminName(r)])):i===o.NotInstalled?this.setGatewayWarning(t.format("PGWNotInstalled_EGWOffline_Message_1",[this.getGatewayName(r)]),t.get("PGWNotInstalled_EGWOffline_Message_2"),t.format("PGWNotInstalled_EGWOffline_Message_3",[this.getGatewayAdminName(r)])):i===o.Live?this.setGatewayWarning(t.format("EGWOffline_OnPrem_Message",[this.getGatewayName(r),this.getGatewayAdminName(r)])):i===o.NotReachable&&this.setGatewayWarning(t.format("EGWOffline_PGWOfflineMessage",[this.getGatewayName(r),this.getGatewayAdminName(r)])):this.scope.selectGatewayModel.isCloudScheduleRefresh?this.setGatewayWarning(t.format("EGWOffline_OtherGatewayAvailable_Cloud_Message",[this.getGatewayName(r),this.getGatewayAdminName(r)])):i===o.NotInstalled?this.setGatewayWarning(t.format("EGWOffline_OtherGatewayAvailable_PGWNotInstalled_Message_1",[this.getGatewayName(r)]),t.get("EGWOffline_OtherGatewayAvailable_PGWNotInstalled_Message_2"),t.format("EGWOffline_OtherGatewayAvailable_PGWNotInstalled_Message_3",[this.getGatewayAdminName(r)])):i===o.Live?this.setGatewayWarning(t.format("EGWOffline_OtherGatewayAvailable_OnPrem_Message",[this.getGatewayName(r),this.getGatewayAdminName(r)])):i===o.NotReachable&&this.setGatewayWarning(t.format("EGWOffline_PGWOfflineMessage_OtherGatewayAvailable",[this.getGatewayName(r),this.getGatewayAdminName(r)])))}else if(!this.scope.selectGatewayModel.isCloudScheduleRefresh)switch(i){case o.NotReachable:return 0===this.getAvaialableEnterpriseGatewayCount()?void this.setGatewayWarning(t.get("PGWOffline_Message")):void this.setGatewayWarning(t.get("PGWOffline_EGWAvailable_Message"))}}else if(this.scope.selectGatewayModel.egwAccessLost)return void(this.scope.selectGatewayModel.isCloudScheduleRefresh?this.setGatewayWarning(t.get("EGWAccessLost_Cloud_Message")):this.setGatewayWarning(t.get("EGWAccessLost_OnPrem_Message")));this.clearGatewayWarning()}},t.prototype.setGatewayWarning=function(t,i,o){void 0===i&&(i=null),void 0===o&&(o=null),this.scope.viewModel.gatewaysExpand=!0,this.scope.headerMessage=t,this.scope.headerLink=i,this.scope.headerGatewayWarning=o,this.scope.showInstallPGWLink=null!=i,this.scope.showHeaderMessage=!0,this.scope.isGatewayWarning=!0,this.scope.displayIcon=e.common.models.InlineMessageIcon.Warning},t.prototype.clearGatewayWarning=function(){this.scope.isGatewayWarning&&(this.scope.headerMessage="",this.scope.headerLink=null,this.scope.headerGatewayWarning=null,this.scope.showHeaderMessage=!1,this.scope.isGatewayWarning=!1,this.scope.showInstallPGWLink=!1,this.scope.displayIcon=e.common.models.InlineMessageIcon.Info)},t.prototype.getGatewayName=function(e){return e?e.displayName:""},t.prototype.getGatewayAdminName=function(e){return e&&e.gatewayAnnotation.gatewayContactInformation&&0!==e.gatewayAnnotation.gatewayContactInformation.length?e.gatewayAnnotation.gatewayContactInformation[0]:""},t.prototype.isBoundToGateway=function(){return this.scope.selectGatewayModel.selectedGatewayId!==-1},t.prototype.isBoundToEnterpriseGateway=function(){return this.scope.selectGatewayModel.useEnterpriseGateway},t.prototype.getPGWStatus=function(){return this.scope.selectGatewayModel.pgw.gatewayStatus},t.prototype.getEGWStatus=function(){var t=this.getSelectedEnterpriseGateway();return t?t.status:e.connectivity.models.GatewayStatus.Unknown},t.prototype.getAvaialableEnterpriseGatewayCount=function(){for(var t=0,i=0,o=this.scope.selectGatewayModel.enterpriseGateways;i<o.length;i++){var r=o[i];r.status===e.connectivity.models.GatewayStatus.Live&&t++}return t},t.prototype.getSelectedEnterpriseGateway=function(){var e=this;return _.find(this.scope.selectGatewayModel.enterpriseGateways,(function(t){return t.id===e.scope.selectGatewayModel.selectedGatewayId}))},t.prototype.showGatewayStatus=function(e){return this.services.gatewaysMetadataService.getGatewayStatus(e.gatewayId)},t.prototype.showDataSourcesStatus=function(){var e=this;this.services.gatewaysMetadataService.getModelDataSources(this.scope.viewModel.modelId).then((function(t){var i=e.services.selectGatewayService.getSelectedGateway(t);if(i){var o=e.getDataSourceIds(i.gatewayId,t.datasources),r=o.length,a=0,n=0;if(0===r)return void(e.scope.gatewayStatusMessage=e.services.localizationService.format("SettingsDataset_NoDataSourceStatusMessage",[i.gatewayName]));for(var s=0,c=o;s<c.length;s++){var l=c[s];e.services.gatewaysMetadataService.getDataSourceStatus(i.gatewayId,l).then((function(){a++,r===a?e.scope.gatewayStatusMessage=e.services.localizationService.format("SettingsDataset_GatewayStatusMessage",[i.gatewayName,e.services.localizationService.get("Gateways_Status_Online_Datasource_Online")]):r===a+n&&(e.scope.gatewayStatusMessage=e.services.localizationService.format("SettingsDataset_GatewayStatusMessage",[i.gatewayName,e.services.localizationService.get("Gateways_Status_Online_Datasource_Offline")]))}),(function(t){n++,r===n?e.showGatewayStatus(i).then((function(t){e.scope.gatewayStatusMessage=e.services.localizationService.format("SettingsDataset_GatewayStatusMessage",[i.gatewayName,e.services.localizationService.get("Gateways_Status_Online_Datasource_All_Offline")])}),(function(t){t.error.code.match("DM_GWPipeline_Client_GatewayUnreachable")?e.scope.gatewayStatusMessage=e.services.localizationService.format("SettingsDataset_GatewayStatusMessage",[i.gatewayName,e.services.localizationService.get("Gateways_Status_Offline")]):e.scope.gatewayStatusMessage=e.services.localizationService.format("SettingsDataset_GatewayDataSourceStatusMessage",[i.gatewayName,e.services.localizationService.get("Gateways_Status_Offline")])})):r===a+n&&(e.scope.gatewayStatusMessage=e.services.localizationService.format("SettingsDataset_GatewayStatusMessage",[i.gatewayName,e.services.localizationService.get("Gateways_Status_Online_Datasource_Offline")]))}))}}}))},t.prototype.getDataSourceIds=function(e,t){for(var i=[],o=0,r=t;o<r.length;o++){var a=r[o];a.gatewayId===e&&i.push(a.dataSourceId)}return i},t})();t.SettingsDatasetController=p})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.helpers.ModelConverterHelper,o=10,r=300,a=(function(){function a(e,t){var a=this;this.scope=e,this.services=t,e.modelSupportsQna=i.getIsQnaSupported(e.viewModel.contract,this.services.featureSwitchService.featureSwitches),e.sectionExpanded=!1,e.maxQuestions=o,e.maxUtteranceLength=r,this.generateQuestionsFromViewModel(),e.deleteQuestion=function(e){return a.deleteQuestion(e)},e.addQuestion=function(){return a.addQuestion()},e.onChange=function(e){return a.onChange(e)},e.applyChanges=function(){return a.applyChanges()},e.discardChanges=function(){return a.discardChanges()},e.isDirty=!1,t.localizationService.ensureLocalization((function(){e.inputAriaLabel=t.localizationService.get("SettingsDataset_FeaturedQuestions_FeaturedQuestionInputLabel")}))}return a.createOptions=function(){return{additionalServices:["errorService","featureSwitchService","localizationService","modelService","navigation"]}},a.prototype.deleteQuestion=function(e){var t=this.scope;t.isDirty=!0,t.questions.splice(e,1),this.checkForValid()},a.prototype.addQuestion=function(){var e=this.scope;e.isDirty=!0;var t={utterance:"",validationMessage:null,isValid:!1};e.questions.push(t),this.onChange(t),e.focusOnLastInput&&this.services.timeout((function(){return e.focusOnLastInput()}),0)},a.prototype.onChange=function(e){if(this.scope.isDirty=!0,!e||_.isEmpty(e.utterance)){var t=this.services.localizationService;t.ensureLocalization((function(){e.validationMessage=t.get("SettingsDataset_FeaturedQuestions_EmptyError")})),e.isValid=!1}else e.validationMessage=null,e.isValid=!0;this.checkForValid()},a.prototype.applyChanges=function(){var t=this,i=this.scope,o=_.map(i.questions,(function(e,t){return{utterance:e.utterance,order:t}}));this.services.modelService.updateFeaturedQuestions(i.viewModel.modelId,o).then((function(){i.isDirty=!1;var e=i.viewModel;e.contract.featuredQuestions=o,t.services.modelService.updateContractModel(t.scope.viewModel.contract)}),(function(){t.services.errorService.error(e.common.localize.get("SettingsGeneral_Error_FailedToSave"),"SettingsGeneral_Error_FailedToSave")}))},a.prototype.discardChanges=function(){this.generateQuestionsFromViewModel(),this.scope.isDirty?t.SettingsDatasetController.areYouSureYouWantToLeaveThisDataset(this.services.errorService,this.services.localizationService,this.services.navigation):t.SettingsDatasetController.closeDataset(this.services.navigation),this.scope.isDirty=!1},a.prototype.checkForValid=function(){var e=this.scope;e.isValid=_.all(e.questions,(function(e){return e.isValid}))},a.prototype.generateQuestionsFromViewModel=function(){var e=this.scope;e.questions=_(e.viewModel.contract.featuredQuestions).sortBy((function(e){return e.order})).map((function(e){return{utterance:e.utterance||"",validationMessage:null,isValid:!0}})).value();for(var t=0,i=e.questions;t<i.length;t++){var o=i[t];this.onChange(o)}},a})();t.SettingsDatasetFeaturedQuestionsController=a})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.contracts.Permissions,o=(function(o){function r(t,r){var a=this;t.filteredModels=_.filter(r.modelService.getModelContracts(),(function(e){return(e.permissions&i.Write)===i.Write&&!e.isHidden})),o.call(this,t,r,e.models.SettingsGroupsType.Datasets),t.$watch((function(){return r.modelService.lastUpdatedTimestamp}),(function(){a.updateView()}))}return __extends(r,o),r.createOptions=function(){return t.SettingsDataModelsController.createOptions()},r.prototype.updateView=function(){this.scope.filteredModels=_.filter(this.services.modelService.getModelContracts(),(function(e){return(e.permissions&i.Write)===i.Write&&!e.isHidden}));for(var e=0;e<this.scope.filteredModels.length;e++)if(this.scope.filteredModels[e].id===this.scope.viewModel.currentDatasetId)return;this.scope.viewModel.currentDatasetId=null},r})(t.SettingsDataModelsController);t.SettingsDatasetsController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){var i=this;this.scope=e,this.services=t,e.isDirty=!1,e.esriSettings={esriVisualEnabled:e.viewModel.esriVisualEnabled},e.applyChanges=function(){return i.applyChanges()},e.discardChanges=function(){return i.discardChanges()},e.onSettingChange=function(){return e.isDirty=!0},e.esriVisualDisallowed=!this.services.featureSwitchService.featureSwitches.esriVisualEnabled}return e.createOptions=function(){return{additionalServices:["navigation","telemetryService","userSettingsService","featureSwitchService","esri"]}},e.prototype.applyChanges=function(){var e=this;this.scope.viewModel.esriVisualEnabled===this.scope.esriSettings.esriVisualEnabled?this.services.navigation.navigateBack():this.services.esri.updateEsriSetting(this.scope.esriSettings.esriVisualEnabled).then((function(t){e.scope.viewModel.esriVisualEnabled=t,e.services.navigation.navigateBack()}))},e.prototype.discardChanges=function(){this.services.navigation.navigateBack()},e})();e.SettingsEsriController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t,i){var o=this;this.scope=t,this.services=i,t.subGroups=[],e.common.localize.ensureLocalization((function(){o.services.featureSwitchService.featureSwitches.previewConceptualModel&&o.addSubGroup(new e.models.GeneralSubGroup(e.models.SettingsGeneralSubgroupType.Preview,e.common.localize.get("Settings_PreviewFeatures"))),o.addSubGroup(new e.models.GeneralSubGroup(e.models.SettingsGeneralSubgroupType.Privacy,e.common.localize.get("SettingsGeneral_Privacy_Title"))),o.addSubGroup(new e.models.GeneralSubGroup(e.models.SettingsGeneralSubgroupType.Language,e.common.localize.get("SettingsGeneral_Language_Title"))),o.services.featureSwitchService.featureSwitches.closeAccountEnabled&&o.addSubGroup(new e.models.GeneralSubGroup(e.models.SettingsGeneralSubgroupType.CloseAccount,e.common.localize.get("Settings_CloseAccount"))),o.addSubGroup(new e.models.GeneralSubGroup(e.models.SettingsGeneralSubgroupType.Plugins,e.common.localize.get("SettingsGeneral_Plugins_Title"))),o.services.featureSwitchService.featureSwitches.esriEnabled&&o.addSubGroup(new e.models.GeneralSubGroup(e.models.SettingsGeneralSubgroupType.Esri,e.common.localize.get("SettingsGeneral_Esri")))})),t.onSubgroupSelected=function(e){return o.onSubgroupSelected(e)};var r=this.services.navigation.settingsId;if(r){r=r.charAt(0).toUpperCase()+r.slice(1);var a=e.models.SettingsGeneralSubgroupType[r];t.viewModel.selectedSubgroupType=a?a:e.models.SettingsGeneralSubgroupType.Privacy}else t.viewModel.selectedSubgroupType||(t.viewModel.selectedSubgroupType=e.models.SettingsGeneralSubgroupType.Privacy)}return t.createOptions=function(){return{additionalServices:["featureSwitchService","navigation"]}},t.prototype.onSubgroupSelected=function(t){var i=e.models.SettingsGeneralSubgroupType[t];this.services.navigation.showSettingsSlider(e.models.SettingsGroupsType.General,i.charAt(0).toLowerCase()+i.slice(1)),this.scope.viewModel.selectedSubgroupType=t},t.prototype.getSelectedSubgroupType=function(){return this.scope.viewModel.selectedSubgroupType},t.prototype.addSubGroup=function(e){this.scope.subGroups.push(e)},t})();t.SettingsGeneralController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t,i){var o=this;this.scope=t,this.services=i,this.scope.supportedLanguages=e.common.models.SettingsViewModelFactory.createSupportedLanguagesModel(),this.scope.isLoading=!1,this.scope.applyChanges=function(){return o.applyChanges()},this.scope.discardChanges=function(){return o.discardChanges()};for(var r=this.scope.viewModel.preferredLanguage||this.services.localizationService.currentLanguageLocale,a=0,n=this.scope.supportedLanguages;a<n.length;a++){var s=n[a];if(s.code===r){this.scope.currentLanguage=this.originalLanguage=s;break}}}return t.createOptions=function(){return{additionalServices:["$window","localizationService","telemetryService","userSettingsService"]}},t.prototype.applyChanges=function(){var t=this;if(this.scope.languageSettingsForm.$dirty){var i=this.scope.currentLanguage.code,o=this.services.telemetryService.startEvent(e.telemetry.LocaleSaveLocaleSetting,i);this.scope.isLoading=!0,this.services.userSettingsService.updateLanguageSetting(i,o).then((function(){t.originalLanguage=t.scope.currentLanguage,t.scope.isLoading=!1,t.services.$window.location.reload(!0)}))}},t.prototype.discardChanges=function(){this.scope.currentLanguage=this.originalLanguage},t})();t.SettingsLanguageController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(i,o){var r=this;this.scope=i,this.services=o,i.viewModel=i.viewModel||{developerMode:e.localStorageService.getData(t.DeveloperModeEnabledKey)},i.pluginsSettings={developerMode:i.viewModel.developerMode},i.applyChanges=function(){return r.applyChanges()}}return t.createOptions=function(){return{additionalServices:["telemetryService","userSettingsService"]}},t.prototype.applyChanges=function(){e.localStorageService.setData(t.DeveloperModeEnabledKey,this.scope.pluginsSettings.developerMode),this.services.telemetryService.logEvent(e.telemetry.DeveloperVisualEnabledChanged,this.scope.pluginsSettings.developerMode)},t.DeveloperModeEnabledKey="DEVELOPER_MODE_ENABLED",t})();t.SettingsPluginsController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){var i=this;this.scope=e,this.services=t,e.isDirty=!1,e.privacySettings={allowQnaDataCollection:e.viewModel.allowQnaDataCollection},e.applyChanges=function(){return i.applyChanges()},e.discardChanges=function(){return i.discardChanges()},e.onSettingChange=function(){return e.isDirty=!0}}return t.createOptions=function(){return{additionalServices:["navigation","telemetryService","userSettingsService"]}},t.prototype.applyChanges=function(){var t=this;if(this.scope.viewModel.allowQnaDataCollection===this.scope.privacySettings.allowQnaDataCollection)this.services.navigation.navigateBack();else{var i=this.services.telemetryService.startEvent(e.telemetry.PrivacySaveSettingsModel);this.services.userSettingsService.updateAllowQnaDataCollection(this.scope.privacySettings.allowQnaDataCollection,i).then((function(e){t.scope.viewModel.allowQnaDataCollection=e,t.services.navigation.navigateBack()}))}},t.prototype.discardChanges=function(){this.services.navigation.navigateBack()},t})();t.SettingsPrivacyController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){}return e})();e.SettingsPublishedContentController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t,i){var o=this;this.scope=t,this.services=i,t.onSettingsGroupSelected=function(e){return o.onSettingsGroupSelected(e)},t.selectedSettingsGroupTypeAsString=function(){return o.selectedSettingsGroupTypeAsString()},t.settingsGroups=this.getSettingsGroups(),t.isLoading=!0;var r=t.$on(e.common.constants.navigation.stateChangeSuccess,(function(){return o.handleStateChange()}));this.handleStateChange(),t.$on("$destroy",(function(){r()})),i.settingsMetadataService.getSettings().then((function(e){t.viewModel=i.modelConverter.convertSettingsMetadata(e),t.isLoading=!1}),(function(){i.errorService.error(e.common.localize.get("SettingsGeneral_Error_FailedToLoad"),"SettingsGeneral_Error_FailedToLoad"),i.navigation.navigateBack()}))}return t.createOptions=function(){return{additionalServices:["errorService","navigation","modelConverter","settingsMetadataService","permissionService","telemetryService","featureSwitchService"]}},t.prototype.handleStateChange=function(){var t=this.services.navigation.settingsGroup,i=t.charAt(0).toUpperCase()+t.slice(1);this.scope.currentSettingsGroup=e.models.SettingsGroupsType[i]},t.prototype.onSettingsGroupSelected=function(t){this.services.navigation.showSettingsSlider(t),this.scope.currentSettingsGroup!==t&&this.services.telemetryService.logEvent(e.telemetry.DashboardSettingGroupChanged,e.models.SettingsGroupsType[this.scope.currentSettingsGroup],e.models.SettingsGroupsType[t])},t.prototype.getSettingsGroups=function(){var t=this,i=[],o=e.common.localize;return o.ensureLocalization((function(){i.push(new e.models.SettingsGroup(e.models.SettingsGroupsType.General,o.get("SettingsGroupsNames_General"))),t.services.permissionService.isActiveWorkspaceIsReadOnly||(i.push(new e.models.SettingsGroup(e.models.SettingsGroupsType.Dashboards,o.get("SettingsGroupsNames_Dashboards"))),i.push(new e.models.SettingsGroup(e.models.SettingsGroupsType.Datasets,o.get("SettingsGroupsNames_Datasets"))),i.push(new e.models.SettingsGroup(e.models.SettingsGroupsType.Workbooks,o.get("SettingsGroupsNames_Workbooks"))),i.push(new e.models.SettingsGroup(e.models.SettingsGroupsType.Alerts,o.get("SettingsGroupsNames_Alerts"))),t.services.featureSwitchService.featureSwitches.emailSubscriptionEnabled&&i.push(new e.models.SettingsGroup(e.models.SettingsGroupsType.Communications,o.get("SettingsGroupsNames_Subscriptions"))))})),i},t.prototype.selectedSettingsGroupTypeAsString=function(){return e.models.SettingsGroupsType[this.scope.currentSettingsGroup]},t})();t.SettingsViewerController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(i){function o(t,r){for(var a=_.filter(r.workbookService.workbooks,(function(e){return o.filterWorkbooks(e,r.packageService)})),n=[],s=0;s<a.length;s++){var c=a[s],l=r.modelService.findModel(c.modelId,c.packageId);l&&n.push(l.contract)}t.filteredModels=n,t.storageRefreshSupported=!1,i.call(this,t,r,e.models.SettingsGroupsType.Workbooks)}return __extends(o,i),o.createOptions=function(){var e=t.SettingsDataModelsController.createOptions();return e.additionalServices=e.additionalServices.concat("workbookService").concat("packageService"),e},o.filterWorkbooks=function(e,t){return t.isRefreshNowEnabledForWorkbook(e)},o})(t.SettingsDataModelsController);t.SettingsWorkbooksController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.controllers.EmailsList,o=e.common.models.EmailsListModel,r=e.common.contracts.Permissions,a=(function(){function t(i,o){var r=this;this.scope=i,this.services=o,this.navigation=o.navigation;var a=this.services.dashboardDataService;this.isInContentListViewEquivalent()?this.scope.activeDashboard=this.services.shareSliderService.shareDashboard:this.scope.activeDashboard=a.sharingDashboard=a.sharingDashboard||a.activeDashboard,this.scope.switchToDashboardView=function(){return r.switchToDashboardView()},this.scope.shareEmail=function(){return r.shareEmail()},this.scope.cancelShare=function(){return r.cancelShare()},this.scope.isNotPermitted=function(){return t.isNotPermitted(r.scope.activeDashboard)},this.scope.sharedWithUsers=function(e){return r.sharedWithUsers(e)},this.scope.cancelInvite=function(e){return r.cancelInvite(e)},this.scope.stopSharing=function(e,t){return r.stopSharing(e,t)},this.scope.isOwner=function(){return t.isOwner(r.scope.activeDashboard)},this.scope.sharingPermissionsItemSelected=function(e){return r.onSharingPermissionsItemSelected(e)},this.scope.validateInputTag=function(e){return r.validateInputTags()},this.scope.resetValidation=function(){return r.validateInputTags()},this.scope.grantAccess=function(e){return r.grantAccess(e)},this.scope.denyAccess=function(e){return r.denyAccess(e)},this.scope.anyRequests=function(){return r.scope.viewModel.requestingUsers&&r.scope.viewModel.requestingUsers.length>0},this.scope.approveAll=function(){return r.approveAll()},this.scope.navigateToManagePermissions=function(){return r.navigateToManagePermissions()};var n=this.scope.activeDashboard.objectId;this.scope.getDashboardUrl=function(){return r.services.invitationService.getSharedDashboardLink(n,!1)},this.scope.featureSwitchPermissionCenterEnabled=this.services.featureSwitchService.featureSwitches.permissionCenterEnabled,this.scope.shouldShowPermissionsWarning=function(){return r.shouldShowPermissionsWarning(r.scope.activeDashboard)},this.scope.getWorkookPermissionsMessageType=function(){return r.getWorkookPermissionsMessageType(r.scope.activeDashboard)},this.setWorkbookTileWebUri(this.scope.activeDashboard),this.getDashboardUsersAndCreateSummaryText(),this.services.telemetryService.logEvent(e.telemetry.DashboardOpenShareDialog),this.unregisterViewModelWatch=this.scope.$watch("viewModel",(function(e){r.initializeViewModel(e)})),this.scope.$on("$destroy",(function(){r.unregisterViewModelWatch()})),this.scope.requestsClick=function(){r.scope.anyRequests()&&r.sharedWithUsers(!0)}}return t.createOptions=function(){return{additionalServices:["$location","dashboardDataService","domainHelperService","errorService","featureSwitchService","groupService","invitationService","licenseEnforcementService","localizationService","modelConverter","navigation","notificationToast","packageService","promiseFactory","telemetryService","userInfo","visualPlugin","shareSliderService","dashboardDataService","contentList"]}},t.prototype.initializeViewModel=function(t){var i=this;t&&(t.isUserListChanged=!1,t.isEmailBeingSent=!1,t.showSecurityGroupUpgradeAccount=!1,t.messageText="",t.emailsList=new o,t.inviteSelected=!0,t.sharedWithSelected=!1,t.shouldDisplayProContentAlertMessage=this.shouldDisplayProContentAlertMessage(this.scope.activeDashboard),
t.notifyViaEmail=!0,this.scope.viewModel.emailValidationError=this.scope.viewModel.emailValidationWarning="",this.services.localizationService.ensureLocalization((function(){t.placeholderMessage=i.services.localizationService.get("Sharing_MessagePlaceholderText"),t.defaultText=i.services.localizationService.get("Sharing_DefaultEmailText"),t.enterEmailText=i.services.localizationService.get("Sharing_AddEmailText")})),this.resetChangedUserList(e.models.SharingUserList.Default))},t.validateDashboardPermission=function(e,t){return e&&(e.contract.permissions&t)===t},t.isOwner=function(e){return t.validateDashboardPermission(e,r.All)},t.isNotPermitted=function(e){return!t.validateDashboardPermission(e,r.ReShare)},t.prototype.shouldDisplayProContentAlertMessage=function(e){return e&&(this.services.licenseEnforcementService.dashboardHasProFeatures(e.contract)||this.dashboardContainsRScriptTiles(e))},t.prototype.dashboardContainsRScriptTiles=function(t){if(t.tiles)for(var i=0,o=t.tiles;i<o.length;i++){var r=o[i];if(r.config&&r.config.visual&&r.config.visual.visual){var a=this.services.visualPlugin.capabilities(r.config.visual.visual);if(a&&a.dataViewMappings&&e.ScriptResultUtil.findScriptResultMapping(a.dataViewMappings))return!0}}return!1},t.prototype.getRemoteWorkbookTile=function(e){var t=this,i=void 0;return e&&e.tiles&&(i=_.find(e.tiles,(function(e){return!!(e&&e.workbook&&e.workbook.contract)&&!t.services.packageService.isLocalWorkbook(e.workbook.contract.packageId)}))),i},t.prototype.shouldShowPermissionsWarning=function(e){return void 0!==this.getRemoteWorkbookTile(e)||!t.isOwner(e)&&this.containsWorkbookTile(e)},t.prototype.containsWorkbookTile=function(e){var t=void 0;return e.tiles&&(t=_.find(e.tiles,(function(e){return e&&e.workbook}))),void 0!==t},t.prototype.isMyWorkspace=function(){return this.services.groupService.isMyWorkspace()},t.prototype.getWorkookPermissionsMessageType=function(e){return this.isMyWorkspace()?t.isOwner(e)?0:1:2},t.prototype.setWorkbookTileWebUri=function(e){var t=this.getRemoteWorkbookTile(e);void 0!==t&&(this.scope.workbookWebUri=t.workbook.webUri)},t.prototype.markIsExternalInvitation=function(e){this.services.domainHelperService.emailIsInVerifiedDomain(e.sentToEmailAddress).then((function(t){e.isExternalUser=!t}),(function(){e.isExternalUser=!1}))},t.prototype.markIsExternalUser=function(e){this.services.domainHelperService.emailIsInVerifiedDomain(e.emailAddress).then((function(t){e.isExternalUser=!t}),(function(){e.isExternalUser=!1}))},t.prototype.onSharingPermissionsItemSelected=function(t){switch(t.action){case e.models.SharingOptions.StopSharing:this.stopSharing(t.id,t.kind);break;case e.models.SharingOptions.ReadOnly:this.editPermissions(t.id,t.kind,r.Read);break;case e.models.SharingOptions.ReadReshare:this.editPermissions(t.id,t.kind,r.ReadReshare)}},t.prototype.createSharingSummary=function(){var e,i=this.scope.viewModel;return i.owner?t.isOwner(this.scope.activeDashboard)?null==i.sharedUsers?e:e=0===i.sharedUsers.length?this.services.localizationService.get("Sharing_OnlyWithYou"):1===i.sharedUsers.length?this.services.localizationService.format("Sharing_SharedWithOne",[i.sharedUsers[0].fullName]):this.services.localizationService.format("Sharing_SharedWithMoreThanOne",[i.sharedUsers[0].fullName,(i.sharedUsers.length-1).toString()]):e=this.services.localizationService.format("Sharing_DashboardOwner",[i.owner.fullName]):e},t.prototype.createRequestsSummary=function(){var e=null,i=this.scope.viewModel;if(!i.owner||!t.isOwner(this.scope.activeDashboard)||!i.requestingUsers||0===i.requestingUsers.length)return e;var o=i.requestingUsers[0].fullName;return 1===i.requestingUsers.length?this.services.localizationService.format("Sharing_OneUserHasRequestedAccess",[o]):2===i.requestingUsers.length?this.services.localizationService.format("Sharing_TwoUsersHaveRequestedAccess",[o]):this.services.localizationService.format("Sharing_ThreeOrMoreUsersHaveRequestedAccess",[o,i.requestingUsers.length-1])},t.prototype.resetChangedUserList=function(e){this.scope.viewModel.selectedList=e,this.scope.viewModel.removedUserId=-1,this.scope.viewModel.removedUserKind=void 0,this.scope.viewModel.allowReshare=!0},t.prototype.validateMessageSize=function(){return!(this.scope.viewModel.messageText.length>t.MessageSizeLimit)||(this.services.notificationToast.notify({title:this.services.localizationService.get("Sharing_InvalidEntry"),message:this.services.localizationService.get("Sharing_MessageSizeExceeded"),notificationType:e.common.NotificationToastType.Alert}),!1)},t.prototype.switchToDashboardView=function(){this.isInContentListViewEquivalent()||this.navigation.navigateToDashboardByGUID(this.scope.activeDashboard.objectId)},t.prototype.shareEmail=function(){var t=this;if(this.scope.viewModel.emailsList.validationTrigger()&&this.validateMessageSize()){var i=this.scope.viewModel.emailsList.validObjectIds,o=this.scope.viewModel.emailsList.validEmailsList,r=!this.scope.isOwner(),a=this.services.telemetryService,n=a.startEvent(e.telemetry.DashboardSendShareInvitation);this.validateInputTags().then((function(s){var c=t.scope.viewModel.messageText,l=!1;_.isEmpty(c)?(l=!0,c=t.scope.viewModel.defaultText):c=t.scope.viewModel.messageText;var d=a.startChildEvent(n.event,e.telemetry.DashboardInviteDashboardUsers,o.length,i.length,c.length,l,r,t.scope.viewModel.allowReshare,t.scope.activeDashboard.objectId,t.scope.viewModel.notifyViaEmail,s.externalEmailCount);t.scope.viewModel.isEmailBeingSent=!0,t.services.invitationService.sendInvitation(t.scope.activeDashboard.id,o,i,c,t.scope.viewModel.allowReshare,t.scope.viewModel.notifyViaEmail,d.event).then((function(){d.resolve(),t.notifySharingSuccess("Sharing_SendEmailSuccess"),t.scope.viewModel.isEmailBeingSent=!1,t.scope.viewModel.emailsList.inputUserList=[],n.resolve(),t.scope.viewModel.notifyViaEmail?t.switchToDashboardView():t.sharedWithUsers(!0),t.closePaneAndUpdateState()}),(function(i){var o;if(i.status===e.HttpStatusCode.RequestEntityTooLarge)t.displayShareEmailLimitExceededError(parseInt(i.headers.ActualInvitationEmailCount,10));else{t.notifySharingFailure("Sharing_FailedToInvitedUsers"),t.scope.viewModel.isEmailBeingSent=!1;var r=i.headers(e.common.PowerBIErrorHeader);r===e.constants.DashboardSharingSecurityGroupRequirePro&&(t.scope.viewModel.showSecurityGroupUpgradeAccount=!0,o=r),r===e.constants.DashboardInvitationUnsupportedGroup&&(t.displayShareToUnifiedGroupError(),o=r)}var a={errorCode:i.status+"",errorSource:o?e.telemetry.ErrorSource.User:e.telemetry.ErrorSource.PowerBI};d.reject(a),n.reject(a)}))}),(function(i){null!==i?(n.reject({errorCode:i.errorReason,errorSource:e.telemetry.ErrorSource.User}),t.services.telemetryService.logEvent(i.errorTelemetryEvent)):n.reject({errorCode:"UnknownSystemError",errorSource:e.telemetry.ErrorSource.PowerBI}),t.notifySharingFailure("Sharing_FailedToInvitedUsers")}))}},t.prototype.cancelShare=function(){this.closePaneAndUpdateState()},t.prototype.validateInputTags=function(){var t=this;this.scope.viewModel.emailValidationError=this.scope.viewModel.emailValidationWarning="",this.scope.viewModel.showSecurityGroupUpgradeAccount=!1;var i=this.services.promiseFactory.defer();return this.services.domainHelperService.getVerifiedDomains().then((function(o){var r={},a={},n=null,s="",c=0;if(t.scope.viewModel&&t.scope.viewModel.emailsList){for(var l=t.scope.viewModel.emailsList.inputUserList,d=!1,p=0,u=l;p<u.length;p++){var v=u[p];if(v.userPrincipalName){var h=v.userPrincipalName.split("@"),g=h[1].toLowerCase();o.verifiedDomains[g.toUpperCase()]||(r[g]=g,c++),o.blockedDomains[g.toUpperCase()]&&(a[g]=g)}v.isSecurityGroup&&!t.services.userInfo.isPremiumUser&&(d=!0)}var m="",f=0;for(var y in r)f++,m+=y+", ";var b="",S=0;for(var w in a)S++,b+=w+", ";d&&(t.scope.viewModel.showSecurityGroupUpgradeAccount=!0),jsCommon.StringExtensions.endsWith(m,", ")&&(m=m.substring(0,m.length-2)),jsCommon.StringExtensions.endsWith(b,", ")&&(b=b.substring(0,b.length-2)),t.services.featureSwitchService.featureSwitches.externalSharingEnabled?S>0?(t.scope.viewModel.emailValidationError=t.services.localizationService.format("Sharing_BlockedDomains",[b]),n=e.telemetry.DashboardSharingWithBlockedDomain,s=b):f>0&&t.displaySharingToExternalUserWarning(m):f>0&&(t.scope.viewModel.emailValidationError=t.services.localizationService.format("Sharing_EmailDomainNotInTenant",[m]),n=e.telemetry.DashboardSharingWithInvalidDomain,s=m)}t.scope.viewModel.hasValidationError?i.reject({errorReason:s,errorTelemetryEvent:n}):i.resolve({externalEmailCount:c})}),(function(e){i.reject(null)})),i.promise},t.prototype.displayShareEmailLimitExceededError=function(t){this.scope.viewModel.emailValidationError=this.services.localizationService.get("Sharing_EmailAddressExceeded").replace("{{maxEmails}}",i.MaxAllowedEmailAddresses.toString());var o=this.services.telemetryService;o.logEvent(e.telemetry.DashboardSharingEmailAddressExceededLimit,t)},t.prototype.displayShareToUnifiedGroupError=function(){this.scope.viewModel.emailValidationError=this.services.localizationService.get("DashboardInvitationUnsupportedGroup");var t=this.services.telemetryService;t.logEvent(e.telemetry.DashboardSharingEmailAddressUnsupportedGroup)},t.prototype.displaySharingToExternalUserWarning=function(e){this.scope.viewModel.emailValidationWarning=this.services.localizationService.format("Sharing_ExternalOrganization",[e])},t.prototype.getListOfDashboardUsers=function(){var i=this,o=this.services.telemetryService.startEvent(e.telemetry.DashboardLoadDashboardUsers),a=this.services.promiseFactory.defer();return this.scope.activeDashboard&&this.services.invitationService.getDashboardAccess(this.scope.activeDashboard.id,o.event).then((function(n){var s,c,l=i.scope.viewModel,d=i.services.modelConverter;!n.data||n.data instanceof Array?(s=n.data,c=[]):(s=n.data.accesses,c=n.data.requests);var p=d.convertDashboardAccessInfoArray(s||[]);p.map((function(e){return i.markIsExternalUser(e)}));var u=d.convertDashboardAccessInfoArray(c||[]);if(l.owner=_.filter(p,(function(e){return e.permissions===r.All}))[0],l.sharedUsers=_.filter(p,(function(e){return e.permissions!==r.All})),l.requestingUsers=u,i.navigation.currentInviteObjectId){var v=parseInt(i.navigation.currentInviteId,10),h=e.contracts.DashboardAccessInfoKind.User,g=_.filter(l.requestingUsers,(function(e){return e.id===v&&e.kind===h}));if(g&&g.length>0){var m=g[0];i.scope.viewModel.emailsList.inputUserList.push({isSecurityGroup:!1,displayName:m.fullName,userPrincipalName:null,objectId:i.navigation.currentInviteObjectId,objectType:e.common.contracts.ADUserMetaDataObjectType.User})}}t.isOwner(i.scope.activeDashboard)?i.services.invitationService.getInvitedUsers(i.scope.activeDashboard.id,o.event).then((function(e){var t=i.scope.viewModel;t.invitedUsers=d.convertDashboardInvitation(e.data),t.invitedUsers.map((function(e){return i.markIsExternalInvitation(e)})),o.resolve(),a.resolve({})}),(function(e){o.reject(),i.services.localizationService.ensureLocalization((function(){i.services.errorService.error(i.services.localizationService.get("Sharing_FailedToLoadInvitedUsers"),"Sharing_FailedToLoadInvitedUsers",{requestId:e.requestId,statusCode:e.status.toString()}),a.reject({})}))})):a.resolve({})}),(function(e){i.services.localizationService.ensureLocalization((function(){i.services.errorService.error(i.services.localizationService.get("Sharing_FailedToLoadUsers"),"Sharing_FailedToLoadUsers",{requestId:e.requestId,statusCode:e.status.toString()}),a.reject({})}))})),a},t.prototype.getDashboardUsersAndCreateSummaryText=function(){var e=this;this.getListOfDashboardUsers().promise.then((function(){e.scope.viewModel.summaryText=e.createSharingSummary(),e.scope.viewModel.requestsSummaryText=e.createRequestsSummary()}),_.noop)},t.prototype.sharedWithUsers=function(e){e?this.getDashboardUsersAndCreateSummaryText():this.validateInputTags(),this.scope.viewModel.inviteSelected=!e,this.scope.viewModel.sharedWithSelected=e},t.prototype.cancelInvite=function(t){var i=this;if(this.scope.activeDashboard){var o=this.services.telemetryService.startEvent(e.telemetry.DashboardLoadDashboardUsers);this.services.invitationService.cancelInvitation(t,this.scope.activeDashboard.id,o.event).then((function(t){o.resolve(),i.sharedWithUsers(!0),i.resetChangedUserList(e.models.SharingUserList.Default)}),(function(e){o.reject(),i.services.localizationService.ensureLocalization((function(){i.services.errorService.error(i.services.localizationService.get("Sharing_FailedToCancelInvitation"),"Sharing_FailedToCancelInvitation",{requestId:e.requestId,statusCode:e.status.toString()})}))})),this.resetChangedUserList(e.models.SharingUserList.InvitedUsers)}},t.prototype.stopSharing=function(t,i){var o=this;if(this.scope.activeDashboard){var a=this.services.telemetryService.startEvent(e.telemetry.DashboardDeleteDashboardUser),n={dashboardId:this.scope.activeDashboard.id,id:t,kind:i,permissions:r.None,emailAddress:null,familyName:null,givenName:null,isOwner:!1,sentToEmailAddress:null};this.scope.viewModel.removedUserId=t,this.scope.viewModel.removedUserKind=i,this.services.invitationService.deleteDashboardAccess(n,a.event).then((function(t){a.resolve(),o.sharedWithUsers(!0),o.resetChangedUserList(e.models.SharingUserList.Default)}),(function(t){o.services.localizationService.ensureLocalization((function(){o.services.errorService.error(o.services.localizationService.get("Sharing_FailedToDeleteDashboardUser"),"Sharing_FailedToDeleteDashboardUser",{requestId:t.requestId,statusCode:t.status.toString()}),a.reject()})),o.resetChangedUserList(e.models.SharingUserList.SharedUsers)}))}},t.prototype.editPermissions=function(t,i,o){var r=this;if(this.scope.activeDashboard){var a=this.services.telemetryService.startEvent(e.telemetry.DashboardEditDashboardPermissions,this.scope.activeDashboard.objectId,o),n={dashboardId:this.scope.activeDashboard.id,id:t,kind:i,permissions:o,emailAddress:null,familyName:null,givenName:null,isOwner:!1,sentToEmailAddress:null};this.services.invitationService.editDashboardAccess(n,a.event).then((function(t){a.resolve(),r.sharedWithUsers(!0),r.resetChangedUserList(e.models.SharingUserList.Default)}),(function(e){r.services.errorService.error(r.services.localizationService.get("Sharing_FailedToEditPermissions"),"Sharing_FailedToEditPermissions",{requestId:e.requestId,statusCode:e.status.toString()}),a.reject()})),this.resetChangedUserList(e.models.SharingUserList.SharedUsers)}},t.prototype.grantAccess=function(t){for(var i=this,o=this.services.telemetryService.startEvent(e.telemetry.DashboardSendShareInvitation),r=!0,a=this.scope.viewModel.defaultText,n=t.map((function(e){return e.emailAddress})),s=[],c=!1,l=!1,d=!0,p=this.services.telemetryService.startChildEvent(o.event,e.telemetry.DashboardInviteDashboardUsers,n.length,s.length,a.length,r,c,l,this.scope.activeDashboard.objectId,d,0),u=0,v=t;u<v.length;u++){var h=v[u];h.isPerformingAccessRequest=!0}this.services.invitationService.sendInvitation(this.scope.activeDashboard.id,n,s,a,l,d,p.event).then((function(){o.resolve(),i.notifySharingSuccess("Sharing_AccessHasBeenGranted"),i.scope.viewModel.isEmailBeingSent=!1,i.scope.viewModel.emailsList.inputUserList=[],p.resolve(),t.forEach((function(t){_.remove(i.scope.viewModel.requestingUsers,(function(e){return e.id===t.id&&e.kind===t.kind})),t.permissions=e.common.contracts.Permissions.Read,i.scope.viewModel.sharedUsers.push(t)})),i.getDashboardUsersAndCreateSummaryText()}),(function(){p.reject(),i.notifySharingFailure("Sharing_GrantAccessFailed")})).finally((function(){t.forEach((function(e){e.isPerformingAccessRequest=!1}))}))},t.prototype.denyAccess=function(t){var i=this,o=this.services.telemetryService.startEvent(e.telemetry.DashboardDeleteDashboardAccessRequest,this.scope.activeDashboard.objectId,t.kind,t.id);t.isPerformingAccessRequest=!0,this.services.invitationService.deleteDashboardAccessRequest(this.scope.activeDashboard.id,t.kind,t.id,o.event).then((function(){o.resolve(),i.notifySharingSuccess("Sharing_AccessRequestRemoved"),_.remove(i.scope.viewModel.requestingUsers,(function(e){return e.id===t.id&&e.kind===t.kind})),i.getDashboardUsersAndCreateSummaryText()}),(function(){o.reject(),i.notifySharingFailure("Sharing_AccessRequestRemovalFailed")})).finally((function(){t.isPerformingAccessRequest=!1}))},t.prototype.notifySharingSuccess=function(t){this.services.notificationToast.notify({title:this.services.localizationService.get("Sharing_Success"),message:this.services.localizationService.get(t),notificationType:e.common.NotificationToastType.Share})},t.prototype.notifySharingFailure=function(t){this.services.notificationToast.notify({title:this.services.localizationService.get("Sharing_Failure"),message:this.services.localizationService.get(t),notificationType:e.common.NotificationToastType.Error})},t.prototype.approveAll=function(){var e=this.scope.viewModel.requestingUsers.slice();this.grantAccess(e)},t.prototype.navigateToManagePermissions=function(){this.navigation.navigateToManagePermissions(e.permissions.models.PermissionArtifactType.Dashboard,this.scope.activeDashboard.objectId)},t.prototype.closePaneAndUpdateState=function(){this.scope.$emit(e.constants.hideTaskPaneSlider),this.services.dashboardDataService.sharingDashboard=null,this.isInContentListViewEquivalent()?this.services.contentList.tileSelectionOff(this.services.shareSliderService.shareDashboard.objectId):this.navigation.inSharingView()&&this.navigation.navigateToDashboardByGUID(this.navigation.currentDashboardGUID)},t.prototype.isInContentListViewEquivalent=function(){return this.navigation.inContentListView()||this.navigation.inFavoritesView()||this.navigation.inRecentlyViewedView()},t.MessageSizeLimit=4e3,t})();t.ShareView=a})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.models.CollapsiblePaneExpandedWidth,o=e.common.constants.TaskPaneCollapsiblePaneMode,r=(function(){function t(t,i){var o=this;this.scope=t,this.services=i;var r=this.scope.$on(e.constants.hideTaskPaneSlider,(function(e){return o.hideTaskPaneSlider(e)})),a=this.services.rootScope.$on(e.constants.showTaskPaneSlider,(function(e,t,i,r){return o.expandCollapsiblePane(e,t,i,r)})),n=this.scope.$on(e.constants.showTaskPaneSlider,(function(e,t,i,r){return o.expandCollapsiblePane(e,t,i,r)})),s=this.scope.$on("destroy",(function(){r(),n(),a(),s()}));this.services.taskPaneSliderService.registerPaneVisibilityChangeObserver((function(e,t,i){return o.updatePaneVisibility(e,t,i)}))}return t.createOptions=function(){return{additionalServices:["taskPaneSliderService"]}},t.prototype.updatePaneVisibility=function(e,t,r,a){var n=this.scope.viewModel;n.collapsiblePane.isExpanded=e,n.collapsiblePane.expandedWidth=r||i.Large,n.previousMode=this.scope.viewModel.collapsiblePaneMode,n.collapsiblePaneMode=t||o.Default,n.parameters=a||{}},t.prototype.expandCollapsiblePane=function(e,t,i,o){e&&e.stopPropagation(),this.updatePaneVisibility(!0,t,i,o)},t.prototype.hideTaskPaneSlider=function(e){e&&e.stopPropagation(),this.updatePaneVisibility(!1,o.Default,i.Large)},t})();t.TaskPaneSliderController=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.models.CollapsiblePaneExpandedWidth,o=e.dataServices.models.ContentPackItems,r=e.dataServices.constants.SingleValueRealTimeWindow,a=e.common.helpers.ModelConverterHelper,n=e.explore.contracts.SingleVisualConfig,s=e.common.constants.TaskPaneCollapsiblePaneMode,c=e.models.factory.TileOptionsFactory,l=e.dataServices.contracts.TileType,d=e.dataServices.TileUtils,p=(function(){function t(t,i){var o=this;this.tileSaved=!1,this.scope=t,this.services=i;var r=this.services.dashboardDataService.selectedDashboardTile.tileModel;t.back=function(){return o.back()},t.closeTileEditorWithoutSaving=function(){return o.cancel()},t.restoreDefaults=function(){return o.restoreDefaults()},t.showTechnicalDetailsDialog=function(){return o.showTechnicalDetailsDialog()},t.saveChangesAndExit=function(){return o.save()},t.setCustomLinkChanged=function(){return o.setCustomLinkChanged()},t.setDynamicImageForWorkbookTile=function(){return t.workbookService.setModelDynamicImageUrl(r.workbook)},t.showLastRefreshTimeChanged=function(){return o.showLastRefreshTimeChanged()},t.toggleDisplayTitle=function(){return o.toggleDisplayTitle()},t.viewModel=new e.models.TileEditorModel(r,this.services.workbookService),t.workbookService=i.workbookService,t.tileEditorHeaderPaneTitle=function(){return o.tileEditorHeaderPaneTitle()},t.activateHeaderTab=function(e){return o.activateHeaderTab(e)},this.setDisplayTitle();var a=t.viewModel.tile;a&&a.realTime&&this.saveRealTimeTileContext();var n=a.action;n.openInSameTab=!!n.openInSameTab||!1,t.hasCustomLink=n.action===e.constants.openUrlActionName,t.isSavedRealTimeTile=!!a.realTime&&!a.isTemporary,t.isSavedRealTimeTile&&(t.headerTabs=c.getRealTimeTileEditHeaderTabs(i.localizationService),t.activeHeaderTab=t.headerTabs[0]),t.tileModel=r,t.selectedModel=i.modelService.findModel(r.contract.modelId),t.$watchGroup([function(){return r.hasTitle()},function(){return r.hasSubtitle()}],(function(){a.invalidateLayout()}));var s=t.$on("$destroy",(function(){var e=o.scope.viewModel;o.tileSaved||e.tile.isTemporary||!e.isDirty()||e.undoChanges(),s()}))}return t.createOptions=function(){return{additionalServices:["dashboardService","dashboardDataService","dashboardHttpService","errorService","localizationService","modelService","telemetryService","workbookService","visualPlugin"],scopedDependencies:["pinVisual","visualQueryGenerator"],scopedServiceRoot:!0}},t.prototype.showTechnicalDetailsDialog=function(){var t=this.services.errorService.control(),i=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Close"),function(e,i){t.hideDialog()})],o=$("<div/>"),r=jsCommon.StringExtensions.format('<a href="{0}" target="_blank">{1}</a>',jsCommon.PowerBIDefaultHelpPage,this.services.localizationService.get("TileEditor_TechnicalDetails_SupportPage"));o.append($("<div/>").html(this.services.localizationService.format("TileEditor_TechnicalDetails_Description",[r]))),this.addTileDetails(o),e.session.userInfo&&e.session.userInfo.uoid&&o.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_UserObjectId"),e.session.userInfo.uoid));var a=this.services.dashboardDataService.activeDashboard;a&&o.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_DashboardId"),a.id.toString())),this.addPackageDetails(o),this.addModelDetails(o),t.showCustomDialog(this.services.localizationService.get("TileEditor_TechnicalDetails_Title"),o,i,null,!0)},t.prototype.activateHeaderTab=function(e){this.scope.activeHeaderTab=e},t.prototype.cancel=function(){var t=this.scope.viewModel.tile;t.isTemporary?this.services.dashboardService.removeTemporaryTile(t):(this.scope.viewModel.undoChanges(),t.realTime&&this.restoreRealTimeTileContext()),this.scope.$emit(e.constants.hideTileEditorEventName)},t.prototype.back=function(){var t=this.scope.viewModel.tile;if(t.isTemporary){var o=t.realTime?s.RealTimeBlade:s.TileGallery;this.scope.$emit(e.constants.showTaskPaneSlider,o,i.Large)}},t.prototype.restoreDefaults=function(){this.scope.viewModel.restoreDefaults(),this.scope.hasCustomLink=!1,this.scope.viewModel.tile.action.action===e.constants.openUrlActionName&&(this.scope.viewModel.tile.action.action=null),this.setDisplayTitle()},t.prototype.save=function(){var e=this.scope.viewModel;if(e.isValid()){var t=e.tile;t.isTemporary?(t.isSelected=!1,this.saveNewTile()):this.saveExistingTile()}},t.prototype.saveNewTile=function(){var t=this.scope.viewModel,i=this.getPinTileTelemetryEvent();t.updateModelContract(),this.tileSaved=!0,this.services.dashboardService.saveTemporaryTile(t.tile,i),this.scope.$emit(e.constants.hideTileEditorEventName)},t.prototype.saveExistingTile=function(){var t=this,i=this.scope.viewModel,r=i.tile.contract,a=i.originalContract;if(!i.isDirty())return void this.scope.$emit(e.constants.hideTileEditorEventName);i.updateModelContract();var n=this.services.telemetryService.startEvent(e.telemetry.DashboardEditTileProperties,!1,r.displayText!==a.displayText,r.subDisplayText!==a.subDisplayText,r.action!==a.action,r.config!==a.config);this.services.dashboardHttpService.updateTile(a,r,n.event).then((function(){n.resolve(),t.tileSaved=!0,t.scope.$emit(e.constants.hideTileEditorEventName);var i=t.services.dashboardDataService.activeDashboard;i&&i.isUsedByContentPack&&t.services.rootScope.$emit(e.constants.contentPackDirtyShowNotification,i.id,o.Dashboard)}),(function(i){i.status===e.HttpStatusCode.Unauthorized?(n.event.info.readOnlyTileEdited=!0,n.resolve()):n.reject(),t.services.errorService.error(t.services.localizationService.get("TileEditor_UpdateFailed"),"TileEditor_UpdateFailed",{requestId:i.requestId,statusCode:i.status.toString()})}))},t.prototype.setCustomLinkChanged=function(){var t=this.scope.viewModel;this.scope.hasCustomLink?(t.setAction(e.constants.openUrlActionName),t.tile.action.openInSameTab=!1):t.setAction(null)},t.prototype.setDisplayTitle=function(){var e=this.scope,t=e.viewModel,i=t.tile.config,o=i&&!!i.hideTitle,r=t.titleRequired||!!t.tile.getDisplayText();e.displayTitle=!o&&r},t.prototype.showLastRefreshTimeChanged=function(){this.scope.viewModel.tile.config.lastRefreshTimeEnabled&&!this.scope.displayTitle&&(this.scope.displayTitle=!0,this.toggleDisplayTitle())},t.prototype.toggleDisplayTitle=function(){var e=this.scope.displayTitle,t=this.scope.viewModel.tile;t.config||(t.config={}),t.config.hideTitle=!e},t.prototype.tileEditorHeaderPaneTitle=function(){var e=this.services.localizationService,t=e.get("TileEditor_PaneTitle_Details"),i=this.scope.viewModel.tile,o=i.config&&i.config.widget;if(null==o||!i.isTemporary)return t;switch(o.id){case 1:return e.get("TileEditorPane_WebContentTitle");case 2:return e.get("TileEditorPane_ImageWidgetTitle");case 3:return e.get("TileEditorPane_TextboxTitle");case 4:return e.get("TileEditorPane_VideoWidgetTitle");default:return t}},t.prototype.getPinTileTelemetryEvent=function(){var t=this.scope.viewModel,i=t.tile.config,o=i&&i.visual?i.visual.visual:"",r=i&&i.widget?i.widget.name:"",a=t.tile.realTime;a&&(o=a.visual&&a.visual.type,r=l[l.realTime]);var n=this.services.telemetryService.startEvent(e.telemetry.DashboardPinTile,o,e.telemetry.PinTileSource.Widget,"",!1,"",!1,r,!1);return n},t.prototype.saveRealTimeTileContext=function(){var e=this.scope.viewModel.tile.realTime;this.restoreContext={singleVisualConfig:null,dataWindow:r};var t=e.singleVisualConfig;t&&(this.restoreContext.singleVisualConfig=n.clone(t));var i=e.config;i&&(this.restoreContext.dataWindow=i.dataWindow)},t.prototype.restoreRealTimeTileContext=function(){var e=this.scope.viewModel.tile,t=e.realTime;if(t.singleVisualConfig&&this.restoreContext){t.hideVisual&&(t.hideVisual=!1);var i=this.services;d.UpdateRealTimeTile(e,this.restoreContext.singleVisualConfig,this.restoreContext.dataWindow,this.scope.selectedModel,t.schema,i.pinVisual,i.visualPlugin,i.visualQueryGenerator,i.telemetryService)}},t.prototype.addPackageDetails=function(e){var t=this.scope.tileModel;if(t&&t.contract.tilePackage){var i=t.contract.tilePackage;e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_PakageId"),i.id.toString())),i.lastRefreshTime&&(e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_PakageLastRefreshTime"),a.convertRefreshTimeToJsDateTime(i.lastRefreshTime).toLocaleString())),null!=i.publishOrRefreshStatus&&e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_PakageLastRefreshStatus"),i.publishOrRefreshStatus.toString()))),i.NextRefreshTime&&e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_PakageNextRefreshTime"),a.convertRefreshTimeToJsDateTime(i.NextRefreshTime).toLocaleString())),i.contentProviderId&&e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_PakageContentProviderId"),i.contentProviderId.toString()))}},t.prototype.addModelDetails=function(e){var t=this.scope.selectedModel;t&&(e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_ModelId"),t.id.toString())),e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_ModelLastRefreshTime"),t.lastRefreshTimeInLocaleString)),null!=t.contract.lastRefreshStatus&&e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_ModelLastRefreshStatus"),t.contract.lastRefreshStatus.toString())),t.contract.nextRefreshTime&&e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_ModelNextRefreshTime"),a.convertRefreshTimeToJsDateTime(t.contract.nextRefreshTime).toLocaleString())),t.contract.lastTimeAModelChangeWasDetectedInTheCluster&&e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_ModelLastTimeAModelChangeWasDetectedInTheCluster"),a.convertRefreshTimeToJsDateTime(t.contract.lastTimeAModelChangeWasDetectedInTheCluster).toLocaleString())),t.contract.onPremModelConnectionString&&e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_ModelOnPremModelConnectionString"),t.contract.onPremModelConnectionString)),null!=t.contract.forcedRLS&&e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_ModelForcedRLS"),String(t.contract.forcedRLS))),null!=t.contract.directQueryMode&&e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_ModelDirectQueryMode"),String(t.contract.directQueryMode))),null!=t.contract.isRefreshedByContentProvider&&e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_ModelIsRefreshedByContentProvider"),String(t.contract.isRefreshedByContentProvider))))},t.prototype.addTileDetails=function(e){var t=this.scope.tileModel;e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_TileId"),t.id.toString()));var i=t.contract;if(i){i.errorCode&&e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_ErrorCode"),i.errorCode.toString()));var o=i.queryResultError;o&&(e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_ErrorId"),o.id.toString())),e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_ErrorType"),o.type.toString())),e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_ErrorDetail"),o.errorDetail)),e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_ErrorRequestActivityId"),o.rootActivityId))),i.queryHash&&e.append(InJs.InfoNavUtility.constructErrorField(this.services.localizationService.get("TileEditor_TechnicalDetails_QueryHash"),i.queryHash.toString()))}},t})();t.TileEditorController=p})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.models.TileFactory,o=e.dataServices.contracts.TileType,r=2,a=2,n=(function(){function t(e,t){this.scope=e,this.services=t,this.tileGroups=i.getTileGalleryGroups(),this.clearOutTemporaryTile()}return t.createOptions=function(){return{additionalServices:["modelConverter","telemetryService","dashboardService"]
}},t.prototype.closeTileGalleryPane=function(){this.selectedTile=null,this.scope.$emit(e.constants.hideTaskPaneSlider)},t.prototype.select=function(e){this.selectedTile=e},t.prototype.next=function(){var t=this.services,i=t.modelConverter.convertTile(this.selectedTile.defaultTileContract),n=e.dataServices.ContractUtils.getMasterLayoutPosition(i.contract);n.width=n.width||r,n.height=n.height||a;var s=o[i.type];t.telemetryService.logEvent(e.telemetry.DashboardWidgetSelected,s);var c={tile:i.contract,parentEvent:null,isTemporaryTile:!0,showNotification:!1};this.services.dashboardService.pinTileWithoutNotification(c)},t.prototype.clearOutTemporaryTile=function(){var e=this.services.dashboardService.getSelectedDashboardTile(),t=e&&e.tileModel;t&&t.isTemporary&&this.services.dashboardService.removeTemporaryTile(t)},t})();t.TileGalleryController=n})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.contracts.TileType,o=e.common.constants,r=(function(){function t(e,t){var i=this;this.tileRefreshRetryCount=0,this.scope=e,this.services=t,this.scope.viewModel.updateVisualInteractivityOptions("true"===e.allowInteractivity),this.onViewModelChanged();var r=e.$watch("viewModel",(function(){return i.onViewModelChanged()}));e.$on(o.visualDataChanged,(function(e){i.onVisualDataChanged(e)})),e.$on(o.scopeDestroyEventName,(function(){r()}))}return t.createOptions=function(){return{additionalServices:["dataProxy","localizationService","modelConverter","telemetryService","visualPlugin","modelService","featureSwitchService"]}},t.prototype.onViewModelChanged=function(){var t=this,i=this.scope,o=i.viewModel;if(o){this.initTileData();var r=o.contract,a=this.services.modelService.findModel(r.modelId,r.packageId),n=!!r.queryResultError,s=this.services.featureSwitchService.featureSwitches.selectiveRefreshEnabled,c=s&&!n&&o.isDataStale(a?a.lastRefreshEpochTime:void 0);this.shouldRefreshData(n,c)&&(this.tileRefreshRetryCount++,o.isLoading=!o.tileData.data,this.scope.$emit(e.constants.refreshTileData,o.contract.modelId),o.setDataLoadEventDelegate((function(){return t.services.telemetryService.startEvent(e.telemetry.DashboardLoadTileData,o.contract.id,o.contract.modelId)}))),o.setDependencies(this.services.dataProxy),e.tileDataRefreshWorker(this.scope,this.services.modelConverter,o),o.errorText=o.errorText||this.services.localizationService.get("Tile_ErrorText"),o.onErrorDelegate=function(){return t.onErrorChanged()};var l=o.visual&&o.visual.type;i.allowDeferredRendering=l&&!this.services.visualPlugin.isLightWeightRenderingVisual(l),o.onErrorDelegate(),o.shouldBeIncludedInTelemetryMeasurement=!(!o.tileData||!o.tileData.data||n)}},t.prototype.onErrorChanged=function(){var t=this.scope.viewModel;t&&t.isError?(this.services.telemetryService.logEvent(e.telemetry.DashboardTileError,i[i.composite],t.errorText),this.scope.$emit(o.tileErrorEventName,t.errorText,t.errorDetails)):this.scope.$emit(o.clearTileErrorEventName)},t.prototype.shouldRefreshData=function(e,i){if(this.tileRefreshRetryCount>=t.tileRefreshRetryMaxCount)return!1;if(e)return!1;var o=this.scope.viewModel;return!!o.tileData&&(!!o.requiresData()&&(!o.tileData.data||i))},t.prototype.initTileData=function(){var e=this.scope.viewModel;if(!e.tileData){var t=this.services;try{e.tileData=t.modelConverter.convertTileData(e.contract)}catch(i){e.isError=!0,e.errorText=t.localizationService.get("Tile_DsrParseErrorText")}}},t.prototype.onVisualDataChanged=function(e){e.stopPropagation();var t=this.scope.viewModel;this.scope.$emit(o.tileVisualLoadedEventName,t.contract.id)},t.tileRefreshRetryMaxCount=1,t})();t.CompositeTileController=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.constants,o=e.common.models.CollapsiblePaneExpandedWidth,r=e.dataServices.models.DashboardTileModel,a=jsCommon.EnumExtensions,n=e.common.contracts.Permissions,s=e.telemetry.PinTileSource,c=e.common.constants.TaskPaneCollapsiblePaneMode;!(function(e){e[e.delete=0]="delete",e[e.edit=1]="edit",e[e.inFocus=2]="inFocus"})(t.tileActions||(t.tileActions={}));var l=(t.tileActions,7),d=6,p=(function(){function t(t,o){var a=this;this.scope=t,this.services=o;var n=this.scope.viewModel;this.scope.isTileError=!1,this.scope.optionsMenuVisible=!1,t.inFocusState=o.inFocusService.getInFocusState(n),this.scope.model=new r(n),this.scope.editTile=function(e){return a.editTile(e)},this.scope.deleteTile=function(){return a.deleteTile()},this.scope.openTile=function(e,t){return a.openTile(e,t)},this.scope.showAlertsEditor=function(e){return a.showAlertsEditor(e)},this.scope.setOptionsMenuVisibility=function(e,t){return a.setOptionsMenuVisibility(e,t)},this.scope.pinTileFromDashboard=function(e){return a.pinTileFromDashboard(e)},this.scope.inFocusTile=function(e,t){return a.inFocusTile(e,t)},this.scope.isInsightsSupported=function(){return a.isInsightsSupported()},this.scope.openNotifications=function(e){return a.openNotifications(e)},this.scope.isReadOnly=function(){return a.isReadOnly()},this.scope.isNonActionable=function(){return a.isNonActionable()},this.scope.displayDashboardTileOptionsMenuVisible=function(){return a.displayDashboardTileOptionsMenuVisible()},this.scope.displayDashboardTileOpenOptions=function(){return a.displayDashboardTileOpenOptions()},this.scope.displayDashboardTileShowIcon=function(){return a.displayDashboardTileShowIcon()},this.scope.inEditMobileLayoutMode=function(){return a.inEditMobileLayoutMode()},this.scope.viewportContextSelector=this.scope.viewportContextSelector||i.dashboardSelector;var s=n.contract;n.setDatasetModelAndPackageInfo(this.services.modelService.findModel(s.modelId,s.packageId),this.services.packageService.findPackage(s.packageId)),this.scope.getOpenActionType=function(){return a.getOpenActionType()},this.scope.getOpenActionDescriptionText=function(){return a.getOpenActionDescriptionText()};var c=this.services.rootScope.$on(e.constants.setDashboardTileOptionsMenuVisibility,(function(e,t){a.updateOptionsMenu(e,t)}));this.scope.isModelTile=n&&n.model&&n.contract&&!n.contract.config,this.scope.isWorkbookTile=n&&n.workbook&&n.contract&&"number"==typeof n.contract.workbookId,this.scope.shouldShowPinButton=function(){return a.shouldShowPinButton()},this.scope.shouldShowAlertsButton=function(){return a.shouldShowAlertsButton()},this.scope.shouldShowInfocusButton=function(){return a.shouldShowInfocusButton()},this.scope.exportVisualData=function(e){return a.exportVisualData(e)};var l=this.services.exportData;l&&(this.scope.canExport=l.canExportTileData(n)),this.updateReportModel(n),this.isReportTile()&&this.setReportTileContext(n),this.scope.$on(i.scopeDestroyEventName,(function(){c()})),this.setInViewPort()}return t.createOptions=function(){return{additionalServices:["pinTileService","contentProviderHttpService","telemetryService","inFocusService","featureSwitchService","localizationService","reportService","modelService","packageService","workbookService","modelConverter","errorService","visualPlugin","userNotificationInfo","userNotificationTileFilterService","groupService","navigation","dashboardDataService","userInfo","dashboardService","auditing"],scopedDependencies:["exportData"]}},t.prototype.setInViewPort=function(){var t=this.scope.viewModel,i=e.dataServices.ContractUtils.getMasterLayoutPosition(t.contract);i&&(this.scope.inViewport=i.x+i.width<=l&&i.y+i.height<=d)},t.prototype.isReadOnly=function(){return!this.scope.canEdit||this.scope.disableInteractions},t.prototype.isNonActionable=function(){var e=this.scope.viewModel;return!e||!e.action||!e.action.action||this.scope.disableInteractions},t.prototype.displayDashboardTileOpenOptions=function(){var e=this.scope.viewModel;return this.scope.inViewport&&e&&!e.isTemporary&&!this.scope.disableInteractions&&!this.inEditMobileLayoutMode()},t.prototype.displayDashboardTileOptionsMenuVisible=function(){return this.scope.optionsMenuVisible&&!this.scope.disableInteractions},t.prototype.displayDashboardTileShowIcon=function(){return this.scope.disableInteractions},t.prototype.inEditMobileLayoutMode=function(){return this.services.dashboardDataService.InEditMobileLayoutMode},t.prototype.isReportTile=function(){var e=this.scope.viewModel;return e&&null!=e.reportTile},t.prototype.exportVisualData=function(t){t.stopPropagation(),this.scope.optionsMenuVisible=!1;var i=this.services,o=this.scope.viewModel,r=o.config&&o.config.visual&&o.config.visual.visual;this.scope.optionsMenuVisible=!1;var a=this.services.userInfo.isPremiumUser,n=o.contract&&o.contract.id,s=i.telemetryService.startEvent(e.telemetry.EXExportVisualData,r,e.telemetry.ExportVisualSource.Dashboard,!1,0,a,!1,0);this.services.exportData.exportTileDataToCsv(this.scope.viewModel).then((function(e){s.event.info.isPartialResult=e.isPartialResult,s.resolve()}),(function(e){s.reject({errorCode:e.error.toString()})})),this.services.auditing.auditEvent(n,e.common.contracts.AuditEntityType.Tile,e.common.contracts.AuditActivityType.exportDashboardTile)},t.prototype.shouldShowPinButtonForWorkbookTile=function(){var e=this.scope.viewModel,t=this.scope.isWorkbookTile&&e.config&&!e.config.workbookTile,i=!1;if(e.workbook&&e.workbook.contract){var o=this.services.workbookService.findWorkbook(e.workbook.contract.workbookId,e.workbook.contract.packageId);i=!o||!o.isOwner()}return!t&&!i},t.prototype.shouldShowPinButton=function(){var e=this.scope.viewModel,t=null!==this.scope.isModelTile&&this.scope.isModelTile;return!t&&!this.scope.isTileError&&(!e.workbook||this.shouldShowPinButtonForWorkbookTile())},t.prototype.updateReportModel=function(e){e&&e.report&&(e.report=this.services.reportService.findReport(e.report.id))},t.prototype.setReportTileContext=function(e){if(this.scope.isTileError=e.reportTile.isError,e.report&&e.action.action===i.openReportActionName){var t=this.services.reportService.findReport(e.report.id);t||this.services.reportService.addReport(e.report);var o=this.services.modelService.findModel(e.report.modelId);o||this.services.modelService.addContractModel(e.contractsModel)}},t.prototype.getOpenActionType=function(){var e=this.scope.viewModel;return e.action.action===this.tileActionCache?this.tileActionTypeCache:(this.updateTileActionProperties(),this.tileActionTypeCache)},t.prototype.getOpenActionDescriptionText=function(){var e=this.scope.viewModel;return e.action.action===this.tileActionCache&&null!=this.tileActionDescriptionCache?this.tileActionDescriptionCache:(this.updateTileActionProperties(),this.tileActionDescriptionCache)},t.prototype.updateTileActionProperties=function(){var e=this.scope.viewModel;this.tileActionCache=e.action.action,this.updateTileActionType(),this.updateTileActionText()},t.prototype.updateTileActionType=function(){var t=this.scope.viewModel;t.action.action===e.constants.openUrlActionName?this.tileActionTypeCache=0:t.action.action===i.openQnAActionName?this.tileActionTypeCache=1:t.action.action===i.openReportActionName&&!this.scope.isModelTile&&t.report?this.tileActionTypeCache=2:t.action.action===i.openReportActionName&&!t.report&&this.scope.isModelTile?this.tileActionTypeCache=4:t.action.action===i.openReportActionName&&(t.report||this.scope.isModelTile)?this.tileActionTypeCache=2:t.action.action===i.openWorkbookActionName&&t.workbook&&(this.tileActionTypeCache=3)},t.prototype.updateTileActionText=function(){var t=this.scope.viewModel;if(t.action.action===e.constants.openUrlActionName)this.tileActionDescriptionCache=t.action.targetUrl;else if(t.action.action===i.openQnAActionName)this.tileActionDescriptionCache=t.utterance;else if(t.action.action!==i.openReportActionName||this.scope.isModelTile)if(t.action.action===i.openReportActionName||t.action.action===e.constants.openInFocusTileActionName||t.action.action===i.openInsightsActionName){var o=null;t.contractsModel&&(o=this.services.modelService.findModel(t.contractsModel.id,t.contractsModel.packageId)),this.tileActionDescriptionCache=o?o.displayName:""}else if(t.action.action===i.openWorkbookActionName){var r=t.contract&&t.contract.workbookId,a=this.services.workbookService.findWorkbook(r);this.tileActionDescriptionCache=a?a.displayName:""}else t.action.action||(this.tileActionDescriptionCache=this.services.localizationService.get("TileMenuOption_NoAction"));else{var n=t.report&&t.report.objectId,s=this.services.reportService.findReportByGUID(n);this.tileActionDescriptionCache=s?s.displayName:""}},t.prototype.updateOptionsMenu=function(e,t){t!==this.scope.model.tileModel.id&&(this.scope.optionsMenuVisible=!1)},t.prototype.setOptionsMenuVisibility=function(t,i){i.stopPropagation(),this.scope.optionsMenuVisible=t,this.services.rootScope.$emit(e.constants.setDashboardTileOptionsMenuVisibility,this.scope.model.tileModel.id)},t.prototype.openTile=function(t,i){var o=this.scope.model.tileModel,r=o&&o.composite&&o.composite.isError;if(this.scope.disableInteractions||this.inEditMobileLayoutMode())return i&&i.preventDefault&&i.preventDefault(),!1;if(!t&&r)return!1;if(!t&&this.isReportTile())return!1;if(this.scope.optionsMenuVisible=!1,this.scope.isTileElementChanging())return!1;if(o.isLoading)return!1;if(i)try{var a=i,n=$(a.target||a.srcElement);if(n.is("a")&&!n.hasClass("dashboardTileLayout"))return!1}catch(e){}return this.scope.$emit(e.constants.openTileEventName,o),i&&i.stopPropagation&&i.stopPropagation(),!0},t.prototype.editTile=function(t){t&&t.stopPropagation&&t.stopPropagation(),this.scope.optionsMenuVisible=!1,this.scope.$emit(e.constants.showTileEditorEventName,this.scope.model)},t.prototype.deleteTile=function(){this.scope.optionsMenuVisible=!1,this.scope.$emit(e.constants.hideTileEditorEventName),this.scope.$emit(t.Events.DeleteTile),this.scope.$emit(e.constants.removeTileEventName,this.scope.model.tileModel)},t.prototype.pinTileFromDashboard=function(t){t.stopPropagation(),this.scope.optionsMenuVisible=!1;var i=this.services.contentProviderHttpService.getBuiltInContentProviders(),o=this.scope.model.tileModel,r=o.model,a=r?r.contentProviderId:void 0,n=e.common.findContentProviderName(i,a),c=o.contract.resourcePackageIds,l=!!(c&&c.length>0),d=o.config&&o.config.widget?o.config.widget.name:"",p=this.services.telemetryService.startEvent(e.telemetry.DashboardPinTile,o.composite?o.composite.visual.type:void 0,s.Dashboard,"",!1,n,l,d,!1);this.services.pinTileService.showPinVisualFromDashboardDialog(this.scope,o,p)},t.prototype.inFocusTile=function(e,t){e.stopPropagation(),this.scope.optionsMenuVisible=!1;var i=this.scope.model.tileModel;this.services.dashboardService.selectDashboardTile(this.scope.model);var o=i.objectId,r=i.contract.originalTileObjectId,a=this.services.groupService.activeGroupObjectId,n=this.services.dashboardDataService.activeDashboard.objectId,s=this.services.dashboardDataService.activeDashboard.contract.originalDashboardObjectId;t?this.services.navigation.showInsightsInFocusMode(o,r,n,a):this.services.navigation.showInFocusMode(o,r,n,s,a)},t.prototype.isInsightsSupported=function(){var e=this.scope.viewModel,t=e.datasetModel;return!e.workbook&&!e.realTime&&t&&!t.isHidden&&t.contract.insightsSupported&&a.hasFlag(t.getPermissions(),n.Read)},t.prototype.showAlertsEditor=function(t){t&&t.stopPropagation&&t.stopPropagation(),this.scope.optionsMenuVisible=!1,this.services.dashboardService.selectDashboardTile(this.scope.model),this.scope.$emit(e.constants.showTaskPaneSlider,c.AlertsEditor,o.Small)},t.prototype.shouldShowAlertsButton=function(){var t=this.scope.viewModel.datasetModel;if(!t||!this.services.dashboardService.isAlertingEnabled())return!1;var i=this.scope.viewModel.config;if(i&&i.visual){var o=i.visual.visual;return o===e.visuals.plugins.card.name||o===e.visuals.plugins.gauge.name||o===e.visuals.plugins.kpi.name}return!1},t.prototype.shouldShowInfocusButton=function(){return 1===this.scope.inFocusState&&this.services.dashboardService.isInFocusModeEnabled()},t.prototype.openNotifications=function(t){t&&t.stopPropagation&&t.stopPropagation();var i=this.scope.viewModel.contract.id,o=this.services.userNotificationInfo.userNotifications.notifications,r=_.filter(this.services.userNotificationTileFilterService.filterNotifications(o,i),(function(e){return!e.seen}));if(!_.isEmpty(r))for(var a=0,n=r;a<n.length;a++){var s=n[a];s.message.filterProperties&&s.message.filterProperties.UserDataAlertRuleId&&this.services.telemetryService.logEvent(e.telemetry.DataAlertsTileBadgeClicked,parseInt(s.message.filterProperties.UserDataAlertRuleId,10))}var c=this.services.featureSwitchService.featureSwitches;c.userNotificationsEnabled&&(this.services.userNotificationTileFilterService.tileId=i,this.services.userNotificationInfo.showPane=!0)},t.Events={DeleteTile:"DeleteTile"},t})();t.DashboardTileController=p})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t,i){this.scope=e,this.element=t,this.services=i}return e})();e.ImageTileController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t,i){this.scope=e,this.element=t,this.services=i}return e})();e.ModelTileController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){var i=this;this.scope=e,this.services=t,this.scope.openTile=function(){return i.openTile()}}return t.prototype.openTile=function(){var t=this.scope.viewModel;this.scope.$emit(e.constants.openProviderTileEventName,t)},t})();t.ProviderTileController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.contracts.TileType,o=e.explore.ScopeUtils,r=e.dataServices.models.TileFactory,a=e.explore.infonav.util.FilterUtil,n=(function(){function t(t,i){var r=this;this.scope=t,this.services=i,o.defineDataSourcesOnScopeLegacy(this.scope,this.services.dataSources);var a=this.services.viewModeState;a.setMode(0);var n=this.scope.$on(e.constants.populateDashboardWithReportTiles,(function(){r.populateReportTiles()}));this.services.undoRedo.setHandler({rollback:function(){},takeSnapshot:function(){return null}}),this.scope.$on("$destroy",(function(){n()})),this.populateReportTiles();var s={showAppBar:!1,showTaskPane:!1,showVisualizationPane:!1,showNavContentPane:!0,visualContainerOptions:{showMenu:!1,showPin:!1,showContextMenu:!1,disablePin:!1,hideHeader:!0},showBackButtonOnAppBar:!1};this.services.explorationCapabilities.setCapabilities(s)}return t.createOptions=function(){return{scopedDependencies:["dataSources","viewModeState","undoRedo","selection","visualPlugin","explorationNavigation","explorationCapabilities","shell"],scopedServiceRoot:!0,additionalServices:["conceptualSchemaProxy","promiseFactory","localizationService","modelService","reportService","modelConverter","pinTileService","reportTileService","resourcePackagesService","explorationSerializer","featureSwitchService","visualPlugin","telemetryService","esriExploration","esri"]}},t.prototype.populateExploration=function(e,i,o,r,a){var n=this;this.setDataSource(e,i);var s={withData:!0,withQuery:!0},c=this.services.explorationSerializer.deepCopyExploration(i,s),l=this.services.pinTileService.mapCanvasSize(c,o);this.applySectionParameterFilters(l,o,r,a);var d=t.getReferencedResourcePackages(l,o);this.services.esri.deleteEsriPlugin(this.services.visualPlugin),this.resolveExploration(d,l,o),this.services.esriExploration.esriVisualAllowed()&&this.services.esriExploration.explorationContractContainsEsriVisual(l)&&this.services.esri.reloadEsriExplorationContext(this.services.visualPlugin,this.scope,!0).then((function(e){n.resolveExploration(d,l,o)}))},t.prototype.resolveExploration=function(t,i,o){if(_.isEmpty(t))this.resolveExplorationWithoutResourcePackage(i,o);else{var r=this.scope.viewModel;this.services.telemetryService.logEvent(e.telemetry.DashboardRegisterAndLoadResourcePackagesForReportTiles,t.length,r&&r.contract?r.contract.id:-1,!0),this.resolveExplorationWithResourcePackages(t,i,o)}},t.prototype.applySectionParameterFilters=function(t,i,o,r){if(t&&t.sections){var n=e.explore.SectionUtils.findSectionIndexForSectionId(t,i),s=null!=n&&t.sections[n];if(s){a.mergeExplorationSectionFilters(t,s);var c=e.explore.PodUtils.findPodIndexForPodName(t,o),l=null!=c&&t.pods[c];a.applySectionParameterFilters(s,l,r)}}},t.prototype.resolveExplorationWithResourcePackages=function(e,t,i){var o=this;this.services.resourcePackagesService.registerPackages(e),this.services.visualPlugin.ensurePlugins(e,!1).finally((function(){o.resolveExplorationWithoutResourcePackage(t,i)}))},t.prototype.populateReportTiles=function(){var e=this,t=this.scope.viewModel;if(t.isError=!1,t&&t.contract){var o=t.contract;if(!o||o.type!==i.report)return;var r=this.services.modelConverter.convertTileConfig(o),a=o.reportId,n=this.services.reportService.findReport(a),s=o.sectionId;if(!n)return void this.setErrorText();var c=this.services.modelService.findModel(n.modelId,n.packageId);this.services.reportTileService.getExploration(a,s).then((function(t){var i=r&&r.reportTile&&r.reportTile.sectionId,o=t.sections;if(null==s&&null!=i&&null!=o&&i<o.length){var a=t.sections[i];if(!a)return void e.setErrorText();s=a.id}var n=null,l=null;if(r&&r.reportTile&&(n=r.reportTile.pod,r.reportTile.filters)){var d=[];l=e.services.explorationSerializer.deserializeFilterCollection(r.reportTile.filters,d,!1)}e.populateExploration(c.contract,t,s,n,l)}),(function(){return e.setErrorText()}))}},t.prototype.resolveExplorationWithoutResourcePackage=function(t,i){var o=this.scope.viewModel,a=t.sections,n=a.length,s=[];this.services.explorationNavigation.loadExploration(t);for(var c=0;c<n;c++)a[c].crossHighlight=void 0,s[c]={contract:a[c],selected:!0,displayName:a[c].displayName};if(void 0===i)return void this.setErrorText();var l=e.explore.SectionUtils.findSectionById(t,i);if(!l)return void this.setErrorText();this.services.explorationNavigation.goto(l);for(var d=new e.explore.viewModels.ExploreCanvas(l),p=jsCommon.ArrayExtensions.createWithId(),u=l.visualContainers.length,c=0;c<u;c++){var v=e.explore.viewModels.ViewModelFactory.convertVisualContainer(t,d.contract,l.visualContainers[c],0);v.allowDeferredRendering=!0,v.options=this.services.explorationCapabilities.getCapabilities().visualContainerOptions,p.push(v)}d.visualContainers=p,o.exploration={contract:t,exploreCanvas:d,sections:s},o.isLoading=r.isTileLoading(o.contract)},t.prototype.setDataSource=function(e,t){var i=t.dataSources.withId(e.id);i||(i={type:"dsr",id:e.id,name:void 0,dsr:{schemaName:void 0,vsName:e.vsName,dbName:e.dbName,modelId:e.id}},t.dataSources.push(i));var o=t.dataSources;this.services.dataSources.set(o)},t.prototype.setErrorText=function(){var e=this.scope.viewModel;e.isError=!0,e.errorText=this.services.localizationService.get("ReportTile_DataUnavailable")},t.getReferencedResourcePackages=function(e,i){var o=t.getReferencedVisualsInSection(e,i);if(!_.isEmpty(o))return _.filter(e.resourcePackages,(function(e){return 0===e.type&&o[e.name]}))},t.getReferencedVisualsInSection=function(e,t){var i=e.sections,o={};if(_.isEmpty(i))return o;for(var r=0,a=i;r<a.length;r++){var n=a[r];if(n.id===t){_.map(n.visualContainers,(function(e){var t=e&&e.config&&e.config.singleVisual&&e.config.singleVisual.visualType;_.isEmpty(t)||(o[t]=!0)}));break}}return o},t})();t.ReportTileController=n})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t,i){this.scope=e,this.element=t,this.services=i}return e})();e.SsrsTileController=t})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=jsCommon.UrlUtils,o=(function(){function t(e,t){var i=this;this.scope=e,this.services=t,this.scope.workbookTileUrl=this.workbookTileUrl,this.scope.workbookTileImageUrl=this.workbookTileImageUrl,this.scope.useLiveEwaControl=this.services.featureSwitchService.featureSwitches.liveWorkbookTiles;var o=this.scope.$watch("viewModel.tileModel.size",(function(){return i.services.workbookService.setModelDynamicImageUrl(i.scope.viewModel)}),!0),r=this.scope.$watch("viewModel",(function(){return i.services.workbookService.setModelDynamicImageUrl(i.scope.viewModel)}));this.scope.$on("$destroy",(function(){o(),r()})),this.initWorkbookTile()}return t.createOptions=function(){return{additionalServices:["workbookService","featureSwitchService"]}},t.prototype.constructWorkbookWopiUrl=function(e,t){if(this.scope.viewModel.contract.$config.workbookTile){var i=e.replace(/ExcelJs.ashx/i,"xlEmbed.aspx");return i=i+"&access_token="+t+"&item="+this.scope.viewModel.contract.$config.workbookTile.item+"&action=embedView"}return""},t.prototype.shouldPreparePreviewImage=function(){return!this.scope.viewModel.previewImageUrl&&!this.scope.viewModel.image&&!this.scope.viewModel.hasImages()},t.prototype.initWorkbookTile=function(){var t=this;this.scope.viewModel.isLoading=!0,this.shouldPreparePreviewImage()&&this.services.workbookService.getWorkbookTilePreviewImageUrl(this.scope.viewModel.contract).then((function(i){var o=i.indexOf("?")===-1?"?":"&";t.scope.viewModel.previewImageUrl=i+o+(new Date).getTime(),t.services.workbookService.setModelDynamicImageUrl(t.scope.viewModel),t.scope.onTileImageReady((function(i){t.scope.viewModel.isLoading=!1;var o=e.dataServices.ContractUtils.getMasterLayoutPosition(t.scope.viewModel.contract);o.width=Math.min(e.common.models.gridLayoutConstants.gridDefaultCols,e.common.GridLayoutConstants.getDefaultColSpanFromWidth(i.width)),o.height=Math.min(e.common.models.gridLayoutConstants.gridMaxRowSpan,e.common.GridLayoutConstants.getDefaultRowSpanFromHeight(i.height))}))})),this.scope.useLiveEwaControl&&this.services.workbookService.getWorkbookEmbedAccessData(this.scope.viewModel.contract.workbookId,this.scope.viewModel.contract.packageId).then((function(e){if(e&&i.isValidUrl(e.url)){var o=t.constructWorkbookWopiUrl(e.url,e.accessToken);t.scope.workbookTileUrl=t.services.sce.trustAsResourceUrl(o)}}))},t})();t.WorkbookTileController=o})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.constants,o=e.dataServices.models.Tile,r=e.models.factory.TileOptionsFactory,a=e.dataServices.TileUtils,n=e.dataServices.contracts.TileType,s=(function(){function t(t,o){var r=this;this.scope=t,this.services=o,this.model=t.viewModel,this.tileId="tile"+this.model.id,this.updateTileHref(),this.scope.hasWarning=function(){return r.hasWarning()},this.scope.shouldShowTileVisual=function(){return r.shouldShowTileVisual()},this.scope.$watchCollection("viewModel.action",(function(){return r.updateTileHref()}));var a=this.services.rootScope.$on(i.reportDeletedEventName,(function(e,t){r.model.report&&r.model.report.id===t&&(r.model.report=null)}));this.scope.$on(e.common.constants.scopeDestroyEventName,(function(){a()})),this.updateModelTileHeaderSize(),this.scope.$root.$on(e.common.constants.needStrategySwapEventName,(function(){r.updateModelTileHeaderSize()})),this.scope.$on(e.common.constants.tileErrorEventName,(function(t,i,o){r.scope.isError=!0,r.scope.errorText=i,r.scope.errorDetails=o,r.model.resetTileErrors=function(){r.scope.isError=!1},r.scope.$emit(e.constants.dashboardTileErrorEventName,r.model,o)})),this.scope.$on(e.common.constants.clearTileErrorEventName,(function(t){var i=r.scope.errorDetails;r.scope.isError&&i&&r.scope.$emit(e.constants.removeDashboardTileErrorEventName,r.model,i),r.model.resetTileErrors&&r.model.resetTileErrors()})),this.services.rootScope.$on(e.constants.rowLevelSecurityAccessDeniedEventName,(function(e,t){r.model.composite&&_.find(t,(function(e){return r.scope.viewModel.contract.modelId===e}))&&(r.scope.isError=!0,r.scope.errorText=r.services.localizationService.get("Tile_RLS_NoAccess"),r.model.composite.tileData.data=null,r.model.resetTileErrors=function(){r.scope.isError=!1})})),this.scope.getUnseenCount=function(){return r.getUnseenCount()},this.scope.getIcons=function(){return r.getIcons()},this.scope.getWebContentIcon=function(){return r.getWebContentIcon()},this.scope.onIconClick=function(e,t){return r.onIconClick(e,t)}}return t.createOptions=function(){return{additionalServices:["localizationService","userInfo","visualPlugin","dashboardDataService","modelService","userNotificationInfo","featureSwitchService","userNotificationTileFilterService","displayTileErrorService","errorService","gridLayout"],scopedDependencies:["scriptVisuals"]}},t.prototype.updateTileHref=function(){this.model.intraDomainNavigationParameters=null;var t=this.model.action;t.action===e.constants.openUrlActionName&&o.isValidUrl(t.targetUrl)?this.scope.$emit(e.constants.updateTileHrefEventName,this.model,t.targetUrl):this.model.href=void 0},t.prototype.hasLostReportConnection=function(){var t="bingSocial",i=this.scope.viewModel,o=i.action;return i.type===n.composite&&o&&!(o.action&&o.action===e.common.constants.openQnAActionName)&&(!o.action||o.action===e.common.constants.openReportActionName&&!i.report)&&i.contract.name!==t&&!i.config.widget},t.prototype.hasWarning=function(){var e=this.services.visualPlugin,t=this.services.userInfo,i=this.scope.viewModel;if(this.scope.isError&&this.shouldShowTileVisual()){var o=i.composite;return this.scope.warning={tooltip:this.services.localizationService.format("DashboardAppBar_TileError_ErrorTooltip",[o.errorText])},!0}if(a.tileContainsScriptVisuals(this.scope.viewModel,e)){if(this.services.scriptVisuals.shouldBlockScriptVisual()){var r=t&&!Array.isArray(t)&&t.isPremiumUser;return this.scope.warning={tooltip:r&&this.services.localizationService.get("Tile_RVis_RefreshDisabled")||this.services.localizationService.get("Tile_RVis_RefreshDisabledForNonPro")},!0}}else{if(this.hasLostReportConnection())return this.scope.warning={tooltip:this.services.localizationService.get("Tile_LoseReportConnection")},!0;if(this.scope.viewModel.errorCode)return this.scope.warning={tooltip:this.model.details.getErrorLocId(this.model.errorCode,this.services.localizationService)},!0}return!1},t.prototype.getUnseenCount=function(){var e=this.services.featureSwitchService.featureSwitches,t=this.scope.viewModel.contract.id,i=this.services.userNotificationInfo;if(!e.userNotificationsEnabled||!t||!i||!i.userNotifications||_.isEmpty(i.userNotifications.notifications))return 0;var o=i.userNotifications.notifications,r=_.filter(this.services.userNotificationTileFilterService.filterNotifications(o,t),(function(e){return!e.seen}));return r.length},t.prototype.onIconClick=function(e,t){t.stopPropagation();var i=this.scope;switch(e.action){case 0:this.scope.headerClickTarget({event:t,openNotification:!0});break;case 2:this.services.displayTileErrorService.iconClicked({message:e.tooltip()});break;case 1:this.services.displayTileErrorService.iconClicked({isError:i.isError,errorTitle:i.errorText,errorDetails:i.errorDetails,message:e.tooltip()})}},t.prototype.getIcons=function(){var t=this;if(this.icons)return this.icons;var i={badgeTextSetter:this.getUnseenCount.bind(this),localizationService:this.services.localizationService,showNotifications:function(){return t.getUnseenCount()>0},showWarning:this.hasWarning.bind(this),showWebContent:function(){var e=t.scope.viewModel;return e&&e.type===n.iframe&&!e.isTemporary&&e.hasTitle()},showRealTime:function(){var e=t.scope.viewModel;return e&&e.type===n.realTime},warningToolTipSetter:function(){return t.scope.warning&&t.scope.warning.tooltip}};return this.icons=r.getDashboardTileIcons(i),i.showWarning()&&this.scope.$emit(e.constants.dashboardTileErrorEventName,this.model,{message:i.warningToolTipSetter(),displayableErrorInfo:[]}),this.icons},t.prototype.getWebContentIcon=function(){return _.find(this.getIcons(),(function(e){return 2===e.action}))},t.prototype.shouldShowTileVisual=function(){var e=this.scope.viewModel,t=e.composite,i=e.realTime,o=!!(t&&t.tileData&&t.tileData.data),r=!!(i&&i.visual&&i.visual.data);return o||r},t.prototype.updateModelTileHeaderSize=function(){
var e=1;this.services.gridLayout.strategy.isDynamic()||this.services.dashboardDataService.InEditMobileLayoutMode?e=2:this.scope.largeHeader&&(e=0),this.model.setTileHeaderSize(e)},t})();t.Tile=s})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(e,t){var i=this;this.scope=e,this.services=t,this.scope.loadUserMetadata=function(){return i.loadUserMetadata()},this.scope.loadUserMetadata()}return t.createOptions=function(){return{additionalServices:["groupService","featureSwitchService","userInfo"]}},t.prototype.loadUserMetadata=function(){this.scope.viewModel.userName=e.session.UserInfoUtils.getFullName(),this.services.groupService.activeGroup?(this.scope.viewModel.activeGroup=this.services.groupService.activeGroup,this.scope.viewModel.isMyWorkspace=this.scope.viewModel.activeGroup.isMyWorkspace):this.scope.viewModel.isMyWorkspace=!0,this.scope.viewModel.isPremiumUser=this.services.userInfo.isPremiumUser,this.scope.viewModel.userHasFreeTrial=this.services.userInfo.userHasFreeTrial,this.scope.viewModel.userHasPremiumPlan=this.services.userInfo.userHasPremiumPlan},t})();t.UserGroupHeaderController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t,i){this.scope=t,this.services=i,t.userName=e.session.UserInfoUtils.getFullName()}return t})();t.UserInfoController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t,i){var o=this;this.scope=t,this.services=i,this.scope.editContentPack=function(e){return o.editContentPack(e)},this.scope.deleteContentPack=function(e){return o.deleteContentPack(e)},this.scope.contentPacks=this.services.contentPackService.contentPacks,this.scope.userGroupHeader=new e.models.UserGroupHeaderModel}return t.createOptions=function(){return{additionalServices:["errorService","navigation","promiseFactory","telemetryService","localizationService","contentPackService"]}},t.prototype.editContentPack=function(e){this.services.navigation.showPublishContentPackSlider(e)},t.prototype.deleteContentPack=function(e){this.services.contentPackService.deleteContentPack(e)},t})();t.ViewContentPack=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t,i){var o=this;this.scope=t,this.services=i,this.scope.onYesClick=function(){return o.scope.viewModel.onButtonClick(e.models.WarningBarResult.Yes)},this.scope.onNoClick=function(){return o.scope.viewModel.onButtonClick(e.models.WarningBarResult.No)},this.scope.onFixItClick=function(){return o.scope.viewModel.onButtonClick(e.models.WarningBarResult.FixIt)}}return t})();t.WarningBarController=i})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.helpers.ModelConverterHelper,o=e.dataServices.constants.workbook,r="WorkbookAppBar_DataRefreshNotSupported_LocalFile_Tooltip",a="WorkbookAppBar_DataRefreshNotSupported_SharedWorkbooks_Tooltip",n="WorkbookAppBar_DataRefreshNotSupported_NoModel_Tooltip",s="WorkbookAppBar_DataRefreshNotSupported_PowerPivotVersion_Tooltip",c="WorkbookAppBar_DataRefreshNotSupported";!(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure",e[e.NotSupported=2]="NotSupported",e[e.MissingData=3]="MissingData"})(t.DataRefreshStatus||(t.DataRefreshStatus={}));var l,d=t.DataRefreshStatus;!(function(e){e[e.Supported=0]="Supported",e[e.NotSupportedNotOwned=1]="NotSupportedNotOwned",e[e.NotSupportedLocalWorkbook=2]="NotSupportedLocalWorkbook",e[e.NotSupportedNoModel=3]="NotSupportedNoModel",e[e.NotSupportedPowerPivotOldVersion=4]="NotSupportedPowerPivotOldVersion"})(l||(l={}));var p;!(function(e){e[e.Supported=0]="Supported",e[e.NotSupportedNotOwned=1]="NotSupportedNotOwned",e[e.NotSupportedLocalWorkbook=2]="NotSupportedLocalWorkbook",e[e.NotSupportedNotLoaded=3]="NotSupportedNotLoaded",e[e.StatusNotKnown=4]="StatusNotKnown"})(p||(p={}));var u=(function(){function t(e,t){var i=this;this.scope=e,this.services=t,this.model=this.scope.viewModel,this.services.localizationService.ensureLocalization((function(){i.bindMenuActions()}))}return t.createOptions=function(){return{additionalServices:["localizationService","featureSwitchService","modelService","historyDialogService","packageService","telemetryService"]}},t.prototype.isEditEnabled=function(){return this.model.workbook&&this.getEditSupportedStatus(this.model.workbook)===p.Supported},t.prototype.isWorkbookLoaded=function(){return this.model&&this.model.workbookLoaded},t.prototype.bindMenuActions=function(){var e=this,i=this.scope,o=t.WorkbookAppBarActions;i.editMenuActions=[{text:this.services.localizationService.get("WorkbookAppBar_EditInExcel"),description:this.services.localizationService.get("WorkbookAppBar_EditInExcelDescription"),action:o.EditInExcel,itemClass:"editInExcel",type:DropDownMenuItemType.Item},{text:this.services.localizationService.get("WorkbookAppBar_EditInExcelOnline"),description:this.services.localizationService.get("WorkbookAppBar_EditInExcelOnlineDescription"),action:o.EditInExcelOnline,itemClass:"editInExcelOnline",type:DropDownMenuItemType.Item}],i.dataMenuActions=[{text:this.services.localizationService.get("WorkbookAppBar_Calculate"),description:this.services.localizationService.get("WorkbookAppBar_CalculateDetails"),action:o.Calculate,itemClass:"calculate",type:DropDownMenuItemType.Item}],i.editMenuActionSelected=function(t){return e.onEditMenuActionSelected(t)},i.dataMenuActionSelected=function(t){return e.onDataMenuActionSelected(t)},i.pinClicked=function(){return e.pinClicked()},i.reloadClicked=function(){return e.reloadClicked()},i.isPinToDashboardEnabled=function(){return e.isPinToDashboardEnabled()},i.getPinButtonTooltipLocId=function(){return e.getPinButtonTooltipLocId()},i.isWorkbookLoaded=function(){return e.isWorkbookLoaded()},i.isEditEnabled=function(){return e.isEditEnabled()},i.getEditButtonTooltipLocId=function(){return e.getEditButtonTooltipLocId()},i.getRefreshDataStatus=function(){return e.updateLastRefreshInformationAndGetStatus()}},t.prototype.onEditMenuActionSelected=function(e){var i=t.WorkbookAppBarActions;switch(e.action){case i.EditInExcelOnline:this.EditInExcelOnline();break;case i.EditInExcel:this.EditInExcel()}},t.prototype.onDataMenuActionSelected=function(e){var i=t.WorkbookAppBarActions;switch(e.action){case i.Calculate:this.CalculateClicked()}},t.prototype.CalculateClicked=function(){this.services.telemetryService.logEvent(e.telemetry.DashboardCalculateWorkbook),this.scope.$emit(t.Events.CalculateWorkbookClicked)},t.prototype.EditInExcelOnline=function(){this.scope.$emit(t.Events.EditInExcelOnlineClicked)},t.prototype.EditInExcel=function(){this.scope.$emit(t.Events.EditInExcelClicked)},t.prototype.pinClicked=function(){this.scope.$emit(t.Events.PinClicked)},t.prototype.reloadClicked=function(){this.services.telemetryService.logEvent(e.telemetry.DashboardReloadWorkbook),this.scope.$emit(t.Events.ReloadClicked)},t.prototype.getDataRefreshSupportStatus=function(e){return e.isOwner()?e.contract.modelId?e.contract.isPowerPivotVersionSupportsRefresh?l.Supported:l.NotSupportedPowerPivotOldVersion:l.NotSupportedNoModel:l.NotSupportedNotOwned},t.prototype.getEditSupportedStatus=function(e){return this.model.workbookLoaded&&e.isEditable()?p.Supported:this.model.workbookLoaded?e.isOwner()?this.services.packageService.isLocalWorkbook(e.packageId)?p.NotSupportedLocalWorkbook:p.StatusNotKnown:p.NotSupportedNotOwned:p.NotSupportedNotLoaded},t.prototype.isPinToDashboardEnabled=function(){return this.model.workbook.isOwner()&&this.isWorkbookLoaded()},t.prototype.getPinButtonTooltipLocId=function(){return this.model.workbookLoaded?this.model.workbook.isOwner()?this.model.workbookChanged?"WorkbookAppBar_PinTooltip_Disabled_WorkbookChanged":this.model.workbookRangeSelected?"WorkbookAppBar_PinTooltip_Enabled":"WorkbookAppBar_PinTooltip_Disabled_NoSelection":"WorkbookAppBar_PinTooltip_NotOwner":""},t.prototype.getEditButtonTooltipLocId=function(){var e,t=this.getEditSupportedStatus(this.model.workbook);switch(t){case p.Supported:e="";break;case p.NotSupportedNotLoaded:e="";break;case p.NotSupportedLocalWorkbook:e="WorkbookAppBar_EditToolTip_NotEditable_Local";break;case p.NotSupportedNotOwned:e="WorkbookAppBar_EditToolTip_NotEditable_NotOwned";break;case p.StatusNotKnown:e=""}return e},t.prototype.updateLastRefreshInformationAndGetStatus=function(){if(!this.model||!this.model.workbook)return d.MissingData;var t=this.getDataRefreshSupportStatus(this.model.workbook);if(t!==l.Supported){var i=void 0;switch(t){case l.NotSupportedLocalWorkbook:i=r;break;case l.NotSupportedNotOwned:i=a;break;case l.NotSupportedNoModel:i=n;break;case l.NotSupportedPowerPivotOldVersion:i=s;break;default:i=""}return this.scope.refreshNotSupportedTooltip={tooltipLocalizeDescription:i,tooltipArrowPosition:e.common.ArrowPosition.arrowTopLeft},this.scope.refreshInformationText=this.services.localizationService.get(c),d.NotSupported}var o=this.services.modelService.findModel(this.model.workbook.modelId,this.model.workbook.packageId);return o?this.getLastRefreshText(o.contract):d.MissingData},t.prototype.getLastRefreshText=function(t){var o,r,a=this;if(t.lastRefreshStatus===e.common.contracts.PublishOrRefreshStatus.RefreshError){o=this.services.localizationService.get("WorkbookAppBar_LastDataRefreshFailed"),r=d.Failure;var n={};n.dataset=i.convertModelToDataset(t),this.scope.showRefreshHistory=function(){return a.services.historyDialogService.showHistoryDialog(n)}}else if(t.lastRefreshStatus===e.common.contracts.PublishOrRefreshStatus.PublishError)r=d.MissingData,o="";else{var s=i.convertRefreshTimeToJsDateTime(t.lastRefreshTime);r=d.Success,o=this.services.localizationService.format("WorkbookAppBar_LastDataRefreshSucceded",[""+s.toLocaleString()])}return this.scope.refreshInformationText=o,r},t.WorkbookAppBarActions={Calculate:"Calculate",EditInExcel:"EditInExcel",EditInExcelOnline:"EditInExcelOnline",Pin:"Pin",Reload:"Reload"},t.Events={PinClicked:o.pinClickedEventName,EditInExcelOnlineClicked:o.editInExcelOnlineClickedEventName,EditInExcelClicked:o.editInExcelClickedEventName,CalculateWorkbookClicked:o.calculateWorkbookClickedEventName,ReloadClicked:o.reloadExcelWorkbookEventName},t})();t.WorkbookAppBarController=u})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.EwaNamedItemType,o=e.dataServices.contracts.TileType,r=e.dataServices.constants,a=(function(){function e(e,t,i){this.workbook=e,this.range=t,this.promiseFactory=i}return e.prototype.getTileData=function(){return this.getTileDataDeferred=this.promiseFactory.defer(),this.verifyIntersections(0),this.getTileDataDeferred.promise},e.prototype.verifyIntersections=function(e){var t=this,o=this.workbook.getNamedItems();if(e>=o.getCount()){var r={elementName:this.range.getAddressA1(),elementRange:this.range.getAddressA1(),smartSelection:!1,sheetName:this.range.getSheet().getName()};return void this.getTileDataDeferred.resolve(r)}var a=o.getItem(e),n=a.getNamedItemType();return n!==i.NamedRange&&n!==i.Table&&n!==i.PivotTable?void this.verifyIntersections(e+1):void a.getRefersToRangeAsync((function(e){return t.verifyNamedItemIntersection(e)}),e)},e.prototype.verifyNamedItemIntersection=function(e){var t=e.getReturnValue(),i=e.getUserContext();if(this.rangesIntersect(this.range,t)){var o={elementName:this.workbook.getNamedItems().getItem(i).getName(),elementRange:t.getAddressA1(),smartSelection:!0,namedItemType:this.workbook.getNamedItems().getItem(i).getNamedItemType(),sheetName:this.workbook.getActiveSheet().getName()};return void this.getTileDataDeferred.resolve(o)}this.verifyIntersections(i+1)},e.prototype.rangesIntersect=function(e,t){return null!=e&&null!=t&&(e.getSheet()===t.getSheet()&&e.getRow()===t.getRow()&&e.getRowCount()===t.getRowCount()&&e.getColumn()===t.getColumn()&&e.getColumnCount()===t.getColumnCount())},e})(),n=(function(){function e(e,t,i){this.workbook=e,this.item=t,this.promiseFactory=i}return e.prototype.getTileData=function(){var e=this,t=this.promiseFactory.defer(),o=this.item.getNamedItemType();if(o===i.NamedRange||o===i.Table||o===i.PivotTable)this.item.getRefersToRangeAsync((function(i){var r=i.getReturnValue(),a={elementName:e.item.getName(),elementRange:r.getAddressA1(),smartSelection:!1,namedItemType:o,sheetName:r.getSheet().getName()};t.resolve(a)}),void 0);else{var r={elementName:this.item.getName(),elementRange:this.workbook.getActiveSheet().getRange(0,0,1,1).getAddressA1(),smartSelection:!1,namedItemType:o,sheetName:this.workbook.getActiveSheet().getName()};t.resolve(r)}return t.promise},e})(),s=(function(){function i(t,o){var r=this;this.scope=t,this.services=o,this.scope.appBarArgs={selection:null},this.resetSelectionArgs(),this.unsubscribeList=[],this.subscribeToAppBarEvents(),this.setWorkbookAppBarIfNeeded(),this.scope.isEmbeddedWorkbookReady=!1,this.scope.embeddedWorkbookFailed=!1,this.scope.isEmbeddedWorkbookDataReady=!1,this.scope.dismissToast=function(){e.models.WorkbookContainer.DiscoverabilityToastDismissed=!0;var t=r.services.telemetryService.startEvent(e.telemetry.DashboardWorkbookPinabilityShown);r.services.tutorialDataStore.setKey(i.WorkbookPinToastShown,!0,t),r.scope.viewModel.showDiscoverabilityToast=!1},this.scope.showPinDashboardDialog=function(){return r.showPinDashboardDialog()};var a;this.services.groupService.groupSwitchPromise().then((function(){r.services.workbookService.ensureWorkbookInitialization().then((function(){r.navigateToWorkbookPage(),a=r.scope.$on(e.common.constants.navigation.stateChangeSuccess,(function(e,t,i,o,a){return r.handleStateChange(t,i,o,a)}))}))})),this.scope.$on("$destroy",(function(){r.unsubscribeToAppBarEvents(),a&&a()}))}return i.createOptions=function(){return{additionalServices:["$rootScope","$window","contentProviderHttpService","dashboardHttpService","dashboardService","errorService","featureSwitchService","groupService","localizationService","modelConverter","mostRecentlyUsedService","navigation","notificationToast","packageService","permissionService","pinTileService","promiseFactory","telemetryService","tutorialDataStore","workbookService"]}},i.prototype.handleStateChange=function(t,i,o,r){t.name===e.common.constants.navigation.states.workbook&&this.navigateToWorkbookPage()},i.prototype.resetSelectionArgs=function(){this.scope.appBarArgs.selection=void 0},i.prototype.navigateToWorkbookPage=function(){var t,i=this.services.navigation.currentWorkbookURLIdentifier;if(t=this.services.workbookService.findWorkbookByEtagHash(i),t||(t=this.services.workbookService.findWorkbookByUniqueId(i)),!t)return this.services.mostRecentlyUsedService.removeMRU(i),e.helpers.ArtifactNotFoundHelper.showArtifactDoesNotExistDialog("ArtifactKind_Workbook",this.services.errorService,this.services.localizationService,this.services.telemetryService),void this.services.navigation.navigateToContentListOrActiveDashboard();this.scope.$emit(r.workbook.bindToExcelWorkbookEventName,t),this.services.mostRecentlyUsedService.updateMRU(e.models.MRUArtifactType.Workbooks,t.uniqueId,t.displayName,t.getPermissions());var o=this.services.navigation.currentWorkbookActiveSelection;this.onLoadExcelWorkbook(t,o)},i.prototype.subscribeToAppBarEvents=function(){var i=this,o=this.scope,r=o.$on(t.WorkbookAppBarController.Events.PinClicked,(function(e){return i.pinButtonResponse()}));this.unsubscribeList.push(r);var a=o.$on(t.WorkbookAppBarController.Events.EditInExcelOnlineClicked,(function(e){return i.openWorkbookInExcelOnline()}));this.unsubscribeList.push(a);var n=o.$on(t.WorkbookAppBarController.Events.EditInExcelClicked,(function(e){return i.openWorkbookInExcel()}));this.unsubscribeList.push(n);var s=this.services.rootScope.$on(e.constants.groupSwitchedEventName,(function(){return i.setWorkbookAppBarIfNeeded()}));this.unsubscribeList.push(s);var c=this.services.rootScope.$on(t.WorkbookAppBarController.Events.CalculateWorkbookClicked,(function(){return i.calculateWorkbook()}));this.unsubscribeList.push(c);var l=this.services.rootScope.$on(t.WorkbookAppBarController.Events.ReloadClicked,(function(){return i.onLoadExcelWorkbook(i.scope.viewModel.workbook,null)}));this.unsubscribeList.push(l)},i.prototype.unsubscribeToAppBarEvents=function(){var e=-1,t=this.unsubscribeList.length;if(t){for(e=t;t;)this.unsubscribeList[--t]();this.unsubscribeList.splice(0,e)}},i.prototype.embedWorkbook=function(t,o,r){var a=this,n=this.scope.viewModel.workbook.contract,s=!!n.modelId;this.services.workbookService.embedWorkbook(n.etagHash,this.scope.getEwaTargetWindow(),t.url,t.accessToken,t.accessTokenTtl,this.services.packageService.getWorkbookStorageProvider(n.packageId),this.services.packageService.getWorkbookContentProvider(n.packageId),n.permissions,s,o).then((function(t){a.scope.isEmbeddedWorkbookReady=!0,t.ewaControl&&(e.models.WorkbookContainer.DiscoverabilityToastDismissed=a.services.tutorialDataStore.hasKey(i.WorkbookPinToastShown),a.scope.viewModel.showDiscoverabilityToast=a.scope.workbookAppBarIncluded,a.onEwaApplicationReady(t)),r.resolve()}),(function(){r.reject(),a.scope.viewModel.workbook=null,a.scope.embeddedWorkbookFailed=!0}))},i.prototype.onWopiDataError=function(t,i){var o=this.services.$window,r=this.services.telemetryService,a=this.services.navigation;this.services.errorService.error(this.services.localizationService.get("Workbook_FailToEmbedWorkbookMessage"),"Workbook_FailToEmbedWorkbook",{title:this.services.localizationService.get("Workbook_FailToEmbedWorkbookTitle"),dismissCallback:function(n){"openInXL"===n&&(r.logChildEvent(i,e.telemetry.DashboardWorkbookViewedExternallyDueToAnError,t.contract.etagHash),o.open(t.viewUrl,"_blank")),a.navigateBack()},dialogOptions:[{label:this.services.localizationService.get("Workbook_FailToEmbedWorkbookActionOpenInExcel"),resultValue:"openInXL"},{label:this.services.localizationService.get("PowerViewError_Close"),resultValue:"close"}]})},i.prototype.ensureExpressionApplied=function(e){var t=this,i=this.services.promiseFactory.defer();return this.services.timeout((function(){var o=e();t.services.timeout((function(){i.resolve(o)}),0,!1)})),i.promise},i.prototype.getWopiAccessData=function(e,t){return this.services.workbookService.getWorkbookEmbedAccessData(e.id,e.packageId,t)},i.prototype.loadExcelWorkbook=function(t,i){var o=this,r=this.services.telemetryService,a=r.startEvent(e.telemetry.DashboardViewWorkbook,t.contract.etagHash,t.getPermissions(),this.services.packageService.getWorkbookStorageProvider(t.packageId),this.services.packageService.getWorkbookContentProvider(t.packageId));this.getWopiAccessData(t,a.event).then((function(e){o.ensureExpressionApplied((function(){o.scope.isEmbeddedWorkbookDataReady=!0})).then((function(){o.embedWorkbook(e,i,a)}))}),(function(){o.onWopiDataError(t,a.event),o.scope.viewModel.workbook=null,a.reject()}))},i.prototype.setWorkbookAppBarIfNeeded=function(){this.scope.workbookAppBarIncluded=!this.services.permissionService.isActiveWorkspaceIsReadOnly},i.prototype.calculateWorkbook=function(){this.workbook.recalcAsync()},i.prototype.onLoadExcelWorkbook=function(e,t){var i=this;this.resetSelectionArgs(),this.scope.viewModel.workbook=e,this.scope.viewModel.workbookRangeSelected=!1,this.scope.viewModel.workbookChanged=!1,this.scope.viewModel.workbookLoaded=!1,this.scope.viewModel.loadedWorkbookOrdinal=e.contract.etagOrdinal,this.workbook=null,this.scope.isEmbeddedWorkbookDataReady=!1,this.scope.isEmbeddedWorkbookReady=!1,this.scope.embeddedWorkbookFailed=!1,this.anyWorkbookChangesOccurred=!1,this.ensureExpressionApplied((function(){})).then((function(){i.loadExcelWorkbook(e,t)}))},i.prototype.openWorkbookInExcel=function(){this.services.$window.open("ms-excel:ofe|u|"+this.scope.viewModel.workbook.contract.sourceFilePath,"_self")},i.prototype.openWorkbookInExcelOnline=function(){this.services.$window.open(this.scope.viewModel.workbook.editUrl,"_blank")},i.prototype.showPinDashboardDialog=function(){var t=this;this.scope.appBarArgs.selection&&this.scope.appBarArgs.selection.getTileData().then((function(i){var a={item:i.elementName,itemType:i.namedItemType,hideGridlines:!1,hideRowAndColumnHeaders:!0,allowTyping:!1,activeSelection:i.elementRange,keepOriginalContentSize:r.workbook.defaultKeepOriginalContentSize,sheetName:i.sheetName.replace(/\'/g,"''")},n={workbookTile:a},s={action:e.common.constants.openWorkbookActionName},c=n.workbookTile.item,l=t.scope.viewModel.workbook,d=e.dataServices.ContractUtils.createMasterLayoutConfig({width:e.common.GridLayoutConstants.gridItemMediumLandscapeColSpan,height:e.common.GridLayoutConstants.gridItemMediumLandscapeRowSpan}),p={type:o.workbook,workbookId:t.scope.viewModel.workbook.id,packageId:t.scope.viewModel.workbook.contract.packageId,displayText:t.services.workbookService.getDefaultTileTitle(n.workbookTile,l.contract.displayName),subDisplayText:t.services.workbookService.getDefaultTileSubtitle(c),config:JSON.stringify(n),$config:n,action:JSON.stringify(s),layoutConfig:JSON.stringify(d),$layoutConfig:d};t.services.modelConverter.resolveTilePackage(p,t.services.packageService.packages);var u=t.services.packageService.getWorkbookContentProvider(l.packageId),v=e.common.findContentProviderName(t.services.contentProviderHttpService.getBuiltInContentProviders(),u),h=void 0!==i.namedItemType?i.namedItemType:-1,g=t.services.telemetryService.startEvent(e.telemetry.DashboardPinWorkbookTile,"",e.telemetry.PinTileSource.Workbook,"",!1,v,i.smartSelection,h,t.services.packageService.getWorkbookStorageProvider(l.packageId));t.services.pinTileService.showPinVisualDialog(t.scope,void 0,void 0,void 0,t.scope.viewModel.workbook.contract,g,p)}))},i.prototype.onEwaApplicationReady=function(e){var t=this;this.resetSelectionArgs();var i=e.ewaControl;this.workbook=i.getActiveWorkbook(),i.add_activeSelectionChanged((function(e){return t.onWorkbookSelectionChange(e)})),i.add_workbookChanged((function(e){return t.onWorkbookChanged(e)})),this.scope.viewModel.workbookLoaded=!0,this.scope.appBarArgs.selection=new a(this.workbook,i.getActiveWorkbook().getActiveSelection(),this.services.promiseFactory)},i.prototype.onWorkbookSelectionChange=function(e){var t=this;if(this.scope.viewModel.workbookRangeSelected=!0,0===e.getSelectionType()){var i=e;this.scope.$applyAsync((function(){return t.scope.appBarArgs.selection=new a(t.workbook,i.getRange(),t.services.promiseFactory)}))}else if(1===e.getSelectionType()){var o=e;this.scope.$applyAsync((function(){return t.scope.appBarArgs.selection=new n(t.workbook,o.getNamedItem(),t.services.promiseFactory)}))}},i.prototype.onWorkbookChanged=function(t){var i=this.scope.viewModel;!this.anyWorkbookChangesOccurred&&i.workbookRangeSelected&&(this.services.telemetryService.logEvent(e.telemetry.DashboardWorkbookEditedInPowerBICausedPinBlock),this.anyWorkbookChangesOccurred=!0),i.workbookChanged||(i.workbookChanged=!0,this.scope.$digest())},i.prototype.pinButtonResponse=function(){if(this.scope.viewModel.workbookChanged)this.services.pinTileService.pinTileScenario=0,this.showPinDashboardDialog();else if(this.scope.viewModel.workbookRangeSelected||this.services.featureSwitchService.featureSwitches.isE2ERun)this.services.pinTileService.pinTileScenario=2,this.showPinDashboardDialog();else{this.services.pinTileService.pinTileScenario=1;var e=this.services.localizationService.get("PinTile_RangeNotSelected"),t=this.services.localizationService.get("PinTile_RangeNotSelected_Title");this.services.errorService.infoCustom(t,e)}},i.WorkbookPinToastShown="workbookPinToastShown",i})();t.WorkbookContainerController=s})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t){var i=this;this.restrict="A",this.scope={backgroundImage:"@"},this.link=function(t,o,r){o.css({opacity:"0"});var a=!0;t.$watch("backgroundImage",(function(n){if(!_.isEmpty(n)){var s=o.visible()&&"visible"===document.visibilityState&&"false"!==r.backgroundAnimation,c=$("<img/>");c.one("error",(function(){$(i).remove();var o=i.localizationService.get("Tile_ErrorText");t.$emit(e.common.constants.tileErrorEventName,o)})).attr("src",n),s?c.one("load",(function(){var e=o;return a?(a=!1,e.css({"background-image":"url("+n+")"}),void e.velocity({opacity:"1"},1e3)):void e.velocity({opacity:"1"}).velocity("transition.slideLeftBigOut",500,(function(){e.css({"background-image":"url("+n+")"}),e.velocity("transition.slideRightBigIn",500)}))})).attr("src",n):o.css({"background-image":"url("+n+")",opacity:"1"})}}))},this.localizationService=t}return t})();t.BackgroundImage=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/collapsiblePane.html",this.transclude=!0,this.replace=!0,this.scope={viewModel:"=",isExpanderHidden:"="},this.controller=e.common.Services.createController(e.controllers.CollapsiblePaneController)}return t})();t.CollapsiblePane=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t){var i=this;this.restrict="E",this.templateUrl="views/contentProviderDialog.html",this.replace=!0,this.scope={viewModel:"="},this.link=function(t,o,r){var a=o.find("iframe.contentProviderDialogFrame");t.loadContentProviderFrame=function(o){var r=a.parent();a.remove(),a=o,r.append(a);var n=a[0].contentWindow?a[0].contentWindow:a[0].contentDocument?a[0].contentDocument.defaultView:null;n&&(a[0].onload=function(){i.$timeout((function(){return t.$emit(e.constants.configPageLoadedEventName)}),0)})},t.$on(e.common.constants.scopeDestroyEventName,(function(){o.closest(".sliderContentView").find("input.sourceFilterBox").select()}))},this.controller=e.common.Services.createController(e.controllers.ContentProviderController),this.$timeout=t}return t})();t.ContentProvider=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.replace=!0,this.templateUrl="views/contentProviderLocalFile.html",this.scope={selectedFile:"=",isUpdateFromElementFlow:"=",elementToUpdate:"=?"},this.controller=e.common.Services.createController(e.controllers.ContentProviderLocalFileController)}return t})();t.ContentProviderLocalFile=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/contentProviderStore/contentProviderChildTile.html",this.replace=!0,this.scope={viewModel:"="}}return e})();e.ContentProviderChildTile=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.contracts.ContentProviderConfigurationUIStyle,o=(function(){function t(i,o,r,a,n,s){var c=this;this.restrict="E",this.replace=!0,this.templateUrl="views/contentProviderDialog.html",this.scope={},this.controller=e.common.Services.createController(e.controllers.ContentProviderController),this.link=function(i,o){var r=o.find(".loading"),a=o.find("iframe.contentProviderDialogFrame");c.contentProviderAuthenticationInfoCache={},i.hideLoadingUI=function(){r.hide()},i.$on(e.common.constants.navigation.stateChangeSuccess,(function(e,t,o,r,a){o.providerName||i.unloadContentProviderFrame(!0)}));var n=c.rootScopeService.$on(e.common.constants.contentProviderStoreConnectEventName,(function(t,n){c.currentContentProviderTile=n,c.windowService.clearInterval(c.authenticationDialogClosingDetectInterval),n.customConfigurationHandler?(c.windowService[e.common.constants.contentProviderStoreCustomConfigurationService]&&(c.windowService[e.common.constants.contentProviderStoreCustomConfigurationService].configData=void 0),i.customConfigurationHandler=n.customConfigurationHandler):n.authenticationInitializationInProgress?n.authenticationInitializationDeferred.promise.then((function(e){c.showLoginDialog(i,n)})):n.authentication&&n.authentication.oAuth?c.showLoginDialog(i,n):c.connect(o,r,a,i,n)}));i.getAuthenticationInfoByContentProviderName=function(e){return c.contentProviderAuthenticationInfoCache[e]},i.unloadContentProviderFrame=function(r){o.hasClass(t.VisibleCSSClassName)&&(i.hideLoadNotification(),o.removeClass(t.VisibleCSSClassName),c.connectedTile=null,a.remove(),i.$emit(e.common.constants.contentProviderStoreConfigurationUIVisibilityChangedEventName,!1),r||c.navigation.showGetDataSlider(c.navigation.categoryName,"",e.services.LocationOptions.Replace))},i.loadContentProviderFrame=function(t,n){n?(i.showLoadNotification(),o.addClass("modalDialog")):o.removeClass("modalDialog"),i.$emit(e.common.constants.contentProviderStoreConfigurationUIVisibilityChangedEventName,!0,n),a.remove(),a=t,o.append(a),n&&a.show();var s=a[0].contentWindow?a[0].contentWindow:a[0].contentDocument?a[0].contentDocument.defaultView:null;s&&(a[0].onload=function(){n||r.hide(),a.show()})};var s=c.rootScopeService.$on(e.common.constants.contentProviderStoreAuthorizationCodePostbackEventName,(function(e,t){c.windowService.clearInterval(c.authenticationDialogClosingDetectInterval),c.contentProviderTileWaitingForAuthentication&&c.contentProviderTileWaitingForAuthentication.providerName===c.navigation.providerName&&(c.contentProviderAuthenticationInfoCache[c.currentContentProviderTile.providerName]={endpoint:c.currentContentProviderTile.authentication.oAuth.oAuthEndpoint,authCode:t},c.connect(o,r,a,i,c.currentContentProviderTile))})),l=c.rootScopeService.$on(e.common.constants.contentProviderStoreCustomConfigurationPostbackEventName,(function(t,n){i.customConfigurationHandler=void 0,n?c.connect(o,r,a,i,c.currentContentProviderTile):c.navigation.showGetDataSlider(c.navigation.categoryName,"",e.services.LocationOptions.Replace)}));i.$on(e.common.constants.scopeDestroyEventName,(function(){i.hideLoadNotification(),o.closest(".landingController").find("input.ng-pristine").select(),n(),s(),l()}))},this.ngTimeoutService=i,this.windowService=o,this.rootScopeService=r,this.navigation=n,this.localizationService=a,this.contentProviderService=s}return t.prototype.showLoginDialog=function(t,i){var o=this,r=e.common.errorService.control(),a=[new InJs.ModalDialogAction(this.localizationService.get("GetData_OK"),function(t,i){r.hideDialog(),o.navigation.showGetDataSlider(o.navigation.categoryName,"",e.services.LocationOptions.Replace)})];if(i.authentication.oAuth.oAuthEndpoint){this.contentProviderTileWaitingForAuthentication=this.currentContentProviderTile;var n=this.windowService;n.$parentScope=t,this.authWindow=e.common.popupWindowService.open(i.authentication.oAuth.oAuthEndpoint,550,530),this.authenticationDialogClosingDetectInterval=this.windowService.setInterval((function(){try{o.authWindow&&!o.authWindow.closed||(o.windowService.clearInterval(o.authenticationDialogClosingDetectInterval),o.contentProviderTileWaitingForAuthentication.providerName===o.navigation.providerName&&o.navigation.showGetDataSlider(o.navigation.categoryName,"",e.services.LocationOptions.Replace),o.contentProviderTileWaitingForAuthentication=null)}catch(e){}}),100)}else{var s=this.localizationService.get("GetData_AuthenticationError_Title"),c=this.localizationService.get("GetData_UnableToRetrieveTheAuthenticationEndpoint");r.showCustomDialog(s,InJs.DomFactory.div().text(c),a,void 0,!0)}},t.prototype.connect=function(o,r,a,n,s){if(this.connectedTile!==s)switch(this.connectedTile=s,o.addClass(t.VisibleCSSClassName),r.show(),a.hide(),s.contract.configurationUIstyle){case i.DirectConnect:var c=this.contentProviderService.getDataAccessInfo(s.contract);c&&n.$emit(e.constants.dataSourceAccessInfoGeneratedEventName,c,s.contract,!0);break;case i.FullScreen:n.initConfigurationPage(s.contract);break;case i.ModalDialog:n.initConfigurationPage(s.contract,!0)}},t.VisibleCSSClassName="visible",t})();t.ContentProviderConfiguration=o})(t=e.directives||(e.directives={}));
})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/contentProviderStore/contentProviderEventTile.html",this.replace=!0,this.scope={viewModel:"="},this.link=function(e,t,i){var o=JSON.parse(e.viewModel.contract.providerConfig),r=o.eventName;e.handleClick=function(){r&&e.$root.$emit(r)}}}return e})();e.ContentProviderEventTile=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/contentProviderStore/contentProviderLinkTile.html",this.replace=!0,this.scope={viewModel:"="},this.link=function(e,t,i){var o=JSON.parse(e.viewModel.contract.providerConfig);e.href=o.FWLink}}return e})();e.ContentProviderLinkTile=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=".xlsx,.xlsm,.pbix,.csv",o=(function(){function t(t,o,r){var a=this;this.restrict="E",this.templateUrl="views/contentProviderStore/contentProviderLocalFileTile.html",this.replace=!0,this.scope={viewModel:"="},this.link=function(t,o,r){t.chooseFile=function(){var o=a.promiseFactory.defer();o.promise.then((function(i){t.$emit(e.common.constants.localFileSelectedEventName,i)})),a.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.GetData)||a.localFileService.chooseLocalFile(o,i)}},this.localFileService=t,this.quota=o,this.promiseFactory=r}return t})();t.ContentProviderLocalFileTile=o})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/contentProviderStore/contentProviderNormalTile.html",this.replace=!0,this.scope={viewModel:"="}}return e})();e.ContentProviderNormalTile=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.controllers.contentProviderStore.ContentProviderSplashState,o=(function(){function t(t,o){var r=this;this.restrict="E",this.templateUrl="views/contentProviderStore/contentProviderSplash.html",this.replace=!0,this.controller=e.common.Services.createController(e.controllers.contentProviderStore.ContentProviderSplashController),this.link=function(t,o,a){var n=t.$eval(a.screenState);n?(t.screenState=n,n===i.GroupWelcome&&r.telemetryService.logEvent(e.telemetry.DashboardGetDataSplash,e.telemetry.GetDataSplashState.GroupWelcome)):r.navigation.categoryName===e.constants.navigation.getDataWelcome?(t.screenState=i.Welcome,r.telemetryService.logEvent(e.telemetry.DashboardGetDataSplash,e.telemetry.GetDataSplashState.Welcome)):(t.screenState=i.GetData,r.telemetryService.logEvent(e.telemetry.DashboardGetDataSplash,e.telemetry.GetDataSplashState.GetData))},this.telemetryService=t,this.navigation=o}return t})();t.ContentProviderSplash=o})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/contentProviderStore/contentProviderStore.html",this.scope={activeDashboard:"=activeDashboard"},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.contentProviderStore.ContentProviderStoreController)}return t})();t.ContentProviderStore=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/contentProviderStore/contentProviderTileBody.html",this.replace=!0}return e})();e.ContentProviderTileBody=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.contracts.ContentProviderConfigurationUIStyle,o=e.controllers.contentProviderStore.contentProviderConstants,r=(function(){function t(t,r,a,n,s,c,l,d,p,u,v,h){var g=this;this.contentProviderService=u,this.rtl=v,this.windowMetrics=h,this.restrict="E",this.templateUrl="views/contentProviderStore/contentProviderTileBrowser.html",this.replace=!0,this.scope={tiles:"=",selectedContentProviderTile:"=",navigateToCategory:"=",hasContentProviderLoaded:"=",isSplashState:"="},this.link=function(t,r,a){var n,s,c,l=0,d=0,p=[],u=r.find(".detailPane"),v=u.find(".accordion"),h=u.find(".detailPaneArrow"),m="resize.contentProvider";t.contentProviderLoadingMessage=e.common.localize.get("Contentprovider_Loading_Message"),t.selectedChildContentProvider=null,t.getPublishMetaData=function(e){return g.localizationService.format("GetData_PublishedBy",[e])},t.getLocalizedValue=function(e){return g.localizationService.get(e)},t.getPrettyDate=function(e){return jsCommon.DateExtensions.formatPretty(e)},t.tilesByProviderName=_.indexBy(t.tiles,"providerName"),t.clearSelection=function(){t.selectedContentProviderTile=null},t.navigateToTile=function(i,r){var a=t.tiles[i],n=o.categoryEnumToNameMap[a.clientCategory],s=a.providerName;if(g.telemetryService.logEvent(e.telemetry.DashboardGetDataProviderSelect,n,s),a.contract.disabledInArchivedContent===!0&&g.viralTenantMergeHelperService.viewingDataFromMergedViralTenant())return void g.viralTenantMergeHelperService.displayFeatureDisabledErrorMessage("ArchivedContent_ErrorMessageOneDrivePro");if(r){var c=e.services.LocationOptions.True;g.navigation.providerName&&(c=e.services.LocationOptions.Replace),g.navigation.showGetDataSlider(n,s,c)}},t.$on(e.common.constants.navigation.stateChangeSuccess,(function(e,i,o,a,n){t.updateSelectedContentProviderTile(),n.categoryName===o.categoryName||o.providerName||r.scrollTop(0)})),t.updateSelectedContentProviderTile=function(){var e=g.navigation.providerName,i=_.find(t.tiles,(function(t){return t.providerName===e}));i?t.selectTile(i):(t.hideDetailPane(),t.clearSelection())},t.selectChildTile=function(e){t.selectedChildContentProvider=e},t.selectTile=function(e){var o=_.findIndex(t.tiles,e),a=n[o],c=angular.element(a),d=e.contract.configurationUIstyle<=i.DirectConnect;if(t.selectedContentProviderTile=e,e.disableDetailPane)g.connectToContentProvider(t,!1);else if(d&&c){var m=c.find(".tileContent"),f=p.indexOf(a),y=(Math.floor(f/l)+1)*l-1;y>=p.length&&(y=p.length-1);var b=u.height(),S=!1;if(y===s&&u.hasClass("visible")||(u.removeClass("visible").detach(),u.insertAfter(p[y]),u.offset(),u.addClass("visible"),S=!0),g.openDetailPane(t,r,c,e,m,u,v,b,S),c.length>0){var w=c.offset().left,C=u.offset().left,D=c.width(),I=(D-h.outerWidth())/2;if(g.rtl&&g.rtl.isRtlLayout){var T=g.windowMetrics.windowWidth;w=w+D-T,C=C+u.width()-T,I*=-1}var M=w-C+I;h.css("transform","translateX("+M+"px)")}s=y}},t.closeDetailPane=function(){g.navigation.showGetDataSlider(g.navigation.categoryName,"",e.services.LocationOptions.Replace),t.hideDetailPane()},t.hideDetailPane=function(){var e=r.find(".detailPane");e.hasClass("visible")&&(e.removeClass("visible"),e.detach())},t.childConnect=function(){g.childConnect(t,!0)},t.connect=function(){g.connectToContentProvider(t,!0)};var f=t.$root.$on(e.common.constants.contentProviderStoreTileListRefreshEventName,(function(e,i,o){t.currentCategory=i,c=o?new RegExp("\\b"+o,"i"):null,t.hideDetailPane(),c?(t.tiles=_.sortBy(t.tiles,(function(e){return e.title.toLowerCase()})),t.clearSelection()):t.tiles=_.sortBy(t.tiles,(function(e){return[e.sortPriority,e.title.toLowerCase()]})),g.timeoutService((function(){b(),c||t.updateSelectedContentProviderTile()}))}));t.$on(e.common.constants.scopeDestroyEventName,(function(){angular.element(g.windowService).off(m)})),angular.element(g.windowService).on(m,(function(){b()}));var y=function(e){var o=!1;return c?(o=null!==e.title.match(c),!o&&e.searchKeywords&&(o=null!==e.searchKeywords.match(c)),!o||e.contract.configurationUIstyle!==i.FWLink&&e.contract.configurationUIstyle!==i.Event||(o=!1)):o=e.clientCategory===t.currentCategory,o&&(g.updateTileAuthorization(e),g.updateChildAuthorization(e)),o},b=function(){n=r.find(".tile"),p=[],t.visibleTiles=[];var e=!1;if(n.length>0){for(var i=0,o=n.length;i<o;i++){var a=t.tiles[i],s=angular.element(n[i]);y(a)?(a.visible=!0,s.addClass("visible"),t.visibleTiles.push(a),p.push(n[i]),e=!0):(a.visible=!1,s.removeClass("visible"))}var v=angular.element(n[0]);if(l=Math.floor(r.width()/v.outerWidth(!0)),l>0){var h=v.outerWidth(!0)*l-parseInt(v.css("margin-right"),0);u.css("width",h)}d!==l&&t.selectedContentProviderTile&&u.hasClass("visible")&&t.selectTile(t.selectedContentProviderTile),d=l}t.showNoSearchResultText=!e&&null!==c};t.$on(e.common.constants.scopeDestroyEventName,(function(){f()}))},this.timeoutService=t,this.windowService=r,this.navigation=a,this.telemetryService=n,this.localizationService=s,this.viralTenantMergeHelperService=c,this.userInfoService=l,this.licenseHelperService=d,this.quota=p}return t.prototype.handleAutoRedirect=function(t,i){if(i.autoRedirectUrlParams){for(var o=i.autoRedirectUrlParams.split("&"),r=jsCommon.QueryStringUtil.parseQueryString(),a=!1,n=0,s=o.length;n<s;n++)if(r[o[n]]){a=!0;break}a&&t.connect()}else this.navigation.stateService.params[e.common.constants.navigation.getDataForceConnect]&&t.connect()},t.prototype.openDetailPane=function(e,i,o,r,a,n,s,c,l){var d=this;this.timeoutService((function(){var a=n.find(".accordion"),s=a.height()+106;(c!==s||l)&&n.animate({height:s},250,(function(){o.length>0&&i.animate({scrollTop:o.position().top+o.height()+n.height()-i.height()-t.detailPaneScrollingOffset},250),d.handleAutoRedirect(e,r)}))}))},t.prototype.updateChildAuthorization=function(e){if(this.tileHasChildItems(e))for(var t=void 0,i=0,o=e.tileGrouping.groupingChildItems;i<o.length;i++)t=o[i],this.updateTileAuthorization(t)},t.prototype.updateTileAuthorization=function(t){if(t.authentication&&t.authentication.oAuth&&t.authenticationInitializationInProgress&&!t.authentication.oAuth.oAuthEndpoint){var i=e.common.httpService.powerbiRequestOptions();i.telemetryDescription="GetAuthorization: "+t.contract.providerName,e.common.httpService.get(t.authentication.oAuth.endpointRetrievalAPI,i).then((function(e){t.authenticationInitializationInProgress=!1,t.authentication.oAuth.oAuthEndpoint=e.data,t.authenticationInitializationDeferred.resolve(e.data)}),(function(e){t.authenticationInitializationInProgress=!1,t.authenticationInitializationDeferred.resolve("")}))}else t.authenticationInitializationInProgress=!1},t.prototype.tileHasChildItems=function(e){return e.tileGrouping&&e.tileGrouping.groupingChildItems&&e.tileGrouping.groupingChildItems.length>0},t.prototype.childConnect=function(e,t){e.selectedContentProviderTile=e.selectedChildContentProvider,this.connectToContentProvider(e,!0)},t.prototype.connectToContentProvider=function(t,i){var r=this;this.localizationService.ensureLocalization((function(){var a=!1,n=!1,s=o.categoryEnumToNameMap[t.selectedContentProviderTile.clientCategory],c=t.selectedContentProviderTile.providerName,l=t.selectedContentProviderTile;if(l.usePBIDesktop)return t.closeDetailPane(),r.windowService.open(e.constants.downloadPBIDesktopLink,e.constants.targetValueBlank),void r.telemetryService.logEvent(e.telemetry.DashboardGetDataProviderAccordionConnect,s,c,a,n);if(r.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.GetData)&&(n=!0),!n){var d=l.contract;r.contentProviderService.upgradeRequiredToConnect(d)?(a=!0,r.contentProviderService.displayFeatureDisabledDialog(d)):(t.$root.$emit(e.common.constants.contentProviderStoreConnectEventName,t.selectedContentProviderTile),i&&t.hideDetailPane())}r.telemetryService.logEvent(e.telemetry.DashboardGetDataProviderAccordionConnect,s,c,a,n)}))},t.detailPaneScrollingOffset=39,t})();t.ContentProviderTileBrowser=r})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/contentProviderStore/customConfigHandlers/sharePointUrlModal.html"}return e})();e.SharePointUrlModal=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(e){e[e.left=0]="left",e[e.right=1]="right"})(i||(i={}));var o=(function(){function t(){this.controller=e.common.Services.createController(r),this.restrict="A",this.scope={context:"=",arrowDirection:"=?",showContextMenu:"=?"}}return t})();t.ContextMenu=o;var r=(function(){function e(t,o){var r=this;this.scope=t,this.services=o,this.element=this.services.$element,this.rtl=this.services.rtl,this.windowMetrics=this.services.windowMetrics,this.rtl&&this.rtl.isRtlLayout&&(t.arrowDirection=e.rightArrowDirection),this.arrowDirection=t.arrowDirection?i[t.arrowDirection]:i.left,this.scope.contextMenuStyle=e.contextMenuInactiveStyle,this.scope.close=function(){return r.hideDialog()},t.$on("$destroy",(function(){return r.dispose()})),$(window).on("resize",(function(){return r.blurAnchor()})),$(window).on(jsCommon.DOMConstants.keyDownEventName,(function(e){return r.keyDownHideDialog(e)})),$(window).on(jsCommon.DOMConstants.mouseDownEventName,(function(e){return r.mouseDownHideDialog(e)})),angular.isUndefined(t.showContextMenu)?this.element.bind(jsCommon.DOMConstants.mouseClickEventName,(function(e){return r.showDialog(e)})):this.scope.$watch((function(){return r.scope.showContextMenu}),(function(t,i){t&&!i&&r.scope.contextMenuStyle===e.contextMenuInactiveStyle?r.showDialog():!t&&i&&r.scope.contextMenuStyle===e.contextMenuActiveStyle&&r.hideDialog()}))}return e.createOptions=function(){return{additionalServices:["$element","$templateCache","rtl","windowMetrics"]}},e.prototype.clickOutsideContextMenu=function(t){var i=t.pageX,o=t.pageY;if(this.contextMenuElement&&this.scope.contextMenuStyle===e.contextMenuActiveStyle){var r=this.contextMenuElement.offset(),a=r.left,n=r.top,s=a+this.contextMenuElement.width(),c=n+this.contextMenuElement.height();return a>i||i>s||n>o||o>c}return!1},e.prototype.blurAnchor=function(){this.element.is(":focus")&&this.element.blur()},e.prototype.dispose=function(){this.contextMenuElement&&this.contextMenuElement.remove(),$(window).off("resize",this.blurAnchor),$(window).off(jsCommon.DOMConstants.keyDownEventName,this.keyDownHideDialog),$(window).off(jsCommon.DOMConstants.mouseDownEventName,this.mouseDownHideDialog)},e.prototype.showDialog=function(t){var o=this;t&&(t.preventDefault(),t.stopPropagation()),this.contextMenuElement||(this.template=angular.element(this.services.$templateCache.get("views/contextMenu.html")),this.contextMenuElement=this.services.compile(this.template)(this.scope),this.arrowElement=this.contextMenuElement.find(e.arrowSelector),$("body").append(this.contextMenuElement));var r=this.element.offset();this.services.timeout((function(){switch(o.arrowDirection){case i.left:r.left+=o.element.width()+e.arrowWidth+e.positionOffset.left,r.top-=o.contextMenuElement.height()/2-o.element.height()/2-e.positionOffset.top;break;case i.right:var t=o.contextMenuElement.width();if(r.left-=t+e.arrowWidth+e.positionOffset.left,r.top-=o.contextMenuElement.height()/2-o.element.height()/2-e.positionOffset.top,o.rtl&&o.rtl.isRtlLayout){var a=o.windowMetrics.windowWidth-(r.left+t);r.left=null,o.contextMenuElement.css("right",a)}}r.top=o.adjustPositionTop(r),o.contextMenuElement.css(r),o.scope.contextMenuStyle=e.contextMenuActiveStyle,o.scope.showContextMenu=!0}))},e.prototype.adjustPositionTop=function(t){var i=0,o=i+$(document).height()-this.contextMenuElement.height();return t.top<i?(this.arrowElement.css({top:t.top+this.contextMenuElement.height()/2-i+e.arrowPositionOffset.top}),i):t.top>o?(this.arrowElement.css({top:t.top+this.contextMenuElement.height()/2-o+e.arrowPositionOffset.top}),o):(this.arrowElement.removeAttr("style"),t.top)},e.prototype.hideDialog=function(){this.contextMenuElement&&(this.scope.contextMenuStyle=e.contextMenuInactiveStyle,this.scope.showContextMenu=!1)},e.prototype.mouseDownHideDialog=function(e){var t=this;this.clickOutsideContextMenu(e)&&this.scope.$apply((function(){t.hideDialog()}))},e.prototype.keyDownHideDialog=function(t){var i=this;this.scope.contextMenuStyle===e.contextMenuActiveStyle&&t.keyCode===jsCommon.DOMConstants.escKeyCode&&this.scope.$apply((function(){i.hideDialog()}))},e.arrowPositionOffset={left:0,top:-10},e.arrowWidth=17,e.positionOffset={left:-22,top:0},e.contextMenuActiveStyle="active",e.contextMenuInactiveStyle="inactive",e.arrowSelector=".wrapper .arrow",e.rightArrowDirection="right",e})()})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i="custom",o=(function(){function t(t){var o=this;this.$timeout=t,this.require=["ngModel","?^customValidatorSynchronizer"],this.restrict="A",this.link=function(t,r,a,n){function s(e){d.$setValidity(i,u.validate(e)),p&&p.synchronizeValidation()}var c,l,d=n[0],p=n[1],u=t.$eval(a.customValidator);p&&(l=p.registerValidator((function(){d.$error[i]&&d.$setValidity(i,u.validate(d.$viewValue))}))),t.$watch(a.ngModel,(function(e,t){(e||t)&&(c?o.$timeout.cancel(c):d.$setValidity(i,!0),u.delay>0?c=o.$timeout((function(){c=null,s(e)}),u.delay):s(e))})),t.$on(e.common.constants.scopeDestroyEventName,(function(){l&&l(),c&&o.$timeout.cancel(c)}))}}return t})();t.CustomValidator=o})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.controller=e.common.Services.createController(e.controllers.CustomValidatorSynchronizerController),this.restrict="A"}return t})();t.CustomValidatorSynchronizer=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.AppUtils,o=e.common.models,r=e.helpers.DashboardTelemetryHelper,a=e.services.FullScreenFitStyle,n=(function(){function t(n,s,c,l){var d=this;this.telemetryService=n,this.gridLayout=s,this.userActivityContextService=c,this.appService=l,this.restrict="E",this.templateUrl="views/dashboard.html",this.replace=!0,this.scope={viewModel:"=",displayLayout:"<",mobileLayout:"<?",inEditMobileLayoutMode:"<?",isGroupTransitionDelayed:"<",enableStrategySwap:"<?"},this.controller=e.common.Services.createController(e.controllers.DashboardController),this.link=function(n,s,c){function l(){var e=s.find(".dashboardTile.selected");if(e.length>0){var t=s.offset(),i=e.offset();s.animate({scrollTop:i.top-t.top+s.scrollTop(),scrollLeft:i.left-t.left+s.scrollLeft()})}}var p=-1,u=!1,v=!0;d.telemetryHelper=new r(d.telemetryService,d.userActivityContextService,n),n.disablePointerEvents="true"===c.disablePointerEvents,n.scaleDashboard=function(e){var i=n.gridLayoutContainer.containerWidth+t.TileContainerPixelPadding,o=n.gridLayoutContainer.containerHeight,r=s.parent().width(),a=s.parent().height(),c=t.calculateDashboardScaleFactor(i,o,r,a,e);if(!(c<=0)){var l={transform:"scale("+c+")",width:i+"px",height:e?a/c+"px":o+"px"};s.css(l).addClass(t.DashboardFitToScreenCSSClass)}},n.$watch("fullScreen.fitStyle",(function(e){switch(e){case a.FitToContent:n.scaleDashboard();break;case a.FitToWidth:n.scaleDashboard(!0);break;case a.None:s.removeAttr("style").removeClass(t.DashboardFitToScreenCSSClass)}})),n.$watch("viewModel",(function(e,r){if(e&&r&&e.id!==r.id){e.gridLayoutService=r.gridLayoutService,e.gridLayoutService.strategy=new o.DefaultGridLayoutStrategy,e.gridLayoutService.displayLayout=0;var a=e.tiles;if(a)for(var c=0,l=a;c<l.length;c++){var h=l[c];h.gridLayoutContext&&h.gridLayoutContext.setActiveLayout(0),h.invalidateLayout()}}if(e){var g=null;d.appService&&e.contract&&(g=i.getDashboardAppGUID(e.contract,d.appService)),d.telemetryHelper.recordOpenDashboardEvent(e,g),d.gridLayout&&(e.gridLayoutService=d.gridLayout);var m=n.displayLayout||0;e.currentDisplayLayout=m}u=!0,window.clearTimeout(p),s.scrollTop(0).scrollLeft(0).addClass(t.TransitioningCSSClass),v||s.css("opacity","0")})),n.$watch("viewModel.isLoaded",(function(t,i){var o=d.doesModelContainsTilesByLayout(n.viewModel,n.displayLayout);t&&!i&&o&&n.$emit(e.constants.dashboardTileRepeatFinishedEvent)})),n.onDestroy=function(){d.telemetryHelper.forceResolve()},n.$on(e.constants.dashboardTileRepeatFinishedEvent,(function(){n.fullScreen.fitStyle===a.FitToContent&&n.scaleDashboard(),l(),u&&(v||s.velocity(t.DashboardVelocityUITransitionType,t.DashboardTransitionDurationMs),p=window.setTimeout((function(){s.removeClass(t.TransitioningCSSClass)}),2e3),u=!1,n.$emit(e.common.constants.domLayoutChangedEvent))}))}}return t.calculateDashboardScaleFactor=function(e,t,i,o,r){var a=i/e;if(r)return a;var n=o/t;return a<n?a:n},t.prototype.doesModelContainsTilesByLayout=function(e,t){return e&&(!e.tiles||void 0===t||0===_.filter(e.tiles,(function(e){return e.hasLayoutPosition(t)})).length)},t.TransitioningCSSClass="transitioning",t.DashboardTransitionDurationMs=150,t.DashboardVelocityUITransitionType="transition.fadeIn",t.TileContainerPixelPadding=40,t.DashboardFitToScreenCSSClass="fitToScreen",t})();t.Dashboard=n})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.constants,o=(function(){function t(){this.restrict="E",this.templateUrl="views/dashboardContainer.html",this.replace=!0,this.scope={viewModel:"=",collapsiblePaneMode:"=",isActive:"="},this.controller=e.common.Services.createController(e.controllers.DashboardContainerController),this.link=function(e,t,o){var r=e.rootScope.$on(i.inFocusEnterEvent,(function(){t.hide()})),a=e.rootScope.$on(i.inFocusExitEvent,(function(){t.show()})),n=e.$on("$destroy",(function(){r(),a(),n()}))}}return t})();t.DashboardContainer=o})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.replace=!0,this.controller=e.common.Services.createController(e.controllers.DevToolsViewController),this.templateUrl="views/devToolsView.html"}return t})();t.DevToolsView=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/excelUploadFormat.html",this.replace=!0,this.controller=e.common.Services.createController(e.controllers.ExcelUploadFormatController)}return t})();t.ExcelUploadFormat=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.replace=!0,this.scope={viewModel:"=",canvasOptions:"<",explorationContainerOptions:"<"},this.controller=e.common.Services.createController(e.controllers.ExplorationContainerController),this.templateUrl="views/explorationContainer.html"}return t})();t.ExplorationContainer=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/favoritesContainer.html",this.scope={viewModel:"=",collapsiblePaneMode:"<"},this.controller=e.common.Services.createController(e.controllers.FavoritesContainerController),this.controllerAs="favoritesContainerCtrl",this.bindToController=!0}return t})();t.FavoritesContainer=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.replace=!0,this.templateUrl="views/historyDialogView.html",this.scope={viewModel:"="},this.controller=e.common.Services.createController(e.controllers.HistoryDialogController)}return t})();t.HistoryDialog=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=300,o=20,r=(function(){function t(){this.restrict="A",this.templateUrl="views/inFocus.html",this.scope={canEdit:"="},this.controller=e.common.Services.createController(e.controllers.InFocusController),this.link=function(e,t){e.performTransitionAnimation=function(e){var t=$.Deferred();0===$(".inFocusTransition.begin").length&&$('<div class="inFocusTransition begin"></div>').insertAfter($("[in-focus]"));var i=$(".dashboardTile[data-id="+e+"]");if(0===i.length)return t.resolve(),t;var o=i.offset(),r=o.top,a=o.left,n=i.width(),s=i.height();return $(".inFocusTransition.begin").velocity({opacity:1,top:0,left:0,width:"100%",height:"100%"},{duration:250,begin:function(){$(".begin").css({top:r,left:a,width:n,height:s})},complete:function(){t.resolve()}}),t},e.clearTransitionAnimation=function(){var e=$.Deferred();return $(".inFocusTransition.begin").velocity({opacity:0},{duration:350,complete:function(){$(".inFocusTransition.begin").css({width:0,height:0}),e.resolve()}}),e};var r=function(){var t=e.viewModel.inFocusTile,i=t&&t.realTime;if(i){var r=e.onResizeViewport;if(r){var a=r.width-2*o,n=r.height-2*o;if(!(a<=0||n<=0)){var s={width:a,height:n};t.calculateLayout(s),t.applyLayout()}}}},a=_.throttle(r,i);e.handleResize=function(){a()}}}return t})();t.InFocus=r})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/insights/insights.html",this.scope={activeDashboard:"=activeDashboard"},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.insights.InsightsController)}return t})();t.Insights=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.replace=!0,this.transclude=!0,this.controller=e.common.Services.createController(e.controllers.LandingContainer),this.templateUrl="views/landingContainer.html",this.controllerAs="$ctrl"}return t})();t.LandingContainer=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=".xlsx,.xlsm,.pbix,.csv",o=(function(){function t(t,o,r,a){var n=this;this.localizationService=t,this.errorService=o,this.featureSwitchService=r,this.timeoutService=a,this.restrict="E",this.templateUrl="views/localFileBrowser.html",this.replace=!0,this.link=function(t,o,r){t.fileDialogFilter=i,n.input=o.find(".browseFileInput"),n.input.val(""),n.input.focus(),n.input.bind("change",(function(){return n.onFileSelected(t)})),n.input.bind("click",(function(e){e.stopPropagation()})),t.$on(e.common.constants.chooseLocalFileEventName,(function(e,i){t.fileDialogFilter=i,n.timeoutService((function(){return n.selectFile(t)}))}))}}return t.prototype.onFileSelected=function(t){var i,o=this.input[0];o.files&&(i=o.files[0]),t.$emit(e.common.constants.localFileSelectedEventName,i)},t.prototype.selectFile=function(e){this.input.val("");try{this.featureSwitchService.featureSwitches.isE2ERun||this.input.click()}catch(e){var t=this.errorService.control();t.showCustomDialog(this.localizationService.get("GetData_FileCannotBeUploadedTitle"),angular.element("<div/>").text(this.localizationService.get("GetData_FileCannotBeUploadedText")),[new InJs.ModalDialogAction(this.localizationService.get("GetData_OK"),function(e,i){t.hideDialog()})],(function(e){e.parent().find('input[type="button"]').focus()}),!0)}},t})();t.LocalFileBrowser=o})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/manageStorageView.html",this.scope={viewModel:"=",dashboardContainer:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.ManageStorageView)}return t})();t.ManageStorageView=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/marketplaceHost.html",this.replace=!0,this.scope={},this.link=function(e,t,i){var o='<iframe name="marketplaceFrame" id="marketplaceFrame" sandbox="allow-scripts allow-popups allow-forms allow-same-origin" src="{{saasMarketplaceUrl}}"></iframe>',r=function(){var e=t.find("iframe#marketplaceFrame");e&&e.remove()};e.disconnectMarketplace=function(){t.removeClass("marketplaceActive"),r()},e.connectToMarketplace=function(){e.initListener(),r();var i=$(o.replace("{{saasMarketplaceUrl}}",e.saasMarketplaceUrl));t.addClass("marketplaceActive").append(i),$("#marketplaceFrame").load((function(){var t=document.getElementById("marketplaceFrame");e.marketplaceIframe=t.contentWindow,e.postInitialMarketplaceContext()}))}},this.controller=e.common.Services.createController(e.controllers.MarketplaceHostController)}return t})();t.MarketplaceHost=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/navigationBar.html",this.transclude=!0,this.replace=!0,this.scope={currentDashboard:"=",currentReport:"=",currentWorkbook:"="},this.controller=e.common.Services.createController(e.controllers.NavigationBarController)}return t})();t.NavigationBar=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/navigationPane.html",this.replace=!0,this.controllerAs="$ctrl",this.scope={viewModel:"=",currentReport:"=",currentWorkbook:"="},this.link=function(t,i,o){var r=i.find(".searchBox input"),a=function(e,t){if(e&&e.length>0&&!e.visible()){var o=i.find(".scrollRegion"),r=o.scrollTop();o.scrollTop(r+t)}};i.find(".searchBox i.glyphicon").click((function(){t.isPaneExpanded=!0,t.$digest(),window.setTimeout((function(){r.focus()}),250)})),i.find(".scrollRegion").on(jsCommon.DOMConstants.scrollEventName,(function(o){var r=i.find("li.active");r.length>0&&t.$broadcast(e.constants.navPaneScrollEventName,r)})),t.$root.$on(e.constants.scrollNavPaneToActiveDashboardEventName,(function(e,t){setTimeout((function(){var e=i.find(".dashboardList li.selected");a(e,e.offset().top-$(window).height()/2)}),0)})),t.$on(e.constants.scrollToNavPaneListItemEventName,(function(e,t){var o=0,r=i.find(".scrollRegion"),n=r.offset(),s=t.offset(),c=t.outerHeight();s.top<n.top?o=s.top-n.top:s.top+c>n.top+r.height()&&(o=s.top+c-n.top-r.height()),a(t,o)})),t.updateWindowIfNeeded=function(){window.setTimeout((function(){$(window).trigger("resize")}),50)}},this.controller=e.common.Services.createController(e.controllers.NavigationPaneController)}return t})();t.NavigationPane=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function i(){this.restrict="E",this.templateUrl="views/navigationPaneListItem.html",this.replace=!0,this.scope={viewModel:"=",selected:"=?"},this.link=function(e,i,o){t.NavigationPaneListItem.link(e,i,o)},this.controller=e.common.Services.createController(e.controllers.DashboardNavigationPaneListItemController)}return i})();t.DashboardNavigationPaneListItem=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function i(){this.restrict="E",this.templateUrl="views/navigationPaneListItem.html",this.replace=!0,this.scope={viewModel:"=",selected:"=?"},this.link=function(e,i,o){t.NavigationPaneListItem.link(e,i,o)},this.controller=e.common.Services.createController(e.controllers.DatasetNavigationPaneListItemController)}return i})();t.DatasetNavigationPaneListItem=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function i(){this.restrict="E",this.templateUrl="views/groupNavigationPaneListItem.html",this.replace=!0,this.scope={viewModel:"=",selected:"=?"},this.link=function(e,i,o){t.NavigationPaneListItem.link(e,i,o)},this.controller=e.common.Services.createController(e.controllers.GroupNavigationPaneListItemController)}return i})();t.GroupNavigationPaneListItem=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){}return t.link=function(t,i,o){t.showContextMenuIfEnabled=function(){t.$emit(e.constants.scrollToNavPaneListItemEventName,i),t.showContextMenu=t.isContextMenuEnabled()},t.$on(e.constants.navPaneScrollEventName,(function(e,o){t.showContextMenu&&o.length>0&&o[0]===i[0]&&t.$apply((function(){t.showContextMenu=!1}))}))},t})();t.NavigationPaneListItem=i})(t=e.directives||(e.directives={}));
})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function i(){this.restrict="E",this.templateUrl="views/navigationPaneListItem.html",this.replace=!0,this.scope={viewModel:"=",selected:"=?"},this.link=function(e,i,o){t.NavigationPaneListItem.link(e,i,o)},this.controller=e.common.Services.createController(e.controllers.ReportNavigationPaneListItemController)}return i})();t.ReportNavigationPaneListItem=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function i(){this.restrict="E",this.templateUrl="views/navigationPaneListItem.html",this.replace=!0,this.scope={viewModel:"=",selected:"=?"},this.link=function(e,i,o){t.NavigationPaneListItem.link(e,i,o)},this.controller=e.common.Services.createController(e.controllers.WorkbookNavigationPaneListItemController)}return i})();t.WorkbookNavigationPaneListItem=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/npsHost.html",this.replace=!0,this.scope={},this.link=function(e,t,i){var o='<iframe name="npsFrame" id="npsFrame" sandbox="allow-same-origin allow-scripts allow-popups allow-forms" src="{{npsUrl}}"></iframe>',r=function(){var e=t.find("iframe#npsFrame");e&&e.remove()};e.closeNpsHostIframe=function(){t.removeClass("npsActive"),r()},e.resizeNpsHostIframe=function(){$("#npsFrame").addClass("short")},e.connectToNps=function(){e.initListener(),r();var i=$(o.replace("{{npsUrl}}",e.renderUrl));t.append(i),$("#npsFrame").load((function(){t.addClass("npsActive")}))}},this.controller=e.common.Services.createController(e.controllers.NpsHostController)}return t})();t.NpsHost=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e){this.restrict="E",this.templateUrl="views/loadNotificationDialog.html",this.replace=!0,this.scope={message:"="},this.scope=e}return e})();e.LoadNotificationDialog=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/o365ApplicationLauncher.html",this.replace=!0,this.scope={},this.link=function(e,t,i){var o=t.find(".o365AppLauncherContainer"),r=!1;t.mousedown((function(){r=!0})),t.bind("click",(function(t){e.showAppLauncherContainer?(o.removeClass("fadein"),o.addClass("fadeout")):(e.getApplicationLauncher(),o.removeClass("fadeout"),o.addClass("fadein"),o.focus()),e.showAppLauncherContainer=!e.showAppLauncherContainer,r=!1})),o.on("blur",(function(t){r?r=!1:(o.removeClass("fadein"),o.addClass("fadeout"),e.showAppLauncherContainer=!1)}))},this.controller=e.common.Services.createController(e.controllers.O365ApplicationLauncherController)}return t})();t.O365ApplicationLauncher=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="A",this.scope={onLoad:"&",onError:"&?"},this.link=function(t,i){i.on("load",(function(){t.$applyAsync((function(){t.onLoad()}))})),t.onError&&i.on("error",(function(){t.$applyAsync((function(){t.onError()}))})),t.$on(e.common.constants.scopeDestroyEventName,(function(){i.off()}))}}return t})();t.OnLoad=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t){var i=this;this.restrict="E",this.templateUrl="views/pinTileDialog.html",this.replace=!0,this.controller=e.common.Services.createController(e.controllers.PinTileDialogController),this.link=function(e,t,o){i.$timeout((function(){t.find('input[type="text"]').focus(),$(".inputReportTitle").keypress((function(e){if(e.keyCode===jsCommon.DOMConstants.enterKeyCode){var t=$(".saveAndContinueBtn");t.prop("disabled")||t.click()}})),$(".inputDashboardTitle").keypress((function(e){if(e.keyCode===jsCommon.DOMConstants.enterKeyCode){var t=$(".pinTile");t.prop("disabled")||t.click()}})),$(".newDashRadio").click((function(e){$(".inputDashboardTitle").focus()}))}),500),i.$timeout((function(){var e=t.find(".tilePreviewFrame .dashboardTile");e.length>0&&e.fadeIn(300)}))},this.$timeout=t}return t})();t.PinTileDialog=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=jsCommon.BrowserUtils,o=e.common.constants,r="@media print {{0}{ {1} }}",a="explore-canvas-printer",n="dashboard-printer",s=(function(){function t(e,t,i,r){var s=this;this.restrict="A",this.link=function(e,t,i){if(i.disablePrint===(!0).toString())return t.removeAttr(a),void t.removeAttr(n);var r=s.rootScope,c=r.$on(o.enterPrintModeEvent,(function(i){i.stopPropagation(),s.insertPrintStylingInDOM(e,t)})),l=r.$on(o.exitPrintModeEvent,(function(e){e.stopPropagation(),s.removePrintStylingFromDOM(t)})),d=e.$on("$destroy",(function(){c(),l(),s.removePrintStylingFromDOM(t),d()}))},this.rootScope=e,this.compileService=t,this.featureSwitchService=i,this.localizationService=r}return t.getPrintTargetViewPort=function(t){var o={width:e.constants.defaultPortraitPrintWidth,height:e.constants.defaultPortraitPrintHeight},r=t.width(),a=t.height();if(r>a&&(o.width=e.constants.defaultLandscapePrintWidth,o.height=e.constants.defaultLandscapePrintHeight),i.isChrome()){var n=t.parent();o.width=n.width(),o.height=n.height()}return o},t.calculateScaleFactor=function(e,t,i){var o=t.width/e.width,r=t.height/e.height;return i?Math.max(o,r):Math.min(o,r)},t.prototype.calculateStyle=function(e,t){return null},t.prototype.getStyleString=function(e){for(var t=Object.keys(e),i="",o=0,r=t.length;o<r;o++){var a=t[o];i=i+a+":"+e[a]+"; "}return i},t.prototype.insertPrintStylingInDOM=function(e,t){var i=this;if(null!=this.printContainerSelector){if(this.featureSwitchService.featureSwitches.printingEnabled===!1)return this.printMediaQueryElement||this.localizationService.ensureLocalization((function(){var e=i.localizationService.get("PrintingIsDisabledForThisTenantMessage"),t=$("<div>").addClass("errorTitle").text(e),o=$("<div>").attr("id","printDisabledOverlay").append(t);i.printMediaQueryElement=o,$("body").append(i.printMediaQueryElement)})),void t.hide();this.printMediaQueryElement||(this.printMediaQueryElement=$("<style></style>").attr("type","text/css"),$("body").append(this.printMediaQueryElement));var o=this.calculateStyle(t,e),a=this.getStyleString(o),n=jsCommon.StringExtensions.format(r,this.printContainerSelector,a);this.printMediaQueryElement.html(n)}},t.prototype.removePrintStylingFromDOM=function(e){this.printMediaQueryElement&&(this.printMediaQueryElement.remove(),this.printMediaQueryElement=void 0),this.featureSwitchService.featureSwitches.printingEnabled===!1&&e.show()},t})();t.BasePrinter=s})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=40,i=(function(i){function o(){i.apply(this,arguments),this.printContainerSelector="[dashboard-printer]"}return __extends(o,i),o.prototype.calculateStyle=function(i,o){var r=o.gridLayoutContainer.containerWidth+t,a=o.gridLayoutContainer.containerHeight,n=e.BasePrinter.getPrintTargetViewPort(i),s=e.BasePrinter.calculateScaleFactor({width:r,height:a},n);return s<=0?{}:{transform:"scale("+s+") !important","-webkit-transform":"scale("+s+") !important",width:r+"px !important",height:a+"px !important",overflow:"visible !important"}},o})(e.BasePrinter);e.DashboardPrinter=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=40,i=(function(i){function o(){i.apply(this,arguments),this.printContainerSelector="[explore-canvas-printer]"}return __extends(o,i),o.prototype.calculateStyle=function(i,o){var r=i.width()+t,a=i.height(),n=e.BasePrinter.getPrintTargetViewPort(i),s=i.find(".visualContainer");if(s.length>0){var c=0,l=0;s.each((function(e,t){var i=$(t),o=i.position(),r=Math.max(0,o.left),a=Math.max(0,o.top);c=Math.max(c,r+i.width()),l=Math.max(l,a+i.height())}));var d=e.BasePrinter.calculateScaleFactor({width:r,height:a},{width:c,height:l},!0);r*=d,a*=d}var p=e.BasePrinter.calculateScaleFactor({width:r,height:a},n),u=r*p,v=a*p,h=(n.width-u)/2,g=(n.height-v)/2;return{width:r+"px !important",height:a+"px !important",transform:"translate("+h+"px, "+g+"px) scale("+p+") !important","-webkit-transform":"translate("+h+"px, "+g+"px) scale("+p+") !important","transform-origin":"left top !important","-webkit-transform-origin":"left top !important",left:"auto !important",top:"auto !important",right:"auto !important",bottom:"auto !important"}},o})(e.BasePrinter);e.ExploreCanvasPrinter=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/publishContentPackView.html",this.scope={viewModel:"=",dashboardContainer:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.PublishContentPackView)}return t})();t.PublishContentPackView=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/qrCodeDialog.html",this.replace=!0,this.controller=e.common.Services.createController(e.controllers.QrCodeDialogController)}return t})();t.QrCodeDialog=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/qrCodeProgressDialog.html",this.replace=!0,this.controller=e.common.Services.createController(e.controllers.QRCodeProgressDialogController)}return t})();t.QrCodeProgressDialog=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/requestDashboardAccess.html",this.scope={viewModel:"=?"},this.controller=e.common.Services.createController(e.controllers.RequestDashboardAccessController)}return t})();t.RequestDashboardAccess=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/requestDashboardAccessModal.html",this.replace=!0}return e})();e.RequestDashboardAccessModal=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.controller=e.common.Services.createController(e.controllers.ManageDatasetsController),this.restrict="E",this.bindToController=!0,this.controllerAs="$ctrl",this.scope={},this.templateUrl="views/settings/manageDatasets.html",this.link=function(e,t,i,o){window.setTimeout((function(){var e=t.find(".manageDatasetsPane .search input");e.focus()}),100)}}return t})();t.ManageDatasets=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/rowLevelSecurity/rowLevelSecurity.html",this.replace=!0,this.controller=e.common.Services.createController(e.controllers.rowLevelSecurity.RowLevelSecurityController)}return t})();t.RowLevelSecurity=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/settings/refreshStatusView.html",this.replace=!0}return e})();e.RefreshStatus=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/settings/refreshWelcomeView.html",this.replace=!0}return e})();e.RefreshWelcome=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/settings/settingsCloseAccountView.html",this.scope={},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.SettingsCloseAccountController)}return t})();t.SettingsCloseAccount=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/settings/settingsDashboardView.html",this.scope={viewModel:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.SettingsDashboardController)}return t})();t.SettingsDashboard=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/settings/settingsDashboardsView.html",this.scope={viewModel:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.SettingsDashboardsController)}return t})();t.SettingsDashboards=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/settings/settingsDatasetView.html",this.scope={viewModel:"=",storageRefreshSupported:"=?"},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.SettingsDatasetController)}return t})();t.SettingsDataset=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/settings/settingsDatasetFeaturedQuestionsView.html",this.scope={viewModel:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.SettingsDatasetFeaturedQuestionsController),this.link=function(e,t,i){e.focusOnLastInput=function(){t.find('input[type="text"]').last().focus()}}}return t})();t.SettingsDatasetFeaturedQuestions=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/settings/settingsDatasetsView.html",this.scope={viewModel:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.SettingsDatasetsController)}return t})();t.SettingsDatasets=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/settings/settingsEsriView.html",this.scope={viewModel:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.SettingsEsriController)}return t})();t.SettingsEsri=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/settings/settingsGeneralView.html",this.scope={viewModel:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.SettingsGeneralController)}return t})();t.SettingsGeneral=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/settings/settingsPluginsView.html",this.scope={viewModel:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.SettingsPluginsController)}return t})();t.SettingsPlugins=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/settings/settingsPrivacyView.html",this.scope={viewModel:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.SettingsPrivacyController)}return t})();t.SettingsPrivacy=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/settings/settingsPublishedContentView.html",this.scope={},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.SettingsPublishedContentController)}return t})();t.SettingsPublishedContent=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/settings/settingsLanguageView.html",this.scope={viewModel:"="},this.controller=e.common.Services.createController(e.controllers.SettingsLanguageController)}return t})();t.SettingsLanguage=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/settings/settingsViewerView.html",this.scope={},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.SettingsViewerController)}return t})();t.SettingsViewer=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/settings/settingsDatasetsView.html",this.scope={viewModel:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.SettingsWorkbooksController)}return t})();t.SettingsWorkbooks=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/shareView.html",this.scope={viewModel:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.ShareView)}return t})();t.ShareView=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/taskPaneSliderView.html",this.replace=!0,this.controller=e.common.Services.createController(e.controllers.TaskPaneSliderController)}return t})();t.TaskPaneSlider=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.models.TileFactory,o=(function(){function t(t){var o=this;this.controller=e.common.Services.createController(e.controllers.TileEditorController),this.replace=!0,this.restrict="E",this.scope={},this.templateUrl="views/tileEditor.html",this.link=function(e,t){var r=e.viewModel.tile.config;if(r&&r.widget){var a=i.getTileTemplate(r.widget.id),n=o.$compile(a)(e);t.find(".widgetEditorContent").append(n)}var s=!1;t.find("input").keyup((function(t){if(!(t.keyCode!==jsCommon.DOMConstants.escKeyCode&&t.keyCode!==jsCommon.DOMConstants.enterKeyCode||s)){s=!0,t.target.blur(),t.keyCode===jsCommon.DOMConstants.escKeyCode?e.closeTileEditorWithoutSaving():t.keyCode===jsCommon.DOMConstants.enterKeyCode&&e.saveChangesAndExit();try{e.$apply()}catch(e){}t.target.focus(),s=!1}})),window.setTimeout((function(){var e=t.find(".displayText");e.is(":disabled")?t.find(".pbi-input input").first().focus():e.focus()}),500)},this.$compile=t}return t})();t.TileEditor=o})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.controller=e.common.Services.createController(e.controllers.TileGalleryController),this.restrict="E",this.bindToController=!0,this.controllerAs="$ctrl",this.scope={},this.templateUrl="views/tileGallery.html"}return t})();t.TileGallery=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/tiles/compositeTile.html",this.replace=!0,this.scope={viewModel:"=",allowInteractivity:"@"},this.controller=e.common.Services.createController(e.controllers.CompositeTileController)}return t})();t.CompositeTile=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.constants,o=e.dataServices.constants,r=(function(){function t(){this.restrict="E",this.templateUrl="views/tiles/dashboardTile.html",this.replace=!0,this.scope={viewModel:"=",canEdit:"=",disableInteractions:"=?",addTileToMobileView:"&?",removeTileFromMobileView:"&?",viewportContextSelector:"<?"},this.link=function(r,a,n){var s=r.viewModel.report;s&&a.attr("data-report-id",s.id),r.disableInteractions="true"===n.disableInteractions,r.disablePointerEvents="true"===n.disablePointerEvents||r.disableInteractions,r.onceInViewport=function(){r.inViewport=!0},r.$on(e.controllers.DashboardTileController.Events.DeleteTile,(function(e,t){e.stopPropagation&&e.stopPropagation(),a.hide()}));var c=r.$root.$on(o.deleteModelStartedEventName,(function(e,t){var i=r.viewModel.datasetModel;i&&i.id===t&&a.hide()})),l=r.$root.$on(o.deleteModelFailedEventName,(function(e,t){var i=r.viewModel.datasetModel;i&&i.id===t&&a.show()}));r.$watch("canEdit",(function(e,i){var o=e?"false":"true";a.attr(t.DragResizeDisabledAttr,o)})),r.isTileElementChanging=function(){return a.hasClass("changing")};var d=r.viewModel,p=a.find(".tileContent")[0],u=function(e){r.openTile(!1,e)&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)};d&&!d.reportTile&&p&&p.addEventListener("click",u,!0),r.$on(i.scopeDestroyEventName,(function(){p&&p.removeEventListener("click",u,!0),l(),c()}))},this.controller=e.common.Services.createController(e.controllers.DashboardTileController)}return t.DragResizeDisabledAttr="drag-resize-disabled",t})();t.DashboardTile=r})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/tiles/errorPlaceholder.html",this.replace=!0,this.scope={errorText:"=",errorDetails:"=?"},this.controller=e.common.Services.createController(e.controllers.ErrorPlaceholderController)}return t})();t.ErrorPlaceholder=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t,i,o){var r=this;this.restrict="E",this.replace=!0,this.scope={viewModel:"="},this.templateUrl="views/tiles/iframeTile.html",this.link=function(t,i){function o(e){a.postMessage({embedCode:e},"*")}var a,n=!1;if(t.iframeSource=embeddedWebContentIframeSource,!r.networkAvailability.isNetworkAvailable()){var s=r.localizationService.get("Tile_ErrorText");return void t.$emit(e.common.constants.tileErrorEventName,s)}var c=function(e){e.data&&e.data.iframeLoaded&&(a=i.find("iframe").first()[0].contentWindow,a&&e.source===a&&(n=!0,o(t.viewModel.embedCode),r.$window.removeEventListener(jsCommon.DOMConstants.messageEventName,c)))};r.$window.addEventListener(jsCommon.DOMConstants.messageEventName,c),t.$watch("viewModel.embedCode",(function(e){n&&o(e)}))},this.$window=t,this.networkAvailability=i,this.localizationService=o}return t})();t.IframeTile=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/tiles/imageTile.html",this.replace=!0,this.scope={viewModel:"="}}return e})();e.ImageTile=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/tiles/modelTile.html",this.replace=!0,this.scope={viewModel:"="},this.link=function(t){t.imageUrl=e.dataServices.constants.modelPlaceholderImageUrl}}return t})();t.ModelTile=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/tiles/reportTile.html",this.replace=!0,this.scope={viewModel:"="},this.controller=e.common.Services.createController(e.controllers.ReportTileController)}return t})();t.ReportTile=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/tiles/ssrsTile.html",this.replace=!0,this.scope={viewModel:"="}}return e})();e.SsrsTile=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/tiles/tile.html",this.replace=!0,this.scope={viewModel:"=",headerClickTarget:"&"},this.controller=e.common.Services.createController(e.controllers.Tile),this.link=function(e,t,i){e.disablePointerEvents="true"===i.disablePointerEvents,e.largeHeader=i.hasOwnProperty("largeHeader"),e.allowInteractivity=i.allowInteractivity,e.largeHeader&&e.viewModel.setTileHeaderSize(0)}}return t})();t.Tile=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/tiles/workbookTile.html",this.replace=!0,this.scope={viewModel:"=",title:"="},this.controller=e.common.Services.createController(e.controllers.WorkbookTileController),this.link=function(e,t,i){e.onTileImageReady=function(e){t.find("img.internalWorkbookTileImage").load((function(t){e(t.currentTarget)}))}}}return t})();t.WorkbookTile=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){var e=this;this.restrict="E",this.templateUrl="views/usageBarView.html",this.replace=!0,this.scope={usageBarModel:"=",viewModel:"="},this.link=function(t,i,o){t.$watch("usageBarModel.selfUsageInPercent",(function(){e.updateBar(t,i)})),t.$watch("usageBarModel.otherUsageInPercent",(function(){e.updateBar(t,i)}))}}return e.prototype.updateBar=function(e,t){var i=e.usageBarModel.selfUsageInPercent,o=e.usageBarModel.otherUsageInPercent,r=t.find(".usageBar"),a=t.find(".legends"),n=r.outerWidth(!0),s=n*i,c=n*o,l=r.children();r.hasClass("threebars")&&r.removeClass("threebars"),r.hasClass("twobars")&&r.removeClass("twobars"),r.hasClass("onebar")&&r.removeClass("onebar"),a.hasClass("threebars")&&a.removeClass("threebars"),a.hasClass("twobars")&&a.removeClass("twobars"),i+o<=1?($(l[0]).css("width",s+"px"),$(l[1]).css("width",c+"px"),$(l[2]).css("width",n-s-c+"px"),r.addClass("threebars"),a.addClass("threebars")):i>1?($(l[0]).css("width",n+"px"),$(l[1]).css("width","0px"),$(l[2]).css("width","0px"),r.addClass("onebar"),a.addClass("twobars")):($(l[0]).css("width",s+"px"),$(l[1]).css("width",n-s+"px"),$(l[2]).css("width","0px"),r.addClass("twobars"),a.addClass("twobars"))},e})();e.UsageBar=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t,i,o,r){var a=this;this.restrict="E",this.templateUrl="views/usageBarMenuItemView.html",this.replace=!0,this.scope={text:"=?",usageDescription:"=?",labelClass:"=?"},this.link=function(e,t,i){a.updateBar(e,t),e.$watchGroup([function(){return a.quota.quotaLimitInMB},function(){return a.modelService.lastUpdatedTimestamp},function(){return a.workbookService.lastUpdatedTimestamp}],(function(){a.updateBar(e,t)})),e.$watch((function(){return a.groupService.activeGroup}),(function(){a.updateBar(e,t)}))},this.quota=e,this.modelService=t,this.workbookService=i,this.groupService=o,this.featureSwitchService=r}return e.prototype.updateBar=function(t,i){var o=this.quota.getUsageBarMenuItemViewModel();t.text=o.text,t.usageDescription=o.usageDescription;var r=o.usageInMB/o.quotaLimitInMB,a=i.find(".usageBar"),n=a.outerWidth(!0),s=n*r,c=a.children();a.hasClass(e.onebarClass)&&a.removeClass(e.onebarClass),a.hasClass(e.twobarsClass)&&a.removeClass(e.twobarsClass),r<=1?($(c[0]).css("width",s+"px"),$(c[1]).css("width",n-s+"px"),a.addClass(e.twobarsClass)):($(c[0]).css("width",n+"px"),$(c[1]).css("width","0px"),a.addClass(e.onebarClass))},e.onebarClass="onebar",e.twobarsClass="twobars",e})();e.UsageBarMenuItem=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/userGroupHeaderView.html",this.scope={viewModel:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.UserGroupHeaderController)}return t})();t.UserGroupHeader=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.replace=!0,this.transclude=!0,this.controller=e.common.Services.createController(e.controllers.UserInfoController),this.template='<div ng-transclude class="userInfo"></div>'}return t})();t.UserInfoContainer=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/viewContentPack.html",this.scope={viewModel:"=",dashboardContainer:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.ViewContentPack)}return t})();t.ViewContentPack=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/warningBar.html",this.replace=!0,this.scope={viewModel:"="},this.controller=e.common.Services.createController(e.controllers.WarningBarController)}return t})();t.WarningBar=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/waterMarkMessage.html",this.scope={config:"="}}return e})();e.WaterMarkMessage=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.replace=!0,this.templateUrl="views/workbookAppBar.html",this.scope={viewModel:"="},this.controller=e.common.Services.createController(e.controllers.WorkbookAppBarController)}return t})();t.WorkbookAppBar=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/workbookContainer.html",this.replace=!0,this.scope={viewModel:"="},this.controller=e.common.Services.createController(e.controllers.WorkbookContainerController),this.link=function(e,t,i){e.getEwaTargetWindow=function(){var e=t.find("iframe.workbookEWAIsolation")[0];return e.contentWindow}}}return t})();t.WorkbookContainer=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.replace=!0,this.templateUrl="views/workbookDiscoverabilityToast.html"}return e})();e.WorkbookDiscoverabilityToast=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){}return t.showArtifactDoesNotExistDialog=function(t,i,o,r){o.ensureLocalization((function(){var a=o.get(t),n=o.format("ArtifactDoesNotExistTitleFormat",[a]),s=o.get("ArtifactDoesNotExistMessage");r.logEvent(e.telemetry.ArtifactNotFound,t);var c={label:o.get("PBI_Button_Label_OK"),resultValue:"ok",cssClass:"primary"},l=[c];i.error(s,"artifactNotFound",{title:n,dialogOptions:l,isDismissable:!0,showAdditionalErrorInfo:!1})}))},t})();t.ArtifactNotFoundHelper=i})(t=e.helpers||(e.helpers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){}return t.HasUnsupportedExploreVisuals=function(e,t){var i=!1;if(e){var o=e.sections;if(o)for(var r=0,a=o.length;r<a;r++){var n=o[r],s=n.visualContainers;if(s)for(var c=0,l=s.length;c<l;c++){var d=s[c],p=d.config.singleVisual.visualType;if(p&&!t.getPlugin(p)){if(e.resourcePackages&&e.resourcePackages.some((function(e){return e.name===p})))continue;i=!0;break}}}}return i},t.IsReportSavedAsExploration=function(e){return e.hasExploration||!e.reportUrl},t.getSlideIndex=function(e,t){if(e&&e.reportSlides)for(var i=e.reportSlides,o=i.length,r=0;r<o;++r){var a=i[r];if(a.name===t)return r}return-1},t.getSlideName=function(e,t){if(void 0!==t&&"number"==typeof t&&e&&e.reportSlides&&e.reportSlides.length>t){
var i=e.reportSlides,o=i[t];return o.name}return null},t.shouldDisplayErrorAsNotificationBar=function(t){return t===e.DMTS_NoGatewayWithAllDatasourcesToBindError||t===e.DMTS_MultipleGatewaysWithAllDatasourcesToBindError||t===e.DMTS_DatasourceHasNoCredentialError||t===e.DM_GWPipeline_Client_GatewayUnreachable||t===e.DMTS_UserLostPermissionToDatasourceError||t===e.DMTS_UserNotFoundInADGraphError||t===e.DM_GWPipeline_Gateway_DataSourceConnectionError||t===e.DM_GWPipeline_Gateway_DataSourceAccessError||t===e.DM_GWPipeline_Gateway_ImpersonationError||t===e.DM_GWPipeline_Gateway_InvalidMashupConnectionString||t===e.DM_GWPipeline_Gateway_DatabaseLoginError||t===e.DM_GWPipeline_Gateway_SqlTimeoutException||t===e.DM_GWPipeline_Gateway_AdomdTimeoutException||t===e.DM_GWPipeline_Gateway_InvalidObjectNameException||t===e.DM_GWPipeline_Gateway_ConnectionBrokenException||t===e.DM_GWPipeline_Gateway_MemoryError||t===e.DM_GWPipeline_Gateway_MissingStructureError||t===e.DM_GWPipeline_Gateway_UnprocessedStructureError||t===e.DM_GWPipeline_Gateway_ModelLoadError||t===e.DM_GWPipeline_Gateway_CancellationError||t===e.DM_GWPipeline_Gateway_QueryExecutionError||t===e.DM_GWPipeline_Gateway_RecalculationRequiredError||t===e.DM_GWPipeline_Gateway_AdomdConnectError||t===e.DM_GWPipeline_Gateway_MashupDataAccessError||t===e.RS_CannotRetrieveModel||t===e.RS_AccessDeniedDueToRLSGroup||t===e.RS_AccessDenied},t})();t.ReportUtility=i})(t=e.helpers||(e.helpers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.contracts.StorageProviderType,o=(function(){function o(){}return o.isImageSizeValid=function(e){return e<=this.ImageSizeLimit},o.isParameterImageSizeValid=function(e){return e<=this.ImageSizeLimit},o.isTitleEmpty=function(e){return!e||0===e.length},o.isTitleValid=function(e){return e&&e.length<=this.TitleSizeLimit},o.isDescriptionEmpty=function(e){return!e||0===e.length},o.isDescriptionValid=function(e){return e&&e.length<=this.DescriptionSizeLimit},o.isLegacyReport=function(e){return e&&!t.ReportUtility.IsReportSavedAsExploration(e.contract)},o.isLocalWorkbook=function(e,t){var o=t.findPackage(e.contract.packageId);return o&&o.contract.storageProviderType===i.Local},o.doesDashboardContainLegacyReports=function(e,i){return!(!e||!e.contract)&&_.any(e.contract.reportIds,(function(e){var o=i.findReport(e);return o&&!t.ReportUtility.IsReportSavedAsExploration(o.contract)}))},o.isTemplatingAllowed=function(t,i,o,r,a,n,s){if(!_.isEmpty(r))return!1;if(!s||"undefined"==typeof s)return!1;if(!o||1!==o.length)return!1;if(!t||1!==t.length)return!1;if(!i||i.length<1)return!1;var c=t[0],l=c.contract.modelIds;if(!l||l.length<1||l.length>1)return!1;for(var d=!1,p=0,u=l;p<u.length;p++){var v=u[p],h=a.findModel(v),g=n.findPackage(h.contract.packageId);if(!g||!g.contentProviderId||g.contentProviderId!==e.common.constants.pbiDesktopContentProviderId)return!1;for(var m=s.datasetModels,f=0,y=m;f<y.length;f++){var b=y[f];if(b.id===v){d=!0;for(var S=0,w=b.refreshConnections;S<w.length;S++){var C=w[S];if(!C.isDMValidated&&(C.onpremGatewayRequired||_.isEmpty(C.connectionString)||C.connectionString.indexOf("Microsoft.Mashup")<0))return!1}}}}return d},o.ImageTypeNotAllowed="ImageTypeNotAllowed",o.InvalidImageFormat="InvalidImageFormat",o.ErrorHeader="X-PowerBI-Error-Details",o.ErrorInfoHeader="X-PowerBI-Error-Info",o.GroupsErrorCode="GroupOrPrincipalValidationFailed",o.GroupsErrorKey="FailedGroupOrPrincipals",o.ServicePlanErrorCode="PrincipalDoesNotHaveKnownOrValidServicePlan",o.ServicePlanErrorKey="FailedPrincipals",o.DescriptionSizeLimit=2e3,o.TitleSizeLimit=200,o.ImageSizeLimit=65e3,o})();t.ContentPackAuthoringHelper=o})(t=e.helpers||(e.helpers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=2e3,i=(function(){function e(e,t){this.newQueryResultUpdates=[],this.explorationId=e,this.explorationProxy=t}return e.prototype.onNewQueryCacheResultAvailable=function(e){var i=this;this.newQueryResultUpdates.push(e),1===this.newQueryResultUpdates.length&&setTimeout((function(){var e={visualQueryResults:_.map(i.newQueryResultUpdates,(function(e){var t={visualContainerId:e.visualContainerId,query:e.query,dataTransforms:e.dataTransforms};return t}))};i.explorationProxy.saveVisualContainerQueries(i.explorationId,e),i.newQueryResultUpdates=[]}),t)},e})();e.VisualContainerQueryUpdater=i})(t=e.helpers||(e.helpers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){var e=this;this.reports=[],this.dashboards=[],this.tiles=[],this.models=[],this.isReportExpanded=!0,this.isDashboardExpanded=!1,this.isTileExpanded=!1,this.onCuratedContentExpanded=function(t){e.openOneAtTime(t)}}return Object.defineProperty(e.prototype,"dashboardCount",{get:function(){return this.dashboards.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tileCount",{get:function(){return this.tiles.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reportCount",{get:function(){return this.reports.length},enumerable:!0,configurable:!0}),e.prototype.addModels=function(e){e=e||[];for(var t=0;t<e.length;t++)this.models.push(e[t])},e.prototype.addReports=function(e){e=e||[];for(var t=0;t<e.length;t++)e[t].reportUrl&&this.reports.push(e[t])},e.prototype.addDashboards=function(e){e=e||[];for(var t=0;t<e.length;t++)this.dashboards.push(e[t])},e.prototype.addTiles=function(e){e=e||[];for(var t=0;t<e.length;t++)this.tiles.push(e[t])},e.prototype.updateContentData=function(e){this.reports=e.reports,this.dashboards=e.dashboards,this.tiles=e.tiles,this.models=e.models,this.packageId=e.packageId},e.prototype.openOneAtTime=function(e){"report"===e?(this.isReportExpanded=!this.isReportExpanded,this.isReportExpanded&&(this.isDashboardExpanded=!1,this.isTileExpanded=!1)):"dashboard"===e?(this.isDashboardExpanded=!this.isDashboardExpanded,this.isDashboardExpanded&&(this.isReportExpanded=!1,this.isTileExpanded=!1)):"tile"===e&&(this.isTileExpanded=!this.isTileExpanded,this.isTileExpanded&&(this.isReportExpanded=!1,this.isDashboardExpanded=!1))},e})();e.ActivityPaneCuratedContentModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function i(){this._connectionOptionsTag=-1}return Object.defineProperty(i.prototype,"connectionOptionsTag",{get:function(){return this._connectionOptionsTag},enumerable:!0,configurable:!0}),i.prototype.onPackageSelectionChange=function(e){this.packageSelectionEvent=e},i.prototype.updatePackagesData=function(e){if(e){var t=-1,i=null;this.packageItems&&(t=this.packageItems.selectedIndex,i=this.packageItems.selectedItem),this.packageModels=[],this.activityPaneData=e.activityPaneData,this.packageItems=this.initializePackageNames(i),t!==-1?this.packageItems.selectedIndex=t:this.packageItems.itemsCount>0&&(this.packageItems.selectedIndex=0)}},i.prototype.initializePackageNames=function(i){var o=this,r=[];if(this.activityPaneData.length>0){r=this.activityPaneData.map((function(e){return new t.ComboBoxItem(e.packageName,e.packageId)})),this.packageItems||(this.packageItems=new t.ComboBoxModel),this.packageItems.clearItems(),r.sort((function(e,t){return e.name.toLowerCase().localeCompare(t.name.toLowerCase())}));for(var a=0;a<r.length;a++)this.packageItems.addItem(r[a]);this.packageItems.selectedIndex===-1&&this.packageItems.itemsCount>0&&(this.packageItems.selectedIndex=0),this.packageItems.addSeparator(),this.packageItems.addItem(new t.ComboBoxItem(e.common.localize.get("ActivityPane_ConnectionOptionsText"),this.connectionOptionsTag,t.ComboBoxItemType.Text,(!1))),i=i||this.packageItems.selectedItem,this.populateSelectedPackageModels(i)}return this.packageItems.onClickEvent=function(e){return o.onPackageItemSelected(e)},this.packageItems.onDropDownEvent=function(){return o.onPackageItemSelected()},this.packageItems},i.prototype.onPackageItemSelected=function(e){e=e||this.packageItems.selectedItem,this.populateSelectedPackageModels(e),this.packageSelectionEvent&&this.packageSelectionEvent(e)},i.prototype.populateSelectedPackageModels=function(t){if(t.tag!==this.connectionOptionsTag)for(var i=this.activityPaneData,o=0;o<i.length;o++){var r=i[o];if(r.packageId===t.tag){if(!r.models)return;if(this.packageModels=[],1===r.models.length){var a=r.models[0];this.packageModels[0]={modelId:a.id,modelName:e.common.localize.get("ActivityPane_Explore")}}else for(var n=0;n<r.models.length;n++){var a=r.models[n];this.packageModels[n]={modelId:a.id,modelName:e.common.localize.get("ActivityPane_Explore")+" "+a.displayName}}break}}},i})();t.ActivityPaneDataPackagesModel=i;var o=(function(){function e(e,t){this.modelId=e,this.modelName=t}return e})();t.ActivityPanePackageModel=o})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e){this.contract=e}return e})();e.ActivityPaneModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function i(e,i,o,r){this.localizationService=r,this.alerts=e?e:[],this.tileName=i.getDisplayText(),this.measureName=o,this.tileModel=i,this.moreOptionsMenu=[{action:0,text:r.get("AlertsPane_Collapse"),type:DropDownMenuItemType.Item}],this.operatorOptions=[{label:r.get("AlertsPane_GreaterThanOperator"),value:0},{label:r.get("AlertsPane_LessThanOperator"),value:1}],this.frequencyOptions=[{label:"AlertsPane_NotificationFrequencyDay",value:0},{label:"AlertsPane_NotificationFrequencyHour",value:1}],this.alertFailureMessages=[{message:r.get("AlertsPane_CreateError"),value:t.AlertFailureState.Create},{message:r.get("AlertsPane_UpdateError"),value:t.AlertFailureState.Update},{message:r.get("AlertsPane_DeleteError"),value:t.AlertFailureState.Delete}]}return i.prototype.addNewEmptyAlert=function(e){var i=this.tileModel.getDisplayText();if(i){var o=t.factory.AlertsModelFactory.createEmptyAlert(i,this.measureName,this.localizationService.format("AlertsPane_AlertsForTile",[i]),e);this.alerts.unshift(o)}},i.prototype.isValid=function(){return _.every(this.alerts,(function(t){return t.title.length<=e.constants.alertTitleMaxLength&&t.title.length>0&&jQuery.isNumeric(t.thresholdValue)}))},i})();t.AlertsEditorModel=i})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){!(function(e){e[e.None=0]="None",e[e.Create=1]="Create",e[e.Update=2]="Update",e[e.Delete=3]="Delete"})(e.AlertFailureState||(e.AlertFailureState={}));e.AlertFailureState})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){!(function(e){e[e.Text=1]="Text",e[e.Separator=2]="Separator"})(e.ComboBoxItemType||(e.ComboBoxItemType={}));var t=e.ComboBoxItemType,i=(function(){function e(e,i,o,r){this._name=e,this._tag=i,this._type=o||t.Text,this._selectable="undefined"==typeof r||r}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this._selectable},enumerable:!0,configurable:!0}),e})();e.ComboBoxItem=i;var o=(function(){function e(){this._items=[],this._dialogVisible=!1,this._selectedIndex=-1,this._separatorTag=-9}return Object.defineProperty(e.prototype,"separatorTag",{get:function(){return this._separatorTag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return this._dialogVisible},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this._items[this._selectedIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(e){this._selectedIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsCount",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onClickEvent",{set:function(e){this._onClickEvent=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDropDownEvent",{set:function(e){this._onDropDownEvent=e},enumerable:!0,configurable:!0}),e.prototype.clearItems=function(){this._items=[]},e.prototype.addItem=function(e){this._items.push(e)},e.prototype.addSeparator=function(){this._items.push(new i("",(-9),t.Separator,(!1)))},e.prototype.collapse=function(){this._dialogVisible=!1},e.prototype.toggle=function(e){this._dialogVisible||this._onDropDownEvent&&this._onDropDownEvent(),this._dialogVisible=!this._dialogVisible,e.stopPropagation()},e.prototype.itemClick=function(e){this._onClickEvent&&this._onClickEvent(this._items[e]),this._items[e].selectable&&(this._selectedIndex=e)},e})();e.ComboBoxModel=o})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e})();e.ContentProviderStoreModel=t})(t=e.contentProviderStore||(e.contentProviderStore={}))})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function i(i){var o=this;this.contract=i,this.contentProviderDialogModel=new e.common.models.ModalDialogModel((!1),"Ok",(!0),(!0),(!0),(!1)),this.sharePane=new t.ShareViewModel,this.manageStoragePane=new t.ManageStorageViewModel,this.manageEmbedPane=new t.ManageEmbedViewModel,this.publishPane=new t.PublishContentPackViewModel,this.temporaryDashboardMap=null,this.accessRequestInfo={dashboardObjectId:""},this.viewMode=0,e.common.localize.ensureLocalization((function(){o.contentProviderDialogModel.confirmButtonText=e.common.localize.get("DashboardContainer_Ok")}))}return Object.defineProperty(i.prototype,"dashboards",{get:function(){return this._dashboards},set:function(e){this._dashboards=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visibleDashboards",{get:function(){return _.filter(this._dashboards,(function(e){return!e.isHidden}))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"models",{get:function(){return this.contract.models},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isPhonePortraitViewMode",{get:function(){return 1===this.viewMode},enumerable:!0,configurable:!0}),i.prototype.cacheTemporaryDashBoardMapping=function(e,t){this.temporaryDashboardMap={temporaryId:e,resolvedId:t}},i.prototype.calculateLayout=function(){if(this._dashboards)for(var e=0,t=this._dashboards;e<t.length;e++){var i=t[e];i.calculateLayout()}},i.prototype.applyLayout=function(e){if(this._dashboards)for(var t=0,i=this._dashboards;t<i.length;t++){var o=i[t];o.applyLayout()}},i.prototype.findDashboard=function(e){return this.dashboards[this.getDashboardIndex(e)]},i.prototype.findDashboardByGUID=function(e){var t=this.dashboards;this.temporaryDashboardMap&&this.temporaryDashboardMap.resolvedId&&this.temporaryDashboardMap.temporaryId&&this.temporaryDashboardMap.temporaryId===e&&(e=this.temporaryDashboardMap.resolvedId);for(var i=0,o=t.length;i<o;i++)if(t[i].objectId===e)return t[i]},i.prototype.getDashboardIndex=function(e){for(var t=this.dashboards,i=0,o=t.length;i<o;i++)if(t[i].id===e)return i;return-1},i})();t.DashboardContainer=i})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){!(function(e){e[e.ImportData=0]="ImportData",e[e.ViewExcel=1]="ViewExcel"})(e.UploadFormat||(e.UploadFormat={}));e.UploadFormat;!(function(e){e[e.Local=0]="Local",e[e.OneDrive=1]="OneDrive",e[e.DropBox=2]="DropBox",e[e.OneDrivePro=3]="OneDrivePro",e[e.SharePoint=4]="SharePoint"})(e.HostType||(e.HostType={}));e.HostType})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.models.EmailsListModel,o=(function(){function t(e){this.isAdmin=!(!e||!e.contract)&&e.contract.isOwner,this.groupName=e?e.displayName:"",this.groupId="",this.emailsList=new i,this.displayMemberList=[],this.originalDisplayMemberList=[],this.invalidEmailAddressesErrorMessage="",this.notExitingEmailAddressesErrorMessage="",this.privacyOption=e&&e.contract&&e.contract.isPublic?0:1,this.accessControlOption=e&&e.contract&&e.contract.isReadOnly?1:0,this.initPrivacyOptions(),this.initAccessControlOptions(),this.initMemberRoleOptions()}return t.prototype.initPrivacyOptions=function(){this.privacyOptions=[{key:0,value:e.common.localize.get("GroupEditor_PrivacyOptions_Public")},{key:1,value:e.common.localize.get("GroupEditor_PrivacyOptions_Private")}]},t.prototype.initAccessControlOptions=function(){this.accessControlOptions=[{key:0,value:e.common.localize.get("GroupEditor_AccessControlOptions_ReadWrite")},{key:1,value:e.common.localize.get("GroupEditor_AccessControlOptions_ReadOnly")}]},t.prototype.initMemberRoleOptions=function(){this.groupMemberRoleOptions=[{key:1,value:e.common.localize.get("GroupEditor_RoleOptions_Admin")},{key:0,value:e.common.localize.get("GroupEditor_RoleOptions_Member")}]},t})();t.GroupEditorModel=o})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(t){var i=this;this.contextMenuItemList=[],t&&t.metadata&&(t.metadata.contextMenuItemList.forEach((function(e){i.contextMenuItemList.push(e)})),this.contextMenuSeparatorPosition=t.metadata.contextMenuItemList.length),0===this.contextMenuItemList.length&&(this.contextMenuSeparatorPosition=-1),t.isOwner||t.isPublic?this.contextMenuItemList.push({linkType:e.common.contracts.GroupLinkType.EditGroup}):this.contextMenuItemList.push({linkType:e.common.contracts.GroupLinkType.ViewGroup}),this.contextMenuItemList.push({linkType:e.common.contracts.GroupLinkType.LeaveGroup})}return t})();t.GroupMetadata=i})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function i(i){this.contract=i,i&&(this.aadGroupId=i.objectId,this.displayName=i.displayName,this.metadata=new t.GroupMetadata(i)),this.isMyWorkspace=!1,this.lastViewedDashboard=-1,this.lastOwnershipFilter=e.models.OwnershipFilterMenuFilter.AllContent}return i})();t.Group=i})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.showHistoryDialog=!1,this.showSpinner=!1}return e})();e.HistoryDialogModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e})();e.InsightsModel=t})(t=e.insights||(e.insights={}))})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.models.CollapsiblePaneModel,o=e.common.constants.TaskPaneCollapsiblePaneMode,r=(function(){function e(e){this.collapsiblePaneMode=o.Default,this.contract=e,this.showDashboardName=!1,this.collapsiblePane=new i,this.notificationPane=new i,this.showNotificationPane=!1}return e.prototype.calculateLayout=function(){this.dashboardContainer.calculateLayout(),this.reportContainer.calculateLayout()},e.prototype.applyLayout=function(){this.dashboardContainer.applyLayout(),this.reportContainer.applyLayout()},e})();t.LandingContainer=r})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e})();e.UsageBarModel=t;var i=(function(){function e(){this.ownedByMeSelected=!0}return e})();e.ManageStorageViewModel=i})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(i){function o(e,t,i,o,r,a,n){return new m(e,t,i,o,r,a,n)}var r=e.dataServices.models.AppPublishModel,a=e.dataServices.AppUtils,n=e.common.constants,s=e.dataServices.models.ContentPack,c=e.common.helpers.ModelConverterHelper,l=e.common.models.ReportContainer,d=e.dataServices.constants,p=e.dataServices.models.Dashboard,u=e.common.controllers.EmailsList,v=e.common.models.EmailsListModel,h=jsCommon.JsonExtensions,g=jsCommon.EnumExtensions;i.createModelConverter=o;var m=(function(){function o(e,t,i,o,r,a,n){this.telemetryService=e,this.errorService=t,this.visualPlugins=i,this.promiseFactory=o,this.geolocationService=r,this.dataServiceModelConverter=a,this.localizationService=n}return o.prototype.setModelMerger=function(e){this.modelMerger=e},o.prototype.convertAppPublishModel=function(t){var i=new r(t);i.displayName=t.displayText,i.objectId=t.providerKey,i.contentTileType=e.common.contracts.ContentTileType.PublishedOrgApp,i.url=e.helpers.UrlHelper.getAppUrl(i),i.emailsList=new v,i.emailsList.inputUserList=u.emailsToUsers(t.accessPermissions.listOfGroupsOrPrincipals),i.isSharedToEntireOrg=t.accessPermissions.isSharedToEntireOrganization,i.publishTime=a.getAppPublishDate(t),i.dashboardIds=i.dashboardIds||[],i.reportIds=i.reportIds||[],i.workbookIds=i.workbookIds||[],i.modelIds=i.modelIds||[];var o=h.tryParseJSON(t.providerConfig);if(o&&o.appSettings){var n=o.appSettings;i.defaultContentOption=n.defaultAppArtifact?1:0,i.defaultContent=n.defaultAppArtifact,i.icon=n.iconName,i.iconColor=n.iconColor,i.iconBackgroundColor=n.iconBackgroundColor,i.allowCopyContent=!!n.allowCopyContent}return i},o.prototype.convertLandingContainer=function(t){var o=new i.LandingContainer(t);return o.dashboardContainer=this.convertDashboardContainer(t.dashboardContainer),o.reportContainer=this.convertReportContainer(t.reportContainer),o.workbookContainer=this.convertWorkbookContainer(t.workbookContainer),o.qnaContainer=this.convertQnaContainer(t.qnaContainer),o.explorationContainer=e.explore.viewModels.ViewModelFactory.createExplorationContainer(),o},o.prototype.convertLandingContainerShallow=function(t){var o=new i.LandingContainer(t);return o.dashboardContainer=this.convertDashboardContainerShallow(t.dashboardContainer),o.reportContainer=this.convertReportContainerShallow(t.reportContainer),o.explorationContainer=e.explore.viewModels.ViewModelFactory.createExplorationContainer(),o},o.prototype.convertReportContainerShallow=function(e){var t=new l(e);return t},o.prototype.convertReportContainer=function(e){var t=this.convertReportContainerShallow(e);return this.fillReportContainerChildren(t,e),t},o.prototype.fillReportContainerChildren=function(e,t){t&&(e.report=this.convertReport(t),this.fillReport(e.report,t))},o.prototype.fillReport=function(e,t){this.dataServiceModelConverter.fillReport(e,t)},o.prototype.fillModel=function(e,t){this.dataServiceModelConverter.fillModel(e,t)},o.prototype.convertReport=function(e){return this.dataServiceModelConverter.convertReport(e)},o.prototype.convertPackage=function(e){return this.dataServiceModelConverter.convertPackage(e)},o.prototype.convertQnaContainerShallow=function(e){var t=new i.QnaContainer(e);return t},o.prototype.convertQnaContainer=function(e){var t=this,i=this.convertQnaContainerShallow(e);return e.models&&(i.models=e.models.map((function(e){return t.convertModel(e)}))),i},o.prototype.convertWorkbookContainerShallow=function(e){var t=new i.WorkbookContainer(e);return t},o.prototype.convertWorkbookContainer=function(e){var t=this.convertWorkbookContainerShallow(e);return this.fillWorkbookContainerChildren(t,e),t},o.prototype.fillWorkbookContainerChildren=function(e,t){t&&(e.workbook=this.convertWorkbook(t))},o.prototype.convertWorkbook=function(e){return this.dataServiceModelConverter.convertWorkbook(e)},o.prototype.convertWorkbookShallow=function(e){return this.dataServiceModelConverter.convertWorkbookShallow(e)},o.prototype.convertModel=function(e){return this.dataServiceModelConverter.convertModel(e)},o.prototype.convertAppDataset=function(e){return this.dataServiceModelConverter.convertAppDataset(e)},o.prototype.convertContentPack=function(e){return e?new s(e):null},o.prototype.convertReportShallow=function(e){return this.dataServiceModelConverter.convertReportShallow(e)},o.prototype.convertModelShallow=function(e){return this.dataServiceModelConverter.convertModelShallow(e)},o.prototype.convertPackageShallow=function(e){return this.dataServiceModelConverter.convertPackageShallow(e)},o.prototype.convertDashboardContainerShallow=function(e){var t=new i.DashboardContainer(e);return t.activeViewMode=e.activeViewMode,t.userId=e.userId,t.accessRequestInfo=e.accessRequestInfo,t},o.prototype.fillDashboardContainerDashboard=function(e,t){var i=this;if(t.dashboards&&1===t.dashboards.length){var o=t.packages||[],r=t.dashboards[0];r.tiles&&r.tiles.map((function(e){i.resolveTilePackage(e,o)}))}},o.prototype.setDashboardIsSample=function(t,i){t.resetSampleFields();var o=_.chain(i).filter((function(e){return e.contentProviderId===d.samplesContentProviderId})).map((function(e){return e.id})).value(),r=i.filter((function(e){return Object.keys(n.generatedSamplesContentProvidersMap).map((function(e){return parseInt(e,10)})).indexOf(e.contentProviderId)>=0})),a=t.contract.packageIds;if(a)for(var s=0;s<a.length;s++){var c=a[s];if(o.indexOf(c)>=0){t.isSharedSample=!0,t.isSample=!0,t.sampleProviderName=e.constants.samplesContentProviderName;break}for(var l=0,p=r.length;l<p;++l){var u=r[l];if(u.id===c){t.isSample=!0,t.sampleProviderName=this.getSampleProviderName(u.contentProviderId);break}}}},o.prototype.setDashboardHasOnPremiseModel=function(t,i){t.hasOnPremiseModel=!1;var o=_.chain(i).filter((function(t){return t.vsName===e.common.constants.onPremiseVSName})).map((function(e){return e.id})).value(),r=t.contract.modelIds;if(r)for(var a=0;a<r.length;a++){var n=r[a];if(o.indexOf(n)>=0){t.hasOnPremiseModel=!0;break}}},o.prototype.setDashboardHasUpdate=function(e,t){e.hasUpdate=!1;var i=_.find(t,(function(t){return t.id===e.contract.originalPackageId}));i&&i.latestVersion&&i.version!==i.latestVersion&&(e.hasUpdate=!0)},o.prototype.setDashboardsHasUpdate=function(e){for(var t=0,i=e;t<i.length;t++){var o=i[t];o.hasUpdate=!0}},o.prototype.getSampleProviderName=function(e){var t=n.generatedSamplesContentProvidersMap[e];return t?t:"Unknown Sample"},o.prototype.fillDashboardContainerDashboards=function(e,t){t.dashboards&&(e.userId=t.userId,this.fillDashboardContainerDashboardsFromBasicDashboardContainer(e,t))},o.prototype.fillDashboardContainerDashboardsFromBasicDashboardContainer=function(e,t){var i=this;if(t.dashboards){var o=t.reports||[],r=t.workbooks||[],a=t.models||[],n=t.packages||[];e.dashboards=t.dashboards.map((function(e){var s=i.convertDashboard(e,a,o,r);return i.setDashboardIsSample(s,n),i.setDashboardHasOnPremiseModel(s,a),i.setDashboardHasUpdate(s,n),e.id===t.activeDashboardId&&s.contract.tiles&&s.contract.tiles.map((function(e){i.resolveTilePackage(e,n)})),s}))}},o.prototype.updateDashboardContainerContract=function(e,t){this.updateDashboardContainerContractFromBasicDashboardContainer(e,t),e.groups=t.groups,e.userId=t.userId,e.previousTenantId=t.previousTenantId},o.prototype.updateDashboardsReportContract=function(e,t){t.reportIds.splice(e,1)},o.prototype.removeDashboardsWorkbookContract=function(e,t){t.workbookIds.splice(e,1)},o.prototype.updateDashboardContainerContractFromBasicDashboardContainer=function(e,t){var i=t.dashboards;void 0===t.activeDashboardId&&i&&i.length>0&&(t.activeDashboardId=i[0].id),this.modelMerger.mergeModelContentProviderId(t.models,t.packages),e.dashboards=i,e.activeDashboardId=t.activeDashboardId,e.models=t.models,e.reports=t.reports,e.workbooks=t.workbooks,e.packages=t.packages},o.prototype.resolveTilePackage=function(e,t){this.dataServiceModelConverter.resolveTilePackage(e,t)},o.prototype.getTileModel=function(e,t){return this.dataServiceModelConverter.getTileModel(e,t)},o.prototype.getTileReport=function(e,t){return this.dataServiceModelConverter.getTileReport(e,t)},o.prototype.getTileWorkbook=function(e,t,i){return this.dataServiceModelConverter.getTileWorkbook(e,t,i)},o.prototype.fillDashboardContainerDashboardsShallow=function(e,t){var i=this;t.dashboards&&(e.dashboards=t.dashboards.map((function(e){return i.convertDashboardShallow(e)})))},o.prototype.convertDashboardContainer=function(e){var t=this.convertDashboardContainerShallow(e);return this.fillDashboardContainerDashboards(t,e),e.activityPane&&(t.activityPane=this.convertActivityPane(e.activityPane)),t},o.prototype.convertActivityPane=function(e){var t=this,i=this.convertActivityPaneShallow(e);return e.contentProviders||(i.contentProviders=e.contentProviders.map((function(e){return t.convertContentProvider(e)}))),i},o.prototype.convertActivityPaneShallow=function(e){var t=new i.ActivityPaneModel(e);return t},o.prototype.convertContentProvider=function(t){if(!t)return null;var o=new i.ProviderTileModel(t);return o.backgroundImageUrl=e.build+t.iconUrl,o.displayText=t.displayText,o},o.prototype.convertContentProviderContractToContentProviderTileModel=function(e){var t=null;if(e){var i=this.promiseFactory.defer();e.authentication||i.resolve(""),t={contract:e,id:e.id,title:e.displayText,category:e.category,clientCategory:c.getContentProviderClientCategory(e),providerName:e.providerName,iconUrl:e.iconUrl?jsCommon.Utility.urlCombine(clusterUri,e.iconUrl):null,iconCSSClass:e.iconCSSClass,descriptionLocalizationKey:e.description,learnMoreUrl:e.learnMoreUrl,searchKeywords:e.searchKeywords,publisher:e.publisher,publishDate:e.publishDate,emailAddress:null,emailAddressAsLink:null,visible:!1,disableDetailPane:e.disableDetailPane,sortPriority:null!==e.sortPriority&&void 0!==e.sortPriority?e.sortPriority:n.contentProviderStoreTileMaxSortPriority,authentication:e.authentication,authenticationInitializationDeferred:i,authenticationInitializationInProgress:!0,finePrint:e.finePrint,autoRedirectUrlParams:e.autoRedirectUrlParams,customConfigurationHandler:e.customConfigurationHandler,tileGrouping:null,usePBIDesktop:e.usePBIDesktop}}return t},o.prototype.convertContentProviderContractToContentProviderTileModelWithGrouping=function(e){var t=null;return e&&(t={contract:e,id:e.id,title:e.grouping.groupingName,category:e.category,clientCategory:c.getContentProviderClientCategory(e),providerName:e.providerName,iconUrl:e.iconUrl?jsCommon.Utility.urlCombine(clusterUri,e.iconUrl):null,iconCSSClass:e.iconCSSClass,descriptionLocalizationKey:e.grouping.groupingDescription,learnMoreUrl:e.learnMoreUrl,searchKeywords:e.searchKeywords||"",publisher:e.publisher,publishDate:null,emailAddress:null,emailAddressAsLink:null,visible:!1,disableDetailPane:e.disableDetailPane,sortPriority:null!==e.sortPriority&&void 0!==e.sortPriority?e.sortPriority:n.contentProviderStoreTileMaxSortPriority,authentication:null,authenticationInitializationDeferred:null,authenticationInitializationInProgress:!1,finePrint:e.finePrint,autoRedirectUrlParams:null,customConfigurationHandler:null,tileGrouping:{groupingChildItems:[]}}),t},o.prototype.groupContentProviderTileModels=function(e){for(var t,i,o=[],r={},a=[],s=0,c=e;s<c.length;s++){var l=c[s];l.contract.grouping&&l.contract.grouping.groupingName&&l.contract.grouping.groupingName.length>0?(t=l.contract.grouping.groupingName,r[t]||(i=this.convertContentProviderContractToContentProviderTileModelWithGrouping(l.contract),r[t]=i,a.push(t),o.push(i)),i=r[t],i.searchKeywords=i.searchKeywords.concat(" ",l.searchKeywords||""," ",l.title.toLowerCase()),l.sortPriority=l.contract.grouping.groupingIndex,jQuery.isNumeric(l.sortPriority)||(l.sortPriority=n.contentProviderStoreTileMaxSortPriority),i.tileGrouping.groupingChildItems.push(l)):o.push(l)}return o},o.prototype.convertDashboardShallow=function(e){var t=new p(e);return this.modelMerger.mergeDashboardShallow(t,e),t},o.prototype.convertDashboard=function(e,t,i,o){return this.dataServiceModelConverter.convertDashboard(e,t,i,o)},o.prototype.fillDashboardChildren=function(e,t,i,o){return this.dataServiceModelConverter.fillDashboardChildren(e,t,i,o)},o.prototype.convertTileShallow=function(e,t,i){return this.dataServiceModelConverter.convertTileShallow(e,t,i)},o.prototype.convertSpecificTileShallow=function(e,t){return this.dataServiceModelConverter.convertSpecificTileShallow(e,t);
},o.prototype.convertTile=function(e,t,i,o){return this.dataServiceModelConverter.convertTile(e,t,i,o)},o.prototype.convertCompositeTile=function(e){return this.dataServiceModelConverter.convertCompositeTile(e)},o.prototype.convertTileData=function(e){return this.dataServiceModelConverter.convertTileData(e)},o.prototype.convertImageTile=function(e){return this.dataServiceModelConverter.convertImageTile(e)},o.prototype.convertWorkbookTile=function(e,t,i){return this.dataServiceModelConverter.convertWorkbookTile(e,t,i)},o.prototype.convertReportTile=function(e){return this.dataServiceModelConverter.convertReportTile(e)},o.prototype.convertModelTile=function(e){return this.dataServiceModelConverter.convertModelTile(e)},o.prototype.convertIframeTile=function(e){return this.dataServiceModelConverter.convertIframeTile(e)},o.prototype.convertSsrsTile=function(e){return this.dataServiceModelConverter.convertSsrsTile(e)},o.prototype.convertRealTimeTile=function(e){return this.dataServiceModelConverter.convertRealTimeTile(e)},o.prototype.convertTileConfig=function(e){return this.dataServiceModelConverter.convertTileConfig(e)},o.prototype.convertTileAction=function(e){return this.dataServiceModelConverter.convertTileAction(e)},o.prototype.convertUserSettings=function(e){var t=new i.UserSettings(e);return t.allowQnaDataCollection=null==e.allowQnaDataCollection||e.allowQnaDataCollection,t.tileDialogPreviewFormat=e.tileDialogPreviewFormat,t.preferredLanguage=e.preferredLanguage,t.extendedSettings=h.tryParseJSON(e.extendedSettings),t.esriVisualEnabled=null!=e.esriVisualEnabled&&e.esriVisualEnabled,t},o.prototype.convertReportSlide=function(e){return this.dataServiceModelConverter.convertReportSlide(e)},o.prototype.convertSettingsMetadata=function(e){return{dashboards:this.convertSettingsDashboards(e.dashboards),general:this.convertSettingsGeneral(e.userSettings),datasets:this.convertSettingsDatasets(e.datasetModels||[]),workbooks:this.convertSettingsDatasets(e.workbookModels||[])}},o.prototype.convertSettingsCommunications=function(t,i){if(t){for(var o=[],r=0,a=t;r<a.length;r++){var n=a[r],s=_.map(n.subscriptions,(function(e){return{id:e.id}}));o.push({reportInfo:n.reportInfo,subscriptions:s})}var c=[{predicateName:"displayName",displayName:e.common.localize.get("SettingsCommunication_Name_ColumnTitle")},{predicateName:"actions",displayName:e.common.localize.get("SettingsCommunication_Actions_ColumnTitle")},{predicateName:"count",displayName:e.common.localize.get("SettingsCommunication_Overview_ColumnTitle")}];return{subscriptions:o,workspaceName:i,columnsHeader:c}}},o.prototype.convertSettingsDashboards=function(e){var t=this;return{dashboards:_.map(e,(function(e){return t.convertSettingsDashboard(e)}))}},o.prototype.convertSettingsDashboard=function(e){return{dashboardId:e.id,hasQnaSupportedModel:e.hasQnaSupportedModel,name:e.displayName,objectId:e.objectId,qnaEnabled:e.qnaEnabled,gravityEnabled:e.gravityEnabled,dataClassificationId:e.dataClassificationId}},o.prototype.convertSettingsEsri=function(e){return{esriVisualEnabled:null!=e.esriVisualEnabled&&e.esriVisualEnabled}},o.prototype.convertSettingsGeneral=function(e){return{privacy:this.convertSettingsPrivacy(e),language:this.convertSettingsLanguage(e),esri:this.convertSettingsEsri(e)}},o.prototype.convertSettingsPrivacy=function(e){return{allowQnaDataCollection:null==e.allowQnaDataCollection||e.allowQnaDataCollection}},o.prototype.convertSettingsLanguage=function(e){return{preferredLanguage:e.preferredLanguage}},o.prototype.convertSettingsDatasets=function(e){var t=this;return{datasets:_.map(e,(function(e){return t.convertSettingsDataset(e)}))}},o.prototype.convertSettingsDataset=function(e){return e&&!e.contentProviderId&&e.packageContentProviderId&&(e.contentProviderId=e.packageContentProviderId),c.convertModelToDataset(e)},o.prototype.getImageUrl=function(e){return this.dataServiceModelConverter.getImageUrl(e)},o.prototype.getSsrsImageUrl=function(e){return this.dataServiceModelConverter.getSsrsImageUrl(e)},o.prototype.convertDashboardInvitation=function(e){var t=this,i=[];return null==e||""===e.toString()?[]:i=e.map((function(e){return t.convertToUserInvitation(e)}))},o.prototype.convertToUserInvitation=function(e){var t=new i.UserInvitationModel;return t.dashboardId=e.dashboardId,t.id=e.id,t.permissions=e.permissions,t.sentToEmailAddress=e.sentToEmailAddress,t},o.prototype.convertDashboardAccessInfoArray=function(e){var t=this;return null==e||_.isEmpty(e.toString())?[]:_.map(e,(function(e){return t.convertDashboardAccessInfo(e)}))},o.prototype.convertDashboardAccessInfo=function(e){var t=new i.DashboardAccessInfoModel;return t.emailAddress=e.emailAddress,t.id=e.id,t.kind=e.kind,t.permissions=e.permissions,t.givenName=e.givenName,t.familyName=e.familyName,t.fullName=e.givenName,e.familyName?t.fullName=t.fullName+" "+e.familyName:_.isEmpty(t.fullName)&&(t.fullName=t.emailAddress),t},o.prototype.convertCuratedContent=function(e,t){if(!e)return null;var o=[],r=[],a=[],n=[],s=new i.ActivityPaneCuratedContentModel,c=e.activityPaneData;t||c&&c.length>0&&(t=new i.ComboBoxItem(c[0].packageName,c[0].packageId));var l=_.filter(c,(function(e){return e.packageId===t.tag}));return l&&1===l.length&&(l[0].models&&(n=l[0].models),l[0].reports&&(o=l[0].reports),l[0].dashboards&&(r=l[0].dashboards),l[0].tiles&&(a=l[0].tiles),s.packageId=l[0].packageId),s.addModels(n),s.addReports(o),s.addDashboards(r),s.addTiles(a),s},o.prototype.convertEmbedToEmbeddedResource=function(t,i){var o;switch(t.embedType){case e.explore.contracts.EmbedType.Static:o="ManageEmbed_EmbedType_Snapshot";break;case e.explore.contracts.EmbedType.Interactive:o="ManageEmbed_EmbedType_Live";break;default:o="ManageEmbed_EmbedType_Unknown"}var r=t.disabled?"ManageEmbed_Status_Blocked":"ManageEmbed_Status_Active";i.model&&i.model.cloudRlsEnabled&&(r="ManageEmbed_Status_NotSupported");var a=null,n=null;return t.embedType===e.explore.contracts.EmbedType.Interactive&&t.createDate&&(n=jsCommon.DateExtensions.parseUtcDate(t.createDate),n&&(a=n.toLocaleString())),{contract:t,associatedReport:i,statusLocalizationKey:r,status:"",embedTypeLocalizationKey:o,embedType:"",dateCreated:a,dateCreatedSortable:n}},o.prototype.convertAlertsEditorPane=function(e,i,o){return{contract:e,title:e.title,tileName:i.getDisplayText(),measureName:o,thresholdValue:e.rule.condition.compareToAValue.value.toString(),enabled:e.enabled,operator:e.rule.condition.compareToAValue.operator,frequency:e.notificationSetting.frequency,emailNotificationEnabled:g.hasFlag(e.notificationSetting.carrierType,2),isExpanded:!1,isNew:!1,alertFailureState:t.AlertFailureState.None}},o.prototype.convertAlertModelToContract=function(e,t,i){var o=e.contract;return{id:o?o.id:null,rule:i,modelId:t.contract.modelId,tileId:t.id,notificationSetting:{carrierType:e.emailNotificationEnabled?3:1,frequency:e.frequency},enabled:e.enabled,title:e.title,dashboard:o?o.dashboard:null,group:o?o.group:null,tile:o?o.tile:null,createdDateTimeUtc:o?o.createdDateTimeUtc:null,alertQueryFilters:[]}},o.prototype.convertSettingsAlerts=function(e){return{contract:e,alertCreatedDate:moment(e.createdDateTimeUtc.toLocaleString()+"Z").format("h:mm A MM.DD.YYYY"),alertTitle:e.title,dashboardName:e.dashboard?e.dashboard.displayName:null,enabled:e.enabled}},o})()})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i,o=jsCommon.EnumExtensions,r=e.explore.viewModels,a=e.explore.infonav.viewModels.ViewModelFactory,n=e.common.contracts.Permissions,s=e.dataServices.models.RealTimeModel,c=e.data.SemanticFilter,l=e.dataServices.TileDefaultSizesUtils,d=e.dataServices.TileUtils,p="dropdown-title",u="glyphicon",v="glyph-mini",h="pbi-glyph-tvmonitor",g="pbi-glyph-phone";!(function(t){function i(e,t,i,o,r,a,n,s){var c=[],l=f(n,t);return l&&c.push({text:e.get("Dashboard_Actions"),type:DropDownMenuItemType.Title,itemClass:p}),S(n,o,r)&&c.push({text:e.get("Duplicate_Dashboard"),action:0,type:DropDownMenuItemType.Item}),t.featureSwitches.printingEnabled!==!1&&c.push({text:e.get("Print_Dashboard"),action:1,type:DropDownMenuItemType.Item}),a.disableDashboardRefresh||y(n)&&c.push({text:e.get("Refresh_Dashboard"),action:2,type:DropDownMenuItemType.Item}),a.disableSetFeaturedDashboard||s&&!i.isOnHomeDashboard(s.currentDashboardGUID)&&c.push({text:e.get("SetFeaturedDashboardButton"),action:3,type:DropDownMenuItemType.Item}),b(n)&&c.push({text:e.get("ContentTileOptions_Settings"),action:6,type:DropDownMenuItemType.Item}),l&&(c.push({text:e.get("Edit_View"),type:DropDownMenuItemType.Title,itemClass:p}),c.push({text:e.get("Dashboard_Authoring_Web"),action:4,type:DropDownMenuItemType.Item,hasGlyph:!0,iconClass:[u,v,h].join(" "),checked:!0}),c.push({text:e.get("Dashboard_Authoring_Phone"),action:5,type:DropDownMenuItemType.Item,hasGlyph:!0,iconClass:[u,v,g].join(" ")})),c}function r(e,t){return{dashboardPane:a(e,t),mobileDashboard:e}}function a(e,t){return void 0===t&&(t=!0),{dashboard:e,isPaneExpanded:t}}function c(e){for(var t=1,i=[],o=1,r=1,a=0,n=e;a<n.length;a++){var s=n[a];i.push(d.createDefaultPhoneByTile(o,r,s)),o+=l.getRowSpan(s,t)}return i}function m(){var t={name:"",columns:[],mode:e.common.contracts.RealTimeMode.CacheOnly},i=new s(null,t);return i.isNew=!0,i}function f(e,t){var i=t.featureSwitches.mobileDashboardsAuthoringEnabled;return e&&e.canEdit&&i}function y(e){return!!e}function b(e){return e&&(o.hasFlag(e.getPermissions(),n.All)||o.hasFlag(e.getPermissions(),n.ReadWrite))}function S(e,t,i){return e&&e.canEdit&&!t.isActiveWorkspaceIsReadOnly&&!i.fullScreenMode&&o.hasFlag(e.getPermissions(),n.ReShare)}t.createDashboardMenuItems=i,t.createDashboardEditMobileDisplay=r,t.createDashboardPane=a,t.createDefaultPhonePositions=c,t.createDefaultRealTimeModel=m})(i=t.modelFactory||(t.modelFactory={}));var m;!(function(t){function i(e,t,i){return{canvas:n(e,i),taskPane:a.createTaskPane(),visualizationPane:a.createVisualizationPane(t),showVisualEnabled:!1,inFocusTile:null,dashboardText:"",displayText:"",subDisplayText:"",source:"",pinVisualText:"",saveVisualText:"",editVisualText:"",getRelatedInsightsText:"",workbook:null,realTime:null,showInsightsPane:!1,showPreviousVisualButton:!1}}function o(e,t){var i=[];return i.push({text:e.get("InFocus_GenerateQrCode"),action:0,type:DropDownMenuItemType.Item}),t&&i.push({text:e.get("ExportData_MenuItem"),action:1,type:DropDownMenuItemType.Item}),i}function n(e,t){var i={id:0,config:{},layouts:jsCommon.ArrayExtensions.extendWithId([{id:t,position:l()}])},o={visual:{visualContainer:r.ViewModelFactory.convertVisualContainerStandalone(i,t)},exploration:s(e)},a=o.visual.visualContainer;return a.overridePosition=l(),a.allowDeferredRendering=!0,a.hostServices={deleteVisualRelationships:_.noop,getFilters:function(){var t=[],i=a.contract.filters||[];i=i.concat(e.filters||[]);for(var o=0,r=i;o<r.length;o++){var n=r[o],s=n.filter;s&&t.push(s)}return{dataFilter:c.merge(t),highlightFilter:null}},getVisualRelationshipFilterAction:function(){return 0},selectDataPoint:function(){},setVisualRelationshipFilterAction:_.noop,clearHighlight:function(){}},o}function s(t){var i={width:t.size.width,height:t.size.height,dataSources:e.explore.contracts.createDataSourceArray(),sections:[t]};return e.explore.viewModels.ViewModelFactory.convertExploration(i,0)}function l(){return{x:0,y:0,width:e.explore.infonav.constants.DefaultVisualMaxWidth,height:e.explore.infonav.constants.DefaultVisualMaxHeight}}t.createInFocus=i,t.createInFocusMenuItems=o})(m=t.inFocusViewModelFactory||(t.inFocusViewModelFactory={}))})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t){return new a(e,t)}var o=e.common.helpers.ModelConverterHelper,r=e.dataServices.ContractUtils;t.createModelMerger=i;var a=(function(){function e(e,t){this.modelConverter=e,this.dataServiceModelMerger=t}return e.prototype.mergeDashboard=function(e,t,i,o,r){this.dataServiceModelMerger.mergeDashboard(e,t,i,o,r)},e.prototype.mergeDashboardShallow=function(e,t){this.dataServiceModelMerger.mergeDashboardShallow(e,t)},e.prototype.mergeDashboardOwnerInfo=function(e,t){this.dataServiceModelMerger.mergeDashboardOwnerInfo(e,t)},e.prototype.mergeDashboardTiles=function(e,t){this.dataServiceModelMerger.mergeDashboardTiles(e,t)},e.prototype.mergeTileShallow=function(e,t,i,o){this.dataServiceModelMerger.mergeTileShallow(e,t,i,o)},e.prototype.mergeTile=function(e,t,i,o,r,a){this.dataServiceModelMerger.mergeTile(e,t,i,o,r,a)},e.prototype.mergeResourceWithIdArrays=function(e,t){for(var i=e.slice(0),o=0;o<e.length;o++){var r=e[o];_.filter(t,(function(e){return e.id===r.id})).length>0&&i.splice(i.indexOf(r),1)}return i.concat(t)},e.prototype.mergeModelContentProviderId=function(e,t){if(e)for(var i=0;i<e.length;i++){var o=e[i];o.contentProviderId=o.contentProviderId||r.findContentProviderId(t,o.packageId)}},e.prototype.mergeReport=function(e,t){if(e&&t&&(e.contract=t,e.id=t.id||e.id,e.objectId=t.objectId||e.objectId,e.modelId=t.modelId||e.modelId,e.reportUrl=t.reportUrl||e.reportUrl,e.packagePublishStatus=t.packagePublishStatus||e.packagePublishStatus,e.name=t.name||e.name,e.displayName=t.displayName||e.displayName,e.description=t.description||e.description,e.fileName=t.fileName||e.fileName,e.packageId=t.packageId||e.packageId,e.packageVersion=t.packageVersion||e.packageVersion,e.contentProviderId=t.contentProviderId||e.contentProviderId,jsCommon.ArrayExtensions.clear(e.reportSlides),t.reportSlides))for(var i=0,o=t.reportSlides.length;i<o;i++)e.reportSlides.push(this.modelConverter.convertReportSlide(t.reportSlides))},e.prototype.mergeModel=function(e,t){e&&t&&(e.contract=t,e.id=t.id||e.id,e.isNew=t.isNew||e.isNew,e.name=t.name||e.name,e.displayName=t.displayName||e.displayName,e.description=t.description||e.description,e.fileName=t.fileName||e.fileName,e.packageId=t.packageId||e.packageId,e.packageVersion=t.packageVersion||e.packageVersion,e.contentProviderId=t.contentProviderId||e.contentProviderId,e.qnaSupported=t.qnaSupported,e.packagePublishStatus=null!=t.packagePublishStatus?t.packagePublishStatus:e.packagePublishStatus,e.isRefreshInProgress=t.currentRefreshStartingTime&&o.convertRefreshTimeToJsDateTime(t.currentRefreshStartingTime).getTime()+18e5>Date.now(),e.cloudRlsEnabled=t.cloudRlsEnabled)},e.prototype.mergeWorkbook=function(e,t){this.dataServiceModelMerger.mergeWorkbook(e,t)},e.prototype.mergePackage=function(e,t){this.dataServiceModelMerger.mergePackage(e,t)},e})()})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.contracts.ContentTileType;!(function(e){e[e.Dashboards=0]="Dashboards",e[e.Reports=1]="Reports",e[e.Workbooks=2]="Workbooks"})(t.MRUArtifactType||(t.MRUArtifactType={}));var o=t.MRUArtifactType,r=(function(){function e(e,t,i){this.type=e,this.objectId=t,this.workspaceId=i,this.count=0}return Object.defineProperty(e.prototype,"contentTileType",{get:function(){switch(this.type){case o.Dashboards:return i.Dashboard;case o.Reports:return i.Report;case o.Workbooks:return i.Workbook}},enumerable:!0,configurable:!0}),e.prototype.getPermissions=function(){return this.permissions},e})();t.MRUModel=r})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.contracts.Permissions,o=(function(){function o(e){this.source=e,this.isNameEditable=!1,this.metadata=[],this.actions=[],this.icon=t.NavigationPaneListItemIcon.None}return o.getDashboardPermissionString=function(t){var o;return e.common.localize.ensureLocalization((function(){switch(t){case i.All:o=e.common.localize.get("DashboardContextMenu_AllPermissionMessage");break;case i.None:o=e.common.localize.get("DashboardContextMenu_NonePermissionMessage");break;case i.Read:o=e.common.localize.get("DashboardContextMenu_ReadPermissionMessage");break;case i.ReadReshare:o=e.common.localize.get("DashboardContextMenu_ReadResharePermissionMessage");break;case i.ReadWrite:o=e.common.localize.get("DashboardContextMenu_ReadWritePermissionMessage");break;case i.ReShare:o=e.common.localize.get("DashboardContextMenu_ReSharePermissionMessage");break;case i.Write:o=e.common.localize.get("DashboardContextMenu_WritePermissionMessage");break;default:o=e.common.localize.get("DashboardContextMenu_UnknownPermissionMessage")}})),o},o})();t.DashboardNavigationPaneListItemModel=o})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(t){this.source=t,this.isNameEditable=!1,this.metadata=[],this.actions=[],this.icon=e.NavigationPaneListItemIcon.None}return t})();e.DatasetNavigationPaneListItemModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(t){this.source=t,this.isNameEditable=!1,this.metadata=this.getGroupMetadata(t),this.actions=this.getGroupActions(t),t.isMyWorkspace?this.icon=e.NavigationPaneListItemIcon.User:this.icon=e.NavigationPaneListItemIcon.Group}return t.prototype.getGroupMetadata=function(e){var t=[];return t},t.prototype.getGroupActions=function(e){var t=[];return t.push({text:"'"+e.displayName+"' 1",action:function(){}}),t.push({text:"'"+e.displayName+"' 2",action:function(){}}),t.push({text:"'"+e.displayName+"' 3",action:function(){}}),t},t})();e.GroupNavigationPaneListItemModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){!(function(e){e[e.None=0]="None",e[e.Shared=1]="Shared",e[e.ReadOnly=2]="ReadOnly",e[e.Group=3]="Group",e[e.User=4]="User",e[e.Workbook=5]="Workbook"})(e.NavigationPaneListItemIcon||(e.NavigationPaneListItemIcon={}));var t=(e.NavigationPaneListItemIcon,(function(){function e(){}return e})());e.NavigationPaneListItemModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(t){this.source=t,this.isNameEditable=!1,this.metadata=[],this.actions=[],this.icon=e.NavigationPaneListItemIcon.None}return t})();e.ReportNavigationPaneListItemModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(t){this.source=t,this.isNameEditable=!1,this.metadata=[],this.actions=[],this.icon=e.NavigationPaneListItemIcon.Workbook}return t})();e.WorkbookNavigationPaneListItemModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e){this.dashboardTile=e,this.reportTile=e,this.workbookTile=e,this.hasTileFormatting=!0}return e})();e.PinTileDialogModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){})(t=e.PowerBICompanionModel||(e.PowerBICompanionModel={}))})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){})(t=e.PowerBIConnectorModel||(e.PowerBIConnectorModel={}))})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){})(t=e.PowerBIOnPremGatewayModel||(e.PowerBIOnPremGatewayModel={}))})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e){e&&(this.isDefaultImageUsed=!e.icon),this.contentPackCreatedFor=!1}return e})();e.PublishContentPackViewModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e})();e.QrCodeDialogModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e})();e.RequestDashboardAccess=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e})();e.RequestDashboardAccessModal=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){!(function(e){e[e.Privacy=0]="Privacy",e[e.CloseAccount=1]="CloseAccount",e[e.Language=2]="Language",e[e.Plugins=3]="Plugins",e[e.Preview=4]="Preview",e[e.Esri=5]="Esri"})(e.SettingsGeneralSubgroupType||(e.SettingsGeneralSubgroupType={}));var t=(e.SettingsGeneralSubgroupType,(function(){function e(e,t){this.type=e,this.name=t}return e})());e.GeneralSubGroup=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){!(function(e){e[e.Communications=0]="Communications",e[e.Dashboards=1]="Dashboards",e[e.Datasets=2]="Datasets",e[e.General=3]="General",e[e.Workbooks=4]="Workbooks",e[e.Gateways=5]="Gateways",e[e.Alerts=6]="Alerts"})(e.SettingsGroupsType||(e.SettingsGroupsType={}));var t=e.SettingsGroupsType;e.SettingsGroupUrlMap={communications:t.Communications,dashboards:t.Dashboards,datasets:t.Datasets,general:t.General,workbooks:t.Workbooks,gateways:t.Gateways,alerts:t.Alerts};var i=(function(){function e(e,t){this.type=e,this.name=t}return e})();e.SettingsGroup=i})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.contracts.Permissions;!(function(e){e[e.Default=0]="Default",e[e.SharedUsers=1]="SharedUsers",e[e.InvitedUsers=2]="InvitedUsers",e[e.RequestingUsers=3]="RequestingUsers"})(t.SharingUserList||(t.SharingUserList={}));t.SharingUserList;!(function(e){e[e.ReadOnly=0]="ReadOnly",e[e.ReadReshare=1]="ReadReshare",e[e.StopSharing=2]="StopSharing"})(t.SharingOptions||(t.SharingOptions={}));var o=t.SharingOptions,r=(function(){function e(){}return e})();t.UserInvitationModel=r;var a=(function(){function t(){}return Object.defineProperty(t.prototype,"permissionsDisplayText",{get:function(){if((this.permissions&i.Read)===i.Read)return(this.permissions&i.Write)===i.Write?e.common.localize.get("Sharing_PermissionDisplay_CanEdit"):e.common.localize.get("Sharing_PermissionDisplay_CanView")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isExternalUser",{get:function(){return this._isExternalUser},set:function(e){this._isExternalUser=e,this.allowedActions=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sharingPermissionsOptions",{get:function(){if(this.allowedActions)return this.allowedActions;var t=[{text:e.common.localize.get("Sharing_PermissionOptions_StopSharing"),action:o.StopSharing,id:this.id,type:DropDownMenuItemType.Item,kind:this.kind}];return(this.permissions&i.ReShare)===i.ReShare?t.push({text:e.common.localize.get("Sharing_PermissionOptions_DisableReshares"),action:o.ReadOnly,id:this.id,type:DropDownMenuItemType.Item,kind:this.kind}):this.isExternalUser||t.push({text:e.common.localize.get("Sharing_PermissionOptions_EnableReshares"),action:o.ReadReshare,id:this.id,type:DropDownMenuItemType.Item,kind:this.kind}),this.allowedActions=t,this.allowedActions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"emailAddressAsLink",{get:function(){return"mailto:"+this.emailAddress},enumerable:!0,configurable:!0}),t})();t.DashboardAccessInfoModel=a;var n=(function(){function e(){this.allowReshare=!0}return Object.defineProperty(e.prototype,"hasValidationError",{get:function(){return!_.isEmpty(this.emailValidationError)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasValidationWarning",{get:function(){return!_.isEmpty(this.emailValidationWarning)},enumerable:!0,configurable:!0}),e})();t.ShareViewModel=n})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.constants,o=e.dataServices.models.Tile,r=(function(){function t(e,t){this.titleRequired=!1,this.tile=e,this.originalContract=angular.copy(e.contract),this.intitialize(t)}return t.prototype.intitialize=function(e){var t=this.tile;this.workbookService=e;var i=t.composite;if(i)this.defaultTitle=i.config.heading1,this.defaultSubtitle=i.config.heading3,t.displayText=null==t.displayText?this.defaultTitle:t.displayText,t.subDisplayText=null==t.subDisplayText?this.defaultSubtitle:t.subDisplayText;else if(t.reportTile)this.defaultTitle=t.displayText,this.defaultSubtitle=t.subDisplayText;else if(t.workbook){if(t.config.workbookTile){var o=t.config.workbookTile.item,r=e.findWorkbook(t.contract.workbookId).contract.displayName;this.defaultTitle=e.getDefaultTileTitle(t.config.workbookTile,r),this.defaultSubtitle=e.getDefaultTileSubtitle(o)}else this.defaultTitle=t.displayText,this.defaultSubtitle=t.subDisplayText;this.titleRequired=!0}this.defaultTitle=this.defaultTitle||"",this.defaultSubtitle=this.defaultSubtitle||"",null==t.displayText&&(t.displayText=this.defaultTitle,t.subDisplayText=this.defaultSubtitle),this.hasTitle=t.hasTitle(),this.canAddOrRemoveCustomLink=!(!t.config||!t.config.widget)||!t.reportTile},Object.defineProperty(t.prototype,"hasLastRefreshTime",{get:function(){return!!this.tile.contractsModel&&!this.tile.realTime},enumerable:!0,configurable:!0}),t.prototype.isCustomLinkValid=function(){var t=this.tile.action;return t.action!==e.constants.openUrlActionName||o.isValidUrl(t.targetUrl)},t.prototype.isDirty=function(){var e=this.tile,t=this.originalContract,i=e.action,o=t.$action,r=!1;return i&&o&&(r=i.action!==o.action||i.openInSameTab!==o.openInSameTab||i.targetUrl!==o.targetUrl),e.displayText!==t.displayText||e.subDisplayText!==t.subDisplayText||r||!_.isEqual(e.config,t.$config)||e.workbook&&t.$config&&t.$config.workbookTile&&!_.isEqual(e.workbook.keepOriginalContentSize,t.$config.workbookTile.keepOriginalContentSize)},t.prototype.isTitleValid=function(){var e=this.tile.config;return!(this.titleRequired||this.tile.subDisplayText||e&&e.lastRefreshTimeEnabled)||!!this.tile.displayText},t.prototype.isValid=function(){return this.isTitleValid()&&this.isCustomLinkValid()},t.prototype.canRestoreDefaults=function(){var e=this.tile,t=!1;e.workbook&&(t=!!e.workbook.keepOriginalContentSize);var i=!1;return e.config&&e.config.lastRefreshTimeEnabled&&(i=e.config.lastRefreshTimeEnabled===!0),e.displayText!==this.defaultTitle||e.subDisplayText!==this.defaultSubtitle||t||i||!_.isEmpty(e.action.targetUrl)||this.tile.action.openInSameTab===!0},t.prototype.restoreDefaults=function(){var e=this.tile;e.displayText=this.defaultTitle,e.subDisplayText=this.defaultSubtitle;var t=this.tile.action;t.openInSameTab=!1,t.targetUrl=null,t.originalAction&&(t.action=t.originalAction),e.workbook&&this.setKeepOriginalSizeProperty(i.workbook.defaultKeepOriginalContentSize);var o=e.config;o&&(o.lastRefreshTimeEnabled&&(o.lastRefreshTimeEnabled=!1),o.hideTitle&&(o.hideTitle=!1))},t.prototype.setAction=function(e){var t=this.tile.action;e?(t.originalAction||(t.originalAction=t.action),t.action=e):(t.action=t.originalAction||null,delete t.originalAction)},t.prototype.undoChanges=function(){var e=this.tile,t=this.originalContract;this.hasTitle!==e.hasTitle()&&e.invalidateLayout(),e.contract=t,e.displayText=t.displayText,e.subDisplayText=t.subDisplayText,e.action=t.$action,e.config=t.$config,this.tile.workbook&&t.$config.workbookTile&&this.setKeepOriginalSizeProperty(t.$config.workbookTile.keepOriginalContentSize)},t.prototype.updateModelContract=function(){var e=this.tile,t=e.contract;t.displayText=e.displayText,t.subDisplayText=e.subDisplayText;var i=e.action;t.$action=i,t.action=JSON.stringify(i);var o=e.config;e.workbook&&o.workbookTile&&(o.workbookTile.keepOriginalContentSize=e.workbook.keepOriginalContentSize),t.$config=o,t.config=JSON.stringify(o)},t.prototype.setKeepOriginalSizeProperty=function(e){this.tile.workbook.keepOriginalContentSize=e,this.workbookService.setModelDynamicImageUrl(this.tile.workbook)},t})();t.TileEditorModel=r})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e){this.contract=e}return e})();e.ProviderTileModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,r,a,n){return t.featureSwitches.isE2Environment?{itemKeys:[],items:{}}:window.initialDashboardContainer&&jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(window.initialDashboardContainer.previousTenantId)?n.isListViewEnabled()?o.createTutorialModel(r,a):t.featureSwitches.conceptualModelEnabled?{itemKeys:[],items:{}}:e.displayPremiumUserFirstTimeExperience?{itemKeys:["DataCapacityLimit","GetDataOnPremisesDataSources","CreateGroup","CreateContentPacks"],items:{DataCapacityLimit:{title:r.get("TutorialPopup_DataCapacityLimitTitle"),text:"<div class='data-capacity-limit'>"+r.get("TutorialPopup_DataCapacityLimitText")+" <a target='_blank' href='https://go.microsoft.com/fwlink/?LinkId=616908'>"+r.get("TutorialPopup_DataCapacityLearnMoreLinkText")+"</a></div>",buttonLabel:r.get("TutorialPopup_GotIt"),canShow:function(){return $("#topBar .topNavButton").length>0},attachTo:function(){return $("#topBar .topNavButton")},offset:i.dataCapacityLimit},GetDataOnPremisesDataSources:{title:r.get("TutorialPopup_OnPremisesDataSourcesTitle"),text:"<div class='onpremises-datasources'>"+r.get("TutorialPopup_OnPremisesDataSourcesText")+" <a target='_blank' href='https://go.microsoft.com/fwlink/?LinkId=616911'>"+r.get("TutorialPopup_OnPremisesDataSourcesLearnMoreLinkText")+"</a></div>",buttonLabel:r.get("TutorialPopup_GotIt"),canShow:function(){return $(".navigationPane .getDataBtn").length>0},attachTo:function(){return $(".navigationPane").hasClass("isCollapsed")?$(".navigationPane .getDataBtn .getDataIcon"):$(".navigationPane .getDataBtn")},offset:i.dataOnPremises},CreateGroup:{title:r.get("TutorialPopup_CreateGroupTitle"),text:"<div class='create-group'>"+r.get("TutorialPopup_CreateGroupText")+" <a target='_blank' href='https://go.microsoft.com/fwlink/?LinkId=616912'>"+r.get("TutorialPopup_CreateGroupLearnMoreLinkText")+"</a></div>",buttonLabel:r.get("TutorialPopup_GotIt"),canShow:function(){return $(".navigationPane .addButton").length>0},attachTo:function(){return $(".navigationPane .addButton")},offset:i.createGroup},CreateContentPacks:{title:r.get("TutorialPopup_CreateContentPacksTitle"),text:"<div class='create-content-packs'>"+r.get("TutorialPopup_CreateContentPacksText")+" <a target='_blank' href='https://go.microsoft.com/fwlink/?LinkId=616913'>"+r.get("TutorialPopup_CreateContentPacksLearnMoreLinkText")+"</a></div>",buttonLabel:r.get("TutorialPopup_GotIt"),canShow:function(){return $(".sliderContentView.contentProviderStore .navigation .categoryContainer .category").length>0},attachTo:function(){return $(".sliderContentView.contentProviderStore .navigation .categoryContainer .category")},offset:i.createContentPacks}}}:{itemKeys:["FindContent"],items:{ConnectData:{title:r.get("TutorialPopup_ConnectDataTitle"),text:r.get("TutorialPopup_ConnectDataText"),buttonLabel:r.get("TutorialPopup_GotIt"),canShow:function(){return $(".navigationPane .getDataBtn").length>0},attachTo:function(){return $(".navigationPane").hasClass("isCollapsed")?$(".navigationPane .getDataBtn .getDataIcon"):$(".navigationPane .getDataBtn")},offset:i.connectData},FindContent:{title:r.get("TutorialPopup_FindContentTitle"),text:r.get("TutorialPopup_FindContentText"),buttonLabel:r.get("TutorialPopup_GotIt"),canShow:function(){return $(".navPaneListItemName .textLabel.new").length>0},attachTo:function(){return $(".navigationPane").hasClass("isCollapsed")?$(".navigationPane .expanderBtn"):$(".navPaneListItemName .textLabel.new").eq(0).closest("li")},offset:i.findContent}}}:{itemKeys:["WelcomeToNewPowerBI","ViewArchivedContent"],items:{WelcomeToNewPowerBI:{title:"<div class='archived-content'>"+r.get("TutorialPopup_WelcomeArchivedContentTitle")+"</div>",text:"<div class='archived-content'>"+r.get("TutorialPopup_WelcomeArchivedContentParagraphOne")+"<br/><br/>"+r.get("TutorialPopup_WelcomeArchivedContentParagraphTwo")+"<br/><br/ >"+r.get("TutorialPopup_WelcomeArchivedContentGoingForward")+"</div><div class='archived-content-caption archived-content-caption-title archived-content-caption-left'>"+r.get("TutorialPopup_ArchivedContentTitle")+"</div><div class='archived-content-caption archived-content-caption-left'>"+r.get("TutorialPopup_ArchivedContentText")+"<br/><br/></div><div class='tenant-merge-picture'></div><div class='archived-content-caption archived-content-caption-title archived-content-caption-right'>"+r.get("TutorialPopup_ForYourOrganizationTitle")+"</div><div class='archived-content-caption archived-content-caption-right'>"+r.get("TutorialPopup_ForYourOrganizationText")+"</div><div class='archived-content-learn-more'><a target='_blank' href='https://go.microsoft.com/fwlink/?LinkId=615080'>"+r.get("TutorialPopup_WelcomeArchivedContentLearnMoreLinkText")+"</a></div>",
buttonLabel:r.get("TutorialPopup_GotIt")+'<i class="check ms-Icon ms-Icon--check get-data-icon archived-content"></i>',modalButtonClassOverride:"archived-content-override",canShow:function(){return 0===$(".loading.intro").length},attachTo:function(){return $("body")},modal:!0},ViewArchivedContent:{title:r.get("TutorialPopup_ViewArchivedContentTitle"),text:r.get("TutorialPopup_ViewArchivedContentText"),buttonLabel:r.get("TutorialPopup_GotIt"),canShow:function(){return $(".navigationPane .viewArchivedContent").length>0},attachTo:function(){return $(".navigationPane").hasClass("isCollapsed")?$(".navigationPane .expanderBtn"):$(".navigationPane .viewArchivedContent")},offset:i.connectData}}}}var i;!(function(e){e.connectData={top:0,left:-25},e.home={top:-15,left:-15},e.findContent={top:0,left:-25},e.dataCapacityLimit={top:-10,left:0},e.dataOnPremises={top:10,left:0},e.createGroup={top:0,left:-25},e.createContentPacks={top:0,left:-25},e.insights={top:-10,left:0}})(i=e.tutorialPopupOffset||(e.tutorialPopupOffset={}));var o;!(function(t){function i(e){var t=".navigationPaneV2 "+e;return $(".navigationPaneV2").hasClass("isExpanded")||$(".navigationPaneV2 .expanderBtn").click(),$(t)}function o(e){switch(e){case c:return"pbi-glyph-favoritestar";case l:return"pbi-glyph-mru";case d:return"pbi-glyph-shared";case p:return"pbi-glyph-user";case u:return"pbi-glyph-getdata";default:return""}}function r(e,t){var i=$("<div>");$("<div>").addClass("list-view-navigation-header").text(e.get("TutorialPopup_PowerBIPreview")).appendTo(i),$("<div>").addClass("list-view-navigation-title").text(e.get("TutorialPopup_ListViewNavigationPreviewTitle")).appendTo(i);var o=$("<div>");return $("<div>").addClass("tutorial-nav-model-picture").appendTo(o),$("<div>").addClass("list-view-navigation-text").text(e.get("TutorialPopup_ListViewNavigationPreviewText")).appendTo(o),{title:i.html(),text:o.html(),buttonLabel:e.get("TutorialPopup_TakeAQuickTourButtonText"),modalButtonClassOverride:"list-view-navigation-button-override",canShow:function(){return 0===$(".loading.intro").length},attachTo:function(){return $("body")},modal:!0,customClass:"list-view-navigation-container",cancelText:e.get("TutorialPopup_SkipTutorial"),overlayOptions:0,dataStoreKey:s,onButtonClick:function(){return t.resetToMyWorkspace()}}}function a(t,r,a){var n="."+t[0].toLowerCase()+t.slice(1,t.length),c=r.get("TutorialPopup_"+t+"Title"),l=r.get("TutorialPopup_"+t+"Text"),d=a?r.get("TutorialPopup_GotIt"):r.get("TutorialPopup_Next"),p=function(){return $(".navigationPaneV2 "+n).length>0},u=function(){return i(n)},v=o(t),h=e.Direction.LeftTop,g=2,m=s;return{title:c,text:l,buttonLabel:d,canShow:p,attachTo:u,iconClass:v,preferredOrientation:h,overlayOptions:g,dataStoreKey:m}}function n(e,t){var i={itemKeys:[],items:{}};return i.itemKeys=[s,c,l,d,p,u],i.items[s]=r(e,t),i.items[c]=a(c,e),i.items[l]=a(l,e),i.items[d]=a(d,e),i.items[p]=a(p,e),i.items[u]=a(u,e,!0),i}var s="ListViewNavigationPreviewTutorial",c="Favorites",l="Recent",d="SharedWithMe",p="MyWorkspace",u="GetData";t.createTutorialModel=n})(o=e.ListViewNavigationPreviewTutorialFactory||(e.ListViewNavigationPreviewTutorialFactory={})),e.createTutorialModel=t})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.isMyWorkspace=!0}return e})();e.UserGroupHeaderModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e){this.contract=e}return e})();e.UserSettings=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){!(function(e){e[e.FixIt=1]="FixIt",e[e.YesNo=2]="YesNo"})(t.WarningBarActionType||(t.WarningBarActionType={}));t.WarningBarActionType;!(function(e){e[e.Yes=0]="Yes",e[e.No=1]="No",e[e.FixIt=2]="FixIt"})(t.WarningBarResult||(t.WarningBarResult={}));var i=(t.WarningBarResult,(function(){function t(t,i,o){var r=this;e.common.localize.ensureLocalization((function(){r._text=e.common.localize.get(t)})),this._type=i,this._clickCallback=o}return Object.defineProperty(t.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),t.prototype.onButtonClick=function(e){this._clickCallback(e)},t})());t.WarningBarModel=i})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e){this.contract=e}return Object.defineProperty(e.prototype,"showDiscoverabilityToast",{get:function(){return!e.DiscoverabilityToastDismissed&&this._showDiscoverabilityToast},set:function(e){this._showDiscoverabilityToast=e},enumerable:!0,configurable:!0}),e})();e.WorkbookContainer=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,i,r){return new o(e,t,i,r)}var i=jsCommon.StringExtensions;e.createAlertHttpService=t;var o=(function(){function t(t,i,o,r){this.httpService=e.common.httpService,this.promiseFactory=t,this.telemetryService=i,this.errorService=o,this.localizationService=r,this.allAlerts=[]}return t.prototype.createAlert=function(i,o){var r=this,a=this.promiseFactory.defer(),n="metadata/alerts",s=this.telemetryService.startChildEvent(o,e.telemetry.DataAlertsRequest,e.telemetry.AlertRequestType.Create);return this.httpService.post(n,i,this.httpService.powerbiRequestOptions()).then((function(e){s.resolve(),a.resolve(e.data)}),(function(e){var i=r.getErrorCode(e);if(i===t.quotaExceededError){var o=r.errorService.control();o.showPrompt(r.localizationService.get("Alerts_QuotaExceededDialogTitle"),r.localizationService.get("Alerts_QuotaExceededDialogMessage"),[new InJs.ModalDialogAction(r.localizationService.get("ModalDialogButtonText_Ok"),function(e,t){o.hideDialog()})])}s.reject({errorCode:i}),a.resolve(-1)})),a.promise},t.prototype.updateAlert=function(t,o){var r=this,a=this.promiseFactory.defer(),n="metadata/alerts/{0}",s=this.telemetryService.startChildEvent(o,e.telemetry.DataAlertsRequest,e.telemetry.AlertRequestType.Update);return this.httpService.put(i.format(n,t.id.toString()),t,this.httpService.powerbiRequestOptions()).then((function(e){s.resolve(),a.resolve(!0)}),(function(e){var t=r.getErrorCode(e);s.reject({errorCode:t}),a.resolve(!1)})),a.promise},t.prototype.deleteAlert=function(t,o){var r=this,a=this.promiseFactory.defer(),n="metadata/alerts/{0}",s=this.telemetryService.startChildEvent(o,e.telemetry.DataAlertsRequest,e.telemetry.AlertRequestType.Delete);return this.httpService.delete(i.format(n,t.toString()),this.httpService.powerbiRequestOptions()).then((function(e){s.resolve(),a.resolve(!0)}),(function(e){var t=r.getErrorCode(e);s.reject({errorCode:t}),a.resolve(!1)})),a.promise},t.prototype.toggleAlert=function(t,o,r){var a=this,n=this.promiseFactory.defer(),s="metadata/alerts/{0}/toggle",c=this.telemetryService.startChildEvent(r,e.telemetry.DataAlertsRequest,e.telemetry.AlertRequestType.Toggle);return this.httpService.put(i.format(s,t.toString()),o,this.httpService.powerbiRequestOptions()).then((function(e){c.resolve(),n.resolve(!0)}),(function(e){var t=a.getErrorCode(e);c.reject({errorCode:t}),n.resolve(!1)})),n.promise},t.prototype.getAllAlerts=function(t,o){var r=this,a=this.promiseFactory.defer(),n="metadata/alerts{0}",s=this.telemetryService.startChildEvent(t,e.telemetry.DataAlertsRequest,e.telemetry.AlertRequestType.Get);return this.httpService.get(i.format(n,null!=o?"?tileId="+o:""),this.httpService.powerbiRequestOptions()).then((function(e){s.resolve(),a.resolve(e.data)}),(function(e){var t=r.getErrorCode(e);s.reject({errorCode:t}),a.resolve([])})),a.promise},t.prototype.getErrorCode=function(e){var t=void 0;return e&&(e.error?t=e.error.code:e.status&&(t=e.status.toString())),t},t.quotaExceededError="DataDrivenAlertRulesQuotaExceeded",t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"DeleteContentPack");return o.enableTelemetry=!0,e.common.httpService.delete("/powerbi/content/providers/organization/"+t+"/",o)}function o(t,i,o,r,a,n){var s=this.createContentPackRequest(t,i,o,r,a),c=t.isTemplate,l=e.common.httpService.powerbiRequestOptions(n,c?"PublishTenantContentPack":"PublishContentPack"),d=c?"/powerbi/content/providers/organizationaltemplate/":"/powerbi/content/providers/organization/";return t.providerKey?e.common.httpService.put(d+t.providerKey+"/",JSON.stringify(s),l):e.common.httpService.post(d,JSON.stringify(s),l)}function r(e,t,i,o,r){var a;a=e.isTemplate?s.OrganizationalTemplate:s.Organizational;var n={name:e.titleText,description:e.descriptionText,icon:t,parameterIcon:i,accessPermissions:{listOfGroupsOrPrincipals:e.groupsAddressesList,isSharedToEntireOrganization:e.isSharedWithOrg},dashboardIds:e.selectedDashboardIds,reportIds:e.selectedReportIds,modelIds:e.selectedDatasetIds,workbookIds:e.selectedWorkbookIds,contentProviderCategory:a};return e.emailsList&&e.emailsList.inputUserList&&(n.accessPermissions.adUserMetadataList=e.emailsList.inputUserList),e.providerKey&&(o||(n.skipUpdateIcon=!o,n.icon=""),r||(n.skipUpdateParameterIcon=!r,n.parameterIcon="")),n}function a(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"SetContentPackDirty");o.enableTelemetry=!0;var r={contentProviderKeys:t},a=e.common.httpService.put("/powerbi/content/providers/organization/",JSON.stringify(r),o);return a}function n(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"Personalize");return e.common.httpService.put("/powerbi/content/providers/personalize?packageId="+t,null,o)}var s=e.common.contracts.ContentProviderCategory;t.deleteContentPack=i,t.publishContentPack=o,t.createContentPackRequest=r,t.setContentPackDirty=a,t.personalize=n})(t=e.contentPackService||(e.contentPackService={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i){return new o(e,t,i)}t.createExportStaticReportProxy=i;var o=(function(){function t(e,t,i){this.promiseFactory=e,this.errorService=t,this.localizationService=i}return t.prototype.exportAsImage=function(t,i){var o=this,r="v1.0/myorg/reports/"+t;i&&(r+="/pages/"+i);var a=e.common.httpService.powerbiRequestOptions();_.extend(a.headers,{Accept:"image/png"}),a.responseType="arraybuffer";var n=this.promiseFactory.defer();return e.common.httpService.get(r,a).then((function(e){n.resolve({blob:e.data})}),(function(e){n.reject(e?{error:e.error,requestId:e.requestId}:{}),o.errorService.error(o.localizationService.get("ExportStaticImage_Error"),"ExportStaticImage_Error",{requestId:e.requestId,statusCode:e.status.toString()})})),n.promise},t})()})(t=e.proxies||(e.proxies={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t){return new i(e,t)}e.createFavoritesHttpService=t;var i=(function(){function t(e,t){this.syncService=e,this.notificationToastService=t}return t.prototype.deleteFavorite=function(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"DeleteFavorite");return e.common.httpService.delete("metadata/favorites/"+t,o)},t.prototype.getFavorites=function(t){var i=e.common.httpService.powerbiRequestOptions(t,"GetFavorites");return e.common.httpService.get("metadata/favorites",i)},t.prototype.addFavorite=function(t,i,o){var r=e.common.httpService.powerbiRequestOptions(o,"AddFavorites"),a={favoriteType:t,favoriteId:i};return e.common.httpService.post("metadata/favorites",JSON.stringify(a),r)},t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t){return new i(e,t)}e.createGroupHttpService=t;var i=(function(){function t(e,t){this.telemetryService=e,this.activeGroupIdService=t}return t.prototype.setActiveGroupId=function(t){var i=e.common.httpService.powerbiRequestOptions(t,"SetActiveGroup"),o="/powerbi/metadata/user/activegroup";return i.enableTelemetry=!0,e.common.httpService.post(o,null,i)},t.prototype.getGroupDashboardContainer=function(t,i){var o=t.lastViewedDashboard,r=e.common.httpService.powerbiRequestOptions(i,"GetGroupContainer"),a="powerbi/metadata/groupmetadata/";return o&&o!==-1&&(a=jsCommon.Utility.urlCombine(a,"?dashboardId="+encodeURIComponent(o.toString()))),e.common.httpService.get(a,r)},t.prototype.addGroup=function(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"AddGroup");return o.enableTelemetry=!0,e.common.httpService.put("/powerbi/metadata/groups",t,o)},t.prototype.validateGroupMembers=function(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"ValidateGroupMembers");return o.enableTelemetry=!0,e.common.httpService.post("/powerbi/metadata/groups/validatemembers",t,o)},t.prototype.getGroupMembers=function(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"GetGroupMembers");return o.enableTelemetry=!0,e.common.httpService.get("/powerbi/metadata/groups/"+t+"/members",o)},t.prototype.updateGroup=function(t,i,o,r,a,n,s){var c=e.common.httpService.powerbiRequestOptions(s,"UpdateGroupMembers");c.enableTelemetry=!0;var l={group:i,membersToAdd:o,membersToRemove:r,membersToAdmins:a,adminsToMembers:n};return e.common.httpService.post("/powerbi/metadata/groups/"+t,l,c)},t.prototype.deleteGroup=function(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"DeleteGroup");return o.enableTelemetry=!0,e.common.httpService.delete("/powerbi/metadata/groups/"+t,o)},t.prototype.validateGroupId=function(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"ValidateGroupId");return o.enableTelemetry=!0,e.common.httpService.post("/powerbi/metadata/groups/validategroupid",JSON.stringify(t),o)},t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t){return new r(e,t)}var i=e.common.contracts.Permissions,o=jsCommon.Utility;e.createInvitationService=t;var r=(function(){function t(e,t){this.promiseFactory=e,this.telemetryService=t}return t.prototype.claimInvite=function(i,r,a,n){var s={invitationId:r,tenantIdentifier:i},c=e.common.httpService.powerbiRequestOptions(n,"ClaimInvite");c.headers["X-PowerBI-RedirectedFromSignup"]="true";var l=o.urlCombine(t.baseDashboardInvitationsUrl,"/invitations/accept");return e.common.httpService.post(l,s,c)},t.prototype.sendInvitation=function(r,a,n,s,c,l,d){var p={emailAddresses:a,objectIds:n,message:s,permission:c?i.ReadReshare:i.Read,notifyViaEmail:l},u=o.urlCombine(t.baseDashboardInvitationsUrl,"/"+r+"/invitations"),v=e.common.httpService.powerbiRequestOptions(d,"SendInvitation");return v.headers["X-PowerBI-WFE-Origin"]=e.common.httpService.frontendUri,e.common.httpService.post(u,p,v)},t.prototype.getInvitedUsers=function(i,r){var a=o.urlCombine(t.baseDashboardInvitationsUrl,"/"+i+"/invitations"),n=e.common.httpService.powerbiRequestOptions(r,"GetInvitedUsers");return e.common.httpService.get(a,n)},t.prototype.getDashboardAccess=function(i,r){var a=o.urlCombine(t.baseDashboardInvitationsUrl,"/"+i+"/access"),n=e.common.httpService.powerbiRequestOptions(r,"GetDashboardAccess");return e.common.httpService.get(a,n)},t.prototype.cancelInvitation=function(i,r,a){var n=o.urlCombine(t.baseDashboardInvitationsUrl,"/"+r+"/invitations/"+i),s=e.common.httpService.powerbiRequestOptions(a,"CancelInvitation");return e.common.httpService.delete(n,s)},t.prototype.deleteUser=function(i,r,a){var n=o.urlCombine(t.baseDashboardInvitationsUrl,"/"+r+"/users/"+i),s=e.common.httpService.powerbiRequestOptions(a,"DeleteUser");return e.common.httpService.delete(n,s)},t.prototype.deleteDashboardAccess=function(i,r){var a=o.urlCombine(t.baseDashboardInvitationsUrl,"/"+i.dashboardId+"/access/"+i.kind+"/"+i.id),n=e.common.httpService.powerbiRequestOptions(r,"DeleteDashboardAccess");return e.common.httpService.delete(a,n)},t.prototype.editDashboardAccess=function(i,r){var a=o.urlCombine(t.baseDashboardInvitationsUrl,"/"+i.dashboardId+"/access"),n=e.common.httpService.powerbiRequestOptions(r,"EditDashboardAccess");return e.common.httpService.put(a,i,n)},t.prototype.requestDashboardAccess=function(i,r,a){var n=o.urlCombine(t.baseDashboardInvitationsUrl,"/"+i+"/requestaccess"),s=e.common.httpService.powerbiRequestOptions(a,"RequestDashboardAccess",{dismissGroupObjectId:!0});return e.common.httpService.put(n,{message:r},s)},t.prototype.deleteDashboardAccessRequest=function(i,r,a,n){var s=o.urlCombine(t.baseDashboardInvitationsUrl,"/"+i+"/requestaccess/"+r+"/"+a),c=e.common.httpService.powerbiRequestOptions(n,"DeleteDashboardAccessRequest");return e.common.httpService.delete(s,c)},t.prototype.getDashboardInviteLink=function(e,i){var o={code:e,tenantId:window.tenantId,extShare:i},r=btoa(JSON.stringify(o));return window.baseUrl+"/"+t.claimInvitePage+"?i="+r},t.prototype.getSharedDashboardLink=function(e,i){if(i){var o={dashboardId:e,tenantId:window.tenantId,extShare:!0},r=btoa(JSON.stringify(o));return window.baseUrl+"/"+t.claimInvitePage+"?i="+r}return window.baseUrl+"/groups/me/dashboards/"+e},t.baseUrl="powerbi/invitation",t.baseDashboardInvitationsUrl=o.urlCombine(t.baseUrl,"/dashboards"),t.claimInvitePage="claiminvite.html",t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(t){var i={};return e.common.httpService.get(t,i)}t.showNpsDialog=i})(t=e.npsHttpService||(e.npsHttpService={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(){return new o}var i=jsCommon.Utility;e.createO365ApplicationLauncherService=t;var o=(function(){function t(){}return t.prototype.getApplicationLauncher=function(){var t="/metadata/office365shell/";t=i.urlCombine(t,"?locale="+e.common.localization.loader.currentLanguageLocale);var o=e.common.httpService.powerbiRequestOptions();return e.common.httpService.get(t,o)},t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"GetDelayedQueryResult");return e.common.httpService.get("explore/queryresult/"+t,o)}t.getQueryData=i})(t=e.queryService||(e.queryService={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,i,o,r,a,n,s,l,d){return new c(e,t,i,o,r,a,n,s,l,d)}var i=e.common.contracts.admsGateway.DatabaseType,o=e.common.contracts.gateway.GatewayStatus,r=e.connectivity.helpers.ErrorConverterHelper,a=e.common.helpers.ModelConverterHelper,n=e.explore.util.ScriptVisualsUtil,s="RefreshingData";e.createRefreshService=t;var c=(function(){function t(e,t,i,o,r,a,n,s,c,l){this.modelHttpService=e,this.datasetsService=t,this.gatewaysMetadataService=r,this.rootScope=i,this.notificationToastService=o,this.featureSwitchService=a,this.promiseFactory=n,this.selectGatewayService=s,this.localizationService=c,this.modalDialogService=l}return t.prototype.handleRefreshError=function(t,i,o,r){var a=o.headers(e.common.PowerBIErrorHeader);a&&a===e.common.constants.serverErrors.packageOperationInProgress?this.displayOopsErrorAndEndTelemetry(t,i,"PackageOperationBlocked",o,r):a&&a===e.common.constants.serverErrors.dataRefreshTooSoon?this.displayOopsErrorAndEndTelemetry(t,i,"DataRefreshBlocked",o,r):this.displayOopsErrorAndEndTelemetry(t,i,"PackageRefreshUnknownFailure",o,r)},t.prototype.refreshNow=function(t,i,o,r,a,n,c,l,d){var p,u=this,v=t.startEvent(e.telemetry.DashboardDatasetRefresh,r);p=this.notificationToastService.notify({title:e.common.localize.get(a?a:s),message:n?e.common.localize.get(n):void 0,notificationType:e.common.NotificationToastType.Loading}),this.refreshPackage(o,v.event).then((function(t){u.notificationToastService.hide(p),c&&u.notificationToastService.notify({title:e.common.localize.get(c),message:e.common.localize.format(l,[d]),notificationType:e.common.NotificationToastType.Success}),v.resolve()}),(function(e){u.notificationToastService.hide(p),u.handleRefreshError(t,i,e,v)}))},t.prototype.tryRefreshDMNow=function(e,t,i,o,r,n,s){this.tryRefreshDMNowImpl(e,t,a.shouldUseDMTS(i.data.refreshConnections),o,r,n,s)},t.prototype.tryRefreshDMNowImpl=function(t,i,o,r,a,s,c){var l=this,d=t.startEvent(e.telemetry.DashboardGetAggregatedDatasourcesForOneModel,r.contentProviderId);if(o)if(a){for(var p=[],u=a.datasources.length,v=this.promiseFactory,h=this,g=0;g<u;g++){var m=a.datasources[g],f=v.defer();p.push(f.promise),this.gatewaysMetadataService.getDataSourceStatus(m.gatewayId,m.dataSourceId).then((function(){f.resolve({})}),(function(e){f.reject(e)}))}v.all(p).then((function(){d.resolve(),h.refreshNow(t,i,r.packageId,r.contentProviderId)}),(function(o){h.rootScope.$emit(e.common.constants.showSettingsViewerEventName,c,r.dbName);var a="SettingsDataset_Error_CannotRefreshTitle",n=e.common.localize.get("ServerError_PersonalGateway_LongMessage_DataSource_InvalidCredential");h.displayCustomizedErrorAndEndTelemetry(t,i,null,n,a,d,e.telemetry.ErrorSource.User,o)}))}else this.gatewaysMetadataService.displayOopsErrorAndEndTelemetry(t,i,"SettingsDataset_Error_FailedToLoadDatasources",d);else this.gatewaysMetadataService.getAdmsAggregatedDatasourcesForOneModel(r.id.toString(),!0).then((function(e){if(l.notificationToastService.hide(s),e){if(l.isRequireUserConsent(e))return void n.confirmRefreshForRDataSource(i,l.localizationService,l.modalDialogService,l.rootScope.$new(),(function(){l.refreshNowADMS(t,i,r,c,e,d)}),(function(){}));l.refreshNowADMS(t,i,r,c,e,d)}else l.gatewaysMetadataService.displayOopsErrorAndEndTelemetry(t,i,"SettingsDataset_Error_FailedToLoadDatasources",d)}),(function(e){l.notificationToastService.hide(s),l.displayOopsErrorAndEndTelemetry(t,i,"SettingsDataset_Error_FailedToLoadDatasources",e,d)}))},t.prototype.tryRefreshNow=function(t,i,o,r){var a=this,n=t.startEvent(e.telemetry.DashboardPrepareRefreshNow,o.contentProviderId),s=this.notificationToastService.notify({title:e.common.localize.get("PreparingForRefresh"),notificationType:e.common.NotificationToastType.Loading});this.modelHttpService.getModelAndPackageForRefresh(o.id,o.packageId,n.event).then((function(c){n.resolve(),c.data&&c.data.packageId?a.isModelRefreshInProgress(c.data)?(a.notificationToastService.hide(s),a.displayCustomizedErrorAndEndTelemetry(t,i,"SettingsDataset_RefreshNow_Popup_RefreshInProgress",null,"SettingsDataset_RefreshNow_Popup_RefreshInProgressTitle",n,e.telemetry.ErrorSource.User,c)):c.data.isAllDataSourcesSupportedForRefresh===!0?a.isPackageImportedFromOneDrive(c.data)?(a.notificationToastService.hide(s),a.tryRefreshNonDMNow(t,i,c,o,r)):a.gatewaysMetadataService.getModelDataSources(o.id).then((function(n){if(0===n.gateways.length&&0===n.datasources.length)return void(!c.data.isHidden&&e.common.helpers.ModelConverterHelper.onpremGatewayRequired(c.data)?a.tryRetrieveGatewayAndRefreshDMNow(t,i,c,o,n,s,r):a.tryRefreshDMNow(t,i,c,o,n,s,r));var l=a.selectGatewayService.getSelectedGateway(n),d=a.selectGatewayService.getSelectedGatewayType(l);switch(d){case 0:i.error(e.common.localize.get("SettingsDataset_Error_DatasetNotBoundToAnyGateway"),"SettingsDataset_Error_DatasetNotBoundToAnyGateway");break;case 1:!c.data.isHidden&&e.common.helpers.ModelConverterHelper.onpremGatewayRequired(c.data)?a.tryRetrieveGatewayAndRefreshDMNow(t,i,c,o,n,s,r):a.tryRefreshDMNow(t,i,c,o,n,s,r);break;case 2:a.refreshNow(t,i,o.packageId,o.contentProviderId)}}),(function(n){return n.error&&n.error.code===e.settings.constants.ServerError_ModelHasNoPowerBIDMMoniker?void(!c.data.isHidden&&e.common.helpers.ModelConverterHelper.onpremGatewayRequired(c.data)?a.tryRetrieveGatewayAndRefreshDMNow(t,i,c,o,null,s,r):a.tryRefreshDMNow(t,i,c,o,null,s,r)):void i.error(e.common.localize.get("SettingsDataset_Error_FailedToDiscoverDatasource"),"SettingsDataset_Error_FailedToDiscoverDatasource",{requestId:n.requestId,statusCode:n.status.toString()})})):(a.notificationToastService.hide(s),a.tryRefreshNonDMNow(t,i,c,o,r)):(a.notificationToastService.hide(s),t.logEvent(e.telemetry.DashboardRefreshNowFailedToRetrieveModel,o.contentProviderId),a.showRefreshNowNotification(!1,o))}),(function(e){a.notificationToastService.hide(s),a.displayOopsErrorAndEndTelemetry(t,i,"SettingsDataset_Error_FailedToLoadModelForRefresh",e,n)}))},t.prototype.tryRetrieveGatewayAndRefreshDMNow=function(t,i,r,n,s,c,l){var d=this,p=t.startEvent(e.telemetry.DashboardRetrieveGateway,n.contentProviderId);this.gatewaysMetadataService.getPersonalGateway().then((function(u){return u.gatewayStatus===o.NotReachable?(d.rootScope.$emit(e.common.constants.showSettingsViewerEventName,l,n.dbName),void d.displayCustomizedErrorAndEndTelemetry(t,i,"SettingsDataset_Error_GatewayOffline",null,"SettingsDataset_Error_GatewayOfflineTitle",p,e.telemetry.ErrorSource.External)):u.gatewayStatus===o.NotInstalled?(d.rootScope.$emit(e.common.constants.showSettingsViewerEventName,l,n.dbName),void d.displayCustomizedErrorAndEndTelemetry(t,i,"SettingsDataset_Error_GatewayNotExist",null,"SettingsDataset_Error_GatewayNotExistTitle",p,e.telemetry.ErrorSource.External)):void d.tryRefreshDMNowImpl(t,i,a.shouldUseDMTS(r.data.refreshConnections),n,s,c,l)}),(function(e){d.notificationToastService.hide(c),d.displayOopsErrorAndEndTelemetry(t,i,"SettingsDataset_Error_FailedToRetrieveGateway",e,p)}))},t.prototype.tryRefreshNonDMNow=function(t,i,o,r,a){var n=o.data.contentProviderId;6===n||7===n||9===n||60===n||o.data.directQueryMode?this.refreshNow(t,i,r.packageId,r.contentProviderId):this.rootScope.$emit(e.common.constants.showSettingsViewerEventName,a,r.dbName)},t.prototype.displayOopsErrorAndEndTelemetry=function(t,i,o,r,a){a.reject(),i.error(e.common.localize.get(o),o,{requestId:r.requestId,statusCode:r.status.toString()})},t.prototype.refreshPackage=function(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"RefreshPackage");return o.retryCount=0,e.common.httpService.post("powerbi/content/packages/"+t+"/refresh/",null,o)},t.prototype.getGatewayStatus=function(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"GetGatewayStatus");return e.common.httpService.get("powerbi/dmm/subscribe/"+t,o)},t.prototype.updateRefreshSchedule=function(t,i,o){var r=e.common.httpService.powerbiRequestOptions(o,"UpdateRefreshSchedule");return r.retryCount=0,e.common.httpService.post("powerbi/metadata/models/"+t+"/refreshschedule",i,r)},t.prototype.showRefreshNowNotification=function(t,i){var o=t?i.name+e.common.localize.get("SettingsDataset_Notification_RefreshNow_Scheduled_Title"):i.name+e.common.localize.get("SettingsDataset_Notification_RefreshNow_NotScheduled_Title"),r=t?i.name+e.common.localize.get("SettingsDataset_Notification_RefreshNow_Scheduled_Message"):e.common.localize.get("SettingsDataset_Notification_RefreshNow_NotScheduled_Message_Part1")+i.name+e.common.localize.get("SettingsDataset_Notification_RefreshNow_NotScheduled_Message_Part2");this.notificationToastService.notify({title:o,message:r})},t.prototype.displayCustomizedErrorAndEndTelemetry=function(t,i,o,r,a,n,s,c){n.reject();var l={requestId:c?c.requestId:void 0,statusCode:c?c.status.toString():void 0,title:e.common.localize.get(a)};i.error(o?e.common.localize.get(o):r,o,l,!1,s)},t.prototype.isPackageImportedFromOneDrive=function(e){return e.packageVersion.length>10&&(6===e.contentProviderId||7===e.contentProviderId||60===e.contentProviderId)},t.prototype.isModelRefreshInProgress=function(e){var t=e.currentRefreshStartingTime&&a.convertRefreshTimeToJsDateTime(e.currentRefreshStartingTime);return t&&t.getTime()+18e5>Date.now()},t.prototype.isRequireUserConsent=function(t){return t&&_.some(t,(function(t){return t.discoverDataSourceEntry.databaseType.toString()===i.Extension.toString()&&t.discoverDataSourceEntry.extensionDatabaseType===e.common.constants.RDataSourceName}))},t.prototype.refreshNowADMS=function(t,i,o,a,n,s){s.resolve();for(var c=!0,l=0;l<n.length;l++)if(!n[l].testConnectionResponse||n[l].testConnectionResponse.instanceTestConnectionResults.testPassed===!1){c=!1,this.rootScope.$emit(e.common.constants.showSettingsViewerEventName,a,o.dbName);var d="SettingsDataset_Error_CannotRefreshTitle",p=r.convertDMTestConnectionResultToErrorMessage(n[l].testConnectionResponse);this.displayCustomizedErrorAndEndTelemetry(t,i,null,p,d,s,e.telemetry.ErrorSource.PowerBI);break}c&&this.refreshNow(t,i,o.packageId,o.contentProviderId)},t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(){return new i}e.createRealTimeDataHttpService=t;var i=(function(){function t(){}return t.prototype.createDataset=function(t){var i=e.common.httpService.powerbiRequestOptions(null,"Create Real Time Dataset");return e.common.httpService.post("realtime/models",t,i)},t.prototype.getCredentials=function(t){var i=e.common.httpService.powerbiRequestOptions(null,"Get Real Time Dataset External Credentials");return e.common.httpService.get("realtime/models/"+t+"/credentials",i)},t.prototype.getDataset=function(t){var i=e.common.httpService.powerbiRequestOptions(null,"Get Real Time Dataset");return e.common.httpService.get("realtime/models/"+t,i)},t.prototype.getHistory=function(t){var i=e.common.httpService.powerbiRequestOptions(null,"Get History");return e.common.httpService.post("realtime/history",t,i)},t.prototype.updateDataset=function(t,i){var o=e.common.httpService.powerbiRequestOptions(null,"Update Real Time Dataset");return e.common.httpService.put("realtime/models/"+t,i,o)},t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(){return new i}e.createSettingsMetadataHttpService=t;var i=(function(){function t(){}return t.prototype.getSettings=function(t){var i=e.common.httpService.powerbiRequestOptions(t,"GetSettingsMetadata");return i.enableTelemetry=!0,e.common.httpService.get("/powerbi/metadata/settings",i)},t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t){return new o(e,t)}var i=jsCommon.StringExtensions;e.createSubscriptionsHttpService=t;var o=(function(){function t(t,i){this.httpService=e.common.httpService,this.promiseFactory=t,this.telemetryService=i,this.endpoint="metadata/emailsubscriptions"}return t.prototype.createSubscription=function(t,i){var o=this,r=this.promiseFactory.defer(),a=this.telemetryService.startChildEvent(i,e.telemetry.EmailSubscriptionsRequest,e.telemetry.EmailSubscriptionRequestType.Create);return this.httpService.post(this.endpoint,t,this.httpService.powerbiRequestOptions()).then((function(e){a.resolve(),r.resolve(e.data)}),(function(t){var i=e.errorDetailsHelper.getTelemetryErrorDetails(t.error);a.reject(i);var n=o.getErrorCode(t);r.reject({ErrorCode:n,RequestId:t.requestId})})),r.promise},t.prototype.getAllSubscriptions=function(t){var i=this,o=this.promiseFactory.defer(),r=this.telemetryService.startChildEvent(t,e.telemetry.EmailSubscriptionsRequest,e.telemetry.EmailSubscriptionRequestType.Get);return this.httpService.get(this.endpoint,this.httpService.powerbiRequestOptions()).then((function(e){r.resolve(),o.resolve(e.data)}),(function(t){var a=e.errorDetailsHelper.getTelemetryErrorDetails(t.error);r.reject(a);var n=i.getErrorCode(t);o.reject({ErrorCode:n,RequestId:t.requestId})})),o.promise},t.prototype.updateSubscription=function(t,i){var o=this,r=this.promiseFactory.defer(),a=this.telemetryService.startChildEvent(i,e.telemetry.EmailSubscriptionsRequest,e.telemetry.EmailSubscriptionRequestType.Update);return this.httpService.put(this.endpoint,t,this.httpService.powerbiRequestOptions()).then((function(e){a.resolve(),r.resolve(e.data)}),(function(t){var i=e.errorDetailsHelper.getTelemetryErrorDetails(t.error);a.reject(i);var n=o.getErrorCode(t);r.reject({ErrorCode:n,RequestId:t.requestId})})),r.promise},t.prototype.deleteSubscription=function(t,o){var r=this,a=this.promiseFactory.defer(),n=this.telemetryService.startChildEvent(o,e.telemetry.EmailSubscriptionsRequest,e.telemetry.EmailSubscriptionRequestType.Delete),s=this.endpoint+"/{0}";return this.httpService.delete(i.format(s,t.toString()),this.httpService.powerbiRequestOptions()).then((function(e){n.resolve(),a.resolve(e.data)}),(function(t){var i=e.errorDetailsHelper.getTelemetryErrorDetails(t.error);n.reject(i);var o=r.getErrorCode(t);a.reject({ErrorCode:o,RequestId:t.requestId})})),a.promise},t.prototype.getReportSubscription=function(t,o){var r=this,a=this.promiseFactory.defer(),n="metadata/emailsubscriptions/report/{0}",s=this.telemetryService.startChildEvent(o,e.telemetry.EmailSubscriptionsRequest,e.telemetry.EmailSubscriptionRequestType.Get);return this.httpService.get(i.format(n,t.toString()),this.httpService.powerbiRequestOptions()).then((function(e){
s.resolve(),a.resolve(e.data)}),(function(t){var i=e.errorDetailsHelper.getTelemetryErrorDetails(t.error);s.reject(i);var o=r.getErrorCode(t);a.reject({ErrorCode:o,RequestId:t.requestId})})),a.promise},t.prototype.getErrorCode=function(e){var t=void 0;return e&&(e.error?t=e.error.code:e.status&&(t=e.status.toString())),t},t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(){return new i}e.createUserSettingsHttpService=t;var i=(function(){function t(){}return t.prototype.getUserSettings=function(t){var i=e.common.httpService.powerbiRequestOptions(t,"GetUserSettings");return i.enableTelemetry=!0,e.common.httpService.get("/powerbi/metadata/userSettings",i)},t.prototype.updateAllowQnaDataCollection=function(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"UpdateAllowQnaDataCollection");return o.enableTelemetry=!0,e.common.httpService.post("/powerbi/metadata/userSettings/allowQnaDataCollection",JSON.stringify(t),o)},t.prototype.updateExtendedSettings=function(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"UpdateUserExtendedSettings");return o.enableTelemetry=!0,e.common.httpService.post("/powerbi/metadata/userSettings/extendedSettings",JSON.stringify(t),o)},t.prototype.updateUserSettings=function(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"UpdateUserSettings");return o.enableTelemetry=!0,e.common.httpService.post("/powerbi/metadata/userSettings/updateUserSettings",JSON.stringify(t),o)},t.prototype.sendEmailForDownloadPowerBI=function(i,o){var r=e.common.httpService.powerbiRequestOptions(o,"SendEmailForDownloadPowerBI");return r.enableTelemetry=!0,e.common.httpService.post(t.PowerBIDownloadUrl,{email:i},r)},t.PowerBIDownloadUrl="https://powerbi.microsoft.com/submitemail",t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(){return new a}var i=jsCommon.Utility,o="/powerbi/content/providers/organization/",r="/powerbi/content/providers/organizationaltemplate/";e.createPublishAppHttpService=t;var a=(function(){function t(){}return t.prototype.publishApp=function(t,i){var o=e.common.httpService,r=o.powerbiRequestOptions(t,"PublishApp"),a=e.helpers.PublishAppHelper.createPublishOrUpdateAppModelRequest(i);return o.post(this.getUrlPrefix(i),a,r)},t.prototype.updateApp=function(t,o){var r=e.common.httpService,a=r.powerbiRequestOptions(t,"UpdateApp"),n=e.helpers.PublishAppHelper.createPublishOrUpdateAppModelRequest(o);return r.put(i.urlCombine(this.getUrlPrefix(o),o.objectId)+"/",n,a)},t.prototype.getUrlPrefix=function(e){return e.publishAsTemplate?r:o},t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t){return new i(e,t)}e.createConceptualModelSetting=t;var i=(function(){function t(e,t){this.featureSwitchService=e,this.tutorialDataStore=t}return t.prototype.isConceptualModelEnabled=function(){return this.featureSwitchService.featureSwitches.conceptualModelEnabled||this.featureSwitchService.featureSwitches.previewConceptualModel&&this.tutorialDataStore.hasKey(e.common.constants.previewConceptualModelNewKey)},t.prototype.isListViewEnabled=function(){return this.featureSwitchService.featureSwitches.listViewEnabled&&this.isConceptualModelEnabled()},t})();e.ConceptualModelSetting=i})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,i,o,a,n,s,c,l,d,p,u,v,h,g,m,f,y,b,S){return new r(e,t,i,o,a,n,s,c,l,d,p,u,v,h,g,m,f,y,b,S)}var i=e.dataServices.models.ContentPackItems,o=InJs.ModalDialogAction;e.createContentPackService=t;var r=(function(){function t(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m,f,y,b,S){var w=this;this.rootScope=t,this.errorService=i,this.telemetryService=o,this.modelConverter=r,this.syncService=a,this.contentProviderHttpService=n,this.localizationService=s,this.navigation=c,this.dashboardService=l,this.featureSwitchService=d,this.userInfo=p,this.licenseHelperService=u,this.notificationToast=v,this.reportService=h,this.modelService=g,this.permissionService=m,this.workbookService=f,this.promiseFactory=y,this.quota=b,this.modalDialogService=S,this.contentPacks=[],this.contentPackDeferred=y.defer(),this.contentPacksDirtyStates={},this.syncService.addContentPackRefreshListener(this),this.rootScope.$on(e.constants.dashboardContainerLoaded,(function(){w.loadContentPacks()})),this.rootScope.$on(e.constants.contentPackDirtyShowNotification,(function(e,t,i){return w.notifyIfDirty(t,i)})),this.rootScope.$on(e.constants.groupSwitchedEventName,(function(){return w.loadContentPacks()})),this.rootScope.$on(e.common.constants.navigation.stateChangeSuccess,(function(e,t,i,o,r){w.contentPacksDirtyStates={}}))}return t.prototype.onContentPackDeleted=function(e){if(this.contentPacks){var t=this.getContentPackIndexByID(e);t>=0&&this.contentPacks.splice(t,1)}},Object.defineProperty(t.prototype,"contentPackPromise",{get:function(){return this.contentPackDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.userHasPremiumLicense=function(){return this.userInfo.isPremiumUser},t.prototype.displayLicenseErrorDialog=function(){this.licenseHelperService.displayFeatureDisabledErrorMessage(e.telemetry.LicenseEnforcementOperation.ConnectContentPacks,this.localizationService.format("UpgradeAccount_ConnectContentMessage",[""+this.licenseHelperService.freeTrialPeriod]),this.localizationService.get("UpgradeAccount_ConnectContentTitle"))},t.prototype.setContentPackCleanForSession=function(e){var t=this.getContentPackIndexByGUID(e);t>0&&(this.contentPacks[t].isDirty=!1)},t.prototype.showDialogOnModelDeleteInContentPack=function(e){var t=this,i=this.errorService.control(),o=this.getActionsArray(i),r=this.localizationService.get("Model_DeleteConfirmationTitle"),a=this.localizationService.get("Model_DeleteCheckMessage");i.showCustomDialog(r,$("<div/>").text(a),o,(function(e){e.parent().find('input[value="'+t.localizationService.get("PBI_Button_Label_Cancel")+'"]').focus()}),!0)},t.prototype.showDialogOnWorkbookRemoveInContentPack=function(e){var t=this,i=this.errorService.control(),o=this.getActionsArray(i),r=this.localizationService.get("Workbook_RemoveConfirmationTitle"),a=this.localizationService.get("Workbook_RemoveCheckMessage");i.showCustomDialog(r,$("<div/>").text(a),o,(function(e){e.parent().find('input[value="'+t.localizationService.get("PBI_Button_Label_Cancel")+'"]').focus()}),!0)},t.prototype.deleteContentPack=function(e){var t=this,i=this.errorService.control(),r=[new o(this.localizationService.get("ModalDialogButtonText_Delete"),function(o,r){i.hideDialog(),t.deleteContentPackRequest(e),0===t.contentPacks.length&&t.navigation.navigateToContentListOrActiveDashboard()}),new o(this.localizationService.get("PBI_Button_Label_Cancel"),function(e,t){i.hideDialog()})],a=this.localizationService.get("ContentPack_DeleteConfirmationTitle"),n=this.localizationService.get("ContentPackDelete_Message");i.showCustomDialog(a,$("<div/>").text(n),r,(function(e){e.parent().find('input[value="'+t.localizationService.get("PBI_Button_Label_Cancel")+'"]').focus()}),!0)},t.prototype.onPersonalizeContentPack=function(t){var i=this;if(!this.userHasPremiumLicense())return void this.displayLicenseErrorDialog();if(!this.quota.checkQuotaExceeded(e.telemetry.QuotaCheckOperation.PersonalizeContentPack)){var r=this.errorService.control(),a=[new o(this.localizationService.get("ModalDialog_Save"),function(o,a){var n="<make-a-copy-progress-modal-dialog></make-a-copy-progress-modal-dialog>";r.hideDialog();var s=i.rootScope.$new();s.progressDescription=i.localizationService.get("MakeACopy_ProgressDialogDescription");var c=i.makeACopyProgressDialog(s,n),l=i.telemetryService,d=l.startEvent(e.telemetry.DashboardContentPackPersonalize);e.contentPackService.personalize(t,d.event).then((function(e){d.resolve(),i.navigation.navigateToContentListOrActiveDashboard()}),(function(e){d.reject(),i.errorService.error(i.localizationService.get("PublishContentPack_PersonalizationFailed_Desc"),"",{requestId:e.requestId,statusCode:e.status.toString(),activityId:e.activityId})})).finally((function(){return c.onDialogDisplayed.then((function(){return c.closeDialog()}))}))}),new o(this.localizationService.get("ModalDialog_Cancel"),function(e,t){r.hideDialog()})],n=this.localizationService.get("PublishContentPack_PersonalizeTitle"),s=this.rootScope.$new();s.allNamesFromPackage=this.getNamesFromPackage(t),s.packageItemsIntro=this.localizationService.get("PublishContentPack_PersonalizeDescriptionItemIntro");var c={dialogName:n,isDismissable:!0,scope:s,template:"<make-a-copy-modal-dialog></make-a-copy-modal-dialog>",dialogCssClass:"makeACopyModalDialog",dialogActions:a,htmlMessageText:this.localizationService.get("PublishContentPack_PersonalizeDescription"),focusOnFirstButton:!0,noActiveButtons:!1};this.modalDialogService.showLegacyWebModalDialog(c)}},t.prototype.getNamesFromPackage=function(e){var t=this.localizationService.get("PublishContentPack_Dashboard"),i=this.localizationService.get("PublishContentPack_Report"),o=this.localizationService.get("PublishContentPack_Dataset"),r=this.dashboardService.findDashboardsByPackageId(e),a=this.modelService.findModelsByPackageId(e),n=this.reportService.findReportsByPackageId(e),s=null!==r?_.map(r,(function(e){return e.displayName+" "+t})):[],c=null!==a?_.map(a,(function(e){return e.displayName+" "+o})):[],l=null!==n?_.map(n,(function(e){return e.displayName+" "+i})):[],d=s.concat(l).concat(c);return d},t.prototype.makeACopyProgressDialog=function(e,t){var i={dialogName:this.localizationService.get("MakeACopy_ProgressDialogTitle"),isDismissable:!1,scope:e,template:t,dialogCssClass:"makeACopyProgressModalDialog",dialogActions:[],htmlMessageText:"",focusOnFirstButton:!0,noActiveButtons:!1};return this.modalDialogService.showLegacyWebModalDialog(i)},t.prototype.getActionsArray=function(e){var t=this;return[new o(this.localizationService.get("Publish_ViewContentPacks"),function(i,o){e.hideDialog(),t.navigation.showViewContentPackSlider()}),new o(this.localizationService.get("PBI_Button_Label_Cancel"),function(t,i){e.hideDialog()})]},t.prototype.resetContentPackUsageFlags=function(){var e=this.dashboardService.dashboardContainerModel.dashboards;if(e)for(var t=0,i=e.length;t<i;t++)e[t]&&(e[t].isUsedByContentPack=!1);var o=this.reportService.reports;if(o)for(var t=0,i=o.length;t<i;t++)o[t]&&(o[t].isUsedByContentPack=!1);var r=this.modelService.models;if(r)for(var t=0,i=r.length;t<i;t++)r[t]&&(r[t].isUsedByContentPack=!1);var a=this.workbookService.workbooks;if(a)for(var t=0,i=a.length;t<i;t++)a[t]&&(a[t].isUsedByContentPack=!1)},t.prototype.deleteContentPackRequest=function(t){var i=this,o=this.promiseFactory.defer(),r=this.findContentPackByGUID(t);if(r){var a=this.telemetryService.startEvent(e.telemetry.DashboardDeleteContentPack,r.isSharedToEntireOrg,r.dashboardIds.length,r.reportIds.length,r.modelIds.length,r.workbookIds.length,r.listOfGroupPrincipals.length);this.removeContentPacks([r.providerId]),e.contentPackService.deleteContentPack(t,a.event).then((function(e){a.resolve(),i.markItemsUsedByContentPack(),o.resolve(null)}),(function(e){a.reject(),i.addContentPack(r),i.errorService.error(i.localizationService.get("ContentPack_Delete_FailedMessage"),"",{requestId:e.requestId,statusCode:e.status.toString(),activityId:e.activityId}),o.reject()}))}else this.notificationToast.notify({title:this.localizationService.get("ContentPack_Delete_Failed_Title"),message:this.localizationService.get("ContentPack_Delete_FailedMessage"),notificationType:e.common.NotificationToastType.Error}),o.reject();return o.promise},t.prototype.getContentPackContracts=function(){return this.contentPacks.map((function(e){return e.contract}))},t.prototype.addContentPack=function(e){if(e){var t=this.getContentPackIndexByID(e.providerId);t<0?this.contentPacks.push(e):(this.removeContentPacks([e.providerId]),this.contentPacks.push(e))}},t.prototype.getContentPackIndexByID=function(e){if(this.contentPacks.length>0)for(var t=0,i=this.contentPacks.length;t<i;t++){var o=this.contentPacks[t];if(o.providerId===e)return t}return-1},t.prototype.getContentPackIndexByGUID=function(e){if(this.contentPacks.length>0)for(var t=0,i=this.contentPacks.length;t<i;t++){var o=this.contentPacks[t];if(o.providerKey===e)return t}return-1},t.prototype.findContentPack=function(e){return null!=e?_.find(this.contentPacks,(function(t){return t.providerId===e})):null},t.prototype.findContentPackByGUID=function(e){return null!=e?_.find(this.contentPacks,(function(t){return t.providerKey===e})):null},t.prototype.removeContentPacks=function(e){for(var t=0,i=e.length;t<i;t++){var o=this.getContentPackIndexByID(e[t]);o>-1&&this.contentPacks.splice(o,1)}},t.prototype.loadContentPacks=function(t){var i=this;if((this.featureSwitchService.featureSwitches.orgAppsEnabled||this.userHasPremiumLicense())&&!this.permissionService.isActiveWorkspaceIsReadOnly){var o=this.telemetryService.startEvent(e.telemetry.DashboardViewContentPacks);this.contentProviderHttpService.getOrganizationalContentProviders(o.event).then((function(e){var t=e.data;i.contentPacks=[];for(var r=0,a=t.length;r<a;++r)i.contentPacks.push(i.modelConverter.convertContentPack(t[r]));o.resolve(),i.markItemsUsedByContentPack(),i.contentPackDeferred.resolve(i.contentPacks)}),(function(e){o.reject(),i.contentPackDeferred.reject()}))}},t.prototype.markItemsUsedByContentPack=function(){var e=this;if(this.resetContentPackUsageFlags(),this.contentPacks)for(var t=this.contentPacks.length,i=0;i<t;i++){var o=this.contentPacks[i];o.dashboardIds.forEach((function(t){var i=e.dashboardService.findDashboard(t);i&&(i.isUsedByContentPack=!0)})),o.reportIds.forEach((function(t){var i=e.reportService.findReport(t);i&&(i.isUsedByContentPack=!0)})),o.modelIds.forEach((function(t){var i=e.modelService.findModel(t);i&&(i.isUsedByContentPack=!0)})),o.workbookIds.forEach((function(t){var i=e.workbookService.findWorkbook(t);i&&(i.isUsedByContentPack=!0)}))}},t.prototype.notifyIfDirty=function(e,t){var o=[],r=this.contentPacks.length;switch(t){case i.Dashboard:for(var a=0;a<r;a++)this.contentPacks[a].isDirty||_.contains(this.contentPacks[a].dashboardIds,e)&&(o.push(this.contentPacks[a].providerKey),this.contentPacks[a].isDirty=!0);break;case i.Report:for(var a=0;a<r;a++)this.contentPacks[a].isDirty||_.contains(this.contentPacks[a].reportIds,e)&&(o.push(this.contentPacks[a].providerKey),this.contentPacks[a].isDirty=!0);break;case i.Model:for(var a=0;a<r;a++)this.contentPacks[a].isDirty||_.contains(this.contentPacks[a].modelIds,e)&&(o.push(this.contentPacks[a].providerKey),this.contentPacks[a].isDirty=!0);break;case i.Workbook:for(var a=0;a<r;a++)this.contentPacks[a].isDirty||_.contains(this.contentPacks[a].workbookIds,e)&&(o.push(this.contentPacks[a].providerKey),this.contentPacks[a].isDirty=!0)}this.contentPacksDirtyStates[t]||(this.contentPacksDirtyStates[t]={});var n=this.contentPacksDirtyStates[t];n[e]||(this.showContentPackDirtyNotification(),n[e]=!0),o.length>0&&this.setContentPackDirty(o)},t.prototype.showContentPackDirtyNotification=function(){var t=this,i={displayText:this.localizationService.get("PublishContentPack_IsDirty_Ok"),action:function(){t.navigation.showViewContentPackSlider()}};this.notificationToast.notify({message:this.localizationService.get("PublishContentPack_Changes"),notificationType:e.common.NotificationToastType.Alert,actionButtons:[i]})},t.prototype.setContentPackDirty=function(t){var i=this.telemetryService.startEvent(e.telemetry.DashboardContentPackDirty,t.length);e.contentPackService.setContentPackDirty(t,i.event).then((function(e){i.resolve()}),(function(e){i.reject()}))},t})();e.ContentPackService=r})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h,m,f,y,b,S,w,C,D,I,T,M,E,P,k){return new g(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h,m,f,y,b,S,w,C,D,I,T,M,E,P,k)}function i(e){return e.inContentListView()?a.ContentList:e.inAppsDetailView()?a.OrgApps:e.inFavoritesView()?a.Favorites:e.inRecentlyViewedView()?a.RecentlyUsed:void 0}var o=e.dataServices.AppUtils,r=e.common.models.CollapsiblePaneExpandedWidth,a=e.telemetry.ContentListArtifactSource,n=e.telemetry.ContentListArtifactType,s=e.common.contracts.ContentTileType,c=e.dataServices.models.Dashboard,l=e.dataServices.contracts.FavoriteType,d=e.common.models.Report,p=e.common.contracts.PublishOrRefreshStatus,u=e.common.constants.TaskPaneCollapsiblePaneMode,v=e.dataServices.models.Workbook,h="packageType";e.createContentListService=t;var g=(function(){function t(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h,g,m,f,y,b,S,w,C,D,I,T,M,E,P){this.telemetryService=e,this.dashboardService=t,this.reportService=i,this.navigation=o,this.modelService=r,this.analyzeInExcel=a,this.workbookService=n,this.contentPackService=s,this.localizationService=c,this.packageService=l,this.errorService=d,this.$rootScope=p,this.modalDialogService=u,this.insightsService=v,this.exportToPowerPointService=h,this.featureSwitchService=g,this.refreshService=m,this.permissionService=f,this.settingsMetadataService=y,this.location=b,this.$window=S,this.favorites=w,this.shareSliderService=C,this.groupService=D,this.appService=I,this.promiseFactory=T,this.publishedAppService=M,this.mostRecentlyUsedService=E,this.dataServiceModelConverter=P}return t.prototype.isOrgAppPackage=function(e){var t=this.packageService.findPackage(e);return!(!t||!t.contract)&&this.appService.isInstalledApp(t.contract.contentProviderRefId)},t.prototype.tileSelectionOff=function(e){this.shareSliderService.shareDashboard=null;var t=this.dashboardService.findDashboardByGUID(e);if(t&&(t.isContentTileSelected=!1),this.navigation.inFavoritesView())for(var i=this.favorites.getFavoritesByGUID(e),o=0,r=i;o<r.length;o++){var a=r[o];a.isContentTileSelected=!1}},t.prototype.dashboardsOwnersMergedPromise=function(){return this.dashboardService.dashboardsOwnersMergedPromise()},t.prototype.isFavoriteDashboard=function(e){var t=this.favorites.getFavoritesByGUID(e);return!_.isEmpty(t)},t.prototype.isFavoriteDisabled=function(e){var t=this.dashboardService.findDashboardByGUID(e);return!!t&&(t.isFavoriteDisabled||t.id<0)},t.prototype.identifyAndDeleteContent=function(e,t){var i=this.getStrategy(t);i&&i.identifyAndDeleteContent(e)},t.prototype.deleteContent=function(e,t,i){var o=this.getStrategy(e);o&&o.deleteContent(t,i)},t.prototype.addDashboard=function(e){this.dashboardService.addDashboard(e)},t.prototype.canShowTileOptions=function(e){var t=this.getStrategy(e.contentTileType);return!!t&&t.canShowTileOptions(e)},t.prototype.publishInProgress=function(e){var t=this.getStrategy(e.contentTileType);if(t){var i=t.getModels(e),o=i&&i[0];return!!o&&o.packagePublishStatus===p.PublishInProgress}},t.prototype.canRefreshNow=function(e,t){var i=this.getStrategy(e);return!!i&&i.canRefreshNow(t)},t.prototype.canScheduleRefresh=function(e,t){var i=this.getStrategy(e);return!!i&&i.canScheduleRefresh(t)},t.prototype.canReplaceWorkbook=function(e,t){var i=this.getStrategy(e);return!!i&&i.canReplaceWorkbook(t)},t.prototype.shareContent=function(e,t,i){var o=this.getStrategy(e);o&&o.shareContent(t,i)},t.prototype.addFavorite=function(e,t,i){var o=this.getStrategy(e);return o?o.addFavorite(t,i):this.promiseFactory.reject()},t.prototype.removeFavorite=function(e,t){var i=this.getStrategy(e);i&&i.removeFavorite(t)},t.prototype.refreshNow=function(e,t){var i=this.getStrategy(e);i&&i.refreshNow(t)},t.prototype.scheduleRefresh=function(e,t){var i=this.getStrategy(e);i&&i.scheduleRefresh(t)},t.prototype.editWorkbook=function(e,t){var i=this.getStrategy(e);i&&i.editWorkbook(t)},t.prototype.replaceWorkbook=function(e,t){var i=this.getStrategy(e);i&&i.replaceWorkbook(t)},t.prototype.exportDashboard=function(e,t){var i=this.getStrategy(e);i&&i.exportDashboard(t)},t.prototype.exportToPowerPoint=function(e,t){var i=this.getStrategy(e);i&&i.exportReportToPowerPoint(t)},t.prototype.getDashboards=function(){return this.dashboardService.getDashboards()},t.prototype.getReports=function(){return this.reportService.getReports()},t.prototype.getWorkbooks=function(){var e=this;return this.workbookService.ensureWorkbookInitialization().then((function(){return e.workbookService.workbooks}))},t.prototype.getDatasets=function(){var e=this;return this.modelService.modelsPromise.then((function(){return e.modelService.models}))},t.prototype.getPublishedApps=function(){return this.publishedAppService.getPublishedAppsPromise().then((function(e){return e}))},t.prototype.openContent=function(e,t,i,o,r){var a=this.getStrategy(e);a&&a.openContent(i,t,o,r)},t.prototype.showRename=function(e,t){var i=this.getStrategy(e);i&&i.showRename(t)},t.prototype.analyzeContentInExcel=function(e){var t=this.getStrategy(e.contentTileType);t&&t.analyzeContentInExcel(e)},t.prototype.personalizeContent=function(t,i){var o=this.getStrategy(t);if(o){var r=o.getContentPackageId(i);this.telemetryService.logEvent(e.telemetry.DashboardClickPersonalize,r),this.contentPackService.onPersonalizeContentPack(r)}},t.prototype.getModels=function(e){var t=this.getStrategy(e.contentTileType);if(t)return t.getModels(e)},t.prototype.runInsights=function(t,i){var o=this.getStrategy(t.contentTileType);if(o){var r=o.getModels(t),a=r&&r[0],n=t.contentTileType===s.Report?e.insights.constants.insightsSourceReportTile:e.insights.constants.insightsSourceNavigationPane;this.runInsightsHelper(a,n,i)}},t.prototype.runInsightsHelper=function(t,i,o){if(t){var r=this.insightsService.getInsightsStatus(t.contract);if(2===r)this.navigation.showInsightsPanel(t.dbName,i);else if(0===r){var a=e.telemetry.InsightEntryPoint.NavigationPane;i===e.insights.constants.insightsSourceToast?a=e.telemetry.InsightEntryPoint.Notification:i===e.insights.constants.insightsSourceReportTile&&(a=e.telemetry.InsightEntryPoint.ContentTile);var n=this.telemetryService.startEvent(e.telemetry.InsightsShowInsights,0,a,t.contract.contentProviderId,e.getHashCode(t.contract.dbName),!1);this.insightsService.getInsights(!0,e.insights.services.RequestType.Initial,t.contract,a,e.insights.proxies.wireContracts.RequestOptions.ThoroughMode,n.event,null,null,null,null,!1).then((function(e){var i=e.insightsContainers,r=i?i.length:0;n.event.info.insightCount=r,e.isError&&r<=0?n.reject():n.resolve(),o(r>0,t)}))}}},t.prototype.getStrategy=function(e){var t={navigation:this.navigation,dashboardService:this.dashboardService,reportService:this.reportService,errorService:this.errorService,$rootScope:this.$rootScope,modalDialogService:this.modalDialogService,localizationService:this.localizationService,modelService:this.modelService,analyzeInExcel:this.analyzeInExcel,workbookService:this.workbookService,contentPackService:this.contentPackService,packageService:this.packageService,telemetryService:this.telemetryService,insightsService:this.insightsService,featureSwitchService:this.featureSwitchService,refreshService:this.refreshService,permissionService:this.permissionService,settingsMetadataService:this.settingsMetadataService,location:this.location,$window:this.$window,favorites:this.favorites,exportToPowerPoint:this.exportToPowerPointService,shareSliderService:this.shareSliderService,groupService:this.groupService,promiseFactory:this.promiseFactory,appService:this.appService,publishedAppService:this.publishedAppService,mostRecentlyUsedService:this.mostRecentlyUsedService,dataServiceModelConverter:this.dataServiceModelConverter};switch(e){case s.Dashboard:return new f(t);case s.Favorite:return new b(t);case s.Report:return new y(t);case s.Workbook:return new S(t);case s.OrgApp:return new w(t);case s.PublishedOrgApp:return new C(t);case s.AppDataset:return new D(t);default:return}},t})();e.ContentListService=g;var m=(function(){function e(e){e.featureSwitchService.featureSwitches.appsEnabled,this.services=e}return e.prototype.openContent=function(e,t,i,o){},e.prototype.deleteContent=function(e,t){},e.prototype.addFavorite=function(e,t){return null},e.prototype.removeFavorite=function(e){},e.prototype.shareContent=function(e,t){},e.prototype.showRename=function(e){},e.prototype.identifyAndDeleteContent=function(e){},e.prototype.getContentPackageId=function(e){return null},e.prototype.analyzeContentInExcel=function(e){},e.prototype.getModels=function(e){return null},e.prototype.runInsights=function(e,t){},e.prototype.canRefreshNow=function(e){return!1},e.prototype.canScheduleRefresh=function(e){return!1},e.prototype.canReplaceWorkbook=function(e){return!1},e.prototype.canShowTileOptions=function(e){return!0},e.prototype.refreshNow=function(e){},e.prototype.scheduleRefresh=function(e){},e.prototype.exportDashboard=function(e){},e.prototype.editWorkbook=function(e){},e.prototype.replaceWorkbook=function(e){},e.prototype.exportReportToPowerPoint=function(e){},e.prototype.prepareAndTriggerModelDeletion=function(e,t,i,o){var r=this.services.modelService.findModel(e,t);if(r&&r.isUsedByContentPack)this.services.contentPackService.showDialogOnModelDeleteInContentPack(e);else{var a=this.services.localizationService.get(i),n=this.services.localizationService.get(o);this.deleteModel(e,t,a,n)}},e.prototype.deleteModel=function(e,t,i,o){var r=this,a=this.services.errorService.control(),n=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Delete"),function(i,o){a.hideDialog(),r.services.modelService.deleteModel(e,t)}),new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Cancel"),function(e,t){a.hideDialog()})],s=this.services.modelService.findModel(e,t),c="";s&&(c=s.displayName),i=i||this.services.localizationService.get("Model_DeleteConfirmationTitle"),o=o||this.services.localizationService.format("Model_DeleteConfirmationMessage",c),a.showCustomDialog(i,$("<div/>").text(o),n,(function(e){e.parent().find('input[value="'+r.services.localizationService.get("ModalDialogButtonText_No")+'"]').focus()}),!0)},e.prototype.removeWorkbook=function(e,t,i){var o=this;t||i||(t="Workbook_RemoveConfirmationTitle",i=e.isOwner()?this.services.packageService.isLocalWorkbook(e.packageId)?"Workbook_RemoveOwnedLocalConfirmationMessage":"Workbook_RemoveOwnedRemoteConfirmationMessage":e.isPersonalized()?"Workbook_RemovePersonalizedConfirmationMessage":"Workbook_RemoveInOrgPackConfirmationMessage");var r=this.services.localizationService.get(t),a=this.services.localizationService.get(i),n=this.services.errorService.control(),s=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Remove"),function(t,i){n.hideDialog(),o.services.workbookService.removeWorkbook(e.id,e.packageId,o.services.packageService.getWorkbookStorageProvider(e.packageId),o.services.packageService.getWorkbookContentProvider(e.packageId)),o.services.mostRecentlyUsedService.removeMRU(e.uniqueId)}),new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Cancel"),function(e,t){n.hideDialog()})];n.showCustomDialog(r,$("<div/>").text(a),s,(function(e){e.parent().find('input[value="'+o.services.localizationService.get("ModalDialogButtonText_No")+'"]').focus()}),!0)},e})(),f=(function(t){function o(){t.apply(this,arguments)}return __extends(o,t),o.prototype.openContent=function(t,o,r,a){this.services.telemetryService.logEvent(e.telemetry.ContentListOpenArtifact,i(this.services.navigation),n.Dashboard),this.services.navigation.insertGroupAndNavigateToDashboardByGUID(t,o)},o.prototype.deleteContent=function(e,t){var i=this.services.dashboardService.findDashboardByGUID(e);i&&this.services.dashboardService.promptForDeleteDashboard(i.id,t)},o.prototype.addFavorite=function(e,t){return this.services.groupService.activeGroupObjectId!==t?this.switchGroupThenAddFavorite(e,t):this.addFavoriteInternal(e)},o.prototype.switchGroupThenAddFavorite=function(t,i){var o=this,r=this.services.groupService.getGroup(i),a=this.services.telemetryService.startEvent(e.telemetry.GroupsSwitchGroup,i);return this.services.groupService.switchGroup(r,!1,a).then((function(){return o.services.dashboardService.getDashboards().then((function(){return o.addFavoriteInternal(t)}))}))},o.prototype.addFavoriteInternal=function(e){var t=this.services.dashboardService.findDashboardByGUID(e);return t?(t.isFavorite=!0,t.isFavoriteDisabled=!0,this.services.favorites.addFavorite(l.Dashboard,t.id).then((function(e){t.favoriteInfo=e})).finally((function(){t.isFavoriteDisabled=!1}))):this.services.promiseFactory.reject()},o.prototype.removeFavorite=function(e){this.services.favorites.deleteFavorite(e)},o.prototype.shareContent=function(e,t){e&&e instanceof c&&(this.services.shareSliderService.openShareSlider(e),e.isContentTileSelected=!0)},o.prototype.showRename=function(t){var i=this.services.dashboardService.findDashboardByGUID(t);i&&(this.services.settingsMetadataService.setSettings(1,t),i.isContentTileSelected=!0,this.services.$rootScope.$emit(e.constants.showTaskPaneSlider,u.SettingsBlade,r.Medium))},o.prototype.getContentPackageId=function(e){if(e&&e instanceof c)return e.contract.originalPackageId},o.prototype.canShowTileOptions=function(e){return!this.services.permissionService.isActiveWorkspaceIsReadOnly},o.prototype.getModels=function(e){var t=this;if(e&&e instanceof c){var i=e.contract;if(i&&!_.isEmpty(i.modelIds)&&!_.isEmpty(i.packageIds))return _.map(i.modelIds,(function(e){return t.services.modelService.findModel(e)}))}},o.prototype.exportDashboard=function(e){var t=this.services.dashboardService.findDashboardByGUID(e);if(t){var i;this.services.location&&(i=this.services.location.search()[h]),i||(i="XMLA"),this.services.dashboardService.exportDashboard(t.id,i)}},o.prototype.identifyAndDeleteContent=function(e){var t=this.services.dashboardService.findDashboardByGUID(e);if(t){var i=t.contract.workbookIds[0],r=t.contract.modelIds[0],a=t.contract.originalPackageId;if(r)this.prepareAndTriggerModelDeletion(r,a,o.dashboardDeleteConfirmationTitle,o.dashboardDeleteContentPackMessage);else if(i){var n=this.services.workbookService.findWorkbook(i,a);if(n&&n.isUsedByContentPack)this.services.contentPackService.showDialogOnWorkbookRemoveInContentPack(i);else{var s=o.dashboardDeleteConfirmationTitle,c=o.dashboardDeleteConfirmationTitle;this.removeWorkbook(n,s,c)}}else if(a){var l=this.services.packageService.findPackage(a),d=this.services.appService.getAppById(l.contract.contentProviderRefId);this.services.appService.deleteOrgApp(d.providerKey,a)}}},o.dashboardDeleteConfirmationTitle="Dashboard_DeleteConfirmationTitle",o.dashboardDeleteContentPackMessage="Dashboard_DeleteOrgAppContentPack",o})(m),y=(function(t){function o(){t.apply(this,arguments)}return __extends(o,t),o.prototype.openContent=function(t,o,r,a){this.services.telemetryService.logEvent(e.telemetry.ContentListOpenArtifact,i(this.services.navigation),n.Report),this.services.navigation.insertGroupAndNavigateToReportByGUID(t,o,r)},o.prototype.showRename=function(t){var i=this.services.reportService.findReportByGUID(t);i&&(this.services.settingsMetadataService.setSettings(2,t),i.isContentTileSelected=!0,this.services.$rootScope.$emit(e.constants.showTaskPaneSlider,u.SettingsBlade,r.Medium))},o.prototype.deleteContent=function(e,t){var i=this.services.reportService.findReportByGUID(e);i&&this.deleteReport(i.id)},o.prototype.getContentPackageId=function(e){if(e&&e instanceof d)return e.packageId},o.prototype.canShowTileOptions=function(t){if(t&&t instanceof d){var i=this.getModels(t),o=i&&i[0];return!this.services.permissionService.isActiveWorkspaceIsReadOnly&&o&&o.packagePublishStatus!==e.common.contracts.PublishOrRefreshStatus.PublishInProgress}return!1},o.prototype.identifyAndDeleteContent=function(e){var t=this.services.reportService.findReportByGUID(e);if(t){var i=t.modelId,r=t.packageId;i&&this.prepareAndTriggerModelDeletion(i,r,o.reportDeleteConfirmationTitle,o.reportDeleteContentPackMessage)}},o.prototype.analyzeContentInExcel=function(t){var i=this.getModels(t),o=i&&i[0];o&&(this.services.telemetryService.logEvent(e.telemetry.DashboardAndReportsAnalyzeInExcel,"Report Navigation Pane List",o.contentProviderId,o.contract.modelFeatures,o.dbName),this.services.analyzeInExcel.startAnalyzeInExcel(o))},o.prototype.exportReportToPowerPoint=function(e){var t=this.services.reportService.findReportByGUID(e);if(t){var i={reportId:t.id,filename:t.displayName,reportSectionsNumber:t.reportSlides?t.reportSlides.length:void 0
};this.services.exportToPowerPoint.exportToPowerPoint(i)}},o.prototype.getModels=function(e){if(e&&e instanceof d){var t=this.services.modelService.findModel(e.modelId,e.packageId);if(t)return[t]}},o.prototype.deleteReport=function(e){var t=this,i=this.services.$rootScope.$new(),o=this.services.errorService.control(),r=this.services.reportService.findReport(e),a=[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Delete"),function(i,a){o.hideDialog(),t.services.mostRecentlyUsedService.removeMRU(r.objectId),t.services.reportService.deleteReport(e)}),new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialogButtonText_Cancel"),function(e,t){o.hideDialog()})];i.message=this.services.localizationService.format("Report_DeleteConfirmationMessage",[r.displayName]);var n,s,c=this.services.dashboardService.hasTileForReportandSection(void 0,e);c&&(n=jsCommon.ModalDialogNotificationType.Warning,s=this.services.localizationService.get("PinLiveReport_DeleteReportWarning"));var l={dialogName:this.services.localizationService.get("Report_DeleteConfirmationTitle"),isDismissable:!0,scope:i,template:"<custom-modal-dialog></custom-modal-dialog>",dialogCssClass:"customModalDialog",focusOnFirstButton:!0,dialogActions:a,notificationType:n,notificationText:s};this.services.modalDialogService.showLegacyWebModalDialog(l)},o.reportDeleteConfirmationTitle="Report_DeleteConfirmationTitle",o.reportDeleteContentPackMessage="Report_DeleteOrgAppContentPack",o})(m),b=(function(t){function o(){t.apply(this,arguments)}return __extends(o,t),o.prototype.openContent=function(t,o,r,a){this.services.telemetryService.logEvent(e.telemetry.ContentListOpenArtifact,i(this.services.navigation),n.Dashboard),this.services.navigation.insertGroupAndNavigateToDashboardByGUID(t,o)},o.prototype.removeFavorite=function(e){this.services.favorites.deleteFavorite(e)},o.prototype.shareContent=function(e,t){var i=e.objectId;this.services.groupService.activeGroupObjectId!==t?this.switchGroupThenShare(i,t):this.shareContentInternal(i)},o.prototype.switchGroupThenShare=function(t,i){var o=this,r=this.services.groupService.getGroup(i),a=this.services.telemetryService.startEvent(e.telemetry.GroupsSwitchGroup,i);this.services.groupService.switchGroup(r,!1,a).then((function(){o.services.groupService.ensureGroupsInitialization().then((function(){o.services.navigation.inFavoritesView()&&o.services.dashboardService.getDashboards().then((function(){o.shareContentInternal(t)}))}))}))},o.prototype.shareContentInternal=function(e){var t=this.services.dashboardService.findDashboardByGUID(e);if(t){this.services.shareSliderService.openShareSlider(t);for(var i=this.services.favorites.getFavoritesByGUID(e),o=0,r=i;o<r.length;o++){var a=r[o];a.isContentTileSelected=!0}}},o.prototype.canShowTileOptions=function(e){return!0},o})(m),S=(function(t){function o(){t.apply(this,arguments)}return __extends(o,t),o.prototype.openContent=function(t,o,r,a){var s=this.services.workbookService.findWorkbookByUniqueId(t);s&&(s.isNew=!1),this.services.telemetryService.logEvent(e.telemetry.ContentListOpenArtifact,i(this.services.navigation),n.Workbook),this.services.navigation.insertGroupAndNavigateToWorkbookByUniqueId(t,o)},o.prototype.editWorkbook=function(t){var i=this.services.workbookService.findWorkbookByUniqueId(t);i&&(this.services.$window.open(i.editUrl,"_blank"),this.services.telemetryService.logEvent(e.telemetry.DashboardEditWorkbook,i.contract.etagHash))},o.prototype.replaceWorkbook=function(e){var t=this.services.workbookService.findWorkbookByUniqueId(e);t&&this.services.workbookService.replaceLocalWorkbook(t.uniqueId)},o.prototype.showRename=function(t){var i=this.services.workbookService.findWorkbookByUniqueId(t);i&&(this.services.settingsMetadataService.setSettings(3,t),i.isContentTileSelected=!0,this.services.$rootScope.$emit(e.constants.showTaskPaneSlider,u.SettingsBlade,r.Medium))},o.prototype.getContentPackageId=function(e){if(e&&e instanceof v)return e.packageId},o.prototype.identifyAndDeleteContent=function(e){var t=this.services.workbookService.findWorkbookByUniqueId(e);if(t){var i=t.id,o=t.packageId;if(i){var r=this.services.workbookService.findWorkbook(i,o);r&&r.isUsedByContentPack?this.services.contentPackService.showDialogOnWorkbookRemoveInContentPack(i):this.removeWorkbook(r)}}},o.prototype.canRefreshNow=function(e){var t=this.services.workbookService.findWorkbookByUniqueId(e);return!!t&&this.services.packageService.isRefreshNowEnabledForWorkbook(t)},o.prototype.canShowTileOptions=function(e){return!this.services.permissionService.isActiveWorkspaceIsReadOnly},o.prototype.getModels=function(e){if(e&&e instanceof v&&e.isOwner()&&e.modelId&&e.packageId){var t=this.services.modelService.findModel(e.modelId,e.packageId);if(t)return[t]}},o.prototype.canScheduleRefresh=function(e){var t=this.services.workbookService.findWorkbookByUniqueId(e);return!!t&&this.services.packageService.isScheduleRefreshEnabledForWorkbook(t)},o.prototype.canReplaceWorkbook=function(e){var t=this.services.workbookService.findWorkbookByUniqueId(e);return!!t&&this.services.packageService.isLocalWorkbook(t.packageId)},o.prototype.refreshNow=function(t){var i=this.services.workbookService.findWorkbookByUniqueId(t);if(i)if(i.modelId&&i.contract.isPowerPivotVersionSupportsRefresh){var o=this.services.modelService.findModel(i.modelId,i.packageId);o&&(this.services.telemetryService.logEvent(e.telemetry.DashboardWorkbookClickRefreshNow,o.contentProviderId),this.services.refreshService.tryRefreshNow(this.services.telemetryService,this.services.errorService,o,e.models.SettingsGroupsType.Workbooks))}else this.services.telemetryService.logEvent(e.telemetry.DashboardWorkbookClickRefreshNow,i.contentProviderId),this.services.refreshService.refreshNow(this.services.telemetryService,this.services.errorService,i.packageId,i.contentProviderId)},o.prototype.scheduleRefresh=function(t){var i=this.services.workbookService.findWorkbookByUniqueId(t);if(i){var o=this.services.modelService.findModel(i.modelId,i.packageId);o&&(this.services.telemetryService.logEvent(e.telemetry.DashboardWorkbookClickScheduleRefresh,o.contentProviderId),this.services.$rootScope.$emit(e.common.constants.showSettingsViewerEventName,e.models.SettingsGroupsType.Workbooks,o.dbName))}},o})(m),w=(function(t){function r(){t.apply(this,arguments)}return __extends(r,t),r.prototype.openContent=function(t,o,r,a){this.services.telemetryService.logEvent(e.telemetry.ContentListOpenArtifact,i(this.services.navigation),n.OrgApp);var s=this.services.appService.getAppByGUID(t),c=!!a;if(!a){var l=this.services.packageService.getPackagesByProviderId(s.providerId,s.category);a=l[0].id}var d=this.services.appService.getInstalledAppModel(s,a),p=d.defaultContent;if(0!==d.defaultContentOption&&p){if(p.dashboardObjectId){var u=this.services.dashboardService.retrieveDashboardForApp(a,p.dashboardObjectId);this.services.navigation.navigateToAppDashboardByGUID(u.objectId,u.contract.originalDashboardObjectId,t,o)}else if(p.reportObjectId){var v=this.services.reportService.retrieveReportForApp(a,p.reportObjectId);this.services.navigation.navigateToAppReportByGUID(v.objectId,v.contract.originalReportObjectId,t,o)}else if(p.workbookObjectId){var h=this.services.workbookService.findWorkbookByUniqueId(p.workbookObjectId);this.services.navigation.navigateToAppWorkbookByUniqueId(h.uniqueId,t,o)}}else c?this.services.navigation.navigateToAppInstance(t,a):this.services.navigation.navigateToApp(t)},r.prototype.identifyAndDeleteContent=function(e){var t=this.services.appService,i=t.getAppByGUID(e),r=i.providerKey,a=o.getPackageIDByOrgAppGUID(t,this.services.packageService,r);this.services.appService.deleteOrgApp(r,a)},r.prototype.canShowTileOptions=function(e){return!1},r.prototype.canScheduleRefresh=function(e){return!1},r.prototype.getContentPackageId=function(e){return o.getPackageIDByOrgAppGUID(this.services.appService,this.services.packageService,e.objectId)},r})(m),C=(function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.openContent=function(e,t){this.services.navigation.showPublishAppSlicer(e)},t.prototype.identifyAndDeleteContent=function(e){this.services.publishedAppService.deletePublishedApps(e)},t})(m),D=(function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.canShowTileOptions=function(e){return!1},i.prototype.analyzeContentInExcel=function(t){var i=t;this.services.telemetryService.logEvent(e.telemetry.DashboardAndReportsAnalyzeInExcel,"Report Navigation Pane List",i.contentProviderId,i.contract.modelFeatures,i.dbName),this.services.analyzeInExcel.startAnalyzeInExcel(i)},i.prototype.getModels=function(e){var t=e;if(t)return[t]},i})(m)})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,i,o,r){return new p(e,t,i,o,r)}function i(e,t,i){var o=e?r.dynamicGridWidth:r.dynamicGridHeight,a=0;i&&(a=e?s+c:l+d);var p=e?0:n;return o*t+2*r.dynamicGridItemSpacing*(t-1)-a-p}function o(t,i,o,r){var a=i.tooltipsEnabled,n=r&&r.forecastEnabled,s=r&&r.columnLabelImprovements,c=r&&r.hierarchicalAxisEnabled,l=r&&r.improvedMapLegend,d=r&&r.axisControlImprovements;switch(t){case e.visuals.plugins.barChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.barChart,(function(){return new e.visuals.CartesianChart({chartType:6,tooltipsEnabled:a,animator:new e.visuals.DashboardColumnChartAnimator,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties,columnLabelImprovements:s,axisControlImprovements:d})}));case e.visuals.plugins.clusteredBarChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.clusteredBarChart,(function(){return new e.visuals.CartesianChart({chartType:5,tooltipsEnabled:a,animator:new e.visuals.DashboardColumnChartAnimator,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties,columnLabelImprovements:s,axisControlImprovements:d})}));case e.visuals.plugins.clusteredColumnChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.clusteredColumnChart,(function(){return new e.visuals.CartesianChart({chartType:3,tooltipsEnabled:a,animator:new e.visuals.DashboardColumnChartAnimator,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties,columnLabelImprovements:s,hierarchicalAxisEnabled:c,axisControlImprovements:d})}),(function(t){return e.visualHost.visualPluginServiceHelpers.applyFeatureSwitches(t,r)}));case e.visuals.plugins.columnChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.columnChart,(function(){return new e.visuals.CartesianChart({chartType:4,tooltipsEnabled:a,animator:new e.visuals.DashboardColumnChartAnimator,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties,columnLabelImprovements:s,hierarchicalAxisEnabled:c,axisControlImprovements:d})}),(function(t){return e.visualHost.visualPluginServiceHelpers.applyFeatureSwitches(t,r)}));case e.visuals.plugins.dataDotClusteredColumnComboChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.dataDotClusteredColumnComboChart,(function(){return new e.visuals.CartesianChart({chartType:15,tooltipsEnabled:a,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties})}));case e.visuals.plugins.dataDotStackedColumnComboChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.dataDotStackedColumnComboChart,(function(){return new e.visuals.CartesianChart({chartType:16,tooltipsEnabled:a,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties})}));case e.visuals.plugins.donutChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.donutChart,(function(){return new e.visuals.DonutChart({tooltipsEnabled:a})}));case e.visuals.plugins.funnel.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.funnel,(function(){return new e.visuals.FunnelChart({tooltipsEnabled:a,axisControlImprovements:d})}));case e.visuals.plugins.gauge.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.gauge,(function(){return new e.visuals.Gauge({animator:new e.visuals.BaseAnimator,tooltipsEnabled:a})}));case e.visuals.plugins.hundredPercentStackedBarChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.hundredPercentStackedBarChart,(function(){return new e.visuals.CartesianChart({chartType:7,tooltipsEnabled:a,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties,columnLabelImprovements:s,axisControlImprovements:d})}));case e.visuals.plugins.hundredPercentStackedColumnChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.hundredPercentStackedColumnChart,(function(){return new e.visuals.CartesianChart({chartType:8,tooltipsEnabled:a,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties,columnLabelImprovements:s,hierarchicalAxisEnabled:c,axisControlImprovements:d})}),(function(t){return e.visualHost.visualPluginServiceHelpers.applyFeatureSwitches(t,r)}));case e.visuals.plugins.lineChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.lineChart,(function(){return new e.visuals.CartesianChart({chartType:0,tooltipsEnabled:a,forecastEnabled:n,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties,hierarchicalAxisEnabled:c,axisControlImprovements:d})}),(function(t){return e.visualHost.visualPluginServiceHelpers.applyFeatureSwitches(t,r)}));case e.visuals.plugins.areaChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.areaChart,(function(){return new e.visuals.CartesianChart({chartType:1,tooltipsEnabled:a,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties,hierarchicalAxisEnabled:c,axisControlImprovements:d})}),(function(t){return e.visualHost.visualPluginServiceHelpers.applyFeatureSwitches(t,r)}));case e.visuals.plugins.stackedAreaChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.stackedAreaChart,(function(){return new e.visuals.CartesianChart({chartType:2,tooltipsEnabled:a,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties,hierarchicalAxisEnabled:c,axisControlImprovements:d})}),(function(t){return e.visualHost.visualPluginServiceHelpers.applyFeatureSwitches(t,r)}));case e.visuals.plugins.lineClusteredColumnComboChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.lineClusteredColumnComboChart,(function(){return new e.visuals.CartesianChart({chartType:13,tooltipsEnabled:a,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties,axisControlImprovements:d})}));case e.visuals.plugins.lineStackedColumnComboChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.lineStackedColumnComboChart,(function(){return new e.visuals.CartesianChart({chartType:14,tooltipsEnabled:a,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties,axisControlImprovements:d})}));case e.visuals.plugins.pieChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.pieChart,(function(){return new e.visuals.DonutChart({sliceWidthRatio:0,tooltipsEnabled:a})}));case e.visuals.plugins.scatterChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.scatterChart,(function(){return new e.visuals.CartesianChart({chartType:9,tooltipsEnabled:a,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties,axisControlImprovements:d})}));case e.visuals.plugins.treemap.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.treemap,(function(){return new e.visuals.Treemap({isScrollable:!1,tooltipsEnabled:a})}));case e.visuals.plugins.waterfallChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.waterfallChart,(function(){return new e.visuals.CartesianChart({chartType:12,tooltipsEnabled:a,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties,columnLabelImprovements:s,axisControlImprovements:d})}));case e.visuals.plugins.map.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.applyImprovedMapLegendMappings(e.visuals.plugins.map,l,!1),(function(){return new e.visuals.Map({tooltipsEnabled:a,disableZooming:!0,disablePanning:!0})}));case e.visuals.plugins.filledMap.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.applyImprovedMapLegendMappings(e.visuals.plugins.filledMap,l,!0),(function(){return new e.visuals.Map({filledMap:!0,tooltipsEnabled:a,disableZooming:!0,disablePanning:!0})}));case e.visuals.plugins.shapeMap.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.shapeMap,(function(){return new e.visuals.ShapeMap({tooltipsEnabled:a})}));case e.visuals.plugins.matrix.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.matrix,(function(){return new e.visuals.Matrix}));case e.visuals.plugins.realTimeLineChart.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.realTimeLineChart,(function(){return new e.visuals.CartesianChart({chartType:17,animator:new e.visuals.RealTimeLineChartAnimator,cartesianSmallViewPortProperties:o.cartesianSmallViewPortProperties,legendSmallViewPortProperties:o.legendSmallViewPortProperties})}));case e.visuals.plugins.table.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.table,(function(){return new e.visuals.Table}));case e.visuals.plugins.card.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.card,(function(){return new e.visuals.Card({cardSmallViewportProperties:o.cardSmallViewportProperties})}));case e.visuals.plugins.textbox.name:return e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.textbox,(function(){return new e.visuals.Textbox({viewModelAdapter:new e.visuals.TextboxHelpers.ViewModelAdapter(o.textboxSmallViewportProperties)})}));case e.visualHost.EsriVisual:return e.visuals.plugins[e.visualHost.EsriVisual]?e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins[e.visualHost.EsriVisual],e.visuals.plugins[e.visualHost.EsriVisual].create):null;default:return r&&r.pivotTableVisualEnabled&&t===e.visuals.plugins.pivotTable.name?e.visualHost.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.pivotTable,(function(){return new e.visuals.PivotTable})):e.Prototype.inherit(e.visuals.plugins[t])}}var r=e.common.GridLayoutConstants,a=e.visualHost.visualPluginServiceHelpers.VisualPluginStorage,n=42,s=10,c=10,l=0,d=8;e.createDashboardVisualPluginService=t;var p=(function(){function t(t,r,n,s,c){this.featureSwitches=t,this.promiseFactory=r,this.resourceLoader=n,this.telemetryService=s,this.storage=new a;var l=i(!0,2,!1),d=i(!0,2,!0),p=i(!1,2,!0),u=i(!0,3,!0),v=i(!0,4,!0),h=i(!1,2,!0),g=i(!0,3,!0),m=i(!1,2,!0),f=i(!0,3,!0),y=i(!0,2,!0),b=i(!1,2,!0),S=i(!0,4,!0),w=i(!1,3,!0),C={cardSmallViewportProperties:{cardSmallViewportWidth:l},cartesianSmallViewPortProperties:{minWidthForLegend:d,minHeightForLegend:p,minHeightForAxisLabels:m,minWidthForAxisLabels:g,mediumWidthForAxis:f,minWidthForAxis:y,minHeightForAxis:b,maxWidthForMediumFont:v,maxWidthForSmallFont:u},legendSmallViewPortProperties:{maxWidthForSmallFont:u,maxWidthForMediumFont:v,minHeightForTransform:h},textboxSmallViewportProperties:{minWidthToScaleFontSize:S,minHeightToScaleFontSize:w}};for(var D in e.visuals.plugins)this.storage.loadPlugin(D,o(D,c,C,t))}return t.prototype.getVisuals=function(){return this.storage.getLoadedPlugins()},t.prototype.ensureThirdPartyPlugins=function(){return a.ensureThirdPartyPlugins(this.storage,this.promiseFactory,this.resourceLoader)},t.prototype.ensurePlugins=function(e,t){var i=[];if(e&&e.length)for(var o=0,r=e;o<r.length;o++){var a=r[o];0===a.type&&i.push(this.ensurePlugin(a,!1))}return this.promiseFactory.allSettled(i)},t.prototype.ensurePlugin=function(e,t){return a.ensurePlugin(this.storage,this.promiseFactory,this.resourceLoader,e,!1,this.telemetryService)},t.prototype.getPlugin=function(t){var i=this.storage.getLoadedPlugin(t);return!i&&e.visuals.plugins[t]&&(this.storage.loadPlugin(t,e.Prototype.inherit(e.visuals.plugins[t])),i=this.storage.getLoadedPlugin(t)),i},t.prototype.capabilities=function(e){var t=this.getPlugin(e);return t?t.capabilities:void 0},t.prototype.isCustomVisual=function(t){return e.visualHost.utils.isCustomVisual(this.getPlugin(t),t)},t.prototype.getInteractivityOptions=function(){return{overflow:"hidden"}},t.prototype.getTelemetryHostInformation=function(){return{name:"Dashboard"}},t.prototype.isScriptVisual=function(t){return e.visualHost.utils.isScriptVisual(this.getPlugin(t))},t.prototype.isScriptVisualQueryable=function(){return e.visualHost.utils.isScriptVisualQueryable(this.featureSwitches)},t.prototype.isLightWeightRenderingVisual=function(t){return e.visualHost.utils.isLightWeightRenderingVisual(this.getPlugin(t))},t.prototype.getStorage=function(){return this.storage},t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e){return new r(e)}var i=e.data.EmptyDataClientError,o=e.data.InvalidDataResponseClientError;e.createDelayedQueryResultResolver=t;var r=(function(){function t(e){this.jobsWaitingForResults={},this.jobsAlreadyResolved=[],this.syncService=e,e.addDelayedQueryDataListener(this)}return t.prototype.resolveDelayedQuery=function(e,t,i){this.jobsWaitingForResults[e]={jobId:e,deferred:t,schemaName:i},this.jobsAlreadyResolved.indexOf(e)>=0&&this.onDelayedQueryDataAvailable(e)},t.prototype.onDelayedQueryDataAvailable=function(r){var a=this.jobsWaitingForResults[r];a?(delete this.jobsWaitingForResults[r],e.queryService.getQueryData(r,void 0).then((function(t){var o=t.data;if(o&&o.data){var r={descriptor:o.data.descriptor,dsr:o.data.dsr,schemaName:a.schemaName,requestId:t.requestId};a.deferred.resolve(r)}else if(o.error){var n=new e.ServiceErrorToClientError(o.error);n.requestId=t.requestId,a.deferred.reject(n)}else a.deferred.reject(new i)})).catch((function(){a.deferred.reject(new o)}))):(this.jobsAlreadyResolved.push(r),this.jobsAlreadyResolved.length>t.MaxResolvedJobsToTrack&&this.jobsAlreadyResolved.shift())},t.MaxResolvedJobsToTrack=100,t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,i,o,r,n,s,c,l,d,p,u,v,h,g){return new a(e,t,i,o,r,n,s,c,l,d,p,u,v,h,g)}var i=e.common.contracts.ContentTileType,o=e.dataServices.contracts.FavoriteType,r=e.common.contracts.Permissions;e.createFavoritesService=t;var a=(function(){function t(t,i,o,r,a,n,s,c,l,d,p,u,v,h,g){var m=this;this.telemetryService=t,this.favoritesHttp=i,this.activeGroupId=o,this.promiseFactory=r,this.dashboardService=a,this.rootScope=n,this.featureSwitchService=s,this.notificationToast=c,this.localizationService=l,this.errorService=d,this.permissionService=p,this.appMetadataService=u,this.navigation=v,this.tutorialDataStore=h,this.dataClassificationService=g,this.favorites=[],this.navigation.inFavoritesView()||this.getFavorites(),this.rootScope.$on(e.constants.groupSwitchedEventName,(function(){return m.populateDashboard()}))}return t.prototype.getFavoritesByGUID=function(e){for(var t=[],i=0,o=this.favorites;i<o.length;i++){var r=o[i];r.objectId===e&&t.push(r)}return t},t.prototype.addFavorite=function(t,i){var r=this,a=this.telemetryService.startEvent(e.telemetry.DashboardAddFavorite,i,this.activeGroupId.activeGroupObjectId,t===o.Dashboard?e.telemetry.FavoriteType.Dashboard:e.telemetry.FavoriteType.Report),n=this.promiseFactory.defer();return this.favoritesHttp.addFavorite(o.Dashboard,i,a.event).then((function(e){var t=r.fillFavoriteDashboardInfo(e.data,i,r.activeGroupId.activeGroupObjectId);n.resolve(t),a.resolve()}),(function(e){n.reject(),a.reject();var t=r.dashboardService.findDashboard(i);t&&(t.isFavorite=!1,t.isFavoriteDisabled=!1),r.errorService.error(r.localizationService.get("Favorites_FailedToFavorite"),"",{requestId:e.requestId,statusCode:e.status.toString(),activityId:e.activityId})})),n.promise},t.prototype.deleteFavorite=function(t){var i=this,r=this.getFavoritesByGUID(t),a=this.dashboardService.findDashboardByGUID(t);if(a&&(a.isFavoriteDisabled=!0),!_.isEmpty(r)){var n=r[0],s=this.telemetryService.startEvent(e.telemetry.DashboardDeleteFavorite,n.objectId,n.workspaceId,n.favoriteType===o.Dashboard?e.telemetry.FavoriteType.Dashboard:e.telemetry.FavoriteType.Report);this.favoritesHttp.deleteFavorite(n.id,s.event).then((function(t){var o=_.remove(i.favorites,(function(e){return e.id===n.id}));o&&o.length>0&&i.rootScope.$emit(e.constants.dashboardUnfavorited,i.favorites),n=null,s.resolve(),a&&(a.isFavorite=!1,a.isFavoriteDisabled=!1)}),(function(e){s.reject(),i.errorService.error(i.localizationService.get("Favorites_FailedToUnfavorite"),"",{requestId:e.requestId,statusCode:e.status.toString(),activityId:e.activityId}),a&&(a.isFavorite=!0,a.isFavoriteDisabled=!1)}))}},t.prototype.updateFavoritesWithPermissions=function(e){for(var t=function(e){e.getPermissions=function(){return e.permissions}},i=0,o=e;i<o.length;i++){var r=o[i];t(r)}return e},t.prototype.getFavorites=function(t){var i=this;return this.favoritesDeferred=this.promiseFactory.defer(),t?(this.dashboardService.getDashboards().then((function(){var t=i.telemetryService.startEvent(e.telemetry.DashboardGetFavorites,0);i.favoritesHttp.getFavorites(t.event).then((function(e){var o=i.updateFavoritesWithPermissions(e.data);i.favorites=o,i.favorites=_.uniq(i.favorites,(function(e){return e.favoriteId})),_.isEmpty(i.favorites)||(t.event.info.countOfFavorites=i.favorites.length),i.favoritesDeferred.resolve(i.favorites),t.resolve(),i.populateDashboard()}),(function(o){i.favoritesDeferred.reject(),o.status===e.HttpStatusCode.Unauthorized?t.resolve():(t.reject(),i.errorService.error(i.localizationService.get("Favorites_FailedToLoadFavorites"),"",{requestId:o.requestId,statusCode:o.status.toString(),activityId:o.activityId}))}))})),this.favoritesDeferred.promise):(this.appMetadataService.getAppMetadata().then((function(e){if(e.favorites){var t=i.updateFavoritesWithPermissions(e.favorites);i.favorites=t,i.favorites=_.uniq(i.favorites,(function(e){return e.favoriteId})),i.favoritesDeferred.resolve(i.favorites),i.populateDashboard()}})),this.favoritesDeferred.promise)},t.prototype.fillFavoriteDashboardInfo=function(e,t,a){var n=this.dashboardService.findDashboard(t);return e.objectId=n.objectId,e.displayName=n.displayName,e.workspaceId=a,e.favoriteType=o.Dashboard,e.permissions=this.permissionService.isActiveWorkspaceIsReadOnly?r.Read:n.getPermissions(),e.contentTileType=i.Favorite,e.workspaceId===this.activeGroupId.myWorkspaceGroupId?(e.ownerInfo=n.ownerFullname,e.workspaceId=null):e.ownerInfo=this.activeGroupId.groupDisplayName,this.favorites.push(e),e},t.prototype.populateDashboard=function(){var e=this,t=this.favorites;t?this.updateFavoriteDashboards(t):this.getFavorites().then((function(t){e.updateFavoriteDashboards(t)}))},t.prototype.updateFavoriteDashboards=function(e){if(this.dashboardService.dashboardContainerModel){var t=this.dashboardService.dashboards,r=this.activeGroupId.activeGroupObjectId;r===this.activeGroupId.myWorkspaceGroupId&&(r=null);for(var a=0,n=e.length;a<n;a++){var s=e[a];if(s.contentTileType=i.Favorite,s.favoriteType===o.Dashboard&&s.workspaceId===r)for(var c=0,l=t.length;c<l;c++){var d=t[c];s.objectId===d.objectId&&(d.favoriteInfo=s,d.isFavorite=!0,s.dataClassificationId=d.dataClassificationId)}}}},t})();e.FavoritesService=a})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i){return new o(e,t,i)}t.createFilterPersistenceService=i;var o=(function(){function t(e,i,o){var r=this;this.promiseFactory=e,this.userSettingsService=i,this.telemetryService=o,this.filters={},this.filtersLoadedPromise=this.userSettingsService.getExtendedSettingByKey(t.UserExtendedSettingKey).then((function(e){r.filters=e||r.filters}))}return t.prototype.getFilter=function(e){var t=this;return this.filtersLoadedPromise.then((function(){return t.filters?t.filters[e]:null})).catch((function(e){return null}))},t.prototype.setFilter=function(i,o){var r=this.telemetryService.startEvent(e.telemetry.ContentListPersistFilter);this.filters[i]=o,this.userSettingsService.updateExtendedSettings(t.UserExtendedSettingKey,this.filters,r)},t.UserExtendedSettingKey="filter",t})();t.FilterPersistenceService=o})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e){return new i(e)}e.createGroupService=t;var i=(function(){function t(e){var t=this;this._isInGroupTransition=!1,this._isGroupTransitionDelayed=!1,this.resolveGroupSwitchTelemetry=function(){t.perfSwitchGroupEvent&&(t.perfSwitchGroupEvent.resolve(),t.perfSwitchGroupEvent=null)},this._groups=[],this.services=e,this.initializationDeferredOperation=this.services.promiseFactory.defer(),this.initGroupsService()}return Object.defineProperty(t.prototype,"isInGroupTransition",{get:function(){return this._isInGroupTransition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGroupTransitionDelayed",{get:function(){return this._isGroupTransitionDelayed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),t.prototype.getGroup=function(e){var t=_.findIndex(this._groups,(function(t){return t.aadGroupId===e}));return this._groups[t]},t.prototype.addGroup=function(t){var i=new e.models.Group(t);this._groups.push(i)},t.prototype.removeGroup=function(e){_.remove(this._groups,(function(t){return t.aadGroupId===e}))},t.prototype.setDefaultActiveGroup=function(){this.activeGroupObjectId=this._groups[0].aadGroupId},t.prototype.isMyWorkspace=function(){return!this.activeGroup||this.activeGroup.isMyWorkspace},Object.defineProperty(t.prototype,"activeGroup",{get:function(){var e=this.getGroup(this.services.activeGroupIdService.activeGroupObjectId);return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeGroupObjectId",{get:function(){return this.services.activeGroupIdService.activeGroupObjectId},set:function(e){this.services.activeGroupIdService.activeGroupObjectId=e,this.activeGroup?this.services.activeGroupIdService.isReadOnly=this.activeGroup.contract.isReadOnly&&!this.activeGroup.contract.isOwner:this.services.activeGroupIdService.isReadOnly=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"datasets",{get:function(){return this.services.modelService.models},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reports",{get:function(){return this.services.reportService.reports},enumerable:!0,configurable:!0}),t.prototype.switchGroup=function(e,t,i){this.groupSwitchDeferred&&(this.groupSwitchDeferred.reject(),this.groupSwitchDeferred=null);var o=this.services.navigation,r=o.currentGroupGUID;o.currentGroupGUID=e.aadGroupId,this.switchGroupInternal(e,t,i);var a=this.groupSwitchPromise();return a.catch((function(){return o.currentGroupGUID=r})),a},t.prototype.updateActiveGroup=function(e,t){this.services.activeGroupIdService.activeGroupObjectId=e,this.services.activeGroupIdService.groupDisplayName=t;
},t.prototype.isDataInCurrentGroup=function(){return this.services.modelService.models.length>0||this.services.reportService.reports.length>0||this.services.workbookService.workbooks.length>0},t.prototype.showGroupUpsellMessage=function(e){var t=this.services.localizationService.get("UpgradeReasonText_Groups"),i=this.services.localizationService.format("UpgradeDialogTitle",[t]),o=this.services.localizationService.format("UpgradeAccount_ProContentProviderMessage",[t.toLocaleLowerCase(),this.services.licenseHelperService.freeTrialPeriod]);this.services.licenseHelperService.displayFeatureDisabledErrorMessage(e,o,i)},t.prototype.ensureGroupsInitialization=function(){return this.initializationDeferredOperation.promise},t.prototype.groupSwitchPromise=function(){return this.groupSwitchDeferred?this.groupSwitchDeferred.promise:this.services.promiseFactory.resolve(null)},t.prototype.initGroupsService=function(){var t=this;this.initTemporaryGroupService(),this.services.appMetadataService.getAppMetadata().then((function(e){t.initGroupsServiceFromDashboardContainer(e)}),(function(){t.updateGroups()})),this.services.rootScope.$on(e.common.constants.navigation.stateChangeSuccess,(function(e,i,o,r,a){return t.handleStateChange(i,o,r,a)})),this.services.rootScope.$on(e.constants.dashboardTileRepeatFinishedEvent,this.resolveGroupSwitchTelemetry)},t.prototype.handleStateChange=function(t,i,o,r){var a=this;if(window.appLoadError&&!window.appLoadError.handled&&window.appLoadError.error===e.constants.appLoadErrorGroupNotAccessible&&i&&i.groupGUID===e.constants.myWorkSpaceGroupId)return this.showGroupNotAccessibleMessage(),window.appLoadError.handled=!0,void(this.activeGroupObjectId=e.constants.myWorkSpaceGroupId);if(this.activeGroupObjectId!==i.groupGUID){var n=this.activeGroupObjectId,s=e.constants.navigation.states.home;t.name===s?this.activeGroupObjectId=this.services.home.homeDashboard.groupId:this.services.navigation.inGroupView()&&this.services.navigation.currentGroupGUID&&(this.activeGroupObjectId=this.services.navigation.currentGroupGUID),this.shouldSwitchGroup(t,i,o,r,n)&&(this.groupSwitchDeferred&&this.groupSwitchDeferred.reject(),this.groupSwitchDeferred=this.services.promiseFactory.defer(),this.ensureGroupsInitialization().then((function(){var o=a.getGroup(t.name===s?a.services.home.homeDashboard.groupId:i.groupGUID);if(o){var r=!1;t.name===s&&(o.lastViewedDashboard=a.services.home.homeDashboard.dashboardId,r=!0),a.perfSwitchGroupEvent=a.services.telemetryService.startEvent(e.telemetry.GroupsSwitchGroup,i.groupGUID),a.switchGroupInternal(o,r,a.perfSwitchGroupEvent)}else a.groupSwitchDeferred.resolve(null)})))}},t.prototype.shouldSwitchGroup=function(t,i,o,r,a){var n=r.groupGUID||o.name===e.constants.navigation.states.recentlyViewed&&a;return!!n&&(!(!i.groupGUID||i.groupGUID===n)||t.name===e.constants.navigation.states.home&&n!==this.services.home.homeDashboard.groupId)},t.prototype.switchGroupInternal=function(t,i,o){var r=this;this.startTimedTransition(),this.groupSwitchDeferred||(this.groupSwitchDeferred=this.services.promiseFactory.defer()),this.updateActiveGroup(t.aadGroupId,t.displayName),this.services.groupHttpService.getGroupDashboardContainer(t,o.event).then((function(o){if(t.aadGroupId===r.activeGroupObjectId){var a=o.data;a&&(r.services.packageService.updatePackageCollection(a.packages),r.services.reportService.updateReportCollection(a.reports),r.services.modelService.updateDatasetCollection(a.models),r.services.workbookService.updateWorkbookCollection(a.workbooks),r.services.appService.updateAppsCollection(a.apps)),r.groupSwitchDeferred.resolve(null),r.groupSwitchDeferred=null,r.services.rootScope.$emit(e.constants.groupSwitchedEventName,a,i),r.endTimedTransition()}}),(function(e){var t=jsCommon.StringExtensions.format("Status:{0} requestId:{1} Details:{2}",e.status.toString(),e.requestId,e.error&&e.error.message?e.error.message:"");o.reject({errorCode:e.error&&e.error.code?e.error.code:"FailToGetGroupDashboardContainer",errorMessage:t}),r.groupSwitchDeferred.reject(),r.groupSwitchDeferred=null,r.showLoadGroupFailedMessage(e.requestId,e.status.toString()),r.endTimedTransition()}))},t.prototype.initTemporaryGroupService=function(){this.loadMyWorkspace(),this.activeGroupObjectId=this.services.navigation.currentGroupGUID?this.services.navigation.currentGroupGUID:e.common.constants.myWorkspaceGroupId},t.prototype.initGroupsServiceFromDashboardContainer=function(e){this.loadGroupsWithActiveDashboard(this.services.userInfo.userMetadata?this.services.userInfo.userMetadata.groups:null,e.activeDashboardId),this.updateGroups(),this.handleUrlQueryString()},t.prototype.handleUrlQueryString=function(){this.services.location.search().needproforgroups&&(this.showGroupUpsellMessage(e.telemetry.LicenseEnforcementOperation.LandingGroups),this.services.location.search("needproforgroups",null))},t.prototype.showLoadGroupFailedMessage=function(e,t){var i=this;this.services.localizationService.ensureLocalization((function(){i.services.errorService.error(i.services.localizationService.get("ErrorMessage_FailedLoadGroup"),"FailedLoadGroup",{requestId:e,statusCode:t})}))},t.prototype.showGroupNotAccessibleMessage=function(){var e=this.services.errorService.control(),t=[new InJs.ModalDialogAction(this.services.localizationService.get("DashboardContainer_Ok"),function(t,i){e.hideDialog()})],i=this.services.localizationService.get("GroupNotAccessibleDialogTitle"),o=this.services.localizationService.get("GroupNotAccessibleDialogMessage");e.showCustomDialog(i,InJs.DomFactory.div().text(o),t,void 0,!0)},t.prototype.updateGroups=function(){var e=this;this.services.userInfo.userMetadataPromise&&this.services.userInfo.userMetadataPromise.then((function(t){var i;e.activeGroup&&(i=e.activeGroup.lastViewedDashboard),e.loadGroupsWithActiveDashboard(t.groups,i),e.services.activeGroupIdService.initialGroupIdReadyPromise.then((function(){e.services.activeGroupIdService.isReadOnly=e.activeGroup.contract.isReadOnly&&!e.activeGroup.contract.isOwner}))}))},t.prototype.loadGroupsWithActiveDashboard=function(e,t){var t=t;this.loadGroups(e),this.activeGroup&&(this.activeGroup.lastViewedDashboard=t),this.initializationDeferredOperation.resolve(null)},t.prototype.loadGroups=function(t){var i=this;if(this._groups=[],this.loadMyWorkspace(),t)for(var o=0,r=t.length;o<r;++o){var a=new e.models.Group(t[o]);!(function(e){i.services.userInfo.findGroupIcon(e.contract.objectId).then((function(t){e.icon=t}),(function(e){}))})(a),this._groups.push(a)}},t.prototype.loadMyWorkspace=function(){var t={id:-1,displayName:this.services.localizationService.get("NavigationPane_Groups_MyWorkspace"),objectId:this.services.activeGroupIdService.myWorkspaceGroupId,groupType:e.common.contracts.GroupType.Unknown,isOwner:!1,isPublic:!1,isReadOnly:!1,mailNickname:""},i=new e.models.Group(t);i.isMyWorkspace=!0,this._groups.push(i)},t.prototype.startTimedTransition=function(){var e=this;this._isInGroupTransition=!0,this._isGroupTransitionDelayed=!1,this._groupTransitionTimeoutPromise&&this.services.timeout.cancel(this._groupTransitionTimeoutPromise),this._groupTransitionTimeoutPromise=this.services.timeout((function(){e._isGroupTransitionDelayed=!0}),t.switchGroupTimeLimit)},t.prototype.endTimedTransition=function(){this._isInGroupTransition=!1,this._isGroupTransitionDelayed=!1,this.services.timeout.cancel(this._groupTransitionTimeoutPromise)},t.switchGroupTimeLimit=1e3,t})();e.Groups=i})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t){return new o(e,t)}var i=e.models.HistoryDialogModel;e.createHistoryDialogService=t;var o=(function(){function e(e,t){this.rootScope=e,this.compile=t,this.parameters=new i,this.serviceScope=this.rootScope.$new(),this.serviceScope.historyDialogParameters=this.parameters}return e.prototype.showHistoryDialog=function(t){var i=this.parameters;i.showHistoryDialog=!0,i.showSpinner=!0,i.datasetModel={},i.datasetModel.dataset=t.dataset,this.historyDialogElement||(this.template=angular.element(e.htmlTemplate),this.historyDialogElement=this.compile(this.template)(this.serviceScope)),$("body").append(this.historyDialogElement)},e.prototype.hideHistoryDialog=function(){var e=this.parameters;e.showHistoryDialog=!1,e.showSpinner=!1},Object.defineProperty(e.prototype,"historyDialogParameters",{get:function(){return this.parameters},enumerable:!0,configurable:!0}),e.htmlTemplate="<history-dialog view-model='historyDialogParameters' ng-if='historyDialogParameters.showHistoryDialog'> </history-dialog>",e})();e.HistoryDialogService=o})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i,r,a,n){return new o(e,t,i,r,a,n)}t.createHome=i;var o=(function(){function t(e,t,i,o,r,a){this.rootScope=e,this.errorService=t,this.localizationService=i,this.notificationToast=o,this.telemetryService=r,this.promiseFactory=a,this.onHomeSettingChanged=[],this.resetHomeAtClientSide()}return Object.defineProperty(t.prototype,"isHomeDashboardSet",{get:function(){return this.homeDashboard.dashboardId!==-1},enumerable:!0,configurable:!0}),t.prototype.resetHomeAtClientSide=function(){this.homeDashboard={dashboardId:-1,groupId:"",dashboardObjectId:""};for(var e=0,t=this.onHomeSettingChanged.length;e<t;e++)this.onHomeSettingChanged[e]()},t.prototype.resetHome=function(e){var t=this,i=this.promiseFactory.defer();return this.disableHomeDashboardHelper(e).then((function(e){t.resetHomeAtClientSide(),i.resolve(e)}),(function(e){i.reject(e)})),i.promise},t.prototype.getHomeDashboard=function(t){var i=e.common.httpService.powerbiRequestOptions(t,"GetHomeDashboard");return i.enableTelemetry=!0,e.common.httpService.get("/powerbi/metadata/user/homedashboard",i)},t.prototype.disableHomeDashboard=function(){var t=this,i=this.localizationService,o=this.errorService.control(),r=[new InJs.ModalDialogAction(i.get("Jumps_Dialog_Confirm"),function(r,a){o.hideDialog();var n=t.notificationToast.notify({message:i.get("DisablingFeaturedDashboard"),notificationType:e.common.NotificationToastType.Loading}),s=t.telemetryService.startEvent(e.telemetry.DashboardDisableHomeDashboard,t.homeDashboard.dashboardObjectId);t.resetHome(s.event).then((function(o){t.notificationToast.notify({title:i.get("SetFeaturedDashboardSuccessTitle"),message:i.get("DisableFeaturedDashboardSuccessContent"),notificationType:e.common.NotificationToastType.Success}),s.resolve()}),(function(e){t.errorService.error(i.get("SetFeaturedDashboardFailed"),"SetFeaturedDashboardFailed",{requestId:e.requestId,statusCode:e.status.toString()}),s.reject()})).finally((function(){t.notificationToast.hide(n)}))}),new InJs.ModalDialogAction(i.get("ExplorationNavigationTab_Cancel"),function(e,t){o.hideDialog()})];o.showPrompt(i.get("DisableFeaturedDashboardTitle"),i.get("DisableFeaturedDashboardContent"),r,!1)},t.prototype.isOnHomeDashboard=function(e){return this.homeDashboard.dashboardObjectId===e},t.prototype.setHomeDashboard=function(t,i){var o=this,r=this.errorService.control(),a=this.localizationService,n=[new InJs.ModalDialogAction(a.get("SetFeaturedDashboardButton"),function(n,s){r.hideDialog();var c=o.notificationToast.notify({message:a.get("SettingFeaturedDashboard"),notificationType:e.common.NotificationToastType.Loading}),l=o.telemetryService.startEvent(e.telemetry.DashboardSetHomeDashboard,t.objectId);o.setHomeDashboardHelper(t.id,l.event).then((function(r){o.notificationToast.notify({title:a.get("SetFeaturedDashboardSuccessTitle"),message:o.localizationService.format("SetFeaturedDashboardSuccessContent",[t.displayName]),notificationType:e.common.NotificationToastType.Success}),o.homeDashboard.dashboardId=t.id,o.homeDashboard.groupId=i,o.homeDashboard.dashboardObjectId=t.objectId;for(var n=0,s=o.onHomeSettingChanged.length;n<s;n++)o.onHomeSettingChanged[n]();l.resolve()}),(function(e){o.errorService.error(a.get("Dashboard_RefreshCompletedFailure"),"Dashboard_RefreshCompletedFailure",{requestId:e.requestId,statusCode:e.status.toString()}),l.reject()})).finally((function(){o.notificationToast.hide(c)}))}),new InJs.ModalDialogAction(a.get("ExplorationNavigationTab_Cancel"),function(e,t){r.hideDialog()})],s=t.displayName;if(this.homeDashboard.dashboardId===-1){var c=this.localizationService.format("SetFeaturedDashboardContent",[s]);r.showPrompt(a.get("SetFeaturedDashboardTitle"),c,n,!1)}else{var c=this.localizationService.format("ChangeFeaturedDashboardContent",[s]);r.showPrompt(a.get("ChangeFeaturedDashboardTitle"),c,n,!1)}},t.prototype.setHomeDashboardHelper=function(t,i){var o=e.common.httpService.powerbiRequestOptions(i,"SetHomeDashboard");return o.enableTelemetry=!0,e.common.httpService.post("/powerbi/metadata/user/homedashboard/"+t,null,o)},t.prototype.disableHomeDashboardHelper=function(t){var i=e.common.httpService.powerbiRequestOptions(t,"DeleteHomeDashboard");return i.enableTelemetry=!0,e.common.httpService.delete("/powerbi/metadata/user/homedashboard",i)},t})();t.Home=o})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i,o,r,a){return new c(e,t,i,o,r,a)}var o=e.dataServices.ContractUtils,r=e.dataServices.models.Tile,a=e.dataServices.contracts.TileType,n=e.dataServices.models.WorkbookTileModel;!(function(e){e[e.Failure=0]="Failure",e[e.Success=1]="Success"})(t.InFocusable||(t.InFocusable={}));var s=t.InFocusable;t.createInFocusService=i;var c=(function(){function t(e,t,i,o,r,a){this.inFocusTile=null,this.rootScope=e,this.telemetryService=t,this.modelConverter=i,this.modelService=o,this.reportService=r,this.visualPlugin=a}return t.prototype.view=function(e,t,i){this.inFocusTile=e,e.type===a.workbook?this.openInFocusWorkbookTile(e,t):e.type===a.realTime?this.openInFocusRealTimeTile(e):this.openInFocusTile(e,t,i)},t.prototype.openInFocusTile=function(t,i,r){for(var a=t.composite.contract,n=o.convertToSemanticQueryWithDataShapeBinding(a.query),s=JSON.parse(a.config),c=s.visual,l=c.queryMetadata,d=c.elements,p=(d[0],[]),u=0,v=d;u<v.length;u++)for(var h=v[u],g=0,m=h.DataRoles;g<m.length;g++){for(var f=m[g],y=!1,b=0,S=p;b<S.length;b++){var w=S[b];_.isEqual(w,f)&&(y=!0)}y||p.push(f)}var C=this.visualPlugin.getPlugin(t.composite.visual.type),D=e.data.services.DataViewObjectSerializer.deserializeObjects(s.visual.objects,C.capabilities.objects);this.rootScope.$emit(e.constants.openInFocusTileActionName,{modelId:a.modelId,openInsightArgs:i,runScopedInsights:r,visualTile:{binding:n.shape,query:n.defn,metadata:l,visual:C,dataRoles:p,dataViewObjectDefinitions:D}})},t.prototype.openInFocusWorkbookTile=function(i,o){var r=t.cloneWorkbookTileModelForInFocusUse(i.workbook),a=r.tileModel.layoutPosition;a.width=Math.floor(i.gridLayoutContext.getGridWidth()/e.common.GridLayoutConstants.defaultGridWidth),a.height=Math.floor(i.gridLayoutContext.getGridHeight()/e.common.GridLayoutConstants.defaultGridHeight),this.rootScope.$emit(e.constants.openInFocusWorkbookTileActionName,{workbook:r})},t.prototype.openInFocusRealTimeTile=function(t){this.rootScope.$emit(e.constants.openInFocusRealTimeTileActionName,t)},t.prototype.exit=function(){this.inFocusTile=null,this.showVisualEnabled=!1},t.prototype.getInFocusState=function(t){if(!t)return s.Failure;switch(t.type){case a.composite:if(t.composite.visual.type!==e.visuals.plugins.image.name)try{var i=t.contract.query,r=o.convertToSemanticQueryWithDataShapeBinding(i);if(r&&r.defn&&r.defn.Version>=2&&_.isEmpty(r.defn.Transform))return s.Success}catch(e){}break;case a.workbook:case a.realTime:return s.Success}return s.Failure},t.cloneWorkbookTileModelForInFocusUse=function(e){var t=new n(null,null);return jQuery.extend(t,e),t.tileModel=new r(null),jQuery.extend(t.tileModel,e.tileModel),t.tileModel.layoutPosition=_.cloneDeep(e.tileModel.layoutPosition),t},t})();t.InFocusService=c})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=e.common.constants,i=(function(){function i(e,i,o,r,a,n,s,c,l){var d=this;this.localizationService=i,this.userInfoService=o,this.licenseHelperService=r,this.modelService=a,this.reportService=n,this.checkUnsavedService=s,this.rootScope=e,this.promiseFactory=c,this.userNotificationInfoService=l,this.rootScope.$on(t.navigation.stateChangeStart,(function(e,i,o,r,a){d.checkUnsavedService.userHasUnsavedWork||(i.name===t.navigation.states.report||i.name===t.navigation.states.reportPage?d.localizationService.ensureLocalization((function(){o&&o.reportGUID&&d.checkUserLicenseSupportsReportAndDisplayError(o.reportGUID).then((function(t){t||e.preventDefault()}))})):i.name===t.navigation.states.dataset&&d.localizationService.ensureLocalization((function(){o&&o.datasetDBName&&d.checkUserLicenseSupportsDatasetAndDisplayError(o.datasetDBName).then((function(t){t||e.preventDefault()}))})))}))}return i.prototype.allModelsHaveProFeatures=function(e){if(e&&e.length>0){var t=_.filter(e,(function(e){return e&&(!e.contract||0===e.contract.modelFeatures||i.isNonProRefresh(e.contract))}));return _.isEmpty(t)}return!1},i.prototype.dashboardHasProFeatures=function(e){if(e&&e.modelIds)for(var t=0;t<e.modelIds.length;t++){var i=this.modelService.findModels(e.modelIds[t]);if(this.allModelsHaveProFeatures(i))return!0}return!1},i.prototype.createNotificationForTrial=function(){var t=this;this.userInfoService.userMetadataPromise.then((function(){var i=t.userInfoService.userFreeTrialDaysRemaining;!t.userInfoService.userHasPremiumPlan&&(t.userInfoService.userHasFreeTrial||t.userInfoService.userFreeTrialExpired)&&i<=t.licenseHelperService.notificationPeriodForTrialExpiry&&t.userNotificationInfoService&&t.userNotificationInfoService.addClientNotification({id:0,notificationCategory:e.userNotifications.contracts.NotificationCategory.Trial,message:{title:{displayTextResource:t.getTrialNoticeDisplayTitle(i),values:i>1?[{NotificationValueType:e.userNotifications.contracts.NotificationValueType.Number,value:i.toString()}]:null},message:{displayTextResource:t.getTrialNoticeDisplayDescription(i),values:i>1?[{NotificationValueType:e.userNotifications.contracts.NotificationValueType.Number,value:i.toString()}]:null},image:{imageType:e.userNotifications.contracts.NotificationImageType.PowerBI}},action:{resource:{displayTextResource:e.userNotifications.contracts.NotificationResource.UsersNotifications_RequestExtensionLinkText,values:[{NotificationValueType:e.userNotifications.contracts.NotificationValueType.Number,value:t.licenseHelperService.freeTrialPeriod.toString()}]},actionType:e.userNotifications.contracts.NotificationActionType.Trial},seen:!1})}))},i.prototype.getTrialNoticeDisplayDescription=function(t){return this.userInfoService.userFreeTrialExpired?e.userNotifications.contracts.NotificationResource.ExtendTrial_TrialExpired:0===t?e.userNotifications.contracts.NotificationResource.UsersNotifications_TrialRunsOutInLessThanADay:1===t?e.userNotifications.contracts.NotificationResource.UsersNotifications_TrialRunsOutInOneDay:e.userNotifications.contracts.NotificationResource.UsersNotifications_TrialRunningOut},i.prototype.getTrialNoticeDisplayTitle=function(t){return this.userInfoService.userFreeTrialExpired?e.userNotifications.contracts.NotificationResource.UsersNotifications_TitleTrialExpired:0===t?e.userNotifications.contracts.NotificationResource.UsersNotifications_TitleTrialRunsOutInLessThanADay:1===t?e.userNotifications.contracts.NotificationResource.UsersNotifications_TitleTrialRunsOutInOneDay:e.userNotifications.contracts.NotificationResource.UsersNotifications_TitleTrialRunningOut},i.prototype.checkInternal=function(t){if(this.allModelsHaveProFeatures(t)&&!this.userInfoService.isPremiumUser){var i="";return _.isEmpty(t)||(i=t[0].contract.displayName),this.licenseHelperService.displayFeatureDisabledErrorMessage(e.telemetry.LicenseEnforcementOperation.ReportMessage,this.localizationService.format("UpgradeAccount_ShareDashboardTitle",[i]),this.localizationService.get("UpgradeAccount_ReportMessage")),!1}return!0},i.prototype.checkUserLicenseSupportsReportAndDisplayError=function(e){var t=this,i=this.promiseFactory.defer(),o=this.reportService.findReportByGUID(e);return o&&o.modelId?this.modelService.modelsPromise.then((function(){var e=t.modelService.findModels(o.modelId);0===e.length?i.resolve(!0):i.resolve(t.checkInternal(e))})):i.resolve(!0),i.promise},i.prototype.checkUserLicenseSupportsDatasetAndDisplayError=function(e){var t=this,i=this.promiseFactory.defer();return this.modelService.modelsPromise.then((function(){var o=t.modelService.findModelsByDBName(e);0===o.length?i.resolve(!0):i.resolve(t.checkInternal(o))})),i.promise},i.isNonProRefresh=function(t){return 0===t.modelFeatures&&!t.refreshSchedule||t.modelFeatures===e.common.contracts.ModelProperty.HourlyRefresh&&t.refreshSchedule&&t.refreshSchedule.executionTimeHourly&&t.refreshSchedule.executionTimeHourly.indexOf(",")<0},i})();e.LicenseEnforcementService=i})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i,o,r,a){return new c(e,t,i,o,r,a)}function o(e){return{getMRUModels:function(){return e.resolve([])},removeMRU:function(e){},updateMRU:function(e,t,i,o,r){}}}var r=e.models.MRUModel;t.createMostRecentlyUsedService=i,t.createMostRecentlyUsedServicePlaceholder=o;var a="MRU",n=5e3,s=100,c=(function(){function t(e,i,o,r,n,s){var c=this;this.groupService=e,this.promiseFactory=i,this.navigation=o,this.telemetryService=r,this.timeoutService=n,this.userSettingsService=s,this.mostRecentlyUsedModels=[];var l=this.promiseFactory.defer();this.mostRecentlyUsedLoadedPromise=l.promise,this.groupService.ensureGroupsInitialization().then((function(){c.userSettingsService.getExtendedSettingByKey(a).then((function(e){c.mostRecentlyUsedModels=e?e.map(t.convertToMRUModel):[],l.resolve(null)}))}))}return t.prototype.getMRUModels=function(){var e=this;return this.mostRecentlyUsedLoadedPromise.then((function(){return e.removeRecordsWithInaccessibleGroups(),e.mostRecentlyUsedModels}))},t.prototype.removeMRU=function(e,t){var i=this,o=t?t:this.navigation.currentGroupGUID;this.mostRecentlyUsedLoadedPromise.then((function(t){_.remove(i.mostRecentlyUsedModels,(function(t){return t.objectId===e&&t.workspaceId===o})),i.updateUserSettings()}))},t.prototype.updateMRU=function(e,t,i,o,a){var n=this;a||(a=this.navigation.currentGroupGUID),this.mostRecentlyUsedLoadedPromise.then((function(c){var l=_.findIndex(n.mostRecentlyUsedModels,(function(e){return e.objectId===t&&e.workspaceId===a})),d=l>=0?n.mostRecentlyUsedModels.splice(l,1)[0]:new r(e,t,a);d.count++,d.displayName=i,d.lastAccess=new Date,o&&(d.permissions=o),n.mostRecentlyUsedModels.unshift(d),n.mostRecentlyUsedModels.splice(s),n.updateUserSettings()}))},t.prototype.removeRecordsWithInaccessibleGroups=function(){var e=this,t=_.remove(this.mostRecentlyUsedModels,(function(t){return!e.groupService.getGroup(t.workspaceId)}));_.isEmpty(t)||this.updateUserSettings()},t.prototype.updateUserSettings=function(){var i=this;this.updateMRUPromise||(this.updateMRUPromise=this.timeoutService((function(){i.updateMRUPromise=null;var o=i.telemetryService.startEvent(e.telemetry.MostRecentlyUsedServiceUpdateMRUData),r=i.mostRecentlyUsedModels.map(t.convertToMRUContract);i.userSettingsService.updateExtendedSettings(a,r,o)}),n))},t.convertToMRUContract=function(e){return{co:e.count,dn:e.displayName,gid:e.workspaceId,la:e.lastAccess.toISOString(),oid:e.objectId,ty:e.type,pm:e.permissions}},t.convertToMRUModel=function(e){var t=new r(e.ty,e.oid,e.gid);return t.count=e.co,t.displayName=e.dn,t.lastAccess=new Date(e.la),t.permissions=e.pm,t},t})()})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i,r){return new o(e,t,i,r)}t.createNavigationStateValidator=i;var o=(function(){function t(t,i,o,r){this.$timeout=t,this.impersonationService=i,this.permissionService=o,this.reportService=r,this.allowedReadOnlyStates=[e.constants.navigation.states.apps,e.constants.navigation.states.landing,e.constants.navigation.states.groups,e.constants.navigation.states.group,e.constants.navigation.states.dashboards,e.constants.navigation.states.dashboard,e.constants.navigation.states.inFocusMode,e.constants.navigation.states.insights,e.constants.navigation.states.dashboardQna,e.constants.navigation.states.dashboardQnaStart,e.constants.navigation.states.modelQna,e.constants.navigation.states.settings,e.constants.navigation.states.settingsGroup,e.constants.navigation.states.home,e.constants.navigation.states.favorites,e.constants.navigation.states.recentlyViewed,e.constants.navigation.states.contentList,e.constants.navigation.states.manageEmbed,e.common.constants.navigation.states.report,e.common.constants.navigation.states.reportPage,e.common.constants.navigation.states.reports,e.common.constants.navigation.states.workbook,e.common.constants.navigation.states.workbooks]}return t.prototype.setDefaultStateCallback=function(e){this.navigateToDefaultState=e},t.prototype.validateState=function(e){this.handleStateAccessibility(e)},t.prototype.validateStateChange=function(e,t,i,o,r){this.impersonationService.impersonating&&this.handleImpersonationStateChanging(t,i.reportGUID),this.handleStateAccessibility(t,e,o)},t.prototype.handleImpersonationStateChanging=function(t,i){if(t===e.common.constants.navigation.states.reportPage){var o=this.impersonationService.getImpersonationState().modelId,r=this.reportService.findReportByGUID(i);r&&r.modelId===o||this.impersonationService.clearImpersonation()}else t&&this.impersonationService.clearImpersonation()},t.prototype.handleStateAccessibility=function(e,t,i){var o=this;this.permissionService.isActiveWorkspaceIsReadOnly&&!_.contains(this.allowedReadOnlyStates,e)&&(i&&_.contains(this.allowedReadOnlyStates,i)&&t?t.preventDefault():this.$timeout((function(){o.navigateToDefaultState()})))},t})()})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e){return new c(e)}var i=e.dataServices.models.Dashboard,o=e.common.models.Model,r=e.models.MRUModel,a=e.common.contracts.Permissions,n=e.common.models.Report,s=e.dataServices.models.Workbook;e.createOwnershipService=t;var c=(function(){function e(e){this.packageService=e}return e.prototype.isResourceShareableWithMe=function(e){return e instanceof i||e instanceof n||e instanceof s||e instanceof o||e instanceof r},e.prototype.isResourceSharedWithMe=function(e){switch(!0){case e instanceof i:return e.getPermissions()===a.Read||e.getPermissions()===a.ReadReshare;case e instanceof n:return!1;case e instanceof s:return!e.isOwner();case e instanceof o:var t=this.packageService.findPackage(e.packageId);return this.permissionsArePersonalized(e.getPermissions(),t);case e instanceof r:return e.permissions===a.Read||e.permissions===a.ReadReshare;default:return!1}},e.prototype.permissionsArePersonalized=function(e,t){var i=a.ReadWrite|a.Explore,o=a.Read|a.Explore,r=null==t?void 0:t.permissions;return void 0===r?(e&a.All)!==a.All&&(e&i)===i:(e&a.All)!==a.All&&(e&o)===o&&(r&a.ReadWrite)===a.ReadWrite},e})();e.OwnershipService=c})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t){return new r(e,t)}var i=e.common.constants,o=["moz","ms","webkit"];e.createPageVisibilityService=t;var r=(function(){function e(e,t){this.rootScope=e,this.document=t;var i=this.getBrowserVisibilityAttributes();i&&(this.browserHiddenAttribute=i.hiddenAttributeName,this.browserVisibilityChangeAttribute=i.visibilityChangeEventName,this.document.on(this.browserVisibilityChangeAttribute,this.visibilityStateListener.bind(this)))}return e.prototype.onShowBrowserTab=function(){this.rootScope.$emit(i.browserTabVisibleEvent)},e.prototype.onHideBrowserTab=function(){this.rootScope.$emit(i.browserTabHiddenEvent)},e.prototype.visibilityStateListener=function(){this.document.prop(this.browserHiddenAttribute)?this.onHideBrowserTab():this.onShowBrowserTab()},e.prototype.getBrowserVisibilityAttributes=function(){var e=this.document,t="hidden",i="visibilitychange";if(void 0!==e.prop(t))return{hiddenAttributeName:t,visibilityChangeEventName:i};for(var r=_.capitalize(t),a=0,n=o;a<n.length;a++){var s=n[a],c=s+r;if(e.prop(c))return{hiddenAttributeName:c,visibilityChangeEventName:s+i}}return null},e})()})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,i,o,r,a,n,c,l,d,p,u,v,h,g,m){return new s(e,t,i,o,r,a,n,c,l,d,p,u,v,h,g,m)}var i=e.data.services.DataViewObjectSerializer,o=e.data.services.DataViewTransformActionsSerializer,r=e.explore.util.ScriptVisualsUtil,a=e.dataServices.models.TileFactory,n=e.dataServices.ContractUtils;e.createPinTileService=t;var s=(function(){function t(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h,g){this.telemetryService=i,this.localizationService=o,this.errorService=t,this.rootScope=e,this.modalDialogService=r,this.modelConverter=a,this.visualPlugin=n,this.themeService=s,this.visualStylePresetService=c,this.userSettingsService=l,this.reportService=d,this.modelService=p,this.workbookService=u,this.dashboardService=v,this.packageService=h,this.explorationSerializer=g,this.modalDialog=this.errorService.control()}return t.prototype.setSavedReport=function(e){this.savedReport=e},t.prototype.showPinVisualDialog=function(i,o,r,n,s,c,l){var d,p=l,u=void 0===r?[]:[r],v=void 0===n?[]:[n],h=void 0===s?[]:[s];this.pinEvent=c;var g=void 0!==l,m=!1,f=o&&(o.action.action===e.common.constants.openInsightsActionName||o.action.originalAction===e.common.constants.openInsightsActionName),y=o&&o.action&&!o.action.action&&!o.reportId;g||(m=o.action.action===e.common.constants.openQnAActionName||o.action.originalAction===e.common.constants.openQnAActionName),this.isPinFromDashboard=!1,this.isLiveReport=!1,this.pinTileScope=this.createPinTileScope(void 0===r&&!m),g?(this.pinTileScope.viewModel.hasTileFormatting=!1,this.formattedTileContract=l):(p=a.createTileForPinData(this.visualPlugin,o,n,r),o&&o.visualType&&o.themeName&&o.themeName!==t.defaultTheme&&this.isTileFormattingRequired(o.visualType)?o.themeName=void 0:this.pinTileScope.viewModel.hasTileFormatting=!1,d=a.createTileForPinData(this.visualPlugin,o,n,r),this.formattedTileContract=d),this.dashboardTile=this.modelConverter.convertTile(this.formattedTileContract,v,u,h),this.reportTile=this.modelConverter.convertTile(p,[n],u),this.reportTile.composite&&(this.themeName=this.reportTile.composite.config.themeName),this.setTheme(this.dashboardTile,!1),this.setTheme(this.reportTile,!0),this.pinTileScope.viewModel.needSaveReport=!(r||m||f||s||y),this.createModelDialogWithOptions(this.pinTileScope)},t.prototype.showPinVisualFromDashboardDialog=function(i,o,r){if(this.pinEvent=r,this.isPinFromDashboard=!0,o.reportTile){var a=o.reportTile.exploration,n=o.contract.sectionId,s=e.explore.SectionUtils.findSectionById(a.contract,n);if(!s)return;var c,l=void 0;if(o.config&&o.config.reportTile){var d=o.config.reportTile;l=d.pod;var p=[];c=d.filters&&this.explorationSerializer.deserializeFilterCollection(d.filters,p,!1)}var u={exploration:a,section:s,reportId:o.contract.reportId,modelId:o.contract.modelId,packageId:o.contract.packageId,isPinFromDashboard:this.isPinFromDashboard,displayText:o.displayText,subDisplayText:o.subDisplayText,action:o.action,filters:c,pod:l,utterance:o.utterance};this.showPinReportPageDialog(u)}else{this.isLiveReport=!1;var v=!1;this.pinTileScope=this.createPinTileScope(!1);var h=void 0===o.contractsReport?[]:[o.contractsReport];this.formattedTileContract=o.contract,o.composite&&o.composite.config&&(v=void 0!==o.composite.config.themeName&&o.composite.config.themeName!==t.defaultTheme),this.pinTileScope.viewModel.hasTileFormatting=v;var g=this.createCustomTileForPinData(o,!0),m=void 0;if(o.config&&o.config.workbookTile&&o.workbook&&o.workbook.contract){var f=this.workbookService.findWorkbook(o.workbook.contract.workbookId,o.workbook.contract.packageId);m=f?[f.contract]:void 0}this.dashboardTile=this.modelConverter.convertTile(g,[o.contractsModel],h,m);var y=this.createCustomTileForPinData(o,!1);this.reportTile=this.modelConverter.convertTile(y,[o.contractsModel],h),this.themeName=this.reportTile.composite?this.reportTile.composite.config.themeName:void 0,this.setTheme(this.dashboardTile,!1),this.setTheme(this.reportTile,!0),
this.createModelDialogWithOptions(this.pinTileScope)}},t.prototype.showPinReportPageDialog=function(t){this.exploration=t.exploration,this.pinEvent=this.createPinEvent(t.isPinFromDashboard),this.isPinFromDashboard=!!t.isPinFromDashboard,this.isLiveReport=!0,this.pinTileScope=this.createPinTileScope(!1),this.pinTileScope.viewModel.needSaveReport=!1,this.pinTileScope.viewModel.hasTileFormatting=!1;var i,o=this.reportService.findReport(t.reportId),r=o?o.modelId:void 0,n=this.modelService.findModel(r),s=n?[n]:[],c=t.section.size,l=c?c.width:void 0,d=c?c.height:void 0,p=t.action||{action:e.common.constants.openReportActionName,targetSlideId:t.section.name};return o?(i=a.createReportTileForExploreData(t.reportId,r,t.section.id,t.displayText?t.displayText:o.displayName,t.subDisplayText?t.subDisplayText:t.section.displayName,p,t.pod,t.filters?this.explorationSerializer.serializeFilterCollection(t.filters):void 0,t.utterance,l,d),this.dashboardTile=this.modelConverter.convertTile(i,s,[o]),this.reportTile=this.modelConverter.convertTile(i,s,[o]),this.themeName=this.getTheme(t.exploration.exploreCanvas),this.setTheme(this.dashboardTile,!1),this.setTheme(this.reportTile,!0),void this.createModelDialogWithOptions(this.pinTileScope,!0)):(this.pinTileScope.viewModel.needSaveReport=!0,void this.createModelDialogWithOptions(this.pinTileScope,!0))},t.prototype.isScriptVisualInLivePage=function(e){if(e&&e.exploreCanvas&&e.exploreCanvas.visualContainers){var t=e.exploreCanvas.contract.visualContainers;return r.visualContainerHasScriptVisuals(t,this.visualPlugin)}return!1},t.prototype.getTheme=function(e){var i;if(e){var o=e.visualContainers,r=o?o.length:0;r>0&&(i=o[0].themeName)}return i&&i!==t.defaultTheme?i:void 0},t.prototype.createModelDialogWithOptions=function(e,t){var i=t?"liveReport":"pinTile",o={dialogName:null,isDismissable:!0,scope:e,template:"<pin-tile-dialog></pin-tile-dialog>",focusOnFirstButton:!0,dialogCssClass:i};0===this.pinTileScenario&&(o.notificationText=this.localizationService.get("PinTile_Workbook_Changed"),o.notificationType=jsCommon.ModalDialogNotificationType.Info),this.modalDialogService.showLegacyWebModalDialog(o)},t.prototype.createPinEvent=function(t){return this.telemetryService.startEvent(e.telemetry.DashboardPinTile,"reportPage",t?e.telemetry.PinTileSource.Dashboard:e.telemetry.PinTileSource.Report,"",!1,"",!1,"",this.isScriptVisualInLivePage(this.exploration))},t.prototype.createCustomTileForPinData=function(e,r){var s,c={visualType:void 0,dataViewSource:void 0},l=e.contract;if(l&&l.config){s=JSON.parse(l.config);var d=!!s&&!!s.visual,p=l.query&&l.query.modelQuery&&l.query.modelQuery.sq,u=p?n.convertToTileDataQuery(l.query):void 0,v=s&&s.tileDataType;c.dataViewSource=l.tileDataSet,c.reportId=l.reportId,c.modelId=l.modelId,c.action=e.action,c.utterance=l.query&&l.query.modelQuery?e.contract.query.modelQuery.utterance:void 0,c.tileSubDisplay=e.getSubDisplayText(),c.tileHeading=e.getDisplayText(),c.themeName=!r&&e.composite&&e.composite.config?e.composite.config.themeName:t.defaultTheme,c.resourcePackageIds=l.resourcePackageIds,d&&(c.visualType=s.visual.visual,c.queryMetadata=s.visual.queryMetadata,c.elements=s.visual.elements,c.tileLayoutType=s.visual.layoutType,c.stylePresetName=s.visual.stylePresetName);var h=this.visualPlugin.capabilities(c.visualType);if(s.visual&&s.visual.transform&&h&&h.objects){var g=h.objects,m=JSON.parse(s.visual.transform);c.dataTransforms=o.deserializeDataViewTransformActions(m,g)}if(u&&(c.query=u),d&&s.visual.objects){var f=d?s.visual.objects:void 0;if(f){var y=d?this.visualPlugin.capabilities(s.visual.visual):void 0;y&&y.objects&&(f=i.deserializeObjects(f,y.objects))}c.objects=f}v&&(c.tileDataType=s.tileDataType),l.name&&(c.name=l.name)}var b=s&&s.visual&&!s.widget?a.createTileForPinData(this.visualPlugin,c,e.model,e.report):a.createNonVisualTileFromExisting(l);return this.modelConverter.resolveTilePackage(b,this.packageService.packages),b},t.prototype.updateTile=function(e){this.formattedTileContract=e?this.dashboardTile.contract:this.reportTile.contract},t.prototype.hideDialog=function(){this.modalDialog&&this.modalDialog.hideDialog()},t.prototype.onPinButtonClickedActions=function(){var t=this.pinTileScope.viewModel.useDashboardFormatting?e.contracts.TileDialogPreviewFormats.DashboardFormat:e.contracts.TileDialogPreviewFormats.ReportFormat;if(this.userSettingsService.updatePinDialogPreviewTileFormat(t,this.pinEvent),this.savedReport){var i=this.savedReport;this.formattedTileContract.reportId=i.id,this.savedReport=null}if(this.modalDialog.hideDialog(),this.pinTileScope.viewModel.useExistingDashboard)this.dashboardService.pinTileWithoutNotification({tile:this.formattedTileContract,dashboardId:parseInt(this.pinTileScope.viewModel.selectedDashboardId,10),parentEvent:this.pinEvent,showNotification:!0,isLiveReport:this.isLiveReport});else{var o={tile:this.formattedTileContract,newDashboardName:this.pinTileScope.viewModel.newDashboardName,parentEvent:this.pinEvent,showNotification:!0,isLiveReport:this.isLiveReport};this.dashboardService.addDashboard(o.newDashboardName,o)}},t.prototype.onSaveAndContinueButtonClickedActions=function(){var t=this;this.rootScope.$emit(e.constants.saveReportFromPinDialog,this.pinTileScope.viewModel.newReportName);var i=this,o=function(){return setInterval((function(){i.savedReport&&clearInterval(o())}),100)};o(),this.pinTileScope.$applyAsync((function(){t.pinTileScope.viewModel.needSaveReport=!1}))},t.prototype.showNotSupportedDialog=function(){var e=this.errorService.control(),t=this.localizationService.get("PinTile_NotSupportedTitle"),i=this.localizationService.get("PinTile_NotSupportedMessage"),o=[new InJs.ModalDialogAction(this.localizationService.get("PinTile_OK"),function(t,i){e.hideDialog()})];e.showCustomDialog(t,$("<div/>").text(i),o,null,!0)},t.prototype.mapCanvasSize=function(t,i){if(t){var o=e.explore.SectionUtils.findSectionIndexForSectionId(t,i);if(t.sections&&t.sections[o]&&void 0!==t.sections[o].size.displayOption){var r=t.sections[o].size;r.displayOption=1}}return t},t.prototype.setTheme=function(i,o){i&&(i.calculateLayout(e.common.GridLayoutConstants.getDefaultGridItemViewport(e.common.GridLayoutConstants.getSmallLandscapeGridItem())),i.applyLayout(),o?(i.composite?(i.composite.config.themeName=this.themeName,i.composite.visual.themeName=this.themeName):i.reportTile&&(i.reportTile.themeName=this.themeName),this.pinTileScope&&this.pinTileScope.viewModel&&(this.pinTileScope.viewModel.reportTile=i)):(i.composite&&(i.composite.config.themeName=t.defaultTheme,i.composite.visual.themeName=t.defaultTheme),this.pinTileScope&&this.pinTileScope.viewModel&&(this.pinTileScope.viewModel.dashboardTile=i,this.pinTileScope.viewModel.workbookTile=i)))},t.prototype.isTileFormattingRequired=function(t){return t!==e.visuals.plugins.textbox.name&&t!==e.visuals.plugins.image.name},t.prototype.createPinTileScope=function(t){var i=this.rootScope.$new();return i.viewModel=new e.models.PinTileDialogModel(null),i.viewModel.needSaveReport=t,i},t.defaultTheme="ThemeNew1",t})();e.PinTileService=s})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e){return new r(e)}var i=e.common.constants,o=jsCommon.BrowserUtils;e.createPrintService=t;var r=(function(){function e(e){var t=this;if(this.rootScope=e,o.isFirefox()||o.isInternetExplorerOrEdge())window.onbeforeprint=function(){return t.enterPrintHandler()},window.onafterprint=function(){return t.exitPrintHandler()};else if(window.matchMedia){var i=window.matchMedia("print");i.addListener((function(e){t.mediaQueryListener(e)}))}}return e.prototype.mediaQueryListener=function(e){e.matches?this.enterPrintHandler():this.exitPrintHandler()},e.prototype.enterPrintHandler=function(){this.rootScope.$emit(i.enterPrintModeEvent)},e.prototype.exitPrintHandler=function(){this.rootScope.$emit(i.exitPrintModeEvent)},e})();e.PrintService=r})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,i,r,a,n,s,c,l){return new o(e,t,i,r,a,n,s,c,l)}var i=e.helpers.RedirectUrlHelper;e.createQRCodeService=t;var o=(function(){function t(e,t,i,o,r,a,n,s,c){this.rootScope=e,this.promiseFactory=i,this.localizationService=o,this.dashboardHttpService=r,this.reportHttpService=a,this.errorService=n,this.modalDialogService=s,this.telemetryService=c,this.compile=t,this.modalDialog=this.errorService.control(),this.stopQrGeneration=!1}return t.prototype.getQRCodeCanvas=function(e){var i={ecLevel:"M",background:t.whiteColor,text:e,size:180};return this.getPbiQRCodeCanvasWithOptions(i)},t.prototype.showDialogForTile=function(t,i,o,r,a){var n=this;this.showProgressDialog(),this.composeOpenTileRedirectUrl(a,r,o.id,o.objectId,o.originalDashboardObjectId,i.contract.id,i.contract.objectId,i.contract.originalTileObjectId).then((function(t){n.qrCodeScope=n.createQRCodeScope(),n.qrCodeScope.viewModel.displayText=i.getDisplayText(),n.qrCodeScope.viewModel.subDisplayText=i.getSubDisplayText(),n.qrCodeScope.viewModel.url=t,n.qrCodeScope.viewModel.dialogMessage=n.localizationService.get("InFocus_QRCodeDialog_Message"),n.qrCodeScope.viewModel.notificationMessage=n.localizationService.get("InFocus_QRCodeDialog_Notification"),n.telemetryService.logEvent(e.telemetry.QRCodeQRCodeDialogShown,r,o.objectId,i.objectId,a,o.originalDashboardObjectId,i.contract.originalTileObjectId),n.createModelDialogWithOptions(n.qrCodeScope)}))},t.prototype.showDialogForReport=function(t,i,o,r,a,n){var s=this;this.showProgressDialog(),this.composeOpenReportRedirectUrl(r,n,i.id,i.objectId,i.originalReportObjectId,a).then((function(t){s.qrCodeScope=s.createQRCodeScope(),s.qrCodeScope.viewModel.displayText=o,s.qrCodeScope.viewModel.url=t,s.qrCodeScope.viewModel.dialogMessage=s.localizationService.get("Report_QRCodeDialog_Message"),s.qrCodeScope.viewModel.notificationMessage=s.localizationService.get("Report_QRCodeDialog_Notification"),s.telemetryService.logEvent(e.telemetry.QRCodeQRCodeReportDialogShown,r,i.objectId,n,i.originalReportObjectId),s.createModelDialogWithOptions(s.qrCodeScope)}))},t.prototype.showProgressDialog=function(){var e=this.rootScope.$new(),t=this.compile("<qr-code-progress-dialog></qr-code-progress-dialog>")(e);$("body").append(t)},t.prototype.hideQRCodeDialog=function(){this.modalDialog&&this.modalDialog.hideDialog()},t.prototype.hideQRProgressDialog=function(){this.stopQrGeneration=!0,this.closeQRProgressDialog()},t.prototype.closeQRProgressDialog=function(){$("body").find(t.progressDialogDiv).remove()},t.prototype.createModelDialogWithOptions=function(e){var t={dialogName:null,isDismissable:!0,scope:e,template:"<qr-code-dialog></qr-code-dialog>",focusOnFirstButton:!0,dialogCssClass:"qrCode"};this.stopQrGeneration?this.stopQrGeneration=!1:(this.closeQRProgressDialog(),this.modalDialogService.showLegacyWebModalDialog(t))},t.prototype.createQRCodeScope=function(){var t=this.rootScope.$new();return t.viewModel=new e.models.QrCodeDialogModel,t},t.prototype.composeOpenTileRedirectUrl=function(t,o,r,a,n,s,c,l){var d=this,p=this.promiseFactory.defer();return this.dashboardHttpService.getTileShortUrl(r,s,void 0).then((function(i){d.telemetryService.logEvent(e.telemetry.QRCodeShortUrlCreated,t,a,c,o,n,l),p.resolve(i.data)}),(function(r){var s,u="QR";s=_.isEmpty(o)?i.MobileRedirectUrlHelper.getTileRedirectUrl(t,null,a,c,u):i.MobileRedirectUrlHelper.getTileRedirectUrl(null,o,n,l,u),d.telemetryService.logEvent(e.telemetry.QRCodeShortUrlFailed,t,a,c,r.status.toString(),o,n,l),p.resolve(s)})),p.promise},t.prototype.composeOpenReportRedirectUrl=function(t,o,r,a,n,s){var c=this,l=this.promiseFactory.defer();return this.reportHttpService.getReportShortUrl(r,s,void 0).then((function(i){c.telemetryService.logEvent(e.telemetry.QRCodeReportShortUrlCreated,t,a,o,n),l.resolve(i.data)}),(function(r){var d,p="QR";d=_.isEmpty(o)?i.MobileRedirectUrlHelper.getReportRedirectUrl(t,null,a,s,p):i.MobileRedirectUrlHelper.getReportRedirectUrl(null,o,n,s,p),c.telemetryService.logEvent(e.telemetry.QRCodeReportShortUrlFailed,t,a,r.status.toString(),o,n),l.resolve(d)})),l.promise},t.prototype.getQRCodeCanvasWithOptions=function(e){var t=$("<canvas />"),i=t.get(0);return i.width=i.height=e.size,t.qrcode(e),i},t.prototype.getPbiQRCodeCanvasWithOptions=function(e){var i=$("<canvas />").get(0);i.width=190;var o=192;i.height=o+13+11+1;var r=i.getContext("2d");r.fillStyle=t.whiteColor,r.fillRect(0,0,i.width,i.height),r.drawImage(this.getQRCodeCanvasWithOptions(e),5,5);var a="Power BI";r.font="13px wf_segoe-ui_semibold",r.fillStyle=t.neutralPrimaryColor,r.textBaseline="hanging";var n=(i.width-r.measureText(a).width)/2;return r.fillText(a,n,o),r.rect(0,0,i.width,i.height),r.strokeStyle=t.gray80Color,r.lineWidth=2,r.stroke(),i},t.progressDialogDiv=".qrLoading",t.whiteColor="#ffffff",t.neutralPrimaryColor="#333333",t.gray80Color="#cccccc",t})();e.QRCodeService=o})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i,o,r){return new a(e,t,i,o,r)}var o=e.common.constants,r=e.common.contracts.RealTimeMode;t.createRealTimeDataService=i;var a=(function(){function e(e,t,i,r,a){this.modelService=t,this.realTimeLongPollDataService=i,this.realTimeLongPubNubDataService=r,this.tabularDataCache=a,this.listenerMap={},i.setCallbacks(this.processMessage.bind(this),this.raiseErrors.bind(this)),r.setCallbacks(this.processMessage.bind(this),this.raiseErrors.bind(this)),e.$on(o.browserTabHiddenEvent,this.pause.bind(this)),e.$on(o.browserTabVisibleEvent,this.resume.bind(this))}return e.prototype.subscribe=function(e,t){if(e&&t){var i=this.tabularDataCache,o=null!=e.originalModelId?e.originalModelId:e.id,r=i.getKey(o,e.tableName),a=this.listenerMap[r]||[];if(!_.contains(a,t)){a.push(t),this.listenerMap[r]=a;var n=i.get(r);if(n)return void t.onDataChanged();i.add({modelId:o,name:e.tableName,rowGroups:null,columns:this.getColumnMetadata(e.schema)});var s=this.resolveDataService(e);s&&s.subscribe(e)}}},e.prototype.unsubscribe=function(e,t){if(e&&t){var i=this.tabularDataCache,o=null!=e.originalModelId?e.originalModelId:e.id,r=i.getKey(o,e.tableName),a=this.listenerMap[r];if(a&&(_.remove(a,(function(e){return e===t})),_.isEmpty(a))){delete this.listenerMap[r],i.remove(r);var n=this.resolveDataService(e);n&&n.unsubscribe(e)}}},e.prototype.pause=function(){this.realTimeLongPollDataService.pause(),this.realTimeLongPubNubDataService.pause()},e.prototype.resume=function(){this.realTimeLongPollDataService.resume(),this.realTimeLongPubNubDataService.resume()},e.prototype.replaceListener=function(e,t,i){var o=null!=e.originalModelId?e.originalModelId:e.id,r=this.tabularDataCache.getKey(o,e.tableName),a=this.listenerMap[r]||[];this.listenerMap[r]=a;var n=_.remove(a,(function(e){return e===t}));_.isEmpty(n)||a.push(i)},e.prototype.processMessage=function(e){if(e){var t=this.tabularDataCache,i=t.getKey(e.modelId,e.name);if(_.isEmpty(e.rowGroups)){if(e.lastVersion){var o=this.tabularDataCache.get(i);o&&(o.lastVersion=e.lastVersion)}}else{t.mergeRows(e.modelId,e.name,e.rowGroups,e.lastVersion);var r=this.listenerMap[i];if(r)for(var a=0,n=r;a<n.length;a++){var s=n[a];s.onDataChanged()}}}},e.prototype.raiseErrors=function(e,t){for(var i=[],o=0,r=e;o<r.length;o++){var a=r[o],n=this.tabularDataCache.getKey(a.id,a.tableName);i.push(n)}i=_.uniq(i);for(var s=0,c=i;s<c.length;s++){var n=c[s],l=this.listenerMap[n];if(!l)return;for(var d=0,p=l;d<p.length;d++){var u=p[d];u.onError(t)}}},e.prototype.getColumnMetadata=function(e){if(e){var t=e.entities;if(!_.isEmpty(t)){var i=_.first(t);if(!_.isEmpty(i.properties)){for(var o=[],r=0,a=i.properties;r<a.length;r++){var n=a[r];o.push({name:n.name,type:n.type})}return o}}}},e.prototype.resolveDataService=function(e){var t=this.modelService.findModel(e.id,e.packageId);if(t)switch(t.realTimeMode){case r.CacheOnly:case r.PersistAndCache:return this.realTimeLongPollDataService;case r.PubNubCacheOnly:return this.realTimeLongPubNubDataService}},e})()})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i,o,r,a){return new u(e,t,i,o,r,a)}var o=jsCommon.JsonExtensions,r=e.data.tabular.MaxRealTimeDataWindowInMs,a=e.data.MessageExceedLimitClientError,n=e.data.RealTimeGetHistoryClientError,s=e.data.RealTimeLongPollError,c=20,l=12e4;t.createRealTimeLongPollDataService=i;var d,p="realTimeErrorCode";!(function(e){e[e.None=0]="None",e[e.MaximumDataExceeded=1]="MaximumDataExceeded"})(d||(d={}));var u=(function(t){function i(e,i,o,r,a,n){t.call(this,e,a),this.tabularDataService=i,this.telemetryService=r,this.realTimeDataHttpService=o,this.activeRealTimeModelIds=[],this.options=n}return __extends(i,t),i.prototype.setCallbacks=function(e,t){this.updateCallback=e,this.errorCallback=t},i.prototype.subscribe=function(e){e&&(_.contains(this.activeRealTimeModelIds,e)||(this.activeRealTimeModelIds.push(e),this.delayedGetHistory()))},i.prototype.unsubscribe=function(e){e&&(_.remove(this.activeRealTimeModelIds,e),this.delayedGetUpdate())},i.prototype.resume=function(){this.paused=!1,this.delayedGetHistory()},i.prototype.getRequest=function(){for(var e=[],t=this.tabularDataService,i=0,o=this.activeRealTimeModelIds;i<o.length;i++){var r=o[i],a=null!=r.originalModelId?r.originalModelId:r.id,n=t.getKey(a,r.tableName),s=t.get(n);e.push({id:s.modelId,packageId:r.packageId,tableName:s.name,version:s.lastVersion?s.lastVersion:0})}if(!_.isEmpty(e))return{models:e}},i.prototype.getEndpointUrl=function(){return"powerbi/refresh/rtsubscribe"},i.prototype.processResponse=function(e){e&&this.processUpdates(e.results)},i.prototype.processError=function(){this.telemetryService.logEvent(e.telemetry.RealTimeLongPollError),this.errorCallback(this.activeRealTimeModelIds,(new s).getDetails(e.common.localize))},Object.defineProperty(i.prototype,"longPollDurationInMs",{get:function(){return l},enumerable:!0,configurable:!0}),i.prototype.delayedGetHistory=function(){var e=this,t=this.timeout;t.cancel(this.getHistoryHandle),this.getHistoryHandle=this.timeout((function(){return e.getHistory()}),c)},i.prototype.delayedGetUpdate=function(){var e=this,t=this.timeout;t.cancel(this.getUpdateHandle),this.getUpdateHandle=t((function(){e.getUpdate()}),c)},i.prototype.getUpdate=function(){this.options.enableDataRefresh&&(this.cancelCurrentRequest(),_.isEmpty(this.activeRealTimeModelIds)||this.startMonitoring())},i.prototype.getHistory=function(){for(var t=this,i=[],o=0,a=this.activeRealTimeModelIds;o<a.length;o++){var s=a[o],c=null!=s.originalModelId?s.originalModelId:s.id;i.push({modelId:c,tableName:s.tableName,fromMilliseconds:r})}_.isEmpty(i)||this.realTimeDataHttpService.getHistory(i).then((function(e){e&&t.processUpdates(e.data),t.getUpdate()}),(function(){var i=(new n).getDetails(e.common.localize);t.errorCallback(t.activeRealTimeModelIds,i)}))},i.prototype.processUpdates=function(t){if(!_.isEmpty(t))for(var o=0,r=t;o<r.length;o++){var a=r[o];if(a){var n=i.convertToDataRowGroup(a.rows);if(!_.isEmpty(n)){var s=i.checkForError(n);s&&this.errorCallback([a],s.getDetails(e.common.localize)),n=i.filterOutErrorRow(n);var c={modelId:a.id,name:a.tableName,rowGroups:n,lastVersion:a.version};this.updateCallback(c)}}}},i.checkForError=function(e){var t=_.last(e);if(t){var o=_.first(t.rows);if(o){var r=o[p];return r?i.getErrorForCode(r):void 0}}},i.filterOutErrorRow=function(e){for(var t=[],i=0,o=e;i<o.length;i++){var r=o[i];_.remove(r.rows,(function(e){return null!=e[p]})),_.isEmpty(r.rows)||t.push(r)}return t},i.getErrorForCode=function(e){switch(e){case jsCommon.EnumExtensions.toString(d,d.MaximumDataExceeded):return new a}},i.convertToDataRowGroup=function(e){var t=[];if(_.isEmpty(e))return t;for(var i=0,r=e;i<r.length;i++){var a=r[i],n=a&&a.data,s=o.tryParseJSON(n);_.isEmpty(s)||t.push({version:a.version,rows:s})}return t},i})(e.common.LongPollServiceBase)})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i,o,r,a,n,c){return new s(e,t,i,o,r,a,n,c)}var o=e.errorDetailsHelper,r=e.dataServices.models.RealTimeModel,a=e.dataServices.models.RealTimeModelUtility;t.createRealTimeModelService=i;var n=5e3,s=(function(){function t(e,t,i,o,r,a,n,s){this.conceptualSchemaProxy=e,this.errorService=t,this.localizationService=i,this.modelService=o,this.promiseFactory=r,this.realTimeDataHttpService=a,this.telemetryService=n,this.timeoutService=s,this.selectedModelId=null}return t.prototype.setSelected=function(e){this.selectedModelId=e,this.selectedModel=null},t.prototype.getSelected=function(){var e=this;if(this.selectedModel)return this.promiseFactory.resolve(this.selectedModel);var t=this.getModel(this.selectedModelId);return t.then((function(t){e.selectedModel=t})),t},t.prototype.createModel=function(t){var i=this,a=this.promiseFactory.defer(),n=this.getColumnStatistic(t.columns),s=this.telemetryService.startEvent(e.telemetry.RealTimeAddUpdateRemoveStreamingDataset,e.telemetry.CreateUpdateDeleteAction.Create,n.dateTimeColumnCount,n.numericColumnCount,n.stringColumnCount,t.mode);return this.realTimeDataHttpService.createDataset(t).then((function(e){var o=new r(e.data,t);o.isNew=!0,i.selectedModel=o,s.resolve(),a.resolve(o)}),(function(e){i.errorService.error(i.localizationService.get("StreamingDataset_FailedToCreateDataset"),"StreamingDataset_FailedToCreateDataset",{requestId:e.requestId,statusCode:e.status.toString()}),s.reject(o.getTelemetryErrorDetails(e.error,e.status)),a.reject()})),a.promise},t.prototype.detectPubNubColumnsDefinition=function(e){var t=e.channelName,i=this.promiseFactory.defer(),o=this.timeoutService,r=PUBNUB.init({subscribe_key:e.subscriptionKey,auth_key:e.authKey,ssl:!0,noleave:!0}),s=o((function(){i.reject(),r.unsubscribe({channel:t})}),n);return r.subscribe({channel:t,message:function(e,n,c,l){o.cancel(s),r.unsubscribe({channel:t});var d=e;return d?void i.resolve(a.convertToColumnsDefinition(d)):void i.reject()}}),i.promise},t.prototype.getModel=function(t){var i=this,n=this.promiseFactory.defer();if(!t||t<0)return n.resolve(null),n.promise;var s=_.first(this.modelService.findModels(t)),c=this.telemetryService.startEvent(e.telemetry.RealTimeGetStreamingDataset);return this.realTimeDataHttpService.getDataset(t).then((function(e){var o=a.getRealTimeDataSource(t),l=e.data;c.resolve(),i.conceptualSchemaProxy.get(o).then((function(e){var t=new r(l,r.createRealTimeDatasetDefinition(s.displayName,s.realTimeMode,e));n.resolve(t)}),(function(){n.reject(null)}))}),(function(e){i.errorService.error(i.localizationService.get("StreamingDataset_FailedToLoadDataset"),"StreamingDataset_FailedToLoadDataset",{requestId:e.requestId,statusCode:e.status.toString()}),c.reject(o.getTelemetryErrorDetails(e.error,e.status)),n.reject(null)})),n.promise},t.prototype.getAndSelectEmptyModel=function(){var t=e.models.modelFactory.createDefaultRealTimeModel();return this.selectedModel=t,t},t.prototype.updateModel=function(t,i){var r=this,n=this.promiseFactory.defer(),s=this.getColumnStatistic(t.columns),c=this.telemetryService.startEvent(e.telemetry.RealTimeAddUpdateRemoveStreamingDataset,e.telemetry.CreateUpdateDeleteAction.Update,s.dateTimeColumnCount,s.numericColumnCount,s.stringColumnCount,t.mode),l=a.getRealTimeDataSource(i||this.selectedModelId);return this.conceptualSchemaProxy.clearCache(null,l),this.realTimeDataHttpService.updateDataset(i||this.selectedModelId,t).then((function(){c.resolve(),n.resolve({})}),(function(e){r.errorService.error(r.localizationService.get("StreamingDataset_FailedToUpdateDataset"),"StreamingDataset_FailedToUpdateDataset",{requestId:e.requestId,statusCode:e.status.toString()}),c.reject(o.getTelemetryErrorDetails(e.error,e.status)),n.reject(null)})),n.promise},t.prototype.deleteModel=function(t){var i=this.modelService.findModel(t);this.telemetryService.logEvent(e.telemetry.RealTimeAddUpdateRemoveStreamingDataset,e.telemetry.CreateUpdateDeleteAction.Delete,null,null,null,i.realTimeMode),this.modelService.deleteModel(t),this.selectedModelId===t&&(this.selectedModelId=null,this.selectedModel=null)},t.prototype.getColumnStatistic=function(e){for(var t={dateTimeColumnCount:0,numericColumnCount:0,stringColumnCount:0},i=0,o=e;i<o.length;i++){var r=o[i];2===r.dataType?t.dateTimeColumnCount++:1===r.dataType?t.numericColumnCount++:0===r.dataType&&t.stringColumnCount++}return t},t})()})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i,o){return new n(e,t,i,o)}var o=e.errorDetailsHelper,r=e.data.RealTimePubNubGetCredentialsClientError;t.createRealTimePubNubDataService=i;var a=200,n=(function(){function t(e,t,i,o){this.promiseFactory=e,this.realTimeDataHttpService=t,this.tabularDataService=i,this.telemetryService=o,this.modelCredentialMap={},this.pubNubConnectionMap={}}return t.prototype.setCallbacks=function(e,t){this.updateCallback=e,this.errorCallback=t},t.prototype.pause=function(){this.toggleSubscribe(1)},t.prototype.resume=function(){this.toggleSubscribe(0)},t.prototype.toggleSubscribe=function(e){var t=this;_.forOwn(this.modelCredentialMap,(function(i,o){var r=t.getConnectionKey(i),a=t.pubNubConnectionMap[r],n=a&&a.instance;if(n)for(var s=Object.keys(a.channelListeners),c=0,l=s;c<l.length;c++){var d=l[c];0===e?n.subscribe({channel:d,message:function(e,o,r,a){t.processMessage(i,e,o[1])}}):n.unsubscribe({channel:d})}}))},t.prototype.subscribe=function(e){var t=this;e&&this.getCredentials(e).then((function(i){var o=t.getConnectionKey(i),r=t.pubNubConnectionMap[o];r||(r={instance:PUBNUB.init({subscribe_key:i.subscriptionKey,auth_key:i.authKey,ssl:!0,noleave:!0,windowing:a}),channelListeners:{}},t.pubNubConnectionMap[o]=r);var n=i.channelName,s=r.channelListeners[n];_.isEmpty(s)&&(r.instance.subscribe({channel:n,message:function(e,o,r,a){t.processMessage(i,e,o[1])}}),s=r.channelListeners[n]=[]),s.push(e)}))},t.prototype.unsubscribe=function(e){var t=this;e&&this.getCredentials(e).then((function(i){var o=i.channelName,r=t.getConnectionKey(i),a=t.pubNubConnectionMap[r],n=a&&a.channelListeners[o];n&&(_.remove(n,e),_.isEmpty(n)&&(delete a.channelListeners[o],a.instance.unsubscribe({channel:o}),_.isEmpty(Object.keys(a.channelListeners))&&delete t.pubNubConnectionMap[r]))}))},t.prototype.getCredentials=function(t){var i=this,a=this.promiseFactory.defer(),n=null!=t.originalModelId?t.originalModelId:t.id,s=this.tabularDataService.getKey(n,t.tableName),c=this.modelCredentialMap[s];if(c)a.resolve(c);else{var l=this.telemetryService.startEvent(e.telemetry.RealTimeGetPubNubCredentials);this.realTimeDataHttpService.getCredentials(t.id).then((function(e){var t=e.data;i.modelCredentialMap[s]=t,l.resolve(),a.resolve(t)}),(function(n){l.reject(o.getTelemetryErrorDetails(n.error,n.status)),i.errorCallback([t],(new r).getDetails(e.common.localize)),a.reject()}))}return a.promise},t.prototype.getConnectionKey=function(e){return e.subscriptionKey+(e.authKey||"")},t.prototype.processMessage=function(e,i,o){if(i&&o)for(var r=this.getConnectionKey(e),a=this.pubNubConnectionMap[r],n=a.channelListeners[e.channelName],s=t.convertTimeTokenToVersion(o),c=0,l=n;c<l.length;c++){var d=l[c],p=null!=d.originalModelId?d.originalModelId:d.id,u={modelId:p,name:d.tableName,rowGroups:t.convertToDataRowGroup(s,i),lastVersion:s};this.updateCallback(u)}},t.convertToDataRowGroup=function(e,t){return t?[{version:e,rows:[t]}]:[]},t.convertTimeTokenToVersion=function(e){var t=1e4;return Math.floor(e/t)},t})()})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,o){return new i(e,t,o)}e.createSettingsMetadataService=t;var i=(function(){function t(e,t,i){this._promiseFactory=e,this._settingsHttpService=t,this._telemetryService=i}return t.prototype.getSettingsType=function(){return this._settingsType},t.prototype.getArtifactObjectId=function(){return this._artifactObjectId},t.prototype.setSettings=function(e,t){this._settingsType=e,this._artifactObjectId=t},t.prototype.getSettings=function(){var t=this._promiseFactory.defer(),i=this._telemetryService.startEvent(e.telemetry.SettingsLoadSettingsData);return this._settingsHttpService.getSettings(i.event).then((function(e){i.resolve(),t.resolve(e.data)}),(function(){i.reject(),t.reject()})),t.promise},t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i){return new o(e,t,i)}t.ShowGridlinesSettingKey="ShowGridlines",t.SnapToGridSettingKey="SnapToGrid",t.createSettingsService=i;var o=(function(){function i(e,i,o){var r=this;this.telemetryService=e,this.$rootScope=i,this.userSettingsService=o,o.getExtendedSettingsByKeys([t.ShowGridlinesSettingKey,t.SnapToGridSettingKey]).then((function(e){r.showGridlines=e[0],r.snapToGrid=e[1],i.$applyAsync()}))}return i.prototype.getShowGridlines=function(){return this.showGridlines},i.prototype.setShowGridlines=function(i){this.showGridlines=i,this.persistSetting(e.telemetry.SettingsSetShowGridlines,t.ShowGridlinesSettingKey,i)},i.prototype.getSnapToGrid=function(){return this.snapToGrid},i.prototype.setSnapToGrid=function(i){this.snapToGrid=i,this.persistSetting(e.telemetry.SettingsSetSnapToGrid,t.SnapToGridSettingKey,i)},i.prototype.persistSetting=function(e,t,i){var o=this.telemetryService.startEvent(e,i);this.userSettingsService.updateExtendedSettings(t,i,o)},i})()})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(){var e={contentProviders:[],collapsed:!0};return e}e.getActivityPaneContract=t})(t=e.staticContract||(e.staticContract={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,i,o,r,a,n,c,l,d,p,u,v,h,g){return new s(e,t,i,o,r,a,n,c,l,d,p,u,v,h,g)}var i=jsCommon.EnumExtensions,o=e.common.helpers.ModelConverterHelper,r=e.common.contracts.ModelProperty,a=e.common.contracts.Permissions;!(function(e){e[e.Dataset=0]="Dataset",e[e.Report=1]="Report"})(e.storageType||(e.storageType={}));var n=e.storageType;e.createStorageUsageService=t;var s=(function(){function t(e,t,i,o,r,a,n,s,c,l,d,p,u,v,h){this.telemetryService=t,this.rootScope=e,this.errorService=i,this.dashboardHttpService=o,this.localizationService=r,this.featureSwitchService=a,this.reportService=n,this.modelService=s,this.promiseFactory=c,this.navigation=l,this.userInfo=d,this.groupService=p,this.workbookService=u,this.licenseHelperService=v,this.permissionService=h}return t.convertToUsageWithUnit=function(e){return e>=t.usageUnitRadix?t.usageInGBFormat.replace("{0}",(Math.ceil(e/t.usageUnitRadix*10)/10).toString()):t.usageInMBFormat.replace("{0}",e.toString())},Object.defineProperty(t.prototype,"quotaLimitInMB",{get:function(){if(this.featureSwitchService.featureSwitches.quotaSmallLimitEnabled)return t.smallLimitInMB;if(this.featureSwitchService.featureSwitches.forceFreeUserEnabled)return t.freeUserLimitInMB;var e;return this.userInfo&&this.userInfo.userMetadata&&this.userInfo.userMetadata.quotaStatus&&(e=this.userInfo.userMetadata.quotaStatus.quotaLimitInMB),e||(e=this.userInfo.isPremiumUser?t.paidUserLimitInMB:t.freeUserLimitInMB),e},enumerable:!0,configurable:!0}),t.prototype.getUsageModels=function(e){for(var r=this,s=[],c=this.modelService.models,l=this.reportService.reports,d=0,p=c.length;d<p;++d){var u=c[d].contract,v=u.sizeInMBs?u.sizeInMBs:0,h=_.filter(e,(function(e){return e.contract.modelIds&&e.contract.modelIds.indexOf(u.id)>=0}));if(this.shouldIncludeModel(u,h)){var g=this.permissionService.getModelEffectivePermissions(u.id),m={modelId:u.id,packageId:u.packageId,name:u.displayName,sizeInMBs:v,sizeWithUnit:t.convertToUsageWithUnit(v),storageType:n.Dataset,typeText:this.localizationService.get("QuotaManagement_ModelType_Dataset"),lastRefreshTime:o.convertRefreshTimeToJsDateTime(u.lastRefreshTime).toLocaleString(),reportsFromModel:_.filter(l,(function(e){return e.modelId===u.id})),dashboardsFromModel:h,associatedDashboards:"",associatedReports:"",ownedByMe:i.hasFlag(g,a.ReadWrite)};m.associatedDashboards=this.getAssociateNames(m.dashboardsFromModel,"displayName").join(", "),m.associatedReports=this.getAssociateNames(m.reportsFromModel,"displayName").join(", "),s.push(m)}}for(var f=this.workbookService.workbooks,d=0,p=f.length;d<p;d++){var y=f[d],b=_.filter(c,(function(e){
return r.shouldIncludeWorkbook(e,y)}));if(b&&b.length>0){var S=b[0].contract,v=S.sizeInMBs,m={modelId:y.modelId,packageId:y.packageId,name:y.displayName,sizeInMBs:v,sizeWithUnit:t.convertToUsageWithUnit(v),storageType:n.Report,typeText:this.localizationService.get("QuotaManagement_ModelType_Report"),lastRefreshTime:o.convertRefreshTimeToJsDateTime(S.lastRefreshTime).toLocaleDateString(),reportsFromModel:[],dashboardsFromModel:[],associatedDashboards:"",associatedReports:"",ownedByMe:i.hasFlag(S.permissions,a.ReadWrite)};s.push(m)}}return s},t.prototype.getAssociateNames=function(e,t){for(var i=[],o=0;o<e.length;++o)i.push(e[o][t]);return i},t.prototype.getUsage=function(e){for(var t=this,o=0,r=0,n=0,s=this.modelService.models,c=0,l=s.length;c<l;++c){var d=s[c].contract,p=_.filter(e,(function(e){return e.contract.modelIds&&e.contract.modelIds.indexOf(d.id)>=0}));if(this.shouldIncludeModel(d,p)){var u=this.permissionService.getModelEffectivePermissions(d.id);i.hasFlag(u,a.ReadWrite)?o+=d.sizeInMBs:r+=d.sizeInMBs}}for(var v=this.workbookService.workbooks,c=0,l=v.length;c<l;++c){var h=v[c],g=_.filter(s,(function(e){return t.shouldIncludeWorkbook(e,h)}));if(g&&g.length>0){var m=g[0].contract,f=m.sizeInMBs;i.hasFlag(m.permissions,a.ReadWrite)?o+=f:r+=f}}return n=o+r,{ownedUsage:o,sharedUsage:r,totalUsage:n}},t.prototype.checkQuotaExceeded=function(t,i,o){void 0===i&&(i=e.telemetry.QuotaCheckOperation.Unknown);var r=this.getUsage(t),a=r.totalUsage,n=this.quotaLimitInMB;return a>n&&(this.logQuotaExceededEvent(this.userInfo.isPremiumUser,this.isMyWorkspace,i,r.ownedUsage,r.sharedUsage,n),o||this.showQuotaExceedDialog(),!0)},t.prototype.getUsageBarMenuItemViewModel=function(e){var i;i=this.isMyWorkspace?this.localizationService.get("QuotaManagement_ManagePersonalStorage"):this.localizationService.get("QuotaManagement_ManageGroupStorage");var o=this.getUsage(e).totalUsage,r=this.quotaLimitInMB;return{usageInMB:o,quotaLimitInMB:r,usageDescription:this.localizationService.get("QuotaManagement_UsageDescription").replace("{0}",t.convertToUsageWithUnit(o)).replace("{1}",t.convertToUsageWithUnit(r)),text:i}},t.prototype.showQuotaExceedDialog=function(){var t=this;this.userInfo.isPremiumUser?this.licenseHelperService.displayQuotaExceededErrorMessage(e.telemetry.LicenseEnforcementOperation.QuotaExceededTrialAndPaidUser,this.localizationService.get("QuotaExceedDialogMessage_TrialAndPaidUser"),this.localizationService.get("QuotaExceedDialogTitle"),(function(){return t.rootScope.$applyAsync((function(){t.navigation.showManageStorageSlider()}))})):this.licenseHelperService.displayQuotaExceededErrorMessage(e.telemetry.LicenseEnforcementOperation.QuotaExceededTrialUser,this.localizationService.format("QuotaExceedDialogMessage_TrialUser",[""+this.licenseHelperService.freeTrialPeriod]),this.localizationService.get("QuotaExceedDialogTitle"),(function(){return t.rootScope.$applyAsync((function(){t.navigation.showManageStorageSlider()}))}))},t.prototype.isInVisibleDashboard=function(e){if(_.isEmpty(e))return!0;for(var t=0,i=e;t<i.length;t++){var o=i[t];if(!o.isHidden)return!0}return!1},Object.defineProperty(t.prototype,"isMyWorkspace",{get:function(){return this.groupService.activeGroup&&this.groupService.activeGroup.isMyWorkspace},enumerable:!0,configurable:!0}),t.prototype.logQuotaExceededEvent=function(t,i,o,r,a,n){var s=i?e.telemetry.QuotaOpenManageStorageContext.Personal:e.telemetry.QuotaOpenManageStorageContext.Group,c=this.telemetryService;c.logEvent(e.telemetry.QuotaExceeded,t,s,o,r,a,n)},t.prototype.shouldIncludeModel=function(e,t){return!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(e.displayName)&&null!=e.sizeInMBs&&e.sizeInMBs>0&&(e.modelFeatures&r.OrgApp)!==r.OrgApp&&e.isHidden!==!0&&this.isInVisibleDashboard(t)},t.prototype.shouldIncludeWorkbook=function(e,t){return e.contract.id===t.contract.modelId&&e.contract.packageId===t.packageId&&null!=e.contract.sizeInMBs&&e.contract.sizeInMBs>0&&t.isOwner()},t.usageInMBFormat="{0} MB",t.usageInGBFormat="{0} GB",t.usageUnitRadix=1024,t.freeUserLimitInMB=1024,t.paidUserLimitInMB=10240,t.smallLimitInMB=10,t})();e.StorageUsageService=s})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,o,r,a){return new i(e,t,o,r,a)}e.createTenantContentPackSerivce=t;var i=(function(){function t(e,t,i,o,r){this.telemetryService=e,this.featureSwitchService=t,this.contentProviderHttpService=i,this.promiseFactory=o,this.modelConverter=r,this.loadTenantContentPacks()}return t.prototype.tenantServiceContentPacksPromise=function(){return this._tenantContentPacksDeferred.promise},Object.defineProperty(t.prototype,"lastUpdatedTimestamp",{get:function(){return this._lastUpdatedTimestamp},enumerable:!0,configurable:!0}),t.prototype.loadTenantContentPacks=function(){var t=this;this._tenantContentPacksDeferred=this.promiseFactory.defer();var i=this.featureSwitchService.featureSwitches;if(i.templatePublishEnabled||i.templatePublishFlightingWorkAroundEnabled){var o=this.telemetryService.startEvent(e.telemetry.DashboardLoadTenantContentPacks);this.tenantServiceContentPacks=[],this.contentProviderHttpService.getTenantContentProviders(o.event).then((function(e){t.updateContentPackCollection(e.data),t._tenantContentPacksDeferred.resolve(t.tenantServiceContentPacks),o.resolve()}),(function(e){t._tenantContentPacksDeferred.reject(),o.reject()}))}},t.prototype.findContentPackByGUID=function(e){return null!=e?_.find(this.tenantServiceContentPacks,(function(t){return t.providerKey===e})):null},t.prototype.setContentPackCleanForSession=function(e){var t=this.getContentPackIndexByGUID(e);t>0&&(this.tenantServiceContentPacks[t].isDirty=!1)},t.prototype.deleteContentPack=function(t){var i=this.telemetryService.startEvent(e.telemetry.DashboardDeleteTemplateOrganizationApp),o=this.promiseFactory.defer();return e.contentPackService.deleteContentPack(t,i.event).then((function(e){i.resolve(),o.resolve(null)}),(function(e){i.reject(),o.reject({requestId:e.requestId,statusCode:e.status.toString(),activityId:e.activityId})})),o.promise},t.prototype.updateContentPackCollection=function(e){var t=this;this.tenantServiceContentPacks=[],e.map((function(e){t.tenantServiceContentPacks.push(t.modelConverter.convertContentPack(e))})),this.updateTimestamp()},t.prototype.updateTimestamp=function(){this._lastUpdatedTimestamp=(new Date).getTime()},t.prototype.getContentPackIndexByGUID=function(e){if(this.tenantServiceContentPacks.length>0)for(var t=0,i=this.tenantServiceContentPacks.length;t<i;t++){var o=this.tenantServiceContentPacks[t];if(o.providerKey===e)return t}return-1},t})();e.TenantContentPackService=i})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(t,o,r){var a=o.convertTileConfig(r.contract);if(a&&a.refreshPeriod){var n=a.refreshPeriod;n<i&&(n=i);var s=setInterval((function(){return r.refreshData()}),n);t.$on(e.common.constants.scopeDestroyEventName,(function(){return clearInterval(s)}))}}var i=6e4;e.tileDataRefreshWorker=t})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,i,o,a,n,s){return new r(e,t,o,a,n,s,i)}e.createTutorialPopupService=t;var i=300,o=1500,r=(function(){function t(e,t,i,o,r,a,n){var s=this;this.telemetryService=e,this.userInfo=t,this.featureSwitchService=i,this.localizationService=o,this.navigation=r,this.conceptualModelSetting=a,this.dataStore=n,this.dataStore.onReady((function(){return s.startTutorial()}))}return t.prototype.startTutorial=function(){var i=this;this.tutorialModel=e.createTutorialModel(this.userInfo,this.featureSwitchService,this.localizationService,this.navigation,this.conceptualModelSetting),this.itemKeys=this.tutorialModel.itemKeys;for(var o=0;o<this.itemKeys.length;++o){var r=this.itemKeys[o],a=this.tutorialModel.items[r];if(a.itemKey=r,a.dataStoreKey||(a.dataStoreKey=r),this.dataStore.hasKey(a.dataStoreKey))this.itemKeys.splice(o,1),--o;else if(!this.dataStore.hasKey(t.FirstUseKey)&&!a.includeNewUser){var n={event:void 0,resolve:_.noop,reject:_.noop};this.dataStore.setKey(a.dataStoreKey,!0,n),this.itemKeys.splice(o,1),--o}}if(this.itemKeys.length>0&&(this.nonModalPopupCount=_.countBy(this.itemKeys,(function(e){if(!i.tutorialModel.items[e].modal)return"nonModal"})).nonModal,this.nonModalPopupCurrentIndex=0,this.previousNonModalItem=null,this.startTimer()),!this.dataStore.hasKey(t.FirstUseKey)){var s=this.telemetryService.startEvent(e.telemetry.DashboardFirstUse);this.dataStore.setKey(t.FirstUseKey,!0,s)}},t.prototype.startTimer=function(){var e=this;this.popupContainer=new p;var t=this.conceptualModelSetting.isListViewEnabled()?i:o;this.timerID=setInterval((function(){e.checkStatus()}),t),this.checkStatus()},t.prototype.stopTimer=function(){this.popupContainer.destroy(),clearInterval(this.timerID)},t.prototype.checkStatus=function(){if(this.currentItem)this.canShow(this.currentItem)?this.popup?this.popup.alignPopup():this.showItem(this.currentItem):this.popup?this.popup.closePopup(!1):this.currentItem=null;else{if(0===this.itemKeys.length)return void this.stopTimer();for(var e=0,t=this.itemKeys.length;e<t;++e){var i=this.itemKeys[e],o=this.tutorialModel.items[i];if(this.canShow(o))return void(this.currentItem=o)}}},t.prototype.showItem=function(t){var i,o=this;t.modal||(this.previousNonModalItem!==t&&(this.previousNonModalItem=t,++this.nonModalPopupCurrentIndex),i=e.formattingService.format(this.localizationService.get("TutorialPopup_ProgressCount"),[this.nonModalPopupCurrentIndex,this.nonModalPopupCount])),this.popup=new u(this.popupContainer,t.attachTo,{title:t.title,text:t.text,buttonLabel:t.buttonLabel,modalButtonClassOverride:t.modalButtonClassOverride,imageUrl:t.imageUrl,iframeUrl:t.iframeUrl,modal:t.modal,offset:t.offset,onButtonClick:t.onButtonClick,onClose:function(e,t){o.onItemClose(e,t)},preferredOrientation:t.preferredOrientation,customClass:t.customClass,iconClass:t.iconClass,cancelText:t.cancelText,overlayOptions:t.overlayOptions,progressCountText:i});var r=this.telemetryService;this.gettingStartedEvent=r.startEvent(e.telemetry.DashboardShowGettingStartedPopup,t.dataStoreKey)},t.prototype.onItemClose=function(e,t){e&&(this.itemKeys.splice($.inArray(this.currentItem.itemKey,this.itemKeys),1),this.dataStore.setKey(this.currentItem.dataStoreKey,!0,this.gettingStartedEvent),this.currentItem.telemetryEventArgs&&this.telemetryService.logEvent.apply(this.telemetryService,this.currentItem.telemetryEventArgs)),t&&(this.itemKeys=[],this.dataStore.setKey(this.currentItem.dataStoreKey,!0,this.gettingStartedEvent)),this.currentItem=null,this.popup=null},t.prototype.canShow=function(e){try{if(!e.canShow())return!1;if(e.modal)return!0;var t=e.attachTo(),i=t.offset();return null!=i&&((0!==i.left||0!==i.top)&&0!==$(document.elementFromPoint(i.left+1,i.top+1)).closest(t).length)}catch(e){return!1}},t.FirstUseKey="Welcome",t})();e.TutorialPopupService=r;var a=(function(){function e(){}return e.Left="left",e.Right="right",e.Top="top",e.Bottom="bottom",e.Center="center",e.LeftTop="leftTop",e})();e.Direction=a;var n=(function(){function e(){}return e.Left="arrowLeft",e.Right="arrowRight",e.Top="arrowTop",e.Bottom="arrowBottom",e})(),s=["modal"],c=[""],l=["non-modal-list-view","non-modal-list-view-visible"],d=(function(){function e(){}return e.toStringArray=function(e){switch(e){case 0:return s;case 1:return c;case 2:return l;default:return c}},e})(),p=(function(){function e(){this.popupContainer=$(e.PopupContainerTemplate),this.overlayContainer=$(e.OverlayContainerTemplate),this.overlayOptions=1,this.destroyed=!1,$(e.PopupParent).append(this.popupContainer),this.popupContainer.append(this.overlayContainer)}return e.prototype.updateOverlaysWithClasses=function(t){if(!this.destroyed&&this.overlayOptions!==t){this.clearOverlayContainer();for(var i=d.toStringArray(t),o=0,r=i;o<r.length;o++){var a=r[o];$(e.OverlayTemplate).addClass(a).appendTo(this.overlayContainer)}this.overlayOptions=t}},e.prototype.clearOverlayContainer=function(){this.overlayContainer.remove(),this.overlayContainer=$(e.OverlayContainerTemplate),this.popupContainer.append(this.overlayContainer)},e.prototype.destroy=function(){this.destroyed=!0,this.overlayContainer.remove(),this.popupContainer.remove()},e.PopupParent="body",e.PopupContainerTemplate='<div class="tutorial-popup-container"></div>',e.OverlayContainerTemplate='<div class="tutorial-popup-overlay-container"></div>',e.OverlayTemplate='<div class="tutorial-popup-overlay"></div>',e})(),u=(function(){function e(e,t,i){this.popupContainer=e,this.attachTo=t,this.options=i,this.createPopup(i)}return e.prototype.createPopup=function(t){var i=this,o=e.PopupTemplate;for(var r in t)"string"==typeof t[r]&&(o=o.replace("{"+r+"}",t[r]));this.popup=$(o);var a=this.popup.find(".icon i");t.iconClass?a.addClass(t.iconClass):a.hide(),t.customClass&&this.popup.addClass(t.customClass),null!=t.imageUrl&&this.popup.find(".image").addClass(e.VisibleClass),null!=t.offset?this.popOffset=t.offset:this.popOffset={left:0,top:0},null!=t.modalButtonClassOverride&&this.popup.find(".ok-btn").addClass(t.modalButtonClassOverride),this.popup.on(e.ElementClickEventName,(function(e){e.stopPropagation()})),$(window).on(e.WindowResizeEventName,(function(){requestAnimationFrame((function(){i.alignPopup()}))})),this.popup.find(".ok-btn").html(t.buttonLabel).on(e.ElementClickEventName,(function(){i.closePopup(!0);var e=t.onButtonClick;e&&"function"==typeof e&&e()}));var n=this.popup.find(".cancel");t.cancelText?n.on(e.ElementClickEventName,(function(){i.closePopup(!0,!0)})):n.remove(),$(e.PopupParentClass).append(this.popup),t.modal?(this.popup.addClass(e.ModalClass),$(e.PopupParentClass).off(e.ElementClickEventName)):this.attachTo().on(e.ElementClickEventName,(function(){i.closePopup(!0)})),t.progressCountText||this.popup.find(".progress-count").remove(),requestAnimationFrame((function(){i.alignPopup()}))},e.prototype.closePopup=function(t,i){void 0===i&&(i=!1),null!=this.popup&&(this.popup.removeClass(e.VisibleClass),this.attachTo().off(e.ElementClickEventName),$(window).off(e.WindowResizeEventName),$(e.PopupParentClass).off(e.ElementClickEventName),this.popup.remove(),this.options.onClose(t,i))},e.prototype.alignPopup=function(){var t=this,i=this.popup,o=this.attachTo();if(null!=i){var r={width:i.outerWidth(),height:i.outerHeight()},n={left:0,top:0,width:$(window).width(),height:$(window).height()},s=n;if(!this.options.modal){if(null==o)return;s=$.extend({width:o.outerWidth(),height:o.outerHeight()},o.offset())}var c=Math.floor(s.left+s.width/2-r.width/2),l=Math.floor(s.top+s.height/2-r.height/2),d=Math.floor(s.left),p=Math.floor(s.top),u=Math.floor(s.left+s.width-r.width+this.popOffset.left),v=Math.floor(s.top+s.height-r.height+e.ArrowSpacing+this.popOffset.top),h=Math.floor(s.left+s.width+e.ArrowSpacing+this.popOffset.left),g=Math.floor(s.top+s.height+e.ArrowSpacing+this.popOffset.top),m=Math.floor(s.left-r.width-e.ArrowSpacing+this.popOffset.left),f=Math.floor(s.top-r.height-e.ArrowSpacing+this.popOffset.top);if(this.options.modal){if(this.tryFitInWindow(a.Center,c,l,r,s,n))return}else{var y=[{direction:a.Left,x:h,y:l},{direction:a.Right,x:m,y:l},{direction:a.Bottom,x:c,y:f},{direction:a.Top,x:c,y:g},{direction:a.Bottom,x:d,y:f},{direction:a.Left,x:h,y:p},{direction:a.Right,x:m,y:p},{direction:a.Top,x:d,y:g},{direction:a.Bottom,x:u,y:f},{direction:a.Left,x:h,y:v},{direction:a.Right,x:m,y:v},{direction:a.Top,x:u,y:g},{direction:a.LeftTop,x:h,y:l+.35*r.height}];this.options.preferredOrientation&&(y=_.sortBy(y,(function(e){return e.direction===t.options.preferredOrientation?0:1})));for(var b=0;b<y.length;++b){var S=y[b];if(this.tryFitInWindow(S.direction,S.x,S.y,r,s,n))return}}this.tryFitInWindow(a.Center,c,0,r,s,n,!0)}},e.prototype.tryFitInWindow=function(t,i,o,r,s,c,l){if(void 0===l&&(l=!1),i>=0&&o>=0&&i+r.width<=c.width&&o+r.height<=c.height||l){this.arrowPosition!==t&&(this.popup.removeClass(this.arrowPosition).addClass(t).css({left:"initial",top:"initial"}),this.arrowPosition=t),this.popup.addClass(e.VisibleClass).css({left:i,top:o});var d=this.popup.find(".arrow");return d.removeAttr("style"),t===a.Left?(d.css({top:Math.floor(s.top+s.height/2-o-e.ArrowSpacing)}),d.addClass(n.Left)):t===a.Top?(d.css({left:Math.floor(s.left+s.width/2-i-e.ArrowSpacing)}),d.addClass(n.Top)):t===a.Right?(d.css({top:Math.floor(s.top+s.height/2-o-e.ArrowSpacing)}),d.addClass(n.Right)):t===a.Bottom?(d.css({left:Math.floor(s.left+s.width/2-i-e.ArrowSpacing)}),d.addClass(n.Bottom)):t===a.LeftTop&&(d.css({top:Math.floor(s.top+s.height/2-(o-.05*r.height)-e.ArrowSpacing)}),d.addClass(n.Left)),this.options.overlayOptions?this.popupContainer.updateOverlaysWithClasses(this.options.overlayOptions):this.options.modal?this.popupContainer.updateOverlaysWithClasses(0):this.popupContainer.updateOverlaysWithClasses(1),!0}return!1},e.PopupParentClass=".tutorial-popup-container",e.ArrowSpacing=20,e.VisibleClass="show",e.ModalClass="modal",e.ElementClickEventName="click.popup",e.WindowResizeEventName="resize.popup",e.PopupTemplate='             <div class="tutorial-popup">                 <div class="box">                     <div class="arrow"></div>                     <div class="icon"><i class="glyphicon glyph-small"></i></div>                     <div class="title">{title}</div>                     <img src="{imageUrl}" class="image"></img>                     <div class="text">{text}</div>                     <div class="progress-count">{progressCountText}</div>                     <div class="ok-btn primary"></div>                     <div class="cancel">{cancelText}</div>                 </div>             </div>',e})()})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,o,r,a,n,s,c){return new i(e,t,o,r,a,n,s,c)}e.createUserSettingsService=t;var i=(function(){function t(e,t,i,o,r,a,n,s){this.telemetryService=e,this.modelConverter=t,this.promiseFactory=i,this.userSettingsHttpService=o,this.errorService=r,this.localizationService=a,this.appMetadataService=n,this.rootScope=s,this.getSettingsDeferred=null,this.forceRefreshOfUserSettings=!1}return t.prototype.getUserSettings=function(){var e=this;return this.getSettingsDeferred||(this.getSettingsDeferred=this.promiseFactory.defer(),this.appMetadataService.getAppMetadata().then((function(t){t.userSettings&&!e.forceRefreshOfUserSettings?(e.getSettingsDeferred.resolve(e.modelConverter.convertUserSettings(t.userSettings)),e.getSettingsDeferred=null):(e.loadUserSettingsFromServer(t),e.forceRefreshOfUserSettings=!1)}),(function(){e.loadUserSettingsFromServer()}))),this.getSettingsDeferred.promise},t.prototype.refreshUserSettings=function(){this.forceRefreshOfUserSettings=!0},t.prototype.getExtendedSettingByKey=function(e){var t=this,i=this.promiseFactory.defer();return this.ensureExtendedSettings().then((function(){i.resolve(t.extendedSettings[e])})),i.promise},t.prototype.getExtendedSettingsByKeys=function(e){var t=this,i=this.promiseFactory.defer();return this.ensureExtendedSettings().then((function(){i.resolve(_.map(e,(function(e){return t.extendedSettings[e]})))})),i.promise},t.prototype.updateExtendedSettings=function(e,t,i){var o=this;return this.ensureExtendedSettings().then((function(){o.extendedSettings[e]=t;var r=JSON.stringify(o.extendedSettings);return o.userSettingsHttpService.updateExtendedSettings(r,i.event).then((function(){i.resolve()}))})).catch((function(e){i.reject()}))},t.prototype.ensureExtendedSettings=function(){var e=this,t=this.promiseFactory.defer();return this.extendedSettings?t.resolve(null):this.getUserSettings().then((function(i){e.extendedSettings=i&&i.extendedSettings?i.extendedSettings:{},t.resolve(null)})),t.promise},t.prototype.loadUserSettingsFromServer=function(t){var i=this,o=this.telemetryService.startEvent(e.telemetry.PrivacyInitializeSettingsModel);this.userSettingsHttpService.getUserSettings(o.event).then((function(e){var r=e.data;t&&(t.userSettings=r),i.getSettingsDeferred.resolve(i.modelConverter.convertUserSettings(r)),i.getSettingsDeferred=null,o.resolve()}),(function(e){i.getSettingsDeferred.reject(),o.reject(),i.getSettingsDeferred=null,i.errorService.error(i.localizationService.get("SettingsGeneral_Error_FailedToLoad"),"SettingsGeneral_Error_FailedToLoad",{requestId:e.requestId,statusCode:e.status.toString()})}))},t.prototype.updateAllowQnaDataCollection=function(t,i){var o=this,r=this.promiseFactory.defer();return this.userSettingsHttpService.updateAllowQnaDataCollection(t,i.event).then((function(){i.resolve(),window.initialDashboardContainer&&window.initialDashboardContainer.userSettings&&(window.initialDashboardContainer.userSettings.allowQnaDataCollection=t),r.resolve(t),o.rootScope.$emit(e.constants.notifyUpdateAllowQnaDataCollectionEventName,t)}),(function(e){i.reject(),r.reject(),o.errorService.error(o.localizationService.get("SettingsGeneral_Error_FailedToSave"),"SettingsGeneral_Error_FailedToSave",{requestId:e.requestId,statusCode:e.status.toString()})})),r.promise},t.prototype.updateEsriSetting=function(e,t){var i=this,o=this.promiseFactory.defer(),r={esriVisualEnabled:e};return this.userSettingsHttpService.updateUserSettings(r,t.event).then((function(){t.resolve(),o.resolve(e)}),(function(e){t.reject(),o.reject(),i.errorService.error(i.localizationService.get("SettingsGeneral_Error_FailedToSave"),"SettingsGeneral_Error_FailedToSave",{requestId:e.requestId,statusCode:e.status.toString()})})),o.promise},t.prototype.updateLanguageSetting=function(e,t){var i=this,o=this.promiseFactory.defer(),r={preferredLanguage:e};return this.userSettingsHttpService.updateUserSettings(r,t.event).then((function(){t.resolve(),o.resolve(e)}),(function(e){t.reject(),o.reject(),i.errorService.error(i.localizationService.get("SettingsGeneral_Error_FailedToSave"),"SettingsGeneral_Error_FailedToSave",{requestId:e.requestId,statusCode:e.status.toString()})})),o.promise},t.prototype.updatePinDialogPreviewTileFormat=function(e,t){var i=this,o=this.promiseFactory.defer(),r={tileDialogPreviewFormat:e};return this.userSettingsHttpService.updateUserSettings(r,t.event).then((function(){t.resolve(),window.initialDashboardContainer&&window.initialDashboardContainer.userSettings&&(window.initialDashboardContainer.userSettings.tileDialogPreviewFormat=e),o.resolve(e)}),(function(e){t.reject(),o.reject(),i.errorService.error(i.localizationService.get("SettingsGeneral_Error_FailedToSave"),"SettingsGeneral_Error_FailedToSave",{requestId:e.requestId,statusCode:e.status.toString()})})),o.promise},t})()})(powerbi||(powerbi={}));var powerbi;!(function(e){var t="zh-hans",i="zh-hant",o="cn",r="zh-TW",a=(function(){function e(){}return e.createIfUndefined=function(){e.Popover||($("body").append(e.PopoverHtml),e.Popover=$(e.PopoverSelector),e.hide(),e.Popover.find(e.FooterSelector).on(jsCommon.DOMConstants.mouseDownEventName,(function(e){e.stopPropagation()})))},e.setFooterText=function(t){e.Popover.find(e.FooterSelector).html(t)},e.show=function(){e.createIfUndefined(),e.Popover.show()},e.hide=function(){e.Popover&&e.Popover.hide()},e.PopoverHtml='<div id="popover"><div id="popovermain"><div class="powerbi-spinner"><div class="spinner"><div class="dots" ><span>&#9679;</span><span>&#9679;</span><span>&#9679;</span><span>&#9679;</span><span>&#9679;</span></div></div></div></div><div class="footer"></div></div>',e.PopoverSelector="#popover",e.FooterSelector=".footer",e})();e.UserVoicePopover=a;var n=(function(){function n(){}return Object.defineProperty(n,"api",{get:function(){return n.updateEventBindings(),window.UserVoice},enumerable:!0,configurable:!0}),n.updateIdentificationInfo=function(){e.session.userInfo&&n.api.push([n.identifyKey,{email:e.session.UserInfoUtils.getEmailAddressForReceivingMail(),display_name:e.session.UserInfoUtils.getFullName(),id:e.session.userInfo.puid}])},n.ensureUserVoice=function(s,c){var l=this;if(!this.serviceLoaded){var d=this.promiseFactory.defer(),p=(new Date).toTimeString();n.loadAPI();var u=e.common.httpService.powerbiRequestOptions();return u.telemetryDescription="GetUserVoiceDetails",e.common.localization.loader.currentLanguageLocale.toLowerCase()===t?n.api.push(["set","locale",o]):e.common.localization.loader.currentLanguageLocale.toLowerCase()===i?n.api.push(["set","locale",r]):n.api.push(["set","locale",e.common.localization.loader.currentLanguageLocale||window.navigator.language||window.navigator.userLanguage]),n.api.push(["set",{accent_color:"#000000"}]),n.api.push(["set","ticket_custom_fields",{ClientSessionID:s.sessionId,TimeZone:p.substring(p.indexOf(" ")+1)}]),n.updateIdentificationInfo(),e.common.httpService.get("/powerbi/metadata/user/userVoiceDetails",u).then((function(t){null!=t.data&&null!=t.data.alternateEmail&&t.data.alternateEmail.length>0&&e.session.userInfo&&(e.session.userInfo.alternateEmail=t.data.alternateEmail),n.updateIdentificationInfo(),l.serviceLoaded=!0,c(),d.resolve({})})),$("body").on(jsCommon.DOMConstants.mouseDownEventName,(function(e){n.onBodyClick(e),a.hide()})),d}c()},n.loadAPI=function(){window.UserVoice||(window.UserVoice=window.UserVoice||[],(function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//widget.uservoice.com/EPlzu5neSTcHV7QTq9luQ.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})())},n.updateEventBindings=function(){window.setTimeout((function(){n.activeWidgets=$(".uv-popover"),n.activeWidgets.on(jsCommon.DOMConstants.mouseClickEventName,(function(e){e.stopPropagation()}))}),250)},n.onBodyClick=function(e){n.activeWidgets&&n.activeWidgets.length>0&&(n.activeWidgets.remove(),n.activeWidgets=null)},n.identifyKey="identify",n.serviceLoaded=!1,n.promiseFactory=e.createJQueryPromiseFactory(),n})();e.UserVoiceService=n})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t){t.models=i(e.models,t.models),t.packages=i(e.packages,t.packages),t.reports=i(e.reports,t.reports),t.workbooks=i(e.workbooks,t.workbooks)}function i(e,t){if(_.isEmpty(e))return t;if(_.isEmpty(t))return e;for(var i={},o=0,r=t.length;o<r;o++){var a=t[o];i[a.id]=a}for(var n=0,s=e.length;n<s;n++){var c=e[n];i[c.id]=c}var l=[];for(var d in i)l.push(i[d]);return l}e.mergeDashboardContainerModelsReportsAndPackages=t})(t=e.contracts||(e.contracts={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.explore.contracts,o=e.explore.viewModels,r=(function(){function t(i,o){var r=this;this.scope=i,this.services=o,this.rtl=this.services.rtl,this.scope.userGroupHeader=new e.models.UserGroupHeaderModel,this.scope.viewModel.isLoaded=!1,this.scope.sortDescending=!1,this.scope.sortProperty="associatedReport.displayName",this.scope.onDeleteEmbedClick=function(e){return r.onDeleteEmbedClick(e)},this.scope.showEmbedCode=function(e){return r.showEmbedCode(e)},this.scope.updateSortProperty=function(e){return r.updateSortProperty(e)},this.loadEmbeddedResources(),this.scope.manageFlyoutStyle=t.ManageFlyoutInactiveStyle,this.scope.toggleFlyout=function(e,t){return r.toggleFlyout(e,t)},i.$on("$destroy",(function(){return r.dispose()})),$(window).on(jsCommon.DOMConstants.keyDownEventName,(function(e){return r.keyDownHideDialog(e)})),$(window).on(jsCommon.DOMConstants.mouseDownEventName,(function(e){return r.mouseDownHideDialog(e)}))}return t.createOptions=function(){return{additionalServices:["reportService","modelService","embedProxy","embed","errorService","modelConverter","localizationService","telemetryService","promiseFactory","modalDialogService","rtl","activeGroupId"]}},t.prototype.deleteEmbed=function(t,o){var r=this,a=_.find(this.scope.viewModel.embeddedResources,(function(e){return e.contract.snapshotId===t&&e.contract.embedType===o})),n=this.services.telemetryService.startEvent(e.telemetry.ManageEmbedDeleteEmbedCode,a.contract.snapshotId,a.contract.embedType,a.contract.disabled);this.deleteEmbedInternal(a).then((function(e){n.resolve();var i=_.findIndex(r.scope.viewModel.embeddedResources,(function(e){return e.contract.snapshotId===t&&e.contract.embedType===o}));r.scope.viewModel.embeddedResources.splice(i,1)}),(function(e){n.reject(),a.contract.embedType===i.EmbedType.Interactive&&r.services.errorService.error("Delete live embed error","DeleteLiveEmbedError",{requestId:e.requestId,statusCode:e.status.toString()})}))},t.prototype.onDeleteEmbedClick=function(e){var t=this,i=this.scope.$new(!0),o=[new InJs.ModalDialogAction(this.services.localizationService.get("ManageEmbed_PublishToWeb_DeleteConfirmationConfirmButtonText"),function(o,r){i.closeDialog(),t.deleteEmbed(e.contract.snapshotId,e.contract.embedType)},null,"confirmation"),new InJs.ModalDialogAction(this.services.localizationService.get("ManageEmbed_PublishToWeb_DeleteConfirmationCloseButtonText"),function(e,t){i.closeDialog()})],r=this.services.localizationService.get("ManageEmbed_PublishToWeb_DeleteConfirmationTitle"),a=this.services.localizationService.get("ManageEmbed_PublishToWeb_DeleteConfirmationMessage");i.viewModel={message:a};var n={dialogCssClass:"embedDeleteDialog",dialogName:r,template:"<confirmation-modal-dialog></confirmation-modal-dialog>",scope:i,dialogActions:o};this.services.modalDialogService.showLegacyWebModalDialog(n)},t.prototype.toggleFlyout=function(e,i){this.scope.manageFlyoutStyle===t.ManageFlyoutActiveStyle?this.scope.manageFlyoutStyle=t.ManageFlyoutInactiveStyle:(this.scope.selectedEmbed=i,this.showDialog(e))},t.prototype.showDialog=function(e){var i=this;if(!this.flyoutElement){var o=this.services.activeGroupId.isReadOnly?t.ManageFlyoutTemplateForReadOnlyMember:t.ManageFlyoutTemplateForNonReadOnlyMember;this.template=angular.element(o),this.flyoutElement=this.services.compile(this.template)(this.scope),this.arrowElement=this.flyoutElement.find(t.ArrowSelector),$("body").append(this.flyoutElement)}var r={left:e.pageX,top:e.pageY},a=e.target,n=a.clientWidth;this.services.timeout((function(){if(r.top-=i.flyoutElement.height()/2-t.PositionOffset.top,r.top=i.adjustPositionTop(r),i.rtl&&i.rtl.isRtlLayout){var e=i.flyoutElement.width();r.left=r.left-(e+t.ArrowWidth)-t.PositionOffset.left,i.arrowElement.addClass(t.rightArrowDirection)}else r.left+=n+t.ArrowWidth+t.PositionOffset.left;i.flyoutElement.css(r),i.scope.manageFlyoutStyle=t.ManageFlyoutActiveStyle}))},t.prototype.adjustPositionTop=function(e){var i=0,o=i+$(document).height()-this.flyoutElement.height();return e.top<i?(this.arrowElement.css({top:e.top+this.flyoutElement.height()/2-i+t.ArrowPositionOffset.top}),i):e.top>o?(this.arrowElement.css({top:e.top+this.flyoutElement.height()/2-o+t.ArrowPositionOffset.top}),o):(this.arrowElement.removeAttr("style"),e.top)},t.prototype.showEmbedCode=function(t){var i=this.scope.$new(!0),r=t.associatedReport.id,a=t.contract,n=a.name,s={name:n,reportId:r,culture:e.common.cultureInfo,size:{height:a.size.height,width:a.size.width},version:e.build},c=this.services.promiseFactory.defer();c.reject(),i.viewModel=o.ViewModelFactory.createEmbedModalDialog(this.services.localizationService,this.services.embed,void 0,s,c.promise,void 0);var l=i.viewModel;l.publishState=4,l.currentEmbed=a;var d=l.embedTab.embed,p=this.services.embed;d.link=p.createEmbedUri(a),d.embedCode=p.createEmbedCode(a);var u={containerCssClass:"small embedContainer",dialogCssClass:"embedDialog",dialogName:null,template:"<embed-modal-dialog></embed-modal-dialog>",scope:i};this.services.modalDialogService.showLegacyWebModalDialog(u)},t.prototype.deleteEmbedInternal=function(e){if(e.contract.embedType===i.EmbedType.Interactive)return this.services.embedProxy.deleteLiveEmbed(e.contract.snapshotId)},t.prototype.loadEmbeddedResources=function(){this.scope.viewModel.isLoaded=!1,this.scope.viewModel.embeddedResources=[],this.loadAllEmbeds()},t.prototype.loadAllEmbeds=function(){var t=this,i=this.services.telemetryService.startEvent(e.telemetry.ManageEmbedLoadAllLiveEmbeddedResources);this.services.embedProxy.getLiveEmbeds().then((function(e){i.resolve(),t.processAllEmbeddedResources(e),t.scope.viewModel.isLoaded=!0}),(function(e){i.reject(),t.scope.viewModel.isLoaded=!0,t.services.errorService.error(t.services.localizationService.get("ManageEmbed_ErrorMessage_FailedGetLiveEmbeds"),"FailedGetLiveEmbedForReport",{requestId:e.requestId,statusCode:e.status.toString()});
}))},t.prototype.processAllEmbeddedResources=function(e){for(var t=this,i=0,o=e.length;i<o;i++){var r=this.services.reportService.findReport(e[i].reportId);r.model=r.model||this.services.modelService.findModel(r.modelId,r.packageId);var a=this.services.modelConverter.convertEmbedToEmbeddedResource(e[i],r);this.services.localizationService.ensureLocalization((function(){a.embedType=t.services.localizationService.get(a.embedTypeLocalizationKey),a.status=t.services.localizationService.get(a.statusLocalizationKey),t.scope.viewModel.embeddedResources.push(a)}))}},t.prototype.mouseDownHideDialog=function(e){var i=this;this.clickOutsideFlyout(e)&&this.scope.$apply((function(){i.scope.manageFlyoutStyle=t.ManageFlyoutInactiveStyle}))},t.prototype.keyDownHideDialog=function(e){var i=this;this.scope.manageFlyoutStyle===t.ManageFlyoutActiveStyle&&e.keyCode===jsCommon.DOMConstants.escKeyCode&&this.scope.$apply((function(){i.scope.manageFlyoutStyle=t.ManageFlyoutInactiveStyle}))},t.prototype.clickOutsideFlyout=function(e){var i=e.pageX,o=e.pageY;if(this.flyoutElement&&this.scope.manageFlyoutStyle===t.ManageFlyoutActiveStyle){var r=this.flyoutElement.offset(),a=r.left,n=r.top,s=a+this.flyoutElement.width(),c=n+this.flyoutElement.height();return a>i||i>s||n>o||o>c}return!1},t.prototype.dispose=function(){this.flyoutElement&&this.flyoutElement.remove(),$(window).off(jsCommon.DOMConstants.keyDownEventName,this.keyDownHideDialog),$(window).off(jsCommon.DOMConstants.mouseDownEventName,this.mouseDownHideDialog)},t.prototype.updateSortProperty=function(e){this.scope.sortProperty===e?this.scope.sortDescending=!this.scope.sortDescending:(this.scope.sortProperty=e,this.scope.sortDescending=!1)},t.ArrowWidth=28,t.ArrowPositionOffset={left:0,top:-10},t.ArrowSelector=".wrapper .arrow",t.ManageFlyoutActiveStyle="active",t.ManageFlyoutInactiveStyle="inactive",t.rightArrowDirection="right",t.PositionOffset={left:-22,top:0},t.GetCodeTemplate="<div class='action alignIcon'><i class='glyphicon glyph-small pbi-glyph-code'></i><a href='' localize='ManageEmbed_CodeText' ng-click='showEmbedCode(selectedEmbed)'></a></div>",t.DeleteTemplate="<div class='alignIcon'><i class='glyphicon glyph-small pbi-glyph-delete'></i><a href='' localize='ManageEmbed_DeleteText' ng-click='onDeleteEmbedClick(selectedEmbed)'></a></div>",t.ManageFlyoutTemplate="<div class='manageFlyout active' ng-class='manageFlyoutStyle'><div class='wrapper'><div class='arrow'></div><div class='manageFlyout-container'>{0}</div></div></div>",t.ManageFlyoutTemplateForReadOnlyMember=jsCommon.StringExtensions.format(t.ManageFlyoutTemplate,t.GetCodeTemplate),t.ManageFlyoutTemplateForNonReadOnlyMember=jsCommon.StringExtensions.format(t.ManageFlyoutTemplate,t.GetCodeTemplate+"<br/>"+t.DeleteTemplate),t})();t.ManageEmbedView=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.explore.infonav.services.VisualState,o=e.common.helpers.ModelConverterHelper,r=(function(){function t(e,t){this.scope=e,this.services=t,this.initialize(this.scope.viewModel)}return t.createOptions=function(){return{additionalServices:["localizationService","modelConverter","modelService","navigation","storageUsageService","userSettingsService","featureSwitchService","dashboardDataService","rtl"],scopedServiceRoot:!0}},t.prototype.initialize=function(t){var r=this,a=!t||!t.models;if(a&&this.services.navigation.inQnaView()){var n=this.services.dashboardDataService.activeDashboard,s=this.services.dashboardDataService.activeDashboardModels;n&&s?(this.scope.viewModel.models=s,this.scope.viewModel.title=n.displayName):this.unregisterDashboardContainerWatch=this.services.rootScope.$on(e.constants.dashboardContainerLoaded,(function(){var e=r.services.dashboardDataService.activeDashboard,t=r.services.dashboardDataService.activeDashboardModels;r.scope.viewModel.models=t,r.scope.viewModel.title=e.displayName}))}else a&&this.services.navigation.inQnaModelView()&&this.services.modelService.modelsPromise.then((function(e){var t=r.services.navigation.currentDatasetDBName,i=_(e).filter((function(e){return e.dbName===t})).map((function(e){return e.contract})).value();r.scope.viewModel.models=i,r.scope.viewModel.title=i[0].displayName}));this.scope.questionBoxOutput={utterance:"",showQnaFeedback:!1,showPinButton:!1,interpretUtterance:null,updateUtteranceWithoutInterpret:null,clearQuestionBox:null,showUserFeedbackDialog:null},this.scope.newQnaEnabled=!this.services.rtl.isRtlLayout,this.scope.getAdditionalODataFilter=function(){return r.services.navigation.additionalODataFilter},this.scope.pinQnAVisual=function(e){return r.pinQnAVisual(e)},this.scope.showQnaStart=function(){return r.showQnaStart()};var c=this.scope.navigation=this.services.navigation,l={getInitialVisualState:function(){return i.QnaStart},setInterpretListener:function(e){r.scope.infoNavContainerInterpretListener=e},updatePinIconState:function(e){r.scope.pinIconState=e},setUtteranceText:function(e){r.scope.questionBoxOutput.updateUtteranceWithoutInterpret(e)}};this.scope.infoNavHostService=l,this.scope.allowQnaDataCollection=!1,this.services.userSettingsService.getUserSettings().then((function(e){e&&(r.scope.allowQnaDataCollection=e.allowQnaDataCollection)}));var d=this.services.rootScope.$on(e.constants.notifyUpdateAllowQnaDataCollectionEventName,(function(e,t){e.stopPropagation(),e.preventDefault(),r.scope.allowQnaDataCollection=t}));if(this.scope.$watch("viewModel.models",(function(e){if(e){var t=r.services.featureSwitchService.featureSwitches;r.scope.modelsSupportQna=_.some(e,(function(e){return o.getIsQnaSupported(e,t)}))}})),c.qnaQuery)var p=this.scope.$watch("questionBoxOutput.interpretUtterance",(function(e){e&&(e(c.qnaQuery),r.watchUtteranceForNavigation(),p())}));else this.watchUtteranceForNavigation();this.services.localizationService.ensureLocalization((function(){r.scope.unsupportedModelMessage=r.services.localizationService.get("QnAVisualization_UnsupportedModelTitleText")})),this.scope.$on("$destroy",(function(){d(),r.unregisterDashboardContainerWatch&&r.unregisterDashboardContainerWatch()}))},t.prototype.watchUtteranceForNavigation=function(){var t=this.services.navigation;this.scope.$watch("questionBoxOutput.utterance",(function(i){t.inQnaModelView()||t.inQnaView()?t.showQnaView(i,e.services.LocationOptions.Replace,!1):_.isEmpty(i)||(t.qnaQuery||"")===(i||"")||t.showQnaView(i,e.services.LocationOptions.True,!1)}))},t.prototype.pinQnAVisual=function(t){t.stopPropagation(),this.services.rootScope.$emit(e.explore.infonav.constants.pinSelectedVisual)},t.prototype.showQnaStart=function(){var t=this.services.navigation;t.showQnaStart(t.inQnaStartView()?e.services.LocationOptions.Replace:e.services.LocationOptions.True)},t})();t.QnaContainerController=r})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.services.FullScreenFitStyle,o=(function(){function t(o,r){var a=this;this.restrict="E",this.templateUrl="views/fullScreenControls.html",this.replace=!0,this.scope={},this.link=function(o,r,n){var s=-1,c=function(){s!==-1&&(window.clearTimeout(s),r.addClass(t.TransitioningCSSClass)),s=window.setTimeout((function(){s=-1,r.removeClass(t.TransitioningCSSClass)}),t.ControlDisplayTimeInMs)},l=function(e){o.$applyAsync((function(){return e.keyCode===jsCommon.DOMConstants.escKeyCode?void(a.fullScreen.fullScreenMode=!1):void(a.navigation.inDashboardDetailView()&&e.keyCode===jsCommon.DOMConstants.sKeyCode?o.toggleFitContent():a.navigation.inDashboardDetailView()&&e.keyCode===jsCommon.DOMConstants.wKeyCode?o.toggleFitWidth():a.navigation.inReportDetailView()&&(e.keyCode===jsCommon.DOMConstants.leftArrowKeyCode?a.fullScreen.fullScreenPreviousPage():e.keyCode===jsCommon.DOMConstants.rightArrowKeyCode&&a.fullScreen.fullScreenNextPage()))}))};o.toggleFitContent=function(){a.fullScreen.fitStyle=a.fullScreen.fitStyle!==i.FitToContent?i.FitToContent:i.None},o.toggleFitWidth=function(){a.fullScreen.fitStyle=a.fullScreen.fitStyle!==i.FitToWidth?i.FitToWidth:i.None},o.print=function(){return window.print()},o.exitFullScreen=function(){return a.fullScreen.fullScreenMode=!1},o.fullScreen=a.fullScreen,o.navigation=a.navigation,o.$watch("fullScreen.fullScreenMode",(function(e,t){e?(c(),$(document).on("mousemove",c),$(document).on("keydown",l)):($(document).off("mousemove",c),$(document).off("keydown",l))})),o.$on(e.common.constants.scopeDestroyEventName,(function(){$(document).off("mousemove",c),$(document).off("keydown",l)}))},this.fullScreen=o,this.navigation=r}return t.TransitioningCSSClass="transitioning",t.ControlDisplayTimeInMs=1500,t})();t.FullScreenControls=o})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/manageEmbedView.html",this.scope={viewModel:"=",dashboardContainer:"="},this.replace=!0,this.controller=e.common.Services.createController(e.controllers.ManageEmbedView)}return t})();t.ManageEmbedView=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.templateUrl="views/qna/qnaContainer.html",this.replace=!0,this.scope={viewModel:"=",collapsiblePaneMode:"="},this.controller=e.common.Services.createController(e.controllers.QnaContainerController)}return t})();t.QnaContainer=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e})();e.ManageEmbedViewModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e){this.contract=e}return e})();e.QnaContainer=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={})),angular.module("powerbi").run(["$templateCache",function(e){e.put("views/bottomBar.html",'<div class="bottomBar" ng-hide="context.activeView === 2"><div class="dashboardConnectionsContainer"><dashboard-connections-dialog context="context.dashboardConnections"/></div><div class="dashboardConnectionsBtn unselectable" id="dashboardConnectionsBtn" ng-click="context.dashboardConnections.visible = !context.dashboardConnections.visible"><span localize="Landing_DashboardConnectionsButtonText"></span> <span>{{context.dashboardConnections.dashboardConnectionsCount}}</span><i class=\'ms-Icon ms-Icon--alert warningIcon\' ng-hide="!context.dashboardConnections.error"></i></div></div>'),e.put("views/collapsiblePane.html",'<div class="collapsiblePane" ng-class="{expanded: viewModel.isExpanded, hidden: !viewModel.isExpanded, smallWidth:viewModel.expandedWidth===1, mediumWidth:viewModel.expandedWidth===2, largeWidth:viewModel.expandedWidth===3}"><div class="innerLayout"><div class="contentFrameHost" ng-transclude></div><div class="expandButtonContainer"><div class="expanderBtn" ng-click="togglePane()" ng-hide="isExpanderHidden === true" localize-tooltip="ActivityPane_Tooltip"><i class="expandIcon glyphicon pbi-glyph-chevronleftmedium glyph-micro"></i></div></div></div></div>'),e.put("views/contentProviderDialog.html",'<div class="contentProviderDialogFrame" ng-show="showIFrame"><div class="loading"><spinner class="large centered"></spinner></div><iframe name="contentProviderDialogFrame" class="contentProviderDialogFrame" sandbox="allow-scripts allow-popups allow-same-origin allow-forms"></iframe><div ng-include src="customConfigurationHandler" ng-if="customConfigurationHandler"></div></div>'),e.put("views/contentProviderLocalFile.html",'<div class="tileContainer localFile"><excel-upload-format ng-if="shouldChooseFormat"></excel-upload-format><div id="loadingId" class="loading" ng-click="$event.stopPropagation()"><div class="content"><div class="information"><div class="title"><span ng-attr-title="{{uploadingMessage}}">{{uploadingMessage}}</span></div><spinner class="large"></spinner></div> <button class="primary" ng-click="closeLoadingDialog()" localize="GetData_Cancel"></button></div></div></div>'),e.put("views/contextMenu.html",'<div class="contextMenu" ng-class="contextMenuStyle"><div class="wrapper" ng-class="::arrowDirection"><div class="arrow"></div><dropdown-list><div class="metadata-container"><div ng-bind="context.source.displayName" class="title trimmedTextWithEllipsis" title="{{context.source.displayName}}"></div><div ng-click="close()" class="close-btn"><i class="glyphicon pbi-glyph-close glyph-mini"></i></div><div ng-repeat="metadata in context.metadata" class="metadata"><h6 class="metadataLabel" ng-bind="metadata.label"></h6><div ng-if="metadata.type === 0"> <span class="message">{{metadata.value()}}</span><span ng-if="metadata.infoTooltipConfig" class="glyphicon glyph-mini pbi-glyph-info tooltipIcon" tooltip tooltip-config="::metadata.infoTooltipConfig"></span></div><div ng-if="metadata.type === 2"> <span>{{ metadata.value() }}</span> <a ng-bind-attr="{href: metadata.linkUrl(), title: metadata.linkTitle() || metadata.linkText(), target: metadata.linkTarget}">{{ metadata.linkText() }}</a></div><div ng-if="metadata.type === 3"><span class="refreshFlyoutWarning" ng-if="metadata.isWarning == true"><i class="glyphicon pbi-glyph-error glyph-mini"></i></span> <a class="refreshHistory" href="" ng-click="metadata.actionOnClick();close();">{{metadata.value()}}</a></div><div ng-if="metadata.type === 4"><div ng-switch="metadata.status"><div ng-switch-when="0"><span class="glyphicon glyph-small pbi-glyph-error statusIcon"></span><span class="statusText" ng-bind="metadata.value"></span></div><div ng-switch-when="1"><span class="glyphicon glyph-small pbi-glyph-success glyph-success-color statusIcon"></span><span class="statusText" ng-bind="metadata.value"></span></div></div></div></div><hr/></div><dropdown-list-item ng-repeat="button in context.actions" class="contextMenuButton trimmedTextWithEllipsis" ng-click="button.action();close();"> <a ng-if="button.link" href="{{button.link}}" target="_blank" title="{{button.text}}">{{::button.text }}</a><span ng-if="!button.link" title="{{button.text}}" ng-bind="button.text"></span></dropdown-list-item></dropdown-list></div></div>'),e.put("views/dashboard.html",'<div class="dashboard" dashboard-printer><pbi-data-loader-spinner class="centered" ng-if="!viewModel.isLoaded && !isGroupTransitionDelayed && !showReloadDashboard"></pbi-data-loader-spinner><div class="error" ng-if="!viewModel.isLoaded && showReloadDashboard"><i class="glyphicon pbi-glyph-error glyph-large"></i><h3 localize="DashboardTilesLoadError_Title"></h3><span class="tileLoadErrorMessage" localize="DashboardTilesLoadError_Message1" localize-fragments><a fragment-index="0" href="https://support.powerbi.com" target="_blank" localize="DashboardTilesLoadError_Message2"></a><span fragment-index="1" localize="DashboardTilesLoadError_Message3"/></span> <button class="biButton primary" ng-click="reloadActiveDashboard()" localize="DashboardTilesLoadError_Reload"></button></div><ul class="tileContainer" ng-show="!showReloadDashboard" grid-layout id="dashboard{{viewModel.id}}"><dashboard-tile ng-repeat="tile in filteredTiles() track by tileTrackerFn(tile)" view-model="tile" can-edit="viewModel.canEdit && !permissionService.isActiveWorkspaceIsReadOnly && !fullScreen.fullScreenMode" disable-pointer-events="{{::disablePointerEvents}}" grid-layout-item grid-layout-container="gridLayoutContainer" ng-repeat-finish-event="dashboardTileRepeatFinished" remove-tile-from-mobile-view="removeTileFromMobileView(tile)" in-edit-mobile-layout-mode="inEditMobileLayoutMode"></dashboard-tile></ul></div>'),e.put("views/dashboardContainer.html",'<div class="dashboardContainerView isNavigationPaneEnabled" ng-class="{isMainContentDisabled: collapsiblePaneMode !== 0 || showDashboardTileErrors,                isDashboardHeaderEnabled: showDashboardTileErrors,                isSelectedTileHighlighted: collapsiblePaneMode === 1 || collapsiblePaneMode === 7 || collapsiblePaneMode === 9 || showDashboardTileErrors,                qnaMode: navigation.inQnaView() || navigation.inQnaStartView(),                isQuestionBoxHidden: !shouldDisplayQuestionBox}" ng-switch="getViewState()"><div class="mainContent" ng-switch-when="0"><div class="header" ng-cloak><div class="dashboardAppBar appBar"><div class="appBarSection left" ng-switch="refreshState"><ul ng-if="showBreadcrumb"><li class="label groupLabel" ng-if="conceptualModelEnabled()"> <button class="activeDashboardLabel appBarTitle" title="{{groupService.activeGroup.displayName}}" ng-click="navigateToContentList()">{{groupService.activeGroup.displayName}}</button></li><li class="breadcrumbLabel" ng-if="conceptualModelEnabled()"><i class="glyphicon pbi-glyph-arrowright glyph-small"></i></li><li class="label" ng-class="{breadCrumbEnabled: conceptualModelEnabled()}"> <span class="activeDashboardLabel appBarTitle" title="{{dashboardDataService.displayName}}">{{dashboardDataService.displayName}}</span><i ng-hide="dashboardDataService.activeDashboard.canEdit && !permissionService.isActiveWorkspaceIsReadOnly && !fullScreen.fullScreenMode" class="readonlyIcon glyphicon pbi-glyph-lock glyph-mini"></i></li><li class="label dataClassificationSection"><data-classification-label data-classification-id="dashboardDataService.activeDashboard.dataClassificationId"></data-classification-label></li></ul><section class="notification" ng-switch-when="1"><spinner modern></spinner><span class="notificationText" localize="DashboardContainer_RefreshInProgress"></span></section><section class="notification" ng-switch-when="2"><span class="glyphicon glyph-small pbi-glyph-success icon"></span><span class="notificationText" localize="DashboardContainer_RefreshCompleted"></span></section></div><div class="appBarSection right"><ul class="optionsMenu"><li ng-if="showAddTileButton() && !viewModel.isPhonePortraitViewMode"> <button ng-click="showTileGalleryPane()" localize-tooltip="DashboardAppBar_AddTile"><i class="glyphicon pbi-glyph-add icon smallIcon"></i><span class="appBarMenuItem" localize="DashboardAppBar_AddTile"></span></button></li><li ng-if="favoriteEnabled && !dashboardDataService.activeDashboard.isFavorite && !viewModel.isPhonePortraitViewMode"> <button ng-click="addDashboardFavorite()" ng-disabled="dashboardDataService.activeDashboard.id < 0 || dashboardDataService.activeDashboard.isFavoriteDisabled" class="addFavorite" localize-tooltip="Artifact_Favorite"><i class="powervisuals-glyph star-empty glyph-small icon"></i><span class="appBarMenuItem" localize="Artifact_Favorite"></span></button></li><li ng-if="favoriteEnabled && dashboardDataService.activeDashboard.isFavorite && !viewModel.isPhonePortraitViewMode"> <button ng-click="deleteDashboardFavorite()" ng-disabled="dashboardDataService.activeDashboard.isFavoriteDisabled" class="deleteFavorite" localize-tooltip="Artifact_UnFavorite"><i class="powervisuals-glyph star-full glyph-small icon"></i><span class="appBarMenuItem" localize="Artifact_UnFavorite"></span></button></li><li> <button ng-click="navigation.showShareSlider(navigation.currentDashboardGUID, navigation.currentGroupGUID)" class="shareDashboardButton" localize-tooltip="ReportAppBar_ShareButton" ng-if="sharingEnabled() && !viewModel.isPhonePortraitViewMode"><i class="glyphicon pbi-glyph-share glyph-small icon"></i><span class="appBarMenuItem" localize="ReportAppBar_ShareButton"></span></button></li><li ng-if="viewModel.isPhonePortraitViewMode"> <button ng-click="resetPhoneView()" localize-tooltip="Dashboard_Authoring_Reset_Phone_View"><i class="glyphicon pbi-glyph-tvmonitor glyph-small icon"></i><span class="appBarMenuItem" localize="Dashboard_Authoring_Reset_Phone_View"></span></button></li><li ng-if="viewModel.isPhonePortraitViewMode"> <button ng-click="unpinAllTiles()" ng-disabled="!shouldShowUnpinTiles()" localize-tooltip="Phone_Authoring_Clear_All_Tiles"><i class="glyphicon pbi-glyph-unpin glyph-small icon"></i><span class="appBarMenuItem" localize="Phone_Authoring_Clear_All_Tiles"></span></button></li><li ng-if="viewModel.isPhonePortraitViewMode"> <button ng-click="resetTiles()" localize-tooltip="Dashboard_Authoring_Reset_Tiles"><i class="glyphicon pbi-glyph-undo glyph-small icon"></i><span class="appBarMenuItem" localize="Dashboard_Authoring_Reset_Tiles"></span></button></li><li class="moreOptionsItem"> <button id="optionsBtn" class="moreOptionsDashboardButton" dropdown-overlay-invoke="moreOptionsMenu" ng-if="showMoreOptionsMenu()" localize-tooltip="Options_Menu" prefer-left="true" need-blur="true"><i class="glyphicon glyph-small pbi-glyph-more"></i></button></li><dropdown-overlay dropdown-overlay-name="moreOptionsMenu" dropdown-overlay-class="angular-dropdown override-box-shadow"><dropdown-menu-items id="moreOptionsItem" dropdown-items="moreOptionsMenu" dropdown-class="additionalMenus active" dropdown-on-item-selected="moreOptionsMenuSelected(selected)"></dropdown-menu-items></dropdown-overlay></ul> <span class="dashboardTileErrors trimmedTextWithEllipsis" ng-if="dashboardTileErrorCount>0"><div class="badge mini-label" ng-bind="dashboardTileErrorCount" ng-click="showTileErrorDetails()"></div><i class="glyphicon glyph-small pbi-glyph-warning" ng-click="showTileErrorDetails()"></i><span class="errorMessage"><span localize="DashboardAppBar_TileError"></span><span class="errorToggle" ng-switch="showDashboardTileErrors" ng-click="toggleTileError()"><span ng-switch-when="true" localize="DashboardAppBar_TileError_HideErrors"></span><span ng-switch-when="false" localize="DashboardAppBar_TileError_ShowErrors"></span></span></span></span></div></div><div class="qnaAppBar appBar" ng-if="navigation.inQnaView() || navigation.inQnaStartView()"><div class="appBarSection left"><ul><li> <button ng-click="navigation.navigateToDashboardByGUID(dashboardDataService.activeDashboard.objectId)"><i class="glyphicon pbi-glyph-pageleft glyph-small backBtn"></i> <span class="activeDashboardLabel appBarTitle displayOnSmallScreen">{{dashboardDataService.displayName}}</span></button></li></ul></div></div><div class="dashboardFullScreenTitle"> {{viewModel.displayName}}</div><div class="dashboardControlsWrapper" ng-cloak ng-if="shouldDisplayQuestionBox && !viewModel.isPhonePortraitViewMode" ng-switch="newQnaEnabled"><div class="legacyQnaWrapper" ng-switch-when="false"><div class="qnaQuestionBoxWrapper"><question-box-container get-additional-o-data-filter="getAdditionalODataFilter" interpret-listener="infoNavContainerInterpretListener" output="questionBoxOutput" usage-reporting-enabled="allowQnaDataCollection" models="dashboardDataService.activeDashboardModels"></question-box-container><span ng-if="dashboardDataService.activeDashboardContainsQnaSupportedModel" class="qnaStart smallFontSize"><a ng-click="showQnaStart()" localize="QnaStart_EntryLink"></a></span></div><section class="infoNavActions"><span ng-if="pinIconState.visible" ng-switch="!!pinIconState.enabled"><span id="pinVisualBtn" class="in_navigationBtn infoNavActionItem" localize-tooltip="PinVisual_ToolTip" ng-click="pinQnAVisual($event)" ng-switch-when="true"><i class="glyphicon pbi-glyph-pinned pinButton"></i></span><span id="pinVisualBtn" class="in_navigationBtn infoNavActionItem infoNavActionItemDisabled" localize-tooltip="PinVisual_DisabledForReportPagesToolTip" ng-switch-when="false"><i class="glyphicon pbi-glyph-pinned pinButton"></i></span></span><span id="userFeedbackBtn" class="in_navigationBtn infoNavActionItem" ng-if="questionBoxOutput.showQnaFeedback" localize-tooltip="UtteranceFeedbackTooltip" ng-click="questionBoxOutput.showUserFeedbackDialog()"><i class="glyphicon pbi-glyph-flag"></i></span></section></div><qna-input-launcher ng-switch-when="true" ng-if="dashboardDataService.activeDashboardContainsQnaSupportedModel" models="dashboardDataService.activeDashboardModels" show-qna="showQna"></qna-input-launcher></div></div><div class="dashboardSliderMain fillAvailableSpace" id="paneContainer" ng-class="{dashboardViewSliderPhoneMode: viewModel.isPhonePortraitViewMode}"><div class="infoNavVisualizationModeView" ng-if="(navigation.inQnaView() || navigation.inQnaStartView()) && !newQnaEnabled"><info-nav-container host-service="infoNavHostService" interpret-utterance="questionBoxOutput.interpretUtterance" interpret-listener="infoNavContainerInterpretListener" models="dashboardDataService.activeDashboardModels" questionBoxOutput="questionBoxOutput" usage-reporting-enabled="allowQnaDataCollection" get-additional-o-data-filter="getAdditionalODataFilter"></info-nav-container></div><ng-switch on="viewModel.viewMode"><dashboard-edit-mobile-display ng-switch-when="1" view-model="viewModel.dashboardEditMobileDisplay"></dashboard-edit-mobile-display><div class="dashboardModeView" ng-switch-default><div class="dashboardViewSlider"><dashboard disable-tile-ease-in="true" view-model="dashboardDataService.activeDashboard" display-layout="0" is-group-transition-delayed="groupService.isGroupTransitionDelayed"></dashboard></div></div></ng-switch></div></div><water-mark-message config="errorMessageConfig" ng-switch-when="1"></water-mark-message><request-dashboard-access ng-switch-when="2"></request-dashboard-access></div>'),e.put("views/devToolsView.html",'<div class="devToolsView"><title-bar></title-bar><dev-tools-main-container></dev-tools-main-container></div>'),e.put("views/excelUploadFormat.html",'<div class="excelContent"><div class="uploadFormat"><header><h1 class="title" localize="UploadExcelLocalFile_ChooseFormat"></h1><div class="text" localize="UploadExcel_ChooseFormatDescription"></div></header><table class="contentContainer"><tr class="contentItem"><td class="optionColumn"><div class="imageContainer"><div class="importDataIntoPowerBI"></div></div></td><td></td><td class="optionColumn"><div class="imageContainer"><div class="viewExcelInPowerView"></div></div></td></tr><tr class="spacer"></tr><tr class="contentItem"><td class="optionColumn"><span class="contentItemTitle" localize="UploadExcel_ChooseFormat_ImportData"></span></td><td class="seperatorColumn"><span class="contentItemTitle" localize="UploadExcel_ChooseFormat_Or"></span></td><td class="optionColumn"><span class="contentItemTitle" localize="UploadExcelLocalFile_ChooseFormat_ViewExcel"></span></td></tr><tr class="contentItem"><td class="optionColumn"><div class="contentItemDescription"><span localize="UploadExcelLocalFile_ChooseFormat_ImportDataDescription"></span></div></td><td></td><td class="optionColumn"><div class="contentItemDescription"><span localize="UploadExcelLocalFile_ChooseFormat_ViewExcelDescription"></span></div></td></tr><tr class="contentItem"><td class="optionColumn"><div class="contentBtnItem"> <button class="buttonProviderFormat submitBtn BigBtn importDataBtn" ng-click="chooseFormat(0)" ng-disabled="inProgress"><span localize="UploadExcel_ChooseFormat_Import"></span><i class="arrow glyphicon pbi-glyph-getdata glyph-small getDataIcon"></i></button></div></td><td></td><td class="optionColumn"><div class="contentBtnItem"> <button class="buttonProviderFormat submitBtn BigBtn viewExcelBtn" ng-click="chooseFormat(1)" ng-disabled="inProgress"><span localize="UploadExcelLocalFile_ChooseFormat_Upload"></span><i class="arrow glyphicon pbi-glyph-getdata glyph-small getDataIcon"></i></button></div></td></tr></table></div></div>'),e.put("views/explorationContainer.html",'<div class="explorationContainer explorationWithChrome" ng-class="{\'editing\' : (viewModeState.getMode() === 1 || viewModeState.getMode() === 2),    \'reading\': viewModeState.getMode() === 0}"><exploration-app-bar ng-if="viewModel.options.showAppBar" view-model="viewModel"></exploration-app-bar><div class="explorationHost" ng-class="{ \'explorationHostNoAppBar\': !viewModel.options.showAppBar }"><exploration-host view-model="viewModel" id="pvExplorationHost"><task-pane view-model="viewModel.taskPane" ng-if="viewModeState.getMode() === 1 || viewModeState.getMode() === 2" field-list-config="::fieldListConfig" ng-show="viewModel.options.showTaskPane" resizable resizable-containerid="pvExplorationHost" resizable-sibling="visualizationPane" resizable-expanded="{{viewModel.taskPane.isPaneExpanded}}" resizable-default-width="180" resizable-min-width="180" resizable-max-width="420" resizable-collapsed-width="32"></task-pane><visualization-pane view-model="viewModel.visualizationPane" ng-show="isVisualizationPaneVisible()" resizable resizable-containerid="pvExplorationHost" resizable-sibling="taskPane" resizable-expanded="{{viewModel.visualizationPane.isPaneExpanded}}" resizable-default-width="180" resizable-min-width="180" resizable-max-width="420" resizable-collapsed-width="32"></visualization-pane><div class="horizontalItemsContainer"><exploration view-model="viewModel.exploration" ng-class="{\'exploreCanvasToBottom\': !isFooterVisible()}" canvas-options="canvasOptions"></exploration><exploration-footer ng-show="isFooterVisible()" view-model="viewModel"></exploration-footer></div></exploration-host></div><div class="explorationMask" ng-if="viewModel.showMask"><div class="centeredSpinner"><spinner></spinner></div></div><div class="canvasSpinnerBackground" ng-if="viewModel.showSpinner"><pbi-data-loader-spinner class="centered"></pbi-data-loader-spinner></div></div>'),e.put("views/favoritesContainer.html",'<div class="favoriteContainerView isNavigationPaneEnabled" ng-class="{isMainContentDisabled: collapsiblePaneMode !== 0}"><div class="mainContent"><div class="header" ng-cloak><div class="dashboardAppBar appBar" feature-switch-not="breadcrumbNavigationEnabled"><div class="appBarSection left"><ul><li class="label"><span class="appBarTitle" localize="Favorites_FavoritesTitle"></span></li></ul></div></div></div><div class="dashboardSliderMain" ng-class="{noFavorites: favoritesContainerCtrl.viewModel.length <= 0}" feature-switch-class="breadcrumbNavigationEnabled"><pbi-data-loader-spinner class="centered" ng-if="!favoritesContainerCtrl.viewModel"></pbi-data-loader-spinner><div class="galleryContainer favoritesGallery"><content-tile-container tiles="favoritesContainerCtrl.viewModel" disable-lazy-loading="true" collapsible-pane-mode="favoritesContainerCtrl.collapsiblePaneMode"></content-tile-container></div><div class="emptyFavorites noselect"><div class="empty-favorites-img"></div><div class="noFavTitle" localize="Favorites_NoFavoritesTitle"></div><div class="noFavMessage" localize="Favorites_NoFavoritesMessage1"></div><i class="glyphicon pbi-glyph-favoritestar glyph-small"></i><div class="noFavMessage" localize="Favorites_NoFavoritesMessage2"></div></div></div></div></div>'),e.put("views/fullScreenControls.html",'<div class="fullScreenBtnHost"><div ng-if="fullScreen.fullScreenMode"> <button class="fullScreenBrowserBack floatingViewBtn" localize-tooltip="Back_In_Browser" ng-click="navigation.navigateBack()"><i class="glyphicon pbi-glyph-pageleft"></i><span localize="FullScreen_Back"></span></button><span ng-if="navigation.inReportView() || navigation.inDatasetView()"><span class="floatingViewDivider"></span> <button class="fullScreenPrevious floatingViewBtn" localize-tooltip="Previous_Report_Page" ng-click="fullScreen.fullScreenPreviousPage()"><i class="glyphicon pbi-glyph-chevronleftmedium"></i></button> <button class="fullScreenNext floatingViewBtn" localize-tooltip="Next_Report_Page" ng-click="fullScreen.fullScreenNextPage()"><i class="glyphicon pbi-glyph-chevronrightmedium"></i></button></span><span class="floatingViewDivider"></span> <button class="printBtn floatingViewBtn" localize-tooltip="FullScreen_Print" ng-click="print()"><i class="glyphicon pbi-glyph-print"></i></button> <button class="fitContentBtn floatingViewBtn" localize-tooltip="FullScreen_FitToScreen" ng-if="navigation.inDashboardView()" ng-click="toggleFitContent()"><i class="glyphicon pbi-glyph-fittopage"></i></button> <button class="fitWidthBtn floatingViewBtn" localize-tooltip="FullScreen_FitToWidth" ng-if="navigation.inDashboardView()" ng-click="toggleFitWidth()"><i class="glyphicon pbi-glyph-fittowidth"></i></button> <button class="exitFullScreenBtn floatingViewBtn" ng-click="exitFullScreen()" localize-tooltip="FullScreen_Exit"><i class="glyphicon pbi-glyph-fullscreenexit"></i></button></div></div>'),
e.put("views/groupNavigationPaneListItem.html",'<li class="navPaneListItem" ng-right-click="showContextMenuIfEnabled()" ng-class="{selected: selected === true, active: showContextMenu === true}" data-id="{{::viewModel.id}}"><div class="navPaneItemIcon" ng-switch on="model.icon"><div ng-switch-when="3" class="groupsListItemIcon defaultGroupIcon"></div><div ng-switch-when="4" class="groupsListItemIcon groupsUserPhoto" ng-style="userPhoto ?{\'background-image\': userPhoto,\'background-size\':\'cover\',\'background-position\':\'0px 0px\'}:\'\'"></div></div><div class="navPaneListItemName trimmed groupNavPaneListItemName"><div class="textLabel" title="{{model.source.displayName}}">{{model.source.displayName}}</div></div></li>'),e.put("views/historyDialogView.html",'<div><modal-dialog class="historyDialog" history-dialog="viewModel" view-model="dialogModel" ng-if="viewModel.showModalDialog" on-cancel-action="closeDialog()" on-confirm-action="closeDialog()"><div class="title"><span localize="HistoryDialog_Title"></span></div><div class="model-package-selection"><span ng-class="{\'active\': refreshTypeSelected === 0}" ng-click="refreshTypeSelected = 0" localize="HistoryDialog_ScheduledTab"></span><span ng-class="{\'active\': refreshTypeSelected === 1}" ng-click="refreshTypeSelected = 1" localize="HistoryDialog_OneDriveTab"></span></div><div class="historyTableContainer"><table class="historyTable"><thead class="historyTableHeader"><tr><th class="historyDetails" localize="HistoryDialog_TableHeader_Details"></th><th class="historyType" localize="HistoryDialog_TableHeader_Type"></th><th class="historyStart" localize="HistoryDialog_TableHeader_Start"></th><th class="historyEnd" localize="HistoryDialog_TableHeader_End"></th><th class="historyStatus" localize="HistoryDialog_TableHeader_Status"></th><th class="historyFailMessage" localize="HistoryDialog_TableHeader_FailMessage"></th></tr></thead><tbody class="historyTableBody" ng-repeat="history in getSelectedHistories(refreshTypeSelected)" ng-init="detailExpand=false"><tr><td class="errorDetailsLink"><div ng-show="history.isSuccessful===false" ng-switch="detailExpand" ng-click="detailExpand=!detailExpand"><span localize="HistoryDialog_RefreshDetail_Show" ng-switch-when="false"></span><span localize="HistoryDialog_RefreshDetail_Hide" ng-switch-when="true"></span></div></td><td class="historyType" ng-switch="isScheduledRefresh(history)"><span ng-switch-when=true localize="HistoryDialog_RefreshType_Scheduled"></span><span ng-switch-when=false localize="HistoryDialog_RefreshType_OnDemand"></span></td><td class="historyStart"><span ng-bind="::history.startTime"/></td><td class="historyEnd"><span ng-bind="::history.endTime"/></td><td class="historyStatus" ng-switch="history.isSuccessful"><span ng-if="isRefreshInProgress(history)" localize="HistoryDialog_RefreshStatus_InProgress"></span><span ng-if="isRefreshTimedOut(history)" localize="HistoryDialog_RefreshStatus_TimedOut"></span><span ng-switch-when=true localize="HistoryDialog_RefreshStatus_Completed"></span><span ng-switch-when=false localize="HistoryDialog_RefreshStatus_Failed"></span></td><td class="historyFailMessage"><span ng-bind="::history.friendlyErrorMessage"/></td></tr><tr class="historyErrorDetails" ng-if="detailExpand"><td colspan="9"><inline-name-value-pairs mode="\'info\'" show-title="false" detail-expand="true" name-value-pairs="history.details"></inline-name-value-pairs></td></tr></tbody></table></div></modal-dialog></div>'),e.put("views/inFocus.html",'<div class="inFocusContainer" on-resize="handleResize()" ng-show="showInFocusMode"><div class="inFocusAppBar appBar"><div class="appBarSection left"><ul><li> <button class="iconBox" ng-click="hide()"><i class="glyphicon pbi-glyph-arrowleft glyph-small"></i><span class="dashboardTitle link appBarMenuItem" localize="InFocus_ExitInFocus"></span></button></li><li class="appBarDivider"></li><li class="focusTitle appBarTitle" ng-bind="viewModel.displayText"></li><li class="focusSubtitle appBarText" ng-bind="viewModel.subDisplayText"></li></ul></div><div class="appBarSection right" ng-class="{readOnlyMode: !(canEdit || viewModel.openInsightArgs.canPin), insights: viewModel.openInsightArgs != null}" ng-if="viewModel.inFocusTile"><ul><li class="lastRefreshTimestamp appBarText metadata" ng-if="viewModel.inFocusTile.formatedTime"><span localize="InFocus_RefreshTime"></span><span ng-bind="viewModel.inFocusTile.formatedTime"></span></li><li class="appBarDivider"></li><li class="getRelatedInsightsBtn" localize-tooltip="Insights_GetRelatedInsights_Tooltip" ng-if="relatedInsightsEnabled"> <button ng-click="getRelatedInsights()"><i class="glyphicon pbi-glyph-insight glyph-small"></i><span class="appBarMenuItem" ng-bind="viewModel.getRelatedInsightsText"></span></button></li><li class="pinBtn" ng-if="viewModel.inFocusTile && viewModel.inFocusTile.type != 5 && viewModel.inFocusTile.type != 8"> <button ng-click="pinVisual()"><i class="glyphicon pbi-glyph-pinned glyph-small"></i><span class="appBarMenuItem" ng-bind="viewModel.pinVisualText"></span></button></li><li class="editBtn" ng-if="inFocusEditEnabled"> <button ng-click="editVisual()"><i class="glyphicon pbi-glyph-edit glyph-small" ng-class="{inEditMode: viewModeState.getMode() === 1}"></i><span class="appBarMenuItem" ng-bind="viewModel.editVisualText"></span></button></li><li class="saveBtn" ng-if="inFocusEditEnabled"> <button ng-disabled="viewModeState.getMode() === 0" ng-click="saveVisual()"><i class="glyphicon pbi-glyph-save glyph-small"></i><span class="appBarMenuItem" ng-bind="::viewModel.saveVisualText"></span></button></li><li class="moreOptionsItem"> <button dropdown-menu class="moreOptionsInFocusButton" dropdown-items="inFocusMenuItems" dropdown-on-item-selected="inFocusMenuItemSelected(selected)" dropdown-class="additionalMenus"><i class="glyphicon pbi-glyph-more glyph-small"></i></button></li></ul></div></div><div ng-if="viewModel.inFocusTile" ng-switch="viewModel.inFocusTile.type"><section class="explorationContainer inFocus" ng-switch-when="0"><exploration-host ng-if="viewModel.showVisualEnabled && !inFocusDrillableError" class="explorationHost inFocusBody" view-model="viewModel" id="inFocusExpHost"><task-pane view-model="viewModel.taskPane" field-list-config="::fieldListConfig" ng-if="viewModeState.getMode() === 1" resizable resizable-containerid="InFocusExpHost" resizable-sibling="visualizationPane" resizable-expanded="{{viewModel.taskPane.isPaneExpanded}}" resizable-default-width="180" resizable-min-width="180" resizable-max-width="420" resizable-collapsed-width="32"></task-pane><visualization-pane class="inFocusVizPane" view-model="viewModel.visualizationPane" resizable resizable-containerid="InFocusExpHost" resizable-sibling="taskPane" resizable-expanded="{{viewModel.visualizationPane.isPaneExpanded}}" resizable-default-width="180" resizable-min-width="180" resizable-max-width="420" resizable-collapsed-width="32"></visualization-pane><insights-pane ng-if="viewModel.showInsightsPane" model="viewModel.inFocusTile.datasetModel.contract" visual-contract="viewModel.canvas.visual.visualContainer.contract" exploration-contract="viewModel.canvas.exploration.contract" tile-action="viewModel.inFocusTile.action.action" visual-title="viewModel.displayText + \' \' + viewModel.subDisplayText" visual="viewModel.canvas.visual.visualContainer.readOnlyState.visual" parent-event="openInFocusEvent"></insights-pane><div class="exploration"> <button class="previousVisualButton" ng-if="viewModel.showPreviousVisualButton" ng-click="showPreviousVisual()"><i class="glyphicon iconBox pbi-glyph-chevronleftmedium glyph-small"></i><span localize="InFocus_PreviousVisual"></span></button><explore-canvas view-model="::viewModel.canvas.exploration.exploreCanvas"></explore-canvas><div class="sourceInfo"><a class="sourceStyle" ng-if="viewModel.inFocusTile.report" ng-click="openReport()" ng-bind="viewModel.source"></a><div class="insightFeedbackStyle" ng-if="viewModel.openInsightArgs.insightContainerModel && viewModel.openInsightArgs.showInsightsEvent"><span localize="Insights_FeedbackLink"></span> <button ng-click="logInsightFeedback(true)" class="insightFeedbackButton" localize="Insights_FeedbackYes"></button> <button ng-click="logInsightFeedback(false)" class="insightFeedbackButton" localize="Insights_FeedbackNo"></button></div></div></div></exploration-host><water-mark-message ng-if="inFocusDrillableError" config="errorMessageConfig"></water-mark-message><div class="inFocusCenteredSpinner" ng-show="!viewModel.inFocusTile"><spinner modern delay="1000"></spinner></div></section><workbook-tile view-model="viewModel.workbook" class="explorationContainer inFocus" ng-switch-when="5"></workbook-tile><real-time-tile view-model="viewModel.realTime" class="realTimeTile inFocus" ng-switch-when="8"></real-time-tile></div></div>'),e.put("views/landing.html",'<div class="landingController"><navigation-bar current-dashboard="dashboardDataService.activeDashboard.displayName" current-report="activeReportInfo.displayName" current-workbook="activeWorkbookInfo.displayName"></navigation-bar><impersonation-bar class="unselectable" ng-if="impersonation.impersonating" on-back="quitImpersonation()"></impersonation-bar><div class="contentMain" ng-class="{isCollapsiblePaneExpanded: viewModel.collapsiblePane.isExpanded}"><navigation-pane ng-if="!conceptualModelEnabled()" ng-cloak view-model="viewModel.dashboardContainer" current-report="activeReportInfo" current-workbook="activeWorkbookInfo"></navigation-pane><navigation-pane-v2 ng-if="conceptualModelEnabled()" is-expanded="$ctrl.isNavigationPaneExpanded" on-toggled="$ctrl.toggleNavigationPane(isExpanded)" ng-class="{isExpanded: $ctrl.isNavigationPaneExpanded}"></navigation-pane-v2><div class="contentColumn"><notification-bar></notification-bar><landing-container ng-cloak></landing-container></div><div class="taskPaneSliderOverlay" ng-click="hideTaskPaneSliderOnClick()" ng-if="viewModel.collapsiblePane.isExpanded" ng-class="{isCollapsiblePaneExpanded: viewModel.collapsiblePane.isExpanded, showOverlay:viewModel.collapsiblePane.expandedWidth> 0}"></div><task-pane-slider ng-show="viewModel.collapsiblePaneMode !== 0"></task-pane-slider><div class="notificationPane" ng-if="viewModel.showNotificationPane"><div class="taskPaneSliderOverlay" ng-click="hideNotificationPaneOnClick()" ng-if="viewModel.notificationPane.isExpanded" ng-class="{isCollapsiblePaneExpanded: viewModel.notificationPane.isExpanded, showOverlay:viewModel.notificationPane.expandedWidth> 0}"></div><collapsible-pane view-model="viewModel.notificationPane" is-expander-hidden="viewModel.showNotificationPane"><user-notifications></user-notifications></collapsible-pane></div></div><marketplace-host></marketplace-host><nps-host></nps-host><div class="sliderPane pbi-animate fullPageSlider unselectable" ng-if="navigation.inFullPageSliderView()" ui-view="fullPageSlider"></div></div>'),e.put("views/landingContainer.html",'<div class="landingContainer"><notification-toast></notification-toast><full-screen-controls></full-screen-controls><div class="waitingContainer" ng-show="groupService.isGroupTransitionDelayed || (isDashboardLandingContainerActive && showLoadingForDashboard())"><div class="spinnerWithText"><spinner class="large"></spinner><div class="loadingText" localize="NavigationPane_LoadingGroupsText"></div></div></div><div id="favoritesLandingContainer" class="favoritesRootContent" ng-if="favoritesEnabled && isFavoritesActive"><favorites-container view-model="favorites" collapsible-pane-mode="viewModel.collapsiblePaneMode"></favorites-container></div><div id="appsLandingContainer" class="appsRootContent" feature-switch="appsEnabled" ng-if="inAppsView()"><apps-container></apps-container></div><div id="installedAppLandingContainer" feature-switch="appsEnabled" ng-if="inAppView()"><app-container></app-container></div><div id="contentListLandingContainer" class="contentListRootContent" ng-if="!groupService.isGroupTransitionDelayed && contentListEnabled() && isContentListActive"><content-list-container feature-switch-not="listViewEnabled" collapsible-pane-mode="viewModel.collapsiblePaneMode"></content-list-container><content-list-container-v2 feature-switch="listViewEnabled" collapsible-pane-mode="viewModel.collapsiblePaneMode"></content-list-container-v2></div><div id="dashboardLandingContainer" class="landingRootContent" ng-if="isDashboardLandingContainerActive && !showLoadingForDashboard() && (!newQnaEnabled || !inQnaView())"><dashboard-container view-model="viewModel.dashboardContainer" collapsible-pane-mode="viewModel.collapsiblePaneMode" is-active="isDashboardLandingContainerActive"></dashboard-container></div><div id="datasetLandingContainer" class="landingRootContent datasetContainerContent" ng-if="inDatasetView() && !inQnaModelView()"><manage-datasets></manage-datasets></div><div id="reportLandingContainer" class="landingRootContent reportContainerContent" ng-if="inReportView() && !inQnaModelView()"><exploration-container view-model="viewModel.explorationContainer"></exploration-container></div><div id="workbookLandingContainer" class="landingRootContent workbookContainerContent" ng-if="inWorkbookView()"><workbook-container view-model="viewModel.workbookContainer"></workbook-container></div><div id="qnaLandingContainer" class="landingRootContent" ng-if="inQnaModelView() || (newQnaEnabled && inQnaView())"><qna-container view-model="viewModel.qnaContainer" collapsible-pane-mode="viewModel.collapsiblePaneMode"></qna-container></div><div in-focus can-edit="dashboardDataService.activeDashboard.canEdit"></div><content-provider-splash screen-state="2" class="isGroupWelcome" ng-if="inGroupWelcomeView()"></content-provider-splash><div class="sliderPane pbi-animate unselectable" ng-if="navigation.inContentSliderView()" ui-view="contentSlider"></div></div>'),e.put("views/loadNotificationDialog.html",'<div class="contentProviderLoadNotificationContent"><span class="pbi-spinner"></span><span class="contentProviderLoadNotificationMessage" localize="ParametersLoadingMessage"></span></div>'),e.put("views/localFileBrowser.html",'<div> <input class="browseFileInput" type="file" accept="{{fileDialogFilter}}"/></div>'),e.put("views/manageEmbedView.html",'<div class="sliderContentView manageEmbed"><user-group-header view-model="userGroupHeader"></user-group-header><div class="tableArea"><div class="centeredSpinner" ng-show="!viewModel.isLoaded"><spinner modern></spinner></div><div ng-show="viewModel.isLoaded" ng-switch="viewModel.embeddedResources.length> 0"><table class="manageEmbedTable" ng-switch-when="true"><thead><tr><th class="associatedReport" ng-click="updateSortProperty(\'associatedReport.displayName\')" localize="ManageEmbed_AssociatedReport_Header"></th><th class="status" ng-click="updateSortProperty(\'status\')" localize="ManageEmbed_Status_Header"></th><th class="dateCreated" ng-click="updateSortProperty(\'dateCreatedSortable\')" localize="ManageEmbed_DateCreated_Header"></th><th class="actions header"></th></tr></thead><tbody><tr ng-repeat="resource in viewModel.embeddedResources | orderBy:sortProperty:sortDescending track by (resource.contract.snapshotId + resource.contract.embedType)"><td class="itemField trimmedTextWithEllipsis" ng-bind="resource.associatedReport.displayName"></td><td class="itemField trimmedTextWithEllipsis" ng-bind="resource.status"></td><td class="itemField trimmedTextWithEllipsis" ng-bind="resource.dateCreated ? resource.dateCreated : resource.contract.date"></td><td class="actionsField"><a href="" class="glyphicon glyph-small pbi-glyph-more" ng-click="$event.stopPropagation();toggleFlyout($event, resource)" localize-tooltip="NavigationPane_OpenMenu"></a></td></tr></tbody></table><div class="manageEmbedTableEmpty" ng-switch-when="false"><i class="glyphicon pbi-glyph-warning glyph-med warningIcon"></i><h2 localize="ManageEmbed_NoEmbedCodesWarningTitle"></h2><p localize="ManageEmbed_NoEmbedCodesWarningText"></p></div></div></div></div>'),e.put("views/manageStorageView.html",'<div class="sliderContentView"><div class="manageStorage"><user-group-header view-model="userGroupHeader"></user-group-header><usage-bar usage-bar-model="viewModel.usageBarModel" view-model="viewModel"></usage-bar> <button class="primary submit" type="button" ng-if="!viewModel.isPremiumUser" ng-click="tryItFree()"><span ng-bind="viewModel.tryItFreeText"></span></button><div class="storageArea"><div class="own"><div class="tab" ng-click="viewModel.ownedByMeSelected=true" ng-switch on="viewModel.isMyWorkspace"><div localize="QuotaManagement_OwnedByMe" ng-switch-when="true"></div><div localize="QuotaManagement_OwnedByUs" ng-switch-when="false"></div><div class="highlight" ng-if="viewModel.ownedByMeSelected"></div></div><div class="tab" ng-click="viewModel.ownedByMeSelected=false"><div localize="QuotaManagement_OwnedByOthers"></div><div class="highlight" ng-if="!viewModel.ownedByMeSelected"></div></div></div><div class="usageList"><table class="usageListTable"><thead><tr><th class="delete"></th><th class="name header" localize="QuotaManagement_ModelName"></th><th class="size header" localize="QuotaManagement_ModelSize"></th><th class="type header" localize="QuotaManagement_ModelType"></th><th class="lastRefresh header" localize="QuotaManagement_ModelLastRefreshedTime"></th><th class="associated header" localize="QuotaManagement_AssociatedDashboards"></th><th class="associated header" localize="QuotaManagement_AssociatedReports"></th></tr></thead><tbody><tr class="ms-font-weight-regular" ng-repeat="usage in viewModel.usageDetails|filter:{ownedByMe: viewModel.ownedByMeSelected}|filter:isInVisibleDashboard(dashboardsFromModel)| orderBy:\'-sizeInMBs\'"><td class="deleteIcon" ng-click="deleteModel(usage)" localize-tooltip="QuotaManagement_DeleteButtonText"><div class="btn-delete"></div></td><td class="itemField" title="{{usage.name}}" ng-bind="usage.name"></td><td class="itemField" ng-bind="usage.sizeWithUnit"></td><td class="itemField" ng-bind="usage.typeText"></td><td class="itemField" ng-bind="usage.lastRefreshTime"></td><td class="itemField associated" title="{{usage.associatedDashboards}}" ng-bind="usage.associatedDashboards"></td><td class="itemField associated" title="{{usage.associatedReports}}" ng-bind="usage.associatedReports"></td></tr></tbody></table></div></div></div></div>'),e.put("views/marketplaceHost.html",'<div class="marketplaceHost"></div>'),e.put("views/navigationBar.html",'<div id="topBar" class="unselectable fadeIn" feature-switch-class="breadcrumbNavigationEnabled"><div class="topNavLeft"><o365-application-launcher></o365-application-launcher><pbi-logo config="logoConfig" ng-click="navigateToLanding()"></pbi-logo></div><breadcrumbs feature-switch="breadcrumbNavigationEnabled"></breadcrumbs><div class="topNavRight"> <button class="enterFullScreenBtn topNavButton" ng-if="fullScreen.fullScreenModeSupported" localize-tooltip="TopNav_FullScreen_Enter" ng-click="enterFullScreen()"><i class="glyphicon glyph-small pbi-glyph-fullscreen"></i></button> <button class="notificationsBtn topNavButton" ng-if="featureSwitchNotificationEnabled" localize-tooltip="UsersNotifications_BadgeTooltip" ng-click="showUserNotifications()"><i class="glyphicon glyph-small pbi-glyph-notification-center"></i> <span ng-if="userNotificationInfo.userNotifications.unseenCount>0" class="badge">{{userNotificationInfo.userNotifications.unseenCount}}</span></button> <button id="settingsMenuBtn" class="topNavButton" dropdown-overlay-invoke="settingsMenu" localize-tooltip="TopNav_Settings" prefer-left="true" need-blur="true"><i class="glyphicon glyph-small pbi-glyph-gear"></i></button> <button id="downloadMenuBtn" class="topNavButton" dropdown-overlay-invoke="downloadMenu" localize-tooltip="TopNav_Download" prefer-left="true" need-blur="true"><i class="glyphicon glyph-small pbi-glyph-download"></i></button> <button id="helpMenuBtn" class="topNavButton" dropdown-overlay-invoke="helpMenu" localize-tooltip="TopNav_Help" prefer-left="true" need-blur="true"><i class="glyphicon glyph-small pbi-glyph-question"></i></button><pbi-button kind="icon" icon-name="smiley" icon-size="small" no-label="" class="topNavButton" feature-switch="replaceUnpromptedNPS" ng-click="showFeedbackContextMenu($event)" localize-tooltip="TopNav_Feedback"></pbi-button> <button id="giveFeedbackBtn" class="topNavButton" feature-switch-not="replaceUnpromptedNPS" ng-click="showSatisfactionWidget()" localize-tooltip="TopNav_Feedback"><i class="glyphicon glyph-small pbi-glyph-smiley"></i></button> <button id="powerBIUserInfoBtn" class="powerBIUserInfoButton" ng-style="userPhoto ?{\'background-image\': userPhoto,\'background-size\':\'cover\',\'background-position\':\'0px 0px\'}:\'\'" dropdown-overlay-invoke="powerBIUserInfo" prefer-left="true" need-blur="true"><i ng-if="!userPhoto" class="glyphicon glyph-small pbi-glyph-user"></i></button><dropdown-overlay dropdown-overlay-name="settingsMenu" dropdown-overlay-class="angular-dropdown navigationBar-contextMenu override-box-shadow"><ul class="navigationBar-contextMenu active" ng-attr-read-only="{{!canWrite()}}" ng-class="{dark: dropdownDarkTheme === true}"><li class="quotaManagement"><div class="dropdown-item addBorderBottom" ng-mousedown="onManageStorageSelected(); $event.stopPropagation();"> <button class="dropdown-content "><usage-bar-menu-item label-class="lableItem"></usage-bar-menu-item></button></div></li><li ng-if="featureSwitchOrgAppsEnabled" class="orgApps"><div class="dropdown-item addBorderBottom" ng-mousedown="onCreateContenPackSelected(); $event.stopPropagation();"> <button class="dropdown-content dropdown-label" localize="TopNav_SettingsMenu_CreateContentPack"/></div><div class="dropdown-item addBorderBottom" ng-mousedown="onViewContentPackSelected(); $event.stopPropagation();"> <button class="dropdown-content dropdown-label" localize="TopNav_SettingsMenu_ViewContentPack"/></div></li><li ng-if="::isTenantAdmin" class="dropdown-item addBorderBottom" ng-mousedown="onAdminPortalSelected(); $event.stopPropagation();"> <button class="dropdown-content dropdown-label" localize="TopNav_SettingsMenu_AdminPortal"/></li><li ng-if="featureSwitchEnterpriseGatewayEnabled" class="dropdown-item addBorderBottom" ng-mousedown="onManageGatewaysSelected(); $event.stopPropagation();"> <button class="dropdown-content dropdown-label" localize="TopNav_SettingsMenu_ManageGateways"/></li><li ng-if="featureSwitchPermissionCenterEnabled" class="dropdown-item addBorderBottom" ng-mousedown="onManagePermissionsSelected(); $event.stopPropagation();"> <button class="dropdown-content dropdown-label" localize="TopNav_SettingsMenu_ManagePermissions"/></li><li ng-if="o365PowerBIEnabled" class="dropdown-item addBorderBottom" ng-mousedown="onO365PowerBISelected(); $event.stopPropagation();"> <button class="dropdown-content dropdown-label" localize="TopNav_SettingsMenu_PowerBIForO365"/></li><li class="dropdown-item addBorderBottom" ng-mousedown="onPowerBISettingsSelected(); $event.stopPropagation();"> <button class="dropdown-content dropdown-label" localize="TopNav_SettingsMenu_PowerBISettings"/></li><li><div ng-if="featureSwitchPublishToWeb" class="dropdown-item addBorderBottom" ng-mousedown="onManageEmbedSelected(); $event.stopPropagation();"> <button class="dropdown-content dropdown-label" localize="TopNav_SettingsMenu_ManageEmbedCodes"/></div></li></ul></dropdown-overlay><dropdown-overlay dropdown-overlay-name="downloadMenu" dropdown-overlay-class="angular-dropdown navigationBar-contextMenu override-box-shadow"><dropdown-menu-items id="downloadItem" dropdown-items="downloadMenu" dropdown-class="navigationBar-contextMenu active" dropdown-on-item-selected="navigationBarMenuItemSelected(selected)"></dropdown-menu-items></dropdown-overlay><dropdown-overlay dropdown-overlay-name="helpMenu" dropdown-overlay-class="angular-dropdown navigationBar-contextMenu override-box-shadow"><dropdown-menu-items id="helpMenuItem" dropdown-items="helpMenu" dropdown-class="navigationBar-contextMenu active" dropdown-on-item-selected="navigationBarMenuItemSelected(selected)"></dropdown-menu-items></dropdown-overlay><dropdown-overlay dropdown-overlay-name="powerBIUserInfo" dropdown-overlay-class="angular-dropdown navigationBar-contextMenu override-box-shadow"><dropdown-menu-items id="userInfoMenuItem" dropdown-items="userInfoMenu" dropdown-class="navigationBar-contextMenu active" dropdown-on-item-selected="navigationBarMenuItemSelected(selected)"></dropdown-menu-items></dropdown-overlay></div><div class="topNavCenter" feature-switch-not="breadcrumbNavigationEnabled"><div class="currentNavigationTitle" ng-show="navigation.inDashboardView()"><span>{{currentDashboard}}</span></div><div class="currentNavigationTitle" ng-show="navigation.inReportView()"><span>{{currentReport}}</span><span ng-show="reportChanged">*</span></div><div class="currentNavigationTitle" ng-show="navigation.inWorkbookView()"><span>{{currentWorkbook}}</span></div></div></div>'),e.put("views/navigationPane.html",'<div class="navigationPane unselectable" ng-class="{isCollapsed: isPaneExpanded === false, isFrozen: groupService.isInGroupTransition}" ng-attr-read-only="{{!canWrite()}}"><div class="innerLayout"><div class="expanderBtn slideFadeIn" ng-click="toggleNavigationPane()" ng-switch on="isPaneExpanded"><i class="glyphicon pbi-glyph-globalnavbutton" localize-tooltip="NavigationPane_Minimize" ng-switch-when="true"></i><i class="glyphicon pbi-glyph-globalnavbutton" localize-tooltip="NavigationPane_Expand" ng-switch-when="false"></i></div><div class="getDataBtn btn primary trimmedTextWithEllipsis slideFadeIn" ng-if="!navigation.inGroupWelcomeView() && !impersonation.impersonating" ng-disabled="groupService.isGroupTransitionDelayed" ng-click="switchToExternalContentViewerMode(navigatorPaneGetDataButton)" localize-tooltip="NavigationPane_GetData"><i class="glyphicon pbi-glyph-getdata glyph-small getDataIcon"></i><span class="label trimmedTextWithEllipsis" localize="NavigationPane_GetData"></span></div><div class="scrollRegion" ng-if="isPaneExpanded"><div class="homeSection" ng-if="homeDashboardEnabled && !impersonation.impersonating"> <button class="homeTitleButton trimmedTextWithEllipsisFullWidth" ng-class="{\'disabledBtn\':!home.isHomeDashboardSet}" ng-click="navigateToHome()" localize-tooltip="NavigationPane_FeaturedDashboardTitle"><i class="glyphicon pbi-glyph-gauge glyph-small" ng-class="{\'highlight\': isOnHome}"></i><span class="btnLabel" localize="NavigationPane_FeaturedDashboardTitle"></span></button> <button class="homeMenuButton" dropdown-menu dropdown-class="navigationPaneGroupContextMenu" dropdown-dark-theme="false" dropdown-items="homeDashboardMenuItems" dropdown-orientation="horizontal" dropdown-on-item-selected="homeDashboardMenuItemSelected(selected)" ng-disabled="!home.isHomeDashboardSet"><i class="glyphicon moreIcon pbi-glyph-more"></i></button></div><div class="favoritesSection" ng-if="favoritesEnabled && !impersonation.impersonating" localize-tooltip="Favorites_NavPaneTitle"> <button class="favoritesTitleButton" ng-click="navigateToFavorites()"><i class="glyphicon pbi-glyph-favoritestar glyph-small" ng-class="{\'highlight\': isInFavoritesView()}"></i><span localize="Favorites_NavPaneTitle"></span></button></div><div class="collapsibleSection groupCollapsibleSection" ng-class="{isExpanded: isGroupsListExpanded === true }" ng-if="!impersonation.impersonating"><div class="sectionTitle trimmedTextWithEllipsis"><div class="collapseToggle" ng-click="toggleNavigationPaneSection(groupSection)"><i class="glyphicon pbi-glyph-chevrondownmedium"></i><div class="groupsTitle"><div ng-bind="groupService.activeGroup.displayName" title="{{groupService.activeGroup.displayName}}" class="trimmedTextWithEllipsis"></div></div><div class="waitingContainer" ng-show="groupService.isGroupTransitionDelayed"><spinner></spinner></div></div><group-actions ng-hide="groupService.activeGroup.isMyWorkspace || groupService.isInGroupTransition" group="groupService.activeGroup"></group-actions></div><ul class="navigationItemList"><group-navigation-pane-list-item ng-repeat="group in filteredGroups = (groupService.groups |filter: { isMyWorkspace:true })" ng-click="switchGroup(group)" view-model="group" selected="groupService.activeGroup.aadGroupId === group.aadGroupId"></group-navigation-pane-list-item></ul><div class="sectionTitle subsectionTitle trimmedTextWithEllipsis"><div class="subsectionTitleText" ng-switch on="groupService.groups.length === 1"> <button ng-switch-when="true" class="navigationPaneButton groupAddButton" ng-click="addGroup()" localize="NavigationPane_GroupsTitle_CreateGroup"></button><span ng-switch-when="false" localize="NavigationPane_GroupsTitle_HasGroups" localize-tooltip="NavigationPane_GroupsTitle_HasGroups"></span></div> <button class="navigationPaneButton addButton" ng-click="addGroup()" localize-tooltip="NavigationPane_CreateGroup"><i class="glyphicon pbi-glyph-add"></i></button></div><ul class="navigationItemList"><group-navigation-pane-list-item ng-repeat="group in filteredGroups = (groupService.groups |filter: { isMyWorkspace:false } | orderBy: \'displayName\' | limitTo: isListOfGroupsExpanded ? 99999 : 5)" ng-click="switchGroup(group)" view-model="group" selected="groupService.activeGroup.aadGroupId === group.aadGroupId"></group-navigation-pane-list-item></ul> <button class="groupsMoreLessButton" ng-show="groupService.groups.length> 5" ng-click="isListOfGroupsExpanded = !isListOfGroupsExpanded" ng-switch on="isListOfGroupsExpanded"><span ng-switch-when="true" localize="Groups_LessButtonText"/><span ng-switch-when="false" localize="Groups_MoreButtonText" class="groupsMoreButton"/></button></div><div class="freezableScrollRegion" ng-disabled="groupService.isGroupTransitionDelayed"><div class="viewArchivedContent collapsibleSection" ng-click="viewArchivedContent()" ng-if="showArchivedContentLink && !impersonation.impersonating"><div class="sectionTitle trimmedTextWithEllipsis"><span class="collapseToggle"><i class="glyphicon pbi-glyph-library glyph-small"></i><span localize="NavigationPane_ArchivedContent"></span></span></div></div><search-box filter="$ctrl.searchFilter" on-change="searchFilterChanged()"></search-box><div class="collapsibleSection ownershipFitlerCollapsibleSection" ng-if="!impersonation.impersonating"><div class="sectionTitle" tabindex="0" dropdown-overlay-invoke="ownershipFilterContextMenu" localize-tooltip="NavigationPane_OwnershipFilterShowTooltip" need-blur="true" horizontal="true"><span class="collapseToggle trimmedTextWithEllipsisFullWidth"><i class="glyphicon pbi-glyph-show glyph-small"></i><span localize="NavigationPane_OwnershipFilterShow"></span><span class="selectedOwnershipFilterText" ng-bind="selectedOwnershipFilter.text"></span></span> <button class="navigationPaneButton filterMoreButton"><i class="glyphicon pbi-glyph-more"></i></button></div></div><dropdown-overlay dropdown-overlay-name="ownershipFilterContextMenu"><dropdown-list class="ownershipFilterContextMenu"><dropdown-list-item ng-repeat="menuItem in ownershipFilterContextMenuItems" ng-click="ownershipFilterSelected(menuItem)" title="{{::menuItem.text}}"><div class="pbi-input"> <input type="radio" name="filterOption" ng-checked="selectedOwnershipFilter.filter===menuItem.filter"><label class="form-label" ng-bind="menuItem.text"></label></div></dropdown-list-item></dropdown-list></dropdown-overlay><div class="collapsibleSection dashboardCollapsibleSection" ng-class="{isExpanded: isDashboardsListExpanded === true }" ng-if="!impersonation.impersonating"><div class="sectionTitle"><span class="collapseToggle trimmedTextWithEllipsisFullWidth" ng-click="toggleNavigationPaneSection(dashboardSection)"><i class="glyphicon pbi-glyph-gauge glyph-small"></i><span localize="NavigationPane_DashboardsTitle" localize-tooltip="NavigationPane_DashboardsTitle"></span></span> <button class="navigationPaneButton addButton" ng-hide="groupService.isInGroupTransition" ng-click="activeAddDashboard()" localize-tooltip="NavigationPane_CreateDashboard"><i class="glyphicon pbi-glyph-add"></i></button></div><div class="addDashboardInputBox" ng-if="showAddDashboardInputBox"><text-input on-complete="addDashboard" validate="isDashboardNameValid" placeholder="addDashboardPlaceholder" is-focused="isAddDashboardInputboxFocused"></div><ul class="navigationItemList dashboardList"><dashboard-navigation-pane-list-item ng-repeat="dashboard in filteredDashboards = (viewModel.visibleDashboards | filter: ownershipFilterFunction(selectedOwnershipFilter.filter) | filter: { displayName: $ctrl.searchFilter } | orderBy: \'displayName\')" ng-click="switchActiveDashboard(dashboard.objectId)" view-model="dashboard" selected="dashboardDataService.activeDashboard.objectId === dashboard.objectId && navigation.inDashboardView()"></dashboard-navigation-pane-list-item><li localize="NavigationPane_NoDashboardText" localize-tooltip="NavigationPane_NoDashboardText" class="noItemText trimmedTextWithEllipsis" ng-if="viewModel.dashboards.length === 0"></li><li localize="NavigationPane_NoDashboardSearchResultText" localize-tooltip="NavigationPane_NoDashboardSearchResultText" class="noItemText trimmedTextWithEllipsis" ng-if="viewModel.dashboards.length> 0 && filteredDashboards.length === 0"></li></ul></div><div class="collapsibleSection reportCollapsibleSection" ng-class="{isExpanded: isReportsListExpanded === true }"><div class="sectionTitle"><span class="collapseToggle trimmedTextWithEllipsisFullWidth" ng-click="toggleNavigationPaneSection(reportSection)"><i class="glyphicon pbi-glyph-barchart glyph-small"></i><span localize="NavigationPane_ReportsTitle" localize-tooltip="NavigationPane_ReportsTitle"></span></span></div><ul class="navigationItemList reportList"><report-navigation-pane-list-item ng-repeat-start="reportResource in filteredReports = (reportsResourceList() | filter: ownershipFilterFunction(selectedOwnershipFilter.filter) | filter: { displayName: $ctrl.searchFilter } | orderBy:\'displayName\') track by reportResource.uniqueId" ng-if="reportResource.resourceType == 0" ng-click="openReport(reportResource)" view-model="reportResource" selected="navigation.inReportView() && currentReport.id === reportResource.id"></report-navigation-pane-list-item><workbook-navigation-pane-list-item ng-repeat-end ng-if="reportResource.resourceType == 1" ng-click="viewWorkbook(reportResource)" view-model="reportResource" selected="navigation.inWorkbookView() && currentWorkbook.uniqueId === reportResource.uniqueId"></workbook-navigation-pane-list-item><li localize="NavigationPane_NoReportText" localize-tooltip="NavigationPane_NoReportText" class="noItemText trimmedTextWithEllipsis" ng-if="reportService.copyAndEditReports.length === 0 && workbookService.workbooks.length === 0"></li><li localize="NavigationPane_NoReportSearchResultText" localize-tooltip="NavigationPane_NoReportSearchResultText" class="noItemText trimmedTextWithEllipsis" ng-if="(reportService.copyAndEditReports.length> 0 || workbookService.workbooks.length > 0) && filteredReports.length === 0"></li></ul></div><div class="collapsibleSection datasetCollapsibleSection" ng-class="{isExpanded: isDatasetsListExpanded === true }" ng-if="!impersonation.impersonating"><div class="sectionTitle"><span class="collapseToggle trimmedTextWithEllipsisFullWidth " ng-click="toggleNavigationPaneSection(datasetSection)"><i class="glyphicon pbi-glyph-database glyph-small"></i><span localize="NavigationPane_DatasetsTitle" localize-tooltip="NavigationPane_DatasetsTitle"></span></span> <button class="navigationPaneButton addButton" ng-hide="groupService.isInGroupTransition" ng-click="switchToExternalContentViewerMode(navigatorPaneAddDatasetButton)" localize-tooltip="NavigationPane_GetData"><i class="glyphicon pbi-glyph-add"></i></button></div><ul class="navigationItemList datasetList"><dataset-navigation-pane-list-item ng-repeat="model in filteredModels = (modelService.sanitizedCopyAndEditModels | filter: ownershipFilterFunction(selectedOwnershipFilter.filter) | filter: { isHidden: \'!true\', displayName: $ctrl.searchFilter } | orderBy: \'displayName\')" ng-click="openModel(model)" view-model="model" selected="(navigation.inDatasetView() && currentReport.id === model.id) || (navigation.inRowLevelSecurityView() && navigation.rowLevelSecurityModelId === model.id)"></dataset-navigation-pane-list-item><li class="trimmedTextWithEllipsis streamingDataset" localize="ManageDatasets_StreamingDatasets" ng-click="navigateToStreamingDatasets()"></li><li localize="NavigationPane_NoDatasetText" localize-tooltip="NavigationPane_NoDatasetText" class="noItemText trimmedTextWithEllipsis" ng-if="modelService.models.length === 0"></li><li localize="NavigationPane_NoDatasetSearchResultText" localize-tooltip="NavigationPane_NoDatasetSearchResultText" class="noItemText trimmedTextWithEllipsis" ng-if="modelService.models.length> 0 && filteredModels.length === 0"></li></ul></div></div></div></div></div>'),
e.put("views/navigationPaneListItem.html",'<li class="navPaneListItem" ng-right-click="showContextMenuIfEnabled()" ng-class="{selected: selected === true, active: showContextMenu === true}" data-id="{{viewModel.id}}"><div class="navPaneItemIcon" ng-switch="isRefreshInProgress()"><spinner ng-switch-when="true" localize-tooltip="NavigationPane_RefreshInProgress"></spinner><div ng-switch-default><i ng-if="model.icon === 1 && model.source.packagePublishStatus !== 2 && model.source.contract.lastRefreshStatus !== 4" class="glyphicon pbi-glyph-share" localize-tooltip="NavigationPane_SharedWithMe"></i><i ng-if="model.icon === 5 && showIcon && showIcon()" class="glyphicon pbi-glyph-excel" localize-tooltip="NavigationPane_ExcelWorkbook"></i><i ng-if="getPackagePublishStatus && getPackagePublishStatus() === 2" class="warning glyphicon pbi-glyph-warning glyph-small" localize-tooltip="NavigationPane_RefreshPublishError"></i><i ng-if="showRefreshError && showRefreshError()" class="warning glyphicon pbi-glyph-warning glyph-small" tooltip tooltip-config="tooltipConfig" ng-click="$event.stopPropagation();showRefreshErrorDialog()"></i></div></div><editable-label class="navPaneListItemName smallFontSize" ng-class="{trimmed: model.source.isNew === true || model.source.packagePublishStatus === 2 || model.source.packagePublishStatus === 4, publishing: model.source.packagePublishStatus === 1, editing: model.isNameEditable}" view-model="model.source" on-blur="rename(newName)" validate="isNameValid" disable-click="true" editable="model.isNameEditable"></editable-label><div class="navPaneItemIndicator"><i ng-if="model.source.isNew && model.source.packagePublishStatus !== 2 && model.source.packagePublishStatus !== 4 && !model.source.isRefreshInProgress" class="glyphicon pbi-glyph-asterisk"></i></div> <button class="navigationPaneButton itemActionsBtn" context-menu localize-tooltip="NavigationPane_OpenMenu" context="model" show-context-menu="showContextMenu" ng-click="$event.stopPropagation();showContextMenuIfEnabled()"><i class="glyphicon pbi-glyph-more"></i></button></li>'),e.put("views/npsHost.html",'<div class="npsHost"></div>'),e.put("views/o365ApplicationLauncher.html",'<div class="o365Waffle"><div class="powerBILogo"><div class="waffle glyphicon pbi-glyph-waffle"></div></div><div id="o365AppLauncherContainer" class="o365AppLauncherContainer" ng-class="{o365AppLauncherContainerOldStyle: oldStyleAppLauncher === true}" tabindex="-1"><div id="o365AppLauncherUpperTriangle" class="uppertriangle" ng-show="oldStyleAppLauncher"></div><div class="o365LoadingContainer" ng-show="loadingAppLauncher"><div class="loadingspinner"><spinner></spinner></div><div class="o365AppLauncherLoading" localize="TopNav_O365ApplicationLauncher_Loading"></div></div><div class="o365AppLauncherError" ng-show="loadingError" localize="TopNav_O365ApplicationLauncher_Error"></div><div id="o365AppLauncherContent" class="o365AppLauncherContent" ng-show="!loadingAppLauncher"></div></div></div>'),e.put("views/pbiDataLoaderSpinner.html",'<div class="dataLoaderSpinner"><spinner class="xlarge"></spinner><h3 class="unselectable"></h3></div>'),e.put("views/pinTileDialog.html",'<div class="explorationPinTileDialog" ng-class="{liveReportTile: isLiveReport, pinDashboardTile: !isLiveReport}"><div class="tilePreview section" ng-class="{noTitle: !viewModel.hasTitle(viewModel.useDashboardFormatting ? viewModel.reportTile:viewModel.dashboardTile), noPreview: viewModel.needSaveReport, showPreview: !viewModel.needSaveReport,vrmPreview:!viewModel.hasTileFormatting }"><div class="liveReport" ng-if="isLiveReport"><span class="previewSection" localize="PinLiveReport_Preview"/><span localize="PinLiveReport_SavedState"/></div><div class="dashTile tilePreviewFrame" ng-show="viewModel.useDashboardFormatting"><ul><dashboard-tile view-model="viewModel.dashboardTile"></dashboard-tile></ul></div><div class="reportTile tilePreviewFrame" ng-show="!viewModel.useDashboardFormatting"><ul><dashboard-tile view-model="viewModel.reportTile"></dashboard-tile></ul></div><div class="tileFormatting section" ng-show="viewModel.hasTileFormatting"><div class="tileFormattingMessage pinTileBoldText" localize="ReportContainer_TileFormattingMessage"></div><div class="formatChoices tileRadioGroup"><ul><li><div class="pbi-input"> <input type="radio" name="cpRadio1" ng-disabled="viewModel.needSaveReport" ng-model="viewModel.useDashboardFormatting" ng-value="true" ng-change="updateFormatting()"><label class="form-label" localize="ReportContainer_UseDashboardFormattingRadioText"></label></div></li><li><div class="pbi-input"> <input type="radio" name="cpRadio2" ng-disabled="viewModel.needSaveReport" ng-model="viewModel.useDashboardFormatting" ng-value="false" ng-change="updateFormatting()"><label class="form-label" localize="ReportContainer_RetainReportFormattingRadioText"></label></div></li></ul></div></div></div><div class="dashboardSelector section"><div class="sectionContainer pinToDashboard" ng-model="viewModel.needSaveReport" ng-show="!viewModel.needSaveReport"><h2 class="title trimmedTextWithEllipsis" localize="ReportContainer_PinToDashboardTitle" localize-tooltip="ReportContainer_PinToDashboardTitle"></h2><div class="message" localize="ReportContainer_SelectExistingOrCreateNewDashboardMessage"></div><div class="pinMessage" localize="ReportContainer_WhereToPinMessage"></div><div class="dashboardChoices tileRadioGroup"><ul><li><div class="pbi-input" ng-disabled="viewModel.noExistingDashboard"> <input type="radio" class="existingDashRadio" ng-model="viewModel.useExistingDashboard" ng-value="true" ng-disabled="noPinnableDashboard()"><label class="form-label" localize="ReportContainer_UseExistingDashboardRadioText"></label></div></li><li><div class="pbi-input"> <input class="newDashRadio" type="radio" ng-model="viewModel.useExistingDashboard" ng-value="false"><label class="form-label" localize="ReportContainer_UseNewDashboardRadioText"></label></div></li></ul></div><div class="existingDashboardDropDown" ng-show="viewModel.useExistingDashboard"> <select ng-model="viewModel.selectedDashboardId"><option ng-selected="{{dashboard.id === dashboardDataService.activeDashboard.id}}" ng-repeat="dashboard in getDashboards() | filter:isDashboardPinnable | orderBy:\'displayName\'" value="{{dashboard.id}}" title="{{dashboard.displayName}}" ng-bind="dashboard.displayName"></option><option ng-repeat="dashboard in getDashboards() | filter:isDashboardUnpinnable | orderBy:\'displayName\'" disabled="disabled" title="{{dashboard.displayName}}" ng-bind="dashboard.displayName"></option></select></div><div class="newNameTextBox animate-show section" ng-show="!viewModel.useExistingDashboard"> <input type="text" class="pinTileText inputDashboardTitle" ng-trim="false" min="1" maxlength="500" ng-model="viewModel.newDashboardName"/></div><div class="liveReportMessage" ng-if="isLiveReport"><span class="glyphicon pbi-glyph-info glyph-mini"/><span localize="PinLiveReport_RefreshMessage"/></div></div><div class="sectionContainer saveYourReport" ng-model="viewModel.needSaveReport" ng-hide="!viewModel.needSaveReport"><h2 class="title" localize="ReportAppBar_SaveAsDialogTitle"></h2><div class="message" localize="ReportContainer_NeedToSaveReportBeforePin"></div><div class="newNameTextBox animate-show section"> <input type="text" class="pinTileText inputReportTitle" ng-trim="false" min="1" maxlength="500" ng-model="viewModel.newReportName"/></div></div><div class="pinTileButtons"> <button class="cancelpinTile biButton" ng-click="cancel()" localize="PBI_Button_Label_Cancel"></button> <button class="pinTile biButton primary trimmedTextWithEllipsis" ng-click="pin()" ng-show="!viewModel.needSaveReport" ng-disabled="viewModel.isPinned || (!viewModel.useExistingDashboard && (!viewModel.newDashboardName || viewModel.newDashboardName.length===0))" ng-bind="::pinButtonText" ng-attr-title="{{::pinButtonText}}"></button> <button class="saveAndContinueBtn biButton primary" ng-click="saveAndContinue()" ng-show="viewModel.needSaveReport" ng-disabled="(!viewModel.newReportName || viewModel.newReportName.length===0)" localize="ReportContainer_SaveAndContinue"></button></div></div></div>'),e.put("views/publishContentPackView.html",'<div class="sliderContentView"><div class="publishContentPack"><user-group-header view-model="viewModel.userGroupHeader" feature-switch-not="breadcrumbNavigationEnabled"></user-group-header><article class="page" feature-switch-class="breadcrumbNavigationEnabled"><fieldset ng-disabled="viewModel.isPublishInProgress"><div class="publishContentPackHeader" ng-bind="viewModel.headerText" feature-switch-not="breadcrumbNavigationEnabled"></div><div class="contentPackAccess section"><div class="contentPackAccessChoose" localize="Publish_ChooseContentPackAccess"></div><div class="contentPackAccessChoices"><ul><li><div class="pbi-input"> <input type="radio" ng-model="viewModel.contentPackCreatedFor" name="publish" ng-value="false" ng-change="enableUpdateButton()"/><label class="trimmedTextWithEllipsis" localize="Publish_Group"/></div></li><li ng-class="::{disabled: isPublishContentPackFeatureDisabled}"><div class="pbi-input"> <input type="radio" ng-model="viewModel.contentPackCreatedFor" name="publish" ng-value="true" ng-change="enableUpdateButton()" ng-disabled="::isPublishContentPackFeatureDisabled"/><label class="trimmedTextWithEllipsis" localize="Publish_Organization"/></div><span class="glyphicon pbi-glyph-info glyph-mini" localize-tooltip="Publish_PublishContentPackToOrganizationDisabled"></span></li></ul></div></div> <span class="section" ng-if="viewModel.hasNotification" title="{{::viewModel.publishNotification}}">{{::viewModel.publishNotification}}</span><div class="contentPackGroups animate-show section" ng-show="!viewModel.contentPackCreatedFor"><emails-list view-model="viewModel.emailsList" allow-object-ids allow-security-groups allow-distribution-lists allow-unified-groups></emails-list><div class="groupsValidationError errorSection" ng-if="viewModel.hasGroupsValidationError"><i class="glyphicon glyph-small pbi-glyph-error"></i><span class="message" ng-bind=viewModel.groupsValidationError></span></div></div><div class="contentPackTitle section"><h5 class="header" localize="Publish_Title"></h5><textarea id="inputTitle" ng-trim="false" maxlength="500" ng-model="viewModel.titleText" required ng-change="enableUpdateButton()"/><div class="titleValidationError errorSection" ng-if="viewModel.hasTitleValidationError"><i class="glyphicon glyph-small pbi-glyph-error"></i><span class="message" ng-bind=viewModel.titleValidationError></span></div></div><div class="contentPackDescription section"><h5 class="header" localize="Publish_Description"></h5><textarea id="msg" ng-model="viewModel.descriptionText" ng-trim="false" maxlength="4000" ng-change="enableUpdateButton()"/><div class="descValidationError errorSection" ng-if="viewModel.hasDescriptionValidationError"><i class="glyphicon glyph-small pbi-glyph-error"></i><span class="message" ng-bind=viewModel.descriptionTextValidationError></span></div></div><div class="contentPackImage section"><div class="showDefaultImage" ng-show="imageThumbView==\'\'"/><div style="background-image:url({{imageThumbView}})" ng-show="imageThumbView" class="imageForContentPack" id="contentPackImageId"></div><div class="imageUploadText"><div class="imageLinkOne"><span localize="Publish_UploadImage"></span> <input type="file" class="uploadImg" ng-disabled="viewModel.isPublishInProgress" ng-file-select="onFileSelect($files)" data-multiple="false" onclick="this.value = null" accept=".jpeg,.jpg,.png"/></div><span class="imageLinkTwo" localize="Publish_UploadText"></span><div class="infoMessage" localize="Publish_ImageDimensionText"/><div class="useDefaultImage" ng-show="imageThumbView!==\'\'"><a href="" ng-click="setDefaultImage(true)" class="useDefaultLink"><span localize="Publish_UseDefaultImage"></span></a></div><div class="imageValidationError errorSection" ng-if="viewModel.hasImageValidationError"><i class="glyphicon glyph-small pbi-glyph-error"></i><span class="message" ng-bind=viewModel.imageValidationErrorText></span></div></div></div><div class="contentpackItemsToPublish"><h5 class="contentpackItemsToPublishHeader" localize="Publish_ItemsToPublish"/><div class="dashboardList"><h5 class="listHeader" localize="Publish_Dashboards"></h5><div class="listItems"><ul><li ng-repeat="dashboard in dashboards"> <label><input type="checkbox" ng-model="dashboard.isSelected" ng-disabled="!dashboard.isEnabled || dashboardHasLegacyReport(dashboard) || !canDashboardBeAdded(dashboard.id)" ng-change="toggleDashboard(dashboard)"/><span class="displayNameForContentPackItemstoPublish" ng-class="{disabled: dashboardHasLegacyReport(dashboard)}" ng-bind="dashboard.displayName" title="{{dashboard.displayName}}"/></label><span ng-if="dashboardHasLegacyReport(dashboard)" class="infoIcon glyphicon pbi-glyph-info glyph-mini" localize-tooltip="Dashboard_Report_Upgrade_Required"/><span ng-if="!canDashboardBeAdded(dashboard.id)" class="infoIcon glyphicon pbi-glyph-info glyph-mini" localize-tooltip="Dashboard_Contains_Unowned"/></li><li localize="NavigationPane_NoDashboardText" class="noItemText" ng-if="dashboards.length === 0"></li></ul></div></div><div class="reportList"><h5 class="listHeader" localize="Publish_Reports"></h5><div class="listItems"><ul><li ng-repeat-start="reportResource in filteredReportResources = (filteredReportResources | filter: { displayName: searchFilter } | orderBy:\'displayName\') track by reportResource.uniqueId" ng-if="reportResource.resourceType == 0"> <label><span class="glyphicon pbi-glyph-blank-mini glyph-mini"/><input type="checkbox" ng-model="reportResource.isSelected" ng-disabled="!reportResource.isEnabled || isLegacyReport(reportResource)" ng-change="toggleReport($index)"/> <span class="displayNameForContentPackItemstoPublish" ng-class="{disabled: !reportResource.isEnabled || isLegacyReport(reportResource)}" title="{{reportResource.displayName}}">{{reportResource.displayName}}</span></label><span ng-if="isLegacyReport(reportResource)" class="infoIcon glyphicon pbi-glyph-info glyph-mini" localize-tooltip="Report_Upgrade_Required"/></li><li ng-repeat-end ng-if="reportResource.resourceType == 1"> <label><span class="glyphicon pbi-glyph-excel glyph-mini"/><input type="checkbox" ng-model="reportResource.isSelected" ng-disabled="!reportResource.isEnabled" ng-change="toggleWorkbook($index)"/> <span class="displayNameForContentPackItemstoPublish" ng-class="{disabled: !reportResource.isEnabled}" title="{{reportResource.displayName}}">{{reportResource.displayName}}</span></label></li><li localize="NavigationPane_NoReportText" class="noItemText" ng-if="filteredReportResources.length === 0"></li></ul></div></div><div class="modelList"><h5 class="listHeader" localize="Publish_Datasets"></h5><div class="listItems"><ul><li ng-repeat="model in models"> <label><input type="checkbox" ng-model="model.isSelected" ng-disabled="!model.isEnabled" ng-change="enableUpdateButton()"/><span class="displayNameForContentPackItemstoPublish" ng-class="{disabled: !model.isEnabled}" ng-bind="model.displayName" title="{{model.displayName}}"/></label></li><li localize="NavigationPane_NoDatasetText" class="noItemText" ng-if="models.length === 0"></li></ul></div></div></div><div class="itemsNotSelectedError errorSection" ng-if="viewModel.hasNoItemsSelected"><i class="glyphicon glyph-small pbi-glyph-error"></i><span class="message" ng-bind=viewModel.itemsNotSelectedError></span></div><div class="publishDataNotification"><span localize="Publish_DataAccessNotification"></span><a href="https://go.microsoft.com/fwlink/?LinkID=616059" target="_blank"><span localize="Publish_DataAccessNotificationLink"></span></a></div><div ng-if="showTemplateUI" class="templateUI"> <label ng-class="{disabled: !isTemplatingAllowed()}" title="{{getLocalizedTemplatizeModelToolTip()}}"><input type="checkbox" ng-model="viewModel.isTemplate" ng-disabled="!isTemplatingAllowed() || viewModel.providerKey"/><span localize="PublishContentPack_TemplatizeModel" class="templatizeModelDescription"/><a href="https://go.microsoft.com/fwlink/?LinkId=820986" target="_blank"><span localize="PublishContentPack_TemplatizeModel_LearnMore"/></a></label></div><div class="templateValidationError errorSection" ng-if="viewModel.hasTemplatePublishError"><i class="glyphicon glyph-small pbi-glyph-error"></i><span class="message" ng-bind="viewModel.templatePublishErrorText" ng-attr-title="viewModel.templatePublishErrorText"></span><a class="learnMoreErrorLink" href="https://go.microsoft.com/fwlink/?LinkId=820986" target="_blank"><span localize="PublishContentPack_TemplatizeModel_LearnMore"/></a></div><div class="publishDataNotification publishDataNotificationWarning" ng-if="isRemoteWorkbookSelected"><span localize="Publish_ExcelWorkbookNeedPermissionsMessage"></span><a href={{workbooksWebUri}} target="_blank" class="goToOneDriveMessageInfo" ng-switch="getWorkookPermissionsMessageType()"><span localize="Sharing_GoToWorkBookNotificationLink" ng-switch-when="0"></span><span localize="Sharing_GoToGroupSharedDocumentNotificationLink" ng-switch-when="2"></span></a></div><div class="messageInfo"><div class="publishActionButtons"> <button class="cancel biButton" ng-click="cancelPublishContentPack()" ng-disabled="viewModel.isPublishCancelled " localize="Publish_ContentPackCancelButton"></button> <button class="publish biButton primary" ng-click="publishContentPack()" ng-disabled="viewModel.isPublishInProgress || viewModel.isUpdateScenario || (dashboards.length===0 && reports.length===0 && models.length===0 && workbooks.length===0 ) || !isPublishAllowed()" ng-bind="viewModel.publishButtonText"></button><span class="messageInfoErrorSection" ng-if="viewModel.isPublishOrUpdateError" ng-bind="viewModel.publishOrUpdateError"/><spinner class="publishActionSpinner" ng-if="viewModel.isPublishInProgress"></spinner></div></div></fieldset></article></div></div>'),e.put("views/qrCodeDialog.html",'<div class="qrCodeDialog"><div class="qrCodePreview section"><div class="tileHeader"><div class="heading title"><div class="displayText" ng-bind="viewModel.displayText"></div></div><div class="heading subTitle"><div class="subDisplayText" ng-bind="viewModel.subDisplayText"></div></div></div> <img class="qrCode" ng-src="{{qrCodeImageDataUrl}}"/></div><div class="qrCodeInstructions"><h2 class="title" localize="QRCodeDialog_Title"></h2><div class="message" ng-bind="viewModel.dialogMessage"></div><div class="notification"><i class="glyphicon pbi-glyph-info glyph-small"></i><div class="notificationBody" ng-bind="viewModel.notificationMessage"></div><div class="qrCodeButtons"> <button class="done biButton" ng-click="hideDialog()" localize="QRCodeDialog_Done"></button><a class="downloadButton btn primary" localize="QRCodeDialog_Download" ng-href="{{qrCodeImageDataUrl}}" ng-click="tryIEDownloadQRCodeImage()" download="{{qrCodeImageFileName}}"></a></div></div></div></div>'),e.put("views/qrCodeProgressDialog.html",'<div class="qrLoading" ng-click="$event.stopPropagation()"><div class="content"><div class="information"><div class="title" localize="QRCodeProgressDialog_Title"/><spinner class="large"></spinner></div> <button class="primary" ng-click="hideDialog()" localize="GetData_Cancel"></button></div></div>'),e.put("views/requestDashboardAccess.html",'<div class="requestDashboardAccess unselectable"><i class="glyphicon pbi-glyph-error glyph-large"></i><div class="contentArea"><div><h2>{{::viewModel.splashMessage}}</h2></div> <button ng-show="!viewModel.isRequestActive" class="primary actionButton" ng-disabled="viewModel.isRequestActive" ng-click="requestAccess()" localize="RequestDashboardAccess_RequestAccessButton"></button><div class="spinner" ng-show="viewModel.isRequestActive"><spinner></spinner></div></div></div>'),e.put("views/requestDashboardAccessModal.html",'<div class="requestDashboardAccessModal unselectable"><div><div> <span>{{::viewModel.requestAccessDescription}}</span></div><div><textarea maxlength="1000" ng-model="viewModel.message" ng-attr-placeholder="{{viewModel.placeholderText}}"></textarea></div></div></div>'),e.put("views/shareView.html",'<div id="sharingPane" class="paneLayout"><header><div class="primaryHeading label-xxl" localize="ShareView_ShareDashboard"></div><div class="secondaryHeading pbi-link" ng-class="{requestsSummaryActive: anyRequests()}" ng-bind="viewModel.requestsSummaryText"></div><section class="sharingOptionsList"><div class="sharingOptionTab label-med inviteTab" ng-class="{selected: viewModel.inviteSelected}" ng-click="sharedWithUsers(false)" localize="ShareView_ShareText"></div><div class="sharingOptionTab label-med sharedWithTab" ng-class="{selected: viewModel.sharedWithSelected}" ng-click="sharedWithUsers(true)" ng-if="::isOwner()" localize="ShareView_AccessText"></div></section></header><section class="contentContainer"><section class="sharingPaneSection invite" ng-show="viewModel.inviteSelected"><div class="sharingSectionTitleContainer"><span class="sharingSectionTitle" localize="Sharing_GrantAccess"></span></div><div class="sharePaneNotification shareAlert" ng-if="viewModel.shouldDisplayProContentAlertMessage" id="proContentMessageElement"><i class="glyphicon glyph-small pbi-glyph-warning"></i><span localize="UpgradeAccount_ShareDashboardWarnMessage"></span><a class="learnMore" href="//go.microsoft.com/fwlink/?LinkId=616914" target="_blank" localize="Sharing_DataAccessNotificationLink"></a></div><emails-list ng-hide="isNotPermitted()" view-model="viewModel.emailsList" allow-object-ids allow-security-groups allow-distribution-lists on-tag-added="validateInputTag" on-tag-removed="resetValidation"></emails-list><div class="sharePaneNotification shareError" ng-if="viewModel.hasValidationError"><i class="glyphicon glyph-small pbi-glyph-error"></i> <span>{{viewModel.emailValidationError}}</span></div><div class="sharePaneNotification shareError" ng-if="viewModel.showSecurityGroupUpgradeAccount"><i class="glyphicon glyph-small pbi-glyph-error"></i><span localize="Sharing_SecurityGroupRequiresPro"></span><a class="learnMore" href="//go.microsoft.com/fwlink/?LinkId=616914" target="_blank" localize="UpgradeAccount_ShareDashboardLearnMoreLink"></a></div><div class="sharePaneNotification shareAlert" ng-if="viewModel.hasValidationWarning"><i class="glyphicon glyph-small pbi-glyph-warning"></i> <span>{{viewModel.emailValidationWarning}}</span></div><div class="emailMessage"><textarea id="msg" ng-model="viewModel.messageText" ng-disabled="isNotPermitted()" ng-trim="false" maxlength="4000" ng-attr-placeholder="{{viewModel.placeholderMessage}}"/></div></section><section class="sharingPaneSection sharedWith" ng-show="viewModel.sharedWithSelected"><div class="userListContainer sharedWithUsers"><div class="sharingSectionTitleContainer" ng-class="{isResharer: !isOwner()}"><span class="sharingSectionTitle shareWithTitle" localize="ShareView_DashboardSharedWith"></span><span class="sharingSectionTitle shareWithNotAvailableTitle" localize="ShareView_DashboardSharedWithNotAvailable"></span></div><div class="searchBoxContainer" ng-if="::isOwner()"><search-box filter="viewModel.searchFilter"></search-box></div><ul ng-if="::isOwner()"><li><div id="ownerLabel" class="username">{{viewModel.owner.fullName}}</div><div class="usertype" localize="Sharing_Owner"></div></li><li ng-repeat="user in filteredSharedUsers = (viewModel.sharedUsers | filter: { fullName: viewModel.searchFilter })"><div class="username">{{user.fullName}}</div><div class="action"><div class="dropMenuContainer"> <button class="optionsMenu" dropdown-menu dropdown-items="user.sharingPermissionsOptions" dropdown-on-item-selected="sharingPermissionsItemSelected(selected)"><span class="glyphicon pbi-glyph-more glyph-small"></span></button></div><div class="performAction">{{user.permissionsDisplayText}}</div><div class="inProgress" ng-show="user.id === viewModel.removedUserId && user.kind === viewModel.removedUserKind && viewModel.selectedList === SharingUserList.SharedUsers"><spinner dots></spinner></div></div><div class="userTypeLabel" ng-show="user.isExternalUser"><span localize="Sharing_Guest"></span><i class="glyphicon glyph-small pbi-glyph-info" localize-tooltip="Sharing_Guest_Info"></i></div></li><li ng-repeat="userInvite in filteredInvitedUsers = (viewModel.invitedUsers | filter: { sentToEmailAddress: viewModel.searchFilter })"><div class="username" ng-attr-data-invitation-id="{{userInvite.id}}">{{userInvite.sentToEmailAddress}}</div><div class="action"><div class="inProgress" ng-show="userInvite.id === viewModel.removedUserId && viewModel.selectedList === SharingUserList.InvitedUsers"><spinner dots></spinner></div><div class="performAction noOptions" ng-click="cancelInvite(userInvite.id)" ng-hide="userInvite.id === viewModel.removedUserId && viewModel.selectedList === SharingUserList.InvitedUsers" localize="Sharing_CancelInvite"></div></div><div class="userTypeLabel" ng-show="userInvite.isExternalUser"><span localize="Sharing_Guest"></span><i class="glyphicon glyph-small pbi-glyph-info" localize-tooltip="Sharing_Guest_Info"></i></div></li><li ng-if="featureSwitchPermissionCenterEnabled" class="action"><a href="" class="pbi-link" localize="PermissionCenter_HomeHeader" ng-click="navigateToManagePermissions()"></a></li></ul></div><div class="userListContainer pendingRequests" ng-if="anyRequests()"><div class="sharingSectionTitleContainer"><span class="sharingSectionTitle" localize="ShareView_DashboardAccessRequestedBy"></span><i class="icon glyphicon pbi-glyph-info glyph-small" localize-tooltip="ShareView_PendingRequestsTooltip"></i></div><ul ng-if="::isOwner()"><li ng-repeat="requestingUser in viewModel.requestingUsers"><div class="username">{{requestingUser.fullName}}</div><div class="glyphDeny glyphicon pbi-glyph-close glyph-mini mini-label" ng-hide="requestingUser.isPerformingAccessRequest" ng-click="denyAccess(requestingUser)" localize-tooltip="Reject"></div><div class="glyphGrant glyphicon pbi-glyph-success glyph-small" ng-hide="requestingUser.isPerformingAccessRequest" ng-click="grantAccess([requestingUser])" localize-tooltip="Approve"></div><div class="requestAccessSpinner" ng-show="requestingUser.isPerformingAccessRequest"><spinner dots></spinner></div></li><li class="action"><a href="" class="pbi-link" localize="ShareView_ApproveAll" ng-click="approveAll()"></a></li></ul></div><div class="shareLink"><div class="sharingSectionTitleContainer"><span class="sharingSectionTitle" localize="ShareView_ShareLink"></span><i class="icon glyphicon pbi-glyph-info glyph-small" localize-tooltip="ShareView_InternalDashboardLinkTooltip"></i></div> <input class="dashboardUrl" type="text" readonly onclick="this.select()" ng-attr-value="{{getDashboardUrl()}}"/></div></section></section><footer><div class="sharePaneNotification shareAlert" ng-hide="isNotPermitted() || !shouldShowPermissionsWarning()"><i class="icon glyphicon pbi-glyph-warning glyph-small"></i><span class="workbookPermissonsMessageInfo" ng-switch="getWorkookPermissionsMessageType()"><span localize="Sharing_WorkbookOwnerPermissionNeeded" ng-switch-when="0"></span><span localize="Sharing_WorkbookNonOwnerPermissionNeeded" ng-switch-when="1"></span><span localize="Sharing_WorkbookGroupPermissionNeeded" ng-switch-when="2"></span><a class="learnMore" href="//go.microsoft.com/fwlink/p/?LinkId=692007" target="_blank"><span localize="Sharing_WorkbookPermissionLearnMoreNotificationLink"></span></a><a href={{workbookWebUri}} target="_blank" class="goToOneDriveMessageInfo" ng-if="getWorkookPermissionsMessageType() !== 1" ng-switch="getWorkookPermissionsMessageType()"><span localize="Sharing_GoToWorkBookNotificationLink" ng-switch-when="0"></span><span localize="Sharing_GoToGroupSharedDocumentNotificationLink" ng-switch-when="2"></span></a></span></div><div class="sharePaneNotification shareInfo"><i class="glyphicon glyph-small pbi-glyph-info"></i><span localize="Sharing_DataAccessNotification"></span><a class="learnMore" href="//go.microsoft.com/fwlink/?LinkID=522083" target="_blank"><span localize="Sharing_DataAccessNotificationLink"></span></a></div><div class="messageInfo" ng-show="viewModel.inviteSelected"><label id="cantShare" class="error" localize="Sharing_UsersCannotReshare" ng-show="isNotPermitted()"></label><div class="sharingOptions" ng-hide="isNotPermitted()"><pbi-checkbox label="Sharing_UsersCanReshare" ng-model="viewModel.allowReshare" ng-disabled="viewModel.isEmailBeingSent"></pbi-checkbox><pbi-checkbox label="Sharing_NotifyViaEmail" ng-model="viewModel.notifyViaEmail" ng-disabled="viewModel.isEmailBeingSent"></pbi-checkbox></div></div><div class="buttons"> <button ng-show="viewModel.sharedWithSelected" class="biButton default closeButton" ng-click="cancelShare()" localize="ShareView_CloseButtonText"></button><div ng-show="viewModel.inviteSelected"><spinner ng-show="viewModel.isEmailBeingSent"></spinner> <button class="biButton primary shareButton" type="button" ng-click="shareEmail()" ng-disabled="viewModel.hasValidationError || viewModel.isEmailBeingSent || isNotPermitted() || viewModel.emailsList.inputUserList.length === 0" localize="ShareView_ShareButtonText"></button> <button class="biButton default cancelButton" type="button" ng-click="cancelShare()" localize="ShareView_CancelButtonText"></button></div></div></footer></div>'),e.put("views/taskPaneSliderView.html",'<div class="taskPaneSliderView"><collapsible-pane view-model="viewModel.collapsiblePane" is-expander-hidden="viewModel.collapsiblePaneMode !== 0"><tile-editor ng-if="viewModel.collapsiblePaneMode === 1"></tile-editor><create-group-blade ng-if="viewModel.collapsiblePaneMode === 2" group-editor-mode="viewModel.collapsiblePaneMode"></create-group-blade><edit-group-blade ng-if="viewModel.collapsiblePaneMode === 3" group-editor-mode="viewModel.collapsiblePaneMode" parameters="viewModel.parameters"></edit-group-blade><view-group-blade ng-if="viewModel.collapsiblePaneMode === 4" group-editor-mode="viewModel.collapsiblePaneMode" parameters="viewModel.parameters"></view-group-blade><tile-gallery ng-if="viewModel.collapsiblePaneMode === 5"></tile-gallery><share-view ng-if="viewModel.collapsiblePaneMode === 6" view-model="viewModel.dashboardContainer.sharePane"></share-view><real-time-blade ng-if="viewModel.collapsiblePaneMode === 7"></real-time-blade><upn-mapping-pane ng-if="viewModel.collapsiblePaneMode === 8"></upn-mapping-pane><alerts-editor ng-if="viewModel.collapsiblePaneMode === 9"></alerts-editor><streaming-dataset-editor ng-if="viewModel.collapsiblePaneMode === 10" from="viewModel.previousMode"></streaming-dataset-editor><streaming-dataset-push-info ng-if="viewModel.collapsiblePaneMode === 11"></streaming-dataset-push-info><settings-blade ng-if="viewModel.collapsiblePaneMode === 12"></settings-blade><streaming-dataset-gallery ng-if="viewModel.collapsiblePaneMode === 13"></streaming-dataset-gallery><pub-nub-editor ng-if="viewModel.collapsiblePaneMode === 14"></pub-nub-editor><subscription-pane ng-if="viewModel.collapsiblePaneMode === 15"></subscription-pane></collapsible-pane></div>'),e.put("views/tileEditor.html",'<ng-form name="tileEditorForm"><div class="tileEditor paneLayout"><header><h3 class="primaryHeading" ng-bind="::tileEditorHeaderPaneTitle()"></h3><ul class="headerTabs" ng-if="::isSavedRealTimeTile"><li class="label-med" ng-repeat="tab in ::headerTabs" ng-class="{selected: activeHeaderTab.type === tab.type}" ng-click="activateHeaderTab(tab)" ng-bind="::tab.text"></li></ul></header><section class="contentContainer noPadding"><real-time-tile-visualization-design ng-if="(activeHeaderTab.type === 0) && isSavedRealTimeTile" tile="tileModel" model="selectedModel"></real-time-tile-visualization-design><section class="tileDetails" ng-show="(activeHeaderTab.type === 1) || !isSavedRealTimeTile"><aside class="requiredField" localize="TileEditor_RequiredField"></aside><section class="tileEditorSection"><h4 class="sectionHeader" localize="TileEditor_SectionHeader_Details"></h4><section class="sectionContent"><pbi-checkbox label="TileEditor_PaneSubtitle_DisplayTitle" ng-model="displayTitle" ng-change="toggleDisplayTitle()" ng-disabled="viewModel.titleRequired || viewModel.tile.config.lastRefreshTimeEnabled"></pbi-checkbox><div ng-class="{disabled: !displayTitle}"><h6 class="input-field-label" ng-class="{required:viewModel.titleRequired}" localize="TileEditor_PaneSubtitle_Title"></h6> <input type="text" name="title" class="displayText" ng-class="{hasError: tileEditorForm.title.$touched && !viewModel.isTitleValid()}" ng-disabled="!displayTitle" ng-model="viewModel.tile.displayText"/><div class="errorBlock" ng-if="tileEditorForm.title.$touched && !viewModel.isTitleValid()"><i class="glyphicon glyph-small pbi-glyph-error"></i><div class="message" localize="TileEditor_EmptyTitleWarning" localize-tooltip="TileEditor_EmptyTitleWarning"></div></div><h6 class="input-field-label" localize="TileEditor_PaneSubtitle_Subtitle"></h6> <input type="text" class="subDisplayText" ng-disabled="!displayTitle" ng-model="viewModel.tile.subDisplayText"/></div></section></section><section ng-show="viewModel.tile.config.widget" class="tileEditorSection"><h4 class="sectionHeader" localize="TileEditor_SectionHeader_Content"></h4><section class="sectionContent"><div class="widgetEditorContent"></div></section></section><section class="tileEditorSection"><h4 class="sectionHeader" localize="TileEditor_SectionHeader_Functionality"></h4><section class="sectionContent"><pbi-checkbox label="TileEditor_DisplayLastRefreshTime" ng-if="viewModel.hasLastRefreshTime" ng-model="viewModel.tile.config.lastRefreshTimeEnabled" ng-change="showLastRefreshTimeChanged()"></pbi-checkbox><pbi-checkbox label="TileEditor_SetCustomLink" ng-model="hasCustomLink" ng-change="setCustomLinkChanged()" ng-disabled="::!viewModel.canAddOrRemoveCustomLink"></pbi-checkbox><div ng-class="{disabled: !hasCustomLink}"><h6 class="input-field-label altTextStyling required" localize="TileEditor_Url"></h6> <input class="customLinkUrl" type="text" name="customUrl" ng-model="viewModel.tile.action.targetUrl" ng-disabled="!hasCustomLink" ng-class="{hasError: hasCustomLink && tileEditorForm.customUrl.$touched && !viewModel.isCustomLinkValid()}"/><div class="errorBlock" ng-if="hasCustomLink && tileEditorForm.customUrl.$touched && !viewModel.isCustomLinkValid()"><i class="glyphicon glyph-small pbi-glyph-error"></i><div class="message" localize="TileEditor_Action_Url_WarningInvalidUrl" localize-tooltip="TileEditor_Action_Url_WarningInvalidUrl"></div></div><h6 class="input-field-label altTextStyling" localize="TileEditor_SetOpenInSameTab"></h6><pbi-radio-group ng-model="viewModel.tile.action.openInSameTab" ng-disabled="!hasCustomLink"><pbi-radio label="TileEditor_Yes" ng-value="true"/><pbi-radio label="TileEditor_No" ng-value="false"/></pbi-radio-group></div></section></section><section class="tileEditorSection"><div ng-if="viewModel.tile.workbook && viewModel.tile.config.workbookTile"><h4 class="tileEditorTitle sectionHeader" localize="TileEditor_PaneTitle_Workbook_AdvancedOptions"></h4><section class="sectionContent"><h6 class="input-field-label altTextStyling" localize="TileEditor_PaneSubtitle_Fit"></h6><label class="toggleButton"><toggle checked="viewModel.tile.workbook.keepOriginalContentSize" on-change="setDynamicImageForWorkbookTile()"></toggle><span class="keepOriginSizeTileMessage" localize="TileEditor_SetKeepOriginalContentSize"/></label></section></div></section></section></section><section class="banner"><ul><li ng-if="viewModel.canRestoreDefaults()"><pbi-button label="TileEditor_UseDefaultText" kind="text" ng-click="restoreDefaults()"></pbi-button></li><li><pbi-button label="TileEditor_TechnicalDetails" kind="text" ng-click="showTechnicalDetailsDialog()"></pbi-button></li></ul></section><footer><fieldset class="buttons"><pbi-button label="PBI_Button_Label_Back" ng-if="viewModel.tile.isTemporary" ng-click="back()"></pbi-button><pbi-button label="PBI_Button_Label_Apply" primary="true" ng-disabled="tileEditorForm.$invalid || !viewModel.isDirty() || !viewModel.isValid()" ng-click="saveChangesAndExit()"></pbi-button><pbi-button label="PBI_Button_Label_Cancel" ng-click="closeTileEditorWithoutSaving()"></pbi-button></fieldset></footer></div></ng-form>'),
e.put("views/tileGallery.html",'<div class="addTilesView paneLayout"><header><h3 class="primaryHeading" localize="Add_Tile_Experience_Add_Tile"></h3><h3 class="secondaryHeading" localize="Add_Tile_Experience_Select_Source"></h3></header><section class="contentContainer"><div class="tilesGroup" ng-repeat="tileGroup in $ctrl.tileGroups"><h4 class="headerText" ng-bind="::tileGroup.title"></h4><ul class="tilesContainer"><li class="tile" ng-repeat="tile in tileGroup.tiles" ng-class="{selected: $ctrl.selectedTile.id === tile.id}" ng-click="$ctrl.select(tile)"><i class="glyphicon glyph-large icon {{::tile.iconClass}}"></i><h5 class="tileTitle" ng-bind="::tile.title" ng-attr-title="{{::tile.title}}"></h5></li></ul></div></section><footer><div class="buttons"><pbi-button label="PBI_Button_Label_Next" primary="true" ng-disabled="!$ctrl.selectedTile" ng-click="$ctrl.next()"></pbi-button><pbi-button label="PBI_Button_Label_Cancel" ng-click="$ctrl.closeTileGalleryPane()"></pbi-button></div></footer></div>'),e.put("views/usageBarMenuItemView.html",'<div class="usageBarMenuItemBlock"><div class="{{labelClass}}">{{text}}</div><div class="toptext">{{usageDescription}}</div><section class="usageBar"><div class="bar usedSpace"></div><div class="bar freeSpace"></div></section></div>'),e.put("views/usageBarView.html",'<div class="usageBarBlock"><div class="toptext">{{usageBarModel.usageDescription}}</div><section class="usageBar"><div class="bar selfUsed"></div><div class="bar othersUsed"></div><div class="bar freeSpace"></div></section><section class="legends"><span class="square selfUsed"></span><div class="textstyle">{{usageBarModel.selfUsageInUnit}}</div><span ng-switch on="viewModel.isMyWorkspace"><div class="textstyle" localize="QuotaManagement_OwnedByMe" ng-switch-when="true"></div><div class="textstyle" localize="QuotaManagement_OwnedByUs" ng-switch-when="false"></div></span><span class="square othersUsed"></span><div class="textstyle">{{usageBarModel.otherUsageInUnit}}</div><div class="textstyle" localize="QuotaManagement_OwnedByOthers"></div></section><section class="limit"><div class="limitnumber">{{viewModel.quotaLimitInUnit}}</div><div class="limitline"></div></section></div>'),e.put("views/userGroupHeaderView.html",'<header class="userGroupHeader"><h1><span class="name" ng-bind="viewModel.isMyWorkspace ? viewModel.userName : viewModel.activeGroup.displayName"></span><span class="servicePlan" localize="QuotaManagement_FreeUser" ng-if="!viewModel.isPremiumUser"></span><span class="servicePlan" localize="QuotaManagement_ProTrialUser" ng-if="viewModel.userHasFreeTrial && !viewModel.userHasPremiumPlan && viewModel.isMyWorkspace"></span><span class="servicePlan" localize="QuotaManagement_ProUser" ng-if="viewModel.userHasPremiumPlan && viewModel.isMyWorkspace"></span></h1></header>'),e.put("views/viewContentPack.html",'<div class="sliderContentView"><div class="viewContentPack"><user-group-header view-model="userGroupHeader" feature-switch-not="breadcrumbNavigationEnabled"></user-group-header><div class="tableArea" ng-switch="contentPacks.length> 0" feature-switch-class="breadcrumbNavigationEnabled"><table class="viewContentPackTable" ng-switch-when="true"><tbody><tr><th class="contentPackName" localize="Publish_ContentPackName"></th><th class="publishedTo" localize="Publish_ContentPackPublishedTo"></th><th class="datePublished" localize="Publish_ContentPackDatePublished"></th><th class="actions" localize="Publish_ContentPackActions"></th></tr><tr ng-repeat="user in contentPacks"><td class="name"> <span ng-bind="user.displayText"/>&nbsp;&nbsp;<span ng-show="user.isDirty" class="indicator glyphicon pbi-glyph-warning glyph-small" localize-tooltip="PublishContentPack_ChangesTooltip"></span></td><td class="publishedTo" ng-bind="user.publishedTo"></td><td class="datePublished" ng-bind="user.publishTime | date:\'MMM d, yyyy\'"></td><td class="performAction noOptions"><a href="" ng-click="editContentPack(user.providerId)" class="editContentack linkSection"><span localize="Publish_EditContentPack"></span></a> &nbsp;|&nbsp;<a href="" ng-click="deleteContentPack(user.providerKey)" class="deleteContentPack linkSection"><span localize="Publish_DeleteContentPack"></span></a></td></tr></tbody></table><div class="viewContentPackTableEmpty unselectable" ng-switch-when="false"><i class="glyphicon pbi-glyph-warning glyph-med warningIcon"></i><h2 localize="ContentPack_NoContentPackWarningTitle"></h2><p localize="ContentPack_NoContentPackWarningText"></p><a href="http://go.microsoft.com/fwlink/?LinkId=623862" target="_blank" localize="GetData_LearnMore"></a></div></div></div></div>'),e.put("views/warningBar.html",'<div class="warningBar"><span class=\'warning\'><i class=\'glyphicon pbi-glyph-error icon\'></i></span><div class=\'errorMessage\'>{{viewModel.text}}</div><div class=\'button officeStyleLink\' ng-if="viewModel.type === 1" localize="ErrorBar_FixItText" ng-click="onFixItClick()"></div><div class=\'button officeStyleLink\' ng-if="viewModel.type === 2" localize="ErrorBar_NoText" ng-click="onNoClick()"></div><div class=\'button officeStyleLink\' ng-if="viewModel.type === 2" localize="ErrorBar_YesText" ng-click="onYesClick()"></div></div>'),e.put("views/waterMarkMessage.html",'<div class="waterMarkMsg unselectable"><i class="glyphicon" ng-class="{true: \'pbi-glyph-error glyph-med\', false: \'pbi-glyph-warning glyph-med warningIcon\'}[config.mode]"></i><div ng-if="config.imgClass" ng-class="config.imgClass"></div><div ng-switch="config.canEdit"><div ng-switch-when="true"><h2 class="title" ng-bind="config.titleNonShared"></h2><p class="content" ng-bind="config.contentNonShared"></p></div><div ng-switch-when="false"><h2 class="title" ng-bind="config.titleShared"></h2><p class="content" ng-bind="config.contentShared"></p><p ng-bind="config.contact"></p></div></div><p ng-if="config.linkAction"><span ng-bind="config.linkDescription"></span><span class="linkText" ng-mousedown="config.linkAction()" ng-bind="config.linkText"></span></p></div>'),e.put("views/workbookAppBar.html",'<div class="workbookAppBarContent appBar trimmedTextWithEllipsis unselectable"><div class="appBarSection left"><ul><li class="workbookAppBarItemNotClickable"><span class="excelOnlineText" localize="WorkbookAppBar_ExcelOnline"></span></li><li class="appBarDivider"></li><li class="edit-menu" ng-class="{workbookAppBarItemNotClickable: !isEditEnabled()}"> <button dropdown-menu dropdown-items="editMenuActions" dropdown-class="workbookAppBarMenu" dropdown-dark-theme="viewModeState.getMode() === 0" dropdown-on-item-selected="editMenuActionSelected(selected)" ng-disabled="!isEditEnabled()" localize-tooltip="{{getEditButtonTooltipLocId()}}" dynamic-tooltip-update tabindex="0"><span localize="WorkbookAppBar_EditButton"></span><i class="glyphicon pbi-glyph-chevrondownmedium glyph-mini"></i></button></li></ul></div><div class="appBarSection right"><ul><li ng-switch="getRefreshDataStatus()" class="appBarText refreshStatus workbookAppBarItemNotClickable"><div ng-switch-when="0"><span ng-bind="refreshInformationText"></span></div><div ng-switch-when="1"> <button ng-click="showRefreshHistory()"><i class="glyphicon pbi-glyph-warning"></i></button><span ng-bind="refreshInformationText"></span></div><div ng-switch-when="2"><i class="glyphicon pbi-glyph-info" tooltip tooltip-config="refreshNotSupportedTooltip"></i><span ng-bind="refreshInformationText"></span></div></li><li class="reload" ng-class="{workbookAppBarItemNotClickable: !isWorkbookLoaded()}"> <button ng-disabled="!isWorkbookLoaded()" ng-click="reloadClicked()"><i class="glyphicon pbi-glyph-refresh"></i><span localize="WorkbookAppBar_ReloadButton"></span></button></li><li class="data-menu" id="data" ng-class="{workbookAppBarItemNotClickable: !isWorkbookLoaded()}"> <button ng-disabled="!isWorkbookLoaded()" dropdown-menu dropdown-items="dataMenuActions" dropdown-class="workbookAppBarMenu" dropdown-on-item-selected="dataMenuActionSelected(selected)" tabindex="0"><i class="glyphicon pbi-glyph-dataset"></i><span localize="WorkbookAppBar_DataButton"></span><i class="glyphicon pbi-glyph-chevrondownmedium glyph-mini"></i></button></li><li ng-class="{workbookAppBarItemNotClickable: !isPinToDashboardEnabled()}"> <button class="pinToDashboard" ng-disabled="!isPinToDashboardEnabled()" ng-click="pinClicked()" localize-tooltip="{{getPinButtonTooltipLocId()}}" dynamic-tooltip-update><i class="glyphicon pbi-glyph-pinned"></i><span localize="WorkbookAppBar_PinWorkbookElementButton"></span></button></li></ul></div></div>'),e.put("views/workbookContainer.html",'<div id="workbookContainerWrapper" class="workbookContainerContent"><workbook-discoverability-toast class="discoverabilityToast"></workbook-discoverability-toast><workbook-app-bar view-model="viewModel" ng-if="workbookAppBarIncluded"></workbook-app-bar><spinner class="centeredSpinner" ng-show="!isEmbeddedWorkbookReady && !embeddedWorkbookFailed"></spinner><iframe name="workbookEWAIsolation" class="workbookEWAIsolation" src="/ewaIsolation.cshtml" ng-if="isEmbeddedWorkbookDataReady" ng-class="{\'fullSizeFrame\': !workbookAppBarIncluded }"></iframe></div>'),e.put("views/workbookDiscoverabilityToast.html",'<div class="workbookDiscoverabilityToast pbi-animate" ng-show="viewModel.showDiscoverabilityToast"><div class="arrow"></div><div class="title" localize="WorkbookPinDiscoverability_Title"></div><div class="message" localize="WorkbookPinDiscoverability_Message"></div><div class="gotItBtn"><pbi-button label="TutorialPopup_GotIt" primary="true" ng-click="dismissToast()"></pbi-button></div><i class="glyphicon pbi-glyph-pinned"></i></div>'),e.put("views/contentProviderStore/contentProviderChildTile.html",'<a><div class="childTitle" ng-bind="::viewModel.title | uppercase"/><div class="childDescription" ng-bind="::viewModel.descriptionTrustedHtml"/></a>'),e.put("views/contentProviderStore/contentProviderEventTile.html",'<div ng-click="handleClick()" class="eventTile"><content-provider-tile-body></content-provider-tile-body></div>'),e.put("views/contentProviderStore/contentProviderLinkTile.html",'<a href="{{::href}}" class="fwLinkTile" target="_blank"><content-provider-tile-body></content-provider-tile-body></a>'),e.put("views/contentProviderStore/contentProviderLocalFileTile.html",'<div ng-click="chooseFile()" class="localFileTile"><content-provider-tile-body></content-provider-tile-body></div>'),e.put("views/contentProviderStore/contentProviderNormalTile.html","<div><content-provider-tile-body></content-provider-tile-body></div>"),e.put("views/contentProviderStore/contentProviderSplash.html",'<div class="contentProviderSplash"><div ng-class="{welcome: screenState == 0}" class="container"><h1 ng-if="screenState == 0" localize="GetData_WelcomeTitle" class="title"></h1><h1 ng-if="screenState == 1" localize="GetData_GetData" class="title"></h1><h1 ng-if="screenState == 2" class="title">{{getSplashTitleForCurrentGroup()}}</h1><div ng-if="screenState == 0" class="desc"><div localize="GetData_WelcomeDescLine1"></div><div localize="GetData_WelcomeDescLine2"></div></div><div ng-if="screenState == 2 && !isMyWorkspace()" class="desc"><div localize="Groups_Splash_Description1"></div><div localize="Groups_Splash_Description2"></div></div><section class="helpSection"><span localize="GetData_TutorialLinkPreface_Text"></span><a localize="GetData_Try_This_Tutorial_Or_Watch_A_Video_1" href="https://go.microsoft.com/fwlink/p/?LinkId=522081" target=" _blank"></a><span localize="GetData_Try_This_Tutorial_Or_Watch_A_Video_2"></span><a localize="GetData_Try_This_Tutorial_Or_Watch_A_Video_3" href="javascript:void(0)" class="intoVideoButton" ng-click="showIntroductionVideoModal()"></a></section><section class="dataSourceTiles"><article class="dataSourceTileGroup"><h2 localize="GetData_ContentLibrary_Title"></h2><div class="dataSourceTile" ng-click="navigateToCategory(2, \'splashPage\')" ng-if="featureSwitchOrgAppsEnabled"><div class="tileContent"><h localize="GetData_MyOrganization" class="dataSourceTitle"></h><div localize="GetData_MyOrganizationDesc" class="dataSourceDesc"></div></div> <button class="getBtn biButton primary"><div localize="GetData_Get" class="btnLabel trimmedTextWithEllipsis" localize-tooltip="GetData_Get"></div><i class="glyphicon pbi-glyph-getdata glyph-small getDataIcon"></i></button></div><div class="dataSourceTile" id="serviceAppTile" ng-click="navigateToCategory(1, \'splashPage\')" ng-if="showServicesTile"><div class="tileContent"><h localize="GetData_Services" class="dataSourceTitle"></h><div localize="GetData_ServicesDesc" class="dataSourceDesc"></div></div> <button class="getBtn biButton primary"><div localize="GetData_Get" class="btnLabel trimmedTextWithEllipsis" localize-tooltip="GetData_Get"></div><i class="glyphicon pbi-glyph-getdata glyph-small getDataIcon"></i></button></div><div class="separator"></div><footer><a ng-click="navigateToCategory(4, \'splashPage\')" href="javascript:void(0)"><i class="glyphicon pbi-glyph-paste glyph-small"></i> &nbsp;<span localize="GetData_Samples" class="text"></span></a></footer></article><article class="dataSourceTileGroup"><h2 localize="GetData_UploadOrConnectData_Title"></h2><div class="dataSourceTile" ng-click="navigateToCategory(3, \'splashPage\')"><div class="tileContent"><h localize="GetData_Files" class="dataSourceTitle"></h><div localize="GetData_FilesDesc" class="dataSourceDesc"></div></div> <button class="getBtn biButton primary"><div localize="GetData_Get" class="btnLabel trimmedTextWithEllipsis" localize-tooltip="GetData_Get"></div><i class="glyphicon pbi-glyph-getdata glyph-small getDataIcon"></i></button></div><div class="dataSourceTile" ng-click="navigateToCategory(6, \'splashPage\')"><div class="tileContent"><h localize="GetData_Databases" class="dataSourceTitle"></h><div localize="GetData_Databases_Desc" class="dataSourceDesc"></div></div> <button class="getBtn biButton primary"><div localize="GetData_Get" class="btnLabel trimmedTextWithEllipsis" localize-tooltip="GetData_Get"></div><i class="glyphicon pbi-glyph-getdata glyph-small getDataIcon"></i></button></div><footer><a class="skipBtn" ng-click="navigateToContentList()" ng-if="conceptualModelEnabled() && inGroupWelcomeView()"><span localize="ContentList_SkipGetData" class="text"></span></a></footer></article></section></div></div>'),e.put("views/contentProviderStore/contentProviderSplashIntroVideoModal.html",'<iframe ng-src="https://go.microsoft.com/fwlink/?LinkID=761006" allowfullscreen></iframe><span localize="GetData_TutorialLinkPreface_Text"></span><a href="https://go.microsoft.com/fwlink/?LinkId=780853 " localize="GetData_Watch_Our_Video_Course_Or_Try_This_Tutorial_1" target="_blank"></a><span localize="GetData_Watch_Our_Video_Course_Or_Try_This_Tutorial_2"></span><a class="tutorialLink" localize="GetData_Watch_Our_Video_Course_Or_Try_This_Tutorial_3" href="https://go.microsoft.com/fwlink/p/?LinkId=522081" target="_blank"></a>'),e.put("views/contentProviderStore/contentProviderStore.html",'<div class="sliderContentView contentProviderStore" ng-class="{splashState: isSplashState()}"><div class="navigation"><div class="backBtn" ng-click="navigateToHome()" ng-class="{welcome: screenState == 0 && isSplashState()}" feature-switch-not="breadcrumbNavigationEnabled"><i class="glyphicon pbi-glyph-arrowleft"></i> <span class="currentGroupLabel" ng-attr-title="{{getCurrentGroupName()}}">{{getCurrentGroupName()}}</span></div><ul class="categoryContainer"><li class="categoryHeader"><span localize="GetData_ContentLibrary_Title" localize-tooltip="GetData_ContentLibrary_Title"></span></li><li class="category" ng-class="{\'selected\':viewModel.selectedCategory==2}" ng-if="featureSwitchOrgAppsEnabled" ng-click=" navigateToCategory(2, \'navPane\')"><i class="glyphicon pbi-glyph-emi glyph-small"></i><span ng-bind="::getCategoryDisplayName(2)"></span></li><li class="category" ng-class="{\'selected\':viewModel.selectedCategory==1}" ng-click="navigateToCategory(1, \'navPane\')"><i class="glyphicon pbi-glyph-chromerestore glyph-small"></i><span ng-bind="getCategoryDisplayName(1)"></span></li><li class="category" ng-class="{\'selected\':viewModel.selectedCategory==4}" ng-click="navigateToCategory(4, \'navPane\')"><i class="glyphicon pbi-glyph-paste glyph-small"></i><span ng-bind="::getCategoryDisplayName(4)"></span></li><li class="categoryHeader"><span localize="GetData_UploadOrConnectData_Title" localize-tooltip="GetData_UploadOrConnectData_Title"></span></li><li class="category" ng-class="{\'selected\':viewModel.selectedCategory==3 }" ng-click="navigateToCategory(3, \'navPane\')"><i class="glyphicon pbi-glyph-save glyph-small"></i><span ng-bind="::getCategoryDisplayName(3)"></span></li><li class="category" ng-class="{\'selected\':viewModel.selectedCategory==6}" ng-click="navigateToCategory(6, \'navPane\')"><i class="drum-icon"></i><span ng-bind="::getCategoryDisplayName(6)" ng-attr-title="{{getCategoryDisplayName(6)}}"></span></li></ul><ul class="categoryContainer bottomStack"><li class="category"><i class="glyphicon pbi-glyph-link glyph-small"></i><a target="_blank" href="http://go.microsoft.com/fwlink/?LinkID=613515"><span localize="GetData_AddYourContent" localize-tooltip="GetData_AddYourContent"></span></a></li><li class="category"><i class="glyphicon pbi-glyph-link glyph-small"></i><a target="_blank" href="http://go.microsoft.com/fwlink/?LinkID=613519"><span localize="GetData_FindAPartner" localize-tooltip="GetData_FindAPartner"></span></a></li><li class="category"><i class="glyphicon pbi-glyph-link glyph-small"></i><a target="_blank" href="https://go.microsoft.com/fwlink/?LinkId=522424"><span localize="GetData_SubmitAnIdea" localize-tooltip="GetData_SubmitAnIdea"></span></a></li></ul></div><div class="contentProviderStoreContent"><div class="topBar"><div class="breadcrumb" ng-if="!isSplashState()" feature-switch-class="breadcrumbNavigationEnabled"><span><span class="link" localize="NavigationPane_GetData" ng-click="navigateToGetData()"></span></span><span ng-if="viewModel.selectedCategory"><i class="glyphicon pbi-glyph-chevronrightmedium glyph-micro"></i> <span class="link" ng-class="{current: !viewModel.selectedContentProviderTile}" ng-click="navigateToCategory(viewModel.selectedCategory, \'breadcrumb\')">{{getCategoryDisplayName(viewModel.selectedCategory)}}</span></span><span ng-if="viewModel.selectedContentProviderTile"><i class="glyphicon pbi-glyph-chevronrightmedium glyph-micro"></i> <span class="link current">{{viewModel.selectedContentProviderTile.title}}</span></span></div><div class="search" ng-class="{\'highlighted\': viewModel.searchKeyword}" ng-show="viewModel.searchBoxVisible"> <input ng-model="viewModel.searchKeyword"/><i class="glyphicon pbi-glyph-search glyph-small"></i></div></div><content-provider-tile-browser ng-hide="!shouldShowProviderTiles" tiles="viewModel.contentProviderTiles" selected-content-provider-tile="viewModel.selectedContentProviderTile" navigate-to-category="navigateToCategory" has-content-provider-loaded="viewModel.hasContentProviderLoaded" is-splash-state="isSplashState"></content-provider-tile-browser><content-provider-local-file selected-file="selectedLocalFile" is-update-from-element-flow="false" ng-if="isLocalFileSelected"></content-provider-local-file><content-provider-configuration/></div><content-provider-splash></content-provider-splash></div>'),e.put("views/contentProviderStore/contentProviderTileBody.html",'<div class="tileHolder"><div class="tileBody"><div ng-if="viewModel.iconCSSClass" class="providerIcon {{::viewModel.iconCSSClass}}"/><div ng-if="!viewModel.iconCSSClass" class="providerIcon urlIcon" style="background-image:url({{::viewModel.iconUrl}})"/><div class="text"> <span class="title">{{::viewModel.title}}</span></div></div></div>'),e.put("views/contentProviderStore/contentProviderTileBrowser.html",'<div class="tileContainer dataSourceList"><div ng-if="currentCategory === 2 && visibleTiles.length === 1" class="header" localize="PublishContentPack_FirstContentPack"></div><div ng-if="showNoSearchResultText" class="noSearchResultText" localize="GetData_NoSearchResultsFound"></div><load-notification hide="isSplashState() || hasContentProviderLoaded" message="contentProviderLoadingMessage"></load-notification><div class="tile" ng-repeat="contentProviderTile in tiles" ng-class="{\'selected\': selectedContentProviderTile==contentProviderTile}" ng-switch on="contentProviderTile.contract.configurationUIstyle"><content-provider-normal-tile ng-switch-when="0" view-model="contentProviderTile" class="tileContent" ng-click="navigateToTile($index, true);"></content-provider-normal-tile><content-provider-normal-tile ng-switch-when="1" view-model="contentProviderTile" class="tileContent" ng-click="navigateToTile($index, true);"></content-provider-normal-tile><content-provider-normal-tile ng-switch-when="2" view-model="contentProviderTile" class="tileContent" ng-click="navigateToTile($index, true);"></content-provider-normal-tile><content-provider-local-file-tile ng-switch-when="3" view-model="contentProviderTile" class="tileContent" ng-click="navigateToTile($index, true);" on-cancel="clearSelection()"></content-provider-local-file-tile><content-provider-link-tile ng-switch-when="4" view-model="contentProviderTile" class="tileContent" ng-click="navigateToTile($index, false);"></content-provider-link-tile><content-provider-event-tile ng-switch-when="5" view-model="contentProviderTile" class="tileContent" ng-click="navigateToTile($index, false);"></content-provider-event-tile></div><div class="detailPane" ng-class="{\'grouping\': selectedContentProviderTile.tileGrouping.groupingChildItems}"><div class="detailPaneArrow"></div><div class="accordion" ng-if="!selectedContentProviderTile.tileGrouping.groupingChildItems"><i class="close glyphicon pbi-glyph-close glyph-mini" ng-click="closeDetailPane()"></i><div class="title" ng-bind="selectedContentProviderTile.title" ng-attr-title="{{selectedContentProviderTile.title}}"></div><div class="publishMetadata" ng-if="selectedContentProviderTile.publisher"><div><span ng-bind="getPublishMetaData(selectedContentProviderTile.publisher)"></span> <span ng-if="selectedContentProviderTile.emailAddress">-<a ng-bind-attr="{href: selectedContentProviderTile.emailAddressAsLink}" ng-bind="selectedContentProviderTile.emailAddress"></a></span></div><div><span ng-bind="getPrettyDate(selectedContentProviderTile.publishDate)"></span></div></div><div class="detailPaneContent"><div class="detailContainer"><div class="descriptionContainer"><div class="description" ng-class="{\'short\': selectedContentProviderTile.usePBIDesktop}" ng-bind-html="selectedContentProviderTile.descriptionTrustedHtml"></div><div class="more-information" ng-if="selectedContentProviderTile.usePBIDesktop"><i class="glyphicon glyph-small pbi-glyph-info"></i><span localize="GetData_DownloadDesktopInfo" localize-fragments><pbi-link fragment-index="0" guid="824921" label="GetData_LearnMoreAboutDesktop"></pbi-link></span></div></div><div class="connectContainer"> <button class="primary connect detailPaneConnectBtn" ng-click="connect()"><div ng-if="!selectedContentProviderTile.usePBIDesktop" class="label trimmedTextWithEllipsis" localize="GetData_Connect" localize-tooltip="GetData_Connect"></div><div ng-if="selectedContentProviderTile.usePBIDesktop" class="label trimmedTextWithEllipsis" localize="GetData_DownloadDesktop" localize-tooltip="GetData_DownloadDesktop"></div><i class="glyphicon pbi-glyph-getdata"></i></button><a class="learnMoreLink" ng-if="selectedContentProviderTile.learnMoreUrl && !selectedContentProviderTile.usePBIDesktop" target="_blank" href="{{selectedContentProviderTile.learnMoreUrl}}" localize="GetData_LearnMore"></a></div></div></div></div><div class="accordion grouping" ng-if="selectedContentProviderTile.tileGrouping.groupingChildItems"><a ng-click="closeDetailPane()"><i class="close glyphicon pbi-glyph-close glyph-mini"></i></a><div class="groupingSection"><div class="groupingTitle" ng-bind="selectedContentProviderTile.title" ng-attr-title="{{selectedContentProviderTile.title}}"></div><div class="groupingSrollWrapper"><div class="groupingScrollArea"><div class="groupingIntroduction"><div class="groupingDescription"><span ng-bind="getLocalizedValue(selectedContentProviderTile.descriptionLocalizationKey)"></span><a class="learnMoreLink" ng-if="selectedContentProviderTile.learnMoreUrl" target="_blank" href="{{selectedContentProviderTile.learnMoreUrl}}" localize="GetData_LearnMore"></a></div><hr/><div class="groupingInstruction" localize="GetData_GroupingInstruction"/></div><div class="childContainer"><content-provider-child-tile ng-repeat="childContentProviderTile in selectedContentProviderTile.tileGrouping.groupingChildItems | orderBy:[\'sortPriority\', \'title\'] track by $index" ng-click="selectChildTile(childContentProviderTile)" view-model="childContentProviderTile" class="childTile" ng-class="{\'activeChild\': childContentProviderTile==selectedChildContentProvider}"></content-provider-child-tile></div></div><div class="reservation"></div></div><div class="groupingConnectContainer"> <button class="primary connect group" ng-disabled="!selectedChildContentProvider" ng-click="childConnect()"><span localize="GetData_Connect"></span><i class="glyphicon pbi-glyph-getdata"></i></button></div></div></div></div><div><div class="extraInfo" ng-if="currentCategory === 2 && visibleTiles.length === 1"><div><h3 localize="PublishContentPack_AddDataToMyOrgTitle"></h3></div><span localize="PublishContentPack_AddDataToMyOrgText" localize-fragments><a fragment-index="0" localize="GetData_LearnMore" href="http://go.microsoft.com/fwlink/?LinkID=616059" target="_blank"></a></span></div></div></div>'),e.put("views/insights/insights.html",'<div class="sliderContentView insightsSliderContentView"><insights-canvas view-model="viewModel.insightsCanvasModel"></insights-canvas></div>'),e.put("views/qna/qnaContainer.html",'<div class="dashboardContainerView isNavigationPaneEnabled qnaMode" ng-class="{isMainContentDisabled: collapsiblePaneMode !== 0,                isSelectedTileHighlighted: collapsiblePaneMode === 1}" ng-switch="modelsSupportQna"><div class="mainContent" ng-switch-when="true"><div class="header" ng-cloak><div class="qnaAppBar appBar"><div class="appBarSection left"><ul><li> <button class="backBtn" ng-click="navigation.navigateBack()"><i class="glyphicon pbi-glyph-arrowleft glyph-small"></i><span class="activeDashboardLabel appBarTitle displayOnSmallScreen" localize="QnA_ExitQnA"></span></button></li></ul></div><div class="appBarSection right" ng-if="newQnaEnabled"><ul><li class="pinBtn" ng-if="pinIconState.visible && !!pinIconState.enabled" ng-switch=""> <button id="pinVisualBtn" class="in_navigationBtn infoNavActionItem" localize-tooltip="PinVisual_ToolTip" ng-click="pinQnAVisual($event)"><i class="glyphicon pbi-glyph-pinned pinButton glyph-small"></i><span class="appBarMenuItem" localize="PinVisual_ToolTip"></span></button></li></ul></div></div><div class="dashboardControlsWrapper" ng-if="!newQnaEnabled" ng-cloak><div class="legacyQnaWrapper"><div class="qnaQuestionBoxWrapper"><question-box-container get-additional-o-data-filter="getAdditionalODataFilter" interpret-listener="infoNavContainerInterpretListener" output="questionBoxOutput" usage-reporting-enabled="allowQnaDataCollection" models="viewModel.models"></question-box-container><span ng-if="modelSupportsQna" class="qnaStart smallFontSize"><a ng-click="showQnaStart()" localize="QnaStart_EntryLink"></a></span></div><section class="infoNavActions"><span ng-if="pinIconState.visible" ng-switch="!!pinIconState.enabled"><span id="pinVisualBtn" class="in_navigationBtn infoNavActionItem" localize-tooltip="PinVisual_ToolTip" ng-click="pinQnAVisual($event)" ng-switch-when="true"><i class="glyphicon pbi-glyph-pinned pinButton"></i></span><span id="pinVisualBtn" class="in_navigationBtn infoNavActionItem infoNavActionItemDisabled" localize-tooltip="PinVisual_DisabledForReportPagesToolTip" ng-switch-when="false"><i class="glyphicon pbi-glyph-pinned pinButton"></i></span></span><span id="userFeedbackBtn" class="in_navigationBtn infoNavActionItem" ng-if="questionBoxOutput.showQnaFeedback" localize-tooltip="UtteranceFeedbackTooltip" ng-click="questionBoxOutput.showUserFeedbackDialog()"><i class="glyphicon pbi-glyph-flag"></i></span></section></div></div></div><div class="dashboardSliderMain"><div class="infoNavVisualizationModeView"><info-nav-container host-service="infoNavHostService" question-box-output="questionBoxOutput" interpret-listener="infoNavContainerInterpretListener" usage-reporting-enabled="allowQnaDataCollection" models="viewModel.models" get-additional-o-data-filter="getAdditionalODataFilter"></info-nav-container></div></div></div><div class="waterMarkMsg unselectable" ng-switch-when="false"><i class="glyphicon pbi-glyph-warning glyph-med warningIcon"></i><p>{{::unsupportedModelMessage}}</p></div></div>'),e.put("views/rowLevelSecurity/rowLevelSecurity.html",'<div class="sliderContentView"><div class="layoutTop"><div class="backToDashboard section"><div class="sliderContentHeader ms-font-weight-light ms-font-color-neutralSecondary"><span localize="RowLevelSecurity_Title"></span></div></div></div><div class="layoutBottom"><div ng-if="!!memberManagementEnabled"><div class="rowLevelSecurityPage disabledPage" ng-if="!viewModel.model.cloudRlsEnabled || (viewModel.manage.rolesLoaded && viewModel.manage.roles.length === 0)"><span class="disabledPrimaryText" localize="RowLevelSecurity_MovedPrimaryText"></span><div class="disabledSecondaryText"><p><span localize="RowLevelSecurity_MovedSecondaryText"></span></p><p><span localize="RowLevelSecurity_MovedTertiaryText"></span><a href="https://go.microsoft.com/fwlink/?LinkID=785016" target="_blank" localize="RowLevelSecurity_Moved_LearnMore"></a></p></div><hr><a href="https://go.microsoft.com/fwlink/?LinkID=734971" target="_blank" localize="RowLevelSecurity_Moved_DownloadDesktop"></a></div><row-level-security-manage view-model="viewModel.manage" impersonate-role="impersonateRole" ng-if="!(!viewModel.model.cloudRlsEnabled || (viewModel.manage.rolesLoaded && viewModel.manage.roles.length === 0))"></row-level-security-manage></div><div ng-if="!memberManagementEnabled"><row-level-security-disabled-legacy ng-if="!viewModel.model.cloudRlsEnabled" view-model="viewModel"></row-level-security-disabled-legacy><row-level-security-legacy-manage ng-if="!!viewModel.model.cloudRlsEnabled" view-model="viewModel.manage" impersonate-role="impersonateRole"></row-level-security-legacy-manage></div></div></div>'),e.put("views/settings/manageDatasets.html",'<div class="mainContent"><div class="header" ng-cloak><div class="dashboardAppBar appBar" ng-if="$ctrl.inDatasetsView()"><div class="appBarSection left"><ul feature-switch-not="breadcrumbNavigationEnabled"><li class="label workspaceLabel"> <button class="appBarTitle" title="{{$ctrl.activeGroupName}}" ng-click="$ctrl.navigateToContentList()" ng-disabled="!$ctrl.conceptualModelEnabled" ng-bind="$ctrl.activeGroupName"></button></li><li class="label breadcrumbLabel"><i class="glyphicon pbi-glyph-arrowright glyph-small"></i></li><li class="label datasetsLabel"><span class="appBarTitle" ng-if="$ctrl.activeTab === 1" localize="NavigationPane_ManageDatasets"></span><span class="appBarTitle" ng-if="$ctrl.activeTab === 2" localize="NavigationPane_StreamingData"></span></li></ul></div><div class="appBarSection right"><ul><li class="label right" ng-if="$ctrl.activeTab === 1"> <button ng-click="$ctrl.navigateToGetData()" localize-tooltip="ManageDatasets_AddDataset"><i class="glyphicon pbi-glyph-add glyph-small icon"></i><span class="appBarMenuItem" localize="ManageDatasets_AddDataset"></span></button></li><li class="label right" ng-if="$ctrl.activeTab === 2"> <button ng-click="$ctrl.showStreamingDatasetGalleryPane()" localize-tooltip="ManageDatasets_AddStreamingDataset"><i class="glyphicon pbi-glyph-add glyph-small icon"></i><span class="appBarMenuItem" localize="ManageDatasets_AddStreamingDataset"></span></button></li></ul></div></div></div><div class="dashboardSliderMain"><div class="manageDatasetsPane flexbox"><section class="manageDatasetsOptionsList item-auto"><div class="optionTab label-med" ng-class="{selected: $ctrl.activeTab === 1}" ng-click="$ctrl.setActiveTab(1)" ng-if="$ctrl.conceptualModelEnabled" localize="NavigationPane_ManageDatasets"></div><div class="optionTab label-med" ng-class="{selected: $ctrl.activeTab === 2}" ng-click="$ctrl.setActiveTab(2)" localize="NavigationPane_StreamingData"></div></section><section><div class="search"> <input placeholder="{{$ctrl.placeholderText}}" ng-model="$ctrl.searchFilter" ng-model-options="{ debounce: 300 }" fast-keydown="$ctrl.resetSearchOnEsc($event)" autofocus/></div></section><section class="contentContainer item-fill"><section ng-if="$ctrl.activeTab === 1"><section class="headerSection"><table><thead class="fixed-header"><tr><th class="datasetNameCell"> <button ng-click="order(\'displayName\')"> <span localize="ManageDatasets_Name"/>&nbsp;<span ng-if="predicate === \'displayName\'"><i class="glyphicon pbi-glyph-chevrondownmedium glyph-small" ng-show="reverse"></i><i class="glyphicon pbi-glyph-chevronupmedium glyph-small" ng-hide="reverse"></i></span></button></th><th class="lastRefreshCell"> <button ng-click="order(\'lastRefreshTime\')"> <span localize="ManageDatasets_LastRefresh"/>&nbsp;<span ng-if="predicate === \'lastRefreshTime\'"><i class="glyphicon pbi-glyph-chevrondownmedium glyph-small" ng-show="reverse"></i><i class="glyphicon pbi-glyph-chevronupmedium glyph-small" ng-hide="reverse"></i></span></button></th><th class="nextRefreshCell"> <button ng-click="order(\'nextRefreshTime\')"> <span localize="ManageDatasets_NextRefresh"/>&nbsp;<span ng-if="predicate === \'nextRefreshTime\'"><i class="glyphicon pbi-glyph-chevrondownmedium glyph-small" ng-show="reverse"></i><i class="glyphicon pbi-glyph-chevronupmedium glyph-small" ng-hide="reverse"></i></span></button></th><th class="optionsCell"></th></tr></thead></table></section><section class="bodySection"><table class="friend"><tbody><tr class="datasetRow" ng-repeat-start="model in filteredModels= (modelService.sanitizedCopyAndEditModels | then:$ctrl.mapDateObjects | filter: {displayName: $ctrl.searchFilter, isHidden: \'!true\'}) | orderBy:predicate:reverse" ng-click="$ctrl.toggleRowState($index)"><td class="datacell datasetNameCell" ng-class="{\'thinBorder\': $ctrl.activePosition === $index, \'publishing\': $ctrl.isPackagePublishInProgress(model.contract.packagePublishStatus)}"><span class="datasetDisplayName trimmedTextWithEllipsis" ng-bind="model.displayName" ng-attr-title="{{model.displayName}}"></span><dataset-icon-container view-model="model" refresh-related="false"/></td><td class="datacell lastRefreshCell" ng-class="{\'thinBorder\': $ctrl.activePosition === $index, \'publishing\': $ctrl.isPackagePublishInProgress(model.contract.packagePublishStatus)}"><dataset-icon-container class="refreshDatasetContainer" view-model="model" refresh-related="true"/> <span class="lastRefreshTime">{{$ctrl.convertRefreshTimeToJsDateTime(model.contract.lastRefreshTime) | date:\'h:mm a MM.dd.yyyy\'}}</span></td><td class="datacell nextRefreshCell" ng-class="{\'thinBorder\': $ctrl.activePosition === $index, \'publishing\': $ctrl.isPackagePublishInProgress(model.contract.packagePublishStatus)}"> {{$ctrl.convertRefreshTimeToJsDateTime(model.contract.nextRefreshTime) | date:\'h:mm a MM.dd.yyyy\'}}</td><td class="datacell optionsCell" ng-class="{\'thinBorder\': $ctrl.activePosition === $index, \'publishing\': $ctrl.isPackagePublishInProgress(model.contract.packagePublishStatus)}"> <button ng-click="$ctrl.showOptions(model, $index); $event.stopPropagation();" dropdown-overlay-invoke="datasetMenu" prefer-left="true" need-blur="true" disable-animation="true"><i class="glyphicon moreIcon pbi-glyph-more"></i></button></td></tr><tr ng-repeat-end ng-if="$ctrl.activePosition === $index"><td class="metadatacell" colspan="3"><metadata-container view-model="model"/></td><td class="metadatacell" ng-click="$ctrl.toggleRowState($index)"><i class="glyphicon pbi-glyph-chevronupmedium glyph-small"/></td></tr></tbody></table></section></section><section ng-if="$ctrl.activeTab === 2"><section class="headerSection"><table><thead class="fixed-header"><tr><th class="datasetNameCell"> <button ng-click="order(\'displayName\')"> <span localize="ManageDatasets_Name"/>&nbsp;<span ng-if="predicate === \'displayName\'"><i class="glyphicon pbi-glyph-chevrondownmedium glyph-small" ng-show="reverse"></i><i class="glyphicon pbi-glyph-chevronupmedium glyph-small" ng-hide="reverse"></i></span></button></th><th class="datasetTypeCell"> <button><span localize="StreamingDatasetModel_Type"></span></button></th><th class="associatedDashboardsCell"> <button><span localize="StreamingDatasetModel_UsedInDashboards"></span></button></th><th class="historicalCell"> <button><span localize="StreamingDatasetModel_Historical"></span></button></th><th class="realTimeActionsCell"> <button><span localize="StreamingDatasetModel_Actions"></span></button></th></tr></thead></table></section><section class="bodySection"><table class="friend" ng-if="modelService.streamingModels.length> 0"><tbody><tr ng-repeat="model in filteredModels= (modelService.streamingModels | filter: {displayName: $ctrl.searchFilter}) | orderBy:predicate:reverse"><td class="datacell datasetNameCell"><span class="datasetDisplayName trimmedTextWithEllipsis" ng-bind="model.displayName" ng-attr-title="{{model.displayName}}"></span><dataset-icon-container view-model="model" refresh-related="false"/></td><td class="datacell datasetTypeCell trimmedTextWithEllipsis" ng-bind="::$ctrl.getModelType(model)" ng-attr-title="::$ctrl.getModelType(model)"></td><td class="datacell associatedDashboardsCell trimmedTextWithEllipsis" ng-bind="::$ctrl.getDashboardsForModel(model)" ng-attr-title="{{::$ctrl.getDashboardsForModel(model)}}"></td><td class="datacell historicalCell trimmedTextWithEllipsis" ng-switch="model.realTimeMode"><span ng-switch-when="1" localize="Disabled"></span><span ng-switch-when="2" localize="Enabled"></span></td><td class="datacell realTimeActionsCell"><div class="actionContents"><i class="glyphicon glyph-small actionIcon {{::action.iconClass}}" ng-repeat="action in $ctrl.getStreamingDatasetActions(model) track by action.action" ng-click="$ctrl.streamingDatasetActionSelected(model, $parent.$index, action)" ng-attr-title="{{::action.text}}"></i></div></td></tr></tbody></table><div class="noDatasets" ng-if="modelService.streamingModels.length === 0"><i class="glyphicon glyph-large pbi-glyph-info"></i><h3 localize="StreamingDatasetModel_NoStreamingDatasets"></h3><span localize="StreamingDatasetModel_NoStreamingDatasetsInfo" localize-fragments><a fragment-index="0" href="https://go.microsoft.com/fwlink/?linkid=822071" target="_blank" localize="LearnMore"></a></span></div></section></section></section><dropdown-overlay dropdown-overlay-name="datasetMenu"><ul class="angular-dropdown active datasetActionList"><li ng-repeat="item in $ctrl.datasetMenuActions" class="dropdown-item" ng-mousedown="$ctrl.datasetMenuActionSelected(item); $event.stopPropagation();"><a href="" target="_blank"><div class="dropdown-content"><div class="dropdown-label" ng-bind="::item.text"></div></div></a></li></ul></dropdown-overlay></div></div></div>'),
e.put("views/settings/refreshStatusView.html",'<div class="topMarginTextContainer" ng-switch="lastRefreshFailed"><div class="lastRefreshResult" ng-switch-when="false"><span ng-bind="lastRefreshStatus"/></div><div class="lastRefreshFailed" ng-switch-when="true"><inline-name-value-pairs name-value-pairs="lastRefreshHistoryDetails" show-title="true" detail-expand="false" class="expandableBlockWarning"><span ng-bind="lastRefreshStatus"/><br/><span ng-bind="lastRefreshFailureMessage"/></inline-name-value-pairs></div><div><span ng-bind="nextRefreshTime" ng-show="viewModel.refreshSettings && viewModel.refreshSettings.refreshEnabled"/></div></div>'),e.put("views/settings/refreshWelcomeView.html",'<div class="topMarginTextContainer"><div class="sectionPoints"><div ng-if="!enterpriseGatewayETLEnabled"><div localize="SettingsDataset_Welcome_Before_Configuration"></div><ol class="gatewayInstructionList"><li><div class="installGateway" ng-switch="isPersonalGatewayRunning"><div ng-switch-when="false"><div class="gatewayInstallInfo"><i class="arrowRight glyphicon pbi-glyph-rightarrow glyph-mini"></i><span localize="SettingsDataset_Install_OnPrem_Gateway" localize-fragments><a fragment-index="0" localize="SettingsDataset_OnPrem_Gateway_InstallNow" target="_blank" href={{::onPremGatewayDownloadLink}}></a><a fragment-index="1" localize="SettingsDataset_OnPrem_Gateway_LearnMore" target="_blank" href="http://go.microsoft.com/fwlink/?LinkID=534232"></a></span></div><div class="gatewayInstallInfoSubtitle"><i class="infoCircle glyphicon pbi-glyph-info glyph-small"></i><div class="gatewayDownloadInfoContainer"><span localize="SettingsDataset_OnPrem_Gateway_InstallPage"></span><a ng-bind=::onPremGatewayDownloadLink target="_blank" href={{::onPremGatewayDownloadLink}}></a></div></div></div><div ng-switch-when="true"><i class="check glyphicon pbi-glyph-checkmark glyph-small"></i> <span localize="SettingsDataset_Install_OnPrem_Gateway_Succeed" localize-fragments><span fragment-index="0">{{personalGateway.gatewayAnnotation.machineName}}</span><a fragment-index="1" localize="SettingsDataset_OnPrem_Gateway_LearnMore" target="_blank" href="https://go.microsoft.com/fwlink/?LinkId=627094"></a></span></div></div></li><li><div class="provideCredential"><div ng-switch="isPersonalGatewayRunning"><span ng-switch-when="false" localize="SettingsDataset_Provide_Credential"></span><div ng-switch-when="true" ng-switch="viewModel.datasources && viewModel.hasDatasourceWithWrongCredentials"><div ng-switch-when="true"><i class="arrowRight glyphicon pbi-glyph-rightarrow glyph-mini"></i><span localize="SettingsDataset_Provide_Credential"></span></div><div ng-switch-when="false"><i class="check glyphicon pbi-glyph-checkmark glyph-small"></i><span localize="SettingsDataset_Provide_Credential_Valid"></span></div></div></div></div></li><li><div class="SetSchedule" ng-switch="refreshScheduleComplete"><div ng-switch-when="false"><i class="arrowRight glyphicon pbi-glyph-rightarrow glyph-mini" ng-show="isPersonalGatewayRunning && viewModel.datasources &&!viewModel.hasDatasourceWithWrongCredentials"></i><span localize="SettingsDataset_SetScheduleRefresh"></span></div><div ng-switch-when="true"><i class="check glyphicon pbi-glyph-checkmark glyph-small"></i><span localize="SettingsDataset_SetScheduleRefresh_Done"></span></div></div></li></ol></div><div ng-if="enterpriseGatewayETLEnabled && selectGatewayModel.enterpriseGateways.length < 1"><div localize="SettingsDataset_Welcome_Before_Configuration"></div><ol class="gatewayInstructionList"><li><div class="installGateway" ng-switch="isPersonalGatewayRunning"><div ng-switch-when="false"><div class="gatewayInstallInfo"><i class="arrowRight glyphicon pbi-glyph-rightarrow glyph-mini"></i><span localize="SettingsDataset_Install_OnPrem_Gateway" localize-fragments><a fragment-index="0" localize="SettingsDataset_OnPrem_Gateway_InstallNow" target="_blank" href="//go.microsoft.com/fwlink/?LinkID=534231"></a><a fragment-index="1" localize="SettingsDataset_OnPrem_Gateway_LearnMore" target="_blank" href="//go.microsoft.com/fwlink/?LinkId=627094"></a></span></div><div class="gatewayInstallInfoSubtitle"><i class="infoCircle glyphicon pbi-glyph-info glyph-small"></i><div class="gatewayDownloadInfoContainer"><span localize="SettingsDataset_OnPrem_Gateway_InstallPage"></span> <a target="_blank" href="//go.microsoft.com/fwlink/?LinkID=534231">//go.microsoft.com/fwlink/?LinkID=534231</a></div></div></div><div ng-switch-when="true"><i class="check glyphicon pbi-glyph-checkmark glyph-small"></i> <span localize="SettingsDataset_Install_OnPrem_Gateway_Succeed" localize-fragments><span fragment-index="0">{{personalGateway.gatewayAnnotation.machineName}}</span><a fragment-index="1" localize="SettingsDataset_OnPrem_Gateway_LearnMore" target="_blank" href="https://go.microsoft.com/fwlink/?LinkId=627094"></a></span></div></div></li><li><div class="provideCredential"><div ng-switch="isPersonalGatewayRunning"><span ng-switch-when="false" localize="SettingsDataset_Provide_Credential"></span><div ng-switch-when="true" ng-switch="viewModel.datasources && viewModel.hasDatasourceWithWrongCredentials"><div ng-switch-when="true"><i class="arrowRight glyphicon pbi-glyph-rightarrow glyph-mini"></i><span localize="SettingsDataset_Provide_Credential"></span></div><div ng-switch-when="false"><i class="check glyphicon pbi-glyph-checkmark glyph-small"></i><span localize="SettingsDataset_Provide_Credential_Valid"></span></div></div></div></div></li><li><div class="SetSchedule" ng-switch="refreshScheduleComplete"><div ng-switch-when="false"><i class="arrowRight glyphicon pbi-glyph-rightarrow glyph-mini" ng-show="isPersonalGatewayRunning && viewModel.datasources &&!viewModel.hasDatasourceWithWrongCredentials"></i><span localize="SettingsDataset_SetScheduleRefresh"></span></div><div ng-switch-when="true"><i class="check glyphicon pbi-glyph-checkmark glyph-small"></i><span localize="SettingsDataset_SetScheduleRefresh_Done"></span></div></div></li></ol><span localize="SettingsDataset_AboutEnterpriseGateway" localize-fragments><a fragment-index="0" localize="SettingsDataset_OnPrem_Gateway_LearnMore" target="_blank" href="//go.microsoft.com/fwlink/?LinkId=627094"></a></span></div></div></div>'),e.put("views/settings/settingsCloseAccountView.html",'<div class="dashboardSettings" ng-cloak><div class="deleteAccountSettings"><h1 class="dashboardSettingsTitle" localize="Settings_CloseAccount"></h1><div ng-if="::canCloseAccount"><div class="description" localize="Settings_CloseAccount_Description"></div><div class="inputTitle" localize="Settings_CloseAccount_WhyAreYouClosingYourAccount"></div> <select ng-model="reason"><option localize="Settings_CloseAccount_Reason_PlaceHolder" value="" disabled selected></option><option localize="Settings_CloseAccount_Reason_HardToUse" value="Settings_CloseAccount_Reason_HardToUse"></option><option localize="Settings_CloseAccount_Reason_TooManyErrors" value="Settings_CloseAccount_Reason_TooManyErrors"></option><option localize="Settings_CloseAccount_Reason_MissingFeatures" value="Settings_CloseAccount_Reason_MissingFeatures"></option><option localize="Settings_CloseAccount_Reason_NotValuableEnoughToMe" value="Settings_CloseAccount_Reason_NotValuableEnoughToMe"></option><option localize="Settings_CloseAccount_Reason_DidntNeedToUseIt" value="Settings_CloseAccount_Reason_DidntNeedToUseIt"></option><option localize="Settings_CloseAccount_Reason_ForgotAboutIt" value="Settings_CloseAccount_Reason_ForgotAboutIt"></option><option localize="Settings_CloseAccount_Reason_HaventHadTimeToUseIt" value="Settings_CloseAccount_Reason_HaventHadTimeToUseIt"></option><option localize="Settings_CloseAccount_Reason_DecidedToUseOtherSoftware" value="Settings_CloseAccount_Reason_DecidedToUseOtherSoftware"></option></select><div class="inputTitle" localize="Settings_CloseAccount_AnythingElseYouWantToTellUs"></div><textarea ng-model="userComment" rows="3"></textarea></div><div class="warning inlineWarning" ng-if="::!canCloseAccount"><div class="message"><span class="glyphicon glyph-small pbi-glyph-info"></span><span localize="Settings_CloseAccount_ContactYourAdmin"></span></div></div> <button class="closeAccountBtn primary" ng-disabled="::!canCloseAccount" ng-click="promptCloseAccount()" localize="Settings_CloseAccount"></button></div></div>'),e.put("views/settings/settingsDashboardsView.html",'<div class="settingsDatasets"><div class="settingsDatasetsLeftColumn" ng-if="viewModel && viewModel.dashboards && viewModel.dashboards.length !== 0"><div class="datasetsList"><ul><li ng-repeat="dashboard in viewModel.dashboards | orderBy: \'name\' track by dashboard.dashboardId" ng-click="onDashboardSelected(dashboard.objectId)" ng-class="{selected: viewModel.currentDashboardId === dashboard.objectId}"><span ng-bind="::dashboard.name"/></li></ul></div></div><div class="settingsDatasetsRightColumn" ng-if="viewModel && viewModel.dashboards && viewModel.dashboards.length !== 0"><div ng-repeat="dashboard in viewModel.dashboards track by dashboard.objectId"><settings-dashboard view-model="dashboard" ng-if="viewModel.currentDashboardId === dashboard.objectId"/></div></div></div>'),e.put("views/settings/settingsDashboardView.html",'<form name="dashboardSettingsForm" class="dashboardSettings" ng-cloak><div class="dashboardSettingsTitle">{{::sectionTitle}}</div><div class="dashboardSettingsSection"><div class="dashboardSettingsSectionTitle" localize="SettingsDashboard_QnA_Title"/><div class="dashboardSettingsInfo"><span localize="SettingsDashboard_QnA_Information" localize-fragments><a fragment-index="0" href="https://go.microsoft.com/fwlink/?LinkId=808174" target="_blank" localize="SettingsDashboard_QnA_LearnMore"/></span></div><div class="dashboardSettingsCheckbox"> <label><input name="qnaEnabled" ng-model="qnaEnabled" type="checkbox"/><span class="dashboardSettingsQnaEnabledSpan" localize="SettingsDashboard_QnA_QnaEnabledMessage"/></label></div><div class="warning" ng-show="qnaEnabled && !viewModel.hasQnaSupportedModel"><i class="glyphicon pbi-glyph-warning glyph-small"/><span localize="SettingsDashboard_QnA_QnaUnavailableWarning"/></div></div><div class="dashboardSettingsSection"><div class="dashboardSettingsSectionTitle" localize="SettingsDashboard_Gravity_Title"/><div class="dashboardSettingsInfo"><span localize="SettingsDashboard_Gravity_Info"/></div><div class="dashboardSettingsCheckbox"> <label><input name="gravityEnabled" ng-model="gravityEnabled" type="checkbox"/><span class="dashboardSettingsGravityEnabledSpan" localize="SettingsDashboard_Gravity_GravityEnabledMessage"/></label></div><div class="warning" ng-show="gravityEnabled"><i class="glyphicon pbi-glyph-warning glyph-small"></i><div localize="SettingsDashboard_Gravity_GravityNoticeMessage"></div></div></div><div class="dashboardSettingsSection" ng-hide="!dataClassifications || dataClassifications.length==0"><div class="dashboardSettingsSectionTitle" localize="SettingsDashboard_DataClassification_Title"/><div> <select ng-options="option.id as option.name for option in dataClassifications" ng-model="dataClassificationId" ng-change="onDataClassificationIdChanged()"></select><div class="warning" ng-show="isNonDefaultDataClassificationSelected"><i class="glyphicon pbi-glyph-warning glyph-small"></i><div><span localize="SettingsDashboard_DataClassification_NoDefaultChoosed"></span><span class="defaultDataClassificationOption">{{defaultDataClassification.name}}</span></div></div></div></div><div class="dashboardSettingsSection"> <button id="dashboardSettingsApply" class="biButton primary" localize="SettingsDataset_ApplyButtonText" ng-disabled="!dashboardSettingsForm.$dirty" ng-click="applyChanges()"/> <button class="biButton" localize="SettingsDataset_DiscardButtonText" ng-disabled="!dashboardSettingsForm.$dirty" ng-click="discardChanges()"/></div></form>'),e.put("views/settings/settingsDatasetFeaturedQuestionsView.html",'<div><div class="featuredQuestionsSection" ng-if="modelSupportsQna"><div class="sectionHeader" ng-click="sectionExpanded = !sectionExpanded"><i class="glyphicon" ng-class="{true:\'refreshSectionExpander pbi-glyph-caretdownright\', false:\'refreshSectionExpander pbi-glyph-caretright\'}[sectionExpanded]"></i><span class="refreshSectionTitle" localize="SettingsDataset_FeaturedQuestions_Title"></span></div><div class="expandableInnerContainer" ng-if="sectionExpanded"><div class="prompt" localize="SettingsDataset_FeaturedQuestions_Prompt"></div><div class="question" ng-repeat="q in questions"> <input class="mediumFontSize" type="text" ng-model="q.utterance" ng-class="{hasError: q.utterance.length === 0}" ng-change="onChange(q)" maxlength="{{maxUtteranceLength}}" aria-label="{{inputAriaLabel}}"/><a class="deleteQuestion" ng-click="deleteQuestion($index)" localize-tooltip="SettingsDataset_FeaturedQuestions_DeleteQuestion"><i class="glyphicon pbi-glyph-close glyph-mini"></i></a><div class="emptyQuestion smallFontSize" ng-if="!q.isValid"><i class="glyphicon pbi-glyph-error glyph-small"></i> <span>{{q.validationMessage}}</span></div></div><div ng-if="questions.length < maxQuestions"><a href="" class="addQuestion" ng-click="addQuestion()" localize="SettingsDataset_FeaturedQuestions_AddAnotherQuestion"></a></div><div class="buttonsContainer"> <button class="primary" localize="SettingsDataset_ApplyButtonText" ng-click="applyChanges()" ng-disabled="!isDirty || !isValid"></button> <button localize="SettingsDataset_DiscardButtonText" ng-click="discardChanges()" ng-disabled="!isDirty"></button></div></div></div></div>'),e.put("views/settings/settingsDatasetsView.html",'<div class="settingsDatasets"><div class="settingsDatasetsLeftColumn" ng-if="filteredModels && filteredModels.length !== 0"><div class="datasetsList" ng-if="filteredModels"><ul><li ng-repeat="model in filteredModels | orderBy: \'displayName\' track by model.id" ng-click="onDatasetSelected(model.dbName)" ng-class="{selected: viewModel.currentDatasetId === model.id}"><span ng-bind="::model.displayName"/></li></ul></div></div><div class="settingsDatasetsRightColumn" ng-if="viewModel && viewModel.datasets"><div ng-repeat="dataset in viewModel.datasets"><settings-dataset view-model="dataset" ng-if="viewModel.currentDatasetId === dataset.modelId" storage-refresh-supported="storageRefreshSupported"></settings-dataset></div></div></div>'),e.put("views/settings/settingsDatasetView.html",'<div class="dataset" ng-cloak ng-switch="datasetPageReady"><div class="settingsDatasetsTitle"><span localize="SettingsDataset_Title"/><span ng-bind="viewModel.name"/></div><spinner ng-switch-when="false"></spinner><div class="settingsContainer" ng-switch-when="true"><inline-message ng-if="showHeaderMessage" display-icon="displayIcon" use-error-icon="storageSourceFileNotFound" use-error-background="storageSourceFileNotFound" class="warning"> {{headerMessage}} <a ng-show="showInstallPGWLink" target="_blank" href="//go.microsoft.com/fwlink/?LinkID=534231">{{headerLink}}</a> {{headerGatewayWarning}}<span ng-show="disabledEntireRefreshPageShowLearnMoreLink" localize="DataSourceSupport_LearnMoreMessage" localize-fragments><a fragment-index="0" localize="DataSourceSupport_LearnMore" target="_blank" href="http://support.powerbi.com/knowledgebase/articles/474669-refresh-data"/></span></inline-message><div class="tryProAccountButton" ng-if="isFreemiumUser && (isOnPremGatewayRequired || isCloudDirectQuery)"> <button class="biButton primary" ng-bind="tryProAccountButtonText" ng-show="isFreemiumUser && (isOnPremGatewayRequired || isCloudDirectQuery)" ng-click="tryProAccount()"></button></div><div ng-if="!disableEntireRefreshPage"><div class="takeoverContainer" ng-if="shouldTakeoverContainerShow()"><spinner ng-if="!isTakeoverStatusReady"></spinner><div ng-if="isTakeoverStatusReady" ng-bind-html="getTrustedHtml(viewModel.takeoverStatusText)"></div><div ng-if="!viewModel.takenOver && isTakeoverStatusReady" class="buttonsContainer"> <button class="primary" ng-click="showTakeoverDialog()" ng-bind="viewModel.takeoverButtonText"></button></div></div><div class="gatewayStatus" ng-if="gatewayStatusMessage" ng-bind="gatewayStatusMessage"></div><div class="expandableRefreshSections"><div ng-switch="firstTimeExperience && viewModel.takenOver" ng-if="!disableRefreshSection"><refresh-welcome ng-switch-when="true"></refresh-welcome><refresh-status ng-switch-when="false"><refresh-status></div><div><a href="" class="refreshHistory" localize="SettingsDataset_RefreshHistoryText" ng-click="showHistoryDialog()"></a></div><div ng-include="\'views/settings/settingsGateways.html\'" ng-if="isOnPremGatewayAllowed"></div><div ng-include="\'views/settings/settingsDatasourceCredentials.html\'" ng-if="!disableDatasourcesSection"></div><div ng-include="\'views/settings/settingsDatasourceScheduleRefresh.html\'" ng-if="!disableRefreshSection"></div><div ng-include="\'views/settings/settingsOneDriveCredentials.html\'" ng-if="showStorageConnection"></div><div ng-include="\'views/settings/settingsOneDriveRefresh.html\'" ng-if="showStorageRefresh"></div></div></div><div ng-include="\'views/settings/settingsQnaView.html\'"></div><dataset-parameters-dialog view-model="datasetParametersDialogParameters"></dataset-parameters-dialog><auth-dialog view-model="authDialogParameters" ng-if="authDialogParameters.showAuthDialog"></auth-dialog></div></div>'),e.put("views/settings/settingsDatasourceCredentials.html",'<div ng-if="::hasEditableDatasources" class="settingsDatasourceCredentials"><div class="refreshSectionHeader" ng-class="{disabledContainer : shouldDatasourceCredentialsDisabled()}" ng-click="viewModel.manageDataSourcesExpand = !viewModel.manageDataSourcesExpand" ng-switch on="enterpriseGatewayETLEnabled && selectGatewayModel.useEnterpriseGateway !== undefined && selectGatewayModel.useEnterpriseGateway"><i class="glyphicon" ng-class="{true:\'refreshSectionExpander pbi-glyph-caretdownright\', false:\'refreshSectionExpander pbi-glyph-caretright\'}[!shouldDatasourceCredentialsDisabled() && viewModel.manageDataSourcesExpand]"></i><span class="refreshSectionTitle" localize="SettingsDataset_ManageDataSources_Title" ng-switch-when="false"></span><span class="refreshSectionTitle" localize="SettingsDataset_ManageDataSources_Title_EnterpriseGateway" ng-switch-when="true"></span></div><div class="expandableInnerContainer" ng-show="!shouldDatasourceCredentialsDisabled() && viewModel.manageDataSourcesExpand" ng-switch="showDiscoverDatasourcesSpinner"><spinner ng-switch-when="true"></spinner><div ng-switch-when="false"><inline-message trace-details="datasourceTraceDetails" use-error-icon class="expandableBlockWarning" ng-show="viewModel.hasDatasourceWithWrongCredentials || viewModel.hasDirectQueryDatasourceWithMissingCredentials"><span ng-show="viewModel.hasDatasourceWithWrongCredentials" localize="SettingsDataset_ManageDataSources_Warning_YouNeedToProvideCredentials"></span><span ng-show="viewModel.hasDirectQueryDatasourceWithMissingCredentials" localize="SettingsDataset_ManageDataSources_Warning_DirectQueryMissingCredentials"></span></inline-message><div class="topMarginTextContainer"><table class="datasourceContainer"><tr ng-repeat="datasource in viewModel.datasources | orderBy:\'displayName\'"><th class="datasourceName"><span ng-bind-attr-once="{title:  datasource.fullName}" ng-bind="::datasource.displayName"></span><th><div class="statusContainer"><spinner ng-show="testConnectionProgressing(datasource)"></spinner><i class="glyphicon pbi-glyph-error glyph-small" title="{{datasource.testConnectionErrorMessage}}" ng-show="testConnectionFailed(datasource)"></i></div><a href="" class="dataSourceEditButton" localize="SettingsDataset_ManageDataSources_EditButtonText" ng-click="editDatasource(datasource)"></a></th></tr></table></div></div></div></div>'),e.put("views/settings/settingsDatasourceScheduleRefresh.html",'<div ng-if="::hasRefreshSchedule" class="settingsDatasourceScheduleRefresh"><div class="refreshSectionHeader" ng-class="{disabledContainer : shouldScheduleRefreshContainerDisabled()}" ng-click="viewModel.refreshSectionExpand = !viewModel.refreshSectionExpand"><i class="glyphicon" ng-class="{true:\'refreshSectionExpander pbi-glyph-caretdownright\', false:\'refreshSectionExpander pbi-glyph-caretright\'}[(firstTimeExperience && viewModel.takenOver) ? false : viewModel.refreshSectionExpand]"></i><span class="refreshSectionTitle" localize="SettingsDataset_ScheduleRefresh_Title"></span></div><div class="expandableInnerContainer" ng-show="viewModel.refreshSectionExpand"><div class="datasetSchedule" ng-cloak><div class="topMarginTextContainer" ng-class="{disabledContainer : !viewModel.takenOver}"><header localize="SettingsDataset_ScheduleRefresh_EnableRefresh_Title"></header><pbi-toggle ng-model="viewModel.refreshSettings.refreshEnabled" ng-disabled="shouldRefreshSettingsToggleDisabled()" ng-change="refreshSettingsToggleMouseUp()" no-label on-state-text="ToggleSwitchOn" off-state-text="ToggleSwitchOff"></pbi-toggle></div><fieldset class="inputContainer" ng-class="{disabledContainer : shouldRefreshSettingsDisabled()}" ng-disabled="shouldRefreshSettingsDisabled()"><div class="refreshFrequencyContainer"><header localize="SettingsDataset_ScheduleRefresh_RefreshFrequency_Title"></header> <select ng-model="viewModel.refreshFrequencyString" ng-options="key as value for (key, value) in ::viewModel.refreshFrequencies"/></div><section ng-if="viewModel.showRefreshTimeInfo"><div class="refreshTimeZoneContainer"><header localize="SettingsDataset_ScheduleRefresh_TimeZone"></header> <select ng-model="viewModel.refreshSettings.refreshTimeZoneId" ng-options="refreshTimeZone.key as refreshTimeZone.value for refreshTimeZone in viewModel.refreshTimeZonesViewModel"/></div><ul class="refreshFrequencyWeekDays" ng-if="viewModel.showWeekDays"><li ng-repeat="weekdayKey in ::viewModel.weekdayKeys"><pbi-checkbox label="{{::weekdayKey}}" ng-model="viewModel.refreshSettings.refreshDays[$index]" class="refreshFrequencyDay"></pbi-checkbox></li></ul><div ng-switch="isFreemiumUser"><div class="refreshWindowContainer" ng-switch-when="true"><header localize="SettingsDataset_ScheduleRefresh_TimeWindow"></header> <select ng-model="viewModel.refreshSettings.refreshTimeWindowIndex" ng-options="viewModel.refreshTimeWindows.indexOf(refreshTimeWindow) as refreshTimeWindow for refreshTimeWindow in viewModel.refreshTimeWindows"/><span class="updateAccountScheduleDataRefreshMessage" ng-bind="updateAccountScheduleDataRefreshMessage"/><div><button class="biButton primary" ng-bind="tryProAccountButtonText" ng-click="tryProAccount()"></button></div></div><div ng-switch-when="false"><div class="refreshProWindowContainer"><header localize="SettingsDataset_ScheduleRefresh_TimeProWindow"></header><div ng-repeat="time in viewModel.refreshSettings.refreshTimesHourly "> <select ng-model="time.refreshHourIndex" ng-options="viewModel.refreshTimeHourWindows.indexOf(refreshTimeHourWindow) as refreshTimeHourWindow for refreshTimeHourWindow in viewModel.refreshTimeHourWindows"/> <select ng-model="time.refreshMinuteIndex" ng-options="viewModel.refreshTimeMinuteWindows.indexOf(refreshTimeMinuteWindow) as refreshTimeMinuteWindow for refreshTimeMinuteWindow in viewModel.refreshTimeMinuteWindows"/> <select ng-model="time.refreshAmPmIndex" ng-options="viewModel.refreshTimeAmPmWindows.indexOf(refreshTimeAmPmWindow) as refreshTimeAmPmWindow for refreshTimeAmPmWindow in viewModel.refreshTimeAmPmWindows"/><i class="refreshTimeDeletButton glyphicon pbi-glyph-cancel glyph-mini" ng-click="removeRefreshTime($index)"></i><div class="invalidTimeWarning" ng-if="time.isDuplicate"><i class="invalidTimeErrorIcon glyphicon pbi-glyph-error glyph-small"></i><span localize="SettingsDataset_DuplicateTime"></span></div><div class="invalidTimeWarning" ng-if="time.isIncomplete"><i class="invalidTimeErrorIcon glyphicon pbi-glyph-error glyph-small"></i><span localize="SettingsDataset_IncompleteTime"></span></div></div></div><a href="" class="addRefreshTime" localize="SettingsDataset_Add_Refresh_Time" ng-show="canAddRefreshTime()" ng-click="addRefreshTime()"></a></div></div></section><div class="sendFailureEmail" ng-if="::!viewModel.isDirectQueryOrOnPremModel"><pbi-checkbox label="SettingsDataset_ScheduleRefresh_SendRefreshFailureEmail" ng-model="viewModel.refreshSettings.refreshNotificationEnabled"></pbi-checkbox></div></fieldset><div class="buttonsContainer"> <button class="biButton primary" localize="SettingsDataset_ApplyButtonText" ng-disabled="shouldSettingsDatasetButtonDisable()" ng-click="applyChanges()"></button> <button class="biButton" localize="SettingsDataset_DiscardButtonText" ng-disabled="shouldSettingsDatasetButtonDisable()" ng-click="discardChanges()"></button></div></div></div></div>'),e.put("views/settings/settingsEsriView.html",'<div class="dashboardSettings" ng-cloak><h class="dashboardSettingsTitle" localize="SettingsEsri_Title"/><div ng-if="esriVisualDisallowed"" class="dashboardSettingsSection"><inline-message class="inlineWarning"><span localize="SettingsEsri_OrganizationHasDisabled"></span></inline-message></div><div ng-if="!esriVisualDisallowed"" class="dashboardSettingsSection"><table class="dashboardSettingsCheckbox"><tr><td> <input id="esriVisualEnabled" type="checkbox" ng-model="esriSettings.esriVisualEnabled" ng-change="onSettingChange()"/></td><td class="dashboardSettingsInfo"><label class="settingDescription" localize="SettingsEsri_UseEsriMap" for="esriVisualEnabled"/></td></tr></table></div><div ng-if="!esriVisualDisallowed" class="dashboardSettingsSection"> <button id="dashboardSettingsApply" class="primary" localize="SettingsDataset_ApplyButtonText" ng-disabled="!isDirty" ng-click="applyChanges()"/> <button localize="SettingsDataset_DiscardButtonText" ng-disabled="!isDirty" ng-click="discardChanges()"/></div></div>'),e.put("views/settings/settingsGateways.html",'<div><div class="refreshSectionHeader" ng-class="{disabledContainer : shouldGatewaysContainerDisabled()}" ng-click="viewModel.gatewaysExpand = !viewModel.gatewaysExpand"><i class="glyphicon" ng-class="{true:\'refreshSectionExpander pbi-glyph-caretdownright\', false:\'refreshSectionExpander pbi-glyph-caretright\'}[viewModel.gatewaysExpand]"></i><span class="refreshSectionTitle" localize="SettingsDataset_GatewayConnection_Title"></span></div><div class="expandableInnerContainer" ng-show="viewModel.takenOver && viewModel.gatewaysExpand"><select-gateway ng-if="viewModel.takenOver" view-model="selectGatewayModel"></select-gateway><div class="buttonsContainer"> <button class="primary" localize="SettingsDataset_ApplyButtonText" ng-click="applyGatewaySelection()" ng-disabled="!selectGatewayModel.isDirty"></button> <button localize="SettingsDataset_DiscardButtonText" ng-click="discardGatewaySelection()" ng-disabled="!selectGatewayModel.isDirty"></button></div></div></div>'),e.put("views/settings/settingsGeneralView.html",'<div class="settingsDatasets"><div class="settingsDatasetsLeftColumn"><div class="datasetsList"><ul><li ng-repeat="subGroup in subGroups track by subGroup.type" ng-click="onSubgroupSelected(subGroup.type)" ng-class="{selected: viewModel.selectedSubgroupType === subGroup.type}"><span ng-bind="subGroup.name"></span></li></ul></div></div><div class="settingsDatasetsRightColumn" ng-switch="viewModel.selectedSubgroupType"><settings-privacy ng-switch-when="0" view-model="viewModel.privacy"></settings-privacy><settings-close-account ng-switch-when="1"></settings-close-account><settings-language ng-switch-when="2" view-model="viewModel.language"></settings-language><settings-plugins ng-switch-when="3" view-model="viewModel.plugins"></settings-plugins><settings-preview-features ng-switch-when="4"></settings-preview-features><settings-esri ng-switch-when="5" view-model="viewModel.esri"></settings-esri></div></div>'),e.put("views/settings/settingsLanguageView.html",'<form name="languageSettingsForm" class="dashboardSettings" ng-cloak><h class="dashboardSettingsTitle" localize="SettingsLanguage_Title"/><div class="dashboardSettingsSection"><div class="dashboardSettingsSectionTitle" localize="SettingsLanguage_SelectLanguage_Title"/><div class="dashboardSettingsSectionSubTitle"><span localize="SettingsLanguage_SelectLanguage_SubTitle" localize-fragments><a fragment-index="0" href="http://go.microsoft.com/fwlink/?LinkID=723835" target="_blank" localize="SettingsPrivacy_DataCollection_LearnMore"/></span></div><div class="dropdown"> <select ng-options="language.name for language in ::supportedLanguages track by language.code" ng-model="currentLanguage" ng-change="languageSelected()"></select><spinner ng-if="isLoading"></spinner></div></div><div class="dashboardSettingsSection"> <button id="dashboardSettingsApply" class="primary" localize="SettingsDataset_ApplyButtonText" ng-disabled="!languageSettingsForm.$dirty" ng-click="applyChanges()"/> <button localize="SettingsDataset_DiscardButtonText" ng-disabled="!languageSettingsForm.$dirty" ng-click="discardChanges()"/></div></form>'),e.put("views/settings/settingsOneDriveCredentials.html",'<div class="settingsOneDriveCredentials"><div class="refreshSectionHeader" ng-class="{disabledContainer : storageSourceFileNotFound}" ng-click="viewModel.manageStorageSourceExpand = !viewModel.manageStorageSourceExpand"><i class="glyphicon" ng-class="{true:\'refreshSectionExpander pbi-glyph-caretdownright\', false:\'refreshSectionExpander pbi-glyph-caretright\'}[viewModel.manageStorageSourceExpand]"></i><span class="refreshSectionTitle" localize="SettingsDataset_ManageStorageSource_Title"></span></div><div class="expandableInnerContainer" ng-show="viewModel.manageStorageSourceExpand" ng-switch="showDiscoverStorageSourcesSpinner"><spinner ng-switch-when="true"></spinner><div ng-switch-when="false"><inline-message trace-details="storageSourceTraceDetails" use-error-icon class="expandableBlockWarning" ng-show="testPackageConnectionFailed()"><span localize="SettingsDataset_ManageStorageSource_Warning_YouNeedToProvideCredentials"></span></inline-message><div><table class="datasourceContainer"><tr><th class="datasourceName"><span title="{{::getStorageSourceDisplayName()}}" ng-bind="getStorageSourceDisplayName()"></span></th><th><div class="statusContainer"><spinner ng-show="testPackageConnectionProgressing()"></spinner><i class="glyphicon pbi-glyph-error glyph-small" title="{{viewModel.storageSource.testConnectionErrorMessage}}" ng-show="testPackageConnectionFailed()"></i></div><a href="" class="dataSourceEditButton" localize="SettingsDataset_ManageDataSources_EditButtonText" ng-click="editStorageSource()"></a></th></tr></table></div></div></div></div>'),e.put("views/settings/settingsOneDriveRefresh.html",'<div class="settingsOneDriveRefresh"><div class="refreshSectionHeader" ng-class="{disabledContainer : storageSourceFileNotFound}" ng-click="viewModel.manageStorageRefreshExpand = !viewModel.manageStorageRefreshExpand"><i class="glyphicon" ng-class="{true:\'refreshSectionExpander pbi-glyph-caretdownright\', false:\'refreshSectionExpander pbi-glyph-caretright\'}[viewModel.manageStorageRefreshExpand]"></i><span class="refreshSectionTitle" localize="SettingsDataset_RefreshStorageSource_Title"></span></div><div class="expandableInnerContainer" ng-show="viewModel.manageStorageRefreshExpand" ng-switch="showDiscoverStorageSourcesSpinner"><spinner ng-switch-when="true"></spinner><div class="topMarginTextContainer" ng-switch-when="false"><header localize="SettingsDataset_Enable_PackageRefresh_Title"></header><inline-message trace-details="storageSourceTraceDetails" use-error-icon class="expandableBlockWarning" ng-show="testPackageConnectionFailed()"><span localize="SettingsDataset_ManageStorageSource_Warning_YouNeedToProvideCredentials"></span></inline-message><pbi-toggle ng-model="viewModel.contract.isPackageRefreshEnabled" ng-disabled="shouldPackageRefreshSettingsToggleDisabled()" ng-change="updateStorageSourceRefresh()" no-label on-state-text="ToggleSwitchOn" off-state-text="ToggleSwitchOff"></pbi-toggle></div></div></div>'),
e.put("views/settings/settingsPluginsView.html",'<div class="dashboardSettings" ng-cloak><h class="dashboardSettingsTitle" localize="SettingsPlugins_Title"/><div class="dashboardSettingsSection"><table class="dashboardSettingsCheckbox"><tr><td> <input id="developerModeSettingsCheckbox" type="checkbox" ng-model="pluginsSettings.developerMode" ng-change="applyChanges()"/></td><td class="dashboardSettingsInfo"><label class="settingDescription" localize="SettingsPlugins_DeveloperMode_Info" for="developerModeSettingsCheckbox"/><a href="http://aka.ms/powerbideveloperhelp" target="_blank" localize="SettingsPrivacy_DataCollection_LearnMore"/></td></tr></table></div></div>'),e.put("views/settings/settingsPrivacyView.html",'<div class="dashboardSettings" ng-cloak><h class="dashboardSettingsTitle" localize="SettingsPrivacy_Title"/><div class="dashboardSettingsSection"><div class="dashboardSettingsSectionTitle" localize="SettingsPrivacy_DataCollection_Title"/><table class="dashboardSettingsCheckbox"><tr><td> <input id="qnaDataCollection" type="checkbox" ng-model="privacySettings.allowQnaDataCollection" ng-change="onSettingChange()"/></td><td class="dashboardSettingsInfo"><label class="settingDescription" localize="SettingsPrivacy_DataCollection_Info" for="qnaDataCollection"/><a href="http://go.microsoft.com/fwlink/p/?LinkId=615884" target="_blank" localize="SettingsPrivacy_DataCollection_LearnMore"/></td></tr></table></div><div class="dashboardSettingsSection"> <button id="dashboardSettingsApply" class="primary" localize="SettingsDataset_ApplyButtonText" ng-disabled="!isDirty" ng-click="applyChanges()"/> <button localize="SettingsDataset_DiscardButtonText" ng-disabled="!isDirty" ng-click="discardChanges()"/></div></div>'),e.put("views/settings/settingsPublishedContentView.html",'<div class="settings"></div>'),e.put("views/settings/settingsQnaView.html",'<div class="expandableRefreshSections"><section class="qnaSection" ng-if="qna"><div class="sectionHeader" ng-click="viewModel.qnaSectionExpand = !viewModel.qnaSectionExpand"><i class="glyphicon" ng-class="{true:\'refreshSectionExpander pbi-glyph-caretdownright\', false:\'refreshSectionExpander pbi-glyph-caretright\'}[viewModel.qnaSectionExpand]"></i><span class="refreshSectionTitle" localize="SettingsDataset_QnaAndCortana_Title"></span></div><div class="expandableInnerContainer" ng-show="viewModel.qnaSectionExpand"><inline-message ng-if="qna.showOnPremiseSetting" display-icon="displayIcon" use-error-icon="storageSourceFileNotFound" use-error-background="storageSourceFileNotFound"><span><a class="onPremQna" localize="SettingsDataset_Qna_OnPremWarning"></a><a class="learnAboutOnPremQna" target="_blank" href="https://go.microsoft.com/fwlink/?LinkId=786785" localize="SettingsDataset_QnaOnPrem_LearnMore"></a></span></inline-message><div class="qnaOptions" ng-if="qna.showOnPremiseSetting"><pbi-checkbox label="SettingsDataset_Cortana_EnableQnaOption" ng-model="qna.powerBIQnaEnabled" ng-change="enableQna()"></pbi-checkbox></div><div class="qnaOptions" ng-if="qna.showCortanaSetting"><pbi-checkbox label="SettingsDataset_Cortana_EnableCortanaOption" ng-model="qna.cortanaEnabled" ng-change="enableCortana()"></pbi-checkbox></div><div class="qnaInfo" ng-if="qna.showCortanaSetting"><span localize="SettingsDataset_Cortana_InformationSharing"/></div><div class="buttonsContainer"> <button class="primary" localize="SettingsDataset_ApplyButtonText" ng-disabled="!viewModel.isQnaDirty" ng-click="qna.apply()"></button> <button localize="SettingsDataset_DiscardButtonText" ng-disabled="!viewModel.isQnaDirty" ng-click="qna.discard()"></button></div></div><settings-dataset-featured-questions view-model="viewModel"></settings-dataset-featured-questions></section></div>'),e.put("views/settings/settingsViewerView.html",'<div class="sliderContentView" ng-switch="isLoading"><div class="layoutTop"><div class="backToDashboard section"><div class="sliderContentHeader ms-font-weight-light ms-font-color-neutralSecondary"><span feature-switch-not="breadcrumbNavigationEnabled" localize="SettingsViewer_Title"></span><spinner class="settingsLoadingSpinner" ng-switch-when="true"></spinner></div></div></div><div class="layoutBottom" ng-switch-when="false"><div class="layoutLeft"><div class="settingsList"><ul><li ng-repeat="settingsGroup in settingsGroups" ng-click="onSettingsGroupSelected(settingsGroup.type)" ng-class="{selected: currentSettingsGroup === settingsGroup.type}"> <span>{{::settingsGroup.name}}</span></li></ul></div></div><div class="layoutRight"><div ng-switch on="selectedSettingsGroupTypeAsString()" feature-switch-class="breadcrumbNavigationEnabled"><settings-general ng-switch-when="General" view-model="viewModel.general"></settings-general><settings-dashboards ng-switch-when="Dashboards" view-model="viewModel.dashboards"></settings-dashboards><settings-datasets ng-switch-when="Datasets" view-model="viewModel.datasets"></settings-datasets><settings-workbooks ng-switch-when="Workbooks" view-model="viewModel.workbooks"></settings-workbooks><settings-published-content ng-switch-when="PublishedContent"></settings-published-content><settings-alerts ng-switch-when="Alerts"></settings-alerts><settings-communications ng-switch-when="Communications" view-model="viewModel.communications"></settings-communications></div></div></div></div>'),e.put("views/states/adminPortalState.html","<admin-portal></admin-portal>"),e.put("views/states/createChannelState.html",'<create-app-channel class="flexbox"></create-app-channel>'),e.put("views/states/devToolsViewState.html","<dev-tools-view></dev-tools-view>"),e.put("views/states/externalContentViewerState.html",'<content-provider-store active-dashboard="dashboardDataService.activeDashboard"></content-provider-store>'),e.put("views/states/gatewaysState.html","<gateways></gateways>"),e.put("views/states/insightsState.html",'<insights active-dashboard="dashboardDataService.activeDashboard"></insights>'),e.put("views/states/manageEmbedViewState.html",'<manage-embed-view view-model="viewModel.dashboardContainer.manageEmbedPane" dashboard-container="viewModel.dashboardContainer"></manage-embed-view>'),e.put("views/states/managePermissionsState.html","<permission-details></permission-details>"),e.put("views/states/manageStorageViewState.html",'<manage-storage-view view-model="viewModel.dashboardContainer.manageStoragePane" dashboard-container="viewModel.dashboardContainer"></manage-storage-view>'),e.put("views/states/permissionCenterState.html","<permission-center-home></permission-center-home>"),e.put("views/states/publishContentPackViewState.html",'<publish-content-pack-view view-model="viewModel.dashboardContainer.publishPane" dashboard-container="viewModel.dashboardContainer"></publish-content-pack-view>'),e.put("views/states/rowLevelSecurityState.html","<row-Level-Security></row-Level-Security>"),e.put("views/states/settingsViewerState.html","<settings-viewer></settings-viewer>"),e.put("views/states/shareViewState.html",'<share-view view-model="viewModel.dashboardContainer.sharePane" active-dashboard="dashboardDataService.activeDashboard"></share-view>'),e.put("views/states/viewContentPackViewState.html",'<view-content-pack view-model="viewModel.dashboardContainer.viewPane" dashboard-container="viewModel.dashboardContainer"></view-content-pack>'),e.put("views/tiles/compositeTile.html",'<div class="compositeTile" ng-class="{ fullLayout: viewModel.config.layoutType === 1 }"><div class="visualTile"><visual ng-if="!viewModel.isLoading" view-model="viewModel.visual" allow-deferred-rendering="::allowDeferredRendering"></visual></div></div>'),e.put("views/tiles/dashboardTile.html",'<li class="dashboardTile baseTile" in-viewport="onceInViewport()" in-viewport-context="{{::viewportContextSelector}}" in-viewport-offset="100%" ng-class="{selected: model.isSelected, readonly: isReadOnly(), showOptions: optionsMenuVisible, nonActionable: isNonActionable()}" ng-click="$event.stopPropagation()"><dashboard-tile-open-options ng-if="displayDashboardTileOpenOptions()" model="model"></dashboard-tile-open-options><div class="dashboardTileLayout" ng-if="inViewport" ng-click="openTile(disablePointerEvents, $event)"><section ng-if="::(inEditMobileLayoutMode() || displayDashboardTileShowIcon())"> <button ng-click="addTileToMobileView()" class="tileAction pinTile glyphicon pbi-glyph-pinned glyph-small showTileIcon" localize-tooltip="DashboardTile_ToggleVisibility" ng-if="displayDashboardTileShowIcon()"></button> <button ng-click="removeTileFromMobileView()" class="tileAction unpinTile glyphicon pbi-glyph-unpin glyph-small" localize-tooltip="DashboardTile_unpinTile" ng-if="::(!displayDashboardTileShowIcon())"></button></section><a class="urlTile" ng-attr-href="{{viewModel.href}}" ng-attr-target="{{viewModel.hrefTarget}}" rel="noopener noreferrer"><tile view-model="viewModel" disable-pointer-events="{{::disablePointerEvents}}" header-click-target="openNotification ? openNotifications(event) : openTile(true, event)"></tile></a><dashboard-tile-options-menu ng-if="displayDashboardTileOptionsMenuVisible()"></dashboard-tile-options-menu></div></li>'),e.put("views/tiles/dashboardTileOpenOptions.html",'<div class="moreOptions" localize-tooltip="NavigationPane_OpenMenu"> <button class="inFocusTileBtn" ng-click="inFocusTile($event);" ng-disabled="model.isLoading" ng-if="shouldShowInfocusButton()" localize-tooltip="TileEditor_InFocusTile"><i class="glyphicon pbi-glyph-miniexpand glyph-small"></i></button> <button class="openTileOptionsBtn" ng-click="setOptionsMenuVisibility(true, $event)"><i class="glyphicon pbi-glyph-more"></i></button></div>'),e.put("views/tiles/dashboardTileOptionsMenu.html",'<div class="tileOptionsMenu"> <button class="closeOptionsMenu" ng-click="setOptionsMenuVisibility(false, $event)"><i class="glyphicon pbi-glyph-close glyph-mini"></i></button><a class="openActionDescription mediumFontSize" ng-click="openTile(true, $event)" ng-attr-href="{{viewModel.href}}" ng-attr-target="{{viewModel.hrefTarget}}" rel="noopener noreferrer"><div class="actionInfo" ng-switch="::getOpenActionType()"><div ng-switch-when="0"><i class="glyphicon pbi-glyph-link glyph-small"></i><span class="openActionHeader trimmedTextWithEllipsis" localize="TileMenuOption_GoToURL"></span></div><div ng-switch-when="1"><i class="glyphicon pbi-glyph-comment glyph-small"></i><span class="openActionHeader trimmedTextWithEllipsis" localize="TileMenuOption_GoToQnA"></span></div><div ng-switch-when="2"><i class="glyphicon pbi-glyph-barchart glyph-small"></i><span class="openActionHeader trimmedTextWithEllipsis" localize="TileMenuOption_GoToReport"></span></div><div ng-switch-when="3"><i class="glyphicon pbi-glyph-excel glyph-small"></i><span class="openActionHeader trimmedTextWithEllipsis" localize="TileMenuOption_GoToWorkbook"></span></div><div ng-switch-when="4"><i class="glyphicon pbi-glyph-dataset glyph-small"></i><span class="openActionHeader trimmedTextWithEllipsis" localize="TileMenuOption_GoToDataset"></span></div></div><i class="glyphicon pbi-glyph-rightarrow glyph-small"></i><span class="actionText trimmedTextWithEllipsis" ng-bind="::getOpenActionDescriptionText()"></span></a><div class="optionsMenu" ng-click="$event.stopPropagation();"> <button class="inFocusTileBtn" ng-click="inFocusTile($event);" ng-disabled="model.isLoading" ng-if="shouldShowInfocusButton()" localize-tooltip="TileEditor_InFocusTile"><i class="glyphicon pbi-glyph-miniexpand glyph-small"></i></button> <button class="insightsBtn" localize-tooltip="Insights_GetRelatedInsights_Tooltip" ng-disabled="model.isLoading" ng-click="inFocusTile($event, true)" ng-if="isInsightsSupported()  && shouldShowInfocusButton()"><i class="glyphicon pbi-glyph-insight"></i></button> <button class="vcPinBtn" ng-click="pinTileFromDashboard($event)" ng-disabled="model.isLoading" ng-hide="!shouldShowPinButton();" localize-tooltip="PinVisual_ToolTip"><i class="glyphicon pbi-glyph-pinned"></i></button> <button class="vcAlertBtn" ng-click="showAlertsEditor($event)" ng-disabled="model.isLoading" ng-hide="::!shouldShowAlertsButton();" localize-tooltip="ManageAlerts_Tooltip"><i class="glyphicon pbi-glyph-bell"></i></button> <button class="vcExportBtn" ng-click="exportVisualData($event);" ng-if="::canExport" localize-tooltip="ExportData_MenuItem"><i class="glyphicon pbi-glyph-export glyph-small"></i></button> <button class="editTileBtn" ng-click="editTile($event);" ng-disabled="model.isLoading" localize-tooltip="TileEditor_PaneTitle_Details"><i class="glyphicon pbi-glyph-edit"></i></button> <button class="deleteTileBtn" ng-click="deleteTile();" localize-tooltip="TileEditor_DeleteTile"><i class="glyphicon pbi-glyph-delete"></i></button></div><div class="webContentWarning" ng-if="::viewModel.type === 1"><span localize="WebContentWarning_Widget" localize-tooltip="WebContentWarning_Widget"></span><a href="https://go.microsoft.com/fwlink/?LinkID=759648" localize="WebContentWarning_LearnMore" target="_blank"></a></div></div>'),e.put("views/tiles/errorPlaceholder.html",'<div class="errorPlaceholder"><div class="errorContainer"><div class="errorPlaceholderIcon glyphicon pbi-glyph-error glyph-med" title="{{errorText}}"></div><div class="errorPlaceholderTextContainer"><span class="errorPlaceholderText" ng-bind="errorText"></span><a ng-if="errorDetails" class="getDetailsText clickAction" localize="ErrorPlaceHolder_SeeDetails" ng-click="seeErrorDetails()"></a></div></div></div>'),e.put("views/tiles/iframeTile.html",'<div class="iframeTile"><iframe class="iframeSelf" ng-if="!viewModel.isLoading" frameborder="0" ng-src="{{iframeSource}}" sandbox="allow-scripts allow-popups allow-same-origin allow-forms" marginheight="0" marginwidth="0"></iframe></div>'),e.put("views/tiles/imageTile.html",'<div class="imageTile"><printable-image source="{{viewModel.imageUrl}}"></printable-image></div>'),e.put("views/tiles/modelTile.html",'<div class="modelTile"><printable-image source="{{imageUrl}}"></printable-image></div>'),e.put("views/tiles/providerTile.html",'<div class="dashboardTaskPaneTile" ng-click="openTile()"><div class="background" background-image="{{viewModel.backgroundImageUrl}}"></div><div class="dashboardTaskPaneTitle" ng-bind="viewModel.displayText"></div></div>'),e.put("views/tiles/reportTile.html",'<div class="explorationContainer" ng-switch="viewModel.isError"><exploration ng-switch-when="false" view-model="viewModel.exploration" disable-print="true"></exploration><error-placeholder ng-switch-when="true" error-text="viewModel.errorText"></error-placeholder></div>'),e.put("views/tiles/ssrsTile.html",'<div class="ssrsTile"><printable-image source="{{viewModel.imageUrl}}"></printable-image></div>'),e.put("views/tiles/tile.html",'<div class="tile baseTile" ng-class="{ noTitle: !viewModel.hasTitle(), largeHeader:largeHeader, noSubtitle: !viewModel.hasSubtitle() && viewModel.hasTitle() }"><div class="item-auto" ng-if="::(viewModel.type === 1)"><div class="webContentCorner"></div> <button class="webContentIcon" localize-tooltip="WebContentWarning_Widget" ng-click="onIconClick(getWebContentIcon(), $event)"><i class="glyphicon pbi-glyph-securityalert glyph-small"></i></button></div><header class="flexbox"> <button ng-repeat="icon in ::getIcons()" class="item-auto {{::icon.itemClass}}" ng-if="::icon.show()" title="{{::icon.tooltip()}}" ng-click="onIconClick(icon, $event)"><i class="glyphicon glyph-small {{::icon.iconClass}}"></i><span class="badge" ng-if="::icon.hasBadge" ng-bind="icon.badgeValueSetter()"></span></button><div class="headerText item-fill" ng-click="headerClickTarget({event: $event})"><div class="displayText" ng-bind="viewModel.getDisplayText()"></div><div class="flexbox"><span class="subDisplayText item-auto" ng-bind="viewModel.getSubDisplayText()"></span> <span class="subDisplayText item-auto" ng-show="viewModel.shouldPlaceBulletSeperator()"></span><span class="subDisplayText item-auto item-fill" bind-text-and-tooltip="viewModel.lastRefreshTimeInLocaleWithLabel()"></span></div></div></header><section><div class="loadingPlaceholder"><div class="loadingPlaceholderText glyphicon pbi-glyph-powerbi glyph-large"></div></div><div ng-show="!viewModel.isTileLoading && (!isError || shouldShowTileVisual())" class="tileBody unselectable" ng-class="::{nonInteractive: disablePointerEvents}" ng-switch on="::{{viewModel.type}}"><composite-tile view-model="viewModel.composite" ng-switch-when="0" allow-interactivity="{{::allowInteractivity}}"></composite-tile><iframe-tile view-model="viewModel.iframe" ng-switch-when="1"></iframe-tile><image-tile view-model="viewModel.image" ng-attr-title="{{viewModel.displayText}}" ng-switch-when="2"></image-tile><model-tile view-model="viewModel.model" ng-switch-when="3"></model-tile><ssrs-tile view-model="viewModel.ssrs" ng-switch-when="4"></ssrs-tile><workbook-tile view-model="viewModel.workbook" ng-switch-when="5"></workbook-tile><report-tile view-model="viewModel.reportTile" ng-switch-when="6"></report-tile><real-time-tile view-model="viewModel.realTime" ng-switch-when="8"></real-time-tile></div><error-placeholder ng-if="isError && !shouldShowTileVisual()" error-text="errorText" error-details="errorDetails"></error-placeholder></section></div>'),e.put("views/tiles/workbookTile.html",'<div class="workbookTile" ng-class="{hasTitle: title}" ng-switch="useLiveEwaControl"><iframe ng-src="{{::workbookTileUrl}}" ng-switch-when="true"/><printable-image source="{{viewModel.dynamicImageUrl}}" disable-animation="true" ng-class="{backgroundOriginalSize: viewModel.keepOriginalContentSize}" ng-switch-when="false"></printable-image> <img class="internalWorkbookTileImage" name="internalWorkbookTileImage" ng-src="{{viewModel.previewImageUrl}}" ng-hide="true"/></div>'),e.put("views/widgets/editIframeWidget.html",'<div><h6 class="input-field-label required" localize="EditWidget_EmbedCode"></h6><textarea ng-model="viewModel.tile.iframe.embedCode"></textarea><div class="infoBlock"><i class="glyphicon glyph-small pbi-glyph-info"></i><span class="message" localize="EditWidget_WebContentIssues" localize-fragments><a class="link" href="https://go.microsoft.com/fwlink/?LinkID=799824" target="_blank" fragment-index="0" localize="LearnMore"></a></span></div></div>'),e.put("views/widgets/editImageWidget.html",'<div><form name="imageContentForm"><h6 class="input-field-label required" localize="TileEditor_Url"></h6> <input type="url" name="imageUrl" ng-model="viewModel.tile.image.imageUrl" ng-change="onChange()" ng-class="{hasError: imageContentForm.imageUrl.$touched && !viewModel.isImageUrlValid()}"/><div class="errorBlock" ng-show="imageContentForm.imageUrl.$touched && !viewModel.isImageUrlValid()"><i class="glyphicon glyph-small pbi-glyph-error"></i><div class="message" localize="EditWidget_ImageWidget_InvalidUrl" localize-tooltip="EditWidget_ImageWidget_InvalidUrl"></div></div></form></div>'),e.put("views/widgets/editTextWidget.html",'<div class="editWidgetContainer" toolbar-anchor><div class="widgetDetails" localize="EditWidget_Details"></div><div><toolbar-overlay view-model="viewModel.toolbarModel" toolbar-container></toolbar-overlay><visual class="textVisual" view-model="viewModel.visualModel"></visual></div></div>'),e.put("views/widgets/editVideoWidget.html",'<div><form name="videoContentForm"><h6 class="input-field-label required" localize="EditWidget_VideoWidget_Url"></h6> <input type="url" name="videoUrl" ng-model="url" ng-blur="blurChanged()" ng-change="inputChanged()" ng-class="{hasError: videoContentForm.videoUrl.$touched && !viewModel.isVideoUrlValid()}"/><div class="errorBlock" ng-show="videoContentForm.videoUrl.$touched && !viewModel.isVideoUrlValid()"><i class="glyphicon glyph-small pbi-glyph-error"></i><div class="message" localize="EditWidget_VideoWidget_InvalidUrl" localize-tooltip="EditWidget_VideoWidget_InvalidUrl"></div></div></form></div>'),e.put("views/contentProviderStore/customConfigHandlers/sharePointConfigHandler.html","<share-point-url-input></share-point-url-input>"),e.put("views/contentProviderStore/customConfigHandlers/sharePointUrlModal.html",'<div class="sharePointConfig"><div localize="SharePointSiteExample"></div> <input type="text" autofocus="" tabindex="1" ng-model="url"/><div class="notice infonav-dialogContentNotification typeInfo"><span class="glyphicon pbi-glyph-info glyph-mini"></span><span class="infonav-dialogContentNotificationText" localize="SharePoint_ModalNotification"></span></div><div ng-show="isLoading"><spinner class="xsmall"></spinner><span class="loading" localize="DataLoaderSpinner_LoadingMessage1"></span></div><div ng-show="hasError" class="error">{{errorMessage}}</div></div>'),e.put("components/appArtifactsList/appArtifactsList.html",'<section class="typeTitle" ng-click="$ctrl.toggle($event)"><i class="caret glyphicon pbi-glyph-caretright glyph-mini smallFontSize" ng-class="{expanded : $ctrl.viewModel.expanded}"/><span class="unselectable" localize="{{::$ctrl.viewModel.title}}"></span></section><section ng-if="$ctrl.viewModel.expanded" class="unselectable artifactsHeader"><header class="name trimmedTextWithEllipsis unselectable" localize="ContentHeader_Name"></header><header class="actions trimmedTextWithEllipsis unselectable" ng-class="::{noClassification: !$ctrl.viewModel.isDataClassificationEnabled}" localize="ContentHeader_Actions"></header><header ng-if="::$ctrl.viewModel.isDataClassificationEnabled" class="classification" localize="ContentHeader_Classification"></header></section><section ng-if="$ctrl.viewModel.expanded" class="artifactsScrollSection" vs-repeat><div class="itemContainer" ng-repeat="artifact in $ctrl.viewModel.artifacts"><section class="artifact"><section class="icons"><span class="tileTypeIndicator glyphicon glyph-small {{::$ctrl.viewModel.className}}"></span><header class="favoriteIndicator"><span ng-if="$ctrl.canFavorite(artifact)" class="favoriteBtn pbi-glyph-favoritestar" localize-tooltip="Artifact_Favorite" ng-disabled="$ctrl.isFavoriteDisabled(artifact)" ng-click="$ctrl.favoriteContentTile(artifact)"></span><span ng-if="$ctrl.canUnFavorite(artifact)" class="unfavoriteBtn powervisuals-glyph star-full" localize-tooltip="Artifact_Favorite" ng-disabled="$ctrl.isFavoriteDisabled(artifact)" ng-click="$ctrl.unfavoriteContentTile(artifact)"></span></header></section><section class="name" ng-class="{clickable: $ctrl.canOpenTile(artifact) }" ng-click="$ctrl.openContentTile(artifact)"><span class="displayName trimmedTextWithEllipsis" ng-bind="::artifact.displayName" title="{{::artifact.displayName}}"></span><pbi-icon ng-if="::$ctrl.isNew(artifact)" name="asterisk" size="mini"></pbi-icon></section><content-tile-options-menu class="actions unselectable" ng-class="::{readOnly: !$ctrl.canShowOptionsMenu(artifact), noClassification: !$ctrl.viewModel.isDataClassificationEnabled}" view-model="::artifact"></content-tile-options-menu><data-classification-label ng-if="::$ctrl.viewModel.isDataClassificationEnabled" class="classification unselectable" data-classification-id="artifact.dataClassificationId"></data-classification-label></section></div></section>'),e.put("components/alertsEditor/alertsEditor.html",'<div id="alertsEditor" class="paneLayout"><header><div class="alertsPaneHeader"><h4 class="alertsEditorPaneTitle" ng-bind="::$ctrl.viewModel.tileName"></h4><h4 class="alertsEditorPaneSubtitle" localize="AlertsPane_Title"></h4></div> <button class="optionsMenuButton" dropdown-overlay-invoke="moreOptionsMenu"><i class="glyphicon pbi-glyph-more glyph-small"></i></button><dropdown-overlay dropdown-overlay-name="moreOptionsMenu" dropdown-overlay-class="angular-dropdown override-box-shadow"><dropdown-menu-items dropdown-items="::$ctrl.viewModel.moreOptionsMenu" dropdown-class="additionalMenus active" dropdown-on-item-selected="$ctrl.moreOptionsMenuSelected(selected)"></dropdown-menu-items></dropdown-overlay></header><section class="banner" ng-if="!$ctrl.isLoading"><pbi-button label="AlertsPane_AddAlert" class="wideButton" icon-name="add" primary="true" ng-click="$ctrl.addNewAlert()"></pbi-button></section><section class="contentContainer"><div class="alertsLoadingContainer" ng-if="$ctrl.isLoading"><spinner modern></spinner><div class="alertsLoadingText" localize="AlertsPane_Loading"></div></div><div ng-if="!$ctrl.isLoading"><div class="noAlertsContainer" ng-if="!$ctrl.viewModel.alerts || $ctrl.viewModel.alerts.length <= 0"><i class="glyphicon glyph-medium pbi-glyph-bell"></i><div class="noAlertsText" localize="AlertsPane_NoAlerts"></div></div><div class="alertsContainer" ng-if="$ctrl.viewModel.alerts.length> 0"><form name="$ctrl.alertForm"><div class="alert" ng-repeat="alert in $ctrl.viewModel.alerts track by $index"><div class="alertHeader" ng-click="alert.isExpanded = !alert.isExpanded"><i class="glyphicon glyph-mini" ng-class="alert.isExpanded ? \'pbi-glyph-chevronupmedium\' : \'pbi-glyph-chevrondownmedium\'"></i><div class="alertTitle" ng-bind="alert.title" ng-attr-title="alert.title"></div><i class="alertDelete glyphicon glyph-small pbi-glyph-delete" ng-click="$ctrl.removeAlert($event, $index)"></i></div><div class="errorBlock" ng-if="alert.alertFailureState !== 0" ng-class="{hidden: !alert.isExpanded}"><i class="glyphicon glyph-small pbi-glyph-error"></i><div class="message" ng-repeat="failureMessage in ::$ctrl.viewModel.alertFailureMessages track by $index" ng-if="alert.alertFailureState === failureMessage.value" ng-bind="failureMessage.message" ng-attr-title="failureMessage.message"></div></div><div class="alertContent" ng-class="{hidden: !alert.isExpanded}"><pbi-toggle ng-model="alert.enabled" label="AlertsPane_ActiveLabel" on-state-text="AlertsPane_ToggleOn" off-state-text="AlertsPane_ToggleOff"></pbi-toggle><ng-form name="{{\'alertForm\' + $index}}"><fieldset ng-class="{disabled: !alert.enabled}"><pbi-textfield ng-disabled="!alert.enabled" ng-model="alert.title" ng-class="{validationError: !$ctrl.isValidTitle(alert)}" label="AlertsPane_AlertTitle" maxlength="250"></pbi-textfield><div class="errorBlock" ng-if="!$ctrl.isValidTitle(alert)"><i class="glyphicon glyph-small pbi-glyph-error"></i><div class="message" localize="AlertsPane_InvalidTitle" localize-tooltip="AlertsPane_InvalidTitle"></div></div><pbi-textfield class="alertMeasureName" ng-model="alert.measureName" ng-disabled="true" label="AlertsPane_AlertRule"></pbi-textfield><div class="condition"><label localize="AlertsPane_Condition"></label> <select ng-disabled="!alert.enabled" ng-model="alert.operator" ng-options="operator.value as operator.label for operator in ::$ctrl.viewModel.operatorOptions"></select></div><pbi-textfield ng-disabled="!alert.enabled" class="alertThreshold" ng-model="alert.thresholdValue" ng-class="{validationError: !$ctrl.isValidThreshold(alert)}" label="AlertsPane_Threshold"></pbi-textfield><div class="errorBlock" ng-if="!$ctrl.isValidThreshold(alert)"><i class="glyphicon glyph-small pbi-glyph-error"></i><div class="message" localize="AlertsPane_InvalidThreshold" localize-tooltip="AlertsPane_InvalidThreshold"></div></div><pbi-radio-group class="frequency" ng-disabled="!alert.enabled" ng-model="alert.frequency" label="AlertsPane_NotificationFrequency"><pbi-radio ng-repeat="frequency in ::$ctrl.viewModel.frequencyOptions track by $index" label="{{frequency.label}}" ng-value="frequency.value"></pbi-radio></pbi-radio-group><label localize="AlertsPane_NotificationFrequency_Message"></label><div class="alertNotificationEmailText" localize="AlertsPane_EmailText"></div><pbi-checkbox ng-disabled="!alert.enabled" label="AlertsPane_EmailLabel" ng-model="alert.emailNotificationEnabled"></pbi-checkbox></fieldset></ng-form></div></div></form></div></div></section><footer><fieldset class="buttons"><spinner modern ng-if="$ctrl.isUpdating"></spinner><pbi-button primary="true" label="AlertsPane_Save" ng-click="$ctrl.saveChangesAndExit()" ng-disabled="!$ctrl.viewModel.isValid() || $ctrl.isUpdating || $ctrl.isLoading || !$ctrl.hasChangesToSave()"></pbi-button><pbi-button label="AlertsPane_Cancel" ng-click="$ctrl.cancel()"></pbi-button></fieldset></footer></div>'),e.put("components/appChannelHeader/appChannelHeader.html",'<header class="channelHeader" ng-style="{\'background-color\': $ctrl.getHeaderBackgroundColor(), \'color\': $ctrl.getHeaderFontColor()}"><app-logo view-model="::$ctrl.viewModel" size="medium"></app-logo><div class="title"><h2 class="header trimmedTextWithEllipsis unselectable" ng-bind="$ctrl.getAppTitle()" title="{{$ctrl.getAppTitle()}}"></h2><h5 class="description trimmedTextWithEllipsis" ng-bind="$ctrl.viewModel.description" title="{{$ctrl.viewModel.description}}"></h5></div><aside class="status"><div class="details"><span localize="App_Title_Dashboards"></span><div><pbi-icon name="gauge" size="small"></pbi-icon><span class="countLabel" ng-bind="$ctrl.viewModel.dashboardIds.length"></span></div></div><div class="details"><span localize="App_Title_Reports"></span><div><pbi-icon name="barchart" size="small"></pbi-icon><span class="countLabel" ng-bind="$ctrl.viewModel.reportIds.length"></span></div></div><div class="details"><span localize="App_Title_Workbooks"></span><div><pbi-icon name="excel" size="small"></pbi-icon><span class="countLabel" ng-bind="$ctrl.viewModel.workbookIds.length"></span></div></div><div class="details"><span localize="App_Title_Datasets"></span><div><pbi-icon name="database" size="small"></pbi-icon><span class="countLabel" ng-bind="$ctrl.viewModel.modelIds.length"></span></div></div></aside></header>'),e.put("components/appContainer/appContainer.html",'<app-channel-header view-model="::$ctrl.installedApp" ng-if="$ctrl.installedApp"></app-channel-header><div ng-if="$ctrl.installedApp && $ctrl.inAppArtifactsListView()" class="appContent"><search-box on-change="$ctrl.ensureSearchTelemetry()" on-blur="$ctrl.resolveSearchTelemetry()" filter="$ctrl.searchText" placeholder="SearchContent"></search-box><div ng-repeat="artifactList in ::$ctrl.artifactLists" class="appDetail"><app-artifacts-list view-model="artifactList" ng-if="::!$ctrl.isEmptyList(artifactList)"></app-artifacts-list></div></div>'),e.put("components/appLogo/appLogo.html",'<section class="container" ng-switch="$ctrl.hasAppLogoImage()"> <img ng-switch-when="true" ng-style="{\'background-image\': $ctrl.getAppLogoImageUrlStyle()}"></img><pbi-icon ng-switch-when="false" class="icon" name="{{$ctrl.viewModel.icon}}" ng-style="{\'color\': $ctrl.viewModel.iconColor, \'background-color\': $ctrl.viewModel.iconBackgroundColor}" size="{{$ctrl.size}}"></pbi-icon></section>'),e.put("components/appsContainer/appsContainer.html",'<div class="mainContent"><div class="dashboardSliderMain" feature-switch-class="breadcrumbNavigationEnabled"><pbi-data-loader-spinner class="centered" ng-if="!$ctrl.providers"></pbi-data-loader-spinner><div class="galleryContainer appsGallery" feature-switch-class="breadcrumbNavigationEnabled"><content-tile-container tiles="$ctrl.providers" disable-lazy-loading="true" collapsible-pane-mode="false"></content-tile-container></div></div></div>'),e.put("components/breadcrumbs/breadcrumb.html",'<pbi-icon ng-if="::breadcrumb.beforeIcon && !breadcrumb.group" name="{{::breadcrumb.beforeIcon}}" size="{{::breadcrumb.beforeIconSize}}" class="breadcrumbBeforeIcon"></pbi-icon><group-icon ng-if="::breadcrumb.entity && breadcrumb.entity.aadGroupId && !breadcrumb.icon" group="breadcrumb.entity" placeholder-size="small"></group-icon><span ng-bind="breadcrumb.label"></span><pbi-icon ng-if="::breadcrumb.afterIcon && !breadcrumb.group" name="{{::breadcrumb.afterIcon}}" size="{{::breadcrumb.afterIconSize}}" class="breadcrumbAfterIcon"></pbi-icon>'),e.put("components/breadcrumbs/breadcrumbLabel.html",'<span class="breadcrumb" tooltip tooltip-config="breadcrumb.tooltipConfig"><ng-include src="::\'components/breadcrumbs/breadcrumb.html\'"></ng-include></span>'),e.put("components/breadcrumbs/breadcrumbLink.html",'<a class="breadcrumb" ui-sref="{{::breadcrumb.uiSref}}" ui-sref-opts="{{::breadcrumb.stateOptions}}" tooltip tooltip-config="breadcrumb.tooltipTemplateConfig" ng-click="$ctrl.logTelemetry(breadcrumb.state)"><ng-include src="::\'components/breadcrumbs/breadcrumb.html\'"></ng-include></a>'),
e.put("components/breadcrumbs/breadcrumbs.html",'<pbi-icon ng-repeat-start="breadcrumb in $ctrl.breadcrumbs | filter: $ctrl.breadcrumbFilter" ng-if="!$first" name="chevronrightmedium" size="mini"></pbi-icon><ng-include ng-bind-attr-once="{class: breadcrumb.customClass}" src="$ctrl.getTemplate(breadcrumb, $last)"></ng-include><data-classification-label ng-repeat-end ng-if="::breadcrumb.entity && (breadcrumb.entity.dataClassificationId || breadcrumb.entity.dataClassificationId === 0)" data-classification-id="::breadcrumb.entity.dataClassificationId"></data-classification-label>'),e.put("components/contentDatasetActions/contentDatasetActions.html",'<section class="datacell optionsCell" ng-class="{\'publishing\': $ctrl.isPackagePublishInProgress($ctrl.viewModel.contract.packagePublishStatus)}"><section ng-if="::$ctrl.historicalDataset"> <button class="createReport pbi-glyph-create-report" localize-tooltip="DashboardContextMenu_CreateReport" ng-if="::$ctrl.canCreateReport($ctrl.viewModel)" ng-click="$ctrl.createReport($ctrl.viewModel)"></button> <button class="refreshNow pbi-glyph-refresh" localize-tooltip="ContentTileOptions_RefreshNow" ng-if="::$ctrl.canRefreshNow($ctrl.viewModel)" ng-click="$ctrl.refreshNow($ctrl.viewModel.contract)"></button> <button class="scheduleRefresh pbi-glyph-refresh-data" localize-tooltip="ContentTileOptions_ScheduleRefresh" ng-if="::$ctrl.canScheduleRefresh($ctrl.viewModel)" ng-click="$ctrl.refreshSchedule($ctrl.viewModel.contract)"></button> <button class="moreButton pbi-glyph-more" ng-click="$ctrl.showOptions($ctrl.viewModel); $event.stopPropagation();" dropdown-overlay-invoke="{{::$ctrl.rowId}}" prefer-left="true" need-blur="true" disable-animation="true" localize-tooltip="Options_Menu"></button></section><section ng-if="::!$ctrl.historicalDataset" class="actionContents"> <button class="glyphicon glyph-small actionIcon {{::action.iconClass}}" ng-repeat="action in $ctrl.getStreamingDatasetActions($ctrl.viewModel) track by action.action" ng-click="$ctrl.streamingDatasetActionSelected($ctrl.viewModel, action)" ng-attr-title="{{::action.text}}"></button></section><dropdown-overlay ng-if="$ctrl.menuSelected" dropdown-overlay-name="{{::$ctrl.rowId}}"><ul class="angular-dropdown active datasetActionList"><li ng-repeat="item in $ctrl.datasetMenuActions" class="dropdown-item" ng-mousedown="$ctrl.datasetMenuActionSelected(item); $event.stopPropagation();"><a href="" target="_blank"><div class="dropdown-content"><div class="dropdown-label" ng-bind="::item.text"></div></div></a></li></ul></dropdown-overlay></section>'),e.put("components/contentHeader/contentHeader.html",'<section ng-switch="$ctrl.tabType"><section class="unselectable" ng-switch-when="0"><header class="name" localize="ContentHeader_Name"></header><header class="actions" localize="ContentHeader_Actions"></header><header class="owner" localize="ContentHeader_Owner"></header><header ng-if="::$ctrl.isDataClassificationEnabled" class="classification" localize="ContentHeader_Classification"></header></section><section class="unselectable" ng-switch-when="2"><header class="name" localize="ContentHeader_Name"></header><header class="actions" localize="ContentHeader_Actions"></header><header class="owner" localize="ContentHeader_Owner"></header></section><section class="unselectable" ng-switch-when="4"><header class="name" localize="ContentHeader_Name"></header><header class="actions" localize="ContentHeader_Actions"></header><header class="owner" localize="ContentHeader_Owner"></header></section><section class="unselectable" ng-switch-when="8"><header class="name" localize="ContentHeader_Name"></header><header class="actions" localize="ContentHeader_Actions"></header><header class="lastRefresh" localize="ContentHeader_LastRefresh"></header><header class="nextRefresh" localize="ContentHeader_NextRefresh"></header><header class="apiAccess" localize="ContentHeader_ApiAccess"></header></section><section class="unselectable" ng-switch-when="16"><header class="name" localize="ContentHeader_Name"></header><header class="actions" localize="ContentHeader_Actions"></header><header class="lastAccess" localize="ContentHeader_LastAccess"></header><header class="location" localize="ContentHeader_Location"></header><header ng-if="::$ctrl.isDataClassificationEnabled" class="classification" localize="ContentHeader_Classification"></header></section><section class="unselectable" ng-switch-when="32"><header class="name" localize="ContentHeader_Name"></header><header class="actions" localize="ContentHeader_Actions"></header><header class="lastRefresh" localize="ContentHeader_LastRefresh"></header><header class="content" localize="ContentHeader_Content"></header><header class="url"><header class="trimmedTextWithEllipsis" localize="ContentHeader_URL"></header><pbi-icon name="information" size="small" tooltip tooltip-config="{tooltipLocalizeDescription: \'ContentList_Apps_Url_Tooltip\', tooltipArrowPosition: 1}"></pbi-icon></header></section><section class="unselectable" ng-switch-when="64"><header class="name" localize="ContentHeader_Name"></header><header class="actions" localize="ContentHeader_Actions"></header><header class="sharedTime" localize="ContentHeader_SharedTime"></header><header class="owner" localize="ContentHeader_Owner"></header><header ng-if="::$ctrl.isDataClassificationEnabled" class="classification" localize="ContentHeader_Classification"></header></section></section>'),e.put("components/contentListContainer/contentListContainer.html",'<div class="mainContent" ng-class="{\'initializing\': !$ctrl.initialized}"><div class="header" ng-cloak><div class="dashboardAppBar appBar"><div class="appBarSection left"><ul feature-switch-not="breadcrumbNavigationEnabled"><li class="label"><span class="appBarTitle" title="{{$ctrl.groupName}}" ng-bind="$ctrl.groupName"></span></li></ul></div><div class="appBarSection right"><ul><li> <button ng-click="$ctrl.showManageDatasetsPane()" class="manageDatasets" localize-tooltip="NavigationPane_ManageDatasets" ng-show="$ctrl.canManageDatasets"><i class="glyphicon pbi-glyph-database glyph-small icon"></i><span class="appBarMenuItem" localize="NavigationPane_ManageDatasets"></span></button></li><li> <button ng-hide="$ctrl.groupService.activeGroup.isMyWorkspace || $ctrl.groupService.isInGroupTransition" class="groupContextMenuButton" dropdown-menu dropdown-class="navigationPaneGroupContextMenu" dropdown-items="$ctrl.groupContextMenu" dropdown-orientation="vertical" dropdown-on-item-selected="$ctrl.groupNavigationPaneMenuItemSelected(selected)" dropdown-separator-class="groupContextMenuSeparator"><i class="glyphicon moreIcon pbi-glyph-more"></i></button></li></ul></div></div></div><div class="dashboardControls"><search-box on-change="$ctrl.ensureSearchTelemetry()" on-blur="$ctrl.resolveSearchTelemetry()" filter="$ctrl.searchText" placeholder="SearchContent"></search-box><div class="right"><span class="count" localize="ShowingXItems" localize-fragments><span fragment-index="0" ng-bind="$ctrl.getNumberOfShownItems()"></span></span><select-tile-filter selected-type="$ctrl.typeFilter" selected-ownership="$ctrl.ownership" on-select-type="$ctrl.selectType" on-select-ownership="$ctrl.selectOwnership"></select-tile-filter><select-tile-sort selected-predicate="$ctrl.sortPredicate" on-select="$ctrl.selectSort"></select-tile-sort></div></div><div class="dashboardSliderMain" ng-if="::$ctrl.initialized"><div class="galleryContainer dashboardsGallery" ng-hide="$ctrl.shouldHideDashboards()"><content-tile-container tiles="$ctrl.dashboards                                            | filter: $ctrl.isVisible                                            | then: $ctrl.set:\'dashboardsArePresent\'                                            | filter: $ctrl.ownershipPredicate                                            | filter: $ctrl.searchProperties                                            | orderBy: $ctrl.sortPredicate.toAngularFilter()                                            | then: $ctrl.set:\'dashboardCount\'                                            | then: $ctrl.resolveTelemetry:\'dashboardCount\':\'dashboardsLoadedDefer\'                                            | then: $ctrl.refreshWaypoints" collapsible-pane-mode="$ctrl.collapsiblePaneMode" finish-load-event="contentListDashboardsLoaded"><section-title localize="ContentList_Dashboards"></section-title></content-tile-container></div><div class="galleryContainer reportsGallery" ng-hide="$ctrl.shouldHideReports()"><content-tile-container tiles="$ctrl.reports                                        | filter: $ctrl.canCopyAndEdit                                        | filter: $ctrl.isVisible                                        | then: $ctrl.set:\'reportsArePresent\'                                        | filter: $ctrl.ownershipPredicate                                        | filter: $ctrl.searchProperties                                        | orderBy: $ctrl.sortPredicate.toAngularFilter()                                        | then: $ctrl.set:\'reportCount\'                                        | then: $ctrl.resolveTelemetry:\'reportCount\':\'reportsLoadedDefer\'                                        | then: $ctrl.refreshWaypoints" collapsible-pane-mode="$ctrl.collapsiblePaneMode" finish-load-event="contentListReportsLoaded"><section-title localize="ContentList_Reports"></section-title></content-tile-container></div><div class="galleryContainer workbooksGallery" ng-hide="$ctrl.shouldHideWorkbooks()"><content-tile-container tiles="$ctrl.workbooks                                        | filter: $ctrl.canCopyAndEdit                                        | filter: $ctrl.isVisible                                        | then: $ctrl.set:\'workbooksArePresent\'                                        | filter: $ctrl.ownershipPredicate                                        | filter: $ctrl.searchProperties                                        | orderBy: $ctrl.sortPredicate.toAngularFilter()                                        | then: $ctrl.set:\'workbookCount\'                                        | then: $ctrl.resolveTelemetry:\'workbookCount\':\'workbooksLoadedDefer\'                                        | then: $ctrl.refreshWaypoints" collapsible-pane-mode="$ctrl.collapsiblePaneMode" finish-load-event="contentListWorkbooksLoaded"><section-title localize="ContentList_Workbooks"></section-title></content-tile-container></div></div><spinner ng-show="$ctrl.showLoading && !$ctrl.initialized" class="large centered"></spinner><water-mark-message config="$ctrl.emptyContent" ng-show="$ctrl.hasEmptySearchResults()"></water-mark-message></div>'),e.put("components/contentListContainerV2/contentListContainerV2.html",'<div class="contentListView" ng-class="{\'initializing\': !$ctrl.initialized, \'onlySharedWithMe\': $ctrl.isOnlySharedWithMe()}"><div class="header"><div class="dashboardAppBar"> <button ng-hide="$ctrl.groupService.activeGroup.isMyWorkspace || $ctrl.groupService.isInGroupTransition" class="groupContextMenuButton" dropdown-menu dropdown-class="navigationPaneGroupContextMenu" dropdown-items="$ctrl.groupContextMenu" dropdown-orientation="vertical" dropdown-on-item-selected="$ctrl.groupNavigationPaneMenuItemSelected(selected)" dropdown-separator-class="groupContextMenuSeparator"><i class="glyphicon moreIcon pbi-glyph-more"></i></button> <button dropdown-overlay-invoke="CreateContentListItem" preferLeft="true" needBlur="true" class="createButton"><pbi-icon name="add" size="small"></pbi-icon><span class="label" localize="Create_ButtonText"></span></button><dropdown-overlay dropdown-overlay-name="CreateContentListItem" class="overlayTopBar"><dropdown-list class="topBar contentListViewDropdown"><dropdown-list-item ng-click="$ctrl.addDashboard()" localize="ContentList_Dashboard"></dropdown-list-item><dropdown-list-item ng-click="$ctrl.addReport()" localize="ContentList_Report"></dropdown-list-item><dropdown-list-item ui-sref="landing.groups.group.getData" localize="ContentList_Dataset"></dropdown-list-item><dropdown-list-item ng-click="$ctrl.showStreamingDatasetGalleryPane()" localize="ContentList_StreamingDataset"></dropdown-list-item><dropdown-list-item feature-switch="appsEnabled" ng-click="$ctrl.addChannel()" localize="ContentList_App"></dropdown-list-item></dropdown-list></dropdown-overlay></div></div><div class="dashboardControls"><search-box should-focus="::true" on-change="$ctrl.onSearchTextChange()" on-blur="$ctrl.resolveSearchTelemetry()" filter="$ctrl.searchText" placeholder="SearchContent"></search-box></div><div class="contentListOptionsTabs unselectable"><div class="left"><div class="optionTab dashboard label-med" ng-class="{selected: $ctrl.activeTab === 0,                                            hasNoResults: !($ctrl.dashboards                                            | filter: $ctrl.isVisible                                            | filter: $ctrl.ownershipPredicate                                            | then: $ctrl.set:\'dashboardsArePresent\'                                            | filter: $ctrl.searchProperties                                            | then: $ctrl.save:\'initialFilteredDashboards\'                                            | orderBy: $ctrl.sortPredicate.toAngularFilter()                                            | then: $ctrl.set:\'dashboardCount\'                                            | then: $ctrl.save:\'filteredDashboards\'                                            | then: $ctrl.getCount)}" ng-click="$ctrl.setActiveTab(0)" localize="ContentList_Dashboards"></div><div class="optionTab report label-med" ng-class="{selected: $ctrl.activeTab === 2, hasNoResults: !($ctrl.reports                                        | filter: $ctrl.canCopyAndEdit                                        | filter: $ctrl.isVisible                                        | filter: $ctrl.ownershipPredicate                                        | then: $ctrl.set:\'reportsArePresent\'                                        | filter: $ctrl.searchProperties                                        | orderBy: $ctrl.sortPredicate.toAngularFilter()                                        | then: $ctrl.set:\'reportCount\'                                        | then: $ctrl.save:\'filteredReports\'                                        | then: $ctrl.getCount)}" )}" ng-click="$ctrl.setActiveTab(2)" localize="ContentList_Reports"></div><div class="optionTab workbook label-med" ng-class="{selected: $ctrl.activeTab === 4, hasNoResults: !($ctrl.workbooks                                        | filter: $ctrl.canCopyAndEdit                                        | filter: $ctrl.isVisible                                        | filter: $ctrl.ownershipPredicate                                        | then: $ctrl.set:\'workbooksArePresent\'                                        | filter: $ctrl.searchProperties                                        | orderBy: $ctrl.sortPredicate.toAngularFilter()                                        | then: $ctrl.set:\'workbookCount\'                                        | then: $ctrl.save:\'filteredWorkbooks\'                                        | then: $ctrl.getCount)}" )}" ng-click="$ctrl.setActiveTab(4)" localize="ContentList_Workbooks"></div><div class="optionTab dataset label-med" ng-if="$ctrl.canManageDatasets" ng-class="{selected: $ctrl.activeTab === 8, hasNoResults: !($ctrl.datasets                                        | filter: $ctrl.modelService.isExplorableNonLegacySampleModel                                        | filter: $ctrl.isModelVisible                                        | then: $ctrl.set:\'datasetsArePresent\'                                        | filter: $ctrl.searchProperties                                        | orderBy: $ctrl.sortPredicate.toAngularFilter()                                        | then: $ctrl.set:\'datasetCount\'                                        | then: $ctrl.save:\'filteredDatasets\'                                        | then: $ctrl.getCount)}" )}" ng-click="$ctrl.setActiveTab(8)" localize="ContentList_Datasets"></div><div class="optionTab channel label-med" ng-if="$ctrl.canManagePublishedApps" ng-class="{selected: $ctrl.activeTab === 32, hasNoResults: !($ctrl.publishedApps                                        | then: $ctrl.set:\'publishedAppsArePresent\'                                        | filter: $ctrl.searchProperties                                        | orderBy: $ctrl.sortPredicate.toAngularFilter()                                        | then: $ctrl.set:\'publishedAppsCount\'                                        | then: $ctrl.save:\'filteredPublishedApps\'                                        | then: $ctrl.getCount)}" )}" ng-click="$ctrl.setActiveTab(32)" localize="ContentList_Apps"></div></div><div class="right"><span class="count" localize="ShowingXItems" localize-fragments><span fragment-index="0" ng-bind="$ctrl.getNumberOfShownTabItems()"></span></span><select-tile-sort selected-predicate="$ctrl.sortPredicate" on-select="$ctrl.selectSort" predicates="$ctrl.sortPredicates"></select-tile-sort></div></div><div class="dashboardSliderMain"><spinner ng-show="$ctrl.showSpinner" class="large centered"></spinner><water-mark-message config="$ctrl.getWatermarkConfig()" ng-show="$ctrl.getWatermarkConfig()"></water-mark-message><shared-by-column ng-if="$ctrl.isOnlySharedWithMe() && (!$ctrl.dashboardsArePresent || $ctrl.userMetadataLoaded)" get-shared-dashboards="$ctrl.getInitialFilteredDashboards()" selected-owner="$ctrl.selectedSharedByOwner"></shared-by-column><content-list-gallery ng-if="$ctrl.isOnlySharedWithMe() ? (!$ctrl.dashboardsArePresent || $ctrl.userMetadataLoaded) : true" view-model="::$ctrl.galleryViewModel" is-data-classification-enabled="$ctrl.dataClassificationEnabled"></content-list-gallery></div></div>'),e.put("components/contentListGallery/contentListGallery.html",'<div class="galleryContainer" ng-class="$ctrl.galleryContainerStyle"><content-header class="contentHeaderSection" tab-type="$ctrl.viewModel.tabType" is-data-classification-enabled="::$ctrl.isDataClassificationEnabled"></content-header><content-row-container tab-type="$ctrl.viewModel.tabType" tiles="$ctrl.viewModel.getTiles()" is-data-classification-enabled="::$ctrl.isDataClassificationEnabled" collapsible-pane-mode="$ctrl.viewModel.collapsiblePaneMode" finish-load-event="{{::$ctrl.viewModel.finishLoadEvent}}"></content-row-container></div>'),e.put("components/contentRow/contentRow.html",'<section class="galleryItem" ng-switch="::$ctrl.tabType" ng-class="{selected: $ctrl.viewModel.isContentTileSelected, publishing: $ctrl.publishInProgress()}" data-id="{{::$ctrl.viewModel.id}}" data-name="{{::$ctrl.viewModel.displayName}}"><section class="galleryItemContainer" ng-switch-when="0"><section class="nameDetails"><span class="tileTypeIndicator glyphicon pbi-glyph-gauge glyph-small" localize-tooltip="Artifact_Dashboard"></span><header class="favoriteIndicator"><span ng-if="$ctrl.canFavorite()" class="favoriteBtn pbi-glyph-favoritestar" localize-tooltip="Artifact_Favorite" ng-disabled="$ctrl.isFavoriteDisabled()" ng-click="$ctrl.favoriteContentTile()"></span><span ng-if="$ctrl.canUnFavorite()" class="unfavoriteBtn powervisuals-glyph star-full" localize-tooltip="Artifact_Favorite" ng-disabled="$ctrl.isFavoriteDisabled()" ng-click="$ctrl.unfavoriteContentTile()"></span></header><header class="galleryItemTitle trimmedTextWithEllipsis" title="{{$ctrl.viewModel.displayName}}" ng-click="$ctrl.openContentTile()"><span ng-bind="$ctrl.viewModel.displayName"></span><pbi-icon ng-if="::$ctrl.isNew()" name="asterisk" size="mini"></pbi-icon></header><dataset-icon-container view-model="::$ctrl.viewModel" can-show-new="::false" refresh-related="false"></dataset-icon-container></section><content-tile-options-menu class="tileOptions unselectable" ng-class="{readOnly: !$ctrl.canShowOptionsMenu()}" view-model="::$ctrl.viewModel"></content-tile-options-menu><header class="authorName trimmedTextWithEllipsis" ng-bind="::$ctrl.getOwnerNameOrMailForDashboard()" title="{{::$ctrl.getOwnerNameOrMailForDashboard()}}"></header><header ng-if="::$ctrl.isDataClassificationEnabled" class="classification unselectable"><data-classification-label data-classification-id="$ctrl.viewModel.dataClassificationId"></data-classification-label></header></section><section class="galleryItemContainer" ng-switch-when="2"><section class="nameDetails"><span class="tileTypeIndicator glyphicon pbi-glyph-barchart glyph-small" localize-tooltip="Artifact_Report"></span><header class="galleryItemTitle trimmedTextWithEllipsis" ng-click="$ctrl.openContentTile()"><span ng-bind="$ctrl.viewModel.displayName"></span><pbi-icon ng-if="::$ctrl.isNew()" name="asterisk" size="mini"></pbi-icon></header><dataset-icon-container view-model="::$ctrl.viewModel" can-show-new="::false" refresh-related="false"></dataset-icon-container></section><content-tile-options-menu class="tileOptions unselectable" ng-class="{readOnly: !$ctrl.canShowOptionsMenu()}" view-model="::$ctrl.viewModel"></content-tile-options-menu><header class="authorName trimmedTextWithEllipsis" ng-bind="::$ctrl.viewModel.ownerFullname" title="{{::$ctrl.viewModel.ownerFullname}}"></header></section><section class="galleryItemContainer" ng-switch-when="4"><section class="nameDetails"><span class="tileTypeIndicator glyphicon pbi-glyph-excel glyph-small" localize-tooltip="Artifact_Workbook"></span><header class="galleryItemTitle trimmedTextWithEllipsis" title="{{$ctrl.viewModel.displayName}}" ng-click="$ctrl.openContentTile()"><span ng-bind="$ctrl.viewModel.displayName"></span><pbi-icon ng-if="::$ctrl.isNew()" name="asterisk" size="mini"></pbi-icon></header><dataset-icon-container view-model="::$ctrl.viewModel" can-show-new="::false" refresh-related="false"></dataset-icon-container><dataset-icon-container view-model="::$ctrl.viewModel" can-show-new="::false" refresh-related="true"></dataset-icon-container></section><content-tile-options-menu class="tileOptions unselectable" ng-class="{readOnly: !$ctrl.canShowOptionsMenu()}" view-model="::$ctrl.viewModel"></content-tile-options-menu><header class="authorName trimmedTextWithEllipsis" ng-bind="::$ctrl.viewModel.ownerFullname" title="{{::$ctrl.viewModel.ownerFullname}}"></header></section><section class="galleryItemContainer" ng-switch-when="8"><section class="nameDetails"><span class="tileTypeIndicator glyphicon pbi-glyph-database glyph-small" localize-tooltip="Artifact_Dataset"></span><header class="galleryItemTitle trimmedTextWithEllipsis" title="{{$ctrl.viewModel.displayName}}" ng-click="$ctrl.openContentTile()"><span ng-bind="$ctrl.viewModel.displayName"></span><pbi-icon ng-if="::$ctrl.isNew()" name="asterisk" size="mini"></pbi-icon></header><dataset-icon-container view-model="::$ctrl.viewModel" can-show-new="::false" refresh-related="false"></dataset-icon-container></section><header class="tileOptions unselectable"><content-dataset-actions view-model="::$ctrl.viewModel" can-show-new="::false" historical-dataset="$ctrl.historicalDataset"></content-dataset-actions></header><dataset-icon-container view-model="::$ctrl.viewModel" can-show-new="::false" refresh-related="true"></dataset-icon-container><header class="lastRefresh trimmedTextWithEllipsis" ng-bind="::$ctrl.convertRefreshTimeToJsDateTime($ctrl.viewModel.contract.lastRefreshTime) | date:\'h:mm a MM.dd.yyyy\'"></header><header class="nextRefresh trimmedTextWithEllipsis" ng-bind="::$ctrl.convertRefreshTimeToJsDateTime($ctrl.viewModel.contract.nextRefreshTime) | date:\'h:mm a MM.dd.yyyy\'"></header><header class="apiAccess trimmedTextWithEllipsis" ng-bind="::$ctrl.apiAccessType" title="{{::$ctrl.apiAccessType}}"></header></section><section class="galleryItemContainer" ng-switch-when="16" ng-init="$ctrl.initializeMruRow()"><section class="nameDetails" ng-switch="::$ctrl.viewModel.contentTileType"><span class="tileTypeIndicator glyphicon pbi-glyph-barchart glyph-small" localize-tooltip="Artifact_Report" ng-switch-when="2"></span><span class="tileTypeIndicator glyphicon pbi-glyph-gauge glyph-small" localize-tooltip="Artifact_Dashboard" ng-switch-when="4"></span><span class="tileTypeIndicator glyphicon pbi-glyph-excel glyph-small" localize-tooltip="Artifact_Workbook" ng-switch-when="8"></span><header class="favoriteIndicator" ng-if="$ctrl.isItemAvailable"><span ng-if="$ctrl.canFavorite()" class="favoriteBtn pbi-glyph-favoritestar" localize-tooltip="Artifact_Favorite" ng-disabled="$ctrl.isFavoriteDisabled()" ng-click="$ctrl.favoriteContentTile()"></span><span ng-if="$ctrl.canUnFavorite()" class="unfavoriteBtn powervisuals-glyph star-full" localize-tooltip="ContentListMenu_RemoveFavorite" ng-disabled="$ctrl.isFavoriteDisabled()" ng-click="$ctrl.unfavoriteContentTile()"></span></header> <button class="galleryItemTitle trimmedTextWithEllipsis" title="{{::$ctrl.viewModel.displayName}}" ng-click="$ctrl.openContentTile()" ng-class="{\'notAvailable\': !$ctrl.isItemAvailable}"><span ng-bind="$ctrl.viewModel.displayName"></span><pbi-icon ng-if="::$ctrl.isNew()" name="asterisk" size="mini"></pbi-icon></button></section><header class="tileOptions unselectable" ng-class="{\'readOnly\': !$ctrl.isItemAvailable}"><content-tile-options-menu view-model="::$ctrl.getOriginalContentTileOrViewModel()" delete-enabled="false"></content-tile-options-menu></header><header class="lastAccess trimmedTextWithEllipsis" ng-bind="::$ctrl.getPrettyDate($ctrl.viewModel.lastAccess)"></header> <button class="location" ng-click="$ctrl.navigateToGroup()"><div ng-if="::!$ctrl.isMyWorkspace" class="owner" ng-switch="$ctrl.hasGroupIconSet" title="{{::$ctrl.groupName}}"><i ng-switch-when="false" class="glyphicon pbi-glyph-group glyph-small groupIcon placeholder"></i> <img class="groupIcon" ng-switch-when="true" ng-src="{{$ctrl.groupIcon}}"/></div><div ng-if="::$ctrl.isMyWorkspace" ng-switch="$ctrl.hasUserIconSet" title="{{::$ctrl.groupName}}"><i ng-switch-when="false" class="glyphicon pbi-glyph-user glyph-small groupIcon placeholder"></i><div ng-switch-when="true" class="userIcon" ng-style="{\'background-image\': $ctrl.userIcon}"/></div><header class="locationName trimmedTextWithEllipsis" title="{{::$ctrl.groupName}}" ng-bind="::$ctrl.groupName"></header></button><header ng-if="::$ctrl.isDataClassificationEnabled" class="classification unselectable"><data-classification-label data-classification-id="$ctrl.viewModel.dataClassificationId"></data-classification-label></header></section><section class="galleryItemContainer" ng-switch-when="32"><section class="name"><app-logo view-model="::$ctrl.viewModel" size="small"></app-logo><header class="galleryItemTitle trimmedTextWithEllipsis" ng-attr-title="{{::$ctrl.viewModel.displayName}}" ng-click="$ctrl.openContentTile()" ng-bind="::$ctrl.viewModel.displayName"></header></section><content-tile-options-menu class="tileOptions unselectable actions" view-model="::$ctrl.viewModel"></content-tile-options-menu><header class="lastRefresh trimmedTextWithEllipsis" ng-bind="::$ctrl.viewModel.publishTime | date:\'h:mm a MM.dd.yyyy\'"></header><header class="content trimmedTextWithEllipsis" ng-attr-title="{{::$ctrl.getChannelContentDescription()}}" ng-bind="::$ctrl.getChannelContentDescription()"></header><editable-label class="url" readonly="true" view-model="{ displayName: $ctrl.viewModel.url }"></editable-label></section><section class="galleryItemContainer" ng-switch-when="64"><section class="nameDetails"><span class="tileTypeIndicator glyphicon pbi-glyph-gauge glyph-small" localize-tooltip="Artifact_Dashboard"></span><header class="favoriteIndicator"><span ng-if="$ctrl.canFavorite()" class="favoriteBtn pbi-glyph-favoritestar" localize-tooltip="Artifact_Favorite" ng-disabled="$ctrl.isFavoriteDisabled()" ng-click="$ctrl.favoriteContentTile()"></span><span ng-if="$ctrl.canUnFavorite()" class="unfavoriteBtn powervisuals-glyph star-full" localize-tooltip="Artifact_Favorite" ng-disabled="$ctrl.isFavoriteDisabled()" ng-click="$ctrl.unfavoriteContentTile()"></span></header><header class="galleryItemTitle trimmedTextWithEllipsis" title="{{$ctrl.viewModel.displayName}}" ng-click="$ctrl.openContentTile()"><span ng-bind="$ctrl.viewModel.displayName"></span><pbi-icon ng-if="::$ctrl.isNew()" name="asterisk" size="mini"></pbi-icon></header><dataset-icon-container view-model="::$ctrl.viewModel" can-show-new="::false" refresh-related="false"></dataset-icon-container></section><content-tile-options-menu class="tileOptions unselectable" ng-class="{readOnly: !$ctrl.canShowOptionsMenu()}" view-model="::$ctrl.viewModel"></content-tile-options-menu><header class="sharedTime trimmedTextWithEllipsis" ng-bind="::$ctrl.getPrettySharedDate($ctrl.viewModel.sharedTime)"></header><header class="authorName trimmedTextWithEllipsis" ng-bind="::$ctrl.getOwnerNameOrMailForDashboard()" title="{{::$ctrl.getOwnerNameOrMailForDashboard()}}"></header><header ng-if="::$ctrl.isDataClassificationEnabled" class="classification unselectable"><data-classification-label data-classification-id="$ctrl.viewModel.dataClassificationId"></data-classification-label></header></section></section>'),e.put("components/contentRowContainer/contentRowContainer.html",'<div ng-switch="$ctrl.tabType" class="contentScrollSectionContainer"><div ng-switch-when="0" class="contentScrollSection" vs-repeat ng-class="{isContentTileContentDisabled: $ctrl.collapsiblePaneMode !== 0}"><content-row ng-repeat="tile in $ctrl.getTiles() track by tile.id" view-model="tile" tab-type="::$ctrl.tabType" is-data-classification-enabled="::$ctrl.isDataClassificationEnabled" disable-lazy-loading="::$ctrl.disableLazyLoading" ng-repeat-finish-event="{{::$ctrl.finishLoadEvent}}"></content-row></div><div ng-switch-when="2" class="contentScrollSection" vs-repeat ng-class="{isContentTileContentDisabled: $ctrl.collapsiblePaneMode !== 0}"><content-row ng-repeat="tile in $ctrl.getTiles() track by tile.uniqueId" view-model="tile" tab-type="::$ctrl.tabType" disable-lazy-loading="::$ctrl.disableLazyLoading" ng-repeat-finish-event="{{::$ctrl.finishLoadEvent}}"></content-row></div><div ng-switch-when="4" class="contentScrollSection" vs-repeat ng-class="{isContentTileContentDisabled: $ctrl.collapsiblePaneMode !== 0}"><content-row ng-repeat="tile in $ctrl.getTiles() track by tile.uniqueId" view-model="tile" tab-type="::$ctrl.tabType" disable-lazy-loading="::$ctrl.disableLazyLoading" ng-repeat-finish-event="{{::$ctrl.finishLoadEvent}}"></content-row></div><div ng-switch-when="8" class="contentScrollSection" vs-repeat ng-class="{isContentTileContentDisabled: $ctrl.collapsiblePaneMode !== 0}"><content-row ng-repeat="tile in $ctrl.getTiles() track by tile.id" view-model="tile" tab-type="::$ctrl.tabType" disable-lazy-loading="::$ctrl.disableLazyLoading" ng-repeat-finish-event="{{::$ctrl.finishLoadEvent}}"></content-row></div><div ng-switch-when="16" class="contentScrollSection" vs-repeat ng-class="{isContentTileContentDisabled: $ctrl.collapsiblePaneMode !== 0}"><content-row ng-repeat="tile in $ctrl.getTiles()" view-model="tile" tab-type="::$ctrl.tabType" is-data-classification-enabled="::$ctrl.isDataClassificationEnabled" disable-lazy-loading="::$ctrl.disableLazyLoading" ng-repeat-finish-event="{{::$ctrl.finishLoadEvent}}"></content-row></div><div ng-switch-when="32" class="contentScrollSection" vs-repeat ng-class="{isContentTileContentDisabled: $ctrl.collapsiblePaneMode !== 0}"><content-row ng-repeat="tile in $ctrl.getTiles()" view-model="tile" tab-type="::$ctrl.tabType" disable-lazy-loading="::$ctrl.disableLazyLoading" ng-repeat-finish-event="{{::$ctrl.finishLoadEvent}}"></content-row></div><div ng-switch-when="64" class="contentScrollSection" vs-repeat ng-class="{isContentTileContentDisabled: $ctrl.collapsiblePaneMode !== 0}"><content-row ng-repeat="tile in $ctrl.getTiles() track by tile.id" view-model="tile" tab-type="::$ctrl.tabType" is-data-classification-enabled="::$ctrl.isDataClassificationEnabled" disable-lazy-loading="::$ctrl.disableLazyLoading" ng-repeat-finish-event="{{::$ctrl.finishLoadEvent}}"></content-row></div></div>'),
e.put("components/contentTile/contentTile.html",'<li class="galleryItem unselectable" ng-class="{\'selected\': $ctrl.viewModel.isContentTileSelected, \'publishing\':$ctrl.publishInProgress()}" data-id="{{::$ctrl.viewModel.id}}" data-content-tile-type="{{$ctrl.getTileTypeName()}}" data-name="{{::$ctrl.viewModel.displayName}}" in-viewport="$ctrl.onceInViewport()" in-viewport-context=".dashboardSliderMain" in-viewport-offset="150%"><div class="galleryTileContainer" ng-switch="$ctrl.viewModel.contentTileType" ng-click="$ctrl.openContentTile()"><div class="backgroundAndContent" ng-switch-when="1" ng-init="$ctrl.viewModel.workspaceId ? $ctrl.setGroupIcon($ctrl.viewModel.workspaceId) : $ctrl.setUserPhoto()"><div class="galleryBackground" ng-switch="$ctrl.viewModel.favoriteType"><div class="dashboardFavorite" ng-switch-when="1"><i class="glyphicon dashboardWatermarkIcon pbi-glyph-gauge glyph-large"></i><div class="galleryIcons"><i class="glyphicon pbi-glyph-gauge glyph-med" title="{{::$ctrl.dashboardTitle}}"></i></div></div><div class="reportFavorite" ng-switch-when="2"><i class="glyphicon reportWatermarkIcon pbi-glyph-barchart glyph-large"></i><div class="galleryIcons"><i class="glyphicon pbi-glyph-barchart glyph-large"></i></div></div></div><div class="iconsContainer"><div ng-if="!$ctrl.isMyWorkspace" class="owner" ng-switch="$ctrl.hasGroupIconSet" title="{{::$ctrl.groupName}}"><i ng-switch-when="false" class="glyphicon pbi-glyph-group glyph-med groupIcon placeholder"></i> <img class="groupIcon" ng-switch-when="true" ng-src="{{$ctrl.groupIcon}}"/></div><div ng-if="$ctrl.isMyWorkspace" ng-switch="$ctrl.hasUserIconSet" title="{{::$ctrl.groupName}}"><i ng-switch-when="false" class="glyphicon pbi-glyph-user glyph-med groupIcon placeholder"></i><div ng-switch-when="true" class="userIcon" ng-style="{\'background-image\': $ctrl.userIcon}"/></div><data-classification-label data-classification-id="$ctrl.viewModel.dataClassificationId"></data-classification-label></div><div class="content"><div class="titleAndIndicator"><dataset-icon-container view-model="$ctrl.viewModel" refresh-related="false"></dataset-icon-container><div class="galleryItemTitle trimmedTextWithEllipsis unselectable" ng-bind="$ctrl.viewModel.displayName" ng-attr-title="{{$ctrl.viewModel.displayName}}"/></div><div class="authorNameFavorite trimmedTextWithEllipsis unselectable" ng-bind="$ctrl.viewModel.ownerInfo" ng-attr-title="{{$ctrl.viewModel.ownerInfo}}"/></div></div><div class="backgroundAndContent" ng-switch-when="4"><div class="galleryBackground" ng-init="$ctrl.setOwnerPhoto()"><i class="glyphicon dashboardWatermarkIcon pbi-glyph-gauge glyph-large"></i><div class="galleryIcons"><i class="glyphicon pbi-glyph-gauge glyph-large"></i></div></div><div class="iconsContainer"><div ng-if="$ctrl.hasOwnerPhoto && $ctrl.inViewport" ng-switch="$ctrl.hasOwnerPhotoSet"><i ng-switch-when="false" class="glyphicon pbi-glyph-user glyph-med groupIcon placeholder"></i> <img ng-switch-when="true" class="userIcon" ng-src="{{$ctrl.ownerIcon}}"/></div><data-classification-label ng-if="$ctrl.inViewport" data-classification-id="$ctrl.viewModel.dataClassificationId"></data-classification-label></div><div class="content"><div class="titleAndIndicator"><dataset-icon-container ng-if="$ctrl.inViewport" view-model="$ctrl.viewModel" refresh-related="false"></dataset-icon-container><div class="galleryItemTitle trimmedTextWithEllipsis unselectable" ng-bind="$ctrl.viewModel.displayName" ng-attr-title="{{$ctrl.viewModel.displayName}}"/></div><div class="authorName trimmedTextWithEllipsis unselectable" ng-bind="$ctrl.viewModel.ownerFullname" ng-attr-title="{{$ctrl.viewModel.ownerFullname}}"/></div></div><div class="backgroundAndContent" ng-switch-when="2"><div class="galleryBackground"><i class="glyphicon reportWatermarkIcon pbi-glyph-barchart glyph-large"></i><div class="galleryIcons"><i class="glyphicon pbi-glyph-barchart glyph-large"></i></div></div><div class="content"><div class="titleAndIndicator"><dataset-icon-container ng-if="$ctrl.inViewport" view-model="$ctrl.viewModel" refresh-related="false"></dataset-icon-container><div class="galleryItemTitle trimmedTextWithEllipsis unselectable" ng-bind="$ctrl.viewModel.displayName" ng-attr-title="{{$ctrl.viewModel.displayName}}"/></div><div class="authorName trimmedTextWithEllipsis unselectable" ng-bind="$ctrl.viewModel.ownerFullname" ng-attr-title="{{$ctrl.viewModel.ownerFullname}}"/></div></div><div class="backgroundAndContent" ng-switch-when="8"><div class="galleryBackground"><i class="glyphicon workbookWatermarkIcon pbi-glyph-excel glyph-large"></i><div class="galleryIcons"><i class="glyphicon pbi-glyph-excel glyph-large"></i></div></div><div class="content"><div class="titleAndIndicator"><dataset-icon-container ng-if="$ctrl.inViewport" view-model="$ctrl.viewModel" refresh-related="false"></dataset-icon-container><dataset-icon-container ng-if="$ctrl.inViewport" view-model="$ctrl.viewModel" refresh-related="true"></dataset-icon-container><div class="galleryItemTitle trimmedTextWithEllipsis unselectable" ng-bind="$ctrl.viewModel.displayName" ng-attr-title="{{$ctrl.viewModel.displayName}}"/></div><div class="authorName trimmedTextWithEllipsis unselectable" ng-bind="$ctrl.viewModel.ownerFullname" ng-attr-title="{{$ctrl.viewModel.ownerFullname}}"/></div></div><div class="backgroundAndContent" ng-switch-when="16"><div class="galleryBackground"><app-logo view-model="::$ctrl.viewModel" size="large"></app-logo></div><section class="titleAndIndicator"><h1 class="trimmedTextWithEllipsis unselectable" ng-bind="::$ctrl.viewModel.displayName"/><h2 class="trimmedTextWithEllipsis unselectable" ng-bind="::$ctrl.viewModel.publishTime | date:\'MMM dd, yyyy\'"/></section><section class="contentDetails" ng-if="!$ctrl.isTileActionsVisible"><h1 class="trimmedTextWithEllipsis unselectable" ng-bind="::$ctrl.viewModel.displayName" title="{{::$ctrl.viewModel.displayName}}"/><h2 class="trimmedTextWithEllipsis unselectable" ng-bind="::$ctrl.viewModel.publishTime | date:\'MMM dd, yyyy\'" title="{{::$ctrl.viewModel.publishTime | date:\'MMM d, yyyy\'}}"/><h3 class="trimmedTextWithEllipsis unselectable" ng-bind="::$ctrl.viewModel.author" title="{{::$ctrl.viewModel.author}}"/><pbi-icon class="upperRight" ng-click="$ctrl.toggleTileActionsVisibility($event)" name="more" size="small"></pbi-icon></section><section class="contentActions" ng-if="$ctrl.isTileActionsVisible"><h1 class="trimmedTextWithEllipsis unselectable" ng-bind="::$ctrl.viewModel.displayName" title="{{::$ctrl.viewModel.displayName}}"/><div class="actions"><content-tile-options-menu view-model="::$ctrl.viewModel"></content-tile-options-menu></div><pbi-icon class="upperRight" ng-click="$ctrl.toggleTileActionsVisibility($event)" name="close" size="mini"></pbi-icon></section></div><div class="tileOptions trimmedTextWithEllipsis unselectable" ng-if="$ctrl.viewModel.contentTileType !== 16 && $ctrl.inViewport" ng-class="{\'readOnly\': !$ctrl.canShowOptionsMenu()}"><content-tile-options-menu view-model="$ctrl.viewModel"></content-tile-options-menu></div></div></li>'),e.put("components/contentTileContainer/contentTileContainer.html",'<div class="contentSection" ng-class="{isContentTileContentDisabled: $ctrl.collapsiblePaneMode !== 0}"><div class="mainContentHeader"><div class="galleryTitle" ng-transclude="title"></div></div> <button class="addButton" ng-click="$ctrl.activeAddDashboard()" localize-tooltip="NavigationPane_CreateDashboard" ng-show="$ctrl.showAddDashboardBtn"><i class="glyphicon pbi-glyph-add"></i></button><div class="contentScrollSection"><ul class="galleryList noselect"><content-tile ng-repeat="tile in $ctrl.getTiles()" view-model="tile" disable-lazy-loading="$ctrl.disableLazyLoading" ng-repeat-finish-event="{{::$ctrl.finishLoadEvent}}"></content-tile></ul></div></div>'),e.put("components/contentTileOptionsMenu/contentTileOptionsMenu.html",'<section ng-switch="$ctrl.tileType" ng-init="$ctrl.canShare($ctrl.viewModel, $ctrl.tileType)"><section class="tileMenu" onclick="event.stopPropagation();" ng-switch-when="1"><div class="shareBtn pbi-glyph-share" localize-tooltip="ContentListMenu_Share" ng-if="::$ctrl.canShareTile" ng-click="$ctrl.shareContentTile($ctrl.viewModel, $ctrl.tileType)"></div><div class="unfavoriteBtn powervisuals-glyph star-full" localize-tooltip="ContentListMenu_RemoveFavorite" ng-click="$ctrl.unfavoriteContentTile($ctrl.tileType)"></div><div class="renameBtn pbi-glyph-settings" title="{{::$ctrl.tooltipForSettings($ctrl.tileType)}}" ng-if="::$ctrl.canRewrite($ctrl.viewModel.getPermissions())" ng-click="$ctrl.contentTileRename($ctrl.tileType)"></div><div class="removeBtn pbi-glyph-delete" localize-tooltip="ContentTileOptions_Delete" ng-if="::$ctrl.deleteEnabled" ng-click="$ctrl.deleteContentTile($ctrl.tileType)"></div></section><section class="tileMenu" onclick="event.stopPropagation();" ng-switch-when="2"><div class="actionIcon personalizeBtn pbi-glyph-contentviewicon" localize-tooltip="ContentTileOptions_Personalize" ng-if="::$ctrl.canPersonalize()" ng-click="$ctrl.personalize()"></div><div class="actionIcon analyzeInExcel pbi-glyph-excel" localize-tooltip="ContentTileOptions_AnalyzeInExcel" ng-if="::$ctrl.canAnalyzeInExcel()" ng-click="$ctrl.analyzeInExcel()"></div><div class="actionIcon insightsBtn pbi-glyph-insight" localize-tooltip="ContentTileOptions_GetInsights" ng-if="::$ctrl.canRunInsights()" ng-click="$ctrl.runInsights()"></div><div class="actionIcon powerPointBtn pbi-glyph-powerpoint" localize-tooltip="ContentTileOptions_ExportPowerPoint" ng-if="::$ctrl.canExportPowerPoint($ctrl.tileType)" ng-click="$ctrl.exportToPowerPoint($ctrl.tileType)"></div><div class="actionIcon renameBtn pbi-glyph-settings" title="{{::$ctrl.tooltipForSettings($ctrl.tileType)}}" ng-if="::$ctrl.canRewrite($ctrl.viewModel.getPermissions())" ng-click="$ctrl.contentTileRename($ctrl.tileType)"></div><div class="actionIcon removeBtn pbi-glyph-delete" localize-tooltip="ContentTileOptions_Delete" ng-if="::$ctrl.deleteEnabled" ng-click="$ctrl.deleteContentTile($ctrl.tileType)"></div></section><section class="tileMenu" onclick="event.stopPropagation();" ng-switch-when="4"><div class="actionIcon personalizeBtn pbi-glyph-contentviewicon" localize-tooltip="ContentTileOptions_Personalize" ng-if="::$ctrl.canPersonalize()" ng-click="$ctrl.personalize()"></div><div class="actionIcon shareBtn pbi-glyph-share" localize-tooltip="ContentListMenu_Share" ng-if="::$ctrl.canShareTile" ng-click="$ctrl.shareContentTile($ctrl.viewModel, $ctrl.tileType)"></div><div class="actionIcon exportBtn pbi-glyph-export" ng-if="::$ctrl.isExportAllowed($ctrl.tileType)" ng-click="$ctrl.exportDashboard($ctrl.tileType)"></div><div class="actionIcon dashboardfavoriteBtn pbi-glyph-favoritestar" localize-tooltip="Artifact_Favorite" ng-if="$ctrl.canFavorite()" ng-disabled="$ctrl.isFavoriteDisabled()" ng-click="$ctrl.favoriteContentTile($ctrl.tileType)"></div><div class="actionIcon dashboardUnfavoriteBtn powervisuals-glyph star-full" localize-tooltip="ContentListMenu_RemoveFavorite" ng-if="$ctrl.canUnFavorite()" ng-disabled="$ctrl.isFavoriteDisabled()" ng-click="$ctrl.unfavoriteContentTile($ctrl.tileType)"></div><div class="actionIcon renameBtn pbi-glyph-settings" title="{{::$ctrl.tooltipForSettings($ctrl.tileType)}}" ng-if="::$ctrl.canRewrite($ctrl.viewModel.getPermissions())" ng-click="$ctrl.contentTileRename($ctrl.tileType)"></div><div class="actionIcon removeBtn pbi-glyph-delete" localize-tooltip="ContentTileOptions_Delete" ng-if="::$ctrl.deleteEnabled" ng-click="$ctrl.deleteContentTile($ctrl.tileType)"></div></section><section class="tileMenu" onclick="event.stopPropagation();" ng-switch-when="8"><div class="actionIcon personalizeBtn pbi-glyph-contentviewicon" localize-tooltip="ContentTileOptions_Personalize" ng-if="::$ctrl.canPersonalize()" ng-click="$ctrl.personalize()"></div><div class="actionIcon refreshNow pbi-glyph-refresh" localize-tooltip="ContentTileOptions_RefreshNow" ng-if="::$ctrl.canRefreshNow($ctrl.tileType)" ng-click="$ctrl.refreshNow($ctrl.tileType)"></div><div class="actionIcon scheduleRefresh pbi-glyph-refresh-data" localize-tooltip="ContentTileOptions_ScheduleRefresh" ng-if="::$ctrl.canScheduleRefresh($ctrl.tileType)" ng-click="$ctrl.scheduleRefresh($ctrl.tileType)"></div><div class="actionIcon editWorkbookBtn pbi-glyph-edit" localize-tooltip="ContentTileOptions_EditWorkbooks" ng-if="::$ctrl.canEditWorkbook($ctrl.tileType)" ng-click="$ctrl.editWorkbook($ctrl.tileType)"></div><div class="actionIcon replaceWorkbookBtn pbi-glyph-getdata" localize-tooltip="ContentTileOptions_ReplaceWorkbooks" ng-if="::$ctrl.canReplaceWorkbook($ctrl.tileType)" ng-click="$ctrl.replaceWorkbook($ctrl.tileType)"></div><div class="actionIcon renameBtn pbi-glyph-settings" title="{{::$ctrl.tooltipForSettings($ctrl.tileType)}}" ng-if="::$ctrl.canRewrite($ctrl.viewModel.getPermissions())" ng-click="$ctrl.contentTileRename($ctrl.tileType)"></div><div class="actionIcon removeBtn pbi-glyph-delete" localize-tooltip="ContentTileOptions_Delete" ng-if="::$ctrl.deleteEnabled" ng-click="$ctrl.deleteContentTile($ctrl.tileType)"></div></section><section class="tileMenu" onclick="event.stopPropagation();" ng-switch-when="16"><pbi-icon name="contentviewicon" size="small" localize-tooltip="ContentTileOptions_Personalize" ng-if="::$ctrl.canPersonalize()" ng-click="$ctrl.personalize()"></pbi-icon><pbi-icon name="delete" size="small" localize-tooltip="Delete_ToolTip" ng-if="::$ctrl.deleteEnabled" ng-click="$ctrl.deleteContentTile($ctrl.tileType)"></pbi-icon></section><section class="tileMenu" onclick="event.stopPropagation();" ng-switch-when="32"><pbi-icon name="edit" size="small" localize-tooltip="Edit_ToolTip" ng-click="$ctrl.editChannel()"></pbi-icon><pbi-icon name="delete" size="small" localize-tooltip="Delete_ToolTip" ng-if="::$ctrl.deleteEnabled" ng-click="$ctrl.deleteContentTile($ctrl.tileType)"></pbi-icon></section><section class="tileMenu" onclick="event.stopPropagation();" ng-switch-when="64"><pbi-icon class="actionIcon" name="excel" size="small" localize-tooltip="ContentTileOptions_AnalyzeInExcel" ng-if="::$ctrl.canAnalyzeInExcel()" ng-click="$ctrl.analyzeInExcel()"></pbi-icon><pbi-icon class="actionIcon" name="insight" size="small" localize-tooltip="ContentTileOptions_GetInsights" ng-if="::$ctrl.canRunInsights()" ng-click="$ctrl.runInsights()"></pbi-icon></section></section>'),e.put("components/createAppChannel/createAppChannel.html",'<app-channel-header class="item-auto" view-model="$ctrl.viewModel"></app-channel-header><section class="tabsContainer item-auto"><section class="tabsContainerLeft"><header ng-class="{active: $ctrl.activeTab == 0}" ng-click="$ctrl.activeTab=0"><span localize="AppModel_CreateAppModel_Tab_Details"></span><pbi-icon name="asterisk" size="micro" ng-if="!$ctrl.isAppDetailsFormValid()"></pbi-icon></header><header ng-class="{active: $ctrl.activeTab == 1}" ng-click="$ctrl.activeTab=1"><span localize="AppModel_CreateAppModel_Tab_Content"></span><pbi-icon name="asterisk" size="micro" ng-if="!$ctrl.isAppContentFormValid()"></pbi-icon></header><header ng-class="{active: $ctrl.activeTab == 2}" ng-click="$ctrl.activeTab=2"><span localize="AppModel_CreateAppModel_Tab_Access"></span><pbi-icon name="asterisk" size="micro" ng-if="!$ctrl.isAppAccessFormValid()"></pbi-icon></header></section><section class="tabsContainerRight"><pbi-button kind="icon" label="CreateApp_Publish" icon-name="go" ng-click="$ctrl.publishApp()"></pbi-button></section></section><section class="formsContainer item-fill" ng-switch="$ctrl.activeTab"><create-app-channel-details ng-switch-when="0" view-model="::$ctrl.viewModel"></create-app-channel-details><create-app-channel-content ng-switch-when="1" view-model="::$ctrl.viewModel"></create-app-channel-content><create-app-channel-access ng-switch-when="2" view-model="::$ctrl.viewModel"></create-app-channel-access></section>'),e.put("components/createAppChannelAccess/createAppChannelAccess.html",'<section class="accessHeader"><span localize="AppModel_CreateAppModel_Access_Permissions"></span><pbi-icon name="asterisk" size="micro"></pbi-icon></section><pbi-radio-group no-label ng-model="$ctrl.viewModel.isSharedToEntireOrg"><pbi-radio label="AppModel_CreateAppModel_Access_EntireOrganization" ng-value="true"></pbi-radio><pbi-radio label="AppModel_CreateAppModel_Access_SpecificIndividualsOrGroup" ng-value="false"></pbi-radio></pbi-radio-group><section class="appAccessEmailList" ng-class="{\'disabled\': $ctrl.viewModel.isSharedToEntireOrg}"><emails-list view-model="$ctrl.viewModel.emailsList" allow-object-ids allow-security-groups allow-distribution-lists></emails-list></section><section class="appAccessUrlMessage flexbox"><pbi-icon class="item-auto" name="info" size="small"></pbi-icon><header class="item-fill" ng-bind="::$ctrl.appAccessUrlMessage"></header></section><section class="appAccessAllowCopyContent"><section class="appAccessAllowCopyContentHeader"><header localize="AppModel_CreateAppModel_Access_AllowContentToBeCopied"></header><pbi-icon name="info" size="small" tooltip tooltip-config="$ctrl.allowCopyContentTooltipConfig"></pbi-icon></section><pbi-toggle ng-model="$ctrl.viewModel.allowCopyContent" no-label on-state-text="ToggleSwitchOn" off-state-text="ToggleSwitchOff"></pbi-toggle></section><section class="appAccessUrls" ng-if="::!$ctrl.isNewApp()"><section class="appContentUrls appUrl"><section class="appContentUrlItem"><header localize="CreateApp_AppUrl"></header><editable-label readonly="true" view-model="::$ctrl.getUrlLabelModel($ctrl.viewModel)"></editable-label></section></section><section class="appContentUrls dashboardUrls" ng-if="::$ctrl.hasDashboardResources()"><section class="appContentUrlHeader"><header localize="AppModel_CreateAppModel_Access_DashboardUrls"></header><pbi-icon name="info" size="small" tooltip tooltip-config="$ctrl.dashboardUrlsTooltipConfig"></pbi-icon><pbi-icon name="chevronupmedium" size="small" ng-class="{\'expanded\': $ctrl.isDashboardUrlListExpanded}" ng-if="::$ctrl.shouldShowDashboardUrlToggle()" ng-click="$ctrl.toggleDashboardUrlList()"></pbi-icon></section><section class="appContentUrlItem" ng-repeat="dashboard in $ctrl.dashboardResources | limitTo: $ctrl.dashboardUrlListItemLimit"><header ng-bind="::dashboard.displayName"></header><editable-label readonly="true" view-model="::$ctrl.getUrlLabelModel(dashboard)"></editable-label></section></section><section class="appContentUrls reportUrls" ng-if="::$ctrl.hasReportResources()"><section class="appContentUrlHeader"><header localize="AppModel_CreateAppModel_Access_ReportUrls"></header><pbi-icon name="info" size="small" tooltip tooltip-config="$ctrl.reportUrlsTooltipConfig"></pbi-icon><pbi-icon name="chevronupmedium" size="small" ng-class="{\'expanded\': $ctrl.isReportUrlListExpanded}" ng-if="::$ctrl.shouldShowReportUrlToggle()" ng-click="$ctrl.toggleReportUrlList()"></pbi-icon></section><section class="appContentUrlItem" ng-repeat="report in $ctrl.reportResources | limitTo: $ctrl.reportUrlListItemLimit"><header ng-bind="report.displayName"></header><editable-label readonly="true" view-model="::$ctrl.getUrlLabelModel(report)"></editable-label></section></section></section>'),e.put("components/createAppChannelContent/createAppChannelContent.html",'<header class="appContentHeader" localize="AppModel_CreateAppModel_Content_ContentToPublish"></header><section class="appContentUrls appUrl" feature-switch="appTemplatesEnabled"><section class="appTemplateApp"><header localize="AppModel_CreateAppModel_Content_ContentToPublish_Allow_Templating"></header><pbi-toggle ng-model="$ctrl.viewModel.publishAsTemplate" no-label on-state-text="ToggleSwitchOn" off-state-text="ToggleSwitchOff"></pbi-toggle></section></section><section class="appContentList"><section class="dashboardResourceList"><header localize="ContentList_Dashboards"></header><section class="appContentListScrollSection" vs-repeat><section class="pbi-input" ng-repeat="dashboard in ::$ctrl.dashboardResources"> <input type="checkbox" ng-model="dashboard.isSelected" ng-disabled="$ctrl.isDashboardDisabled(dashboard)" ng-change="$ctrl.toggleDashboard(dashboard)"/><label class="trimmedTextWithEllipsis" ng-bind="dashboard.displayName"/></section></section></section><section class="reportResourceList"><header localize="ContentList_Reports"></header><section class="appContentListScrollSection" vs-repeat><section class="pbi-input" ng-repeat="report in ::$ctrl.reportResources"> <input type="checkbox" ng-model="report.isSelected" ng-disabled="$ctrl.isReportDisabled(report)" ng-change="$ctrl.toggleReport(report)"/><label class="trimmedTextWithEllipsis" ng-bind="report.displayName"></label></section></section></section><section class="datasetResourceList"><header localize="ContentList_Datasets"></header><section class="appContentListScrollSection" vs-repeat><section class="pbi-input" ng-repeat="dataset in ::$ctrl.datasetResources"> <input type="checkbox" ng-model="dataset.isSelected" ng-disabled="!dataset.isEnabled" ng-change="$ctrl.toggleDataset(dataset)"/><label class="trimmedTextWithEllipsis" ng-bind="dataset.displayName"/></section></section></section></section><section class="defaultContentSelector"><label localize="AppModel_CreateAppModel_Content_DefaultContent"></label><pbi-icon name="info" size="small" tooltip tooltip-config="$ctrl.defaultContentTooltipConfig"></pbi-icon></section><pbi-radio-group no-label ng-model="$ctrl.viewModel.defaultContentOption"><pbi-radio label="CreateApp_Index" ng-value="0"></pbi-radio><pbi-radio label="CreateApp_DefaultContent" ng-value="1"></pbi-radio></pbi-radio-group> <select class="appSpecificContentOptions" ng-model="$ctrl.appSpecificContent" ng-disabled="$ctrl.viewModel.defaultContentOption === 0" ng-change="$ctrl.updateAppArtifact()" ng-options="candidate as $ctrl.getAppSpecificContentCandidateDisplayName(candidate) for candidate in $ctrl.appSpecificContentCandidates | orderBy: \'displayName\'"></select>'),e.put("components/createAppChannelDetails/createAppChannelDetails.html",'<section class="requiredLabel"><pbi-icon name="asterisk" size="micro"></pbi-icon><header localize="AppModel_CreateAppModel_Details_Required"></header></section><pbi-textfield label="App_Title" ng-model="$ctrl.viewModel.displayName" placeholder="App_TitlePlaceholder" required></pbi-textfield><pbi-textarea label="AppModel_CreateAppModel_Details_Description" ng-model="$ctrl.viewModel.description" maxlength="4000" placeholder="{{::$ctrl.appDescriptionPlaceholder}}" required></pbi-textarea><section class="uploadImage"><header localize="AppModel_CreateAppModel_Details_Image"></header><section><app-logo view-model="::$ctrl.viewModel" size="large"></app-logo><section class="imageConfig"><section><pbi-button kind="icon" localize-tooltip="AppModel_CreateAppModel_Details_UploadImage" label="AppModel_CreateAppModel_Details_UploadImage" icon-name="upload" ng-click="$ctrl.chooseAppLogoImage()"></pbi-button><pbi-icon name="info" size="small" tooltip tooltip-config="$ctrl.uploadImageTooltipConfig"></pbi-icon></section><section><pbi-button kind="icon" localize-tooltip="AppModel_CreateAppModel_Details_DeleteImage" label="AppModel_CreateAppModel_Details_DeleteImage" icon-name="delete" ng-click="$ctrl.deleteAppLogoImage()" ng-disabled="!$ctrl.hasAppLogoImage()"></pbi-button></section><section><pbi-button kind="icon" localize-tooltip="AppModel_CreateAppModel_Details_Randomize" label="AppModel_CreateAppModel_Details_Randomize" icon-name="refresh" ng-click="$ctrl.randomizeAppLogoIcon()"></pbi-button></section></section></section></section><section class="iconConfig"><section class="iconBackgroundColor"><header localize="AppModel_CreateAppModel_Details_BackgroundColor"></header><icon-selector icons="$ctrl.iconBackgroundColors" config="$ctrl.iconBackgroundColorsConfig"></icon-selector></section><section class="iconColor"><header localize="AppModel_CreateAppModel_Details_IconColor"></header><icon-selector icons="$ctrl.iconColors" config="$ctrl.iconColorsConfig"></icon-selector></section><section class="iconName"><header localize="AppModel_CreateAppModel_Details_Icon"></header><icon-selector icons="$ctrl.iconNames" config="$ctrl.iconNamesConfig"></icon-selector></section></section>'),e.put("components/dashboardEditMobileDisplay/dashboardEditMobileDisplay.html",'<div class="dashboardModeView mobileAuthoring mobileLayout"><dashboard-pane view-model="$ctrl.viewModel.dashboardPane"></dashboard-pane><div class="simulatorWrapper"><section class="mobileAuthoringIntroduction"><span class="phoneAuthoringTitle" localize="Phone_Authoring_Dashboard_Title"></span><i class="centeredGlyph glyphicon pbi-glyph-info glyph-small icon"><span class="tooltipText" localize="Phone_Authoring_Dashboard_Description"></span></i></section><div class="authoringDashboardContainer"><div class="authoringDashboard"><div ng-if="$ctrl.pinnedTiles().length === 0" class="emptyStateLabel"><i class="circle glyphicon pbi-glyph-pinned glyph-reg"></i><div class="emptyStateTitle" localize="Authoring_Dashboard_Empty_State_Label"></div></div><div class="authoringDashboardTitleContainer"> <span class="label">{{$ctrl.viewModel.mobileDashboard.displayName}}</span></div><dashboard disable-tile-ease-in="true" view-model="$ctrl.viewModel.mobileDashboard" display-layout="1" disable-pointer-events="true" mobile-layout="1" in-edit-mobile-layout-mode="true"></dashboard></div></div></div></div>'),e.put("components/dashboardPane/dashboardPane.html",'<article class="dashboardPane sidePane smallFontSize" ng-class="{ isCollapsed: !$ctrl.viewModel.isPaneExpanded}"><div class="paneHeader"> <button class="toggleBtn" ng-class="{ isCollapsed: !$ctrl.viewModel.isPaneExpanded }" ng-click="$ctrl.toggle()" localize-tooltip="DashboardPane_Toggle"><i class="btnIcon glyphicon pbi-glyph-chevronrightmedium glyph-mini"></i><h2 class="sidePaneHorizontalTitle sidePaneTitle unselectable fieldsTab largeFontSize trimmedTextWithEllipsis" ng-if="$ctrl.viewModel.isPaneExpanded" localize="DashboardPane_Header"></h2><div class="verticalTitle" ng-if="!$ctrl.viewModel.isPaneExpanded"><h2 class="largeFontSize" localize="DashboardPane_Header"></h2></div></button></div><div class="paneContents flex" ng-show="$ctrl.viewModel.isPaneExpanded"><label localize="DashboardPane_TextMessage"></label><dashboard-tile-list view-model="$ctrl.viewModel.dashboard"></dashboard-tile-list></div></article>'),e.put("components/dashboardTileList/dashboardTileList.html",'<div class="tile-list"><div class="no-items-container" ng-if="!$ctrl.shouldShowUnpinnedTileList()"><i class="glyphicon pbi-glyph-unpin glyph-medium"></i><label localize="DashboardTileList_NoTiles" class="no-items-message"></label></div><ul class="tile-container" ng-if="$ctrl.shouldShowUnpinnedTileList()"><dashboard-tile ng-repeat="tile in $ctrl.unpinnedTiles() track by $ctrl.tileTrackerFn(tile)" view-model="tile" can-edit="false" disable-interactions="true" add-tile-to-mobile-view="$ctrl.addTileToMobile(tile)" disable-pointer-events="true" viewport-context-selector="\'dashboard-tile-list\'"></dashboard-tile></ul></div>'),e.put("components/dataClassificationLabel/dataClassificationLabel.html",'<a class="dataClassification" ng-href="{{$ctrl.dataClassification.url}}" onclick="event.stopPropagation();" target="_blank" ng-if="$ctrl.isDataClassificationFeatureEnabled && $ctrl.dataClassification && $ctrl.dataClassification.showTag && $ctrl.dataClassification.url" title="{{$ctrl.dataClassification.name}}" ng-bind="$ctrl.dataClassification.shortHand"></a><span class="dataClassification" ng-if="$ctrl.isDataClassificationFeatureEnabled && $ctrl.dataClassification && $ctrl.dataClassification.showTag && !$ctrl.dataClassification.url" title="{{$ctrl.dataClassification.name}}" ng-bind="$ctrl.dataClassification.shortHand"></span>'),e.put("components/datasetIconContainer/datasetIconContainer.html",'<span class="datasetItemIcon" ng-switch="::$ctrl.refreshRelated"><span class="datasetItemIndicator" ng-switch-when="false"><i ng-if="::$ctrl.isShared()" class="glyphicon pbi-glyph-shared" localize-tooltip="NavigationPane_SharedWithMe"></i><i ng-if="$ctrl.isNew()" class="glyphicon pbi-glyph-asterisk"></i></span><span class="datasetRefreshIcons" ng-switch-when="true" ng-switch="$ctrl.isRefreshInProgress()"><spinner ng-switch-when="true" localize-tooltip="NavigationPane_RefreshInProgress"></spinner><span ng-switch-default><i ng-if="$ctrl.isPublishError()" class="warning glyphicon pbi-glyph-warning glyph-small" localize-tooltip="NavigationPane_RefreshPublishError"></i><i ng-if="$ctrl.showRefreshError && $ctrl.showRefreshError()" class="warning glyphicon pbi-glyph-warning glyph-small" tooltip tooltip-config="$ctrl.tooltipConfig" ng-click="$event.stopPropagation();$ctrl.showRefreshErrorDialog()"></i></span></span></span>'),e.put("components/exportDataDialog/exportDataDialog.html",'<dialog-frame><dialog-header><span localize="ModalDialog_ExportDataTitle" class="dialogTitle"></span></dialog-header><dialog-body><span localize="ModalDialog_ExportDataTextDialogTwo" class="dialogMessage"></span><ul class="radioButtonText"><li ng-repeat="val in ::$ctrl.viewModel.options"><div class="pbi-input dataTypeMenu" tooltip tooltip-config="$ctrl.getTooltipConfigForDataType(val)"> <input class="dataTypeItem" type="radio" name="option" ng-model="$ctrl.viewModel.dataType" ng-value="::$index" ng-change="$ctrl.update(val)" ng-disabled="$ctrl.isDataTypeDisabled(val)"><label ng-bind="::val"></label></div></li></ul><pbi-select ng-if="$ctrl.viewModel.isCsvFormatDisabled" class="exportDataSelectButton" label="ModalDialog_ExportDataFormatTypeText" ng-model="$ctrl.viewModel.dataFormat"><pbi-option label="ModalDialog_ExportDataFormatXL" ng-value="\'0\'" ng-disabled="::$ctrl.viewModel.isExlFormatDisabled"></pbi-option><pbi-option label="ModalDialog_ExportDataFormatCsv" ng-value="\'1\'" ng-disabled="true"></pbi-option></pbi-select><pbi-select ng-if="!$ctrl.viewModel.isCsvFormatDisabled" class="exportDataSelectButton" label="ModalDialog_ExportDataFormatTypeText" ng-model="$ctrl.viewModel.dataFormat"><pbi-option label="ModalDialog_ExportDataFormatXL" ng-value="\'0\'" ng-disabled="::$ctrl.viewModel.isExlFormatDisabled"></pbi-option><pbi-option label="ModalDialog_ExportDataFormatCsv" ng-value="\'1\'"></pbi-option></pbi-select><pbi-alert class="dataInfoMessage" kind="\'info\'" message-info="ModalDialog_ExportDataInfoMessage"></pbi-alert><div ng-if="::$ctrl.viewModel.isExlFormatDisabled" ng-switch="$ctrl.viewModel.exportXlsxUnsupportedType"><pbi-alert ng-switch-when="1" kind="\'info\'" message-info="ExlFormat_ToolTipDescription_AsOnPrem"></pbi-alert><pbi-alert ng-switch-default kind="\'info\'" message-info="ExlFormat_ToolTipDescription"></pbi-alert></div><pbi-alert ng-if="$ctrl.viewModel.isCsvFormatDisabled" kind="\'info\'" message-info="SupportOnlyExlFormat_ToolTipDescription"></pbi-alert></dialog-body><dialog-footer><pbi-link ng-if="::($ctrl.viewModel.isUnderlyingDisabled && !$ctrl.viewModel.isExlFormatDisabled)" class="learnMoreLink" guid="827799" label="Learn_Aggregates"></pbi-link> <button autofocus type="submit" ng-click="$ctrl.exportData()" class="primary" localize="ModalDialogButtonText_Export"></button> <button ng-click="$ctrl.close()" localize="ModalDialogButtonText_Cancel"></button></dialog-footer></dialog-frame>'),e.put("components/exportDataDialog/exportDataDialogDefinition.html",'<export-data-dialog view-model="viewModel"></export-data-dialog>'),e.put("components/groupActions/groupActions.html",'<button class="options navigationPaneButton groupContextMenuButton " dropdown-menu dropdown-class="navigationPaneGroupContextMenu" dropdown-items="$ctrl.items" dropdown-orientation="horizontal" dropdown-on-item-selected="$ctrl.onGroupNavigationPaneMenuItemSelected(selected, $ctrl.group)" dropdown-separator-class="groupContextMenuSeparator"><i class="glyphicon pbi-glyph-more glyph-small"></i></button>'),e.put("components/groupIcon/groupIcon.html",'<lazy-icon ng-if="$ctrl.group" src="$ctrl.src" placeholder="$ctrl.placeholder" placeholder-size="$ctrl.placeholderSize"></lazy-icon>'),
e.put("components/groupList/groupList.html",'<header localize="NavigationPane_Groups_MyWorkspace_V2"></header> <button class="button myWorkspace" ng-class="{selected: $ctrl.isActiveGroup($ctrl.myWorkspace)}" ng-click="$ctrl.switchGroup($ctrl.myWorkspace)" title="{{::$ctrl.myWorkspace.displayName}}"><group-icon group="::$ctrl.myWorkspace" placeholder-size="small"></group-icon><span class="workspaceName" ng-bind="::$ctrl.myWorkspace.displayName"></span></button><header class="groupHeader"><span localize="NavigationPane_Groups_MyGroups"></span> <button class="addGroup glyphicon pbi-glyph-add glyph-micro" ng-click="$ctrl.addGroup()" localize-tooltip="NavigationPane_CreateGroup"></button></header><ul><li ng-repeat="group in $ctrl.groups track by group.aadGroupId"> <button class="button" ng-click="$ctrl.switchGroup(group)" ng-class="{selected: $ctrl.isActiveGroup(group)}" title="{{group.displayName}}"><group-icon group="group" placeholder-size="small"></group-icon><span class="workspaceName" ng-bind="group.displayName"></span></button><group-actions group="group" on-leave-group="$ctrl.updateGroupList()"></group-actions></li></ul><div ng-if="$ctrl.isExpanded" class="capture" ng-click="$ctrl.toggleGroupListPane(false)"></div>'),e.put("components/groupSwitcher/groupSwitcher.html",'<button ng-click="$ctrl.navigateToContentList()" title="{{$ctrl.groupService.activeGroup.displayName}}"><group-icon group="$ctrl.groupService.activeGroup" placeholder-size="small"></group-icon><span class="workspaceName" ng-bind="$ctrl.groupService.activeGroup.displayName"></span></button> <button class="switcher" ng-click="$ctrl.onToggled()" localize-tooltip="GroupSwitch_NavPaneTitle"><span class="glyphicon pbi-glyph-sort glyph-small"></span></button>'),e.put("components/groupSwitcherV2/groupSwitcherV2.html",'<div class="groupSwitcherV2" ng-class="{\'isExpanded\':$ctrl.isExpanded && $ctrl.canExpand}"><div class="activeGroup"><div class="toggle" ng-click="$ctrl.toggleGroupSwitcherPane()" localize-tooltip="NavigationPane_Workspaces"><div class="icon"><i class="glyphicon pbi-glyph-collections glyph-small"></i></div><span class="text" localize="NavigationPane_Workspaces"></span></div> <button class="options add" focus-out-trigger ng-click="$ctrl.addGroup()" localize-tooltip="NavigationPane_CreateGroup"><i class="glyphicon pbi-glyph-add"></i></button></div><div class="list"><span class="sectionLabel" localize="NavigationPane_Groups_MyWorkspace_V2"></span><div focus-out-trigger class="groupItem" ng-click="$ctrl.switchGroup($ctrl.groupService.groups[0])" ng-class="{\'selected\': $ctrl.isGroupSelected($ctrl.groupService.groups[0])}"><div class="icon" ng-switch="$ctrl.userPhoto !== undefined"><i ng-switch-when="false" class="glyphicon pbi-glyph-user glyph-med groupIcon placeholder"></i><div ng-switch-when="true" ng-style="{\'background-image\': $ctrl.userPhoto,\'background-size\':\'cover\',\'background-position\':\'0px 0px\'}"></div></div><span class="text" title="{{$ctrl.groupService.groups[0].displayName}}" ng-bind="$ctrl.groupService.groups[0].displayName"></span></div><span class="sectionLabel" localize="NavigationPane_Groups_MyGroups"></span><ul><li ng-repeat="group in $ctrl.getGroups()" focus-out-trigger ng-click="$ctrl.switchGroup(group)" class="groupItem" ng-if="$index!=0" ng-class="{\'selected\': $ctrl.isGroupSelected(group)}"><div class="icon" ng-switch="group.icon !== undefined"><i ng-switch-when="false" class="glyphicon pbi-glyph-group glyph-med groupIcon placeholder"></i> <img ng-switch-when="true" class="groupIcon" ng-src="{{group.icon}}"/></div><span class="text"><span title="{{group.displayName}}" ng-bind="group.displayName"></span></span></li></ul></div></div>'),e.put("components/metadataContainer/metadataContainer.html","<div ng-repeat='metadata in $ctrl.datasetMetadata' class='metadata' ng-switch='metadata.type'><div ng-switch-when='0'> <span class='message'>{{metadata.value()}}</span><span ng-if='metadata.infoTooltipConfig' class='glyphicon glyph-mini pbi-glyph-info' tooltip tooltip-config='::metadata.infoTooltipConfig'></span></div><div ng-switch-when='2'> <span>{{ metadata.value() }}</span> <a ng-bind-attr='{href: metadata.linkUrl(), title: metadata.linkTitle() || metadata.linkText(), target: metadata.linkTarget}'>{{ metadata.linkText() }}</a></div><div ng-switch-when='3'><span class='refreshFlyoutWarning' ng-if='metadata.isWarning == true'><i class='glyphicon pbi-glyph-error glyph-mini'></i></span> <a class='refreshHistory' href='' ng-click='metadata.actionOnClick()'>{{metadata.value()}}</a></div><div ng-switch-when='4'><div ng-switch='metadata.status'><div ng-switch-when='0'><span class='glyphicon glyph-small pbi-glyph-error statusIcon'></span><span class='statusText' ng-bind='metadata.value'></span></div><div ng-switch-when='1'><span class='glyphicon glyph-small pbi-glyph-success glyph-success-color statusIcon'></span><span class='statusText' ng-bind='metadata.value'></span></div></div></div></div>"),e.put("components/navigationPaneV2/navigationPaneV2.html",'<div class="navigationPaneV2" ng-class="{isFrozen: $ctrl.groupService.isInGroupTransition, isExpanded: $ctrl.isExpanded, isGroupSwitcherExpanded: $ctrl.isGroupSwitcherExpanded && $ctrl.isExpanded, listViewEnabled: $ctrl.isListViewEnabled}"> <button class="expanderBtn glyphicon pbi-glyph-globalnavbutton slideFadeIn" ng-click="$ctrl.onToggleClicked()" title="{{ $ctrl.getExpandButtonTitle() }}"></button><div class="navigationPaneBody slideFadeIn" feature-switch-class="appsEnabled"><div class="globalPivots"><div class="featuredDashboard" localize-tooltip="NavigationPane_FeaturedDashboardTitle" ng-class="{\'highlight\':$ctrl.isOnFeaturedDashboard()}"> <button class="button featureDashboardContent" ng-click="$ctrl.navigateToFeaturedDashboard()" ng-disabled="!$ctrl.home.isHomeDashboardSet"><i class="navicon glyphicon pbi-glyph-gauge glyph-small"></i><span class="btnLabel" localize="NavigationPane_FeaturedDashboardTitle"></span></button> <button class="options" dropdown-menu dropdown-class="navigationPaneGroupContextMenu" dropdown-dark-theme="false" dropdown-items="$ctrl.homeDashboardMenuItems" dropdown-orientation="horizontal" dropdown-on-item-selected="$ctrl.onHomeDashboardMenuItemSelected(selected)" ng-disabled="!$ctrl.home.isHomeDashboardSet"><i class="glyphicon moreIcon pbi-glyph-more"></i></button></div> <button class="button favorites" localize-tooltip="Favorites_NavPaneTitle" ng-click="$ctrl.navigateToFavorites()" ng-class="{\'highlight\':$ctrl.isOnFavorites()}"><i class="navicon glyphicon pbi-glyph-favoritestar glyph-small"></i><span class="btnLabel" localize="Favorites_NavPaneTitle"></span></button> <button class="button recent" ng-if="$ctrl.isListViewEnabled" localize-tooltip="RecentlyViewed_NavPaneTitle" ng-click="$ctrl.navigateToRecentlyViewed()" ng-class="{\'highlight\':$ctrl.isOnRecentlyViewed()}"><i class="navicon glyphicon pbi-glyph-mru glyph-small"></i><span class="btnLabel" localize="RecentlyViewed_NavPaneTitle"></span></button> <button class="button apps" localize-tooltip="Apps_NavPaneTitle" feature-switch="appsEnabled" ng-if="$ctrl.appsVisible()" ng-click="$ctrl.navigateToApps()" ng-class="{\'highlight\':$ctrl.isOnApps()}"><i class="navicon glyphicon pbi-glyph-user glyph-small"></i><span class="btnLabel" localize="Apps_NavPaneTitle"></span></button> <button class="button sharedWithMe" localize-tooltip="NavigationPane_SharedWithMeTitle" ng-if="$ctrl.isListViewEnabled" ng-click="$ctrl.navigateToOnlySharedWithMe()" ng-class="{\'highlight\':$ctrl.isOnSharedWithMe()}"><i class="navicon glyphicon pbi-glyph-shared glyph-small"></i><span class="btnLabel" localize="NavigationPane_SharedWithMeTitle"></span></button></div><group-switcher ng-if="$ctrl.isListViewEnabled" class="button myWorkspace" on-toggled="$ctrl.onGroupSwitcherToggled(isExpanded)" ng-class="{\'highlight\':$ctrl.isOnWorkspace(), isExpanded: $ctrl.isExpanded}"></group-switcher><group-switcher-v2 ng-if="!$ctrl.isListViewEnabled" can-expand="$ctrl.isExpanded" on-toggled="$ctrl.onGroupSwitcherToggled(isExpanded)"></group-switcher-v2> <button class="button getData" localize-tooltip="NavigationPane_GetData" ng-click="$ctrl.navigateToGetData()" ng-show="$ctrl.showGetDataBtn"><i class="navicon glyphicon pbi-glyph-getdata glyph-small"></i><span class="btnLabel" localize="NavigationPane_GetData"></span></button></div><group-list ng-if="$ctrl.isListViewEnabled" active-group="$ctrl.groupService.activeGroup" on-toggled="$ctrl.onGroupSwitcherToggled(isExpanded)" is-expanded="$ctrl.isGroupSwitcherExpanded" ng-show="$ctrl.isGroupSwitcherExpanded"></group-list></div>'),e.put("components/previewFeaturesModal/previewFeaturesModal.html",'<header><i class="glyphicon pbi-glyph-powerbi glyph-custom"></i><h localize="PreviewFeaturesModal_Header"></h></header><div class="content"><ul class="tabs"><li ng-repeat="tab in $ctrl.tabs track by tab.icon" ng-click="$ctrl.selectTab(tab)" ng-class="{selected: $ctrl.isTabSelected(tab)}"><i class="glyphicon pbi-glyph-{{tab.icon}} glyph-custom"></i><span ng-bind="tab.title"></span></li></ul><p><span ng-bind="$ctrl.activeTab.text"></span><a target="_blank" ng-href="{{$ctrl.activeTab.learnMoreUrl}}" localize="LearnMore"></a></p></div>'),e.put("components/previewFeedbackModal/previewFeedbackModal.html",'<header><i class="glyphicon pbi-glyph-powerbi glyph-custom"></i><h localize="PreviewFeedbackModal_Header"></h></header><div class="content"><p><div localize="PreviewFeedbackModal_Content1"></div><div localize="PreviewFeedbackModal_Content2"></div></p></div>'),e.put("components/printableImage/printableImage.html",'<img class="image" ng-class="{loaded: $ctrl.imageLoaded, animate: !$ctrl.disableAnimation}" ng-src="{{$ctrl.source}}" on-load="$ctrl.onLoad()" on-error="$ctrl.onError()"/>'),e.put("components/realTimeBlade/realTimeBlade.html",'<ng-form id="realTimeBlade" name="realTimeBladeForm" class="paneLayout"><header><h1 class="primaryHeading" localize="Realtime_AddStreamingDataTitle"></h1><h2 class="secondaryHeading" ng-bind="$ctrl.getBreadCrumb()"></h2></header><section class="banner" ng-if="$ctrl.stage === 0"><pbi-button label="ManageDatasets_AddStreamingDataset" class="wideButton" icon-name="add" primary="true" ng-click="$ctrl.navigateToManageDatasets(true)"></pbi-button></section><section class="contentContainer noPadding" ng-switch="$ctrl.stage"><section class="datasetsSelector" ng-switch-when="0"><h4 class="headerText" localize="Realtime_yourDatasets"></h4><ul class="datasetsList"><li class="dataset" ng-repeat="model in ::$ctrl.models" ng-class="{selected: $ctrl.selectedModel === model}" ng-click="$ctrl.selectModel(model)" ng-bind="::model.displayName" ng-attr-title="{{::model.displayName}}"></li></ul></section><real-time-tile-visualization-design tile="$ctrl.selectedTile" model="$ctrl.selectedModel" has-errors="$ctrl.hasVisualConfigError" ng-switch-when="1"></real-time-tile-visualization-design></section><section class="banner"><pbi-button label="Realtime_manageData" kind="text" ng-click="$ctrl.navigateToManageDatasets()"></pbi-button></section><footer><fieldset class="buttons"><pbi-button label="PBI_Button_Label_Back" ng-click="$ctrl.prev()"></pbi-button><pbi-button label="PBI_Button_Label_Next" primary="true" ng-click="$ctrl.next()" ng-disabled="realTimeBladeForm.$invalid || !$ctrl.nextValid()"></pbi-button><pbi-button label="PBI_Button_Label_Cancel" ng-click="$ctrl.cancel()"></pbi-button></fieldset></footer></ng-form>'),e.put("components/realTimeTile/realTimeTile.html",'<div class="realTimeTile compositeTile" ng-class="{ fullLayout: $ctrl.viewModel.config.layoutType === 1 }"><div class="visualTile"><visual ng-if="!$ctrl.viewModel.isLoading && !$ctrl.viewModel.hideVisual" view-model="$ctrl.viewModel.visual" allow-deferred-rendering="::true"></visual></div></div>'),e.put("components/realTimeTileVisualizationDesign/realTimeTileVisualizationDesign.html",'<ng-form name="realTimeVisualizationForm"><section id="realTimeVisualization"><section class="visualSelector selectLabelBlock"><label localize="Realtime_VisualizationType"></label> <select ng-model="$ctrl.activeVisual" ng-options="supportedVisual as supportedVisual.title for supportedVisual in ::$ctrl.supportedVisualTypes" ng-change="$ctrl.onVisualChanged()"></select></section><section class="visualConfig"><ul class="tabs" ng-if="$ctrl.showCardFormattingOptions"><li class="tabHeader" ng-repeat="tab in ::$ctrl.tabs track by $index" ng-class="{active: $ctrl.activeTab.id === tab.id}" ng-click="$ctrl.activateTab(tab)"><i class="glyphicon glyph-small icon {{::tab.iconClass}}"></i></li></ul><section ng-show="!$ctrl.showCardFormattingOptions || $ctrl.activeTab.id === 0"><div class="selectLabelBlock errorBlock" ng-if="$ctrl.hasErrors"><i class="glyphicon glyph-small pbi-glyph-error"></i><div class="message" localize="Realtime_RoleEntryError" localize-tooltip="Realtime_RoleEntryError"></div></div><div class="selectLabelBlock" ng-repeat="role in $ctrl.roleBuckets track by $index"><label ng-bind="role.displayName"></label><ul class="roleBuckets"><li class="roleEntryRow" ng-repeat="boundEntry in role.roleEntries track by $index"><div class="propertyContainer" ng-click="$ctrl.clickedEntry(boundEntry, role)"><selection-box class="item-fill" ng-class="{hasError: boundEntry.hasError}" items="role.roleProperties" selected-value="boundEntry.selectedProperty" on-select="$ctrl.onRoleBucketEntryChanged" allow-external-values="true"></selection-box><i class="glyphicon pbi-glyph-chevrondownmedium"></i></div> <button ng-click="$ctrl.deleteRoleProperty(boundEntry, role)" localize-tooltip="Realtime_deleteRoleEntry" ng-disabled="$ctrl.disableDeleteRolePropertyButton"><i class="glyphicon glyph-small icon pbi-glyph-delete"></i></button></li></ul> <button type="button" ng-click="$ctrl.addNewRoleProperty(role)" localize-tooltip="Realtime_addRoleEntry" ng-disabled="!$ctrl.enableAddMoreButton(role)"><i class="glyphicon glyph-small icon pbi-glyph-add"></i><span class="buttonText" localize="Realtime_AddValue"></span></button></div></section><section class="cardFormatBlock" ng-if="$ctrl.showCardFormattingOptions && $ctrl.activeTab.id === 1"><h3 localize="Realtime_DataLabel"></h3><div class="labeledRow"><label localize="Visual_DisplayUnits"></label> <select ng-model="$ctrl.config.displayUnit" ng-change="$ctrl.updateCardFormatting()" ng-model-options="{ debounce: 250 }" ng-options="displayUnit.displayName for displayUnit in ::$ctrl.displayUnits track by displayUnit.value"></select></div><div class="labeledRow"><label localize="Visual_Precision"></label> <input name="precision" ng-class="{hasError: realTimeVisualizationForm.precision.$touched && !realTimeVisualizationForm.precision.$valid}" ng-model="$ctrl.config.precision" ng-change="$ctrl.updateCardFormatting()" ng-model-options="{ debounce: 100 }" type="number" min="0" max="{{::$ctrl.maxPrecisionValue}}"/><div class="errorBlock" ng-if="realTimeVisualizationForm.precision.$touched && !realTimeVisualizationForm.precision.$valid"><i class="glyphicon glyph-small pbi-glyph-error"></i><div class="message" localize="Realtime_InvalidPrecision" localize-tooltip="Realtime_InvalidPrecision"></div></div></div></section><section class="timeConfigBlock" ng-if="$ctrl.showTimeWindow"><h3 localize="Realtime_TimeWindowHeader"></h3><label localize="Realtime_TimeWindowSelectLabel"></label> <select class="optionBlock" ng-model="$ctrl.config.timeWindow" ng-change="$ctrl.updateRealTimeTile()" ng-model-options="{ debounce: 250 }" ng-options="time for time in ::$ctrl.times"></select> <select class="optionBlock" ng-model="$ctrl.config.timeWindowGranularity" ng-change="$ctrl.updateRealTimeTile()" ng-model-options="{ debounce: 250 }" ng-options="timeLabel for timeLabel in ::$ctrl.timeLabels"></select></section></section></section></ng-form>'),e.put("components/recentlyViewedContainer/recentlyViewedContainer.html",'<div class="recentlyViewedContainer contentListView"><div class="dashboardControls"><search-box should-focus="::true" on-change="$ctrl.ensureSearchTelemetry()" on-blur="$ctrl.resolveSearchTelemetry()" filter="$ctrl.searchText" placeholder="SearchContent"></search-box></div><div class="contentListOptionsTabs unselectable"><div class="right"><span class="count" localize="ShowingXItems" localize-fragments><span fragment-index="0" ng-bind="$ctrl.filteredRecentlyUsedArtifacts.length"></span></span><select-tile-sort selected-predicate="$ctrl.sortPredicate" on-select="$ctrl.selectSort" predicates="$ctrl.sortPredicates"></select-tile-sort></div></div><div class="dashboardSliderMain"><water-mark-message config="$ctrl.watermarkConfig" ng-show="$ctrl.showWatermarkConfig"></water-mark-message><content-list-gallery view-model="::$ctrl.galleryViewModel" is-data-classification-enabled="$ctrl.dataClassificationEnabled"></content-list-gallery></div></div>'),e.put("components/selectArtifactFilter/selectArtifactFilter.html",'<select-button overlay-name="SelectArtifactFilter"><span localize="PermissionCenter_ViewAllContent" class="dropdownFontColor"></span></select-button><dropdown-overlay dropdown-overlay-name="SelectArtifactFilter" class="overlayTopBar"><dropdown-list class="topBar filters artifactFilter"><dropdown-list-item ng-click="$ctrl.selectType()($ctrl.Dashboard)"><div class="pbi-input"> <input id="dashboardCheckBoxInput" type="checkbox" ng-checked="$ctrl.isSelectedType($ctrl.Dashboard)"/><label localize="ContentList_Dashboards" for="dashboardCheckBoxInput"></label></div></dropdown-list-item><dropdown-list-item ng-click="$ctrl.selectType()($ctrl.Report)"><div class="pbi-input"> <input id="reportCheckBoxInput" type="checkbox" ng-checked="$ctrl.isSelectedType($ctrl.Report)"/><label localize="ContentList_Reports" for="reportCheckBoxInput"></label></div></dropdown-list-item><dropdown-list-item ng-click="$ctrl.selectType()($ctrl.Workbook)"><div class="pbi-input"> <input id="workbookCheckBoxInput" type="checkbox" ng-checked="$ctrl.isSelectedType($ctrl.Workbook)"/><label localize="ContentList_Workbooks" for="workbookCheckBoxInput"></label></div></dropdown-list-item><dropdown-list-item ng-click="$ctrl.selectType()($ctrl.Dataset)"><div class="pbi-input"> <input id="datasetChecBoxInput" type="checkbox" ng-checked="$ctrl.isSelectedType($ctrl.Dataset)"/><label localize="ContentList_Datasets" for="datasetChecBoxInput"></label></div></dropdown-list-item></dropdown-list></dropdown-overlay>'),e.put("components/selectButton/selectButton.html",'<div class="toggle" ng-mousedown="$ctrl.toggleDropdown($event)"><ng-transclude class="title"></ng-transclude><span class="glyphicon glyph-mini anchorContainer" ng-class="$ctrl.dropdownOpen ? \'pbi-glyph-chevronupmedium\' : \'pbi-glyph-chevrondownmedium\'"><span class="js-anchor anchor"></span></span></div>'),e.put("components/selectDatasetDialog/selectDatasetDialog.html",'<dialog-frame><dialog-header><span localize="$ctrl.titleLabel"></span></dialog-header><dialog-body><label class="description" localize="$ctrl.descriptionLabel"></label><search-box filter="$ctrl.searchString" on-change="$ctrl.onSearchStringChanged()"></search-box><label class="error" ng-if="!$ctrl.hasModels" localize="NavigationPane_NoDatasetText"></label><div class="content" ng-if="$ctrl.hasModels"><label class="error" ng-if="$ctrl.tableConfig.filteredData.length === 0" localize="NavigationPane_NoDatasetSearchResultText"></label><table pbi-table pbi-table-config="$ctrl.tableConfig" ng-if="$ctrl.tableConfig.filteredData.length> 0"><tr ng-repeat="model in $ctrl.tableConfig.filteredData track by model.id" ng-click="$ctrl.selectModel(model)" ng-keydown="$ctrl.itemKeydown($event, model)" ng-class="{selected: $ctrl.selectedDataset.id === model.id}" tabindex="0"><td ng-bind="::model.displayName" title="{{::model.displayName}}" localized-header="CreateReport_Header_Name" sort-by="displayName"></td><td ng-bind="::$ctrl.getLastRefreshDate(model)" title="{{::$ctrl.getLastRefreshDate(model)}}" localized-header="CreateReport_Header_LastRefreshed" sort-by="lastRefreshEpochTime"></td></tr></table></div></dialog-body><dialog-footer><a href="" class="importDataset" localize="CreateReport_ImportNewDataset" ng-click="$ctrl.importDataset()"></a> <button type="submit" ng-click="$ctrl.confirm()" class="primary" ng-disabled="!$ctrl.selectedDataset" localize="$ctrl.confirmLabel"></button> <button ng-click="$ctrl.cancel()" localize="$ctrl.cancelLabel"></button></dialog-footer></dialog-frame>'),e.put("components/selectDatasetDialog/selectDatasetDialogDefinition.html",'<select-dataset-dialog title-label="titleLabel" description-label="descriptionLabel" confirm-label="confirmLabel" cancel-label="cancelLabel" models="models"></select-dataset-dialog>'),e.put("components/selectTileFilter/selectTileFilter.html",'<select-button overlay-name="SelectTileFilter"><span localize="Filters"></span></select-button><dropdown-overlay dropdown-overlay-name="SelectTileFilter" class="overlayTopBar"><dropdown-list class="topBar filters"><span class="dropdownListHeader" localize="FilterContent"></span><dropdown-list-item ng-click="$ctrl.selectOwner()($ctrl.OwnerAll)"><div class="pbi-input"> <input type="radio" ng-checked="$ctrl.isSelectedOwner($ctrl.OwnerAll)"/><label class="form-label" localize="NavigationPane_OwnershipFilterAllContent"></label></div></dropdown-list-item><dropdown-list-item ng-click="$ctrl.selectOwner()($ctrl.OwnerMine)"><div class="pbi-input"> <input type="radio" ng-checked="$ctrl.isSelectedOwner($ctrl.OwnerMine)"/><label class="form-label" localize="NavigationPane_OwnershipFilterMyContent"></label></div></dropdown-list-item><dropdown-list-item ng-click="$ctrl.selectOwner()($ctrl.OwnerShared)"><div class="pbi-input"> <input type="radio" ng-checked="$ctrl.isSelectedOwner($ctrl.OwnerShared)"/><label class="form-label" localize="NavigationPane_OwnershipFilterSharedWithMe"></label></div></dropdown-list-item><hr><dropdown-list-item ng-click="$ctrl.selectType()($ctrl.Dashboard)"><div class="pbi-input"> <input type="checkbox" ng-checked="$ctrl.isSelectedType($ctrl.Dashboard)"/><label localize="ContentList_Dashboards"></label></div></dropdown-list-item><dropdown-list-item ng-click="$ctrl.selectType()($ctrl.Report)"><div class="pbi-input"> <input type="checkbox" ng-checked="$ctrl.isSelectedType($ctrl.Report)"/><label localize="ContentList_Reports"></label></div></dropdown-list-item><dropdown-list-item ng-click="$ctrl.selectType()($ctrl.Workbook)"><div class="pbi-input"> <input type="checkbox" ng-checked="$ctrl.isSelectedType($ctrl.Workbook)"/><label localize="ContentList_Workbooks"></label></div></dropdown-list-item></dropdown-list></dropdown-overlay>'),e.put("components/selectTileSort/selectTileSort.html",'<select-button overlay-name="SelectTileSort""><span ng-bind="$ctrl.title"></span></select-button><dropdown-overlay dropdown-overlay-name="SelectTileSort" class="overlayTopBar"><dropdown-list class="topBar sort"><span class="dropdownListHeader" localize="SortBy"></span><dropdown-list-item ng-repeat="item in $ctrl.dropdownItems track by item.predicate.toAngularFilter()" ng-class="{selected: $ctrl.isSelected(item.predicate)}" ng-click="$ctrl.select(item.predicate)" ng-bind="item.title"></dropdown-list-item></dropdown-list></dropdown-overlay>'),e.put("components/settingsAlerts/settingsAlertsView.html",'<div class="alertsSettings"><div ng-repeat="group in ::$ctrl.viewModel track by $index"><section class="group"><div class="groupTitle" ng-bind="group.title"></div><table><thead><tr><th ng-repeat="column in $ctrl.columns track by $index" ng-class="column.predicateName" ng-click="$ctrl.order(group, column.predicateName)"> <button><span ng-bind="column.displayName"></span><span class="sortChevron" ng-if="group.sortPredicate === column.predicateName"><i class="glyphicon pbi-glyph-chevrondownmedium glyph-micro" ng-show="group.reverse"></i><i class="glyphicon pbi-glyph-chevronupmedium glyph-micro" ng-hide="group.reverse"></i></span></button></th><th class="actions"></th></tr></thead><tbody><tr ng-repeat="alert in group.alerts | orderBy:group.sortPredicate:group.reverse track by $index"><td class="dataCell" ng-bind="alert.alertTitle"></td><td class="dataCell" ng-bind="alert.dashboardName"></td><td class="dataCell" ng-bind="alert.alertCreatedDate"></td><td class="actions"><pbi-toggle class="toggleAction" no-label ng-model="alert.enabled" on-state-text="AlertsPane_ToggleOn" off-state-text="AlertsPane_ToggleOff" ng-change="$ctrl.toggleAlert(alert)"></pbi-toggle><span class="editAction" ng-click="$ctrl.editAlert(alert)" localize="AlertsSettings_AlertEdit"></span><span class="deleteAction" ng-click="$ctrl.deleteAlert(alert)" localize="AlertsSettings_AlertDelete"></span></td></tr></tbody></table></section></div></div>'),e.put("components/settingsBlade/settingsBlade.html",'<ng-form name="settingsForm"><div class="settingsBlade paneLayout"><header><h3 class="primaryHeading trimmedTextWithEllipsis" ng-bind="::$ctrl.artifactName" title="{{::$ctrl.artifactName}}"></h3></header><section class="contentContainer"><div class="ownerInfo info trimmedTextWithEllipsis" ng-if="$ctrl.isSettingsPane"><span class="details" localize="SettingsBlade_OwnerInfo"></span><span class="details" ng-bind="::$ctrl.ownerInfo" title="{{::$ctrl.ownerInfo}}"></span><span class="details" localize="SettingsBlade_OwnerInfoSeparator"/><a class="infoMail" ng-if="$ctrl.ownerMail" href="mailto:{{$ctrl.ownerMail}}"><span ng-bind="$ctrl.ownerMail" title="{{::$ctrl.ownerMail}}"></span></a></div><div class="modelNameText info" ng-bind="::$ctrl.artifactLabel"></div><div class="info"> <input class="nameInput" type="text" ng-model="$ctrl.artifact.displayName" spellcheck="false" autofocus="autofocus" maxlength="250"/></div><ng-form name="dashboardSettingsForm"><section class="info" ng-if="$ctrl.isSettingsPane"><settings-dashboard-blade view-model="$ctrl.artifact" dashboard-settings-form="dashboardSettingsForm"></settings-dashboard-blade></section></ng-form><div class="workbookSettings metadata info" ng-if="$ctrl.isWorkbook"><settings-workbook-blade view-model="$ctrl.artifact"></settings-workbook-blade></div></section><footer><fieldset class="buttons"><div ng-show="$ctrl.isSaving" class="spinnerWithText"><spinner></spinner><div localize="GroupEditor_WaitForSave"></div></div> <button class="biButton primary" type="button" ng-disabled="$ctrl.isDisabled()" ng-click="$ctrl.saveModelName($ctrl.artifact.displayName)" localize="SettingsBlade_Save"></button> <button class="biButton" type="button" localize="SettingsBlade_Cancel" ng-click="$ctrl.cancel()"></button></fieldset></footer></div></ng-form>'),e.put("components/settingsCommunications/settingsCommunications.html",'<section class="settingsDatasets"><settings-subscriptions view-model="$ctrl.viewModel.settingsSubscriptionsModel"></settings-subscriptions></section>'),e.put("components/settingsDashboardBlade/settingsDashboardBlade.html",'<form name="$ctrl.dashboardSettingsForm"><section class="dashboardSettingsQnA"><div class="qnaSection title" localize="SettingsDashboard_QnA_Title"/><div class="toggleButton"> <span class="qnaToggle"><input type="checkbox" ng-model="qnaEnabled" ng-change="$ctrl.setQnADirty()" title="{{$ctrl.qnaTooltip(qnaEnabled)}}"/><span class="toggleBox"></span><span class="toggleHandle"></span></span></div><div class="qnaSection info" localize="SettingsDashboard_QnA_Info1"/><div class="qnaSection info"><a href="https://go.microsoft.com/fwlink/?LinkId=808174" target="_blank" localize="SettingsDashboard_QnA_LearnMore"/></div><div class="qnaSection warning" ng-if="$ctrl.isQnaDirty && qnaEnabled && !$ctrl.settingsDashboardModel.hasQnaSupportedModel"><i class="glyphicon pbi-glyph-warning glyph-small alertWarning"/><span localize="SettingsDashboard_QnA_QnaUnavailableWarning"/></div></section><section class="dashboardSettingsGravity"><div class="gravitySection title" localize="SettingsDashboard_Gravity_Title"/><div class="toggleButton"> <span class="gravityToggle"><input type="checkbox" ng-model="gravityEnabled" title="{{$ctrl.gravityTooltip(gravityEnabled)}}"/><span class="toggleBox"></span><span class="toggleHandle"></span></span></div><div class="gravitySection info" localize="SettingsDashboard_Gravity_GravityNoticeMessage"/></section><section class="dashboardSettingsDataClassification" ng-hide="!dataClassifications || dataClassifications.length==0"><div class="title" localize="SettingsDashboard_DataClassification_Title"></div> <select ng-options="option.id as option.name for option in dataClassifications" ng-model="dataClassificationId" ng-change="onDataClassificationIdChanged()"></select><div class="inlineWarning" ng-show="isNonDefaultDataClassificationSelected"><div class="message"><span class="glyphicon glyph-small pbi-glyph-info"></span><span localize="SettingsDashboard_DataClassification_NoDefaultChoosed"></span><span class="defaultDataClassificationOption">{{defaultDataClassification.name}}</span></div></div></section></form>'),e.put("components/settingsPreviewFeatures/settingsPreviewFeatures.html",'<div class="dashboardSettings previewFeaturesSettings"><h class="dashboardSettingsTitle" localize="Settings_PreviewFeaturesSettings"></h><div class="dashboardSettingsSection"><div class="dashboardSettingsSectionTitle trimmedTextWithEllipsis" localize="Settings_PreviewFeatures_Navigation"></div><div localize="SettingsPreviewFeature_Navigation_DescriptionNew"></div><a target="_blank" href="https://go.microsoft.com/fwlink/?linkid=833187" localize="LearnMore"></a><div class="settingsControls"><div class="pbi-input"> <input type="radio" ng-model="$ctrl.previewModel" ng-value="true"/><label class="form-label" localize="ToggleSwitchOn"></label></div><div class="pbi-input"> <input type="radio" ng-model="$ctrl.previewModel" ng-value="false"/><label class="form-label" localize="ToggleSwitchOff"></label></div></div></div><div class="dashboardSettingsSection"> <button class="primary" localize="SettingsDataset_ApplyButtonText" ng-disabled="$ctrl.isClean()" ng-click="$ctrl.applyChanges()"/> <button localize="SettingsDataset_DiscardButtonText" ng-disabled="$ctrl.isClean()" ng-click="$ctrl.discardChanges()"/></div></div>'),e.put("components/settingsSubscriptions/settingsSubscriptions.html",'<section class="dashboardSettings subscriptionSettings" ng-cloak ng-if="$ctrl.viewModel.subscriptions.length> 0"><span class="dashboardSettingsSectionTitle" ng-bind="::$ctrl.viewModel.workspaceName"/><table><thead><tr><th class="empty"></th><th ng-repeat="column in $ctrl.viewModel.columnsHeader track by $index" ng-class="column.predicateName" ng-click="$ctrl.sort(column.predicateName)"><div class="tableHeader"><span ng-bind="column.displayName"></span><span class="sortChevron" ng-if="$ctrl.sortType == column.predicateName"><i class="glyphicon pbi-glyph-chevrondownmedium glyph-micro" ng-if="!$ctrl.sortReverse"></i><i class="glyphicon pbi-glyph-chevronupmedium glyph-micro" ng-if="$ctrl.sortReverse"></i></span></div></th><th class="actions"></th></tr></thead><tbody><tr ng-repeat="subscription in $ctrl.viewModel.subscriptions"><td class="artifactImg"><span class="tileTypeIndicator glyphicon pbi-glyph-barchart glyph-small" localize-tooltip="Artifact_Report"></span></td><td><span class="dataCell" ng-bind="$ctrl.getArtifactDisplayName(subscription)"></span></td><td class="actions"><div class="bodyColumn"><div class="menuBtn" localize-tooltip="ContentTileOptions_EditWorkbooks" ng-click="$ctrl.editSubscription(subscription)"><i class="glyphicon pbi-glyph-edit glyph-small"></i></div></div></td><td class="dataCell" ng-bind="$ctrl.getSubscriptionsCount(subscription)"></td></tr></tbody></table></section>'),e.put("components/settingsWorkbookBlade/settingsWorkbookBlade.html",'<section class="workbookSettingsPane"><div ng-repeat="metadata in $ctrl.model.metadata" class="metadata" ng-switch="metadata.type"><h6 class="metadataLabel" ng-if="metadata.label" ng-bind="metadata.label" ng-class="{\'divider\': !$first}"></h6><div class="metadataContent" ng-class="{\'noLabel\': !metadata.label}" ng-switch-when="0"><span class="message trimmedTextWithEllipsis" ng-bind="metadata.value()"></span><span ng-if="metadata.infoTooltipConfig" class="glyphicon glyph-mini pbi-glyph-info tooltipIcon" tooltip tooltip-config="::metadata.infoTooltipConfig"></span></div><div class="metadataContent" ng-class="{\'noLabel\': !metadata.label}" ng-switch-when="2"> <span>{{ metadata.value() }}</span> <a ng-bind-attr="{href: metadata.linkUrl(), title: metadata.linkTitle() || metadata.linkText(), target: metadata.linkTarget}">{{ metadata.linkText() }}</a></div><div class="metadataContent" ng-class="{\'noLabel\': !metadata.label}" ng-switch-when="3"><span class="refreshFlyoutWarning" ng-if="metadata.isWarning == true"><i class="glyphicon pbi-glyph-error glyph-mini"></i></span> <a class="refreshHistory" href="" ng-click="metadata.actionOnClick()">{{metadata.value()}}</a></div><div class="metadataContent" ng-class="{\'noLabel\': !metadata.label}" ng-switch-when="4"><div ng-switch="metadata.status"><div ng-switch-when="0"><span class="glyphicon glyph-small pbi-glyph-error statusIcon"></span><span class="statusText" ng-bind="metadata.value"></span></div><div ng-switch-when="1"><span class="glyphicon glyph-small pbi-glyph-success glyph-success-color statusIcon"></span><span class="statusText" ng-bind="metadata.value"></span></div></div></div></div></section>'),
e.put("components/sharedByColumn/sharedByColumn.html",'<section class="contentHeaderContainer unselectable"><header class="name trimmedTextWithEllipsis" localize="ContentHeader_Owner"></header></section><ul class="unselectable"><li ng-repeat="ownerInfo in $ctrl.getOwnerInfos() track by ownerInfo.objectId" ng-class="{selected: $ctrl.selectedOwner === ownerInfo.objectId}" ng-click="$ctrl.selectedOwner = ownerInfo.objectId"><div class="icon" ng-switch="!!ownerInfo.icon"><i ng-switch-when="false" class="glyphicon glyph-small placeholder" ng-class="ownerInfo.isUser() ? \'pbi-glyph-user\' : \'pbi-glyph-group\'"></i> <img ng-switch-when="true" ng-src="{{ownerInfo.icon}}"/></div><div class="text trimmedTextWithEllipsis" ng-bind="::ownerInfo.name" title="{{::ownerInfo.name}}"></div></li></ul>'),e.put("components/subscriptionPane/subscriptionPane.html",'<div class="paneLayout subscriptionPane"><header><div class="subscriptionPaneHeader"><h4 class="subscriptionPaneSubtitle" ng-bind="::$ctrl.viewModel.report.reportName"></h4><h4 class="subscriptionPaneTitle" localize="EmailSnapshot_Title"></h4></div></header><section class="banner"><pbi-button label="EmailSnapshot_AddSubscription" class="wideButton" icon-name="add" primary="true" ng-click="$ctrl.addNewSubscription()" ng-if="!$ctrl.isLoading"></pbi-button></section><section class="contentContainer" ng-if="!$ctrl.isLoading"><form name="$ctrl.subscriptionForm" class="subscriptionForm"><div class="subscription" ng-repeat="subscription in $ctrl.viewModel.report.subscriptions track by $index"><section class="formHeader"><i ng-if="!$ctrl.isSubscriptionDeleted(subscription)" class="glyphicon glyph-mini expand" ng-click="subscription.expanded = !subscription.expanded" ng-class="subscription.expanded ? \'pbi-glyph-chevronupmedium\' : \'pbi-glyph-chevrondownmedium\'"></i><div class="title" ng-bind="$ctrl.getSubscriptionName(subscription)"></div><i ng-if="!$ctrl.isSubscriptionDeleted(subscription)" class="subscriptionDelete glyphicon glyph-small pbi-glyph-delete" ng-click="$ctrl.removeSubscription(subscription)"></i><pbi-toggle ng-if="!$ctrl.isSubscriptionDeleted(subscription)" ng-model="subscription.enabled" ng-change="$ctrl.changeSubscriptionToUpdatedState(subscription)" class="toggle"></pbi-toggle><div ng-if="$ctrl.isSubscriptionDeleted(subscription)" ng-click="$ctrl.undoRemoveSubscription(subscription)" class="undo"><div localize="EmailSnapshot_Undo" class="text"></div><i class="glyphicon pbi-glyph-undo icon"></i></div></section><section ng-if="subscription.expanded && !$ctrl.isSubscriptionDeleted(subscription)"><fieldset class="reportPageSettings"><legend localize="EmailSnapshot_Report_Page" localize-tooltip></legend> <select class="reportPage" ng-model="subscription.selectedSlide" ng-change="$ctrl.changeSubscriptionToUpdatedState(subscription)" ng-options="slide as slide.displayName for slide in ::$ctrl.viewModel.report.slides track by slide.id"/></fieldset><fieldset class="frequencySettings" ng-if="$ctrl.canShowSchedule()"><legend localize="EmailSnapshot_Frequency" localize-tooltip></legend> <select class="frequency" ng-model="subscription.selectedFrequency" ng-change="$ctrl.changeSubscriptionToUpdatedState(subscription)" ng-options="freq.frequencyType as freq.label for freq in ::$ctrl.viewModel.report.allowedFrequency"/></fieldset><pbi-alert class="alertmessage" kind="\'info\'" message-info="\'EmailSnapshot_Message\'" ng-if="!$ctrl.canShowSchedule()"/></section></div></form></section><fieldset class="message"><a class="link" ng-bind="::$ctrl.viewModel.editMessage" ng-click="$ctrl.navigate()"></a></fieldset><footer><fieldset class="buttons"><pbi-button primary="true" label="EmailSnapshot_Save" ng-click="$ctrl.saveChangesAndExit()"></pbi-button><pbi-button label="EmailSnapshot_Cancel" ng-click="$ctrl.cancel()"></pbi-button></fieldset></footer></div>'),e.put("components/userNotifications/userNotificationsView.html",'<div class="usernotifications paneLayout" ng-if="$ctrl.userNotifications.featureSwitchUserNotificationEnabled"><header><div class="notificationheader"><div class="headercontainer"><div localize="UsersNotifications_AlertsFeed" class="heading"></div><div localize="UsersNotifications_AllNotifications" class="subheading"></div></div> <button ng-if="$ctrl.userNotifications.menuEnabled" localize-tooltip="UsersNotifications_Options" class="options" dropdown-overlay-invoke="notificationOptionsContextMenu" need-blur="true" prefer-left="true"><i class="glyphicon glyph-small pbi-glyph-more"></i></button><dropdown-overlay dropdown-overlay-name="notificationOptionsContextMenu" dropdown-overlay-class="angular-dropdown override-box-shadow"><dropdown-menu-items dropdown-items="::$ctrl.userNotifications.moreOptionsMenu" dropdown-class="additionalMenus active" dropdown-on-item-selected="$ctrl.moreOptionsMenuSelected(selected)"></dropdown-menu-items></dropdown-overlay></div></header><section class="contentContainer noPadding"><div class="notificationcontainer"><div class="nonotification" ng-show="!$ctrl.userNotifications.loadingData && (!$ctrl.userNotifications.notifications || $ctrl.userNotifications.notifications.length <= 0)"><div><i class="glyphicon pbi-glyph-emoji"></i></div><div localize="UsersNotifications_NoNotificationsMessage"></div></div><div ng-show="$ctrl.userNotifications.notifications && $ctrl.userNotifications.notifications.length> 0"><div ng-repeat="notification in $ctrl.userNotifications.notifications track by notification.contract.id"><div ng-init="$ctrl.userNotifications.loadIcon(notification)" ng-show="!notification.showDismissalDialog" class="notification" ng-class="notification.contract.id <= 0 ? \'pinned\' : (!notification.seen ? \'unseen\' : \'seen\')"><div class="notificationicon" ng-if="!notification.contract.iconUrl" ng-switch="notification.image.imageType"><i class="glyphicon glyph-small pbi-glyph-user" ng-switch-when="0"></i><i class="glyphicon glyph-small pbi-glyph-group" ng-switch-when="1"></i><i class="glyphicon glyph-small pbi-glyph-gauge" ng-switch-when="2"></i><i class="glyphicon glyph-small pbi-glyph-barchart" ng-switch-when="3"></i><i class="glyphicon glyph-small pbi-glyph-insight" ng-switch-when="4"></i><i class="glyphicon glyph-small pbi-glyph-comment" ng-switch-when="5"></i><i class="glyphicon glyph-small pbi-glyph-powerbi" ng-switch-when="6"></i><i class="glyphicon glyph-small pbi-glyph-database" ng-switch-when="7"></i><i class="glyphicon glyph-small pbi-glyph-settings" ng-switch-when="8"></i><i class="glyphicon glyph-small pbi-glyph-uparrow rotate" ng-switch-when="9"></i><i class="glyphicon glyph-small pbi-glyph-uparrow" ng-switch-when="10"></i></div><div class="notificationicon" ng-if="notification.contract.iconUrl"> <img class="icon" ng-src="{{notification.contract.iconUrl}}"/></div><div class="message"><div><span class="title" ng-bind="notification.title"></span><span class="time" ng-bind="notification.formattedDate"></span></div><div class="desc" ng-bind="notification.description"></div><div class="action" ng-if="notification.actionText"><button ng-click="$ctrl.userNotifications.performAction(notification)" ng-bind="notification.actionText"></button></div></div><div> <button class="close" ng-click="$ctrl.userNotifications.dismissNotification(notification)" localize-tooltip="UsersNotifications_DismissNotification"><i class="glyphicon glyph-micro pbi-glyph-close"></i></button></div></div></div><div ng-if="showLoadMore" class="loadmore"> <button ng-show="!disableLoadMore" ng-click="loadMoreNotification()" localize="UsersNotifications_LoadMore"></button><spinner ng-show="disableLoadMore" class="icon large centered"></spinner></div></div></div><spinner ng-show="$ctrl.userNotifications.loadingData" class="icon large centered"></spinner></section></div>'),e.put("components/groupEditor/create/createGroupBlade.html",'<ng-form name="createGroupForm"><div class="groupsEditorBlade paneLayout"><header><h1 class="primaryHeading" localize="GroupEditor_Title_CreateGroup"></h1></header><section class="contentContainer"><section class="displayBlock"><h4 class="title" localize="GroupEditor_GroupNameLabel_Text_CreateGroup"></h4> <input id="groupName" required name="groupName" type="text" spellcheck="false" autocomplete="off" ng-model="$ctrl.model.groupName" ng-keyup="$ctrl.groupNameKeyUp()"/></section><section class="displayBlock"><h4 class="title" ng-if="$ctrl.model.groupName" localize="GroupEditor_GroupIdLabel_Text"></h4> <input name="groupId" spellcheck="false" type="text" autocomplete="off" ng-if="$ctrl.model.groupName" ng-model="$ctrl.model.groupId" ng-disabled="!$ctrl.isEditingGroupId" ng-keyup="$ctrl.groupIdKeyUp()"><pbi-button kind="icon" icon-name="edit" icon-size="small" ng-click="$ctrl.isEditingGroupId = true" ng-if="$ctrl.model.groupName && !$ctrl.isEditingGroupId" localize-tooltip="GroupEditor_GroupIdEdit_Tooltip"></pbi-button><div ng-if="$ctrl.isValidatingGroupId" class="spinnerWithText"><spinner class="xsmall"></spinner><div localize="GroupEditor_WaitForGroupIdValidation"></div></div><div class="spinnerWithText" ng-hide="$ctrl.isValidatingGroupId || !$ctrl.model.groupId" ng-switch="$ctrl.groupValidationStatus"><label ng-switch-when="0" localize="GroupEditor_CreateGroup_GroupId_Available_Text"></label><label ng-switch-when="1" localize="GroupEditor_CreateGroup_GroupId_NotAvailable_Text"></label><label ng-switch-when="2" localize="GroupEditor_FailedValidateGroupId_Message"></label><label ng-switch-when="3" localize="GroupEditor_CreateGroup_GroupId_HasInvalidCharacters"></label></div></section><section class="displayBlock"><h4 class="title" localize="PBI_Button_Label_Privacy"></h4> <select name="privacySetting" ng-model="$ctrl.model.privacyOption" ng-options="privacyOption.key as privacyOption.value for privacyOption in $ctrl.model.privacyOptions" ng-disabled="$ctrl.isSaving"></select> <select name="accessControlOption" ng-if="::$ctrl.readOnlyGroupEnabled" ng-model="$ctrl.model.accessControlOption" ng-options="accessControlOption.key as accessControlOption.value for accessControlOption in $ctrl.model.accessControlOptions" ng-disabled="$ctrl.isSaving"></select></section><section class="displayBlock"><h4 class="title" localize="GroupEditor_AddGroupMembersLabel_Text"></h4><emails-list id="emailList" view-model="$ctrl.model.emailsList"></emails-list><pbi-button id="addButton" label="GroupEditor_AddButton_Text" primary="true" ng-click="$ctrl.add()" ng-disabled="!$ctrl.model.emailsList.inputUserList || $ctrl.isSaving"></pbi-button><div class="spinnerWithText" ng-if="$ctrl.isAddingMembers"><spinner></spinner><div localize="GroupEditor_WaitForAddingMembers"></div></div><div class="error"><label title="{{$ctrl.model.invalidEmailAddressesErrorMessage }}" ng-if="$ctrl.model.invalidEmailAddressesErrorMessage  !== \'\'" ng-bind="$ctrl.model.invalidEmailAddressesErrorMessage "></label><label title="{{$ctrl.model.notExitingEmailAddressesErrorMessage}}" ng-if="$ctrl.model.notExitingEmailAddressesErrorMessage !== \'\'" ng-bind="$ctrl.model.notExitingEmailAddressesErrorMessage"></label></div><ul class="userListContainer"><li ng-repeat="member in $ctrl.model.displayMemberList track by member.userPrincipalName"><span class="username trimmedTextWithEllipsis" ng-bind="::member.userPrincipalName"></span> <select name="groupMemberRole" class="usertype" ng-if="::$ctrl.readOnlyGroupEnabled && member.role !== 2" ng-model="member.role" ng-options="groupMemberRole.key as groupMemberRole.value for groupMemberRole in $ctrl.model.groupMemberRoleOptions"></select><pbi-button kind="icon" icon-name="delete" icon-size="mini" ng-click="$ctrl.removeMember(member);createGroupForm.$setDirty();"></pbi-button></li></ul></section></section><footer><fieldset class="buttons"><spinner ng-if="$ctrl.isSaving"></spinner><pbi-button label="GroupEditor_SaveButton_Text" ng-click="$ctrl.save()" ng-disabled="!createGroupForm.$dirty || editGroupForm.$invalid || !$ctrl.canSave || $ctrl.isSaving" primary="true"></pbi-button><pbi-button label="GroupEditor_DiscardButton_Text" ng-click="$ctrl.cancel()" ng-disabled="$ctrl.isSaving"></pbi-button></fieldset></footer></div></ng-form>'),e.put("components/groupEditor/edit/editGroupBlade.html",'<ng-form name="editGroupForm"><div class="groupsEditorBlade paneLayout"><header><h1 class="primaryHeading" localize="GroupEditor_Title_EditGroup"></h1></header><section class="contentContainer"><section class="displayBlock"><h4 class="title" localize="GroupEditor_GroupNameLabel_Text_CreateGroup"></h4> <input name="groupName" required ng-model="$ctrl.model.groupName" ng-disabled="$ctrl.editNonAdmin" type="text" spellcheck="false" autocomplete="off" maxlength="64" autofocus></section><section class="displayBlock"><h4 class="title" localize="GroupEditor_PrivacyLabel_Text"></h4> <input id="privacySetting" required type="text" disabled="disabled" ng-value="$ctrl.getPrivacyOption()"/> <select name="accessOption" ng-if="::$ctrl.readOnlyGroupEnabled" ng-model="$ctrl.model.accessControlOption" ng-options="accessControlOption.key as accessControlOption.value for accessControlOption in $ctrl.model.accessControlOptions" ng-disabled="$ctrl.isSaving"></select></section><section class="displayBlock"><h4 class="title" localize="GroupEditor_AddGroupMembersLabel_Text"></h4><emails-list id="emailList" view-model="$ctrl.model.emailsList"></emails-list><pbi-button label="GroupEditor_AddButton_Text" primary="true" ng-click="$ctrl.add()" ng-disabled="!$ctrl.model.emailsList.inputUserList || $ctrl.isSaving"></pbi-button><div class="spinnerWithText" ng-if="$ctrl.isAddingMembers"><spinner></spinner><div localize="GroupEditor_WaitForAddingMembers"></div></div><div class="error"><label title="{{$ctrl.model.invalidEmailAddressesErrorMessage }}" ng-if="$ctrl.model.invalidEmailAddressesErrorMessage  !== \'\'" ng-bind="$ctrl.model.invalidEmailAddressesErrorMessage "></label><label title="{{$ctrl.model.notExitingEmailAddressesErrorMessage}}" ng-if="$ctrl.model.notExitingEmailAddressesErrorMessage !== \'\'" ng-bind="$ctrl.model.notExitingEmailAddressesErrorMessage"></label></div><ul class="userListContainer"><li ng-repeat="member in $ctrl.model.displayMemberList | orderBy:\'+userPrincipalName\' track by member.userPrincipalName"><span class="username trimmedTextWithEllipsis" ng-bind="member.userPrincipalName" ng-attr-title="{{::member.userPrincipalName}}"></span> <select ng-if="::$ctrl.readOnlyGroupEnabled && member.role !== 2" ng-model="member.role" class="usertype" ng-options="groupMemberRole.key as groupMemberRole.value for groupMemberRole in $ctrl.model.groupMemberRoleOptions" ng-disabled="$ctrl.isMemberTheOnlyAdmin(member)"></select><pbi-button kind="icon" icon-name="delete" icon-size="mini" ng-click="$ctrl.removeMember(member);editGroupForm.$setDirty();"></pbi-button></li></ul></section></section><footer><fieldset class="buttons"><pbi-button id="deleteGroupButton" ng-if="$ctrl.model.isAdmin" label="GroupEditor_DeleteGroup_Text" icon-name="delete" ng-click="$ctrl.deleteGroup()" ng-disabled="$ctrl.isSaving || !$ctrl.canSave"></pbi-button><pbi-button label="GroupEditor_SaveButton_Text" ng-click="$ctrl.save()" ng-disabled="!editGroupForm.$dirty || editGroupForm.$invalid || !$ctrl.canSave" primary="true"></pbi-button><pbi-button label="GroupEditor_DiscardButton_Text" ng-click="$ctrl.cancel()" ng-disabled="$ctrl.isSaving || !$ctrl.canSave"></pbi-button></fieldset></footer></div></ng-form>'),e.put("components/groupEditor/view/viewGroupBlade.html",'<div class="groupsEditorBlade paneLayout"><header><h1 class="primaryHeading" localize="GroupEditor_Title_ViewGroup"></h1></header><section class="contentContainer viewContainer"><section class="displayBlock"><h4 class="title" localize="PBI_Button_Label_Name"></h4><span class="textBody" ng-bind="::$ctrl.model.groupName"></span></section><section class="displayBlock"><h4 class="title" localize="GroupEditor_PrivacyLabel_Text"></h4><div class="textBody" ng-bind="::$ctrl.getAccessControlOption()"></div><div class="textBody" ng-bind="$ctrl.getPrivacyOption()"></div></section><section class="displayBlock"><h4 class="title" localize="GroupEditor_AddGroupMembers_ViewMode_Label_Text"></h4><ul class="userListContainer" ng-if="!$ctrl.isLoadingGroupMembers"><li ng-repeat="member in ::$ctrl.model.displayMemberList | orderBy:\'+userPrincipalName\' track by member.userPrincipalName"><span class="username trimmedTextWithEllipsis" ng-bind="::member.userPrincipalName" ng-attr-title="{{::member.userPrincipalName}}"></span><span class="glyphicon pbi-glyph-mail glyph-small invite" ng-if="member.role === 2 && !member.invitationSent" localize-tooltip="GroupEditor_PendingInvitation"></span><span class="glyphicon pbi-glyph-mail glyph-small invite" ng-if="member.role === 2 && member.invitationSent" localize-tooltip="GroupEditor_InvitationSent"></span><span class="usertype" ng-if="::$ctrl.readOnlyGroupEnabled && member.role === 1" localize="GroupEditor_RoleOptions_Admin"></span><span class="usertype" ng-if="::$ctrl.readOnlyGroupEnabled && member.role === 0" localize="GroupEditor_RoleOptions_Member"></span></li></ul><div ng-if="$ctrl.isLoadingGroupMembers"><spinner></spinner><span localize="GroupEditor_WaitLoadMembers"></span></div></section></section><footer><fieldset class="buttons"><pbi-button label="PBI_Button_Label_OK" primary="true" ng-click="$ctrl.cancel()"></pbi-button></fieldset></footer></div>'),e.put("components/streamingDataset/pubNubEditor/pubNubEditor.html",'<form name="pubNubForm" class="streamingDatasetForm"><div class="streamingDataset pubNubEditor paneLayout"><header><h3 class="primaryHeading" localize="StreamingDatasetEditor_NewDataset"></h3></header><div class="contentContainer"><section class="contentHeader" localize="StreamingDatasetEditor_PubNub_Header" localize-fragments><a fragment-index="0" localize="StreamingDatasetEditor_PubNub_LearnMore" target="_blank" href="https://go.microsoft.com/fwlink/?linkid=821989"></a></section><label class="input-field-label required" localize="StreamingDatasetEditor_DatasetName"></label> <input type="text" name="name" autocomplete="off" ng-class="{hasError: streamingDatasetForm.name.$invalid && streamingDatasetForm.name.$touched}" ng-model="$ctrl.realTimeModel.definition.name" required/><div class="errorBlock" ng-if="pubNubForm.name.$invalid && pubNubForm.name.$touched"><i class="glyphicon glyph-small pbi-glyph-error"></i><div class="message" localize="StreamingDatasetEditor_NameRequired"></div></div><label class="input-field-label required" localize="StreamingDataset_PubNub_SubscriptionKey"></label> <input type="text" name="subscriptionKey" autocomplete="off" ng-class="{hasError: pubNubForm.subscriptionKey.$invalid && pubNubForm.subscriptionKey.$touched}" ng-model="$ctrl.viewModel.subscriptionKey" required/><div class="errorBlock" ng-if="pubNubForm.subscriptionKey.$invalid && pubNubForm.subscriptionKey.$touched"><i class="glyphicon glyph-small pbi-glyph-error"></i><div class="message" localize="StreamingDataset_PubNub_SubscriptionKeyRequired"></div></div><label class="input-field-label required" localize="StreamingDataset_PubNub_ChannelName"></label> <input type="text" name="channelName" autocomplete="off" ng-class="{hasError: pubNubForm.channelName.$invalid && pubNubForm.channelName.$touched}" ng-model="$ctrl.viewModel.channelName" required/><div class="errorBlock" ng-if="pubNubForm.channelName.$invalid && pubNubForm.channelName.$touched"><i class="glyphicon glyph-small pbi-glyph-error"></i><div class="message" localize="StreamingDataset_PubNub_ChannelNameRequired"></div></div><label class="input-field-label" localize="StreamingDataset_PubNub_PAMKey"></label> <input type="password" autocomplete="off" ng-model="$ctrl.viewModel.authKey"/></div><footer><fieldset class="buttons"><pbi-button label="Back_ButtonText" ng-click="$ctrl.back()"></pbi-button><pbi-button label="Next_ButtonText" primary="true" ng-click="$ctrl.next()" ng-disabled="pubNubForm.$invalid"></pbi-button><pbi-button label="Cancel_ButtonText" ng-click="$ctrl.cancel()"></pbi-button></fieldset></footer></div></form>'),e.put("components/streamingDataset/streamingDataSample/streamingDataSample.html",'<div class="streamingDataSample"><section class="tabs" ng-if="::$ctrl.showHeader"><span class="tabHeader" ng-repeat="example in ::$ctrl.apiExamples" ng-class="{selected: $ctrl.activeExample.id === example.id}" ng-click="$ctrl.showExample(example)" ng-bind="::example.title"></span></section><section class="exampleView" ng-if="$ctrl.hasColumns()" ng-switch="$ctrl.activeExample.id"><section ng-switch-when="1" select-text-on-click><div> [</div><div class="padLeft"> {</div><div class="streamingDataValue" ng-repeat="column in $ctrl.viewModel.columns | filter:{name: \'\'} track by $index"> <span class="columnName">"{{$ctrl.escapeCharacters(column.name)}}"</span> <span class="operator padRight">:</span><span ng-bind="$ctrl.mockValues[column.dataType]"></span><span class="operator" ng-bind="$last ? \'\' : \',\'"></span></div><div class="padLeft"> }</div><div> ]</div></section><section ng-switch-when="2" select-text-on-click><div class="codeBlock tight"> <span class="keyword">curl</span> <span class="flag">--include</span> <span class="operator">\\</span></div><div class="codeBlock tight"> <span class="flag">--request</span> POST <span class="operator">\\</span></div><div class="codeBlock tight"> <span class="flag">--header</span> <span class="string">"Content-Type: application/json"</span> <span class="operator">\\</span></div><div class="codeBlock tight"> <span class="flag">--data-binary</span> "[</div><div class="padLeft"> {</div><div class="streamingDataValue" ng-repeat="column in ::$ctrl.viewModel.columns | filter:{name: \'\'} track by $index"> <span class="columnName">\\"{{::$ctrl.escapeCharacters(column.name)}}\\"</span> <span class="operator padRight">:</span><span ng-bind="::$ctrl.escapeCharacters($ctrl.mockValues[column.dataType])"></span><span class="operator" ng-bind="$last ? \'\' : \',\'"></span></div> <span class="padLeft">}</span><div class="codeBlock tight"> ]" <span class="operator">\\</span></div><div class="string codeBlock">"{{::$ctrl.url()}}"</div></section><section ng-switch-when="3" select-text-on-click><div class="codeBlock"> <span class="identifier">$endpoint</span> <span class="operator">=</span> <span class="string">"{{::$ctrl.url()}}"</span></div><div class="codeBlock"> <span class="identifier">$payload</span> <span class="operator">=</span> <span>@{</span><div class="streamingDataValue" ng-repeat="column in ::$ctrl.viewModel.columns | filter:{name: \'\'} track by $index"> <span class="columnName">"{{::$ctrl.escapeCharacters(column.name)}}"</span> <span class="padRight operator">=</span><span ng-bind="::$ctrl.mockValues[column.dataType]"></span></div> }</div><div class="codeBlock"> <span class="keyword">Invoke-RestMethod</span> <span class="flag">-Method</span> Post <span class="flag">-Uri</span> "$endpoint" <span class="flag">-Body</span> <span>(<span class="keyword">ConvertTo-Json</span> <span class="identifier">@($payload)</span>)</span></div></section></section></div>'),e.put("components/streamingDataset/streamingDatasetEditor/streamingDatasetEditor.html",'<form name="streamingDatasetForm" custom-validator-synchronizer class="streamingDatasetForm"><div class="streamingDataset streamingDatasetEditor paneLayout"><header><spinner ng-if="$ctrl.isLoading"></spinner><h3 class="primaryHeading" ng-bind="$ctrl.header"></h3></header><fieldset class="contentContainer" ng-disabled="$ctrl.isLoading"><section class="contentHeader" localize="StreamingDatasetEditor_Push_Header" localize-fragments ng-if="$ctrl.historicalAnalysisEnabled"><a fragment-index="0" localize="StreamingDatasetEditor_Push_LearnMore" target="_blank" href="https://go.microsoft.com/fwlink/?linkid=822594"></a></section><section class="warning" ng-if="!!$ctrl.warningText"><i class="glyphicon pbi-glyph-warning glyph-small"></i><div>{{::$ctrl.warningText}}</div></section><label class="input-field-label required" localize="StreamingDatasetEditor_DatasetName"></label> <input type="text" name="name" autocomplete="off" ng-class="{hasError: streamingDatasetForm.name.$invalid && streamingDatasetForm.name.$touched}" ng-model="$ctrl.viewModel.definition.name" placeholder="{{::$ctrl.namePlaceholder}}" required/><div class="errorBlock" ng-if="streamingDatasetForm.name.$invalid && streamingDatasetForm.name.$touched"><i class="glyphicon glyph-small pbi-glyph-error"></i><div class="message" localize="StreamingDatasetEditor_NameRequired" localize-tooltip="StreamingDatasetEditor_NameRequired"></div></div><label class="input-field-label required" localize="StreamingDatasetEditor_Values"></label><ng-form class="streamValue" name="streamValueForm" ng-repeat="column in $ctrl.viewModel.definition.columns track by $index"> <input type="text" name="name" autocomplete="off" placeholder="{{::$ctrl.columnPlaceholder}}" ng-change="$ctrl.columnUpdated($last)" ng-class="{hasError: streamValueForm.name.$invalid}" ng-model="column.name" ng-required="!$last" custom-validator="{validate: $ctrl.validateColumnName}"/> <select class="rowContent" ng-model="column.dataType" ng-options="type.value as type.displayName for type in ::$ctrl.dataTypes"></select><i class="glyphicon pbi-glyph-delete glyph-small icon" ng-if="!$last" ng-click="$ctrl.removeColumn(column);streamingDatasetForm.$setDirty();"></i><div class="errorBlock" ng-if="streamValueForm.name.$invalid"><i class="glyphicon glyph-small pbi-glyph-error"></i><div class="message" localize="StreamingDatasetEditor_ColumnNameError" localize-tooltip="StreamingDatasetEditor_ColumnNameError"></div></div></ng-form><streaming-data-sample view-model="$ctrl.viewModel.definition" show-header="false"></streaming-data-sample><div ng-if="$ctrl.historicalAnalysisEnabled"><label class="input-field-label" localize="StreamingDatasetEditor_HistoricDataAnalysis"></label><div class="toggleButton"> <input type="checkbox" ng-model="$ctrl.viewModel.definition.mode" ng-false-value="{{$ctrl.realTimeMode.CacheOnly}}" ng-true-value="{{$ctrl.realTimeMode.PersistAndCache}}"/><span class="toggleBox"></span><span class="toggleHandle"></span><span class="toggleDescription unselectable" ng-bind="$ctrl.toggleStateText"></span></div></div></fieldset><footer><fieldset class="buttons"><pbi-button label="Back_ButtonText" ng-click="$ctrl.back()" ng-disabled="$ctrl.isLoading" ng-if="$ctrl.from != 0"></pbi-button><pbi-button label="{{$ctrl.buttonText}}" primary="true" ng-click="$ctrl.save()" ng-disabled="!streamingDatasetForm.$dirty || streamingDatasetForm.$invalid || !$ctrl.canSave"></pbi-button><pbi-button label="Cancel_ButtonText" ng-click="$ctrl.cancel()"></pbi-button></fieldset></footer></div></form>'),e.put("components/streamingDataset/streamingDatasetGallery/streamingDatasetGallery.html",'<div class="streamingDataset streamingDatasetGallery paneLayout"><header><h3 class="primaryHeading" localize="StreamingDatasetEditor_NewDataset"></h3><h3 class="secondaryHeading" localize="StreamingDataset_ChooseSource"></h3></header><div class="contentContainer"><ul><li class="streamingDatasetOption unselectable {{option.cssClass}}" ng-class="{selected: $ctrl.selectedOption === option}" ng-repeat="option in ::$ctrl.streamingDatasetOptions | orderBy: \'displayName\'" ng-click="$ctrl.selectOption(option)"><div class="logo"></div><div class="name" ng-bind="::option.displayName"></div></li></ul><aside class="callout_box" ng-if="$ctrl.isLinkTypeSelected()" localize="StreamingDataset_ASAHelpText" localize-fragments><a fragment-index="0" ng-attr-href="{{$ctrl.selectedOption.link}}" target="_blank" localize="StreamingDataset_AzureStreamAnalytics"></a></aside></div><footer><fieldset class="buttons"><pbi-button label="Next_ButtonText" primary="true" ng-click="$ctrl.next()" ng-disabled="$ctrl.isLinkTypeSelected()"></pbi-button><pbi-button label="Cancel_ButtonText" ng-click="$ctrl.cancel()"></pbi-button></fieldset></footer></div>'),e.put("components/streamingDataset/streamingDatasetPushInfo/streamingDatasetPushInfo.html",'<div class="streamingDatasetPushInfo streamingDataset paneLayout"><header ng-switch="!!$ctrl.viewModel.isNew"><h1 class="primaryHeading trimmedTextWithEllipsis" ng-switch-when="true"><i class="glyphicon pbi-glyph-circled-checkmark glyph-med"></i><span class="createdHeading" localize="StreamingDatasetPushInfo_Created"></span></h1><h1 class="primaryHeading trimmedTextWithEllipsis" ng-if="$ctrl.viewModel" ng-switch-when="false" localize="StreamingDatasetPushInfo_APIInfo" localize-fragments><span fragment-index="0" ng-bind="::$ctrl.viewModel.definition.name" ng-attr-title="{{::$ctrl.viewModel.definition.name}}"></span></h1><h2 class="secondaryHeading" ng-if="$ctrl.viewModel" ng-switch-when="false" localize="StreamingDatasetPushInfo_APIHowTo" localize-fragments><a fragment-index="0" href="https://dev.powerbi.com" target="_blank" localize="StreamingDatasetPushInfo_APIHowToLinkText"></a></h2><spinner ng-if="!$ctrl.viewModel"></spinner></header><section class="contentContainer noPadding" ng-class="{isNew: $ctrl.viewModel.isNew}"><section class="sampleHeader"><div class="datasetInfo"><div ng-if="$ctrl.viewModel.isNew" localize="StreamingDatasetPushInfo_SchemaCreated" localize-fragments><span fragment-index="0" ng-bind="::$ctrl.viewModel.definition.name"></span></div></div><label class="input-field-label" localize="StreamingDatasetPushInfo_PushURL"></label> <input type="text" ng-disabled="!$ctrl.viewModel" ng-value="::$ctrl.viewModel.getPushUrl()" readonly="true" onclick="this.select()"/></section><streaming-data-sample view-model="$ctrl.viewModel.definition" url="$ctrl.viewModel.getPushUrl()" show-header="true"></streaming-data-sample></section><footer><fieldset class="buttons"><pbi-button label="Done_ButtonText" primary="true" ng-click="$ctrl.close()"></pbi-button></fieldset></footer></div>')}]);var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){var i=220,o=(function(){function t(t,i){this.scope=t,this.services=i;var o=this.scope.viewModel.tile;this.scope.viewModel=new e.models.EditTextWidgetModel(o),this.initializeViewModelProperties()}return t.createOptions=function(){return{additionalServices:["localizationService"]}},t.prototype.initializeViewModelProperties=function(){var t=this,o=this.scope.viewModel;o.visualModel={type:o.tile.config.visual.visual,viewport:{height:i},dataTransforms:o.tile.composite.visual.dataTransforms,hostServices:{getLocalizedString:function(e){return t.services.localizationService.get(e)},getViewMode:function(){return 1},persistProperties:function(e){return t.persistProperties(e)},setToolbar:function(e){return t.setToolbar(e)}}},o.toolbarModel={visible:!0,$element:null,update:function(){},theme:e.common.directives.ToolbarOverlay.Themes.lightToolbar,layout:e.common.directives.ToolbarOverlay.Layouts.stacked}},t.prototype.persistProperties=function(t){for(var i=this.scope.viewModel.tile.composite.visual,o=0,r=t;o<r.length;o++){var a=r[o],n=e.data.DataViewObjectDefinitions.ensure(i.dataTransforms.objects,a.objectName,a.selector);n.properties=a.properties,i.dataViews[0].metadata.objects||(i.dataViews[0].metadata.objects={}),i.dataViews[0].metadata.objects[a.objectName]=a.properties,i.visual.onDataChanged({dataViews:i.dataViews})}this.scope.$applyAsync(_.noop)},t.prototype.setToolbar=function(e){var t=this.scope.viewModel.toolbarModel;t.$element=e,t.update()},t})();t.EditTextWidgetController=o})(i=t.widgets||(t.widgets={}))})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.replace=!0,this.restrict="E",this.templateUrl="views/widgets/editIframeWidget.html",this.link=function(t){var i=t.viewModel.tile;t.viewModel=new e.models.EditIframeWidgetModel(i)}}return t})();t.EditIframeWidget=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.replace=!0,this.restrict="E",this.templateUrl="views/widgets/editImageWidget.html",
this.link=function(t){var i=t.viewModel.tile;i.image.isStatic=!0,t.viewModel=new e.models.EditImageWidgetModel(i),t.onChange=function(){i.resetTileErrors&&i.resetTileErrors()},t.$on(e.common.constants.scopeDestroyEventName,(function(){i.resetTileErrors&&i.resetTileErrors()}))}}return t})();t.EditImageWidget=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.controller=e.common.Services.createController(e.controllers.widgets.EditTextWidgetController),this.replace=!0,this.restrict="E",this.templateUrl="views/widgets/editTextWidget.html"}return t})();t.EditTextWidget=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.isDirty=function(){var t=this.tile;return t.iframe.srcUrl!==t.config.iframe.srcUrl||t.iframe.embedCode!==t.config.iframe.embedCode||e.prototype.isDirty.call(this)},t.prototype.isValid=function(){return!!this.tile.iframe.embedCode&&e.prototype.isValid.call(this)},t.prototype.undoChanges=function(){var t=this.tile;t.iframe.srcUrl=t.config.iframe.srcUrl,t.iframe.embedCode=t.config.iframe.embedCode,e.prototype.undoChanges.call(this)},t.prototype.updateModelContract=function(){this.tile.config.iframe.srcUrl=this.tile.iframe.srcUrl,this.tile.config.iframe.embedCode=this.tile.iframe.embedCode,e.prototype.updateModelContract.call(this)},t})(e.TileEditorModel);e.EditIframeWidgetModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.dataServices.models.Tile,o=(function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.isImageUrlValid=function(){var e=this.tile.image.imageUrl;return!!e&&(e.indexOf("data:")>=0||i.isValidUrl(e))},t.prototype.isDirty=function(){var t=this.tile;return t.image.imageUrl!==t.config.imageTile.imageUrl||e.prototype.isDirty.call(this)},t.prototype.isValid=function(){return this.isImageUrlValid()&&e.prototype.isValid.call(this)},t.prototype.undoChanges=function(){var t=this.tile;t.image.imageUrl=t.config.imageTile.imageUrl,e.prototype.undoChanges.call(this)},t.prototype.updateModelContract=function(){this.tile.config.imageTile.imageUrl=this.tile.image.imageUrl,e.prototype.updateModelContract.call(this)},t})(t.TileEditorModel);t.EditImageWidgetModel=o})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.data.DataViewTransform,o=(function(t){function o(o){t.call(this,o);var r=this.tile.composite.visual,a=r.visual;if(a&&a.visualPlugin){var n=a.visualPlugin.capabilities;r.dataViews||(r.dataViews=i.apply({prototype:void 0,objectDescriptors:n?n.objects:null,transforms:r.dataTransforms,colorAllocatorFactory:e.visuals.createColorAllocatorFactory(),dataRoles:null}))}this.originalDataTransforms=angular.copy(r.dataTransforms),this.originalDataViews=angular.copy(r.dataViews)}return __extends(o,t),o.prototype.isDirty=function(){var e=this.tile.composite.visual.dataTransforms;return!_.isEqual(e,this.originalDataTransforms)||t.prototype.isDirty.call(this)},o.prototype.undoChanges=function(){var e=this.tile.composite.visual;e.dataTransforms=this.originalDataTransforms,e.dataViews=this.originalDataViews,e.visual.onDataChanged({dataViews:e.dataViews}),t.prototype.undoChanges.call(this)},o.prototype.updateModelContract=function(){this.tile.config.visual.objects=this.tile.composite.visual.dataTransforms.objects,t.prototype.updateModelContract.call(this)},o})(t.TileEditorModel);t.EditTextWidgetModel=o})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,i,o,r,a,n,s,c,l,d){return new p(e,t,i,o,r,a,n,s,c,l,d)}var i=e.dataServices.ContractUtils,o=e.data.services.DataViewObjectSerializer,r=e.explore.util.FilterContainerBuilder,a=e.explore.viewModels.FilterViewModelFactory,n=e.explore.QueryProjectionBuilderCoreUtils,s=e.data.services.SemanticQuerySerializer,c=e.dataServices.contracts.TileType,l=e.explore.util.VisualContainerUtils;e.createExportDataService=t;var d="sobe_onpremisevirtualserver",p=(function(){function t(e,t,i,o,r,a,n,s,c,l,d){this.promiseFactory=e,this.notificationToastService=t,this.localizationService=i,this.conceptualSchemaProxy=o,this.visualPluginService=r,this.exportVisualDataService=a,this.featureSwitchService=n,this.displayNameService=s,this.aggrOps=c,this.filterRestatementService=l,this.drillToDetails=d}return t.prototype.exportTileDataToCsv=function(t){var r=this,a=t.composite,c=t.contract,l=t.config,d=l.visual,p=d.visual,u=this.getDataSources(t),v=this.promiseFactory.defer(),h=this.localizationService,g=this.notificationToastService,m=g.notify({title:h.get("ExportData_LoadingTitle"),message:h.get("ExportData_LoadingMessage"),notificationType:e.common.NotificationToastType.Loading});return this.conceptualSchemaProxy.get(u).then((function(t){g.hide(m);var h=i.convertToSemanticQueryWithDataShapeBinding(c.query),f=s.deserializeQuery(h.defn),y=d.elements,b=y&&y.length>0?y[0].DataRoles:null,S=r.visualPluginService.getPlugin(p),w=n.createProjectionBuilderFromDataRoles(S,b,f,t),C=r.visualPluginService.capabilities(p);if(C){var D=o.deserializeObjects(l.visual.objects,C.objects),I={objects:D,visualType:p,query:new e.explore.contracts.VisualQuery(f,w.build(h.shape))};r.exportVisualDataToCsv(l.visual.heading1,a.tileData,u,I,a.visual.dataTransforms,null).then((function(e){v.resolve(e)}),(function(e){v.reject(e)}))}}),(function(){g.hide(m)})),v.promise},t.prototype.exportVisualDataToCsv=function(t,i,o,r,a,n){var s=this.localizationService,c=this.notificationToastService,l=c.notify({title:s.get("ExportData_LoadingTitle"),message:s.get("ExportData_LoadingMessage"),notificationType:e.common.NotificationToastType.Loading,sticky:!0}),d=this.exportVisualDataService.exportToCsv(t,i,o,r,a,n);return this.handleExportDataResult(d,l)},t.prototype.exportVisualDataToExcel=function(t,i,o,r,a,n){var s=this,c=this.localizationService,l=this.notificationToastService,d=this.promiseFactory.defer(),p=l.notify({title:c.get("ExportData_LoadingTitle"),message:c.get("ExportData_LoadingMessage"),notificationType:e.common.NotificationToastType.Loading,sticky:!0});return this.conceptualSchemaProxy.get(i).then((function(e){var c=o;if(a){var l=s.drillToDetails.generateDetailsTable(o,e,n);if(!l)return void d.reject({blob:null,error:4});c=l}s.generateFiltersDescriptionPromise(e,r,c,i).then((function(e){s.exportVisualDataService.exportToExcel(t,i,c,r,e).then((function(e){d.resolve(e)}),(function(e){d.reject(e)}))}),(function(){d.reject({blob:null,error:5})}))}),(function(){d.reject({blob:null,error:3})})),this.handleExportDataResult(d.promise,p)},t.prototype.canExportTileData=function(t){if(!this.featureSwitchService.featureSwitches.exportDataEnabled)return!1;if(t.type!==c.composite)return!1;var o=t.composite&&t.composite.visual&&t.composite.visual.type,r=this.visualPluginService.getPlugin(o);if(!r)return!1;if(!t.composite.tileData)return!1;if(!l.isQueryVisual(o,this.visualPluginService))return!1;try{var a=t&&t.contract&&t.contract.query,n=i.convertToSemanticQueryWithDataShapeBinding(a),s=n.defn;if(!s||!s.Version||s.Version<e.data.SemanticQueryVersions.Version2)return!1}catch(e){return!1}return!0},t.prototype.getExportDataToExcelUnsupportedType=function(e,t){var i=e.objects,o=e.visualType,r=!0;return!r&&this.isDataModelASOnPremises(t)?1:i&&i.forecast?3:i&&i.clustering?2:this.visualPluginService.isScriptVisual(o)?4:this.visualPluginService.isCustomVisual(o)?5:0},t.prototype.isDataModelASOnPremises=function(e){return e&&e.vsName&&e.vsName===d},t.prototype.generateFiltersDescriptionPromise=function(t,i,o,n){var s={filtersNamesAndRestatements:[]},c=this.promiseFactory.defer();if(!i||!i.dataFilter)return c.resolve(s),c.promise;var l=r.fromSemanticFilter(i.dataFilter,t);if(!l)return c.resolve({}),c.promise;for(var d={container:l,scopeType:0},p=[],u=[],v=[],h=0,g=l;h<g.length;h++){var m=g[h],f=a.convertFilterContainer(m,t,this.displayNameService,d,this.visualPluginService,this.aggrOps,this.localizationService);f.updateFilterProperties(t,this.visualPluginService,this.aggrOps),f.contract.config={singleVisual:o};var y={includeVariationSource:!0};p.push(this.displayNameService.getDisplayName(f.contract.expression,t,y,this.localizationService)),u.push(this.displayNameService.getQualifiedDisplayName(f.contract.expression,t,y,this.localizationService));var b=this.promiseFactory.defer(),S=e.explore.components.TopNFilterViewModelFactory.createViewModelFromSemanticFilter(m.filter,t,this.localizationService,this.displayNameService,this.aggrOps);if(S)b.resolve(S.getRestatement(this.localizationService));else{var w=e.explore.viewModels.FilterViewModelFactory.extractAdvFilterCard(m);if(!w)return c.resolve({}),c.promise;var C=w.getRestatement(f.formatter);C?b.resolve(C):b.promise=this.filterRestatementService.loadRestatement(n,m)}v.push(b.promise)}return p.length!==l.length||v.length!==l.length||u.length!==l.length?(c.resolve({}),c.promise):(this.promiseFactory.all(v).then((function(e){for(var t=0;t<l.length;t++)_.isEmpty(p[t])||_.isEmpty(e[t])||s.filtersNamesAndRestatements.push({displayName:p[t],qualifiedDisplayName:u[t],restatement:e[t]});c.resolve(s)})),c.promise)},t.prototype.getDataSources=function(t){var i=t.contract,o=e.explore.contracts.createDataSourceArray(),r=o.withId(i.modelId);return r={type:"dsr",id:i.modelId,name:i.modelName,dsr:{schemaName:i.modelName,vsName:t.vsName,dbName:t.dbName,modelId:i.modelId}},o.push(r),o},t.saveResult=function(e){switch(e.format){case 0:var t=new Blob([e.blob],{type:"text/csv;charset=utf-8;"});saveAs(t,e.fileName);break;case 1:var i=new Blob([e.blob],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;"});saveAs(i,e.fileName)}},t.prototype.handleExportDataResult=function(i,o){var r=this.promiseFactory.defer(),a=this.localizationService,n=this.notificationToastService;return i.then((function(i){null!=i.error?(n.notify({title:a.get("ExportData_FailureTitle"),message:a.get("ExportData_FailureMessage"),notificationType:e.common.NotificationToastType.Error}),r.reject(i)):(i.isPartialResult&&n.notify({title:a.get("ExportData_PartialDataTitle"),message:a.get("ExportData_PartialDataMessage"),notificationType:e.common.NotificationToastType.Warning}),t.saveResult(i),r.resolve(i))}),(function(t){n.notify({title:a.get("ExportData_FailureTitle"),message:a.get("ExportData_FailureMessage"),notificationType:e.common.NotificationToastType.Error}),r.reject(t)})).finally((function(){return n.hide(o)})),r.promise},t})();e.ExportDataService=p})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i){return new o(e,t,i)}t.createExportStaticExplorationService=i;var o=(function(){function t(e,t,i){this.exportStaticReportProxy=e,this.notificationToast=t,this.localizationService=i}return t.prototype.exportToPng=function(i,o,r){var a=this,n=this.localizationService,s=this.notificationToast.notify({title:n.get("ExportStaticImage_Title"),message:n.get("ExportStaticImage_Message"),notificationType:e.common.NotificationToastType.Loading});this.exportStaticReportProxy.exportAsImage(o,r).then((function(e){var o=new Blob([e.blob],{type:"image/png"});saveAs(o,t.getFileName(i))})).finally((function(){a.notificationToast.hide(s)}))},t.getFileName=function(e){var t=jsCommon.StringExtensions.normalizeFileName(e);return t+".png"},t})();t.ExportStaticExplorationService=o})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t){var i=this;this.restrict="E",this.replace=!0,this.templateUrl="views/pbiDataLoaderSpinner.html",this.link=function(e,t,o){var r=t.find("h3");r.text(i.loc.get("DataLoaderSpinner_LoadingMessage1")),i.timeout((function(){r.text(i.loc.get("DataLoaderSpinner_LoadingMessage2"))}),5e3)},this.loc=e,this.timeout=t}return e})();e.PbiDataLoaderSpinner=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i,o,a,n,s){return new r(e,t,i,o,a,n,s)}var o=e.common.constants;t.createPageTitleService=i;var r=(function(){function t(e,t,i,o,r,a,n){this.navigationService=t,this.window=a,this.dashboardService=i,this.reportService=o,this.localizationService=e,this.workbookService=r,this.rootScope=n,this.initialize()}return t.prototype.refresh=function(){var e,t=this.navigationService,i=this.localizationService,o=this.reportService,r=this.workbookService,a=this.dashboardService;if(t.inReportView()){var n=o.findReportByGUID(t.currentReportGUID);n&&n.displayName&&(e=i.format("PowerBI_PageTitle",[n.displayName]))}else if(t.inWorkbookView()){var s=r.findWorkbookByUniqueId(t.currentWorkbookURLIdentifier);s&&s.displayName&&(e=i.format("PowerBI_PageTitle",[s.displayName]))}else if(t.inDashboardView()){var c=a.findDashboardByGUID(t.currentDashboardGUID);c&&c.displayName&&(e=i.format("PowerBI_PageTitle",[c.displayName]))}_.isEmpty(e)&&(e=i.get("Power_BI")),this.window.document.title=e},t.prototype.initialize=function(){var t=this,i=this.rootScope,r=function(){t.refresh()},a=i.$on(o.navigation.stateChangeSuccess,r),n=i.$on(o.currentActiveReportInfoChangedEventName,r),s=i.$on(e.constants.renameDashboardEventName,r),c=i.$on(e.constants.dashboardContainerLoaded,r);i.$on("$destroy",(function(){a(),n(),s(),c()}))},t})()})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t){return new a(e,t)}var o=e.common.models.CollapsiblePaneExpandedWidth,r=e.common.constants.TaskPaneCollapsiblePaneMode;t.createShareSliderService=i;var a=(function(){function t(e,t){this.navigation=e,this.rootscope=t}return t.prototype.openShareSlider=function(t){t&&(this.shareDashboard=t,this.rootscope.$emit(e.constants.showTaskPaneSlider,r.SharingPane,o.Large))},t})();t.ShareSliderService=a})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){var i=(function(){function t(t,i){var o=this;this.scope=t,this.services=i;var r=this.scope.viewModel.tile;this.scope.viewModel=new e.models.EditVideoWidgetModel(r),this.scope.url=r.iframe.srcUrl,this.scope.inputChanged=function(){return o.inputChanged()}}return t.prototype.inputChanged=function(){var e=this.scope.url,i=this.scope.viewModel.tile.iframe,o=this.parseUrl(e),r=o.hostname.toLowerCase();if(("www.youtube.com"===r||"youtube.com"===r)&&o.queryParams.v)return i.srcUrl=e,void(i.embedCode=jsCommon.StringExtensions.format(t.youtubeEmbedTemplate,o.queryParams.v+o.search));if("youtu.be"===r){var a=_.trimLeft(o.pathname,"/");if(a)return i.srcUrl=e,void(i.embedCode=jsCommon.StringExtensions.format(t.youtubeEmbedTemplate,a+o.search))}else if(_.contains(r,"vimeo.com")){var n=this.parseVimeoVideoId(e);if(null!=n)return i.srcUrl=e,void(i.embedCode=jsCommon.StringExtensions.format(t.vimeoEmbedTemplate,n))}i.srcUrl="",i.embedCode=""},t.prototype.parseUrl=function(e){var t=document.createElement("a");return t.href=e,{hostname:t.hostname,pathname:t.pathname,search:t.search,queryParams:jsCommon.QueryStringUtil.parseQueryString(t.search)}},t.prototype.parseVimeoVideoId=function(e){var t=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)((#|\?)(.*))?$/i,i=e.match(t);if(i)return i[5]},t.youtubeEmbedTemplate='<iframe width="100%" height="100%" src="https://www.youtube.com/embed/{0}" frameborder="0"></iframe>',t.vimeoEmbedTemplate='<iframe width="100%" height="100%" src="https://player.vimeo.com/video/{0}" frameborder="0"></iframe>',t})();t.EditVideoWidgetController=i})(i=t.widgets||(t.widgets={}))})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i;!(function(t){var i=(function(){function t(t,i){var o=this;this.excelProviderBaseEndpointPath="/powerbi/providers/excel/",this.scope=t,this.services=i,this.scope.isLoading=!1,this.scope.hasError=!1;var r,a="<share-point-url-modal></share-point-url-modal>",n=this.services.telemetryService.startChildEvent(this.services.telemetryService.root,e.telemetry.CustomConfigHandlerSharePointDiscover,this.scope.url),s={dialogName:this.services.localizationService.get("SharePoint_ModalTitle"),isDismissable:!1,scope:this.scope,template:a,focusOnFirstButton:!0,dialogActions:[new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialog_Connect"),function(i,a){o.scope.isLoading=!0,o.scope.hasError=!1,o.services.contentProviderConfigHandler.configData={},o.services.contentProviderConfigHandler.configData.sharePointUrl=o.scope.url,o.getDocumentLibararies(n.event).then((function(i){o.services.contentProviderConfigHandler.configData.result=i,o.scope.isLoading=!1,r.closeDialog(),t.$emit(e.common.constants.contentProviderStoreCustomConfigurationPostbackEventName,!0),n.resolve()}),(function(t){o.scope.hasError=!0,o.scope.isLoading=!1,(t.status=e.HttpStatusCode.NotFound)?(o.scope.errorMessage=o.services.localizationService.get("SharePoint_AccessError"),n.resolve()):(r.closeDialog(),n.reject())}))}),new InJs.ModalDialogAction(this.services.localizationService.get("ModalDialog_Cancel"),function(i,a){o.scope.isLoading=!1,o.scope.hasError=!1,r.closeDialog(),t.$emit(e.common.constants.contentProviderStoreCustomConfigurationPostbackEventName,!1)})],notificationType:jsCommon.ModalDialogNotificationType.Info};r=this.services.modalDialogService.showLegacyWebModalDialog(s)}return t.createOptions=function(){return{additionalServices:["modalDialogService","localizationService","contentProviderConfigHandler","telemetryService"]}},t.prototype.getDocumentLibararies=function(t){var i=e.common.httpService.powerbiRequestOptions(t,"GetSharepointDocumentLibraries"),o=this.excelProviderBaseEndpointPath+"allDocumentLibraries";return this.scope.url&&(o=o+"?siteUrl="+this.scope.url),e.common.httpService.get(o,i)},t})();t.SharePointUrlInputController=i})(i=t.contentProviderStore||(t.contentProviderStore={}))})(t=e.controllers||(e.controllers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.controller=e.common.Services.createController(e.controllers.widgets.EditVideoWidgetController),this.replace=!0,this.restrict="E",this.templateUrl="views/widgets/editVideoWidget.html"}return t})();t.EditVideoWidget=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.isVideoUrlValid=function(){return!!this.tile.iframe.srcUrl},t.prototype.isDirty=function(){var t=this.tile;return t.iframe.srcUrl!==t.config.iframe.srcUrl||e.prototype.isDirty.call(this)},t.prototype.isValid=function(){return this.isVideoUrlValid()&&e.prototype.isValid.call(this)},t.prototype.undoChanges=function(){var t=this.tile;t.iframe.srcUrl=t.config.iframe.srcUrl,t.iframe.embedCode=t.config.iframe.embedCode,e.prototype.undoChanges.call(this)},t.prototype.updateModelContract=function(){var t=this.tile.config.iframe,i=this.tile.iframe;t.srcUrl=i.srcUrl,t.embedCode=i.embedCode,e.prototype.updateModelContract.call(this)},t})(e.TileEditorModel);e.EditVideoWidgetModel=t})(t=e.models||(e.models={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/tiles/dashboardTileOpenOptions.html",this.replace=!0}return e})();e.DashboardTileOpenOptions=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){this.restrict="E",this.templateUrl="views/tiles/dashboardTileOptionsMenu.html",this.replace=!0}return e})();e.DashboardTileOptionsMenu=t})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=(function(){function t(){this.restrict="E",this.controller=e.common.Services.createController(e.controllers.contentProviderStore.SharePointUrlInputController)}return t})();t.SharePointUrlInput=i})(t=e.directives||(e.directives={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var i=e.common.constants,o=(function(){function e(){}return e.getClusterLocation=function(e,t){var o=i.clusterLocations;for(var r in o)for(var a=o[r],n=0,s=a;n<s.length;n++){var c=s[n];if(e.toLocaleLowerCase().indexOf(c)>=0)return t.get(r)}return t.get("Cluster_Location_TestEnvironment")},e})();t.ClusterLocationHelper=o})(t=e.helpers||(e.helpers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e,t,o,r,a,n){return new i(e,t,o,r,a,n)}e.createDynamicMessagingDataService=t;var i=(function(){function t(e,t,i,o,r,a){var n=this;this.dynamicMessagingDataHttp=e,this.userNotificationInfo=t,this.userInfo=i,this.telemetryService=o,this.localizationService=r,this.featureSwitchService=a,"undefined"!=typeof dynamicMessagingUrl&&this.featureSwitchService.getFeatureSwitches().then((function(){n.featureSwitchService.featureSwitches.userNotificationsEnabled&&n.featureSwitchService.featureSwitches.dynamicMessageEnabled&&n.getData()}))}return t.prototype.postData=function(t){if(this.notificationMessage){var i=this.telemetryService.startEvent(e.telemetry.DynamicMessageUserAction,t);this.dynamicMessagingDataHttp.postData(this.localizationService.currentLanguageLocale,this.notificationMessage.MessageID,this.notificationMessage.TransactionID,this.notificationMessage.CampaignId,this.userInfo.puid,t).then((function(e){i.resolve()}),(function(t){i.reject({errorCode:"DynamicMessagingPostUserActionFailed.",errorSource:e.telemetry.ErrorSource.External})}))}},t.prototype.getData=function(){var t=this,i=this.telemetryService.startEvent(e.telemetry.DynamicMessageGetMessage,!1);this.userInfo.puid&&this.dynamicMessagingDataHttp.getData(this.userInfo.puid,this.localizationService.currentLanguageLocale).then((function(o){if(null!=o.data){var r=o.data[dynamicMessageSurfaceName];if(r&&r.ContentType!==e.contracts.DynamicMessageContentType.ErrorOccurred&&r.Message){t.notificationMessage=r;var a=jsCommon.JsonExtensions.tryParseJSON(r.Message);a&&a.NotificationTitle&&a.NotificationMessage&&(t.userNotificationInfo.addClientNotification({id:0,notificationCategory:e.userNotifications.contracts.NotificationCategory.DynamicMessage,message:{title:{text:a.NotificationTitle},message:{text:a.NotificationMessage},image:{imageType:e.userNotifications.contracts.NotificationImageType.PowerBI}},action:t.createNotificationAction(a.Buttons),seen:!1}),i.event.info.parsedMessage=!0)}}i.resolve()}),(function(t){i.reject({errorCode:"DynamicMessagingInitializationFailed.",errorSource:e.telemetry.ErrorSource.External})}))},t.prototype.createNotificationAction=function(t){var i=null;return _.isEmpty(t)||(i={resource:{text:t[0].Text},actionType:e.userNotifications.contracts.NotificationActionType.DynamicMessage,path:[t[0].URL]}),i},t})();e.DynamicMessagingDataService=i})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(){return new i}e.createDynamicMessagingDataHttpService=t;var i=(function(){function t(){}return t.prototype.getData=function(t,i){var o=e.common.httpService.powerbiRequestOptions();return e.common.httpService.get(jsCommon.StringExtensions.format("{0}/api/V2/messaging/Web/Message?source={1}&Locale={2}&id=5:{3}",dynamicMessagingUrl,dynamicMessageSurfaceName,i,t),o)},t.prototype.postData=function(t,i,o,r,a,n){var s=e.common.httpService.powerbiRequestOptions(),c=jsCommon.StringExtensions.format("{0}/api/v1/messaging/Web/useraction?source={1}&Locale={2}&contentID={3}&transactionID={4}&campaignId={5}&id={6}&type=0&useraction={7}",dynamicMessagingUrl,dynamicMessageSurfaceName,t,i,o,r,a,n);return e.common.httpService.post(c,{},s)},t})();e.DynamicMessagingDataHttpService=i})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t){return new o(e,t)}t.createQuota=i;var o=(function(){function t(e,t){this.storageUsageService=e,this.dashboardService=t}return Object.defineProperty(t.prototype,"quotaLimitInMB",{get:function(){return this.storageUsageService.quotaLimitInMB},enumerable:!0,configurable:!0}),t.prototype.getUsageModels=function(){return this.storageUsageService.getUsageModels(this.dashboardService.dashboards)},t.prototype.getUsage=function(){return this.storageUsageService.getUsage(this.dashboardService.dashboards)},t.prototype.checkQuotaExceeded=function(t,i){return void 0===t&&(t=e.telemetry.QuotaCheckOperation.Unknown),this.storageUsageService.checkQuotaExceeded(this.dashboardService.dashboards,t,i)},t.prototype.getUsageBarMenuItemViewModel=function(){return this.storageUsageService.getUsageBarMenuItemViewModel(this.dashboardService.dashboards)},t.prototype.showQuotaExceedDialog=function(){this.storageUsageService.showQuotaExceedDialog()},t.prototype.isInVisibleDashboard=function(e){return this.storageUsageService.isInVisibleDashboard(e)},t})()})(t=e.services||(e.services={}))})(powerbi||(powerbi={}));;var __extends=this&&this.__extends||function(e,r){function t(){this.constructor=e}for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o]);e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)},powerbi;!(function(e){var r;!(function(e){var r;!(function(e){var r;!(function(e){e.NotIn="NotIn",e.SelectAll="All",e.operatorDictionary={None:0,LessThan:1,LessThanOrEqual:2,GreaterThan:3,GreaterThanOrEqual:4,Contains:5,DoesNotContain:6,StartsWith:7,DoesNotStartWith:8,Is:9,IsNot:10,IsBlank:11,IsNotBlank:12},e.logicalOperatorDictionary={Or:1,And:0};var r;!(function(e){e.InvalidDataType="InvalidDataType",e.FieldNotFound="FieldNotFound",e.FilterConditionNotFound="FilterConditionNotFound",e.FilterValidationErrors="FilterValidationErrors",e.LogicalConditionNotFound="LogicalConditionNotFound",e.BasicFilterSerializationError="BasicFilterSerializationError",e.AdvancedFilterSerializationError="AdvancedFilterSerializationError",e.InvalidFilterType="InvalidFilterType",e.InvalidFilterCondition="InvalidFilterCondition",e.FilterNotFound="FilterNotFound",e.BasicFilterOperatorNotFound="BasicFilterOperatorNotFound",e.InvalidReportData="InvalidReportData",e.InvalidPageData="InvalidPageData"})(r=e.ErrorCodes||(e.ErrorCodes={}));var t;!(function(e){e.InvalidFilterMessage="Filter is not valid, validation errors: ",e.InvalidTarget="Could not serialize json filter target to SQ expression.",e.InvalidCondition="Advanced filter requires a filter condition (None | LessThan | LessThanOrEqual | GreaterThan | GreaterThanOrEqual | Contains | DoesNotContain | StartsWith | DoesNotStartWith | Is | IsNot | IsBlank | IsNotBlank).",e.InvalidDataTypeMessage="The data type of the value {0} is not supported. Only string, number and boolean are supported.",e.FilterSerializationError="Could not serialize filter.",e.InvalidFilterTypeMessage="Not supported filter type - can't serialize to json syntax.",e.SemanticFilterInvalidCondition="Filter with invalid condition - can't serialize to json syntax.",e.FilterNotFoundMessage="Invoked filter serialization function with no filter.",e.FieldNotFoundMessage="Invoked filter serialization function on a table that has no column/measure/hierarchy.",e.BasicFilterOperatorNotFoundMessage="Basic filter requires an operator (In | Not).",e.FilterValuesNotFound=" Could not retrieve filter values.",e.InvalidReportDataMessage="Could not find the report.",e.InvalidPageDataMessage="Could not find the active page.",e.DataPointSerializationError="Could not serialize a data point."})(t=e.ErrorMessages||(e.ErrorMessages={}))})(r=e.constants||(e.constants={}))})(r=e.jsonFilter||(e.jsonFilter={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){var t;!(function(t){function o(e){return new u(e)}var i=t.constants,a=e.data.SemanticFilter,n=e.data.SQExprBuilder,s=jsCommon.StringExtensions,l=jsCommon.Trace,d=jsCommon.Utility;t.createJSONFilterParser=o;var u=(function(){function o(e){this.promiseFactory=e,this.PowerBIModels=window["powerbi-models"],this.fieldVisitor=new t.JsonFilterBuilder.SemanticFilterFieldVisitor}return o.prototype.tryCreateFilterContainer=function(e,r,t){try{return this.constructFilterContainer(e,r,t)}catch(e){return c.traceError(e),null}},o.prototype.tryGetFilters=function(e,r){var o=[];if(!e.filters||0===e.filters.length)return this.promiseFactory.resolve(o);try{o=e.filters.map((function(e){return t.JsonFilterBuilder.fromSemanticFilter(e,r,e.filter)}))}catch(e){return c.traceError(e),void 0!==e.message?this.promiseFactory.reject({message:e.message}):this.promiseFactory.reject({message:i.ErrorMessages.FilterSerializationError})}return this.promiseFactory.resolve(o)},o.prototype.tryGetSelectedDataPoints=function(e,r,t){var o=this,a=t.visualContainer;if(!a||!a.config||!a.config.singleVisual||_.isEmpty(t.selectors))return this.promiseFactory.reject({message:i.ErrorMessages.DataPointSerializationError});var n,s=a.config.singleVisual,l=this.promiseFactory.defer();return this.tryGetFilters(t.visualContainer,r).then((function(r){try{n={report:o.getReportInfo(e),page:o.getActivePageInfo(e),visual:o.getVisualInfo(t.visualTitleText,s.visualType),dataPoints:o.getDataPoints(t.selectors,s),regions:null,filters:r},l.resolve(n)}catch(e){c.traceError(e),void 0!==e.message?l.reject({message:e.message}):l.reject({message:i.ErrorMessages.DataPointSerializationError})}})).catch((function(e){l.reject(e)})),l.promise},o.prototype.getDataPoints=function(r,t){for(var o=[],i=0,a=r;i<a.length;i++){var n=a[i],l={identity:[],values:[]},u=n.data,p=n.metadata;if(!_.isEmpty(u)){if(!s.isNullOrUndefinedOrWhiteSpaceString(p)){var v=this.getMetadataColumn(t,p);l.values.push(v)}for(var F=0,f=u;F<f.length;F++){var g=f[F];if(g.expr){var h=g,E=e.data.SQExprConverter.getFirstComparandValue(h),m=e.data.ScopeIdentityExtractor.getKeys(h.expr);null!=m&&1===m.length||d.throwException(c.invalidReportData());var y=m[0].accept(this.fieldVisitor);l.identity.push({target:y,equals:E})}}o.push(l)}}return o},o.prototype.getMetadataColumn=function(e,r){if(null==r)return null;var t=e.query.defn.select().withName(r);t||d.throwException(c.invalidReportData());var o=t.expr.accept(this.fieldVisitor);return{target:o,value:null}},o.prototype.getReportInfo=function(e){return e&&null!=e.activeSectionIndex||d.throwException(c.invalidReportData()),{id:e.report.objectId,displayName:e.report.displayName}},o.prototype.getActivePageInfo=function(e){e&&null!=e.activeSectionIndex||d.throwException(c.invalidPageData());var r=e.sections[e.activeSectionIndex];return{name:r.name,displayName:r.displayName}},o.prototype.getVisualInfo=function(e,r){return{name:null,title:e,type:r}},o.prototype.constructFilterContainer=function(e,r,t){var o,i=this.validateFilter(t);if(i)d.throwException(c.filterValidationErrors(i));else{var a=this.PowerBIModels.getFilterType(t);a===this.PowerBIModels.FilterType.Basic?o=this.buildBasicFilterContainer(e,t):a===this.PowerBIModels.FilterType.Advanced&&(o=this.buildAdvancedFilterContainer(e,r,t))}return o},o.prototype.buildBasicFilterContainer=function(t,o){var s,l=this.getFieldExpr(o.target);l||d.throwException(c.fieldNotFound(o.target));var u=void 0;if(o.operator!==i.SelectAll){for(var p=[],v=0;v<o.values.length;v++)p.push([this.buildSQConstantExpr(o.values[v])]);var F=n.inValues([l],p),f=void 0;f=o.operator===i.NotIn?n.not(F):F,u=a.fromSQExpr(f)}return s={name:r.FilterUtils.getNextFilterName(t.filters),expression:l,filter:u,type:e.explore.contracts.FilterType.Categorical}},o.prototype.buildAdvancedFilterContainer=function(t,o,n){var s,l=this.getFieldExpr(n.target);l||d.throwException(c.fieldNotFound(n.target));for(var u=[],p=0;p<n.conditions.length;p++){var v=this.getCondition(n.conditions[p]);v&&u.push(v)}var F=l.getMetadata(o),f=F?F.type:null,g=i.logicalOperatorDictionary[n.logicalOperator],h=r.viewModels.FilterCardConverter.toSQExpr(l,f,u,g);return h&&(s={name:r.FilterUtils.getNextFilterName(t.filters),expression:l,filter:a.fromSQExpr(h),type:e.explore.contracts.FilterType.Advanced}),s},o.prototype.getCondition=function(e){e||d.throwException(c.filterConditionNotFound());var t,o=i.operatorDictionary[e.operator];return t=_.isString(e.value)&&jsCommon.DateExtensions.parseIsoDateFast(e.value.substr(0,26))?jsCommon.DateExtensions.parseIsoDateFast(e.value.substr(0,26)):e.value,new r.viewModels.Condition(o,t)},o.prototype.getFieldExpr=function(e){var r;if(this.PowerBIModels.isMeasure(e)){var t=e;r=n.measureRef(n.entity(void 0,t.table),t.measure)}else if(this.PowerBIModels.isHierarchy(e)){var o=e;r=n.hierarchyLevel(n.hierarchy(n.entity(void 0,o.table),o.hierarchy),o.hierarchyLevel)}else if(this.PowerBIModels.isColumn(e)){var i=e;r=n.fieldExpr({column:{schema:void 0,entity:i.table,name:i.column}})}return r},o.prototype.buildSQConstantExpr=function(e){var r;if(_.isString(e))if(null!=jsCommon.DateExtensions.parseIsoDateFast(e.substr(0,26))){var t=jsCommon.DateExtensions.parseIsoDateFast(e.substr(0,26));r=n.dateTime(t)}else r=n.text(e);else _.isBoolean(e)?r=n.boolean(e):_.isNumber(e)?r=e%1!==0?n.double(e):n.decimal(e):d.throwException(c.invalidDataType(e));return r},o.prototype.validateFilter=function(e){var r=this.PowerBIModels.validateFilter(e);return r},o})(),c=(function(){function e(){}return e.traceError=function(e){l.error(s.format("Throwing exception: {0}",JSON.stringify(e)),null==e.Stack)},e.fieldNotFound=function(e){var r=e?"Target table: "+e.table:"";return{name:i.ErrorCodes.FieldNotFound,message:i.ErrorMessages.InvalidTarget+r}},e.filterValidationErrors=function(e){var r=e.map((function(e){return e.message})).join(", ");return{name:i.ErrorCodes.FilterValidationErrors,message:i.ErrorMessages.InvalidFilterMessage+r}},e.invalidDataType=function(e){return{name:i.ErrorCodes.InvalidDataType,message:jsCommon.StringExtensions.format(i.ErrorMessages.InvalidDataTypeMessage,e)}},e.filterConditionNotFound=function(){return{name:i.ErrorCodes.FilterConditionNotFound,message:i.ErrorMessages.InvalidCondition}},e.basicFilterSerializationError=function(e){return{name:i.ErrorCodes.BasicFilterSerializationError,message:i.ErrorMessages.FilterSerializationError+e}},e.advancedFilterSerializationError=function(){return{name:i.ErrorCodes.AdvancedFilterSerializationError,message:i.ErrorMessages.FilterSerializationError}},e.invalidFilterType=function(){return{name:i.ErrorCodes.InvalidFilterType,message:i.ErrorMessages.InvalidFilterTypeMessage}},e.invalidFilterCondition=function(){return{name:i.ErrorCodes.InvalidFilterCondition,message:i.ErrorMessages.SemanticFilterInvalidCondition}},e.filterNotFound=function(){return{name:i.ErrorCodes.FilterNotFound,message:i.ErrorMessages.FilterNotFoundMessage}},e.fieldExpressionNotFound=function(){return{name:i.ErrorCodes.FieldNotFound,message:i.ErrorMessages.FieldNotFoundMessage}},e.basicFilterOperatorNotFound=function(){return{name:i.ErrorCodes.BasicFilterOperatorNotFound,message:i.ErrorMessages.BasicFilterOperatorNotFoundMessage}},e.invalidReportData=function(){return{name:i.ErrorCodes.InvalidReportData,message:i.ErrorMessages.InvalidReportDataMessage}},e.invalidPageData=function(){return{name:i.ErrorCodes.InvalidPageData,message:i.ErrorMessages.InvalidPageDataMessage}},e})();t.JsonFilterParserErrors=c})(t=r.jsonFilter||(r.jsonFilter={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){var t;!(function(t){var o,i=jsCommon.Utility,a=e.explore.viewModels.FilterCardConverter,n=e.explore.jsonFilter.constants;!(function(o){function s(e,o,a){var s=e.expression;s||i.throwException(t.JsonFilterParserErrors.fieldExpressionNotFound());var p,v,F=new c;if(a){var f=void 0;f=a.conditions(),f&&!_.isEmpty(f)&&1===f.length||i.throwException(t.JsonFilterParserErrors.invalidFilterCondition());var g=f[0];v=u.getAdvancedFilterExpression(g)}var h=e.type;if(null==h&&(h=r.FilterUtils.getDefaultFilterType(s,o,v?v.field:null)),v&&h===r.contracts.FilterType.Advanced){var E=v.field.accept(F),m=u.getAdvancedFilterLogicalOperator(v.logicalOperator),y=v.conditions.map((function(e){return u.getAdvancedFilterCondition(e)})),C=new l.AdvancedFilter(E,m,y);C||i.throwException(t.JsonFilterParserErrors.advancedFilterSerializationError()),p=C.toJSON()}else{var E=s.accept(F),x=a?d.getOperator(o,a,s):n.SelectAll,I=a?d.getValuesFromSQExpr(e,o,a):[],N=new l.BasicFilter(E,x,I);N||i.throwException(t.JsonFilterParserErrors.basicFilterSerializationError()),p=N.toJSON()}return p}var l=window["powerbi-models"];o.fromSemanticFilter=s;var d;!(function(r){function o(r,o,a){var d,u=r.expression,c=s(o,a,u);c&&(d=c.scopeIds),_.isEmpty(d)&&i.throwException(t.JsonFilterParserErrors.basicFilterSerializationError(n.ErrorMessages.FilterValuesNotFound));var p=[];if(u.hasGroupOnKeys(o)){var v=r.cachedValueItems;if(_.isEmpty(v)||v.length!==d.length)i.throwException(t.JsonFilterParserErrors.basicFilterSerializationError(n.ErrorMessages.FilterValuesNotFound));else for(var F=0,f=v;F<f.length;F++){var g=f[F];p.push(l(g))}}else for(var h=0,E=d;h<E.length;h++){var m=E[h],g=e.data.SQExprConverter.getFirstComparandValue(m);_.isDate(g)?p.push(g.toISOString()):p.push(g)}return p}function a(e,r,o){var a=s(e,r,o);return a?a.isNot?"NotIn":"In":void i.throwException(t.JsonFilterParserErrors.basicFilterOperatorNotFound())}function s(r,o,a){var n=a.getKeyColumns(r);return n||i.throwException(t.JsonFilterParserErrors.fieldExpressionNotFound()),e.data.SQExprConverter.asScopeIdsContainer(o,n)}function l(e){var r=e;return null===e?null:"string"==typeof e?e:r&&r.displayName?r.displayName:void i.throwException(t.JsonFilterParserErrors.invalidDataType("Unrecognized type of value: "+e))}r.getValuesFromSQExpr=o,r.getOperator=a})(d||(d={}));var u;!(function(e){function o(e){return a.createAdvFilter(e)}function n(e){switch(e){case 0:return"And";case 1:return"Or";case 2:return"And"}}function s(e){!r.viewModels.OperatorHelper.getValueRequired(e.operator)||e.value&&e.value.hasValue||i.throwException(t.JsonFilterParserErrors.filterConditionNotFound());var o;9===e.operator?o="Is":10===e.operator?o="IsNot":3===e.operator?o="GreaterThan":4===e.operator?o="GreaterThanOrEqual":1===e.operator?o="LessThan":2===e.operator?o="LessThanOrEqual":5===e.operator?o="Contains":6===e.operator?o="DoesNotContain":7===e.operator?o="StartsWith":8===e.operator?o="DoesNotStartWith":11===e.operator?o="IsBlank":12===e.operator?o="IsNotBlank":i.throwException(t.JsonFilterParserErrors.filterConditionNotFound());var a=e.value;return{operator:o,value:e.value.isDate?a.value.toISOString():a.value}}e.getAdvancedFilterExpression=o,e.getAdvancedFilterLogicalOperator=n,e.getAdvancedFilterCondition=s})(u||(u={}));var c=(function(e){function r(){e.apply(this,arguments)}return __extends(r,e),r.prototype.visitEntity=function(e){return{table:e.entity,column:null}},r.prototype.visitHierarchy=function(e){var r=e.arg.accept(this);return r?{table:r.table,hierarchy:e.hierarchy,hierarchyLevel:null}:null},r.prototype.visitColumnRef=function(e){var r=e.source.accept(this);return r?{table:r.table,column:e.ref}:null},r.prototype.visitMeasureRef=function(e){var r=e.source.accept(this);return r?{table:r.table,measure:e.ref}:null},r.prototype.visitHierarchyLevel=function(e){var r=e.arg.accept(this);return r?{table:r.table,hierarchy:r.hierarchy,hierarchyLevel:e.level}:null},r})(e.data.DefaultSQExprVisitor);o.SemanticFilterFieldVisitor=c})(o=t.JsonFilterBuilder||(t.JsonFilterBuilder={}))})(t=r.jsonFilter||(r.jsonFilter={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));;function loadReport(e,r,t,o,i,n){var s=jsCommon.QueryStringUtil.parseQueryString(),a=reportEmbedController.getEmbedMessageProxyService();if(!reportEmbedController)return void globalErrorService.error("Controller not initialized","Invalid setup");if(r&&(window.powerBIAccessToken=r),jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(window.powerBIAccessToken))return globalErrorService.error("powerbiToken parameter not specified","Invalid parameters"),void a.postErrorInvalidAccessToken();if(globalEmbedModeService.isAppTokenEmbed()&&(window.powerBIAppToken=r),!e&&(e=s.reportId,jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(e)))return globalErrorService.error("reportId parameter is not valid","Invalid parameters"),void a.postErrorInvalidReportId();var d=s.groupId;if(o||(o=s.pageName),t||(t=s.$filter),t)try{var l=powerbi.explore.odata.createODataFilterParser(),c=l.tryGetFilters(t);_.isEmpty(c)&&a.postErrorInvalidFilter()}catch(e){a.postErrorInvalidFilter(),t=""}return reportEmbedController.loadReport(e,d,t,void 0,o,i,n)}function setPage(e){return reportEmbedController?void reportEmbedController.setPage(e):void globalErrorService.error("Controller not initialized","Invalid setup")}var __extends=this&&this.__extends||function(e,r){function t(){this.constructor=e}for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o]);e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)},reportEmbedController,globalErrorService,globalWindowService,globalEmbedModeService,powerbi;!(function(e){var r;!(function(r){var t;!(function(r){function t(r,t){void 0===t&&(t=[]);var o=r[0].toLowerCase()+r.slice(1);t.push((function(t,o,i,n){return new e.explore.reportembed.directives[r](t,o,i,n)})),angular.module("powerbi.explore.reportembed").directive(o,t)}var o,i,n=["powerbi.common","ui.router","powerbi","powerbi.explore","powerbi.settings"];angular.module("powerbi.explore.reportembed",n).config(["$httpProvider",function(e){e.useApplyAsync(!0)}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,r,t){t.html5Mode(!0),r.otherwise("/reportEmbed"),e.state("reportEmbed",{url:"/reportEmbed?&unmin&reportId",templateUrl:"views/interactiveEmbed.html",reloadOnSearch:!1,controller:"ReportEmbedController"}).state("embedLive/live/report",{url:"/embedLive/live/report.html?unmin&key",templateUrl:"views/interactiveEmbed.html",reloadOnSearch:!1,controller:"ReportEmbedController"}).state("view",{url:"/view?unmin&key&r",templateUrl:"views/interactiveEmbed.html",reloadOnSearch:!1,controller:"ReportEmbedController"}).state("appTokenReportEmbed",{url:"/appTokenReportEmbed?unmin&reportid",templateUrl:"views/interactiveEmbed.html",reloadOnSearch:!1,controller:"ReportEmbedController"})}]).config(["telemetryServiceProvider",function(r){r.hostService=e.telemetry.createTelemetryHostService()}]).factory("explorationProxy",["promiseFactory","explorationSerializer","telemetryService","featureSwitchService",function(r,t,o,i){return e.explore.proxies.createExplorationProxy(r,e.common.httpService,t,o,i)}]).service("userServicePlanMetadata",["promiseFactory","featureSwitchService",function(t,o){return new r.services.UserServicePlanService(t,e.common.httpService,o)}]).service("clusterResolverService",["promiseFactory","telemetryService",function(t,o){return new r.services.ClusterResolverService(t,e.common.httpService,o)}]).service("reportEmbedExplorationService",["telemetryService","$rootScope","promiseFactory","explorationSerializer","embedModeService","editableFeatureSwitchService","featureSwitchService",function(t,o,i,n,s,a,d){var l="explore/reports";return window.getExplorationUrl&&(l=window.getExplorationUrl),new r.services.ReportEmbedExplorationService(i,e.common.httpService,o,t,n,s,a,d,l)}]).factory("groupService",(function(){return[]})).factory("contentPackService",(function(){return[]})).factory("reportService",(function(){return[]})).factory("dashboardService",(function(){return[]})).factory("workbookService",(function(){return[]})).factory("userNotificationInfo",(function(){return[]})).factory("modelService",(function(){return new e.dataServices.MockModelService})).factory("navigation",(function(){return new r.services.ReportEmbedNavigationService})).factory("fullScreen",["$rootScope","navigation","$document",function(r,t,o){return e.services.createFullScreenService(r,t,o)}]).factory("modelConverter",["telemetryService","errorService","visualPlugin","promiseFactory","geolocationService","dataServiceModelConverter","localizationService",function(r,t,o,i,n,s,a){return e.models.createModelConverter(r,t,o,i,n,s,a)}]).factory("licenseEnforcementService",(function(){return[]})).factory("userInfo",(function(){return[]})).factory("esriExploration",(function(){return new e.exploreui.services.MockEsriExplorationService})).factory("esri",["promiseFactory",function(r){return new e.MockEsriService(r)}]).factory("activeGroupId",(function(){return e.common.createEmbedActiveGroupIdService()})).factory("window-post-message-proxy",["$window",function(e){var r=e.window["http-post-message"].HttpPostMessage,t={processTrackingProperties:{addTrackingProperties:r.addTrackingProperties,getTrackingProperties:r.getTrackingProperties},suppressWarnings:!0};return new e.window["window-post-message-proxy"].WindowPostMessageProxy(t)}]).factory("powerbi-router",["$window","window-post-message-proxy",function(e,r){return new e.window["powerbi-router"].Router(r)}]).factory("http-post-message",["$window","window-post-message-proxy",function(e,r){return new e.window["http-post-message"].HttpPostMessage(e.window.parent,r)}]).run(["$location","$rootScope","scopedProvider","embedModeService",function(t,n,s,a){s.register("undoRedo",{fn:function(){return new e.explore.services.NoOpUndoRedoService}}).register("explorationCapabilities",{fn:function(){var r=t.search(),o="false"!==r.filterPaneEnabled,n="false"!==r.navContentPaneEnabled,s="true"===r.dynamicDisplayOption?0:void 0;i||(i=e.explore.services.createExplorationCapabilitiesService());var d=!a.isAnonymousLiveEmbed()&&o,l=a.isAnonymousLiveEmbed(),c=!a.isAnonymousLiveEmbed()&&n,p=!a.isAnonymousLiveEmbed(),u=a.isAnonymousLiveEmbed();return i.setCapabilities({customVisualsAlwaysEnabled:l,showAppBar:!1,showTaskPane:!0,showVisualizationPane:d,showNavContentPane:c,visualContainerOptions:{showMenu:p,showPin:!1,disablePin:!1},showBackButtonOnAppBar:!1,overrideDisplayOption:s,disableExport:u,disableLinguisticSchemaInitialization:!0,disableLogRTelemetry:!0,disableSaveOnKeyPress:!0}),i}}).register("eventBridge",{fn:function(){return o||(o=e.common.createEventBridge()),o}}).register("reportEmbedFilterService",{services:["$rootScope","promiseFactory","conceptualSchemaProxy"],scopedServices:["eventBridge"],fn:function(e,t,o,i){return new r.services.ReportEmbedFilterService(e,t,o,i)}}).register("embedMessageProxyService",{services:["$rootScope","$window","window-post-message-proxy","http-post-message","powerbi-router","embedModeService","conceptualSchemaProxy","promiseFactory","telemetryService"],scopedServices:["eventBridge","reportEmbedFilterService"],fn:function(e,t,o,i,n,s,a,d,l,c,p){return new r.services.ReportEmbedMessageProxyService(e,t,o,i,n,s,a,d,l,c,p)}}),e.explore.reportembed.notifyModelsAndExplorationReady=function(e){n.$emit(r.constants.modelsAndExplorationReadyEventName,e)},e.explore.reportembed.notifyConceptualSchemaReady=function(e){n.$emit(r.constants.conceptualSchemaReadyEventName,e)}}]).provider("dataReaderProvider",(function(){var t="explore/querydata";window.queryDataUrl&&(t=window.queryDataUrl);var o="explore/conceptualschema";window.getConceptualSchemaUrl&&(o=window.getConceptualSchemaUrl);var i=this;return i.$get=["promiseFactory","featureSwitchService","delayedQueryResultHandler","localizationService","telemetryService","$rootScope",function(n,s,a,d,l,c){var p=e.common.httpService,u={dsr:{name:"dsr",reader:function(r){return new e.data.dsr.DsrDataReader(r,i.executeSemanticQueryProxyCommunication||e.data.dsr.createExecuteSemanticQueryProxyHttpCommunication(p,l,n,t),a)},queryGenerator:function(){return e.data.dsr.createQueryGenerator()},schemaReader:function(){return e.data.dsr.createConceptualSchemaReader(n,l,r.services.createConceptualSchemaProxyHttpCommunication(e.common.httpService,n,s,o,c),e.data.dsr.ConceptualSchemaFactory.createLocOptions(d))}},bingNews:{name:"bingNews",reader:function(r){return new e.data.bingNews.BingNewsDataReader(r,p)}},bingSocialDataReader:{name:"bingSocialDataReader",reader:function(r){return new e.data.bingSocial.BingSocialDataReader(r,p)}}};return e.data.createDataReaderProvider(e.data.createDataReaderFactory(u),{promiseFactory:function(){return n}})}],i})).controller("ReportEmbedController",["$http","$scope","$rootScope","$window","promiseFactory","embedModeService","errorService","modelConverter","telemetryService","localizationService","$timeout","reportEmbedExplorationService","activeGroupId","userServicePlanMetadata","clusterResolverService","scopedProvider","featureSwitchService",function(e,t,o,i,n,s,a,d,l,c,p,u,v,m,g,f,y){globalErrorService=a,globalWindowService=i,globalEmbedModeService=s,f.attachTo(o);var h=f.find(o).get("embedMessageProxyService",o),b={embedModeService:s,errorService:a,modelConverter:d,telemetryService:l,$timeout:p,reportEmbedExplorationService:u,localizationService:c,activeGroupIdService:v,userServicePlanMetadata:m,clusterResolverService:g,promiseFactory:n,windowService:i,scopedProvider:f,featureSwitchService:y,embedMessageProxyService:h};return reportEmbedController=new r.controllers.ReportEmbedController(o,b),window.isReportControllerInitialized=!0,h.startListening(),window.isLoadReportMessagePending?(loadReport(window.reportObjectId,window.accessToken,window.oDataFilter,window.pageName,window.loadSettings),window.isLoadReportMessagePending=!1):s.isAnonymousLiveEmbed()&&loadReport("any","any",void 0),reportEmbedController}]),e.common.registerPBICommonBuildingBlocksForHost(e.common.HostEnv.ExploreHost),e.visualHost.registerBuildingBlocksForHost(e.common.HostEnv.ExploreHost),e.registerBuildingBlocksForHost(e.common.HostEnv.ExploreHost),e.explore.registerBuildingBlocksForHost(e.common.HostEnv.ExploreHost),r.registerReportEmbedDirective=t})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){r.EmbedCustomerAction=function(r,t,o,i,n,s,a,d,l,c,p,u,v){void 0===s&&(s=!1),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0);var m={reportId:r,embedType:t,embedUrl:o,referrer:i,parentId:n,isError:s,errorSource:a,errorCode:d,errorMessage:l,activityName:c,activityId:p,isDebug:u,isCancelled:v},g={name:"EmbedCustomerAction",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={reportId:m.reportId,embedType:m.embedType,embedUrl:m.embedUrl,referrer:m.referrer,parentId:m.parentId,isError:m.isError};return"undefined"!=typeof m.errorSource&&(r.errorSource=e.telemetry.ErrorSource[m.errorSource]),"undefined"!=typeof m.errorCode&&(r.errorCode=m.errorCode),"undefined"!=typeof m.errorMessage&&(r.errorMessage=m.errorMessage),"undefined"!=typeof m.activityName&&(r.activityName=m.activityName),"undefined"!=typeof m.activityId&&(r.activityId=m.activityId),"undefined"!=typeof m.isDebug&&(r.isDebug=m.isDebug),"undefined"!=typeof m.isCancelled&&(r.isCancelled=m.isCancelled),r},info:m,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.EmbedCustomerActionLoggers&&(g.loggers=e.telemetry.EmbedCustomerActionLoggers),g},r.EmbedSDKCustomerAction=function(r,t,o,i,n,s,a,d,l,c,p,u){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={requestId:r,reportId:t,embedType:o,parentId:i,isError:n,errorSource:s,errorCode:a,errorMessage:d,activityName:l,activityId:c,isDebug:p,isCancelled:u},m={name:"EmbedSDKCustomerAction",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={requestId:v.requestId,reportId:v.reportId,embedType:v.embedType,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(r.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(r.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(r.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(r.activityName=v.activityName),"undefined"!=typeof v.activityId&&(r.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(r.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(r.isCancelled=v.isCancelled),r},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.EmbedSDKCustomerActionLoggers&&(m.loggers=e.telemetry.EmbedSDKCustomerActionLoggers),m},r.ReportEmbedLoadEmbeddedReport=function(r,t,o,i,n,s,a,d,l,c,p,u,v){void 0===s&&(s=!1),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0);var m={reportId:r,embedType:t,embedUrl:o,referrer:i,parentId:n,isError:s,errorSource:a,errorCode:d,errorMessage:l,activityName:c,activityId:p,isDebug:u,isCancelled:v},g={name:"PBI.ReportEmbed.LoadEmbeddedReport",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={reportId:m.reportId,embedType:m.embedType,embedUrl:m.embedUrl,referrer:m.referrer,parentId:m.parentId,isError:m.isError};return"undefined"!=typeof m.errorSource&&(r.errorSource=e.telemetry.ErrorSource[m.errorSource]),"undefined"!=typeof m.errorCode&&(r.errorCode=m.errorCode),"undefined"!=typeof m.errorMessage&&(r.errorMessage=m.errorMessage),"undefined"!=typeof m.activityName&&(r.activityName=m.activityName),"undefined"!=typeof m.activityId&&(r.activityId=m.activityId),"undefined"!=typeof m.isDebug&&(r.isDebug=m.isDebug),"undefined"!=typeof m.isCancelled&&(r.isCancelled=m.isCancelled),r},info:m,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedLoadEmbeddedReportLoggers&&(g.loggers=e.telemetry.ReportEmbedLoadEmbeddedReportLoggers),g},r.ReportEmbedGetExplorationAndModel=function(r,t,o,i,n,s,a,d,l,c,p,u,v,m,g,f){void 0===l&&(l=!1),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===m&&(m=void 0),void 0===g&&(g=void 0),void 0===f&&(f=void 0);var y={endPoint:r,clientAndServerRequestIdMatch:t,responseRequestId:o,reportId:i,embedType:n,embedUrl:s,referrer:a,parentId:d,isError:l,errorSource:c,errorCode:p,errorMessage:u,activityName:v,activityId:m,isDebug:g,isCancelled:f},h={name:"PBI.ReportEmbed.GetExplorationAndModel",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={endPoint:y.endPoint,clientAndServerRequestIdMatch:y.clientAndServerRequestIdMatch,responseRequestId:y.responseRequestId,reportId:y.reportId,embedType:y.embedType,embedUrl:y.embedUrl,referrer:y.referrer,parentId:y.parentId,isError:y.isError};return"undefined"!=typeof y.errorSource&&(r.errorSource=e.telemetry.ErrorSource[y.errorSource]),"undefined"!=typeof y.errorCode&&(r.errorCode=y.errorCode),"undefined"!=typeof y.errorMessage&&(r.errorMessage=y.errorMessage),"undefined"!=typeof y.activityName&&(r.activityName=y.activityName),"undefined"!=typeof y.activityId&&(r.activityId=y.activityId),"undefined"!=typeof y.isDebug&&(r.isDebug=y.isDebug),"undefined"!=typeof y.isCancelled&&(r.isCancelled=y.isCancelled),r},info:y,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedGetExplorationAndModelLoggers&&(h.loggers=e.telemetry.ReportEmbedGetExplorationAndModelLoggers),h},r.ReportEmbedLoadingStarted=function(r,t,o,i,n,s,a,d,l,c,p,u,v){void 0===s&&(s=!1),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0);var m={reportId:r,embedType:t,embedUrl:o,referrer:i,parentId:n,isError:s,errorSource:a,errorCode:d,errorMessage:l,activityName:c,activityId:p,isDebug:u,isCancelled:v},g={name:"PBI.ReportEmbed.LoadingStarted",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={reportId:m.reportId,embedType:m.embedType,embedUrl:m.embedUrl,referrer:m.referrer,parentId:m.parentId,isError:m.isError};return"undefined"!=typeof m.errorSource&&(r.errorSource=e.telemetry.ErrorSource[m.errorSource]),"undefined"!=typeof m.errorCode&&(r.errorCode=m.errorCode),"undefined"!=typeof m.errorMessage&&(r.errorMessage=m.errorMessage),"undefined"!=typeof m.activityName&&(r.activityName=m.activityName),"undefined"!=typeof m.activityId&&(r.activityId=m.activityId),"undefined"!=typeof m.isDebug&&(r.isDebug=m.isDebug),"undefined"!=typeof m.isCancelled&&(r.isCancelled=m.isCancelled),r},info:m,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedLoadingStartedLoggers&&(g.loggers=e.telemetry.ReportEmbedLoadingStartedLoggers),g},r.ReportEmbedPageLoaded=function(r,t,o,i,n,s,a,d,l,c,p,u,v){void 0===s&&(s=!1),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0);var m={reportId:r,embedType:t,embedUrl:o,referrer:i,parentId:n,isError:s,errorSource:a,errorCode:d,errorMessage:l,activityName:c,activityId:p,isDebug:u,isCancelled:v},g={name:"PBI.ReportEmbed.PageLoaded",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={reportId:m.reportId,embedType:m.embedType,embedUrl:m.embedUrl,referrer:m.referrer,parentId:m.parentId,isError:m.isError};return"undefined"!=typeof m.errorSource&&(r.errorSource=e.telemetry.ErrorSource[m.errorSource]),"undefined"!=typeof m.errorCode&&(r.errorCode=m.errorCode),"undefined"!=typeof m.errorMessage&&(r.errorMessage=m.errorMessage),"undefined"!=typeof m.activityName&&(r.activityName=m.activityName),"undefined"!=typeof m.activityId&&(r.activityId=m.activityId),"undefined"!=typeof m.isDebug&&(r.isDebug=m.isDebug),"undefined"!=typeof m.isCancelled&&(r.isCancelled=m.isCancelled),r},info:m,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedPageLoadedLoggers&&(g.loggers=e.telemetry.ReportEmbedPageLoadedLoggers),g},r.ReportEmbedScriptLoaded=function(r,t,o,i,n,s,a,d,l,c,p,u,v){void 0===s&&(s=!1),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0);var m={reportId:r,embedType:t,embedUrl:o,referrer:i,parentId:n,isError:s,errorSource:a,errorCode:d,errorMessage:l,activityName:c,activityId:p,isDebug:u,isCancelled:v},g={name:"PBI.ReportEmbed.ScriptLoaded",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={reportId:m.reportId,embedType:m.embedType,embedUrl:m.embedUrl,referrer:m.referrer,parentId:m.parentId,isError:m.isError};return"undefined"!=typeof m.errorSource&&(r.errorSource=e.telemetry.ErrorSource[m.errorSource]),"undefined"!=typeof m.errorCode&&(r.errorCode=m.errorCode),"undefined"!=typeof m.errorMessage&&(r.errorMessage=m.errorMessage),"undefined"!=typeof m.activityName&&(r.activityName=m.activityName),"undefined"!=typeof m.activityId&&(r.activityId=m.activityId),"undefined"!=typeof m.isDebug&&(r.isDebug=m.isDebug),"undefined"!=typeof m.isCancelled&&(r.isCancelled=m.isCancelled),r},info:m,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedScriptLoadedLoggers&&(g.loggers=e.telemetry.ReportEmbedScriptLoadedLoggers),g},r.ReportEmbedEnterFullScreen=function(r,t,o,i,n,s,a,d,l){void 0===t&&(t=!1),void 0===o&&(o=void 0),void 0===i&&(i=void 0),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0);var c={parentId:r,isError:t,errorSource:o,errorCode:i,errorMessage:n,activityName:s,activityId:a,isDebug:d,isCancelled:l},p={name:"PBI.ReportEmbed.EnterFullScreen",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={parentId:c.parentId,isError:c.isError};return"undefined"!=typeof c.errorSource&&(r.errorSource=e.telemetry.ErrorSource[c.errorSource]),"undefined"!=typeof c.errorCode&&(r.errorCode=c.errorCode),"undefined"!=typeof c.errorMessage&&(r.errorMessage=c.errorMessage),"undefined"!=typeof c.activityName&&(r.activityName=c.activityName),"undefined"!=typeof c.activityId&&(r.activityId=c.activityId),"undefined"!=typeof c.isDebug&&(r.isDebug=c.isDebug),"undefined"!=typeof c.isCancelled&&(r.isCancelled=c.isCancelled),r},info:c,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedEnterFullScreenLoggers&&(p.loggers=e.telemetry.ReportEmbedEnterFullScreenLoggers),p},r.ReportEmbedInvalidReportResourceKey=function(r){var t={message:r},o={name:"PBI.ReportEmbed.InvalidReportResourceKey",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={message:t.message};return e},info:t,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedInvalidReportResourceKeyLoggers&&(o.loggers=e.telemetry.ReportEmbedInvalidReportResourceKeyLoggers),o},r.ReportEmbedClusterResolved=function(r,t,o,i,n,s,a,d,l,c,p){void 0===t&&(t=void 0),void 0===i&&(i=!1),void 0===n&&(n=void 0),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0);var u={IsResolvedDuringScriptLoad:r,backendUrl:t,parentId:o,isError:i,errorSource:n,errorCode:s,errorMessage:a,activityName:d,activityId:l,isDebug:c,isCancelled:p},v={name:"PBI.ReportEmbed.ClusterResolved",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={IsResolvedDuringScriptLoad:u.IsResolvedDuringScriptLoad,parentId:u.parentId,isError:u.isError};return"undefined"!=typeof u.backendUrl&&(r.backendUrl=u.backendUrl),"undefined"!=typeof u.errorSource&&(r.errorSource=e.telemetry.ErrorSource[u.errorSource]),"undefined"!=typeof u.errorCode&&(r.errorCode=u.errorCode),"undefined"!=typeof u.errorMessage&&(r.errorMessage=u.errorMessage),"undefined"!=typeof u.activityName&&(r.activityName=u.activityName),"undefined"!=typeof u.activityId&&(r.activityId=u.activityId),"undefined"!=typeof u.isDebug&&(r.isDebug=u.isDebug),"undefined"!=typeof u.isCancelled&&(r.isCancelled=u.isCancelled),r},info:u,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedClusterResolvedLoggers&&(v.loggers=e.telemetry.ReportEmbedClusterResolvedLoggers),v},r.ReportEmbedSwitchPage=function(r,t,o,i,n,s,a,d,l,c,p,u){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={embedType:r,embedUrl:t,referrer:o,parentId:i,isError:n,errorSource:s,errorCode:a,errorMessage:d,activityName:l,activityId:c,isDebug:p,isCancelled:u},m={name:"PBI.ReportEmbed.SwitchPage",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={embedType:v.embedType,embedUrl:v.embedUrl,referrer:v.referrer,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(r.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(r.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(r.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(r.activityName=v.activityName),"undefined"!=typeof v.activityId&&(r.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(r.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(r.isCancelled=v.isCancelled),r},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedSwitchPageLoggers&&(m.loggers=e.telemetry.ReportEmbedSwitchPageLoggers),m},r.ReportEmbedSocialSharing=function(r,t,o,i,n,s,a,d,l,c,p,u,v,m){void 0===r&&(r=void 0),void 0===a&&(a=!1),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0),void 0===v&&(v=void 0),void 0===m&&(m=void 0);var g={platformUrl:r,reportId:t,embedType:o,embedUrl:i,referrer:n,parentId:s,isError:a,errorSource:d,errorCode:l,errorMessage:c,activityName:p,activityId:u,isDebug:v,isCancelled:m},f={name:"PBI.ReportEmbed.SocialSharing",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={reportId:g.reportId,embedType:g.embedType,embedUrl:g.embedUrl,referrer:g.referrer,parentId:g.parentId,isError:g.isError};return"undefined"!=typeof g.platformUrl&&(r.platformUrl=g.platformUrl),"undefined"!=typeof g.errorSource&&(r.errorSource=e.telemetry.ErrorSource[g.errorSource]),"undefined"!=typeof g.errorCode&&(r.errorCode=g.errorCode),"undefined"!=typeof g.errorMessage&&(r.errorMessage=g.errorMessage),"undefined"!=typeof g.activityName&&(r.activityName=g.activityName),"undefined"!=typeof g.activityId&&(r.activityId=g.activityId),"undefined"!=typeof g.isDebug&&(r.isDebug=g.isDebug),"undefined"!=typeof g.isCancelled&&(r.isCancelled=g.isCancelled),r},info:g,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedSocialSharingLoggers&&(f.loggers=e.telemetry.ReportEmbedSocialSharingLoggers),f},r.ReportEmbedSDKLoadReport=function(r,t,o,i,n,s,a,d,l,c,p,u){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={requestId:r,reportId:t,embedType:o,parentId:i,isError:n,errorSource:s,errorCode:a,errorMessage:d,activityName:l,activityId:c,isDebug:p,isCancelled:u},m={name:"PBI.ReportEmbed.SDK.LoadReport",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={requestId:v.requestId,reportId:v.reportId,embedType:v.embedType,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(r.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(r.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(r.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(r.activityName=v.activityName),"undefined"!=typeof v.activityId&&(r.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(r.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(r.isCancelled=v.isCancelled),r},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedSDKLoadReportLoggers&&(m.loggers=e.telemetry.ReportEmbedSDKLoadReportLoggers),m},r.ReportEmbedSDKSetActivePage=function(r,t,o,i,n,s,a,d,l,c,p,u){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={requestId:r,reportId:t,embedType:o,parentId:i,isError:n,errorSource:s,errorCode:a,errorMessage:d,activityName:l,activityId:c,isDebug:p,isCancelled:u},m={name:"PBI.ReportEmbed.SDK.SetActivePage",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={requestId:v.requestId,reportId:v.reportId,embedType:v.embedType,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(r.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(r.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(r.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(r.activityName=v.activityName),"undefined"!=typeof v.activityId&&(r.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(r.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(r.isCancelled=v.isCancelled),r},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedSDKSetActivePageLoggers&&(m.loggers=e.telemetry.ReportEmbedSDKSetActivePageLoggers),m},r.ReportEmbedSDKGetAllPages=function(r,t,o,i,n,s,a,d,l,c,p,u){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={requestId:r,reportId:t,embedType:o,parentId:i,isError:n,errorSource:s,errorCode:a,errorMessage:d,activityName:l,activityId:c,isDebug:p,isCancelled:u},m={name:"PBI.ReportEmbed.SDK.GetAllPages",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={requestId:v.requestId,reportId:v.reportId,embedType:v.embedType,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(r.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(r.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(r.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(r.activityName=v.activityName),"undefined"!=typeof v.activityId&&(r.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(r.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(r.isCancelled=v.isCancelled),r},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedSDKGetAllPagesLoggers&&(m.loggers=e.telemetry.ReportEmbedSDKGetAllPagesLoggers),m},r.ReportEmbedSDKSetReportLevelFilters=function(r,t,o,i,n,s,a,d,l,c,p,u){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={requestId:r,reportId:t,embedType:o,parentId:i,isError:n,errorSource:s,errorCode:a,errorMessage:d,activityName:l,activityId:c,isDebug:p,isCancelled:u},m={name:"PBI.ReportEmbed.SDK.SetReportLevelFilters",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={requestId:v.requestId,reportId:v.reportId,embedType:v.embedType,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(r.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(r.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(r.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(r.activityName=v.activityName),"undefined"!=typeof v.activityId&&(r.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(r.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(r.isCancelled=v.isCancelled),r},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedSDKSetReportLevelFiltersLoggers&&(m.loggers=e.telemetry.ReportEmbedSDKSetReportLevelFiltersLoggers),m},r.ReportEmbedSDKGetReportLevelFilters=function(r,t,o,i,n,s,a,d,l,c,p,u){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={requestId:r,reportId:t,embedType:o,parentId:i,isError:n,errorSource:s,errorCode:a,errorMessage:d,activityName:l,activityId:c,isDebug:p,isCancelled:u},m={name:"PBI.ReportEmbed.SDK.GetReportLevelFilters",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={requestId:v.requestId,reportId:v.reportId,embedType:v.embedType,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(r.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(r.errorCode=v.errorCode),
"undefined"!=typeof v.errorMessage&&(r.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(r.activityName=v.activityName),"undefined"!=typeof v.activityId&&(r.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(r.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(r.isCancelled=v.isCancelled),r},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedSDKGetReportLevelFiltersLoggers&&(m.loggers=e.telemetry.ReportEmbedSDKGetReportLevelFiltersLoggers),m},r.ReportEmbedSDKSetPageLevelFilters=function(r,t,o,i,n,s,a,d,l,c,p,u){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={requestId:r,reportId:t,embedType:o,parentId:i,isError:n,errorSource:s,errorCode:a,errorMessage:d,activityName:l,activityId:c,isDebug:p,isCancelled:u},m={name:"PBI.ReportEmbed.SDK.SetPageLevelFilters",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={requestId:v.requestId,reportId:v.reportId,embedType:v.embedType,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(r.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(r.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(r.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(r.activityName=v.activityName),"undefined"!=typeof v.activityId&&(r.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(r.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(r.isCancelled=v.isCancelled),r},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedSDKSetPageLevelFiltersLoggers&&(m.loggers=e.telemetry.ReportEmbedSDKSetPageLevelFiltersLoggers),m},r.ReportEmbedSDKGetPageLevelFilters=function(r,t,o,i,n,s,a,d,l,c,p,u){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={requestId:r,reportId:t,embedType:o,parentId:i,isError:n,errorSource:s,errorCode:a,errorMessage:d,activityName:l,activityId:c,isDebug:p,isCancelled:u},m={name:"PBI.ReportEmbed.SDK.GetPageLevelFilters",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={requestId:v.requestId,reportId:v.reportId,embedType:v.embedType,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(r.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(r.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(r.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(r.activityName=v.activityName),"undefined"!=typeof v.activityId&&(r.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(r.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(r.isCancelled=v.isCancelled),r},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedSDKGetPageLevelFiltersLoggers&&(m.loggers=e.telemetry.ReportEmbedSDKGetPageLevelFiltersLoggers),m},r.ReportEmbedSDKUpdateSettings=function(r,t,o,i,n,s,a,d,l,c,p,u){void 0===n&&(n=!1),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===d&&(d=void 0),void 0===l&&(l=void 0),void 0===c&&(c=void 0),void 0===p&&(p=void 0),void 0===u&&(u=void 0);var v={requestId:r,reportId:t,embedType:o,parentId:i,isError:n,errorSource:s,errorCode:a,errorMessage:d,activityName:l,activityId:c,isDebug:p,isCancelled:u},m={name:"PBI.ReportEmbed.SDK.UpdateSettings",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var r={requestId:v.requestId,reportId:v.reportId,embedType:v.embedType,parentId:v.parentId,isError:v.isError};return"undefined"!=typeof v.errorSource&&(r.errorSource=e.telemetry.ErrorSource[v.errorSource]),"undefined"!=typeof v.errorCode&&(r.errorCode=v.errorCode),"undefined"!=typeof v.errorMessage&&(r.errorMessage=v.errorMessage),"undefined"!=typeof v.activityName&&(r.activityName=v.activityName),"undefined"!=typeof v.activityId&&(r.activityId=v.activityId),"undefined"!=typeof v.isDebug&&(r.isDebug=v.isDebug),"undefined"!=typeof v.isCancelled&&(r.isCancelled=v.isCancelled),r},info:v,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedSDKUpdateSettingsLoggers&&(m.loggers=e.telemetry.ReportEmbedSDKUpdateSettingsLoggers),m},r.ReportEmbedSDKError=function(r,t,o,i){var n={requestId:r,reportId:t,embedType:o,message:i},s={name:"PBI.ReportEmbed.SDK.Error",category:e.TelemetryCategory.CriticalError,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var e={requestId:n.requestId,reportId:n.reportId,embedType:n.embedType,message:n.message};return e},info:n,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ReportEmbedSDKErrorLoggers&&(s.loggers=e.telemetry.ReportEmbedSDKErrorLoggers),s}})(r=e.telemetry||(e.telemetry={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(e){var r;!(function(e){var r;!(function(e){e.reportLoadUrl="/report/load",e.loadReport="loadReport",e.error="error",e.minimumReportDataRefreshIntervalInMinutes=1,e.defaultId="defaultId",e.FilterLevel="page",e.reportPageLoaded="reportPageLoaded",e.modelsAndExplorationReadyEventName="modelsAndExplorationReady",e.conceptualSchemaReadyEventName="conceptualSchemaReady",e.showSocialSharingOverlayEventName="showSocialSharingOverlay";var r;!(function(e){e.POST="POST"})(r=e.HttpMethods||(e.HttpMethods={}));var t;!(function(e){e.getAllPagesFailed="Could not get all pages",e.invalidPageName="Invalid page name",e.setPageFailed="Could not set a page",e.loadReportFailed="Could not load a report",e.setFilterFailed="Could not add a filter",e.clearAllFiltersFailed="Could not clear all filters",e.invalidFilter="Invalid filter definition",e.filtersSerializationError="Could not serialize filters to json syntax.",e.updateSettingsFailed="Error occurred while updating settings.",e.routeNotFound="Not Found. Url: {0} was not found.",e.publishToWebNotSupported="This feature is not supported for Publish To Web.",e.tooManyRefreshRequests="Report refresh limit of one request every {0} seconds reached. Please try again later."})(t=e.ErrorMessages||(e.ErrorMessages={}));var o;!(function(e){e.reportLoadFailed="LoadReportFailed",e.notFound="ReportNotFound",e.filterError="filterError",e.missingReportId="InvalidOrNoReportId",e.missingAccessToken="InvalidOrNoPowerBIAccessToken"})(o=e.ErrorCodes||(e.ErrorCodes={}));var i;!(function(e){e.loadReportUIDMissingWarning="Warning: Received load report message that does not contain uid in request headers.Update your load message with the uid, otherwise emitted events will not contain uid associated with that report."})(i=e.WarningMessages||(e.WarningMessages={}));var n;!(function(e){e.OK=200,e.Accepted=202,e.BadRequest=400,e.NotFound=404,e.TooManyRequests=429,e.InternalServerError=500})(n=e.StatusCodes||(e.StatusCodes={}));var s;!(function(e){e.Loading="#Loading#",e.Error="#Error#"})(s=e.ModelsAndExplorationState||(e.ModelsAndExplorationState={}));var a;!(function(e){e.Loading="#Loading#",e.Error="#Error#"})(a=e.ConceptualSchemaState||(e.ConceptualSchemaState={}));var d;!(function(e){e.maxWidthMobileUI=480,e.maxHeightMobileUI=338,e.maxSizeTabletUI=768})(d=e.CssStyles||(e.CssStyles={}));var l;!(function(e){e.refreshFrequencyInSeconds=15})(l=e.ThrottlingLimits||(e.ThrottlingLimits={}))})(r=e.constants||(e.constants={}))})(r=e.reportembed||(e.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){var t;!(function(r){var t;!(function(r){var t=e.helpers.ClusterLocationHelper,o="https://go.microsoft.com/fwlink/?LinkID=620319",i="https://go.microsoft.com/fwlink/?LinkID=722383&clcid=0x409",n=(function(){function r(r,t,o){var i=this;void 0===o&&(o=navigator.userAgent),this.scope=r,this.services=t,this.userAgent=o,this.scope.showAboutDialog=function(){return i.showAboutDialog()},this.scope.useTitleForAnchor=function(){return i.useTitleForAnchor()},this.scope.showFlag=t.embedModeService.isAnonymousLiveEmbed(),this.scope.showFullScreen=t.embedModeService.isAnonymousLiveEmbed(),this.setEmailLink(),this.setPowerBILink(),this.scope.toggleFullScreenMode=function(){var r=document,t=i.services.fullScreen.fullScreenModeSupported&&(r.fullscreenEnabled||r.webkitFullscreenEnabled||r.mozFullScreenEnabled||r.msFullscreenEnabled);t&&(i.services.fullScreen.fullScreenMode=!i.services.fullScreen.fullScreenMode,i.services.fullScreen.fullScreenMode&&i.services.telemetryService.logEvent(e.telemetry.ReportEmbedEnterFullScreen))},this.scope.isFullScreen=function(){return i.services.fullScreen.fullScreenMode},this.scope.socialSharingFeatureEnabled=this.services.embedModeService.isAnonymousLiveEmbed()&&this.services.featureSwitchService.featureSwitches.socialSharingEnabled}return r.createOptions=function(){return{additionalServices:["embedModeService","errorService","localizationService","telemetryService","fullScreen","featureSwitchService"]}},r.prototype.showAboutDialog=function(){var r=this.services.errorService.control(),t=this.getFormattedDialogTemplate();if(e.build){var o=[new InJs.ModalDialogAction(this.services.localizationService.get("ReportEmbed_PrivacyPolicy"),function(e,r){window.open("https://go.microsoft.com/fwlink/?LinkId=248681","_blank")}),new InJs.ModalDialogAction(this.services.localizationService.get("ReportEmbed_Close"),function(e,t){r.hideDialog()})],i=t.replace("{{version}}",e.build);r.showCustomDialog(null,$(i),o,null,!0,!0,"","small")}},r.prototype.getFormattedDialogTemplate=function(){var e,o=this;return this.services.localizationService.ensureLocalization((function(){var i=new Date;if(e=jsCommon.StringExtensions.format(r.InnerAboutDialogTemplate,o.services.localizationService.get("TopNav_PowerBILogoTextNoPreview"),o.services.localizationService.format("PowerBI_Copyright_Text",[i.getFullYear().toString()]),o.services.localizationService.get("PowerBI_Build_Version_Text"),o.services.localizationService.get("AdditionalErrorInfo_ActivityIdText"),o.services.telemetryService.sessionId,o.services.localizationService.get("AdditionalErrorInfo_TimestampText"),i.toString()),!o.services.embedModeService.isAnonymousLiveEmbed()){var n=t.getClusterLocation(clusterUri,o.services.localizationService);e+=r.TemplateLocationString,e=jsCommon.StringExtensions.format(e,o.services.localizationService.get("AdditionalErrorInfo_DataLocationText"),n)}e+=r.TemplateClosingString})),e},r.prototype.setEmailLink=function(){var e="mailto:pbicontentconcern@microsoft.com?subject=Inappropriate%20Content&body=(Fill%20in%20the%20reason%20for%20your%20concern%20below)%0A%0APower%20BI%20Team%2C%0AI%20am%20reporting%20a%20concern%20with%20content%20linked%20below.%0A%0A%3CProvide%20your%20reason%3E%0A%0AURL%20to%20embedded%20content%3A%0A%7B%7BembedUrl%7D%7D%0A%0A---------------------%0AWe%20aim%20to%20review%20all%20concerns%20within%2048%20hours.%20We%20will%20contact%20you%20if%20we%20have%20additional%20questions%20related%20to%20your%20concern.",r=window.location.href;this.scope.linkToShare=r,this.scope.mailToLink=e.replace("%7B%7BembedUrl%7D%7D",encodeURIComponent(r))},r.prototype.setPowerBILink=function(){this.services.embedModeService.isAnonymousLiveEmbed()?this.scope.powerbiLink=i:this.scope.powerbiLink=o},r.prototype.useTitleForAnchor=function(){var e=this.userAgent.toLowerCase();return e.indexOf(" edge/")>-1},r.InnerAboutDialogTemplate='<div class="aboutDialog"><div class="dialogIcon"><i class= "glyphicon pbi-glyph-powerbi icon"> </i></div><div class="info"><div class="title">{0}</div><div class="copyright">&copy;{1}</div><span class="field">{2}</span><span class="value">{{version}}</span><br><span class="field">{3}</span><span class="value">{4}</span><br><span class="field">{5}</span><span class="value">{6}</span>',r.TemplateLocationString='<br><span class="field">{0}</span><span class="value">{1}</span>',r.TemplateClosingString="</div></div>",r})();r.LogoBarController=n})(t=r.controllers||(r.controllers={}))})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){var t;!(function(t){var o;!(function(t){var o=(function(){function t(r,t){var o=this;this.scope=r,this.services=t,this.scope.showOverlay=!1,this.scope.currentPageNumber=0,this.scope.toggleOverlay=function(){return o.toggleOverlay()},this.scope.navigationPreviousPage=function(){return o.navigationPreviousPage()},this.scope.navigationNextPage=function(){return o.navigationNextPage()},this.scope.goToSection=function(e){return o.goToSection(e)},this.scope.socialSharingFeatureEnabled=t.embedModeService.isAnonymousLiveEmbed()&&this.services.featureSwitchService.featureSwitches.socialSharingEnabled,r.reportEmbedExplorationService=this.services.reportEmbedExplorationService,r.$watch("reportEmbedExplorationService.exploration.sections",(function(e){_.isArray(e)&&(r.allPagesCount=e.length,r.sections=e.map((function(e){return e.displayName})))})),r.$watch("reportEmbedExplorationService.exploration.activeSectionIndex",(function(e){_.isNumber(e)&&(r.currentPageNumber=e||0)}));var i=r.$on(e.explore.reportembed.constants.showSocialSharingOverlayEventName,(function(e,r){o.setHidePageNavigationFlyout(r)}));r.$on(e.common.constants.scopeDestroyEventName,(function(){i()}))}return t.createOptions=function(){return{additionalServices:["reportEmbedExplorationService","embedModeService","featureSwitchService"]}},t.prototype.setHidePageNavigationFlyout=function(e){this.scope.hidePageNavigationFlyout=e},t.prototype.toggleOverlay=function(){this.showPageNavigation()&&(this.scope.showOverlay=!this.scope.showOverlay)},t.prototype.navigationPreviousPage=function(){this.scope.$emit(e.explore.constants.explorationPreviousPageEvent),this.scope.currentPageNumber>0&&(this.scope.currentPageNumber-=1)},t.prototype.navigationNextPage=function(){this.scope.$emit(e.explore.constants.explorationNextPageEvent),this.scope.currentPageNumber<this.scope.allPagesCount-1&&(this.scope.currentPageNumber+=1)},t.prototype.goToSection=function(e){e>=0&&e<this.scope.allPagesCount&&(this.scope.$emit(r.constants.switchSectionEvent,e),this.scope.currentPageNumber=e,this.toggleOverlay())},t.prototype.showPageNavigation=function(){return this.scope.allPagesCount>1||this.scope.isSmallScreen},t})();t.LogoBarNavigationController=o})(o=t.controllers||(t.controllers={}))})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){var t;!(function(t){var o;!(function(o){var i=e.common.events,n=e.common.contracts,s=e.explore.viewModels,a=e.errorDetailsHelper,d=e.explore.reportembed.constants,l=(function(){function o(r,o){var i=this;this.scope=r,this.scope.showErrorMessage=!1,this.services=o,this.report={permissions:n.Permissions.Read,hasExploration:!0},this.windowMessageHelper=t.getHostCommunicationHelper(this.services.windowService),this.scope.exploreContainer=s.ViewModelFactory.createExplorationContainer(),this.scope.$on(e.constants.openReportFinished,(function(e,r,t){if(t){if(i.getEmbedMessageProxyService().isEmbedMessageProxyServiceUsed()||i.windowMessageHelper.postErrorLoadReportFailed(),i.pageLoadedEvent){var o=i.prepareEmbedTelemetryErrorDetails(r);i.pageLoadedEvent.reject(o)}}else i.getEmbedMessageProxyService().isEmbedMessageProxyServiceUsed()||i.windowMessageHelper.postReportLoadMessageToParent(),i.pageLoadedEvent&&i.pageLoadedEvent.resolve(),i.services.embedModeService.isAnonymousLiveEmbed()&&i.refreshEnabled&&setInterval((function(){return i.refreshReportData()}),60*i.refreshIntervalInMinutes*1e3)})),this.embedType=this.services.embedModeService.getEmbedTypeDescription(),this.embedUrl=this.services.embedModeService.getPublicEmbedUrl(),this.embedReferrer=this.services.embedModeService.getPublicEmbedReferrer(),this.scope.canvasOptions={autoLayoutVisualPadding:0,scrollbarOffset:0},this.services.embedMessageProxyService.setupController(this)}return o.prototype.loadReport=function(r,o,i,n,s,a,d){var l,c=this,p=this.services.promiseFactory.defer(),u=this.services.embedModeService.isAnonymousLiveEmbed(),v=this.services.promiseFactory.resolve(r);return u&&(v=this.resolveReportIdForAnonymousEmbed(n)),v.then((function(o){r=o,c.fireLoadReportStartUpTelemetry(r),l=c.services.telemetryService.startEvent(e.telemetry.ReportEmbedLoadEmbeddedReport,r,c.embedType,c.embedUrl,c.embedReferrer),c.loadPowerViewReportEventEmitted=!1,c.pageName=s,c.checkAndUpdateExplorationCapabilities(a),u?(c.scope.showLogoBar=!0,c.loadReportForAnonymous(l,r).then((function(){p.resolve(null)})).catch((function(e){p.reject(e)}))):c.services.embedModeService.isAppTokenEmbed()?(c.scope.showLogoBar=!1,c.additionalODataFilter=i,c.additionalJsonFilters=d,c.loadReportForAppToken(l,r).then((function(){p.resolve(null)})).catch((function(e){p.reject(e)}))):(c.additionalODataFilter=i,c.additionalJsonFilters=d,c.services.clusterResolverService.getClusterUrl().then((function(e){clusterUri=e.backendUrl,c.initializeReportEmbed(r).then((function(){p.resolve(null),l.resolve()}),(function(e){p.reject(t.HostCommunicationHelper.buildReportLoadFailedMessage());var r=c.prepareEmbedTelemetryErrorDetails("SAAS embed: Fail to initialize - Could not initialize report embed",e?e.error:void 0,e?e.httpStatusCode:void 0);l.reject(r)}))}),(function(e){p.reject(t.HostCommunicationHelper.buildReportLoadFailedMessage()),c.showError();var r=e&&e.error?"SAAS embed: "+e.error.code:"SAAS embed: Fail to initialize - Could not resolve cluster",o=c.prepareEmbedTelemetryErrorDetails(r,e?e.error:void 0);l.reject(o)})))})).catch((function(t){r="",c.showError(),c.fireLoadReportStartUpTelemetry(r),l=c.services.telemetryService.startEvent(e.telemetry.ReportEmbedLoadEmbeddedReport,r,c.embedType,c.embedUrl,c.embedReferrer),p.reject(t);var o=c.prepareEmbedTelemetryErrorDetails(t.message);o.errorSource=e.telemetry.ErrorSource.User,l.reject(o)})),this.services.activeGroupIdService.activeGroupObjectId=o,p.promise},o.prototype.load=function(e){return loadReport(e.id,e.accessToken,void 0,e.pageName,e.settings,e.filters)},o.prototype.getPages=function(){if(!this.exploration||!this.exploration.sections)return null;var e=this.exploration.sections.map((function(e){return{name:e.name,displayName:e.displayName}}));return e},o.prototype.setPage=function(o){var i,n=this;if(this.exploration){var s=this.getPageIndexByName(o);s>=0&&(this.scope.$applyAsync((function(){n.scope.$emit(r.constants.switchSectionEvent,s)})),this.services.telemetryService.logEvent(e.telemetry.ReportEmbedSwitchPage,this.embedType,this.embedUrl,this.embedReferrer))}else i=t.HostCommunicationHelper.buildSetPageFailedMessage();return i},o.prototype.updateSettings=function(e){var r;try{r=this.checkAndUpdateExplorationCapabilities(e)}catch(e){return this.services.promiseFactory.reject({message:d.ErrorMessages.updateSettingsFailed})}var t={filterPaneEnabled:r.showVisualizationPane,navContentPaneEnabled:r.showNavContentPane};return this.services.promiseFactory.resolve(t)},o.prototype.getEmbedMessageProxyService=function(){return this.services.embedMessageProxyService},o.prototype.fireLoadingEventAndFlush=function(r){var t=this.services.telemetryService;t.logEvent(e.telemetry.ReportEmbedLoadingStarted,r,this.embedType,this.embedUrl,this.embedReferrer);var o=this.services.promiseFactory.defer();o.promise.then((function(){t&&t.flush()})),o.resolve(null)},o.prototype.loadReportForAnonymous=function(e,r){var i=this,n=this.services.promiseFactory.defer();if(jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(r)){var s=this.prepareEmbedTelemetryErrorDetails("Anonymous embed error: Fail to load - Could not parse the reportObjectId from the searchBar.");e.reject(s),this.showError(),n.reject(t.HostCommunicationHelper.buildReportLoadFailedMessage())}else this.getClusterUriIfTenantIdExists(this.targetTenantId,clusterUri).then((function(s){clusterUri=o.getAPIMHostUrl(s),i.initializeReportEmbed(r).then((function(){n.resolve(null),e.resolve()}),(function(r){n.reject(t.HostCommunicationHelper.buildReportLoadFailedMessage());var o=i.prepareEmbedTelemetryErrorDetails("Anonymous embed error: Fail to initialize - Could not initialize report embed",r.error,r.httpStatusCode);e.reject(o)}))}));return n.promise},o.prototype.resolveReportIdForAnonymousEmbed=function(r){var t=jsCommon.QueryStringUtil.parseQueryString(r),o=void 0;t.k?o=t.k:t.key&&(o=t.key);var i="",n=t.r;if(this.targetTenantId=void 0,n){var s=void 0;try{s=JSON.parse(atob(n))}catch(e){i=e}s&&(s.t&&(this.targetTenantId=s.t),s.k?o=s.k:i="Wrong format of encoded report - JSON object  doesn't contain a key")}return t.refresh&&(this.refreshEnabled=!0,this.refreshIntervalInMinutes=parseInt(t.refresh,10),(_.isNaN(this.refreshIntervalInMinutes)||this.refreshIntervalInMinutes<=d.minimumReportDataRefreshIntervalInMinutes)&&(this.refreshIntervalInMinutes=d.minimumReportDataRefreshIntervalInMinutes)),jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(o)?(i="Anonymous embed error: Fail to load - Could not parse the reportObjectId from the searchBar. "+i,this.services.telemetryService.logEvent(e.telemetry.ReportEmbedInvalidReportResourceKey,i),this.services.promiseFactory.reject({message:i})):(window.powerBIAccessToken=o,window.powerBIResourceKey=o,this.services.promiseFactory.resolve(o))},o.prototype.fireLoadReportStartUpTelemetry=function(r){if("number"==typeof viewLoadingStarted){var t=this.services.telemetryService.startEvent(e.telemetry.ReportEmbedScriptLoaded,r,this.embedType,this.embedUrl,this.embedReferrer);t.event.time=viewLoadingStarted,t.resolve(),this.pageLoadedEvent=this.services.telemetryService.startEvent(e.telemetry.ReportEmbedPageLoaded,r,this.embedType,this.embedUrl,this.embedReferrer),this.pageLoadedEvent.event.time=viewLoadingStarted}this.fireLoadingEventAndFlush(r)},o.prototype.loadReportForAppToken=function(e,r){var o=this,i=this.services.promiseFactory.defer();return jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(r)?(e.reject(),this.showError(),i.reject(t.HostCommunicationHelper.buildReportLoadFailedMessage())):this.services.featureSwitchService.featureSwitches.paasDynamicRoutingEnabled?this.services.clusterResolverService.getClusterUrl().then((function(n){clusterUri=n.backendUrl,o.initializeReportEmbed(r).then((function(){i.resolve(null),e.resolve()}),(function(){i.reject(t.HostCommunicationHelper.buildReportLoadFailedMessage()),e.reject()}))}),(function(r){i.reject(t.HostCommunicationHelper.buildReportLoadFailedMessage()),o.showError();var n=r&&r.error?"PAAS embed: "+r.error.code:"PAAS embed: Fail to initialize - Could not resolve cluster",s=o.prepareEmbedTelemetryErrorDetails(n,r?r.error:void 0);e.reject(s)})):this.initializeReportEmbed(r).then((function(){i.resolve(null),e.resolve()}),(function(){i.reject(t.HostCommunicationHelper.buildReportLoadFailedMessage()),e.reject()})),i.promise},o.prototype.initializeReportEmbed=function(e){var r=this;this.services.embedModeService.isAnonymousLiveEmbed()||this.services.embedModeService.isAppTokenEmbed()||this.services.userServicePlanMetadata.isPremiumUser().then((function(e){return r.scope.showLogoBar=!e}),(function(e){return r.scope.showLogoBar=!1}));var t=this.services.promiseFactory.defer();return this.services.reportEmbedExplorationService.getModelsAndExploration(e).then((function(e){r.loadPowerViewReport(e),t.resolve(null)}),(function(e){r.showError(),t.reject(e)})),t.promise},o.prototype.loadPowerViewReport=function(e){var r=this;this.exploration=e.exploration,this.model=this.services.modelConverter.convertModel(e.models[0]);var t=this.createReportModel(this.report);t.model=this.model,this.reportContainer=this.services.modelConverter.convertReportContainer(this.report),this.reportContainer.report=t,this.services.$timeout((function(){return r.emitLoadPowerViewReportEvent()}),0)},o.prototype.showError=function(){this.scope.errorMessage=this.services.localizationService.get("ReportEmbed_Default_Error_Message"),this.scope.showErrorMessage=!0,this.hideLoadingSplash()},o.prototype.emitLoadPowerViewReportEvent=function(){if(!this.loadPowerViewReportEventEmitted){this.loadPowerViewReportEventEmitted=!0;var e={report:this.reportContainer.report,model:this.model,instantiationMode:n.reportServer.ReportInstantiationMode.None,exploration:this.exploration,additionalODataFilter:this.additionalODataFilter,reportPage:this.pageName,additionalJsonFilters:this.additionalJsonFilters};this.hideLoadingSplash(),this.scope.$emit(i.loadPowerViewReportEventName,e)}},o.prototype.createReportModel=function(e){var r=this.services.modelConverter.convertReport(e);return this.services.modelConverter.fillReport(r,e),r},o.prototype.hideLoadingSplash=function(){var e=angular.element("#pbi-loading");0!==e.length&&e.remove()},o.prototype.getClusterUriIfTenantIdExists=function(e,r){return e?this.getClusterUriForTenant(e,r):this.services.promiseFactory.resolve(r)},o.prototype.getClusterUriForTenant=function(e,r){var t=this.services.promiseFactory.defer(),i=o.getAPIMHostUrl(r);return this.services.clusterResolverService.getPublicClusterForTenant(e,i).then((function(e){return t.resolve(e.backendUrl)}),(function(e){return t.reject()})),t.promise},o.getAPIMHostUrl=function(e){var r=jsCommon.Utility.getProtocolFromUrl(e),t=jsCommon.Utility.getHostNameForUrl(e),o=t.split(".");o[0]=o[0].replace("-redirect",""),o[0]=o[0].replace("global-",""),o[0]=o[0]+"-api";var i=o.join(".");return r+"://"+i},o.prototype.prepareEmbedTelemetryErrorDetails=function(r,t,o){var i=void 0;t?(i=a.getTelemetryErrorDetails(t,o),r+=" message: "+t.code):null!=o&&(r+=" HttpStatusCode = "+o);var n={errorSource:i?i.errorSource:e.telemetry.ErrorSource.PowerBI,errorCode:r};return n},o.prototype.getPageIndexByName=function(e){return this.exploration&&this.exploration.sections?this.exploration.sections.map((function(e){return e.name})).indexOf(e):-1},o.prototype.refreshReportData=function(){this.scope.$emit(i.refreshReportData)},o.prototype.getPageByName=function(e){var r,t=this.exploration&&this.exploration.sections?this.exploration.sections.filter((function(r){return r.name===e})):null;return t&&t.length>0&&(r={name:t[0].name,displayName:t[0].displayName}),r},o.prototype.checkAndUpdateExplorationCapabilities=function(e){if(e){var r=this.services.scopedProvider.find(this.scope).get("explorationCapabilities",this.scope),t=r.getCapabilities();return t.showVisualizationPane=void 0!==e.filterPaneEnabled?e.filterPaneEnabled:t.showVisualizationPane,t.showNavContentPane=void 0!==e.navContentPaneEnabled?e.navContentPaneEnabled:t.showNavContentPane,r.setCapabilities(t),t}},o})();o.ReportEmbedController=l})(o=t.controllers||(t.controllers={}))})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){var t;!(function(r){var t;!(function(r){var t="mailto:someone@example.com?subject=Sharing%20Power%20BI%20Report&body=Hi%2C%0D%0A%0D%0ATake%20a%20look%20at%20this%20Power%20BI%20report%20I%E2%80%99d%20like%20to%20share%20with%20you.%0D%0A%0D%0AURL%20to%20embedded%20content%3A%0D%0A%7B%7BembedUrl%7D%7D%0D%0A%0D%0A---------------------------%0D%0APowered%20by%20Power%20BI%20%0D%0Awww.powerbi.com",o=(function(){function r(e,r){var t=this;this.windowSpec="menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=600",this.scope=e,this.services=r,this.scope.reportEmbedExplorationService=this.services.reportEmbedExplorationService,this.scope.$watch("reportEmbedExplorationService.exploration.sections",(function(e){_.isArray(e)&&(t.sectionNames=e.map((function(e){return e.name})))})),this.scope.$watch("reportEmbedExplorationService.exploration.activeSectionIndex",(function(e){_.isNumber(e)&&(t.currentPageNumber=e||0,t.prepareShareLinks())})),this.scope.closeSocialSharing=function(){return t.closeSocialSharing()},this.scope.toggleSocialSharing=function(){return t.toggleSocialSharing()},this.scope.openUsingWindow=function(e){return t.openUsingWindow(e)},this.embedType=this.services.embedModeService.getEmbedTypeDescription(),this.embedUrl=this.services.embedModeService.getPublicEmbedUrl(),this.embedReferrer=this.services.embedModeService.getPublicEmbedReferrer()}return r.createOptions=function(){return{additionalServices:["reportEmbedExplorationService","$window","$document","$element","telemetryService","embedModeService"]}},r.prototype.toggleSocialSharing=function(){this.scope.socialSharingVisible=!this.scope.socialSharingVisible,this.scope.isSmallScreen&&this.emitSocialSharingOverlayEvent()},r.prototype.closeSocialSharing=function(){this.scope.socialSharingVisible=!1,this.scope.isSmallScreen&&this.emitSocialSharingOverlayEvent()},r.prototype.emitSocialSharingOverlayEvent=function(){this.scope.$emit(e.explore.reportembed.constants.showSocialSharingOverlayEventName,this.scope.socialSharingVisible)},r.prototype.prepareShareLinks=function(){this.setShareLink(),this.setSharingEmailLink()},r.prototype.setShareLink=function(){var e=this.getPageLink();this.scope.textShareLink=e,this.scope.shareLink=encodeURIComponent(e)},r.prototype.getPageLink=function(){var e=jsCommon.QueryStringUtil.parseQueryString(),r=e.shareUrl,t=this.embedReferrer;return t&&"true"===r?t:this.getEmbedPageUrl(this.embedUrl)},r.prototype.getEmbedPageUrl=function(e){var r="";return this.sectionNames&&this.currentPageNumber<this.sectionNames.length&&(r="&pageName="+this.sectionNames[this.currentPageNumber]),e+r},r.prototype.setSharingEmailLink=function(){this.scope.socialSharingEmailLink=t.replace("%7B%7BembedUrl%7D%7D",this.scope.shareLink)},r.prototype.openUsingWindow=function(e){var r=e.currentTarget,t=r.href;this.logSocialSharingEvent(t),this.scope.isSmallScreen||(this.services.$window.open(r.href,"",this.windowSpec),e.stopPropagation(),e.preventDefault())},r.prototype.logSocialSharingEvent=function(r){var t=this.scope.reportEmbedExplorationService.exploration.report.objectId;this.services.telemetryService.logEvent(e.telemetry.ReportEmbedSocialSharing,r,t,this.embedType,this.embedUrl,this.embedReferrer)},r})();r.LogoBarSocialSharingController=o})(t=r.controllers||(r.controllers={}))})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){var t;!(function(r){var t;!(function(t){var o=(function(){function t(){this.restrict="E",this.templateUrl="views/logoBarNavigation.html",this.scope={isSmallScreen:"=",isMediumScreen:"=",mailToLink:"=",showAboutDialog:"&"},this.controller=e.common.Services.createController(r.controllers.LogoBarNavigationController)}return t})();t.LogoBarNavigation=o;var i=(function(){function e(){var e=this;this.restrict="A",this.link=function(r,t,o){var i=o;r.$watch(i.textSlideAnimation,(function(){e.clearAllTimeouts();var o=document.getElementById("flyoutElement");o&&o.setAttribute("flyout-visible",String(r.showOverlay)),t.children("li").each((function(t,o){if(r.showOverlay){var i=setTimeout((function(){$(o).addClass("slideUp").removeClass("slideDown sectionItemHidden")}),Math.min(50*t,500));e.addTimeout(i)}else $(o).removeClass("slideUp").addClass("sectionItemHidden")}))}))}}return e.prototype.addTimeout=function(e){(this.timeoutIDs=this.timeoutIDs||[]).push(e)},e.prototype.clearAllTimeouts=function(){this.timeoutIDs instanceof Array&&this.timeoutIDs.forEach((function(e){"number"==typeof e&&window.clearTimeout(e)}))},e})();t.TextSlideAnimation=i})(t=r.directives||(r.directives={}))})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={})),powerbi.explore.reportembed.registerReportEmbedDirective("TextSlideAnimation",[]),powerbi.explore.reportembed.registerReportEmbedDirective("LogoBarNavigation",[]);var powerbi;!(function(e){var r;!(function(r){var t;!(function(r){var t;!(function(t){var o=e.explore.reportembed.constants.CssStyles,i=(function(){function t(){this.restrict="E",
this.replace=!0,this.templateUrl="views/logoBar.html",this.controller=e.common.Services.createController(r.controllers.LogoBarController),this.link=function(e){function r(){var r=window.innerWidth>0?window.innerWidth:screen.width,t=window.innerHeight>0?window.innerHeight:screen.height;e.isSmallScreen=r<=o.maxWidthMobileUI||t<=o.maxHeightMobileUI,e.isMediumScreen=!e.isSmallScreen&&(r<=o.maxSizeTabletUI||t<=o.maxSizeTabletUI)}var t=document,i=t.fullscreenEnabled||t.webkitFullscreenEnabled||t.mozFullScreenEnabled||t.msFullscreenEnabled;i||window.setTimeout((function(){var e=document.getElementById("fullScreenIcon");e&&(e.setAttribute("target","_blank"),e.setAttribute("href",document.URL))}),0),r(),window.addEventListener("resize",(function(){r(),e.$apply()}))}}return t})();t.LogoBar=i})(t=r.directives||(r.directives={}))})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={})),powerbi.explore.reportembed.registerReportEmbedDirective("LogoBar",[]);var powerbi;!(function(e){var r;!(function(r){var t;!(function(r){var t;!(function(t){var o=(function(){function t(){this.restrict="E",this.templateUrl="views/logoBarSocialSharing.html",this.scope=!0,this.controller=e.common.Services.createController(r.controllers.LogoBarSocialSharingController)}return t})();t.LogoBarSocialSharing=o})(t=r.directives||(r.directives={}))})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={})),powerbi.explore.reportembed.registerReportEmbedDirective("LogoBarSocialSharing",[]);var powerbi;!(function(e){var r;!(function(r){var t;!(function(r){function t(e){return new i(e)}var o=e.explore.reportembed.constants;r.getHostCommunicationHelper=t;var i=(function(){function e(e){this.windowService=e}return e.buildErrorMessage=function(e){return{event:o.error,error:e}},e.prototype.postErrorMessageToParent=function(e){var r={event:o.error,error:e};this.windowService.parent.postMessage(JSON.stringify(r),"*")},e.prototype.postReportLoadMessageToParent=function(){var e={event:o.reportPageLoaded,error:""};this.windowService.parent.postMessage(JSON.stringify(e),"*")},e.prototype.postErrorLoadReportFailed=function(){this.postErrorMessageToParent(o.ErrorCodes.reportLoadFailed)},e.buildWindowPostErrorMessage=function(e){return{message:e}},e.buildReportLoadFailedMessage=function(){return e.buildWindowPostErrorMessage(o.ErrorCodes.reportLoadFailed)},e.buildSetPageFailedMessage=function(){return e.buildWindowPostErrorMessage(o.ErrorMessages.setPageFailed)},e.buildSetFilterFailedMessage=function(){return e.buildWindowPostErrorMessage(o.ErrorMessages.setFilterFailed)},e.buildInvalidFilterMessage=function(){return e.buildWindowPostErrorMessage(o.ErrorMessages.invalidFilter)},e.buildNotSupportedByPublishToWebMessage=function(){return e.buildWindowPostErrorMessage(o.ErrorMessages.publishToWebNotSupported)},e})();r.HostCommunicationHelper=i})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){var t;!(function(r){var t;!(function(r){var t=(function(){function r(e,r,t){this.promiseFactory=e,this.httpService=r,this.telemetryService=t}return r.prototype.getClusterUrl=function(){var e=this,r=this.promiseFactory.defer(),t="metadata/cluster";if(this.clusterUrl)r.resolve(this.clusterUrl);else{var o={dismissGroupObjectId:!0};this.httpService.get(t,this.httpService.powerbiRequestOptions(null,null,o)).then((function(t){e.clusterUrl=t.data,r.resolve(e.clusterUrl)}),(function(e){r.reject({error:e.error,requestId:e.requestId})}))}return r.promise},r.prototype.getPublicClusterForTenant=function(r,t){var o,i,n=this.promiseFactory.defer();if(jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(resolvedClusterUri)){jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(resolveClusterError)||(o=this.telemetryService.startEvent(e.telemetry.ReportEmbedClusterResolved,!0,void 0),i={errorSource:e.telemetry.ErrorSource.PowerBI,errorCode:"Front loaded resolver failed:"+resolveClusterError},o.reject(i));var s="public/routing/cluster/"+r,a=jsCommon.Utility.urlCombine(t,s);o=this.telemetryService.startEvent(e.telemetry.ReportEmbedClusterResolved,!1,void 0),this.httpService.get(a,this.httpService.powerbiRequestOptions()).then((function(e){o.event.info.backendUrl=e.data.FixedClusterUri,o.resolve(),n.resolve({backendUrl:e.data.FixedClusterUri})}),(function(r){var t="requestId:"+r.requestId;i={errorSource:e.telemetry.ErrorSource.PowerBI,errorCode:r.error?r.error.message+t:t},o.reject(i),n.reject({error:r.error,requestId:r.requestId})}))}else o=this.telemetryService.startEvent(e.telemetry.ReportEmbedClusterResolved,!0,resolvedClusterUri),o.resolve(),n.resolve({backendUrl:resolvedClusterUri});return n.promise},r})();r.ClusterResolverService=t})(t=r.services||(r.services={}))})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){var t;!(function(t){var o;!(function(o){function i(e,r,t,i,n,s,a,d,l,c,p){return new o.ReportEmbedMessageProxyService(e,r,t,i,n,s,a,d,l,c,p)}var n=e.explore.reportembed.constants,s=jsCommon.StringExtensions,a=e.common.events,d=(function(){function o(r,t,o,i,s,a,d,l,c,p,u){this.requestId=n.defaultId,this.PowerBIModels=window["powerbi-models"],this.rootScope=r,this.eventBridge=p,this.windowService=t,this.windowPostMessageProxy=o,this.httpPostMessage=i,this.router=s,this.reportEmbedFilterService=u,this.promiseFactory=l,this.jsonFilterParser=e.explore.jsonFilter.createJSONFilterParser(l),this.embedModeService=a,this.conceptualSchemaProxy=d,this.telemetryService=c,this.nextAllowedRefreshTime=new Date(1970,1,1).getTime()}return o.prototype.startListening=function(){var t=this;this.setupRoutes(this.router),this.eventBridge.createChannelSubscriptionManager().subscribe(r.services.events.sectionChanged,(function(e,r){return t.onSectionChange(r)})).subscribe(r.services.events.dataPointsSelected,(function(e,r){return t.onDataPointsSelection(r)})),this.rootScope.$on(e.constants.openReportFinished,(function(e,r,o){return t.onReportLoaded(o)})),this.rootScope.$on(a.loadPowerViewReportEventName,(function(e,r){t.exploration=r.exploration}))},o.prototype.setupController=function(e){this.embedController=e},o.prototype.setupRoutes=function(r){var o=this;r.post("/report/load",(function(r,t){o.requestId=r.headers&&r.headers.uid?r.headers.uid:void 0;var i=r.body,s=o.validateLoad(i);if(s)t.send(n.StatusCodes.BadRequest,s);else{o.embedController.load(i).catch((function(r){o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKError,o.requestId,i.id,o.embedModeService.getEmbedTypeDescription(),r.message),o.httpPostMessage.post("/reports/"+o.requestId+"/events/error",r)})),o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKLoadReport,o.requestId,i.id,o.embedModeService.getEmbedTypeDescription());var a=o.requestId?void 0:n.WarningMessages.loadReportUIDMissingWarning;t.send(n.StatusCodes.Accepted,a)}})),r.get("/report/pages",(function(r,t){var i=o.embedController.getPages();return void 0!==i?(o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKGetAllPages,o.requestId,o.getReportObjectId(),o.embedModeService.getEmbedTypeDescription()),t.send(n.StatusCodes.OK,i)):(o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKError,o.requestId,o.getReportObjectId(),o.embedModeService.getEmbedTypeDescription(),n.ErrorMessages.getAllPagesFailed),t.send(n.StatusCodes.InternalServerError,n.ErrorMessages.getAllPagesFailed))})),r.put("/report/pages/active",(function(r,t){var i=r.body,s=o.validatePage(i);if(s)t.send(n.StatusCodes.BadRequest,s);else{var a=o.embedController.setPage(i.name);a&&(o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKError,o.requestId,o.getReportObjectId(),o.embedModeService.getEmbedTypeDescription(),a.message),o.httpPostMessage.post("/reports/"+o.requestId+"/events/error",a)),o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKSetActivePage,o.requestId,o.getReportObjectId(),o.embedModeService.getEmbedTypeDescription()),t.send(n.StatusCodes.Accepted)}})),r.put("/report/filters",(function(r,i){if(o.embedModeService.isAnonymousLiveEmbed()){var s=t.HostCommunicationHelper.buildNotSupportedByPublishToWebMessage();return i.send(n.StatusCodes.BadRequest,s)}var a=r.body,d=o.validateFilters(a);return d?void i.send(n.StatusCodes.BadRequest,d):o.reportEmbedFilterService.setFilters(a).then((function(r){return o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKSetReportLevelFilters,o.requestId,o.getReportObjectId(),o.embedModeService.getEmbedTypeDescription()),i.send(n.StatusCodes.Accepted)}),(function(r){return o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKError,o.requestId,o.getReportObjectId(),o.embedModeService.getEmbedTypeDescription(),r.message),i.send(n.StatusCodes.BadRequest,r)}))})),r.get("/report/filters",(function(r,i){if(o.embedModeService.isAnonymousLiveEmbed()){var s=t.HostCommunicationHelper.buildNotSupportedByPublishToWebMessage();return i.send(n.StatusCodes.BadRequest,s)}return o.reportEmbedFilterService.getFilters().then((function(r){return o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKGetReportLevelFilters,o.requestId,o.getReportObjectId(),o.embedModeService.getEmbedTypeDescription()),i.send(n.StatusCodes.OK,r)}),(function(r){return o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKError,o.requestId,o.getReportObjectId(),o.embedModeService.getEmbedTypeDescription(),r.message),i.send(n.StatusCodes.BadRequest,r)}))})),r.put("/report/pages/:pageName/filters",(function(r,i){if(o.embedModeService.isAnonymousLiveEmbed()){var s=t.HostCommunicationHelper.buildNotSupportedByPublishToWebMessage();return i.send(n.StatusCodes.BadRequest,s)}var a=r.params.pageName,d=r.body,l={type:"page",name:a},c=o.validatePageLevel(l);if(c)i.send(n.StatusCodes.BadRequest,c);else{var p=o.validateFilters(d);if(!p)return o.reportEmbedFilterService.setFilters(d,l).then((function(r){return o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKSetPageLevelFilters,o.requestId,o.getReportObjectId(),o.embedModeService.getEmbedTypeDescription()),i.send(n.StatusCodes.Accepted)}),(function(r){return o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKError,o.requestId,o.getReportObjectId(),o.embedModeService.getEmbedTypeDescription(),r.message),i.send(n.StatusCodes.BadRequest,r)}));i.send(n.StatusCodes.BadRequest,p)}})),r.get("/report/pages/:pageName/filters",(function(r,i){if(o.embedModeService.isAnonymousLiveEmbed()){var s=t.HostCommunicationHelper.buildNotSupportedByPublishToWebMessage();return i.send(n.StatusCodes.BadRequest,s)}var a=r.params.pageName,d={type:"page",name:a},l=o.validatePageLevel(d);return l?void i.send(n.StatusCodes.BadRequest,l):o.reportEmbedFilterService.getFilters(d).then((function(r){return o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKGetPageLevelFilters,o.requestId,o.getReportObjectId(),o.embedModeService.getEmbedTypeDescription()),i.send(n.StatusCodes.OK,r)}),(function(r){return o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKError,o.requestId,o.getReportObjectId(),o.embedModeService.getEmbedTypeDescription(),r.message),i.send(n.StatusCodes.BadRequest,r)}))})),r.patch("/report/settings",(function(r,t){o.requestId=r.headers&&r.headers.uid?r.headers.uid:void 0;var i=r.body,s=o.validateSettings(i);return s?void t.send(n.StatusCodes.BadRequest,s):(o.embedController.updateSettings(i).then((function(r){o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKUpdateSettings,o.requestId,o.getReportObjectId(),o.embedModeService.getEmbedTypeDescription()),o.httpPostMessage.post("/reports/"+o.requestId+"/events/settingsUpdated",r)}),(function(r){o.telemetryService.logEvent(e.telemetry.ReportEmbedSDKError,o.requestId,o.getReportObjectId(),o.embedModeService.getEmbedTypeDescription(),r.message),o.httpPostMessage.post("/reports/"+o.requestId+"/events/error",r)})),void t.send(n.StatusCodes.Accepted))})),r.post("/report/print",(function(e,r){window.print(),r.send(n.StatusCodes.Accepted)})),r.post("/report/refresh",(function(e,r){var t=Date.now();if(t>o.nextAllowedRefreshTime)o.embedController.refreshReportData(),o.nextAllowedRefreshTime=t+1e3*n.ThrottlingLimits.refreshFrequencyInSeconds,r.send(n.StatusCodes.Accepted);else{var i={message:s.format(n.ErrorMessages.tooManyRefreshRequests,n.ThrottlingLimits.refreshFrequencyInSeconds.toString())};r.headers={"Retry-After":Math.ceil((o.nextAllowedRefreshTime-t)/1e3)},r.send(n.StatusCodes.TooManyRequests,i)}}))},o.prototype.onDataPointsSelection=function(e){var r=this;this.getConceptualSchema().then((function(t){r.jsonFilterParser.tryGetSelectedDataPoints(r.exploration,t,e).then((function(e){r.httpPostMessage.post("/reports/"+r.requestId+"/events/dataSelected",e)})).catch((function(e){r.httpPostMessage.post("/reports/"+r.requestId+"/events/error",e)}))}))},o.prototype.getReportObjectId=function(){return void 0!==this.exploration&&void 0!==this.exploration.report?this.exploration.report.objectId:n.ErrorCodes.missingReportId},o.prototype.validateLoad=function(e){var r=this.PowerBIModels.validateReportLoad(e);return!r&&e.settings&&(r=this.validateSettings(e.settings)),r},o.prototype.validateSettings=function(e){return this.PowerBIModels.validateSettings(e)},o.prototype.validatePage=function(e){var r=this.PowerBIModels.validatePage(e);if(!r){var t=this.embedController.getPageIndexByName(e.name);t<0&&(r=[{message:n.ErrorMessages.invalidPageName}])}return r},o.prototype.validateFilters=function(e){for(var r,t=0,o=e;t<o.length;t++){var i=o[t],n=this.PowerBIModels.validateFilter(i);n&&(r=r||[],r.push(n))}return r},o.prototype.validatePageLevel=function(e){var r,t=this.embedController.getPageIndexByName(e.name);return t<0&&(r=[],r.push({message:n.ErrorMessages.invalidPageName})),r},o.prototype.postErrorMessageToParent=function(e){var r=t.HostCommunicationHelper.buildErrorMessage(e);window.parent.postMessage(JSON.stringify(r),"*")},o.prototype.postErrorInvalidReportId=function(){this.postErrorMessageToParent(n.ErrorCodes.missingReportId)},o.prototype.postErrorInvalidAccessToken=function(){this.postErrorMessageToParent(n.ErrorCodes.missingAccessToken)},o.prototype.postErrorInvalidFilter=function(){this.postErrorMessageToParent(n.ErrorCodes.filterError)},o.prototype.postErrorReportNotFound=function(){this.postErrorMessageToParent(n.ErrorCodes.notFound)},o.prototype.isEmbedMessageProxyServiceUsed=function(){return this.requestId!==n.defaultId},o.prototype.onSectionChange=function(e){var r=this.embedController.getPageByName(e.name);this.httpPostMessage.post("/reports/"+this.requestId+"/events/pageChanged",{initiator:void 0,newPage:r})},o.prototype.onReportLoaded=function(e){this.isEmbedMessageProxyServiceUsed()&&(e?this.httpPostMessage.post("/reports/"+this.requestId+"/events/error",n.ErrorMessages.loadReportFailed):this.httpPostMessage.post("/reports/"+this.requestId+"/events/loaded",{initiator:void 0}))},o.prototype.getConceptualSchema=function(){if(!this.exploration)return this.promiseFactory.reject();var e=this.exploration.dataSources;return this.conceptualSchemaProxy.get(e)},o})();o.ReportEmbedMessageProxyService=d,o.createEmbedMessageProxyService=i})(o=t.services||(t.services={}))})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){var t;!(function(r){var t;!(function(r){var t=e.errorDetailsHelper,o=e.explore.reportembed.constants,i=(function(){function r(e,r,t,o,i,n,s,a,d){this.promiseFactory=e,this.httpService=r,this.telemetryService=o,this.serializer=i,this.embedModeService=n,this.editableFeatureSwitchService=s,this.featureSwitchService=a,this.rootScope=t,this.uri=d,this.isInitialRequest=!0}return r.prototype.getModelsAndExplorationInternal=function(r){var o=this,i=this.embedModeService.getEmbedTypeDescription(),n=this.embedModeService.getPublicEmbedUrl(),s=this.embedModeService.getPublicEmbedReferrer(),a=this.telemetryService.startEvent(e.telemetry.ReportEmbedGetExplorationAndModel,this.uri,!0,null,r,i,n,s),d=this.promiseFactory.defer(),l=this.uri+"/"+r+"/modelsAndExploration";return this.httpService.get(l,this.httpService.powerbiRequestOptions()).then((function(e){return a.event.info.clientAndServerRequestIdMatch=jsCommon.HttpUtils.clientAndServerRequestIdMatch(e),a.event.info.responseRequestId=jsCommon.HttpUtils.getResponseRequestId(e),a.resolve(),o.deserializeModelsAndExploration(e.data,d)}),(function(e){return e&&e.error&&jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(e.error.code)&&(e.error.code="Fail to load - Could not retrieve models and explorations."),a.reject(t.getTelemetryErrorDetails(e.error,e.status)),d.reject(e?{error:e.error,requestId:e.requestId,httpStatusCode:e.status}:{})})),d.promise},r.prototype.getModelsAndExploration=function(r){var t=this;if("undefined"==typeof modelsAndExplorationResponse||this.isInitialRequest===!1||this.featureSwitchService.featureSwitches.frontLoadReportEmbedEnabled===!1)return this.getModelsAndExplorationInternal(r);this.isInitialRequest=!1;var i=this.promiseFactory.defer();if(modelsAndExplorationResponse){if(modelsAndExplorationResponse===o.ModelsAndExplorationState.Loading)var n=this.rootScope.$on(o.modelsAndExplorationReadyEventName,(function(){modelsAndExplorationResponse!==o.ModelsAndExplorationState.Error?(t.deserializeModelsAndExploration(modelsAndExplorationResponse,i),t.logPreloadedModelsAndExplorationTelemetryEvent(r)):e.common.shouldRetryRequest(frontLoadStatus)?t.getModelsAndExplorationInternal(r).then((function(e){return i.resolve(e)})).catch((function(e){return i.reject(e)})):(t.logPreloadedModelsAndExplorationTelemetryEvent(r),i.reject({error:frontLoadError,httpStatusCode:frontLoadStatus})),n()}));else if(modelsAndExplorationResponse!==o.ModelsAndExplorationState.Error)this.deserializeModelsAndExploration(modelsAndExplorationResponse,i),this.logPreloadedModelsAndExplorationTelemetryEvent(r);else{if(e.common.shouldRetryRequest(frontLoadStatus))return this.getModelsAndExplorationInternal(r);this.logPreloadedModelsAndExplorationTelemetryEvent(r),i.reject({error:frontLoadError,httpStatusCode:frontLoadStatus})}return i.promise}return this.getModelsAndExplorationInternal(r)},r.prototype.logPreloadedModelsAndExplorationTelemetryEvent=function(r){var t=this.embedModeService.getEmbedTypeDescription(),i=this.embedModeService.getPublicEmbedUrl(),n=this.embedModeService.getPublicEmbedReferrer(),s=this.telemetryService.startEvent(e.telemetry.ReportEmbedGetExplorationAndModel,this.uri,isModelsAndExplorationCached,modelsAndExplorationRequestId,r,t,i,n);if(modelsAndExplorationResponse!==o.ModelsAndExplorationState.Error){var a=Date.now()-modelsAndExplorationDuration;s.event.time=a,s.resolve()}else s.reject(e.errorDetailsHelper.getTelemetryErrorDetails(frontLoadError,frontLoadStatus))},r.prototype.deserializeModelsAndExploration=function(e,r){var t;t={models:e.models,exploration:null},t.exploration=this.serializer.deserializeExploration(e.exploration,[],!0),this.exploration=t.exploration,e.featureSwitches&&this.editableFeatureSwitchService.registerFeatureSwitches(e.featureSwitches),r.resolve(t)},r})();r.ReportEmbedExplorationService=i})(t=r.services||(r.services={}))})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){var t;!(function(r){var t;!(function(r){var t=e.common,o=(function(){function e(e,r,t){this.promiseFactory=e,this.httpService=r,this.featureSwitchService=t}return Object.defineProperty(e.prototype,"userHasPremiumPlan",{get:function(){return this.userMetadata&&t.contracts.premiumUserServicePlans.indexOf(this.userMetadata.userServicePlan)!==-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userHasFreeTrial",{get:function(){return this.userMetadata&&this.userMetadata.trial&&this.userMetadata.trial.state===t.contracts.TrialState.Enabled},enumerable:!0,configurable:!0}),e.prototype.checkIsPremiumUser=function(){return this.userHasPremiumPlan||this.userHasFreeTrial},e.prototype.isPremiumUser=function(){var e=this,r=this.promiseFactory.defer();if(this.userMetadata)r.resolve(this.checkIsPremiumUser());else{var t="metadata/userserviceplan";this.httpService.get(t,this.httpService.powerbiRequestOptions()).then((function(t){e.userMetadata=t.data,r.resolve(e.checkIsPremiumUser())}),(function(e){return r.reject()}))}return r.promise},e})();r.UserServicePlanService=o})(t=r.services||(r.services={}))})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){var t;!(function(r){var t;!(function(r){var t=(function(e){function r(){e.call(this,void 0)}return __extends(r,e),r.prototype.inContentListView=function(){return!0},r.prototype.inReportEmbedView=function(){return!0},r})(e.services.MockNavigation);r.ReportEmbedNavigationService=t})(t=r.services||(r.services={}))})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){var t;!(function(t){var o;!(function(o){function i(e,r,t,i){return new o.ReportEmbedFilterService(e,r,t,i)}var n=e.explore.reportembed.constants,s=e.common.events,a=(function(){function e(e,t,o,i){var n=this;this.rootScope=e,this.promiseFactory=t,this.eventBridge=i,this.conceptualSchemaProxy=o,this.jsonFilterParser=r.jsonFilter.createJSONFilterParser(t),this.rootScope.$on(s.loadPowerViewReportEventName,(function(e,r){e.stopPropagation(),n.onLoadPowerViewReport(r)}))}return e.prototype.setFilters=function(e,r){var o=this,i=this.promiseFactory.defer(),n=this.getFilterContainerWithScope(r);if(n&&n.contract){var s=n.contract;this.getConceptualSchema().then((function(r){if(e&&e.length>0){for(var a=[],d=0,l=e;d<l.length;d++){var c=l[d],p=o.jsonFilterParser.tryCreateFilterContainer(s,r,c);if(!p)return i.reject(t.HostCommunicationHelper.buildInvalidFilterMessage());a.push(p)}var u=s.filters;if(s.filters=[],s.filters=a,u)for(var v=0,m=u;v<m.length;v++){var g=m[v];o.raiseFilterChangeEvent(s,n.scopeType,g,0)}if(a)for(var f=0,y=a;f<y.length;f++){var h=y[f];o.raiseFilterChangeEvent(s,n.scopeType,h,1)}}else for(;s.filters&&s.filters.length>0;){var b=s.filters[0];s.filters.splice(0,1),o.raiseFilterChangeEvent(s,n.scopeType,b,0)}i.resolve(null)}),(function(e){i.reject(t.HostCommunicationHelper.buildSetFilterFailedMessage())}))}else i.reject(t.HostCommunicationHelper.buildSetFilterFailedMessage());return i.promise},e.prototype.getFilters=function(e){var r=this,o=this.promiseFactory.defer(),i=this.getFilterContainerWithScope(e);return i&&i.contract?this.getConceptualSchema().then((function(e){r.jsonFilterParser.tryGetFilters(i.contract,e).then((function(e){o.resolve(e)}),(function(e){o.reject(e)}))}),(function(e){o.reject({message:n.ErrorMessages.filtersSerializationError})})):o.reject(t.HostCommunicationHelper.buildSetFilterFailedMessage()),o.promise},e.prototype.onLoadPowerViewReport=function(e){this.exploration=e.exploration},e.prototype.getConceptualSchema=function(){if(this.exploration){var e=this.exploration.dataSources;return this.conceptualSchemaProxy.get(e)}},e.prototype.getFilterContainerWithScope=function(e){var r;if(e&&e.type===n.FilterLevel){var t=e;r={contract:this.getSectionByName(t.name),scopeType:1}}else r={contract:this.exploration,scopeType:2};return r},e.prototype.raiseFilterChangeEvent=function(e,t,o,i){var n={container:e,scopeType:t},s={filter:o,changeType:i,scope:n};this.eventBridge.publishToChannel(r.services.events.filterContainerChanged,s)},e.prototype.getSectionByName=function(e){return this.exploration?_.find(this.exploration.sections,(function(r){return r.name===e})):null},e})();o.ReportEmbedFilterService=a,o.createReportEmbedFilterService=i})(o=t.services||(t.services={}))})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(r){var t;!(function(r){var t;!(function(r){function t(e,r,t,o,i){return new n(e,r,t,o,i)}var o=e.data.dsr,i=e.explore.reportembed.constants;r.createConceptualSchemaProxyHttpCommunication=t;var n=(function(){function e(e,r,t,i,n){this.httpService=e,this.promiseFactory=r,this.featureSwitchService=t,this.uri=i,this.$rootScope=n,this.isInitialRequest=!0,this.proxy=o.createConceptualSchemaProxyHttpCommunication(this.httpService,this.promiseFactory,this.uri)}return e.prototype.execute=function(e,r){var t=this;if(r.event.info.endPoint=this.uri,"undefined"==typeof conceptualSchemaResponse||this.isInitialRequest===!1||this.featureSwitchService.featureSwitches.frontLoadReportEmbedEnabled===!1)return this.proxy.execute(e,r);this.isInitialRequest=!1;var o=this.promiseFactory.defer();if(conceptualSchemaResponse){if(conceptualSchemaResponse===i.ConceptualSchemaState.Loading)var n=this.$rootScope.$on(i.conceptualSchemaReadyEventName,(function(){conceptualSchemaResponse!==i.ConceptualSchemaState.Error?(t.resolvePreloadedConceptualSchema(o),t.logPreloadedConceptualSchemaTelemetryEvent(r)):t.proxy.execute(e,r).then((function(e){return o.resolve(e)})).catch((function(e){return o.reject(e)})),n()}));else{if(conceptualSchemaResponse===i.ConceptualSchemaState.Error)return this.proxy.execute(e,r);this.resolvePreloadedConceptualSchema(o),this.logPreloadedConceptualSchemaTelemetryEvent(r)}return o.promise}return this.proxy.execute(e,r)},e.prototype.resolvePreloadedConceptualSchema=function(e){var r={requestId:conceptualSchemaRequestId,schemas:conceptualSchemaResponse.schemas};e.resolve(r)},e.prototype.logPreloadedConceptualSchemaTelemetryEvent=function(e){var r=Date.now()-conceptualSchemaDuration;e.event.time=r,e.event.info.clientAndServerRequestIdMatch=isConceptualSchemaCached},e})()})(t=r.services||(r.services={}))})(t=r.reportembed||(r.reportembed={}))})(r=e.explore||(e.explore={}))})(powerbi||(powerbi={})),angular.module("powerbi.explore.reportembed").run(["$templateCache",function(e){e.put("views/interactiveEmbed.html",'<div><div ng-hide="showErrorMessage" class="landingController"><notification-bar></notification-bar><div class="landingContainer"><div id="reportLandingContainer" class="embeddedLandingRootContent reportContainerContent isActive embeddedPV" ng-class="showLogoBar ? \'embeddedLandingRootContentLogoVisible\' : \'embeddedLandingRootContentLogoHidden\'"><div class="embeddedPV"><exploration-container view-model="exploreContainer" canvas-options="canvasOptions"></exploration-container></div></div></div></div><div ng-show="showErrorMessage" class="embedError" ng-class="showLogoBar ? \'embeddedLandingRootContentLogoVisible\' : \'embeddedLandingRootContentLogoHidden\'"><span ng-bind="errorMessage" class="errorText"/><br/><a target="_blank" href="http://go.microsoft.com/fwlink/?LinkID=722383&clcid=0x409"><span localize="ReportEmbed_Learn_More_Message" class="errorText"></span></a></div></div><logo-bar ng-show="showLogoBar"></logo-bar>'),e.put("views/logoBar.html",'<div class="unselectable"><div class="logoBar"><div class="logo"><a ng-if="useTitleForAnchor()"><span localize="ReportEmbed_Logobar_MarketingText" class="text" onclick="window.open(this.title, \'_blank\');" title="{{powerbiLink}}"></span></a><a target="_blank" ng-if="!useTitleForAnchor()" ng-href="{{powerbiLink}}"><span localize="ReportEmbed_Logobar_MarketingText" class="text"></span></a><logo-bar-navigation is-small-screen="isSmallScreen" show-about-dialog="showAboutDialog()" mail-to-link="mailToLink"/><a ng-if="!isSmallScreen && showFullScreen" id="fullScreenIcon"><i class="glyphicon glyph-small pbi-glyph-fullscreen icon" ng-if="!isFullScreen()" ng-click="toggleFullScreenMode()" localize-tooltip="ReportEmbed_Logobar_FullScreen_Enter"></i><i class="glyphicon glyph-small pbi-glyph-fullscreenexit icon" ng-if="isFullScreen()" ng-click="toggleFullScreenMode()" localize-tooltip="FullScreen_Exit"></i></a><i ng-if="!isSmallScreen && !socialSharingFeatureEnabled" class="glyphicon pbi-glyph-info glyph-small icon" ng-click="showAboutDialog()" localize-tooltip="ReportEmbed_Logobar_AboutPowerBI"></i><a ng-if="!isSmallScreen && !socialSharingFeatureEnabled" ng-show="showFlag" ng-href="{{mailToLink}}" localize-tooltip="ReportEmbed_Logobar_InappropriateContent"><i class="glyphicon pbi-glyph-flag glyph-small icon"></i></a><span ng-if="!isSmallScreen && socialSharingFeatureEnabled"><logo-bar-social-sharing></logo-bar-social-sharing></span></div></div></div>'),e.put("views/logoBarNavigation.html",' <span class="navigation-wrapper" ng-class="{\'navigation-wrapper-big\': !isSmallScreen}"><a><i class="glyphicon glyph-small pbi-glyph-chevronleftmedium middleIcon" ng-click="navigationPreviousPage()" ng-show="allPagesCount !==undefined && allPagesCount>1" ng-class="(currentPageNumber === 0) ? \'inactive\' : \'active\'" localize-tooltip="ReportEmbed_Logobar_Navigation_PreviousPage"></i></a> <a class="middleText" ng-click="toggleOverlay()" ng-if="!isSmallScreen" ng-show="allPagesCount !==undefined && allPagesCount>1"> <span class="innerText">{{currentPageNumber+1}}</span><span localize="ReportEmbed_Logobar_PagesOf" class="innerText"></span> <span class="innerText">{{allPagesCount}}</span></a> <a><i class="glyphicon glyph-small pbi-glyph-chevronrightmedium middleIcon" ng-click="navigationNextPage()" ng-show="allPagesCount !==undefined && allPagesCount>1" ng-class="(currentPageNumber === allPagesCount-1) ? \'inactive\' : \'active\'" localize-tooltip="ReportEmbed_Logobar_Navigation_NextPage"></i></a> <a ng-if="isSmallScreen" ng-show="allPagesCount !==undefined && allPagesCount>= 1" ng-click="toggleOverlay()" localize-tooltip="ReportEmbed_Logobar_MoreOptions"><i class="glyphicon pbi-glyph-more glyph-small icon"></i></a></span><section class="navOverlay" id="flyoutElement" flyout-visible="false" ng-if="isSmallScreen"><div class="pageContainer" ng-hide="hidePageNavigationFlyout"><div class="overlayContent"><div class="overlaySections"><ul text-slide-animation="showOverlay" class="list"><li ng-repeat="(key, section) in sections track by key" class="sectionItemHidden animated"> <a ng-click="goToSection($index)" class="sectionItem" ng-class="$index === (currentPageNumber) ? \'selected\' : \'\'" title="{{section}}">{{section}}</a></li></ul></div></div></div><div class="iconContainer"><div ng-if="socialSharingFeatureEnabled"><logo-bar-social-sharing></logo-bar-social-sharing></div><div class="rightIcons"><i class="glyphicon pbi-glyph-info glyph-small overlayIcon" ng-click="showAboutDialog()"></i><a ng-href="{{mailToLink}}"><i class="glyphicon pbi-glyph-flag glyph-small overlayIcon"></i></a></div></div><a class="overlay-close" ng-click="toggleOverlay()" ng-hide="hidePageNavigationFlyout"><i class="glyphicon glyph-small pbi-glyph-close"></i></a></section><section ng-if="!isSmallScreen" id="flyoutElement" flyout-visible="false" class="navFlyout" ng-attr-style="height: {{40+allPagesCount*29}}px"><div class="wrapper"><div class="textContainer"><div class="flyoutSections"><ul text-slide-animation="showOverlay" class="list"><li ng-repeat="(key, section) in sections track by key" class="sectionItemHidden animated"> <a ng-click="goToSection($index)" class="sectionItem" ng-class="$index === (currentPageNumber) ? \'selected\' : \'\'" title="{{section}}">{{section}}</a></li></ul></div></div></div><div class="arrow"></div></section>'),e.put("views/logoBarSocialSharing.html",'<span class="leftIcons" ng-if="isSmallScreen"><a class="socialShare" ng-click="toggleSocialSharing()"><i class="glyphicon pbi-glyph-share glyph-small glyphicon-social-share"></i></a><span localize="ReportEmbed_Logobar_Share" class="shareText"></span></span><span class="navigation-wrapper"><a ng-click="toggleSocialSharing()" ng-if="!isSmallScreen" localize-tooltip="ReportEmbed_Logobar_Share"><i class="glyphicon pbi-glyph-share glyph-small icon"></i></a><a ng-if="!isSmallScreen && !isMediumScreen" ng-href="https://www.facebook.com/sharer/sharer.php?u={{shareLink}}" ng-attr-target="{{\'_blank\'}}" ng-click="openUsingWindow($event)" localize-tooltip="ReportEmbed_Logobar_Facebook"><div class="glyphicon glyphicon-share-facebook glyph-small icon"/></a><a ng-if="!isSmallScreen && !isMediumScreen" ng-href="https://twitter.com/intent/tweet?text={{shareLink}}" ng-attr-target="{{\'_blank\'}}" ng-click="openUsingWindow($event)" localize-tooltip="ReportEmbed_Logobar_Twitter"><div class="glyphicon glyphicon-share-twitter glyph-small icon"/></a><a ng-if="!isSmallScreen && !isMediumScreen" ng-href="https://www.linkedin.com/shareArticle?mini=true&url={{shareLink}}" ng-attr-target="{{\'_blank\'}}" ng-click="openUsingWindow($event)" localize-tooltip="ReportEmbed_Logobar_LinkedIn"><div class="glyphicon glyphicon-share-linkedIn glyph-small icon"/></a></span><section ng-if="isSmallScreen && socialSharingVisible" id="socialSharingflyoutElement" class="navOverlay"><div class="pageContainer"><div class="sharingContainerSmallScreen"><header localize="ReportEmbed_Logobar_Share" class="sharingFlyoutHeader"></header><p localize="ReportEmbed_Logobar_ShareUrl" class="sharingUrlText"></p> <input class="sharingUrlBox" readonly onClick="this.setSelectionRange(0, this.value.length); event.stopPropagation(); " ng-model=\'textShareLink\' autofocus/><span class="smallScreenSocialIcons"><a ng-href="https://www.facebook.com/sharer/sharer.php?u={{shareLink}}" ng-attr-target="{{\'_blank\'}}" ng-click="openUsingWindow($event)"><div class="glyphicon glyphicon-share-facebook-large"/></a><a ng-href="https://twitter.com/intent/tweet?text={{shareLink}}" ng-attr-target="{{\'_blank\'}}" ng-click="openUsingWindow($event)"><div class="glyphicon glyphicon-share-twitter-large"/></a><a ng-href="https://www.linkedin.com/shareArticle?mini=true&url={{shareLink}}" ng-attr-target="{{\'_blank\'}}" ng-click="openUsingWindow($event)"><div class="glyphicon glyphicon-share-linkedIn-large"/></a><a ng-href="{{socialSharingEmailLink}}"><div class="glyphicon pbi-glyph-mail emailOverlayLarge"/></a></span></div></div><div class="iconContainer"><span class="leftIcons"><a class="socialShare" ng-click="toggleSocialSharing()"><i class="glyphicon pbi-glyph-share glyph-small glyphicon-social-share"></i></a><span localize="ReportEmbed_Logobar_Share" class="shareText"></span></span><span class="rightIcons"><i class="glyphicon pbi-glyph-info glyph-small overlayIcon" ng-click="showAboutDialog()"></i><a ng-href="{{mailToLink}}"><i class="glyphicon pbi-glyph-flag glyph-small overlayIcon"></i></a></span></div><a class="overlay-close" ng-click="closeSocialSharing()"><i class="glyphicon glyph-small pbi-glyph-close"></i></a></section><section ng-if="!isSmallScreen && socialSharingVisible" id="socialSharingflyoutElement" class="socialSharingFlyout"><header localize="ReportEmbed_Logobar_Share" class="sharingFlyoutHeader"></header><p localize="ReportEmbed_Logobar_ShareUrl" class="sharingUrlText"></p> <input class="sharingUrlBox" readonly onClick="this.setSelectionRange(0, this.value.length); event.stopPropagation(); " ng-model=\'textShareLink\' autofocus/><span class="urlTextIcons"><a ng-if="isMediumScreen" ng-href="https://www.facebook.com/sharer/sharer.php?u={{shareLink}}" ng-attr-target="{{\'_blank\'}}" ng-click="openUsingWindow($event)" localize-tooltip="ReportEmbed_Logobar_Facebook"><div class="glyphicon glyphicon-share-facebook-medium glyph-small shareFlyoutIcon"/></a><a ng-if="isMediumScreen" ng-href="https://twitter.com/intent/tweet?text={{shareLink}}" ng-attr-target="{{\'_blank\'}}" ng-click="openUsingWindow($event)" localize-tooltip="ReportEmbed_Logobar_Twitter"><div class="glyphicon glyphicon-share-twitter-medium glyph-small shareFlyoutIcon"/></a><a ng-if="isMediumScreen" ng-href="https://www.linkedin.com/shareArticle?mini=true&url={{shareLink}}" ng-attr-target="{{\'_blank\'}}" ng-click="openUsingWindow($event)" localize-tooltip="ReportEmbed_Logobar_LinkedIn"><div class="glyphicon glyphicon-share-linkedIn-medium glyph-small shareFlyoutIcon"/></a><a ng-href="{{socialSharingEmailLink}}" localize-tooltip="ReportEmbed_Logobar_ShareViaEmail"><i class="glyphicon pbi-glyph-mail glyph-small shareFlyoutIcon"></i></a><i class="glyphicon pbi-glyph-info glyph-small shareFlyoutIcon" ng-click="showAboutDialog()" localize-tooltip="ReportEmbed_Logobar_AboutPowerBI"></i><a ng-href="{{mailToLink}}" localize-tooltip="ReportEmbed_Logobar_InappropriateContent"><i class="glyphicon pbi-glyph-flag glyph-small shareFlyoutIcon"></i></a></span><div class="arrow"></div></section>');
}]);

window.parseTimeMarkers['powerbireportembed.common.bundle.min.js'].end = Date.now();
