"use strict";
window.parseTimeMarkers = window.parseTimeMarkers || {};
window.parseTimeMarkers['VisualsSandboxCore.min.js'] = {
    nominalStart: Date.now(),
    start: Date.now()
};
var powerbi;!(function(e){var a;!(function(e){e[e.Grouping=0]="Grouping",e[e.Measure=1]="Measure",e[e.GroupingOrMeasure=2]="GroupingOrMeasure"})(a=e.VisualDataRoleKind||(e.VisualDataRoleKind={}));var i;!(function(e){e[e.Create=0]="Create",e[e.Append=1]="Append"})(i=e.VisualDataChangeOperationKind||(e.VisualDataChangeOperationKind={}));var n;!(function(e){e[e.Data=2]="Data",e[e.Resize=4]="Resize",e[e.ViewMode=8]="ViewMode",e[e.Style=16]="Style",e[e.ResizeEnd=32]="ResizeEnd",e[e.All=62]="All"})(n=e.VisualUpdateType||(e.VisualUpdateType={}));var r;!(function(e){})(r=e.VisualPermissions||(e.VisualPermissions={}))})(powerbi||(powerbi={}));;"use strict";window.DEBUG=!1,$.fn.multiline=function(e){return this.text(e),this.html(this.html().replace(/\n/g,"<br/>")),this},$.fn.togglePanelControl=function(){return this.each((function(){$(this).addClass("ui-accordion ui-accordion-icons ui-widget ui-helper-reset").find(".accordionHeader").addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-top ui-corner-bottom").hover((function(){$(this).toggleClass("ui-state-hover")})).prepend('<span class="ui-icon ui-icon-triangle-1-e"></span>').click((function(){return $(this).toggleClass("ui-accordion-header-active ui-state-active ui-state-default ui-corner-bottom").find("> .ui-icon").toggleClass("ui-icon-triangle-1-e ui-icon-triangle-1-s").end().next().slideToggle(),!1})).next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide()}))};var jsCommon;!(function(e){var r;!(function(e){e.VisibleSelector=":visible"})(r=e.JQueryConstants||(e.JQueryConstants={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){function r(e){void 0===e&&(e=1);var r,n;try{throw new Error}catch(t){r=t.stack,null!=r&&(n=r.split("\n"),n.splice(1,e),r=n.join("\n"))}return r}var n;!(function(e){function n(e){return{name:"argumentNull",argument:e,message:"Argument was null",stack:a()}}function t(e){return{name:"argumentUndefined",argument:e,message:"Argument was undefined",stack:a()}}function o(e){return{name:"argumentOutOfRange",argument:e,message:"Argument was out of range",stack:a()}}function i(e){return{name:"notImplementedException",message:e,stack:a()}}function a(){return r(2)}e.argumentNull=n,e.argumentUndefined=t,e.argumentOutOfRange=o,e.notImplementedException=i})(n=e.Errors||(e.Errors={})),e.getStackTrace=r})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var r;!(function(e){e[e.Information=0]="Information",e[e.Verbose=1]="Verbose",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.ExpectedError=4]="ExpectedError",e[e.UnexpectedError=5]="UnexpectedError",e[e.Fatal=6]="Fatal"})(r=e.TraceType||(e.TraceType={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var r=(function(){function e(e,r,n,t){this.text=e,this.type=r,this.sessionId=n,this.requestId=t,this.timeStamp=new Date}return e.prototype.toString=function(){var r="";return r+=e.traceTypeStrings[this.type]+" ("+this.timeStamp.toUTCString()+"): "+this.text,this.requestId&&(r+="\n(Request id: "+this.requestId+")"),r},e})();r.traceTypeStrings=["INFORMATION","VERBOSE","WARNING","ERROR","EXPECTEDERROR","UNEXPECTEDERROR","FATAL"],e.TraceItem=r})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var r=(function(){function r(){}return r.prototype.logTrace=function(r){if(window.DEBUG)switch(r.type){case e.TraceType.Information:break;case e.TraceType.UnexpectedError:case e.TraceType.Error:case e.TraceType.Fatal:break;case e.TraceType.ExpectedError:case e.TraceType.Warning:break;case e.TraceType.Verbose:}},r})();e.ConsoleTracer=r;var n;!(function(n){function t(r,n){p(new e.TraceItem(r,e.TraceType.Warning,n))}function o(r,n,t){n&&(r=e.StringExtensions.format("{0}.\nStack:\n{1}",r,e.getStackTrace())),p(new e.TraceItem(r,e.TraceType.Error,t))}function i(r,n){p(new e.TraceItem(r,e.TraceType.Verbose,n))}function a(e){S.push(e)}function u(e){var r=S.indexOf(e);r>=0&&S.splice(r,1)}function c(){S=new Array(v)}function f(){h=-1}function s(){if(!(h<0)){for(var e=new Array(h+1),r=0;r<=h;r++)e[r]=g[r];return e}}function l(){u(v)}function d(){a(v)}function p(e){h+1>=m&&f(),g[++h]=e;for(var r=0,n=S.length;r<n;r++)S[r].logTrace(e)}var m=1e3,g=new Array(m),h=-1,v=new r,S=new Array(v);n.warning=t,n.error=o,n.verbose=i,n.addListener=a,n.removeListener=u,n.resetListeners=c,n.reset=f,n.getTraces=s,n.disableDefaultListener=l,n.enableDefaultListener=d})(n=e.Trace||(e.Trace={}))})(jsCommon||(jsCommon={}));var powerbi;!(function(e){function r(){return new t}e.createJQueryPromiseFactory=r;var n;!(function(e){e[e.pending=0]="pending",e[e.resolved=1]="resolved",e[e.rejected=2]="rejected"})(n=e.JQueryPromiseState||(e.JQueryPromiseState={}));var t=(function(){function e(){}return e.prototype.defer=function(){return new o($.Deferred())},e.prototype.reject=function(e){var r=this.defer();return r.reject(e),r.promise},e.prototype.resolve=function(e){var r=this.defer();return r.resolve(e),r.promise},e.prototype.all=function(e){var r=jQuery.map(e,(function(e){return e&&e.promise?e.promise:e}));return new i($.when.apply($,r).then((function(){return Array.prototype.slice.call(arguments)})))},e.prototype.allSettled=function(e){var r=this.defer(),n=e.length;if(n>0)for(var t=0,o=[],i=function(i){e[i].then((function(e){o[i]={value:e,type:0}})).catch((function(e){o[i]={value:e,type:1}})).finally((function(){t++,t===n&&r.resolve(o)}))},a=0;a<n;a++)i(a);else r.resolve([]);return r.promise},e.prototype.when=function(e){var r=e&&e.promise?e.promise:e;return new i($.when(r))},e})(),o=(function(){function e(e){this.deferred=e,this.promise=new i(e.promise())}return e.prototype.resolve=function(e){this.deferred.resolve(e)},e.prototype.reject=function(e){this.deferred.reject(e)},e})(),i=(function(){function e(e){this.promise=e}return e.prototype.then=function(r,n){return new e(this.promise.then(e.wrapCallback(r),e.wrapCallback(n)))},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(r){return this.promise.always(e.wrapCallback(r)),this},e.wrapCallback=function(r){return r?function(){var n=r.apply(this,arguments);return n instanceof e?n.promise:n}:r},e})()})(powerbi||(powerbi={}));var jsCommon;!(function(e){var r;!(function(e){e[e.OK=200]="OK",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.RequestEntityTooLarge=413]="RequestEntityTooLarge"})(r=e.HttpStatusCode||(e.HttpStatusCode={}));var n;!(function(e){e.ApplicationOctetStream="application/octet-stream",e.MultiPartFormData="multipart/form-data"})(n=e.HttpConstants||(e.HttpConstants={}));var t;!(function(e){function r(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0];if(c(n))return n;for(var t=0;t<e.length-1;t++){var o=new RegExp("\\{"+t+"\\}","gm");n=n.replace(o,e[t+1])}return n}function n(r,n){return e.normalizeCase(r)===e.normalizeCase(n)}function t(r,n){var t=e.normalizeCase(n);return 0===e.normalizeCase(r).indexOf(t)}function i(e,r){return null!=e&&e.indexOf(r)!==-1}function a(e,r){return null!=e&&i(u(e),u(r))}function u(r){return o.throwIfNullOrUndefined(r,e,"normalizeCase","value"),r.toUpperCase()}function c(e){return _.isEmpty(e)||_.isEmpty(e.trim())}function f(e){o.throwIfNullOrUndefined(e,o,"containsWhitespace","str");var r=/\s/;return r.test(e)}function s(e){return""===_.trim(e)}function l(e){return o.throwIfNullOrUndefined(e,o,"trimTrailingWhitespace","str"),e.replace(/\s+$/,"")}function d(e){return o.throwIfNullOrUndefined(e,o,"trimWhitespace","str"),e.replace(/^\s+/,"").replace(/\s+$/,"")}function p(e,r,n){if(!r)return e;var t=S(r);return e.replace(new RegExp(t,"gi"),n)}function m(e){for(var r={},n=0,t=e;n<t.length;n++){var o=t[n];r[o]=!1}for(var i=[],a=0,u=e;a<u.length;a++){var c=u[a],f=c;if(r[f])for(var s=0;void 0!==r[f];)f=c+"."+ ++s;i.push(f),r[f]=!0}return i}function g(e,r){for(var n=0,t=r;e[t];)t=r+ ++n;return t}function h(e,r,n){for(var t,o=[],i=0,a=0,u=e;a<u.length;a++){var c=u[a];if(i+c.length>n&&o.length>0){t=!0;break}o.push(c),i+=c.length}var f=" "+r+" ",s=o.join(f);return t&&(s+=f+"..."),s}function v(r,n,t){if(!r||0===r.length)return"";null!==t&&void 0!==t||(t=Number.MAX_VALUE);for(var o=Math.min(t,r.length),i=[],a=0;a<2;a++)for(var u="{"+a+"}",c="_|_<"+a+">_|_",f=0;f<o;f++)r[f].indexOf(u)>-1&&(r[f]=r[f].replace(u,c),i.push({targetValue:u,replaceValue:c}));for(var s="",f=0;f<o;f++)s=0===f?r[f]:e.format(n.get("FilterRestatement_Comma"),s,r[f]);for(var f=0;f<i.length;f++)s=s.replace(i[f].replaceValue,i[f].targetValue);return s}function S(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}function T(e){return e.replace(/[\<\>\:"\/\\\|\?*]/g,"")}function E(e){return JSON.stringify(e)}function C(e,r){var n=e.replace(/^[^A-Za-z]*/g,"").replace(/[ :\.\/\\\-\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000]/g,"_").replace(/[\W]/g,"");return n.length>0?n:r}function I(e){return e.replace(b,"")}function y(e,r){if(void 0===r&&(r=!1),!e)return e;var n=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,(function(e){var r=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(r-55296)+(n-56320)+65536)+";"})).replace(/([^!-~ ])/g,(function(e){return"&#"+e.charCodeAt(0)+";"}));return r&&(n=n.replace(/\ /g,"&nbsp;")),n}var b=new RegExp("[<>]","g");e.format=r,e.equalIgnoreCase=n,e.startsWithIgnoreCase=t,e.contains=i,e.containsIgnoreCase=a,e.normalizeCase=u,e.isNullOrUndefinedOrWhiteSpaceString=c,e.containsWhitespace=f,e.isWhitespace=s,e.trimTrailingWhitespace=l,e.trimWhitespace=d,e.replaceAll=p,e.ensureUniqueNames=m,e.findUniqueName=g,e.constructNameFromList=h,e.constructCommaSeparatedList=v,e.escapeStringForRegex=S,e.normalizeFileName=T,e.stringifyAsPrettyJSON=E,e.deriveClsCompliantName=C,e.stripTagDelimiters=I,e.encodeHtml=y})(t=e.StringExtensions||(e.StringExtensions={}));var o=(function(){function r(){}return r.throwIfNullOrUndefined=function(n,t,o,i){null===n?r.throwException(e.Errors.argumentNull(r.getComponentName(t)+o+"."+i)):void 0===n&&r.throwException(e.Errors.argumentUndefined(r.getComponentName(t)+o+"."+i))},r.throwIfNullOrEmptyString=function(n,t,o,i){r.throwIfNullOrUndefined(n,t,o,i),n.length<1&&r.throwException(e.Errors.argumentOutOfRange(r.getComponentName(t)+o+"."+i))},r.valueOrDefault=function(e,r){return null!=e?e:r},r.urlCombine=function(e,n){if(r.throwIfNullOrUndefined(e,null,"urlCombine","baseUrl"),r.throwIfNullOrUndefined(n,null,"urlCombine","path"),t.isNullOrUndefinedOrWhiteSpaceString(n))return e;if(t.isNullOrUndefinedOrWhiteSpaceString(e))return n;var o=e;return"/"===o.charAt(o.length-1)?"/"===n.charAt(0)&&(n=n.slice(1)):"/"!==n.charAt(0)&&(n="/"+n),o+n},r.getAbsoluteUri=function(e){r.throwIfNullOrUndefined(e,null,"getAbsoluteUri","path");var n=e;return n&&n.indexOf("http")===-1&&(n=r.urlCombine(clusterUri,n)),n},r.getStaticResourceUri=function(n){r.throwIfNullOrUndefined(n,null,"getStaticResourceUri","path");var t=n;return t&&t.indexOf("http")===-1&&(t=e.Utility.urlCombine(r.staticContentLocation,t)),t},r.getComponentName=function(e){return e?(typeof e).toString()+".":""},r.throwException=function(r){throw e.Trace.error("Throwing exception: "+JSON.stringify(r),null==r.stack),r},r.createClassSelector=function(e){return r.throwIfNullOrEmptyString(e,null,"CreateClassSelector","className"),"."+e},r.createIdSelector=function(e){return r.throwIfNullOrEmptyString(e,null,"CreateIdSelector","id"),"#"+e},r.generateGuid=function(){var e="",r=0;for(r=0;r<32;r+=1){var n=16*Math.random()|0;switch(r){case 8:case 12:case 16:case 20:e+="-"}e+=n.toString(16)}return e},r.getCookieValue=function(e){for(var r=document.cookie.split(";"),n=0;n<r.length;n++){var t=r[n],o=t.split("=");if(o.length>0&&o[0].trim()===e)return t.substr(t.indexOf("=")+1)}return null},r.getDomainForUrl=function(e){var n=r.getHrefObjectFromUrl(e);return n.prop("protocol")+"//"+n.prop("hostname")},r.getHostNameForUrl=function(e){var n=r.getHrefObjectFromUrl(e);return r.urlCombine(n.prop("hostname"),n.prop("pathname"))},r.getUrlWithoutQueryString=function(e){var n=r.getHrefObjectFromUrl(e);return n.prop("protocol")+"//"+r.urlCombine(n.prop("host"),n.prop("pathname"))},r.getProtocolFromUrl=function(e){return r.getHrefObjectFromUrl(e).prop("protocol").replace(":","")},r.getHrefObjectFromUrl=function(e){var r=$("<a>");return r=r.prop("href",e)},r.getDateFromWcfJsonString=function(e,r){if(_.isEmpty(e))return null;var n=e.indexOf("("),t=e.indexOf(")");if(n!==-1&&t!==-1){var o=parseInt(e.substring(n+1,t),10);if(isNaN(o)&&(o=0),r)return new Date(o);var i=new Date(0);return i.setUTCMilliseconds(o),i}return null},r.isValidImageDataUrl=function(e){var r=new RegExp("data:(image/(png|jpg|jpeg|gif|svg))");return r.test(e)},r.isLocalUrl=function(e){return _.startsWith(e,"data:")||_.startsWith(e,"blob:")},r.extractFileNameFromPath=function(e){return e.replace(/^.*[\\\/]/,"")},r.canUseClipboard=function(){return"undefined"==typeof MSApp},r.is64BitOperatingSystem=function(){return navigator.userAgent.indexOf("WOW64")!==-1||navigator.userAgent.indexOf("Win64")!==-1},r.parseNumber=function(e,r){if(null===e)return null;if(void 0===e)return r;var n=Number(e);return isFinite(n)?n:isNaN(n)&&"number"!=typeof e&&"NaN"!==e?r:n},r.getURLParamValue=function(e){var r=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==r?null:r[1]||0},r.getLocalTimeZoneString=function(){var e,r=new Date(Date.UTC(2005,6,30,0,0,0,0)),n=-1*r.getTimezoneOffset(),t=new Date(Date.UTC(2005,12,30,0,0,0,0)),o=-1*t.getTimezoneOffset();return e=-720===n&&-720===o?"Dateline Standard Time":-660===n&&-660===o?"UTC-11":-660===n&&-660===o?"Samoa Standard Time":-600===n&&-600===o?"Hawaiian Standard Time":-480===n&&-540===o?"Alaskan Standard Time":-420===n&&-480===o?"Pacific Standard Time":-420===n&&-420===o?"US Mountain Standard Time":-360===n&&-420===o?"Mountain Standard Time":-360===n&&-360===o?"Central America Standard Time":-300===n&&-360===o?"Central Standard Time":-300===n&&-300===o?"SA Pacific Standard Time":-240===n&&-300===o?"Eastern Standard Time":-270===n&&-270===o?"Venezuela Standard Time":-240===n&&-240===o?"SA Western Standard Time":-240===n&&-180===o?"Central Brazilian Standard Time":-180===n&&-240===o?"Atlantic Standard Time":-180===n&&-180===o?"Montevideo Standard Time":-180===n&&-120===o?"E. South America Standard Time":-150===n&&-210===o?"Mid-Atlantic Standard Time":-120===n&&-120===o?"SA Eastern Standard Time":0===n&&0===o?"UTC":60===n&&0===o?"GMT Standard Time":60===n&&120===o?"Namibia Standard Time":120===n&&60===o?"Romance Standard Time":120===n&&120===o?"South Africa Standard Time":180===n&&120===o?"GTB Standard Time":180===n&&180===o?"E. Africa Standard Time":240===n&&180===o?"Russian Standard Time":240===n&&240===o?"Arabian Standard Time":270===n&&210===o?"Iran Standard Time":270===n&&270===o?"Afghanistan Standard Time":300===n&&240===o?"Pakistan Standard Time":300===n&&300===o?"West Asia Standard Time":330===n&&330===o?"India Standard Time":345===n&&345===o?"Nepal Standard Time":360===n&&300===o?"N. Central Asia Standard Time":360===n&&360===o?"Central Asia Standard Time":390===n&&390===o?"Myanmar Standard Time":420===n&&360===o?"North Asia Standard Time":420===n&&420===o?"SE Asia Standard Time":480===n&&420===o?"North Asia East Standard Time":480===n&&480===o?"China Standard Time":540===n&&480===o?"Yakutsk Standard Time":540===n&&540===o?"Tokyo Standard Time":570===n&&570===o?"Cen. Australia Standard Time":600===n&&600===o?"E. Australia Standard Time":600===n&&660===o?"AUS Eastern Standard Time":660===n&&600===o?"Tasmania Standard Time":660===n&&660===o?"West Pacific Standard Time":690===n&&690===o?"Central Pacific Standard Time":720===n&&660===o?"Magadan Standard Time":720===n&&720===o?"Fiji Standard Time":720===n&&780===o?"New Zealand Standard Time":780===n&&780===o?"Tonga Standard Time":"UTC"},r})();o.JsonContentType="application/json",o.JpegContentType="image/jpeg",o.BlobDataType="blob",o.ArrayBufferDataType="arraybuffer",o.HttpAcceptHeader="Accept",o.staticContentLocation=window.location.protocol+"//"+window.location.host,e.Utility=o;var i=(function(){function e(){}return e.compareVersions=function(e,r){for(var n=e.split(".").map(parseFloat),t=r.split(".").map(parseFloat),o=Math.max(n.length,t.length),i=0;i<o;i++){var a=n[i]||0,u=t[i]||0;if(a>u)return 1;if(a<u)return-1}return 0},e})();e.VersionUtility=i;var a;!(function(e){function r(e){var r=window.performance;if(!r||!r.mark)return _.noop;console.time;var n="Begin "+e;return r.mark(n),function(){var t="End "+e;r.mark(t),r.measure&&r.measure(e,n,t),console.timeEnd}}e.start=r})(a=e.PerfTimer||(e.PerfTimer={}));var u;!(function(e){function r(e){var r,n,t;return window.requestAnimationFrame||(window.requestAnimationFrame=function(e){return setTimeout(e,20)}),function(){r||(r=!0,n=arguments,t=this,window.requestAnimationFrame((function(){r=!1,e.apply(t,n)})))}}e.deferUntilNextFrame=r})(u=e.DeferUtility||(e.DeferUtility={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var r;!(function(e){function r(e,r){return(e&r)===r}function n(e,r){return e|=r}function t(e,r){return e&=~r}function o(e,r){return e[r]}function i(e){if(null===e||e%1!==0)return 0;for(var r=0,n=e;0!==n;)1===(1&n)&&r++,n>>>=1;return r}e.hasFlag=r,e.setFlag=n,e.resetFlag=t,e.toString=o,e.getBitCount=i})(r=e.EnumExtensions||(e.EnumExtensions={}));var n;!(function(e){function r(e,r){return(e||r)&&!(e&&r)}e.XOR=r})(n=e.LogicExtensions||(e.LogicExtensions={}));var t;!(function(e){function r(e,r){return e===r||JSON.stringify(e)===JSON.stringify(r)}e.equals=r})(t=e.JsonComparer||(e.JsonComparer={}));var o;!(function(e){function r(r){return(r-e.TextSizeMin)/n}e.TextSizeMin=8,e.TextSizeMax=40;var n=e.TextSizeMax-e.TextSizeMin;e.getScale=r})(o=e.TextSizeDefaults||(e.TextSizeDefaults={}));var i;!(function(e){function r(e){return e+i}function n(e){return r(t(e))}function t(r){return e.PxPtRatio*r}function o(r){return r/e.PxPtRatio}e.PxPtRatio=4/3;var i="px";e.toString=r,e.fromPoint=n,e.fromPointToPixel=t,e.toPoint=o})(i=e.PixelConverter||(e.PixelConverter={}));var a;!(function(e){function r(e,r,n){return e.lastIndex=n||0,e.exec(r)}e.run=r})(a=e.RegExpExtensions||(e.RegExpExtensions={}))})(jsCommon||(jsCommon={}));var debug;!(function(e){function r(e,r){e!==!0&&i(r||"condition: "+e)}function n(e,r){null!==e&&void 0!==e||i(r||"condition: "+e)}function t(e,r){null!=e&&e.length>0||i(r||"condition: "+e)}function o(e,r){}function i(r){(e.assertFailFunction||alert)("Debug Assert failed: "+r)}function a(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n]}function u(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];console&&console.warn||a.apply(void 0,[e].concat(r))}e.assert=r,e.assertValue=n,e.assertNonEmpty=t,e.assertAnyValue=o,e.assertFail=i,e.log=a,e.warn=u})(debug||(debug={}));var powerbi;!(function(e){var r;!(function(e){function r(e,r){function n(){}n.prototype=e;var t=new n;return r&&r(t),t}function n(e){var n=Object.getPrototypeOf(e);return n!==Object.prototype&&n!==Array.prototype||(e=r(e)),e}function t(e,n){if(e){for(var t,o=0,i=e.length;o<i;o++){var a=n(e[o]);a&&(t||(t=r(e)),t[o]=a)}return t}}e.inherit=r,e.inheritSingle=n,e.overrideArray=t})(r=e.Prototype||(e.Prototype={}))})(powerbi||(powerbi={}));var jsCommon;!(function(e){var r=(function(){function e(){}return e.prototype.create=function(e){var r=$.Deferred();return window.setTimeout((function(){return r.resolve()}),e),r},e})();r.instance=new r,e.TimerPromiseFactory=r})(jsCommon||(jsCommon={}));var powerbi;!(function(e){var r;!(function(e){function r(r){return r>=0?r<e.POSITIVE_POWERS.length?e.POSITIVE_POWERS[r]:1/0:(r=-r,r>0&&r<e.NEGATIVE_POWERS.length?e.NEGATIVE_POWERS[r]:0)}function n(r){if(r>1&&r<1e16)return r<1e8?r<1e4?r<100?r<10?0:1:r<1e3?2:3:r<1e6?r<1e5?4:5:r<1e7?6:7:r<1e12?r<1e10?r<1e9?8:9:r<1e11?10:11:r<1e14?r<1e13?12:13:r<1e15?14:15;if(r>1e-16&&r<1)return r<1e-8?r<1e-12?r<1e-14?r<1e-15?-16:-15:r<1e-13?-14:-13:r<1e-10?r<1e-11?-12:-11:r<1e-9?-10:-9:r<1e-4?r<1e-6?r<1e-7?-8:-7:r<1e-5?-6:-5:r<.01?r<.001?-4:-3:r<.1?-2:-1;var n=Math.log(r)/e.LOG_E_10;return e.floorWithPrecision(n)}function t(r,n){if(void 0===n&&(n=e.DEFAULT_PRECISION_IN_DECIMAL_DIGITS),r&&isFinite(r)){var t=e.log10(Math.abs(r));if(t<e.MIN_EXP)return 0;var o=Math.max(t-n,-e.NEGATIVE_POWERS.length+1);return e.pow10(o)}}function o(e,r,n){return n=E(n,e,r),e===r||Math.abs(e-r)<n}function i(e,r,n){return n=E(n,e,r),e<r&&Math.abs(e-r)>n}function a(e,r,n){return n=E(n,e,r),e<r||Math.abs(e-r)<n}function u(e,r,n){return n=E(n,e,r),e>r&&Math.abs(e-r)>n}function c(e,r,n){return n=E(n,e,r),e>r||Math.abs(e-r)<n}function f(r,n){n=null!=n?n:e.DEFAULT_PRECISION;var t=Math.round(r);return Math.abs(r-t)<n?t:Math.floor(r)}function s(r,n){n=E(n,e.DEFAULT_PRECISION);var t=Math.round(r);return Math.abs(r-t)<n?t:Math.ceil(r)}function l(r,n){return n=E(n,e.DEFAULT_PRECISION),0===n||0===r?r:Math.floor(r/n)*n}function d(r,n){return n=E(n,e.DEFAULT_PRECISION),0===n||0===r?r:Math.ceil(r/n)*n}function p(r,n){if(n=E(n,e.DEFAULT_PRECISION),0===n||0===r)return r;var t=Math.round(r/n)*n,o=Math.round(e.log10(Math.abs(r))-e.log10(n))+1;return o>0&&o<16&&(t=parseFloat(t.toPrecision(o))),t}function m(e,r,n){return void 0===e||null===e?e:e<r?r:e>n?n:e}function g(e){return.5+e<<0}function h(e,r,n,t,o){if(0===n||0===o)return r<=e&&e<=r+n?t:NaN;var i=(e-r)/n,a=t+i*o;return a}function v(e){return p(e,t(e))}function S(e){return null!==e&&e%1===0}function T(e,r){return Math.round(e/r)*r}function E(r,n,t){if(void 0!==r)return r;var o;return o=t?n?e.getPrecision(Math.min(Math.abs(n),Math.abs(t))):e.getPrecision(t):e.getPrecision(n),o||e.DEFAULT_PRECISION}e.MIN_VALUE=-Number.MAX_VALUE,e.MAX_VALUE=Number.MAX_VALUE,e.MIN_EXP=-308,e.MAX_EXP=308,e.EPSILON=1e-323,e.DEFAULT_PRECISION=1e-4,e.DEFAULT_PRECISION_IN_DECIMAL_DIGITS=12,e.LOG_E_10=Math.log(10),e.POSITIVE_POWERS=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14,1e15,1e16,1e17,1e18,1e19,1e20,1e21,1e22,1e23,1e24,1e25,1e26,1e27,1e28,1e29,1e30,1e31,1e32,1e33,1e34,1e35,1e36,1e37,1e38,1e39,1e40,1e41,1e42,1e43,1e44,1e45,1e46,1e47,1e48,1e49,1e50,1e51,1e52,1e53,1e54,1e55,1e56,1e57,1e58,1e59,1e60,1e61,1e62,1e63,1e64,1e65,1e66,1e67,1e68,1e69,1e70,1e71,1e72,1e73,1e74,1e75,1e76,1e77,1e78,1e79,1e80,1e81,1e82,1e83,1e84,1e85,1e86,1e87,1e88,1e89,1e90,1e91,1e92,1e93,1e94,1e95,1e96,1e97,1e98,1e99,1e100,1e101,1e102,1e103,1e104,1e105,1e106,1e107,1e108,1e109,1e110,1e111,1e112,1e113,1e114,1e115,1e116,1e117,1e118,1e119,1e120,1e121,1e122,1e123,1e124,1e125,1e126,1e127,1e128,1e129,1e130,1e131,1e132,1e133,1e134,1e135,1e136,1e137,1e138,1e139,1e140,1e141,1e142,1e143,1e144,1e145,1e146,1e147,1e148,1e149,1e150,1e151,1e152,1e153,1e154,1e155,1e156,1e157,1e158,1e159,1e160,1e161,1e162,1e163,1e164,1e165,1e166,1e167,1e168,1e169,1e170,1e171,1e172,1e173,1e174,1e175,1e176,1e177,1e178,1e179,1e180,1e181,1e182,1e183,1e184,1e185,1e186,1e187,1e188,1e189,1e190,1e191,1e192,1e193,1e194,1e195,1e196,1e197,1e198,1e199,1e200,1e201,1e202,1e203,1e204,1e205,1e206,1e207,1e208,1e209,1e210,1e211,1e212,1e213,1e214,1e215,1e216,1e217,1e218,1e219,1e220,1e221,1e222,1e223,1e224,1e225,1e226,1e227,1e228,1e229,1e230,1e231,1e232,1e233,1e234,1e235,1e236,1e237,1e238,1e239,1e240,1e241,1e242,1e243,1e244,1e245,1e246,1e247,1e248,1e249,1e250,1e251,1e252,1e253,1e254,1e255,1e256,1e257,1e258,1e259,1e260,1e261,1e262,1e263,1e264,1e265,1e266,1e267,1e268,1e269,1e270,1e271,1e272,1e273,1e274,1e275,1e276,1e277,1e278,1e279,1e280,1e281,1e282,1e283,1e284,1e285,1e286,1e287,1e288,1e289,1e290,1e291,1e292,1e293,1e294,1e295,1e296,1e297,1e298,1e299,1e300,1e301,1e302,1e303,1e304,1e305,1e306,1e307,1e308],e.NEGATIVE_POWERS=[1,.1,.01,.001,1e-4,1e-5,1e-6,1e-7,1e-8,1e-9,1e-10,1e-11,1e-12,1e-13,1e-14,1e-15,1e-16,1e-17,1e-18,1e-19,1e-20,1e-21,1e-22,1e-23,1e-24,1e-25,1e-26,1e-27,1e-28,1e-29,1e-30,1e-31,1e-32,1e-33,1e-34,1e-35,1e-36,1e-37,1e-38,1e-39,1e-40,1e-41,1e-42,1e-43,1e-44,1e-45,1e-46,1e-47,1e-48,1e-49,1e-50,1e-51,1e-52,1e-53,1e-54,1e-55,1e-56,1e-57,1e-58,1e-59,1e-60,1e-61,1e-62,1e-63,1e-64,1e-65,1e-66,1e-67,1e-68,1e-69,1e-70,1e-71,1e-72,1e-73,1e-74,1e-75,1e-76,1e-77,1e-78,1e-79,1e-80,1e-81,1e-82,1e-83,1e-84,1e-85,1e-86,1e-87,1e-88,1e-89,1e-90,1e-91,1e-92,1e-93,1e-94,1e-95,1e-96,1e-97,1e-98,1e-99,1e-100,1e-101,1e-102,1e-103,1e-104,1e-105,1e-106,1e-107,1e-108,1e-109,1e-110,1e-111,1e-112,1e-113,1e-114,1e-115,1e-116,1e-117,1e-118,1e-119,1e-120,1e-121,1e-122,1e-123,1e-124,1e-125,1e-126,1e-127,1e-128,1e-129,1e-130,1e-131,1e-132,1e-133,1e-134,1e-135,1e-136,1e-137,1e-138,1e-139,1e-140,1e-141,1e-142,1e-143,1e-144,1e-145,1e-146,1e-147,1e-148,1e-149,1e-150,1e-151,1e-152,1e-153,1e-154,1e-155,1e-156,1e-157,1e-158,1e-159,1e-160,1e-161,1e-162,1e-163,1e-164,1e-165,1e-166,1e-167,1e-168,1e-169,1e-170,1e-171,1e-172,1e-173,1e-174,1e-175,1e-176,1e-177,1e-178,1e-179,1e-180,1e-181,1e-182,1e-183,1e-184,1e-185,1e-186,1e-187,1e-188,1e-189,1e-190,1e-191,1e-192,1e-193,1e-194,1e-195,1e-196,1e-197,1e-198,1e-199,1e-200,1e-201,1e-202,1e-203,1e-204,1e-205,1e-206,1e-207,1e-208,1e-209,1e-210,1e-211,1e-212,1e-213,1e-214,1e-215,1e-216,1e-217,1e-218,1e-219,1e-220,1e-221,1e-222,1e-223,1e-224,1e-225,1e-226,1e-227,1e-228,1e-229,1e-230,1e-231,1e-232,1e-233,1e-234,1e-235,1e-236,1e-237,1e-238,1e-239,1e-240,1e-241,1e-242,1e-243,1e-244,1e-245,1e-246,1e-247,1e-248,1e-249,1e-250,1e-251,1e-252,1e-253,1e-254,1e-255,1e-256,1e-257,1e-258,1e-259,1e-260,1e-261,1e-262,1e-263,1e-264,1e-265,1e-266,1e-267,1e-268,1e-269,1e-270,1e-271,1e-272,1e-273,1e-274,1e-275,1e-276,1e-277,1e-278,1e-279,1e-280,1e-281,1e-282,1e-283,1e-284,1e-285,1e-286,1e-287,1e-288,1e-289,1e-290,1e-291,1e-292,1e-293,1e-294,1e-295,1e-296,1e-297,1e-298,1e-299,1e-300,1e-301,1e-302,1e-303,1e-304,1e-305,1e-306,1e-307,1e-308,1e-309,1e-310,1e-311,1e-312,1e-313,1e-314,1e-315,1e-316,1e-317,1e-318,1e-319,1e-320,1e-321,1e-322,1e-323,0],e.pow10=r,e.log10=n,e.getPrecision=t,e.equalWithPrecision=o,e.lessWithPrecision=i,e.lessOrEqualWithPrecision=a,e.greaterWithPrecision=u,e.greaterOrEqualWithPrecision=c,e.floorWithPrecision=f,e.ceilWithPrecision=s,e.floorToPrecision=l,e.ceilToPrecision=d,e.roundToPrecision=p,e.ensureInRange=m,e.round=g,e.project=h,e.removeDecimalNoise=v,e.isInteger=S,e.toIncrement=T,e.detectPrecision=E})(r=e.Double||(e.Double={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var r;!(function(e){e.ClientErrorCode="Client Error Code",e.ErrorCode="Error Code",e.ErrorDetails="Error Details",e.HttpRequestId="HTTP Request Id",e.JobId="Job Id",e.ODataErrorMessage="OData Error Message",e.StackTrace="Stack Trace"})(r=e.ClientErrorStrings||(e.ClientErrorStrings={}));var n=(function(){function e(e){this.errorCode=e}return Object.defineProperty(e.prototype,"code",{get:function(){return this.errorCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignorable",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.getDetails=function(e){var n={message:e.get("ClientError_UnknownClientErrorValue"),displayableErrorInfo:[{errorInfoKey:e.get("ClientError_UnknownClientErrorKey"),errorInfoValue:e.get("ClientError_UnknownClientErrorValue")}],debugErrorInfo:[{errorInfoKey:r.ClientErrorCode,errorInfoValue:this.code}]};return n},e})();e.UnknownClientError=n;var t=(function(){function e(e,r){this.httpStatusCode=e,this.httpRequestId=r}return Object.defineProperty(e.prototype,"code",{get:function(){return"HttpClientError"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignorable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestId",{get:function(){return this.httpRequestId},enumerable:!0,configurable:!0}),e.prototype.getDetails=function(e){var n={message:null,displayableErrorInfo:[{errorInfoKey:e.get("DsrError_Key"),errorInfoValue:e.get("DsrError_UnknownErrorValue")},{errorInfoKey:e.get("ClientError_HttpResponseStatusCodeKey"),errorInfoValue:this.httpStatusCode.toString()}],debugErrorInfo:[{errorInfoKey:r.HttpRequestId,errorInfoValue:this.httpRequestId},{errorInfoKey:r.ClientErrorCode,errorInfoValue:this.code}]};return n},e})();e.HttpClientError=t;var o=(function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"IgnorableClientError"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignorable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.getDetails=function(e){var r={message:"",displayableErrorInfo:[]};return r},e})();e.IgnorableClientError=o})(powerbi||(powerbi={}));var jsCommon;!(function(e){var r,n=powerbi.Double;!(function(e){function r(e,r){if(0===r)return e;var n=o(e),t=i(n),c=u(t,r),f=a(c);return s(f)}function t(e){var r=o(e);return s(r)}function o(e){if(e.indexOf("#")>=0){if(7===e.length){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(null==r||r.length<4)return;return{R:parseInt(r[1],16),G:parseInt(r[2],16),B:parseInt(r[3],16)}}if(4===e.length){var r=/^#?([a-f\d])([a-f\d])([a-f\d])$/i.exec(e);if(null==r||r.length<4)return;return{R:parseInt(r[1]+r[1],16),G:parseInt(r[2]+r[2],16),B:parseInt(r[3]+r[3],16)}}}else{if(e.indexOf("rgb(")>=0){var r=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/.exec(e);if(null==r||r.length<4)return;return{R:parseInt(r[1],10),G:parseInt(r[2],10),B:parseInt(r[3],10)}}if(e.indexOf("rgba(")>=0){var r=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d*(?:\.\d+)?)\)$/.exec(e);if(null==r||r.length<5)return;return{R:parseInt(r[1],10),G:parseInt(r[2],10),B:parseInt(r[3],10),A:parseFloat(r[4])}}}}function i(e){var r,n,t=e.R/255,o=e.G/255,i=e.B/255,a=Math.min(t,Math.min(o,i)),u=Math.max(t,Math.max(o,i)),c=u,f=u-a;return 0===u||0===f?(r=0,n=0):(r=f/u,n=t===u?(o-i)/f:o===u?2+(i-t)/f:4+(t-o)/f),n/=6,n<0&&(n+=1),{H:n,S:r,V:c}}function a(e){var r,n,t,o=e.H,i=e.S,a=e.V;if(0===i)r=a,n=a,t=a;else{var u=void 0,c=void 0,f=void 0,s=void 0,l=void 0,d=void 0;switch(d=6*o,l=Math.floor(d),s=d-l,u=a*(1-i),c=a*(1-i*s),f=a*(1-i*(1-s)),l){case 0:r=a,n=f,t=u;break;case 1:r=c,n=a,t=u;break;case 2:r=u,n=a,t=f;break;case 3:r=u,n=c,t=a;break;case 4:r=f,n=u,t=a;break;case 5:r=a,n=u,t=c}}return{R:Math.floor(255*r),G:Math.floor(255*n),B:Math.floor(255*t)}}function u(e,r){var n=e.H+r;return{H:n>1?n-1:n,S:e.S,V:e.V}}function c(e,r){var n=Math.floor(r);return{R:Math.max(0,e.R-n),G:Math.max(0,e.G-n),B:Math.max(0,e.B-n)}}function f(e){return null==e.A?"rgb("+e.R+","+e.G+","+e.B+")":"rgba("+e.R+","+e.G+","+e.B+","+e.A+")"}function s(e){return"#"+h(e.R)+h(e.G)+h(e.B)}function l(e){return/^#[0-9a-f]{6}$/i.test(e)}function d(e,r,n){return s(p(o(e),r,o(n)))}function p(e,r,t){return r=n.ensureInRange(r,0,1),{R:m(e.R,r,t.R),G:m(e.G,r,t.G),B:m(e.B,r,t.B)}}function m(e,r,t){return r=n.ensureInRange(r,0,1),e=n.ensureInRange(e,0,255),t=n.ensureInRange(t,0,255),Math.round(r*e+(1-r)*t)}function g(e,r,n){var t=i(e);return(r+n>1||r<=0||n<=0)&&(r=.8,n=.2),t.V<r?t.V=t.V+n:t.V=t.V-n,s(a(t))}function h(e){var r=n.ensureInRange(e,0,255),t=r.toString(16).toUpperCase();return 1===t.length?"0"+t:t}function v(r,n,t){var o=n.map((function(r){return e.parseColorString(r)}));return function(i){if(null==i&&(i=0),!isNaN(i)){if(t){if(i>=_.last(r))return _.last(n);if(i<=r[0])return n[0]}for(var a,u,c,f,s=1,l=r.length;s<l;s++){if(a=r[s-1],u=r[s],a===Number.NEGATIVE_INFINITY&&isNaN(u))return n[s];if(i===u)return n[s];if(i>=a&&i<=u){c=o[s-1],f=o[s];break}}var d={R:S(i,a,u,c.R,f.R),G:S(i,a,u,c.G,f.G),B:S(i,a,u,c.B,f.B)};return e.hexString(d)}}}function S(e,r,n,t,o){return r===Number.NEGATIVE_INFINITY&&n===Number.POSITIVE_INFINITY?Math.round((o+t)/2):r===Number.NEGATIVE_INFINITY?o:n===Number.POSITIVE_INFINITY?t:Math.round(t+(e-r)*(o-t)/(n-r))}function T(e,r){var n=parseInt(e.slice(1),16),t=r<0?0:255,o=r<0?r*-1:r,i=n>>16,a=n>>8&255,u=255&n,c="#"+(16777216+65536*(Math.round((t-i)*o)+i)+256*(Math.round((t-a)*o)+a)+(Math.round((t-u)*o)+u)).toString(16).slice(1);return c}function E(r,n){var t=r.length;if(t<n){r=_.clone(r);for(var o=_.chain(r).map((function(r){return i(e.parseColorString(r))})).sortBy((function(e){return e.H})).value(),u=_.chain(o).map((function(e,r){return{color1:e,color2:o[r+1===o.length?0:r+1]}})).value(),c=i(e.parseColorString(_.last(r)));;){u.sort((function(e,r){return C(e,r,c)}));var f=u[0];u.splice(0,1);var l=f.color1,d=f.color2,p=w(f);if(r.push(s(a(p))),r.length>=n)break;u.push({color1:l,color2:p}),u.push({color1:p,color2:d}),c=p}}return r}function C(e,r,n){var t=O(n.H-.1),o=Math.sqrt(2*y(b(e),t)),i=Math.sqrt(2*y(b(r),t));return i*I(r)-o*I(e)}function I(e){return O(e.color2.H-e.color1.H)}function y(e,r){var n=Math.abs(r-e);return n>.5&&(n-=1),n}function b(e){var r=I(e);return 0===r&&(r=1),(e.color1.H+r/2)%1}function O(e){return e%=1,e<0&&(e+=1),e}function w(e){var r,n,t,o=e.color1,i=e.color2;return r=b(e),n=(o.S+i.S)/2,t=(o.V+i.V)/2,{H:r,S:n,V:t}}e.rotate=r,e.normalizeToHexString=t,e.parseColorString=o,e.darken=c,e.rgbString=f,e.hexString=s,
e.isFullHexString=l,e.hexBlend=d,e.rgbBlend=p,e.channelBlend=m,e.calculateHighlightColor=g,e.createLinearColorScale=v,e.shadeColor=T,e.expandDataColorSet=E})(r=e.Color||(e.Color={}))})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var r=(function(){function e(e){this.factoryMethod=e}return e.prototype.getValue=function(){return null!==this.factoryMethod&&(this.value=this.factoryMethod(),this.factoryMethod=null),this.value},e})();e.Lazy=r})(jsCommon||(jsCommon={}));var jsCommon;!(function(e){var r;!(function(e){function r(e,r){for(var n=[],t=e.length-1;t>=0;--t)r.indexOf(e[t])!==-1&&n.push(e[t]);return n}function n(e,r){for(var n=[],t=e.length-1;t>=0;--t){var o=e[t];r.indexOf(o)===-1&&n.push(o)}return n}function t(e){for(var r=[],n=0,t=e.length;n<t;n++){var o=e[n];r.indexOf(o)===-1&&r.push(o)}return r}function o(e,r){for(var n=0,t=r.length;n<t;++n)i(e,r[n])}function i(e,r){e.indexOf(r)<0&&e.push(r)}function a(e,r,n){for(var t=[],o=r;o<=n;++o)t.push(e[o]);return t}function u(e,r){for(var n=[],t=0;t<r;++t)n.push(e[t]);return n}function c(e){return u(e,e.length)}function f(e,r,n){if(e||(e=null),r||(r=null),e===r)return!0;if(!!e!=!!r)return!1;var t=e.length;if(t!==r.length)return!1;for(var o=0;o<t&&n(e[o],r[o]);)++o;return o===t}function s(e){return e&&0===e.length?null:e}function l(e,r){for(var n=0,t=e.length;n<t;++n)if(r(e[n]))return n;return-1}function d(e,r){if(0===r)return e.slice();var n=e.slice(r);return Array.prototype.push.apply(n,e.slice(0,r)),n}function p(){return m([])}function m(e){var r=e;return r.withId=h,r}function g(e,r){for(var n=0,t=e.length;n<t;n++){var o=e[n];if(o.id===r)return o}}function h(r){return e.findWithId(this,r)}function v(){return S([])}function S(e){var r=e;return r.withName=y,r}function T(e,r){var n=E(e,r);if(n>=0)return e[n]}function E(e,r){for(var n=0,t=e.length;n<t;n++){var o=e[n];if(o.name===r)return n}return-1}function C(e,r){for(var n=e.length,t=n-1;t>=0;t--){var o=e[t]-r;if(0===o)return!1;if(!(o>0))return e.splice(t+1,0,r),!0}return e.unshift(r),!0}function I(e,r){var n=e.indexOf(r);return!(n<0)&&(e.splice(n,1),!0)}function y(e){var r=this;return T(r,e)}function b(e){if(e)for(;e.length>0;)e.pop()}function O(e){return!e||0===e.length}function w(e,r,n){var t=e[r];e[r]=e[n],e[n]=t}function N(e,r,n){return _.any(e,(function(e){return n(e,r)}))}function x(e){for(var r=e;null!=r;){if(_.isArray(r))return!0;r=Object.getPrototypeOf(r)}return!1}function A(e,r){var n=e.length;if(n>=2)for(var t=1;t<n;t++)if(r(e[t-1],e[t])>0)return!1;return!0}function P(e,r){var n=r?function(e,r){return r-e}:function(e,r){return e-r};return A(e,n)}function R(e){return _.isArray(e)?e:[e]}e.intersect=r,e.diff=n,e.distinct=t,e.union=o,e.unionSingle=i,e.range=a,e.take=u,e.copy=c,e.sequenceEqual=f,e.emptyToNull=s,e.indexOf=l,e.rotate=d,e.createWithId=p,e.extendWithId=m,e.findWithId=g,e.createWithName=v,e.extendWithName=S,e.findItemWithName=T,e.indexWithName=E,e.insertSorted=C,e.removeFirst=I,e.clear=b,e.isUndefinedOrEmpty=O,e.swap=w,e.isInArray=N,e.isArrayOrInheritedArray=x,e.isSorted=A,e.isSortedNumeric=P,e.ensureArray=R})(r=e.ArrayExtensions||(e.ArrayExtensions={}))})(jsCommon||(jsCommon={}));;"use strict";var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e.prototype.visitEntity=function(e,t){return this.visitDefault(e,t)},e.prototype.visitSubqueryRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitNamedQueryRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitColumnRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitMeasureRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitAggr=function(e,t){return this.visitDefault(e,t)},e.prototype.visitPercentile=function(e,t){return this.visitDefault(e,t)},e.prototype.visitGroupRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitHierarchy=function(e,t){return this.visitDefault(e,t)},e.prototype.visitHierarchyLevel=function(e,t){return this.visitDefault(e,t)},e.prototype.visitPropertyVariationSource=function(e,t){return this.visitDefault(e,t)},e.prototype.visitSelectRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitBetween=function(e,t){return this.visitDefault(e,t)},e.prototype.visitIn=function(e,t){return this.visitDefault(e,t)},e.prototype.visitAnd=function(e,t){return this.visitDefault(e,t)},e.prototype.visitOr=function(e,t){return this.visitDefault(e,t)},e.prototype.visitCompare=function(e,t){return this.visitDefault(e,t)},e.prototype.visitContains=function(e,t){return this.visitDefault(e,t)},e.prototype.visitExists=function(e,t){return this.visitDefault(e,t)},e.prototype.visitNot=function(e,t){return this.visitDefault(e,t)},e.prototype.visitStartsWith=function(e,t){return this.visitDefault(e,t)},e.prototype.visitConstant=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDateSpan=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDateAdd=function(e,t){return this.visitDefault(e,t)},e.prototype.visitNow=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDefaultValue=function(e,t){return this.visitDefault(e,t)},e.prototype.visitAnyValue=function(e,t){return this.visitDefault(e,t)},e.prototype.visitArithmetic=function(e,t){return this.visitDefault(e,t)},e.prototype.visitFloor=function(e,t){return this.visitDefault(e,t)},e.prototype.visitFillRule=function(e,t){return this.visitDefault(e,t)},e.prototype.visitThemeColor=function(e,t){return this.visitDefault(e,t)},e.prototype.visitResourcePackageItem=function(e,t){return this.visitDefault(e,t)},e.prototype.visitScopedEval=function(e,t){return this.visitDefault(e,t)},e.prototype.visitWithRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitTransformTableRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitTransformOutputRoleRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitRoleRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDiscretize=function(e,t){return this.visitDefault(e,t)},e.prototype.visitMember=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDefault=function(e,t){},e})();e.DefaultSQExprVisitorWithArg=t;var r=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t})(t);e.DefaultSQExprVisitor=r;var i=(function(){function e(){}return e.prototype.visitEntity=function(e){this.visitDefault(e)},e.prototype.visitSubqueryRef=function(e){this.visitDefault(e)},e.prototype.visitNamedQueryRef=function(e){this.visitDefault(e)},e.prototype.visitColumnRef=function(e){e.source.accept(this)},e.prototype.visitMeasureRef=function(e){e.source.accept(this)},e.prototype.visitAggr=function(e){e.arg.accept(this)},e.prototype.visitPercentile=function(e){e.arg.accept(this)},e.prototype.visitGroupRef=function(e){e.source.accept(this);for(var t=0,r=e.groupedExprs;t<r.length;t++){var i=r[t];i.accept(this)}},e.prototype.visitHierarchy=function(e){e.arg.accept(this)},e.prototype.visitHierarchyLevel=function(e){e.arg.accept(this)},e.prototype.visitPropertyVariationSource=function(e){e.arg.accept(this)},e.prototype.visitSelectRef=function(e){this.visitDefault(e)},e.prototype.visitBetween=function(e){e.arg.accept(this),e.lower.accept(this),e.upper.accept(this)},e.prototype.visitIn=function(e){for(var t=e.args,r=0,i=t.length;r<i;r++)t[r].accept(this);var n=e.values;if(n)for(var r=0,i=n.length;r<i;r++)for(var a=n[r],o=0,u=a.length;o<u;o++)a[o].accept(this);else e.table.accept(this)},e.prototype.visitAnd=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitOr=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitCompare=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitContains=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitExists=function(e){e.arg.accept(this)},e.prototype.visitNot=function(e){e.arg.accept(this)},e.prototype.visitStartsWith=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitConstant=function(e){this.visitDefault(e)},e.prototype.visitDateSpan=function(e){e.arg.accept(this)},e.prototype.visitDateAdd=function(e){e.arg.accept(this)},e.prototype.visitNow=function(e){this.visitDefault(e)},e.prototype.visitDefaultValue=function(e){this.visitDefault(e)},e.prototype.visitAnyValue=function(e){this.visitDefault(e)},e.prototype.visitArithmetic=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitFloor=function(e){e.arg.accept(this)},e.prototype.visitFillRule=function(e){e.input.accept(this);var t=e.rule,r=t.linearGradient2,i=t.linearGradient3;r&&this.visitLinearGradient2(r),i&&this.visitLinearGradient3(i)},e.prototype.visitLinearGradient2=function(e){this.visitFillRuleStop(e.min),this.visitFillRuleStop(e.max),this.visitFillNullStrategy(e.nullColoringStrategy)},e.prototype.visitLinearGradient3=function(e){this.visitFillRuleStop(e.min),this.visitFillRuleStop(e.mid),this.visitFillRuleStop(e.max),this.visitFillNullStrategy(e.nullColoringStrategy)},e.prototype.visitThemeColor=function(e){this.visitDefault(e)},e.prototype.visitResourcePackageItem=function(e){this.visitDefault(e)},e.prototype.visitScopedEval=function(e){e.expression.accept(this);for(var t=0,r=e.scope;t<r.length;t++){var i=r[t];i.accept(this)}},e.prototype.visitWithRef=function(e){this.visitDefault(e)},e.prototype.visitTransformTableRef=function(e){this.visitDefault(e)},e.prototype.visitTransformOutputRoleRef=function(e){this.visitDefault(e)},e.prototype.visitRoleRef=function(e){this.visitDefault(e)},e.prototype.visitDiscretize=function(e){this.visitDefault(e)},e.prototype.visitMember=function(e){this.visitDefault(e)},e.prototype.visitDefault=function(e){},e.prototype.visitFillRuleStop=function(e){e.color.accept(this);var t=e.value;t&&t.accept(this)},e.prototype.visitFillNullStrategy=function(e){e&&(e.strategy.accept(this),e.color&&e.color.accept(this))},e})();e.DefaultSQExprVisitorWithTraversal=i})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e){return new r(e)}e.createEnumType=t;var r=(function(){function e(e){this.allMembers=e}return e.prototype.members=function(e){var t=this.allMembers;if(!e)return t;for(var r=[],i=0,n=t;i<n.length;i++){var a=n[i];_.contains(e,a.value)&&r.push(a)}return r},e})()})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(t){if(t)return{solid:{color:e.data.SQExprBuilder.text(t)}}}t.createSolidFillDefinition=r})(t=e.fillDefinitionHelpers||(e.fillDefinitionHelpers={}));var r;!(function(e){function t(e){if(e===!0)return!1;var t=e;return!!t.nullable}e.nullable=t})(r=e.FillSolidColorTypeDescriptor||(e.FillSolidColorTypeDescriptor={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.asZero="asZero",t.noColor="noColor",t.specificColor="specificColor",t.type=e.createEnumType([{value:t.asZero,displayName:function(e){return e.get("ConditionalFormattingDialog_FormatNull_AsZero")}},{value:t.noColor,displayName:function(e){return e.get("ConditionalFormattingDialog_FormatNull_NoFormat")}},{value:t.specificColor,displayName:function(e){return e.get("ConditionalFormattingDialog_FormatNull_SpecificColor")}}])})(t=e.NullStrategy||(e.NullStrategy={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.shared="shared",e.packaged="packaged"})(t=e.GeoJsonTypes||(e.GeoJsonTypes={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e.urlType={misc:{imageUrl:!0}}})(t=e.ImageDefinition||(e.ImageDefinition={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e){return!!(e.fill||e.fillRule||e.filter||e.expression||e.image||e.paragraphs||e.geoJson||e.queryTransform)}e.isValid=t})(t=e.StructuralTypeDescriptor||(e.StructuralTypeDescriptor={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(e){return e&m}function r(e){return(e&y)===e}function i(e){if(r(e))return null;var t=h[e];if(t){var i=t.lastIndexOf("_");if(i>0){var n=t.slice(0,i);h[n]&&(t=n)}}return t||null}function n(e,r){var i=s[e],n=h[i];if(null==n&&(n=0),e&&r){var a=h[r];if(a){var o=t(a);0===o?(a=n|a,h[a]&&(n=a)):o===e&&(n=a)}}return n}function a(e,t){return(e&d)===(t&d)}var o=jsCommon.EnumExtensions,u=(function(){function e(e,t,r,i){this.underlyingType=e,this.category=t,o.hasFlag(e,512)&&(this.temporalType=new l(e)),o.hasFlag(e,1024)&&(this.geographyType=new p(e)),o.hasFlag(e,2048)&&(this.miscType=new f(e)),o.hasFlag(e,4096)&&(this.formattingType=new v(e)),o.hasFlag(e,26214401)&&(this.enumType=r),o.hasFlag(e,8192)&&(this.scriptingType=new c(e)),o.hasFlag(e,13)&&(this.variationTypes=i)}return e.fromDescriptor=function(t){if(t=t||{},t.text)return e.fromExtendedType(1);if(t.integer)return e.fromExtendedType(260);if(t.numeric)return e.fromExtendedType(259);if(t.bool)return e.fromExtendedType(5);if(t.dateTime)return e.fromExtendedType(519);if(t.duration)return e.fromExtendedType(10);if(t.binary)return e.fromExtendedType(11);if(t.none)return e.fromExtendedType(12);if(t.scripting&&t.scripting.source)return e.fromExtendedType(32776193);if(t.enumeration)return e.fromEnum(t.enumeration);if(t.temporal){if(t.temporal.year)return e.fromExtendedType(66308);if(t.temporal.quarter)return e.fromExtendedType(262916);if(t.temporal.month)return e.fromExtendedType(131844);if(t.temporal.day)return e.fromExtendedType(328452);if(t.temporal.paddedDateTableDate)return e.fromExtendedType(197127)}if(t.geography){if(t.geography.address)return e.fromExtendedType(6554625);if(t.geography.city)return e.fromExtendedType(6620161);if(t.geography.continent)return e.fromExtendedType(6685697);if(t.geography.country)return e.fromExtendedType(6751233);if(t.geography.county)return e.fromExtendedType(6816769);if(t.geography.region)return e.fromExtendedType(6882305);if(t.geography.postalCode)return e.fromExtendedType(6947841);if(t.geography.stateOrProvince)return e.fromExtendedType(7013377);if(t.geography.place)return e.fromExtendedType(7078913);if(t.geography.latitude)return e.fromExtendedType(7144707);if(t.geography.longitude)return e.fromExtendedType(7210243)}if(t.misc){if(t.misc.image)return e.fromExtendedType(13109259);if(t.misc.imageUrl)return e.fromExtendedType(13174785);if(t.misc.webUrl)return e.fromExtendedType(13240321);if(t.misc.barcode)return e.fromExtendedType(13305857)}if(t.formatting){if(t.formatting.color)return e.fromExtendedType(19664897);if(t.formatting.formatString)return e.fromExtendedType(19730433);if(t.formatting.alignment)return e.fromExtendedType(20058113);if(t.formatting.labelDisplayUnits)return e.fromExtendedType(20123649);if(t.formatting.fontFamily)return e.fromExtendedType(20385793);if(t.formatting.fontSize)return e.fromExtendedType(20189443);if(t.formatting.labelDensity)return e.fromExtendedType(20254979);if(t.formatting.bubbleSize)return e.fromExtendedType(20320515);if(t.formatting.altText)return e.fromExtendedType(20451329)}if(t.extendedType)return e.fromExtendedType(t.extendedType);if(t.operations&&t.operations.searchEnabled)return e.fromExtendedType(65541);if(t.variant){var r=_.map(t.variant,(function(t){return e.fromDescriptor(t)}));return e.fromVariant(r)}return e.fromExtendedType(0)},e.fromExtendedType=function(r){r=r||0;var n=t(r),a=i(r);return e.fromPrimitiveTypeAndCategory(n,a)},e.fromPrimitiveTypeAndCategory=function(t,r){t=t||0,r=r||null;var i=t.toString();return r&&(i+="|"+r),e.typeCache[i]||(e.typeCache[i]=new e(n(t,r),r))},e.fromEnum=function(t){return new e(26214401,null,t)},e.fromVariant=function(t){return new e(13,null,null,t)},e.isCompatibleTo=function(t,r,i){for(var n=e.fromDescriptor(t),a=0,o=r;a<o.length;a++){var u=o[a],s=e.fromDescriptor(u);if(s.isCompatibleFrom(n,i))return!0}return!1},e.prototype.isCompatibleFrom=function(e,t){if(this===e)return!0;if(e.variant)for(var r=0,i=e.variant;r<i.length;r++){var n=i[r];if(!this.isCompatibleFrom(n,t))return!1}if(this.variant)for(var a=0,o=this.variant;a<o.length;a++){var u=o[a];if(u.isCompatibleFrom(e,t))return!0}var s=e.primitiveType;return this.primitiveType===s||0===s||this.numeric&&e.numeric&&(!t||!this.integer||e.integer)},e.prototype.equals=function(e){return _.isEqual(this,e)},Object.defineProperty(e.prototype,"primitiveType",{get:function(){return t(this.underlyingType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extendedType",{get:function(){return this.underlyingType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryString",{get:function(){return this.category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return 1===this.primitiveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numeric",{get:function(){return o.hasFlag(this.underlyingType,256)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"integer",{get:function(){return 4===this.primitiveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bool",{get:function(){return 5===this.primitiveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateTime",{get:function(){return 7===this.primitiveType||6===this.primitiveType||9===this.primitiveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return 10===this.primitiveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binary",{get:function(){return 11===this.primitiveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return 12===this.primitiveType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"temporal",{get:function(){return this.temporalType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geography",{get:function(){return this.geographyType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"misc",{get:function(){return this.miscType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatting",{get:function(){return this.formattingType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enum",{get:function(){return this.enumType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scripting",{get:function(){return this.scriptingType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"variant",{get:function(){return this.variationTypes},enumerable:!0,configurable:!0}),e})();u.typeCache={},e.ValueType=u;var s,c=(function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"source",{get:function(){return a(this.underlyingType,32776193)},enumerable:!0,configurable:!0}),e})(),l=(function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"year",{get:function(){return a(this.underlyingType,66048)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quarter",{get:function(){return a(this.underlyingType,262656)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"month",{get:function(){return a(this.underlyingType,131584)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"day",{get:function(){return a(this.underlyingType,328192)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddedDateTableDate",{get:function(){return a(this.underlyingType,197127)},enumerable:!0,configurable:!0}),e})(),p=(function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"address",{get:function(){return a(this.underlyingType,6554625)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"city",{get:function(){return a(this.underlyingType,6620161)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"continent",{get:function(){return a(this.underlyingType,6685697)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"country",{get:function(){return a(this.underlyingType,6751233)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"county",{get:function(){return a(this.underlyingType,6816769)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"region",{get:function(){return a(this.underlyingType,6882305)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"postalCode",{get:function(){return a(this.underlyingType,6947840)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateOrProvince",{get:function(){return a(this.underlyingType,7013377)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"place",{get:function(){return a(this.underlyingType,7078913)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"latitude",{get:function(){return a(this.underlyingType,7144448)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return a(this.underlyingType,7209984)},enumerable:!0,configurable:!0}),e})(),f=(function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"image",{get:function(){return a(this.underlyingType,13109259)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageUrl",{get:function(){return a(this.underlyingType,13174785)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"webUrl",{get:function(){return a(this.underlyingType,13240321)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barcode",{get:function(){return a(this.underlyingType,13305856)},enumerable:!0,configurable:!0}),e})(),v=(function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"color",{get:function(){return a(this.underlyingType,19664897)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatString",{get:function(){return a(this.underlyingType,19730433)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return a(this.underlyingType,20058113)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelDisplayUnits",{get:function(){return a(this.underlyingType,20123649)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return a(this.underlyingType,20385793)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return a(this.underlyingType,20189443)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelDensity",{get:function(){return a(this.underlyingType,20254979)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bubbleSize",{get:function(){return a(this.underlyingType,20320515)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"altText",{get:function(){return a(this.underlyingType,20451329)},enumerable:!0,configurable:!0}),e})();!(function(e){e[e.Null=0]="Null",e[e.Text=1]="Text",e[e.Decimal=2]="Decimal",e[e.Double=3]="Double",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.Date=6]="Date",e[e.DateTime=7]="DateTime",e[e.DateTimeZone=8]="DateTimeZone",e[e.Time=9]="Time",e[e.Duration=10]="Duration",e[e.Binary=11]="Binary",e[e.None=12]="None",e[e.Variant=13]="Variant"})(s=e.PrimitiveTypeStrings||(e.PrimitiveTypeStrings={}));var h;!(function(e){e[e.Numeric=256]="Numeric",e[e.Temporal=512]="Temporal",e[e.Geography=1024]="Geography",e[e.Miscellaneous=2048]="Miscellaneous",e[e.Formatting=4096]="Formatting",e[e.Scripting=8192]="Scripting",e[e.Null=0]="Null",e[e.Text=1]="Text",e[e.Decimal=258]="Decimal",e[e.Double=259]="Double",e[e.Integer=260]="Integer",e[e.Boolean=5]="Boolean",e[e.Date=518]="Date",e[e.DateTime=519]="DateTime",e[e.DateTimeZone=520]="DateTimeZone",e[e.Time=521]="Time",e[e.Duration=10]="Duration",e[e.Binary=11]="Binary",e[e.None=12]="None",e[e.Variant=13]="Variant",e[e.Years=66048]="Years",e[e.Years_Text=66049]="Years_Text",e[e.Years_Integer=66308]="Years_Integer",e[e.Years_Date=66054]="Years_Date",e[e.Years_DateTime=66055]="Years_DateTime",e[e.Months=131584]="Months",e[e.Months_Text=131585]="Months_Text",e[e.Months_Integer=131844]="Months_Integer",e[e.Months_Date=131590]="Months_Date",e[e.Months_DateTime=131591]="Months_DateTime",e[e.PaddedDateTableDates=197127]="PaddedDateTableDates",e[e.Quarters=262656]="Quarters",e[e.Quarters_Text=262657]="Quarters_Text",e[e.Quarters_Integer=262916]="Quarters_Integer",e[e.Quarters_Date=262662]="Quarters_Date",e[e.Quarters_DateTime=262663]="Quarters_DateTime",e[e.DayOfMonth=328192]="DayOfMonth",e[e.DayOfMonth_Text=328193]="DayOfMonth_Text",e[e.DayOfMonth_Integer=328452]="DayOfMonth_Integer",e[e.DayOfMonth_Date=328198]="DayOfMonth_Date",e[e.DayOfMonth_DateTime=328199]="DayOfMonth_DateTime",e[e.Address=6554625]="Address",e[e.City=6620161]="City",e[e.Continent=6685697]="Continent",e[e.Country=6751233]="Country",e[e.County=6816769]="County",e[e.Region=6882305]="Region",e[e.PostalCode=6947840]="PostalCode",e[e.PostalCode_Text=6947841]="PostalCode_Text",e[e.PostalCode_Integer=6948100]="PostalCode_Integer",e[e.StateOrProvince=7013377]="StateOrProvince",e[e.Place=7078913]="Place",e[e.Latitude=7144448]="Latitude",e[e.Latitude_Decimal=7144706]="Latitude_Decimal",e[e.Latitude_Double=7144707]="Latitude_Double",e[e.Longitude=7209984]="Longitude",e[e.Longitude_Decimal=7210242]="Longitude_Decimal",e[e.Longitude_Double=7210243]="Longitude_Double",e[e.Image=13109259]="Image",e[e.ImageUrl=13174785]="ImageUrl",e[e.WebUrl=13240321]="WebUrl",e[e.Barcode=13305856]="Barcode",e[e.Barcode_Text=13305857]="Barcode_Text",e[e.Barcode_Integer=13306116]="Barcode_Integer",e[e.Color=19664897]="Color",e[e.FormatString=19730433]="FormatString",e[e.Alignment=20058113]="Alignment",e[e.LabelDisplayUnits=20123649]="LabelDisplayUnits",e[e.FontFamily=20385793]="FontFamily",e[e.AltText=20451329]="AltText",e[e.FontSize=20189443]="FontSize",e[e.LabelDensity=20254979]="LabelDensity",e[e.BubbleSize=20320515]="BubbleSize",e[e.Enumeration=26214401]="Enumeration",e[e.ScriptSource=32776193]="ScriptSource",e[e.SearchEnabled=65541]="SearchEnabled"})(h||(h={}));var m=255,y=65535,d=4294901760})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){if(e){var t;return e.top&&(t={Top:{}},e.top.count&&(t.Top.Count=e.top.count)),e.bottom&&(t={Bottom:{}},e.bottom.count&&(t.Bottom.Count=e.bottom.count)),e.sample&&(t={Sample:{}},e.sample.count&&(t.Sample.Count=e.sample.count)),e.window&&(t={Window:{}},e.window.count&&(t.Window.Count=e.window.count)),t}}e.createFrom=t})(t=e.DataShapeBindingDataReduction||(e.DataShapeBindingDataReduction={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e){this.schemasByName=e.schemas,e.links&&(this.links=e.links)}return e.merge=function(t){if(1===t.length)return t[0];for(var r={},i=[],n=0,a=t;n<a.length;n++){var o=a[n];for(var u in o.schemasByName)r[u]=o.schemasByName[u];i.push.apply(i,o.links)}var s={schemas:r};return _.any(i)&&(s.links=i),new e(s)},Object.defineProperty(e.prototype,"schemas",{get:function(){return _.values(this.schemasByName)},enumerable:!0,configurable:!0}),e.prototype.schema=function(e){return this.schemasByName[e]},e})();e.FederatedConceptualSchema=t})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.ArrayExtensions;!(function(r){function n(e){return null!=e&&1===e.kind}function a(e){return null!=e&&3===e.kind}function o(e){return null!=e&&2===e.kind}function u(e){return null!=e&&0===e.kind}function s(t,r){if(!_.isEmpty(t)){var i=c(t);return _.isEmpty(i)?void 0:e.DataViewScopeIdentity.filterFromExprs(i,r)}}function c(e){if(!_.isEmpty(e)){for(var r=[],i=0,n=e.length;i<n;i++){var a=e[i],o=a.data,u=void 0;if(o&&o.length)for(var s=0,c=o.length;s<c;s++)u=t.SQExprBuilder.and(u,a.data[s].expr);u&&r.push(u)}return r}}function l(r,i,s){var c=r.data,l=i.length;if(_.isEmpty(s)||l++,c.length!==l)return!1;for(var p=0,f=i.length;p<f;p++){var v=r.data[p],h=i[p];if(u(v))return!1;if(n(v)&&!e.DataViewScopeIdentity.equals(v,h))return!1;if(a(v)&&!t.DataViewScopeWildcard.matches(v,h))return!1;if(o(v))return!_.isEmpty(s),!1}if(!_.isEmpty(s)){var v=_.last(r.data);return o(v)&&t.DataViewScopeTotal.matches(v,s)}return!0}function p(e,r){var i=e.data,s=i.length;if(s!==r.length)return!1;for(var c=0;c<s;c++){var l=e.data[c],p=void 0;if(n(l))p=t.ScopeIdentityExtractor.getKeys(l.expr);else if(a(l))p=l.exprs;else{if(!o(l))return u(l),!1;p=l.exprs}if(!p)return!1;if(!t.SQExprUtils.sequenceEqual(r[c],p))return!1}return!0}function f(e,t){return e=e||null,t=t||null,e===t||!e==!t&&(e.id===t.id&&(e.metadata===t.metadata&&!!v(e.data,t.data)))}function v(e,t){if(e=e||null,t=t||null,e===t)return!0;if(!e!=!t)return!1;if(e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(!h(e[r],t[r]))return!1;return!0}function h(r,i){return n(r)&&n(i)?e.DataViewScopeIdentity.equals(r,i):a(r)&&a(i)?t.DataViewScopeWildcard.equals(r,i):o(r)&&o(i)?t.DataViewScopeTotal.equals(r,i):!(!u(r)||!u(i))&&t.DataViewRoleWildcard.equals(r,i)}function m(e){var t={};if(e.data){for(var r=[],i=0,n=e.data.length;i<n;i++)r.push(e.data[i].key);t.data=r}return e.metadata&&(t.metadata=e.metadata),e.id&&(t.id=e.id),JSON.stringify(t)}function y(e){var t=e.data;return!!t&&_.any(t,(function(e){return u(e)||a(e)}))}function d(e){var t=e.data;if(_.isEmpty(t))return!1;for(var r=0,i=t;r<i.length;r++){var n=i[r];if(u(n))return!0}return!1}function g(e){if(e){var t=[];for(var r in e.dataMap)for(var n=i.ensureArray(e.dataMap[r]),a=0,o=n;a<o.length;a++){var u=o[a];t.push(u)}var s={};return t.length>0&&(s.data=t),e.metadata&&(s.metadata=_.first(e.metadata)),e.id&&(s.id=e.id),s}}function x(e){return _.filter(e,(function(e){return!t.SQExprUtils.detectTransformExpr(e.expr)}))}r.isScopeIdentity=n,r.isScopeWildcard=a,r.isScopeTotal=o,r.isRoleWildcard=u,r.filterFromSelector=s,r.filterExprsFromSelectors=c,r.matchesData=l,r.matchesKeys=p,r.equals=f,r.getKey=m,r.containsWildcard=y,r.hasRoleWildcard=d,r.convertSelectorsByColumnToSelector=g,r.filterTransformSelectorsForSelection=x})(r=t.Selector||(t.Selector={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(t){switch(t){case 0:return"Add";case 1:return"Subtract";case 2:return"Multiply";case 3:return"Divide"}return e.contract.fail("Unexpected ArithmeticOperatorKind: "+t)}function i(e){switch(e){case 0:return"Sum";case 1:return"Avg";case 2:return"Count";case 3:return"Min";case 4:return"Max";case 5:return"CountNonNull";case 6:return"Median";case 7:return"StandardDeviation";case 8:return"Variance"}}var n;!(function(e){e[e.Table=0]="Table",e[e.Pod=1]="Pod",e[e.Expression=2]="Expression"})(n=t.EntitySourceType||(t.EntitySourceType={})),t.getArithmeticOperatorName=r,t.aggregateFunctionName=i;var a;!(function(e){e[e.Default=0]="Default",e[e.Period=1]="Period"})(a=t.FilterKind||(t.FilterKind={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(e,t,r){this.items=e,this._activeProjectionRefs=t,this._showAll=r}return e.prototype.all=function(){return this.items},Object.defineProperty(e.prototype,"activeProjectionRefs",{get:function(){return this._activeProjectionRefs},set:function(e){if(!_.isEmpty(e)){for(var t=this.items.map((function(e){return e.queryRef})),r=0,i=e;r<i.length;r++){var n=i[r];if(!_.contains(t,n))return}this._activeProjectionRefs=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAll",{get:function(){return this._showAll},set:function(e){this._showAll=e},enumerable:!0,configurable:!0}),e.prototype.addActiveQueryReference=function(e){this._activeProjectionRefs?this._activeProjectionRefs.push(e):this._activeProjectionRefs=[e]},e.prototype.getLastActiveQueryReference=function(){if(!_.isEmpty(this._activeProjectionRefs))return this._activeProjectionRefs[this._activeProjectionRefs.length-1]},e.prototype.replaceQueryRef=function(e,t){for(var r=0,i=this.items;r<i.length;r++){var n=i[r];n.queryRef===e&&(n.queryRef=t)}},e.prototype.clone=function(){return new e(_.cloneDeep(this.items),_.clone(this._activeProjectionRefs),this._showAll)},e})();e.QueryProjectionCollection=t;var r;!(function(e){function t(e){if(!e)return e;var t={};for(var r in e)t[r]=e[r].clone();return t}function r(e,t){if(e)return e[t]}e.clone=t,e.getRole=r})(r=e.QueryProjectionsByRole||(e.QueryProjectionsByRole={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e[e.Default=0]="Default",e[e.Verbose=1]="Verbose",e[e.WholeUnits=2]="WholeUnits",e[e.DataLabels=3]="DataLabels"})(t=e.DisplayUnitSystemType||(e.DisplayUnitSystemType={}));var r;!(function(e){function t(e){for(var t=[],r=0,i=e;r<i.length;r++)for(var n=i[r],a=function(e){_.find(t,(function(t){return _.isEqual(t,e)}))||t.push(e)},o=0,u=n.DataRoles;o<u.length;o++){var s=u[o];a(s)}return t}e.getDataRolesFromVisualElements=t})(r=e.VisualElement||(e.VisualElement={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=(function(){function t(e){this.unit=e,this.sequence=[],this.min=new Date("9999-12-31T23:59:59.999"),this.max=new Date("0001-01-01T00:00:00.000")}return t.prototype.add=function(e){e<this.min&&(this.min=e),e>this.max&&(this.max=e),this.sequence.push(e)},t.prototype.moveToCover=function(e,r){var i=t.getDelta(e,r,this.unit),n=Math.floor(i/this.interval);for(this.min=t.addInterval(this.min,n*this.interval,this.unit),this.sequence=[],this.sequence.push(this.min),this.max=this.min;this.max<r;)this.max=t.addInterval(this.max,this.interval,this.unit),this.sequence.push(this.max)},t.calculate=function(r,i,n,a){switch(a||(a=t.getIntervalUnit(r,i,n)),a){case e.DateTimeUnit.Year:return t.calculateYears(r,i,n);case e.DateTimeUnit.Month:return t.calculateMonths(r,i,n);case e.DateTimeUnit.Week:return t.calculateWeeks(r,i,n);case e.DateTimeUnit.Day:return t.calculateDays(r,i,n);case e.DateTimeUnit.Hour:return t.calculateHours(r,i,n);case e.DateTimeUnit.Minute:return t.calculateMinutes(r,i,n);case e.DateTimeUnit.Second:return t.calculateSeconds(r,i,n);case e.DateTimeUnit.Millisecond:return t.calculateMilliseconds(r,i,n)}},t.calculateYears=function(r,i,n){var a=e.NumericSequenceRange.calculateDataRange(r.getFullYear(),i.getFullYear(),!1),o=e.NumericSequence.calculate(e.NumericSequenceRange.calculate(0,a.max-a.min),n,0,null,null,[1,2,5]),u=Math.floor(a.min/o.interval)*o.interval,s=new Date(u,0,1),c=t.fromNumericSequence(s,o,e.DateTimeUnit.Year);return c},t.calculateMonths=function(r,i,n){var a=r.getFullYear(),o=i.getFullYear(),u=r.getMonth(),s=12*(o-a)+i.getMonth(),c=new Date(a,0,1),l=e.NumericSequence.calculateUnits(u,s,n,[1,2,3,6,12]),p=t.fromNumericSequence(c,l,e.DateTimeUnit.Month);return p},t.calculateWeeks=function(r,i,n){var a=0,o=r.getDay(),u=(o-a+7)%7,s=r.getDate()-u,c=new Date(r.getFullYear(),r.getMonth(),s),l=0,p=e.Double.ceilWithPrecision(t.getDelta(c,i,e.DateTimeUnit.Week)),f=e.NumericSequence.calculateUnits(l,p,n,[1,2,4,8]),v=t.fromNumericSequence(c,f,e.DateTimeUnit.Week);return v},t.calculateDays=function(r,i,n){var a=new Date(r.getFullYear(),r.getMonth(),r.getDate()),o=0,u=e.Double.ceilWithPrecision(t.getDelta(r,i,e.DateTimeUnit.Day)),s=e.NumericSequence.calculateUnits(o,u,n,[1,2,7,14]),c=t.fromNumericSequence(a,s,e.DateTimeUnit.Day);
return c},t.calculateHours=function(r,i,n){var a=new Date(r.getFullYear(),r.getMonth(),r.getDate()),o=e.Double.floorWithPrecision(t.getDelta(a,r,e.DateTimeUnit.Hour)),u=e.Double.ceilWithPrecision(t.getDelta(a,i,e.DateTimeUnit.Hour)),s=e.NumericSequence.calculateUnits(o,u,n,[1,2,3,6,12,24]),c=t.fromNumericSequence(a,s,e.DateTimeUnit.Hour);return c},t.calculateMinutes=function(r,i,n){var a=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours()),o=e.Double.floorWithPrecision(t.getDelta(a,r,e.DateTimeUnit.Minute)),u=e.Double.ceilWithPrecision(t.getDelta(a,i,e.DateTimeUnit.Minute)),s=e.NumericSequence.calculateUnits(o,u,n,[1,2,5,10,15,30,60,120,180,360,720,1440]),c=t.fromNumericSequence(a,s,e.DateTimeUnit.Minute);return c},t.calculateSeconds=function(r,i,n){var a=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes()),o=e.Double.floorWithPrecision(t.getDelta(a,r,e.DateTimeUnit.Second)),u=e.Double.ceilWithPrecision(t.getDelta(a,i,e.DateTimeUnit.Second)),s=e.NumericSequence.calculateUnits(o,u,n,[1,2,5,10,15,30,60,120,300,600,900,1800,3600]),c=t.fromNumericSequence(a,s,e.DateTimeUnit.Second);return c},t.calculateMilliseconds=function(r,i,n){var a=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds()),o=t.getDelta(a,r,e.DateTimeUnit.Millisecond),u=t.getDelta(a,i,e.DateTimeUnit.Millisecond),s=e.NumericSequence.calculate(e.NumericSequenceRange.calculate(o,u),n,0),c=t.fromNumericSequence(a,s,e.DateTimeUnit.Millisecond);return c},t.addInterval=function(t,i,n){switch(i=Math.round(i),n){case e.DateTimeUnit.Year:return r.addYears(t,i);case e.DateTimeUnit.Month:return r.addMonths(t,i);case e.DateTimeUnit.Week:return r.addWeeks(t,i);case e.DateTimeUnit.Day:return r.addDays(t,i);case e.DateTimeUnit.Hour:return r.addHours(t,i);case e.DateTimeUnit.Minute:return r.addMinutes(t,i);case e.DateTimeUnit.Second:return r.addSeconds(t,i);case e.DateTimeUnit.Millisecond:return r.addMilliseconds(t,i)}},t.fromNumericSequence=function(e,r,i){for(var n=new t(i),a=0;a<r.sequence.length;a++){var o=r.sequence[a],u=t.addInterval(e,o,i);n.add(u)}return n.interval=r.interval,n.intervalOffset=r.intervalOffset,n},t.getDelta=function(t,r,i){var n=0;switch(i){case e.DateTimeUnit.Year:n=r.getFullYear()-t.getFullYear();break;case e.DateTimeUnit.Month:n=12*(r.getFullYear()-t.getFullYear())+r.getMonth()-t.getMonth();break;case e.DateTimeUnit.Week:n=(r.getTime()-t.getTime())/6048e5;break;case e.DateTimeUnit.Day:n=(r.getTime()-t.getTime())/864e5;break;case e.DateTimeUnit.Hour:n=(r.getTime()-t.getTime())/36e5;break;case e.DateTimeUnit.Minute:n=(r.getTime()-t.getTime())/6e4;break;case e.DateTimeUnit.Second:n=(r.getTime()-t.getTime())/1e3;break;case e.DateTimeUnit.Millisecond:n=r.getTime()-t.getTime()}return n},t.getIntervalUnit=function(r,i,n){n=Math.max(n,2);var a=t.getDelta(r,i,e.DateTimeUnit.Day);if(a>356&&a>=180*n)return e.DateTimeUnit.Year;if(a>60&&a>7*n)return e.DateTimeUnit.Month;if(a>14&&a>2*n)return e.DateTimeUnit.Week;var o=t.getDelta(r,i,e.DateTimeUnit.Hour);if(a>2&&o>12*n)return e.DateTimeUnit.Day;if(o>=24&&o>=n)return e.DateTimeUnit.Hour;var u=t.getDelta(r,i,e.DateTimeUnit.Minute);if(u>2&&u>=n)return e.DateTimeUnit.Minute;var s=t.getDelta(r,i,e.DateTimeUnit.Second);if(s>2&&s>=.8*n)return e.DateTimeUnit.Second;var c=t.getDelta(r,i,e.DateTimeUnit.Millisecond);if(c>0)return e.DateTimeUnit.Millisecond;var l=r;return 0!==l.getMilliseconds()?e.DateTimeUnit.Millisecond:0!==l.getSeconds()?e.DateTimeUnit.Second:0!==l.getMinutes()?e.DateTimeUnit.Minute:0!==l.getHours()?e.DateTimeUnit.Hour:1!==l.getDate()?e.DateTimeUnit.Day:0!==l.getMonth()?e.DateTimeUnit.Month:e.DateTimeUnit.Year},t})();t.MIN_COUNT=1,t.MAX_COUNT=1e3,e.DateTimeSequence=t;var r;!(function(e){function t(e){return e%4===0&&e%100!==0||e%400===0}function r(e,r){return t(e)?f[r]:p[r]}function i(e,r){var i=e.getFullYear(),n=e.getMonth(),a=e.getDate(),o=2===n&&29===a,u=new Date(e.getTime());return i+=r,o&&!t(i)&&(a=28),u.setFullYear(i,n,a),u}function n(e,t){var i=e.getFullYear(),n=e.getMonth(),a=e.getDate(),o=new Date(e.getTime());return i+=(t-t%12)/12,n+=t%12,n>11&&(n%=12,i++),a=Math.min(a,r(i,n)),o.setFullYear(i,n,a),o}function a(e,t){return o(e,7*t)}function o(e,t){var r=e.getFullYear(),i=e.getMonth(),n=e.getDate(),a=new Date(e.getTime());return a.setFullYear(r,i,n+t),a}function u(e,t){return new Date(e.getTime()+36e5*t)}function s(e,t){return new Date(e.getTime()+6e4*t)}function c(e,t){return new Date(e.getTime()+1e3*t)}function l(e,t){return new Date(e.getTime()+t)}var p=[31,28,31,30,31,30,31,31,30,31,30,31],f=[31,29,31,30,31,30,31,31,30,31,30,31];e.addYears=i,e.addMonths=n,e.addWeeks=a,e.addDays=o,e.addHours=u,e.addMinutes=s,e.addSeconds=c,e.addMilliseconds=l})(r=e.DateUtils||(e.DateUtils={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){function t(t,n){for(var a=[],o=3;o<i;o++){var u=t(o);u&&r(a,e.Double.pow10(o),u.title,u.format,n)}return a}function r(e,t,r,i,n){if(r||i){var a=t;if(e.length>0){var o=e[e.length-1];n&&(a=n(t,o.value,a)),o.applicableRangeMax=a}var u=new l;u.value=t,u.applicableRangeMin=a,u.applicableRangeMax=1e3*a,u.title=r,u.labelFormat=i,e.push(u)}}var i=24,n=1e15,a=1e-4,o="%",u="E+0",s="0.##"+u,c=/^([0\#,]*\.[0\#]+|[0\#,]+|g)$/i,l=(function(){function t(){}return t.prototype.project=function(t){return this.value?e.Double.removeDecimalNoise(t/this.value):t},t.prototype.isApplicableTo=function(t){t=Math.abs(t);var r=e.Double.getPrecision(t,3);return e.Double.greaterOrEqualWithPrecision(t,this.applicableRangeMin,r)&&e.Double.lessWithPrecision(t,this.applicableRangeMax,r)},t.prototype.isScaling=function(){return this.value>1},t})();e.DisplayUnit=l;var p=(function(){function t(e){this.units=e?e:[]}return Object.defineProperty(t.prototype,"title",{get:function(){return this.displayUnit?this.displayUnit.title:void 0},enumerable:!0,configurable:!0}),t.prototype.update=function(e){void 0!==e&&(this.unitBaseValue=e,this.displayUnit=this.findApplicableDisplayUnit(e))},t.prototype.findApplicableDisplayUnit=function(e){for(var t=0,r=this.units;t<r.length;t++){var i=r[t];if(i.isApplicableTo(e))return i}},t.prototype.format=function(e,t,r,i){r=this.getNumberOfDecimalsForFormatting(t,r);var n="";return this.isFormatSupported(t)&&!this.hasScientitifcFormat(t)&&this.isScalingUnit()&&this.shouldRespectScalingUnit(t)&&(e=this.displayUnit.project(e),n=this.displayUnit.labelFormat),this.formatHelper(e,n,t,r,i)},t.prototype.isFormatSupported=function(e){return!t.UNSUPPORTED_FORMATS.test(e)},t.prototype.isPercentageFormat=function(e){return e&&e.indexOf(o)>=0},t.prototype.shouldRespectScalingUnit=function(e){return!0},t.prototype.getNumberOfDecimalsForFormatting=function(e,t){return t},t.prototype.isScalingUnit=function(){return this.displayUnit&&this.displayUnit.isScaling()},t.prototype.formatHelper=function(t,r,i,n,a){if("g"!==i&&"G"!==i||null==n||(i=e.visuals.valueFormatter.DefaultNumericFormat),i=e.NumberFormat.addDecimalsToFormat(i,n,a),i&&!e.formattingService.isStandardNumberFormat(i))return e.formattingService.formatNumberWithCustomOverride(t,i,r);i||(i="G"),r||(r="{0}");var o=e.formattingService.formatValue(t,i);return e.formattingService.format(r,[o])},t.prototype.formatSingleValue=function(t,r,i,n){return this.update(this.shouldUseValuePrecision(t)?e.Double.getPrecision(t,8):t),this.format(t,r,i,n)},t.prototype.shouldUseValuePrecision=function(e){if(0===this.units.length)return!0;for(var t=0,r=0;r<this.units.length;r++)if(this.units[r].isScaling()){t=this.units[r].applicableRangeMin;break}return Math.abs(e)<t},t.prototype.isScientific=function(e){return e<-n||e>n||-a<e&&e<a&&0!==e},t.prototype.hasScientitifcFormat=function(e){return e&&e.toUpperCase().indexOf("E")!==-1},t.prototype.supportsScientificFormat=function(e){return!e||c.test(e)},t.prototype.shouldFallbackToScientific=function(e,t){return!this.hasScientitifcFormat(t)&&this.supportsScientificFormat(t)&&this.isScientific(e)},t.prototype.getScientificFormat=function(t,r,i,n){if(this.isFormatSupported(r)&&this.shouldFallbackToScientific(t,r)){var a=e.NumberFormat.getNumericFormat(t,r);return i&&(a=e.NumberFormat.addDecimalsToFormat(a?a:"0",Math.abs(i),n)),a?a+u:s}return r},t})();p.UNSUPPORTED_FORMATS=/^(p\d*)|(e\d*)$/i,e.DisplayUnitSystem=p;var f=(function(e){function t(){return e.call(this,[])||this}return __extends(t,e),t})(p);e.NoDisplayUnitSystem=f;var v=(function(e){function r(t){return e.call(this,r.getUnits(t))||this}return __extends(r,e),r.prototype.format=function(t,r,i,n){return r=this.getScientificFormat(t,r,i,n),e.prototype.format.call(this,t,r,i,n)},r.reset=function(){r.units=null},r.getUnits=function(e){return r.units||(r.units=t(e,(function(e,t,r){return e-t>=1e3?e/10:r})),r.units[r.units.length-1].applicableRangeMax=1/0),r.units},r})(p);e.DefaultDisplayUnitSystem=v;var h=(function(e){function r(t){return e.call(this,r.getUnits(t))||this}return __extends(r,e),r.reset=function(){r.units=null},r.getUnits=function(e){return r.units||(r.units=t(e),r.units[r.units.length-1].applicableRangeMax=1/0),r.units},r.prototype.format=function(t,r,i,n){return r=this.getScientificFormat(t,r,i,n),e.prototype.format.call(this,t,r,i,n)},r})(p);e.WholeUnitsDisplayUnitSystem=h;var m=(function(e){function i(t){return e.call(this,i.getUnits(t))||this}return __extends(i,e),i.prototype.isFormatSupported=function(e){return!i.UNSUPPORTED_FORMATS.test(e)},i.getUnits=function(e){if(!i.units){var n=[],a=function(e,t,r){return e===-1&&e-t>=1e3?e/10:r},o=e(-1);r(n,i.AUTO_DISPLAYUNIT_VALUE,o.title,o.format,a),o=e(0),r(n,i.NONE_DISPLAYUNIT_VALUE,o.title,o.format,a),i.units=n.concat(t(e,a)),i.units[i.units.length-1].applicableRangeMax=1/0}return i.units},i.prototype.format=function(t,r,i,n){return r=this.getScientificFormat(t,r,i,n),e.prototype.format.call(this,t,r,i,n)},i})(p);m.AUTO_DISPLAYUNIT_VALUE=0,m.NONE_DISPLAYUNIT_VALUE=1,m.UNSUPPORTED_FORMATS=/^(e\d*)$/i,e.DataLabelsDisplayUnitSystem=m})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=(function(){function t(){}return t.calculate=function(r,i,n,a,o,u){var s=new t;if(i=void 0===i?10:e.Double.ensureInRange(i,t.MIN_COUNT,t.MAX_COUNT),void 0===a&&(a=e.Double.MIN_EXP),void 0===o&&(o=!1),void 0===n&&(n=1),void 0===u&&(u=[1,2,5]),r.forcedSingleStop)return s.interval=r.getSize(),s.intervalOffset=s.interval-(r.forcedSingleStop-r.min),s.min=r.min,s.max=r.max,s.sequence=[r.forcedSingleStop],s;var c=0,l=0,p=9,f=n>0&&!r.hasFixedMin,v=n>0&&!r.hasFixedMax,h=r.getSize(),m=e.Double.log10(h),y=e.Double.log10(u[0]);m-=y;var d=e.Double.log10(i);m-=d,m=Math.max(m,a-y+1);var g=void 0;if(0!==c){var x=e.Double.pow10(m),S=e.Double.floorToPrecision(r.min,x),b=e.Double.ceilToPrecision(r.max,x),w=e.NumericSequenceRange.calculateFixedRange(S,b);w.shrinkByStep(r,c),l=w.min,p=w.max,g=Math.floor(w.getSize()/c)}else{var E=void 0;for(E=0;E<3;E++){for(var D=m+E,x=e.Double.pow10(D),S=e.Double.floorToPrecision(r.min,x),b=e.Double.ceilToPrecision(r.max,x),C=u.length,_=e.Double.pow10(D-1),R=0;R<C;R++){var T=u[R]*_,w=e.NumericSequenceRange.calculateFixedRange(S,b,o);if(w.shrinkByStep(r,T),f&&r.min===w.min&&n>=1&&(w.min-=T),v&&r.max===w.max&&n>=1&&(w.max+=T),g=e.Double.ceilWithPrecision(w.getSize()/T,e.Double.DEFAULT_PRECISION),g<=i||2===E&&R===C-1||1===i&&2===g&&(T>r.getSize()||r.min<0&&r.max>0&&2*T>=r.getSize())){c=T,l=w.min,p=w.max;break}}if(0!==c)break}}(g>32*i||g>t.MAX_COUNT)&&(g=Math.min(32*i,t.MAX_COUNT),c=(p-l)/g),s.min=l,s.max=p,s.interval=c,s.intervalOffset=l-r.min,s.maxAllowedMargin=n,s.canExtendMin=f,s.canExtendMax=v;var V=e.Double.getPrecision(c,0);s.precision=V;var F=[],P=e.Double.roundToPrecision(l,V);F.push(P);for(var R=0;R<g;R++)P=e.Double.roundToPrecision(P+c,V),F.push(P);return s.sequence=F,s.trimMinMax(r.min,r.max),s},t.calculateUnits=function(r,i,n,a){n=e.Double.ensureInRange(n,t.MIN_COUNT,t.MAX_COUNT),r===i&&(i=r+1);for(var o=0,u=0,s=0;s<a.length;s++){u=a[s];var c=e.Double.ceilWithPrecision(i/u),l=e.Double.floorWithPrecision(r/u);if(o=c-l,o<=n)break}var p=-r;p%=u;var f=new t;f.sequence=[];for(var v=r+p;f.sequence.push(v),!(v>=i);v+=u);return f.interval=u,f.intervalOffset=p,f.min=f.sequence[0],f.max=f.sequence[f.sequence.length-1],f},t.prototype.trimMinMax=function(e,t){var r=(e-this.min)/this.interval,i=(this.max-t)/this.interval,n=.001;(!this.canExtendMin||r>this.maxAllowedMargin&&r>n)&&(this.min=e),(!this.canExtendMax||i>this.maxAllowedMargin&&i>n)&&(this.max=t)},t})();t.MIN_COUNT=1,t.MAX_COUNT=1e3,e.NumericSequence=t})(powerbi||(powerbi={}));var powerbi;!(function(e){var t=(function(){function t(){}return t.prototype._ensureIncludeZero=function(){this.includeZero&&(this.min>0&&!this.hasFixedMin&&(this.min=0),this.max<0&&!this.hasFixedMax&&(this.max=0))},t.prototype._ensureNotEmpty=function(){if(this.min===this.max)if(this.min){var r=this.min,i=e.Double.log10(Math.abs(r)),n=void 0;i>=0&&i<4?(n=.5,this.forcedSingleStop=r):(n=e.Double.pow10(i)/2,this.forcedSingleStop=null),this.min=r-n,this.max=r+n}else this.min=0,this.max=t.DEFAULT_MAX,this.hasFixedMin=!0,this.hasFixedMax=!0},t.prototype._ensureDirection=function(){if(this.min>this.max){var e=this.min;this.min=this.max,this.max=e}},t.prototype.getSize=function(){return this.max-this.min},t.prototype.shrinkByStep=function(e,t){var r=this.min/t,i=e.min/t,n=Math.floor(i-r);this.min+=n*t,r=this.max/t,i=e.max/t,n=Math.ceil(i-r),this.max+=n*t},t.calculate=function(i,n,a,o,u){var s=new t;return s.includeZero=!!u,s.hasDataRange=r.hasValue(i)&&r.hasValue(n),s.hasFixedMin=r.hasValue(a),s.hasFixedMax=r.hasValue(o),i=e.Double.ensureInRange(i,t.MIN_SUPPORTED_DOUBLE,t.MAX_SUPPORTED_DOUBLE),n=e.Double.ensureInRange(n,t.MIN_SUPPORTED_DOUBLE,t.MAX_SUPPORTED_DOUBLE),s.hasFixedMin&&s.hasFixedMax?(s.min=a,s.max=o):s.hasFixedMin?(s.min=a,s.max=n>a?n:a):s.hasFixedMax?(s.min=i<o?i:o,s.max=o):s.hasDataRange?(s.min=i,s.max=n):(s.min=0,s.max=0),s._ensureIncludeZero(),s._ensureNotEmpty(),s._ensureDirection(),0===s.min?s.hasFixedMin=!0:0===s.max&&(s.hasFixedMax=!0),s},t.calculateDataRange=function(e,i,n){return r.hasValue(e)&&r.hasValue(i)?t.calculate(e,i,null,null,n):t.calculateFixedRange(0,t.DEFAULT_MAX)},t.calculateFixedRange=function(e,r,i){var n=new t;return n.hasDataRange=!1,n.includeZero=i,n.min=e,n.max=r,n._ensureIncludeZero(),n._ensureNotEmpty(),n._ensureDirection(),n.hasFixedMin=!0,n.hasFixedMax=!0,n},t})();t.DEFAULT_MAX=10,t.MIN_SUPPORTED_DOUBLE=-1e307,t.MAX_SUPPORTED_DOUBLE=1e307,e.NumericSequenceRange=t;var r;!(function(e){function t(e){return void 0!==e&&null!==e}e.hasValue=t})(r=e.ValueUtil||(e.ValueUtil={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r;!(function(t){function r(e){var t=w[e];return t?E[t]||e:e}function i(e){var t=e===-1?"Auto":e.toString(),r=E["DisplayUnitSystem_E"+t+"_Title"],i=e<=0?"{0}":E["DisplayUnitSystem_E"+t+"_LabelFormat"];if(r||i)return{title:r,format:i}}function n(e){return E[e]}function a(t){return e.NumberFormat.getCustomFormatMetadata(t)}function o(t){D=t,e.DefaultDisplayUnitSystem.reset(),e.WholeUnitsDisplayUnitSystem.reset()}function u(e,t){void 0===t&&(t=!1);var r=t?D.beautify(e):e;return{format:function(e){return null==e?D.null:g(e,r)}}}function s(t){var r=t.allowFormatBeautification?D.beautify(t.format):t.format;if(f(t)){var i=p(t.displayUnitSystemType),n=!!t.formatSingleValues;i.update(Math.max(Math.abs(t.value||0),Math.abs(t.value2||0)));var a,o=null!=t.precision;return o?a=-t.precision:i.displayUnit&&i.displayUnit.value>1&&(a=-C),{format:function(t){var u=x(t,!0);return b.isNullOrUndefinedOrWhiteSpaceString(u)?(t&&!i.isScalingUnit()&&Math.abs(t)<_&&!o&&(t=e.Double.roundToPrecision(t)),n?i.formatSingleValue(t,r,a,o):i.format(t,r,a,o)):u},displayUnit:i.displayUnit,options:t}}if(v(t.value,t.value2,t.tickCount)){var s=e.DateTimeSequence.getIntervalUnit(t.value,t.value2,t.tickCount);return{format:function(t){if(null==t)return D.null;var r=e.formattingService.dateFormatString(s);return g(t,r)},options:t}}return u(r)}function c(e,t,r){return null==e?D.null:g(e,r?D.beautify(t):t)}function l(e,t,r,i){if(!(t&&t.type&&t.type.dateTime)&&e instanceof Date){var n=h(V,null,!1);return g(e,n,i)}return g(e,h(t,r),i)}function p(t){if(null==t)return new e.DefaultDisplayUnitSystem(D.describe);switch(t){case e.DisplayUnitSystemType.Default:return new e.DefaultDisplayUnitSystem(D.describe);case e.DisplayUnitSystemType.WholeUnits:return new e.WholeUnitsDisplayUnitSystem(D.describe);case e.DisplayUnitSystemType.Verbose:return new e.NoDisplayUnitSystem;case e.DisplayUnitSystemType.DataLabels:return new e.DataLabelsDisplayUnitSystem(D.describe);default:return new e.DefaultDisplayUnitSystem(D.describe)}}function f(t){var r=t.value,i=t.value2,n=t.format,a=t.columnType;if(t.formatSingleValues&&n&&Math.abs(r)<R){var o=!e.NumberFormat.isStandardFormat(n);if(o){var u=e.NumberFormat.getCustomFormatMetadata(n,!0).precision;if(u<T)return!1}else if(e.Double.isInteger(r))return!1}if("number"==typeof r||"number"==typeof i)return!(a&&a.temporal&&a.temporal.year)}function v(e,t,r){return e instanceof Date&&t instanceof Date&&void 0!==r&&null!==r}function h(r,i,n){if(r){if(i){var a=e.DataViewObjects.getValue(r.objects,i);if(a)return a}if(!n){var o=r.type;if(o){if(o.dateTime)return t.DefaultDateFormat;if(o.integer)return o.temporal&&o.temporal.year?"0":t.DefaultIntegerFormat;if(o.numeric)return t.DefaultNumericFormat}}}}function m(e,t){var r;if(!e)return null;var i=e.length;if(i>0){r=e[0];for(var n=i-1,a=1,o=n;a<o;a++){var u=e[a];r=b.format(D.restatementComma,r,u)}if(i>1){var u=e[n];r=b.format(t,r,u)}}else r=null;return r}function y(e){return m(e,D.restatementCompoundAnd)}function d(e){return m(e,D.restatementCompoundOr)}function g(t,r,i){var n=x(t,!!i&&i);return b.isNullOrUndefinedOrWhiteSpaceString(n)?e.formattingService.formatValue(t,r):n}function x(e,t){return null==e&&t?D.null:e===!0?D.true:e===!1?D.false:"number"==typeof e&&isNaN(e)?D.NaN:e===Number.NEGATIVE_INFINITY?D.negativeInfinity:e===Number.POSITIVE_INFINITY?D.infinity:""}function S(e){var t=p(e);return t.units}var b=jsCommon.StringExtensions,w={"0.00 %;-0.00 %;0.00 %":"Percentage","0.0 %;-0.0 %;0.0 %":"Percentage1"};t.DefaultIntegerFormat="g",t.DefaultNumericFormat="#,0.00",t.DefaultDateFormat="d";var E={NullValue:"(Blank)",BooleanTrue:"True",BooleanFalse:"False",NaNValue:"NaN",InfinityValue:"+Infinity",NegativeInfinityValue:"-Infinity",RestatementComma:"{0}, {1}",RestatementCompoundAnd:"{0} and {1}",RestatementCompoundOr:"{0} or {1}",DisplayUnitSystem_EAuto_Title:"Auto",DisplayUnitSystem_E0_Title:"None",DisplayUnitSystem_E3_LabelFormat:"{0}K",DisplayUnitSystem_E3_Title:"Thousands",DisplayUnitSystem_E6_LabelFormat:"{0}M",DisplayUnitSystem_E6_Title:"Millions",DisplayUnitSystem_E9_LabelFormat:"{0}bn",DisplayUnitSystem_E9_Title:"Billions",DisplayUnitSystem_E12_LabelFormat:"{0}T",DisplayUnitSystem_E12_Title:"Trillions",Percentage:"#,0.##%",Percentage1:"#,0.#%",TableTotalLabel:"Total",Tooltip_HighlightedValueDisplayName:"Highlighted",Funnel_PercentOfFirst:"Percent of first",Funnel_PercentOfPrevious:"Percent of previous",Funnel_PercentOfFirst_Highlight:"Percent of first (highlighted)",Funnel_PercentOfPrevious_Highlight:"Percent of previous (highlighted)",GeotaggingString_Continent:"continent",GeotaggingString_Continents:"continents",GeotaggingString_Country:"country",GeotaggingString_Countries:"countries",GeotaggingString_State:"state",GeotaggingString_States:"states",GeotaggingString_City:"city",GeotaggingString_Cities:"cities",GeotaggingString_Town:"town",GeotaggingString_Towns:"towns",GeotaggingString_Province:"province",GeotaggingString_Provinces:"provinces",GeotaggingString_County:"county",GeotaggingString_Counties:"counties",GeotaggingString_Village:"village",GeotaggingString_Villages:"villages",GeotaggingString_Post:"post",GeotaggingString_Zip:"zip",GeotaggingString_Code:"code",GeotaggingString_Place:"place",GeotaggingString_Places:"places",GeotaggingString_Address:"address",GeotaggingString_Addresses:"addresses",GeotaggingString_Street:"street",GeotaggingString_Streets:"streets",GeotaggingString_Longitude:"longitude",GeotaggingString_Longitude_Short:"lon",GeotaggingString_Longitude_Short2:"long",GeotaggingString_Latitude:"latitude",GeotaggingString_Latitude_Short:"lat",GeotaggingString_PostalCode:"postal code",GeotaggingString_PostalCodes:"postal codes",GeotaggingString_ZipCode:"zip code",GeotaggingString_ZipCodes:"zip codes",GeotaggingString_Territory:"territory",GeotaggingString_Territories:"territories"};t.getLocalizedString=n;var D={null:E.NullValue,true:E.BooleanTrue,false:E.BooleanFalse,NaN:E.NaNValue,infinity:E.InfinityValue,negativeInfinity:E.NegativeInfinityValue,beautify:function(e){return r(e)},describe:function(e){return i(e)},restatementComma:E.RestatementComma,restatementCompoundAnd:E.RestatementCompoundAnd,restatementCompoundOr:E.RestatementCompoundOr},C=2,_=1e3,R=1e4,T=2,V={displayName:"",type:e.ValueType.fromPrimitiveTypeAndCategory(7)};t.getFormatMetadata=a,t.setLocaleOptions=o,t.createDefaultFormatter=u,t.create=s,t.format=c,t.formatVariantMeasureValue=l,t.createDisplayUnitSystem=p,t.getFormatString=h,t.formatListAnd=y,t.formatListOr=d,t.getDisplayUnits=S})(r=t.valueFormatter||(t.valueFormatter={}))})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){e[e.Year=0]="Year",e[e.Month=1]="Month",e[e.Week=2]="Week",e[e.Day=3]="Day",e[e.Hour=4]="Hour",e[e.Minute=5]="Minute",e[e.Second=6]="Second",e[e.Millisecond=7]="Millisecond"})(t=e.DateTimeUnit||(e.DateTimeUnit={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.Prototype.inheritSingle;!(function(e){function t(e){return!_.isEmpty(e)&&e[0].objects}function r(e,t){if(!_.isEmpty(e)){var r=i(e),n=r[0]=i(r[0]);return n.objects=t,r}}function n(e){var t=_.isEmpty(e.categories)?_.isEmpty(e.values)?0:e.values[0].values.length:e.categories[0].values.length;return t}e.getCategoriesDataViewObjects=t,e.setCategoriesDataViewObjects=r,e.getRowCount=n})(r=t.DataViewCategoricalUtils||(t.DataViewCategoricalUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.Prototype.inherit,n=e.Prototype.inheritSingle,a=jsCommon.ArrayExtensions;!(function(e){function r(e){return _.isEmpty(e.children)}function o(e,t){if(e)if(c(e))for(var r=0,i=e;r<i.length;r++){var n=i[r];n&&u(n,[],t)}else u(e,[],t)}function u(e,t,r){t.push(e);var i=r(e,t),n=null!=i&&0!==i;if(1===i){var a=e.children;if(!_.isEmpty(a))for(var o=0,s=a;o<s.length;o++){var c=s[o];if(c&&(n=u(c,t,r),!n))break}}return t.pop(),n}function s(e,t){var i=0;o(e,(function(e,n){return r(e)&&(t(e,i,n),i++),1}))}function c(e){return a.isArrayOrInheritedArray(e)}function l(e,t,r){if(e.level===t)return void r(e);var i=e.children;if(i&&i.length>0)for(var n=0,a=i.length;n<a;n++)l(i[n],t,r)}function p(e,t,r){var a=e,o=void 0===e.level,u=o||e.level<=t;if(u){var s=r?n:i,c=s(e),l=o||e.level<t;if(l&&!_.isEmpty(e.children)){c.children=s(e.children);for(var f=0,v=c.children.length;f<v;f++)c.children[f]=p(c.children[f],t,r)}a=c}return a}function f(e){var t=!1;if(e)if(d(e))t=f(e.rows)||f(e.columns);else{var r=e.levels;if(!_.isEmpty(r))for(var i=0,n=r;i<n.length;i++){var a=n[i];if(a.sources&&a.sources.length>=2){var o=a.sources[0].isMeasure;if(!o){t=!0;break}}}}return t}function v(e){var t=e.rows&&e.rows.levels,r=e.columns&&e.columns.levels,i=e.valueSources,n={primaryAxis:!_.isEmpty(t)&&h(t),secondaryAxis:!_.isEmpty(r)&&h(r),intersection:!_.isEmpty(i)&&_.map(i,(function(e){return e.index}))};return n}function h(e){return _.map(e,(function(e){var t=e.sources,r={selectIndices:_.map(t,(function(e){return e.index}))};return r}))}function m(e){return e&&e.rows&&!_.isEmpty(e.rows.levels)?e.rows.levels.length:0}function y(e){return e&&e.columns&&!_.isEmpty(e.columns.levels)?e.columns.levels.length-(t.DataViewMatrixMeasureHeaders.hasMeasureHeadersLevel(e.columns.levels)?1:0):0}function d(e){return"rows"in e&&"columns"in e&&"valueSources"in e}function g(e){if(e&&!_.isEmpty(e.children)){var t=[];return s(e,(function(e,r,i){t.push(e)})),t}}e.isLeafNode=r,e.forEachNodeDepthFirst=o,e.forEachLeafNode=s,e.forEachNodeAtLevel=l,e.inheritMatrixNodeHierarchy=p,e.containsCompositeGroup=f,e.extractSelectIndices=v,e.getRowGroupingLevelsCount=m,e.getColumnGroupingLevelsCount=y,e.getLeafNodes=g})(r=t.DataViewMatrixUtils||(t.DataViewMatrixUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){var r=e.roles;return!!r&&!!r[t]}function r(e,t){var r=e.roles;return!!r&&_.any(t,(function(e){return r[e]}))}function i(e,t){if(!e)return!1;if(!e[t])return!1;if(_.size(e)>=2)for(var r in e)if(r!==t&&e[r])return!1;return!0}function n(e,t,i){var n=[];if(!_.isEmpty(e))for(var o=a(t),u=0,s=e.length;u<s;u++){var c=e[u];if(!i||r(c,i)){var l=o[c.index];if(_.isEmpty(l)){var p={metadataColumn:c,sourceIndex:u,projectionOrderIndex:void 0};n.push(p)}else for(var f=0,v=l;f<v.length;f++){var h=v[f],p={metadataColumn:c,sourceIndex:u,projectionOrderIndex:h};n.push(p)}}}return n}function a(e){for(var t={},r=0,i=e.length;r<i;r++){var n=e[r],a=t[n];a||(a=t[n]=[]),a.push(r)}return t}e.isForRole=t,e.isForAnyRole=r,e.isExactMatchRole=i,e.leftJoinMetadataColumnsAndProjectionOrder=n})(t=e.DataViewMetadataColumnUtils||(e.DataViewMetadataColumnUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){t.scalarKeyMinPropertyIdentifier={objectName:"scalarKey",propertyName:"min"};var r;!(function(t){function r(t,r){var i;if(t&&(i=t.objects),!_.isEmpty(i)){for(var n=void 0,a=i.length,o=0;o<a;o++){var u=i[o],s=e.DataViewObjects.getValue(u,r);if(void 0!==s){n||(n={values:new Array(a)});var c={min:s};n.values[o]=c}}return n}}t.getScalarKeys=r})(r=t.ScalarKeyUtils||(t.ScalarKeyUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){var i=e.categorical;i&&r(i,t);var n=e.table;n&&a(n,t);var u=e.matrix;u&&o(u,t);var s=e.tree;s&&f(s,t);var c=e.single;c&&w(c,t)}function r(e,t){i(e.categories,t);var r=e.values;n(r,t),S(r,t)}function i(e,t){e&&(m(e,t),y(e,t),g(e,t),b(e,t))}function n(e,t){if(e){m(e,t,0),y(e,t,0),g(e,t,0);var r=e.group;if(r)for(var i=0,n=r.select;i<n.length;i++){var a=n[i];m(a,t,1),y(a,t,1)}}}function a(e,t){var r=e.rows;m(r,t),y(r,t),g(r,t),b(r,t)}function o(e,t){u(e.rows,t),s(e.columns,t),c(e.values,t)}function u(e,t){l(e,t)}function s(e,t){p(e,t)}function c(e,t){p(e,t)}function l(e,t){e&&(y(e,t),x(e,t),b(e,t))}function p(e,t){e&&(y(e,t),g(e,t),b(e,t))}function f(e,t){v(e.nodes,t),h(e.values,t)}function v(e,t){e&&(y(e,t),b(e,t))}function h(e,t){e&&y(e,t)}function m(e,t,r){var i=e.bind;i&&(null!=r?t.visitRole(i.to,r):t.visitRole(i.to))}function y(e,t,r){var i=e.for;i&&(null!=r?t.visitRole(i.in,r):t.visitRole(i.in))}function d(e,t,r){var i=e.composite;if(i){t.enterComposite&&t.enterComposite();for(var n=0,a=i;n<a.length;n++){var o=a[n];m(o,t,r),y(o,t,r)}t.exitComposite&&t.exitComposite()}}function g(e,t,r){var i=e.select;if(i)for(var n=0,a=i;n<a.length;n++){var o=a[n];m(o,t,r),y(o,t,r)}}function x(e,t,r){var i=e.select;if(i)for(var n=0,a=i;n<a.length;n++){var o=a[n];m(o,t,r),y(o,t,r),d(o,t,r)}}function S(e,t){if(e){var r=e.group;r&&(t.visitRole(r.by),b(r,t))}}function b(e,t){if(t.visitReduction){var r=e.dataReductionAlgorithm;r&&t.visitReduction(r)}}function w(e,t){t.visitRole(e.role)}e.visitMapping=t,e.visitCategoricalCategories=i,e.visitCategoricalValues=n,e.visitTable=a,e.visitMatrixRows=u,e.visitMatrixColumns=s,e.visitMatrixValues=c,e.visitTreeNodes=v,e.visitTreeValues=h,e.visitGrouped=S})(t=e.CompiledDataViewMapping||(e.CompiledDataViewMapping={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e,t){if(!_.isEmpty(e)){var r=e[0];if(r.values&&r.values.length>0)for(var n=0,a=r.values.length;n<a;++n){var o=r.values[n];if(o&&o.source&&i(o.source,t))return n}}return-1}function r(e,t){if(!_.isEmpty(e))for(var r=0,n=e.length;r<n;r++)if(i(e[r].source,t))return r;return-1}function i(e,t){var r=e.roles;return r&&r[t]}function n(e,t){return null!=e&&null!=e.metadata&&e.metadata.columns&&_.any(e.metadata.columns,(function(e){return e.roles&&void 0!==e.roles[t]}))}function a(e,t){return e&&e.source&&e.source.roles&&e.source.roles[t]===!0}e.getMeasureIndexOfRole=t,e.getCategoryIndexOfRole=r,e.hasRole=i,e.hasRoleInDataView=n,e.hasRoleInValueColumn=a})(t=e.DataRoleHelper||(e.DataRoleHelper={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.StringExtensions,n=e.Prototype.inheritSingle;!(function(r){function a(e,r){var i=e.categorical;if(!i||_.isEmpty(i.categories))return e;var a=i.categories,u=t.ScalarKeyUtils.getScalarKeys(a[0],t.scalarKeyMinPropertyIdentifier);if(!u||_.isEmpty(u.values))return e;for(var s,c,l,p,f=[],v=0,h=a.length;v<h;v++)for(var m=a[v],y=m.source.type,d=m.values,g=void 0,x=void 0,S=0,b=_.size(d);S<b;S++){var w=d[S],E=u.values[S];if(null==w&&null!=E){s||(s=n(e),c=s.categorical=n(i),l=c.categories=n(a)),g||(g=l[v]=n(m),x=g.values=n(d));var D=o(E.min,y,r);x[S]=D,f[S]||(p||(p=S),f[S]=[]),f[S][v]=t.SQExprBuilder.typedConstant(D,y)}}for(var v=0,h=_.size(l);v<h;v++)for(var m=l[v],C=p,R=_.size(m.identity);C<R;C++){var T=f[C];T&&(m.identity[C]=t.createDataViewScopeIdentity(t.SQExprUtils.getDataViewScopeIdentityComparisonExpr(m.identityFields,T)))}return s||e}function o(e,t,r){if(!_.isDate(e)||!t||!t.temporal)return null;var i=e;return t.temporal.year?u(i):t.temporal.quarter?s(i,r):t.temporal.month?c(i):t.temporal.day?l(i):void 0}function u(e){return e.getFullYear()}function s(e,t){var r=3,n=Math.floor((e.getMonth()+r)/r);return i.format(t,n.toLocaleString())}function c(t){return e.formattingService.formatValue(t,"MMMM")}function l(e){return e.getDate()}r.apply=a})(r=t.DataViewHierarchyLevelBackfill||(t.DataViewHierarchyLevelBackfill={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.Prototype.inherit,n=e.Prototype.inheritSingle,a=e.visuals.valueFormatter;!(function(r){function o(e,t,r,i,n){var a=e,o=e.categorical;if(o){var u=c(o,r),l=s(e.metadata);if(u&&(u.categories.length>=2||l)){var p=_.chain(n&&n[u.roleName]).filter((function(e){return e.suppressConcat})).map((function(e){return e.queryRef})).value();a=f(e,t,u.roleName,u.categories,p,l)}}return a}function u(e,t,r,n){var a;if(!_.isEmpty(n.categories)&&n.categories.length>=2){var o=i(e.columns),u=i(e,(function(e){e.columns=o})),s={metadata:u,categorical:n};a=f(s,t,r,n.categories,[])}else a={metadata:e,categorical:n};return a}function s(e){var r=_.find(e.columns,(function(e){return e.expr instanceof t.SQHierarchyLevelExpr}));if(r){var i=r.expr,n=i.arg;if(n instanceof t.SQHierarchyExpr){var a=n.arg;if(a instanceof t.SQPropertyVariationSourceExpr)return a.property}}}function c(t,r){var i,n=_.chain(r).filter((function(t){return!e.DataViewMapping.getRegressionUsage(t)})).map((function(e){return e.categorical})).value(),a=!_.isEmpty(n)&&_.every(n,(function(e){return!!e}));if(a){var o=l(n);if(o&&p(o,r)){var u=_.filter(t.categories,(function(e){return e.source.roles&&!!e.source.roles[o]}));if(!_.isEmpty(u)){var s=_.every(u,(function(e){return e.values.length===u[0].values.length}));s&&(i={roleName:o,categories:u})}}}return i}function l(t){var r=e.DataViewMapping.getRolesIfSameInAllCategoricalMappings(t,e.DataViewMapping.getAllRolesInCategories);if(1===_.size(r))return _.first(r)}function p(e,t){var r=_.every(t,(function(t){return!_.isEmpty(t.conditions)&&_.every(t.conditions,(function(t){return t[e]&&1===t[e].max}))}));return r}function f(r,i,a,o,u,s){var c,l,p=_.filter(o,(function(e){return!_.contains(u,e.source.queryName)}));if(1===o.length)c=p[0].values,l=p[0].source.type;else{var f=t.DataViewObjectDescriptors.findFormatString(i);c=h(p,f),l=e.ValueType.fromDescriptor({text:!0})}var v=_.map(p,(function(e){return e.source})),g=m(a,v,l,s),x=n(r);y(x,g);var S=r.categorical,b=t.DataViewCategoricalUtils.getCategoriesDataViewObjects(S.categories),w=d(p,g,c,b),E=_.last(o),D=_.findIndex(S.categories,(function(e){
return e===E})),C=n(S.categories);C.splice(D,0,w);for(var R=function(e){_.find(o,(function(t){return t===C[e]}))&&C.splice(e,1)},T=C.length-1;T>=0;T--)R(T);var V=n(S);return V.categories=C,x.categorical=V,x}function v(e,t){return e+" "+t}function h(e,t){for(var r=[],i=0,n=e;i<n.length;i++)for(var o=n[i],u=a.getFormatString(o.source,t),s=0,c=o.values.length;s<c;s++){var l=o.values&&o.values[s],p=a.format(l,u);r[s]=void 0===r[s]?p:r[s]+" "+p}return r}function m(e,t,r,i){var n;if(i){var a=_.last(t).displayName;n=v(i,a)}else for(var o=0,u=t;o<u.length;o++){var s=u[o];n=null==n?s.displayName:n+" "+s.displayName}var c={};c[e]=!0;var l={displayName:n,roles:c,type:r},p=_.last(t);return void 0!==p.isMeasure&&(l.isMeasure=p.isMeasure),l.queryName=p.queryName,l}function y(e,t){var r=n(e.metadata.columns);r.push(t);var i=n(e.metadata);i.columns=r,e.metadata=i}function d(e,t,r,i){var n={source:t,values:r},a=e[0];return a.identity&&(n.identity=a.identity),a.identityFields&&(n.identityFields=a.identityFields),i&&(n.objects=i),n}r.detectAndApply=o,r.applyToPlayChartCategorical=u})(r=t.DataViewConcatenateCategoricalColumns||(t.DataViewConcatenateCategoricalColumns={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t,r=jsCommon.ArrayExtensions;!(function(e){function t(e){var t=e&&e.usage&&e.usage.regression;return t||void 0}function i(e,t){var r=[];if(e){var i={visitRole:function(e){r.push(e)}};t(e,i)}return r}function n(e){var t=e&&e.usage&&e.usage.forecast;return!!t}function a(e,t){if(0!==_.size(e)){var i=_.map(e,(function(e){return t(e)})),n=i[0];if(!(i.length>=2)||_.every(i,(function(e){return r.sequenceEqual(e,n,(function(e,t){return e===t}))})))return n}}function o(t){if(!t.categories)return[];var r=[];return e.visitCategoricalCategories(t.categories,{visitRole:function(e){r.push(e)}}),r}function u(e){if(!e)return 0;for(var t=0,r=0,i=e;r<i.length;r++){var n=i[r];n.categorical&&(t|=1),n.matrix&&(t|=2),n.single&&(t|=4),n.table&&(t|=8),n.tree&&(t|=16)}return t}e.getRegressionUsage=t,e.getRoles=i,e.isForecastDefined=n,e.getRolesIfSameInAllCategoricalMappings=a,e.getAllRolesInCategories=o,e.targetDataViewKinds=u})(t=e.DataViewMapping||(e.DataViewMapping={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t){var i=e.categorical;i&&r(i,t);var n=e.table;n&&a(n,t);var u=e.matrix;u&&o(u,t);var s=e.tree;s&&f(s,t);var c=e.single;c&&w(c,t)}function r(e,t){i(e.categories,t);var r=e.values;n(r,t),S(r,t)}function i(e,t){e&&(m(e,t),y(e,t),g(e,t),b(e,t))}function n(e,t){if(e){m(e,t,0),y(e,t,0),g(e,t,0);var r=e.group;if(r)for(var i=0,n=r.select;i<n.length;i++){var a=n[i];m(a,t,1),y(a,t,1)}}}function a(e,t){var r=e.rows;m(r,t),y(r,t),g(r,t),b(r,t)}function o(e,t){u(e.rows,t),s(e.columns,t),c(e.values,t)}function u(e,t){l(e,t)}function s(e,t){p(e,t)}function c(e,t){p(e,t)}function l(e,t){e&&(y(e,t),x(e,t),b(e,t))}function p(e,t){e&&(y(e,t),g(e,t),b(e,t))}function f(e,t){v(e.nodes,t),h(e.values,t)}function v(e,t){e&&(y(e,t),b(e,t))}function h(e,t){e&&y(e,t)}function m(e,t,r){var i=e.bind;i&&(null!=r?t.visitRole(i.to,r):t.visitRole(i.to))}function y(e,t,r){var i=e.for;i&&(null!=r?t.visitRole(i.in,r):t.visitRole(i.in))}function d(e,t,r){var i=e.composite;if(i){t.enterComposite&&t.enterComposite();for(var n=0,a=i;n<a.length;n++){var o=a[n];m(o,t,r),y(o,t,r)}t.exitComposite&&t.exitComposite()}}function g(e,t,r){var i=e.select;if(i)for(var n=0,a=i;n<a.length;n++){var o=a[n];m(o,t,r),y(o,t,r)}}function x(e,t,r){var i=e.select;if(i)for(var n=0,a=i;n<a.length;n++){var o=a[n];m(o,t,r),y(o,t,r),d(o,t,r)}}function S(e,t){if(e){var r=e.group;r&&(t.visitRole(r.by),b(r,t))}}function b(e,t){if(t.visitReduction){var r=e.dataReductionAlgorithm;r&&t.visitReduction(r)}}function w(e,t){t.visitRole(e.role)}e.visitMapping=t,e.visitCategorical=r,e.visitCategoricalCategories=i,e.visitCategoricalValues=n,e.visitTable=a,e.visitMatrixRows=u,e.visitMatrixColumns=s,e.visitMatrixValues=c,e.visitTreeNodes=v,e.visitTreeValues=h,e.visitGrouped=S})(t=e.DataViewMapping||(e.DataViewMapping={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.Prototype.inheritSingle;!(function(t){function r(e){var t=_.filter(e.dataRoles,(function(e){return!_.isEmpty(e.requiredTypes)}));n(e.dataview,e.dataViewMappings,t)}function n(e,t,r){if(!_.isEmpty(t)&&!_.isEmpty(r)){for(var i=a(e.metadata.columns,r),n=o(e.metadata.columns,r),u={},s=0,v=t;s<v.length;s++){var m=v[s];for(var y in m)null!=e[y]&&(u[y]=!0)}u.categorical&&c(e.categorical,i,n),u.table&&l(e.table,i,n),u.tree&&p(e.tree.root,i,n),u.matrix&&f(e.matrix,i,n),u.single&&h(e,t,r,n)}}function a(e,t){if(!e||!t)return function(){return!1};for(var r={},i=0,n=e;i<n.length;i++){var a=n[i],o=a.roles;if(o)for(var u=0,s=t;u<s.length;u++){var c=s[u];if(o[c.name]){r[a.index]=!0;break}}}return function(e){return!isNaN(e)&&!!r[e]}}function o(e,t){if(!e||!t)return function(){return!0};for(var r=[],i=0,n=e;i<n.length;i++){var a=n[i],o=u(a,t);o&&(r[a.index]=o)}return function(e,t){return!r[e]||r[e](t)}}function u(e,t){var r=s(e,t);if(!_.isEmpty(r))return function(e){return y(e,r)}}function s(t,r){var i=[],n=t&&t.roles;if(!n)return i;for(var a=0,o=r;a<o.length;a++){var u=o[a];if(n[u.name])for(var s=0,c=u.requiredTypes;s<c.length;s++){var l=c[s],p=e.ValueType.fromDescriptor(l);i.push(p)}}return i}function c(e,t,r){var i=e&&e.values;if(i){var n=i.grouped();if(n)for(var a=0,o=n;a<o.length;a++)for(var u=o[a],s=u.values,c=0,l=s;c<l.length;c++){var p=l[c],f=p.source.index;if(t(f))for(var v=0,h=p.values.length;v<h;v++)p.values=m(p.values,v,f,r)}}}function l(e,t,r){var i=e&&e.columns;if(i){for(var n=[],a=0,o=i;a<o.length;a++){var u=o[a];t(u.index)&&n.push(u.index)}for(var s=e.rows,c=0,l=s.length;c<l;c++)for(var p=0,f=n;p<f.length;p++){var v=f[p];s[c]=m(s[c],v,v,r)}}}function p(e,t,r){if(e.values)for(var i in e.values)t(i)&&("object"==typeof e.values[i]&&"value"in e.values[i]?e.values[i]=m(e.values[i],"value",i,r):e.values=m(e.values,i,i,r));else if(e.children)for(var n=0,a=e.children;n<a.length;n++){var o=a[n];p(o,t,r)}}function f(e,t,r){var i=e&&e.rows&&e.rows.root;i&&v(e,i,t,r)}function v(e,t,r,i){if(t.values)for(var n in t.values){var a=t.values[n],o=a.valueSourceIndex||0,u=e.valueSources[o].index;_.isNumber(u)&&r(u)&&(t.values[n]=m(a,"value",u,i))}else if(t.children)for(var s=0,c=t.children;s<c.length;s++){var l=c[s];v(e,l,r,i)}}function h(e,t,r,i){if(e.single){for(var n=[],a=0,o=r;a<o.length;a++){var u=o[a];u.name&&n.push(u.name)}for(var s=e.metadata.columns,c=0,l=t;c<l.length;c++){var p=l[c],f=p.single.role;if(n.indexOf(f)!==-1){var v=d(s,f);return void(v&&(e.single=m(e.single,"value",v.index,i)))}}}}function m(e,t,r,n){if(e){var a=e[t];return null===a||n(r,a)||(e=i(e),e[t]=null),e}}function y(e,t){for(var r=0,i=t;r<i.length;r++){var n=i[r];if(n.numeric||n.integer)return"number"==typeof e}return!1}function d(e,t){for(var r=0,i=e;r<i.length;r++){var n=i[r],a=n&&n.roles;if(a&&a[t])return n}}t.apply=r,t.filterVariantMeasures=n,t.generateMetadataColumnFilter=a,t.generateValueFilter=o,t.getColumnRequiredTypes=s,t.normalizeVariant=m})(r=t.DataViewNormalizeValues||(t.DataViewNormalizeValues={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t,i){if(!e)return i;var n=e[t.objectName];return r.getValue(n,t.propertyName,i)}function i(e,t,r){if(e&&e[t]){var i=e[t];return i}return r}function n(e,t){var r=i(e,t);if(r)return r.$instances}function a(e,r,i){var n=t(e,r);return n&&n.solid?n.solid.color:i}e.getValue=t,e.getObject=i,e.getUserDefinedObjects=n,e.getFillColor=a})(t=e.DataViewObjects||(e.DataViewObjects={}));var r;!(function(e){function t(e,t,r){if(!e)return r;var i=e[t];return void 0===i?r:i}function r(e,r,i){var n=t(e,r);return n&&n.solid?n.solid.color:i}e.getValue=t,e.getFillColorByPropertyName=r})(r=e.DataViewObject||(e.DataViewObject={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,r=jsCommon.JsonComparer;!(function(t){function n(t,r,i){var n=t[r];n||(t[r]=n=[]);for(var a=0,o=n.length;a<o;a++){var u=n[a];if(e.Selector.equals(u.selector,i))return u}var s={selector:i,properties:{}};return n.push(s),s}function a(t,r,i,n){var a=_.find(t[r],(function(t){return e.Selector.equals(t.selector,i)}));a&&(a.selector=n)}function o(t,r,i){var n=t[r];if(!n)return!1;var a=_.remove(n,(function(t){return e.Selector.equals(t.selector,i)})).length>0;return _.isEmpty(n)&&delete t[r],a}function u(e,t){if(e&&t)for(var r in t)for(var i=t[r],n=0,a=i;n<a.length;n++){var o=a[n];for(var u in o.properties)p(e,r,o.selector,u)}}function s(e,t){if(e&&t)for(var r in t){var i=t[r];if(i){var n=e[r];n||(n=e[r]=[]),c(n,i)}}}function c(t,r){for(var i,n=0,a=r;n<a.length;n++){var o=a[n];i=!1;for(var u=0,s=t;u<s.length;u++){var c=s[u];if(e.Selector.equals(c.selector,o.selector)){l(c.properties,o.properties),i=!0;break}}if(!i){var p={selector:o.selector,properties:{}};l(p.properties,o.properties),t.push(p)}}}function l(e,t){for(var r in t){var i=t[r];if(i){var n=e[r];n||(e[r]=i)}}}function p(e,t,r,n){var a=m(e,t,r);a&&i.deleteSingleProperty(a,n)}function f(e,t,r,i){n(e,t.objectName,r).properties[t.propertyName]=i}function v(e,t,r){var i=h(e,t,r);if(i)return i[t.propertyName]}function h(e,t,r){var i=m(e,t.objectName,r);if(i)return i.properties}function m(t,r,i){if(t){var n=t[r];if(n)for(var a=0,o=n.length;a<o;a++){var u=n[a];if(e.Selector.equals(u.selector,i))return u}}}function y(t,i){return t instanceof e.SemanticFilter&&i instanceof e.SemanticFilter?e.SemanticFilter.isSameFilter(t,i):r.equals(t,i)}function d(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!y(e[r],t[r]))return!1;return!0}function g(t,r){if(r.bool)return"boolean"!=typeof t&&(t=!1),e.SQExprBuilder.boolean(t);if(r.text||r.scripting&&r.scripting.source)return e.SQExprBuilder.text(t);if(r.numeric){if($.isNumeric(t))return e.SQExprBuilder.double(+t)}else if(r.integer){if($.isNumeric(t))return e.SQExprBuilder.integer(Math.floor(+t))}else if(r.fill){if(t)return{solid:{color:e.SQExprBuilder.text(t)}}}else{if(r.formatting)return r.formatting.labelDisplayUnits?e.SQExprBuilder.double(+t):e.SQExprBuilder.text(t);if(r.enumeration)return $.isNumeric(t)?e.SQExprBuilder.double(+t):e.SQExprBuilder.text(t);if(r.misc)t=t?e.SQExprBuilder.text(t):null;else if(r.dateTime)t=t?e.SQExprBuilder.dateTime(t):null;else if(r.image){if(t){var i=t,n={name:e.SQExprBuilder.text(i.name),url:e.SQExprBuilder.text(i.url)};return i.scaling&&(n.scaling=e.SQExprBuilder.text(i.scaling)),n}}else if(r.geoJson&&t){var a=t,o={type:e.SQExprBuilder.text(a.type),name:e.SQExprBuilder.text(a.name),content:a.content?e.SQExprBuilder.text(a.content):e.SQExprBuilder.nullConstant()};return o}}return t}function x(e){var t={};for(var r in e){var i=e[r];if(!_.isEmpty(i)){for(var n=[],a=0,o=i;a<o.length;a++){var u=o[a];n.push({properties:S(u.properties),selector:u.selector})}t[r]=n}}return t}function S(e){return _.clone(e)}function b(t){function r(t,i,n){var u=t[i];if(u instanceof e.SQExpr)a(u,t,i,n,o);else if("object"==typeof u)for(var s in u)o.push(s),r(u,s,n),o.pop()}var i=t.definitions,n=t.descriptors,a=t.visitor,o=[];for(var u in i)if(!_.isEmpty(i[u]))for(var s=n&&n[u],c=0,l=i[u];c<l.length;c++){var p=l[c],f=p.properties;if(f)for(var v in f){var h=s&&s.properties[v];r(f,v,h&&h.type)}}}t.ensure=n,t.updateSelector=a,t.deleteObjectDefinition=o,t.deleteProperties=u,t.extend=s,t.deleteProperty=p,t.setValue=f,t.getValue=v,t.getPropertyContainer=h,t.getObjectDefinition=m,t.propertiesAreEqual=y,t.allPropertiesAreEqual=d,t.encodePropertyValue=g,t.clone=x,t.visitPropertyExprs=b})(t=e.DataViewObjectDefinitions||(e.DataViewObjectDefinitions={}));var i;!(function(e){function t(e,t){delete e.properties[t]}function r(e){return!_.startsWith(e,"$")}e.deleteSingleProperty=t,e.isValidPropertyName=r})(i=e.DataViewObjectDefinition||(e.DataViewObjectDefinition={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r;!(function(t){function r(t){return s(t,(function(t){var r=e.ValueType.fromDescriptor(t.type).formatting;return r&&r.formatString}))}function i(e){return s(e,(function(e){var t=e.type;return t&&t.filter&&!t.filter.selfFilter}))}function n(e){return s(e,a)}function a(e){var t=e&&e.type;return t&&t.filter&&t.filter.selfFilter}function o(e){return s(e,(function(e){var t=e.type;return t&&t.operations&&t.operations.searchEnabled}))}function u(e){return s(e,(function(e){var t=e.type;return t&&!!t.expression&&t.expression.defaultValue}))}function s(e,t){if(e)for(var r in e){var i=e[r].properties;for(var n in i)if(t(i[n]))return{objectName:r,propertyName:n}}}t.findFormatString=r,t.findFilterOutput=i,t.findSelfFilter=n,t.isSelfFilter=a,t.findSelfFilterEnabled=o,t.findDefaultValue=u})(r=t.DataViewObjectDescriptors||(t.DataViewObjectDescriptors={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function r(t,r,i){for(var n,a=0,o=i.length;a<o;a++){var u=i[a],s=u.name,c=e.DataViewObjectEvaluator.run(t,r[s],u.properties);c&&(n||(n={}),n[s]=c)}return n}function i(e){var t={data:[]};if(e)for(var r in e)for(var i=e[r],a=0,o=i.length;a<o;a++){var u=i[a];n(t,u.selector).objects.push({name:r,properties:u.properties})}return t}function n(t,r){var i;r&&r.data?i=t.data:r&&r.metadata?(t.metadata||(t.metadata=[]),i=t.metadata):(t.metadataOnce||(t.metadataOnce=[]),i=t.metadataOnce);for(var n=0,a=i;n<a.length;n++){var o=a[n];if(e.Selector.equals(r,o.selector))return o}var u={selector:r,objects:[]};return i.push(u),u}function a(e,t,r,i){i&&(o(e,t,r,i),u(e,t,r,i))}function o(t,r,i,n){var a=e.DataViewObjectDescriptors.findFormatString(r);if(a)for(var o=0,u=n.length;o<u;o++){var l=n[o];l&&c(t,a,l.queryName,l.format||s(i,o))}}function u(t,r,i,n){var a=e.DataViewObjectDescriptors.findDefaultValue(r);if(a)for(var o=0,u=n;o<u.length;o++){var s=u[o];s&&l(t,a,s.queryName,s.defaultValue)}}function s(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];if(n&&n.index===t)return n.format}}function c(t,r,i,n){n&&p(t,r,{metadata:i},e.SQExprBuilder.text(n))}function l(e,t,r,i){i&&p(e,t,{metadata:r},i)}function p(e,t,r,i){var n;if(r){var a=e.metadata;a||(a=e.metadata=[]),n=a}else{var o=e.metadataOnce;o||(o=e.metadataOnce=[{selector:r,objects:[]}]),n=o}var u,s=f(n,r);if(s){var c=s.objects;if(u=v(c,t.objectName)){if(u.properties[t.propertyName])return}else u={name:t.objectName,properties:{}},c.push(u)}else u={name:t.objectName,properties:{}},n.push({selector:r,objects:[u]});u.properties[t.propertyName]=i}function f(t,r){for(var i=0,n=t.length;i<n;i++){var a=t[i];if(e.Selector.equals(a.selector,r))return a}}function v(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];if(n.name===t)return n}}t.evaluateDataViewObjects=r,t.groupObjectsBySelector=i,t.addImplicitObjects=a})(t=e.DataViewObjectEvaluationUtils||(e.DataViewObjectEvaluationUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.Color;!(function(r){function n(e,t,r){if(t){var i,n=t.properties;for(var o in r){var u=r[o],s=n[o];if(s){var c=a(e,s,u);void 0!==c&&(i||(i={}),i[o]=c)}}return i}}function a(r,i,n){var a=i.type;if(a&&a.expression)return n;var s=d(r,n,e.ValueType.fromDescriptor(i.type));return void 0!==s||n instanceof t.RuleEvaluation?s:o(r,n,a)||u(r,n,a)||p(r,n,a)||f(r,n,a)||m(r,n,a)||n}function o(t,r,i){var n=i.fill;if(n)return n&&n.solid&&n.solid.color&&r.solid?{solid:{color:d(t,r.solid.color,e.ValueType.fromExtendedType(19664897))}}:void 0}function u(e,t,r){if(r.fillRule){var i;if(t.linearGradient2){var n=t.linearGradient2;i={linearGradient2:{min:s(e,n.min),max:s(e,n.max)}};var a=l(e,n.nullColoringStrategy);a&&(i.linearGradient2.nullColoringStrategy=a)}else if(t.linearGradient3){var n=t.linearGradient3;i={linearGradient3:{min:s(e,n.min),mid:s(e,n.mid),max:s(e,n.max)}};var a=l(e,n.nullColoringStrategy);a&&(i.linearGradient3.nullColoringStrategy=a)}return i}}function s(e,t){var r={color:c(e,t.color)},i=d(e,t.value,x);return null!=i&&(r.value=i),r}function c(e,t){return d(e,t,g)}function l(e,t){if(t){var r={strategy:d(e,t.strategy,b)};return t.color&&(r.color=c(e,t.color)),r}}function p(t,r,i){if(i.image&&r){var n={name:d(t,r.name,S),url:d(t,r.url,e.ValueType.fromDescriptor(e.ImageDefinition.urlType))};return r.scaling&&(n.scaling=d(t,r.scaling,S)),n}}function f(e,t,r){if(r.paragraphs&&t)return y(e,t,v)}function v(e,t){var r,i=t.textRuns,n=y(e,i,h);return i!==n&&(r=_.clone(t),r.textRuns=n),r||t}function h(e,t){var r,i=t.value,n=d(e,i,S);return void 0!==n&&(r=_.clone(t),r.value=n),r||t}function m(e,t,r){if(r.geoJson&&t){var i={name:d(e,t.name,S),type:d(e,t.type,S),content:d(e,t.content,S)};return i}}function y(e,t,r){for(var i,n=0,a=t.length;n<a;n++){var o=t[n],u=r(e,o);i||o===u||(i=_.take(t,n)),i&&i.push(u)}return i||t}function d(e,r,i){return r instanceof t.SQExpr?w.evaluate(r,e):r instanceof t.RuleEvaluation?r.evaluate(e):void 0}var g=e.ValueType.fromDescriptor({formatting:{color:!0}}),x=e.ValueType.fromDescriptor({numeric:!0}),S=e.ValueType.fromDescriptor({text:!0}),b=e.ValueType.fromDescriptor({enumeration:e.NullStrategy.type});r.run=n,r.evaluateProperty=a,r.evaluateFillRule=u,r.evaluateValue=d;var w=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.evaluate=function(e,r){if(null!=e)return e.accept(t.instance,r)},t.prototype.visitColumnRef=function(e,t){return t.getExprValue(e)},t.prototype.visitConstant=function(e,t){return e.value},t.prototype.visitMeasureRef=function(e,t){return t.getExprValue(e)},t.prototype.visitAggr=function(e,t){return t.getExprValue(e)},t.prototype.visitFillRule=function(e,t){var r=e.input.accept(this,t);if(void 0!==r){var i=t.getColorAllocator(e);if(i)return i.color(r)}},t.prototype.visitPercentile=function(e,t){return t.getExprValue(e)},t.prototype.visitSelectRef=function(e,t){return t.getExprValue(e)},t.prototype.visitThemeColor=function(e,t){var r=t.getThemeColor(e.color);if(r)return i.shadeColor(r,e.percent)},t})(t.DefaultSQExprVisitorWithArg);w.instance=new w})(r=t.DataViewObjectEvaluator||(t.DataViewObjectEvaluator={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.Prototype.inheritSingle;!(function(e){function r(e){var r=e.values;if(r){var n,a=!!r.source;if(a){n=i(r.grouped());var o=0===t.DataViewCategoricalUtils.getRowCount(e),u=r.length>=1&&(o||void 0!==_.first(r).identity);if(!_.isEmpty(r)&&u)for(var s=0,c=void 0,l=0,p=r.length;l<p;l++){var f=r[l];if(!c||f.identity!==c.identity){var v=n[s];c=v?i(v):v=n[s]={values:null},n[s]=c,c.values=[],s++}c.values.push(f)}else for(var l=0,p=n.length;l<p;l++){var h=n[l];_.isEmpty(h.values)||(n[l]=h=i(h),h.values=[])}}else n=[{values:r}];r.grouped=function(){return n},e.values=r}}e.apply=r})(r=t.DataViewCategoricalEvalGrouped||(t.DataViewCategoricalEvalGrouped={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.ArrayExtensions,n=e.Prototype.inheritSingle;!(function(r){function o(e,t,r,i){var n=e;return r&&(n=u(n,t,r,i),n=p(n,t,r)),n}function u(r,i,o,u){if(!o)return r;var p=e.DataViewMapping.getRoles(i.values,e.DataViewMapping.visitMatrixValues);if(_.isEmpty(p))return r;var f=r.valueSources,v=s(o,p);if(_.isEmpty(f)||c(r.valueSources,v))return r;var h=t.DataViewMetadataColumnUtils.leftJoinMetadataColumnsAndProjectionOrder(f,v,p),m=_.chain(h).filter((function(e){return void 0!==e.projectionOrderIndex})).sortBy((function(e){return e.projectionOrderIndex})).value(),y=n(r);y.rows=l(y.rows,y.valueSources,m);var d=_.map(m,(function(e){return e.metadataColumn}));return y.valueSources=d,y.columns=a.update(y.columns,d.slice()),u.hierarchyTreesRewritten=!0,y}function s(e,t){for(var r=[],i=0,n=t;i<n.length;i++){var a=n[i],o=e[a];_.isEmpty(o)||r.push.apply(r,o)}return r}function c(e,t){var r=_.map(e,(function(e){return e.index}));return i.sequenceEqual(r,t,(function(e,t){return e===t}))}function l(e,r,i){var a,o=r.length,u=i.length,s=n(e);return s.root=t.DataViewPivotMatrix.cloneTreeExecuteOnLeaf(s.root,(function(e){var t=e.values;if(t)if(void 0===a&&(a=Object.keys(e.values).length/o),u>0){for(var r={},s=0;s<a;s++)for(var c=s*o,l=s*u,p=0;p<u;p++){var f=i[p].sourceIndex,v=t[c+f];p!==(v.valueSourceIndex||0)&&(v=n(v),v.valueSourceIndex=p||void 0),r[l+p]=v}e.values=r}else e.values=void 0})),s}function p(t,r,i){var a,o=e.DataViewMapping.getRoles(r.rows,e.DataViewMapping.visitMatrixRows),u=s(i,o),c=f(t.rows,u),l=e.DataViewMapping.getRoles(r.columns,e.DataViewMapping.visitMatrixColumns),p=s(i,l),v=f(t.columns,p);return(c||v)&&(a=n(t),a.rows=c||a.rows,a.columns=v||a.columns),a||t}function f(e,r){var i,o=e.levels,u=_.chain(o).map((function(e,t){return t})).filter((function(e){var t=o[e];return _.size(t.sources)>=2&&!a.isMeasureHeadersLevel(t)})).value();if(!_.isEmpty(u)){for(var s=_.uniq(r),c=u.length-1;c>=0;c--){var l=u[c],p=e.levels[l],f=v(p,s);if(!_.isEmpty(f)){void 0===i&&(i=n(e),i.levels=n(e.levels),i.root=t.DataViewMatrixUtils.inheritMatrixNodeHierarchy(e.root,l,!0));var y=n(p);i.levels[l]=h(y,f),m(i.root,l,f)}}return i}}function v(e,r){var i,n=e.sources;if(n&&n.length>=2){var a=t.DataViewMetadataColumnUtils.leftJoinMetadataColumnsAndProjectionOrder(n,r),o=_.sortBy(a,(function(e){return e.projectionOrderIndex}));i=_.map(o,(function(e,t){var r={originalSourceIndex:e.sourceIndex,newSourceIndex:t};return r}))}return i}function h(e,t){var r=e.sources;e.sources=r.slice(0);for(var i=0,n=t;i<n.length;i++){var a=n[i];e.sources[a.newSourceIndex]=r[a.originalSourceIndex]}return e}function m(e,r,i){var a=_.reduce(i,(function(e,t){return e[t.originalSourceIndex]=t,e}),{});return t.DataViewMatrixUtils.forEachNodeAtLevel(e,r,(function(e){var t=e.levelValues;if(!_.isEmpty(t)){for(var r=_.sortBy(t,(function(e){var t=a[e.levelSourceIndex];return t&&t.newSourceIndex})),i=0,o=r.length;i<o;i++){var u=n(r[i]),s=a[u.levelSourceIndex];u.levelSourceIndex=s&&s.newSourceIndex,r[i]=u}e.levelValues=r;var c=_.last(r);e.value!==c.value&&(e.value=c.value),(e.levelSourceIndex||0)!==c.levelSourceIndex&&(e.levelSourceIndex=c.levelSourceIndex)}})),e}r.apply=o})(r=t.DataViewMatrixProjectionOrder||(t.DataViewMatrixProjectionOrder={}));var a;!(function(e){function r(e,t){var r,n=e.levels,a=i(n),c=a?_.size(n)>=2:_.size(n)>=1,l=c?t.length>=2:t.length>=1;return r=a?l?o(e,t):u(e):l?s(e,t):e}function i(e){return!_.isEmpty(e)&&a(_.last(e))}function a(e){return e&&_.every(e.sources,(function(e){return e.isMeasure}))}function o(e,r){var i=n(e),a=i.levels=n(i.levels),o=a.length-1,u=a[o]=n(a[o]);return u.sources=r,i.root=t.DataViewMatrixUtils.inheritMatrixNodeHierarchy(i.root,o,!0),t.DataViewMatrixUtils.forEachNodeDepthFirst(i.root,(function(e){return c(e,o)?(e.children=l(o,r.length,e.isSubtotal),2):1})),i}function u(e){var r=n(e),i=r.levels=n(r.levels),a=i.length-1;return i.splice(a,1),r.root=t.DataViewMatrixUtils.inheritMatrixNodeHierarchy(r.root,a,!0),t.DataViewMatrixUtils.forEachNodeDepthFirst(r.root,(function(e){return c(e,a)?(e.children=void 0,2):1})),r}function s(e,r){var i=n(e),a=i.levels=n(i.levels),o={sources:r};a.push(o);var u=a.length-1;return i.root=t.DataViewMatrixUtils.inheritMatrixNodeHierarchy(i.root,u,!0),t.DataViewMatrixUtils.forEachNodeDepthFirst(i.root,(function(e){return t.DataViewMatrixUtils.isLeafNode(e)?(e.children=l(u,r.length,e.isSubtotal),2):1})),i}function c(e,t){var r=e.children;return!_.isEmpty(r)&&r[0].level===t}function l(e,t,r){for(var i=[],n=0,a=t;n<a;n++){var o={level:e};n>0&&(o.levelSourceIndex=n),r&&(o.isSubtotal=!0),i.push(o)}return i}e.update=r,e.hasMeasureHeadersLevel=i,e.isMeasureHeadersLevel=a})(a=t.DataViewMatrixMeasureHeaders||(t.DataViewMatrixMeasureHeaders={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.Prototype.inherit;!(function(e){function r(e){var r=e.categorical;if(!r)return null;var n=r.categories;if(!n||1!==n.length)return null;var a=r.values;if(_.isEmpty(a)||a.source)return null;for(var o=n[0],u=o.identity,s=o.values,c=[],l=[],p=0,f=s.length;p<f;p++)for(var v=s[p],h=u[p],m=0,y=a.length;m<y;m++){var d=a[m],g=i(d.source);if(d.identity)return null;g.groupName=v;var x={source:g,values:[d.values[p]],identity:h,min:d.min,max:d.max,subtotal:d.subtotal},S=d.highlights;S&&(x.highlights=[S[p]]),c.push(g),l.push(x)}var b=i(e.metadata);return b.columns=c,a=t.DataViewTransform.createValueColumns(l,o.identityFields,o.source),{metadata:b,categorical:{values:a},matrix:e.matrix}}e.apply=r})(r=t.DataViewPivotCategorical||(t.DataViewPivotCategorical={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r;!(function(t){function r(t,r){r.columnHierarchyRewritten||(t.columns=e.Prototype.inherit(t.columns));var o=t.columns;r.rowHierarchyRewritten||(t.rows=e.Prototype.inherit(t.rows));var u=t.rows;if(!(o.levels.length>1)){var s={level:0},c=o.root.children,l=c.length,p=u.levels.length;if(l>0){var f=0,v=function(e){if(e.values){s.values||(s.values={});for(var t=0;t<l;t++)s.values[f++]=e.values[t];e.values=void 0}if(l>1){e.children||(e.children=[]);for(var r=0;r<l;r++){var i={level:p},n=c[r];i.levelSourceIndex=n.levelSourceIndex,e.isSubtotal&&(i.isSubtotal=!0),e.children.push(i)}}};r.hierarchyTreesRewritten?i(u.root,v):t.columns.root=a(u.root,v)}else r.hierarchyTreesRewritten||(t.columns.root=n(u.root));if(l>1){var h={sources:o.levels[0].sources};u.levels.push(h),o.levels.length=0}if(r.hierarchyTreesRewritten)t.columns.root=u.root,t.rows.root={children:[s]};else{var m=e.Prototype.inherit(t.rows.root);m.children=[s],t.rows.root=m}t.columns.levels=u.levels,t.rows.levels=[]}}function i(e,t){var r=e.children;if(r&&r.length>0)for(var n=0,a=r.length;n<a;n++)i(r[n],t);else t(e)}function n(e){return a(e)}function a(t,r){var i=e.Prototype.inherit(t),n=t.children;if(n&&n.length>0){for(var o=[],u=0,s=n.length;u<s;u++){var c=a(n[u],r);o.push(c)}i.children=o}else r&&r(i);return i}t.apply=r,t.cloneTree=n,t.cloneTreeExecuteOnLeaf=a})(r=t.DataViewPivotMatrix||(t.DataViewPivotMatrix={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(e,r){for(var i=e.identity,n=e.values,a=[],o={},u=0,s=_.size(i);u<s;u++){var c=i[u],l=t.ScopeIdentityExtractor.getSubset(c.expr,r),p=l&&t.createDataViewScopeIdentity(l),f=p&&p.key,v=o[f],h=void 0;void 0===v?(h={identity:p,groupValue:n[u],groupIndex:a.length,valueRowIndices:[]},a.push(h),o[f]=h.groupIndex):h=a[v],h.valueRowIndices.push(u)}return a}function i(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=null;return t}function n(t,r,i){for(var n=e.Prototype.inherit(t),a=0,o=i;a<o.length;a++){var u=o[a];n[u]=r[u]}return n}var a;!(function(a){function o(e,t){if(e.categorical&&t){var r=e.categorical;if(!(_.isEmpty(r.categories)||r.values&&r.values.source)){var i=u(r,t);if(!_.isEmpty(i))return s(e.metadata,r,t,i)}}}function u(e,t){var r=t.source.identityExprs;return r?r:1===e.categories.length?t.identityFields:void 0}function s(r,i,n,a){var o=n.values,u=o.length;if(0!==u){var s=i.values?i.values.grouped()[0].values:[],l=c(n,u,s,a);if(l){var p=t.createCategoricalDataViewBuilder().withCategories(i.categories).withGroupedValues(l).build();return r=e.Prototype.inherit(r),r.columns=p.metadata.columns,{metadata:r,categorical:p.categorical}}}}function c(e,t,a,o){var u=i(t),s=r(e,o);if(!_.isEmpty(s)){var c=_.map(s,(function(e){var t=e.valueRowIndices,r=_.map(a,(function(e){var r={values:n(u,e.values,t)};return e.highlights&&(r.highlights=n(u,e.highlights,t)),r}));return r}));return{groupColumn:{source:e.source,identityFrom:{fields:o,identities:_.map(s,(function(e){return e.identity}))},values:_.map(s,(function(e){return e.groupValue}))},valueColumns:_.map(a,(function(e){return{source:e.source}})),data:c}}}a.apply=o})(a=t.DataViewSelfCrossJoin||(t.DataViewSelfCrossJoin={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.ArrayExtensions,n=e.data.DataShapeBindingDataReduction,a=e.Prototype.inheritSingle;!(function(r){function o(e,t,r,i,a){t&&1===t.length&&r.categorical&&r.categorical.dataReductionAlgorithm&&e&&s(e,r)&&(e.Primary.Groupings=[e.Secondary.Groupings[0],e.Primary.Groupings[0]],e.Secondary=void 0,e.DataReduction={Primary:n.createFrom(r.categorical.dataReductionAlgorithm),DataVolume:a||r.categorical.dataVolume||i})}function u(e){return e&&e.Groupings&&1===e.Groupings.length&&!_.isEmpty(e.Groupings[0].Projections)&&!e.Groupings[0].Subtotal&&_.isEmpty(e.Groupings[0].SuppressedProjections)}function s(e,t){return!!u(e.Primary)&&(!(!u(e.Secondary)||1!==e.Secondary.Groupings[0].Projections.length)&&(!e.DataReduction||!e.DataReduction.Primary&&!e.DataReduction.Secondary))}function c(e,r,n,a,o){if(!l(e,r,n,a,o))return e;var u={metadata:{columns:i.copy(e.metadata.columns)}};if(e.single&&(u.single=e.single),e.table&&(u.table=e.table),e.matrix){var s=p(e.matrix);if(!_.isEmpty(s.valueSources)){var c=t.DataViewMatrixUtils.containsCompositeGroup(s.columns);c||(u.categorical=f(s,u.metadata.columns))}}return u}function l(t,r,i,n,a){if(_.isEmpty(r)||!t||_.isEmpty(a))return!1;var o=_.filter(a,(function(t){return!e.DataViewMapping.getRegressionUsage(t)}));if(1!==o.length)return!1;var u=o[0].categorical;if(!u)return!1;var s=t.matrix;if(!s)return!1;if(!s.rows||!s.rows.levels||2!==s.rows.levels.length)return!1;var c=[],l=[],p=function(t,r){var a=n[t];if(a)for(var o=0,u=a.all();o<u.length;o++){var s=u[o];i[s.queryRef]===e.VisualDataRoleKind.Grouping&&r.push(s.queryRef)}};if(e.DataViewMapping.visitCategoricalCategories(u.categories,{visitRole:function(e){p(e,c)}}),e.DataViewMapping.visitGrouped(u.values,{visitRole:function(e){p(e,l)}}),e.DataViewMapping.visitCategoricalValues(u.values,{visitRole:function(e){p(e,l)}}),_.isEmpty(c)||_.isEmpty(l))return!1;for(var f=0,v=s.columns.levels;f<v.length;f++)for(var h=v[f],m=0,y=h.sources;m<y.length;m++){var d=y[m];if(!d.isMeasure)return!1}return!0}function p(e){var t=e.rows,r=t.root,i=r.children,n=[],o=t.levels[0],u=r.childIdentityFields,s={},c=[],l=t.levels[1],p=_.isEmpty(i)?void 0:i[0].childIdentityFields,f=e.valueSources.length,v=function(e){var t=s[e.key];return t};if(i)for(var h=function(e){var t=e.identity.key,r=s[t];void 0===r&&(r=c.length,s[t]=r,c.push(e))},m=0,y=i;m<y.length;m++){var d=y[m];n.push(d);for(var g=0,x=d.children;g<x.length;g++){var S=x[g];h(S)}}for(var b=new Array(c.length),w=0;w<n.length;++w)for(var d=i[w],E=0,D=d.children;E<D.length;E++){var S=D[E],C=v(S.identity);b[C]||(b[C]=new Array(n.length)),b[C][w]=S.values}var R={root:{children:_.map(n,(function(e){var t=a(e);return t.level=0,t.children=void 0,t.childIdentityFields=void 0,t})),childIdentityFields:u},levels:[o]};if(f>0){for(var T=_.map(e.columns.root.children,(function(e){var t={level:1};return e.levelSourceIndex&&(t.levelSourceIndex=e.levelSourceIndex),t})),C=0;C<R.root.children.length;++C)R.root.children[C].children=T;R.levels.push(e.columns.levels[0])}var V={root:{children:_.map(c,(function(e){var t=a(e);return t.level=0,t.children=void 0,t.childIdentityFields=void 0,t})),childIdentityFields:p},levels:[l]};if(f>0)for(var C=0;C<c.length;++C){for(var F=V.root.children[C],P={},w=0;w<n.length;++w)for(var M=b[C]&&b[C][w],A=0;A<f;++A){var N=w*f+A;P[N]=M?M[A]:0===A?{value:null}:{value:null,valueSourceIndex:A}}F.values=P}var Q={rows:V,columns:R,valueSources:e.valueSources};return Q}function f(e,t){for(var r=e.columns.root.children.length,i=e.valueSources,n=i.length,a=v(e),o=[],u=0;u<r;++u){var s=e.columns.root.children[u],c={values:[],identity:s.identity,name:null!=s.value?s.value:null};o.push(c);for(var l=0;l<n;++l){var p=i[l],f={};for(var h in p)f[h]=p[h];f.groupName=c.name,t.push(f);var m={source:f,values:[],identity:c.identity};c.values.push(m);for(var y=l+u*n,d=0,g=e.rows.root.children;d<g.length;d++){var x=g[d],S=x.values[y].value;m.values.push(S)}}}for(var b=[],w=0,E=o;w<E.length;w++)for(var c=E[w],l=0;l<n;++l)b.push(c.values[l]);b.grouped=function(){return o},b.identityFields=e.columns.root.childIdentityFields,b.source=e.columns.levels[0].sources[0];var D={categories:a,values:b
};return D}function v(e){for(var t=_.map(e.rows.root.children,(function(e){return e.identity})),r=e.rows.root.childIdentityFields,i=e.rows.levels[0].sources,n=[],a=0,o=i.length;a<o;a++){var u=_.map(e.rows.root.children,(function(e){var t=e.levelValues;if(void 0!==t)return t[a].value}));n.push({source:i[a],values:u,identity:t,identityFields:r})}return n}r.pivotBinding=o,r.unpivotResult=c})(r=t.DataViewPivotCategoricalToPrimaryGroups||(t.DataViewPivotCategoricalToPrimaryGroups={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.DataViewMapping;!(function(r){function n(r,n,a,o,u,s,c){var l=s.selects,p=s.roles&&s.roles.activeItems,f=_.isEmpty(l)?{}:t.DataViewSelectTransform.createRoleKindFromMetadata(l,r),v=t.DataViewSelectTransform.projectionsFromSelects(l,p),h=e.DataViewAnalysis.chooseDataViewMappings(v,a,f,n,s.objects),m=h.supportedMappings,y={queryDataViewMetadata:r,objectDescriptors:n,dataRoles:o,drillCapabilities:u,transforms:s,colorAllocatorFactory:c,selectTransforms:l,projectionOrdering:s.roles&&s.roles.ordering,projectionActiveItems:p,roleKindByQueryRef:f,queryProjectionsByRole:v,visualCapabilitiesRoleMappings:a,visualCapabilitiesDataViewKinds:i.targetDataViewKinds(a),applicableRoleMappings:m,applicableDataViewKinds:i.targetDataViewKinds(m)};return y}r.create=n})(r=t.DataViewTransformContext||(t.DataViewTransformContext={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.ArrayExtensions,n=e.data.DataViewMetadataColumnUtils,a=e.Prototype.inheritSingle;!(function(r){function o(t,r,i,n,o){var u,c=_.chain(r).filter((function(t){return t.categorical&&!e.DataViewMapping.getRegressionUsage(t)})).map((function(e){return e.categorical})).value();if(t.categorical&&c.length>=1){var l=t.categorical,f=s(l,c,n,o);f=p(f||l,i,n,o),f&&(u=a(t),u.categorical=f)}return u||t}function u(e,t,r){if(t){var i=_.reduce(e,(function(e,i){var n=_.filter(t[i],(function(e){return!r||r[e]}));return e.push.apply(e,n),e}),[]);return i}}function s(t,r,i,n){if(!_.isEmpty(t.categories)){var a=e.DataViewMapping.getRolesIfSameInAllCategoricalMappings(r,e.DataViewMapping.getAllRolesInCategories);if(a){var o=u(a,i,n);if(o)return c(t,o,a)}}}function c(e,r,i){var o=e.categories;if(!_.isEmpty(o)&&!l(o,r)){var u=_.map(o,(function(e){return e.source})),s=n.leftJoinMetadataColumnsAndProjectionOrder(u,r,i),c=_.chain(s).filter((function(e){return void 0!==e.projectionOrderIndex})).sortBy((function(e){return e.projectionOrderIndex})).value(),p=_.map(c,(function(e){return o[e.sourceIndex]})),f=a(e);if(_.isEmpty(p))f.categories=void 0;else{var v=t.DataViewCategoricalUtils.getCategoriesDataViewObjects(o);v&&(p=t.DataViewCategoricalUtils.setCategoriesDataViewObjects(p,v)||p),f.categories=p}return f}}function l(e,t){return e.length===t.length&&_.every(t,(function(t,r){return e[r].source.index===t}))}function p(e,r,i,n){var o=e.values;if(o){var u=x(o),s=v(u,r,i,n),c=m(o,u,s);if(c=f(c||o,n)||c){var l=!!c.source,p=c.length>0,h=a(e);return l||p?(h.values=c,t.DataViewCategoricalEvalGrouped.apply(h)):h.values=void 0,h}}}function f(e,t){if(t&&e.source){var r=!t[e.source.index];if(r){var i=a(e);return i.source=void 0,i.identityFields=void 0,i}}}function v(e,t,r,i){if(!r)return h(e,i);var n=_.reduce(t,(function(e,t,r){var i=t.name;return void 0===e[i]&&(e[i]=r),e}),{}),a=e.dynamicSeriesMeasureSources||[],o=e.staticSeriesMeasureSources||[],u=a.concat(o),s=_.chain(u).filter((function(e){return!i||!!i[e.index]})).uniq((function(e){return e.index})).map((function(e){var t=e.roles;return t?_.filter(Object.keys(t),(function(e){return t[e]})):[]})).flatten().uniq().sortBy((function(e){return n[e]})).value(),c=_.chain(s).map((function(e){return r[e]||[]})).flatten().filter((function(e){return!i||!!i[e]})).uniq().value();return c}function h(e,t){var r=e.dynamicSeriesMeasureSources||[],i=e.staticSeriesMeasureSources||[],n=r.concat(i),a=_.chain(n).filter((function(e){return!t||!!t[e.index]})).map((function(e){return e.index})).uniq().value();return a}function m(e,t,r){var i=y(e,t,r),n=d(e,t,r);if(i||n){var o=a(e);if(i)if(n)o.splice(0,o.length),o.push.apply(o,i),o.push.apply(o,n);else{var u=t.dynamicSeriesMeasureSources.length,s=u*t.dynamicSeriesGroupCount;o.splice.apply(o,[0,s].concat(i))}else if(n){var c=t.staticSeriesMeasureSources.length;o.splice.apply(o,[t.staticSeriesMeasureStartingIndex,c].concat(n))}return o}}function y(e,t,r){if(t.dynamicSeriesGroupCount&&!_.isEmpty(t.dynamicSeriesMeasureSources)){var i=g(t.dynamicSeriesMeasureSources,r);if(i){var n=i.length;if(0===n)return[];for(var a=t.dynamicSeriesMeasureSources.length,o=t.dynamicSeriesGroupCount,u=[],s=0;s<o;s++)for(var c=s*a,l=0;l<n;l++){var p=i[l].sourceIndex,f=e[c+p];u.push(f)}return u}}}function d(e,t,r){if(!_.isEmpty(t.staticSeriesMeasureSources)){var i=g(t.staticSeriesMeasureSources,r);if(i){var n=i.length;if(0===n)return[];for(var a=t.staticSeriesMeasureStartingIndex,o=[],u=0;u<n;u++){var s=i[u].sourceIndex,c=e[a+s];o.push(c)}return o}}}function g(e,t){var r=n.leftJoinMetadataColumnsAndProjectionOrder(e,t);r=_.chain(r).filter((function(e){return void 0!==e.projectionOrderIndex})).sortBy((function(e){return e.projectionOrderIndex})).value();var a=i.sequenceEqual(e,r,(function(e,t){return e.index===t.metadataColumn.index}));if(!a)return r}function x(e){var t,r,i,n,a=e.source,o=e.grouped();if(a){r=S(o),t=o.length;var u=_.size(r),s=t*u,c=e.length-s;c>0&&(i=s,n=_.chain(e).takeRight(c).map((function(e){return e.source})).value())}else i=0,n=S(o);return{secondaryAxisSource:a,dynamicSeriesGroupCount:t,dynamicSeriesMeasureSources:r,staticSeriesMeasureStartingIndex:i,staticSeriesMeasureSources:n}}function S(e){if(!_.isEmpty(e)){var t=e[0];return _.map(t.values,(function(e){return e.source}))}}r.apply=o})(r=t.DataViewCategoricalProjectionOrder||(t.DataViewCategoricalProjectionOrder={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.ArrayExtensions,n=e.Prototype;!(function(r){function a(e,r,i,a){if(!_.isEmpty(r.splits))return e;var s=e.matrix;if(!s)return e;var c=_.chain(i).map((function(e){return o(e)})).filter((function(e){return!!e})).value();if(1!==c.length)return e;var p=t.DataViewMatrixUtils.extractSelectIndices(s);if(!u(p,r,a,c[0]))return e;var f=l(s),v=n.inheritSingle(e);return v.matrix=f,v}function o(t){var r=t.matrix;if(r&&r.rows&&!r.columns&&!r.values){var n=e.DataViewMapping.getRoles(r.rows,e.DataViewMapping.visitMatrixRows);if(i.sequenceEqual(n,f,(function(e,t){return e===t}))||i.sequenceEqual(n,v,(function(e,t){return e===t}))){var a={primaryAxisRoles:n.slice(1),secondaryAxisRole:n[0]};return a}}}function u(e,t,r,i){var n=e.primaryAxis,a=e.secondaryAxis;if(!_.isEmpty(e.intersection)||1!==_.size(n)||1!==_.size(a))return!1;var o=t.selects;return!!s(n[0].selectIndices,o,r,i.primaryAxisRoles)&&!!s(a[0].selectIndices,o,r,[i.secondaryAxisRole])}function s(e,t,r,i){for(var n=0,a=e.length,o=0,u=i;o<u.length;o++){var s=u[o];if(a<=n)return!1;var l=c(e,t,s);if(0===l)return!1;if(l>=2&&!_.contains(r,s))return!1;n+=l}return!(n<a)}function c(e,r,i){for(var n=0,a=0,o=e;a<o.length;a++){var u=o[a],s=r[u]&&r[u].roles;if(t.DataViewMetadataColumnUtils.isExactMatchRole(s,i))n++;else if(n>0)break}return n}function l(e){var t=n.inheritSingle(e),r=t.rows=n.inheritSingle(e.rows),i=t.columns=n.inheritSingle(e.columns),a=i.levels=n.inheritSingle(i.levels),o=a.splice(0,1)[0],u=r.levels=n.inheritSingle(r.levels);u.splice(0,0,o);var s=e.rows.root,c=r.root=n.inheritSingle(i.root);i.root={children:[]};var l=n.overrideArray(c.children,(function(e){var t=n.inheritSingle(e);return t.childIdentityFields=s.childIdentityFields,t.children=p(s.children),t}));return l&&(c.children=l),t}function p(e){if(!e)return e;var t=n.overrideArray(e,(function(e){var t=n.inherit(e);return t.level+=1,t}));return t||n.inherit(e)}var f=["Series","Category"],v=["Series","X","Y"];r.detectAndApply=a})(r=t.DataViewUpgradeFromCY16SU09Map||(t.DataViewUpgradeFromCY16SU09Map={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.Prototype.inherit,n=e.Prototype.inheritSingle,a=jsCommon.ArrayExtensions,o=jsCommon.EnumExtensions;!(function(r){function u(e){be=e}function s(e){var r=e.prototype,i=e.objectDescriptors,n=e.transforms,a=e.colorAllocatorFactory;if(!r)return p(i,n,a);if(!n)return[r];var o=t.DataViewTransformContext.create(r.metadata,i,e.dataViewMappings,e.dataRoles,e.drillCapabilities,n,a),u=c(r,o),s=l(u,o,e.bypassConcatenation);return s=t.DataViewRegression.run({visualDataViews:s,dataRoles:o.dataRoles,objectDescriptors:i,objectDefinitions:n.objects,colorAllocatorFactory:a,transformSelects:n.selects,applicableDataViewMappings:o.applicableRoleMappings,roleKindByQueryRef:o.roleKindByQueryRef,queryProjectionsByRole:o.queryProjectionsByRole})}function c(e,r){var i=r.transforms,n=r.applicableRoleMappings,a=t.DataViewPivotCategoricalToPrimaryGroups.unpivotResult(e,r.selectTransforms,r.roleKindByQueryRef,r.queryProjectionsByRole,n);return a=t.DataViewUpgradeFromCY16SU09Map.detectAndApply(a,i,n,r.drillCapabilities&&r.drillCapabilities.roles)}function l(e,t,r){var i=[],n=t.transforms.splits;if(_.isEmpty(n))i.push(f(e,t,null,r));else for(var a=0,o=n;a<o.length;a++){var u=o[a],s=f(e,t,u.selects);i.push(s)}return i}function p(e,t,r){if(t&&t.objects){var i={metadata:{columns:[]}};return F(i,0,e,t.objects,t.selects,r),[i]}return[]}function f(e,r,n,a){var o=i(e);o.metadata=i(e.metadata),o=h(o,r);var u=r.visualCapabilitiesDataViewKinds,s=r.visualCapabilitiesRoleMappings,c=r.selectTransforms,l=r.objectDescriptors,p=r.projectionOrdering,f={rowHierarchyRewritten:!1,columnHierarchyRewritten:!1,hierarchyTreesRewritten:!1};return o=m(o,u,s,c,p,f),F(o,r.visualCapabilitiesDataViewKinds,l,r.transforms.objects,c,r.colorAllocatorFactory),o=v(o,r,f,n),o=t.DataViewHierarchyLevelBackfill.apply(o,be.quarterPrefix),a||(o=t.DataViewConcatenateCategoricalColumns.detectAndApply(o,l,r.applicableRoleMappings,p,r.projectionActiveItems)),t.DataViewNormalizeValues.apply({dataview:o,dataViewMappings:s,dataRoles:r.dataRoles}),o}function v(e,r,i,a){var u=r.projectionOrdering,s=r.applicableRoleMappings,c=n(e);if(c.matrix&&o.hasFlag(r.applicableDataViewKinds,2)){var l=_.filter(s,(function(e){return!!e.matrix}));c.matrix=t.DataViewMatrixProjectionOrder.apply(c.matrix,l[0].matrix,u,i),ye(c.matrix,s)&&t.DataViewPivotMatrix.apply(c.matrix,i)}return c=t.DataViewCategoricalProjectionOrder.apply(c,s,r.dataRoles,u,a)}function h(e,t){var r=o.getBitCount(t.visualCapabilitiesDataViewKinds);if(r<=1)return e;var i=t.applicableDataViewKinds,a=o.getBitCount(i);if(0===a)return e;var u=n(e);return u.categorical&&!o.hasFlag(i,1)&&(u.categorical=void 0),u.matrix&&!o.hasFlag(i,2)&&(u.matrix=void 0),u.table&&!o.hasFlag(i,8)&&(u.table=void 0),u.tree&&!o.hasFlag(i,16)&&(u.tree=void 0),u.single&&!o.hasFlag(i,4)&&(u.single=void 0),u}function m(e,t,r,i,n,a){var u=[];return i&&(e.metadata.columns=y(e.metadata.columns,i,u),g(e,i)),e.categorical&&o.hasFlag(t,1)&&(e.categorical=w(e.categorical,u),e=he(e,r)),e.matrix&&o.hasFlag(t,2)&&(e.matrix=C(e.matrix,u,n,a)),e.table&&o.hasFlag(t,8)&&(e.table=E(e.table,u,n)),e}function y(e,t,r){if(!t)return e;for(var n=i(e),a=0,o=e.length;a<o;a++){var u=e[a],s=t[u.index];if(s){var c=n[a]=d(u,s);r.push({from:u,to:c})}}return n}function d(e,t){var r=i(e);return t.roles&&(r.roles=t.roles),t.type&&(r.type=t.type),r.format=b(t,r),t.displayName&&(r.displayName=t.displayName),t.queryName&&(r.queryName=t.queryName),t.expr&&(r.expr=t.expr),t.kpi&&t.kpi.graphic&&(r.kpi=t.kpi),t.sort&&(r.sort=t.sort),null!=t.sortOrder&&(r.sortOrder=t.sortOrder),t.discourageAggregationAcrossGroups&&(r.discourageAggregationAcrossGroups=t.discourageAggregationAcrossGroups),r}function g(r,i){if(i)for(var n,a=r.metadata.columns,o=0,u=i.length;o<u;o++){var s=i[o],c=s&&s.aggregateSources;if(c){n||(n=t.createStaticEvalContext(t.createColorAllocatorCache(),r,i));var l=x(a,o,s),p=l.aggregates={},f=e.ValueType.fromDescriptor(l.type),v=S(n,i,f,c.min);void 0!==v&&(p.min=v),v=S(n,i,f,c.max),void 0!==v&&(p.max=v)}}}function x(e,t,r){for(var i=0,n=e;i<n.length;i++){var a=n[i];if(a.index===t&&void 0===a.groupName)return a}var o=d({displayName:r.displayName},r);return e.push(o),o}function S(e,r,i,n){var a=r[n.index];if(a)return t.DataViewObjectEvaluator.evaluateValue(e,a.expr,i)}function b(e,t){return e.format||t.format}function w(r,a){function o(e){var t=T(e.source,a);if(t){var r=i(e);return r.source=t,r}}var u=i(r),s=e.Prototype.overrideArray(r.categories,o);if(s&&(u.categories=s),r.values){var c=e.Prototype.overrideArray(r.values,o)||n(r.values);if(u.values=c,c.source){var l=T(c.source,a);l&&(c.source=l)}}return t.DataViewCategoricalEvalGrouped.apply(u),u}function E(t,r,n){var a=i(t),o=function(e){return T(e,r)},u=e.Prototype.overrideArray(t.columns,o);if(u&&(a.columns=u),!n)return a;var s=D(n,r);if(!s)return a;for(var c=u.slice(0),l=Object.keys(s),p=0,f=l.length;p<f;p++){var v=c[s[l[p]]];p===u.length?u.push(v):u[p]=v}var h=e.Prototype.overrideArray(a.rows,(function(e){for(var t=[],r=0,i=l.length;r<i;++r)t[r]=e[s[l[r]]];return t}));return h&&(a.rows=h),a}function D(e,t){var r=Object.keys(e);if(1===r.length){var i=r[0],n=_.map(t,(function(e){return e.from.index})),a=e[i];return R(n,a)}}function C(t,r,n,a){function o(e){return T(e,r)}function u(t){var r=null,i=e.Prototype.overrideArray(t.levels,(function(t){var r=null,i=e.Prototype.overrideArray(t.sources,o);return i&&(r=V(r,t,(function(e){return e.sources=i}))),r}));return i&&(r=V(r,t,(function(e){return e.levels=i}))),r}var s=i(t),c=u(s.rows);c&&(s.rows=c,a.rowHierarchyRewritten=!0);var l=u(s.columns);l&&(s.columns=l,a.columnHierarchyRewritten=!0);var p=e.Prototype.overrideArray(s.valueSources,o);return p&&(s.valueSources=p),s}function R(e,t){if(!a.sequenceEqual(e,t,(function(e,t){return e===t}))){for(var r={},i=0,n=t.length;i<n;++i){var o=t[i];r[i]=e.indexOf(o)}return r}}function T(e,t){for(var r=0,i=t.length;r<i;r++){var n=t[r];if(n.from===e)return n.to}}function V(e,t,r){return e||(e=i(t)),r&&r(e),e}function F(e,r,i,n,a,o){if(i){var u=t.DataViewObjectEvaluationUtils.groupObjectsBySelector(n);t.DataViewObjectEvaluationUtils.addImplicitObjects(u,i,e.metadata.columns,a);var s=u.metadataOnce,c=u.data;if(s)for(var l=0,p=s.length;l<p;l++){var f=s[l],v=f.objects;M(e,a,i,f.selector,v,c,o)}var h=u.metadata;if(h)for(var l=0,p=h.length;l<p;l++){var m=h[l],v=m.objects,y=I(e,a,v,o);oe(e,a,i,m.selector,v,y)}for(var l=0,p=c.length;l<p;l++){var d=c[l],v=d.objects,y=I(e,a,v,o);U(e,r,a,i,d.selector,d.rules,v,y)}}}function P(e,t,r){if(!_.isEmpty(t))for(var i in t){var n=t[i];if(r&&void 0!==r.id){var a=e[i];a||(a=e[i]={});var o=a.$instances;o||(o=a.$instances={}),o[r.id]=n}else e[i]=n}}function M(e,r,i,n,a,o,u){var s=I(e,r,a,u),c=t.createStaticEvalContext(s,e,r),l=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(c,i,a);if(l){var p=e.metadata.objects;p||(p=e.metadata.objects={}),P(p,l,n);for(var f in l){var v=l[f],h=i[f];for(var m in v){var y=h.properties[m],d=y.rule;if(d){var g=A(e,u,d,f,v[m],y.type);_.isEmpty(g)||o.push.apply(o,g)}}}}}function A(e,t,r,i,n,a){var o=r.output;if(o){var u=se(e,o.selector);if(!_.isEmpty(u))return a.fillRule?N(e,t,r,u,i,n):void 0}}function N(e,r,i,n,a,o){var u=Q(e,r,i.inputRole,1,o);if(u){var s=new t.ColorRuleEvaluation(i.inputRole,u),c={};c[i.output.property]={solid:{color:s}};for(var l=[],p=0,f=n.length;p<f;p++)l.push({selector:n[p],rules:[s],objects:[{name:a,properties:c}]});return l}}function Q(e,t,r,i,n){return n.linearGradient2?O(e,t,r,i,n,n.linearGradient2):n.linearGradient3?q(e,t,r,i,n,n.linearGradient3):void 0}function O(e,t,r,i,n,a){if(a=n.linearGradient2,void 0===a.min.value||void 0===a.max.value){var o=le(e,r,i);if(!o)return;void 0===a.min.value&&(a.min.value=o.min),void 0===a.max.value&&(a.max.value=o.max)}if(void 0!==a.min.value&&void 0!==a.max.value)return t.linearGradient2(n.linearGradient2)}function q(e,t,r,i,n,a){var o;if(a=n.linearGradient3,void 0===a.min.value||void 0===a.max.value){var u=le(e,r,i);if(!u)return;o=void 0===a.min.value&&void 0===a.max.value&&void 0!==a.mid.value,void 0===a.min.value&&(a.min.value=u.min),void 0===a.max.value&&(a.max.value=u.max)}if(void 0!==a.min.value&&void 0!==a.max.value)return void 0===a.mid.value&&(a.mid.value=(a.max.value+a.min.value)/2),t.linearGradient3(n.linearGradient3,o)}function I(e,r,i,n){for(var a=t.createColorAllocatorCache(),o=t.createStaticEvalContext(),u=0,s=i.length;u<s;u++){var c=i[u].properties;for(var l in c){var p=c[l];if(p&&p.solid&&p.solid.color&&24===p.solid.color.kind){var f=p.solid.color,v=ce(r,f.input);if(!v)continue;var h=t.DataViewObjectEvaluator.evaluateProperty(o,Se,f.rule),m=Q(e,n,v,0,h);m&&a.register(f,m)}}}return a}function U(e,r,i,n,a,u,s,c){var l=t.Selector.containsWildcard(a),p=e.categorical;if(p&&o.hasFlag(r,1)){var f=k(p,a);Y(p,i,n,f,u,l,s,c),J(p,i,n,f,u,l,s,c)}var v=e.matrix;if(v&&o.hasFlag(r,2)){var f=B(v,a),h=Z(v,n,f,l,s,c);h&&(e.matrix=h)}var m=e.table;if(m&&o.hasFlag(r,8)){var f=j(m,a),y=ne(m,i,n,f,l,s,c);y&&(e.table=y)}}function j(e,r){return t.Selector.hasRoleWildcard(r)&&(r=L(r,(function(t){return H(t,e)}))),r}function B(e,r){return t.Selector.hasRoleWildcard(r)&&(r=L(r,(function(t){return G(t,e)}))),r}function k(e,r){return t.Selector.hasRoleWildcard(r)&&(r=L(r,(function(t){return z(t,e)}))),r}function L(e,r){for(var i={data:[],id:e.id,metadata:e.metadata},n=0,a=e.data;n<a.length;n++){var o=a[n];if(t.Selector.isRoleWildcard(o)){var u=r(o.roles);if(!_.isEmpty(u)){i.data.push(t.DataViewScopeWildcard.fromExprs(u));continue}}}return i}function H(e,t){var r=K(t.columns,e),i=t.identityFields;if(r&&i)return i}function G(e,t){if(t){var r=[];return r.push.apply(r,W(e,t.rows)),r.push.apply(r,W(e,t.columns)),r}}function W(e,t){var r=[];if(!e||!t)return r;for(var i=0,n=t.levels;i<n.length;i++)for(var a=n[i],o=0,u=a.sources;o<u.length;o++){var s=u[o];s.identityExprs&&K([s],e)&&r.push.apply(r,s.identityExprs)}return r}function z(e,t){if(t.categories)for(var r=0,i=t.categories;r<i.length;r++){var n=i[r];if(n.source&&K([n.source],e))return n.identityFields}}function K(e,t){for(var r=0,i=e;r<i.length;r++){var n=i[r],a=n.roles;if(!a||!_.any(t,(function(e){return a[e]})))return!1}return!0}function Y(e,r,i,n,a,o,u,s){if(e.categories&&0!==e.categories.length){var c=ue(e,n);if(c){var l,p=c.identities,f=t.createCategoricalEvalContext(s,e,r);if(p){for(var v=0,h=p.length;v<h;v++){var m=p[v];if(o||t.Selector.matchesData(n,[m])){f.setCurrentRowIndex(v);var y=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(f,i,u);if(y)for(var d=0,g=c.columns;d<g.length;d++){var x=g[d],S=x.objects;S||(S=x.objects=[],x.objects.length=h),S[v]||(S[v]={}),P(S[v],y,n)}if(!o)return!0;l=!0}}return l}}}}function J(r,i,n,a,o,u,s,c){var l=r.values;if(l&&l.identityFields&&t.Selector.matchesKeys(a,[l.identityFields])){var p=l.grouped();if(p){for(var f,v=t.createCategoricalEvalContext(c,r,i),h=0,m=p.length;h<m;h++){var y=p[h],d=a.metadata,g=y.values;if(u||t.Selector.matchesData(a,[y.identity])){var x=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(v,n,s);if(x)if(d)for(var S=0,b=g.length;S<b;S++){var w=g[S],E=w.source;if(E.queryName===d){var D=e.Prototype.inherit(E),C=D.objects;C||(C=D.objects={}),P(C,x,a),w.source=D,f=!0;break}}else{var _=y.objects;_||(_=y.objects={}),P(_,x,a),fe(l,p),f=!0}if(!u)return!0}}return f}}}function Z(e,r,i,a,o,u){var s,c,l=t.createMatrixEvalContext(u,e);c=X(l,e.columns,r,i,a,o);var p=[];p.push.apply(p,$(e.rows)),p.push.apply(p,$(e.columns));var f=t.Selector.matchesKeys(i,[p]),v=e.valueSources;if(f&&i.metadata&&e.columns&&e.columns.root&&!_.isEmpty(v)&&_.any(v,(function(e){return e.queryName===i.metadata}))){var h=t.DataViewMatrixUtils.getLeafNodes(e.columns.root);s=X(l,e.rows,r,i,a,o,h,v)}else s=X(l,e.rows,r,i,a,o);if(s||c){var m=n(e);return s&&(m.rows=s),c&&(m.columns=c),m}}function $(e){var t=[];if(!e)return t;for(var r=0,i=e.levels;r<i.length;r++)for(var n=i[r],a=0,o=n.sources;a<o.length;a++){var u=o[a];u.identityExprs&&t.push.apply(t,u.identityExprs)}return t}function X(e,t,r,i,a,o,u,s){if(t){var c=t.root;if(c){var l=ee(e,[c],r,i,a,o,u,s);if(l){var p=n(t);return p.root=l,p}}}}function ee(e,r,i,n,a,o,u,s){var c,l=_.last(r);return t.DataViewMatrixUtils.isLeafNode(l)?l.isSubtotal||_.isEmpty(l.values)||_.isEmpty(u)||_.isEmpty(s)||(c=re(e,l,i,n,a,o,u,s)):c=te(e,r,i,n,a,o,u,s),c}function te(e,r,i,a,o,u,s,c){var l,p=e.getDataView();r[0]===p.rows.root?l=p.rows:r[0]===p.columns.root&&(l=p.columns);var f,v,h=_.last(r),m=h.children,y=!1,d=h.childIdentityFields,g=[],x=m[0].level,S=p.valueSources.length>1&&l===p.columns&&x===l.levels.length-1;if(!_.isEmpty(l.levels)){var b=l.levels[x].sources;if(S){g=_.map(p.valueSources,(function(e){return e.queryName}));var w=_.compact(_.map(r,(function(e){return e.identity}))),E=void 0;h.isSubtotal&&r.length>1&&(E=r[r.length-2].childIdentityFields),y=null!=a.metadata&&_.any(g,(function(e){return e===a.metadata}))&&t.Selector.matchesData(a,w,E)}else 1!==b.length||_.isEmpty(d)||(g=[b[0].queryName],y=null==a.metadata&&t.Selector.matchesKeys(a,_.map(r,(function(e){return e.childIdentityFields}))))}for(var D=0,C=m.length;D<C;D++){for(var R=m[D],T=r.concat(R),V=[],F=0,P=T;F<P.length;F++){var M=P[F];M.identity&&V.push(M.identity)}var A=void 0;_.isEmpty(g)||(A=g[R.levelSourceIndex||0]);var N=void 0;R.isSubtotal&&(S?r.length>1&&(N=r[r.length-2].childIdentityFields):N=d),l===p.rows?e.setCurrentContext(null,R,null):l===p.columns&&e.setCurrentContext(null,null,R);var Q=!1;if(y&&(null==a.metadata||a.metadata===A)&&t.Selector.matchesData(a,V,N)){Q=!0;var O=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(e,i,u);O&&(v=n(R),v.objects=O)}if(Q||(v=ee(e,T,i,a,o,u,s,c)),v&&(f||(f=ie(h)),f.children[D]=v,!o))break}return f}function re(e,r,i,a,o,u,s,c){var l,p=r.values;for(var f in p){var v=p[f],h=s[f];if(!h.isSubtotal&&v&&c[v.valueSourceIndex||0].queryName===a.metadata){var m=void 0;e.setCurrentContext(v,r,h);var y=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(e,i,u);y&&(m=n(v),m.objects=y,l||(l=n(r)),l.values[f]=m)}}return l}function ie(e){if(Object.getPrototypeOf(e)!==Object.prototype)return e;var t=n(e);return t.children=i(e.children),t}function ne(e,r,i,a,o,u,s){var c=t.createTableEvalContext(s,e,r),l=ae(c,e.columns,e.rows,e.identity,e.identityFields,i,a,o,u);if(l){var p=n(e);return p.rows=l,p}}function ae(e,r,i,a,o,u,s,c,l){if(!_.isEmpty(a)&&!_.isEmpty(o)&&s.metadata&&t.Selector.matchesKeys(s,[o])){var p=_.findIndex(r,(function(e){return e.queryName===s.metadata}));if(!(p<0)){for(var f,v=r.length,h=0,m=a.length;h<m;h++){var y=a[h];if(c||t.Selector.matchesData(s,[y])){e.setCurrentRowIndex(h);var d=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(e,u,l);if(d){f||(f=n(i));var g=f[h]=n(f[h]),x=g.objects;x||(g.objects=x=new Array(v)),x[p]=d}if(!c)break}}return f}}}function oe(e,r,i,n,a,o){for(var u=e.metadata.columns,s=n.metadata,c=t.createStaticEvalContext(o,e,r),l=0,p=u.length;l<p;l++){var f=u[l];if(f.queryName===s){var v=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(c,i,a),h=f.objects;h||(h=f.objects={}),P(h,v,n)}}}function ue(e,r){for(var i=e.categories[0].identity,n=[],a=0,o=e.categories;a<o.length;a++){var u=o[a];if(!u.identityFields)return;if(!t.Selector.matchesKeys(r,[u.identityFields]))return;n.push(u)}var s=r.metadata;if(s){var c=e.values;if(c)for(var l=0,p=c.length;l<p;l++){var f=c[l];if(f.source.queryName===s){n=[f];break}}}return{columns:n,identities:i}}function se(e,r){var i=e.categorical;if(i){var n=i.categories;if(n){for(var a,o=[],u=0,s=n.length;u<s;u++){var c=n[u],l=c.identityFields;if(a=c.source.roles,a&&l){var p=_.any(r,(function(e){return a[e]}));p&&o.push({data:[t.DataViewScopeWildcard.fromExprs(l)]})}}return o}}}function ce(e,r){if(t.SQExpr.isSelectRef(r))return r.expressionName;if(e)for(var i=0,n=e.length;i<n;i++){var a=e[i],o=a.expr;if(o&&t.SQExpr.equals(r,a.expr))return a.queryName}}function le(e,t,r){for(var i=e.metadata.columns,n=0,a=i.length;n<a;n++){var o=i[n];if(1===r){var u=o.roles;if(!u||!u[t])continue}else if(o.queryName!==t||void 0!==o.groupName)continue;var s=o.aggregates;if(s){var c=s.min,l=s.max;return{min:c,max:l}}}}function pe(e,t,r){void 0===e&&(e=[]);var i=e;return fe(i),t&&(i.identityFields=t),r&&(i.source=r),i}function fe(e,t){e.grouped=t?function(){return t}:function(){return ve(e)}}function ve(e){for(var t,r=[],i=0,n=e.length;i<n;i++){var a=e[i];if(!t||t.identity!==a.identity){if(t={values:[]},a.identity){t.identity=a.identity;var o=a.source;void 0!==o.groupName?t.name=o.groupName:o.displayName&&(t.name=o.displayName)}r.push(t)}t.values.push(a)}return r}function he(e,r){var i,n=me(e.categorical,r);if(n)switch(n.type){case 1:i=t.DataViewPivotCategorical.apply(e);break;case 2:i=t.DataViewSelfCrossJoin.apply(e,n.selfCrossJoinCategory)}return i||e}function me(e,t){if(e&&!_.isEmpty(t)){var r=e.categories;if(!_.isEmpty(r)){var i=e.values;if(!_.isEmpty(i)&&!i.grouped().some((function(e){return!!e.identity})))for(var n=function(e,i){var n=t[e].categorical;if(!n)return"continue";for(var a=0,o=r;a<o.length;a++){var u=o[a],s=u.source.roles;if(xe(s,n.values)){var c=n.categories,l=de(s,c)||ge(s,c);if(l)return{value:{type:2,selfCrossJoinCategory:u}};if(1===r.length)return{value:{type:1}}}}},a=0,o=t.length;a<o;a++){var u=n(a,o);if("object"==typeof u)return u.value}}}}function ye(e,t){if(e&&!_.isEmpty(t)){var r=e.rows.levels;if(!(r.length<1)){var i=e.rows.root.children;if(i&&0!==i.length)for(var n=r[0].sources[0].roles,a=0,o=t.length;a<o;a++){var u=t[a].matrix;if(u&&!ge(n,u.rows)&&ge(n,u.columns))return!0}}}}function de(e,t){if(e&&t&&t.bind)return e[t.bind.to]}function ge(e,t){if(e&&t&&t.for)return e[t.for.in]}function xe(e,t){if(e&&t&&t.group)return e[t.group.by]}var Se={type:{fillRule:{}}},be={quarterPrefix:"Qtr {0}"};r.setLocalizationOptions=u,r.apply=s,r.transformObjects=F,r.mergeObjects=P,r.createValueColumns=pe,r.setGrouped=fe})(r=t.DataViewTransform||(t.DataViewTransform={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e){return function(t){return t.get(e)}}function r(e,t){return"function"==typeof e?e(t):"string"==typeof e?e:void 0}e.createDisplayNameGetter=t,e.getDisplayName=r})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){var t=o.visit(e,v.instance);return t}function r(t){return e.aggregate(i(t),t.aggregate)}function i(t){return e.columnRef(u(t),t.name)}function n(t){return e.aggregate(e.groupRef(t.name,u(t),f(t.groupedColumns)),t.aggregate)}function a(t){return e.groupRef(t.name,u(t),f(t.groupedColumns))}function u(t){return e.entity(t.schema,t.entity,t.entityVar)}function s(t){return e.aggregate(u(t),t.aggregate)}function c(t){return e.aggregate(l(t),t.aggregate)}function l(t){return e.hierarchyLevel(p(t),t.level)}function p(t){return e.hierarchy(u(t),t.name)}function f(t){return _.map(t,(function(t){return e.fieldExpr(t)}))}e.fieldExpr=t,e.fromColumnAggr=r,e.fromColumn=i,e.fromGroupingColumnAggr=n,e.fromGroupingColumn=a,e.fromEntity=u,e.fromEntityAggr=s,e.fromHierarchyLevelAggr=c,e.fromHierarchyLevel=l,e.fromHierarchy=p;var v=(function(){function t(){}return t.prototype.visitColumn=function(e){return i(e)},t.prototype.visitColumnAggr=function(e){return r(e)},t.prototype.visitGroupingColumn=function(e){return a(e)},t.prototype.visitGroupingColumnAggr=function(e){return n(e)},t.prototype.visitColumnHierarchyLevelVariation=function(t){return e.propertyVariationSource(this.visitEntity(t.source),t.source.name,t.level.name)},t.prototype.visitEntity=function(e){return u(e)},t.prototype.visitEntityAggr=function(e){return s(e)},t.prototype.visitHierarchy=function(e){return p(e)},t.prototype.visitHierarchyLevel=function(e){return l(e)},t.prototype.visitHierarchyLevelAggr=function(e){return c(e)},t.prototype.visitMeasure=function(t){return e.measureRef(this.visitEntity(t),t.name)},t.prototype.visitPercentile=function(t){var r=e.fieldExpr(t.arg);return e.percentile(r,t.k,t.exclusive)},t.prototype.visitPercentOfGrandTotal=function(t){var r=e.fieldExpr(t.baseExpr);return e.arithmetic(r,e.scopedEval(r,[]),3)},t.prototype.visitPercentOfRoleTotal=function(t){var r=e.fieldExpr(t.baseExpr);return e.arithmetic(r,e.scopedEval(r,_.map(t.roles,(function(t){return e.roleRef(t)}))),3)},t.prototype.visitSelectRef=function(t){return e.selectRef(t.expressionName)},t.prototype.visitTransformOutputRoleRef=function(t){return e.transformOutputRoleRef(t.expressionName)},t})();v.instance=new v})(t=e.SQExprBuilder||(e.SQExprBuilder={}));var r;!(function(e){function t(e,t){return e.accept(new i(t))}e.asFieldPattern=t})(r=e.SQExprConverter||(e.SQExprConverter={}));var i=(function(r){function i(e){var t=r.call(this)||this;return t.schema=e,t}return __extends(i,r),i.prototype.visitColumnRef=function(e){var t=e.source.accept(n.instance);if(t&&t.entity){var r=t.entity;return r.name=e.ref,{column:r}}},i.prototype.visitMeasureRef=function(e){var t=e.source.accept(n.instance);if(t&&t.entity){var r=t.entity;return r.name=e.ref,{measure:r}}},i.prototype.visitEntity=function(e){var t={schema:e.schema,entity:e.entity};return e.variable&&(t.entityVar=e.variable),{entity:t}},i.prototype.visitAggr=function(e){var t=e.arg.accept(this);if(t){if(t.column){var r=t.column;return r.aggregate=e.func,{columnAggr:r}}if(t.columnAggr){var r=t.columnAggr;return r.aggregate=e.func,{columnAggr:r}}if(t.groupingColumn){var r=t.groupingColumn;return r.aggregate=e.func,{groupingColumnAggr:r}}if(t.groupingColumnAggr){var r=t.groupingColumnAggr;return r.aggregate=e.func,{groupingColumnAggr:r}}if(t.hierarchyLevel){var r=t.hierarchyLevel;return r.aggregate=e.func,{hierarchyLevelAggr:r}}}var i=e.arg.accept(n.instance);if(i&&i.entity){var r=i.entity;return r.aggregate=e.func,{entityAggr:r}}},i.prototype.visitPercentile=function(e){return{percentile:{arg:e.arg.accept(this),k:e.k,exclusive:e.exclusive}}},i.prototype.visitGroupRef=function(e){var t=e.source.accept(n.instance);if(t&&t.entity){var r=t.entity;r.name=e.ref,r.groupedColumns=[];for(var i=0,a=e.groupedExprs;i<a.length;i++){var o=a[i],u=o.accept(this);(u.column||u.groupingColumn||u.hierarchyLevel)&&r.groupedColumns.push(u)}return{groupingColumn:r}}},i.prototype.visitHierarchy=function(e){var t=e.arg.accept(n.instance);if(t&&t.entity){var r=t.entity;return r.name=e.hierarchy,{hierarchy:r}}},i.prototype.visitHierarchyLevel=function(e){var t=e.arg.accept(a.instance);if(t){var r;if(t.hierarchy&&(r={entity:t.hierarchy.entity,schema:t.hierarchy.schema,name:t.hierarchy.name,level:e.level}),t.variation){if(this.schema){var i=t.variation,n=this.schema.schema(t.variation.column.schema).findTargetEntityOfVariation(r.entity,i.column.name,i.variationName);n&&(r.entity=n.name)}return{columnHierarchyLevelVariation:{source:{entity:t.variation.column.entity,schema:t.variation.column.schema,name:t.variation.column.name},level:r,variationName:t.variation.variationName}}}return{hierarchyLevel:r}}},i.prototype.visitArithmetic=function(r){var i={percentOfGrandTotal:{baseExpr:r.left.accept(this)}};if(e.SQExpr.equals(r,t.fieldExpr(i)))return i;var n=e.SQExpr.isScopedEval(r.right)&&r.right.scope;return!_.isEmpty(n)&&_.all(n,(function(t){return e.SQExpr.isRoleRef(t)}))?{percentOfRoleTotal:{baseExpr:r.left.accept(this),roles:_.map(n,(function(e){return e.role}))}}:void 0},i.prototype.visitSelectRef=function(e){return{selectRef:{expressionName:e.expressionName}}},i.prototype.visitTransformOutputRoleRef=function(e){return{transformOutputRoleRef:{expressionName:e.role}}},i})(e.DefaultSQExprVisitor),n=(function(t){function r(){return t.apply(this,arguments)||this}return __extends(r,t),r.prototype.visitEntity=function(e){var t={schema:e.schema,entity:e.entity};return e.variable&&(t.entityVar=e.variable),{entity:t}},r.prototype.visitPropertyVariationSource=function(t){var r=t.arg;if(r instanceof e.SQEntityExpr){var i={schema:r.schema,entity:r.entity,name:t.property};return r.variable&&(i.entityVar=r.variable),{variation:{column:i,variationName:t.name}}}},r})(e.DefaultSQExprVisitor);n.instance=new n;
var a=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitHierarchy=function(e){var t,r,i=e.arg.accept(n.instance);return i.variation?(t={name:e.hierarchy,schema:i.variation.column.schema,entity:i.variation.column.entity},r=i.variation):t={name:e.hierarchy,schema:i.entity.schema,entity:i.entity.entity},{hierarchy:t,variation:r}},t})(e.DefaultSQExprVisitor);a.instance=new a;var o;!(function(i){function n(t,i){var n=t instanceof e.SQExpr?r.asFieldPattern(t):t;return n.column?a(n.column,i):n.columnAggr?o(n.columnAggr,i):n.groupingColumn?u(n.groupingColumn,i):n.groupingColumnAggr?s(n.groupingColumnAggr,i):n.columnHierarchyLevelVariation?c(n.columnHierarchyLevelVariation,i):n.entity?l(n.entity,i):n.entityAggr?p(n.entityAggr,i):n.hierarchy?f(n.hierarchy,i):n.hierarchyLevel?v(n.hierarchyLevel,i):n.hierarchyLevelAggr?h(n.hierarchyLevelAggr,i):n.measure?m(n.measure,i):n.percentile?d(n.percentile,i):n.percentOfGrandTotal?g(n.percentOfGrandTotal,i):n.percentOfRoleTotal?x(n.percentOfRoleTotal,i):n.selectRef?y(n.selectRef,i):n.transformOutputRoleRef?S(n.transformOutputRoleRef,i):void 0}function a(e,t){return t.visitColumn(e)}function o(e,t){return t.visitColumnAggr(e)}function u(e,t){return t.visitGroupingColumn(e)}function s(e,t){return t.visitGroupingColumnAggr(e)}function c(e,t){return t.visitColumnHierarchyLevelVariation(e)}function l(e,t){return t.visitEntity(e)}function p(e,t){return t.visitEntityAggr(e)}function f(e,t){return t.visitHierarchy(e)}function v(e,t){return t.visitHierarchyLevel(e)}function h(e,t){return t.visitHierarchyLevelAggr(e)}function m(e,t){return t.visitMeasure(e)}function y(e,t){return t.visitSelectRef(e)}function d(e,t){return t.visitPercentile(e)}function g(e,t){return t.visitPercentOfGrandTotal(e)}function x(e,t){return t.visitPercentOfRoleTotal(e)}function S(e,t){return t.visitTransformOutputRoleRef(e)}function b(e){return t.columnRef(t.entity(e.schema,e.entity,e.entityVar),e.name)}function w(e){return n(e,A.instance)}function E(e){return void 0!==(e.column||e.columnAggr||e.groupingColumn||e.groupingColumnAggr||e.measure)}function D(e){return i.visit(e,Q.instance)}function C(e){var t=e.hierarchy;if(t)return t.name}function R(e){return e.columnHierarchyLevelVariation?e.columnHierarchyLevelVariation.source:e.column||e.groupingColumn||e.groupingColumnAggr||e.measure||e.columnAggr}function T(e){var t=D(e);return t?t:F(e).entity}function V(e){var t=i.toFieldExprEntityItemPattern(e);return t.schema}function F(e){return i.visit(e,N.instance)}function P(e){return i.visit(e,N.instance)}function M(t){return e.SQExpr.isArithmetic(t)&&e.SQExpr.isScopedEval(t.right)&&!_.isEmpty(t.right.scope)&&_.all(t.right.scope,(function(t){return e.SQExpr.isRoleRef(t)}))}i.visit=n,i.toColumnRefSQExpr=b,i.getAggregate=w,i.hasFieldExprName=E,i.getPropertyName=D,i.getHierarchyName=C,i.getProperty=R,i.getFieldExprName=T,i.getSchema=V,i.toFieldExprEntityPattern=F,i.toFieldExprEntityItemPattern=P,i.isPercentRoleTotalExpr=M;var A=(function(){function r(){}return r.prototype.visitColumn=function(e){},r.prototype.visitColumnAggr=function(e){return e.aggregate},r.prototype.visitGroupingColumn=function(e){},r.prototype.visitGroupingColumnAggr=function(e){return e.aggregate},r.prototype.visitColumnHierarchyLevelVariation=function(e){},r.prototype.visitEntity=function(e){},r.prototype.visitEntityAggr=function(e){return e.aggregate},r.prototype.visitHierarchy=function(e){},r.prototype.visitHierarchyLevel=function(e){},r.prototype.visitHierarchyLevelAggr=function(e){return e.aggregate},r.prototype.visitMeasure=function(e){},r.prototype.visitSelectRef=function(e){},r.prototype.visitPercentile=function(e){},r.prototype.visitPercentOfGrandTotal=function(r){return e.SQExprInfo.getAggregate(t.fieldExpr(r.baseExpr))},r.prototype.visitPercentOfRoleTotal=function(r){return e.SQExprInfo.getAggregate(t.fieldExpr(r.baseExpr))},r.prototype.visitTransformOutputRoleRef=function(e){},r})();A.instance=new A;var N=(function(){function e(){}return e.prototype.visitColumn=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitColumnAggr=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitGroupingColumn=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitGroupingColumnAggr=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitColumnHierarchyLevelVariation=function(t){return e.toEntityItemExprPattern(t.source)},e.prototype.visitEntity=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitEntityAggr=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitHierarchy=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitHierarchyLevel=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitHierarchyLevelAggr=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitMeasure=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitSelectRef=function(e){},e.prototype.visitPercentile=function(e){return i.visit(e.arg,this)},e.prototype.visitPercentOfGrandTotal=function(e){return i.visit(e.baseExpr,this)},e.prototype.visitPercentOfRoleTotal=function(e){return i.visit(e.baseExpr,this)},e.prototype.visitTransformOutputRoleRef=function(e){},e.toEntityItemExprPattern=function(e){var t={schema:e.schema,entity:e.entity};return e.entityVar&&(t.entityVar=e.entityVar),t},e})();N.instance=new N;var Q=(function(){function e(){}return e.prototype.visitColumn=function(e){return e.name},e.prototype.visitColumnAggr=function(e){return e.name},e.prototype.visitGroupingColumn=function(e){return e.name},e.prototype.visitGroupingColumnAggr=function(e){return e.name},e.prototype.visitColumnHierarchyLevelVariation=function(e){},e.prototype.visitEntity=function(e){},e.prototype.visitEntityAggr=function(e){},e.prototype.visitHierarchy=function(e){},e.prototype.visitHierarchyLevel=function(e){},e.prototype.visitHierarchyLevelAggr=function(e){},e.prototype.visitMeasure=function(e){return e.name},e.prototype.visitSelectRef=function(e){},e.prototype.visitPercentile=function(e){return i.visit(e.arg,this)},e.prototype.visitPercentOfGrandTotal=function(e){return i.visit(e.baseExpr,this)},e.prototype.visitPercentOfRoleTotal=function(e){return i.visit(e.baseExpr,this)},e.prototype.visitTransformOutputRoleRef=function(e){},e})();Q.instance=new Q})(o=e.FieldExprPattern||(e.FieldExprPattern={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(e,t){if(!t||0===t.length)return{dataView:e,isValid:!0};if(e)for(var r=0,u=t;r<u.length;r++){var s=u[r];if(c(e,s))return{dataView:e,isValid:!0};if(s.categorical&&e.categorical)return i(e,s);if(s.tree&&e.tree)return a(e,s.tree);if(s.single&&e.single)return n(e,s.single);if(s.table&&e.table)return o(e,s.table)}return{isValid:!1}}function i(t,r){var i=r.categorical,n=t.categorical;if(!n)return{isValid:!1};var a;if(i.rowCount&&(a=i.rowCount.supported,a&&a.max)){var o=void 0,u=n.categories,s=a.max,c=void 0;if(u)for(var p=0,f=u.length;p<f;p++){var v=u[p];if(c=v.values.length,void 0!==s&&c>s){var h=R.range(v.values,0,s-1);o=o||{categories:[]},o.categories.push({source:v.source,values:h})}}if(n.values&&n.values.length>0&&s&&(c||(c=n.values[0].values.length),void 0!==s&&c>s)){o=o||{},o.values=e.data.DataViewTransform.createValueColumns();for(var p=0,f=n.values.length;p<f;p++){var m=n.values[p],y={source:m.source,values:R.range(m.values,0,s-1)};void 0!==m.min&&(y.min=m.min),void 0!==m.max&&(y.max=m.max),void 0!==m.subtotal&&(y.subtotal=m.subtotal),o.values.push(y)}}o&&(t={metadata:t.metadata,categorical:o})}return l(t,r)?{dataView:t,isValid:!0}:null}function n(e,t){return e.single?{dataView:e,isValid:!0}:{isValid:!1}}function a(e,t){var r=e.metadata;return null==m(u(r.columns),t.depth)?{dataView:e,isValid:!0}:{isValid:!1}}function o(e,t){return e.table?{dataView:e,isValid:!0}:{isValid:!1}}function u(e){for(var t=0,r=0,i=e.length;r<i;r++)e[r].isMeasure||++t;return t}function s(e){for(var t=0,r=0,i=e.length;r<i;r++)e[r].isMeasure&&++t;return t}function c(e,t,r){return!(!t||!e)&&(!(t.scriptResult&&!h(e.scriptResult,t.scriptResult))&&(!(t.categorical&&!l(e,t.categorical,r))&&(!(t.tree&&!f(e,t.tree))&&(!(t.single&&!p(e.single,t.single))&&!(t.table&&!v(e.table,t.table,r))))))}function l(e,t,r){var i=e.categorical;if(!i)return!1;if(t.rowCount){var n=t.rowCount.supported;if(r&&t.rowCount.preferred&&(n=t.rowCount.preferred),n){var a=0;if(i.values&&i.values.length?a=i.values[0].values.length:i.categories&&i.categories.length&&(a=i.categories[0].values.length),null!=m(a,n))return!1}}return!0}function p(e,t){return!!e}function f(e,t){var r=e.metadata;return null==m(u(r.columns),t.depth)}function v(e,t,r){if(!e)return!1;if(t.rowCount){var i=t.rowCount.supported;if(r&&t.rowCount.preferred&&(i=t.rowCount.preferred),i){var n=0;if(e.rows&&e.rows.length&&(n=e.rows.length),null!=m(n,i))return!1}}return!0}function h(e,t){return!!e&&!!e.payloadBase64}function m(e,t,r){if(t)return!r&&void 0!==t.min&&t.min>e?C.conditionRangeTooSmall:void 0!==t.max&&t.max<e?C.conditionRangeTooLarge:void 0}function y(t,r,i,n){if(t&&void 0!==t.kind){var a=t.kind,o=i[r];if(o)for(var u=o.all(),s=0,c=u;s<c.length;s++){var l=c[s];if(n[l.queryRef]!==a)switch(a){case e.VisualDataRoleKind.Measure:return C.conditionKindExpectedMeasure;case e.VisualDataRoleKind.Grouping:return C.conditionKindExpectedGrouping;case e.VisualDataRoleKind.GroupingOrMeasure:return C.conditionKindExpectedGroupingOrMeasure}}}}function d(e,t,r,i,n){var a=[],o=[];if(!_.isEmpty(t))for(var u=0,s=t.length;u<s;u++){var c=t[u],l=c.conditions,p=c.requiredProperties,f=x(p,i,n),v=[];if(_.isEmpty(l))v.push({});else for(var h=0,m=l.length;h<m;h++){var y=l[h],d=g(e,y,r);if(_.isEmpty(d))v.push(y);else for(var S=0,b=d;S<b.length;S++){var w=b[S];w.mappingIndex=u,w.conditionIndex=h,o.push(w)}}if(!_.isEmpty(v)&&f){var E=_.cloneDeep(c),D=_.filter(v,(function(e){return Object.keys(e).length>0}));_.isEmpty(D)||(E.conditions=D),a.push(E)}}return{supportedMappings:R.emptyToNull(a),mappingErrors:R.emptyToNull(o)}}function g(e,t,r,i){for(var n=Object.keys(t),a=[],o=0,u=n.length;o<u;o++){var s=n[o],c=e[s]&&!_.isEmpty(e[s].activeProjectionRefs),l=t[s],p=void 0!==i&&null!==i,f=p?i:c,v=S(s,e,f),h=m(v,l);null!=h&&a.push({code:h,roleName:s});var d=y(l,s,e,r);null!=d&&a.push({code:d,roleName:s})}return a}function x(t,r,i){if(_.isEmpty(t))return!0;if(!r||!i)return!1;var n=e.data.createStaticEvalContext();return _.every(t,(function(t){var a=null,o=i[t.objectName];if(!o)return!1;var u=r[t.objectName];u&&(a=u.properties[t.propertyName]);var s;return!_.isEmpty(o)&&o[0]&&(s=T.getValue(i,t,o[0].selector)),!(!a||!s)&&e.data.DataViewObjectEvaluator.evaluateProperty(n,a,s)}))}function S(e,t,r){var i=t[e];return i?r?1:i.all().length:0}function b(t,r){if(t&&r&&t.categorical&&r.categorical){var i=t.categorical.categories,n=r.categorical.categories;if(i&&n&&i.length===n.length){for(var a=0,o=i.length;a<o;a++){var u=i[a].identity,s=n[a].identity,c=w(u);if(c!==w(s))return!1;for(var l=0;l<c;l++)if(!e.DataViewScopeIdentity.equals(u[l],s[l]))return!1}return!0}}return!1}function w(e){return e?e.length:0}function E(e,t){return!e&&!t||!(!e||!t)&&(e.displayName===t.displayName&&(e.queryName===t.queryName&&(e.isMeasure===t.isMeasure&&(e.type===t.type&&e.sort===t.sort))))}function D(e,r){if(!e&&!r)return!0;if(!e||!r)return!1;var i=e.columns.length,n=r.columns.length;if(i!==n)return!1;for(var a=0;a<n;a++)if(!t.areMetadataColumnsEquivalent(e.columns[a],r.columns[a]))return!1;return!0}var C,R=jsCommon.ArrayExtensions,T=e.data.DataViewObjectDefinitions;!(function(e){e[e.conditionRangeTooLarge=0]="conditionRangeTooLarge",e[e.conditionRangeTooSmall=1]="conditionRangeTooSmall",e[e.conditionKindExpectedMeasure=2]="conditionKindExpectedMeasure",e[e.conditionKindExpectedGrouping=3]="conditionKindExpectedGrouping",e[e.conditionKindExpectedGroupingOrMeasure=4]="conditionKindExpectedGroupingOrMeasure"})(C=t.DataViewMappingMatchErrorCode||(t.DataViewMappingMatchErrorCode={})),t.validateAndReshape=r,t.countGroups=u,t.countMeasures=s,t.supports=c,t.validateRange=m,t.chooseDataViewMappings=d,t.checkForConditionErrors=g,t.getPropertyCount=S,t.hasSameCategoryIdentity=b,t.areMetadataColumnsEquivalent=E,t.isMetadataEquivalent=D})(t=e.DataViewAnalysis||(e.DataViewAnalysis={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,r=jsCommon.ArrayExtensions,i=jsCommon.Lazy;!(function(e){function t(e){return new a(e)}function n(e,t){return e.key&&t.key&&e.key===t.key&&r.sequenceEqual(e.roles,t.roles,(function(e,t){return e===t}))}e.fromRoles=t,e.equals=n;var a=(function(){function e(e){var t=this;this.kind=0,this._roles=e,this._key=new i(function(){return JSON.stringify(t.roles)})}return Object.defineProperty(e.prototype,"roles",{get:function(){return this._roles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key.getValue()},enumerable:!0,configurable:!0}),e})()})(t=e.DataViewRoleWildcard||(e.DataViewRoleWildcard={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function i(e,t,i){return e=e||null,t=t||null,e===t||!e==!t&&r.SQExpr.equals(e.expr,t.expr,i)}function n(e,t){if(!_.isEmpty(e)){for(var r=[],i=0,n=e;i<n.length;i++){var o=n[i];r.push(o.expr)}return a(r,t)}}function a(t,i){if(!_.isEmpty(t)){for(var n,a=0,o=t;a<o.length;a++){var u=o[a],s=r.ScopeIdentityExtractor.getInExpr(u);n=n?r.SQExprBuilder.or(n,s):s||u}return n&&i&&(n=e.data.SQExprBuilder.not(n)),e.data.SemanticFilter.fromSQExpr(n)}}t.equals=i,t.filterFromIdentity=n,t.filterFromExprs=a})(t=e.DataViewScopeIdentity||(e.DataViewScopeIdentity={}));var r;!(function(e){function t(e){return new i(e)}var r=jsCommon.Lazy;e.createDataViewScopeIdentity=t;var i=(function(){function t(t){this.kind=1,this._expr=t,this._key=new r(function(){return e.SQExprShortSerializer.serialize(t)})}return Object.defineProperty(t.prototype,"expr",{get:function(){return this._expr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this._key.getValue()},enumerable:!0,configurable:!0}),t})()})(r=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,r=jsCommon.Lazy;!(function(t){function i(t,r){return!_.isEmpty(r)&&e.SQExprUtils.sequenceEqual(t.exprs,r)}function n(t,r){return t===r||e.SQExprUtils.sequenceEqual(t.exprs,r.exprs)}function a(e){return new o(e)}t.matches=i,t.equals=n,t.fromExprs=a;var o=(function(){function t(t){this.kind=2,this._exprs=t,this._key=new r(function(){return e.SQExprShortSerializer.serializeArray(t)})}return Object.defineProperty(t.prototype,"exprs",{get:function(){return this._exprs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this._key.getValue()},enumerable:!0,configurable:!0}),t})()})(t=e.DataViewScopeTotal||(e.DataViewScopeTotal={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,r=jsCommon.Lazy;!(function(t){function i(t,r){var i=e.ScopeIdentityExtractor.getKeys(r.expr);return!!i&&e.SQExprUtils.sequenceEqual(t.exprs,i)}function n(t,r){return t===r||e.SQExprUtils.sequenceEqual(t.exprs,r.exprs)}function a(e){return new o(e)}t.matches=i,t.equals=n,t.fromExprs=a;var o=(function(){function t(t){this.kind=3,this._exprs=t,this._key=new r(function(){return e.SQExprShortSerializer.serializeArray(t)})}return Object.defineProperty(t.prototype,"exprs",{get:function(){return this._exprs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this._key.getValue()},enumerable:!0,configurable:!0}),t})()})(t=e.DataViewScopeWildcard||(e.DataViewScopeWildcard={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(){return new r}e.createColorAllocatorCache=t;var r=(function(){function e(){this.cache=[]}return e.prototype.get=function(e){for(var t=0,r=this.cache;t<r.length;t++){var i=r[t];if(i.key===e)return i.allocator}},e.prototype.register=function(e,t){return this.cache.push({key:e,allocator:t}),this},e})()})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=e.DataViewMapping;!(function(r){function n(e){var t=e.visualDataViews,r=e.dataRoles,n=e.objectDescriptors,o=e.objectDefinitions,u=e.colorAllocatorFactory,s=e.transformSelects,c=e.applicableDataViewMappings,l=e.roleKindByQueryRef,p=e.queryProjectionsByRole;if(!_.isEmpty(t)&&s){if(!l||!p||_.isEmpty(c)||!n||!o)return t;var f=_.find(c,(function(e){return!!i.getRegressionUsage(e)}));if(f){for(var v=[],h=0,m=t;h<m.length;h++){var y=m[h],d=a(y,r,f,n,o,u);d&&v.push(d)}_.isEmpty(v)||t.push.apply(t,v)}}return t}function a(t,r,n,a,c,l){if(t.categorical){var p=s(0,t.categorical,r),f=s(1,t.categorical,r);if(!_.isEmpty(p)&&!_.isEmpty(f)){var h=p[0].source,m=f[0].source,x=!0,S=i.getRegressionUsage(n);if(S&&t.metadata.objects){var b=S.combineSeries;b&&(x=e.DataViewObjects.getValue(t.metadata.objects,b,!0))}var w=y(p,f,x,!1),E=o(w);if(u(E)){var D,C=E.xMin,R=E.xMax,T=g(f)||g(p);if(T){var V=y(p,f,x,!0);D=o(V),u(D)?(C=_.min([C,D.xMin]),R=_.max([R,D.xMax])):T=!1}for(var F=[],P=0,M=E.lineDefs;P<M.length;P++){var A=M[P];F.push(v(A,+C,+R))}var N;if(T){N=[];for(var Q=0,O=D.lineDefs;Q<O.length;Q++){var A=O[Q];N.push(v(A,+C,+R))}}var q;if(x)q=["combinedRegressionSeries"];else if(t.categorical.values.source){var I=t.categorical.values.grouped();q=_.map(I,(function(e){return e.name}))}else q=_.map(f,(function(e){return e.source.queryName}));var U=d(h,m,q,[C,R],F,N,t,n,a,c,l);return U}}}}function o(e){for(var t,r,i=[],n=0,a=e;n<a.length;n++){var o=a[n],u=o.xValues,s=o.yValues;if(_.isEmpty(u)||_.isEmpty(s))i.push(null);else{var c=l(u),v=l(s);if(c&&v){var h=p(u,s);if(!h||_.isEmpty(h.xValues)||_.isEmpty(h.yValues))i.push(null);else{var m=h.xValues[0],y=h.xValues[h.xValues.length-1],d=f(h.xValues,h.yValues);t=_.min([t,m]),r=_.max([r,y]),i.push(d)}}else i.push(null)}}return{lineDefs:i,xMin:t,xMax:r}}function u(e){return e&&!_.isEmpty(e.lineDefs)&&_.some(e.lineDefs,(function(e){return e}))}function s(e,t,r){var i=c(e,t.values,r);if(!_.isEmpty(i))return i;var n=t.categories;if(!_.isEmpty(n)){var a=n[0],o=c(e,[a],r);return _.isEmpty(o)?void 0:o}}function c(e,t,r){if(!_.isEmpty(t))return _.filter(t,(function(t){var i=function(i){if(!t.source.roles[i])return"continue";var n=_.find(r,(function(e){return e.name===i}));return n&&n.cartesianKind===e?{value:!0}:void 0};for(var n in t.source.roles){var a=i(n);if("object"==typeof a)return a.value}return!1}))}function l(e){var t=_.find(e,(function(e){return null!=e}));if(null!=t){var r=typeof t;if(!_.some(e,(function(e){return null!=e&&typeof e!==r})))return r}}function p(e,t){var r=_.zip(e,t),i=_.chain(r).filter((function(e){return null!=e[0]&&null!=e[1]})).sortBy((function(e){return e[0]})).unzip().value(),n=i[0],a=i[1];return{xValues:n,yValues:a}}function f(e,t){var r=_.sum(e)/e.length,i=_.sum(t)/t.length,n=_.chain(e).map((function(e){return Math.pow(e-r,2)})).sum();if(0!==n){var a=_.chain(e).map((function(e,n){return(e-r)*(t[n]-i)})).sum(),o=a/n,u=i-r*o;return{slope:o,intercept:u}}}function v(e,t,r){return e?[t*e.slope+e.intercept,r*e.slope+e.intercept]:[null,null]}function h(r){return e.DataViewObjects.getValue(r,t.scalarKeyMinPropertyIdentifier)}function m(e,t){var r=_.head(e.objects);if(r&&h(r))return _.map(e.objects,(function(e){return h(e)}));if(t){var i=e;if(i.highlights)return i.highlights}return e.values}function y(e,t,r,i){for(var n=[],a=_.map(e,(function(e){return m(e,i)})),o=_.map(t,(function(e){return m(e,i)})),u=e.length>1,s=0;s<o.length;s++){var c=u?a[s]:a[0],l=o[s];r&&n.length>0?(n[0].xValues=n[0].xValues.concat(c),n[0].yValues=n[0].yValues.concat(l)):n.push({xValues:c,yValues:l})}return n}function d(e,i,n,a,o,u,s,c,l,p,f){var v,h,m=c.categorical.categories.for.in,y=c.categorical.values.group;if(y&&!_.isEmpty(y.select)&&(v=y.select[0].for?y.select[0].for.in:y.select[0].bind.to,h=y.by),v&&h){var d=(R={},R[m]=!0,R),g=(T={},T[v]=!0,T),b=(V={},V[h]=!0,V),w=[];for(var E in o){var D={values:o[E]};u&&(D.highlights=u[E]),w.push([D])}var C=t.createCategoricalDataViewBuilder().withCategory({source:{displayName:e.displayName,queryName:x,type:e.type,isMeasure:!1,roles:d},values:a,identityFrom:{fields:[t.SQExprBuilder.columnRef(t.SQExprBuilder.entity("s","RegressionEntity"),"RegressionCategories")]}}).withGroupedValues({groupColumn:{source:{displayName:i.displayName+"Regression",queryName:S,type:i.type,isMeasure:i.isMeasure,roles:b},values:n,identityFrom:{fields:[t.SQExprBuilder.columnRef(t.SQExprBuilder.entity("s","RegressionEntity"),"RegressionSeries")]}},valueColumns:[{source:{displayName:i.displayName,queryName:r.regressionYQueryName,type:i.type,isMeasure:i.isMeasure,roles:g}}],data:w}).build();return t.DataViewTransform.transformObjects(C,1,l,p,[],f),C;var R,T,V}}function g(e){return _.any(e,(function(e){var t=e;return null!=t.highlights}))}var x="RegressionX",S="RegressionSeries";r.regressionYQueryName="RegressionY",r.run=n,r.linearRegressionTransform=a})(r=t.DataViewRegression||(t.DataViewRegression={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r;!(function(r){function i(e,r){if(_.isEmpty(e))return{};for(var i={},n=0,a=e;n<a.length;n++){var o=a[n];if(o){var u=o.roles;if(u)for(var s in u)if(u[s]){var c=i[s];c||(c=i[s]=new t.QueryProjectionCollection([])),c.all().push({queryRef:o.queryName}),r&&r[s]&&(c.activeProjectionRefs=_.map(r[s],(function(e){return e.queryRef})))}}}return i}function n(t,r){for(var i={},n=0,a=r.columns;n<a.length;n++){var o=a[n];if(!(!o.index&&0!==o.index||o.index<0||o.index>=t.length)){var u=t[o.index];if(u){var s=u.queryName;s&&void 0===i[s]&&(i[s]=o.isMeasure?e.VisualDataRoleKind.Measure:e.VisualDataRoleKind.Grouping)}}}return i}r.projectionsFromSelects=i,r.createRoleKindFromMetadata=n})(r=t.DataViewSelectTransform||(t.DataViewSelectTransform={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t,r){return new a(e,t,r)}function r(e,t){return i(e.values,t)||i(e.categories,t)}function i(e,t){if(e)for(var r=0,i=e;r<i.length;r++){var n=i[r],a=n.source.roles;if(a&&a[t])return n}}function n(e,t){if(e)for(var r=0,i=e;r<i.length;r++){var n=i[r];if(!n.identity&&n.source.index===t)return n}}e.createCategoricalEvalContext=t;var a=(function(){function t(e,t,r){this.colorAllocatorProvider=e,this.dataView=t,this.selectTransforms=r,this.columnsByRole={}}return t.prototype.getColorAllocator=function(e){return this.colorAllocatorProvider.get(e)},t.prototype.getExprValue=function(t){var r=this.index;if(_.isNumber(r)){var i=this.selectTransforms;if(i){var a=e.findSelectIndex(t,i);if(a!==-1){var o=this.dataView,u=n(o.values,a);if(u)return u.values[r]}}}},t.prototype.getRoleValue=function(e){var t=this.columnsByRole,i=t[e];if(i||(i=t[e]=r(this.dataView,e)),i){var n=this.index;return null!=n?i.values[this.index]:void 0}},t.prototype.setCurrentRowIndex=function(e){this.index=e},t})()})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t,i){return new r(e,t,i)}e.createTableEvalContext=t;var r=(function(){function t(e,t,r){this.colorAllocatorProvider=e,this.dataView=t,this.selectTransforms=r}return t.prototype.getColorAllocator=function(e){return this.colorAllocatorProvider.get(e)},t.prototype.getExprValue=function(t){var r=this.rowIdx;if(null!=r)return e.getExprValueFromTable(t,this.selectTransforms,this.dataView,r)},t.prototype.getRoleValue=function(e){},t.prototype.setCurrentRowIndex=function(e){this.rowIdx=e},t})()})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e.prototype.evaluate=function(e){},e})();e.RuleEvaluation=t})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(e){function t(t,r){var i;return i=e.call(this)||this,i.inputRole=t,i.allocator=r,i}return __extends(t,e),t.prototype.evaluate=function(e){var t=e.getRoleValue(this.inputRole);if(void 0!==t)return this.allocator.color(t)},t})(e.RuleEvaluation);e.ColorRuleEvaluation=t})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function e(){}return e.prototype.findProperty=function(e,t){var r=this.entities.withName(e);if(r&&!_.isEmpty(r.properties))return r.properties.withName(t)},Object.defineProperty(e.prototype,"isExtensionSchema",{get:function(){return this.hasOwnProperty("extends")},enumerable:!0,configurable:!0}),e.prototype.findHierarchy=function(e,t){var r=this.entities.withName(e);if(r&&!_.isEmpty(r.hierarchies))return r.hierarchies.withName(t)},e.prototype.findHierarchyByVariation=function(e,t,r,i){var n=this.findTargetEntityOfVariation(e,t,r);if(n&&!_.isEmpty(n.hierarchies))return n.hierarchies.withName(i)},e.prototype.findTargetEntityOfVariation=function(e,t,r){var i=this.entities.withName(e);if(i&&!_.isEmpty(i.properties)){var n=i.properties.withName(t);if(n){var a=n.column;if(a&&!_.isEmpty(a.variations)){var o=a.variations.withName(r);return o?o.navigationProperty?o.navigationProperty.targetEntity:i:void 0}}}},e.prototype.findPropertyWithKpi=function(e,t){var r=this.entities.withName(e);if(r&&!_.isEmpty(r.properties))for(var i=0,n=r.properties;i<n.length;i++){var a=n[i];if(a&&a.measure&&a.measure.kpi&&(a.measure.kpi.status===t||a.measure.kpi.goal===t))return a}},e})();e.ConceptualSchema=t;var r;!(function(e){e[e.None=0]="None",e[e.Address=1]="Address",e[e.City=2]="City",e[e.Company=3]="Company",e[e.Continent=4]="Continent",e[e.Country=5]="Country",e[e.County=6]="County",e[e.Date=7]="Date",e[e.Image=8]="Image",e[e.ImageUrl=9]="ImageUrl",e[e.Latitude=10]="Latitude",e[e.Longitude=11]="Longitude",e[e.Organization=12]="Organization",e[e.Place=13]="Place",e[e.PostalCode=14]="PostalCode",e[e.Product=15]="Product",e[e.StateOrProvince=16]="StateOrProvince",e[e.WebUrl=17]="WebUrl"})(r=e.ConceptualDataCategory||(e.ConceptualDataCategory={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t,r=jsCommon.StringExtensions,i=e.data.FieldExprPattern;!(function(t){function n(e){if(e&&1===e.length&&e[0])return e[0].scriptResult}function a(e){var t=n(e);if(t){var r=e[0].metadata&&e[0].metadata.objects;return s(t,r)}}function o(t,r){if(r){var i=n(t);if(i&&i.script&&i.script.source&&i.script.provider){var a=e.data.DataViewObjectDefinitions.getValue(r,i.script.source,null),o=e.data.DataViewObjectDefinitions.getValue(r,i.script.provider,null),u=a?a.value:null,s=o?o.value:null;return p(u,s,i.script.scriptOutputType)}}}function u(e){return c(n(e))}function s(t,r){if(t&&t.script&&t.script.source&&t.script.provider&&r){var i=e.DataViewObjects.getValue(r,t.script.source),n=e.DataViewObjects.getValue(r,t.script.provider);return p(i,n,t.script.scriptOutputType)}}function c(e){return l(e&&e.script)}function l(e){if(e){var t=e.scriptSourceDefault,r=e.scriptProviderDefault,i=e.scriptOutputType;return p(t,r,i)}}function p(e,t,i){if(!r.isNullOrUndefinedOrWhiteSpaceString(e)&&!r.isNullOrUndefinedOrWhiteSpaceString(t))return{source:e,provider:t,outputType:i||y}}function f(e,t,r,i,n){if(i&&i.script)return v(e,t,r,i.script,n)}function v(e,t,n,a,o){var u=!!l(a),s={VariableName:"dataset",Columns:[],Parameters:[]};if(e&&t&&!_.isEmpty(t)){var c=[],p=[];for(var f in e)for(var v=0,m=e[f].all();v<m.length;v++){var y=m[v],g=t.withName(y.queryRef);if(g){var x={QueryName:g.name},S=i.visit(g.expr,new d(n));u&&(x.Role=f,S=f+"."+S),p.push(x),c.push(S)}}c=r.ensureUniqueNames(c);for(var b=0;b<c.length;b++){var x=p[b];x.Name=c[b]}s.Columns=p}return s.Parameters=h(a,o),s}function h(t,r){var i=[];if(r)for(var n in r){var a=e.DataViewObjects.getObject(r,n);if(a)for(var o in a){var u=m(t,a,n,o);if(u){var s={ObjectName:n,PropertyName:o,Value:u};i.push(s)}}}return i}function m(t,r,i,n){if(!(t&&t.source&&t.source.objectName===i&&t.source.propertyName===n||t&&t.provider&&t.provider.objectName===i&&t.provider.propertyName===n)){var a=e.DataViewObject.getFillColorByPropertyName(r,n);if(a)return e.data.PrimitiveValueEncoding.text(a);var o=e.DataViewObject.getValue(r,n);if(void 0!==o&&null!==o)switch(typeof o){case"string":return e.data.PrimitiveValueEncoding.text(o);case"number":var u=o;return e.Double.isInteger(u)?e.data.PrimitiveValueEncoding.integer(u):e.data.PrimitiveValueEncoding.double(u);case"boolean":return e.data.PrimitiveValueEncoding.boolean(o)}}}var y="png";t.findScriptResultMapping=n,t.extractScriptResult=a,t.extractScriptResultFromVisualConfig=o,t.extractScriptResultDefaultFromDataViewMappings=u,t.extractScriptResultDefaultFromDataViewMappingScriptDefinition=l,t.getScriptInput=f,t.getScriptInputFromScriptDefinition=v;var d=(function(){function e(e){this.federatedSchema=e}return e.prototype.visitColumn=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitColumnAggr=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitGroupingColumn=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitGroupingColumnAggr=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitColumnHierarchyLevelVariation=function(t){return e.getVariationLevelName(t,this.federatedSchema)},e.prototype.visitEntity=function(e){return e.entity},e.prototype.visitEntityAggr=function(e){return e.entity},e.prototype.visitHierarchy=function(t){return e.getNameForHierarchy(t,this.federatedSchema)},e.prototype.visitHierarchyLevel=function(e){},e.prototype.visitHierarchyLevelAggr=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitMeasure=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitSelectRef=function(e){return i.visit(e,this)},e.prototype.visitPercentile=function(e){return i.visit(e.arg,this)},e.prototype.visitPercentOfGrandTotal=function(e){return i.visit(e.baseExpr,this)},e.prototype.visitPercentOfRoleTotal=function(e){return i.visit(e.baseExpr,this)},e.prototype.visitTransformOutputRoleRef=function(e){return i.visit(e,this)},e.getNameForHierarchy=function(e,t){var r=t.schema(e.schema),i=r.findHierarchy(e.entity,e.name);if(i)return i.name},e.getNameForProperty=function(e,t){var r=t.schema(e.schema),i=r.findProperty(e.entity,e.name);if(i)return i.name},e.getVariationLevelName=function(e,t){var r=e.source,i=t.schema(r.schema).findProperty(r.entity,r.name);if(i)for(var n=i.column.variations,a=0,o=n;a<o.length;a++){var u=o[a];if(u.name===e.variationName)for(var s=0,c=u.defaultHierarchy.levels;s<c.length;s++){var l=c[s];if(l.name===e.level.level)return l.column.name}}},e})()})(t=e.ScriptResultUtil||(e.ScriptResultUtil={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r;!(function(t){var r;!(function(t){function r(t,r){!e.DataViewAnalysis.isMetadataEquivalent(t.metadata,r.metadata),r.metadata.segment||delete t.metadata.segment,t.table&&r.table&&i(t.table,r.table),t.categorical&&r.categorical&&n(t.categorical,r.categorical),t.tree&&r.tree&&o(t.tree.root,r.tree.root,!0),t.matrix&&r.matrix&&o(t.matrix.rows.root,r.matrix.rows.root,!1)}function i(e,t){if(!_.isEmpty(t.rows)){var r=t.lastMergeIndex+1;a(e.rows,t.rows,r),t.identity&&a(e.identity,t.identity,r)}}function n(e,t){if(!_.isEmpty(e.categories)&&!_.isEmpty(t.categories)){for(var r=t.lastMergeIndex+1,i=t.categories.length,n=0;n<i;n++){var o=t.categories[n],u=e.categories[n];o.values&&a(u.values,o.values,r)}t.categories[0].identity&&a(e.categories[0].identity,t.categories[0].identity,r)}if(e.values&&t.values)for(var s=t.values.length,c=0;c<s;c++){var l=t.values[c],p=e.values[c];!p.values&&l.values&&(p.values=[]);var r=t.lastMergeIndex+1;l.values&&a(p.values,l.values,r),l.highlights&&a(p.highlights,l.highlights,r)}}function a(e,t,r){if(r>=t.length)return t;var i=[];return void 0!==r&&(i=t.splice(0,r)),Array.prototype.push.apply(e,t),i}function o(e,t,r){if(t.children&&0!==t.children.length){if(r&&(!e.children||0===e.children.length))return void(e.children=t.children);
var i=u(t.children),n=e.children[e.children.length-1],s=a(e.children,t.children,i);s.length>0&&o(n,s[s.length-1],r)}}function u(e){if(0===e.length)return 0;for(var t=0;t<e.length;t++){var r=e[t];if(!r.isMerge)break}return t}t.mergeDataViews=r,t.mergeTables=i,t.mergeCategorical=n,t.mergeTreeNodes=o})(r=t.DataViewMerger||(t.DataViewMerger={}))})(r=t.segmentation||(t.segmentation={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=jsCommon.ArrayExtensions,r=(function(){function r(){}return r.prototype.visitColumnRef=function(t){var r=t.source,i=r.accept(this);return r===i?t:new e.SQColumnRefExpr(i,t.ref)},r.prototype.visitMeasureRef=function(t){var r=t.source,i=r.accept(this);return r===i?t:new e.SQMeasureRefExpr(i,t.ref)},r.prototype.visitAggr=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQAggregationExpr(i,t.func)},r.prototype.visitSelectRef=function(e){return e},r.prototype.visitPercentile=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQPercentileExpr(i,t.k,t.exclusive)},r.prototype.visitGroupRef=function(t){for(var r=t.source,i=t.source.accept(this),n=t.groupedExprs,a=new Array(n.length),o=0;o<n.length;o++)a[o]=n[o].accept(this);return r===i&&e.SQExprUtils.sequenceEqual(n,a)?t:new e.SQGroupRefExpr(t.ref,i,a)},r.prototype.visitHierarchy=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQHierarchyExpr(i,t.hierarchy)},r.prototype.visitHierarchyLevel=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQHierarchyLevelExpr(i,t.level)},r.prototype.visitPropertyVariationSource=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQPropertyVariationSourceExpr(i,t.name,t.property)},r.prototype.visitEntity=function(e){return e},r.prototype.visitSubqueryRef=function(e){return e},r.prototype.visitNamedQueryRef=function(e){return e},r.prototype.visitAnd=function(t){var r=t.left,i=r.accept(this),n=t.right,a=n.accept(this);return r===i&&n===a?t:new e.SQAndExpr(i,a)},r.prototype.visitBetween=function(t){var r=t.arg,i=r.accept(this),n=t.lower,a=n.accept(this),o=t.upper,u=o.accept(this);return r===i&&n===a&&o===u?t:new e.SQBetweenExpr(i,a,u)},r.prototype.visitIn=function(r){var i,n=r.args,a=this.rewriteAll(n),o=r.values,u=r.table,s=u;if(o)for(var c=0,l=o.length;c<l;c++){var p=o[c],f=this.rewriteAll(p);p===f||i||(i=t.take(o,c)),i&&i.push(f)}return u&&(s=u.accept(this)),n!==a||i||u!==s?new e.SQInExpr(a,i||o,s):r},r.prototype.rewriteAll=function(e){for(var r,i=0,n=e.length;i<n;i++){var a=e[i],o=a.accept(this);a===o||r||(r=t.take(e,i)),r&&r.push(o)}return r||e},r.prototype.visitOr=function(t){var r=t.left,i=r.accept(this),n=t.right,a=n.accept(this);return r===i&&n===a?t:new e.SQOrExpr(i,a)},r.prototype.visitCompare=function(t){var r=t.left,i=r.accept(this),n=t.right,a=n.accept(this);return r===i&&n===a?t:new e.SQCompareExpr(t.comparison,i,a)},r.prototype.visitContains=function(t){var r=t.left,i=r.accept(this),n=t.right,a=n.accept(this);return r===i&&n===a?t:new e.SQContainsExpr(i,a)},r.prototype.visitExists=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQExistsExpr(i)},r.prototype.visitNot=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQNotExpr(i)},r.prototype.visitStartsWith=function(t){var r=t.left,i=r.accept(this),n=t.right,a=n.accept(this);return r===i&&n===a?t:new e.SQStartsWithExpr(i,a)},r.prototype.visitConstant=function(e){return e},r.prototype.visitFloor=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQFloorExpr(i,t.size,t.timeUnit)},r.prototype.visitDateSpan=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQDateSpanExpr(t.unit,i)},r.prototype.visitDateAdd=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQDateAddExpr(t.unit,t.amount,i)},r.prototype.visitNow=function(e){return e},r.prototype.visitDefaultValue=function(e){return e},r.prototype.visitAnyValue=function(e){return e},r.prototype.visitArithmetic=function(t){var r=t.left,i=r.accept(this),n=t.right,a=n.accept(this);return r===i&&n===a?t:new e.SQArithmeticExpr(i,a,t.operator)},r.prototype.visitScopedEval=function(t){var r=t.expression,i=r.accept(this),n=t.scope,a=this.rewriteAll(n);return r===i&&n===a?t:new e.SQScopedEvalExpr(i,a)},r.prototype.visitWithRef=function(e){return e},r.prototype.visitTransformTableRef=function(e){return e},r.prototype.visitTransformOutputRoleRef=function(e){return e},r.prototype.visitRoleRef=function(e){return e},r.prototype.visitFillRule=function(t){var r=t.input,i=r.accept(this),n=t.rule,a=n.linearGradient2,o=a;a&&(o=this.visitLinearGradient2(a));var u=n.linearGradient3,s=u;if(u&&(s=this.visitLinearGradient3(u)),r!==i||a!==o||u!==s){var c={};return o&&(c.linearGradient2=o),s&&(c.linearGradient3=s),new e.SQFillRuleExpr(i,c)}return t},r.prototype.visitLinearGradient2=function(e){var t=e.min,r=this.visitFillRuleStop(t),i=e.max,n=this.visitFillRuleStop(i),a=e.nullColoringStrategy,o=this.visitFillNullStrategy(a);if(t!==r||i!==n||a!==o){var u={min:r,max:n};return o&&(u.nullColoringStrategy=o),u}return e},r.prototype.visitLinearGradient3=function(e){var t=e.min,r=this.visitFillRuleStop(t),i=e.mid,n=this.visitFillRuleStop(i),a=e.max,o=this.visitFillRuleStop(a),u=e.nullColoringStrategy,s=this.visitFillNullStrategy(u);if(t!==r||i!==n||a!==o||u!==s){var c={min:r,mid:n,max:o};return s&&(c.nullColoringStrategy=s),c}return e},r.prototype.visitFillRuleStop=function(e){var t=e.color,r=e.color.accept(this),i=e.value,n=i;if(i&&(n=i.accept(this)),t!==r||i!==n){var a={color:r};return n&&(a.value=n),a}return e},r.prototype.visitFillNullStrategy=function(e){if(e){var t=e.strategy,r=t.accept(this),i=e.color,n=i;if(i&&(n=i.accept(this)),t!==r||i!==n){var a={strategy:r};return n&&(a.color=n),a}return e}},r.prototype.visitThemeColor=function(e){return e},r.prototype.visitResourcePackageItem=function(e){return e},r.prototype.visitDiscretize=function(t){var r=t.source.accept(this);return r===t.source?t:new e.SQDiscretizeExpr(r,t.count)},r.prototype.visitMember=function(t){var r=t.source.accept(this);return r===t.source?t:new e.SQMemberExpr(r,t.member)},r})();e.SQExprRewriter=r})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function r(e){return e.accept(new i)}t.run=r;var i=(function(t){function r(){return t.call(this)||this}return __extends(r,t),r.prototype.visitCompare=function(t){if(0!==t.comparison)return this.visitUnsupported(t);if(!this.isSupported(t.left)||!this.isSupported(t.right))return this.visitUnsupported(t);var r=this.isComparand(t.left),i=this.isComparand(t.right);if(r===i)return this.visitUnsupported(t);var n=r?t.left:t.right,a=r?t.right:t.left,o=this.current;return o?(o.add(n,a),t):e.SQExprBuilder.inValues([n],[[a]])},r.prototype.visitOr=function(e){if(!this.isSupported(e.left)||!this.isSupported(e.right))return this.visitUnsupported(e);var t;return this.current||(t=this.current=new n),e.left.accept(this),e.right.accept(this),t?(this.current=null,t.complete()||e):e},r.prototype.visitAnd=function(e){if(!this.isSupported(e.left)||!this.isSupported(e.right))return this.visitUnsupported(e);var r=this.current;return r?(r.cancel(),e):t.prototype.visitAnd.call(this,e)},r.prototype.visitUnsupported=function(e){var t=this.current;return t&&t.cancel(),e},r.prototype.isSupported=function(t){return t instanceof e.SQCompareExpr||t instanceof e.SQColumnRefExpr||t instanceof e.SQConstantExpr||t instanceof e.SQHierarchyLevelExpr||t instanceof e.SQOrExpr||t instanceof e.SQAndExpr},r.prototype.isComparand=function(t){return t instanceof e.SQColumnRefExpr||t instanceof e.SQHierarchyLevelExpr},r})(e.SQExprRewriter),n=(function(){function t(){}return t.prototype.add=function(t,r){if(!this.cancelled){if(this.operand&&!e.SQExpr.equals(t,this.operand))return void this.cancel();this.operand=t;var i=this.values;i||(i=this.values=[]),i.push(r)}},t.prototype.cancel=function(){this.cancelled=!0},t.prototype.complete=function(){if(!this.cancelled&&this.operand)return e.SQExprBuilder.inValues([this.operand],_.map(this.values,(function(e){return[e]})))},t})()})(t=e.EqualsToInRewriter||(e.EqualsToInRewriter={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function r(e){var t=new i;return e.accept(t),t.sawSubquery?3:t.filterKind}t.run=r;var i=(function(e){function t(){var t=e.call(this)||this;return t.filterKind=0,t.sawSubquery=!1,t}return __extends(t,e),t.prototype.visitMeasureRef=function(e){this.filterKind=1},t.prototype.visitExists=function(e){this.filterKind=2},t.prototype.visitAggr=function(e){this.filterKind=1},t.prototype.visitSubqueryRef=function(e){this.sawSubquery=!0},t})(e.DefaultSQExprVisitorWithTraversal)})(t=e.FilterKindDetector||(e.FilterKindDetector={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r;!(function(e){function t(e,t){var r=e.conditions(),n=r[0];if(n){var a=new i(t);if(n.accept(a))return a.getResult()}}function r(e){var t=e.expr.accept(new n);if(t)return t.value}function o(e){return e.expr.accept(new a)}e.asScopeIdsContainer=t,e.getFirstComparandValue=r,e.getAllComparands=o})(r=t.SQExprConverter||(t.SQExprConverter={}));var i=(function(r){function i(e){var i=r.call(this)||this;i.isRoot=!0,i.isNot=!1,i.keyExprsCount=null,i.valueExprs=[],i.fieldExprs=[];for(var n=0,a=e;n<a.length;n++){var o=a[n];i.fieldExprs.push(t.SQExprBuilder.removeEntityVariables(o))}return i}return __extends(i,r),i.prototype.getResult=function(){for(var t=this.valueExprs,r=[],n=this.keyExprsCount||1,a=0,o=n,u=t.length;a<u&&o<=u;){var s=t.slice(a,o),c=i.getScopeIdentity(this.fieldExprs,s);jsCommon.ArrayExtensions.isInArray(r,c,e.DataViewScopeIdentity.equals)||r.push(c),a+=n,o+=n}return{isNot:this.isNot,scopeIds:r}},i.getScopeIdentity=function(e,r){for(var i,n=0,a=e.length;n<a;n++){var o=t.SQExprBuilder.equal(e[n],r[n]);i=i?t.SQExprBuilder.and(i,o):o}return t.createDataViewScopeIdentity(i)},i.prototype.visitOr=function(e){return null!==this.keyExprsCount?this.unsupportedSQExpr():(this.isRoot=!1,e.left.accept(this)&&e.right.accept(this))},i.prototype.visitNot=function(e){return this.isRoot?(this.isNot=!0,e.arg.accept(this)):this.unsupportedSQExpr()},i.prototype.visitConstant=function(e){return this.isRoot&&0===e.type.primitiveType?this.unsupportedSQExpr():(this.valueExprs.push(e),!0)},i.prototype.visitCompare=function(e){return null!==this.keyExprsCount?this.unsupportedSQExpr():(this.isRoot=!1,0!==e.comparison?this.unsupportedSQExpr():e.left.accept(this)&&e.right.accept(this))},i.prototype.visitIn=function(e){if(!e.values)return!1;this.keyExprsCount=0;var t;this.isRoot=!1;for(var r=0,i=e.args;r<i.length;r++){var n=i[r];if(t=n.accept(this),!t)return this.unsupportedSQExpr();this.keyExprsCount++}if(this.keyExprsCount!==this.fieldExprs.length)return this.unsupportedSQExpr();for(var a=e.values,o=0,u=a;o<u.length;o++)for(var s=u[o],c=(s.length,0),l=s;c<l.length;c++){var p=l[c];if(t=p.accept(this),!t)return this.unsupportedSQExpr()}return t},i.prototype.visitColumnRef=function(e){if(this.isRoot)return this.unsupportedSQExpr();var r=t.SQExprBuilder.removeEntityVariables(e);return null!==this.keyExprsCount?t.SQExpr.equals(this.fieldExprs[this.keyExprsCount],r):t.SQExpr.equals(this.fieldExprs[0],r)},i.prototype.visitDefaultValue=function(e){return this.isRoot||null!==this.keyExprsCount?this.unsupportedSQExpr():(this.valueExprs.push(e),!0)},i.prototype.visitAnyValue=function(e){return this.isRoot||null!==this.keyExprsCount?this.unsupportedSQExpr():(this.valueExprs.push(e),!0)},i.prototype.visitDefault=function(e){return this.unsupportedSQExpr()},i.prototype.unsupportedSQExpr=function(){return!1},i})(t.DefaultSQExprVisitor),n=(function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.prototype.visitAnd=function(e){return e.left.accept(this)||e.right.accept(this)},r.prototype.visitCompare=function(e){if(0===e.comparison){if(e.right instanceof t.SQConstantExpr)return e.right;if(e.left instanceof t.SQConstantExpr)return e.left}},r})(t.DefaultSQExprVisitor),a=(function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.prototype.visitAnd=function(e){var t=[];return t=t.concat(e.left.accept(this)),t=t.concat(e.right.accept(this))},r.prototype.visitCompare=function(e){if(0===e.comparison){var r=[];return e.right instanceof t.SQConstantExpr?r.push({expr:e.left,value:e.right.value}):e.left instanceof t.SQConstantExpr&&r.push({expr:e.right,value:e.left.value}),r}},r})(t.DefaultSQExprVisitor)})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,r=jsCommon.ArrayExtensions;!(function(t){function i(e){var t=new u;return e.accept(t),t.malformed?null:r.emptyToNull(t.keys)}function n(e){var t=new u;return e.accept(t),t.malformed?null:r.emptyToNull(t.values)}function a(t){var i=new u;if(t.accept(i),!i.malformed){var n=r.emptyToNull(i.keys),a=r.emptyToNull(i.values);return n&&a?e.SQExprBuilder.inValues(n,[a]):void 0}}function o(e,t){var r=new s(t);return e.accept(r),r.getResult()}t.getKeys=i,t.getValues=n,t.getInExpr=a,t.getSubset=o;var u=(function(e){function t(){var t=e.apply(this,arguments)||this;return t.keys=[],t.values=[],t}return __extends(t,e),t.prototype.visitAnd=function(e){e.left.accept(this),e.right.accept(this)},t.prototype.visitCompare=function(e){return 0!==e.comparison?void this.visitDefault(e):(e.left.accept(this),void e.right.accept(this))},t.prototype.visitColumnRef=function(e){this.keys.push(e)},t.prototype.visitGroupRef=function(e){this.keys.push(e)},t.prototype.visitHierarchyLevel=function(e){this.keys.push(e)},t.prototype.visitConstant=function(e){this.values.push(e)},t.prototype.visitArithmetic=function(e){this.keys.push(e)},t.prototype.visitDefault=function(e){this.malformed=!0},t})(e.DefaultSQExprVisitor),s=(function(t){function r(e){var r=t.call(this)||this;return r.identityFieldExprs=e,r.identityComparisonExprs=[],r.identityComparisonExprCount=0,r}return __extends(r,t),r.prototype.getResult=function(){if(!this.malformed&&this.identityComparisonExprCount===this.identityFieldExprs.length){for(var t,r=0,i=this.identityComparisonExprs;r<i.length;r++){var n=i[r];t=t?e.SQExprBuilder.and(t,n):n}return t}},r.prototype.visitAnd=function(e){e.left.accept(this),e.right.accept(this)},r.prototype.visitCompare=function(t){if(0!==t.comparison)return void this.visitDefault(t);var r=_.findIndex(this.identityFieldExprs,(function(r){return e.SQExpr.equals(t.left,r)}));r>=0&&!this.identityComparisonExprs[r]&&(this.identityComparisonExprs[r]=t,this.identityComparisonExprCount++)},r.prototype.visitDefault=function(e){this.malformed=!0},r})(e.DefaultSQExprVisitor)})(t=e.ScopeIdentityExtractor||(e.ScopeIdentityExtractor={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function n(t,r){if(t){if(t instanceof e.SemanticFilter){var i=t.conditions();return o(t.from(),i[0])}return o(r,t.condition)}}function a(t){var r=u(t),i=new e.SQFromSubquerySource(r),n=new e.SQFrom,a=n.ensureSource(i,"subquery"),o=e.SQExprBuilder.inTable([t.fieldBeingFiltered],e.SQExprBuilder.subqueryRef(a.name));return e.SemanticFilter.fromSQFromAndSQExpr(n,o)}function o(t,n){var a=new i;if(a.visitCondition(n)){var o=t.sources(),u=o&&o[a.subqueryName];if(u&&e.isSQFromSubquerySource(u)){var s=u.subquery.orderBy();if(!s||1!==s.length)return;var c=s[0],l=r.run(c);if(!l)return;return{fieldBeingFiltered:a.fieldBeingFiltered,isTop:2===c.direction,itemCount:u.subquery.top(),orderByField:l}}}}function u(t){var r=new e.SQFrom,i=e.SQExprRewriterWithSourceRenames.rewrite(t.fieldBeingFiltered,null,r),n=e.SQExprRewriterWithSourceRenames.rewrite(t.orderByField,null,r),a=t.isTop?2:1,o=e.SemanticQuery.createWith({from:r,orderBy:[{expr:n,direction:a}],select:[{name:"field",expr:i}],top:t.itemCount});return o}t.extractParametersFromFilter=n,t.buildFilterFromParameters=a,t.extractParametersFromCondition=o})(t=e.TopNFilterPattern||(e.TopNFilterPattern={}));var r,i=(function(e){function t(){var t=e.call(this)||this;return t.fieldBeingFiltered=null,t.subqueryName=null,t}return __extends(t,e),t.prototype.visitCondition=function(e){return e.accept(this,0)},t.prototype.visitIn=function(e,t){return 0===t&&(!(!e.args||1!==e.args.length||!e.args[0].accept(this,1))&&!(!e.table||!e.table.accept(this,2)))},t.prototype.visitColumnRef=function(e,t){return 1===t&&(this.fieldBeingFiltered=e,!0)},t.prototype.visitHierarchyLevel=function(e,t){return 1===t&&(this.fieldBeingFiltered=e,!0)},t.prototype.visitSubqueryRef=function(e,t){return 2===t&&(this.subqueryName=e.variable,!0)},t})(e.DefaultSQExprVisitorWithArg);!(function(t){function r(e){var t=new i;if(t.visitOrderBy(e.expr))return t.orderByField}t.run=r;var i=(function(e){function t(){var t=e.call(this)||this;return t.orderByField=null,t}return __extends(t,e),t.prototype.visitOrderBy=function(e){return e.accept(this,0)},t.prototype.visitAggr=function(e,t){return 0===t&&(this.orderByField=e,!0)},t.prototype.visitMeasureRef=function(e,t){return 0===t&&(this.orderByField=e,!0)},t})(e.DefaultSQExprVisitorWithArg)})(r||(r={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function i(t,i){if(!i||!t)return t;var n=i.conditions();if(!n||1!==n.length)return t;var a=new r;if(!a.visitCondition(n[0]))return t;for(var o,u=a.fieldsBeingFiltered,s=t.from(),c=t.where(),l=function(t,r){var i=c[t],n=e.TopNFilterPattern.extractParametersFromFilter(i,s);n&&_.find(u,(function(t){return e.SQExpr.equals(n.fieldBeingFiltered,t)}))?o||(o=_.take(c,t)):o&&o.push(i)},p=0,f=c.length;p<f;p++)l(p,f);return o?e.SemanticFilter.fromSQFromAndSQFilters(s,o):t}t.removeUnnecessaryTopNFilters=i})(t=e.TopNFilterPruner||(e.TopNFilterPruner={}));var r=(function(e){function t(){var t=e.call(this)||this;return t.fieldsBeingFiltered=[],t}return __extends(t,e),t.prototype.visitCondition=function(e){return e.accept(this,0)},t.prototype.visitIn=function(e,t){if(0!==t)return!1;if(!e.args)return!1;for(var r=0,i=e.args;r<i.length;r++){var n=i[r];if(!n.accept(this,1))return!1}return!!e.values&&!e.table},t.prototype.visitColumnRef=function(e,t){return 1===t&&(this.fieldsBeingFiltered.push(e),!0)},t})(e.DefaultSQExprVisitorWithArg)})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function i(t){var i=_.filter(t.where(),(function(t){return 0===e.FilterKindDetector.run(t.condition)}));if(_.isEmpty(i))return t;var n=t.from(),a=r.ensureFiltersInSubqueries(n,i,n);return n===a?t:e.SemanticFilter.fromSQFromAndSQFilters(a,t.where())}function n(t,i){for(var n=t.from(),a=n,o=0,u=i;o<u.length;o++){var s=u[o];a=r.ensureFiltersInSubqueries(a,s.where(),s.from())}return n===a?t:e.SemanticFilter.fromSQFromAndSQFilters(a,t.where())}function a(t,i){var n=_.filter(_.map(i.select(),(function(e){return e.expr})),(function(t){return!e.SQExprUtils.isMeasure(t)}));if(_.isEmpty(n))return t;var a=_.map(n,(function(t){return{condition:e.SQExprBuilder.equal(t,e.SQExprBuilder.anyValue(!0))}})),o=t.from(),u=r.ensureFiltersInSubqueries(o,a,o);return o===u?t:e.SemanticFilter.fromSQFromAndSQFilters(u,t.where())}t.makeSubqueriesLowerPrecedenceThanColumnFilters=i,t.makeSubqueriesLowerPrecedenceThanSpecificFilters=n,t.rewriteSubqueriesForContainingQuery=a})(t=e.SubqueryRewriter||(e.SubqueryRewriter={}));var r=(function(){function t(e,t){this.filtersToEnsure=e,this.filtersToEnsureFrom=t,this.modifiedSubquery=!1}return t.ensureFiltersInSubqueries=function(r,i,n){var a=new t(i,n),o=e.SemanticQueryRewriter.rewriteFrom(r,a);return o},t.prototype.visitEntity=function(e,t){return e},t.prototype.visitSubquery=function(t,r){for(var i=t.subquery.where(),n=[],a=function(t){_.find(i,(function(r){return e.SQFilter.equals(t,r)}))||n.push(t)},o=0,u=this.filtersToEnsure;o<u.length;o++){var s=u[o];a(s)}return 0===n.length?t:(this.modifiedSubquery=!0,new e.SQFromSubquerySource(t.subquery.addWhere(n,this.filtersToEnsureFrom)))},t.prototype.visitExpr=function(e,t){return e},t})()})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(e){function t(e){return e+"M"}function r(e){return e+"D"}function i(e){return e+"L"}function n(e){var t=new Date(e.getTime()-6e4*e.getTimezoneOffset()),r=t.toISOString();return _.endsWith(r,"Z")&&(r=r.substr(0,r.length-1)),"datetime'"+r+"'"}function a(e){return"'"+e.replace(s,"''")+"'"}function o(){return"null"}function u(e){return e?"true":"false"}var s=/'/g;e.decimal=t,e.double=r,e.integer=i,e.dateTime=n,e.text=a,e.nullEncoding=o,e.boolean=u})(t=e.PrimitiveValueEncoding||(e.PrimitiveValueEncoding={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(){return new o}function i(e,r){var i=t.SQExprBuilder.removeAggregate(e).getMetadata(r);return i||(i=e.getMetadata(r)),i}function n(e,r){var i=t.SQExprConverter.asFieldPattern(e),n=t.FieldExprPattern.toFieldExprEntityItemPattern(i),a=r.schema(n.schema);return a.capabilities}function a(e){switch(e){case 6:return 1;case 3:return 5;case 7:return 2;case 5:return 4;case 4:return 3;case 2:return 0}}t.createSQAggregationOperations=r;var o=(function(){function r(){}return r.prototype.getSupportedAggregates=function(r,a,o){var u=i(r,a);if(!u)return[];var s=u.type,c=u.kind,l=u.idOnEntityKey;if(!s)return[];if(1===c)return[];if(s.numeric||s.integer){var p=[0,1,3,4,2,5,7,8];return n(r,a).supportsMedian&&p.push(6),p}var f=[];(s.dateTime||s.text&&n(r,a).supportsStringMinMax)&&(_.isEmpty(o)||e.ValueType.isCompatibleTo(s,o))&&(f.push(3),f.push(4));var v=2===t.SQExprInfo.getAggregate(r);return l&&!v||f.push(2),f.push(5),f},r.prototype.isSupportedAggregate=function(e,t,r,i){var n=this.getSupportedAggregates(e,t,i);return _.contains(n,r)},r.prototype.createExprWithAggregate=function(e,r,i,n,a){var o;return o=null!=a&&this.isSupportedAggregate(e,r,a,n)?a:this.defaultAggregate(e,r,i,n),void 0!==o&&(e=t.SQExprBuilder.aggregate(e,o)),e},r.prototype.defaultAggregate=function(t,r,i,o){void 0===i&&(i=!1);var u=t.getConceptualProperty(r,!0);if(u){var s;if(u&&0===u.kind){var c=u.column?u.column.defaultAggregate:null,l=u.type;if((l.integer||l.numeric)&&1!==c)s=a(c),void 0===s&&(s=0);else if(i&&(l.dateTime||l.text&&n(t,r).supportsStringMinMax)&&(_.isEmpty(o)||e.ValueType.isCompatibleTo(l,o)))return 3;void 0===s&&i&&(s=5)}return s}},r})();t.defaultAggregateToQueryAggregateFunction=a})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function a(e,r){var i=m(r);if(i)return t.getConceptualHierarchyLevel(e,i.schema,i.entity,i.name,i.level)}function o(e,t,r,i,n){var a=e.schema(t),o=a.findHierarchy(r,i);if(o)return o.levels.withName(n)}function u(t,r){if(t instanceof e.SQHierarchyExpr){var i=t;if(t.arg instanceof e.SQEntityExpr){var n=t.arg;return r.schema(n.schema).findHierarchy(n.entity,i.hierarchy)}if(t.arg instanceof e.SQPropertyVariationSourceExpr){var a=t.arg,o=a.arg;return r.schema(o.schema).findHierarchyByVariation(o.entity,a.property,a.name,i.hierarchy)}}}function s(e,t,a){return r.convert(t,e)||n.expand(t,e)||!a&&i.expand(t,e)||t}function c(t,r){if(r instanceof e.SQHierarchyExpr||r instanceof e.SQHierarchyLevelExpr)return!0;var i=r.getConceptualProperty(t);if(i){var n=i.column;if(n&&n.variations&&n.variations.length>0)return!0}return!1}function l(t){var r=e.SQExprConverter.asFieldPattern(t);if(r.columnHierarchyLevelVariation){var i=e.SQExprBuilder.entity(r.columnHierarchyLevelVariation.source.schema,r.columnHierarchyLevelVariation.source.entity);return e.SQExprBuilder.columnRef(i,r.columnHierarchyLevelVariation.source.name)}}function p(t){var r=e.SQExprConverter.asFieldPattern(t),i=r.hierarchyLevel;if(i){var n=e.SQExprBuilder.entity(i.schema,i.entity,i.entityVar);return e.SQExprBuilder.hierarchy(n,i.name)}}function f(t){if(t.arg instanceof e.SQHierarchyExpr){var r=t.arg;return r.arg instanceof e.SQPropertyVariationSourceExpr?r.arg:void 0}}function v(t,r,i){if(!(r instanceof e.SQHierarchyLevelExpr&&i instanceof e.SQHierarchyLevelExpr))return!1;var n=r,a=i;if(!e.SQExpr.equals(n.arg,a.arg))return!1;var o=e.SQExprUtils.indexOfExpr(t,n),u=e.SQExprUtils.indexOfExpr(t,a);return o!==-1&&u!==-1&&o<u}function h(e,t,r){for(var i=0;i<t.length&&v(e,t[i],r);)i++;return i}function m(e){return e.hierarchyLevel||e.hierarchyLevelAggr||e.columnHierarchyLevelVariation&&e.columnHierarchyLevelVariation.level}t.getConceptualHierarchyLevelFromExpr=a,t.getConceptualHierarchyLevel=o,t.getConceptualHierarchy=u,t.expandExpr=s,t.isHierarchyOrVariation=c,t.getSourceVariationExpr=l,t.getSourceHierarchy=p,t.getHierarchySourceAsVariationSource=f,t.areHierarchyLevelsOrdered=v,t.getInsertionIndex=h})(t=e.SQHierarchyExprUtils||(e.SQHierarchyExprUtils={}));var r;!(function(r){function i(r,i){if(r instanceof e.SQHierarchyExpr){var n=r,a=t.getConceptualHierarchy(n,i);if(a)return _.map(a.levels,(function(t){return e.SQExprBuilder.hierarchyLevel(r,t.name)}))}}r.convert=i})(r=e.SQExprHierarchyToHierarchyLevelConverter||(e.SQExprHierarchyToHierarchyLevelConverter={}));var i;!(function(t){function r(t,r){var i=[];if(t instanceof e.SQHierarchyLevelExpr){var n=e.SQExprConverter.asFieldPattern(t);if(n.hierarchyLevel){var a=e.FieldExprPattern.toFieldExprEntityItemPattern(n),o=r.schema(a.schema).findHierarchy(a.entity,n.hierarchyLevel.name);if(o)for(var u=o.levels,s=0,c=u;s<c.length;s++){var l=c[s];if(l.name===n.hierarchyLevel.level){i.push(t);break}i.push(e.SQExprBuilder.hierarchyLevel(e.SQExprBuilder.hierarchy(e.SQExprBuilder.entity(a.schema,a.entity,a.entityVar),o.name),l.name))}}}if(!_.isEmpty(i))return i}t.expand=r})(i||(i={}));var n;!(function(t){function r(t,r){var i,n=t.getConceptualProperty(r);if(n){var a=n.column;if(a&&a.variations&&a.variations.length>0){var o=a.variations,u=o[0],s=e.SQExprConverter.asFieldPattern(t),c=e.FieldExprPattern.toFieldExprEntityItemPattern(s);if(i=[],u.defaultHierarchy)for(var l=e.SQExprBuilder.hierarchy(e.SQExprBuilder.propertyVariationSource(e.SQExprBuilder.entity(c.schema,c.entity,c.entityVar),u.name,n.name),u.defaultHierarchy.name),p=0,f=u.defaultHierarchy.levels;p<f.length;p++){var v=f[p];i.push(e.SQExprBuilder.hierarchyLevel(l,v.name))}}}return i}t.expand=r})(n||(n={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function r(t,r){for(var n=[],a=0,o=r.length;a<o;a++){var u=r[a];u instanceof e.SQHierarchyLevelExpr?i(t,n,u,a):n.push({expr:u,children:null,selectQueryIndex:a})}return n}function i(t,r,i,n){var a=!0,o=e.SQHierarchyExprUtils.getSourceVariationExpr(i)||e.SQHierarchyExprUtils.getSourceHierarchy(i),u=_.last(r);if(u&&u.children&&e.SQExpr.equals(u.expr,o)){var s=e.SQHierarchyExprUtils.expandExpr(t,i.arg);if(s instanceof Array){var c=s;a=!e.SQHierarchyExprUtils.areHierarchyLevelsOrdered(c,_.last(u.children),i)}}a?r.push({expr:o,children:[i],selectQueryIndex:n}):u.children.push(i)}t.groupExprs=r})(t=e.SQExprGroupUtils||(e.SQExprGroupUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r=jsCommon.StringExtensions,i=(function(){function r(e){this._kind=e}return r.equals=function(e,t,r,i){return z.run(e,t,r,i)},r.prototype.validate=function(e,t,r){var i=new J(e,t,r);return this.accept(i),i.errors},r.prototype.accept=function(e,t){},Object.defineProperty(r.prototype,"kind",{get:function(){return this._kind},enumerable:!0,configurable:!0}),r.isArithmetic=function(e){return 23===e.kind},r.isFloor=function(e){return 34===e.kind},r.isColumn=function(e){return 2===e.kind},r.isConstant=function(e){return 17===e.kind},r.isEntity=function(e){return 0===e.kind},r.isHierarchy=function(e){return 6===e.kind},r.isHierarchyLevel=function(e){return 7===e.kind},r.isIn=function(e){return 10===e.kind},r.isAggregation=function(e){return 4===e.kind},r.isMinAggregation=function(e){return r.isAggregation(e)&&3===e.func},r.isMaxAggregation=function(e){return r.isAggregation(e)&&4===e.func},r.isAvgAggregation=function(e){return r.isAggregation(e)&&1===e.func},r.isMedianAggregation=function(e){return r.isAggregation(e)&&6===e.func},r.isMeasure=function(e){return 3===e.kind},r.isPercentile=function(e){return 28===e.kind},r.isPropertyVariationSource=function(e){return 5===e.kind},r.isSelectRef=function(e){return 29===e.kind},r.isScopedEval=function(e){return 26===e.kind},r.isSubqueryRef=function(e){return 1===e.kind},r.isWithRef=function(e){return 27===e.kind},r.isTransformTableRef=function(e){return 30===e.kind},r.isTransformOutputRoleRef=function(e){return 31===e.kind},r.isResourcePackageItem=function(e){return 25===e.kind},r.isCompareRef=function(e){return 13===e.kind},r.isGroupRef=function(e){return 33===e.kind},r.isRoleRef=function(e){return 35===e.kind},r.isNamedQueryRef=function(e){return 37===e.kind},r.isBetween=function(e){return 9===e.kind},r.isAnd=function(e){return 8===e.kind},r.isOr=function(e){return 11===e.kind},r.isCompare=function(e){return 13===e.kind},r.isContains=function(e){return 12===e.kind},r.isDateSpan=function(e){return 18===e.kind},r.isDateAdd=function(e){return 19===e.kind},r.isExists=function(e){return 15===e.kind},r.isNot=function(e){return 16===e.kind},r.isNow=function(e){return 20===e.kind},r.isDefaultValue=function(e){return 22===e.kind},r.isAnyValue=function(e){return 21===e.kind},r.isStartsWith=function(e){return 14===e.kind},r.isFillRule=function(e){return 24===e.kind},r.isThemeColor=function(e){return 32===e.kind},r.isDiscretize=function(e){return 36===e.kind},r.isMember=function(e){return 38===e.kind},r.prototype.getMetadata=function(e){var i=t.SQExprConverter.asFieldPattern(this);if(i)return i.column||i.columnAggr||i.groupingColumn||i.groupingColumnAggr||i.measure?this.getMetadataForProperty(i,e):i.hierarchyLevel||i.hierarchyLevelAggr?this.getMetadataForHierarchyLevel(i,e):i.columnHierarchyLevelVariation?this.getMetadataForVariation(i,e):r.getMetadataForEntity(i,e)},r.prototype.getKeyColumns=function(e){var t=$.getColumnRefSQExpr(e,this);if(t){var r=[],i=this.getPropertyKeys(e);if(i&&i.length>0)for(var n=0,a=i.length;n<a;n++)r.push(G.columnRef(t.source,i[n].name));else r.push(t);return r}},r.prototype.hasGroupOnKeys=function(e){var t=this.getTargetColumnRef(e);if(t){var i=this.getPropertyKeys(e);if(!i||i.length<1)return!1;if(i.length>1)return!0;var n=G.columnRef(t.source,i[0].name);return!r.equals(n,this)}},r.prototype.getPropertyKeys=function(e){var t=this.getConceptualProperty(e,!0);if(t)return t.column?t.column.keys:void 0},r.prototype.getOrderByColumns=function(e){var t=this.getTargetColumnRef(e);if(t){var r=t.getConceptualProperty(e,!0),i=r&&r.column&&r.column.orderBy;if(_.isEmpty(i))return[];for(var n=new Array(i.length),a=0,o=i.length;a<o;a++)n[a]=G.columnRef(t.source,i[a].name);return n}},r.prototype.getConceptualProperty=function(e,r){var i=t.SQExprConverter.asFieldPattern(this);if(i){var n=t.FieldExprPattern.toFieldExprEntityItemPattern(i),a=t.FieldExprPattern.getPropertyName(i);if(a)return e.schema(n.schema).findProperty(n.entity,a);if(r){var o=i.hierarchyLevel||i.hierarchyLevelAggr;if(o){var u=t.FieldExprPattern.toFieldExprEntityItemPattern(i),s=e.schema(u.schema).findHierarchy(u.entity,o.name);if(s){var c=s.levels.withName(o.level);if(c)return c.column}}}}},r.prototype.getTargetEntityForVariation=function(e,t){var r=this.getConceptualProperty(e);if(r&&r.column&&!_.isEmpty(r.column.variations))for(var i=r.column.variations,n=0,a=i;n<a.length;n++){var o=a[n];if(o.name===t)return o.navigationProperty.targetEntity.name}},r.prototype.getTargetEntity=function(){return X.getEntityExpr(this)},r.prototype.getTargetColumnRef=function(e){return $.getColumnRefSQExpr(e,this)},r.prototype.getMetadataForVariation=function(e,r){var i=e.columnHierarchyLevelVariation,n=t.FieldExprPattern.toFieldExprEntityItemPattern(e),a=r.schema(n.schema).findProperty(n.entity,i.source.name);if(a&&a.column&&a.column.variations)for(var o=0,u=a.column.variations;o<u.length;o++){var s=u[o];if(s.defaultHierarchy&&s.defaultHierarchy.levels)for(var c=0,l=s.defaultHierarchy.levels;c<l.length;c++){
var p=l[c];if(p.name===i.level.level){var f=p.column;return{kind:1===f.kind?1:0,type:f.type,format:f.format,idOnEntityKey:!!f.column&&f.column.idOnEntityKey,defaultAggregate:f.column?f.column.defaultAggregate:null}}}}},r.prototype.getMetadataForHierarchyLevel=function(e,t){var r=this.getConceptualProperty(t,!0);if(r)return this.getPropertyMetadata(e,r)},r.prototype.getPropertyMetadata=function(t,r){var i=r.format,n=r.type,a=t.columnAggr||t.groupingColumnAggr||t.hierarchyLevelAggr;if(a)switch(a.aggregate){case 2:case 5:n=e.ValueType.fromExtendedType(260),i=void 0;break;case 1:case 7:case 8:n.integer&&(n=e.ValueType.fromExtendedType(259),i=e.NumberFormat.getFormatForWholeNumberAverage(i))}return{kind:1===r.kind||a&&void 0!==a.aggregate?1:0,type:n,format:i,idOnEntityKey:!!r.column&&r.column.idOnEntityKey,aggregate:a?a.aggregate:void 0,defaultAggregate:r.column?r.column.defaultAggregate:null}},r.prototype.getMetadataForProperty=function(e,t){var r=this.getConceptualProperty(t);if(r)return this.getPropertyMetadata(e,r)},r.getMetadataForEntity=function(r,i){var n=t.FieldExprPattern.toFieldExprEntityItemPattern(r),a=i.schema(n.schema).entities.withName(n.entity);if(a&&r.entityAggr)switch(r.entityAggr.aggregate){case 2:case 5:return{kind:1,type:e.ValueType.fromExtendedType(260),format:void 0,idOnEntityKey:!1,aggregate:r.entityAggr.aggregate}}},r})();t.SQExpr=i;var n=(function(e){function t(t,r,i){var n;return n=e.call(this,0)||this,n.schema=t,n.entity=r,i&&(n.variable=i),n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitEntity(this,t)},t.prototype.as=function(e){return new t(this.schema,this.entity,e)},t})(i);t.SQEntityExpr=n;var a=(function(e){function t(t){var r;return r=e.call(this,1)||this,r.variable=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitSubqueryRef(this,t)},t.prototype.as=function(e){return new t(e)},t})(i);t.SQSubqueryRefExpr=a;var o=(function(e){function t(t,r){var i;return i=e.call(this,37)||this,i.queryName=t,r&&(i.variable=r),i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitNamedQueryRef(this,t)},t.prototype.as=function(e){return new t(this.queryName,e)},t})(i);t.SQNamedQueryRefExpr=o;var u=(function(t){function r(e,r,i){var n;return n=t.call(this,23)||this,n.left=e,n.right=r,n.operator=i,n}return __extends(r,t),r.prototype.accept=function(e,t){return e.visitArithmetic(this,t)},r.prototype.getMetadata=function(t){var r=this.left.getMetadata(t);return r&&3===this.operator&&(r.format="#,##0.00%",r.type=e.ValueType.fromExtendedType(259)),r},r})(i);t.SQArithmeticExpr=u;var s=(function(e){function t(t,r,i){var n;return n=e.call(this,34)||this,n.arg=t,n.size=r,null!=i&&(n.timeUnit=i),n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitFloor(this,t)},t})(i);t.SQFloorExpr=s;var c=(function(e){function t(t,r){var i;return i=e.call(this,26)||this,i.expression=t,i.scope=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitScopedEval(this,t)},t.prototype.getMetadata=function(e){return this.expression.getMetadata(e)},t})(i);t.SQScopedEvalExpr=c;var l=(function(e){function t(t){var r;return r=e.call(this,27)||this,r.expressionName=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitWithRef(this,t)},t})(i);t.SQWithRefExpr=l;var p=(function(e){function t(t,r,i){var n;return n=e.call(this,t)||this,n.source=r,n.ref=i,n}return __extends(t,e),t})(i);t.SQPropRefExpr=p;var f=(function(e){function t(t,r,i){return e.call(this,i||2,t,r)||this}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitColumnRef(this,t)},t})(p);t.SQColumnRefExpr=f;var v=(function(e){function t(t,r){return e.call(this,3,t,r)||this}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitMeasureRef(this,t)},t})(p);t.SQMeasureRefExpr=v;var h=(function(e){function t(t,r){var i;return i=e.call(this,4)||this,i.arg=t,i.func=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitAggr(this,t)},t})(i);t.SQAggregationExpr=h;var m=(function(e){function t(t,r,i){var n;return n=e.call(this,28)||this,n.arg=t,n.k=r,n.exclusive=i,n}return __extends(t,e),t.prototype.getMetadata=function(e){var t=this.arg.getMetadata(e);if(t)return{kind:1,type:t.type}},t.prototype.accept=function(e,t){return e.visitPercentile(this,t)},t})(i);t.SQPercentileExpr=m;var y=(function(e){function t(t,r,i){var n;return n=e.call(this,5)||this,n.arg=t,n.name=r,n.property=i,n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitPropertyVariationSource(this,t)},t})(i);t.SQPropertyVariationSourceExpr=y;var d=(function(e){function t(t,r,i){var n;return n=e.call(this,r,t,33)||this,n.groupedExprs=i,n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitGroupRef(this,t)},t})(f);t.SQGroupRefExpr=d;var g=(function(e){function t(t,r){var i;return i=e.call(this,6)||this,i.arg=t,i.hierarchy=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitHierarchy(this,t)},t})(i);t.SQHierarchyExpr=g;var x=(function(e){function t(t,r){var i;return i=e.call(this,7)||this,i.arg=t,i.level=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitHierarchyLevel(this,t)},t})(i);t.SQHierarchyLevelExpr=x;var S=(function(e){function t(t){var r;return r=e.call(this,29)||this,r.expressionName=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitSelectRef(this,t)},t})(i);t.SQSelectRefExpr=S;var b=(function(e){function t(t,r){var i;return i=e.call(this,8)||this,i.left=t,i.right=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitAnd(this,t)},t})(i);t.SQAndExpr=b;var w=(function(e){function t(t,r,i){var n;return n=e.call(this,9)||this,n.arg=t,n.lower=r,n.upper=i,n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitBetween(this,t)},t})(i);t.SQBetweenExpr=w;var E=(function(e){function t(t,r,i){var n;return n=e.call(this,10)||this,n.args=t,r&&(n.values=r),i&&(n.table=i),n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitIn(this,t)},t})(i);t.SQInExpr=E;var D=(function(e){function t(t,r){var i;return i=e.call(this,11)||this,i.left=t,i.right=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitOr(this,t)},t})(i);t.SQOrExpr=D;var C=(function(e){function t(t,r,i){var n;return n=e.call(this,13)||this,n.comparison=t,n.left=r,n.right=i,n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitCompare(this,t)},t})(i);t.SQCompareExpr=C;var R=(function(e){function t(t,r){var i;return i=e.call(this,12)||this,i.left=t,i.right=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitContains(this,t)},t})(i);t.SQContainsExpr=R;var T=(function(e){function t(t,r){var i;return i=e.call(this,14)||this,i.left=t,i.right=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitStartsWith(this,t)},t})(i);t.SQStartsWithExpr=T;var V=(function(e){function t(t){var r;return r=e.call(this,15)||this,r.arg=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitExists(this,t)},t})(i);t.SQExistsExpr=V;var F=(function(e){function t(t){var r;return r=e.call(this,16)||this,r.arg=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitNot(this,t)},t})(i);t.SQNotExpr=F;var P=(function(e){function t(t,r,i){var n;return n=e.call(this,17)||this,n.type=t,n.value=r,n.valueEncoded=i,n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitConstant(this,t)},t.prototype.getMetadata=function(){return{kind:1,type:this.type}},t})(i);t.SQConstantExpr=P;var M=(function(e){function t(t,r){var i;return i=e.call(this,18)||this,i.unit=t,i.arg=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitDateSpan(this,t)},t})(i);t.SQDateSpanExpr=M;var A=(function(e){function t(t,r,i){var n;return n=e.call(this,19)||this,n.unit=t,n.arg=i,n.amount=r,n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitDateAdd(this,t)},t.prototype.getMetadata=function(e){return this.arg.getMetadata(e)},t})(i);t.SQDateAddExpr=A;var N=(function(t){function r(){return t.call(this,20)||this}return __extends(r,t),r.prototype.accept=function(e,t){return e.visitNow(this,t)},r.prototype.getMetadata=function(){return{kind:1,type:e.ValueType.fromExtendedType(519)}},r})(i);t.SQNowExpr=N;var Q=(function(e){function t(){return e.call(this,22)||this}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitDefaultValue(this,t)},t})(i);t.SQDefaultValueExpr=Q;var O=(function(e){function t(t){var r;return r=e.call(this,21)||this,r.defaultValueOverridesAncestors=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitAnyValue(this,t)},t})(i);t.SQAnyValueExpr=O;var q=(function(e){function t(t,r){var i;return i=e.call(this,24)||this,i.input=t,i.rule=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitFillRule(this,t)},t})(i);t.SQFillRuleExpr=q;var I=(function(e){function t(t,r){var i;return i=e.call(this,32)||this,i.color=t,i.percent=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitThemeColor(this,t)},t})(i);t.SQThemeColorExpr=I;var U=(function(e){function t(t,r,i){var n;return n=e.call(this,25)||this,n.packageName=t,n.packageType=r,n.itemName=i,n}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitResourcePackageItem(this,t)},t})(i);t.SQResourcePackageItemExpr=U;var j=(function(e){function t(t){var r;return r=e.call(this,30)||this,r.source=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitTransformTableRef(this,t)},t})(i);t.SQTransformTableRefExpr=j;var B=(function(e){function t(t,r){var i;return i=e.call(this,31)||this,i.role=t,r&&(i.transform=r),i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitTransformOutputRoleRef(this,t)},t.prototype.getMetadata=function(e){},t})(i);t.SQTransformOutputRoleRefExpr=B;var k=(function(e){function t(t){var r;return r=e.call(this,35)||this,r.role=t,r}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitRoleRef(this,t)},t})(i);t.SQRoleRefExpr=k;var L=(function(e){function t(t,r){var i;return i=e.call(this,36)||this,i.source=t,i.count=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitDiscretize(this,t)},t})(i);t.SQDiscretizeExpr=L;var H=(function(e){function t(t,r){var i;return i=e.call(this,38)||this,i.source=t,i.member=r,i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitMember(this,t)},t})(i);t.SQMemberExpr=H;var G;!(function(r){function p(e,t,r){return new n(e,t,r)}function G(e){return new a(e)}function W(e,t){return new o(e,t)}function z(e,t){return new f(e,t)}function K(e,t){return new v(e,t)}function Y(e,t){return new h(e,t)}function J(e){return new S(e)}function Z(e,t,r){return new m(e,t,r)}function $(e,t,r){return new u(e,t,r)}function X(e,t,r){return new s(e,t,r)}function ee(e,t){return new c(e,t)}function ie(e){return new l(e)}function ce(e,t,r){return new d(e,t,r)}function le(e,t){return new g(e,t)}function pe(e,t,r){return new y(e,t,r)}function fe(e,t){return new x(e,t)}function ve(e){return new j(e)}function he(e,t){return new B(e,t)}function me(e){return new k(e)}function ye(e,t){return e?t?new b(e,t):e:t}function de(e,t,r){return new w(e,t,r)}function ge(e,t){return new E(e,t,null)}function xe(e,t){return new E(e,null,t)}function Se(e,t){if(!e)return t;if(!t)return e;if(i.isIn(e)&&i.isIn(t)){var r=be(e,t);if(r)return r}return new D(e,t)}function be(e,t){if(e.args&&t.args&&e.values&&t.values){var n=e.args.length,a=t.args.length;if(n===a){for(var o=0;o<n;++o)if(!i.equals(e.args[o],t.args[o]))return;var u=e.values.concat(t.values);return r.inValues(e.args,u)}}}function we(e,t,r){return new C(e,t,r)}function Ee(e,t){return new R(e,t)}function De(e){return new V(e)}function Ce(e,t){return we(0,e,t)}function _e(e){return new F(e)}function Re(e,t){return new T(e,t)}function Te(){return new P(e.ValueType.fromExtendedType(0),null,t.PrimitiveValueEncoding.nullEncoding())}function Ve(){return new N}function Fe(){return new Q}function Pe(e){return new O(e)}function Me(r){return new P(e.ValueType.fromExtendedType(5),r,t.PrimitiveValueEncoding.boolean(r))}function Ae(e,t,r){return new A(e,t,r)}function Ne(r,i){return void 0===i&&(i=t.PrimitiveValueEncoding.dateTime(r)),new P(e.ValueType.fromExtendedType(519),r,i)}function Qe(e,t){return new M(e,t)}function Oe(r,i){return void 0===i&&(i=t.PrimitiveValueEncoding.decimal(r)),new P(e.ValueType.fromExtendedType(258),r,i)}function qe(r,i){return void 0===i&&(i=t.PrimitiveValueEncoding.double(r)),new P(e.ValueType.fromExtendedType(259),r,i)}function Ie(r,i){return void 0===i&&(i=t.PrimitiveValueEncoding.integer(r)),new P(e.ValueType.fromExtendedType(260),r,i)}function Ue(r,i){return new P(e.ValueType.fromExtendedType(1),r,i||t.PrimitiveValueEncoding.text(r))}function je(t,r){return null==t?Te():_.isBoolean(t)?Me(t):_.isString(t)?Ue(t):_.isNumber(t)?r.integer&&e.Double.isInteger(t)?Ie(t):qe(t):t instanceof Date?Ne(t):void 0}function Be(e,t){return te.rewrite(e,t)}function ke(e){return re.rewrite(e)}function Le(e){return oe.rewrite(e)}function He(e){return ae.rewrite(e)}function Ge(e,t){return se.rewrite(e,t)}function We(e){return ue.rewrite(e)}function ze(e){return ne.rewrite(e)}function Ke(e,t){return new q(e,t)}function Ye(e,t){return new I(e,t)}function Je(e,t,r){return new U(e,t,r)}function Ze(e,t){return new L(e,t)}function $e(e,t){return new H(e,t)}r.entity=p,r.subqueryRef=G,r.namedQueryRef=W,r.columnRef=z,r.measureRef=K,r.aggregate=Y,r.selectRef=J,r.percentile=Z,r.arithmetic=$,r.floor=X,r.scopedEval=ee,r.withRef=ie,r.groupRef=ce,r.hierarchy=le,r.propertyVariationSource=pe,r.hierarchyLevel=fe,r.transformTableRef=ve,r.transformOutputRoleRef=he,r.roleRef=me,r.and=ye,r.between=de,r.inValues=ge,r.inTable=xe,r.or=Se,r.compare=we,r.contains=Ee,r.exists=De,r.equal=Ce,r.not=_e,r.startsWith=Re,r.nullConstant=Te,r.now=Ve,r.defaultValue=Fe,r.anyValue=Pe,r.boolean=Me,r.dateAdd=Ae,r.dateTime=Ne,r.dateSpan=Qe,r.decimal=Oe,r.double=qe,r.integer=Ie,r.text=Ue,r.typedConstant=je,r.setAggregate=Be,r.removeAggregate=ke,r.setPercentOfGrandTotal=Le,r.removePercentOfGrandTotal=He,r.setPercentOfRoleTotal=Ge,r.removePercentOfRoleTotal=We,r.removeEntityVariables=ze,r.fillRule=Ke,r.themeColor=Ye,r.resourcePackageItem=Je,r.discretize=Ze,r.member=$e})(G=t.SQExprBuilder||(t.SQExprBuilder={}));var W;!(function(e){function t(e){return Z.getAggregate(e)}e.getAggregate=t})(W=t.SQExprInfo||(t.SQExprInfo={}));var z=(function(){function e(e,t){this.ignoreCase=e,this.ignoreVariables=t}return e.run=function(t,r,i,n){return t=t||null,r=r||null,t===r||!t==!r&&(n?i?t.accept(e.ignoreVariablesAndCaseInstance,r):t.accept(e.ignoreVariablesInstance,r):i?t.accept(e.ignoreCaseInstance,r):t.accept(e.instance,r))},e.prototype.visitColumnRef=function(e,t){if(i.isColumn(t)||i.isGroupRef(t))return e.ref===t.ref&&this.equals(e.source,t.source)},e.prototype.visitMeasureRef=function(e,t){return i.isMeasure(t)&&e.ref===t.ref&&this.equals(e.source,t.source)},e.prototype.visitAggr=function(e,t){return i.isAggregation(t)&&e.func===t.func&&this.equals(e.arg,t.arg)},e.prototype.visitPercentile=function(e,t){return i.isPercentile(t)&&e.exclusive===t.exclusive&&e.k===t.k&&this.equals(e.arg,t.arg)},e.prototype.visitGroupRef=function(e,t){var r=!1;return(i.isGroupRef(t)||i.isColumn(t))&&(r=e.ref===t.ref&&this.equals(e.source,t.source)),i.isGroupRef(t)&&(r=r&&this.equalsAll(e.groupedExprs,t.groupedExprs)),r},e.prototype.visitHierarchy=function(e,t){return i.isHierarchy(t)&&e.hierarchy===t.hierarchy&&this.equals(e.arg,t.arg)},e.prototype.visitHierarchyLevel=function(e,t){return i.isHierarchyLevel(t)&&e.level===t.level&&this.equals(e.arg,t.arg)},e.prototype.visitPropertyVariationSource=function(e,t){return i.isPropertyVariationSource(t)&&e.name===t.name&&e.property===t.property&&this.equals(e.arg,t.arg)},e.prototype.visitSelectRef=function(e,t){return i.isSelectRef(t)&&e.expressionName===t.expressionName},e.prototype.visitBetween=function(e,t){return i.isBetween(t)&&this.equals(e.arg,t.arg)&&this.equals(e.lower,t.lower)&&this.equals(e.upper,t.upper)},e.prototype.visitIn=function(e,t){if(!i.isIn(t)||!this.equalsAll(e.args,t.args))return!1;var r=t,n=e.values;if(n){var a=r.values;if(!a)return!1;if(n.length!==a.length)return!1;for(var o=0,u=n.length;o<u;o++)if(!this.equalsAll(n[o],a[o]))return!1}else{if(!r.table)return!1;if(!this.equals(e.table,r.table))return!1}return!0},e.prototype.visitEntity=function(e,t){return i.isEntity(t)&&e.schema===t.schema&&e.entity===t.entity&&(this.ignoreVariables||this.optionalEqual(e.variable,t.variable))},e.prototype.visitSubqueryRef=function(e,t){return i.isSubqueryRef(t)&&e.variable===t.variable},e.prototype.visitNamedQueryRef=function(e,t){return i.isNamedQueryRef(t)&&e.queryName===t.queryName&&(this.ignoreVariables||this.optionalEqual(e.variable,t.variable))},e.prototype.visitAnd=function(e,t){return i.isAnd(t)&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitOr=function(e,t){return i.isOr(t)&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitCompare=function(e,t){return i.isCompare(t)&&e.comparison===t.comparison&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitContains=function(e,t){return i.isContains(t)&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitDateSpan=function(e,t){return i.isDateSpan(t)&&e.unit===t.unit&&this.equals(e.arg,t.arg)},e.prototype.visitDateAdd=function(e,t){return i.isDateAdd(t)&&e.unit===t.unit&&e.amount===t.amount&&this.equals(e.arg,t.arg)},e.prototype.visitExists=function(e,t){return i.isExists(t)&&this.equals(e.arg,t.arg)},e.prototype.visitNot=function(e,t){return i.isNot(t)&&this.equals(e.arg,t.arg)},e.prototype.visitNow=function(e,t){return i.isNow(t)},e.prototype.visitDefaultValue=function(e,t){return i.isDefaultValue(t)},e.prototype.visitAnyValue=function(e,t){return i.isAnyValue(t)},e.prototype.visitResourcePackageItem=function(e,t){return i.isResourcePackageItem(t)&&e.packageName===t.packageName&&e.packageType===t.packageType&&e.itemName===t.itemName},e.prototype.visitStartsWith=function(e,t){return i.isStartsWith(t)&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitConstant=function(e,t){return!(!i.isConstant(t)||e.type!==t.type)&&(e.type.text&&this.ignoreCase?r.equalIgnoreCase(e.valueEncoded,t.valueEncoded):e.valueEncoded===t.valueEncoded)},e.prototype.visitFillRule=function(e,t){if(i.isFillRule(t)&&this.equals(e.input,t.input)){var r=e.rule,n=t.rule;if(r===n)return!0;var a=r.linearGradient2,o=n.linearGradient2;if(a&&o)return this.visitLinearGradient2(a,o);var u=r.linearGradient3,s=n.linearGradient3;if(u&&s)return this.visitLinearGradient3(u,s)}return!1},e.prototype.visitLinearGradient2=function(e,t){var r=this;return this.equalsFillRuleStop(e.min,t.min)&&this.equalsFillRuleStop(e.max,t.max)&&this.equalsNullableObject(e.nullColoringStrategy,t.nullColoringStrategy,(function(e,t){return r.equalsNullStrategy(e,t)}))},e.prototype.visitLinearGradient3=function(e,t){var r=this;return this.equalsFillRuleStop(e.min,t.min)&&this.equalsFillRuleStop(e.mid,t.mid)&&this.equalsFillRuleStop(e.max,t.max)&&this.equalsNullableObject(e.nullColoringStrategy,t.nullColoringStrategy,(function(e,t){return r.equalsNullStrategy(e,t)}))},e.prototype.visitThemeColor=function(e,t){return i.isThemeColor(t)&&e.color===t.color&&e.percent===t.percent},e.prototype.equalsFillRuleStop=function(e,t){return this.equals(e.color,t.color)&&this.equalsNullable(e.value,t.value)},e.prototype.equalsNullStrategy=function(e,t){return this.equals(e.strategy,t.strategy)&&this.equalsNullable(e.color,t.color)},e.prototype.visitArithmetic=function(e,t){return i.isArithmetic(t)&&e.operator===t.operator&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitFloor=function(e,t){return i.isFloor(t)&&e.timeUnit===t.timeUnit&&e.size===t.size&&this.equals(e.arg,t.arg)},e.prototype.visitScopedEval=function(e,t){return i.isScopedEval(t)&&this.equals(e.expression,t.expression)&&this.equalsAll(e.scope,t.scope)},e.prototype.visitWithRef=function(e,t){return i.isWithRef(t)&&e.expressionName===t.expressionName},e.prototype.visitTransformTableRef=function(e,t){return i.isTransformTableRef(t)&&e.source===t.source},e.prototype.visitTransformOutputRoleRef=function(e,t){return i.isTransformOutputRoleRef(t)&&e.role===t.role&&e.transform===t.transform},e.prototype.visitRoleRef=function(e,t){return i.isRoleRef(t)&&e.role===t.role},e.prototype.visitDiscretize=function(e,t){return i.isDiscretize(t)&&e.count===t.count&&this.equals(e.source,t.source)},e.prototype.visitMember=function(e,t){return i.isMember(t)&&e.member===t.member&&this.equals(e.source,t.source)},e.prototype.optionalEqual=function(e,t){return!e||!t||e===t},e.prototype.equals=function(e,t){return e.accept(this,t)},e.prototype.equalsNullable=function(e,t){var r=this;return this.equalsNullableObject(e,t,(function(e,t){return r.equals(e,t)}))},e.prototype.equalsNullableObject=function(e,t,r){return null==e&&null==t||null!=e&&null!=t&&r(e,t)},e.prototype.equalsAll=function(e,t){var r=e.length;if(r!==t.length)return!1;for(var i=0;i<r;i++)if(!this.equals(e[i],t[i]))return!1;return!0},e})();z.instance=new z((!1),(!1)),z.ignoreCaseInstance=new z((!0),(!1)),z.ignoreVariablesInstance=new z((!1),(!0)),z.ignoreVariablesAndCaseInstance=new z((!0),(!0));var K=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitDefault=function(e){return e},t})(t.DefaultSQExprVisitor),Y=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitDefault=function(e,t){return e},t})(t.DefaultSQExprVisitorWithArg),J=(function(e){function r(t,r,i){var n;return n=e.call(this)||this,n.schema=t,n.aggrUtils=r,i&&(n.errors=i),n}return __extends(r,e),r.prototype.visitIn=function(t){var r=e.prototype.visitIn.call(this,t),i=r.args,n=r.values;if(n)for(var a=0,o=n;a<o.length;a++)for(var u=o[a],s=0,c=u.length;s<c;++s)this.validateCompatibleType(i[s],u[s]);else{var l=r.table;this.validateIsTableRef(l)}return r},r.prototype.visitCompare=function(t){var r=e.prototype.visitCompare.call(this,t);return this.validateCompatibleType(r.left,r.right),r},r.prototype.visitColumnRef=function(e){var r=t.SQExprConverter.asFieldPattern(e);if(r){var i=t.FieldExprPattern.toFieldExprEntityItemPattern(r),n=this.validateEntity(i.schema,i.entity);if(n){var a=n.properties.withName(r.column.name);a&&0===a.kind&&this.isQueryable(r)||this.register(3)}}return e},r.prototype.visitMeasureRef=function(e){var r=t.SQExprConverter.asFieldPattern(e);if(r){var i=t.FieldExprPattern.toFieldExprEntityItemPattern(r),n=this.validateEntity(i.schema,i.entity);if(n){var a=n.properties.withName(r.measure.name);a&&1===a.kind&&this.isQueryable(r)||this.register(5)}}return e},r.prototype.visitAggr=function(t){var r=e.prototype.visitAggr.call(this,t),i=$.getColumnRefSQExpr(this.schema,r.arg);return i&&(this.aggrUtils.isSupportedAggregate(t,this.schema,t.func,null)||this.register(0)),r},r.prototype.visitGroupRef=function(e){var r=t.SQExprConverter.asFieldPattern(e);if(r){var i=t.FieldExprPattern.toFieldExprEntityItemPattern(r),n=this.validateEntity(i.schema,i.entity);if(n){var a=n.properties.withName(r.groupingColumn.name);a&&0===a.kind&&this.validateExprSequence(e.groupedExprs)&&a.column.groupingMetadata&&this.isQueryable(r)||this.register(4)}}return e},r.prototype.visitHierarchy=function(e){var r=t.SQExprConverter.asFieldPattern(e);if(r){var i=r.hierarchy;i?this.validateHierarchy(i.schema,i.entity,i.name):this.register(6)}return e},r.prototype.visitHierarchyLevel=function(e){var r=t.SQExprConverter.asFieldPattern(e);if(r){var i=r.hierarchyLevel;i?this.validateHierarchyLevel(i.schema,i.entity,i.name,i.level):r.columnHierarchyLevelVariation||this.register(7)}return e},r.prototype.visitPercentile=function(e){if(e.arg.accept(this),_.isEmpty(this.errors)){var t=e.arg.getMetadata(this.schema);t&&0===t.kind&&t.type&&(t.type.integer||t.type.numeric)||this.register(11)}return e},r.prototype.visitDiscretize=function(e){return e.source.accept(this),e.count<=0&&this.register(14),e},r.prototype.visitEntity=function(e){return this.validateEntity(e.schema,e.entity),e},r.prototype.visitSubqueryRef=function(e){return e},r.prototype.visitNamedQueryRef=function(e){return e},r.prototype.visitContains=function(e){return this.validateStartOrContainsArgs(e.left,e.right),e},r.prototype.visitStartsWith=function(e){return this.validateStartOrContainsArgs(e.left,e.right),e},r.prototype.visitArithmetic=function(e){return this.validateArithmeticTypes(e.operator,e.left,e.right),e},r.prototype.visitScopedEval=function(e){for(var t=0,r=e.scope;t<r.length;t++){var n=r[t];i.isWithRef(n)||i.isColumn(n)||this.register(12)}return e},r.prototype.visitWithRef=function(e){return e},r.prototype.visitTransformTableRef=function(e){return e},r.prototype.visitTransformOutputRoleRef=function(e){return e},r.prototype.visitRoleRef=function(e){return e},r.prototype.validateExprSequence=function(e){var t=this;return _.reduce(e,(function(e,r){return e=e&&_.isEmpty(r.validate(t.schema,t.aggrUtils,t.errors))}),!0)},r.prototype.validateStartOrContainsArgs=function(e,t){e.accept(this),t.accept(this),_.isEmpty(this.errors)&&(i.isConstant(t)&&t.type.text?this.validateCompatibleType(e,t,!0):this.register(9))},r.prototype.validateArithmeticTypes=function(e,r,i){t.SQExprUtils.supportsArithmetic(e,r,this.schema)||this.register(8),t.SQExprUtils.supportsArithmetic(e,i,this.schema)||this.register(9)},r.prototype.validateCompatibleType=function(e,t,r){var i,n=e.getMetadata(this.schema),a=n&&n.type,o=t.getMetadata(this.schema),u=o&&o.type;i=r?!a||!u||!a.isCompatibleFrom(u):a&&u&&!a.isCompatibleFrom(u),i&&this.register(10)},r.prototype.validateEntity=function(e,t){var r=this.schema.schema(e);if(r){var i=r.entities.withName(t);if(i)return i;this.register(2)}else this.register(1)},r.prototype.validateIsTableRef=function(e){1!==e.kind&&0!==e.kind&&this.register(13)},r.prototype.validateHierarchy=function(e,t,r){var i=this.validateEntity(e,t);if(i){var n=i.hierarchies.withName(r);if(n)return n;this.register(6)}},r.prototype.validateHierarchyLevel=function(e,t,r,i){var n=this.validateHierarchy(e,t,r);if(n){var a=n.levels.withName(i);if(a)return a;this.register(7)}},r.prototype.register=function(e){this.errors||(this.errors=[]),this.errors.push(e)},r.prototype.isQueryable=function(e){var r=t.FieldExprPattern.toFieldExprEntityItemPattern(e);if(e.hierarchyLevel||e.hierarchyLevelAggr){var i=t.SQHierarchyExprUtils.getConceptualHierarchyLevelFromExpr(this.schema,e);return i&&1!==i.column.queryable}return 1!==this.schema.schema(r.schema).findProperty(r.entity,t.FieldExprPattern.getPropertyName(e)).queryable},r})(t.SQExprRewriter);t.SQExprValidationVisitor=J;var Z=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitAggr=function(e){return e.func},t.prototype.visitDefault=function(e){},t.getAggregate=function(e){var r=new t;return e.accept(r)},t})(t.DefaultSQExprVisitor),$=(function(e){function r(t){var r=e.call(this)||this;return r.schema=t,r}return __extends(r,e),r.prototype.visitColumnRef=function(e){return e},r.prototype.visitGroupRef=function(e){return e},r.prototype.visitHierarchyLevel=function(e){var r=e.level,n=e.arg,a=n.accept(this);if(n&&i.isPropertyVariationSource(n.arg)){var o=n.arg,u=a.getTargetEntityForVariation(this.schema,o.name);if(a&&u){var s=a.source.schema,c=G.entity(s,u),l=this.schema.schema(s).findHierarchy(u,n.hierarchy);if(l)for(var p=0,v=l.levels;p<v.length;p++){var h=v[p];if(h.name===r)return new f(c,h.column.name)}}}else{var m=n.arg,y=t.SQHierarchyExprUtils.getConceptualHierarchyLevel(this.schema,m.schema,m.entity,n.hierarchy,e.level);if(y)return new f(n.arg,y.column.name)}},r.prototype.visitHierarchy=function(e){return e.arg.accept(this)},r.prototype.visitPropertyVariationSource=function(e){var t=e.property;return new f(e.arg,t)},r.prototype.visitAggr=function(e){return e.arg.accept(this)},r.prototype.visitDefault=function(e){},r.getColumnRefSQExpr=function(e,t){var i=new r(e);return t.accept(i)},r})(t.DefaultSQExprVisitor),X=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitEntity=function(e){var t=this.result;void 0===t||i.equals(t,e)?this.result=e:this.result=null},t.getEntityExpr=function(e){var r=new t;return e.accept(r),r.result||void 0},t})(t.DefaultSQExprVisitorWithTraversal),ee=(function(e){function t(t){var r;return r=e.call(this)||this,r.func=t,r}return __extends(t,e),t.prototype.visitAggr=function(e){return e.func===this.func?e:new h(e.arg,this.func)},t.prototype.visitColumnRef=function(e){return new h(e,this.func)},t.prototype.visitGroupRef=function(e){return new h(e,this.func)},t.prototype.visitHierarchyLevel=function(e){return new h(e,this.func)},t.rewrite=function(e,r){var i=new t(r);return e.accept(i)},t})(K),te=(function(){function e(e,t){this.sqExpr=e,this.aggregate=t}return e.rewrite=function(r,i){return t.FieldExprPattern.visit(r,new e(r,i))},e.prototype.visitPercentOfGrandTotal=function(e){return e.baseExpr=t.SQExprConverter.asFieldPattern(ee.rewrite(G.fieldExpr(e.baseExpr),this.aggregate)),G.fieldExpr({percentOfGrandTotal:e})},e.prototype.visitPercentOfRoleTotal=function(e){return e.baseExpr=t.SQExprConverter.asFieldPattern(ee.rewrite(G.fieldExpr(e.baseExpr),this.aggregate)),G.fieldExpr({percentOfRoleTotal:e})},e.prototype.visitColumn=function(e){return this.defaultRewrite()},e.prototype.visitColumnAggr=function(e){return this.defaultRewrite()},e.prototype.visitGroupingColumn=function(e){return this.defaultRewrite()},e.prototype.visitGroupingColumnAggr=function(e){return this.defaultRewrite()},e.prototype.visitColumnHierarchyLevelVariation=function(e){return this.defaultRewrite()},e.prototype.visitSelectRef=function(e){return this.defaultRewrite()},e.prototype.visitEntity=function(e){return this.defaultRewrite()},e.prototype.visitEntityAggr=function(e){return this.defaultRewrite()},e.prototype.visitHierarchy=function(e){return this.defaultRewrite()},e.prototype.visitHierarchyLevel=function(e){return this.defaultRewrite()},e.prototype.visitHierarchyLevelAggr=function(e){return this.defaultRewrite()},e.prototype.visitMeasure=function(e){return this.defaultRewrite()},e.prototype.visitPercentile=function(e){return this.defaultRewrite()},e.prototype.visitTransformOutputRoleRef=function(e){return this.defaultRewrite()},e.prototype.defaultRewrite=function(){return ee.rewrite(this.sqExpr,this.aggregate)},e})(),re=(function(){function e(e){this.sqExpr=e}return e.rewrite=function(r){return t.FieldExprPattern.visit(r,new e(r))},e.prototype.visitPercentOfGrandTotal=function(t){return e.rewrite(G.fieldExpr(t.baseExpr))},e.prototype.visitPercentOfRoleTotal=function(t){return e.rewrite(G.fieldExpr(t.baseExpr))},e.prototype.visitColumn=function(e){return this.defaultRewrite()},e.prototype.visitColumnAggr=function(e){return this.defaultRewrite()},e.prototype.visitGroupingColumn=function(e){return this.defaultRewrite()},e.prototype.visitGroupingColumnAggr=function(e){return this.defaultRewrite()},e.prototype.visitColumnHierarchyLevelVariation=function(e){return this.defaultRewrite()},e.prototype.visitSelectRef=function(e){return this.defaultRewrite()},e.prototype.visitEntity=function(e){return this.defaultRewrite()},e.prototype.visitEntityAggr=function(e){return this.defaultRewrite()},e.prototype.visitHierarchy=function(e){return this.defaultRewrite()},e.prototype.visitHierarchyLevel=function(e){return this.defaultRewrite()},e.prototype.visitHierarchyLevelAggr=function(e){return this.defaultRewrite()},e.prototype.visitMeasure=function(e){return this.defaultRewrite()},e.prototype.visitPercentile=function(e){return this.defaultRewrite()},e.prototype.visitTransformOutputRoleRef=function(e){return this.defaultRewrite()},e.prototype.defaultRewrite=function(){return ie.rewrite(this.sqExpr)},e})(),ie=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitAggr=function(e){
return e.arg},t.rewrite=function(e){return e.accept(t.instance)},t})(K);ie.instance=new ie;var ne=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitEntity=function(e){return e.variable?G.entity(e.schema,e.entity):e},t.rewrite=function(e){return e.accept(t.instance)},t})(t.SQExprRewriter);ne.instance=new ne;var ae=(function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.rewrite=function(e){return e.accept(r.instance)},r.prototype.visitDefault=function(e){var r=t.SQExprConverter.asFieldPattern(e);return r&&r.percentOfGrandTotal&&(e=G.fieldExpr(r.percentOfGrandTotal.baseExpr)),e},r})(K);ae.instance=new ae;var oe=(function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.rewrite=function(e){return e.accept(r.instance)},r.prototype.visitDefault=function(e){var r=t.SQExprConverter.asFieldPattern(e);return r&&!r.percentOfGrandTotal&&(e=G.fieldExpr({percentOfGrandTotal:{baseExpr:r}})),e},r})(K);oe.instance=new oe;var ue=(function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.rewrite=function(e){return e.accept(r.instance)},r.prototype.visitDefault=function(e){var r=t.SQExprConverter.asFieldPattern(e);return r&&r.percentOfRoleTotal&&(e=G.fieldExpr(r.percentOfRoleTotal.baseExpr)),e},r})(K);ue.instance=new ue;var se=(function(e){function r(){return e.apply(this,arguments)||this}return __extends(r,e),r.rewrite=function(e,t){return e.accept(r.instance,t)},r.prototype.visitDefault=function(e,r){var i=t.SQExprConverter.asFieldPattern(e);return i&&!i.percentOfRoleTotal&&(e=G.fieldExpr({percentOfRoleTotal:{baseExpr:i,roles:r}})),e},r})(Y);se.instance=new se;var ce=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitHierarchyLevel=function(e){return e.arg.accept(this)},t.prototype.visitHierarchy=function(e){return e.arg.accept(this)},t.prototype.visitPropertyVariationSource=function(e){return e.property},t.getProperty=function(e){var r=new t;return e.accept(r)},t})(t.DefaultSQExprVisitor);t.HierarchyVisitor=ce})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r,i=jsCommon.ArrayExtensions,n=jsCommon.StringExtensions;!(function(r){function a(e,t,r){var i=t.getMetadata(r),n=i&&i.type;return!(!i||!n)&&(2===e||3===e?n.numeric:n.numeric||n.dateTime||n.duration)}function o(e,r){for(var i=0,n=e.length;i<n;i++)if(t.SQExpr.equals(e[i],r))return i;return-1}function u(e,r){for(var i=0,n=e.length;i<n;i++){var a=e[i];if(a&&t.SQExpr.equals(a.expr,r))return i}return-1}function s(e,r){var i=e.length;if(i!==r.length)return!1;for(var n=0;n<i;n++)if(!t.SQExpr.equals(e[n],r[n]))return!1;return!0}function c(e,t,r){for(var i={},a=0,o=e.length;a<o;a++)i[e[a].name]=!0;return n.findUniqueName(i,r||l(t))}function l(e,t){return void 0===t&&(t="select"),e?e.accept(Q.instance,t):t}function p(e){return e.accept(O.instance)}function f(e){return e.accept(I.instance)}function v(e){return e.accept(q.instance)}function h(e,t){var r=y(e,t);return r&&r.discourageQueryAggregateUsage}function m(e,t){var r=E(e,t);if(r)return r.aggregateBehavior}function y(e,r){var i=t.SQExprConverter.asFieldPattern(e);if(i){var n=t.FieldExprPattern.toFieldExprEntityItemPattern(i),a=r.schema(n.schema);return a?a.capabilities:void 0}}function d(e,t){var r=S(e,t);if(r)return r.kpiValue.measure.kpi.statusMetadata;var i=b(e,t);return i?i.kpiValue.measure.kpi.trendMetadata:void 0}function g(e,t){var r=t.schema(e.schema).entities.withName(e.entity);return r}function x(e,r){var i=e.getTargetColumnRef(r);if(i){var n=i.getConceptualProperty(r);if(n&&n.column){var a=i.getTargetEntity();if(a){var o=g(a,r);if(o){for(var u=[],s=0,c=o.properties;s<c.length;s++){var l=c[s];l.column&&l.column.keys&&_.contains(l.column.keys,n)&&u.push(t.SQExprBuilder.columnRef(a,l.name))}return u}}}}}function S(e,t){var r=e.getConceptualProperty(t);if(r){var i=r.kpiValue;return i&&i.measure.kpi.status===r?r:void 0}}function b(e,t){var r=e.getConceptualProperty(t);if(r){var i=r.kpiValue;return i&&i.measure.kpi.trend===r?r:void 0}}function w(e,t){var r=E(e,t);if(r)return r.defaultValue}function E(e,r){if(e&&r){var i=t.SQExprConverter.asFieldPattern(e);if(i){var n=i.column||i.groupingColumn;if(n){if(r.schema(n.schema)&&n.name){var a=r.schema(n.schema).findProperty(n.entity,n.name);if(a)return a.column}}else{var o=i.hierarchyLevel;if(o){var u=t.FieldExprPattern.toFieldExprEntityItemPattern(i),s=u.schema;if(r.schema(s)){var c=r.schema(s).findHierarchy(u.entity,o.name);if(c){var l=c.levels.withName(o.level);if(l&&l.column)return l.column.column}}}}}}}function D(e,t){if(!_.isEmpty(e)&&t){for(var r=[],i=0,n=e;i<n.length;i++){var a=n[i],o=w(a,t);o&&r.push(o)}return r}}function C(e,r){for(var i=[],n=0;n<e.length;n++)i.push(t.SQExprBuilder.compare(0,e[n],r[n]));if(!_.isEmpty(i)){for(var a,o=0,u=i;o<u.length;o++){var s=u[o];a=t.SQExprBuilder.and(a,s)}return a}}function R(e){var r=[],i=new t.SQFromEntitiesVisitor;if(e){var n=e.from();if(void 0!==n)for(var a=0,o=n.keys();a<o.length;a++){var u=o[a];n.source(u).accept(i,null)}}return r=_.map(i.entities,(function(e){return e.entity}))}function T(e,t,r){return F(e,t,r,0,2)||F(e,r,t,2,0)}function V(e,t,r){return F(e,t,r,2,0)||F(e,r,t,0,2)}function F(e,t,i,n,a){var o=r.getConceptualEntity(t,e);if(_.isEmpty(o.navigationProperties))return!1;var u=r.getConceptualEntity(i,e),s=[];for(s.push(o);!_.isEmpty(s);){var c=s.shift(),l=c.navigationProperties;if(!_.isEmpty(l))for(var p=0,f=l;p<f.length;p++){var v=f[p];if(v.isActive&&v.targetMultiplicity===a&&v.sourceMultiplicity===n){if(v.targetEntity===u)return!0;s.push(v.targetEntity)}}}return!1}function P(e,t,i){var n=r.getConceptualEntity(t,e),a=r.getConceptualEntity(i,e),o=n.navigationProperties,u=a.navigationProperties;return(!_.isEmpty(o)||!_.isEmpty(u))&&(M(o,a)||M(u,n))}function M(e,t){if(_.isEmpty(e))return!1;for(var r=0,i=e;r<i.length;r++){var n=i[r];if(n.isActive&&n.targetEntity===t&&0===n.sourceMultiplicity&&0===n.targetMultiplicity)return!0}return!1}function A(e,t){for(var r=i.copy(e),n=0,a=t;n<a.length;n++){var u=a[n];o(r,u)===-1&&r.push(u)}return r}function N(e){var t=new U;return e.accept(t),t.sawTransformOutputRoleRef}r.supportsArithmetic=a,r.indexOfExpr=o,r.indexOfNamedExpr=u,r.sequenceEqual=s,r.uniqueName=c,r.defaultName=l,r.isMeasure=p,r.isAnyValue=f,r.isDefaultValue=v,r.discourageAggregation=h,r.getAggregateBehavior=m,r.getSchemaCapabilities=y,r.getKpiMetadata=d,r.getConceptualEntity=g,r.getColumnnsWithKey=x,r.getDefaultValue=w,r.getDefaultValues=D,r.getDataViewScopeIdentityComparisonExpr=C,r.getActiveTablesNames=R,r.isRelatedToMany=T,r.isRelatedToOne=V,r.isRelatedOneToOne=P,r.concatUnique=A,r.detectTransformExpr=N;var Q=(function(r){function i(){return r.apply(this,arguments)||this}return __extends(i,r),i.prototype.visitEntity=function(e){return e.entity},i.prototype.visitNamedQueryRef=function(e){return"QueryRef("+e.queryName+")"},i.prototype.visitColumnRef=function(e){return e.source.accept(this)+"."+e.ref},i.prototype.visitGroupRef=function(e){return e.source.accept(this)+"."+e.ref},i.prototype.visitMeasureRef=function(e){return e.source.accept(this)+"."+e.ref},i.prototype.visitHierarchy=function(e){return e.arg.accept(this)+"."+e.hierarchy},i.prototype.visitHierarchyLevel=function(e){return e.arg.accept(this)+"."+e.level},i.prototype.visitPropertyVariationSource=function(e){return e.arg.accept(this)+"."+e.property+"."+e.name},i.prototype.visitAggr=function(e){return t.aggregateFunctionName(e.func)+"("+e.arg.accept(this)+")"},i.prototype.visitPercentile=function(e){var t=e.exclusive?"Percentile.Exc(":"Percentile.Inc(";return t+e.arg.accept(this)+", "+e.k+")"},i.prototype.visitArithmetic=function(t){return e.data.getArithmeticOperatorName(t.operator)+"("+t.left.accept(this)+", "+t.right.accept(this)+")"},i.prototype.visitConstant=function(e){return"const"},i.prototype.visitTransformOutputRoleRef=function(e){var t=e.role;return e.transform&&(t+="."+e.transform),t},i.prototype.visitScopedEval=function(e){var t=this;return"ScopedEval("+e.expression.accept(this)+", ["+_.map(e.scope,(function(e){return e.accept(t)})).join(", ")+"])"},i.prototype.visitRoleRef=function(e){return"Role."+e.role},i.prototype.visitDiscretize=function(e){return"Discretize("+e.source.accept(this)+", "+e.count+")"},i.prototype.visitMember=function(e){return"Member("+e.source.accept(this)+", "+e.member+")"},i.prototype.visitDefault=function(e,t){return t||"expr"},i})(t.DefaultSQExprVisitorWithArg);Q.instance=new Q;var O=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitMeasureRef=function(e){return!0},t.prototype.visitAggr=function(e){return!0},t.prototype.visitArithmetic=function(e){return!0},t.prototype.visitDefault=function(e){return!1},t})(t.DefaultSQExprVisitor);O.instance=new O;var q=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitCompare=function(e){return 0===e.comparison&&e.right.accept(this)},t.prototype.visitAnd=function(e){return e.left.accept(this)&&e.right.accept(this)},t.prototype.visitDefaultValue=function(e){return!0},t.prototype.visitDefault=function(e){return!1},t})(t.DefaultSQExprVisitor);q.instance=new q;var I=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitCompare=function(e){return 0===e.comparison&&e.right.accept(this)},t.prototype.visitAnd=function(e){return e.left.accept(this)&&e.right.accept(this)},t.prototype.visitAnyValue=function(e){return!0},t.prototype.visitDefault=function(e){return!1},t})(t.DefaultSQExprVisitor);I.instance=new I;var U=(function(e){function t(){var t=e.call(this)||this;return t.sawTransformOutputRoleRef=!1,t}return __extends(t,e),t.prototype.visitTransformOutputRoleRef=function(e){this.sawTransformOutputRoleRef=!0},t})(t.DefaultSQExprVisitorWithTraversal)})(r=t.SQExprUtils||(t.SQExprUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=(function(){function t(e){this.exprRewriter=e}return t.rewriteFrom=function(t,r){for(var i,n=t,a=n.keys(),o=0,u=a.length;o<u;o++){var s=a[o],c=n.source(s),l=c.accept(r,s);(c!==l||i)&&(i||(i=_.pick(n.sources(),a.slice(0,o))),i[s]=l)}return i?new e.SQFrom(i):n},t.prototype.rewriteFrom=function(r){return t.rewriteFrom(r,new e.SQFromSourceRewriter(this.exprRewriter))},t.prototype.rewriteSelect=function(e,t){return this.rewriteNamedSQExpressions(e,t)},t.prototype.rewriteGroupBy=function(e,t){if(!_.isEmpty(e))return this.rewriteNamedSQExpressions(e,t)},t.prototype.rewriteNamedSQExpressions=function(t,r){var i=this;return _.map(t,(function(t){return{name:t.name,expr:e.SQExprRewriterWithSourceRenames.rewrite(t.expr.accept(i.exprRewriter),r,r)}}))},t.prototype.rewriteOrderBy=function(t,r){if(!_.isEmpty(t)){for(var i=[],n=0,a=t.length;n<a;n++){var o=t[n],u=e.SQExprRewriterWithSourceRenames.rewrite(o.expr.accept(this.exprRewriter),r,r);i.push({direction:o.direction,expr:u})}return i}},t.prototype.rewriteWhere=function(t,r){var i=this;if(!_.isEmpty(t)){for(var n=[],a=0,o=t.length;a<o;a++){var u=t[a],s={condition:e.SQExprRewriterWithSourceRenames.rewrite(u.condition.accept(this.exprRewriter),r,r)};u.target&&(s.target=_.map(u.target,(function(t){return e.SQExprRewriterWithSourceRenames.rewrite(t.accept(i.exprRewriter),r,r)}))),n.push(s)}return n}},t.prototype.rewriteTransform=function(t,r){var i=this;if(!_.isEmpty(t)){for(var n=[],a=0,o=t;a<o.length;a++){var u=o[a],s=void 0;u.input.table&&!_.isEmpty(u.input.table.columns)&&(s=_.map(u.input.table.columns,(function(t){return{role:t.role,expression:{name:t.expression.name,expr:e.SQExprRewriterWithSourceRenames.rewrite(t.expression.expr.accept(i.exprRewriter),r,r)}}})));var c={name:u.name,algorithm:u.algorithm,input:{parameters:u.input.parameters},output:u.output};u.input.table&&(c.input.table={name:u.input.table.name,columns:s}),n.push(c)}return n}},t})();e.SemanticQueryRewriter=t})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){function t(e,t){if(e===t)return!0;if(e&&t){if(r(e)&&r(t))return e.equals(t);if(i(e)&&i(t))return e.equals(t);if(n(e)&&n(t))return e.equals(t)}return!1}function r(e){return null!=e.entity}function i(e){return null!=e.subquery}function n(e){return null!=e.expr}var a=jsCommon.ArrayExtensions,o=jsCommon.StringExtensions,u=(function(){function e(e,t){this.schema=e,this.entity=t}return e.prototype.accept=function(e,t){return e.visitEntity(this,t)},e.prototype.equals=function(e){return e&&this.entity===e.entity&&this.schema===e.schema},e})();e.SQFromEntitySource=u;var s=(function(){function t(e){this.subquery=e}return t.prototype.accept=function(e,t){return e.visitSubquery(this,t)},t.prototype.equals=function(t){return t&&e.SemanticQuery.equals(this.subquery,t.subquery)},t})();e.SQFromSubquerySource=s;var c=(function(){function t(e){this.expr=e}return t.prototype.accept=function(e,t){return e.visitExpr(this,t)},t.prototype.equals=function(t){return t&&e.SQExpr.equals(this.expr,t.expr)},t})();e.SQFromExprSource=c;var l=(function(){function e(e){this.items=e||{}}return e.prototype.keys=function(){return Object.keys(this.items)},e.prototype.source=function(e){return this.items[e]},e.prototype.sources=function(){return this.items},e.prototype.ensureSource=function(e,t){var r=this.getSourceKeyFromItems(e);if(r)return{name:r};var i=this.addSource(e,t);return{name:i,new:!0}},e.prototype.remove=function(e){delete this.items[e]},e.prototype.getSourceKeyFromItems=function(e){var r=this.keys();for(var i in r){var n=r[i],a=this.items[n];if(t(a,e))return n}},e.prototype.addSource=function(e,t){for(var r=t||e.accept(new p,null),i=r,n={},a=0,u=this.keys();a<u.length;a++){var s=u[a];n[s]=!0}return i=o.findUniqueName(n,i),this.items[i]=e,i},e.prototype.clone=function(){var t=new e;return $.extend(t.items,this.items),t},e.prototype.equals=function(e){var r=this;if(!e)return!1;var i=this.keys(),n=e.keys();return i.length===n.length&&a.sequenceEqual(i,n,(function(i,n){return t(r.source(i),e.source(n))}))},e.prototype.renameSources=function(t){for(var r,i=this.items,n=Object.keys(i),a=0,u=n.length;a<u;a++){var s=n[a],c=s;if(t[s]&&(c=o.findUniqueName(t,s),!r)){r={};for(var l=0;l<a;l++){var p=n[l];r[p]=i[p]}}t[c]=!0,r&&(r[c]=i[s])}return r?new e(r):this},e})();e.SQFrom=l,e.equals=t,e.isSQFromEntitySource=r,e.isSQFromSubquerySource=i,e.isSQFromExprSource=n;var p=(function(){function e(){}return e.prototype.visitEntity=function(e){var t=e.entity,r=t.lastIndexOf(".");return r>=0&&r!==t.length-1&&(t=t.substr(r+1)),t.substring(0,1).toLowerCase()},e.prototype.visitSubquery=function(e){return"q"},e.prototype.visitExpr=function(e){return"x"},e})();e.SQFromSourceCandidateNameVisitor=p;var f=(function(){function t(){this.entities=[]}return t.prototype.visitEntity=function(t,r){this.entities.push(new e.SQEntityExpr(t.schema,t.entity,r))},t.prototype.visitSubquery=function(e,t){},t.prototype.visitExpr=function(e,t){},t})();e.SQFromEntitiesVisitor=f;var v=(function(){function t(e){this.exprRewriter=e}return t.prototype.visitEntity=function(t,r){var i=e.SQExprBuilder.entity(t.schema,t.entity,r),n=i.accept(this.exprRewriter);return new u(n.schema,n.entity)},t.prototype.visitSubquery=function(e,t){var r=e.subquery,i=r.rewrite(this.exprRewriter);return new s(i)},t.prototype.visitExpr=function(e,t){var r=e.expr,i=r.accept(this.exprRewriter);return new c(i)},t})();e.SQFromSourceRewriter=v})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=jsCommon.ArrayExtensions,r=(function(){function r(e,t,r,i,n,a,o){this.fromValue=e,this.whereItems=t,this.orderByItems=r,this.selectItems=i,this.groupByItems=n,this.transformItems=a,null!=o&&(this.topValue=o)}return r.create=function(){return r.empty||(r.empty=new r(new e.SQFrom,null,null,[],null,null,null)),r.empty},r.createWith=function(e,t){return t||(e=r.normalize(e)),new r(e.from,e.where,e.orderBy,e.select,e.groupBy,e.transforms,e.top)},r.prototype.createModified=function(e){return r.createWith({from:void 0!==e.from?e.from:this.fromValue,where:void 0!==e.where?e.where:this.whereItems,transforms:void 0!==e.transforms?e.transforms:this.transformItems,orderBy:void 0!==e.orderBy?e.orderBy:this.orderByItems,select:void 0!==e.select?e.select:this.selectItems,groupBy:void 0!==e.groupBy?e.groupBy:this.groupByItems,top:void 0!==e.top?e.top:this.topValue})},r.normalize=function(e){var t={clauses:{from:e.from,where:e.where,orderBy:e.orderBy,select:e.select,groupBy:e.groupBy,transforms:e.transforms,top:e.top},usedSourceNames:{}};return r.removeUnreferencedKeys(t),r.renameSources(t),r.renameSourcesInSubqueries(t),t.clauses},r.removeUnreferencedKeys=function(e){var t=e.clauses,r=t.from,i=t.where,n=t.orderBy,o=t.select,u=t.groupBy,s=t.transforms,c=new a(r.keys());if(i)for(var l=0,p=i.length;l<p;l++){var f=i[l];f.condition.accept(c);var v=f.target;if(v)for(var h=0,m=v.length;h<m;h++)v[h]&&v[h].accept(c)}if(s)for(var l=0,p=s.length;l<p;l++){var y=s[l].input.table;if(y&&!_.isEmpty(y.columns))for(var d=0,g=y.columns;d<g.length;d++){var x=g[d];x.expression.expr.accept(c)}}if(n)for(var l=0,p=n.length;l<p;l++)n[l].expr.accept(c);for(var l=0,p=o.length;l<p;l++)o[l].expr.accept(c);if(u)for(var l=0,p=u.length;l<p;l++)u[l].expr.accept(c);var S=c.result();if(S){for(var b=r.clone(),w=0,E=S;w<E.length;w++){var D=E[w];b.remove(D)}e.clauses.from=b}},r.renameSources=function(e){var t=e.clauses.from,i=t.renameSources(e.usedSourceNames);i!==t&&(e.clauses.from=i,r.rewriteClauses(e.clauses,new n(t,i)))},r.renameSourcesInSubqueries=function(e){e.clauses.from=o.renameSources(r.renameSourcesInQuery,e.clauses.from,e.usedSourceNames)},r.renameSourcesInQuery=function(e,t){var i={clauses:e.getClauses(),usedSourceNames:t},n=i.clauses.from;return r.renameSources(i),r.renameSourcesInSubqueries(i),i.clauses.from===n?e:r.createWith(i.clauses)},r.prototype.from=function(e){return e?this.createModified({from:e}):this.fromValue.clone()},r.prototype.select=function(e){return _.isEmpty(arguments)?this.getSelect():this.setSelect(e)},r.prototype.getSelect=function(){return r.createNamedExpressionArray(this.selectItems)},r.createNamedExpressionArray=function(e){return t.extendWithName(_.map(e,(function(e){return{name:e.name,expr:e.expr}})))},r.prototype.setSelect=function(e){var t=this.fromValue.clone(),i=r.rewriteExpressionsWithSourceRenames(e,t);return this.createModified({from:t,select:i})},r.rewriteExpressionsWithSourceRenames=function(e,t){for(var r=[],i=0,a=e.length;i<a;i++){var o=e[i];r.push({name:o.name,expr:n.rewrite(o.expr,null,t)})}return r},r.prototype.removeSelect=function(t){for(var r=this.selectItems,i=[],n=0,a=r.length;n<a;n++){var o=r[n];e.SQExpr.equals(o.expr,t)||i.push(o)}return this.createModified({select:i})},r.prototype.removeOrderBy=function(t){for(var r=this.orderBy(),i=r.length-1;i>=0;i--)e.SQExpr.equals(r[i].expr,t)&&r.splice(i,1);return this.createModified({orderBy:r})},r.prototype.removeTransform=function(e){for(var t=this.transforms(),r=0,i=t.length;r<i;r++)if(t[r].name===e.name){t.splice(r,1);break}return this.createModified({transforms:t})},r.prototype.selectNameOf=function(t){var r=e.SQExprUtils.indexOfNamedExpr(this.selectItems,t);if(r>=0)return this.selectItems[r].name},r.prototype.setSelectAt=function(e,t){if(!(e>=this.selectItems.length)){var r=this.select(),i=this.fromValue.clone(),a=r[e].name;return r[e]={name:a,expr:n.rewrite(t,null,i)},this.createModified({from:i,select:r})}},r.prototype.addSelect=function(e,t){var r=this.select(),i=this.fromValue.clone();return r.push(this.createNamedExpr(r,i,e,t)),this.createModified({from:i,select:r})},r.prototype.createNamedExpr=function(t,r,i,a){return{name:e.SQExprUtils.uniqueName(t,i,a),expr:n.rewrite(i,null,r)}},r.prototype.groupBy=function(e){return _.isEmpty(arguments)?this.getGroupBy():this.setGroupBy(e)},r.prototype.getGroupBy=function(){return r.createNamedExpressionArray(this.groupByItems)},r.prototype.setGroupBy=function(e){var t=this.fromValue.clone(),i=r.rewriteExpressionsWithSourceRenames(e,t);return this.createModified({from:t,groupBy:i})},r.prototype.addGroupBy=function(e){var t=this.groupBy(),r=this.fromValue.clone();return t.push(this.createNamedExpr(t,r,e)),this.createModified({from:r,groupBy:t})},r.prototype.orderBy=function(e){return _.isEmpty(arguments)?this.getOrderBy():this.setOrderBy(e)},r.prototype.getOrderBy=function(){var e=[],t=this.orderByItems;if(t)for(var r=0,i=t.length;r<i;r++){var n=t[r];e.push({expr:n.expr,direction:n.direction})}return e},r.prototype.setOrderBy=function(e){for(var t=[],r=this.fromValue.clone(),i=0,a=e.length;i<a;i++){var o=e[i];t.push({expr:n.rewrite(o.expr,null,r),direction:o.direction})}return this.createModified({from:r,orderBy:t})},r.prototype.where=function(e,t){return _.isEmpty(arguments)?this.getWhere():this.setWhere([],e,t)},r.prototype.getWhere=function(){var e=[],t=this.whereItems;if(t)for(var r=0,i=t.length;r<i;r++)e.push(t[r]);return e},r.prototype.setWhere=function(e,t,r){for(var i=_.clone(e),a=this.fromValue.clone(),o=0,u=t;o<u.length;o++){var s=u[o],c={condition:n.rewrite(s.condition,r,a)};s.target&&(c.target=_.map(s.target,(function(e){return n.rewrite(e,r,a)}))),i.push(c)}return this.createModified({from:a,where:i})},r.prototype.addWhere=function(e,t){return this.setWhere(this.where(),e,t)},r.prototype.addSemanticFilter=function(e){return this.setWhere(this.where(),e.where(),e.from())},r.prototype.transforms=function(e){return _.isEmpty(arguments)?this.getTransforms():this.setTransforms(e)},r.prototype.getTransforms=function(){var e=[];if(!_.isEmpty(this.transformItems))for(var t=0,r=this.transformItems;t<r.length;t++){var i=r[t];e.push(i)}return e},r.prototype.setTransforms=function(e){for(var r=this,i=this.fromValue.clone(),n=[],a=0,o=e;a<o.length;a++){var u=o[a],s=void 0;u.input.table&&!_.isEmpty(u.input.table.columns)&&(s=_.map(u.input.table.columns,(function(e){return{role:e.role,expression:r.createNamedExpr(t.extendWithName([]),i,e.expression.expr,e.expression.name)}})));var c={name:u.name,algorithm:u.algorithm,input:{parameters:u.input.parameters},output:u.output};u.input.table&&(c.input.table={name:u.input.table.name,columns:s}),n.push(c)}return this.createModified({from:i,transforms:e})},r.prototype.top=function(e){return _.isEmpty(arguments)?this.topValue:this.setTop(e)},r.prototype.setTop=function(e){return this.createModified({top:e})},r.prototype.rewrite=function(e){var t=this.getClauses();return r.rewriteClauses(t,e),this.createModified(t)},r.prototype.getClauses=function(){return{from:this.fromValue,where:this.whereItems,orderBy:this.orderByItems,select:this.selectItems,groupBy:this.groupByItems,transforms:this.transformItems,top:this.topValue}},r.rewriteClauses=function(t,r){var i=new e.SemanticQueryRewriter(r);t.from=i.rewriteFrom(t.from),t.where=i.rewriteWhere(t.where,t.from),t.orderBy=i.rewriteOrderBy(t.orderBy,t.from),t.select=i.rewriteSelect(t.select,t.from),t.groupBy=i.rewriteGroupBy(t.groupBy,t.from),t.transforms=i.rewriteTransform(t.transforms,t.from)},r.equals=function(r,i){return r.from().equals(i.from())&&t.sequenceEqual(r.where(),i.where(),e.SQFilter.equals)&&t.sequenceEqual(r.orderBy(),i.orderBy(),e.SQUtils.sqSortDefinitionEquals)&&t.sequenceEqual(r.select(),i.select(),e.SQUtils.namedSQExprEquals)&&t.sequenceEqual(r.groupBy(),i.groupBy(),e.SQUtils.namedSQExprEquals)&&t.sequenceEqual(r.transforms(),i.transforms(),e.SQUtils.sqTransformEquals)&&r.top()===i.top()},r})();e.SemanticQuery=r;var i=(function(){function r(e,t){this.fromValue=e,this.whereItems=t}return r.fromSQExpr=function(t){return r.fromSQFromAndSQExpr(new e.SQFrom,t)},r.fromSQFromAndSQExpr=function(e,t){var i=n.rewrite(t,e,e),a=[{condition:i}];return new r(e,a)},r.fromSQFromAndSQFilters=function(e,t){return new r(e,t)},r.getDefaultValueFilter=function(t){return r.getDataViewScopeIdentityComparisonFilters(t,e.SQExprBuilder.defaultValue())},r.getAnyValueFilter=function(t){return r.getDataViewScopeIdentityComparisonFilters(t,e.SQExprBuilder.anyValue())},r.getDataViewScopeIdentityComparisonFilters=function(t,i){if(t instanceof Array){var n=Array.apply(null,Array(t.length)).map((function(){return i}));return r.fromSQExpr(e.SQExprUtils.getDataViewScopeIdentityComparisonExpr(t,n))}return r.fromSQExpr(e.SQExprBuilder.equal(t,i))},r.prototype.from=function(){return this.fromValue.clone()},r.prototype.conditions=function(){for(var e=[],t=this.whereItems,r=0,i=t.length;r<i;r++){var n=t[r];e.push(n.condition)}return e},r.prototype.where=function(){for(var e=[],t=this.whereItems,r=0,i=t.length;r<i;r++)e.push(t[r]);return e},r.prototype.rewrite=function(t){var i=new e.SemanticQueryRewriter(t),n=i.rewriteFrom(this.fromValue),a=i.rewriteWhere(this.whereItems,n);return new r(n,a)},r.prototype.validate=function(t,r,i){var n=new e.SQExprValidationVisitor(t,r,i);return this.rewrite(n),n.errors},r.merge=function(e){if(_.isEmpty(e))return null;if(1===e.length)return e[0];for(var i=e[0],n=i.from(),a=t.take(i.whereItems,i.whereItems.length),o=1,u=e.length;o<u;o++)r.applyFilter(e[o],n,a);return new r(n,a)},r.isDefaultFilter=function(t){return!(!t||1!==t.where().length)&&e.SQExprUtils.isDefaultValue(t.where()[0].condition)},r.isAnyFilter=function(t){return!(!t||1!==t.where().length)&&e.SQExprUtils.isAnyValue(t.where()[0].condition)},r.isSameFilter=function(e,t){return!!jsCommon.JsonComparer.equals(e,t)&&!(r.isDefaultFilter(e)&&r.isAnyFilter(t)||r.isAnyFilter(e)&&r.isDefaultFilter(t))},r.applyFilter=function(e,t,r){for(var i=e.whereItems,a=0;a<i.length;a++){var o=i[a],u={condition:n.rewrite(o.condition,e.fromValue,t)};o.target&&(u.target=_.map(o.target,(function(r){return n.rewrite(r,e.fromValue,t)}))),r.push(u)}},r})();e.SemanticFilter=i;var n=(function(t){function i(e,r){var i;return i=t.call(this)||this,i.sourceFrom=e,i.destinationFrom=r,i}return __extends(i,t),i.prototype.visitEntity=function(t){var r=this.destinationFrom.source(t.variable);if(r&&e.isSQFromEntitySource(r)&&r.schema===t.schema&&r.entity===t.entity)return t;var i=this.destinationFrom.ensureSource(new e.SQFromEntitySource(t.schema,t.entity),t.variable);return i.name!==t.variable?new e.SQEntityExpr(t.schema,t.entity,i.name):t},i.prototype.visitSubqueryRef=function(t){if(!this.sourceFrom)return t;var i=this.sourceFrom.source(t.variable),n=this.destinationFrom.source(t.variable);if(n&&e.isSQFromSubquerySource(n)&&r.equals(i.subquery,n.subquery))return t;var a=this.destinationFrom.ensureSource(new e.SQFromSubquerySource(i.subquery),t.variable);return a.name!==t.variable?new e.SQSubqueryRefExpr(a.name):t},i.prototype.visitNamedQueryRef=function(t){var r=this.destinationFrom.source(t.variable);if(r&&e.isSQFromExprSource(r)){var i=r.expr;if(e.SQExpr.equals(i,t))return t}var n=this.destinationFrom.ensureSource(new e.SQFromExprSource(t),t.variable);if(n.name!==t.variable)return new e.SQNamedQueryRefExpr(t.queryName,n.name)},i.rewrite=function(e,t,r){var n=new i(t,r);return e.accept(n)},i})(e.SQExprRewriter);e.SQExprRewriterWithSourceRenames=n;var a=(function(e){function t(t){var r;return r=e.call(this)||this,r.keys=t,r}return __extends(t,e),t.prototype.visitEntity=function(e){this.removeKey(e.variable)},t.prototype.visitSubqueryRef=function(e){this.removeKey(e.variable)},t.prototype.visitNamedQueryRef=function(e){this.removeKey(e.variable)},t.prototype.removeKey=function(e){var t=this.keys.indexOf(e);t>=0&&this.keys.splice(t,1)},t.prototype.result=function(){return this.keys},t})(e.DefaultSQExprVisitorWithTraversal),o=(function(){function t(e,t,r){this.renameSources=e,this.from=t,this.usedSourceNames=r}return t.renameSources=function(r,i,n){var a=new t(r,i,n);return e.SemanticQueryRewriter.rewriteFrom(i,a)},t.prototype.visitEntity=function(e,t){return e},t.prototype.visitSubquery=function(t,r){var i=t.subquery,n=this.renameSources(i,this.usedSourceNames);return n===i?t:new e.SQFromSubquerySource(n)},t.prototype.visitExpr=function(e,t){return e},t})()})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,r=jsCommon.ArrayExtensions;!(function(t){function i(t,r){return t||(t=null),r||(r=null),t===r||!!t==!!r&&(!!n(t,r)&&e.SQExpr.equals(t.condition,r.condition))}function n(t,i){return r.sequenceEqual(t.target,i.target,e.SQExpr.equals)}function a(e,t){return!_.isEmpty(e)&&_.any(e,(function(e){return i(e,t)}))}t.equals=i,t.targetsEqual=n,t.contains=a})(t=e.SQFilter||(e.SQFilter={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t,r=jsCommon.ArrayExtensions;!(function(t){function i(t,r){return!t&&!r||!(!t||!r)&&(t.direction===r.direction&&e.SQExpr.equals(t.expr,r.expr))}function n(t,r){return!t&&!r||!(!t||!r)&&e.SQExpr.equals(t.expr,r.expr)}function a(e,t){return!e&&!t||!(!e||!t)&&(e.role===t.role&&n(e.expression,t.expression))}function o(e,t){return!e&&!t||!(!e||!t)&&r.sequenceEqual(e.columns,t.columns,(function(e,t){return a(e,t)}))}function u(e,t){return!e&&!t||!(!e||!t)&&(r.sequenceEqual(e.parameters,t.parameters,(function(e,t){return n(e,t)}))&&o(e.table,t.table))}function s(e,t){return!e&&!t||!(!e||!t)&&o(e.table,t.table)}function c(e,t){return!e&&!t||!(!e||!t)&&(e.algorithm===t.algorithm&&u(e.input,t.input)&&s(e.output,t.output))}t.sqSortDefinitionEquals=i,t.namedSQExprEquals=n,t.sqTransformTableColumnsEquals=a,t.sqTransformTableEquals=o,t.sqTransformInputEquals=u,t.sqTransformOutputEquals=s,t.sqTransformEquals=c})(t=e.SQUtils||(e.SQUtils={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(){return new s}function i(e,r,i,n){var a=e.identities;return a?a[r]:t.createDataViewScopeIdentity(u.equal(e.fields[0],u.typedConstant(i,n)))}function n(e,t){_.contains(e,t)||e.push(t)}function a(e,t,r){var i=t.values;e.values=i;var n=t.highlights;n&&(e.highlights=n);var a;void 0!==t.minLocal&&(a||(a={}),a.minLocal=t.minLocal),void 0!==t.maxLocal&&(a||(a={}),a.maxLocal=t.maxLocal),a&&(e.source.aggregates=a,_.extend(e,a))}var o=e.data.DataViewTransform,u=e.data.SQExprBuilder;t.createCategoricalDataViewBuilder=r;var s=(function(){function e(){this.categories=[],this.staticMeasureColumns=[],this.dynamicMeasureColumns=[],this.columnIndex=0}return e.prototype.withCategory=function(e){var t=e.values,r=e.identityFrom,n=e.source.type,a={source:e.source,identityFields:e.identityFrom.fields,identity:e.identityFrom.identities||[],values:t};if(!e.identityFrom.identities)for(var o=0,u=t.length;o<u;o++)a.identity.push(i(r,o,t[o],n));return this.categories||(this.categories=[]),this.categories.push(a),this},e.prototype.withCategories=function(e){return _.isEmpty(this.categories)?this.categories=e:Array.prototype.push.apply(this.categories,e),this},e.prototype.withValues=function(e){for(var t=e.columns,r=0,i=t;r<i.length;r++){var n=i[r];this.staticMeasureColumns.push(n.source)}return this.staticSeriesValues=t,this},e.prototype.withGroupedValues=function(e){var t=e.groupColumn;this.dynamicSeriesMetadata={column:t.source,identityFrom:t.identityFrom,values:t.values};for(var r=e.valueColumns,i=0,n=r;i<n.length;i++){var a=n[i];this.dynamicMeasureColumns.push(a.source)}return this.dynamicSeriesValues=e.data,this},e.prototype.fillData=function(e){var t=_.first(this.categories),r=t&&t.values?t.values.length:0;if(this.hasDynamicSeries())for(var i=0,n=this.dynamicSeriesMetadata.values.length;i<n;i++)for(var o=this.dynamicSeriesValues[i],u=0,s=this.dynamicMeasureColumns.length;u<s;u++){var c=i*s+u;a(e[c],o[u],r)}if(this.hasStaticSeries())for(var l=this.hasDynamicSeries()?this.dynamicSeriesValues.length*this.dynamicMeasureColumns.length:0,u=0,s=this.staticMeasureColumns.length;u<s;u++)a(e[l+u],this.staticSeriesValues[u],r)},e.prototype.build=function(){for(var e=[],t={},r=this.categories,a=this.dynamicSeriesMetadata,u=0,s=r;u<s.length;u++){var c=s[u];n(e,c.source)}if(this.hasDynamicSeries()){n(e,a.column),t.values=o.createValueColumns([],a.identityFrom.fields,a.column);for(var l=a.values,p=0;p<l.length;p++)for(var f=l[p],v=i(a.identityFrom,p,f,a.column.type),h=0,m=this.dynamicMeasureColumns;h<m.length;h++){
var y=m[h],d=_.toPlainObject(y);d.groupName=f,n(e,d),t.values.push({source:d,values:[],identity:v})}if(0===l.length)for(var g=0,x=this.dynamicMeasureColumns;g<x.length;g++){var y=x[g],d=_.toPlainObject(y);n(e,d),t.values.push({source:d,values:[]})}if(this.hasStaticSeries()){var S=t.values.grouped();t.values.grouped=function(){return S},this.appendStaticMeasureColumns(e,t.values)}}else t.values=o.createValueColumns(),this.appendStaticMeasureColumns(e,t.values);var b=this.categories;_.isEmpty(b)||(t.categories=b),this.fillData(t.values);var w={metadata:{columns:e},categorical:t};if(this.isLegalDataView(w))return w},e.prototype.appendStaticMeasureColumns=function(e,t){if(!_.isEmpty(this.staticMeasureColumns))for(var r=0,i=this.staticMeasureColumns;r<i.length;r++){var a=i[r];n(e,a),t.push({source:a,values:[]})}},e.prototype.isLegalDataView=function(t){return!(this.hasDynamicSeries()&&this.hasStaticSeries()&&e.isVisualDataView(t.metadata.columns))},e.isVisualDataView=function(e){return!_.isEmpty(e)&&_.any(e,(function(e){return!!e.queryName}))},e.prototype.hasDynamicSeries=function(){return!!this.dynamicSeriesMetadata},e.prototype.hasStaticSeries=function(){return!!this.staticSeriesValues},e})()})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(e,r,i,n){return new c(e||t.createColorAllocatorCache(),n,r||{metadata:{columns:[]}},i)}function i(e,t,r,i){var n=r.rows;if(!(_.isEmpty(n)||n.length<=i)){var o=r.columns,u=a(e,t);if(!(u<0))for(var s=0,c=o.length;s<c;s++)if(u===o[s].index)return n[i][s]}}function n(e,t,r){var i=a(e.arg,t);if(!(i<0))for(var n=0,u=r.length;n<u;n++){var s=r[n],c=s.aggregates;if(i===s.index&&c){var l=o(c,e);if(void 0!==l)return l}}}function a(e,t){var r;s.isSelectRef(e)&&(r=e.expressionName);for(var i=0,n=t.length;i<n;i++){var a=t[i];if(a&&(!r||a.queryName))if(r){if(a.queryName===r)return i}else if(s.equals(a.expr,e))return i}return-1}function o(e,t){if(s.isPercentile(t)){var r=_.find(e.percentiles,(function(e){if(e.k===t.k){var r=!!e.exclusive;return t.exclusive===r}}));if(r)return r.value}else if(s.isAggregation(t))switch(t.func){case 3:return u(e.min,e.minLocal);case 4:return u(e.max,e.maxLocal);case 6:return e.median;case 1:return e.average}}function u(e,t){return void 0!==e?e:t}var s=e.data.SQExpr;t.createStaticEvalContext=r;var c=(function(){function e(e,t,r,i){this.colorAllocatorCache=e,this.dataView=r,this.selectTransforms=i,this.themeColors=t}return e.prototype.getColorAllocator=function(e){return this.colorAllocatorCache.get(e)},e.prototype.getThemeColor=function(e){var t=this.themeColors;if(t)return t.get(e)},e.prototype.getExprValue=function(e){var t=this.dataView,r=this.selectTransforms;if(t&&r){if(s.isAggregation(e)||s.isPercentile(e)){var a=n(e,r,t.metadata.columns);if(void 0!==a)return a}return t.table?i(e,r,t.table,0):void 0}},e.prototype.getRoleValue=function(e){},e})();t.getExprValueFromTable=i,t.findSelectIndex=a})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(e,t){return new n(e,t)}var i=e.data.SQExpr;t.createMatrixEvalContext=r;var n=(function(){function e(e,t){this.colorAllocatorProvider=e,this.dataView=t}return e.prototype.getColorAllocator=function(e){return this.colorAllocatorProvider.get(e)},e.prototype.getExprValue=function(e){if(i.isSelectRef(e))return this.valueNode?this.evaluateValue(e):this.rowNode?this.evaluateRowHeader(e):this.columnNode?this.evaluateColumnHeader(e):void 0},e.prototype.evaluateValue=function(e){var t=this.dataView.valueSources[this.valueNode.valueSourceIndex||0].queryName,r=e.expressionName;if(r===t)return this.valueNode.value},e.prototype.evaluateRowHeader=function(e){},e.prototype.evaluateColumnHeader=function(e){},e.prototype.getRoleValue=function(e){},e.prototype.setCurrentContext=function(e,t,r){this.valueNode=e,this.columnNode=r,this.rowNode=t},e.prototype.getDataView=function(){return this.dataView},e.prototype.getRowNode=function(){return this.rowNode},e.prototype.getColumnNode=function(){return this.columnNode},e.prototype.getIntersection=function(){return this.valueNode},e})()})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t,r=jsCommon.StringExtensions,i=jsCommon.Formatting,n=jsCommon.RegExpExtensions;!(function(e){function t(e){return a.lastIndex=0,e.replace(a,"")}function r(e,t){for(a.lastIndex=0;;){var r=a.exec(e);if(!r)break;var i=r[0],n=a.lastIndex-i.length,o=String.fromCharCode(57600+t.length);t.push(i),e=e.substr(0,n)+o+e.substr(a.lastIndex),a.lastIndex=n+1}return e}function i(e,t,r){void 0===r&&(r=!0);for(var i=t.length,n=0;n<i;n++){var a=String.fromCharCode(57600+n),o=t[n];if(!r){var u=o[0];o="\\"===u||1===o.length||o[o.length-1]!==u?o.substring(1):o.substring(1,o.length-1)}e=e.replace(a,o)}return e}var n=["'[^']*'",'"[^"]*"',"\\\\.","'[^']*$",'"[^"]*$',"\\\\$"],a=new RegExp(n.join("|"),"g");e.removeLiterals=t,e.preserveLiterals=r,e.restoreLiterals=i})(t||(t={}));var a,o=/({{)|(}})|{(\d+[^}]*)}/g,u="0",s="#",c="E",l=[u,s],p=new RegExp(l.join("|"),"g"),f=(function(){function e(){}return e.prototype.formatValue=function(e,t,r){if(void 0===e||null===e)return"";var i=this.getCulture(r);return a.canFormat(e)?a.format(e,t,i):v.canFormat(e)?v.format(e,t,i):e.toString()},e.prototype.format=function(e,t,r){var i=this;if(!e)return"";var n=e.replace(o,(function(e,n,a,o){if(n)return"{";if(a)return"}";var u=o.split(":"),s=parseInt(u[0],10),c=u[1];return i.formatValue(t[s],c,r)}));return n},e.prototype.isStandardNumberFormat=function(e){return v.isStandardFormat(e)},e.prototype.formatNumberWithCustomOverride=function(e,t,r,i){var n=this.getCulture(i);return v.formatWithCustomOverride(e,t,r,n)},e.prototype.dateFormatString=function(e){return this._dateTimeScaleFormatInfo||this.initialize(),this._dateTimeScaleFormatInfo.getFormatString(e)},e.prototype.setCurrentCulture=function(e){this._currentCultureSelector!==e&&(this._currentCulture=this.getCulture(e),this._currentCultureSelector=e,this._dateTimeScaleFormatInfo=new h(this._currentCulture))},e.prototype.getCulture=function(e){if(null==e)return null==this._currentCulture&&this.initialize(),this._currentCulture;var t=Globalize.findClosestCulture(e);return t||(t=Globalize.culture("en-US")),t},e.prototype.parseFloat=function(e){return Globalize.parseFloat(e,this.getCulture())},e.prototype.initialize=function(){var e=this.getCurrentCulture();this.setCurrentCulture(e);var t=this.getUrlParam("calendar");if(t){var r=this._currentCulture,i=r.calendars[t];i&&(r.calendar=i)}},e.prototype.getCurrentCulture=function(){var e=this.getUrlParam("language");return e?e:powerbi&&powerbi.common&&powerbi.common.cultureInfo?powerbi.common.cultureInfo:window.navigator.userLanguage||window.navigator.language||Globalize.culture().name},e.prototype.getUrlParam=function(e){var t=window.location.search.match(RegExp("[?&]"+e+"=([^&]*)"));return t?t[1]:void 0},e})();!(function(e){function n(e){var t=e instanceof Date;return t}function a(e,t,r){t=t||"G";var i=1===t.length;try{return i?o(e,t,r):u(e,t,r)}catch(t){return o(e,"G",r)}}function o(e,t,r){var n=r.calendar.patterns;l(r.calendar);var a=i.findDateFormat(e,t,r.name);return t=1===a.format.length?n[a.format]:a.format,r=Globalize.culture("en-US"),Globalize.format(a.value,t,r)}function u(e,i,n){var a,o=[];if(i=t.preserveLiterals(i,o),i.indexOf("F")>-1){i=r.replaceAll(i,"FFFF","FFF");var u=e.getMilliseconds();if(u%10>=1&&(i=r.replaceAll(i,"FFF","fff")),i=r.replaceAll(i,"FFF","FF"),u%100/10>=1&&(i=r.replaceAll(i,"FF","ff")),i=r.replaceAll(i,"FF","F"),u%1e3/100>=1&&(i=r.replaceAll(i,"F","f")),i=r.replaceAll(i,"F",""),""===i||"%"===i)return""}return i=s(i),a=Globalize.format(e,i,n),a=c(a,n.calendar),a=t.restoreLiterals(a,o,!1)}function s(e){return e===p?f:(p=e,e=i.fixDateTimeFormat(e),f=e,e)}function c(e,t){var r=t[":"];if(":"===r)return e;for(var i="",n=e.length,a=0;a<n;a++){var o=e.charAt(a);switch(o){case":":i+=r;break;default:i+=o}}return i}function l(e){var t=e.patterns;void 0===t.g&&(t.g=t.f.replace(t.D,t.d),t.G=t.F.replace(t.D,t.d))}var p,f;e.canFormat=n,e.format=a})(a||(a={}));var v;!(function(r){function i(e,t){if(!t||void 0===e)return e;var r="{0:"+t+"}";return e.replace("{0}",r)}function a(e,t){if(null==t)return t;if(v(t)){var i=r.getComponents(t),n=i.positive,a=i.negative,u=i.zero;return e>0?o(e,n):0===e?o(e,u):o(e,a)}return o(e,t)}function o(e,t){var r=n.run(j,t);return r?r[0]:t}function l(e,t,i){if(null==t)return e;if(null==e&&(e=u),v(e)){for(var n=r.getComponents(e),a=n.positive,o=n.negative,s=n.zero,c=[a,o,s],l=0;l<c.length;l++)c[l]=f(c[l],t,i);return c.join(r.NumberFormatComponentsDelimeter)}return f(e,t,i)}function f(e,r,i){if(r=Math.abs(r),r>=0){var a=[];e=t.preserveLiterals(e,a);var o=i?u:s,c=_.repeat(o,Math.abs(r)),l=n.run(U,e);if(l){var p=e.substr(0,l.index),f=e.substr(l.index+1,l[1].length),v=e.substr(l.index+l[0].length);if(i)f=c;else{var h=c.length-f.length;h>0?f+=c.slice(-h):h<0&&(f=f.slice(0,h))}f.length>0&&(f=k+f),e=p+f+v}else c.length>0&&(e=e.replace(B,"$1"+k+c));0!==a.length&&(e=t.restoreLiterals(e,a))}return e}function v(e){return t.removeLiterals(e).indexOf(r.NumberFormatComponentsDelimeter)!==-1}function h(e){var i={hasNegative:!1,positive:e,negative:e,zero:e},n=[];e=t.preserveLiterals(e,n);var a=e.split(r.NumberFormatComponentsDelimeter),o=a.length;return o>1&&(0!==n.length&&(a=_.map(a,(function(e){return t.restoreLiterals(e,n)}))),i.hasNegative=!0,i.positive=i.zero=a[0],i.negative=a[1],o>2&&(i.zero=a[2])),i}function m(e){var t="number"==typeof e;return t}function y(e){return q.test(e)}function d(e){if(e&&!y(e)){var t=D(e);if(!t.hasDots)return l(e,2,!0)}return e}function g(e,t,r){t=t||"G";try{return y(t)?S(e,t,r):b(e,t,r)}catch(t){return Globalize.format(e,void 0,r)}}function x(e,t,r,i){return b(e,t,i,r)}function S(e,t,r){var i,n=t.length>1?parseInt(t.substr(1,t.length-1),10):void 0,a=r.numberFormat,o=t.charAt(0);switch(o){case"e":case"E":void 0===n&&(n=6);var u=_.repeat("0",n);t="0."+u+o+"+000",i=b(e,t,r);break;case"f":case"F":i=void 0!==n?e.toFixed(n):e.toFixed(a.decimals),i=N(i,a);break;case"g":case"G":var s=Math.abs(e);if(0===s||1e-4<=s&&s<1e15)i=void 0!==n?e.toPrecision(n):e.toString();else{if("number"!=typeof e)return String(e);i=void 0!==n?e.toExponential(n):e.toExponential(),i=i.replace("e","E")}i=N(i,a);break;case"r":case"R":i=e.toString(),i=N(i,a);break;case"x":case"X":if(i=e.toString(16),"X"===o&&(i=i.toUpperCase()),void 0!==n){var c=i.length,l=e<0;l&&c--;var p=n-c,f=void 0;p>0&&(f=_.repeat("0",p)),i=l?"-"+f+i.substr(1):f+i}i=N(i,a);break;default:i=Globalize.format(e,t,r)}return i}function b(a,o,u,s){var c,l=u.numberFormat;if(!isFinite(a))return Globalize.format(a,void 0);var p=h(o);o=a>0?p.positive:0===a?p.zero:p.negative,p.hasNegative&&(a=Math.abs(a));var f=D(o,!0),v=[];if(f.hasLiterals&&(o=t.preserveLiterals(o,v)),f.hasE&&!s){var m=n.run(O,o);if(m){var y=o.substr(0,m.index),d=o.substr(m.index+2),g=C(y,f),x=F(y,f);if(1!==x&&(a*=x),"number"!=typeof a)return String(a);var S=a.toExponential(g),b=S.indexOf("e"),_=S.substr(0,b),T=S.substr(b+1),V=P(_,y,l),M=P(T,d,l);"+"===M.charAt(0)&&"+"!==m[0].charAt(1)&&(M=M.substr(1));var A=m[0].charAt(0);c=V+A+M}}if(void 0===c){var N=void 0,Q=!1,g=C(o,f),x=F(o,f);if(1!==x&&(a*=x),a=parseFloat(E(a,g)),!isFinite(a))return Globalize.format(a,void 0);if(s){var q=r.getNumericFormat(a,o);s=i(s,q),N=e.formattingService.format(s,[a],u.name),Q=!0}else N=E(a,g),N=w(a,N,g,R(o,f));c=P(N,o,l,s,Q)}return f.hasLiterals&&(c=t.restoreLiterals(c,v,!1)),L=f,c}function w(e,t,r,i){if(0===i)return t;var n=t.indexOf(".");if(n===-1)return t;for(var a=n+1,o=a+(r-i),u=o;u<t.length;++u){var s=t[u];if("0"===s||"9"===s){var c=E(e,u-a);if(parseFloat(c)===e)return c}}return t}function E(t,r){var i="",n=0;r>16&&(n=r-16,r=16);var a=e.Double.log10(Math.abs(t));if(a<16){if(a>0){var o=16-a;r>o&&(n+=r-o,r=o)}i=t.toFixed(r)}else if(16===a)i=t.toFixed(0),n+=r,n>0&&(i+=".");else{if("number"!=typeof t)return String(t);i=t.toExponential(15);var u=i.indexOf("e");if(u>0){var s=i.indexOf("."),c=i.substr(0,u),l=i.substr(u+1),p=parseInt(l,10)-(c.length-s-1);i=c.replace(".","")+_.repeat("0",p),r>0&&(i=i+"."+_.repeat("0",r))}}return n>0&&(i+=_.repeat("0",n)),i}function D(e,r,i,n){if(void 0!==L&&e===L.format)return L;for(var a=[],o=t.preserveLiterals(e,a),u={format:e,hasLiterals:0!==a.length,hasE:!1,hasCommas:!1,hasDots:!1,hasPercent:!1,hasPermile:!1,precision:void 0,optionalPrecision:void 0,scale:void 0,partsPerScale:void 0},s=0,c=o.length;s<c;s++){var l=o.charAt(s);switch(l){case"e":case"E":u.hasE=!0;break;case",":u.hasCommas=!0;break;case".":u.hasDots=!0;break;case"%":u.hasPercent=!0;break;case"":u.hasPermile=!0}}var p=h(e);return r&&(u.precision=C(p.positive,u)),n&&(u.partsPerScale=V(p.positive,u)),i&&(u.scale=F(p.positive,u)),u}function C(e,t){return T(e,t),t.precision}function R(e,t){return T(e,t),t.optionalPrecision}function T(e,r){if(!(r.precision>-1)){var i=0,n=0;if(r.hasDots){r.hasLiterals&&(e=t.removeLiterals(e));var a=e.indexOf(".");if(a>-1){for(var o=e.length,u=a;u<o;u++){var l=e.charAt(u);if(l.match(p)&&++i,l===s?++n:n=0,l===c)break}if(i>19){var f=i-19;n=Math.max(0,n-f),i=19}}}r.precision=i,r.optionalPrecision=n}}function V(e,t){if(null!=t.partsPerScale)return t.partsPerScale;var r=1;return t.hasPercent&&e.indexOf("%")>-1&&(r=100*r),t.hasPermile&&e.indexOf("")>-1&&(r=1e3*r),t.partsPerScale=r,r}function F(e,t){if(t.scale>-1)return t.scale;var r=V(e,t);if(t.hasCommas){var i=e.indexOf(".");i===-1&&(i=e.length);for(var n=i-1;n>-1;n--){var a=e.charAt(n);if(","!==a)break;r/=1e3}}return t.scale=r,r}function P(e,t,r,i,n){var a=!!i,o=t.split(".",2);if(2===o.length){var u=o[0],s=o[1],c="";i&&(c=i.replace(Q,""),e=e.replace(c,""));var l=r["."],p=n?l:".",f=e.split(p,2),v=1===f.length?f[0]+c:f[0],h=2===f.length?f[1]+c:"";h=h.replace(I,"");var m=M(v,u,r,a),y=A(h,s,a);return y.fmtOnly||""===y.value?m+y.value:m+l+y.value}return M(e,t,r,a)}function M(e,t,r,i){var n=t.indexOf(","),a=n>-1&&n<Math.max(t.lastIndexOf("0"),t.lastIndexOf("#"))&&r[","],o=0,c=0,l=r.groupSizes||[3],p=l[0],f=r[","],v="",h=e.charAt(0);"+"!==h&&"-"!==h||(v=r[h],e=e.substr(1));for(var m="0"===e,y="",d="",g=e.length-1,x=!0,S=t.length-1;S>-1;S--){var b=t.charAt(S);switch(b){case u:case s:x=!1,""!==d&&(y=d+y,d=""),i||((g>-1||b===u)&&a&&(o===p?(y=f+y,c++,c<l.length&&(p=l[c]),o=1):o++),g>-1?(m&&b===s||(y=e.charAt(g)+y),g--):b!==s&&(y=b+y));break;case",":break;default:d=b+d}}if(!i){if(g>-1&&""!==y)if(a)for(;g>-1;)o===p?(y=f+y,c++,c<l.length&&(p=l[c]),o=1):o++,y=e.charAt(g)+y,g--;else y=e.substr(0,g+1)+y;return v+d+y}return x?v+d+y:v+d+e+y}function A(e,t,r){var i=0,n=t.length,a=e.length;if(r){var o=t.charAt(n-1);return o.match(p)?{value:e,fmtOnly:""===e}:{value:e+o,fmtOnly:""===e}}for(var c="",l=!0,f=0;f<n;f++){var v=t.charAt(f);if(i<a)switch(v){case u:case s:c+=e[i++],l=!1;break;default:c+=v}else v!==s&&(c+=v,l=l&&v!==u)}return{value:c,fmtOnly:l}}function N(e,t){var r=t["+"],i=t["-"],n=t["."],a=t[","];if("+"===r&&"-"===i&&"."===n&&","===a)return e;for(var o=e.length,u="",s=0;s<o;s++){var c=e.charAt(s);switch(c){case"+":u+=r;break;case"-":u+=i;break;case".":u+=n;break;case",":u+=a;break;default:u+=c}}return u}var Q=/\{.+\}/,O=/e[+-]*[0#]+/i,q=/^[a-z]\d{0,2}$/i,I=/0+$/,U=/\.([0#]*)/g,j=/[0#,\.]+[0,#]*/g,B=/([0#])(?=[^0#]*$)/,k=".";r.NumberFormatComponentsDelimeter=";",r.getNumericFormat=a,r.addDecimalsToFormat=l,r.hasFormatComponents=v,r.getComponents=h;var L;r.canFormat=m,r.isStandardFormat=y,r.getFormatForWholeNumberAverage=d,r.format=g,r.formatWithCustomOverride=x,r.getCustomFormatMetadata=D})(v=e.NumberFormat||(e.NumberFormat={}));var h=(function(){function t(e){var t=e.calendar,r=t.patterns,i=t.months.namesAbbr,n=i&&i[0],a=r.Y,o=r.M,u=r.f,s=r.T,c=r.t,l=u.indexOf(",")>-1?", ":" ",p=0===a.indexOf("yyyy'")&&a.length>6&&"'"===a[6];this.YearPattern=p?a.substr(0,7):"yyyy";var f=u.indexOf("yy"),v=u.indexOf("MMMM");this.MonthPattern=n&&v>-1?f>v?"MMM yyyy":"yyyy MMM":a,this.DayPattern=n?o.replace("MMMM","MMM"):o;var h=u.indexOf("mm"),m=u.indexOf("tt"),y=m>-1?c.replace(":mm ",""):c;switch(this.HourPattern=f<h?this.DayPattern+l+y:y+l+this.DayPattern,this.MinutePattern=c,this.SecondPattern=s,this.MillisecondPattern=s.replace("ss","ss.fff"),e.name){case"fi-FI":this.DayPattern=this.DayPattern.replace("'ta'",""),this.HourPattern=this.HourPattern.replace("'ta'","")}}return t.prototype.getFormatString=function(t){switch(t){case e.DateTimeUnit.Year:return this.YearPattern;case e.DateTimeUnit.Month:return this.MonthPattern;case e.DateTimeUnit.Week:case e.DateTimeUnit.Day:return this.DayPattern;case e.DateTimeUnit.Hour:return this.HourPattern;case e.DateTimeUnit.Minute:return this.MinutePattern;case e.DateTimeUnit.Second:return this.SecondPattern;case e.DateTimeUnit.Millisecond:return this.MillisecondPattern}},t})();e.formattingService=new f})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t;!(function(t){function r(e){return JSON.stringify(e.accept(n.instance))}function i(e){for(var r="[",i=0,n=e.length;i<n;i++)i>0&&(r+=","),r+=t.serialize(e[i]);return r+"]"}t.serialize=r,t.serializeArray=i;var n=(function(e){function t(){return e.apply(this,arguments)||this}return __extends(t,e),t.prototype.visitColumnRef=function(e){return{col:{s:e.source.accept(this),r:e.ref}}},t.prototype.visitMeasureRef=function(e){return{measure:{s:e.source.accept(this),r:e.ref}}},t.prototype.visitAggr=function(e){return{agg:{a:e.arg.accept(this),f:e.func}}},t.prototype.visitEntity=function(e){return{e:e.entity}},t.prototype.visitHierarchyLevel=function(e){return{h:e.arg.accept(this),l:e.level}},t.prototype.visitHierarchy=function(e){return{e:e.arg.accept(this),h:e.hierarchy}},t.prototype.visitPropertyVariationSource=function(e){return{e:e.arg.accept(this),n:e.name,p:e.property}},t.prototype.visitAnd=function(e){return{and:{l:e.left.accept(this),r:e.right.accept(this)}}},t.prototype.visitCompare=function(e){return{comp:{k:e.comparison,l:e.left.accept(this),r:e.right.accept(this)}}},t.prototype.visitConstant=function(e){return{const:{t:e.type.primitiveType,v:e.value}}},t.prototype.visitArithmetic=function(e){return{arithmetic:{o:e.operator,l:e.left.accept(this),r:e.right.accept(this)}}},t.prototype.visitScopedEval=function(e){return{scopedEval:{e:e.expression.accept(this),s:i(e.scope)}}},t.prototype.visitWithRef=function(e){return{withRef:{e:e.expressionName}}},t.prototype.visitTransformTableRef=function(e){return{transformTableRef:{source:e.source}}},t.prototype.visitTransformOutputRoleRef=function(e){var t={transformOutputRoleRef:{role:e.role}};return e.transform&&(t.transformOutputRoleRef.transform=e.transform),t},t.prototype.visitFloor=function(e){var t={floor:{a:e.arg.accept(this),s:e.size}};return null!=e.timeUnit&&(t.floor.timeunit=e.timeUnit),t},t.prototype.visitRoleRef=function(e){return{roleRef:{role:e.role}}},t.prototype.visitDefault=function(e){},t})(e.DefaultSQExprVisitor);n.instance=new n})(t=e.SQExprShortSerializer||(e.SQExprShortSerializer={}))})(t=e.data||(e.data={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){var r=e.data.Selector,i=(function(){function t(e,t,i){this.selector=e,this.highlight=t,this.key=JSON.stringify({selector:e?r.getKey(e):null,highlight:t}),this.keyWithoutHighlight=JSON.stringify({selector:e?r.getKey(e):null}),this.selectorsByColumn=i}return t.prototype.equals=function(e){return this.selector&&e.selector?this.highlight===e.highlight&&r.equals(this.selector,e.selector):!this.selector==!e.selector&&this.highlight===e.highlight},t.isEqual=function(e,t){return e===t||null!=e&&null!=t&&e.equals(t)},t.prototype.includes=function(t,r){void 0===r&&(r=!1);var i=this.selector,n=t.selector;if(!i||!n)return!1;var a=i.data,o=n.data;if(!a&&i.metadata&&i.metadata!==n.metadata)return!1;if(!r&&this.highlight!==t.highlight)return!1;if(a){if(!o)return!1;if(a.length>0)for(var u=0,s=a.length;u<s;u++){var c=a[u];if(!o.some((function(t){return e.DataViewScopeIdentity.equals(c,t)})))return!1}}return!0},t.prototype.getKey=function(){return this.key},t.prototype.getKeyWithoutHighlight=function(){return this.keyWithoutHighlight},t.prototype.hasIdentity=function(){return this.selector&&!!this.selector.data},t.prototype.getSelector=function(){return this.selector},t.prototype.getSelectorsByColumn=function(){return this.selectorsByColumn},t.createNull=function(e){return void 0===e&&(e=!1),new t(null,e)},t.createWithId=function(e,r){void 0===r&&(r=!1);var i=null;return e&&(i={data:[e]}),new t(i,r)},t.createWithMeasure=function(e,r){void 0===r&&(r=!1);var i={metadata:e},n=new t(i,r);return n.selectorsByColumn={metadata:[e]},n},t.createWithIdAndMeasure=function(e,r,i){void 0===i&&(i=!1);var n={};e&&(n.data=[e]),r&&(n.metadata=r),e||r||(n=null);var a=new t(n,i);return a},t.createWithIdAndMeasureAndCategory=function(e,t,r,i){void 0===i&&(i=!1);var n=this.createWithIdAndMeasure(e,t,i);return n.selector&&(n.selectorsByColumn={},e&&r&&(n.selectorsByColumn.dataMap={},n.selectorsByColumn.dataMap[r]=[e]),t&&(n.selectorsByColumn.metadata=[t])),n},t.createWithIds=function(e,r,i){void 0===i&&(i=!1);var n=null,a=t.idArray(e,r);return a&&(n={data:a}),new t(n,i)},t.createWithIdsAndMeasure=function(e,r,i,n){void 0===n&&(n=!1);var a={},o=t.idArray(e,r);return o&&(a.data=o),i&&(a.metadata=i),e||r||i||(a=null),new t(a,n)},t.createWithSelectorForColumnAndMeasure=function(e,i,n){void 0===n&&(n=!1);var a={};_.isEmpty(e)||(a.dataMap=e),i&&(a.metadata=[i]),e||i||(a=null);var o=r.convertSelectorsByColumnToSelector(a);return new t(o,n,a)},t.createWithSelectorForColumnAndMeasures=function(e,i,n){void 0===n&&(n=!1);var a={};_.isEmpty(e)||(a.dataMap=e),_.isEmpty(i)||(a.metadata=i),!e&&_.isEmpty(i)&&(a=null);var o=r.convertSelectorsByColumnToSelector(a);return new t(o,n,a)},t.createWithHighlight=function(e){var r=new t(e.getSelector(),(!0));return r.selectorsByColumn=e.selectorsByColumn,r},t.idArray=function(e,t){if(e||t){var r=[];return e&&r.push(e),t&&t!==e&&r.push(t),r}},t})();t.SelectionId=i;var n=(function(){function e(){}return e.builder=function(){return new e},e.prototype.withColumnIdentity=function(e,t){return this.addItemToDataMap(t,e),this},e.prototype.withCategoryIdentity=function(e,t){return e&&e.source&&e.source.queryName&&this.addItemToDataMap(e.source.queryName,t),this},e.prototype.withCategory=function(e,t){return e&&e.source&&e.source.queryName&&e.identity&&this.addItemToDataMap(e.source.queryName,e.identity[t]),this},e.prototype.withSeries=function(e,t){return e&&e.source&&e.source.queryName&&t&&this.addItemToDataMap(e.source.queryName,t.identity),this},e.prototype.withMeasure=function(e){return this.ensureMeasures(),null!=e&&this.measures.push(e),this},e.prototype.withMeasures=function(e){this.ensureMeasures();for(var t=0,r=e;t<r.length;t++){var i=r[t];this.measures.push(i)}return this},e.prototype.createSelectionId=function(){return i.createWithSelectorForColumnAndMeasures(this.dataMap,this.measures)},e.prototype.ensureMeasures=function(){void 0===this.measures&&(this.measures=[])},e.prototype.addItemToDataMap=function(e,t){if(t){this.dataMap||(this.dataMap={});var r=this.dataMap,i=r[e];return null==i?void(r[e]=[t]):void i.push(t)}},e})();t.SelectionIdBuilder=n})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(e,t){if(e){_.isEmpty(t)&&(t=e.defaultPresetName);var r=e.presets[t];return r||(r=e.presets[e.defaultPresetName]),r}}function i(t){var r=[];if(t){var i=t.presets;if(i)for(var n in i){var a=i[n];r.push({value:a.name,displayName:a.displayName})}}return e.createEnumType(r)}t.getStylePreset=r,t.getStylePresetsEnum=i})(t=e.VisualStylePresetHelpers||(e.VisualStylePresetHelpers={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(e){var t=jsCommon.ArrayExtensions,r=(function(){function e(e,t){this.basePickerColors=[{value:"#FFFFFF"},{value:"#000000"}],this.colors=e||n.getDefaultTheme(),this.sentimentColors=t||n.defaultSentimentColors,this.scales={},(r=this.basePickerColors).push.apply(r,_.take(this.colors,8));var r}return e.prototype.getColorScaleByKey=function(e){var t=this.scales[e];return void 0===t&&(t=this.createScale(),this.scales[e]=t),t},e.prototype.getNewColorScale=function(){return this.createScale()},e.prototype.getColorByIndex=function(e){return this.colors[e]},e.prototype.getSentimentColors=function(){return this.sentimentColors},e.prototype.getBasePickerColors=function(){return this.basePickerColors},e.prototype.getAllColors=function(){return this.colors},e.prototype.createScale=function(){return i.createFromColors(this.colors)},e})();e.DataColorPalette=r;var i=(function(){function e(e){this.scale=e}return e.prototype.getColor=function(e){return this.scale(e)},e.prototype.clearAndRotateScale=function(){var e=this.scale.domain().length,r=t.rotate(this.scale.range(),e);this.scale=d3.scale.ordinal().range(r)},e.prototype.clone=function(){return new e(this.scale.copy())},e.prototype.getDomain=function(){return this.scale.domain()},e.createFromColors=function(t){return new e(d3.scale.ordinal().range(t))},e})();e.D3ColorScale=i;var n=(function(){function e(){}return e.getDefaultTheme=function(){if(!e.defaultTheme){e.defaultTheme=[];for(var t=e.defaultBaseColors,r=0;r<e.colorSectorCount;++r)for(var i=0,n=t.length;i<n;++i)e.defaultTheme.push({value:jsCommon.Color.rotate(t[i].value,r/e.colorSectorCount)})}return e.defaultTheme},e})();n.colorSectorCount=12,n.defaultBaseColors=[{value:"#01B8AA"},{value:"#374649"},{value:"#FD625E"},{value:"#F2C80F"},{value:"#5F6B6D"},{value:"#8AD4EB"},{value:"#FE9666"},{value:"#A66999"},{value:"#3599B8"},{value:"#DFBFBF"},{value:"#4AC5BB"},{value:"#5F6B6D"},{value:"#FB8281"},{value:"#F4D25A"},{value:"#7F898A"},{value:"#A4DDEE"},{value:"#FDAB89"},{value:"#B687AC"},{value:"#28738A"},{value:"#A78F8F"},{value:"#168980"},{value:"#293537"},{value:"#BB4A4A"},{value:"#B59525"},{value:"#475052"},{value:"#6A9FB0"},{value:"#BD7150"},{value:"#7B4F71"},{value:"#1B4D5C"},{value:"#706060"},{value:"#0F5C55"},{value:"#1C2325"},{value:"#7D3231"},{value:"#796419"},{value:"#303637"},{value:"#476A75"},{value:"#7E4B36"},{value:"#52354C"},{value:"#0D262E"},{value:"#544848"}],n.defaultSentimentColors=[{value:"#C0433A"},{value:"#E8D62E"},{value:"#79C75B"}],e.ThemeManager=n})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));var powerbi;!(function(e){var t;!(function(t){function r(){return new o}function i(t){return t.strategy===e.NullStrategy.asZero}function n(t){switch(t.strategy){case e.NullStrategy.noColor:return;case e.NullStrategy.specificColor:return t.color;case e.NullStrategy.asZero:}}var a=jsCommon.Color;t.createColorAllocatorFactory=r;var o=(function(){function e(){}return e.prototype.linearGradient2=function(e){return new u(e)},e.prototype.linearGradient3=function(e,t){return t?new c(e):new s(e)},e})(),u=(function(){function e(e){this.options=e;var t=e.min,r=e.max;this.scale=a.createLinearColorScale([t.value,r.value],[t.color,r.color],!0)}return e.prototype.color=function(e){var t=this.options.nullColoringStrategy;if(null===e&&t){if(!i(t))return n(t);e=0}return this.scale(e)},e})(),s=(function(){function e(e){this.options=e;var t=e.min,r=e.mid,i=e.max;this.scale=a.createLinearColorScale([t.value,r.value,i.value],[t.color,r.color,i.color],!0)}return e.prototype.color=function(e){var t=this.options.nullColoringStrategy;if(null===e&&t){if(!i(t))return n(t);e=0}return this.scale(e)},e})(),c=(function(){function e(e){this.options=e;var t=e.min,r=e.mid,i=e.max;this.scale1=a.createLinearColorScale([t.value,r.value],[t.color,r.color],!0),this.scale2=a.createLinearColorScale([r.value,i.value],[r.color,i.color],!0)}return e.prototype.color=function(e){var t=this.options.nullColoringStrategy;if(null===e&&t){if(!i(t))return n(t);e=0}return e<=this.options.mid.value?this.scale1(e):this.scale2(e)},e})()})(t=e.visuals||(e.visuals={}))})(powerbi||(powerbi={}));

window.parseTimeMarkers['VisualsSandboxCore.min.js'].end = Date.now();
