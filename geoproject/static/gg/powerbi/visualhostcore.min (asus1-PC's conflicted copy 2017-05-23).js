var powerbi;!function(e){var t;!function(e){e.resourceLoaderHttpTimeout=1e4,e.visualCDNBlobDevName="dev",e.visualCDNBlobDefaultName="prod",e.visualCDNBlobAppStoreName="app-store"}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){e.reloadEmptyVisuals="reloadEmptyVisuals"}(t=e.constants||(e.constants={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){e.ShapeMap="ShapeMap"}(t=e.SharedResourcePackageNames||(e.SharedResourcePackageNames={}))}(t=e.contracts||(e.contracts={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,t,r){return new o(e,t,r,function(){return!0})}function i(e,t,r){var i=function(e){return e.phantomJSApproved};return new o(e,t,r,i)}t.createApprovedResourceLoader=r,t.createPhantomJsApprovedResourceLoader=i;var o=function(){function r(e,t,r,i){this.locale=e&&e.locale,this.promiseFactory=e.promiseFactory,this.approvedResourceService=t,this.customVisualEndpoints=this.initEndpoints(),this.telemetryService=r,this.heartBeatPromises=[],this.resourceFilter=i}return r.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.reject()},r.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},r.prototype.loadResourcePackage=function(t){var r=this,i=function(i,o){r.telemetryService.logEvent(e.telemetry.ApprovedResourceFailLoaded,t.name,i,r.telemetryService.root.id,!0,e.telemetry.ErrorSource.PowerBI,o)};return this.checkCustomVisualEndpointHeartBeat().catch(function(e){return r.promiseFactory.reject(e)}).then(function(e){var o=[];return r.approvedResourceService.isApprovedResource(t.name)?(r.approvedResourceService.hasApi(t.name)?o.push(r.loadResourcesWithVisualApi(e,t,i)):o=o.concat(r.loadResourcesWithoutVisualApi(e,t,i)),r.promiseFactory.all(o)):r.promiseFactory.reject("Visual is not an approved visual")})},r.prototype.loadResourcePackageItem=function(e,t){return this.promiseFactory.reject()},r.prototype.loadSharedResource=function(e){return this.promiseFactory.reject()},r.prototype.loadVisualPlugins=function(e){var t=[];if(e)for(var r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadVisualPlugin(o))}return this.promiseFactory.all(t)},r.prototype.loadVisualPlugin=function(r){var i=this.promiseFactory.defer();return r&&r.items&&r.items.length>0?this.loadResourcePackage(r).then(function(){var o=e.visuals.plugins[r.name];o?(o.iconUrl=t.resourceInjector.getInjectedIconUrl(r.name),i.resolve(o)):i.reject("Unable to load visual plugin from resource package: "+r.name)}).catch(function(){i.reject("failed to resolve all promises")}):i.resolve(null),i.promise},r.prototype.destroy=function(){},r.prototype.loadResourcesWithoutVisualApi=function(r,i,o){var n=this,a=[],s=this.approvedResourceService.cdnUrlBuilder(r,i.name,".js"),u=t.resourceInjector.injectJsUrl(this.promiseFactory,i.name,s);u.then(function(){var t=e.visuals.plugins[i.name];return t?(e.extensibility.visualPluginAdapter.transformPlugin(t),n.promiseFactory.resolve(t)):n.promiseFactory.reject("Unable to load visual plugin from resource package: "+i.name)}).catch(function(e){return o(s,e),n.promiseFactory.reject(e)}),a.push(u);var l=this.approvedResourceService.cdnUrlBuilder(r,i.name,".css"),c=t.resourceInjector.injectCssUrl(this.promiseFactory,i.name,l);return c.catch(function(e){return o(l,e),n.promiseFactory.reject(e)}),a.push(c),a},r.prototype.loadResourcesWithVisualApi=function(r,i,o){var n=this,a=this.approvedResourceService.cdnUrlBuilder(r,i.name,t.CustomVizJSONSuffix),s=this.promiseFactory.defer();return $.get(a).done(function(r){var i=t.visualPluginUtility.createVisualPlugin(r,n.locale);e.extensibility.visualPluginAdapter.transformPlugin(i),e.visuals.plugins[i.name]=i,s.resolve(null)}).fail(function(e){o(a,e),s.reject(e)}),s.promise},r.prototype.initEndpoints=function(){var t=e.customVisualsUrl||r.defaultCustomVisualEndpoints;return t.split(";")},r.prototype.checkCustomVisualEndpointHeartBeat=function(){var e=this.promiseFactory.defer();return this.heartBeatPromises.push(e),r.customVisualEndpoint?e.resolve(r.customVisualEndpoint):1===this.heartBeatPromises.length&&this.checkNextEndpoint(),e.promise},r.prototype.checkNextEndpoint=function(t){var i=this;t=t||0;var o=this.customVisualEndpoints[t];this.approvedResourceService.getApprovedResources(o).done(function(t){var n=i.resourceFilter?_.pick(t,i.resourceFilter):t;i.approvedResourceService.setApprovedResources(n),i.telemetryService.logEvent(e.telemetry.ApprovedResourceEndpointDown,o,!1,i.telemetryService.root.id,!1,e.telemetry.ErrorSource.PowerBI),r.customVisualEndpoint=o;for(var a;void 0!==(a=i.heartBeatPromises.pop());)a.resolve(o)}).fail(function(r){var o=t+1;if(i.telemetryService.logEvent(e.telemetry.ApprovedResourceEndpointDown,i.customVisualEndpoints[t],o===i.customVisualEndpoints.length,i.telemetryService.root.id,!0,e.telemetry.ErrorSource.PowerBI,r.status,r.statusText),++t<i.customVisualEndpoints.length)i.checkNextEndpoint(t);else for(var n=void 0;void 0!==(n=i.heartBeatPromises.pop());)n.reject("All Custom Visual Endpoints Are Down")})},r}();o.defaultCustomVisualEndpoints="https://visuals.azureedge.net/;https://visuals2.azureedge.net/;https://extendcustomvisual.blob.core.windows.net/"}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e){return new i(e)}t.createApprovedResourceService=r;var i=function(){function r(e){this.options=e,this.trustedVisuals=[]}return r.prototype.isApprovedResource=function(e){return!!this.approvedVisuals&&!!this.approvedVisuals[e]},r.prototype.isTrustedResource=function(e){return!!_.find(this.trustedVisuals,function(t){return t===e})},r.prototype.addTrustedVisual=function(e){this.isTrustedResource(e)||this.trustedVisuals.push(e)},r.prototype.removeApprovedResource=function(e){this.approvedVisuals&&(this.approvedVisuals[e]=void 0)},r.prototype.getCdnEnvEndpointName=function(r){var i=e.visualCDNBlobContainerUrl||t.visualCDNBlobDefaultName;return this.options&&this.options.appStoreCdnOverride&&this.options.appStoreCdnOverride()&&(i=t.visualCDNBlobAppStoreName),r+i},r.prototype.getApprovedResources=function(e){return $.ajax({url:this.getCdnEnvEndpointName(e)+"/approvedResources.json",type:"GET",timeout:t.resourceLoaderHttpTimeout})},r.prototype.cdnUrlBuilder=function(e,t,r){return this.getCdnEnvEndpointName(e)+"/"+t+r},r.prototype.setApprovedResources=function(e){this.approvedVisuals=e},r.prototype.getTrustedResources=function(){return this.trustedVisuals},r.prototype.hasApi=function(e){return!!this.approvedVisuals&&!!this.approvedVisuals[e]&&!!this.approvedVisuals[e].apiVersion},r}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,t,r,o){return new i(e,t,r,o)}t.createConditionalResourceLoader=r;var i=function(){function r(e,t,r,i){this.promiseFactory=e,this.resourceLoaderInitOptions=t,this.resourceLoaderFactories=r,this.approvedResourceService=i,this.resourceLoaderCollection={}}return r.prototype.resourceLoaderSelector=function(e){switch(e.type){case 0:return this.getCustomVisualResourceLoader(e);case 1:return this.getStaticResourceResourceLoader()}},r.prototype.getStaticResourceResourceLoader=function(){return this.getLocalResourceLoader()},r.prototype.getCustomVisualResourceLoader=function(e){if(this.approvedResourceService.isTrustedResource(e.name)){if(this.getApprovedResourcesForTrustedVisualsEnabled())return this.getTrustedResourceLoader()}else{if(this.resourceLoaderInitOptions.getApprovedResourcesEnabled())return this.getApprovedResourceLoader();if(this.resourceLoaderInitOptions.getSandboxVisualsEnabled())return this.getSandboxResourceLoader()}return this.getLocalResourceLoader()},r.prototype.getApprovedResourcesForTrustedVisualsEnabled=function(){return this.resourceLoaderInitOptions.getApprovedResourcesEnabled()||e.visualCDNBlobContainerUrl!==t.visualCDNBlobDevName},r.prototype.getLocalResourceLoader=function(){return void 0===this.resourceLoaderCollection.localResourceLoader&&(this.resourceLoaderCollection.localResourceLoader=this.resourceLoaderFactories.localResourceLoaderFactory()),this.resourceLoaderCollection.localResourceLoader},r.prototype.getSandboxResourceLoader=function(){return void 0===this.resourceLoaderCollection.sandboxResourceLoader&&(this.resourceLoaderCollection.sandboxResourceLoader=this.resourceLoaderFactories.sandboxResourceLoaderFactory()),this.resourceLoaderCollection.sandboxResourceLoader},r.prototype.getApprovedResourceLoader=function(){return void 0===this.resourceLoaderCollection.approvedResourceLoader&&(this.resourceLoaderCollection.approvedResourceLoader=this.resourceLoaderFactories.approvedResourceLoaderFactory()),this.resourceLoaderCollection.approvedResourceLoader},r.prototype.getTrustedResourceLoader=function(){return void 0===this.resourceLoaderCollection.trustedResourceLoader&&(this.resourceLoaderCollection.trustedResourceLoader=this.resourceLoaderFactories.trustedResourceLoaderFactory()),this.resourceLoaderCollection.trustedResourceLoader},r.prototype.loadTrustedResourcePackages=function(e){var t=[];return t.push(this.getTrustedResourceLoader().loadTrustedResourcePackages(e)),this.promiseFactory.all(t)},r.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.resourceLoaderSelector(o).loadResourcePackage(o))}return this.promiseFactory.all(t)},r.prototype.loadResourcePackage=function(e){var t=this,r=this.resourceLoaderSelector(e);return r===this.resourceLoaderCollection.approvedResourceLoader?r.loadResourcePackage(e).catch(function(r){return t.resourceLoaderInitOptions.getSandboxVisualsEnabled?(t.approvedResourceService.removeApprovedResource(e.name),t.getSandboxResourceLoader().loadResourcePackage(e)):t.getLocalResourceLoader().loadResourcePackage(e)}):r.loadResourcePackage(e)},r.prototype.loadVisualPlugin=function(e){return this.resourceLoaderSelector(e).loadVisualPlugin(e)},r.prototype.loadVisualPlugins=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.resourceLoaderSelector(o).loadVisualPlugin(o))}return this.promiseFactory.all(t)},r.prototype.loadResourcePackageItem=function(e,t){return this.resourceLoaderSelector(e).loadResourcePackageItem(e,t)},r.prototype.loadSharedResource=function(e){return this.getLocalResourceLoader().loadSharedResource(e)},r.prototype.destroy=function(){var e=this.resourceLoaderCollection;for(var t in e)e.hasOwnProperty(t)&&e[t].destroy()},r}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,t,r,o){return new i(e,t,r,o)}t.createTrustedResourceLoader=r,t.CustomVizJSONSuffix=".pbiviz.json";var i=function(){function r(e,t,r,i){this.locale=e&&e.locale,this.promiseFactory=e.promiseFactory,this.approvedResourceService=t,this.resourcePackagesService=r,this.customVisualEndpoints=this.initEndpoints(),this.telemetryService=i,this.heartBeatPromises=[]}return r.prototype.loadTrustedResourcePackages=function(r){var i=[];if(r&&r.length>0)for(var o=9999,n=0,a=r;n<a.length;n++){var s=a[n];if(e.visuals.plugins[s])i.push(this.promiseFactory.resolve([e.visuals.plugins[s]]));else{var u={id:o++,name:s,type:0,items:[{name:s,type:5,path:s+t.CustomVizJSONSuffix}]};this.resourcePackagesService.registerPackages([u]),i.push(this.loadResourcePackage(u))}}return this.promiseFactory.all(i)},r.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},r.prototype.loadResourcePackage=function(r){var i=this,o=function(t,o){i.telemetryService.logEvent(e.telemetry.ApprovedResourceFailLoaded,r.name,t,i.telemetryService.root.id,!0,e.telemetry.ErrorSource.PowerBI,o)};return this.checkCustomVisualEndpointHeartBeat().catch(function(e){return i.promiseFactory.reject(e)}).then(function(e){var n=[];if(r&&r.items)for(var a=function(a){if(5===a.type){var s=i.approvedResourceService.cdnUrlBuilder(e,r.name,t.CustomVizJSONSuffix),u=i.loadCustomVisualJson(r.name,s);return u.catch(function(e){return o(s,e),i.promiseFactory.reject(e)}),n.push(u),"break"}},s=0,u=r.items;s<u.length;s++){var l=u[s],c=a(l);if("break"===c)break}return i.promiseFactory.all(n)})},r.prototype.loadResourcePackageItem=function(e,t){return this.promiseFactory.reject()},r.prototype.loadSharedResource=function(e){return this.promiseFactory.reject()},r.prototype.loadVisualPlugins=function(e){return this.promiseFactory.reject()},r.prototype.loadVisualPlugin=function(e){return this.promiseFactory.reject()},r.prototype.destroy=function(){},r.prototype.loadCustomVisualJson=function(r,i){var o=this,n=this.promiseFactory.defer();return $.ajax({url:i,type:"GET",timeout:t.resourceLoaderHttpTimeout}).done(function(r){var i=t.visualPluginUtility.createVisualPlugin(r,o.locale);i.custom=!0,i.name===t.EsriVisual&&(i.custom=!1),e.extensibility.visualPluginAdapter.transformPlugin(i),e.visuals.plugins[i.name]=i,n.resolve(i)}).fail(function(t){o.telemetryService.logEvent(e.telemetry.ApprovedResourceFailLoaded,r,i,o.telemetryService.root.id,!0,e.telemetry.ErrorSource.PowerBI,t),n.reject(t)}),n.promise},r.prototype.initEndpoints=function(){var t=e.customVisualsUrl||r.defaultCustomVisualEndpoints;return t.split(";")},r.prototype.checkCustomVisualEndpointHeartBeat=function(){function i(){var u=n[o];$.ajax({url:s.getCdnEnvEndpointName(u)+"/ping",type:"HEAD",timeout:t.resourceLoaderHttpTimeout}).done(function(){r.customVisualEndpoint=u;for(var e=0,t=l;e<t.length;e++){var i=t[e];i.resolve(u)}}).fail(function(){var t=o+1;if(a.logEvent(e.telemetry.ApprovedResourceEndpointDown,n[o],t===n.length,a.root.id,!0,e.telemetry.ErrorSource.PowerBI),++o<n.length)i();else for(var r=0,s=l;r<s.length;r++){var u=s[r];u.reject("All Custom Visual Endpoints Are Down")}})}var o=0,n=this.customVisualEndpoints,a=this.telemetryService,s=this.approvedResourceService,u=this.promiseFactory.defer();this.heartBeatPromises.push(u);var l=this.heartBeatPromises;return r.customVisualEndpoint?u.resolve(r.customVisualEndpoint):1===this.heartBeatPromises.length&&i(),u.promise},r}();i.defaultCustomVisualEndpoints="https://visuals.azureedge.net/;https://visuals2.azureedge.net/;https://extendcustomvisual.blob.core.windows.net/"}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,t,r){return new o(e,t,r||new i(e.promiseFactory))}t.createResourceLoader=r;var i=function(){function e(e){this.promiseFactory=e}return e.prototype.get=function(e,t,r){return this.promiseFactory.reject()},e.prototype.getBlob=function(e,t,r){return this.promiseFactory.reject()},e}(),o=function(){function r(e,t,r){this.provider=t,this.sharedResourceItemProxy=r,this.promiseFactory=e&&e.promiseFactory}return r.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.reject()},r.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},r.prototype.loadResourcePackage=function(e){var t=[];if(e&&e.items)for(var r=0,i=e.items;r<i.length;r++){var o=i[r];switch(o.type){case 0:t.push(this.loadCustomVisualJS(e.id,e.name,o));break;case 1:t.push(this.loadCustomVisualCss(e.id,e.name,o));break;case 5:t.push(this.loadCustomVisualMetadata(e.id,e.name,o))}}return this.promiseFactory.all(t)},r.prototype.loadResourcePackageItem=function(e,t){var r=_.find(e.items,function(e){return e.name===t});return r?r.content?this.promiseFactory.resolve(r.content):this.loadBlob(e.id,e.name,r):this.promiseFactory.resolve(null)},r.prototype.loadSharedResource=function(e){return this.sharedResourceItemProxy.get(null,null,e)},r.prototype.loadVisualPlugin=function(t){var r=this,i=this.promiseFactory.defer();return t&&t.items&&t.items.length>0?this.loadResourcePackage(t).then(function(){var o=e.visuals.plugins[t.name];o?(o.iconUrl=r.getIconUrl(t),i.resolve(o)):i.reject("Unable to load visual plugin from resource package")}).catch(function(){i.reject("failed to resolve all promises")}):i.resolve(null),i.promise},r.prototype.destroy=function(){},r.prototype.loadVisualPlugins=function(e){var t=[];if(e)for(var r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadVisualPlugin(o))}return this.promiseFactory.all(t)},r.prototype.getIconUrl=function(e){var t="#css-"+e.name,r=$(t)[0],i=_.find(document.styleSheets,function(e){return e.ownerNode===r});if(!i)return"";for(var o=0,n=i.cssRules;o<n.length;o++){var a=n[o],s=a;if(s.selectorText&&s.selectorText===".visual-icon."+e.name)return s.style.backgroundImage}return""},r.prototype.loadCustomVisualJS=function(r,i,o){var n=this.promiseFactory.defer();return o.content?(t.resourceInjector.injectJsCode(i,o.content),n.resolve(o.content)):this.provider.get(r,i,o.path).then(function(r){t.resourceInjector.injectJsCode(i,r),o.content=r;var a=e.visuals.plugins[i];a?(e.extensibility.visualPluginAdapter.transformPlugin(a),n.resolve(r)):n.reject("Unable to load visual plugin from resource package: "+i)}).catch(function(e){n.reject(e)}),n.promise},r.prototype.loadCustomVisualCss=function(e,r,i){var o=this.promiseFactory.defer();return i.content?(t.resourceInjector.injectCssCode(r,i.content),o.resolve(i.content)):this.provider.get(e,r,i.path).then(function(e){t.resourceInjector.injectCssCode(r,e),i.content=e,o.resolve(e)}).catch(function(e){o.reject(e)}),o.promise},r.prototype.loadCustomVisualMetadata=function(e,t,r){var i=this,o=this.promiseFactory.defer();try{r.content?o.resolve(this.createPlugin(t,r.content)):this.provider.get(e,t,r.path).then(function(e){o.resolve(i.createPlugin(t,e))}).catch(function(e){o.reject(e)})}catch(e){o.reject(e)}return o.promise},r.prototype.createPlugin=function(r,i){var o=i;"object"!=typeof i&&(o=JSON.parse(i)),t.resourceInjector.injectJsCode(r,o.content.js),t.resourceInjector.injectCssCode(r,o.content.css);var n=e.visuals.plugins[r];return n.capabilities=o.capabilities,n.iconUrl='url("'+o.content.iconBase64+'")',n.apiVersion=o.apiVersion,n.content=o.content,e.extensibility.visualPluginAdapter.transformPlugin(n),n},r.prototype.loadBlob=function(e,t,r){var i=this.promiseFactory.defer();return r.contentBlob?i.resolve(r.contentBlob):this.provider.getBlob(e,t,r.path).then(function(e){r.contentBlob=e,i.resolve(e)}).catch(function(e){i.reject(e)}),i.promise},r}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){var i=o(t),n=e.capabilities,a=e&&e.stringResources&&e.stringResources[i];return n&&a&&r(n,a),e}function r(e,t){for(var o in e)if(e.hasOwnProperty(o))if("object"==typeof e[o])r(e[o],t);else if("displayNameKey"===o&&e.displayName){var n=e.displayNameKey;e.displayName=i(t,n)||e.displayName}}function i(e,t){return e[t]}function o(e){var t=e,r={ar:"ar-SA",bg:"bg-BG",ca:"ca-ES",cz:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR","en-US":"en-US",es:"es-ES",et:"et-EE",eu:"eu-ES",fi:"fi-FI",fr:"fr-FR",gl:"gl-ES",he:"he-IL",hi:"hi-IN",hr:"hr-HR",hu:"hu-HU",id:"id-ID",it:"it-IT",jp:"ja-JP",kk:"kk-KZ",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ms:"ms-MY",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",br:"pt-BR",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",si:"sl-SI","sr-Cyrl":"sr-Cyrl-RS","sr-Latn":"sr-Latn-RS",sv:"sv-SE",th:"th-TH",tr:"tr-TR",uk:"uk-UA",vi:"vi-VN","zh-Hans":"zh-CN","zh-Hant":"zh-TW"};return r[t]||t||navigator.language}e.setLocalizedCapabilities=t,e.getLocale=o}(t=e.LocalizationResourceUtility||(e.LocalizationResourceUtility={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r,i=jsCommon.Lazy,o=e.visuals.plugins;!function(t){function r(e,t){return e?!!e.custom:!_.include(l,t)}function n(t){return t&&t.capabilities&&t.capabilities.dataViewMappings&&!!e.ScriptResultUtil.findScriptResultMapping(t.capabilities.dataViewMappings)}function a(e){return!(!e||!e.scriptVisualEnabled)}function s(t,r){return(t===e.visuals.plugins.map.name||t===e.visuals.plugins.filledMap.name)&&r}function u(e){if(!e)return!1;var t=c.getValue();return!!t[e.name]}var l=["play","subview","smallMultiple"],c=new i(function(){return e={},e[o.card.name]=!0,e[o.gauge.name]=!0,e[o.image.name]=!0,e[o.kpi.name]=!0,e[o.textbox.name]=!0,e;var e});t.isCustomVisual=r,t.isScriptVisual=n,t.isScriptVisualQueryable=a,t.shouldDisableVisual=s,t.isLightWeightRenderingVisual=u}(r=t.utils||(t.utils={}));var n;!function(r){function i(t,r,i){var o=e.Prototype.inherit(t);return o.create=r,i&&i(o),o}function o(e,t){}function n(e){var t="#css-"+e,r=$(t)[0],i=_.find(document.styleSheets,function(e){return e.ownerNode===r});if(i&&i.cssRules)for(var o=0,n=i.cssRules;o<n.length;o++){var a=n[o];if(a.selectorText&&a.selectorText===".visual-icon."+e)return a.style.backgroundImage}return""}function a(e,t,r,i){var o=t.getPlugin(e);return o&&o.module?r.require(o.module).then(function(){return o},function(){return null}):i.resolve(o)}r.getPluginCopy=i,r.applyFeatureSwitches=o,r.getPluginIconUrl=n,r.ensurePlugin=a;var s=function(){function e(){this.visualPlugins={},this.loadedVisualPlugins={}}return e.prototype.getLoadedPlugins=function(){return _.map(this.loadedVisualPlugins,function(e){return e})},e.prototype.getLoadedPlugin=function(e){return this.loadedVisualPlugins[e]},e.prototype.hasPlugin=function(e){return!!this.visualPlugins[e]},e.prototype.loadPlugin=function(e,t){t&&(this.visualPlugins[e]=t),this.loadedVisualPlugins[e]=this.visualPlugins[e]},e.prototype.unloadPlugin=function(e){delete this.loadedVisualPlugins[e]},e}();r.VisualPluginStorage=s,function(r){function i(r,i,o,n,a,s){var u=i.defer();if(!a&&r.hasPlugin(n.name))r.loadPlugin(n.name),u.resolve(null);else if(!a&&e.visuals.plugins[n.name])r.loadPlugin(n.name,e.visuals.plugins[n.name]),u.resolve(null);else if(_.isEmpty(n.items))u.reject("Resource package does not contain any items");else{var l;s&&(l=s.startEvent(e.telemetry.ApproveResourceLoadResourcePackage,n.name)),o.loadResourcePackage(n).catch(function(e){}).finally(function(){var i=e.visuals.plugins[n.name];i?(i.iconUrl||(i.iconUrl=t.visualPluginServiceHelpers.getPluginIconUrl(n.name)),r.loadPlugin(i.name,i),u.resolve(null),l&&l.resolve()):(u.reject("Unable to load visual plugin from resource package"),l&&l.reject())})}return u.promise}function o(e,t){for(var r=0,i=t;r<i.length;r++){var o=i[r];e.loadPlugin(o.name,o)}}r.ensurePlugin=i,r.ensureTrustedVisualPlugins=o}(s=r.VisualPluginStorage||(r.VisualPluginStorage={}))}(n=t.visualPluginServiceHelpers||(t.visualPluginServiceHelpers={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,t,r,i){return new n(e,t,r,i)}function i(r,i,o,n,a){var s=i&&i.improvedMapLegend;switch(r){case e.visuals.plugins.areaChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.areaChart,function(){return new e.visuals.CartesianChart({chartType:1,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.barChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.barChart,function(){return new e.visuals.CartesianChart({chartType:6,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.clusteredBarChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.clusteredBarChart,function(){return new e.visuals.CartesianChart({chartType:5,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.clusteredColumnChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.clusteredColumnChart,function(){return new e.visuals.CartesianChart({chartType:3,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.columnChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.columnChart,function(){return new e.visuals.CartesianChart({chartType:4,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.comboChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.comboChart,function(){return new e.visuals.CartesianChart({chartType:10,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.dataDotChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.dataDotChart,function(){return new e.visuals.CartesianChart({chartType:11,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.dataDotClusteredColumnComboChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.dataDotClusteredColumnComboChart,function(){return new e.visuals.CartesianChart({chartType:15,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.dataDotStackedColumnComboChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.dataDotStackedColumnComboChart,function(){return new e.visuals.CartesianChart({chartType:16,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.hundredPercentStackedBarChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.hundredPercentStackedBarChart,function(){return new e.visuals.CartesianChart({chartType:7,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.hundredPercentStackedColumnChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.hundredPercentStackedColumnChart,function(){return new e.visuals.CartesianChart({chartType:8,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.stackedAreaChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.stackedAreaChart,function(){return new e.visuals.CartesianChart({chartType:2,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.waterfallChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.waterfallChart,function(){return new e.visuals.CartesianChart({chartType:12,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.realTimeLineChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.realTimeLineChart,function(){return new e.visuals.CartesianChart({chartType:17,animator:new e.visuals.RealTimeLineChartAnimator,cartesianSmallViewPortProperties:a.cartesianSmallViewPortProperties,legendSmallViewPortProperties:a.legendSmallViewPortProperties,animateCategoryAxis:!0,animateValueAxis:!0})});case e.visuals.plugins.lineChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.lineChart,function(){return new e.visuals.CartesianChart({chartType:0,cartesianSmallViewPortProperties:a.cartesianSmallViewPortProperties,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.lineClusteredColumnComboChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.lineClusteredColumnComboChart,function(){return new e.visuals.CartesianChart({chartType:13,cartesianSmallViewPortProperties:a.cartesianSmallViewPortProperties,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.lineStackedColumnComboChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.lineStackedColumnComboChart,function(){return new e.visuals.CartesianChart({chartType:14,cartesianSmallViewPortProperties:a.cartesianSmallViewPortProperties,trimOrdinalDataOnOverflow:o})});case e.visuals.plugins.scatterChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.scatterChart,function(){return new e.visuals.CartesianChart({chartType:9,cartesianSmallViewPortProperties:a.cartesianSmallViewPortProperties,behavior:new e.visuals.CartesianChartBehavior([new e.visuals.ScatterChartMobileBehavior])})});case e.visuals.plugins.gauge.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.gauge,function(){return new e.visuals.Gauge({gaugeSmallViewPortProperties:a.gaugeSmallViewPortProperties})});case e.visuals.plugins.funnel.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.funnel,function(){return new e.visuals.FunnelChart({animator:null,funnelSmallViewPortProperties:a.funnelSmallViewPortProperties})});case e.visuals.plugins.donutChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.donutChart,function(){return new e.visuals.DonutChart({disableGeometricCulling:!0,smallViewPortProperties:a.donutSmallViewPortProperties})});case e.visuals.plugins.pieChart.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.pieChart,function(){return new e.visuals.DonutChart({sliceWidthRatio:0,disableGeometricCulling:!0,smallViewPortProperties:a.donutSmallViewPortProperties})});case e.visuals.plugins.matrix.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.matrix,function(){return new e.visuals.Matrix});case e.visuals.plugins.table.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.table,function(){return new e.visuals.Table});case e.visuals.plugins.map.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.applyImprovedMapLegendMappings(e.visuals.plugins.map,s,!1),function(){return new e.visuals.Map({viewChangeThrottleInterval:n,enableCurrentLocation:!!i&&i.mapCurrentLocationEnabled})});case e.visuals.plugins.filledMap.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.applyImprovedMapLegendMappings(e.visuals.plugins.filledMap,s,!0),function(){return new e.visuals.Map({filledMap:!0,viewChangeThrottleInterval:n})});case e.visuals.plugins.textbox.name:return t.visualPluginServiceHelpers.getPluginCopy(e.visuals.plugins.textbox,function(){return new e.visuals.Textbox({viewModelAdapter:new e.visuals.TextboxHelpers.AlwaysUseSmallViewport})});default:return e.Prototype.inherit(e.visuals.plugins[r])}}var o=t.visualPluginServiceHelpers.VisualPluginStorage;t.createMobileVisualPluginService=r;var n=function(){function r(t,n,a,s){var u=this;this.promiseFactory=t,this.resourceLoader=n;var l=a||{gaugeSmallViewPortProperties:{hideGaugeSideNumbersOnSmallViewPort:!0,smallGaugeMarginsOnSmallViewPort:!0,MinHeightGaugeSideNumbersVisible:r.MinHeightGaugeSideNumbersVisible,GaugeMarginsOnSmallViewPort:r.GaugeMarginsOnSmallViewPort},funnelSmallViewPortProperties:{hideFunnelCategoryLabelsOnSmallViewPort:!0,minHeightFunnelCategoryLabelsVisible:r.MinHeightFunnelCategoryLabelsVisible},donutSmallViewPortProperties:{maxHeightToScaleDonutLegend:r.MaxHeightToScaleDonutLegend},cardSmallViewportProperties:null};e.visuals.TooltipManager.ShowTooltips=!1;var c=!1,p=this.getMapThrottleInterval();if(this.storage=new o,s)this.initBuiltInPlugins=s().then(function(t){u.featureSwitches=t;for(var r in e.visuals.plugins)u.storage.loadPlugin(r,i(r,t,c,p,l))});else{for(var d in e.visuals.plugins)this.storage.loadPlugin(d,i(d,void 0,c,p,l));this.initBuiltInPlugins=t.resolve(null)}}return r.prototype.getVisuals=function(){return this.storage.getLoadedPlugins()},r.prototype.getPlugin=function(e){return this.storage.getLoadedPlugin(e)},r.prototype.capabilities=function(e){var t=this.getPlugin(e);return t?t.capabilities:void 0},r.prototype.ensureBuiltInPlugins=function(){return this.initBuiltInPlugins},r.prototype.ensurePlugins=function(e){var t=[];if(e&&e.length)for(var r=0,i=e;r<i.length;r++){var o=i[r];0===o.type&&t.push(this.ensurePlugin(o))}return this.promiseFactory.allSettled(t)},r.prototype.ensurePlugin=function(e){return o.ensurePlugin(this.storage,this.promiseFactory,this.resourceLoader,e)},r.prototype.ensureTrustedVisualPlugins=function(e){o.ensureTrustedVisualPlugins(this.storage,e)},r.prototype.requireSandbox=function(e){return t.utils.isCustomVisual(e)},r.prototype.isCustomVisual=function(e){return t.utils.isCustomVisual(this.getPlugin(e),e)},r.prototype.isScriptVisual=function(e){return t.utils.isScriptVisual(this.getPlugin(e))},r.prototype.isScriptVisualQueryable=function(){return t.utils.isScriptVisualQueryable(this.featureSwitches)},r.prototype.isLightWeightRenderingVisual=function(e){return t.utils.isLightWeightRenderingVisual(this.getPlugin(e))},r.prototype.getMapThrottleInterval=function(){var e=100,t=navigator.userAgent.toLowerCase();if(t.indexOf("windows phone")!==-1)return e},r.prototype.getInteractivityOptions=function(e){var t={
overflow:this.getMobileOverflowString(e),isInteractiveLegend:this.isChartSupportInteractivity(e),selection:!0,isVisualInteractive:!0};return t},r.prototype.getTelemetryHostInformation=function(){return{name:"MobileTileHost"}},r.prototype.getMobileOverflowString=function(e){switch(e){case"multiRowCard":return"visible";default:return"hidden"}},r.prototype.isChartSupportInteractivity=function(e){switch(e){case"areaChart":case"barChart":case"clusteredBarChart":case"clusteredColumnChart":case"columnChart":case"donutChart":case"hundredPercentStackedBarChart":case"hundredPercentStackedColumnChart":case"lineChart":case"pieChart":case"scatterChart":case"table":case"matrix":case"multiRowCard":return!0;default:return!1}},r.prototype.getStorage=function(){return this.storage},r}();n.MinHeightGaugeSideNumbersVisible=80,n.GaugeMarginsOnSmallViewPort=10,n.MinHeightFunnelCategoryLabelsVisible=80,n.MaxHeightToScaleDonutLegend=300}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function r(e,t,r){void 0===r&&(r=!1);var i=document.createElement("script");i.innerHTML=r?s(t):t,i.id="js-"+e,i.setAttribute("name",e),document.body.appendChild(i)}function i(e,t){var r=$("<style/>",{html:t,id:"css-"+e});r.attr("name",e),$("head").append(r)}function o(t,r,i){var o=t.defer();return $.ajax({url:i,dataType:"script",cache:!0,success:function(){return o.resolve(null)},error:function(e,t,r){return o.reject(r)},timeout:e.resourceLoaderHttpTimeout}),o.promise}function n(t,r,i){var o=t.defer(),n=setTimeout(function(){return o.reject("Timeout")},e.resourceLoaderHttpTimeout),a=$("<link>",{id:"css-"+r,type:"text/css",rel:"stylesheet",href:i,crossorigin:"anonymous"}).on("load",function(e){clearTimeout(n),o.resolve(null)}).on("error",function(e){clearTimeout(n),o.reject(e)});return a.appendTo($("head")),o.promise}function a(e){var t="#css-"+e,r=$(t)[0],i=_.find(document.styleSheets,function(e){return e.ownerNode===r});if(i&&i.cssRules)for(var o=0,n=i.cssRules;o<n.length;o++){var a=n[o];if(a.selectorText&&_.contains(a.selectorText,e))return a.style.backgroundImage}return""}function s(e){return"\n                (function(powerbi) {\n                    var window = this;\n\n                    //These 2 lines are needed to trick lodash into using this as global scope\n                    var self = this;\n                    self.Object = Object;\n\n                    //de-reference powerbi loaded modules\n                    var $, jQuery, _;\n                    window.jQuery = window.$ = undefined;\n                    window._ = undefined;\n\n                    "+e+";\n\n                    //overwrite global variables with window values for PowerBI libraries\n                    $ = jQuery = window.$;\n                    _ = window._\n                }).call(\n                    //generate isolated clone of window object\n                    (function(w) {\n                        var wKeys = Object.getOwnPropertyNames(w);\n                        var nextW = w;\n                        while ((nextW = Object.getPrototypeOf(nextW))) {\n                            wKeys = wKeys.concat(Object.getOwnPropertyNames(nextW));\n                        }\n                        var newWindow = Object.create(w);\n                        //rebuild some of the window properties so they work correctly\n                        for (var i = 0; i < wKeys.length; i++) {\n                            try {\n                                var key = wKeys[i];\n                                var item = w[key];\n                                //rebind native functions to proper window context\n                                if (typeof item === 'function') {\n                                    if ((/\\{\\s*\\[native code\\]\\s*\\}/).test('' + Function.prototype.toString.call(item))) {\n                                        newWindow[key] = item.bind(w);\n                                        //remap prototype\n                                        newWindow[key].prototype = item.prototype;\n                                        //remap own properties\n                                        var fKeys = Object.getOwnPropertyNames(item);\n                                        for (var j = 0; j < fKeys.length; j++) {\n                                            var fKey = fKeys[j];\n                                            if(fKey === 'arguments' || fKey === 'caller') continue;\n                                            try {\n                                                newWindow[key][fKey] = item[fKey];\n                                            } catch (e) { /* catch protected function properties */} \n                                        }                                        \n                                    }\n                                //map getters to proper context (needed for firefox only)\n                                } else if (typeof item === 'object') {\n                                    Object.defineProperty(newWindow, key, {\n                                        get: (function(item) {\n                                            return function() {\n                                                return item;\n                                            }\n                                        })(item),\n                                        set: function() { }\n                                    });\n                                }\n                            } catch (e) { /* catch sandbox security exceptions */ }\n                        }\n                        return newWindow;\n                    })(window),\n                    powerbi || (powerbi = {})\n                );\n            "}t.injectJsCode=r,t.injectCssCode=i,t.injectJsUrl=o,t.injectCssUrl=n,t.getInjectedIconUrl=a}(t=e.resourceInjector||(e.resourceInjector={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(){return new r}e.createResourcePackagesService=t;var r=function(){function e(){this.packages={},this.resourcePkgNameIdLookupTable={}}return e.prototype.getAllPackages=function(){return _.toArray(this.packages)},e.prototype.registerPackages=function(t){if(t)for(var r=0,i=t;r<i.length;r++){var o=i[r];o.items&&0!==o.items.length&&(this.resourcePkgNameIdLookupTable[o.id]=o.name,this.packages[o.name]?"RegisteredResources"===o.name?this.packages[o.name]=e.mergeRegisteredResourcePackages(this.packages[o.name],o):_.merge(this.packages[o.name],o):this.packages[o.name]=o)}},e.mergeRegisteredResourcePackages=function(e,t){var r=e.items;if(r){r=_.clone(r);for(var i=_.indexBy(r,"name"),o=0,n=t.items;o<n.length;o++){var a=n[o];i[a.name]||(r.push(a),i[a.name]=a)}}else r=t.items;return{id:e.id||t.id,name:e.name||t.name,type:e.type||t.type,items:r}},e.prototype.getPackage=function(e){return this.packages[e]},e.prototype.getPackageById=function(e){var t=this.resourcePkgNameIdLookupTable[e];return t?this.getPackage(t):void 0},e.prototype.clear=function(){this.packages={}},e}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,t,r,i){return new o(e,t,r,i)}t.createSandboxResourceLoader=r;var i;!function(e){e.loadResourcePackage="loadResourcePackage",e.loadVisualPlugin="loadVisualPlugin",e.loadVisualPluginWithContent="loadVisualPluginWithContent",e.onVisualPluginLoad="onVisualPluginLoad",e.onResourcePackageLoad="onResourcePackageLoad",e.onVisualPluginLoadError="onVisualPluginLoadError",e.onResourcePackageLoadError="onResourcePackageLoadError"}(i||(i={}));var o=function(){function r(e,t,r,i){this.locale=e&&e.locale,this.promiseFactory=e.promiseFactory,this.messageProxy=t,this.sandboxLoaderUri=r,this.provider=i,this.initIFrame()}return r.prototype.loadResourcePackage=function(e){return this.loadVisualPlugin(e)},r.prototype.loadResourcePackages=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadResourcePackage(o))}return this.promiseFactory.all(t)},r.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.reject()},r.prototype.loadResourcePackageItem=function(e,t){return this.promiseFactory.reject()},r.prototype.loadSharedResource=function(e){return this.promiseFactory.reject()},r.prototype.loadVisualPlugin=function(r){var o=this,n=this.promiseFactory.defer();return this.loadResourcesContent(r).then(function(a){var s=_.indexBy(a,"type"),u=s[5];if(u)try{var l=jsCommon.JsonExtensions.tryParseJSON(u.content),c=t.visualPluginUtility.createVisualPlugin(l,o.locale),p=_.find(r.items,function(e){return 5===e.type});if(p.content){var d=void 0;d=_.isString(p.content)?jsCommon.JsonExtensions.tryParseJSON(p.content):p.content,d.content=void 0,p.content=JSON.stringify(d)}e.extensibility.visualPluginAdapter.transformPlugin(c),e.visuals.plugins[c.name]=c,n.resolve(c)}catch(e){n.reject(e)}else{var v={pluginName:r.name,mappedPluginContent:s},f={eventName:i.loadVisualPluginWithContent,arguments:[v]};o.messageProxy.postMessageAsync(f).then(function(t){var r=t,i=e.visuals.plugins[r.name];if(!i||i.custom){r.custom=!0;var o=r.capabilities.objects;r.capabilities.objects=e.data.services.DataViewObjectDescriptorSerializer.deserialize(o),e.extensibility.visualPluginAdapter.transformPlugin(r),e.visuals.plugins[r.name]=r,n.resolve(r)}}).catch(function(e){n.reject(e)})}}).catch(function(e){n.reject(e)}),n.promise},r.prototype.loadVisualPlugins=function(e){var t=[];if(e)for(var r=0,i=e;r<i.length;r++){var o=i[r];t.push(this.loadVisualPlugin(o))}return this.promiseFactory.all(t)},r.prototype.destroy=function(){this.iframe.remove(),this.iframe=null,this.messageProxy.destroy(),this.messageProxy=null,this.contentWindow=null},r.prototype.initIFrame=function(){var e=this,t=this.sandboxLoaderUri;jsCommon.QueryStringUtil.getQueryStringValue("unmin")&&(t+="?unmin=1"),this.iframe=$('<iframe class="sandbox-resource-loader ng-hide" sandbox="allow-scripts"></iframe>').attr("src",t).one("load",function(){return e.onIFrameLoad()}).appendTo(document.body)},r.prototype.onIFrameLoad=function(){this.contentWindow=this.iframe[0].contentWindow,this.messageProxy.contentWindow=this.contentWindow,this.messageProxy.flushQueue()},r.prototype.loadResourcesContent=function(e){for(var t=[],r=e.id,i=e.name,o=0,n=e.items;o<n.length;o++){var a=n[o];3!==a.type&&t.push(this.loadResourceContent(r,i,a))}return this.promiseFactory.all(t)},r.prototype.loadResourceContent=function(e,t,r){var i=this,o=this.promiseFactory.defer();return r.content?o.resolve(this.getItemContent(r.content,r)):this.provider.get(e,t,r.path).then(function(e){o.resolve(i.getItemContent(e,r))}).catch(function(e){o.reject(e)}),o.promise},r.prototype.getItemContent=function(e,t){var r=_.isString(e)?e:JSON.stringify(e);return t.content=5===t.type?r:void 0,{type:t.type,content:r}},r}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(e){this.promiseFactory=e,this.promiseFactory=e}return e.prototype.loadResourcePackage=function(e){return this.promiseFactory.resolve()},e.prototype.loadResourcePackages=function(e){return this.promiseFactory.resolve()},e.prototype.loadTrustedResourcePackages=function(e){return this.promiseFactory.resolve()},e.prototype.loadResourcePackageItem=function(e,t){return this.promiseFactory.resolve()},e.prototype.loadSharedResource=function(e){return this.promiseFactory.resolve()},e.prototype.loadVisualPlugin=function(e){return this.promiseFactory.resolve(null)},e.prototype.loadVisualPlugins=function(e){return this.promiseFactory.resolve()},e.prototype.destroy=function(){},e}();e.UnapprovedResourceLoader=t}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(t){var r,i=e.data.services.DataViewObjectSerializer,o=e.data.services.SemanticQuerySerializer;!function(t){function r(e){return 0===e.length?[]:_.map(e,u)}function n(e){return 0===e.length?[]:_.map(e,l)}function a(t,r){return _.map(t,function(t){return{displayName:e.data.getDisplayName(t.displayName,r)}})}function s(t){return _.map(t,function(t){return{displayName:e.data.createDisplayNameGetter(t.displayName)}})}function u(e){var t=i.serializeSelectors([e.selector]);return{objectName:e.objectName,displayName:e.displayName,properties:c(e.properties),selector:t&&t.length>0?t[0]:null,validValues:e.validValues,containerIdx:e.containerIdx}}function l(e){var t=i.deserializeSelectors([e.selector]);return{objectName:e.objectName,displayName:e.displayName,properties:p(e.properties),selector:t&&t.length>0?t[0]:null,validValues:e.validValues,containerIdx:e.containerIdx}}function c(e){var t={};for(var r in e)t[r]=d(e[r]);return t}function p(e){var t={};for(var r in e)t[r]=v(e[r]);return t}function d(t){return t instanceof e.data.SemanticFilter?o.serializeFilter(t):void 0===t?null:t}function v(e){var t=e;return t&&t.From&&t.Where?o.deserializeFilter(t):e}t.serialize=r,t.deserialize=n,t.serializeContainers=a,t.deserializeContainers=s}(r=t.VisualObjectInstanceSerializer||(t.VisualObjectInstanceSerializer={}))}(r=t.services||(t.services={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(t){var r,i=e.data.services.DataViewObjectSerializer;!function(e){function t(e){return _.isEmpty(e)?[]:_.map(e,o)}function r(e){return _.isEmpty(e)?[]:_.map(e,n)}function o(e){return{selector:i.serializeSelector(e.selector),objects:e.objects}}function n(e){return{selector:i.deserializeSelector(e.selector),objects:e.objects}}e.serialize=t,e.deserialize=r}(r=t.VisualObjectRepetitionSerializer||(t.VisualObjectRepetitionSerializer={}))}(r=t.services||(t.services={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(t){function r(e){var t={colorPalette:o(e.colorPalette),isHighContrast:e.isHighContrast,labelText:e.labelText,maxMarginFactor:e.maxMarginFactor,subTitleText:e.subTitleText,titleText:e.titleText};return t}function i(e){var t={colorPalette:n(e.colorPalette),isHighContrast:e.isHighContrast,labelText:e.labelText,maxMarginFactor:e.maxMarginFactor,subTitleText:e.subTitleText,titleText:e.titleText};return t}function o(e){var t={background:e.background,dataColors:e.dataColors.getAllColors(),foreground:e.foreground,negative:e.negative,positive:e.positive,selection:e.selection,separator:e.separator};return t}function n(t){var r={background:t.background,dataColors:new e.visuals.DataColorPalette(t.dataColors),foreground:t.foreground,negative:t.negative,positive:t.positive,selection:t.selection,separator:t.separator};return r}t.serializeVisualStyle=r,t.deserializeVisualStyle=i}(r=t.VisualStyleSerializer||(t.VisualStyleSerializer={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,t){return new o(e,t)}var i;!function(e){e[e.NotRequired=0]="NotRequired",e[e.Declined=1]="Declined",e[e.Approved=2]="Approved"}(i=t.UserConsent||(t.UserConsent={})),t.createVisualConsentService=r;var o=function(){function t(e,t){this.promiseFactory=e,this.telemetryService=t,this.cachedConsentMap={},this.visualConsentOptionsMap={}}return t.prototype.registerVisualConsent=function(t,r){this.visualConsentOptionsMap[t]=r,this.telemetryService.logEvent(e.telemetry.VisualConsentRegister,t,this.telemetryService.root.id,!1,e.telemetry.ErrorSource.PowerBI),this.loadConsentAsync(t)},t.prototype.hasConsent=function(e){return this.cachedConsentMap[e]},t.prototype.setConsent=function(t,r){if(!this.isConsentRequiringVisual(t))return this.promiseFactory.reject("Visual type does not require consent");this.cachedConsentMap[t]=r;var i=this.visualConsentOptionsMap[t]&&this.visualConsentOptionsMap[t].consentPersistencyProvider;return this.telemetryService.logEvent(e.telemetry.VisualConsentSet,t,r,this.telemetryService.root.id,!1,e.telemetry.ErrorSource.PowerBI),i?i.saveConsent(r):this.promiseFactory.reject("No persistencyProvider was set for visual "+t)},t.prototype.getConsent=function(t){var r=this,o=[];t=_.unique(t),this.telemetryService.logEvent(e.telemetry.VisualConsentGet,t.join(", "),this.telemetryService.root.id,!1,e.telemetry.ErrorSource.PowerBI);for(var n=function(e){if(!a.isConsentRequiringVisual(e)){var t={visualType:e,consent:i.NotRequired};return o.push(a.promiseFactory.resolve(t)),"continue"}o.push(a.loadConsentAsync(e).then(function(t){if(t){var o={visualType:e,consent:i.Approved};return r.promiseFactory.resolve(o)}return r.showConsentDialog(e)}))},a=this,s=0,u=t;s<u.length;s++){var l=u[s];n(l)}return this.promiseFactory.allSettled(o).then(function(e){return _.map(_.filter(e,function(e){return 0===e.type}),function(e){return e.value})})},t.prototype.isConsentRequiringVisual=function(e){return!!this.visualConsentOptionsMap[e]},t.prototype.loadConsentAsync=function(e){var t=this;if(void 0!==this.cachedConsentMap[e])return this.promiseFactory.resolve(this.cachedConsentMap[e]);var r=this.visualConsentOptionsMap[e]&&this.visualConsentOptionsMap[e].consentPersistencyProvider;return r?r.loadConsent().then(function(r){return t.cachedConsentMap[e]=r,t.promiseFactory.resolve(r)}).catch(function(e){return t.promiseFactory.reject(e)}):this.promiseFactory.reject("VisualConsentService.getConsentAsync: Missing consentPersistencyProvider for visual "+e)},t.prototype.showConsentDialog=function(e){var t=this;if(!this.isConsentRequiringVisual(e))return this.promiseFactory.reject("VisualConsentService.showConsentDialog: Visual type does not require consent");var r=this.visualConsentOptionsMap[e]&&this.visualConsentOptionsMap[e].consentDialogProvider;return r?r.showConsentDialog().then(function(r){t.setConsent(e,r);var o={visualType:e,consent:r?i.Approved:i.Declined};return t.promiseFactory.resolve(o)}).catch(function(e){return t.promiseFactory.reject(e)}):this.promiseFactory.reject("VisualConsentService.showConsentDialog: Missing consentDialogProvider for visual "+e)},t}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(t){function r(){return new i}t.createVisualStylePresetService=r;var i=function(){function t(){this.cache=(t={},t[e.visuals.plugins.table.name]=e.visuals.stylePresets.tableStylePresets(),t[e.visuals.plugins.matrix.name]=e.visuals.stylePresets.matrixStylePresets(),t[e.visuals.plugins.pivotTable.name]=e.visuals.stylePresets.matrixStylePresets(),t[e.visuals.plugins.tableEx.name]=e.visuals.stylePresets.tableStylePresets(),t);var t}return t.prototype.getStylePresets=function(e){return this.cache[e]},t.prototype.getStylePreset=function(t,r){var i=this.getStylePresets(t);if(i)return e.VisualStylePresetHelpers.getStylePreset(i,r)},t.prototype.getEnumFromName=function(e){return this.getEnumFromStylePresets(this.getStylePresets(e))},t.prototype.getEnumFromStylePresets=function(t){return e.VisualStylePresetHelpers.getStylePresetsEnum(t)},t}()}(r=t.services||(t.services={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function r(t,r){t=r?e.LocalizationResourceUtility.setLocalizedCapabilities(t,r):t;var i={name:t.visual.guid,apiVersion:t.apiVersion,class:t.visual.visualClassName,displayName:t.visual.displayName,capabilities:t.capabilities,custom:!0,iconUrl:'url("'+t.content.iconBase64+'")',content:t.content,version:t.visual.version,create:function(){return null}};return i}t.createVisualPlugin=r}(t=e.visualPluginUtility||(e.visualPluginUtility={}))}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e,t){return new n(e,t)}var r;!function(e){e.WindowMessageProxyMessageEvent="message",e.WindowMessageProxyErrorEvent="error"}(r=e.events||(e.events={}));var i="message",o="onMessageProxyAsyncComplete";e.createWindowMessageProxy=t;var n=function(){function e(e,t){var r=this;this.promiseFactory=e,this._queue=[],this._allowSameWindow=!1,this.handlers={message:[],error:[]},this.isFlushing=!1,t&&(this._contentWindow=t),this.deferredCache={},this.windowMessageHandler=function(e){return r.onMessageReceived(e)},$(window).on(i,this.windowMessageHandler)}return Object.defineProperty(e.prototype,"allowSameWindow",{get:function(){return this._allowSameWindow},set:function(e){this._allowSameWindow=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentWindow",{get:function(){return this._contentWindow},set:function(e){this._contentWindow=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"queue",{get:function(){return jQuery.extend([],this._queue)},enumerable:!0,configurable:!0}),e.prototype.postMessage=function(e){this.contentWindow?this.sendMessage(e):this.queueMessage(e)},e.prototype.postMessageAsync=function(e){var t=this,r=this.promiseFactory.defer(),i=this.createRandomString();return this.deferredCache[i]=r,e.id=i,this.postMessage(e),r.promise.finally(function(){delete t.deferredCache[i]}),r.promise},e.prototype.queueMessage=function(e,t){void 0===t&&(t=this._queue.length);var r=this.prepareMessage(e);this._queue.splice(t,0,r)},e.prototype.on=function(e,t){if(this.handlers[e]){var r=this.handlers[e].indexOf(t);r>-1||this.handlers[e].push(t)}},e.prototype.off=function(e,t){if(this.handlers[e]){if(!t)return void(this.handlers[e].length=0);var r=this.handlers[e].indexOf(t);r>-1&&this.handlers[e].splice(r,1)}},e.prototype.flushQueue=function(){!this.isFlushing&&this.contentWindow&&(this.isFlushing=!0,this.contentWindow.postMessage&&this.contentWindow.postMessage(this._queue,"*"),this._queue.length=0,this.isFlushing=!1)},e.prototype.sendMessage=function(e){var t=this.prepareMessage(e);this.contentWindow&&this.contentWindow.postMessage&&this.contentWindow.postMessage(t,"*")},e.prototype.prepareMessage=function(e){var t;try{t=JSON.stringify(e)}catch(e){throw t=null,e}return t},e.prototype.onMessageReceived=function(e){if(this.allowSameWindow||e.originalEvent.source!==window){var t;try{t="string"==typeof e.originalEvent.data?JSON.parse(e.originalEvent.data):e.originalEvent.data}catch(e){t=null}if(t)for(var r=jQuery.isArray(t)?t:[t],i=0;i<r.length;i++){var o=r[i],n=void 0;try{n="string"==typeof o?JSON.parse(o):o}catch(e){n=null}if(!n)return;this.dispatchMessage(e.originalEvent,n)}}},e.prototype.dispatchMessage=function(e,t){var r={message:t,source:e.source};if(t.id&&(t.eventName===o||t.result||t.error)){var i=this.deferredCache[t.id];if(!i)return;return t.error?i.reject(t.error):i.resolve(t.result)}for(var n=t.error?this.handlers.error:this.handlers.message,a=0,s=n;a<s.length;a++){var u=s[a];this.invokeHandler(u,r)}},e.prototype.invokeHandler=function(e,t){var r,i,n=this;t.message.id&&(i={id:t.message.id,eventName:o,arguments:[]});try{r=e.call(null,t),i&&this.promiseFactory.when(r).then(function(e){i.result=e,n.postMessage(i)}).catch(function(e){i.error=e,n.postMessage(i)})}catch(e){i&&(i.error={message:e.message},this.postMessage(i))}},e.prototype.createRandomString=function(){return(Math.random()+1).toString(36).substring(7)},e.prototype.destroy=function(){this.handlers.message.length=0,this.handlers.error.length=0,$(window).off(i,this.windowMessageHandler),this.windowMessageHandler=null},e}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e){switch(e){case o.AllowScripts:return"allow-scripts";case o.AllowPopups:return"allow-popups";case o.AllowSameOrigin:return"allow-same-origin";case o.AllowForms:return"allow-forms"}}function i(e,t,r,i,o,a){return new n(e,t,r,i,o,a)}t.EsriVisual="esriVisual",t.VisioVisual="Visio_PBI_CV_D7C10B1A_506B_4123_878E_39E8698FD30A",t.VisioDFVisual="VisioDF_PBI_CV_D7C10B1A_506B_4123_878E_39E8698FD30A",t.SandDanceVisual="SandDance1448759247246";var o;!function(e){e[e.AllowScripts=0]="AllowScripts",e[e.AllowPopups=1]="AllowPopups",e[e.AllowSameOrigin=2]="AllowSameOrigin",e[e.AllowForms=3]="AllowForms"}(o=t.SandboxProperty||(t.SandboxProperty={})),t.SandboxPropertyTranslator=r,t.createTrustedVisualService=i;var n=function(){function r(e,t,r,i,n,a){var s=this;this.promiseFactory=e,this.telemetryService=t,this.visualConsent=r,this.approvedResourceService=i,this.resourceLoader=a,this.trustedVisualsMap={},n&&(n.settings.sandboxProperties=function(e,t){return t&&(e=e.substring(0,e.lastIndexOf("_DEBUG"))),s.isTrustedVisualAllowed(e)?s.trustedVisualsMap[e].sandboxProperties:[o.AllowScripts]})}return r.prototype.registerTrustedVisual=function(e,t){for(var r=0;r<e.length;++r){var i=e[r];this.trustedVisualsMap[i]=t,t.registerVisualConsentOptions&&this.visualConsent.registerVisualConsent(i,t.registerVisualConsentOptions),this.approvedResourceService&&this.approvedResourceService.addTrustedVisual(i)}},r.prototype.isTrustedVisual=function(e){return!!this.trustedVisualsMap[e]},r.prototype.validate=function(e){if(this.isTrustedVisual(e)){var t=this.trustedVisualsMap[e]&&this.trustedVisualsMap[e].providers&&this.trustedVisualsMap[e].providers.validator;return t?t.getErrorDetails():void 0}},r.prototype.loadTrustedVisualPlugins=function(t){var r=this;if(!this.resourceLoader)return this.promiseFactory.reject();var i;i=t?t:this.getAllTrustedVisualTypes();var o=_.filter(i,function(e){return r.isTrustedVisualAllowed(e)&&r.trustedVisualsMap[e].automaticallyImport});return this.telemetryService.logEvent(e.telemetry.TrustedVisualLoad,t?t.join(","):"",i?i.join(","):"",this.telemetryService.root.id,!1,e.telemetry.ErrorSource.PowerBI),0===o.length?this.promiseFactory.resolve([]):this.resourceLoader.loadTrustedResourcePackages(o).catch(function(e){return r.promiseFactory.reject(e)}).then(function(e){return e&&e.length>0&&e[0].length>0&&e[0][0].length>0?r.promiseFactory.resolve(e[0][0]):r.promiseFactory.resolve([])})},r.prototype.getVisualTypeOptions=function(e){if(this.isTrustedVisual(e))return this.trustedVisualsMap[e].visualTypeOptions},r.prototype.getConsentAndLoadVisuals=function(r){var i=this;return this.telemetryService.logEvent(e.telemetry.TrustedVisualGetConsent,r?r.join(","):"",this.telemetryService.root.id,!1,e.telemetry.ErrorSource.PowerBI),this.visualConsent.getConsent(r).then(function(e){var r=_.map(_.filter(e,function(e){return e.consent!==t.UserConsent.Declined}),function(e){return e.visualType});return i.loadTrustedVisualPlugins(r)})},r.prototype.canLoadVisual=function(e){return!this.isTrustedVisual(e)||!!this.isTrustedVisualAllowed(e)&&(!this.trustedVisualsMap[e].registerVisualConsentOptions||this.visualConsent.hasConsent(e))},r.prototype.getAllTrustedVisualTypes=function(){return _.keys(this.trustedVisualsMap)},r.prototype.isTrustedVisualAllowed=function(e){if(!this.isTrustedVisual(e))return!1;var t=this.trustedVisualsMap[e]&&this.trustedVisualsMap[e].providers&&this.trustedVisualsMap[e].providers.blocker;return!t||!t.blockedInCluster()&&!t.blockedInTenant()},r}()}(t=e.visualHost||(e.visualHost={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.ApprovedResourceFailLoaded=function(t,r,i,o,n,a,s,u,l,c,p,d,v,f){void 0===o&&(o=!1),void 0===n&&(n=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===u&&(u=void 0),void 0===l&&(l=void 0),void 0===c&&(c=!1),void 0===p&&(p=!1),void 0===d&&(d=void 0),void 0===v&&(v=!1),void 0===f&&(f=!1);var y={visualType:t,fileName:r,parentId:i,isError:o,errorSource:n,errorCode:a,errorMessage:s,activityName:u,activityId:l,isDebug:c,isCancelled:p,pingLatency:d,isAppInactive:v,isInCapacity:f},g={name:"PBI.ApprovedResource.FailLoaded",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={visualType:y.visualType,fileName:y.fileName,parentId:y.parentId},r=typeof y.isError;("boolean"===r&&!!y.isError!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isError=y.isError);var r=typeof y.errorSource;("boolean"===r&&!!y.errorSource!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorSource=e.telemetry.ErrorSource[y.errorSource]);var r=typeof y.errorCode;("boolean"===r&&!!y.errorCode!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorCode=y.errorCode);var r=typeof y.errorMessage;("boolean"===r&&!!y.errorMessage!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorMessage=y.errorMessage);var r=typeof y.activityName;("boolean"===r&&!!y.activityName!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityName=y.activityName);var r=typeof y.activityId;("boolean"===r&&!!y.activityId!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityId=y.activityId);var r=typeof y.isDebug;("boolean"===r&&!!y.isDebug!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isDebug=y.isDebug);var r=typeof y.isCancelled;("boolean"===r&&!!y.isCancelled!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isCancelled=y.isCancelled);var r=typeof y.pingLatency;("boolean"===r&&!!y.pingLatency!=!1||"undefined"!==r&&"boolean"!==r)&&(t.pingLatency=y.pingLatency);var r=typeof y.isAppInactive;("boolean"===r&&!!y.isAppInactive!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isAppInactive=y.isAppInactive);var r=typeof y.isInCapacity;return("boolean"===r&&!!y.isInCapacity!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isInCapacity=y.isInCapacity),t},info:y,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ApprovedResourceFailLoadedLoggers&&(g.loggers=e.telemetry.ApprovedResourceFailLoadedLoggers),g},t.ApprovedResourceEndpointDown=function(t,r,i,o,n,a,s,u,l,c,p,d,v,f){void 0===o&&(o=!1),void 0===n&&(n=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===u&&(u=void 0),void 0===l&&(l=void 0),void 0===c&&(c=!1),void 0===p&&(p=!1),void 0===d&&(d=void 0),void 0===v&&(v=!1),void 0===f&&(f=!1);var y={endpoint:t,allEndpointDown:r,parentId:i,isError:o,errorSource:n,errorCode:a,errorMessage:s,activityName:u,activityId:l,isDebug:c,isCancelled:p,pingLatency:d,isAppInactive:v,isInCapacity:f},g={name:"PBI.ApprovedResource.EndpointDown",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={endpoint:y.endpoint,allEndpointDown:y.allEndpointDown,parentId:y.parentId},r=typeof y.isError;("boolean"===r&&!!y.isError!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isError=y.isError);var r=typeof y.errorSource;("boolean"===r&&!!y.errorSource!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorSource=e.telemetry.ErrorSource[y.errorSource]);var r=typeof y.errorCode;("boolean"===r&&!!y.errorCode!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorCode=y.errorCode);var r=typeof y.errorMessage;("boolean"===r&&!!y.errorMessage!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorMessage=y.errorMessage);var r=typeof y.activityName;("boolean"===r&&!!y.activityName!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityName=y.activityName);var r=typeof y.activityId;("boolean"===r&&!!y.activityId!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityId=y.activityId);var r=typeof y.isDebug;("boolean"===r&&!!y.isDebug!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isDebug=y.isDebug);var r=typeof y.isCancelled;("boolean"===r&&!!y.isCancelled!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isCancelled=y.isCancelled);var r=typeof y.pingLatency;("boolean"===r&&!!y.pingLatency!=!1||"undefined"!==r&&"boolean"!==r)&&(t.pingLatency=y.pingLatency);var r=typeof y.isAppInactive;("boolean"===r&&!!y.isAppInactive!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isAppInactive=y.isAppInactive);var r=typeof y.isInCapacity;return("boolean"===r&&!!y.isInCapacity!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isInCapacity=y.isInCapacity),t},info:y,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ApprovedResourceEndpointDownLoggers&&(g.loggers=e.telemetry.ApprovedResourceEndpointDownLoggers),g},t.ApproveResourceLoadResourcePackage=function(t,r,i,o,n,a,s,u,l,c,p,d,v){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===n&&(n=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===u&&(u=void 0),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===p&&(p=void 0),void 0===d&&(d=!1),void 0===v&&(v=!1);var f={
resourcePackageName:t,parentId:r,isError:i,errorSource:o,errorCode:n,errorMessage:a,activityName:s,activityId:u,isDebug:l,isCancelled:c,pingLatency:p,isAppInactive:d,isInCapacity:v},y={name:"PBI.ApproveResource.LoadResourcePackage",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={resourcePackageName:f.resourcePackageName,parentId:f.parentId},r=typeof f.isError;("boolean"===r&&!!f.isError!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isError=f.isError);var r=typeof f.errorSource;("boolean"===r&&!!f.errorSource!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorSource=e.telemetry.ErrorSource[f.errorSource]);var r=typeof f.errorCode;("boolean"===r&&!!f.errorCode!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorCode=f.errorCode);var r=typeof f.errorMessage;("boolean"===r&&!!f.errorMessage!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorMessage=f.errorMessage);var r=typeof f.activityName;("boolean"===r&&!!f.activityName!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityName=f.activityName);var r=typeof f.activityId;("boolean"===r&&!!f.activityId!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityId=f.activityId);var r=typeof f.isDebug;("boolean"===r&&!!f.isDebug!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isDebug=f.isDebug);var r=typeof f.isCancelled;("boolean"===r&&!!f.isCancelled!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isCancelled=f.isCancelled);var r=typeof f.pingLatency;("boolean"===r&&!!f.pingLatency!=!1||"undefined"!==r&&"boolean"!==r)&&(t.pingLatency=f.pingLatency);var r=typeof f.isAppInactive;("boolean"===r&&!!f.isAppInactive!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isAppInactive=f.isAppInactive);var r=typeof f.isInCapacity;return("boolean"===r&&!!f.isInCapacity!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isInCapacity=f.isInCapacity),t},info:f,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.ApproveResourceLoadResourcePackageLoggers&&(y.loggers=e.telemetry.ApproveResourceLoadResourcePackageLoggers),y},t.VisualConsentRegister=function(t,r,i,o,n,a,s,u,l,c,p,d,v){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===n&&(n=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===u&&(u=void 0),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===p&&(p=void 0),void 0===d&&(d=!1),void 0===v&&(v=!1);var f={visualType:t,parentId:r,isError:i,errorSource:o,errorCode:n,errorMessage:a,activityName:s,activityId:u,isDebug:l,isCancelled:c,pingLatency:p,isAppInactive:d,isInCapacity:v},y={name:"PBI.VisualConsent.Register",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={visualType:f.visualType,parentId:f.parentId},r=typeof f.isError;("boolean"===r&&!!f.isError!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isError=f.isError);var r=typeof f.errorSource;("boolean"===r&&!!f.errorSource!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorSource=e.telemetry.ErrorSource[f.errorSource]);var r=typeof f.errorCode;("boolean"===r&&!!f.errorCode!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorCode=f.errorCode);var r=typeof f.errorMessage;("boolean"===r&&!!f.errorMessage!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorMessage=f.errorMessage);var r=typeof f.activityName;("boolean"===r&&!!f.activityName!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityName=f.activityName);var r=typeof f.activityId;("boolean"===r&&!!f.activityId!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityId=f.activityId);var r=typeof f.isDebug;("boolean"===r&&!!f.isDebug!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isDebug=f.isDebug);var r=typeof f.isCancelled;("boolean"===r&&!!f.isCancelled!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isCancelled=f.isCancelled);var r=typeof f.pingLatency;("boolean"===r&&!!f.pingLatency!=!1||"undefined"!==r&&"boolean"!==r)&&(t.pingLatency=f.pingLatency);var r=typeof f.isAppInactive;("boolean"===r&&!!f.isAppInactive!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isAppInactive=f.isAppInactive);var r=typeof f.isInCapacity;return("boolean"===r&&!!f.isInCapacity!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isInCapacity=f.isInCapacity),t},info:f,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.VisualConsentRegisterLoggers&&(y.loggers=e.telemetry.VisualConsentRegisterLoggers),y},t.VisualConsentSet=function(t,r,i,o,n,a,s,u,l,c,p,d,v,f){void 0===o&&(o=!1),void 0===n&&(n=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===u&&(u=void 0),void 0===l&&(l=void 0),void 0===c&&(c=!1),void 0===p&&(p=!1),void 0===d&&(d=void 0),void 0===v&&(v=!1),void 0===f&&(f=!1);var y={visualType:t,userConsent:r,parentId:i,isError:o,errorSource:n,errorCode:a,errorMessage:s,activityName:u,activityId:l,isDebug:c,isCancelled:p,pingLatency:d,isAppInactive:v,isInCapacity:f},g={name:"PBI.VisualConsent.Set",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={visualType:y.visualType,userConsent:y.userConsent,parentId:y.parentId},r=typeof y.isError;("boolean"===r&&!!y.isError!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isError=y.isError);var r=typeof y.errorSource;("boolean"===r&&!!y.errorSource!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorSource=e.telemetry.ErrorSource[y.errorSource]);var r=typeof y.errorCode;("boolean"===r&&!!y.errorCode!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorCode=y.errorCode);var r=typeof y.errorMessage;("boolean"===r&&!!y.errorMessage!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorMessage=y.errorMessage);var r=typeof y.activityName;("boolean"===r&&!!y.activityName!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityName=y.activityName);var r=typeof y.activityId;("boolean"===r&&!!y.activityId!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityId=y.activityId);var r=typeof y.isDebug;("boolean"===r&&!!y.isDebug!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isDebug=y.isDebug);var r=typeof y.isCancelled;("boolean"===r&&!!y.isCancelled!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isCancelled=y.isCancelled);var r=typeof y.pingLatency;("boolean"===r&&!!y.pingLatency!=!1||"undefined"!==r&&"boolean"!==r)&&(t.pingLatency=y.pingLatency);var r=typeof y.isAppInactive;("boolean"===r&&!!y.isAppInactive!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isAppInactive=y.isAppInactive);var r=typeof y.isInCapacity;return("boolean"===r&&!!y.isInCapacity!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isInCapacity=y.isInCapacity),t},info:y,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.VisualConsentSetLoggers&&(g.loggers=e.telemetry.VisualConsentSetLoggers),g},t.VisualConsentGet=function(t,r,i,o,n,a,s,u,l,c,p,d,v){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===n&&(n=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===u&&(u=void 0),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===p&&(p=void 0),void 0===d&&(d=!1),void 0===v&&(v=!1);var f={visualTypes:t,parentId:r,isError:i,errorSource:o,errorCode:n,errorMessage:a,activityName:s,activityId:u,isDebug:l,isCancelled:c,pingLatency:p,isAppInactive:d,isInCapacity:v},y={name:"PBI.VisualConsent.Get",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={visualTypes:f.visualTypes,parentId:f.parentId},r=typeof f.isError;("boolean"===r&&!!f.isError!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isError=f.isError);var r=typeof f.errorSource;("boolean"===r&&!!f.errorSource!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorSource=e.telemetry.ErrorSource[f.errorSource]);var r=typeof f.errorCode;("boolean"===r&&!!f.errorCode!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorCode=f.errorCode);var r=typeof f.errorMessage;("boolean"===r&&!!f.errorMessage!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorMessage=f.errorMessage);var r=typeof f.activityName;("boolean"===r&&!!f.activityName!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityName=f.activityName);var r=typeof f.activityId;("boolean"===r&&!!f.activityId!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityId=f.activityId);var r=typeof f.isDebug;("boolean"===r&&!!f.isDebug!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isDebug=f.isDebug);var r=typeof f.isCancelled;("boolean"===r&&!!f.isCancelled!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isCancelled=f.isCancelled);var r=typeof f.pingLatency;("boolean"===r&&!!f.pingLatency!=!1||"undefined"!==r&&"boolean"!==r)&&(t.pingLatency=f.pingLatency);var r=typeof f.isAppInactive;("boolean"===r&&!!f.isAppInactive!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isAppInactive=f.isAppInactive);var r=typeof f.isInCapacity;return("boolean"===r&&!!f.isInCapacity!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isInCapacity=f.isInCapacity),t},info:f,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.VisualConsentGetLoggers&&(y.loggers=e.telemetry.VisualConsentGetLoggers),y},t.TrustedVisualLoad=function(t,r,i,o,n,a,s,u,l,c,p,d,v,f){void 0===o&&(o=!1),void 0===n&&(n=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===u&&(u=void 0),void 0===l&&(l=void 0),void 0===c&&(c=!1),void 0===p&&(p=!1),void 0===d&&(d=void 0),void 0===v&&(v=!1),void 0===f&&(f=!1);var y={requestedVisualTypes:t,actualVisualTypes:r,parentId:i,isError:o,errorSource:n,errorCode:a,errorMessage:s,activityName:u,activityId:l,isDebug:c,isCancelled:p,pingLatency:d,isAppInactive:v,isInCapacity:f},g={name:"PBI.TrustedVisual.Load",category:e.TelemetryCategory.Verbose,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={requestedVisualTypes:y.requestedVisualTypes,actualVisualTypes:y.actualVisualTypes,parentId:y.parentId},r=typeof y.isError;("boolean"===r&&!!y.isError!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isError=y.isError);var r=typeof y.errorSource;("boolean"===r&&!!y.errorSource!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorSource=e.telemetry.ErrorSource[y.errorSource]);var r=typeof y.errorCode;("boolean"===r&&!!y.errorCode!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorCode=y.errorCode);var r=typeof y.errorMessage;("boolean"===r&&!!y.errorMessage!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorMessage=y.errorMessage);var r=typeof y.activityName;("boolean"===r&&!!y.activityName!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityName=y.activityName);var r=typeof y.activityId;("boolean"===r&&!!y.activityId!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityId=y.activityId);var r=typeof y.isDebug;("boolean"===r&&!!y.isDebug!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isDebug=y.isDebug);var r=typeof y.isCancelled;("boolean"===r&&!!y.isCancelled!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isCancelled=y.isCancelled);var r=typeof y.pingLatency;("boolean"===r&&!!y.pingLatency!=!1||"undefined"!==r&&"boolean"!==r)&&(t.pingLatency=y.pingLatency);var r=typeof y.isAppInactive;("boolean"===r&&!!y.isAppInactive!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isAppInactive=y.isAppInactive);var r=typeof y.isInCapacity;return("boolean"===r&&!!y.isInCapacity!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isInCapacity=y.isInCapacity),t},info:y,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.TrustedVisualLoadLoggers&&(g.loggers=e.telemetry.TrustedVisualLoadLoggers),g},t.TrustedVisualGetConsent=function(t,r,i,o,n,a,s,u,l,c,p,d,v){void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===n&&(n=void 0),void 0===a&&(a=void 0),void 0===s&&(s=void 0),void 0===u&&(u=void 0),void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===p&&(p=void 0),void 0===d&&(d=!1),void 0===v&&(v=!1);var f={visualTypes:t,parentId:r,isError:i,errorSource:o,errorCode:n,errorMessage:a,activityName:s,activityId:u,isDebug:l,isCancelled:c,pingLatency:p,isAppInactive:d,isInCapacity:v},y={name:"PBI.TrustedVisual.GetConsent",category:e.TelemetryCategory.CustomerAction,time:Date.now(),id:jsCommon.Utility.generateGuid(),getFormattedInfoObject:function(){var t={visualTypes:f.visualTypes,parentId:f.parentId},r=typeof f.isError;("boolean"===r&&!!f.isError!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isError=f.isError);var r=typeof f.errorSource;("boolean"===r&&!!f.errorSource!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorSource=e.telemetry.ErrorSource[f.errorSource]);var r=typeof f.errorCode;("boolean"===r&&!!f.errorCode!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorCode=f.errorCode);var r=typeof f.errorMessage;("boolean"===r&&!!f.errorMessage!=!1||"undefined"!==r&&"boolean"!==r)&&(t.errorMessage=f.errorMessage);var r=typeof f.activityName;("boolean"===r&&!!f.activityName!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityName=f.activityName);var r=typeof f.activityId;("boolean"===r&&!!f.activityId!=!1||"undefined"!==r&&"boolean"!==r)&&(t.activityId=f.activityId);var r=typeof f.isDebug;("boolean"===r&&!!f.isDebug!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isDebug=f.isDebug);var r=typeof f.isCancelled;("boolean"===r&&!!f.isCancelled!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isCancelled=f.isCancelled);var r=typeof f.pingLatency;("boolean"===r&&!!f.pingLatency!=!1||"undefined"!==r&&"boolean"!==r)&&(t.pingLatency=f.pingLatency);var r=typeof f.isAppInactive;("boolean"===r&&!!f.isAppInactive!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isAppInactive=f.isAppInactive);var r=typeof f.isInCapacity;return("boolean"===r&&!!f.isInCapacity!=!1||"undefined"!==r&&"boolean"!==r)&&(t.isInCapacity=f.isInCapacity),t},info:f,privateFields:[],orgInfoFields:[]};return"undefined"!=typeof e.telemetry.TrustedVisualGetConsentLoggers&&(y.loggers=e.telemetry.TrustedVisualGetConsentLoggers),y}}(t=e.telemetry||(e.telemetry={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function r(e,r,o,n,a){var s=new i(e,r,o,n,a);return new t.VisualSafeExecutionWrapper(s,e,o,n,s.isPluginInError)}t.visualApiVersions=[],t.createVisualApiAdapter=r;var i=function(){function r(e,t,r,i,o){this.isPluginInError=!1,this.plugin=e,this.creator=t,this.promiseFactory=r,this.telemetryService=i,this.module=o;var n=e.apiVersion,a=this.getVersionIndex(n);n?a>-1?(this.apiVersionIndex=a,this.legacy=!1):this.isPluginInError=!0:this.legacy=!0}return r.prototype.init=function(r){if(r.element.empty(),r=e.Prototype.inherit(r),r.visualAdapterHostServices=void 0,this.legacy)this.visual=this.creator({module:this.module}),this.visualLegacy.init(r);else{var i=this.host=t.visualApiVersions[this.apiVersionIndex].hostAdapter(r);this.visual=this.creator({element:r.element.get(0),host:i,module:this.module}),this.overloadMethods()}},r.prototype.update=function(t){this.plugin.systemVisual||(t=e.Prototype.inherit(t),t.visualDefinitionData=void 0,t.dataTransforms=void 0),(t.type&e.VisualUpdateType.Resize)===e.VisualUpdateType.Resize&&this.visualHasMethod("onResizing")?(this.plugin.custom&&this.visualHasMethod("update")&&this.visualLegacy.update(t),this.onResizing(t.viewport,t.resizeMode)):this.visualHasMethod("update")?this.visualLegacy.update(t):((!t.type||t.type&e.VisualUpdateType.Data)&&this.onDataChanged(_.pick(t,["dataViews","operationKind"])),t.type&e.VisualUpdateType.ViewMode&&this.onViewModeChanged(t.viewMode))},r.prototype.updateAsync=function(e){return this.promiseFactory.resolve(this.update(e))},r.prototype.destroy=function(){this.visualHasMethod("destroy")&&this.visualLegacy.destroy()},r.prototype.enumerateObjectInstances=function(e){if(this.visualHasMethod("enumerateObjectInstances"))return this.visualLegacy.enumerateObjectInstances(e)},r.prototype.enumerateObjectRepetition=function(){if(this.visualHasMethod("enumerateObjectRepetition"))return this.visualLegacy.enumerateObjectRepetition()},r.prototype.enumerateObjectInstancesAsync=function(e){return this.visualHasMethod("enumerateObjectInstancesAsync")?this.visualAdapter.enumerateObjectInstancesAsync(e):this.promiseFactory.resolve(this.enumerateObjectInstances(e))},r.prototype.enumerateObjectRepetitionAsync=function(){return this.visualHasMethod("enumerateObjectRepetitionAsync")?this.visualAdapter.enumerateObjectRepetitionAsync():this.promiseFactory.resolve(this.enumerateObjectRepetition())},Object.defineProperty(r.prototype,"sandbox",{get:function(){return this.visualAdapter&&this.visualAdapter.sandbox},enumerable:!0,configurable:!0}),r.prototype.onResizing=function(e,t){this.visualHasMethod("onResizing")&&this.visualLegacy.onResizing(e,t)},r.prototype.onDataChanged=function(e){this.visualHasMethod("onDataChanged")&&this.visualLegacy.onDataChanged(e)},r.prototype.onViewModeChanged=function(e){this.visualHasMethod("onViewModeChanged")&&this.visualLegacy.onViewModeChanged(e)},r.prototype.onClearSelection=function(){this.visualHasMethod("onClearSelection")&&this.visualLegacy.onClearSelection()},r.prototype.canResizeTo=function(e){if(this.visualHasMethod("canResizeTo"))return this.visualLegacy.canResizeTo(e)},r.prototype.unwrap=function(){return this.visual},Object.defineProperty(r.prototype,"visualNew",{get:function(){if(!this.legacy)return this.visual},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"visualLegacy",{get:function(){if(this.legacy)return this.visual},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"visualAdapter",{get:function(){return this.visual},enumerable:!0,configurable:!0}),r.prototype.visualHasMethod=function(e){var t=this.legacy?this.visualLegacy:this.visualNew;return t&&_.isFunction(t[e])},r.prototype.getVersionIndex=function(e){if(e)for(var r=t.visualApiVersions.length,i=0;i<r;i++)if(t.visualApiVersions[i].version===e)return i;return-1},r.prototype.overloadMethods=function(){var e=this.getCompiledOverloads();for(var t in e)this[t]=e[t]},r.prototype.getCompiledOverloads=function(){for(var e={},r=this.apiVersionIndex,i=this.visualNew,o=0;o<=r;o++){var n=t.visualApiVersions[o].overloads;_.isFunction(n)&&_.assign(e,n(i,this.host))}return e},r}();t.VisualApiAdapter=i}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(t){function r(e){e.apiVersion?i(e):l(e)}function i(e){o(e.capabilities)}function o(e){e&&(n(e.objects),a(e.dataRoles),s(e.dataViewMappings))}function n(t){for(var r in t){var i=t[r];if(i){var o=i.properties;if(o)for(var n in o){var a=o[n];if(a){var s=a.type;s&&s.enumeration&&(s.enumeration=e.createEnumType(s.enumeration))}}}}}function a(e){for(var t in e){var r=e[t];r&&r.kind&&(r.kind=u(r.kind.toString()))}}function s(e){for(var t in e){var r=e[t];if(r){var i=r.conditions;if(i)for(var o in i){var n=i[o];if(n)for(var a in n){var s=n[a];s&&s.kind&&(n[a].kind=u(s.kind.toString()))}}}}}function u(t){switch(t.toLowerCase()){case"grouping":case e.VisualDataRoleKind.Grouping.toString():return e.VisualDataRoleKind.Grouping;case"measure":case e.VisualDataRoleKind.Measure.toString():return e.VisualDataRoleKind.Measure;case"groupingormeasure":case e.VisualDataRoleKind.GroupingOrMeasure.toString():return e.VisualDataRoleKind.GroupingOrMeasure}}function l(e){c(e.capabilities)}function c(e){e&&(p(e.objects),d(e.dataRoles))}function p(t){for(var r in t){var i=t[r];if(i){i=t[r]=_.mapValues(i,v);var o=i.properties;if(o)for(var n in o){var a=o[n];if(a){a=o[n]=_.mapValues(a,v);var s=a.type;if(s&&s.enumeration&&_.isFunction(s.enumeration.members)){var u=s.enumeration.members().map(function(e){return _.mapValues(e,v)});s.enumeration=e.createEnumType(u)}}}}}}function d(e){for(var t in e){var r=e[t];r&&(e[t]=_.mapValues(r,v))}}function v(t,r){return _.isString(t)||_.indexOf(f,r)===-1?t:e.data.getDisplayName(t,y)}var f=["displayName","description","placeHolderText"],y={get:function(e){return e},getOptional:function(e){return e}};t.transformPlugin=r}(r=t.visualPluginAdapter||(t.visualPluginAdapter={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r=function(){function t(e,t,r,i,o,n){this.wrappedVisual=e,this.visualPlugin=t,this.promiseFactory=r,this.telemetryService=i,this.isPluginInError=o,this.silent=n,this.startTimeISO=(new Date).toISOString()}return t.prototype.init=function(e){var t=this;this.wrappedVisual.init&&this.executeSafely(function(){return t.wrappedVisual.init(e)})},t.prototype.destroy=function(){var e=this;this.wrappedVisual.destroy&&this.executeSafely(function(){return e.wrappedVisual.destroy()})},t.prototype.update=function(t){var r=this;this.wrappedVisual.update&&this.executeSafely(function(){if(r.wrappedVisual.update(t),r.telemetryService&&r.startTimeISO){var i=(new Date).toISOString();r.telemetryService.logEvent(e.telemetry.VisualApiUsage,r.visualPlugin.name,r.visualPlugin.apiVersion,!!r.visualPlugin.custom,r.visualPlugin.version,r.startTimeISO,i,void 0,r.isPluginInError,e.telemetry.ErrorSource.User,void 0),r.startTimeISO=null}})},t.prototype.updateAsync=function(e){return this.promiseFactory.resolve(this.update(e))},t.prototype.onResizing=function(e,t){var r=this;this.wrappedVisual.onResizing&&this.executeSafely(function(){return r.wrappedVisual.onResizing(e,t)})},t.prototype.onDataChanged=function(e){var t=this;this.wrappedVisual.onDataChanged&&this.executeSafely(function(){return t.wrappedVisual.onDataChanged(e)})},t.prototype.onViewModeChanged=function(e){var t=this;this.wrappedVisual.onViewModeChanged&&this.executeSafely(function(){return t.wrappedVisual.onViewModeChanged(e)})},t.prototype.onClearSelection=function(){var e=this;this.wrappedVisual.onClearSelection&&this.executeSafely(function(){return e.wrappedVisual.onClearSelection()})},t.prototype.canResizeTo=function(e){var t=this;if(this.wrappedVisual.canResizeTo)return this.executeSafely(function(){return t.wrappedVisual.canResizeTo(e)})},t.prototype.enumerateObjectInstances=function(e){var t=this;if(this.wrappedVisual.enumerateObjectInstances)return this.executeSafely(function(){return t.wrappedVisual.enumerateObjectInstances(e)})},t.prototype.enumerateObjectRepetition=function(){var e=this;if(this.wrappedVisual.enumerateObjectRepetition)return this.executeSafely(function(){return e.wrappedVisual.enumerateObjectRepetition()})},t.prototype.enumerateObjectInstancesAsync=function(e){var t=this;return this.visualAdapter.enumerateObjectInstancesAsync?this.executeSafely(function(){return t.visualAdapter.enumerateObjectInstancesAsync(e)}):this.promiseFactory.resolve(this.enumerateObjectInstances(e))},t.prototype.enumerateObjectRepetitionAsync=function(){var e=this;return this.visualAdapter.enumerateObjectRepetitionAsync?this.executeSafely(function(){return e.visualAdapter.enumerateObjectRepetitionAsync()}):this.promiseFactory.resolve(this.enumerateObjectRepetition())},Object.defineProperty(t.prototype,"sandbox",{get:function(){return this.visualAdapter&&this.visualAdapter.sandbox},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visualAdapter",{get:function(){return this.wrappedVisual},enumerable:!0,configurable:!0}),t.prototype.unwrap=function(){var e=this.wrappedVisual;return e.unwrap?e.unwrap():e},t.prototype.executeSafely=function(t){try{return t()}catch(t){!this.silent,this.telemetryService&&this.telemetryService.logEvent(e.telemetry.VisualException,this.visualPlugin.name,!!this.visualPlugin.custom,this.visualPlugin.apiVersion,t.fileName,t.lineNumber,t.columnNumber,t.stack,t.message)}},t}();t.VisualSafeExecutionWrapper=r}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e){return function(t){t.__transform__=e.transform}}e.VisualPlugin=t}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e){return new r(e)}e.createColorPalette=t;var r=function(){function e(e){this.colorPalette={},this.colorIndex=0,this.colors=e}return e.prototype.getColor=function(e){var t=this.colorPalette[e];if(t)return t;var r=this.colors;return t=this.colorPalette[e]=r[this.colorIndex++],this.colorIndex>=r.length&&(this.colorIndex=0),t},e.prototype.reset=function(){return this.colorIndex=0,this},e}()}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r=function(){function t(){}return t.prototype.withCategory=function(e,t){return e&&e.source&&e.source.queryName&&e.identity&&(this.ensureDataMap()[e.source.queryName]=[e.identity[t]]),this},t.prototype.withSeries=function(e,t){return e&&e.source&&e.source.queryName&&t&&(this.ensureDataMap()[e.source.queryName]=[t.identity]),this},t.prototype.withMeasure=function(e){return this.measure=e,this},t.prototype.createSelectionId=function(){return e.visuals.SelectionId.createWithSelectorForColumnAndMeasure(this.ensureDataMap(),this.measure)},t.prototype.ensureDataMap=function(){return this.dataMap||(this.dataMap={}),this.dataMap},t}();t.SelectionIdBuilder=r}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r=function(){function t(e){this.dataPointObjectName="dataPoint",this.filterPropertyIdentifier={objectName:"general",propertyName:"filter"},this.hostServices=e.hostServices,this.selectedIds=[],this.promiseFactory=this.hostServices.promiseFactory()}return t.prototype.select=function(e,t){void 0===t&&(t=!1);var r=this.promiseFactory.defer();return e?(e instanceof Array||(e=[e]),this.hostServices.shouldRetainSelection()?this.sendSelectionToHost(e):(this.selectInternal(e,t),this.sendSelectionToHost(this.selectedIds)),r.resolve(this.selectedIds),r.promise):(r.reject(),r.promise)},t.prototype.showContextMenu=function(e,t){var r=this.promiseFactory.defer();return this.sendContextMenuToHost(e,t),r.resolve(null),r.promise},t.prototype.hasSelection=function(){return this.selectedIds.length>0},t.prototype.clear=function(){var e=this.promiseFactory.defer();return this.selectedIds=[],this.sendSelectionToHost([]),e.resolve(null),e.promise},t.prototype.getSelectionIds=function(){return this.selectedIds},t.prototype.sendSelectionToHost=function(e){var t=this.dataPointObjectName,r={visualObjects:_.chain(e).filter(function(e){return e.hasIdentity()}).map(function(e){return{objectName:t,selectorsByColumn:e.getSelectorsByColumn()}}).value(),selectors:void 0},i=!1;_.isEmpty(e)||(i=e[0].getSelector()&&!e[0].getSelectorsByColumn()),i&&(r.selectors=_.chain(e).filter(function(e){return e.hasIdentity()}).map(function(e){return e.getSelector()}).value()),this.hostServices.onSelect(r)},t.prototype.sendContextMenuToHost=function(e,r){var i=t.getSelectorsByColumn([e]);if(!_.isEmpty(i)){var o={data:i,position:r};this.hostServices.onContextMenu(o)}},t.prototype.selectInternal=function(e,r){var i=this;e.length<1||(e.length>1?r?this.selectedIds=e.filter(function(e){return!i.selectedIds.some(function(t){return t.equals(e)})}).concat(this.selectedIds.filter(function(t){return!e.some(function(e){return e.equals(t)})})):this.selectedIds=e:t.containsSelection(this.selectedIds,e[0])?r?this.selectedIds=this.selectedIds.filter(function(t){return!e[0].equals(t)}):this.selectedIds=this.selectedIds.length>1?e:[]:r?this.selectedIds.push(e[0]):this.selectedIds=e)},t.containsSelection=function(e,t){return e.some(function(e){return t.equals(e)})},t.getSelectorsByColumn=function(e){return _(e).filter(function(e){return e.hasIdentity}).map(function(e){return e.getSelectorsByColumn()}).compact().value()},t.createChangeForFilterProperty=function(e,t){var r={},i={objectName:e.objectName,selector:void 0,properties:r};return null==t?(r[e.propertyName]={},{remove:[i]}):(r[e.propertyName]=t,{merge:[i]})},t.prototype.getFilterFromSelectors=function(){if(this.hasSelection()){var t=_.chain(this.selectedIds).filter(function(e){return e.hasIdentity()}).map(function(e){return e.getSelector()}).value();return e.data.Selector.filterFromSelector(t,!1)}},t.prototype.applySelectionFilter=function(){this.hostServices.persistProperties(t.createChangeForFilterProperty(this.filterPropertyIdentifier,this.getFilterFromSelectors()))},t}();t.SelectionManager=r}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e){return new r(e)}e.createTooltipService=t;var r=function(){function t(e){this.hostServices=e.hostServices,this.tooltipService=this.hostServices.tooltips()}return t.prototype.enabled=function(){return this.tooltipService&&this.tooltipService.enabled()},t.prototype.show=function(t){if(this.enabled()){var r={coordinates:t.coordinates,dataItems:t.dataItems,isTouchEvent:t.isTouchEvent,identities:e.SelectionManager.getSelectorsByColumn(t.identities)};this.tooltipService.show(r)}},t.prototype.move=function(t){if(this.enabled()){var r={coordinates:t.coordinates,dataItems:t.dataItems,isTouchEvent:t.isTouchEvent,identities:e.SelectionManager.getSelectorsByColumn(t.identities)};this.tooltipService.move(r)}},t.prototype.hide=function(e){this.enabled()&&this.tooltipService.hide(e)},t}()}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(t){function r(e){var t=e,r=null!=t.data||null!=t.selectors,i=_.any(t.visualObjects,function(e){return e.selectorsByColumn&&e.selectorsByColumn.metadata&&!_.isArray(e.selectorsByColumn.metadata)});return r||i}function i(e){var t;if(e.data2)t=e.data2;else{if(!e.visualObjects)return[];t=_.map(e.visualObjects,function(e){return e.selectorsByColumn})}for(var r=0,i=t;r<i.length;r++){var o=i[r],n=o.metadata;n&&!_.isArray(n)&&(o.metadata=[n])}return t}function o(e){return null!=e.selectors?e.selectors:e.data?e.data:e.visualObjects?_.map(e.visualObjects,function(e){return n.convertSelectorsByColumnToSelector(e.selectorsByColumn)}):e.data}var n=e.data.Selector;t.isOldSelectEventArgs=r,t.getSelectorsByColumn=i,t.getSelectors=o}(r=t.legacy||(t.legacy={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){function i(t){var r=t.type||e.VisualUpdateType.Data;return r&e.VisualUpdateType.Resize&&2===t.resizeMode&&(r|=e.VisualUpdateType.ResizeEnd),r}r.convertLegacyUpdateType=i;var o=function(e,t){return{update:function(t){e.update&&e.update({viewport:t.viewport,dataViews:t.dataViews,viewMode:t.viewMode,type:i(t)})},destroy:function(){e.destroy&&e.destroy()},enumerateObjectInstances:function(t){return e.enumerateObjectInstances?e.enumerateObjectInstances(t)||[]:[]}}},n=function(e){return{}};t.visualApiVersions.push({version:"1.0.0",overloads:o,hostAdapter:n})}(r=t.v100||(t.v100={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=function(e,r){return{update:function(r){if(e.update){var i={viewport:r.viewport,dataViews:r.dataViews,viewMode:r.viewMode,type:t.v100.convertLegacyUpdateType(r)},o=e.constructor.__transform__;_.isFunction(o)?e.update(i,o(i.dataViews)):e.update(i)}}}},o=function(r){return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colors:e.visuals.ThemeManager.getDefaultTheme()}};t.visualApiVersions.push({version:"1.1.0",overloads:i,hostAdapter:o})}(r=t.v110||(t.v110={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=function(e,r){return{update:function(i){if(e.update){var o={viewport:i.viewport,dataViews:i.dataViews,viewMode:i.viewMode,type:t.v100.convertLegacyUpdateType(i)};r.colorPalette.reset();var n=e.constructor.__transform__;_.isFunction(n)?e.update(o,n(o.dataViews)):e.update(o)}}}},o=function(r){return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colorPalette:t.createColorPalette(e.visuals.ThemeManager.getDefaultTheme()),persistProperties:function(e){return r.host.persistProperties(e)}}};t.visualApiVersions.push({version:"1.2.0",overloads:i,hostAdapter:o})}(r=t.v120||(t.v120={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=function(r){return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({
hostServices:r.host})},colorPalette:t.createColorPalette(e.visuals.ThemeManager.getDefaultTheme()),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host})}};t.visualApiVersions.push({version:"1.3.0",hostAdapter:i})}(r=t.v130||(t.v130={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=function(r){return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colorPalette:t.createColorPalette(e.visuals.ThemeManager.getDefaultTheme()),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host}),locale:r.host.locale()}};t.visualApiVersions.push({version:"1.4.0",hostAdapter:i})}(r=t.v140||(t.v140={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=function(r){return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colorPalette:t.createColorPalette(e.visuals.ThemeManager.getDefaultTheme()),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive}};t.visualApiVersions.push({version:"1.5.0",hostAdapter:i})}(r=t.v150||(t.v150={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var r;!function(r){var i=function(e,r){return{update:function(i){if(e.update){var o={viewport:i.viewport,dataViews:i.dataViews,viewMode:i.viewMode,editMode:i.editMode,type:t.v100.convertLegacyUpdateType(i)};r.colorPalette.reset();var n=e.constructor.__transform__;_.isFunction(n)?e.update(o,n(o.dataViews)):e.update(o)}}}},o=function(r){return{createSelectionIdBuilder:function(){return new e.visuals.SelectionIdBuilder},createSelectionManager:function(){return new t.SelectionManager({hostServices:r.host})},colorPalette:t.createColorPalette(e.visuals.ThemeManager.getDefaultTheme()),persistProperties:function(e){return r.host.persistProperties(e)},tooltipService:t.createTooltipService({hostServices:r.host}),locale:r.host.locale(),allowInteractions:!(!r||!r.interactivity)&&r.interactivity.isVisualInteractive}};t.visualApiVersions.push({version:"1.6.0",overloads:i,hostAdapter:o})}(r=t.v160||(t.v160={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));